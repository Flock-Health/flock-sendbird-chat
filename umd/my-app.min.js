/*!
 * my-app v1.0.0
 * MIT Licensed
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.FlockChat=t(require("react")):e.FlockChat=t(e.React)}(window,(function(e){return function(e){function t(t){for(var n,a,i=t[0],s=t[1],o=0,c=[];o<i.length;o++)a=i[o],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&c.push(r[a][0]),r[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);c.length;)c.shift()()}var n={},r={0:0};function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+""+e+".my-app.min.js"}(e);var l=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,n[1](l)}r[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var i=window.webpackJsonpFlockChat=window.webpackJsonpFlockChat||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var l=s;return a(a.s=9)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ie})),n.d(t,"b",(function(){return Ga})),n.d(t,"c",(function(){return aa})),n.d(t,"d",(function(){return ca})),n.d(t,"e",(function(){return ee})),n.d(t,"f",(function(){return xa})),n.d(t,"g",(function(){return Pa})),n.d(t,"h",(function(){return Ea})),n.d(t,"i",(function(){return Me})),n.d(t,"j",(function(){return Fe})),n.d(t,"k",(function(){return A})),n.d(t,"l",(function(){return H})),n.d(t,"m",(function(){return P})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return Ba})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return S})),n.d(t,"r",(function(){return b})),n.d(t,"s",(function(){return L})),n.d(t,"t",(function(){return g})),n.d(t,"u",(function(){return Da})),n.d(t,"v",(function(){return Oi})),n.d(t,"w",(function(){return ze})),n.d(t,"x",(function(){return Ni})),n.d(t,"y",(function(){return G})),n.d(t,"z",(function(){return F})),n.d(t,"A",(function(){return a})),n.d(t,"B",(function(){return T})),n.d(t,"C",(function(){return z})),n.d(t,"D",(function(){return B})),n.d(t,"E",(function(){return Ue})),n.d(t,"F",(function(){return Le})),n.d(t,"G",(function(){return ke})),n.d(t,"H",(function(){return le})),n.d(t,"I",(function(){return Na})),n.d(t,"J",(function(){return N})),n.d(t,"K",(function(){return ji})),n.d(t,"L",(function(){return E})),n.d(t,"M",(function(){return j})),n.d(t,"N",(function(){return Di})),n.d(t,"O",(function(){return ts})),n.d(t,"P",(function(){return xi})),n.d(t,"Q",(function(){return k})),n.d(t,"R",(function(){return s})),n.d(t,"S",(function(){return ki})),n.d(t,"T",(function(){return Li})),n.d(t,"U",(function(){return Ui})),n.d(t,"V",(function(){return Ri})),n.d(t,"W",(function(){return fe})),n.d(t,"X",(function(){return Ci})),n.d(t,"Y",(function(){return Yi})),n.d(t,"Z",(function(){return Qi})),n.d(t,"ab",(function(){return $i})),n.d(t,"bb",(function(){return Ji})),n.d(t,"cb",(function(){return Xi})),n.d(t,"db",(function(){return Zi})),n.d(t,"eb",(function(){return ne})),n.d(t,"fb",(function(){return pi})),n.d(t,"gb",(function(){return Se})),n.d(t,"hb",(function(){return ge})),n.d(t,"ib",(function(){return V})),n.d(t,"jb",(function(){return Ra})),n.d(t,"kb",(function(){return W})),n.d(t,"lb",(function(){return X})),n.d(t,"mb",(function(){return M})),n.d(t,"nb",(function(){return q})),n.d(t,"ob",(function(){return wi})),n.d(t,"pb",(function(){return Q})),n.d(t,"qb",(function(){return la})),n.d(t,"rb",(function(){return ye})),n.d(t,"sb",(function(){return Ce})),n.d(t,"tb",(function(){return h})),n.d(t,"ub",(function(){return Ka})),n.d(t,"vb",(function(){return Ge})),n.d(t,"wb",(function(){return Y})),n.d(t,"xb",(function(){return ce})),n.d(t,"yb",(function(){return Ve})),n.d(t,"zb",(function(){return Pi})),n.d(t,"Ab",(function(){return Oe})),n.d(t,"Bb",(function(){return pe})),n.d(t,"Cb",(function(){return Ne})),n.d(t,"Db",(function(){return K})),n.d(t,"Eb",(function(){return Ii})),n.d(t,"Fb",(function(){return _e})),n.d(t,"Gb",(function(){return Fi})),n.d(t,"Hb",(function(){return Oa})),n.d(t,"Ib",(function(){return o})),n.d(t,"Jb",(function(){return U})),n.d(t,"Kb",(function(){return ue})),n.d(t,"Lb",(function(){return w})),n.d(t,"Mb",(function(){return Ti})),n.d(t,"Nb",(function(){return De})),n.d(t,"Ob",(function(){return Mi})),n.d(t,"Pb",(function(){return Ya})),n.d(t,"Qb",(function(){return Si})),n.d(t,"Rb",(function(){return he})),n.d(t,"Sb",(function(){return de})),n.d(t,"Tb",(function(){return l})),n.d(t,"Ub",(function(){return oe})),n.d(t,"Vb",(function(){return re})),n.d(t,"Wb",(function(){return Ie})),n.d(t,"Xb",(function(){return i})),n.d(t,"Yb",(function(){return Ae})),n.d(t,"Zb",(function(){return R})),n.d(t,"ac",(function(){return be})),n.d(t,"bc",(function(){return me})),n.d(t,"cc",(function(){return ve})),n.d(t,"dc",(function(){return $})),n.d(t,"ec",(function(){return xe})),n.d(t,"fc",(function(){return d})),n.d(t,"gc",(function(){return u})),n.d(t,"hc",(function(){return y})),n.d(t,"ic",(function(){return c})),n.d(t,"jc",(function(){return La})),n.d(t,"kc",(function(){return as})),n.d(t,"lc",(function(){return ae})),n.d(t,"mc",(function(){return f})),n.d(t,"nc",(function(){return os})),n.d(t,"oc",(function(){return Ua})),n.d(t,"pc",(function(){return da})),n.d(t,"qc",(function(){return sa}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function o(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return s}function d(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var h,f="4.9.10",p=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();!function(e){e[e.STAT_LOG_NOT_ALLOWED=400108]="STAT_LOG_NOT_ALLOWED",e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR"}(h||(h={}));var m,b,_,g,v,E=function(e){return!(e instanceof y&&!e.shouldThrowOutside)},y=function(e){function t(n){var r=n.code,a=void 0===r?0:r,i=n.message,s=void 0===i?"":i,o=e.call(this,s)||this;return o.shouldThrowOutside=!1,o.name="SendbirdError",o.code=a,Object.setPrototypeOf(o,t.prototype),o}return a(t,e),Object.defineProperty(t.prototype,"isInvalidTokenError",{get:function(){return this.code===h.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===h.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===h.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionRevokedError",{get:function(){return this.code===h.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===h.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===h.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(t,"debugModeRequired",{get:function(){return new t({code:h.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"lostInstance",{get:function(){return new t({code:h.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidCommand",{get:function(){return new t({code:h.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"unknown",{get:function(){return new t({code:h.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRenew",{get:function(){return new t({code:h.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidConnectionStateTransition",{get:function(){return new t({code:h.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRequired",{get:function(){return new t({code:h.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionCanceled",{get:function(){return new t({code:h.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidParameters",{get:function(){return new t({code:h.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"notSupportedError",{get:function(){return new t({code:h.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"channelTypeNotSupportedError",{get:function(){return new t({code:h.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"networkError",{get:function(){return new t({code:h.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"markAsReadAllRateLimitExceeded",{get:function(){return new t({code:h.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"queryInProgress",{get:function(){return new t({code:h.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"noAckTimeout",{get:function(){return new t({code:h.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"loginTimeout",{get:function(){return new t({code:h.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionClosed",{get:function(){return new t({code:h.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestFailed",{get:function(){return new t({code:h.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"alreadyConnectedAsAnotherUser",{get:function(){return new t({code:h.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fileUploadCanceled",{get:function(){return new t({code:h.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestCanceled",{get:function(){return new t({code:h.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRefreshFailed",{get:function(){return new t({code:h.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRequestFailed",{get:function(){return new t({code:h.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseError",{get:function(){return new t({code:h.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fileSizeLimitExceededError",{get:function(){return new t({code:h.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),t.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},t}(Error),O=[h.CONNECTION_REQUIRED,h.NETWORK_ERROR,h.ACK_TIMEOUT,h.WEBSOCKET_CONNECTION_CLOSED,h.WEBSOCKET_CONNECTION_FAILED,h.FILE_UPLOAD_CANCEL_FAILED,h.REQUEST_CANCELED,h.INTERNAL_SERVER_ERROR,h.RATE_LIMIT_EXCEEDED,h.UNKNOWN_SERVER_ERROR],C=[h.WEBSOCKET_CONNECTION_CLOSED,h.WEBSOCKET_CONNECTION_FAILED,h.CONNECTION_REQUIRED],N=function(e,t){if(e!==t){var n=i({},e),r=i({},t);return!(n.hasOwnProperty("messageId")&&r.hasOwnProperty("messageId")&&n.messageId!==r.messageId||n.hasOwnProperty("reqId")&&r.hasOwnProperty("reqId")&&n.reqId!==r.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)!==JSON.stringify(r)))}return!0},T=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||("string"!=typeof e?"object"==typeof e?S(e,t):I(e,t):typeof t===e)},S=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Object.values(e).includes(t)},I=function(e,t){return t instanceof e},A=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Array.isArray(t)&&t.every((function(t){return T(e,t)}))},w=function(e,t){return void 0===t&&(t=!1),!(!t||void 0!==e)||"number"==typeof e&&13===e.toString().length},M=function(e){return e>0&&O.indexOf(e)>=0},j=function(e){return e>0&&C.indexOf(e)>=0},R=function(e,t){if(void 0===t&&(t=!1),t&&null==e)return!0;var n="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!n){if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n},U=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=d([],u(e),!1).sort(),r=d([],u(t),!1).sort(),a=0;a<n.length;++a)if(n[a]!==r[a])return!1;return!0},L=function(){function e(e){var t=void 0===e?{}:e,n=t.useMemberInfoInMessage,r=void 0===n||n,a=t.typingIndicatorInvalidateTime,i=void 0===a?1e4:a,s=t.typingIndicatorThrottle,o=void 0===s?1e3:s,l=t.websocketResponseTimeout,c=void 0===l?1e4:l,u=t.websocketPayloadDecompression,d=void 0===u||u,h=t.sessionTokenRefreshTimeout,f=void 0===h?60:h;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=r,this._typingIndicatorInvalidateTime=i,this._typingIndicatorThrottle=o,this._websocketResponseTimeout=c,this._sessionTokenRefreshTimeout=f,this.websocketPayloadDecompression=d}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(e){T("boolean",e)&&(this._useMemberInfoInMessage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(e){T("number",e)&&(this._typingIndicatorInvalidateTime=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(e){T("number",e)&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(e){T("number",e)&&e>=5e3&&e<=3e4&&(this._websocketResponseTimeout=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(e){T("number",e)&&(e<60?e=60:e>1800&&(e=1800),this._sessionTokenRefreshTimeout=e)},enumerable:!1,configurable:!0}),e}(),k={encrypt:function(e){return e},decrypt:function(e){return e}},D=function(){function e(e){var t=e.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:this._keysAddress,value:d([],u(this._preference.keys()),!1)})];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(e,t){var n;return void 0===t&&(t=1),o(this,void 0,void 0,(function(){var r,a,i,s,o,u,d,h,f,p;return l(this,(function(l){switch(l.label){case 0:return this._version=t,this._keysAddress=e,r="".concat(e,".metadata.version"),[4,this._store.get(r)];case 1:return a=l.sent(),[4,this._store.get(e)];case 2:return i=null!==(n=l.sent())&&void 0!==n?n:[],!a||a.version<this._version?[4,this._resetPreferenceData(i,r)]:[3,4];case 3:return l.sent(),[3,11];case 4:l.trys.push([4,9,10,11]),s=c(i),o=s.next(),l.label=5;case 5:return o.done?[3,8]:(u=o.value,[4,this._store.get(u)]);case 6:(d=l.sent())&&this._preference.set(u,d),l.label=7;case 7:return o=s.next(),[3,5];case 8:return[3,11];case 9:return h=l.sent(),f={error:h},[3,11];case 10:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(f)throw f.error}return[7];case 11:return[2]}}))}))},e.prototype._resetPreferenceData=function(e,t){return o(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return this._preference=new Map,[4,this._store.removeMany(e)];case 1:return n.sent(),[4,this._store.set({key:t,value:{version:this._version}})];case 2:return n.sent(),[2]}}))}))},e.prototype.get=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){return[2,this._preference.get(e)]}))}))},e.prototype.set=function(e,t){return o(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return n=!this._preference.has(e),[4,this._store.set({key:e,value:t})];case 1:return r.sent(),this._preference.set(e,t),n?[4,this._savePreferenceKeys()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.remove=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this._store.remove(e)];case 1:return t.sent(),this._preference.delete(e),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this._store.removeMany(d([],u(this._preference.keys()),!1))];case 1:return e.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},e}(),x=function(){function e(e){var t=e.encryption,n=e.store,r=e.localCacheEnabled,a=e.localCacheConfig;this.store=n,this.preference=new D({store:n}),this.encryption=null!=t?t:k,this.localCacheEnabled=r,this.localCacheConfig=a}return e.prototype.replaceStore=function(e){this.store=e,this.preference=new D({store:e})},e}();!function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"}(m||(m={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(b||(b={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(_||(_={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(g||(g={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(v||(v={}));var P,F=function(){function e(e){var t=e.channel,n=e.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=n}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),H=function(){function e(e){var t=void 0===e?{}:e,n=t.maxSize,r=void 0===n?256:n,a=t.clearOrder,i=void 0===a?v.MESSAGE_COLLECTION_ACCESSED_AT:a,s=t.customClearOrderComparator,o=t.enableAutoResend,l=void 0===o||o;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(e,t){return e.channel.messageCollectionLastAccessedAt===t.channel.messageCollectionLastAccessedAt?e.channel.lastMessage&&!t.channel.lastMessage?1:!e.channel.lastMessage&&t.channel.lastMessage?-1:e.channel.lastMessage||t.channel.lastMessage?e.channel.lastMessage.createdAt-t.channel.lastMessage.createdAt:0:e.channel.messageCollectionLastAccessedAt>t.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(r,64),s?(this._clearOrder=i,this._customClearOrderComparator=s):this._clearOrder=v.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=l}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var e;return this._clearOrder===v.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:null!==(e=this._customClearOrderComparator)&&void 0!==e?e:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),e}();!function(e){e.FEED="feed",e.CHAT="chat"}(P||(P={}));var G,B,z,V,q,K,W,Y,Q,X,Z=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e.prototype.hasLessServiceScopeThan=function(e){var t;return!this.sessionKey||!(null===(t=this.services)||void 0===t?void 0:t.includes(P.CHAT))||e.includes(P.CHAT)},e}(),$=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},J=function(){function e(e){var t=e.container;this._container={},this._container=t,this.key=$()}return e.prototype._register=function(e,t,n){var r;return e in this._container||(this._container[e]=new Map),null===(r=this._container[e])||void 0===r||r.set(this.key,{occurence:t,handler:n}),this},e.prototype.on=function(e,t){return this._register(e,-1,t)},e.prototype.once=function(e,t){return this._register(e,1,t)},e.prototype.close=function(){var e;for(var t in this._container)null===(e=this._container[t])||void 0===e||e.delete(this.key)},e}(),ee=function(){function e(){this._container={}}return e.prototype.on=function(e,t){return new J({container:this._container}).on(e,t)},e.prototype.once=function(e,t){return new J({container:this._container}).once(e,t)},e.prototype.dispatch=function(e,t){var n,r,a=this._container[e];if(a){var i=[];try{for(var s=c(a.keys()),o=s.next();!o.done;o=s.next()){var l=o.value,u=a.get(l);u.handler(t),u.occurence>0&&(u.occurence--,0===u.occurence&&i.push(l))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}i.forEach((function(e){return a.delete(e)}))}},e}(),te=function(){function e(){this._dispatcher=new ee}return e.prototype.on=function(e){return this._dispatcher.on("event",e)},e.prototype.once=function(e){return this._dispatcher.once("event",e)},e.prototype.dispatch=function(e){this._dispatcher.dispatch("event",e)},e}(),ne=function(){},re=function(e){var t={};return e&&Object.keys(e).forEach((function(n){void 0===e[n]||Number.isNaN(e[n])||null===e[n]||(t[n]=e[n])})),t},ae=function(e){if(null!=e){if("object"==typeof e){if(Array.isArray(e)){var t=d([],u(e),!1);for(var n in t)t[n]=ae(t[n]);return t}for(var r in e)null===e[r]&&delete e[r];return e}return e}};!function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"}(G||(G={})),function(e){e.OPERATOR="operator",e.NONE="none"}(B||(B={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(z||(z={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(V||(V={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(q||(q={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(K||(K={})),function(e){e.USERS="users",e.CHANNEL="channel"}(W||(W={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(Y||(Y={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(Q||(Q={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(X||(X={}));var ie,se="v3",oe="/".concat(se,"/users"),le="/".concat(se,"/storage/file"),ce="/".concat(se,"/group_channels"),ue="/".concat(se,"/sdk/group_channels"),de="/".concat(se,"/open_channels"),he="/".concat(se,"/sdk/open_channels"),fe="/".concat(se,"/search"),pe="/".concat(se,"/report"),me="/".concat(se,"/emojis"),be="/".concat(se,"/emoji_categories"),_e="/".concat(se,"/polls"),ge="/".concat(se,"/scheduled_messages"),ve="/".concat(se,"/sdk/ui_kit/configuration"),Ee="/".concat(se,"/sdk/statistics"),ye=("/".concat(se,"/notifications"),function(e){switch(e){case G.FEED:case G.GROUP:return ce;case G.OPEN:return de;default:return null}}),Oe=function(e){switch(e){case G.GROUP:return"".concat(pe,"/group_channels");case G.OPEN:return"".concat(pe,"/open_channels");default:return null}},Ce=function(e,t,n){var r,a;switch(e){case W.CHANNEL:return!0;case W.USERS:if(t)try{for(var i=c(t),s=i.next();!s.done;s=i.next())if(s.value===n)return!0}catch(e){r={error:e}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}}return!1},Ne=function(e,t,n){var r,a,i,s,o=Ce(null!==(r=e.mentionType)&&void 0!==r?r:null,null!==(a=e.mentionedUserIds)&&void 0!==a?a:[],n),l=Ce(null!==(i=t.mentionType)&&void 0!==i?i:null,null!==(s=t.mentionedUserIds)&&void 0!==s?s:[],n);return!o&&l?1:o&&!l?-1:0},Te=function(e,t,n){var r,a=t||new FormData;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i],o=n?"".concat(n,"[").concat(i,"]"):i;R(s)?a.append(o,s,null!==(r=s.name)&&void 0!==r?r:"filename"):"object"!=typeof s||null===s||Array.isArray(s)||s instanceof Blob?a.append(o,String(s)):a=Te(s,a,o)}return a};!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(ie||(ie={}));var Se,Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=$(),t}return a(t,e),t.prototype.encodeParams=function(e){var t=this;return null==e||""===e?encodeURIComponent(""):Array.isArray(e)?e.map((function(e){return t.encodeParams(e)})).join(","):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(String(e))},Object.defineProperty(t.prototype,"query",{get:function(){var e=this,t=re(this.params);return"?".concat(Object.keys(t).map((function(n){return"".concat(encodeURIComponent(n),"=").concat(e.encodeParams(t[n]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"payload",{get:function(){var e=re(this.params);return Object.keys(e).some((function(t){return R(e[t])}))?Te(e):JSON.stringify(e)},enumerable:!1,configurable:!0}),t}(ne),Ae=function(e){function t(t,n){var r=e.call(this)||this;return r._iid=t,r._payload=n,r}return a(t,e),Object.defineProperty(t.prototype,"payload",{get:function(){return i({},this._payload)},enumerable:!1,configurable:!0}),t.prototype.as=function(e){return new e(this._iid,this.payload)},t}(ne),we=function(e){function t(t){var n=e.call(this)||this;return n.requestId=t,n}return a(t,e),t}(ne),Me=function(e){function t(t){var n=t.expires_in,r=t.reason,a=void 0===r?h.SESSION_KEY_EXPIRED:r,i=e.call(this)||this;switch(i.expiresIn=null!=n?n:0,a){case h.SESSION_KEY_EXPIRED:case h.SESSION_TOKEN_EXPIRED:case h.SESSION_REVOKED:case h.USER_AUTH_DEACTIVATED:case h.USER_AUTH_DELETED_OR_NOT_FOUND:i.error=new y({code:a})}return i}return a(t,e),Object.defineProperty(t.prototype,"invalidateSessionToken",{get:function(){var e;return!!(null===(e=this.error)||void 0===e?void 0:e.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),t}(ne),je=function(e){function t(t){var n=e.call(this)||this;return n.statLog=t,n}return a(t,e),t}(ne),Re=function(e){function t(t){var n=t.request,r=t.deferred,a=t.error,i=void 0===a?y.requestFailed:a,s=e.call(this)||this;return s.request=n,s.deferred=r,s.error=i,s}return a(t,e),t}(ne);!function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"}(Se||(Se={}));var Ue,Le,ke,De=function(){function e(e){var t=e.type,n=e.data,r=e.ts,a=void 0===r?Date.now():r;this.type=t,this.createdAt=a,this.data=n}return e.payloadify=function(e){return re({stat_type:e.type,ts:e.createdAt,data:re(e.data)})},e}(),xe=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},Pe=function(){return!("undefined"==typeof navigator||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};!function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live"}(Ue||(Ue={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}(Le||(Le={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(ke||(ke={}));var Fe="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",He=function(){function e(){}return e.sendbirdSdkUserAgentWithExtension=function(e){var t=xe()?Le.REACT_NATIVE:Le.JS,n={main_sdk_info:"chat/".concat(t,"/").concat(p.SDK_VERSION),device_os_platform:Pe()?"mobile-web":"web",os_version:p.OS_VERSION};if(e){var r=e.sendbirdExtensions,a=e.deviceOS,s=e.customData,o=void 0===s?{}:s;a.version&&(n.os_version=a.version),a.platform&&(n.device_os_platform=a.platform),r.length>0&&(n.extension_sdk_info=r.map((function(e){var t=e.product,n=e.platform,r=e.version;return"".concat(t,"/").concat(n,"/").concat(r)})).join(",")),Object.keys(n).forEach((function(e){return delete o[e]})),Object.keys(o).length>0&&(n=i(i({},n),o))}return Object.entries(n).map((function(e){var t=u(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&")},e.userAgentWithExtension=function(e){var t=xe()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",r=e.sb_uikit?"u".concat(e.sb_uikit):"",a=e["device-os-platform"]?"o".concat(e["device-os-platform"]):Pe()?"omobile-web":"oweb";return"".concat(t,"/c").concat(p.SDK_VERSION,"/").concat(n,"/").concat(r,"/").concat(a)},e}(),Ge=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Be=function(){function t(e,t){var n=t.session,r=t.sdkState,a=t.dispatcher,i=t.logger,s=t.useFetchCompat,o=void 0!==s&&s,l=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=e,this._session=n,this._sdkState=r,this._dispatcher=a,this._dispatcher.on((function(e){e instanceof we&&l.cancel(e.requestId)})),this._logger=i,this._shouldImportFetchCompat=o}return t.prototype._createHeader=function(e,t){var n=this._sdkState,r=n.appId,a=n.appVersion,s=n.sendbirdRuntimeEnvironment,o=i(i({},e.headers),{SendBird:"JS,".concat(p.OS_VERSION,",").concat(p.SDK_VERSION,",").concat(r).concat(a?",".concat(a):""),"SB-User-Agent":He.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":He.sendbirdSdkUserAgentWithExtension(s)});return t||(o["Content-Type"]="application/json; charset=utf-8"),e.requireAuth&&this._session.hasSession&&(o["Session-Key"]=this._session.sessionKey),this._session&&this._session.authToken&&(o["App-Id"]=r,o["Access-Token"]=this._session.authToken),o},t.prototype._statLogApiResult=function(e,t,n){this._dispatcher.dispatch(new je(new De({type:Se.API_RESULT,data:{endpoint:e.path,method:e.method,success:!n,latency:Date.now()-t,error_code:null==n?void 0:n.code,error_description:null==n?void 0:n.message}})))},t.prototype.send=function(t){return o(this,void 0,void 0,(function(){var r,a,i,s,o,c,u,d,h,f,p,m,b,_,g,v;return l(this,(function(l){switch(l.label){case 0:r=t.path,a=t.method,i=![ie.GET,ie.DELETE].includes(a),s=this._sdkState.api,o="".concat(s.host).concat(r).concat(i?"":t.query),c=i?t.payload:null,u=this._createHeader(t,c instanceof FormData?c:void 0),d=new AbortController,h=d.signal,this._abortControl.set(t.requestId,d),f=Date.now(),l.label=1;case 1:return l.trys.push([1,8,,9]),this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,("undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e||{fetch:null}).fetch=null),"undefined"!=typeof AbortController?[3,3]:[4,n.e(2).then(n.t.bind(null,19,7))];case 2:l.sent(),l.label=3;case 3:return"function"==typeof fetch?[3,5]:[4,n.e(3).then(n.t.bind(null,20,7))];case 4:l.sent(),l.label=5;case 5:return[4,fetch(o,{method:a,body:c,headers:u,signal:h})];case 6:return[4,(p=l.sent()).json()];case 7:if(m=l.sent(),p.ok||p.redirected)return this._logger.debug("receive api response",t.requestId),this._statLogApiResult(t,f),[2,new Ae(this._iid,m)];if(m){if((_=new y(m)).isSessionExpiredError)return b=new Ge,this._dispatcher.dispatch(new Re({request:t,deferred:b,error:_})),this._dispatcher.dispatch(new Me({reason:_.code})),[2,b.promise];throw _.isSessionInvalidatedError?(this._dispatcher.dispatch(new Me({reason:_.code})),_):(this._statLogApiResult(t,f,_),_)}throw _=y.requestFailed,this._statLogApiResult(t,f,_),_;case 8:throw g=l.sent(),this._statLogApiResult(t,f,g),g instanceof y?(this._logger.debug("fail api request",g),g):"AbortError"===g.name?y.requestCanceled:(v=y.networkError,this._logger.debug("fail api request",v),v);case 9:return[2]}}))}))},t.prototype.cancel=function(e){this._abortControl.has(e)&&(this._abortControl.get(e).abort(),this._abortControl.delete(e))},t.prototype.cancelAll=function(){var e,t;try{for(var n=c(this._abortControl.values()),r=n.next();!r.done;r=n.next())r.value.abort()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._abortControl.clear()},t}(),ze=function(e){function t(t,n,r,a){void 0===a&&(a="");var i,s=this;return(s=e.call(this)||this)._iid=t,s.code=n,s.payload=r,s.requestId=null!==(i=r.req_id)&&void 0!==i?i:a,s}return a(t,e),t.createFromRawMessage=function(e,n){var r=n.substring(0,4),a={};try{a=JSON.parse(n.substring(4))}catch(e){r="NOOP"}finally{return new t(e,r,a)}},t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},t}(ne),Ve=function(){};function qe(e){let t=e.length;for(;--t>=0;)e[t]=0}const Ke=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),We=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ye=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Qe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xe=new Array(576);qe(Xe);const Ze=new Array(60);qe(Ze);const $e=new Array(512);qe($e);const Je=new Array(256);qe(Je);const et=new Array(29);qe(et);const tt=new Array(30);function nt(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}let rt,at,it;function st(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}qe(tt);const ot=e=>e<256?$e[e]:$e[256+(e>>>7)],lt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ct=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,lt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ut=(e,t,n)=>{ct(e,n[2*t],n[2*t+1])},dt=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ht=(e,t,n)=>{const r=new Array(16);let a,i,s=0;for(a=1;a<=15;a++)s=s+n[a-1]<<1,r[a]=s;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=dt(r[t]++,t))}},ft=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},pt=e=>{e.bi_valid>8?lt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},mt=(e,t,n,r)=>{const a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},bt=(e,t,n)=>{const r=e.heap[n];let a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&mt(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!mt(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},_t=(e,t,n)=>{let r,a,i,s,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,a=e.pending_buf[e.sym_buf+o++],0===r?ut(e,a,t):(i=Je[a],ut(e,i+256+1,t),s=Ke[i],0!==s&&(a-=et[i],ct(e,a,s)),r--,i=ot(r),ut(e,i,n),s=We[i],0!==s&&(r-=tt[i],ct(e,r,s)))}while(o<e.sym_next);ut(e,256,t)},gt=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<i;s++)0!==n[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=r[2*l+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)bt(e,n,s);l=i;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],bt(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,n[2*l]=n[2*s]+n[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,n[2*s+1]=n[2*o+1]=l,e.heap[1]=l++,bt(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,h,f,p,m=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],h=n[2*n[2*u+1]+1]+1,h>l&&(h=l,m++),n[2*u+1]=h,u>r||(e.bl_count[h]++,f=0,u>=o&&(f=s[u-o]),p=n[2*u],e.opt_len+=p*(h+f),i&&(e.static_len+=p*(a[2*u+1]+f)));if(0!==m){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--c],d>r||(n[2*d+1]!==h&&(e.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}})(e,t),ht(n,c,e.bl_count)},vt=(e,t,n)=>{let r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=s,s=t[2*(r+1)+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))},Et=(e,t,n)=>{let r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(a=s,s=t[2*(r+1)+1],!(++o<l&&a===s)){if(o<c)do{ut(e,a,e.bl_tree)}while(0!=--o);else 0!==a?(a!==i&&(ut(e,a,e.bl_tree),o--),ut(e,16,e.bl_tree),ct(e,o-3,2)):o<=10?(ut(e,17,e.bl_tree),ct(e,o-3,3)):(ut(e,18,e.bl_tree),ct(e,o-11,7));o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}};let yt=!1;const Ot=(e,t,n,r)=>{ct(e,0+(r?1:0),3),pt(e),lt(e,n),lt(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Ct={_tr_init:e=>{yt||((()=>{let e,t,n,r,a;const i=new Array(16);for(n=0,r=0;r<28;r++)for(et[r]=n,e=0;e<1<<Ke[r];e++)Je[n++]=r;for(Je[n-1]=r,a=0,r=0;r<16;r++)for(tt[r]=a,e=0;e<1<<We[r];e++)$e[a++]=r;for(a>>=7;r<30;r++)for(tt[r]=a<<7,e=0;e<1<<We[r]-7;e++)$e[256+a++]=r;for(t=0;t<=15;t++)i[t]=0;for(e=0;e<=143;)Xe[2*e+1]=8,e++,i[8]++;for(;e<=255;)Xe[2*e+1]=9,e++,i[9]++;for(;e<=279;)Xe[2*e+1]=7,e++,i[7]++;for(;e<=287;)Xe[2*e+1]=8,e++,i[8]++;for(ht(Xe,287,i),e=0;e<30;e++)Ze[2*e+1]=5,Ze[2*e]=dt(e,5);rt=new nt(Xe,Ke,257,286,15),at=new nt(Ze,We,0,30,15),it=new nt(new Array(0),Ye,0,19,7)})(),yt=!0),e.l_desc=new st(e.dyn_ltree,rt),e.d_desc=new st(e.dyn_dtree,at),e.bl_desc=new st(e.bl_tree,it),e.bi_buf=0,e.bi_valid=0,ft(e)},_tr_stored_block:Ot,_tr_flush_block:(e,t,n,r)=>{let a,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),gt(e,e.l_desc),gt(e,e.d_desc),s=(e=>{let t;for(vt(e,e.dyn_ltree,e.l_desc.max_code),vt(e,e.dyn_dtree,e.d_desc.max_code),gt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Qe[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?Ot(e,t,n,r):4===e.strategy||i===a?(ct(e,2+(r?1:0),3),_t(e,Xe,Ze)):(ct(e,4+(r?1:0),3),((e,t,n,r)=>{let a;for(ct(e,t-257,5),ct(e,n-1,5),ct(e,r-4,4),a=0;a<r;a++)ct(e,e.bl_tree[2*Qe[a]+1],3);Et(e,e.dyn_ltree,t-1),Et(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),_t(e,e.dyn_ltree,e.dyn_dtree)),ft(e),r&&pt(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Je[n]+256+1)]++,e.dyn_dtree[2*ot(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{ct(e,2,3),ut(e,256,Xe),(e=>{16===e.bi_valid?(lt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Nt=(e,t,n,r)=>{let a=65535&e|0,i=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{a=a+t[r++]|0,i=i+a|0}while(--s);a%=65521,i%=65521}return a|i<<16|0};const Tt=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var St=(e,t,n,r)=>{const a=Tt,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^a[255&(e^t[n])];return-1^e},It={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},At={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wt,_tr_stored_block:Mt,_tr_flush_block:jt,_tr_tally:Rt,_tr_align:Ut}=Ct,{Z_NO_FLUSH:Lt,Z_PARTIAL_FLUSH:kt,Z_FULL_FLUSH:Dt,Z_FINISH:xt,Z_BLOCK:Pt,Z_OK:Ft,Z_STREAM_END:Ht,Z_STREAM_ERROR:Gt,Z_DATA_ERROR:Bt,Z_BUF_ERROR:zt,Z_DEFAULT_COMPRESSION:Vt,Z_FILTERED:qt,Z_HUFFMAN_ONLY:Kt,Z_RLE:Wt,Z_FIXED:Yt,Z_DEFAULT_STRATEGY:Qt,Z_UNKNOWN:Xt,Z_DEFLATED:Zt}=At,$t=262,Jt=(e,t)=>(e.msg=It[t],t),en=e=>2*e-(e>4?9:0),tn=e=>{let t=e.length;for(;--t>=0;)e[t]=0},nn=e=>{let t,n,r,a=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=a?n-a:0}while(--t);t=a,r=t;do{n=e.prev[--r],e.prev[r]=n>=a?n-a:0}while(--t)};let rn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const an=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},sn=(e,t)=>{jt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,an(e.strm)},on=(e,t)=>{e.pending_buf[e.pending++]=t},ln=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},cn=(e,t,n,r)=>{let a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=Nt(e.adler,t,a,n):2===e.state.wrap&&(e.adler=St(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},un=(e,t)=>{let n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-$t?e.strstart-(e.w_size-$t):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258;let f=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+s]===p&&c[n+s-1]===f&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<h);if(r=258-(h-i),i=h-258,r>s){if(e.match_start=t,s=r,r>=o)break;f=c[i+s-1],p=c[i+s]}}}while((t=d[t&u])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead},dn=e=>{const t=e.w_size;let n,r,a;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$t)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),nn(e),r+=t),0===e.strm.avail_in)break;if(n=cn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=rn(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=rn(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<$t&&0!==e.strm.avail_in)},hn=(e,t)=>{let n,r,a,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a)break;if(a=e.strm.avail_out-a,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<i&&(0===n&&t!==xt||t===Lt||n!==r+e.strm.avail_in))break;s=t===xt&&n===r+e.strm.avail_in?1:0,Mt(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,an(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(cn(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==Lt&&t!==xt&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(cn(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,i=a>e.w_size?e.w_size:a,r=e.strstart-e.block_start,(r>=i||(r||t===xt)&&t!==Lt&&0===e.strm.avail_in&&r<=a)&&(n=r>a?a:r,s=t===xt&&0===e.strm.avail_in&&n===r?1:0,Mt(e,e.block_start,n,s),e.block_start+=n,an(e.strm)),s?3:1)},fn=(e,t)=>{let n,r;for(;;){if(e.lookahead<$t){if(dn(e),e.lookahead<$t&&t===Lt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-$t&&(e.match_length=un(e,n)),e.match_length>=3)if(r=Rt(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=rn(e,e.ins_h,e.window[e.strstart+1]);else r=Rt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(sn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===xt?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2},pn=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<$t){if(dn(e),e.lookahead<$t&&t===Lt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-$t&&(e.match_length=un(e,n),e.match_length<=5&&(e.strategy===qt||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=Rt(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=rn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(sn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Rt(e,0,e.window[e.strstart-1]),r&&sn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Rt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===xt?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2};function mn(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}const bn=[new mn(0,0,0,0,hn),new mn(4,4,8,4,fn),new mn(4,5,16,8,fn),new mn(4,6,32,32,fn),new mn(4,4,16,16,pn),new mn(8,16,32,32,pn),new mn(8,16,128,128,pn),new mn(8,32,128,256,pn),new mn(32,128,258,1024,pn),new mn(32,258,258,4096,pn)];function _n(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Zt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),tn(this.dyn_ltree),tn(this.dyn_dtree),tn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),tn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),tn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const gn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},vn=e=>{if(gn(e))return Jt(e,Gt);e.total_in=e.total_out=0,e.data_type=Xt;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,wt(t),Ft},En=e=>{const t=vn(e);var n;return t===Ft&&((n=e.state).window_size=2*n.w_size,tn(n.head),n.max_lazy_match=bn[n.level].max_lazy,n.good_match=bn[n.level].good_length,n.nice_match=bn[n.level].nice_length,n.max_chain_length=bn[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},yn=(e,t,n,r,a,i)=>{if(!e)return Gt;let s=1;if(t===Vt&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||n!==Zt||r<8||r>15||t<0||t>9||i<0||i>Yt||8===r&&1!==s)return Jt(e,Gt);8===r&&(r=9);const o=new _n;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=i,o.method=n,En(e)};var On=yn,Cn=(e,t)=>gn(e)||2!==e.state.wrap?Gt:(e.state.gzhead=t,Ft),Nn=(e,t)=>{if(gn(e)||t>Pt||t<0)return e?Jt(e,Gt):Gt;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==xt)return Jt(e,0===e.avail_out?zt:Gt);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(an(e),0===e.avail_out)return n.last_flush=-1,Ft}else if(0===e.avail_in&&en(t)<=en(r)&&t!==xt)return Jt(e,zt);if(666===n.status&&0!==e.avail_in)return Jt(e,zt);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=Zt+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Kt||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,ln(n,t),0!==n.strstart&&(ln(n,e.adler>>>16),ln(n,65535&e.adler)),e.adler=1,n.status=113,an(e),0!==n.pending)return n.last_flush=-1,Ft}if(57===n.status)if(e.adler=0,on(n,31),on(n,139),on(n,8),n.gzhead)on(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),on(n,255&n.gzhead.time),on(n,n.gzhead.time>>8&255),on(n,n.gzhead.time>>16&255),on(n,n.gzhead.time>>24&255),on(n,9===n.level?2:n.strategy>=Kt||n.level<2?4:0),on(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(on(n,255&n.gzhead.extra.length),on(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=St(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(on(n,0),on(n,0),on(n,0),on(n,0),on(n,0),on(n,9===n.level?2:n.strategy>=Kt||n.level<2?4:0),on(n,3),n.status=113,an(e),0!==n.pending)return n.last_flush=-1,Ft;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=St(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=a,an(e),0!==n.pending)return n.last_flush=-1,Ft;t=0,r-=a}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=St(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=St(e.adler,n.pending_buf,n.pending-r,r)),an(e),0!==n.pending)return n.last_flush=-1,Ft;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,on(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=St(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=St(e.adler,n.pending_buf,n.pending-r,r)),an(e),0!==n.pending)return n.last_flush=-1,Ft;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,on(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=St(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(an(e),0!==n.pending))return n.last_flush=-1,Ft;on(n,255&e.adler),on(n,e.adler>>8&255),e.adler=0}if(n.status=113,an(e),0!==n.pending)return n.last_flush=-1,Ft}if(0!==e.avail_in||0!==n.lookahead||t!==Lt&&666!==n.status){let r=0===n.level?hn(n,t):n.strategy===Kt?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(dn(e),0===e.lookahead)){if(t===Lt)return 1;break}if(e.match_length=0,n=Rt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(sn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===xt?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Wt?((e,t)=>{let n,r,a,i;const s=e.window;for(;;){if(e.lookahead<=258){if(dn(e),e.lookahead<=258&&t===Lt)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,r=s[a],r===s[++a]&&r===s[++a]&&r===s[++a])){i=e.strstart+258;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i);e.match_length=258-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Rt(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Rt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(sn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===xt?(sn(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(sn(e,!1),0===e.strm.avail_out)?1:2})(n,t):bn[n.level].func(n,t);if(3!==r&&4!==r||(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Ft;if(2===r&&(t===kt?Ut(n):t!==Pt&&(Mt(n,0,0,!1),t===Dt&&(tn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),an(e),0===e.avail_out))return n.last_flush=-1,Ft}return t!==xt?Ft:n.wrap<=0?Ht:(2===n.wrap?(on(n,255&e.adler),on(n,e.adler>>8&255),on(n,e.adler>>16&255),on(n,e.adler>>24&255),on(n,255&e.total_in),on(n,e.total_in>>8&255),on(n,e.total_in>>16&255),on(n,e.total_in>>24&255)):(ln(n,e.adler>>>16),ln(n,65535&e.adler)),an(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Ft:Ht)},Tn=e=>{if(gn(e))return Gt;const t=e.state.status;return e.state=null,113===t?Jt(e,Bt):Ft},Sn=(e,t)=>{let n=t.length;if(gn(e))return Gt;const r=e.state,a=r.wrap;if(2===a||1===a&&42!==r.status||r.lookahead)return Gt;if(1===a&&(e.adler=Nt(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(tn(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,dn(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=rn(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,dn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,r.wrap=a,Ft};const In=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var An=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)In(n,t)&&(e[t]=n[t])}}return e},wn=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,a=e.length;t<a;t++){let a=e[t];n.set(a,r),r+=a.length}return n};let Mn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){Mn=!1}const jn=new Uint8Array(256);for(let e=0;e<256;e++)jn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;jn[254]=jn[254]=1;var Rn=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,a,i,s=e.length,o=0;for(a=0;a<s;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<s&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<s&&(r=e.charCodeAt(a+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},Un=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,a;const i=new Array(2*n);for(a=0,r=0;r<n;){let t=e[r++];if(t<128){i[a++]=t;continue}let s=jn[t];if(s>4)i[a++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?i[a++]=65533:t<65536?i[a++]=t:(t-=65536,i[a++]=55296|t>>10&1023,i[a++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Mn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,a)},Ln=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+jn[e[n]]>t?n:t},kn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Dn=Object.prototype.toString,{Z_NO_FLUSH:xn,Z_SYNC_FLUSH:Pn,Z_FULL_FLUSH:Fn,Z_FINISH:Hn,Z_OK:Gn,Z_STREAM_END:Bn,Z_DEFAULT_COMPRESSION:zn,Z_DEFAULT_STRATEGY:Vn,Z_DEFLATED:qn}=At;function Kn(e){this.options=An({level:zn,method:qn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Vn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kn,this.strm.avail_out=0;let n=On(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Gn)throw new Error(It[n]);if(t.header&&Cn(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Rn(t.dictionary):"[object ArrayBuffer]"===Dn.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Sn(this.strm,e),n!==Gn)throw new Error(It[n]);this._dict_set=!0}}function Wn(e,t){const n=new Kn(t);if(n.push(e,!0),n.err)throw n.msg||It[n.err];return n.result}Kn.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let a,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Hn:xn,"string"==typeof e?n.input=Rn(e):"[object ArrayBuffer]"===Dn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===Pn||i===Fn)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(a=Nn(n,i),a===Bn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=Tn(this.strm),this.onEnd(a),this.ended=!0,a===Gn;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Kn.prototype.onData=function(e){this.chunks.push(e)},Kn.prototype.onEnd=function(e){e===Gn&&(this.result=wn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Yn={Deflate:Kn,deflate:Wn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Wn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Wn(e,t)},constants:At};const Qn=16209;var Xn=function(e,t){let n,r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N,T;const S=e.state;n=e.next_in,N=e.input,r=n+(e.avail_in-5),a=e.next_out,T=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=S.dmax,l=S.wsize,c=S.whave,u=S.wnext,d=S.window,h=S.hold,f=S.bits,p=S.lencode,m=S.distcode,b=(1<<S.lenbits)-1,_=(1<<S.distbits)-1;e:do{f<15&&(h+=N[n++]<<f,f+=8,h+=N[n++]<<f,f+=8),g=p[h&b];t:for(;;){if(v=g>>>24,h>>>=v,f-=v,v=g>>>16&255,0===v)T[a++]=65535&g;else{if(!(16&v)){if(0==(64&v)){g=p[(65535&g)+(h&(1<<v)-1)];continue t}if(32&v){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=Qn;break e}E=65535&g,v&=15,v&&(f<v&&(h+=N[n++]<<f,f+=8),E+=h&(1<<v)-1,h>>>=v,f-=v),f<15&&(h+=N[n++]<<f,f+=8,h+=N[n++]<<f,f+=8),g=m[h&_];n:for(;;){if(v=g>>>24,h>>>=v,f-=v,v=g>>>16&255,!(16&v)){if(0==(64&v)){g=m[(65535&g)+(h&(1<<v)-1)];continue n}e.msg="invalid distance code",S.mode=Qn;break e}if(y=65535&g,v&=15,f<v&&(h+=N[n++]<<f,f+=8,f<v&&(h+=N[n++]<<f,f+=8)),y+=h&(1<<v)-1,y>o){e.msg="invalid distance too far back",S.mode=Qn;break e}if(h>>>=v,f-=v,v=a-i,y>v){if(v=y-v,v>c&&S.sane){e.msg="invalid distance too far back",S.mode=Qn;break e}if(O=0,C=d,0===u){if(O+=l-v,v<E){E-=v;do{T[a++]=d[O++]}while(--v);O=a-y,C=T}}else if(u<v){if(O+=l+u-v,v-=u,v<E){E-=v;do{T[a++]=d[O++]}while(--v);if(O=0,u<E){v=u,E-=v;do{T[a++]=d[O++]}while(--v);O=a-y,C=T}}}else if(O+=u-v,v<E){E-=v;do{T[a++]=d[O++]}while(--v);O=a-y,C=T}for(;E>2;)T[a++]=C[O++],T[a++]=C[O++],T[a++]=C[O++],E-=3;E&&(T[a++]=C[O++],E>1&&(T[a++]=C[O++]))}else{O=a-y;do{T[a++]=T[O++],T[a++]=T[O++],T[a++]=T[O++],E-=3}while(E>2);E&&(T[a++]=T[O++],E>1&&(T[a++]=T[O++]))}break}}break}}while(n<r&&a<s);E=f>>3,n-=E,f-=E<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=a<s?s-a+257:257-(a-s),S.hold=h,S.bits=f};const Zn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Jn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),er=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tr=(e,t,n,r,a,i,s,o)=>{const l=o.bits;let c,u,d,h,f,p,m=0,b=0,_=0,g=0,v=0,E=0,y=0,O=0,C=0,N=0,T=null;const S=new Uint16Array(16),I=new Uint16Array(16);let A,w,M,j=null;for(m=0;m<=15;m++)S[m]=0;for(b=0;b<r;b++)S[t[n+b]]++;for(v=l,g=15;g>=1&&0===S[g];g--);if(v>g&&(v=g),0===g)return a[i++]=20971520,a[i++]=20971520,o.bits=1,0;for(_=1;_<g&&0===S[_];_++);for(v<_&&(v=_),O=1,m=1;m<=15;m++)if(O<<=1,O-=S[m],O<0)return-1;if(O>0&&(0===e||1!==g))return-1;for(I[1]=0,m=1;m<15;m++)I[m+1]=I[m]+S[m];for(b=0;b<r;b++)0!==t[n+b]&&(s[I[t[n+b]]++]=b);if(0===e?(T=j=s,p=20):1===e?(T=Zn,j=$n,p=257):(T=Jn,j=er,p=0),N=0,b=0,m=_,f=i,E=v,y=0,d=-1,C=1<<v,h=C-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){A=m-y,s[b]+1<p?(w=0,M=s[b]):s[b]>=p?(w=j[s[b]-p],M=T[s[b]-p]):(w=96,M=0),c=1<<m-y,u=1<<E,_=u;do{u-=c,a[f+(N>>y)+u]=A<<24|w<<16|M|0}while(0!==u);for(c=1<<m-1;N&c;)c>>=1;if(0!==c?(N&=c-1,N+=c):N=0,b++,0==--S[m]){if(m===g)break;m=t[n+s[b]]}if(m>v&&(N&h)!==d){for(0===y&&(y=v),f+=_,E=m-y,O=1<<E;E+y<g&&(O-=S[E+y],!(O<=0));)E++,O<<=1;if(C+=1<<E,1===e&&C>852||2===e&&C>592)return 1;d=N&h,a[d]=v<<24|E<<16|f-i|0}}return 0!==N&&(a[f+N]=m-y<<24|64<<16|0),o.bits=v,0};const{Z_FINISH:nr,Z_BLOCK:rr,Z_TREES:ar,Z_OK:ir,Z_STREAM_END:sr,Z_NEED_DICT:or,Z_STREAM_ERROR:lr,Z_DATA_ERROR:cr,Z_MEM_ERROR:ur,Z_BUF_ERROR:dr,Z_DEFLATED:hr}=At,fr=16180,pr=16190,mr=16191,br=16199,_r=16200,gr=16209,vr=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Er(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<fr||t.mode>16211?1:0},Or=e=>{if(yr(e))return lr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=fr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ir},Cr=e=>{if(yr(e))return lr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Or(e)},Nr=(e,t)=>{let n;if(yr(e))return lr;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?lr:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Cr(e))},Tr=(e,t)=>{if(!e)return lr;const n=new Er;e.state=n,n.strm=e,n.window=null,n.mode=fr;const r=Nr(e,t);return r!==ir&&(e.state=null),r};let Sr,Ir,Ar=!0;const wr=e=>{if(Ar){Sr=new Int32Array(512),Ir=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tr(1,e.lens,0,288,Sr,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tr(2,e.lens,0,32,Ir,0,e.work,{bits:5}),Ar=!1}e.lencode=Sr,e.lenbits=9,e.distcode=Ir,e.distbits=5},Mr=(e,t,n,r)=>{let a;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};var jr=Cr,Rr=Tr,Ur=(e,t)=>{let n,r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N=0;const T=new Uint8Array(4);let S,I;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(yr(e)||!e.output||!e.input&&0!==e.avail_in)return lr;n=e.state,n.mode===mr&&(n.mode=16192),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,d=o,h=l,C=ir;e:for(;;)switch(n.mode){case fr:if(0===n.wrap){n.mode=16192;break}for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&c,T[1]=c>>>8&255,n.check=St(n.check,T,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=gr;break}if((15&c)!==hr){e.msg="unknown compression method",n.mode=gr;break}if(c>>>=4,u-=4,O=8+(15&c),0===n.wbits&&(n.wbits=O),O>15||O>n.wbits){e.msg="invalid window size",n.mode=gr;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:mr,c=0,u=0;break;case 16181:for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==hr){e.msg="unknown compression method",n.mode=gr;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=gr;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=St(n.check,T,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,n.check=St(n.check,T,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=St(n.check,T,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(T[0]=255&c,T[1]=c>>>8&255,n.check=St(n.check,T,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+f),O)),512&n.flags&&4&n.wrap&&(n.check=St(n.check,r,f,i)),o-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;f=0;do{O=r[i+f++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O))}while(O&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=St(n.check,r,f,i)),o-=f,i+=f,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;f=0;do{O=r[i+f++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O))}while(O&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=St(n.check,r,f,i)),o-=f,i+=f,O)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=gr;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=mr;break;case 16189:for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}e.adler=n.check=vr(c),c=0,u=0,n.mode=pr;case pr:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,or;e.adler=n.check=1,n.mode=mr;case mr:if(t===rr||t===ar)break e;case 16192:if(n.last){c>>>=7&u,u-=7&u,n.mode=16206;break}for(;u<3;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(wr(n),n.mode=br,t===ar){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=gr}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=gr;break}if(n.length=65535&c,c=0,u=0,n.mode=16194,t===ar)break e;case 16194:n.mode=16195;case 16195:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;a.set(r.subarray(i,i+f),s),o-=f,i+=f,l-=f,s+=f,n.length-=f;break}n.mode=mr;break;case 16196:for(;u<14;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=gr;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.lens[A[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},C=tr(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,C){e.msg="invalid code lengths set",n.mode=gr;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[c&(1<<n.lenbits)-1],b=N>>>24,_=N>>>16&255,g=65535&N,!(b<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(g<16)c>>>=b,u-=b,n.lens[n.have++]=g;else{if(16===g){for(I=b+2;u<I;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(c>>>=b,u-=b,0===n.have){e.msg="invalid bit length repeat",n.mode=gr;break}O=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===g){for(I=b+3;u<I;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,O=0,f=3+(7&c),c>>>=3,u-=3}else{for(I=b+7;u<I;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,O=0,f=11+(127&c),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=gr;break}for(;f--;)n.lens[n.have++]=O}}if(n.mode===gr)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=gr;break}if(n.lenbits=9,S={bits:n.lenbits},C=tr(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,C){e.msg="invalid literal/lengths set",n.mode=gr;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},C=tr(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,C){e.msg="invalid distances set",n.mode=gr;break}if(n.mode=br,t===ar)break e;case br:n.mode=_r;case _r:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,Xn(e,h),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,u=n.bits,n.mode===mr&&(n.back=-1);break}for(n.back=0;N=n.lencode[c&(1<<n.lenbits)-1],b=N>>>24,_=N>>>16&255,g=65535&N,!(b<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(_&&0==(240&_)){for(v=b,E=_,y=g;N=n.lencode[y+((c&(1<<v+E)-1)>>v)],b=N>>>24,_=N>>>16&255,g=65535&N,!(v+b<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=b,u-=b,n.back+=b,n.length=g,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=mr;break}if(64&_){e.msg="invalid literal/length code",n.mode=gr;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;u<I;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;N=n.distcode[c&(1<<n.distbits)-1],b=N>>>24,_=N>>>16&255,g=65535&N,!(b<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(0==(240&_)){for(v=b,E=_,y=g;N=n.distcode[y+((c&(1<<v+E)-1)>>v)],b=N>>>24,_=N>>>16&255,g=65535&N,!(v+b<=u);){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=b,u-=b,n.back+=b,64&_){e.msg="invalid distance code",n.mode=gr;break}n.offset=g,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;u<I;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=gr;break}n.mode=16204;case 16204:if(0===l)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=gr;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=a,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{a[s++]=m[p++]}while(--f);0===n.length&&(n.mode=_r);break;case 16205:if(0===l)break e;a[s++]=n.length,l--,n.mode=_r;break;case 16206:if(n.wrap){for(;u<32;){if(0===o)break e;o--,c|=r[i++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?St(n.check,a,h,s-h):Nt(n.check,a,h,s-h)),h=l,4&n.wrap&&(n.flags?c:vr(c))!==n.check){e.msg="incorrect data check",n.mode=gr;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===o)break e;o--,c+=r[i++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=gr;break}c=0,u=0}n.mode=16208;case 16208:C=sr;break e;case gr:C=cr;break e;case 16210:return ur;default:return lr}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<gr&&(n.mode<16206||t!==nr))&&Mr(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?St(n.check,a,h,e.next_out-h):Nt(n.check,a,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===mr?128:0)+(n.mode===br||16194===n.mode?256:0),(0===d&&0===h||t===nr)&&C===ir&&(C=dr),C},Lr=e=>{if(yr(e))return lr;let t=e.state;return t.window&&(t.window=null),e.state=null,ir},kr=(e,t)=>{if(yr(e))return lr;const n=e.state;return 0==(2&n.wrap)?lr:(n.head=t,t.done=!1,ir)},Dr=(e,t)=>{const n=t.length;let r,a,i;return yr(e)?lr:(r=e.state,0!==r.wrap&&r.mode!==pr?lr:r.mode===pr&&(a=1,a=Nt(a,t,n,0),a!==r.check)?cr:(i=Mr(e,t,n,n),i?(r.mode=16210,ur):(r.havedict=1,ir)))},xr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Pr=Object.prototype.toString,{Z_NO_FLUSH:Fr,Z_FINISH:Hr,Z_OK:Gr,Z_STREAM_END:Br,Z_NEED_DICT:zr,Z_STREAM_ERROR:Vr,Z_DATA_ERROR:qr,Z_MEM_ERROR:Kr}=At;function Wr(e){this.options=An({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new kn,this.strm.avail_out=0;let n=Rr(this.strm,t.windowBits);if(n!==Gr)throw new Error(It[n]);if(this.header=new xr,kr(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Rn(t.dictionary):"[object ArrayBuffer]"===Pr.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Dr(this.strm,t.dictionary),n!==Gr)))throw new Error(It[n])}function Yr(e,t){const n=new Wr(t);if(n.push(e),n.err)throw n.msg||It[n.err];return n.result}Wr.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let i,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Hr:Fr,"[object ArrayBuffer]"===Pr.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Ur(n,s),i===zr&&a&&(i=Dr(n,a),i===Gr?i=Ur(n,s):i===qr&&(i=zr));n.avail_in>0&&i===Br&&n.state.wrap>0&&0!==e[n.next_in];)jr(n),i=Ur(n,s);switch(i){case Vr:case qr:case zr:case Kr:return this.onEnd(i),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||i===Br))if("string"===this.options.to){let e=Ln(n.output,n.next_out),t=n.next_out-e,a=Un(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(a)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==Gr||0!==o){if(i===Br)return i=Lr(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Wr.prototype.onData=function(e){this.chunks.push(e)},Wr.prototype.onEnd=function(e){e===Gr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=wn(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Qr={Inflate:Wr,inflate:Yr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Yr(e,t)},ungzip:Yr,constants:At};const{Deflate:Xr,deflate:Zr,deflateRaw:$r,gzip:Jr}=Yn,{Inflate:ea,inflate:ta,inflateRaw:na,ungzip:ra}=Qr;var aa,ia={Deflate:Xr,deflate:Zr,deflateRaw:$r,gzip:Jr,Inflate:ea,inflate:ta,inflateRaw:na,ungzip:ra,constants:At};!function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"}(aa||(aa={}));var sa,oa=function(e){function t(t,n){var r=n.sdkState,a=n.dispatcher,i=n.logger,s=e.call(this)||this;return s.lastActive=0,s._iid=t,s._sdkState=r,s._dispatcher=a,s._logger=i,s}return a(t,e),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.connectionState===aa.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return aa.CONNECTING;case 1:return aa.OPEN}return aa.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ws",{get:function(){var e;return null!==(e=this._ws)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),t.prototype._handleMessage=function(e){var t=this;e.split("\n").forEach((function(e){if(e){var n=ze.createFromRawMessage(t._iid,e);if(t._logger.debug("receive websocket event",n),"LOGI"===n.code)t.dispatch("message",n);else if("PONG"===n.code)t.dispatch("pong");else if("EXPR"===n.code){if(n.payload){var r=new Me(n.payload);r.expiresIn>=0&&t._dispatcher.dispatch(r)}}else"NOOP"===n.code||t.dispatch("message",n)}}))},t.prototype.connect=function(e,t){var n=this;this._ws=new WebSocket(e,encodeURIComponent(t)),this._ws.onopen=function(){n._logger.debug("websocket open"),n.dispatch("open")},this._ws.onmessage=function(e){return o(n,void 0,void 0,(function(){var t,n,r=this;return l(this,(function(a){return(null===(n=this._sdkState.websocket)||void 0===n?void 0:n.compression)?e.data instanceof Blob?((t=new FileReader).readAsArrayBuffer(e.data),t.onloadend=function(){return o(r,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,(r=t.result,o(void 0,void 0,void 0,(function(){var e;return l(this,(function(t){return e=ia.ungzip(r),[2,String.fromCharCode.apply(null,e)]}))})))];case 1:return e=n.sent(),this._handleMessage(e),[2]}var r}))}))}):"string"==typeof e.data&&this._handleMessage(e.data):this._handleMessage(e.data),[2]}))}))},this._ws.onerror=function(){n._logger.debug("websocket error"),n.dispatch("error",y.networkError)},this._ws.onclose=function(){n._logger.debug("websocket close"),n.dispatch("close")},this.lastActive=Date.now()},t.prototype.disconnect=function(){var e=this;return new Promise((function(t){e._logger.debug("websocket disconnect"),e._ws&&e.connectionState!==aa.CLOSED?(e._ws.onopen=Ve,e._ws.onmessage=Ve,e._ws.onerror=Ve,e._ws.onclose=function(){e.dispatch("close"),t()},e._ws.close(),e._ws=void 0):t()}))},t.prototype.send=function(e){if(!this._ws)throw y.connectionClosed;"PING"!==e.code?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},t.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},t}(ee),la=function(e){function t(t){var n,r=t.code,a=t.ackRequired,i=t.payload,s=void 0===i?{}:i,o=this;return(o=e.call(this)||this).code=r,o.payload=s,o.requestId=null!==(n=o.payload.req_id)&&void 0!==n?n:$(),o.ackRequired=a,o.payload.req_id=o.requestId,o}return a(t,e),t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t}(ne),ca=function(e){function t(t){var n=t.all,r=t.feed,a=t.custom_types,i=t.ts,s=e.call(this)||this;return s.all=n,s.feed=r,s.customTypes=a,s.ts=i,s}return a(t,e),t}(ne),ua=function(){function e(e,t){var n=t.session,r=t.sdkState,a=t.dispatcher,i=t.logger,s=t.useFetchCompat,o=void 0!==s&&s,l=this;this._ackStateMap=new Map,this._sdkState=r,this._dispatcher=a,this._logger=i,this.apiClient=new Be(e,{session:n,sdkState:r,dispatcher:a,logger:i,useFetchCompat:o}),this.websocketClient=new oa(e,{sdkState:r,dispatcher:a,logger:i}),this.websocketClient.on("message",(function(e){if(e.payload.unread_cnt&&l._dispatcher.dispatch(new ca(e.payload.unread_cnt)),e.requestId){if(l._ackStateMap.has(e.requestId)){var t=l._ackStateMap.get(e.requestId);"EROR"!==e.code?t.resolve(e):t.reject(new y({code:e.payload.code,message:e.payload.message}))}}else l._dispatcher.dispatch(e)})).on("close",(function(){l._ackStateMap.forEach((function(e){e.reject(y.connectionClosed)})),l._ackStateMap.clear()}))}return e.prototype._sendApiRequest=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this.apiClient.send(e)];case 1:return[2,t.sent()]}}))}))},e.prototype._sendWebsocketRequest=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a=this;return l(this,(function(i){if(!this._sdkState.websocket)throw y.connectionRequired;if(t=new Ge,e.ackRequired){r=function(r,i){a._ackStateMap.has(e.requestId)&&(a._ackStateMap.delete(e.requestId),n&&(clearTimeout(n),n=null),r?(a._logger.debug("fail websocket request",r),t.reject(r)):(a._logger.debug("receive websocket ack",e.requestId),t.resolve(i)))};try{n=setTimeout((function(){return r(y.noAckTimeout)}),this._sdkState.websocket.responseTimeout),this._ackStateMap.set(e.requestId,{resolve:function(e){return r(void 0,e)},reject:function(e){return r(e)}}),this.websocketClient.send(e)}catch(e){r(e)}}else try{this.websocketClient.send(e),t.resolve()}catch(e){t.reject(e)}return[2,t.promise]}))}))},e.prototype.send=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return e instanceof Ie?[4,this._sendApiRequest(e)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e instanceof la?[4,this._sendWebsocketRequest(e)]:[3,4];case 4:throw y.invalidParameters}}))}))},e.prototype.cancel=function(e){this.apiClient.cancel(e)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();!function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"}(sa||(sa={}));var da=function(e){function t(t){var n=t.stateType,r=e.call(this)||this;return r.stateType=n,r}return a(t,e),t}(ne),ha=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(ne),fa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(ne),pa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(ne),ma=function(e){function t(t){var n=t.userId,r=t.authToken,a=t.services,i=void 0===a?[P.CHAT]:a,s=t.expiringSession,o=void 0===s||s,l=e.call(this)||this;return l.path="".concat(oe,"/").concat(n,"/session_key"),l.method=ie.POST,l.params=re({token:r,services:i,expiring_session:!!o}),l.requireAuth=!1,l}return a(t,e),t}(Ie),ba=function(e){function t(t){var n=t.authToken,r=t.expiringSession,a=void 0===r||r,i=t.requestId,s=void 0===i?"":i;return e.call(this,{code:"LOGI",payload:{token:n,expiring_session:a?1:0,req_id:s},ackRequired:!0})||this}return a(t,e),t}(la),_a=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.key,i=n.expires_at,s=n.services;return r.key=a,r.expiresAt=i,r.services=s,r}return a(t,e),t}(Ae),ga=function(e){function t(t,n,r){var a,i=this;return(i=e.call(this,t,"LOGI",r)||this).error=null,i.newKey=null,i.newKey=null!==(a=r.new_key)&&void 0!==a?a:null,i.error=r.error?new y(r.error):null,i}return a(t,e),t}(ze),va=function(){function e(e){var t,n,r,a;this.isEnabled=null!==(t=e.enabled)&&void 0!==t&&t,this.feedChannels=null!==(n=e.feed_channels)&&void 0!==n?n:{},this.templateListToken=null!==(r=e.template_list_token)&&void 0!==r?r:null,this.settingsUpdatedAt=null!==(a=e.settings_updated_at)&&void 0!==a?a:0}return e.payloadify=function(e){return re(ae({enabled:e.isEnabled,feed_channels:e.feedChannels,template_list_token:e.templateListToken,settings_updated_at:e.settingsUpdatedAt}))},e}(),Ea=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},ya=function(){function e(e){var t;this.lastUpdatedAt=null!==(t=e.last_updated_at)&&void 0!==t?t:0}return e.payloadify=function(e){return re(ae({last_updated_at:e.lastUpdatedAt}))},e}(),Oa=5,Ca=function(){function e(e){var t,n,r,a,i;void 0===e&&(e={}),this.emojiHash=e.emoji_hash||"",this.uploadSizeLimit=e.file_upload_size_limit?1048576*e.file_upload_size_limit:Number.MAX_SAFE_INTEGER,this.useReaction=!!e.use_reaction,this.applicationAttributes=null!==(t=e.application_attributes)&&void 0!==t?t:[],this.premiumFeatureList=null!==(n=e.premium_feature_list)&&void 0!==n?n:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=null!==(r=e.multiple_file_send_max_size)&&void 0!==r?r:5,this.allowSdkStatsUpload=null===(a=e.allow_sdk_log_ingestion)||void 0===a||a,this.uikitConfigInfo=new ya(null!==(i=e.uikit_config)&&void 0!==i?i:{}),this.notificationInfo=e.notifications?new va(e.notifications):null}return e.payloadify=function(e){return re(ae({emoji_hash:e.emojiHash,file_upload_size_limit:e.uploadSizeLimit/1048576,application_attributes:e.applicationAttributes,premium_feature_list:e.premiumFeatureList,use_reaction:e.useReaction,allow_sdk_log_ingestion:e.allowSdkStatsUpload,uikit_config:e.uikitConfigInfo?ya.payloadify(e.uikitConfigInfo):null,notifications:e.notificationInfo?va.payloadify(e.notificationInfo):null}))},e}(),Na=function(){function e(e){this._iid="",this._iid=e}return e.payloadify=function(e){return{}},e}(),Ta=function(e){function t(t){var n=t.userId,r=t.metadata,a=e.call(this)||this;return a.method=ie.POST,a.path="".concat(oe,"/").concat(n,"/metadata"),a.params={metadata:r},a}return a(t,e),t}(Ie),Sa=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaData=n,r}return a(t,e),t}(Ae),Ia=function(e){function t(t){var n=t.userId,r=t.metadata,a=t.upsert,i=e.call(this)||this;return i.method=ie.PUT,i.path="".concat(oe,"/").concat(n,"/metadata"),i.params={metadata:r,upsert:a},i}return a(t,e),t}(Ie),Aa=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metadata=n,r}return a(t,e),t}(Ae),wa=function(e){function t(t){var n=t.userId,r=t.metadataKey,a=e.call(this)||this;return a.method=ie.DELETE,a.path="".concat(oe,"/").concat(n,"/metadata/").concat(r),a}return a(t,e),t}(Ie);!function(e){a((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(Ae);var Ma=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=ie.DELETE,r.path="".concat(oe,"/").concat(n,"/metadata"),r}return a(t,e),t}(Ie);!function(e){a((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(Ae);var ja,Ra=function(e,t){var n=JSON.parse(JSON.stringify(e));return n._iid&&delete n._iid,t&&t(n),n},Ua=function(e,t){var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},La=function(e){return{do:function(t){e||t()},throw:function(t){if(!e)throw t}}};!function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"}(ja||(ja={}));var ka,Da=function(e){function t(t,n){var r,a,i,s,o,l,c,h,f,p,m,b,_=this;return(_=e.call(this,t)||this).userId=null!==(a=null!==(r=n.guest_id)&&void 0!==r?r:n.user_id)&&void 0!==a?a:"",_.nickname=null!==(s=null!==(i=n.nickname)&&void 0!==i?i:n.name)&&void 0!==s?s:"",_.plainProfileUrl=null!==(l=null!==(o=n.profile_url)&&void 0!==o?o:n.image)&&void 0!==l?l:"",_.requireAuth=null!==(c=n.require_auth_for_profile_image)&&void 0!==c&&c,_.metaData=null!==(h=n.metadata)&&void 0!==h?h:{},_.connectionStatus=ja.NON_AVAILABLE,S(ja,n.is_online)?_.connectionStatus=n.is_online:T("boolean",n.is_online)&&(_.connectionStatus=n.is_online?ja.ONLINE:ja.OFFLINE),_.isActive=null===(f=n.is_active)||void 0===f||f,_.lastSeenAt=null!==(p=n.last_seen_at)&&void 0!==p?p:null,_.preferredLanguages=n.preferred_languages?d([],u(n.preferred_languages),!1):null,_.friendDiscoveryKey=null!==(m=n.friend_discovery_key)&&void 0!==m?m:null,_.friendName=null!==(b=n.friend_name)&&void 0!==b?b:null,_}return a(t,e),t.payloadify=function(t){return re(ae(i(i({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},Object.defineProperty(t.prototype,"profileUrl",{get:function(){var e=Oi.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return Ra(this)},t.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return T("string",e)}))},t.prototype._applyMetaData=function(e,t){var n=this;void 0===t&&(t=!1),Object.keys(e).forEach((function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]}))},t.prototype.createMetaData=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i,s;return l(this,(function(o){switch(o.label){case 0:return La(this._isValidMetaData(e)).throw(y.invalidParameters),t=Oi.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Ta({userId:n.userId,metadata:e}),[4,r.send(a)];case 1:return i=o.sent(),s=i.as(Sa).metaData,this._applyMetaData(s),[2,this.metaData]}}))}))},t.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),o(this,void 0,void 0,(function(){var n,r,a,i,s,o;return l(this,(function(l){switch(l.label){case 0:return La(this._isValidMetaData(e)).throw(y.invalidParameters),n=Oi.of(this._iid),r=n.sdkState,a=n.requestQueue,i=new Ia({userId:r.userId,metadata:e,upsert:t}),[4,a.send(i)];case 1:return s=l.sent(),o=s.as(Aa).metadata,this._applyMetaData(o),[2,this.metaData]}}))}))},t.prototype.deleteMetaData=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i;return l(this,(function(s){switch(s.label){case 0:return La(T("string",e)).throw(y.invalidParameters),t=Oi.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new wa({userId:n.userId,metadataKey:e}),[4,r.send(a)];case 1:return s.sent(),this._applyMetaData(((i={})[e]=!0,i),!0),[2,this.metaData]}}))}))},t.prototype.deleteAllMetaData=function(){return o(this,void 0,void 0,(function(){var e,t,n,r;return l(this,(function(a){switch(a.label){case 0:return e=Oi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Ma({userId:t.userId}),[4,n.send(r)];case 1:return a.sent(),this.metaData={},[2]}}))}))},t}(Na),xa=function(e){function t(t){var n=t.userProfile,r=e.call(this)||this;return r.userProfile=n,r}return a(t,e),t}(ne),Pa=function(){function e(e,t){var n,r,a,i,s,o,l,c,u,d,h,f,p,m;this._iid=e,this.appInfo=new Ca(t),this.user=new Da(e,t),this.connectedAt=null!==(n=t.login_ts)&&void 0!==n?n:0,this.firstConnectedAt=0,this.pingInterval=null!==(r=t.ping_interval)&&void 0!==r?r:15e3,this.pongTimeout=null!==(a=t.pong_timeout)&&void 0!==a?a:5e3,this.reconnectInterval=null!==(s=null===(i=t.reconnect)||void 0===i?void 0:i.interval)&&void 0!==s?s:3e3,this.reconnectMaxInterval=null!==(l=null===(o=t.reconnect)||void 0===o?void 0:o.max_interval)&&void 0!==l?l:6e4,this.reconnectRetryCount=null!==(u=null===(c=t.reconnect)||void 0===c?void 0:c.retry_cnt)&&void 0!==u?u:5,this.reconnectIntervalMultiple=null!==(h=null===(d=t.reconnect)||void 0===d?void 0:d.mul)&&void 0!==h?h:2,this.maxUnreadCountOnSuperGroup=null!==(f=t.max_unread_cnt_on_super_group)&&void 0!==f?f:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=null!==(p=t.concurrent_call_limit)&&void 0!==p?p:5,this.backOffDelay=null!==(m=t.back_off_delay)&&void 0!==m?m:100}return e.payloadify=function(e){return re(ae(i(i(i({},Da.payloadify(e.user)),Ca.payloadify(e.appInfo)),{login_ts:e.connectedAt,ping_interval:e.pingInterval,pong_timeout:e.pongTimeout,reconnect:{interval:e.reconnectInterval,max_interval:e.reconnectMaxInterval,retry_cnt:e.reconnectRetryCount,mul:e.reconnectIntervalMultiple},max_unread_cnt_on_super_group:e.maxUnreadCountOnSuperGroup,profile_image_encryption:e.profileImageEncryption,concurrent_call_limit:e.concurrentCallLimit,back_off_delay:e.backOffDelay})))},e.prototype.apply=function(){var e=this.reconnectInterval,t=this.reconnectMaxInterval,n=this.reconnectIntervalMultiple,r=Oi.of(this._iid);r.sdkState.websocket&&(r.sdkState.websocket.pingInterval=1e3*this.pingInterval,r.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,r.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,r.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(r){return r>0?1e3*Math.min(e*Math.pow(n,r-1),t):10}}),r.appInfo=this.appInfo,r.sessionManager.currentUser=this.user,r.connectedAt=this.connectedAt,this.firstConnectedAt||(r.firstConnectedAt=this.connectedAt),r.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,r.concurrentCallLimit=this.concurrentCallLimit,r.backOffDelay=this.backOffDelay,r.dispatcher.dispatch(new xa({userProfile:this}))},e}(),Fa=function(e){function t(t,n,r){var a,i,s,o,l=this;return(l=e.call(this,t,n,r)||this).error=null,l.services=[],l.userProfile=new Pa(t,r),l.deviceTokenLastDeletedAt=null!==(a=r.device_token_last_deleted_at)&&void 0!==a?a:0,l.key=null!==(i=r.key)&&void 0!==i?i:"",l.ekey=null!==(s=r.ekey)&&void 0!==s?s:"",l.error=r.error?new y(r):null,l.services=null!==(o=r.services)&&void 0!==o?o:[],l}return a(t,e),t.asError=function(e){return new t("","LOGI",i({user_id:"",error:!0},e))},t.prototype.applyTo=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return this.error?[3,4]:(t=Oi.of(e))?[4,t.sessionManager.login(this)]:[3,2];case 1:return n.sent(),this.userProfile.apply(),[3,3];case 2:throw y.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},t}(ze),Ha=function(){function e(){this.type=sa.NONE,this.name="none"}return e.prototype.run=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(e){return[2]}))}))},e.prototype.onConnect=function(e,t){return o(this,void 0,void 0,(function(){return l(this,(function(e){return[2]}))}))},e.prototype.onReconnect=function(e,t){return t.resetReconnectCount,o(this,void 0,void 0,(function(){return l(this,(function(e){return[2]}))}))},e.prototype.onDisconnect=function(e,t){return t.error,t.autoReconnect,o(this,void 0,void 0,(function(){return l(this,(function(e){return[2]}))}))},e.prototype.onDisconnectWebSocket=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(e){return[2]}))}))},e.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(e){return[2]}))}))},e}(),Ga=function(e){return o(void 0,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:if(!((t=n.sent())instanceof y))throw t;return t.throwOutside(),[3,3];case 3:return[2]}}))}))},Ba=function(e){return o(void 0,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},za=function(e){function t(t){void 0===t&&(t={});var n,r=this;return(r=e.call(this)||this).type=sa.LOGOUT,r.name="logout",r._wasPreviouslyConnected=null===(n=t.wasPreviouslyConnected)||void 0===n||n,r}return a(t,e),t.prototype.run=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return l(this,(function(a){switch(a.label){case 0:return t=Date.now(),n=e.sdkState.userId,[4,e.logout()];case 1:return a.sent(),[4,e.changeState(new $a,t)];case 2:return a.sent(),this._wasPreviouslyConnected&&Ga((function(){return o(r,void 0,void 0,(function(){return l(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onDisconnected&&e.onDisconnected(n)})),[2]}))}))})),[2]}}))}))},t}(Ha),Va=function(e){function t(){var t=e.call(this)||this;return t.type=sa.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return a(t,e),t.prototype.run=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,e.disconnect()];case 1:return t.sent(),[2]}}))}))},t.prototype.onConnect=function(e,t){return o(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return r.sent(),[4,e.changeState(new Za({authToken:t}),n)];case 2:return r.sent(),[2]}}))}))},t.prototype.onReconnect=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Qa,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new za,t)];case 1:return n.sent(),[2]}}))}))},t}(Ha),qa=function(e){function t(t){var n=t.autoReconnect,r=e.call(this)||this;return r.type=sa.INTERNAL_DISCONNECTED,r.name="internaldisconnected",r._autoReconnect=!1,r._autoReconnect=n,r}return a(t,e),t.prototype.run=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),this._autoReconnect?[4,e.changeState(new Qa,t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onConnect=function(e,t){return o(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return r.sent(),[4,e.changeState(new Za({authToken:t}),n)];case 2:return r.sent(),[2]}}))}))},t.prototype.onReconnect=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Qa,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Va,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new za,t)];case 1:return n.sent(),[2]}}))}))},t}(Ha),Ka=function(e){return o(void 0,void 0,void 0,(function(){return l(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},Wa=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),Ya=function(e,t,n){return void 0===n&&(n=new Wa),o(void 0,void 0,void 0,(function(){var r,a,i,s,o,c;return l(this,(function(l){switch(l.label){case 0:r=0,a=null,i=function(e){return a=null!=e?e:new Error("Halted")},s=function(){r=0},l.label=1;case 1:if(!(-1===t||r<t))return[3,9];l.label=2;case 2:return l.trys.push([2,4,,8]),[4,e(i,s)];case 3:if(o=l.sent(),a)throw a;return[2,o];case 4:if(c=l.sent(),a)return[3,6];if(++r===t)throw c;return[4,Ka(n.calcTimeout(r))];case 5:return l.sent(),[3,7];case 6:throw a;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}}))}))},Qa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=sa.RECONNECTING,t.name="reconnecting",t._callbacks=[],t}return a(t,e),t.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},t.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},t.prototype.run=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i,s,c=this;return l(this,(function(u){switch(u.label){case 0:t=Date.now(),n=new Ge,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),Ga((function(){return o(c,void 0,void 0,(function(){return l(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectStarted&&e.onReconnectStarted()})),[2]}))}))})),u.label=1;case 1:return u.trys.push([1,4,,9]),r=e.sdkState.websocket,a=r.reconnectMaxRetry,i=r.reconnectRetryStrategy,[4,Ya((function(t,n){return o(c,void 0,void 0,(function(){var r;return l(this,(function(a){switch(a.label){case 0:this._haltConnect=t,this._resetConnect=n,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.connect()];case 2:return a.sent(),[3,4];case 3:if(r=a.sent(),e.clearLoginTimer(),r instanceof y){if(r.code===h.CONNECTION_CANCELED)return t(r),[2];if(r.isSessionExpiredError||r.isSessionInvalidatedError)return t(r),[2]}throw r;case 4:return[2]}}))}))}),a,i)];case 2:return u.sent(),[4,e.changeState(new Xa,t)];case 3:return u.sent(),Ga((function(){return o(c,void 0,void 0,(function(){return l(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(e){e.onReconnectSucceeded&&e.onReconnectSucceeded()})),[2]}))}))})),[3,9];case 4:return s=u.sent(),E(s)?[3,7]:s instanceof y?s.code===h.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new qa({autoReconnect:!1}),t)]:[3,6];case 5:u.sent(),u.label=6;case 6:return Ga((function(){return o(c,void 0,void 0,(function(){return l(this,(function(t){return this._flushCallbacks(s),e.connectionHandlers.forEach((function(e){e.onReconnectFailed&&e.onReconnectFailed()})),[2]}))}))})),[3,8];case 7:throw s;case 8:return[3,9];case 9:return[2,n.promise]}}))}))},t.prototype.onConnect=function(e,t){return o(this,void 0,void 0,(function(){var n;return l(this,(function(r){return n=new Ge,this._halt(y.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var r=Date.now();e.changeState(new Za({authToken:t}),r).then((function(){n.resolve()})).catch((function(e){n.reject(e)}))})),[2,n.promise]}))}))},t.prototype.onReconnect=function(e,t){var n=t.resetReconnectCount,r=void 0!==n&&n;return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){return e=new Ge,this._resetConnect&&r&&this._resetConnect(),this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},t.prototype.onDisconnect=function(e,t){t.error;var n=t.autoReconnect,r=void 0===n||n;return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(y.connectionCanceled),[4,e.changeState(new qa({autoReconnect:r}),t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(y.connectionCanceled),[4,e.changeState(new Va,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(y.connectionCanceled),[4,e.changeState(new za,t)];case 1:return n.sent(),[2]}}))}))},t}(Ha),Xa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=sa.CONNECTED,t.name="connected",t}return a(t,e),t.prototype.onReconnect=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),[4,e.changeState(new Qa,t)];case 2:return n.sent(),[2]}}))}))},t.prototype.onDisconnect=function(e,t){var n=t.autoReconnect;return o(this,void 0,void 0,(function(){var t;return l(this,(function(r){switch(r.label){case 0:return t=Date.now(),[4,e.changeState(new qa({autoReconnect:n}),t)];case 1:return r.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Va,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new za,t)];case 1:return n.sent(),[2]}}))}))},t}(Ha),Za=function(e){function t(t){var n=t.authToken,r=e.call(this)||this;return r.type=sa.CONNECTING,r.name="connecting",r._authToken="",r._callbacks=[],r._authToken=n,r}return a(t,e),t.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},t.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},t.prototype.run=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a=this;return l(this,(function(i){switch(i.label){case 0:t=Date.now(),n=new Ge,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),i.label=1;case 1:return i.trys.push([1,4,,10]),[4,Ya((function(t){return o(a,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:this._haltConnect=t,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.connect(this._authToken)];case 2:return r.sent(),[3,4];case 3:if(n=r.sent(),e.clearLoginTimer(),n instanceof y&&n.code===h.CONNECTION_CANCELED)return t(n),[2];throw n;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return i.sent(),[4,e.changeState(new Xa,t)];case 3:return i.sent(),Ga((function(){return o(a,void 0,void 0,(function(){return l(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(t){t.onConnected&&t.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,10];case 4:return r=i.sent(),E(r)?[3,8]:[4,e.disconnect()];case 5:return i.sent(),r instanceof y?r.code===h.CONNECTION_CANCELED?[3,7]:[4,e.changeState(new $a,t)]:[3,7];case 6:i.sent(),i.label=7;case 7:return Ga((function(){return o(a,void 0,void 0,(function(){return l(this,(function(e){return this._flushCallbacks(r),[2]}))}))})),[3,9];case 8:throw r;case 9:return[3,10];case 10:return[2,n.promise]}}))}))},t.prototype.onConnect=function(e){return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){return e=new Ge,this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},t.prototype.onDisconnect=function(e,t){var n=t.error,r=void 0===n?null:n,a=t.autoReconnect,i=void 0!==a&&a;return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(null!=r?r:y.connectionCanceled),e.hasSession?[4,e.changeState(new qa({autoReconnect:i}),t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new za,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(y.connectionCanceled),e.hasSession?[4,e.changeState(new Va,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new za,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(y.connectionCanceled),[4,e.changeState(new za,t)];case 1:return n.sent(),[2]}}))}))},t}(Ha),$a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=sa.INITIALIZED,t.name="initialized",t}return a(t,e),t.prototype.onConnect=function(e,t){return o(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.changeState(new Za({authToken:t}),n)];case 1:return r.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new za({wasPreviouslyConnected:!1}),t)];case 1:return n.sent(),[2]}}))}))},t}(Ha),Ja=function(e){function t(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return a(t,e),t}(la),ei=function(){function e(e){var t=e.pingDelegate,n=e.sdkState,r=e.logger;this.pingDelegate=t,this.sdkState=n,this._logger=r}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var e,t=this;if(!this.sdkState.websocket)throw y.connectionRequired;var n=new Ja;try{var r=null!==(e=this.sdkState.websocket.pongTimeout)&&void 0!==e?e:5e3;this._pingTimeoutTimer=setTimeout((function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()}),r),this.pingDelegate.send(n),this._logger.debug("pinger.ping()")}catch(e){this._logger.debug("pinger.ping() error",e),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return n},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var e,t=this;if(!this.sdkState.websocket)throw y.connectionRequired;this._logger.debug("pinger.refreshTimer()");var n=null!==(e=this.sdkState.websocket.pingInterval)&&void 0!==e?e:15e3;this.stop(),this._pingTimer=setInterval((function(){t.ping()}),n)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),ti=function(e){function t(t){var n=t.request,r=void 0===n||n,a=t.features,s=void 0===a?{}:a,o=t.options,l=void 0===o?{}:o,c=e.call(this)||this;return c.request=r,c.features=i({localCache:!0},s),c.options=i({ingestion:!0},l),c}return a(t,e),t}(ne),ni=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications"],ri=function(e){function t(t,n){var r,a=n.sdkState,i=n.cacheContext,s=n.connectionHandlers,o=n.sessionManager,l=n.websocketClient,c=n.dispatcher,u=n.logger,d=n.entryState,h=void 0===d?new $a:d,f=this;return(f=e.call(this)||this)._stateUpdatedAt=0,f._connectingAt=0,f._connectionRequestQueue=[],f._iid=t,f.sdkState=a,f.cacheContext=i,f.connectionHandlers=s,f._sessionManager=o,f._websocketClient=l,f._dispatcher=c,f._logger=u,f._currentState=h,(null===(r=f.sdkState.websocket)||void 0===r?void 0:r.pingerDisabled)||(f._pinger=new ei({pingDelegate:{send:function(e){return f._websocketClient.send(e)},error:function(e){return f._websocketClient.error(e)}},sdkState:f.sdkState,logger:u})),f._websocketClient.on("open",(function(){f._tryResolveConnectionRequest()})).on("message",(function(e){"LOGI"===e.code&&(f.clearLoginTimer(),f._dispatcher.dispatch(e.as(Fa)))})).on("ping-refresh",(function(){var e;return null===(e=f._pinger)||void 0===e?void 0:e.refreshTimer()})).on("pong",(function(){var e;return null===(e=f._pinger)||void 0===e?void 0:e.pong()})).on("error",(function(){var e;return null===(e=f._pinger)||void 0===e?void 0:e.stop()})).on("close",(function(){f._logiProcessingTimer=setTimeout((function(){f._logiProcessingTimer=void 0,f._unresolvedLogi||f._rejectConnectionRequest(y.networkError)}),500)})),f._dispatcher.on((function(e){e instanceof Fa&&(f._unresolvedLogi=e,f._tryResolveConnectionRequest())})),f}return a(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),t.prototype.changeState=function(e,t){return o(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return t>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=t,this._dispatcher.dispatch(new da({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype._tryResolveConnectionRequest=function(){var e;return o(this,void 0,void 0,(function(){var t,n;return l(this,(function(r){switch(r.label){case 0:return t=this._unresolvedLogi,this._websocketClient.isOpen&&t?(this._unresolvedLogi=void 0,t.error?[3,2]:[4,t.applyTo(this._iid)]):[3,3];case 1:return r.sent(),n=t.userProfile,this._enableStatLog({request:n.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:n.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish")},options:{ingestion:n.appInfo.allowSdkStatsUpload}}),this._statLogConnection(),null===(e=this._pinger)||void 0===e||e.start(),this._connectionRequestQueue.forEach((function(e){return e.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.session.authToken=void 0,(t.error.isSessionExpiredError||t.error.isSessionInvalidatedError)&&this._dispatcher.dispatch(new Me({reason:t.error.code})),this._rejectConnectionRequest(t.error),r.label=3;case 3:return[2]}}))}))},t.prototype._rejectConnectionRequest=function(e){var t;if(null===(t=this._pinger)||void 0===t||t.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var n=this._connectionRequestQueue;this._connectionRequestQueue=[],n.forEach((function(t){return t.reject(e)})),this._statLogConnection(e)}},t.prototype._url=function(){var e,t=this.sdkState,n=t.appId,r=t.appVersion,a=t.userId,i=t.extensions,s=t.sendbirdRuntimeEnvironment,o=this.cacheContext.localCacheEnabled,l=this._sessionManager.session,c=null===(e=this.sdkState.websocket)||void 0===e?void 0:e.compression,u=!!(null!=i?i:{}).sb_uikit,d=He.userAgentWithExtension(i);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(p.OS_VERSION),"&sv=").concat(encodeURIComponent(p.SDK_VERSION),"&ai=").concat(n).concat(r?"&av=".concat(r):"").concat(l.hasSession?"":"&user_id=".concat(encodeURIComponent(a)),"&pmce=").concat(c?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(d,"&SB-SDK-User-Agent=").concat(encodeURIComponent(He.sendbirdSdkUserAgentWithExtension(s)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(ni))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(o?1:0,"&include_poll_details=1").concat(u?"&uikit_config=1":"")},t.prototype._enableStatLog=function(e){var t=e.request,n=e.features,r=e.options,a=void 0===r?{}:r;this._dispatcher.dispatch(new ti({request:t,features:n,options:a}))},t.prototype._statLogConnection=function(e){var t;this._dispatcher.dispatch(new je(new De({type:Se.WEBSOCKET_CONNECT,data:{host_url:null===(t=this.sdkState.websocket)||void 0===t?void 0:t.host,success:!e,latency:Date.now()-this._connectingAt,error_code:null==e?void 0:e.code,error_description:null==e?void 0:e.message}})))},t.prototype.connect=function(e){var t;return void 0===e&&(e=""),o(this,void 0,void 0,(function(){var n,r,a,i=this;return l(this,(function(s){return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(y.connectionCanceled)),n=this._url(),r=new Ge,this._connectionRequestQueue.push(r),1===this._connectionRequestQueue.length&&(this._connectingAt=Date.now(),this._loginTimer=setTimeout((function(){i._loginTimer=void 0,i._rejectConnectionRequest(y.loginTimeout)}),null===(t=this.sdkState.websocket)||void 0===t?void 0:t.responseTimeout),a=this._sessionManager.session,e&&(a.authToken=e),this._websocketClient.connect(n,JSON.stringify(a.hasSession?{auth:a.sessionKey}:{token:e}))),[2,r.promise]}))}))},t.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(Fa.asError(y.connectionRenew))},t.prototype.disconnect=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},t.prototype.logout=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this._sessionManager.clear()];case 1:return e.sent(),[4,this.disconnect()];case 2:return e.sent(),[2]}}))}))},t.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},t}(ee),ai=function(e){function t(t){var n=t.appId,r=t.userId,a=t.services,i=void 0===a?[P.CHAT]:a,s=t.includeUIKitConfig,o=void 0!==s&&s,l=t.localCacheEnabled,c=void 0===l||l,u=t.expiringSession,d=void 0===u||u,h=e.call(this)||this;return h.path="".concat(oe,"/").concat(r,"/login"),h.method=ie.POST,h.params={expiring_session:!!d,services:i,include_logi:!0,include_extra_data:String(ni),uikit_config:o,use_local_cache:c,app_id:n},h.requireAuth=!1,h}return a(t,e),t}(Ie),ii=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.logi=new Fa(t,"LOGI",n),r}return a(t,e),t}(Ae);!function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"}(ka||(ka={}));var si,oi=[ma,ai],li=function(){function e(e,t){var n=t.session,r=t.sdkState,a=t.dispatcher,i=t.logger,s=t.useFetchCompat,o=void 0!==s&&s,l=this;this._currentConnectionStateType=sa.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new ua(e,{session:n,sdkState:r,dispatcher:a,logger:i,useFetchCompat:o}),this._session=n,this._logger=i,this._dispatcher=a,this._dispatcher.on((function(e){var t,n,r,a;if(e instanceof da){var i=e.stateType;switch(l._currentConnectionStateType=i,i){case sa.CONNECTED:l._resolveLazyCallQueue();break;case sa.INITIALIZED:case sa.INTERNAL_DISCONNECTED:case sa.EXTERNAL_DISCONNECTED:case sa.LOGOUT:l._rejectLazyCallQueue((null===(r=l._session)||void 0===r?void 0:r.hasSession)?y.connectionClosed:y.connectionRequired)}}else if(e instanceof ha)(null===(a=l._session.services)||void 0===a?void 0:a.includes(P.CHAT))||l._resolveLazyCallQueue(ka.API);else if(e instanceof fa||e instanceof pa)l._rejectLazyCallQueue(y.connectionClosed);else if(e instanceof Re){var s=e.request,o=e.deferred,u=e.error;try{for(var d=c(oi),h=d.next();!h.done;h=d.next())if(s instanceof h.value)return void o.reject(u)}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}l._lazyCallQueue.push({command:s,deferred:o})}}))}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===sa.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===sa.CONNECTING||this._currentConnectionStateType===sa.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(e){var t,n=[],r=[];switch(e){case ka.ALL:t=null;break;case ka.WEBSOCKET:t=la;break;case ka.API:t=Ie}var a=!1;return this._lazyCallQueue.forEach((function(e){!t||e.command instanceof t||(a=!0),a?r.push(e):n.push(e)})),[n,r]},e.prototype._resolveLazyCallQueue=function(e){var t=this;void 0===e&&(e=ka.ALL);var n=u(this._classifyLazyCallQueueByScope(e),2),r=n[0],a=n[1];this._lazyCallQueue=a,r.forEach((function(e){return o(t,void 0,void 0,(function(){var t,n,r,a,i;return l(this,(function(s){switch(s.label){case 0:t=e.command,n=e.deferred,(r=e.timeout)&&clearTimeout(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.send(t)];case 2:return a=s.sent(),n.resolve(a),[3,4];case 3:return i=s.sent(),n.reject(i),[3,4];case 4:return[2]}}))}))}))},e.prototype._rejectLazyCallQueue=function(e,t){var n=this;void 0===t&&(t=ka.ALL);var r=u(this._classifyLazyCallQueueByScope(t),2),a=r[0],i=r[1];this._lazyCallQueue=i,a.forEach((function(t){return o(n,void 0,void 0,(function(){var n,r;return l(this,(function(a){return n=t.deferred,r=t.timeout,clearTimeout(r),n.reject(e),[2]}))}))}))},e.prototype.send=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return l(this,(function(a){switch(a.label){case 0:return e instanceof la?this.isReady?(this._logger.debug("send websocket request",e),[4,this.commandRouter.send(e)]):[3,2]:[3,4];case 1:case 5:return[2,a.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",e),t=new Ge,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return r.timeout(e.requestId)}),1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),y.connectionRequired;case 3:case 7:return[3,9];case 4:return e instanceof Ie?this._session.hasSession?(this._logger.debug("send api request",e),[4,this.commandRouter.send(e)]):[3,6]:[3,8];case 6:if(this.isLazyCallActivated)return this._logger.debug("wait api request",e),t=new Ge,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return r.timeout(e.requestId)}),1e4)}),[2,t.promise];throw n=y.connectionRequired,this._logger.debug("fail api request",n),n;case 8:throw y.invalidCommand;case 9:return[2]}}))}))},e.prototype.forceSend=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return this._logger.debug("send forced request",e),e instanceof la||e instanceof Ie?[4,this.commandRouter.send(e)]:[3,2];case 1:return[2,t.sent()];case 2:throw y.invalidCommand}}))}))},e.prototype.timeout=function(e){this._logger.debug("timeout request",e);var t=this._lazyCallQueue.findIndex((function(t){return t.command.requestId===e}));t>-1&&(this._lazyCallQueue[t].deferred.reject(y.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(e){this._logger.debug("cancel api request",e),this.commandRouter.cancel(e)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),ci="sendbird@devicetokens",ui=function(){function e(e){var t=e.type,n=e.token;this.type=t,this.token=n}return e.payloadify=function(e){return re(ae({type:e.type,token:e.token}))},e}(),di=new WeakMap,hi=function(e){function t(t){var n=t.session,r=t.cacheContext,a=t.sdkState,i=t.dispatcher,s=t.requestQueue,o=t.logger,l=e.call(this)||this;return l._currentConnectionStateType=sa.INITIALIZED,l._isRefreshingAuthToken=!1,l.currentUser=null,l.session=n,l._cacheContext=r,l._sdkState=a,l._dispatcher=i,l._requestQueue=s,l._logger=o,l._deviceTokens=[],l._dispatcher.on((function(e){var t;if(e instanceof da){var n=e.stateType;l._currentConnectionStateType=n}else e instanceof Me&&l.handler&&(e.invalidateSessionToken&&(l.session.authToken=void 0),e.error&&e.error.isSessionExpiredError&&(l._logger.debug("session expired"),(null===(t=l.handler)||void 0===t?void 0:t.onSessionExpired)&&l.handler.onSessionExpired(),l.refresh()))})),l}return a(t,e),Object.defineProperty(t.prototype,"ekey",{get:function(){return di.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),t.prototype.indexOfDeviceToken=function(e,t){return this._deviceTokens.findIndex((function(n){return n.type===e&&n.token===t}))},t.prototype.hasDeviceToken=function(e,t){return this.indexOfDeviceToken(e,t)>=0},t.prototype.createRefreshWebsocketCommand=function(e,t){return new ba({authToken:e,expiringSession:!0,requestId:t})},t.prototype._refreshSessionKeyByWebSocket=function(e){return o(this,void 0,void 0,(function(){var t,n,r,a,i;return l(this,(function(s){switch(s.label){case 0:return t=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(t)];case 1:if(n=s.sent(),r=n.as(ga),a=r.newKey,i=r.error)throw i;return this.session.sessionKey=null!=a?a:this.session.sessionKey,[2]}}))}))},t.prototype._refreshSessionKeyByApi=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return l(this,(function(r){switch(r.label){case 0:return t=new ma({userId:this._sdkState.userId,authToken:e,services:this.session.services,expiringSession:!0}),[4,Ya((function(e){return o(n,void 0,void 0,(function(){var n,r,a,i,s;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(t)];case 1:return n=o.sent(),r=n.as(_a),a=r.key,i=r.services,this.session.sessionKey=a,this.session.services=i,[3,3];case 2:if(s=o.sent(),!this._isSessionRelatedError(s))throw s;return e(s),[3,3];case 3:return[2]}}))}))}),3)];case 1:return r.sent(),[2]}}))}))},t.prototype._refreshSessionKey=function(e,t){return void 0===t&&(t=!0),o(this,void 0,void 0,(function(){var n,r,a;return l(this,(function(i){switch(i.label){case 0:if(this._currentConnectionStateType!==sa.CONNECTED)return[3,10];i.label=1;case 1:return i.trys.push([1,3,,10]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return i.sent(),this.complete(),[2];case 3:return(n=i.sent())instanceof y&&n.isSessionTokenExpiredError&&t?[4,this._receiveNewAuthToken()]:[3,9];case 4:return(a=i.sent())?(this.session.authToken=a,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,6];case 5:return i.sent(),this.complete(),[3,8];case 6:return[4,this.clear()];case 7:i.sent(),i.label=8;case 8:return[2];case 9:return[3,10];case 10:return i.trys.push([10,12,,22]),[4,this._refreshSessionKeyByApi(e)];case 11:return i.sent(),this.complete(),[3,22];case 12:return(r=i.sent())instanceof y&&r.isSessionTokenExpiredError?t?[4,this._receiveNewAuthToken()]:[3,18]:[3,20];case 13:return(a=i.sent())?(this.session.authToken=a,[4,this._refreshSessionKeyByApi(this.session.authToken)]):[3,15];case 14:return i.sent(),this.complete(),[3,17];case 15:return[4,this.clear()];case 16:i.sent(),i.label=17;case 17:return[3,19];case 18:throw r;case 19:return[3,21];case 20:throw r;case 21:return[3,22];case 22:return[2]}}))}))},t.prototype._receiveNewAuthToken=function(){var e=this,t=new Ge;return Ga((function(){return o(e,void 0,void 0,(function(){var e,n,r,a,i,s=this;return l(this,(function(o){return this._isRefreshingAuthToken=!0,this.session.clear(),(null===(i=this.handler)||void 0===i?void 0:i.onSessionTokenRequired)?(e=null,n=function(){e&&(clearTimeout(e),e=null)},r=function(e){n(),s._isRefreshingAuthToken&&(s._isRefreshingAuthToken=!1,s.dispatch("refresh-authtoken"),t.resolve(e))},a=function(e){n(),s._isRefreshingAuthToken&&(s._isRefreshingAuthToken=!1,t.reject(e))},e=setTimeout((function(){return a()}),1e3*this._sdkState.sessionTokenRefreshTimeout),this.handler.onSessionTokenRequired(r,a)):t.resolve(null),[2]}))}))})),t.promise},t.prototype._isSessionRelatedError=function(e){return e instanceof y&&(e.isSessionExpiredError||e.isSessionInvalidatedError)},Object.defineProperty(t.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),t.prototype.authenticateFeed=function(e,t){var n;return o(this,void 0,void 0,(function(){var r,a,i;return l(this,(function(s){switch(s.label){case 0:return this.session.authToken=t,r=new ai({appId:this._sdkState.appId,userId:e,services:[P.FEED],includeUIKitConfig:!!(null!==(n=this._sdkState.extensions)&&void 0!==n?n:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:!t||this.isSessionExpiring}),[4,this._requestQueue.commandRouter.send(r)];case 1:return a=s.sent(),(i=a.as(ii).logi).error?[3,3]:[4,this.login(i)];case 2:return s.sent(),i.userProfile.apply(),[3,4];case 3:throw i.error;case 4:return[2]}}))}))},t.prototype.login=function(e){var t;return o(this,void 0,void 0,(function(){var n,r,a,i,s,o,c,u;return l(this,(function(l){switch(l.label){case 0:return n=e.key,r=e.ekey,a=e.services,i=e.userProfile,s=e.deviceTokenLastDeletedAt,o=void 0===s?0:s,this.session.hasLessServiceScopeThan(a)&&(this.session.sessionKey=n,this.session.services=a),di.set(this,r),this._deviceTokenCacheEnabled=null===(t=null==i?void 0:i.appInfo)||void 0===t?void 0:t.deviceTokenCache,c=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,c.get(ci)]:[3,5];case 1:return!(u=l.sent())||u.lastDeletedAt<o?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=o,[4,this.saveDeviceToken()]):[3,3];case 2:return l.sent(),[3,4];case 3:this._deviceTokens=u.tokens.map((function(e){return new ui(ui.payloadify(e))})),this._deviceTokenLastDeletedAt=u.lastDeletedAt,l.label=4;case 4:return[3,7];case 5:return[4,c.remove(ci)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))},t.prototype.complete=function(){var e=this;this.dispatch("refresh"),this._dispatcher.dispatch(new ha),Ga((function(){return o(e,void 0,void 0,(function(){var e;return l(this,(function(t){return this._logger.debug("session refreshed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionRefreshed)&&this.handler.onSessionRefreshed(),[2]}))}))}))},t.prototype.error=function(e){var t=this;Ga((function(){return o(t,void 0,void 0,(function(){var t;return l(this,(function(n){return(null===(t=this.handler)||void 0===t?void 0:t.onSessionError)&&this.handler.onSessionError(e),[2]}))}))}))},t.prototype.close=function(){var e=this;this.dispatch("close"),this._dispatcher.dispatch(new pa),Ga((function(){return o(e,void 0,void 0,(function(){var e;return l(this,(function(t){return this._logger.debug("session closed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionClosed)&&this.handler.onSessionClosed(),[2]}))}))}))},t.prototype.refresh=function(){return o(this,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:if(!this.isSessionExpiring)return[3,10];if(this.session.isRefreshing)return[3,10];if(this.session.isRefreshing=!0,this.session.authToken)return[3,7];n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this._receiveNewAuthToken()];case 2:return(e=n.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=e,[3,5]):[3,3];case 3:return[4,this.clear()];case 4:return n.sent(),this.session.isRefreshing=!1,[2];case 5:return[3,7];case 6:throw n.sent(),t=y.sessionTokenRequestFailed,this._dispatcher.dispatch(new fa),this.error(t),this.session.isRefreshing=!1,t;case 7:return n.trys.push([7,9,,10]),[4,this._refreshSessionKey(this.session.authToken)];case 8:return n.sent(),this.session.isRefreshing=!1,[3,10];case 9:throw n.sent(),t=y.sessionTokenRefreshFailed,this._dispatcher.dispatch(new fa),this.error(t),this.session.isRefreshing=!1,t;case 10:return[2]}}))}))},t.prototype.setDeviceToken=function(e,t){return!!(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,t)<0)&&(this._deviceTokens.push(new ui({type:e,token:t})),!0)},t.prototype.unsetDeviceToken=function(e,t){if(this._deviceTokenCacheEnabled){var n=this.indexOfDeviceToken(e,t);n>=0&&this._deviceTokens.splice(n,1)}},t.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(t){return t.type!==e})):[])},t.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},t.prototype.saveDeviceToken=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(ci,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),di.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))},t}(ee),fi=function(){function e(e,t){var n=t.sdkState,r=t.cacheContext,a=t.connectionHandlers,i=t.sessionManager,s=t.websocketClient,o=t.dispatcher,l=t.logger,c=t.disableWebSocketCloseEventHandling,u=void 0!==c&&c;this._disableWebSocketCloseEventHandling=!1,this._externalCalledWebSocketClose=!1,this._logger=l,this._disableWebSocketCloseEventHandling=u,this._context=new ri(e,{sdkState:n,cacheContext:r,connectionHandlers:a,sessionManager:i,websocketClient:s,dispatcher:o,logger:l}),this._sdkState=n,this._sessionManager=i,this._websocketClient=s}return e.prototype._registerEventDispatcher=function(){var e=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh-authtoken",(function(){e.isConnected||(e._logger.debug("try reconnect by session token refresh"),e.reconnect())})).on("refresh",(function(){e.isConnecting||e.isConnected||(e._logger.debug("try reconnect by session key refresh"),e.reconnect())})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){"foreground"!==e._sdkState.appState||e._externalCalledWebSocketClose||e._sessionManager.isRefreshingAuthToken||(e._logger.debug("try reconnect by websocket connection closed"),e.reconnect())})))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===sa.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var e=this._context.currentState;return e.type===sa.CONNECTING||e.type===sa.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return t=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,t.onConnect(this._context,e)];case 1:return n.sent(),this._registerEventDispatcher(),[2]}}))}))},e.prototype.reconnect=function(){return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{})];case 1:return t.sent(),[2]}}))}))},e.prototype.resetAndReconnect=function(){return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.background=function(){return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnect(this._context,{autoReconnect:!1})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnect=function(e){return o(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:e,autoReconnect:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnectWebSocket(this._context)];case 1:return t.sent(),[2]}}))}))},e.prototype.logout=function(){return o(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context)];case 1:return t.sent(),[2]}}))}))},e}(),pi=function(e){function t(t){var n,r,a,i,s=t.type,o=t.data,l=t.ts,c=void 0===l?Date.now():l,u=e.call(this,{type:s,data:o,ts:c})||this;return u.date=new Date(c),u.key="".concat((n=u.date,r=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),"".concat(r).concat(a).concat(i)),"_").concat(s),u}return a(t,e),t}(De),mi=function(e){function t(t){var n=t.deviceId,r=t.statLogs,a=e.call(this)||this;return a.method=ie.POST,a.path="".concat(Ee),a.params={device_id:n,log_entries:r.map((function(e){return De.payloadify(e)}))},a}return a(t,e),t}(Ie),bi=function(e,t){var n,r;if(null!==e&&null!==t){var a=Object.keys(e),i=Object.keys(t),s=d([],u(new Set(d(d([],u(a),!1),u(i),!1))),!1),o={};try{for(var l=c(s),h=l.next();!h.done;h=l.next()){var f=h.value,p=typeof e[f],m=typeof t[f];"undefined"===p?o[f]=t[f]:"undefined"===m?o[f]=e[f]:p!==m?o[f]=t[f]:"object"===p&&e[f]&&t[f]?o[f]=bi(e[f],t[f]):o[f]=t[f]}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return o}return t};!function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"}(si||(si={}));var _i,gi=function(e){function t(t){var n=t.cacheContext,r=t.requestQueue,a=t.dispatcher,i=t.baseLimit,s=void 0===i?100:i,o=t.maxLimit,l=void 0===o?1e3:o,c=t.minLimit,u=void 0===c?10:c,d=e.call(this)||this;return d.queue=[],d.enabledState=si.PENDING,d.isFlushing=!1,d.generation=1,d.lastFlushedAt=0,d._collectRequestStat=!0,d._collectFeatureLocalCacheStat=!0,d.deviceId=$(),d.cacheContext=n,d.requestQueue=r,d.dispatcher=a,d.baseLimit=s,d.limit=s,d.maxLimit=l,d.minLimit=u,d}return a(t,e),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.enabledState===si.ENABLED},enumerable:!1,configurable:!0}),t.prototype._arrangeStat=function(){var e=[];this._collectRequestStat&&e.push.apply(e,d([],u(this.queue.filter((function(e){return e.type===Se.API_RESULT||e.type===Se.WEBSOCKET_CONNECT}))),!1)),this._collectFeatureLocalCacheStat&&e.push.apply(e,d([],u(this.queue.filter((function(e){return e.type===Se.FEATURE_LOCALCACHE}))),!1)),this.queue=e},t.prototype._save=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return this.enabledState!==si.ENABLED?[3,2]:[4,this.cacheContext.preference.set(this.key,{deviceId:this.deviceId,statLogs:this.queue.map((function(e){return De.payloadify(e)})),generation:this.generation++,lastFlushedAt:this.lastFlushedAt})];case 1:e.sent(),this.dispatch("save",d([],u(this.queue),!1)),e.label=2;case 2:return[2]}}))}))},t.prototype._flush=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a;return l(this,(function(i){switch(i.label){case 0:if(!this.isEnabled)return[3,10];if(this.isFlushing)return[3,10];this.isFlushing=!0,i.label=1;case 1:return i.trys.push([1,5,9,10]),this._arrangeStat(),e=this.queue.filter((function(e){if(e instanceof pi){var t=new Date,n=u([e.date.getFullYear(),t.getFullYear()],2),r=n[0],a=n[1];if(r<a)return!0;if(r===a){var i=u([e.date.getMonth(),t.getMonth()],2),s=i[0],o=i[1];if(s<o)return!0;if(s===o){var l=u([e.date.getDate(),t.getDate()],2);return l[0]<l[1]}}}return!1})),t=this.queue.filter((function(e){return!(e instanceof pi)})),(n=d(d([],u(e),!1),u(t),!1).slice(0,Math.min(this.limit,this.maxLimit))).length>0?(r=new mi({deviceId:this.deviceId,statLogs:n}),[4,this.requestQueue.send(r)]):[3,4];case 2:return i.sent(),this.dispatch("flush",n),this.queue=d(d([],u(e),!1),u(t),!1).slice(n.length),[4,this._save()];case 3:i.sent(),i.label=4;case 4:return this.limit=this.baseLimit,this.lastFlushedAt=Date.now(),[3,10];case 5:return(a=i.sent())instanceof y?a.code!==h.STAT_LOG_NOT_ALLOWED?[3,7]:[4,this.clear()]:[3,8];case 6:return i.sent(),this.enabledState=si.DISABLED,[3,8];case 7:a.code===h.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=si.COLLECT_ONLY),i.label=8;case 8:return this.limit=this.limit+20,[3,10];case 9:return this.isFlushing=!1,[7];case 10:return[2]}}))}))},t.prototype.init=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return l(this,(function(a){switch(a.label){case 0:return this.key=e,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=a.sent())?(this.deviceId=t.deviceId,this.queue=t.statLogs.map((function(e){return new De({type:e.stat_type,ts:e.ts,data:e.data})})),this.generation=t.generation,this.lastFlushedAt=t.lastFlushedAt,Date.now()-this.lastFlushedAt>=108e5&&this.queue.length>=this.minLimit?(n=Math.min(Math.floor(18e4*Math.random()),100),[4,Ka(n)]):[3,4]):[3,4];case 2:return a.sent(),[4,this._flush()];case 3:a.sent(),a.label=4;case 4:return this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(e){if(e instanceof je){var t=e.statLog;r.put(t)}else if(e instanceof ti){var n=e.request,a=e.features,i=e.options;r._collectRequestStat=n,r._collectFeatureLocalCacheStat=null==a?void 0:a.localCache,r._arrangeStat(),r._collectRequestStat||r._collectFeatureLocalCacheStat?r.enabledState=i.ingestion?si.ENABLED:si.COLLECT_ONLY:r.enabledState=si.DISABLED,r.isEnabled?r.queue.length>=r.limit&&r._flush():r.clear()}}))),[2]}}))}))},t.prototype.put=function(e){return o(this,void 0,void 0,(function(){var t,n;return l(this,(function(r){switch(r.label){case 0:return this.enabledState===si.DISABLED?[3,3]:(e instanceof pi?this._collectFeatureLocalCacheStat&&(t=u(this.queue.filter((function(t){return t instanceof pi&&t.key===e.key})),1),(n=t[0])?n.data=bi(n.data,e.data):this.queue.push(e)):this._collectRequestStat&&this.queue.push(e),[4,this._save()]);case 1:return r.sent(),this.queue.length>=this.limit?[4,this._flush()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.clear=function(){return o(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return this.queue=[],this.generation=1,[4,this._save()];case 1:return e.sent(),[2]}}))}))},t.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},t}(ee);!function(e){e[e.NONE=0]="NONE",e[e.VERBOSE=1]="VERBOSE",e[e.DEBUG=2]="DEBUG",e[e.INFO=3]="INFO",e[e.WARN=4]="WARN",e[e.ERROR=5]="ERROR"}(_i||(_i={}));var vi,Ei=function(){function e(){this.level=_i.WARN}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=_i.VERBOSE&&console.log.apply(console,d(["[verbose]"],u(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=_i.DEBUG&&console.log.apply(console,d(["[debug]"],u(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=_i.INFO&&console.log.apply(console,d(["[info]"],u(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=_i.WARN&&console.warn.apply(console,d(["[warn]"],u(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=_i.ERROR&&console.error.apply(console,d(["[error]"],u(e),!1))},e}(),yi={},Oi=function(){function e(e,t){var n,r,a,i,s,o,l,c,u,d;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!yi[e]){yi[e]=this;var h=null!==(n=t.options)&&void 0!==n?n:new L,f=this.sdkState={appId:t.appId,appVersion:null!==(r=t.appVersion)&&void 0!==r?r:"",appState:"foreground",userId:void 0,extensions:{},api:{host:null!==(a=t.apiHost)&&void 0!==a?a:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:null!==(i=t.websocketHost)&&void 0!==i?i:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new Wa,responseTimeout:h.websocketResponseTimeout},sessionTokenRefreshTimeout:h.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var m=this.logger=new Ei;this.logger.level=null!==(s=t.logLevel)&&void 0!==s?s:_i.WARN,this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var b=this.cacheContext=new x({encryption:t.encryption,store:t.store,localCacheEnabled:null!==(o=t.localCacheEnabled)&&void 0!==o&&o,localCacheConfig:null!==(l=t.localCacheConfig)&&void 0!==l?l:new H});this.debugMode=null!==(c=t.debugMode)&&void 0!==c&&c,this.maxSuperGroupChannelUnreadCount=p.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=h.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=h.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=h.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var _=this.dispatcher=new te,g=new Z;this.requestQueue=new li(e,{session:g,sdkState:f,dispatcher:_,logger:m,useFetchCompat:t.useFetchCompat}),this.sessionManager=new hi({session:g,cacheContext:b,sdkState:f,dispatcher:_,requestQueue:this.requestQueue,logger:m}),this.connectionManager=new fi(e,{sdkState:f,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:_,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:null!==(u=t.disableWebSocketCloseEventHandling)&&void 0!==u&&u,logger:m}),this.statLogCollector=new gi({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:_}),this.appStateToggleEnabled=null===(d=t.appStateToggleEnabled)||void 0===d||d}return yi[e]}return e.of=function(e){if(yi[e])return yi[e];throw y.lostInstance},e.clear=function(e){yi[e]&&delete yi[e]},e.prototype.hasExtension=function(e){return this.sdkState.extensions&&this.sdkState.extensions[e]},e}(),Ci=function(){function e(){}return e.prototype.init=function(e,t){var n=t.sdkState,r=t.dispatcher,a=t.sessionManager,i=t.requestQueue,s=t.logger;t.onlineDetector;var o=t.cacheContext;this._iid=e,this._cacheContext=o,this._sdkState=n,this._dispatcher=r,this._sessionManager=a,this._requestQueue=i,this._logger=s},e}();!function(e){e.OPEN="open",e.CLOSED="closed"}(vi||(vi={}));var Ni,Ti="removed",Si=function(e){switch(e){case"open":return vi.OPEN;case"closed":return vi.CLOSED;default:return null}},Ii=function(e){return!e||!!e.text&&T("string",e.text)},Ai=function(e){function t(t,n){var r,a,i,s,o,l,c,u=this;return(u=e.call(this,t)||this).pollId=0,u.id=0,u.text=null,u.voteCount=0,u.createdBy=null,u.createdAt=0,u.updatedAt=0,u._lastVotedAt=0,u.pollId=null!==(r=n.poll_id)&&void 0!==r?r:0,u.id=null!==(a=n.id)&&void 0!==a?a:0,u.text=null!==(i=n.text)&&void 0!==i?i:null,u.voteCount=null!==(s=n.vote_count)&&void 0!==s?s:0,u.createdBy=null!==(o=n.created_by)&&void 0!==o?o:null,u.createdAt=null!==(l=n.created_at)&&void 0!==l?l:0,u.updatedAt=null!==(c=n.updated_at)&&void 0!==c?c:0,u}return a(t,e),t.payloadify=function(t){return re(ae(i(i({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},t}(Na),wi=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b=this;return(b=e.call(this,t)||this).id=0,b.title=null,b.createdAt=0,b.updatedAt=0,b.closeAt=-1,b.status=vi.CLOSED,b.messageId=0,b.data=null,b.voterCount=-1,b.options=[],b.createdBy=null,b.allowUserSuggestion=!1,b.allowMultipleVotes=!1,b.votedPollOptionIds=[],b.id=null!==(r=n.id)&&void 0!==r?r:0,b.title=null!==(a=n.title)&&void 0!==a?a:null,b.createdAt=null!==(i=n.created_at)&&void 0!==i?i:0,b.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,b.closeAt=null!==(o=n.close_at)&&void 0!==o?o:-1,b.status=null!==(l=Si(n.status))&&void 0!==l?l:vi.CLOSED,b.messageId=null!==(c=n.message_id)&&void 0!==c?c:0,b.data=null!==(u=n.data)&&void 0!==u?u:null,b.voterCount=null!==(d=n.voter_count)&&void 0!==d?d:-1,b.options=n.options?n.options.map((function(e){return new Ai(b._iid,e)})):[],b.createdBy=null!==(h=n.created_by)&&void 0!==h?h:null,b.allowUserSuggestion=null!==(f=n.allow_user_suggestion)&&void 0!==f&&f,b.allowMultipleVotes=null!==(p=n.allow_multiple_votes)&&void 0!==p&&p,b.votedPollOptionIds=null!==(m=n.voted_option_ids)&&void 0!==m?m:[],b}return a(t,e),t.prototype._applyPollUpdatePayload=function(e){var t,n,r,a,i,s,o,l,c=this;this.title=null!==(t=e.title)&&void 0!==t?t:this.title,this.updatedAt=null!==(n=e.updated_at)&&void 0!==n?n:this.updatedAt,this.closeAt=null!==(r=e.close_at)&&void 0!==r?r:this.closeAt,this.status=null!==(a=Si(e.status))&&void 0!==a?a:this.status,this.data=null!==(i=e.data)&&void 0!==i?i:this.data,this.voterCount=null!==(s=e.voter_count)&&void 0!==s?s:this.voterCount,e.options&&(this.options=e.options.map((function(e){return new Ai(c._iid,e)})),this.votedPollOptionIds=e.options.filter((function(e){return e.vote_count>0})).map((function(e){return e.id}))),this.allowUserSuggestion=null!==(o=e.allow_user_suggestion)&&void 0!==o?o:this.allowUserSuggestion,this.allowMultipleVotes=null!==(l=e.allow_multiple_votes)&&void 0!==l?l:this.allowMultipleVotes},t.payloadify=function(t){return re(ae(i(i({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map((function(e){return Ai.payloadify(e)})),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},t.prototype.applyPollUpdateEvent=function(e){var t=e._payload.poll;return!(!t||this.id!==t.id||t.updated_at<this.updatedAt||(this._applyPollUpdatePayload(t),0))},t.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var t=this.options,n=t.map((function(e){return e.id})),r=e._payload,a=Math.floor(r.ts/1e3);return r.updated_vote_counts.forEach((function(e){var r=n.indexOf(e.option_id);if(r>-1){var i=t[r];a>=i._lastVotedAt&&(i.voteCount=e.vote_count,i._lastVotedAt=a)}})),r.req_id&&r.voted_option_ids&&(this.votedPollOptionIds=r.voted_option_ids),"number"==typeof r.voter_count&&(this.voterCount=r.voter_count),!0},t.prototype.serialize=function(){return Ra(this)},t}(Na);!function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"}(Ni||(Ni={}));i({},Ni);var Mi=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===Ni.SYNC_MESSAGE_FILL||e===Ni.SYNC_MESSAGE_CHANGELOGS||e===Ni.SYNC_POLL_CHANGELOGS},ji=function(e){function t(t){var n=t.messages,r=t.source,a=t.isWebSocketEventComing,i=void 0!==a&&a,s=e.call(this)||this;return s.messages=n,s.source=r,s.isWebSocketEventComing=i,s}return a(t,e),t}(ne),Ri=function(e){function t(t){var n=t.messageIds,r=t.source,a=t.isWebSocketEventComing,i=void 0!==a&&a,s=e.call(this)||this;return s.messageIds=n,s.source=r,s.isWebSocketEventComing=i,s}return a(t,e),t}(ne),Ui=function(e){function t(t){var n=t.reqId,r=t.source,a=e.call(this)||this;return a.reqId=n,a.source=r,a}return a(t,e),t}(ne),Li=function(e){function t(t){var n=t.polls,r=t.source,a=e.call(this)||this;return a.polls=n,a.source=r,a}return a(t,e),t}(ne),ki=function(e){function t(t){var n=t.event,r=t.source,a=e.call(this)||this;return a.event=n,a.source=r,a}return a(t,e),t}(ne),Di=function(e){function t(t){var n=t.event,r=t.source,a=e.call(this)||this;return a.event=n,a.source=r,a}return a(t,e),t}(ne),xi=function(){function e(e,t){var n;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=e,this.limit=null!==(n=t.limit)&&void 0!==n?n:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return T("number",this.limit)&&this.limit>0},e}(),Pi=function(e){function t(t,n,r,a){var i=e.call(this,t,a)||this;return i.channelUrl=n,i.channelType=r,i}return a(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&T("string",this.channelUrl)&&S(G,this.channelType)},t}(xi),Fi=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},Hi=function(e){function t(t){var n=t.title,r=t.optionTexts,a=t.data,i=t.allowUserSuggestion,s=t.allowMultipleVotes,o=t.closeAt,l=e.call(this)||this;return l.method=ie.POST,l.path=_e,l.params={title:n,options:r,data:a,allow_user_suggestion:i,allow_multiple_votes:s,close_at:o},l}return a(t,e),t}(Ie),Gi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new wi(t,n),r}return a(t,e),t}(Ae),Bi=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.pollId,i=e.call(this)||this;return i.method=ie.GET,i.path="".concat(_e,"/").concat(encodeURIComponent(a)),i.params={channel_url:n,channel_type:r},i}return a(t,e),t}(Ie),zi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new wi(t,n),r}return a(t,e),t}(Ae),Vi=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.pollId,i=t.pollOptionId,s=e.call(this)||this;return s.method=ie.GET,s.path="".concat(_e,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(i)),s.params={channel_url:n,channel_type:r},s}return a(t,e),t}(Ie),qi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pollOption=new Ai(t,n),r}return a(t,e),t}(Ae),Ki=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.timestamp,i=t.token,s=e.call(this)||this;return s.method=ie.GET,s.path="".concat(ye(n),"/").concat(encodeURIComponent(r),"/polls/changelogs"),s.params=re({change_ts:a,token:i}),s}return a(t,e),t}(Ie),Wi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedPolls=n.updated.map((function(e){return function(e,t){return new wi(e,t)}(t,e)})),r.deletedPollIds=n.deleted.map((function(e){return e})),r.hasMore=n.has_more,r.nextToken=n.next,r}return a(t,e),t}(Ae),Yi={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},Qi=function(e){return T("string",e.title)&&(t=e.optionTexts,A("string",t)&&t.every((function(e){return""!==e.trim()})))&&Ii(e.data)&&T("boolean",e.allowUserSuggestion,!0)&&T("boolean",e.allowMultipleVotes,!0)&&T("number",e.closeAt,!0);var t},Xi={channelUrl:"",channelType:G.BASE,pollId:0,pollOptionId:0},Zi=function(e){return T("string",e.channelUrl)&&""!==e.channelUrl&&S(G,e.channelType)&&T("number",e.pollId)&&e.pollId>0&&T("number",e.pollOptionId)&&e.pollOptionId>0},$i={channelUrl:"",channelType:G.BASE,pollId:0},Ji=function(e){return T("string",e.channelUrl)&&""!==e.channelUrl&&S(G,e.channelType)&&T("number",e.pollId)},es={},ts=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,a=t.sessionManager,i=t.requestQueue,s=t.logger;this._iid=e,this._sdkState=n,this._sessionManager=a,this._requestQueue=i,this._dispatcher=r,this._logger=s,es[e]=this}return e.of=function(e){return es[e]},e.prototype.buildPollFromSerializedData=function(e){var t=Ua(e);return new wi(this._iid,wi.payloadify(t))},e.prototype.get=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return La(Ji(e)).throw(y.invalidParameters),t=new Bi(i({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(zi).poll]}}))}))},e.prototype.create=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return La(Qi(e)).throw(y.invalidParameters),t=new Hi(i({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(Gi).poll]}}))}))},e.prototype.getOption=function(e){return o(this,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return La(Zi(e)).throw(y.invalidParameters),t=new Vi(i({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(qi).pollOption]}}))}))},e.prototype.getPollChangeLogs=function(e,t,n,r){return void 0===r&&(r=Ni.SYNC_POLL_CHANGELOGS),o(this,void 0,void 0,(function(){var a,i,s,o,c,u,d;return l(this,(function(l){switch(l.label){case 0:return a=new Ki(ae({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null})),[4,this._requestQueue.send(a)];case 1:return i=l.sent(),s=i.as(Wi),o=s.updatedPolls,c=s.deletedPollIds,u=s.hasMore,d=s.nextToken,o.length>0&&this._dispatcher.dispatch(new Li({polls:o,source:r})),[2,{updatedPolls:o,deletedPollIds:c,hasMore:u,token:d}]}}))}))},e}(),ns=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.token,i=t.limit,s=e.call(this)||this;return s.method=ie.GET,s.path=_e,s.params={channel_url:n,channel_type:r,token:a,limit:i},s}return a(t,e),t}(Ie),rs=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this).polls=(null!==(r=n.polls)&&void 0!==r?r:[]).map((function(e){return new wi(t,e)})),a.token=n.next,a}return a(t,e),t}(Ae),as=function(e){function t(t,n){return e.call(this,t,n.channelUrl,n.channelType,n)||this}return a(t,e),t.prototype.next=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a,s;return l(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Oi.of(this._iid).requestQueue,t=new ns(i(i({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(rs),a=r.polls,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw y.queryInProgress;case 4:return[3,6];case 5:throw y.invalidParameters;case 6:return[2]}}))}))},t}(Pi),is=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.pollId,i=t.pollOptionId,s=t.token,o=t.limit,l=e.call(this)||this;return l.method=ie.GET,l.path="".concat(_e,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(i),"/voters"),l.params={channel_url:n,channel_type:r,token:s,limit:o},l}return a(t,e),t}(Ie),ss=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this).voters=(null!==(r=n.voters)&&void 0!==r?r:[]).map((function(e){return new Da(t,e)})),a.token=n.next,a}return a(t,e),t}(Ae),os=function(e){function t(t,n){var r=e.call(this,t,n.channelUrl,n.channelType,n)||this;return r.pollId=n.pollId,r.pollOptionId=n.pollOptionId,r}return a(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&T("number",this.pollId)&&T("number",this.pollOptionId)},t.prototype.next=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,a,s;return l(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Oi.of(this._iid).requestQueue,t=new is(i(i({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(ss),a=r.voters,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw y.queryInProgress;case 4:return[3,6];case 5:throw y.invalidParameters;case 6:return[2]}}))}))},t}(Pi)}).call(this,n(8))},function(t,n){t.exports=e},function(e,t,n){e.exports=n(14)()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"m",(function(){return o})),n.d(t,"n",(function(){return a})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return l}));const r=10,a=250,i=1e3,s=6e5,o=12e3,l=11025,c=["audio/webm","audio/mp4","audio/mpeg","audio/ogg"],u="sendbird-voice-player-provider-root",d="sendbird-global-audio-player-id",h="Voice_message.mp3",f="audio/mp3;sbu_type=voice",p="KEY_VOICE_MESSAGE_DURATION",m="KEY_INTERNAL_MESSAGE_TYPE",b="voice/mp3",_="delivery_receipt",g="32px"},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(10)},function(e,t,n){
/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */
e.exports=function(){"use strict";const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:a}=Object;let{freeze:i,seal:s,create:o}=Object,{apply:l,construct:c}="undefined"!=typeof Reflect&&Reflect;l||(l=function(e,t,n){return e.apply(t,n)}),i||(i=function(e){return e}),s||(s=function(e){return e}),c||(c=function(e,t){return new e(...t)});const u=O(Array.prototype.forEach),d=O(Array.prototype.pop),h=O(Array.prototype.push),f=O(String.prototype.toLowerCase),p=O(String.prototype.toString),m=O(String.prototype.match),b=O(String.prototype.replace),_=O(String.prototype.indexOf),g=O(String.prototype.trim),v=O(RegExp.prototype.test),E=(y=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c(y,t)});var y;function O(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return l(e,t,r)}}function C(e,r,a){var i;a=null!==(i=a)&&void 0!==i?i:f,t&&t(e,null);let s=r.length;for(;s--;){let t=r[s];if("string"==typeof t){const e=a(t);e!==t&&(n(r)||(r[s]=e),t=e)}e[t]=!0}return e}function N(t){const n=o(null);for(const[r,a]of e(t))n[r]=a;return n}function T(e,t){for(;null!==e;){const n=a(e,t);if(n){if(n.get)return O(n.get);if("function"==typeof n.value)return O(n.value)}e=r(e)}return function(e){return console.warn("fallback value for",e),null}}const S=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),w=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),j=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R=i(["#text"]),U=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),L=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),k=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),x=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),P=s(/<%[\w\W]*|[\w\W]*%>/gm),F=s(/\${[\w\W]*}/gm),H=s(/^data-[\-\w.\u00B7-\uFFFF]/),G=s(/^aria-[\-\w]+$/),B=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),z=s(/^(?:\w+script|data):/i),V=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q=s(/^html$/i);var K=Object.freeze({__proto__:null,MUSTACHE_EXPR:x,ERB_EXPR:P,TMPLIT_EXPR:F,DATA_ATTR:H,ARIA_ATTR:G,IS_ALLOWED_URI:B,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:V,DOCTYPE_NAME:q});const W=()=>"undefined"==typeof window?null:window,Y=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;t&&t.hasAttribute("data-tt-policy-suffix")&&(n=t.getAttribute("data-tt-policy-suffix"));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function t(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();const r=e=>t(e);if(r.version="3.0.5",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;const a=n.document,s=a.currentScript;let{document:o}=n;const{DocumentFragment:l,HTMLTemplateElement:c,Node:y,Element:O,NodeFilter:x,NamedNodeMap:P=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:F,DOMParser:H,trustedTypes:G}=n,z=O.prototype,V=T(z,"cloneNode"),Q=T(z,"nextSibling"),X=T(z,"childNodes"),Z=T(z,"parentNode");if("function"==typeof c){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let $,J="";const{implementation:ee,createNodeIterator:te,createDocumentFragment:ne,getElementsByTagName:re}=o,{importNode:ae}=a;let ie={};r.isSupported="function"==typeof e&&"function"==typeof Z&&ee&&void 0!==ee.createHTMLDocument;const{MUSTACHE_EXPR:se,ERB_EXPR:oe,TMPLIT_EXPR:le,DATA_ATTR:ce,ARIA_ATTR:ue,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:he}=K;let{IS_ALLOWED_URI:fe}=K,pe=null;const me=C({},[...S,...I,...A,...M,...R]);let be=null;const _e=C({},[...U,...L,...k,...D]);let ge=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ve=null,Ee=null,ye=!0,Oe=!0,Ce=!1,Ne=!0,Te=!1,Se=!1,Ie=!1,Ae=!1,we=!1,Me=!1,je=!1,Re=!0,Ue=!1;const Le="user-content-";let ke=!0,De=!1,xe={},Pe=null;const Fe=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let He=null;const Ge=C({},["audio","video","img","source","image","track"]);let Be=null;const ze=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ve="http://www.w3.org/1998/Math/MathML",qe="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml";let We=Ke,Ye=!1,Qe=null;const Xe=C({},[Ve,qe,Ke],p);let Ze;const $e=["application/xhtml+xml","text/html"],Je="text/html";let et,tt=null;const nt=o.createElement("form"),rt=function(e){return e instanceof RegExp||e instanceof Function},at=function(e){if(!tt||tt!==e){if(e&&"object"==typeof e||(e={}),e=N(e),Ze=Ze=-1===$e.indexOf(e.PARSER_MEDIA_TYPE)?Je:e.PARSER_MEDIA_TYPE,et="application/xhtml+xml"===Ze?p:f,pe="ALLOWED_TAGS"in e?C({},e.ALLOWED_TAGS,et):me,be="ALLOWED_ATTR"in e?C({},e.ALLOWED_ATTR,et):_e,Qe="ALLOWED_NAMESPACES"in e?C({},e.ALLOWED_NAMESPACES,p):Xe,Be="ADD_URI_SAFE_ATTR"in e?C(N(ze),e.ADD_URI_SAFE_ATTR,et):ze,He="ADD_DATA_URI_TAGS"in e?C(N(Ge),e.ADD_DATA_URI_TAGS,et):Ge,Pe="FORBID_CONTENTS"in e?C({},e.FORBID_CONTENTS,et):Fe,ve="FORBID_TAGS"in e?C({},e.FORBID_TAGS,et):{},Ee="FORBID_ATTR"in e?C({},e.FORBID_ATTR,et):{},xe="USE_PROFILES"in e&&e.USE_PROFILES,ye=!1!==e.ALLOW_ARIA_ATTR,Oe=!1!==e.ALLOW_DATA_ATTR,Ce=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Te=e.SAFE_FOR_TEMPLATES||!1,Se=e.WHOLE_DOCUMENT||!1,we=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,je=e.RETURN_TRUSTED_TYPE||!1,Ae=e.FORCE_BODY||!1,Re=!1!==e.SANITIZE_DOM,Ue=e.SANITIZE_NAMED_PROPS||!1,ke=!1!==e.KEEP_CONTENT,De=e.IN_PLACE||!1,fe=e.ALLOWED_URI_REGEXP||B,We=e.NAMESPACE||Ke,ge=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&rt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ge.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&rt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ge.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ge.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Te&&(Oe=!1),Me&&(we=!0),xe&&(pe=C({},[...R]),be=[],!0===xe.html&&(C(pe,S),C(be,U)),!0===xe.svg&&(C(pe,I),C(be,L),C(be,D)),!0===xe.svgFilters&&(C(pe,A),C(be,L),C(be,D)),!0===xe.mathMl&&(C(pe,M),C(be,k),C(be,D))),e.ADD_TAGS&&(pe===me&&(pe=N(pe)),C(pe,e.ADD_TAGS,et)),e.ADD_ATTR&&(be===_e&&(be=N(be)),C(be,e.ADD_ATTR,et)),e.ADD_URI_SAFE_ATTR&&C(Be,e.ADD_URI_SAFE_ATTR,et),e.FORBID_CONTENTS&&(Pe===Fe&&(Pe=N(Pe)),C(Pe,e.FORBID_CONTENTS,et)),ke&&(pe["#text"]=!0),Se&&C(pe,["html","head","body"]),pe.table&&(C(pe,["tbody"]),delete ve.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw E('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');$=e.TRUSTED_TYPES_POLICY,J=$.createHTML("")}else void 0===$&&($=Y(G,s)),null!==$&&"string"==typeof J&&(J=$.createHTML(""));i&&i(e),tt=e}},it=C({},["mi","mo","mn","ms","mtext"]),st=C({},["foreignobject","desc","title","annotation-xml"]),ot=C({},["title","style","font","a","script"]),lt=C({},I);C(lt,A),C(lt,w);const ct=C({},M);C(ct,j);const ut=function(e){let t=Z(e);t&&t.tagName||(t={namespaceURI:We,tagName:"template"});const n=f(e.tagName),r=f(t.tagName);return!!Qe[e.namespaceURI]&&(e.namespaceURI===qe?t.namespaceURI===Ke?"svg"===n:t.namespaceURI===Ve?"svg"===n&&("annotation-xml"===r||it[r]):Boolean(lt[n]):e.namespaceURI===Ve?t.namespaceURI===Ke?"math"===n:t.namespaceURI===qe?"math"===n&&st[r]:Boolean(ct[n]):e.namespaceURI===Ke?!(t.namespaceURI===qe&&!st[r])&&!(t.namespaceURI===Ve&&!it[r])&&!ct[n]&&(ot[n]||!lt[n]):!("application/xhtml+xml"!==Ze||!Qe[e.namespaceURI]))},dt=function(e){h(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},ht=function(e,t){try{h(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!be[e])if(we||Me)try{dt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},ft=function(e){let t,n;if(Ae)e="<remove></remove>"+e;else{const t=m(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ze&&We===Ke&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=$?$.createHTML(e):e;if(We===Ke)try{t=(new H).parseFromString(r,Ze)}catch(e){}if(!t||!t.documentElement){t=ee.createDocument(We,"template",null);try{t.documentElement.innerHTML=Ye?J:r}catch(e){}}const a=t.body||t.documentElement;return e&&n&&a.insertBefore(o.createTextNode(n),a.childNodes[0]||null),We===Ke?re.call(t,Se?"html":"body")[0]:Se?t.documentElement:a},pt=function(e){return te.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},mt=function(e){return e instanceof F&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof P)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},bt=function(e){return"object"==typeof y?e instanceof y:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},_t=function(e,t,n){ie[e]&&u(ie[e],e=>{e.call(r,t,n,tt)})},gt=function(e){let t;if(_t("beforeSanitizeElements",e,null),mt(e))return dt(e),!0;const n=et(e.nodeName);if(_t("uponSanitizeElement",e,{tagName:n,allowedTags:pe}),e.hasChildNodes()&&!bt(e.firstElementChild)&&(!bt(e.content)||!bt(e.content.firstElementChild))&&v(/<[/\w]/g,e.innerHTML)&&v(/<[/\w]/g,e.textContent))return dt(e),!0;if(!pe[n]||ve[n]){if(!ve[n]&&Et(n)){if(ge.tagNameCheck instanceof RegExp&&v(ge.tagNameCheck,n))return!1;if(ge.tagNameCheck instanceof Function&&ge.tagNameCheck(n))return!1}if(ke&&!Pe[n]){const t=Z(e)||e.parentNode,n=X(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r)t.insertBefore(V(n[r],!0),Q(e))}return dt(e),!0}return e instanceof O&&!ut(e)?(dt(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!v(/<\/no(script|embed|frames)/i,e.innerHTML)?(Te&&3===e.nodeType&&(t=e.textContent,t=b(t,se," "),t=b(t,oe," "),t=b(t,le," "),e.textContent!==t&&(h(r.removed,{element:e.cloneNode()}),e.textContent=t)),_t("afterSanitizeElements",e,null),!1):(dt(e),!0)},vt=function(e,t,n){if(Re&&("id"===t||"name"===t)&&(n in o||n in nt))return!1;if(Oe&&!Ee[t]&&v(ce,t));else if(ye&&v(ue,t));else if(!be[t]||Ee[t]){if(!(Et(e)&&(ge.tagNameCheck instanceof RegExp&&v(ge.tagNameCheck,e)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(e))&&(ge.attributeNameCheck instanceof RegExp&&v(ge.attributeNameCheck,t)||ge.attributeNameCheck instanceof Function&&ge.attributeNameCheck(t))||"is"===t&&ge.allowCustomizedBuiltInElements&&(ge.tagNameCheck instanceof RegExp&&v(ge.tagNameCheck,n)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(n))))return!1}else if(Be[t]);else if(v(fe,b(n,he,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==_(n,"data:")||!He[e])if(Ce&&!v(de,b(n,he,"")));else if(n)return!1;return!0},Et=function(e){return e.indexOf("-")>0},yt=function(e){let t,n,a,i;_t("beforeSanitizeAttributes",e,null);const{attributes:s}=e;if(!s)return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(i=s.length;i--;){t=s[i];const{name:l,namespaceURI:c}=t;if(n="value"===l?t.value:g(t.value),a=et(l),o.attrName=a,o.attrValue=n,o.keepAttr=!0,o.forceKeepAttr=void 0,_t("uponSanitizeAttribute",e,o),n=o.attrValue,o.forceKeepAttr)continue;if(ht(l,e),!o.keepAttr)continue;if(!Ne&&v(/\/>/i,n)){ht(l,e);continue}Te&&(n=b(n,se," "),n=b(n,oe," "),n=b(n,le," "));const u=et(e.nodeName);if(vt(u,a,n)){if(!Ue||"id"!==a&&"name"!==a||(ht(l,e),n=Le+n),$&&"object"==typeof G&&"function"==typeof G.getAttributeType)if(c);else switch(G.getAttributeType(u,a)){case"TrustedHTML":n=$.createHTML(n);break;case"TrustedScriptURL":n=$.createScriptURL(n)}try{c?e.setAttributeNS(c,l,n):e.setAttribute(l,n),d(r.removed)}catch(e){}}}_t("afterSanitizeAttributes",e,null)},Ot=function e(t){let n;const r=pt(t);for(_t("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)_t("uponSanitizeShadowNode",n,null),gt(n)||(n.content instanceof l&&e(n.content),yt(n));_t("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e){let t,n,i,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ye=!e,Ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!bt(e)){if("function"!=typeof e.toString)throw E("toString is not a function");if("string"!=typeof(e=e.toString()))throw E("dirty is not a string, aborting")}if(!r.isSupported)return e;if(Ie||at(o),r.removed=[],"string"==typeof e&&(De=!1),De){if(e.nodeName){const t=et(e.nodeName);if(!pe[t]||ve[t])throw E("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof y)t=ft("\x3c!----\x3e"),n=t.ownerDocument.importNode(e,!0),1===n.nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?t=n:t.appendChild(n);else{if(!we&&!Te&&!Se&&-1===e.indexOf("<"))return $&&je?$.createHTML(e):e;if(t=ft(e),!t)return we?null:je?J:""}t&&Ae&&dt(t.firstChild);const c=pt(De?e:t);for(;i=c.nextNode();)gt(i)||(i.content instanceof l&&Ot(i.content),yt(i));if(De)return e;if(we){if(Me)for(s=ne.call(t.ownerDocument);t.firstChild;)s.appendChild(t.firstChild);else s=t;return(be.shadowroot||be.shadowrootmode)&&(s=ae.call(a,s,!0)),s}let u=Se?t.outerHTML:t.innerHTML;return Se&&pe["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&v(q,t.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+u),Te&&(u=b(u,se," "),u=b(u,oe," "),u=b(u,le," ")),$&&je?$.createHTML(u):u},r.setConfig=function(e){at(e),Ie=!0},r.clearConfig=function(){tt=null,Ie=!1},r.isValidAttribute=function(e,t,n){tt||at({});const r=et(e),a=et(t);return vt(r,a,n)},r.addHook=function(e,t){"function"==typeof t&&(ie[e]=ie[e]||[],h(ie[e],t))},r.removeHook=function(e){if(ie[e])return d(ie[e])},r.removeHooks=function(e){ie[e]&&(ie[e]=[])},r.removeAllHooks=function(){ie={}},r}()}()},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(18)},function(e,t,n){"use strict";
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1),a=n(11),i=n(12);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var o=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function b(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){_[e]=new b(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];_[t]=new b(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){_[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){_[e]=new b(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){_[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){_[e]=new b(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){_[e]=new b(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){_[e]=new b(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){_[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function E(e,t,n,r){var a=_.hasOwnProperty(t)?_[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,v);_[t]=new b(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,v);_[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,v);_[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){_[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)})),_.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){_[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=60103,C=60106,N=60107,T=60108,S=60114,I=60109,A=60110,w=60112,M=60113,j=60120,R=60115,U=60116,L=60121,k=60128,D=60129,x=60130,P=60131;if("function"==typeof Symbol&&Symbol.for){var F=Symbol.for;O=F("react.element"),C=F("react.portal"),N=F("react.fragment"),T=F("react.strict_mode"),S=F("react.profiler"),I=F("react.provider"),A=F("react.context"),w=F("react.forward_ref"),M=F("react.suspense"),j=F("react.suspense_list"),R=F("react.memo"),U=F("react.lazy"),L=F("react.block"),F("react.scope"),k=F("react.opaque.id"),D=F("react.debug_trace_mode"),x=F("react.offscreen"),P=F("react.legacy_hidden")}var H,G="function"==typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=G&&e[G]||e["@@iterator"])?e:null}function z(e){if(void 0===H)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var V=!1;function q(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var a=e.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o])return"\n"+a[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case N:return"Fragment";case C:return"Portal";case S:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case j:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case w:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return W(e.type);case L:return W(e._render);case U:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ce(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,be=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function _e(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function Ee(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Ee(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ge).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var Oe=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Oe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function Ne(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,Ae=null;function we(e){if(e=$r(e)){if("function"!=typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=ea(t),Se(e.stateNode,e.type,t))}}function Me(e){Ie?Ae?Ae.push(e):Ae=[e]:Ie=e}function je(){if(Ie){var e=Ie,t=Ae;if(Ae=Ie=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Re(e,t){return e(t)}function Ue(e,t,n,r,a){return e(t,n,r,a)}function Le(){}var ke=Re,De=!1,xe=!1;function Pe(){null===Ie&&null===Ae||(Le(),je())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=ea(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var He=!1;if(d)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){He=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(e){He=!1}function Be(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var ze=!1,Ve=null,qe=!1,Ke=null,We={onError:function(e){ze=!0,Ve=e}};function Ye(e,t,n,r,a,i,s,o,l){ze=!1,Ve=null,Be.apply(We,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Qe(e)!==e)throw Error(s(188))}function $e(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ze(a),e;if(i===r)return Ze(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Je(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,at=!1,it=[],st=null,ot=null,lt=null,ct=new Map,ut=new Map,dt=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=ft(t,n,r,a,i),null!==t&&(null!==(t=$r(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function bt(e){var t=Zr(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=$r(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function gt(e,t,n){_t(e)&&n.delete(t)}function vt(){for(at=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=$r(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==st&&_t(st)&&(st=null),null!==ot&&_t(ot)&&(ot=null),null!==lt&&_t(lt)&&(lt=null),ct.forEach(gt),ut.forEach(gt)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vt)))}function yt(e){function t(t){return Et(t,e)}if(0<it.length){Et(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&Et(st,e),null!==ot&&Et(ot,e),null!==lt&&Et(lt,e),ct.forEach(t),ut.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)bt(n),null===n.blockedOn&&dt.shift()}function Ot(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ct={animationend:Ot("Animation","AnimationEnd"),animationiteration:Ot("Animation","AnimationIteration"),animationstart:Ot("Animation","AnimationStart"),transitionend:Ot("Transition","TransitionEnd")},Nt={},Tt={};function St(e){if(Nt[e])return Nt[e];if(!Ct[e])return e;var t,n=Ct[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Nt[e]=n[t];return e}d&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var It=St("animationend"),At=St("animationiteration"),wt=St("animationstart"),Mt=St("transitionend"),jt=new Map,Rt=new Map,Ut=["abort","abort",It,"animationEnd",At,"animationIteration",wt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Rt.set(r,t),jt.set(r,a),c(a,[r])}}(0,i.unstable_now)();var kt=8;function Dt(e){if(0!=(1&e))return kt=15,1;if(0!=(2&e))return kt=14,2;if(0!=(4&e))return kt=13,4;var t=24&e;return 0!==t?(kt=12,t):0!=(32&e)?(kt=11,32):0!==(t=192&e)?(kt=10,t):0!=(256&e)?(kt=9,256):0!==(t=3584&e)?(kt=8,t):0!=(4096&e)?(kt=7,4096):0!==(t=4186112&e)?(kt=6,t):0!==(t=62914560&e)?(kt=5,t):67108864&e?(kt=4,67108864):0!=(134217728&e)?(kt=3,134217728):0!==(t=805306368&e)?(kt=2,t):0!=(1073741824&e)?(kt=1,1073741824):(kt=8,e)}function xt(e,t){var n=e.pendingLanes;if(0===n)return kt=0;var r=0,a=0,i=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==i)r=i,a=kt=15;else if(0!==(i=134217727&n)){var l=i&~s;0!==l?(r=Dt(l),a=kt):0!==(o&=i)&&(r=Dt(o),a=kt)}else 0!==(i=n&~s)?(r=Dt(i),a=kt):0!==o&&(r=Dt(o),a=kt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&s)){if(Dt(t),a<=kt)return t;kt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-zt(t)),r|=e[n],t&=~a;return r}function Pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ht(24&~t))?Ft(10,t):e;case 10:return 0===(e=Ht(192&~t))?Ft(8,t):e;case 8:return 0===(e=Ht(3584&~t))&&(0===(e=Ht(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ht(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function Ht(e){return e&-e}function Gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/qt|0)|0},Vt=Math.log,qt=Math.LN2;var Kt=i.unstable_UserBlockingPriority,Wt=i.unstable_runWithPriority,Yt=!0;function Qt(e,t,n,r){De||Le();var a=Zt,i=De;De=!0;try{Ue(a,e,t,n,r)}finally{(De=i)||Pe()}}function Xt(e,t,n,r){Wt(Kt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var a;if(Yt)if((a=0==(4&t))&&0<it.length&&-1<ht.indexOf(e))e=ft(null,e,t,n,r),it.push(e);else{var i=$t(e,t,n,r);if(null===i)a&&pt(e,r);else{if(a){if(-1<ht.indexOf(e))return e=ft(i,e,t,n,r),void it.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=mt(st,e,t,n,r,a),!0;case"dragenter":return ot=mt(ot,e,t,n,r,a),!0;case"mouseover":return lt=mt(lt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return ct.set(i,mt(ct.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ut.set(i,mt(ut.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;pt(e,r)}Mr(e,t,r,null,n)}}}function $t(e,t,n,r){var a=Te(r);if(null!==(a=Zr(a))){var i=Qe(a);if(null===i)a=null;else{var s=i.tag;if(13===s){if(null!==(a=Xe(i)))return a;a=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Mr(e,t,r,a,n),null}var Jt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return tn=a.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function on(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?an:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var ln,cn,un,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(dn),fn=a({},dn,{view:0,detail:0}),pn=on(fn),mn=a({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(ln=e.screenX-un.screenX,cn=e.screenY-un.screenY):cn=ln=0,un=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),bn=on(mn),_n=on(a({},mn,{dataTransfer:0})),gn=on(a({},fn,{relatedTarget:0})),vn=on(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),En=on(a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),yn=on(a({},dn,{data:0})),On={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return Tn}var In=on(a({},fn,{key:function(e){if(e.key){var t=On[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=on(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=on(a({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Mn=on(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=on(a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],Un=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var kn=d&&"TextEvent"in window&&!Ln,Dn=d&&(!Un||Ln&&8<Ln&&11>=Ln),xn=String.fromCharCode(32),Pn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Vn(e,t,n,r){Me(r),0<(t=Rr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Wn(e){Nr(e,0)}function Yn(e){if(Z(Jr(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),$n="function"==typeof Jn.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function er(){qn&&(qn.detachEvent("onpropertychange",tr),Kn=qn=null)}function tr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];if(Vn(t,Kn,e,Te(e)),e=Wn,De)e(t);else{De=!0;try{Re(e,t)}finally{De=!1,Pe()}}}}function nr(e,t,n){"focusin"===e?(er(),Kn=n,(qn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},or=Object.prototype.hasOwnProperty;function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!or.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fr=d&&"documentMode"in document&&11>=document.documentMode,pr=null,mr=null,br=null,_r=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==pr||pr!==$(r)||("selectionStart"in(r=pr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Rr(mr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ut,2);for(var vr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<vr.length;Er++)Rt.set(vr[Er],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(yr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Ye.apply(this,arguments),ze){if(!ze)throw Error(s(198));var u=Ve;ze=!1,Ve=null,qe||(qe=!0,Ke=u)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Cr(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Cr(a,o,c),i=l}}}if(qe)throw e=Ke,qe=!1,Ke=null,e}function Tr(e,t){var n=ta(t),r=e+"__bubble";n.has(r)||(wr(t,e,2,!1),n.add(r))}var Sr="_reactListening"+Math.random().toString(36).slice(2);function Ir(e){e[Sr]||(e[Sr]=!0,o.forEach((function(t){Or.has(t)||Ar(t,!1,e,null),Ar(t,!0,e,null)})))}function Ar(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Or.has(e)){if("scroll"!==e)return;a|=2,i=r}var s=ta(i),o=e+"__"+(t?"capture":"bubble");s.has(o)||(t&&(a|=4),wr(i,e,a,t),s.add(o))}function wr(e,t,n,r){var a=Rt.get(t);switch(void 0===a?2:a){case 0:a=Qt;break;case 1:a=Xt;break;default:a=Zt}n=a.bind(null,t,n,e),a=void 0,!He||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,a){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=Zr(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}!function(e,t,n){if(xe)return e(t,n);xe=!0;try{ke(e,t,n)}finally{xe=!1,Pe()}}((function(){var r=i,a=Te(n),s=[];e:{var o=jt.get(e);if(void 0!==o){var l=hn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=wn;break;case It:case At:case wt:l=vn;break;case Mt:l=Mn;break;case"scroll":l=pn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Fe(p,h))&&u.push(jr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!Zr(c)&&!c[Qr])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Zr(c):null)&&(c!==(d=Qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=bn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Jr(l),f=null==c?o:Jr(c),(o=new u(m,p+"leave",l,n,a)).target=d,o.relatedTarget=f,m=null,Zr(a)===r&&((u=new u(h,p+"enter",c,n,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Ur(f))p++;for(f=0,m=h;m;m=Ur(m))f++;for(;0<p-f;)u=Ur(u),p--;for(;0<f-p;)h=Ur(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ur(u),h=Ur(h)}u=null}else u=null;null!==l&&Lr(s,o,l,u,!1),null!==c&&null!==d&&Lr(s,d,c,u,!0)}if("select"===(l=(o=r?Jr(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var b=Qn;else if(zn(o))if(Xn)b=ir;else{b=rr;var _=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(b=ar);switch(b&&(b=b(e,r))?Vn(s,b,n,a):(_&&_(e,o,r),"focusout"===e&&(_=o._wrapperState)&&_.controlled&&"number"===o.type&&ae(o,"number",o.value)),_=r?Jr(r):window,e){case"focusin":(zn(_)||"true"===_.contentEditable)&&(pr=_,mr=r,br=null);break;case"focusout":br=mr=pr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,gr(s,n,a);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":gr(s,n,a)}var g;if(Un)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Gn?Fn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Dn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Gn&&(g=nn()):(en="value"in(Jt=a)?Jt.value:Jt.textContent,Gn=!0)),0<(_=Rr(r,v)).length&&(v=new yn(v,e,null,n,a),s.push({event:v,listeners:_}),g?v.data=g:null!==(g=Hn(n))&&(v.data=g))),(g=kn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Pn=!0,xn);case"textInput":return(e=t.data)===xn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Un&&Fn(e,t)?(e=nn(),tn=en=Jt=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Rr(r,"onBeforeInput")).length&&(a=new yn("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=g))}Nr(s,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Rr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Fe(e,n))&&r.unshift(jr(e,i,a)),null!=(i=Fe(e,t))&&r.push(jr(e,i,a))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Lr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Fe(n,i))&&s.unshift(jr(n,l,o)):a||null!=(l=Fe(n,i))&&s.push(jr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function kr(){}var Dr=null,xr=null;function Pr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Fr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"==typeof setTimeout?setTimeout:void 0,Gr="function"==typeof clearTimeout?clearTimeout:void 0;function Br(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function zr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Vr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var qr=0;var Kr=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Kr,Yr="__reactProps$"+Kr,Qr="__reactContainer$"+Kr,Xr="__reactEvents$"+Kr;function Zr(e){var t=e[Wr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Wr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Vr(e);null!==e;){if(n=e[Wr])return n;e=Vr(e)}return t}n=(e=n).parentNode}return null}function $r(e){return!(e=e[Wr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Jr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ea(e){return e[Yr]||null}function ta(e){var t=e[Xr];return void 0===t&&(t=e[Xr]=new Set),t}var na=[],ra=-1;function aa(e){return{current:e}}function ia(e){0>ra||(e.current=na[ra],na[ra]=null,ra--)}function sa(e,t){ra++,na[ra]=e.current,e.current=t}var oa={},la=aa(oa),ca=aa(!1),ua=oa;function da(e,t){var n=e.type.contextTypes;if(!n)return oa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ha(e){return null!=(e=e.childContextTypes)}function fa(){ia(ca),ia(la)}function pa(e,t,n){if(la.current!==oa)throw Error(s(168));sa(la,t),sa(ca,n)}function ma(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,W(t)||"Unknown",i));return a({},n,r)}function ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oa,ua=la.current,sa(la,e),sa(ca,ca.current),!0}function _a(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ma(e,t,ua),r.__reactInternalMemoizedMergedChildContext=e,ia(ca),ia(la),sa(la,e)):ia(ca),sa(ca,n)}var ga=null,va=null,Ea=i.unstable_runWithPriority,ya=i.unstable_scheduleCallback,Oa=i.unstable_cancelCallback,Ca=i.unstable_shouldYield,Na=i.unstable_requestPaint,Ta=i.unstable_now,Sa=i.unstable_getCurrentPriorityLevel,Ia=i.unstable_ImmediatePriority,Aa=i.unstable_UserBlockingPriority,wa=i.unstable_NormalPriority,Ma=i.unstable_LowPriority,ja=i.unstable_IdlePriority,Ra={},Ua=void 0!==Na?Na:function(){},La=null,ka=null,Da=!1,xa=Ta(),Pa=1e4>xa?Ta:function(){return Ta()-xa};function Fa(){switch(Sa()){case Ia:return 99;case Aa:return 98;case wa:return 97;case Ma:return 96;case ja:return 95;default:throw Error(s(332))}}function Ha(e){switch(e){case 99:return Ia;case 98:return Aa;case 97:return wa;case 96:return Ma;case 95:return ja;default:throw Error(s(332))}}function Ga(e,t){return e=Ha(e),Ea(e,t)}function Ba(e,t,n){return e=Ha(e),ya(e,t,n)}function za(){if(null!==ka){var e=ka;ka=null,Oa(e)}Va()}function Va(){if(!Da&&null!==La){Da=!0;var e=0;try{var t=La;Ga(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),La=null}catch(t){throw null!==La&&(La=La.slice(e+1)),ya(Ia,za),t}finally{Da=!1}}}var qa=y.ReactCurrentBatchConfig;function Ka(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wa=aa(null),Ya=null,Qa=null,Xa=null;function Za(){Xa=Qa=Ya=null}function $a(e){var t=Wa.current;ia(Wa),e.type._context._currentValue=t}function Ja(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ei(e,t){Ya=e,Xa=Qa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(js=!0),e.firstContext=null)}function ti(e,t){if(Xa!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Xa=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qa){if(null===Ya)throw Error(s(308));Qa=t,Ya.dependencies={lanes:0,firstContext:t,responders:null}}else Qa=Qa.next=t;return e._currentValue}var ni=!1;function ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ai(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ii(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function si(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function li(e,t,n,r){var i=e.updateQueue;ni=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?s=u:o.next=u,o=c;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==o&&(null===h?d.firstBaseUpdate=u:h.next=u,d.lastBaseUpdate=c)}}if(null!==s){for(h=i.baseState,o=0,d=u=c=null;;){l=s.lane;var f=s.eventTime;if((r&l)===l){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(l=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){h=p.call(f,h,l);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(f,h,l):p))break e;h=a({},h,l);break e;case 2:ni=!0}}null!==s.callback&&(e.flags|=32,null===(l=i.effects)?i.effects=[s]:l.push(s))}else f={eventTime:f,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(u=d=f,c=h):d=d.next=f,o|=l;if(null===(s=s.next)){if(null===(l=i.shared.pending))break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}null===d&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,Lo|=o,e.lanes=o,e.memoizedState=h}}function ci(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(s(191,a));a.call(r)}}}var ui=(new r.Component).refs;function di(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=il(),a=sl(e),i=ii(r,a);i.payload=t,null!=n&&(i.callback=n),si(e,i),ol(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=il(),a=sl(e),i=ii(r,a);i.tag=1,i.payload=t,null!=n&&(i.callback=n),si(e,i),ol(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=il(),r=sl(e),a=ii(n,r);a.tag=2,null!=t&&(a.callback=t),si(e,a),ol(e,r,n)}};function fi(e,t,n,r,a,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function pi(e,t,n){var r=!1,a=oa,i=t.contextType;return"object"==typeof i&&null!==i?i=ti(i):(a=ha(t)?ua:la.current,i=(r=null!=(r=t.contextTypes))?da(e,a):oa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function mi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function bi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ui,ri(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=ti(i):(i=ha(t)?ua:la.current,a.context=da(e,i)),li(e,n,a,r),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),li(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4)}var _i=Array.isArray;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===ui&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vi(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ei(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Fl(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Hl(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Gl(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case O:return(n=Hl(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case C:return(t=Vl(t,e.mode,n)).return=e,t}if(_i(t)||B(t))return(t=Gl(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case O:return n.key===a?n.type===N?d(e,t,n.props.children,r,a):c(e,t,n,r):null;case C:return n.key===a?u(e,t,n,r):null}if(_i(n)||B(n))return null!==a?null:d(e,t,n,r,null);vi(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case O:return e=e.get(null===r.key?n:r.key)||null,r.type===N?d(t,e,r.props.children,a,r.key):c(t,e,r,a);case C:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(_i(r)||B(r))return d(t,e=e.get(n)||null,r,a,null);vi(t,r)}return null}function m(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,b=null;null!==d&&m<o.length;m++){d.index>m?(b=d,d=null):b=d.sibling;var _=f(a,d,o[m],l);if(null===_){null===d&&(d=b);break}e&&d&&null===_.alternate&&t(a,d),s=i(_,s,m),null===u?c=_:u.sibling=_,u=_,d=b}if(m===o.length)return n(a,d),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return c}for(d=r(a,d);m<o.length;m++)null!==(b=p(d,a,m,o[m],l))&&(e&&null!==b.alternate&&d.delete(null===b.key?m:b.key),s=i(b,s,m),null===u?c=b:u.sibling=b,u=b);return e&&d.forEach((function(e){return t(a,e)})),c}function b(a,o,l,c){var u=B(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,b=o=0,_=null,g=l.next();null!==m&&!g.done;b++,g=l.next()){m.index>b?(_=m,m=null):_=m.sibling;var v=f(a,m,g.value,c);if(null===v){null===m&&(m=_);break}e&&m&&null===v.alternate&&t(a,m),o=i(v,o,b),null===d?u=v:d.sibling=v,d=v,m=_}if(g.done)return n(a,m),u;if(null===m){for(;!g.done;b++,g=l.next())null!==(g=h(a,g.value,c))&&(o=i(g,o,b),null===d?u=g:d.sibling=g,d=g);return u}for(m=r(a,m);!g.done;b++,g=l.next())null!==(g=p(m,a,b,g.value,c))&&(e&&null!==g.alternate&&m.delete(null===g.key?b:g.key),o=i(g,o,b),null===d?u=g:d.sibling=g,d=g);return e&&m.forEach((function(e){return t(a,e)})),u}return function(e,r,i,l){var c="object"==typeof i&&null!==i&&i.type===N&&null===i.key;c&&(i=i.props.children);var u="object"==typeof i&&null!==i;if(u)switch(i.$$typeof){case O:e:{for(u=i.key,c=r;null!==c;){if(c.key===u){switch(c.tag){case 7:if(i.type===N){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}break;default:if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=gi(e,c,i),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}i.type===N?((r=Gl(i.props.children,e.mode,l,i.key)).return=e,e=r):((l=Hl(i.type,i.key,i.props,null,e.mode,l)).ref=gi(e,r,i),l.return=e,e=l)}return o(e);case C:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Vl(i,e.mode,l)).return=e,e=r}return o(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=zl(i,e.mode,l)).return=e,e=r),o(e);if(_i(i))return m(e,r,i,l);if(B(i))return b(e,r,i,l);if(u&&vi(e,i),void 0===i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,W(e.type)||"Component"))}return n(e,r)}}var yi=Ei(!0),Oi=Ei(!1),Ci={},Ni=aa(Ci),Ti=aa(Ci),Si=aa(Ci);function Ii(e){if(e===Ci)throw Error(s(174));return e}function Ai(e,t){switch(sa(Si,t),sa(Ti,e),sa(Ni,Ci),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ia(Ni),sa(Ni,t)}function wi(){ia(Ni),ia(Ti),ia(Si)}function Mi(e){Ii(Si.current);var t=Ii(Ni.current),n=pe(t,e.type);t!==n&&(sa(Ti,e),sa(Ni,n))}function ji(e){Ti.current===e&&(ia(Ni),ia(Ti))}var Ri=aa(0);function Ui(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Li=null,ki=null,Di=!1;function xi(e,t){var n=xl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Pi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fi(e){if(Di){var t=ki;if(t){var n=t;if(!Pi(e,t)){if(!(t=zr(n.nextSibling))||!Pi(e,t))return e.flags=-1025&e.flags|2,Di=!1,void(Li=e);xi(Li,n)}Li=e,ki=zr(t.firstChild)}else e.flags=-1025&e.flags|2,Di=!1,Li=e}}function Hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Li=e}function Gi(e){if(e!==Li)return!1;if(!Di)return Hi(e),Di=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Fr(t,e.memoizedProps))for(t=ki;t;)xi(e,t),t=zr(t.nextSibling);if(Hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ki=zr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ki=null}}else ki=Li?zr(e.stateNode.nextSibling):null;return!0}function Bi(){ki=Li=null,Di=!1}var zi=[];function Vi(){for(var e=0;e<zi.length;e++)zi[e]._workInProgressVersionPrimary=null;zi.length=0}var qi=y.ReactCurrentDispatcher,Ki=y.ReactCurrentBatchConfig,Wi=0,Yi=null,Qi=null,Xi=null,Zi=!1,$i=!1;function Ji(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ts(e,t,n,r,a,i){if(Wi=i,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qi.current=null===e||null===e.memoizedState?Is:As,e=n(r,a),$i){i=0;do{if($i=!1,!(25>i))throw Error(s(301));i+=1,Xi=Qi=null,t.updateQueue=null,qi.current=ws,e=n(r,a)}while($i)}if(qi.current=Ss,t=null!==Qi&&null!==Qi.next,Wi=0,Xi=Qi=Yi=null,Zi=!1,t)throw Error(s(300));return e}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xi?Yi.memoizedState=Xi=e:Xi=Xi.next=e,Xi}function rs(){if(null===Qi){var e=Yi.alternate;e=null!==e?e.memoizedState:null}else e=Qi.next;var t=null===Xi?Yi.memoizedState:Xi.next;if(null!==t)Xi=t,Qi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Qi=e).memoizedState,baseState:Qi.baseState,baseQueue:Qi.baseQueue,queue:Qi.queue,next:null},null===Xi?Yi.memoizedState=Xi=e:Xi=Xi.next=e}return Xi}function as(e,t){return"function"==typeof t?t(e):t}function is(e){var t=rs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Qi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var l=o=i=null,c=a;do{var u=c.lane;if((Wi&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(o=l=d,i=r):l=l.next=d,Yi.lanes|=u,Lo|=u}c=c.next}while(null!==c&&c!==a);null===l?i=r:l.next=o,sr(r,t.memoizedState)||(js=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ss(e){var t=rs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);sr(i,t.memoizedState)||(js=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function os(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Wi&e)===e)&&(t._workInProgressVersionPrimary=r,zi.push(t))),e)return n(t._source);throw zi.push(t),Error(s(350))}function ls(e,t,n,r){var a=So;if(null===a)throw Error(s(349));var i=t._getVersion,o=i(t._source),l=qi.current,c=l.useState((function(){return os(a,t,n)})),u=c[1],d=c[0];c=Xi;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var b=Yi;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=u;var e=i(t._source);if(!sr(o,e)){e=n(t._source),sr(d,e)||(u(e),e=sl(b),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,s=e;0<s;){var l=31-zt(s),c=1<<l;r[l]|=e,s&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=sl(b);a.mutableReadLanes|=r&a.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),sr(p,n)&&sr(m,t)&&sr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:d}).dispatch=u=Ts.bind(null,Yi,e),c.queue=e,c.baseQueue=null,d=os(a,t,n),c.memoizedState=c.baseState=d),d}function cs(e,t,n){return ls(rs(),e,t,n)}function us(e){var t=ns();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:e}).dispatch=Ts.bind(null,Yi,e),[t.memoizedState,e]}function ds(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Yi.updateQueue)?(t={lastEffect:null},Yi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function hs(e){return e={current:e},ns().memoizedState=e}function fs(){return rs().memoizedState}function ps(e,t,n,r){var a=ns();Yi.flags|=e,a.memoizedState=ds(1|t,n,void 0,void 0===r?null:r)}function ms(e,t,n,r){var a=rs();r=void 0===r?null:r;var i=void 0;if(null!==Qi){var s=Qi.memoizedState;if(i=s.destroy,null!==r&&es(r,s.deps))return void ds(t,n,i,r)}Yi.flags|=e,a.memoizedState=ds(1|t,n,i,r)}function bs(e,t){return ps(516,4,e,t)}function _s(e,t){return ms(516,4,e,t)}function gs(e,t){return ms(4,2,e,t)}function vs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Es(e,t,n){return n=null!=n?n.concat([e]):null,ms(4,2,vs.bind(null,t,e),n)}function ys(){}function Os(e,t){var n=rs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cs(e,t){var n=rs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&es(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ns(e,t){var n=Fa();Ga(98>n?98:n,(function(){e(!0)})),Ga(97<n?97:n,(function(){var n=Ki.transition;Ki.transition=1;try{e(!1),t()}finally{Ki.transition=n}}))}function Ts(e,t,n){var r=il(),a=sl(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Yi||null!==s&&s===Yi)$i=Zi=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=s(o,n);if(i.eagerReducer=s,i.eagerState=l,sr(l,o))return}catch(e){}ol(e,a,r)}}var Ss={readContext:ti,useCallback:Ji,useContext:Ji,useEffect:Ji,useImperativeHandle:Ji,useLayoutEffect:Ji,useMemo:Ji,useReducer:Ji,useRef:Ji,useState:Ji,useDebugValue:Ji,useDeferredValue:Ji,useTransition:Ji,useMutableSource:Ji,useOpaqueIdentifier:Ji,unstable_isNewReconciler:!1},Is={readContext:ti,useCallback:function(e,t){return ns().memoizedState=[e,void 0===t?null:t],e},useContext:ti,useEffect:bs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ps(4,2,vs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ps(4,2,e,t)},useMemo:function(e,t){var n=ns();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ns();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ts.bind(null,Yi,e),[r.memoizedState,e]},useRef:hs,useState:us,useDebugValue:ys,useDeferredValue:function(e){var t=us(e),n=t[0],r=t[1];return bs((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=us(!1),t=e[0];return hs(e=Ns.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ns();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ls(r,e,t,n)},useOpaqueIdentifier:function(){if(Di){var e=!1,t=function(e){return{$$typeof:k,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(qr++).toString(36))),Error(s(355))})),n=us(t)[1];return 0==(2&Yi.mode)&&(Yi.flags|=516,ds(5,(function(){n("r:"+(qr++).toString(36))}),void 0,null)),t}return us(t="r:"+(qr++).toString(36)),t},unstable_isNewReconciler:!1},As={readContext:ti,useCallback:Os,useContext:ti,useEffect:_s,useImperativeHandle:Es,useLayoutEffect:gs,useMemo:Cs,useReducer:is,useRef:fs,useState:function(){return is(as)},useDebugValue:ys,useDeferredValue:function(e){var t=is(as),n=t[0],r=t[1];return _s((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=is(as)[0];return[fs().current,e]},useMutableSource:cs,useOpaqueIdentifier:function(){return is(as)[0]},unstable_isNewReconciler:!1},ws={readContext:ti,useCallback:Os,useContext:ti,useEffect:_s,useImperativeHandle:Es,useLayoutEffect:gs,useMemo:Cs,useReducer:ss,useRef:fs,useState:function(){return ss(as)},useDebugValue:ys,useDeferredValue:function(e){var t=ss(as),n=t[0],r=t[1];return _s((function(){var t=Ki.transition;Ki.transition=1;try{r(e)}finally{Ki.transition=t}}),[e]),n},useTransition:function(){var e=ss(as)[0];return[fs().current,e]},useMutableSource:cs,useOpaqueIdentifier:function(){return ss(as)[0]},unstable_isNewReconciler:!1},Ms=y.ReactCurrentOwner,js=!1;function Rs(e,t,n,r){t.child=null===e?Oi(t,null,n,r):yi(t,e.child,n,r)}function Us(e,t,n,r,a){n=n.render;var i=t.ref;return ei(t,a),r=ts(e,t,n,r,i,a),null===e||js?(t.flags|=1,Rs(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,Js(e,t,a))}function Ls(e,t,n,r,a,i){if(null===e){var s=n.type;return"function"!=typeof s||Pl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ks(e,t,s,r,a,i))}return s=e.child,0==(a&i)&&(a=s.memoizedProps,(n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)?Js(e,t,i):(t.flags|=1,(e=Fl(s,r)).ref=t.ref,e.return=t,t.child=e)}function ks(e,t,n,r,a,i){if(null!==e&&lr(e.memoizedProps,r)&&e.ref===t.ref){if(js=!1,0==(i&a))return t.lanes=e.lanes,Js(e,t,i);0!=(16384&e.flags)&&(js=!0)}return Ps(e,t,n,r,i)}function Ds(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ml(t,n);else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ml(t,e),null;t.memoizedState={baseLanes:0},ml(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ml(t,r);return Rs(e,t,a,n),t.child}function xs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ps(e,t,n,r,a){var i=ha(n)?ua:la.current;return i=da(t,i),ei(t,a),n=ts(e,t,n,r,i,a),null===e||js?(t.flags|=1,Rs(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,Js(e,t,a))}function Fs(e,t,n,r,a){if(ha(n)){var i=!0;ba(t)}else i=!1;if(ei(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pi(t,n,r),bi(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=ti(c):c=da(t,c=ha(n)?ua:la.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&mi(t,s,r,c),ni=!1;var h=t.memoizedState;s.state=h,li(t,r,s,a),l=t.memoizedState,o!==r||h!==l||ca.current||ni?("function"==typeof u&&(di(t,n,u,r),l=t.memoizedState),(o=ni||fi(t,n,o,r,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4)):("function"==typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4),r=!1)}else{s=t.stateNode,ai(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Ka(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=ti(l):l=da(t,l=ha(n)?ua:la.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==l)&&mi(t,s,r,l),ni=!1,h=t.memoizedState,s.state=h,li(t,r,s,a);var p=t.memoizedState;o!==d||h!==p||ca.current||ni?("function"==typeof f&&(di(t,n,f,r),p=t.memoizedState),(c=ni||fi(t,n,c,r,h,p,l))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Hs(e,t,n,r,i,a)}function Hs(e,t,n,r,a,i){xs(e,t);var s=0!=(64&t.flags);if(!r&&!s)return a&&_a(t,n,!1),Js(e,t,i);r=t.stateNode,Ms.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=yi(t,e.child,null,i),t.child=yi(t,null,o,i)):Rs(e,t,o,i),t.memoizedState=r.state,a&&_a(t,n,!0),t.child}function Gs(e){var t=e.stateNode;t.pendingContext?pa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&pa(0,t.context,!1),Ai(e,t.containerInfo)}var Bs,zs,Vs,qs={dehydrated:null,retryLane:0};function Ks(e,t,n){var r,a=t.pendingProps,i=Ri.current,s=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&i)),r?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),sa(Ri,1&i),null===e?(void 0!==a.fallback&&Fi(t),e=a.children,i=a.fallback,s?(e=Ws(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=qs,e):"number"==typeof a.unstable_expectedLoadTime?(e=Ws(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=qs,t.lanes=33554432,e):((n=Bl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(a=Qs(e,t,a.children,a.fallback,n),s=t.child,i=e.child.memoizedState,s.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=qs,a):(n=Ys(e,t,a.children,n),t.memoizedState=null,n))}function Ws(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Bl(t,a,0,null),n=Gl(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Ys(e,t,n,r){var a=e.child;return e=a.sibling,n=Fl(a,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Qs(e,t,n,r,a){var i=t.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:n};return 0==(2&i)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=o,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Fl(s,o),null!==e?r=Fl(e,r):(r=Gl(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Xs(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ja(e.return,t)}function Zs(e,t,n,r,a,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a,s.lastEffect=i)}function $s(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Rs(e,t,r.children,n),0!=(2&(r=Ri.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xs(e,n);else if(19===e.tag)Xs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(sa(Ri,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Ui(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Zs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Ui(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Zs(t,!0,n,null,i,t.lastEffect);break;case"together":Zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Js(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function eo(e,t){if(!Di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function to(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ha(t.type)&&fa(),null;case 3:return wi(),ia(ca),ia(la),Vi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:ji(t);var i=Ii(Si.current);if(n=t.type,null!==e&&null!=t.stateNode)zs(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ii(Ni.current),Gi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Wr]=t,r[Yr]=o,n){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(e=0;e<yr.length;e++)Tr(yr[e],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":ee(r,o),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Tr("invalid",r);break;case"textarea":le(r,o),Tr("invalid",r)}for(var c in Ce(n,o),e=null,o)o.hasOwnProperty(c)&&(i=o[c],"children"===c?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):l.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Tr("scroll",r));switch(n){case"input":X(r),re(r,o,!0);break;case"textarea":X(r),ue(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=kr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===de&&(e=fe(n)),e===de?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Wr]=t,e[Yr]=r,Bs(e,t),t.stateNode=e,c=Ne(n,r),n){case"dialog":Tr("cancel",e),Tr("close",e),i=r;break;case"iframe":case"object":case"embed":Tr("load",e),i=r;break;case"video":case"audio":for(i=0;i<yr.length;i++)Tr(yr[i],e);i=r;break;case"source":Tr("error",e),i=r;break;case"img":case"image":case"link":Tr("error",e),Tr("load",e),i=r;break;case"details":Tr("toggle",e),i=r;break;case"input":ee(e,r),i=J(e,r),Tr("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Tr("invalid",e);break;case"textarea":le(e,r),i=oe(e,r),Tr("invalid",e);break;default:i=r}Ce(n,i);var u=i;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];"style"===o?ye(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&be(e,d):"children"===o?"string"==typeof d?("textarea"!==n||""!==d)&&_e(e,d):"number"==typeof d&&_e(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Tr("scroll",e):null!=d&&E(e,o,d,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?se(e,!!r.multiple,o,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=kr)}Pr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Vs(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));n=Ii(Si.current),Ii(Ni.current),Gi(t)?(r=t.stateNode,n=t.memoizedProps,r[Wr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Wr]=t,t.stateNode=r)}return null;case 13:return ia(Ri),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Gi(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ri.current)?0===jo&&(jo=3):(0!==jo&&3!==jo||(jo=4),null===So||0==(134217727&Lo)&&0==(134217727&ko)||dl(So,Ao))),(r||n)&&(t.flags|=4),null);case 4:return wi(),null===e&&Ir(t.stateNode.containerInfo),null;case 10:return $a(t),null;case 17:return ha(t.type)&&fa(),null;case 19:if(ia(Ri),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(c=r.rendering))if(o)eo(r,!1);else{if(0!==jo||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ui(e))){for(t.flags|=64,eo(r,!1),null!==(o=c.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return sa(Ri,1&Ri.current|2),t.child}e=e.sibling}null!==r.tail&&Pa()>Fo&&(t.flags|=64,o=!0,eo(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Ui(c))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),eo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Di)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Pa()-r.renderingStartTime>Fo&&1073741824!==n&&(t.flags|=64,o=!0,eo(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Pa(),n.sibling=null,t=Ri.current,sa(Ri,o?1&t|2:1&t),n):null;case 23:case 24:return bl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function no(e){switch(e.tag){case 1:ha(e.type)&&fa();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(wi(),ia(ca),ia(la),Vi(),0!=(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return ji(e),null;case 13:return ia(Ri),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ia(Ri),null;case 4:return wi(),null;case 10:return $a(e),null;case 23:case 24:return bl(),null;default:return null}}function ro(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a}}function ao(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Bs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},zs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ii(Ni.current);var s,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"option":i=ie(e,i),r=ie(e,r),o=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":i=oe(e,i),r=oe(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=kr)}for(d in Ce(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var c=i[d];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(null!=u||null!=c))if("style"===d)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(d,n)),n=u;else"dangerouslySetInnerHTML"===d?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(o=o||[]).push(d,u)):"children"===d?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(d,""+u):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=u&&"onScroll"===d&&Tr("scroll",e),o||c===u||(o=[])):"object"==typeof u&&null!==u&&u.$$typeof===k?u.toString():(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Vs=function(e,t,n,r){n!==r&&(t.flags|=4)};var io="function"==typeof WeakMap?WeakMap:Map;function so(e,t,n){(n=ii(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zo||(zo=!0,Vo=r),ao(0,t)},n}function oo(e,t,n){(n=ii(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return ao(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===qo?qo=new Set([this]):qo.add(this),ao(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var lo="function"==typeof WeakSet?WeakSet:Set;function co(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ul(e,t)}else t.current=null}function uo(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ka(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Br(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function ho(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!=(4&(a=a.tag))&&0!=(1&a)&&(Ml(n,e),wl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ka(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ci(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ci(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Pr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&yt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function fo(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=null!=a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ee("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function po(e,t){if(va&&"function"==typeof va.onCommitFiberUnmount)try{va.onCommitFiberUnmount(ga,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!=(4&r))Ml(t,n);else{r=t;try{a()}catch(e){Ul(r,e)}}n=n.next}while(n!==e)}break;case 1:if(co(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ul(t,e)}break;case 5:co(t);break;case 4:go(e,t)}}function mo(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bo(e){return 5===e.tag||3===e.tag||4===e.tag}function _o(e){e:{for(var t=e.return;null!==t;){if(bo(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(_e(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var a=t.tag,i=5===a||6===a;if(i)t=i?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=kr));else if(4!==a&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var a=t.tag,i=5===a||6===a;if(i)t=i?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==a&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function go(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(s(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var o=e,l=a,c=l;;)if(po(o,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(o=n,l=a.stateNode,8===o.nodeType?o.parentNode.removeChild(l):o.removeChild(l)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(po(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function vo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Yr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ne(e,a),t=Ne(e,r),a=0;a<i.length;a+=2){var o=i[a],l=i[a+1];"style"===o?ye(n,l):"dangerouslySetInnerHTML"===o?be(n,l):"children"===o?_e(n,l):E(n,o,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?se(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,yt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Po=Pa(),fo(t.child,!0)),void Eo(t);case 19:return void Eo(t);case 17:return;case 23:case 24:return void fo(t,null!==t.memoizedState)}throw Error(s(163))}function Eo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new lo),t.forEach((function(t){var r=kl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yo(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Oo=Math.ceil,Co=y.ReactCurrentDispatcher,No=y.ReactCurrentOwner,To=0,So=null,Io=null,Ao=0,wo=0,Mo=aa(0),jo=0,Ro=null,Uo=0,Lo=0,ko=0,Do=0,xo=null,Po=0,Fo=1/0;function Ho(){Fo=Pa()+500}var Go,Bo=null,zo=!1,Vo=null,qo=null,Ko=!1,Wo=null,Yo=90,Qo=[],Xo=[],Zo=null,$o=0,Jo=null,el=-1,tl=0,nl=0,rl=null,al=!1;function il(){return 0!=(48&To)?Pa():-1!==el?el:el=Pa()}function sl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Fa()?1:2;if(0===tl&&(tl=Uo),0!==qa.transition){0!==nl&&(nl=null!==xo?xo.pendingLanes:0),e=tl;var t=4186112&~nl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Fa(),0!=(4&To)&&98===e?e=Ft(12,tl):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tl),e}function ol(e,t,n){if(50<$o)throw $o=0,Jo=null,Error(s(185));if(null===(e=ll(e,t)))return null;Bt(e,t,n),e===So&&(ko|=t,4===jo&&dl(e,Ao));var r=Fa();1===t?0!=(8&To)&&0==(48&To)?hl(e):(cl(e,n),0===To&&(Ho(),za())):(0==(4&To)||98!==r&&99!==r||(null===Zo?Zo=new Set([e]):Zo.add(e)),cl(e,n)),xo=e}function ll(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function cl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-zt(o),c=1<<l,u=i[l];if(-1===u){if(0==(c&r)||0!=(c&a)){u=t,Dt(c);var d=kt;i[l]=10<=d?u+250:6<=d?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);o&=~c}if(r=xt(e,e===So?Ao:0),t=kt,0===r)null!==n&&(n!==Ra&&Oa(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ra&&Oa(n)}15===t?(n=hl.bind(null,e),null===La?(La=[n],ka=ya(Ia,Va)):La.push(n),n=Ra):14===t?n=Ba(99,hl.bind(null,e)):n=Ba(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),ul.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ul(e){if(el=-1,nl=tl=0,0!=(48&To))throw Error(s(327));var t=e.callbackNode;if(Al()&&e.callbackNode!==t)return null;var n=xt(e,e===So?Ao:0);if(0===n)return null;var r=n,a=To;To|=16;var i=vl();for(So===e&&Ao===r||(Ho(),_l(e,r));;)try{Ol();break}catch(t){gl(e,t)}if(Za(),Co.current=i,To=a,null!==Io?r=0:(So=null,Ao=0,r=jo),0!=(Uo&ko))_l(e,0);else if(0!==r){if(2===r&&(To|=64,e.hydrate&&(e.hydrate=!1,Br(e.containerInfo)),0!==(n=Pt(e))&&(r=El(e,n))),1===r)throw t=Ro,_l(e,0),dl(e,n),cl(e,Pa()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:Tl(e);break;case 3:if(dl(e,n),(62914560&n)===n&&10<(r=Po+500-Pa())){if(0!==xt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){il(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Hr(Tl.bind(null,e),r);break}Tl(e);break;case 4:if(dl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var o=31-zt(n);i=1<<o,(o=r[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=Pa()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Oo(n/1960))-n)){e.timeoutHandle=Hr(Tl.bind(null,e),n);break}Tl(e);break;case 5:Tl(e);break;default:throw Error(s(329))}}return cl(e,Pa()),e.callbackNode===t?ul.bind(null,e):null}function dl(e,t){for(t&=~Do,t&=~ko,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function hl(e){if(0!=(48&To))throw Error(s(327));if(Al(),e===So&&0!=(e.expiredLanes&Ao)){var t=Ao,n=El(e,t);0!=(Uo&ko)&&(n=El(e,t=xt(e,t)))}else n=El(e,t=xt(e,0));if(0!==e.tag&&2===n&&(To|=64,e.hydrate&&(e.hydrate=!1,Br(e.containerInfo)),0!==(t=Pt(e))&&(n=El(e,t))),1===n)throw n=Ro,_l(e,0),dl(e,t),cl(e,Pa()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tl(e),cl(e,Pa()),null}function fl(e,t){var n=To;To|=1;try{return e(t)}finally{0===(To=n)&&(Ho(),za())}}function pl(e,t){var n=To;To&=-2,To|=8;try{return e(t)}finally{0===(To=n)&&(Ho(),za())}}function ml(e,t){sa(Mo,wo),wo|=t,Uo|=t}function bl(){wo=Mo.current,ia(Mo)}function _l(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Io)for(n=Io.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&fa();break;case 3:wi(),ia(ca),ia(la),Vi();break;case 5:ji(r);break;case 4:wi();break;case 13:case 19:ia(Ri);break;case 10:$a(r);break;case 23:case 24:bl()}n=n.return}So=e,Io=Fl(e.current,null),Ao=wo=Uo=t,jo=0,Ro=null,Do=ko=Lo=0}function gl(e,t){for(;;){var n=Io;try{if(Za(),qi.current=Ss,Zi){for(var r=Yi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Zi=!1}if(Wi=0,Xi=Qi=Yi=null,$i=!1,No.current=null,null===n||null===n.return){jo=1,Ro=t,Io=null;break}e:{var i=e,s=n.return,o=n,l=t;if(t=Ao,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&o.mode)){var u=o.alternate;u?(o.updateQueue=u.updateQueue,o.memoizedState=u.memoizedState,o.lanes=u.lanes):(o.updateQueue=null,o.memoizedState=null)}var d=0!=(1&Ri.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var b=h.updateQueue;if(null===b){var _=new Set;_.add(c),h.updateQueue=_}else b.add(c);if(0==(2&h.mode)){if(h.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var g=ii(-1,1);g.tag=2,si(o,g)}o.lanes|=1;break e}l=void 0,o=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new io,l=new Set,v.set(c,l)):void 0===(l=v.get(c))&&(l=new Set,v.set(c,l)),!l.has(o)){l.add(o);var E=Ll.bind(null,i,c,o);c.then(E,E)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((W(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==jo&&(jo=2),l=ro(l,o),h=s;do{switch(h.tag){case 3:i=l,h.flags|=4096,t&=-t,h.lanes|=t,oi(h,so(0,i,t));break e;case 1:i=l;var y=h.type,O=h.stateNode;if(0==(64&h.flags)&&("function"==typeof y.getDerivedStateFromError||null!==O&&"function"==typeof O.componentDidCatch&&(null===qo||!qo.has(O)))){h.flags|=4096,t&=-t,h.lanes|=t,oi(h,oo(h,i,t));break e}}h=h.return}while(null!==h)}Nl(n)}catch(e){t=e,Io===n&&null!==n&&(Io=n=n.return);continue}break}}function vl(){var e=Co.current;return Co.current=Ss,null===e?Ss:e}function El(e,t){var n=To;To|=16;var r=vl();for(So===e&&Ao===t||_l(e,t);;)try{yl();break}catch(t){gl(e,t)}if(Za(),To=n,Co.current=r,null!==Io)throw Error(s(261));return So=null,Ao=0,jo}function yl(){for(;null!==Io;)Cl(Io)}function Ol(){for(;null!==Io&&!Ca();)Cl(Io)}function Cl(e){var t=Go(e.alternate,e,wo);e.memoizedProps=e.pendingProps,null===t?Nl(e):Io=t,No.current=null}function Nl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=to(n,t,wo)))return void(Io=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&wo)||0==(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=no(t)))return n.flags&=2047,void(Io=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Io=t);Io=t=e}while(null!==t);0===jo&&(jo=5)}function Tl(e){var t=Fa();return Ga(99,Sl.bind(null,e,t)),null}function Sl(e,t){do{Al()}while(null!==Wo);if(0!=(48&To))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var o=e.eventTimes,l=e.expirationTimes;0<i;){var c=31-zt(i),u=1<<c;a[c]=0,o[c]=-1,l[c]=-1,i&=~u}if(null!==Zo&&0==(24&r)&&Zo.has(e)&&Zo.delete(e),e===So&&(Io=So=null,Ao=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=To,To|=32,No.current=null,Dr=Yt,hr(o=dr())){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,i=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var d=0,h=-1,f=-1,p=0,m=0,b=o,_=null;t:for(;;){for(var g;b!==l||0!==i&&3!==b.nodeType||(h=d+i),b!==c||0!==u&&3!==b.nodeType||(f=d+u),3===b.nodeType&&(d+=b.nodeValue.length),null!==(g=b.firstChild);)_=b,b=g;for(;;){if(b===o)break t;if(_===l&&++p===i&&(h=d),_===c&&++m===u&&(f=d),null!==(g=b.nextSibling))break;_=(b=_).parentNode}b=g}l=-1===h||-1===f?null:{start:h,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;xr={focusedElem:o,selectionRange:l},Yt=!1,rl=null,al=!1,Bo=r;do{try{Il()}catch(e){if(null===Bo)throw Error(s(330));Ul(Bo,e),Bo=Bo.nextEffect}}while(null!==Bo);rl=null,Bo=r;do{try{for(o=e;null!==Bo;){var v=Bo.flags;if(16&v&&_e(Bo.stateNode,""),128&v){var E=Bo.alternate;if(null!==E){var y=E.ref;null!==y&&("function"==typeof y?y(null):y.current=null)}}switch(1038&v){case 2:_o(Bo),Bo.flags&=-3;break;case 6:_o(Bo),Bo.flags&=-3,vo(Bo.alternate,Bo);break;case 1024:Bo.flags&=-1025;break;case 1028:Bo.flags&=-1025,vo(Bo.alternate,Bo);break;case 4:vo(Bo.alternate,Bo);break;case 8:go(o,l=Bo);var O=l.alternate;mo(l),null!==O&&mo(O)}Bo=Bo.nextEffect}}catch(e){if(null===Bo)throw Error(s(330));Ul(Bo,e),Bo=Bo.nextEffect}}while(null!==Bo);if(y=xr,E=dr(),v=y.focusedElem,o=y.selectionRange,E!==v&&v&&v.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(v.ownerDocument.documentElement,v)){null!==o&&hr(v)&&(E=o.start,void 0===(y=o.end)&&(y=E),"selectionStart"in v?(v.selectionStart=E,v.selectionEnd=Math.min(y,v.value.length)):(y=(E=v.ownerDocument||document)&&E.defaultView||window).getSelection&&(y=y.getSelection(),l=v.textContent.length,O=Math.min(o.start,l),o=void 0===o.end?O:Math.min(o.end,l),!y.extend&&O>o&&(l=o,o=O,O=l),l=ur(v,O),i=ur(v,o),l&&i&&(1!==y.rangeCount||y.anchorNode!==l.node||y.anchorOffset!==l.offset||y.focusNode!==i.node||y.focusOffset!==i.offset)&&((E=E.createRange()).setStart(l.node,l.offset),y.removeAllRanges(),O>o?(y.addRange(E),y.extend(i.node,i.offset)):(E.setEnd(i.node,i.offset),y.addRange(E))))),E=[];for(y=v;y=y.parentNode;)1===y.nodeType&&E.push({element:y,left:y.scrollLeft,top:y.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<E.length;v++)(y=E[v]).element.scrollLeft=y.left,y.element.scrollTop=y.top}Yt=!!Dr,xr=Dr=null,e.current=n,Bo=r;do{try{for(v=e;null!==Bo;){var C=Bo.flags;if(36&C&&ho(v,Bo.alternate,Bo),128&C){E=void 0;var N=Bo.ref;if(null!==N){var T=Bo.stateNode;switch(Bo.tag){case 5:E=T;break;default:E=T}"function"==typeof N?N(E):N.current=E}}Bo=Bo.nextEffect}}catch(e){if(null===Bo)throw Error(s(330));Ul(Bo,e),Bo=Bo.nextEffect}}while(null!==Bo);Bo=null,Ua(),To=a}else e.current=n;if(Ko)Ko=!1,Wo=e,Yo=t;else for(Bo=r;null!==Bo;)t=Bo.nextEffect,Bo.nextEffect=null,8&Bo.flags&&((C=Bo).sibling=null,C.stateNode=null),Bo=t;if(0===(r=e.pendingLanes)&&(qo=null),1===r?e===Jo?$o++:($o=0,Jo=e):$o=0,n=n.stateNode,va&&"function"==typeof va.onCommitFiberRoot)try{va.onCommitFiberRoot(ga,n,void 0,64==(64&n.current.flags))}catch(e){}if(cl(e,Pa()),zo)throw zo=!1,e=Vo,Vo=null,e;return 0!=(8&To)||za(),null}function Il(){for(;null!==Bo;){var e=Bo.alternate;al||null===rl||(0!=(8&Bo.flags)?Je(Bo,rl)&&(al=!0):13===Bo.tag&&yo(e,Bo)&&Je(Bo,rl)&&(al=!0));var t=Bo.flags;0!=(256&t)&&uo(e,Bo),0==(512&t)||Ko||(Ko=!0,Ba(97,(function(){return Al(),null}))),Bo=Bo.nextEffect}}function Al(){if(90!==Yo){var e=97<Yo?97:Yo;return Yo=90,Ga(e,jl)}return!1}function wl(e,t){Qo.push(t,e),Ko||(Ko=!0,Ba(97,(function(){return Al(),null})))}function Ml(e,t){Xo.push(t,e),Ko||(Ko=!0,Ba(97,(function(){return Al(),null})))}function jl(){if(null===Wo)return!1;var e=Wo;if(Wo=null,0!=(48&To))throw Error(s(331));var t=To;To|=32;var n=Xo;Xo=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],o=a.destroy;if(a.destroy=void 0,"function"==typeof o)try{o()}catch(e){if(null===i)throw Error(s(330));Ul(i,e)}}for(n=Qo,Qo=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var l=a.create;a.destroy=l()}catch(e){if(null===i)throw Error(s(330));Ul(i,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return To=t,za(),!0}function Rl(e,t,n){si(e,t=so(0,t=ro(n,t),1)),t=il(),null!==(e=ll(e,1))&&(Bt(e,1,t),cl(e,t))}function Ul(e,t){if(3===e.tag)Rl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qo||!qo.has(r))){var a=oo(n,e=ro(t,e),1);if(si(n,a),a=il(),null!==(n=ll(n,1)))Bt(n,1,a),cl(n,a);else if("function"==typeof r.componentDidCatch&&(null===qo||!qo.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ll(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=il(),e.pingedLanes|=e.suspendedLanes&n,So===e&&(Ao&n)===n&&(4===jo||3===jo&&(62914560&Ao)===Ao&&500>Pa()-Po?_l(e,0):Do|=n),cl(e,t)}function kl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Fa()?1:2:(0===tl&&(tl=Uo),0===(t=Ht(62914560&~tl))&&(t=4194304))),n=il(),null!==(e=ll(e,t))&&(Bt(e,t,n),cl(e,n))}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function xl(e,t,n,r){return new Dl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fl(e,t){var n=e.alternate;return null===n?((n=xl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hl(e,t,n,r,a,i){var o=2;if(r=e,"function"==typeof e)Pl(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case N:return Gl(n.children,a,i,t);case D:o=8,a|=16;break;case T:o=8,a|=1;break;case S:return(e=xl(12,n,t,8|a)).elementType=S,e.type=S,e.lanes=i,e;case M:return(e=xl(13,n,t,a)).type=M,e.elementType=M,e.lanes=i,e;case j:return(e=xl(19,n,t,a)).elementType=j,e.lanes=i,e;case x:return Bl(n,a,i,t);case P:return(e=xl(24,n,t,a)).elementType=P,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case I:o=10;break e;case A:o=9;break e;case w:o=11;break e;case R:o=14;break e;case U:o=16,r=null;break e;case L:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=xl(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Gl(e,t,n,r){return(e=xl(7,e,r,t)).lanes=n,e}function Bl(e,t,n,r){return(e=xl(23,e,r,t)).elementType=x,e.lanes=n,e}function zl(e,t,n){return(e=xl(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=xl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ql(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.mutableSourceEagerHydrationData=null}function Kl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Wl(e,t,n,r){var a=t.current,i=il(),o=sl(a);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(ha(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var c=n.type;if(ha(c)){n=ma(n,c,l);break e}}n=l}else n=oa;return null===t.context?t.context=n:t.pendingContext=n,(t=ii(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),si(a,t),ol(a,o,i),o}function Yl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Ql(e,t),(e=e.alternate)&&Ql(e,t)}function Zl(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new ql(e,t,null!=n&&!0===n.hydrate),t=xl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ri(t),e[Qr]=n.current,Ir(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i._internalRoot;if("function"==typeof a){var o=a;a=function(){var e=Yl(s);o.call(e)}}Wl(t,s,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Zl(e,0,t?{hydrate:!0}:void 0)}(n,r),s=i._internalRoot,"function"==typeof a){var l=a;a=function(){var e=Yl(s);l.call(e)}}pl((function(){Wl(t,s,e,a)}))}return Yl(s)}function ec(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(s(200));return Kl(e,t,null,n)}Go=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ca.current)js=!0;else{if(0==(n&r)){switch(js=!1,t.tag){case 3:Gs(t),Bi();break;case 5:Mi(t);break;case 1:ha(t.type)&&ba(t);break;case 4:Ai(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;sa(Wa,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ks(e,t,n):(sa(Ri,1&Ri.current),null!==(t=Js(e,t,n))?t.sibling:null);sa(Ri,1&Ri.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return $s(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),sa(Ri,Ri.current),r)break;return null;case 23:case 24:return t.lanes=0,Ds(e,t,n)}return Js(e,t,n)}js=0!=(16384&e.flags)}else js=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=da(t,la.current),ei(t,n),a=ts(null,t,r,e,a,n),t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ha(r)){var i=!0;ba(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ri(t);var o=r.getDerivedStateFromProps;"function"==typeof o&&di(t,r,o,e),a.updater=hi,t.stateNode=a,a._reactInternals=t,bi(t,r,e,n),t=Hs(null,t,r,!0,i,n)}else t.tag=0,Rs(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"==typeof e)return Pl(e)?1:0;if(null!=e){if((e=e.$$typeof)===w)return 11;if(e===R)return 14}return 2}(a),e=Ka(a,e),i){case 0:t=Ps(null,t,a,e,n);break e;case 1:t=Fs(null,t,a,e,n);break e;case 11:t=Us(null,t,a,e,n);break e;case 14:t=Ls(null,t,a,Ka(a.type,e),r,n);break e}throw Error(s(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ps(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 1:return r=t.type,a=t.pendingProps,Fs(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 3:if(Gs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ai(e,t),li(t,r,null,n),(r=t.memoizedState.element)===a)Bi(),t=Js(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(ki=zr(t.stateNode.containerInfo.firstChild),Li=t,i=Di=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],zi.push(i);for(n=Oi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Rs(e,t,r,n),Bi();t=t.child}return t;case 5:return Mi(t),null===e&&Fi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,Fr(r,a)?o=null:null!==i&&Fr(r,i)&&(t.flags|=16),xs(e,t),Rs(e,t,o,n),t.child;case 6:return null===e&&Fi(t),null;case 13:return Ks(e,t,n);case 4:return Ai(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=yi(t,null,r,n):Rs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Us(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 7:return Rs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Rs(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value;var l=t.type._context;if(sa(Wa,l._currentValue),l._currentValue=i,null!==o)if(l=o.value,0===(i=sr(l,i)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,i):1073741823))){if(o.children===a.children&&!ca.current){t=Js(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){o=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&i)){1===l.tag&&((u=ii(-1,n&-n)).tag=2,si(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),Ja(l.return,n),c.lanes|=n;break}u=u.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Rs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ei(t,n),r=r(a=ti(a,i.unstable_observedBits)),t.flags|=1,Rs(e,t,r,n),t.child;case 14:return i=Ka(a=t.type,t.pendingProps),Ls(e,t,a,i=Ka(a.type,i),r,n);case 15:return ks(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ka(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ha(r)?(e=!0,ba(t)):e=!1,ei(t,n),pi(t,r,a),bi(t,r,a,n),Hs(null,t,r,!0,e,n);case 19:return $s(e,t,n);case 23:case 24:return Ds(e,t,n)}throw Error(s(156,t.tag))},Zl.prototype.render=function(e){Wl(e,this._internalRoot,null,null)},Zl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wl(null,e,null,(function(){t[Qr]=null}))},et=function(e){13===e.tag&&(ol(e,4,il()),Xl(e,4))},tt=function(e){13===e.tag&&(ol(e,67108864,il()),Xl(e,67108864))},nt=function(e){if(13===e.tag){var t=il(),n=sl(e);ol(e,n,t),Xl(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ea(r);if(!a)throw Error(s(90));Z(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Re=fl,Ue=function(e,t,n,r,a){var i=To;To|=4;try{return Ga(98,e.bind(null,t,n,r,a))}finally{0===(To=i)&&(Ho(),za())}},Le=function(){0==(49&To)&&(function(){if(null!==Zo){var e=Zo;Zo=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,cl(e,Pa())}))}za()}(),Al())},ke=function(e,t){var n=To;To|=2;try{return e(t)}finally{0===(To=n)&&(Ho(),za())}};var tc={Events:[$r,Jr,ea,Me,je,Al,{current:!1}]},nc={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{ga=ac.inject(rc),va=ac}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=ec,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=To;if(0!=(48&n))return e(t);To|=1;try{if(e)return Ga(99,e.bind(null,t))}finally{To=n,za()}},t.hydrate=function(e,t,n){if(!$l(t))throw Error(s(200));return Jl(null,e,t,!0,n)},t.render=function(e,t,n){if(!$l(t))throw Error(s(200));return Jl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(s(40));return!!e._reactRootContainer&&(pl((function(){Jl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=fl,t.unstable_createPortal=function(e,t){return ec(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jl(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,l=s(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))a.call(n,u)&&(l[u]=n[u]);if(r){o=r(n);for(var d=0;d<o.length;d++)i.call(n,o[d])&&(l[o[d]]=n[o[d]])}}return l}},function(e,t,n){"use strict";e.exports=n(13)},function(e,t,n){"use strict";
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,a,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,d=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(h,0),e}};r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(h,0))},a=function(e,t){d=setTimeout(e,t)},i=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,_=null,g=-1,v=5,E=0;t.unstable_shouldYield=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var y=new MessageChannel,O=y.port2;y.port1.onmessage=function(){if(null!==_){var e=t.unstable_now();E=e+v;try{_(!0,e)?O.postMessage(null):(b=!1,_=null)}catch(e){throw O.postMessage(null),e}}else b=!1},r=function(e){_=e,b||(b=!0,O.postMessage(null))},a=function(e,n){g=f((function(){e(t.unstable_now())}),n)},i=function(){p(g),g=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<S(a,t)))break e;e[r]=t,e[n]=a,n=r}}function N(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,s=e[i],o=i+1,l=e[o];if(void 0!==s&&0>S(s,n))void 0!==l&&0>S(l,s)?(e[r]=l,e[o]=n,r=o):(e[r]=s,e[i]=n,r=i);else{if(!(void 0!==l&&0>S(l,n)))break e;e[r]=l,e[o]=n,r=o}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],A=[],w=1,M=null,j=3,R=!1,U=!1,L=!1;function k(e){for(var t=N(A);null!==t;){if(null===t.callback)T(A);else{if(!(t.startTime<=e))break;T(A),t.sortIndex=t.expirationTime,C(I,t)}t=N(A)}}function D(e){if(L=!1,k(e),!U)if(null!==N(I))U=!0,r(x);else{var t=N(A);null!==t&&a(D,t.startTime-e)}}function x(e,n){U=!1,L&&(L=!1,i()),R=!0;var r=j;try{for(k(n),M=N(I);null!==M&&(!(M.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=M.callback;if("function"==typeof s){M.callback=null,j=M.priorityLevel;var o=s(M.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?M.callback=o:M===N(I)&&T(I),k(n)}else T(I);M=N(I)}if(null!==M)var l=!0;else{var c=N(A);null!==c&&a(D,c.startTime-n),l=!1}return l}finally{M=null,j=r,R=!1}}var P=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){U||R||(U=!0,r(x))},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return N(I)},t.unstable_next=function(e){switch(j){case 1:case 2:case 3:var t=3;break;default:t=j}var n=j;j=t;try{return e()}finally{j=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=P,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=j;j=e;try{return t()}finally{j=n}},t.unstable_scheduleCallback=function(e,n,s){var o=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:w++,callback:n,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>o?(e.sortIndex=s,C(A,e),null===N(I)&&e===N(A)&&(L?i():L=!0,a(D,s-o))):(e.sortIndex=l,C(I,e),U||R||(U=!0,r(x))),e},t.unstable_wrapCallback=function(e){var t=j;return function(){var n=j;j=t;try{return e.apply(this,arguments)}finally{j=n}}}},function(e,t,n){"use strict";var r=n(15);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return TO}));var r=n(1),a=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const c=a.a.createContext({});
/*!
 * css-vars-ponyfill
 * v2.4.8
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}
/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:t.mimeType||null,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],a=Array.apply(null,Array(r.length)).map((function(e){return null}));function i(e){var t="string"==typeof e,n=t&&"<"===e.trim().charAt(0);return t&&!n}function s(e,t){n.onError(e,r[t],t)}function o(e,t){var i=n.onSuccess(e,r[t],t);e=!1===i?"":i||e,a[t]=e,-1===a.indexOf(null)&&n.onComplete(a)}var l=document.createElement("a");r.forEach((function(e,t){if(l.setAttribute("href",e),l.href=String(l.href),Boolean(document.all&&!window.atob)&&l.host.split(":")[0]!==location.host.split(":")[0]){if(l.protocol===location.protocol){var r=new XDomainRequest;r.open("GET",e),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){var e=r.responseText;i(e)?o(e,t):s(r,t)},r.onerror=function(e){s(r,t)},setTimeout((function(){r.send()}),0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(e,")")),s(null,t)}else{var a=new XMLHttpRequest;a.open("GET",e),n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.onBeforeSend(a,e,t),a.onreadystatechange=function(){if(4===a.readyState){var e=a.responseText;a.status<400&&i(e)||0===a.status&&i(e)?o(e,t):s(a,t)}},a.send()}}))}
/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */function h(e){var t=/\/\*[\s\S]+?\*\//g,n=/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g,r={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:!1!==e.skipDisabled,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},a=Array.apply(null,r.rootElement.querySelectorAll(r.include)).filter((function(e){return t=e,n=r.exclude,!(t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector).call(t,n);var t,n})),i=Array.apply(null,Array(a.length)).map((function(e){return null}));function s(){if(-1===i.indexOf(null)){i.reduce((function(e,t,n){return""===t&&e.push(n),e}),[]).reverse().forEach((function(e){return[a,i].forEach((function(t){return t.splice(e,1)}))}));var e=i.join("");r.onComplete(e,i,a)}}function o(e,t,n,a){var o=r.onSuccess(e,n,a);(function e(t,n,a,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=l(t,a,o);c.rules.length?d(c.absoluteUrls,{onBeforeSend:function(e,t,a){r.onBeforeSend(e,n,t)},onSuccess:function(e,t,a){var i=r.onSuccess(e,n,t),s=l(e=!1===i?"":i||e,t,o);return s.rules.forEach((function(t,n){e=e.replace(t,s.absoluteRules[n])})),e},onError:function(r,l,u){s.push({xhr:r,url:l}),o.push(c.rules[u]),e(t,n,a,i,s,o)},onComplete:function(r){r.forEach((function(e,n){t=t.replace(c.rules[n],e)})),e(t,n,a,i,s,o)}}):i(t,s)})(e=void 0!==o&&!1===Boolean(o)?"":o||e,n,a,(function(e,a){null===i[t]&&(a.forEach((function(e){return r.onError(e.xhr,n,e.url)})),!r.filter||r.filter.test(e)?i[t]=e:i[t]="",s())}))}function l(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={};return i.rules=(e.replace(t,"").match(n)||[]).filter((function(e){return-1===a.indexOf(e)})),i.urls=i.rules.map((function(e){return e.replace(n,"$1")})),i.absoluteUrls=i.urls.map((function(e){return f(e,r)})),i.absoluteRules=i.rules.map((function(e,t){var n=i.urls[t],a=f(i.absoluteUrls[t],r);return e.replace(n,a)})),i}a.length?a.forEach((function(e,t){var n=e.getAttribute("href"),a=e.getAttribute("rel"),l="link"===e.nodeName.toLowerCase()&&n&&a&&-1!==a.toLowerCase().indexOf("stylesheet"),c=!1!==r.skipDisabled&&e.disabled,u="style"===e.nodeName.toLowerCase();if(l&&!c)if(-1!==n.indexOf("data:text/css")){var h=decodeURIComponent(n.substring(n.indexOf(",")+1));r.useCSSOM&&(h=Array.apply(null,e.sheet.cssRules).map((function(e){return e.cssText})).join("")),o(h,t,e,location.href)}else d(n,{mimeType:"text/css",onBeforeSend:function(t,n,a){r.onBeforeSend(t,e,n)},onSuccess:function(r,a,i){var s=f(n);o(r,t,e,s)},onError:function(n,a,o){i[t]="",r.onError(n,e,a),s()}});else if(u&&!c){var p=e.textContent;r.useCSSOM&&(p=Array.apply(null,e.sheet.cssRules).map((function(e){return e.cssText})).join("")),o(p,t,e,location.href)}else i[t]="",s()})):r.onComplete("",[])}function f(e,t){var n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),r.href=t||document.baseURI||(document.querySelector("base")||{}).href||location.href,a.href=e,a.href}var p=m;function m(e,t,n){e instanceof RegExp&&(e=b(e,n)),t instanceof RegExp&&(t=b(t,n));var r=_(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function b(e,t){var n=t.match(e);return n?n[0]:null}function _(e,t,n){var r,a,i,s,o,l=n.indexOf(e),c=n.indexOf(t,l+1),u=l;if(l>=0&&c>0){if(e===t)return[l,c];for(r=[],i=n.length;u>=0&&!o;)u==l?(r.push(u),l=n.indexOf(e,u+1)):1==r.length?o=[r.pop(),c]:((a=r.pop())<i&&(i=a,s=c),c=n.indexOf(t,u+1)),u=l<c&&l>=0?l:c;r.length&&(o=[i,s])}return o}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={preserveStatic:!0,removeComments:!1},r=u({},n,t),a=[];function i(e){throw new Error("CSS parse error: ".concat(e))}function s(t){var n=t.exec(e);if(n)return e=e.slice(n[0].length),n}function o(){return s(/^{\s*/)}function l(){return s(/^}/)}function c(){s(/^\s*/)}function d(){if(c(),"/"===e[0]&&"*"===e[1]){for(var t=2;e[t]&&("*"!==e[t]||"/"!==e[t+1]);)t++;if(!e[t])return i("end of comment is missing");var n=e.slice(2,t);return e=e.slice(t+2),{type:"comment",comment:n}}}function h(){for(var e,t=[];e=d();)t.push(e);return r.removeComments?[]:t}function f(){for(c();"}"===e[0];)i("extra closing bracket");var t=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(t){var n,r=t[0].trim();/\/\*/.test(r)&&(r=r.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var a=/["']\w*,\w*["']/.test(r);return a&&(r=r.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"")}))),n=/,/.test(r)?r.split(/\s*(?![^(]*\)),\s*/):[r],a&&(n=n.map((function(e){return e.replace(/\u200C/g,",")}))),n}}function m(){if("@"===e[0])return A();s(/^([;\s]*)+/);var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(n){if(n=n[0].trim(),!s(/^:\s*/))return i("property missing ':'");var r=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),a={type:"declaration",property:n.replace(t,""),value:r?r[0].replace(t,"").trim():""};return s(/^[;\s]*/),a}}function b(){if(!o())return i("missing '{'");for(var e,t=h();e=m();)t.push(e),t=t.concat(h());return l()?t:i("missing '}'")}function _(){c();for(var e,t=[];e=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),s(/^,\s*/);if(t.length)return{type:"keyframe",values:t,declarations:b()}}function g(){var e=s(/^@([-\w]+)?keyframes\s*/);if(e){var t=e[1];if(!(e=s(/^([-\w]+)\s*/)))return i("@keyframes missing name");var n,r=e[1];if(!o())return i("@keyframes missing '{'");for(var a=h();n=_();)a.push(n),a=a.concat(h());return l()?{type:"keyframes",name:r,vendor:t,keyframes:a}:i("@keyframes missing '}'")}}function v(){if(s(/^@page */))return{type:"page",selectors:f()||[],declarations:b()}}function E(){var e=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(e)return{type:"page-margin-box",name:"".concat(e[1],"-").concat(e[2])+(e[3]?"-".concat(e[3]):""),declarations:b()}}function y(){if(s(/^@font-face\s*/))return{type:"font-face",declarations:b()}}function O(){var e=s(/^@supports *([^{]+)/);if(e)return{type:"supports",supports:e[1].trim(),rules:M()}}function C(){if(s(/^@host\s*/))return{type:"host",rules:M()}}function N(){var e=s(/^@media([^{]+)*/);if(e)return{type:"media",media:(e[1]||"").trim(),rules:M()}}function T(){var e=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(e)return{type:"custom-media",name:e[1].trim(),media:e[2].trim()}}function S(){var e=s(/^@([-\w]+)?document *([^{]+)/);if(e)return{type:"document",document:e[2].trim(),vendor:e[1]?e[1].trim():null,rules:M()}}function I(){var e=s(/^@(import|charset|namespace)\s*([^;]+);/);if(e)return{type:e[1],name:e[2].trim()}}function A(){if(c(),"@"===e[0]){var t=I()||y()||N()||g()||O()||S()||T()||C()||v()||E();if(t&&!r.preserveStatic){var n=!1;if(t.declarations)n=t.declarations.some((function(e){return/var\(/.test(e.value)}));else n=(t.keyframes||t.rules||[]).some((function(e){return(e.declarations||[]).some((function(e){return/var\(/.test(e.value)}))}));return n?t:{}}return t}}function w(){if(!r.preserveStatic){var t=p("{","}",e);if(t){var n=/:(?:root|host)(?![.:#(])/.test(t.pre)&&/--\S*\s*:/.test(t.body),a=/var\(/.test(t.body);if(!n&&!a)return e=e.slice(t.end+1),{}}}var s=f()||[],o=r.preserveStatic?b():b().filter((function(e){var t=s.some((function(e){return/:(?:root|host)(?![.:#(])/.test(e)}))&&/^--\S/.test(e.property),n=/var\(/.test(e.value);return t||n}));return s.length||i("selector missing"),{type:"rule",selectors:s,declarations:o}}function M(t){if(!t&&!o())return i("missing '{'");for(var n,r=h();e.length&&(t||"}"!==e[0])&&(n=A()||w());)n.type&&r.push(n),r=r.concat(h());return t||l()?r:i("missing '}'")}return{type:"stylesheet",stylesheet:{rules:M(!0),errors:a}}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={parseHost:!1,store:{},onWarning:function(){}},r=u({},n,t),a=new RegExp(":".concat(r.parseHost?"host":"root","$"));return"string"==typeof e&&(e=g(e,r)),e.stylesheet.rules.forEach((function(e){"rule"===e.type&&e.selectors.some((function(e){return a.test(e)}))&&e.declarations.forEach((function(e,t){var n=e.property,a=e.value;n&&0===n.indexOf("--")&&(r.store[n]=a)}))})),r.store}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r={charset:function(e){return"@charset "+e.name+";"},comment:function(e){return 0===e.comment.indexOf("__CSSVARSPONYFILL")?"/*"+e.comment+"*/":""},"custom-media":function(e){return"@custom-media "+e.name+" "+e.media+";"},declaration:function(e){return e.property+":"+e.value+";"},document:function(e){return"@"+(e.vendor||"")+"document "+e.document+"{"+a(e.rules)+"}"},"font-face":function(e){return"@font-face{"+a(e.declarations)+"}"},host:function(e){return"@host{"+a(e.rules)+"}"},import:function(e){return"@import "+e.name+";"},keyframe:function(e){return e.values.join(",")+"{"+a(e.declarations)+"}"},keyframes:function(e){return"@"+(e.vendor||"")+"keyframes "+e.name+"{"+a(e.keyframes)+"}"},media:function(e){return"@media "+e.media+"{"+a(e.rules)+"}"},namespace:function(e){return"@namespace "+e.name+";"},page:function(e){return"@page "+(e.selectors.length?e.selectors.join(", "):"")+"{"+a(e.declarations)+"}"},"page-margin-box":function(e){return"@"+e.name+"{"+a(e.declarations)+"}"},rule:function(e){var t=e.declarations;if(t.length)return e.selectors.join(",")+"{"+a(t)+"}"},supports:function(e){return"@supports "+e.supports+"{"+a(e.rules)+"}"}};function a(e){for(var a="",i=0;i<e.length;i++){var s=e[i];n&&n(s);var o=r[s.type](s);o&&(a+=o,o.length&&s.selectors&&(a+=t))}return a}return a(e.stylesheet.rules)}function y(e,t){e.rules.forEach((function(n){n.rules?y(n,t):n.keyframes?n.keyframes.forEach((function(e){"keyframe"===e.type&&t(e.declarations,n)})):n.declarations&&t(n.declarations,e)}))}m.range=_;function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=u({},n,t);return"string"==typeof e&&(e=g(e,r)),y(e.stylesheet,(function(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=a.type,s=a.property,o=a.value;if("declaration"===i)if(r.preserveVars||!s||0!==s.indexOf("--")){if(-1!==o.indexOf("var(")){var l=N(o,r);l!==a.value&&(l=C(l),r.preserveVars?(e.splice(n,0,{type:i,property:s,value:l}),n++):a.value=l)}}else e.splice(n,1),n--}})),E(e)}function C(e){return(e.match(/calc\(([^)]+)\)/g)||[]).forEach((function(t){var n="calc".concat(t.split("calc").join(""));e=e.replace(t,n)})),e}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(-1===e.indexOf("var("))return e;var r=p("(",")",e);function a(e){var r=e.split(",")[0].replace(/[\s\n\t]/g,""),a=(e.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],i=Object.prototype.hasOwnProperty.call(t.variables,r)?String(t.variables[r]):void 0,s=i||(a?String(a):void 0),o=n||e;return i||t.onWarning('variable "'.concat(r,'" is undefined')),s&&"undefined"!==s&&s.length>0?N(s,t,o):"var(".concat(o,")")}if(r){if("var"===r.pre.slice(-3)){var i=0===r.body.trim().length;return i?(t.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+a(r.body)+N(r.post,t)}return r.pre+"(".concat(N(r.body,t),")")+N(r.post,t)}return-1!==e.indexOf("var(")&&t.onWarning('missing closing ")" in the value "'.concat(e,'"')),e}var T="undefined"!=typeof window,S=T&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),I={group:0,job:0},A={rootElement:T?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},w={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},M={dom:{},job:{},user:{}},j=!1,R=null,U=0,L=null,k=!1;
/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */
function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="cssVars(): ",n=u({},A,e);function r(e,r,a,i){!n.silent&&window.console&&console.error("".concat(t).concat(e,"\n"),r),n.onError(e,r,a,i)}function a(e){!n.silent&&window.console&&console.warn("".concat(t).concat(e)),n.onWarning(e)}function i(e){n.onFinally(Boolean(e),S,z()-n.__benchmark)}if(T){if(n.watch)return n.watch=A.watch,x(n),void D(n);if(!1===n.watch&&R&&(R.disconnect(),R=null),!n.__benchmark){if(j===n.rootElement)return void P(e);var s=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(n.__benchmark=z(),n.exclude=[R?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",n.exclude].filter((function(e){return e})).join(","),n.variables=G(n.variables),s.forEach((function(e){var t="style"===e.nodeName.toLowerCase()&&e.__cssVars.text,n=t&&e.textContent!==e.__cssVars.text;t&&n&&(e.sheet&&(e.sheet.disabled=!1),e.setAttribute("data-cssvars",""))})),!R){var o=[].slice.call(n.rootElement.querySelectorAll('[data-cssvars="out"]'));o.forEach((function(e){var t=e.getAttribute("data-cssvars-group");(t?n.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(t,'"]')):null)||e.parentNode.removeChild(e)})),U&&s.length<U&&(U=s.length,M.dom={})}}if("loading"!==document.readyState)if(S&&n.onlyLegacy){var l=!1;if(n.updateDOM){var c=n.rootElement.host||(n.rootElement===document?document.documentElement:n.rootElement);Object.keys(n.variables).forEach((function(e){var t=n.variables[e];l=l||t!==getComputedStyle(c).getPropertyValue(e),c.style.setProperty(e,t)}))}i(l)}else!k&&(n.shadowDOM||n.rootElement.shadowRoot||n.rootElement.host)?h({rootElement:A.rootElement,include:A.include,exclude:n.exclude,skipDisabled:!1,onSuccess:function(e,t,n){return!((t.sheet||{}).disabled&&!t.__cssVars)&&((e=((e=e.replace(w.cssComments,"").replace(w.cssMediaQueries,"")).match(w.cssVarDeclRules)||[]).join(""))||!1)},onComplete:function(e,t,r){v(e,{store:M.dom,onWarning:a}),k=!0,D(n)}}):(j=n.rootElement,h({rootElement:n.rootElement,include:n.include,exclude:n.exclude,skipDisabled:!1,onBeforeSend:n.onBeforeSend,onError:function(e,t,n){var a=e.responseURL||B(n,location.href),i=e.statusText?"(".concat(e.statusText,")"):"Unspecified Error"+(0===e.status?" (possibly CORS related)":"");r("CSS XHR Error: ".concat(a," ").concat(e.status," ").concat(i),t,e,a)},onSuccess:function(e,t,r){if((t.sheet||{}).disabled&&!t.__cssVars)return!1;var a="link"===t.nodeName.toLowerCase(),i="style"===t.nodeName.toLowerCase()&&e!==t.textContent,s=n.onSuccess(e,t,r);return e=void 0!==s&&!1===Boolean(s)?"":s||e,n.updateURLs&&(a||i)&&(e=H(e,r)),e},onComplete:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=u({},M.dom,M.user);if(M.job={},s.forEach((function(e,i){var s=t[i];if(e.__cssVars=e.__cssVars||{},e.__cssVars.text=s,w.cssVars.test(s))try{var o=g(s,{preserveStatic:n.preserveStatic,removeComments:!0});v(o,{parseHost:Boolean(n.rootElement.host),store:M.dom,onWarning:a}),e.__cssVars.tree=o}catch(t){r(t.message,e)}})),u(M.job,M.dom),n.updateDOM?(u(M.user,n.variables),u(M.job,M.user)):(u(M.job,M.user,n.variables),u(o,n.variables)),I.job>0&&Boolean(Object.keys(M.job).length>Object.keys(o).length||Boolean(Object.keys(o).length&&Object.keys(M.job).some((function(e){return M.job[e]!==o[e]})))))V(n.rootElement),D(n);else{var l=[],c=[],d=!1;if(n.updateDOM&&I.job++,s.forEach((function(e,i){var s=!e.__cssVars.tree;if(e.__cssVars.tree)try{O(e.__cssVars.tree,u({},n,{variables:M.job,onWarning:a}));var o=E(e.__cssVars.tree);if(n.updateDOM){var h=t[i],f=w.cssVarFunc.test(h);if(e.getAttribute("data-cssvars")||e.setAttribute("data-cssvars","src"),o.length&&f){var p=e.getAttribute("data-cssvars-group")||++I.group,m=o.replace(/\s/g,""),b=n.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(p,'"]'))||document.createElement("style");d=d||w.cssKeyframes.test(o),n.preserveStatic&&e.sheet&&(e.sheet.disabled=!0),b.hasAttribute("data-cssvars")||b.setAttribute("data-cssvars","out"),m===e.textContent.replace(/\s/g,"")?(s=!0,b&&b.parentNode&&(e.removeAttribute("data-cssvars-group"),b.parentNode.removeChild(b))):m!==b.textContent.replace(/\s/g,"")&&([e,b].forEach((function(e){e.setAttribute("data-cssvars-job",I.job),e.setAttribute("data-cssvars-group",p)})),b.textContent=o,l.push(o),c.push(b),b.parentNode||e.parentNode.insertBefore(b,e.nextSibling))}}else e.textContent.replace(/\s/g,"")!==o&&l.push(o)}catch(t){r(t.message,e)}s&&e.setAttribute("data-cssvars","skip"),e.hasAttribute("data-cssvars-job")||e.setAttribute("data-cssvars-job",I.job)})),U=n.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,n.shadowDOM)for(var h,f=[].concat(n.rootElement).concat([].slice.call(n.rootElement.querySelectorAll("*"))),p=0;h=f[p];++p)if(h.shadowRoot&&h.shadowRoot.querySelector("style")){var m=u({},n,{rootElement:h.shadowRoot});D(m)}n.updateDOM&&d&&F(n.rootElement),j=!1,n.onComplete(l.join(""),c,JSON.parse(JSON.stringify(M.job)),z()-n.__benchmark),i(c.length)}}}));else document.addEventListener("DOMContentLoaded",(function t(n){D(e),document.removeEventListener("DOMContentLoaded",t)}))}}function x(e){function t(e){var t=n(e)&&e.hasAttribute("disabled"),r=(e.sheet||{}).disabled;return t||r}function n(e){return"link"===e.nodeName.toLowerCase()&&-1!==(e.getAttribute("rel")||"").indexOf("stylesheet")}function r(e){return"style"===e.nodeName.toLowerCase()}window.MutationObserver&&(R&&(R.disconnect(),R=null),(R=new MutationObserver((function(a){a.some((function(a){return function(r){var a=!1;if("attributes"===r.type&&n(r.target)&&!t(r.target)){var i="disabled"===r.attributeName,s="href"===r.attributeName,o="skip"===r.target.getAttribute("data-cssvars"),l="src"===r.target.getAttribute("data-cssvars");i?a=!o&&!l:s&&(o?r.target.setAttribute("data-cssvars",""):l&&V(e.rootElement,!0),a=!0)}return a}(a)||function(e){var t=!1;if("childList"===e.type){var n=r(e.target),a="out"===e.target.getAttribute("data-cssvars");t=n&&!a}return t}(a)||function(e){var a=!1;return"childList"===e.type&&(a=[].slice.call(e.addedNodes).some((function(e){var a=1===e.nodeType&&e.hasAttribute("data-cssvars"),i=r(e)&&w.cssVars.test(e.textContent);return!a&&(n(e)||i)&&!t(e)}))),a}(a)||function(t){var n=!1;return"childList"===t.type&&(n=[].slice.call(t.removedNodes).some((function(t){var n=1===t.nodeType,r=n&&"out"===t.getAttribute("data-cssvars"),a=n&&"src"===t.getAttribute("data-cssvars"),i=a;if(a||r){var s=t.getAttribute("data-cssvars-group"),o=e.rootElement.querySelector('[data-cssvars-group="'.concat(s,'"]'));a&&V(e.rootElement,!0),o&&o.parentNode.removeChild(o)}return i}))),n}(a)}))&&D(e)}))).observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;clearTimeout(L),L=setTimeout((function(){e.__benchmark=null,D(e)}),t)}function F(e){var t=["animation-name","-moz-animation-name","-webkit-animation-name"].filter((function(e){return getComputedStyle(document.body)[e]}))[0];if(t){for(var n=[].slice.call(e.querySelectorAll("*")),r=[],a=0,i=n.length;a<i;a++){var s=n[a];"none"!==getComputedStyle(s)[t]&&(s.style[t]+="__CSSVARSPONYFILL-KEYFRAMES__",r.push(s))}document.body.offsetHeight;for(var o=0,l=r.length;o<l;o++){var c=r[o].style;c[t]=c[t].replace("__CSSVARSPONYFILL-KEYFRAMES__","")}}}function H(e,t){return(e.replace(w.cssComments,"").match(w.cssUrls)||[]).forEach((function(n){var r=n.replace(w.cssUrls,"$1"),a=B(r,t);e=e.replace(n,n.replace(r,a))})),e}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^-{2}/;return Object.keys(e).reduce((function(n,r){return n[t.test(r)?r:"--".concat(r.replace(/^-+/,""))]=e[r],n}),{})}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),r=n.createElement("base"),a=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(a),r.href=t,a.href=e,a.href}function z(){return T&&(window.performance||{}).now?window.performance.now():(new Date).getTime()}function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));n.forEach((function(e){return e.setAttribute("data-cssvars","")})),t&&(M.dom={})}D.reset=function(){for(var e in I.job=0,I.group=0,j=!1,R&&(R.disconnect(),R=null),U=0,L=null,k=!1,M)M[e]={}};var q=Symbol("@ts-pattern/matcher"),K=function(e){return Boolean(e&&"object"==typeof e)},W=function(e){return e&&!!e[q]},Y=function e(t,n,r){if(K(t)){if(W(t)){var a=t[q]().match(n),i=a.matched,s=a.selections;return i&&s&&Object.keys(s).forEach((function(e){return r(e,s[e])})),i}if(!K(n))return!1;if(Array.isArray(t))return!!Array.isArray(n)&&t.length===n.length&&t.every((function(t,a){return e(t,n[a],r)}));if(t instanceof Map)return n instanceof Map&&Array.from(t.keys()).every((function(a){return e(t.get(a),n.get(a),r)}));if(t instanceof Set){if(!(n instanceof Set))return!1;if(0===t.size)return 0===n.size;if(1===t.size){var o=Array.from(t.values())[0];return W(o)?Array.from(n.values()).every((function(t){return e(o,t,r)})):n.has(o)}return Array.from(t.values()).every((function(e){return n.has(e)}))}return Object.keys(t).every((function(a){var i,s=t[a];return(a in n||W(i=s)&&"optional"===i[q]().matcherType)&&e(s,n[a],r)}))}return Object.is(n,t)};function Q(e){var t;return(t={})[q]=function(){return{match:function(t){return{matched:Boolean(e(t))}}}},t}function X(e){return new Z(e,[])}Q((function(e){return!0})),Q((function(e){return"string"==typeof e})),Q((function(e){return"number"==typeof e})),Q((function(e){return"boolean"==typeof e})),Q((function(e){return"bigint"==typeof e})),Q((function(e){return"symbol"==typeof e})),Q((function(e){return null==e}));var Z=function(){function e(e,t){this.value=void 0,this.cases=void 0,this.value=e,this.cases=t}var t=e.prototype;return t.with=function(){var t=[].slice.call(arguments),n=t[t.length-1],r=[t[0]],a=[];return 3===t.length&&"function"==typeof t[1]?(r.push(t[0]),a.push(t[1])):t.length>2&&r.push.apply(r,t.slice(1,t.length-1)),new e(this.value,this.cases.concat([{match:function(e){var t={},n=Boolean(r.some((function(n){return Y(n,e,(function(e,n){t[e]=n}))}))&&a.every((function(t){return t(e)})));return{matched:n,value:n&&Object.keys(t).length?"@ts-pattern/anonymous-select-key"in t?t["@ts-pattern/anonymous-select-key"]:t:e}},handler:n}]))},t.when=function(t,n){return new e(this.value,this.cases.concat([{match:function(e){return{matched:Boolean(t(e)),value:e}},handler:n}]))},t.otherwise=function(t){return new e(this.value,this.cases.concat([{match:function(e){return{matched:!0,value:e}},handler:t}])).run()},t.exhaustive=function(){return this.run()},t.run=function(){for(var e=this.value,t=void 0,n=0;n<this.cases.length;n++){var r=this.cases[n],a=r.match(this.value);if(a.matched){e=a.value,t=r.handler;break}}if(!t){var i;try{i=JSON.stringify(this.value)}catch(e){i=this.value}throw new Error("Pattern matching error: no pattern matches value "+i)}return t(e,this.value)},e}();const $={INIT_USER:"INIT_USER",RESET_USER:"RESET_USER",UPDATE_USER_INFO:"UPDATE_USER_INFO"};var J,ee,te=n(0),ne=function(e){function t(t){var n=e.call(this)||this;if(n.method=te.a.POST,n.path="".concat(te.H),n.params=Object(te.Vb)({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var r=0;r<t.thumbnailSizes.length;r++){var a=t.thumbnailSizes[r],i=a.maxWidth,s=a.maxHeight;n.params["thumbnail".concat(r+1)]="".concat(i,",").concat(s)}return n.requestId=t.requestId,n}return Object(te.A)(t,e),t}(te.Wb),re=function(e){function t(t,n){var r,a,i,s=this;return(s=e.call(this,t,n)||this).url=n.url,s.fileSize=null!==(r=n.file_size)&&void 0!==r?r:0,s.thumbnailSizes=null!==(a=n.thumbnails)&&void 0!==a?a:[],s.requireAuth=null!==(i=n.require_auth)&&void 0!==i&&i,s}return Object(te.A)(t,e),t}(te.Yb),ae=function(e){function t(t,n){var r,a,i,s=this;return(s=e.call(this,t)||this).replyCount=0,s.lastRepliedAt=0,s.updatedAt=0,s.replyCount=null!==(r=n.reply_count)&&void 0!==r?r:0,s.mostRepliedUsers=n.most_replies&&Object(te.k)("object",n.most_replies)?n.most_replies.map((function(e){return new te.u(s._iid,e)})):[],s.lastRepliedAt=null!==(a=n.last_replied_at)&&void 0!==a?a:0,s.updatedAt=null!==(i=n.updated_at)&&void 0!==i?i:0,s}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{reply_count:t.replyCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map((function(e){return te.u.payloadify(e)})):[],last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})))},t}(te.I);(ee=J||(J={})).ADD="add",ee.DELETE="delete";var ie,se,oe=function(e){this.messageId=0,this.operation=null,this.updatedAt=0;var t=Object(te.B)("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,n=e.user_id,r=e.operation?e.operation.toLowerCase():null,a=e.reaction,i=e.updated_at;t&&Object(te.B)("string",n)&&Object(te.B)("string",r)&&Object(te.q)(J,r)&&Object(te.B)("string",a)&&a&&Object(te.B)("number",i)&&(this.messageId=t,this.userId=n,this.key=a,this.operation=r,this.updatedAt=i)},le=function(){function e(e){var t,n,r,a=e.key,i=null!==(r=Object(te.fc)([],Object(te.gc)(e.user_ids),!1))&&void 0!==r?r:[],s=e.updated_at;Object(te.B)("string",a)&&a&&Object(te.k)("string",i)&&i.length>0&&Object(te.B)("number",s)&&(this.key=a,this.userIds=i,this.updatedAt=s);var o={};try{for(var l=Object(te.ic)(this.userIds),c=l.next();!c.done;c=l.next())o[c.value]=this.updatedAt}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}this._version=o}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.payloadify=function(e){return Object(te.Vb)(Object(te.lc)({key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}))},e.prototype.applyEvent=function(e){if(e.key===this.key&&this.updatedAt<=e.updatedAt){if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var t=this.userIds.indexOf(e.userId);switch(e.operation){case J.ADD:t<0&&this.userIds.push(e.userId);break;case J.DELETE:t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}this.updatedAt=Math.max(this.updatedAt,e.updatedAt)}},e}(),ce=function(){function e(e){this.key=e.key,this.value=Object(te.k)("string",e.value)?Object(te.fc)([],Object(te.gc)(e.value),!1):[]}return e.payloadify=function(e){var t;return Object(te.Vb)(Object(te.lc)({key:e.key,value:null!==(t=e.value)&&void 0!==t?t:[]}))},e}(),ue=function(){function e(e){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=e.url,e.secure_url&&(this.secureUrl=e.secure_url),e.type&&(this.type=e.type),e.width&&(this.width=e.width),e.height&&(this.height=e.height),e.alt&&(this.alt=e.alt)}return e.payloadify=function(e){var t,n;return Object(te.Vb)(Object(te.lc)({url:e.url,secure_url:e.secureUrl,type:e.type,width:null!==(t=e.width)&&void 0!==t?t:0,height:null!==(n=e.height)&&void 0!==n?n:0,alt:e.alt}))},e}(),de=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e["og:title"]&&(this.title=e["og:title"]),e["og:url"]&&(this.url=e["og:url"]),e["og:description"]&&(this.description=e["og:description"]),e["og:image"]&&(this.defaultImage=new ue(e["og:image"]))}return e.payloadify=function(e){return Object(te.Vb)(Object(te.lc)({"og:title":e.title,"og:url":e.url,"og:description":e.description,"og:image":e.defaultImage?ue.payloadify(e.defaultImage):null}))},e}(),he=function(){function e(e){var t,n;this.volume=0,this.name=null!==(t=e.name)&&void 0!==t?t:"default",this.volume=null!==(n=e.volume)&&void 0!==n?n:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(e){return Object(te.Vb)(Object(te.lc)({name:e.name,volume:e.volume}))},e}(),fe=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this).isBlockedByMe=!1,a.role=Object(te.q)(te.D,n.role)?n.role:te.D.NONE,a.isBlockedByMe=null!==(r=n.is_blocked_by_me)&&void 0!==r&&r,a}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})))},t}(te.u);!function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"}(ie||(ie={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(se||(se={}));var pe,me=function(e){switch(e){case te.ib.BASE:return"";case te.ib.USER:return"MESG";case te.ib.FILE:return"FILE";case te.ib.ADMIN:return"ADMM"}},be=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v=this;(v=e.call(this,t)||this).channelType=te.y.BASE,v.parentMessage=null,v.silent=!1,v.isOperatorMessage=!1,v.messageType=te.ib.BASE,v.mentionType=null,v.threadInfo=null,v.reactions=[],v.metaArrays=[],v.appleCriticalAlertOptions=null,v.createdAt=0,v.updatedAt=0,v.scheduledInfo=null,v.extendedMessage={},v.notificationData=null,v._isContinuousMessages=!1,v._scheduledStatus=null,v.messageId=null!==(a=null!==(r=n.msg_id)&&void 0!==r?r:n.message_id)&&void 0!==a?a:0,v.channelUrl=n.channel_url,v.channelType=Object(te.q)(te.y,n.channel_type)?n.channel_type:te.y.GROUP,n.channel&&(n.channel.channel_url&&(v.channelUrl=n.channel.channel_url),n.channel.channel_type&&(v.channelType=n.channel.channel_type)),v.parentMessageId=null!==(i="string"==typeof n.parent_message_id?parseInt(n.parent_message_id):n.parent_message_id)&&void 0!==i?i:0,v.data=null!==(s=n.data)&&void 0!==s?s:"",v.customType=null!==(o=n.custom_type)&&void 0!==o?o:"",v.mentionType=Object(te.q)(te.kb,n.mention_type)?n.mention_type:null,v.mentionedUsers=n.mentioned_users?n.mentioned_users.map((function(e){return new te.u(v._iid,e)})):null,v.mentionedUserIds=null!==(l=n.mentioned_user_ids)&&void 0!==l?l:null,v.mentionedUsers&&!v.mentionedUserIds&&(v.mentionedUserIds=v.mentionedUsers.map((function(e){return e.userId}))),v.mentionedMessageTemplate=null!==(c=n.mentioned_message_template)&&void 0!==c?c:"",v.threadInfo=n.thread_info?new ae(v._iid,n.thread_info):null,v.reactions=n.reactions?n.reactions.map((function(e){return new le(e)})):[];var E=null!==(u=n.metaarray)&&void 0!==u?u:{},y=null!==(d=n.metaarray_key_order)&&void 0!==d?d:Object.keys(E).sort((function(e,t){return e.localeCompare(t)}));v.metaArrays=[];for(var O=0;O<y.length;O++){var C=y[O];v.metaArrays.push(new ce({key:C,value:E[C]||[]}))}if(n.sorted_metaarray&&(v.metaArrays=n.sorted_metaarray.map((function(e){return new ce(e)}))),v.ogMetaData=n.og_tag?new de(n.og_tag):null,v.silent=null!==(h=n.silent)&&void 0!==h&&h,v.isOperatorMessage=null!==(f=n.is_op_msg)&&void 0!==f&&f,v.appleCriticalAlertOptions=n.apple_critical_alert_options?new he(n.apple_critical_alert_options):null,v.createdAt=null!==(m=null!==(p=n.created_at)&&void 0!==p?p:n.ts)&&void 0!==m?m:0,v.updatedAt=null!==(b=n.updated_at)&&void 0!==b?b:0,"number"==typeof n.scheduled_message_id&&"number"==typeof n.scheduled_at&&n.scheduled_status&&(v.scheduledInfo={scheduledMessageId:n.scheduled_message_id,scheduledAt:n.scheduled_at},v._scheduledStatus=n.scheduled_status),v.extendedMessage=null!==(_=n.extended_message)&&void 0!==_?_:{},0===v.extendedMessage.sub_type)try{var N=JSON.parse(v.extendedMessage.sub_data),T=N.label,S=N.tags,I=N.template_key,A=N.template_variables;v.notificationData={label:T,tags:S,templateKey:I,templateVariables:A}}catch(t){}return v._isContinuousMessages=null!==(g=n.is_continuous_messages)&&void 0!==g&&g,v}return Object(te.A)(t,e),t.payloadify=function(t){var n,r,a,i;return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,message_id:t.messageId,type:me(t.messageType),parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:null===(n=t.mentionedUsers)||void 0===n?void 0:n.map((function(e){return te.u.payloadify(e)})),mentioned_message_template:t.mentionedMessageTemplate,thread_info:t.threadInfo?ae.payloadify(t.threadInfo):null,reactions:t.reactions.map((function(e){return le.payloadify(e)})),sorted_metaarray:null===(r=t.metaArrays)||void 0===r?void 0:r.map((function(e){return ce.payloadify(e)})),og_tag:t.ogMetaData?de.payloadify(t.ogMetaData):null,silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,created_at:t.createdAt,updated_at:t.updatedAt,scheduled_message_id:null===(a=t.scheduledInfo)||void 0===a?void 0:a.scheduledMessageId,scheduled_at:null===(i=t.scheduledInfo)||void 0===i?void 0:i.scheduledAt,scheduled_status:t._scheduledStatus,extended_message:t.extendedMessage})))},t._getParentMessageInfoPayload=function(e){return Object(te.Vb)(Object(te.lc)({type:me(e.messageType),ts:e.createdAt,user:e.sender?fe.payloadify(e.sender):null,message:e.message,file:{url:e.plainUrl,name:e.name,type:e.type,require_auth:e.requireAuth}}))},t.prototype.isIdentical=function(e){return this.messageId===e.messageId},t.prototype.isEqual=function(e){return Object(te.J)(this,e)},t.prototype.isUserMessage=function(){return this.messageType===te.ib.USER},t.prototype.isFileMessage=function(){return this.messageType===te.ib.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},t.prototype.isMultipleFilesMessage=function(){return this.messageType===te.ib.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},t.prototype.isAdminMessage=function(){return this.messageType===te.ib.ADMIN},t.prototype.serialize=function(){return Object(te.jb)(this)},t.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(t){return e.includes(t.key)}))},t.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(this.threadInfo=e.threadInfo),!1},t.prototype.applyReactionEvent=function(e){if(this.messageId===e.messageId){for(var t=!1,n=0;n<this.reactions.length;n++)if(this.reactions[n].key===e.key){this.reactions[n].applyEvent(e),this.reactions[n].isEmpty&&this.reactions.splice(n,1),t=!0;break}t||"add"!==e.operation||this.reactions.push(new le(le.payloadify({key:e.key,userIds:[e.userId],updatedAt:e.updatedAt})))}},t.prototype.applyParentMessage=function(e){if(!this.parentMessage)return this.parentMessage=e,!0;if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1},t}(te.I),_e=function(e){function t(t,n){var r,a,i,s,o=this;if((o=e.call(this,t,n)||this).reqId="",o.replyToChannel=!1,o.errorCode=0,o.sender=n.user?new fe(o._iid,n.user):n.sender_id,o.reqId=null!==(a=null!==(r=n.req_id)&&void 0!==r?r:n.request_id)&&void 0!==a?a:"",o.replyToChannel=null!==(i=n.is_reply_to_channel)&&void 0!==i&&i,n.request_state&&Object(te.q)(te.lb,n.request_state)&&(o.sendingStatus=n.request_state),!o.sendingStatus)if(o.messageId>0)o.sendingStatus=te.lb.SUCCEEDED;else if(o.scheduledInfo)switch(n.scheduled_status&&(o._scheduledStatus=n.scheduled_status),n.scheduled_status){case se.SENT:case se.IN_QUEUE:o.sendingStatus=te.lb.SUCCEEDED;break;case se.PENDING:o.sendingStatus=te.lb.SCHEDULED;break;case se.FAILED:case se.REMOVED:o.sendingStatus=te.lb.FAILED;break;case se.CANCELED:o.sendingStatus=te.lb.CANCELED}else o.sendingStatus=te.lb.PENDING;return o.errorCode=null!==(s=n.error_code)&&void 0!==s?s:0,o}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{user:fe.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode})))},Object.defineProperty(t.prototype,"isResendable",{get:function(){return(this.sendingStatus===te.lb.FAILED||this.sendingStatus===te.lb.CANCELED)&&Object(te.mb)(this.errorCode)},enumerable:!1,configurable:!0}),t.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},t}(be),ge=function(){function e(e,t,n){var r,a;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=e,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=null!==(r=t.real_width)&&void 0!==r?r:t.width,this.realHeight=null!==(a=t.real_height)&&void 0!==a?a:t.height,this._requireAuth=n}return e.payloadify=function(e){return Object(te.Vb)(Object(te.lc)({url:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(e.prototype,"url",{get:function(){var e=te.v.of(this._iid).sessionManager;return this._requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),e}(),ve={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:te.nb.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Ee=function(e){return Object(te.B)("number",e.prevResultSize)&&Object(te.B)("number",e.nextResultSize)&&Object(te.B)("boolean",e.isInclusive)&&Object(te.B)("boolean",e.reverse)&&Object(te.B)("string",e.messageTypeFilter)&&Object(te.q)(te.nb,e.messageTypeFilter)&&Object(te.k)("string",e.customTypesFilter,!0)&&Object(te.k)("string",e.senderUserIdsFilter,!0)&&Object(te.B)("boolean",e.includeMetaArray)&&Object(te.B)("boolean",e.includeReactions)&&Object(te.B)("boolean",e.includeParentMessageInfo)},ye=function(e){function t(t,n){var r,a,i,s,o=this;if((o=e.call(this,t,n)||this).translations={},o.message=null!==(r=n.message)&&void 0!==r?r:"",o.messageType=te.ib.ADMIN,o.translations=null!==(a=n.translations)&&void 0!==a?a:{},n.parent_message_info){var l=n.parent_message_info;o.parentMessage=Ie(t,Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},l),{message_id:o.parentMessageId,channel_url:o.channelUrl,channel_type:o.channelType,file:l.file,url:null===(i=l.file)||void 0===i?void 0:i.url,require_auth:null===(s=l.file)||void 0===s?void 0:s.require_auth}))))}return o}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},ve),t),Object(te.jc)(this.messageId>0&&Object(te.B)("number",e)&&Ee(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t}(be),Oe=function(){function e(e){var t,n;this.detail={},this.type=null!==(t=e.type)&&void 0!==t?t:"",this.vendor=null!==(n=e.vendor)&&void 0!==n?n:"",e.detail&&Object(te.B)("object",e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}return e.payloadify=function(e){return Object(te.Vb)(Object(te.lc)({type:e.type,vendor:e.vendor,detail:e.detail}))},e}(),Ce=function(e){function t(t,n){var r,a,i,s,o,l,c,u=this;if((u=e.call(this,t,n)||this).message="",u.messageParams=null,u.translations={},u.translationTargetLanguages=[],u.messageSurvivalSeconds=-1,u.plugins=[],u._poll=null,u.message=n.message,u.messageType=te.ib.USER,u.translations=null!==(i=n.translations)&&void 0!==i?i:{},u.translationTargetLanguages=null!==(s=n.target_langs)&&void 0!==s?s:[],0===Object.keys(u.translations).length&&u.translationTargetLanguages.length>0)try{for(var d=Object(te.ic)(u.translationTargetLanguages),h=d.next();!h.done;h=d.next()){var f=h.value;u.translations[f]=""}}catch(t){r={error:t}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}if(u.messageSurvivalSeconds=null!==(o=n.message_survival_seconds)&&void 0!==o?o:-1,u.plugins=n.plugins?n.plugins.map((function(e){return new Oe(e)})):[],u._poll=n.poll?new te.ob(u._iid,n.poll):null,n.parent_message_info){var p=n.parent_message_info;u.parentMessage=Ie(t,Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},p),{created_at:p.ts,message_id:u.parentMessageId,channel_url:u.channelUrl,channel_type:u.channelType,file:p.file,url:null===(l=p.file)||void 0===l?void 0:l.url,require_auth:null===(c=p.file)||void 0===c?void 0:c.require_auth}))))}return u}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,plugins:t.plugins.map((function(e){return Oe.payloadify(e)})),poll:t._poll?te.ob.payloadify(t._poll):null,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},ve),t),Object(te.jc)(this.messageId>0&&Object(te.B)("number",e)&&Ee(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt||(this._poll=e,0))},Object.defineProperty(t.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),t}(_e),Ne=function(e){function t(t,n){var r,a,i,s,o,l=this;return(l=e.call(this,t)||this).plainUrl="",l.fileName=null,l.mimeType=null,l.fileSize=0,l.thumbnails=[],l._requireAuth=!1,l.plainUrl=null!==(r=n.url)&&void 0!==r?r:"",l.fileName=null!==(a=n.file_name)&&void 0!==a?a:null,l.mimeType=null!==(i=n.file_type)&&void 0!==i?i:null,l.fileSize=null!==(s=n.file_size)&&void 0!==s?s:0,l._requireAuth=null!==(o=n.require_auth)&&void 0!==o&&o,te.v.of(l._iid).sessionManager,l.thumbnails=n.thumbnails?n.thumbnails.map((function(e){var t;return new ge(l._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(te.Xb)(Object(te.Xb)({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),l._requireAuth)})):[],l}return Object(te.A)(t,e),t.payloadify=function(e){var t;return Object(te.Vb)(Object(te.lc)({url:e.plainUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{url:e.url,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),require_auth:e._requireAuth}))},Object.defineProperty(t.prototype,"url",{get:function(){var e=te.v.of(this._iid).sessionManager;return this._requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),t}(te.I),Te=function(e){function t(t,n){var r,a,i,s,o,l=this;if((l=e.call(this,t,n)||this).messageParams=null,l.fileInfoList=[],l.messageSurvivalSeconds=-1,l.messageType=te.ib.FILE,l.fileInfoList=null!==(a=null===(r=n.files)||void 0===r?void 0:r.map((function(e){return new Ne(t,e)})))&&void 0!==a?a:[],l.messageSurvivalSeconds=null!==(i=n.message_survival_seconds)&&void 0!==i?i:-1,n.parent_message_info){var c=n.parent_message_info;l.parentMessage=Ie(t,Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},c),{created_at:c.ts,message_id:l.parentMessageId,channel_url:l.channelUrl,channel_type:l.channelType,file:c.file,url:null===(s=c.file)||void 0===s?void 0:s.url,require_auth:null===(o=c.file)||void 0===o?void 0:o.require_auth}))))}return l}return Object(te.A)(t,e),t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},ve),t),Object(te.jc)(this.messageId>0&&Object(te.B)("number",e)&&Ee(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{files:t.fileInfoList&&t.fileInfoList&&Array.isArray(t.fileInfoList)?t.fileInfoList.map((function(e){return Ne.payloadify(e)})):null,message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},t._isMultipleFilesMessagePayload=function(e){var t=e.files;return Array.isArray(t)&&t.length>=2},t._isMultipleFilesMessageSerializedData=function(e){var t=e.fileInfoList;return Array.isArray(t)},t}(_e),Se=function(e){switch(e.messageType){case te.ib.USER:return Ce.payloadify(e);case te.ib.FILE:return e.fileInfoList?Te.payloadify(e):Ae.payloadify(e);case te.ib.ADMIN:return ye.payloadify(e);default:throw te.hc.unknown}},Ie=function(e,t){switch(t.type){case"MESG":return new Ce(e,t);case"FILE":return Te._isMultipleFilesMessagePayload(t)?new Te(e,t):new Ae(e,t);case"ADMM":case"BRDM":return new ye(e,t)}return null},Ae=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_=this;(_=e.call(this,t,n)||this).messageParams=null,_.plainUrl="",_.requireAuth=!1,_.thumbnails=[],_.messageSurvivalSeconds=-1,_.messageType=te.ib.FILE;var g=n.file;if(_.plainUrl=(null!==(a=null!==(r=null==g?void 0:g.url)&&void 0!==r?r:n.url)&&void 0!==a?a:"").split("?auth=")[0],_.name=null!==(s=null!==(i=null==g?void 0:g.name)&&void 0!==i?i:n.name)&&void 0!==s?s:"File",_.size=null!==(l=null!==(o=null==g?void 0:g.size)&&void 0!==o?o:n.size)&&void 0!==l?l:0,_.data=null!==(u=null!==(c=null==g?void 0:g.data)&&void 0!==c?c:n.custom)&&void 0!==u?u:"",_.type=g?null!==(d=g.type)&&void 0!==d?d:"":null!==(h=n.type)&&void 0!==h?h:"",te.v.of(_._iid).sessionManager,_.requireAuth=null!==(f=n.require_auth)&&void 0!==f&&f,_.thumbnails=n.thumbnails?n.thumbnails.map((function(e){var t;return new ge(_._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(te.Xb)(Object(te.Xb)({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),_.requireAuth)})):[],_.messageSurvivalSeconds=null!==(p=n.message_survival_seconds)&&void 0!==p?p:-1,n.parent_message_info){var v=n.parent_message_info;_.parentMessage=Ie(t,Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},v),{created_at:v.ts,message_id:_.parentMessageId,channel_url:_.channelUrl,channel_type:_.channelType,file:v.file,url:null===(m=v.file)||void 0===m?void 0:m.url,require_auth:null===(b=v.file)||void 0===b?void 0:b.require_auth}))))}return _}return Object(te.A)(t,e),t.payloadify=function(t){var n;return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:null===(n=t.thumbnails)||void 0===n?void 0:n.map((function(e){return{url:e.plainUrl,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},Object.defineProperty(t.prototype,"url",{get:function(){var e=te.v.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),t.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},ve),t),Object(te.jc)(this.messageId>0&&Object(te.B)("number",e)&&Ee(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},t}(_e),we=function(e){function t(t){var n,r,a,i=[];return t.mentionType===te.kb.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FILE",ackRequired:!0,payload:Object(te.Vb)(Object(te.lc)({channel_url:t.channelUrl,files:t.files?Ue(t.files):null,url:t.url,name:null!==(n=t.fileName)&&void 0!==n?n:"",type:null!==(r=t.mimeType)&&void 0!==r?r:"",size:null!==(a=t.fileSize)&&void 0!==a?a:0,custom:t.data,custom_type:t.customType,thumbnails:t.thumbnailSizes,require_auth:t.requireAuth,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:i,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==te.pb.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,pin_message:t.isPinnedMessage}))})||this}return Object(te.A)(t,e),t}(te.qb),Me=function(e){function t(t){var n,r,a=this;a=e.call(this)||this;var i=[];return t.mentionType===te.kb.USERS&&(t.mentionedUserIds?i=t.mentionedUserIds:t.mentionedUsers&&(i=t.mentionedUsers.map((function(e){return e.userId})))),a.method=te.a.POST,a.path="".concat(Object(te.rb)(t.channelType),"/").concat(encodeURIComponent(t.channelUrl),"/messages"),a.params=Object(te.Vb)(Object(te.lc)({message_type:te.ib.FILE,user_id:t.userId,files:t.files?Ue(t.files):null,url:t.fileUrl,mention_type:t.mentionType,mentioned_user_ids:i,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,data:t.data,custom_type:t.customType,thumbnails:null===(n=t.thumbnailSizes)||void 0===n?void 0:n.map((function(e){return ge.payloadify(e)})),require_auth:t.requireAuth,sorted_metaarray:null===(r=t.metaArrays)||void 0===r?void 0:r.map((function(e){return ce.payloadify(e)})),push_option:t.pushNotificationDeliveryOption,parent_message_id:t.parentMessageId?t.parentMessageId:null,apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,reply_to_channel:t.isReplyToChannel,req_id:t.reqId,pin_message:t.isPinnedMessage})),a}return Object(te.A)(t,e),t}(te.Wb),je=function(e){function t(t,n,r){var a,i,s,o,l=this;(l=e.call(this,t,"FILE",r)||this).message=r.files&&r.files.length>=2?new Te(t,r):new Ae(t,r);var c=te.v.of(t).sdkState;return l.isMentioned=Object(te.sb)(l.message.mentionType,null!==(s=null!==(a=l.message.mentionedUserIds)&&void 0!==a?a:null===(i=l.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})))&&void 0!==s?s:[],c.userId),l.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,l}return Object(te.A)(t,e),t}(te.w),Re=function(e){function t(t,n){var r,a,i,s,o=this;(o=e.call(this,t,n)||this).message=n.files&&n.files.length>=2?new Te(t,n):new Ae(t,n);var l=te.v.of(t).sdkState;return o.isMentioned=Object(te.sb)(o.message.mentionType,null!==(i=null!==(r=o.message.mentionedUserIds)&&void 0!==r?r:null===(a=o.message.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})))&&void 0!==i?i:[],l.userId),o.forceUpdateLastMessage=null!==(s=n.force_update_last_message)&&void 0!==s&&s,o}return Object(te.A)(t,e),t}(te.Yb);function Ue(e){return e.map((function(e){var t,n;return Object(te.Vb)(Object(te.lc)({url:e.fileUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:null===(t=e.thumbnailSizes)||void 0===t?void 0:t.map((function(e){return ge.payloadify(e)})),require_auth:null===(n=e._uploadedMetaData)||void 0===n?void 0:n.requireAuth}))}))}!function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"}(pe||(pe={}));var Le,ke=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,a=t.requestQueue,i=t.onlineDetector,s=t.cacheContext,o=this;this._queueMap=new Map,this._iid=e,this._sdkState=n,this._requestQueue=a,this._cacheContext=s,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof te.pc&&(o._connectionState=e.stateType)})),this._onlineDetector=i}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===te.qc.CONNECTED||this._connectionState===te.qc.CONNECTING||this._connectionState===te.qc.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return n=this._createSendFileMessageRequestParams(e,t),this._shouldSendThroughWebSocket?(r=new we(n),[4,this._requestQueue.send(r)]):[3,2];case 1:return[2,a.sent().as(je).message];case 2:return r=new Me(Object(te.Xb)(Object(te.Xb)({},n),{userId:this._sdkState.userId})),[4,this._requestQueue.send(r)];case 3:return[2,a.sent().as(Re).message]}}))}))},e.prototype._createSendFileMessageRequestParams=function(e,t){var n=Object(te.Xb)(Object(te.Xb)({},t.params),{channelUrl:e.url,channelType:e.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var r=t.params;n.files=r.fileInfoList}else r=t.params,n.url=r.fileUrl,n.requireAuth=r.requireAuth;return n},e.prototype._resolveMessageQueue=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c,u,d,h,f,p;return Object(te.Tb)(this,(function(m){switch(m.label){case 0:if(!(n=this._queueMap.get(e.url)))return[3,21];if(n.isResolving)return[3,20];n.isResolving=!0,r=[],a=!0,m.label=1;case 1:m.trys.push([1,15,16,17]),i=Object(te.ic)(n.messageQueue),s=i.next(),m.label=2;case 2:if(s.done)return[3,14];switch((o=s.value).state){case pe.PENDING:case pe.UPLOADING:return[3,3];case pe.UPLOADED:return[3,4];case pe.FAILED:return[3,12]}return[3,13];case 3:return a=!1,r.push(o),[3,13];case 4:if(!a)return[3,10];m.label=5;case 5:return m.trys.push([5,8,,9]),o.state=pe.SENDING,[4,this._sendFileMessage(e,o)];case 6:return l=m.sent(),o.deferred.resolve(l),[4,Object(te.ub)(100)];case 7:return m.sent(),[3,9];case 8:return c=m.sent(),o.deferred.reject(c),[3,9];case 9:return[3,11];case 10:r.push(o),m.label=11;case 11:return[3,13];case 12:return u=null!==(t=o.error)&&void 0!==t?t:te.hc.unknown,o.deferred.reject(u.code===te.tb.REQUEST_CANCELED?te.hc.fileUploadCanceled:u),[3,13];case 13:return s=i.next(),[3,2];case 14:return[3,17];case 15:return d=m.sent(),f={error:d},[3,17];case 16:try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 17:return h=n.isResolveRequestPending,n.messageQueue=r,n.isResolving=!1,n.isResolveRequestPending=!1,h?[4,this._resolveMessageQueue(e)]:[3,19];case 18:m.sent(),m.label=19;case 19:return[3,21];case 20:n.isResolveRequestPending=!0,m.label=21;case 21:return[2]}}))}))},e.prototype._uploadNextPendingItem=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c,u;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return(n=this._queueMap.get(e.url))&&(r=n.messageQueue.find((function(e){return e.state===pe.PENDING})))?r.multipleFileUploadInfo?(a=r.multipleFileUploadInfo,i=a.uploadIndex,s=a.uploadCount,o=a.requestHandler,u=r.params,l=u.fileInfoList[i],!Object(te.Zb)(l.file)||(null===(t=l._uploadedMetaData)||void 0===t?void 0:t.isUploaded)?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]):[3,4]:[3,9];case 1:return d.sent(),[3,3];case 2:r.state=i<s-1?pe.PENDING:pe.UPLOADED,d.label=3;case 3:return c=r.multipleFileUploadInfo.uploadIndex++,r.multipleFileUploadInfo.isCopy||null==o||o._triggerOnFileUploaded(r.requestId,c,l,r.error),[3,7];case 4:return u=r.params,Object(te.Zb)(u.file)?[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]:[3,6];case 5:return d.sent(),[3,7];case 6:u.thumbnailSizes=[],r.state=pe.UPLOADED,d.label=7;case 7:return this._uploadNextPendingItem(e),[4,this._resolveMessageQueue(e)];case 8:d.sent(),d.label=9;case 9:return[2]}}))}))},e.prototype._tryUploadNextItemAndUpdateItemState=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(r=c.sent(),!te.v.of(this._iid).sessionManager.currentUser||!r)return n.error=te.hc.connectionRequired,n.state=pe.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];n.state=pe.UPLOADING,t.uploadQueue.push(n),c.label=2;case 2:return c.trys.push([2,7,,8]),n.multipleFileUploadInfo?(a=n.multipleFileUploadInfo,i=a.uploadIndex,s=a.uploadCount,o=n.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(e,n,o)]):[3,4];case 3:return c.sent(),n.state=i<s-1?pe.PENDING:pe.UPLOADED,[3,6];case 4:return o=n.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(e,n,o)];case 5:c.sent(),n.state=pe.UPLOADED,c.label=6;case 6:return[3,8];case 7:switch((l=c.sent()).code){case te.tb.REQUEST_FAILED:n.error=new te.hc({code:te.tb.NETWORK_ERROR,message:"Failed to upload a file."});break;case te.tb.REQUEST_CANCELED:n.error=te.hc.fileUploadCanceled;break;default:n.error=l}return n.state=pe.FAILED,[3,8];case 8:this._dequeueUploadItem(t,n),c.label=9;case 9:return[2]}}))}))},e.prototype._dequeueUploadItem=function(e,t){var n=e.uploadQueue.findIndex((function(e){return e.requestId===t.requestId}));n>=0&&e.uploadQueue.splice(n,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(e,t,n){var r,a,i;return Object(te.Ib)(this,void 0,void 0,(function(){var s,o,l,c,u,d,h,f,p,m;return Object(te.Tb)(this,(function(b){switch(b.label){case 0:return s=new ne({file:n.file,channelUrl:e.url,thumbnailSizes:n.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(s)];case 1:return o=b.sent(),l=o.as(re),c=l.url,u=l.fileSize,d=void 0===u?n.fileSize:u,h=l.thumbnailSizes,f=void 0===h?n.thumbnailSizes:h,p=l.requireAuth,m=void 0!==p&&p,n.fileName=null!==(r=n.fileName)&&void 0!==r?r:n.file.name,n.mimeType=null!==(a=n.mimeType)&&void 0!==a?a:n.file.type,n.fileSize=null!==(i=n.fileSize)&&void 0!==i?i:n.file.size,n.fileUrl=c,n.fileSize=d,n.thumbnailSizes=f,n.requireAuth=m,[2]}}))}))},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(e,t,n){var r,a,i;return Object(te.Ib)(this,void 0,void 0,(function(){var s,o,l,c,u,d,h,f,p,m,b,_;return Object(te.Tb)(this,(function(g){switch(g.label){case 0:return s=t.multipleFileUploadInfo.uploadIndex,o=n.fileInfoList[s],l=new ne({file:o.file,channelUrl:e.url,thumbnailSizes:o.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(l)];case 1:return c=g.sent(),u=c.as(re),d=u.url,h=u.fileSize,f=void 0===h?o.fileSize:h,p=u.thumbnailSizes,m=void 0===p?o.thumbnailSizes:p,b=u.requireAuth,_=void 0!==b&&b,o.fileName=null!==(r=o.fileName)&&void 0!==r?r:o.file.name,o.mimeType=null!==(a=o.mimeType)&&void 0!==a?a:o.file.type,o.fileSize=null!==(i=o.fileSize)&&void 0!==i?i:o.file.size,o.file=void 0,o.fileUrl=d,o.fileSize=f,o.thumbnailSizes=m,o._uploadedMetaData=Object(te.Xb)(Object(te.Xb)({},o._uploadedMetaData),{requireAuth:_,isUploaded:!0}),[2]}}))}))},e.prototype.request=function(e,t,n,r){return void 0===r&&(r={}),Object(te.Ib)(this,void 0,void 0,(function(){var a,i,s,o,l;return Object(te.Tb)(this,(function(c){return this._queueMap.has(e.url)||(a={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(e.url,a)),i=this._queueMap.get(e.url),s=new te.vb,o={requestId:t,params:n,state:pe.PENDING,deferred:s},function(e){return"fileInfoList"in e}(n)&&(l=Object(te.Xb)({uploadIndex:0,uploadCount:n.fileInfoList.length},r),o.multipleFileUploadInfo=l),i.messageQueue.push(o),this._uploadNextPendingItem(e),[2,s.promise]}))}))},e.prototype.cancel=function(e,t){var n,r,a=this._queueMap.get(e.url);if(a){var i=t?[a.messageQueue.find((function(e){return e.requestId===t}))]:Object(te.fc)([],Object(te.gc)(a.messageQueue),!1);try{for(var s=Object(te.ic)(i),o=s.next();!o.done;o=s.next()){var l=o.value;if(l)switch(l.state){case pe.PENDING:if(l.state=pe.FAILED,l.error=te.hc.requestCanceled,l.multipleFileUploadInfo&&!l.multipleFileUploadInfo.isCopy){var c=l.multipleFileUploadInfo,u=c.uploadIndex,d=c.requestHandler,h=l.params.fileInfoList[u];null==d||d._triggerOnFileUploaded(l.requestId,u,h,te.hc.fileUploadCanceled)}this._resolveMessageQueue(e);break;case pe.UPLOADING:this._requestQueue.cancel(l.requestId)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e}(),De={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:te.nb.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:te.wb.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},xe=function(e){return Object(te.B)("number",e.prevResultSize)&&Object(te.B)("number",e.nextResultSize)&&Object(te.B)("boolean",e.isInclusive)&&Object(te.B)("boolean",e.reverse)&&Object(te.B)("string",e.messageTypeFilter)&&Object(te.q)(te.nb,e.messageTypeFilter)&&Object(te.k)("string",e.customTypesFilter,!0)&&Object(te.k)("string",e.senderUserIdsFilter,!0)&&Object(te.q)(te.wb,e.replyType)&&Object(te.B)("boolean",e.includeMetaArray)&&Object(te.B)("boolean",e.includeReactions)&&Object(te.B)("boolean",e.includeParentMessageInfo)&&Object(te.B)("boolean",e.includeThreadInfo)&&Object(te.B)("boolean",e.showSubchannelMessagesOnly)},Pe={replyType:te.wb.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Fe=function(e){return Object(te.q)(te.wb,e.replyType)&&Object(te.B)("boolean",e.includeReactions)&&Object(te.B)("boolean",e.includeMetaArray)&&Object(te.B)("boolean",e.includeParentMessageInfo)&&Object(te.B)("boolean",e.includeThreadInfo)},He=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.includeMetaArray,s=t.includeReactions,o=t.includeThreadInfo,l=t.includeParentMessageInfo,c=e.call(this)||this;return c.method=te.a.GET,c.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(a)),c.params={is_sdk:!0,with_sorted_meta_array:i,include_reactions:s,include_thread_info:o,include_parent_message_info:l,include_poll_details:!0},c}return Object(te.A)(t,e),t}(te.Wb),Ge=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?Ie(t,Object(te.Xb)({},n)):null,r}return Object(te.A)(t,e),t}(te.Yb),Be=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.timestamp,i=t.token,s=t.prevResultSize,o=t.nextResultSize,l=t.isInclusive,c=t.reverse,u=t.messageTypeFilter,d=t.customTypesFilter,h=t.senderUserIdsFilter,f=t.replyType,p=t.includeMetaArray,m=t.includeReactions,b=t.parentMessageId,_=t.includeThreadInfo,g=t.includeParentMessageInfo,v=t.showSubchannelMessagesOnly,E=t.checkingHasNext,y=t.checkingContinuousMessages,O=e.call(this)||this;return O.method=te.a.GET,O.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages"),O.params=Object(te.Vb)(Object(te.lc)({is_sdk:!0,prev_limit:s,next_limit:o,include:l,reverse:c,message_ts:a,message_id:i,message_type:null!=u?u:null,custom_types:d,sender_ids:h,include_reply_type:f,with_sorted_meta_array:p,include_reactions:m,parent_message_id:b,include_thread_info:_,include_parent_message_info:g,show_subchannel_message_only:v,include_poll_details:!0,checking_has_next:E,checking_continuous_messages:y})),O}return Object(te.A)(t,e),t}(te.Wb),ze=function(e){function t(t,n){var r=e.call(this,t,n)||this;return n.is_continuous_messages&&(r.isContinuousMessages=n.is_continuous_messages),n.has_next&&(r.hasNext=n.has_next),r.messages=n.messages.map((function(e){return Ie(t,e)})),r}return Object(te.A)(t,e),t}(te.Yb),Ve=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.timestamp,i=t.token,s=t.replyType,o=t.includeMetaArray,l=t.includeReactions,c=t.includeThreadInfo,u=t.includeParentMessageInfo,d=e.call(this)||this;return d.method=te.a.GET,d.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/changelogs"),d.params={change_ts:a,token:i,with_sorted_meta_array:o,include_reactions:l,include_thread_info:c,include_reply_type:s,include_parent_message_info:u,include_poll_details:!0},d}return Object(te.A)(t,e),t}(te.Wb),qe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedMessages=n.updated.map((function(e){return Ie(t,e)})),r.deletedMessagesInfo=n.deleted.map((function(e){return{messageId:e.message_id,deletedAt:e.deleted_at}})),r.hasMore=n.has_more,r.nextToken=n.next,r}return Object(te.A)(t,e),t}(te.Yb),Ke=function(e){function t(t){var n=t.channelUrl,r=t.scheduledMessageId,a=e.call(this)||this;return a.method=te.a.GET,a.path="".concat(te.xb,"/").concat(encodeURIComponent(n),"/scheduled_messages/").concat(encodeURIComponent(r)),a.params={},a}return Object(te.A)(t,e),t}(te.Wb),We=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?Ie(t,Object(te.Xb)({},n)):null,r}return Object(te.A)(t,e),t}(te.Yb);!function(e){e.MUTED="muted",e.BANNED="banned"}(Le||(Le={}));var Ye=function(){function e(e){var t,n,r,a;this.restrictionType=null,Object(te.q)(Le,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(t=e.description)&&void 0!==t?t:null,this.endAt=null!==(r=null!==(n=e.end_at)&&void 0!==n?n:e.muted_end_at)&&void 0!==r?r:-1,this.remainingDuration=null!==(a=e.remaining_duration)&&void 0!==a?a:-1}return e.payloadify=function(e){return Object(te.Vb)(Object(te.lc)({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt,remaining_duration:e.remainingDuration}))},e}(),Qe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=new Ye(n),r}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),Ye.payloadify(t.restrictionInfo))))},t}(te.u),Xe=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this).isMuted=!1,a.isMuted=null!==(r=n.is_muted)&&void 0!==r&&r,a}return Object(te.A)(t,e),t}(te.u),Ze=function(){function e(){this._onPending=te.yb,this._onFailed=te.yb,this._onSucceeded=te.yb}return e.prototype._trigger=function(e){switch(null==e?void 0:e.sendingStatus){case te.lb.PENDING:0===e.errorCode&&this._onPending(e);break;case te.lb.SCHEDULED:case te.lb.SUCCEEDED:this._onSucceeded(e)}},e.prototype._triggerFailed=function(e,t){switch(null==t?void 0:t.sendingStatus){case te.lb.FAILED:case te.lb.CANCELED:this._onFailed(e,t.scheduledInfo?null:t)}},e.prototype.onPending=function(e){return this._onPending=e,this},e.prototype.onFailed=function(e){return this._onFailed=e,this},e.prototype.onSucceeded=function(e){return this._onSucceeded=e,this},e}(),$e={data:void 0,customType:void 0,mentionType:te.kb.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1},Je=function(e){return Object(te.B)("string",e.data,!0)&&Object(te.B)("string",e.customType,!0)&&Object(te.q)(te.kb,e.mentionType)&&Object(te.k)("string",e.mentionedUserIds,!0)&&Object(te.k)(te.u,e.mentionedUsers,!0)&&Object(te.B)("string",e.mentionedMessageTemplate,!0)&&Object(te.k)(ce,e.metaArrays,!0)&&Object(te.B)("number",e.parentMessageId,!0)&&Object(te.B)("boolean",e.isReplyToChannel)&&Object(te.q)(te.pb,e.pushNotificationDeliveryOption,!0)&&Object(te.B)(he,e.appleCriticalAlertOptions,!0)&&Object(te.B)("boolean",e.isPinnedMessage,!0)},et=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},tt=Object(te.Xb)(Object(te.Xb)({},$e),{message:"",translationTargetLanguages:void 0,pollId:void 0});function nt(e){var t,n,r;return null!==(t=e.messageParams)&&void 0!==t?t:Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e),{mentionType:e.mentionType,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:te.pb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var rt,at=function(e){var t;return Object(te.Vb)(Object(te.lc)({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:null===(t=e.poll)||void 0===t?void 0:t.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations)}))},it=function(e){return Je(e)&&Object(te.B)("string",e.message)&&Object(te.k)("string",e.translationTargetLanguages,!0)&&Object(te.B)("number",e.pollId,!0)};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(rt||(rt={}));var st=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},ot=function(e){return e===rt.BLOB||e===rt.FILE},lt=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},ct=Object(te.Xb)(Object(te.Xb)({},$e),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1});function ut(e){var t,n,r,a;return null!==(t=e.messageParams)&&void 0!==t?t:Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:te.pb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(a=e.thumbnails)||void 0===a?void 0:a.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:e.requireAuth,isPinnedMessage:!1}))}var dt,ht=function(e,t){var n;return e.messageParams?(!e.url&&Object(te.Zb)(t)&&(e.messageParams.file=t),e.messageParams):Object(te.Vb)(Object(te.lc)({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:t,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:null===(n=e.thumbnails)||void 0===n?void 0:n.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))}))},ft=function(e){return Je(e)&&(Object(te.Zb)(e.file)||Object(te.B)("string",e.fileUrl))&&Object(te.B)("string",e.fileName,!0)&&Object(te.B)("string",e.mimeType,!0)&&Object(te.B)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return Object(te.B)("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},pt={data:void 0,customType:void 0,mentionType:te.kb.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},mt=function(e){return Object(te.B)("string",e.data,!0)&&Object(te.B)("string",e.customType,!0)&&Object(te.q)(te.kb,e.mentionType)&&Object(te.k)("string",e.mentionedUserIds,!0)&&Object(te.k)(te.u,e.mentionedUsers,!0)&&Object(te.B)("string",e.mentionedMessageTemplate,!0)&&Object(te.k)(ce,e.metaArrays,!0)&&Object(te.q)(te.pb,e.pushNotificationDeliveryOption,!0)&&Object(te.B)(he,e.appleCriticalAlertOptions,!0)},bt=Object(te.Xb)(Object(te.Xb)({},pt),{message:void 0,translationTargetLanguages:void 0,pollId:void 0}),_t=function(e){return mt(e)&&Object(te.B)("string",e.message,!0)&&Object(te.k)("string",e.translationTargetLanguages,!0)&&Object(te.B)("number",e.pollId,!0)},gt=Object(te.Xb)({},pt),vt=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.token,i=t.limit,s=e.call(this)||this;return s.method=te.a.GET,s.path="".concat(Object(te.rb)(r),"/").concat(encodeURIComponent(n),"/operators"),s.params={token:a,limit:i},s}return Object(te.A)(t,e),t}(te.Wb),Et=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new te.u(t,e)})),r.token=n.next,r}return Object(te.A)(t,e),t}(te.Yb),yt=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=te.v.of(this._iid).requestQueue,n=new vt(Object(te.Xb)(Object(te.Xb)({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=o.sent(),a=r.as(Et),i=a.operators,s=a.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,e];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb),Ot=function(e){function t(t,n,r,a){var i,s,o,l,c,u,d,h,f,p,m=this;return(m=e.call(this,t,n,r,a)||this).reverse=!1,m.messageTypeFilter=te.nb.ALL,m.customTypesFilter=null,m.senderUserIdsFilter=null,m.replyType=te.wb.NONE,m.includeMetaArray=!1,m.includeReactions=!1,m.includeParentMessageInfo=!1,m.includeThreadInfo=!1,m.showSubchannelMessagesOnly=!1,m._edge=Number.MAX_SAFE_INTEGER,m.reverse=null!==(i=a.reverse)&&void 0!==i&&i,m.messageTypeFilter=null!==(s=a.messageTypeFilter)&&void 0!==s?s:te.nb.ALL,m.customTypesFilter=null!==(o=a.customTypesFilter)&&void 0!==o?o:null,m.senderUserIdsFilter=null!==(l=a.senderUserIdsFilter)&&void 0!==l?l:null,m.replyType=null!==(c=a.replyType)&&void 0!==c?c:te.wb.NONE,m.includeMetaArray=null!==(u=a.includeMetaArray)&&void 0!==u&&u,m.includeReactions=null!==(d=a.includeReactions)&&void 0!==d&&d,m.includeParentMessageInfo=null!==(h=a.includeParentMessageInfo)&&void 0!==h&&h,m.includeThreadInfo=null!==(f=a.includeThreadInfo)&&void 0!==f&&f,m.showSubchannelMessagesOnly=null!==(p=a.showSubchannelMessagesOnly)&&void 0!==p&&p,m}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("boolean",this.reverse)&&Object(te.q)(te.nb,this.messageTypeFilter)&&Object(te.q)(te.wb,this.replyType)&&Object(te.k)("string",this.customTypesFilter,!0)&&Object(te.k)("string",this.senderUserIdsFilter,!0)&&Object(te.B)("boolean",this.includeMetaArray)&&Object(te.B)("boolean",this.includeReactions)&&Object(te.B)("boolean",this.includeParentMessageInfo)&&Object(te.B)("boolean",this.includeThreadInfo)&&Object(te.B)("boolean",this.showSubchannelMessagesOnly)},t.prototype.load=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,Ca.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,Object(te.lc)({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return e=t.sent(),this._edge=Math.min.apply(Math,Object(te.fc)([Number.MAX_SAFE_INTEGER],Object(te.gc)(e.map((function(e){return e.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb),Ct=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.limit,s=t.token;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:i,token:s},n}return Object(te.A)(t,e),t}(te.Wb),Nt=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.mutedUsers=[];var a=n.next,i=n.muted_list;return r.token=a,i&&i.length>0&&(r.mutedUsers=i.map((function(e){return new Qe(t,e)}))),r}return Object(te.A)(t,e),t}(te.Yb),Tt=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return Object(te.A)(t,e),t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new Ct(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(Nt),a=r.mutedUsers,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb),St=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.limit,s=t.token;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/ban"),n.params=Object(te.Vb)({limit:i,token:s}),n}return Object(te.A)(t,e),t}(te.Wb),It=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.bannedUsers=[];var a=n.next,i=n.banned_list;return r.token=a,i&&i.length>0&&(r.bannedUsers=i.map((function(e){return new Qe(t,e.user)}))),r}return Object(te.A)(t,e),t}(te.Yb),At=function(e){function t(t,n,r,a){return e.call(this,t,n,r,a)||this}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new St(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(It),a=r.bannedUsers,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(dt||(dt={}));var wt,Mt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return Object(te.A)(t,e),t}(te.Wb);wt=te.Yb,Object(te.A)((function(){return null!==wt&&wt.apply(this,arguments)||this}),wt);var jt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.operatorUserIds;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:i},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var Rt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/mute/").concat(i),n}return Object(te.A)(t,e),t}(te.Wb),Ut=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=0,r.endAt=0;var a=n.is_muted,i=n.start_at,s=n.end_at,o=n.remaining_duration,l=n.description;return r.isMuted=a,r.startAt=i,r.endAt=s,r.remainingDuration=o,r.description=l,r}return Object(te.A)(t,e),t}(te.Yb),Lt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:i,include_ts:!0},n}return Object(te.A)(t,e),t}(te.Wb),kt=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.metadata,i=n.ts;return r.metadata=a,r.ts=i,r}return Object(te.A)(t,e),t}(te.Yb),Dt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metadata;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:i,include_ts:!0},n}return Object(te.A)(t,e),t}(te.Wb),xt=function(e){function t(t,n){var r,a,i=this;return(i=e.call(this,t,n)||this).metaData=null!==(r=n.metadata)&&void 0!==r?r:{},i.ts=null!==(a=n.ts)&&void 0!==a?a:null,i}return Object(te.A)(t,e),t}(te.Yb),Pt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metadata,s=t.upsert;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:i,include_ts:!0,upsert:null!=s&&s},n}return Object(te.A)(t,e),t}(te.Wb),Ft=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.metadata,i=n.ts;return r.metadata=a,r.ts=i,r}return Object(te.A)(t,e),t}(te.Yb),Ht=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return Object(te.A)(t,e),t}(te.w),Gt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metadata/").concat(i),n.params={include_ts:!0},n}return Object(te.A)(t,e),t}(te.Wb),Bt=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.ts;return r.ts=a,r}return Object(te.A)(t,e),t}(te.Yb),zt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return Object(te.A)(t,e),t}(te.Wb),Vt=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.ts;return r.ts=a,r}return Object(te.A)(t,e),t}(te.Yb),qt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.keys;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:i},n}return Object(te.A)(t,e),t}(te.Wb),Kt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(te.A)(t,e),t}(te.Yb),Wt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i},n}return Object(te.A)(t,e),t}(te.Wb),Yt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(te.A)(t,e),t}(te.Yb),Qt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.metaCounter,s=t.upsert,o=void 0!==s&&s,l=t.mode,c=void 0===l?"set":l;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:i,upsert:o,mode:c},n}return Object(te.A)(t,e),t}(te.Wb),Xt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(te.A)(t,e),t}(te.Yb),Zt=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return r.data&&(a.created=r.data.created,a.updated=r.data.updated,a.deleted=r.data.deleted),a}return Object(te.A)(t,e),t}(te.w),$t=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.key;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metacounter/").concat(i),n.params={},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var Jt=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var en=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId,s=t.seconds,o=t.description;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:i,seconds:s,description:o},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var tn=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new Qe(t,r.data),a}return Object(te.A)(t,e),t}(te.w),nn=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(i)),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var rn=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new Qe(t,r.data),a}return Object(te.A)(t,e),t}(te.w),an=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId,s=t.seconds,o=t.description;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/ban"),n.params=Object(te.Vb)({user_id:i,seconds:s,description:o}),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var sn=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new Qe(t,r.data),r.data.member_count&&(a.memberCount=r.data.member_count),r.data.joined_member_count&&(a.joinedMemberCount=r.data.joined_member_count),a}return Object(te.A)(t,e),t}(te.w),on=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.userId;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(i)),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var ln=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new Qe(t,r.data),a}return Object(te.A)(t,e),t}(te.w),cn=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.freezing;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(Object(te.rb)(a),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:i},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var un=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.freeze=r.data.freeze,a}return Object(te.A)(t,e),t}(te.w),dn=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.description;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.Ab)(a),"/").concat(encodeURIComponent(r)),n.params={report_category:i,reporting_user_id:s,report_description:o},n}return Object(te.A)(t,e),t}(te.Wb),hn=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.offendingUserId,l=t.description;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(te.Bb,"/users/").concat(o),n.params={channel_url:r,channel_type:a===te.y.OPEN?"open_channels":"group_channels",report_category:i,reporting_user_id:s,report_description:l},n}return Object(te.A)(t,e),t}(te.Wb),fn=function(e){function t(t){var n=this,r=t.channelUrl,a=t.channelType,i=t.category,s=t.userId,o=t.offendingUserId,l=t.messageId,c=t.description;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(Object(te.Ab)(a),"/").concat(encodeURIComponent(r),"/messages/").concat(l),n.params={report_category:i,reporting_user_id:s,report_description:c,offending_user_id:o},n}return Object(te.A)(t,e),t}(te.Wb),pn=function(e){function t(t){var n=[];return t.mentionType===te.kb.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MESG",ackRequired:!0,payload:Object(te.Vb)(Object(te.lc)({channel_url:t.channelUrl,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:n,mentioned_message_template:t.mentionedMessageTemplate,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==te.pb.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage}))})||this}return Object(te.A)(t,e),t}(te.qb),mn=function(e){function t(t,n,r){var a,i,s,o,l=this;(l=e.call(this,t,"MESG",r)||this).message=new Ce(t,r);var c=te.v.of(t).sdkState;return l.isMentioned=Object(te.sb)(l.message.mentionType,null!==(s=null!==(a=l.message.mentionedUserIds)&&void 0!==a?a:null===(i=l.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})))&&void 0!==s?s:[],c.userId),l.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,l}return Object(te.A)(t,e),t}(te.w),bn=function(e){function t(t){var n=null;return t.mentionType===te.kb.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MEDI",ackRequired:!0,payload:Object(te.Vb)(Object(te.lc)({channel_url:t.channelUrl,msg_id:t.messageId,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:n,mentioned_message_template:t.mentionedMessageTemplate,apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,poll_id:t.pollId}))})||this}return Object(te.A)(t,e),t}(te.qb),_n=function(e){function t(t,n,r){var a,i,s,o,l,c=this;(c=e.call(this,t,"MEDI",r)||this).message=new Ce(t,r);var u=te.v.of(t).sdkState;return c.mentionCountChange=Object(te.Cb)({mentionType:null===(a=r.old_values)||void 0===a?void 0:a.mention_type,mentionedUserIds:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mentioned_user_ids)&&void 0!==s?s:[]},Object(te.lc)({mentionType:c.message.mentionType,mentionedUserIds:null!==(o=c.message.mentionedUserIds)&&void 0!==o?o:null===(l=c.message.mentionedUsers)||void 0===l?void 0:l.map((function(e){return e.userId}))}),u.userId),c}return Object(te.A)(t,e),t}(te.w),gn=function(e){function t(t){var n=null;return t.mentionType===te.kb.USERS&&(t.mentionedUserIds?n=t.mentionedUserIds:t.mentionedUsers&&(n=t.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FEDI",ackRequired:!0,payload:Object(te.Vb)(Object(te.lc)({channel_url:t.channelUrl,msg_id:t.messageId,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:n,apple_critical_alert_options:t.appleCriticalAlertOptions}))})||this}return Object(te.A)(t,e),t}(te.qb),vn=function(e){function t(t,n,r){var a,i,s,o,l,c=this;(c=e.call(this,t,"FEDI",r)||this).message=new Ae(t,r);var u=te.v.of(t).sdkState;return c.mentionCountChange=Object(te.Cb)({mentionType:null===(a=r.old_values)||void 0===a?void 0:a.mention_type,mentionedUserIds:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mentioned_user_ids)&&void 0!==s?s:[]},Object(te.lc)({mentionType:c.message.mentionType,mentionedUserIds:null!==(o=c.message.mentionedUserIds)&&void 0!==o?o:null===(l=c.message.mentionedUsers)||void 0===l?void 0:l.map((function(e){return e.userId}))}),u.userId),c}return Object(te.A)(t,e),t}(te.w),En=function(e){function t(t){var n=e.call(this)||this;return n.method=te.a.DELETE,n.path="".concat(Object(te.rb)(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var yn=function(e){function t(t,n,r){var a=e.call(this,t,"DELM",r)||this;return a.channelUrl=r.channel_url,a.channelType=r.channel_type,a.messageId=Number(r.msg_id),a}return Object(te.A)(t,e),t}(te.w),On=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=te.a.POST,s.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return Object(te.A)(t,e),t}(te.Wb),Cn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new oe(n),r}return Object(te.A)(t,e),t}(te.Yb),Nn=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.reactionKey,s=e.call(this)||this;return s.method=te.a.DELETE,s.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/reactions"),s.params={reaction:i},s}return Object(te.A)(t,e),t}(te.Wb),Tn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new oe(Object(te.Xb)({},n)),r}return Object(te.A)(t,e),t}(te.Yb),Sn=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=t.translationTargetLanguages,s=e.call(this)||this;return s.method=te.a.POST,s.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(a),"/translation"),s.params={target_langs:i},s}return Object(te.A)(t,e),t}(te.Wb),In=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Ce(t,n),r}return Object(te.A)(t,e),t}(te.Yb),An=function(e){function t(t){var n,r=this;r=e.call(this)||this;var a=[];t.mentionType===te.kb.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map((function(e){return e.userId}))));var i=t.channelType,s=t.channelUrl;return r.method=te.a.POST,r.path="".concat(Object(te.rb)(i),"/").concat(encodeURIComponent(s),"/scheduled_messages"),r.params=Object(te.Vb)(Object(te.lc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:te.Db.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return ce.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),r}return Object(te.A)(t,e),t}(te.Wb),wn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Ce(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Mn=function(e){function t(t){var n,r=this;r=e.call(this)||this;var a=[];t.mentionType===te.kb.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map((function(e){return e.userId}))));var i=t.channelType,s=t.channelUrl;return r.method=te.a.POST,r.path="".concat(Object(te.rb)(i),"/").concat(encodeURIComponent(s),"/scheduled_messages"),r.params=Object(te.lc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:te.Db.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:t.thumbnailSizes?t.thumbnailSizes.map((function(e){return ge.payloadify(e)})):[],custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return ce.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption}),r}return Object(te.A)(t,e),t}(te.Wb),jn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Ae(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Rn=function(e){function t(t){var n=t.pollId,r=t.title,a=t.data,i=t.allowUserSuggestion,s=t.allowMultipleVotes,o=t.closeAt,l=e.call(this)||this;return l.method=te.a.PUT,l.path="".concat(te.Fb,"/").concat(encodeURIComponent(n)),l.params={title:r,data:a,allow_user_suggestion:i,allow_multiple_votes:s,close_at:o},l}return Object(te.A)(t,e),t}(te.Wb),Un=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new te.ob(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Ln=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=te.a.DELETE,r.path="".concat(te.Fb,"/").concat(encodeURIComponent(n)),r}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var kn=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=te.a.PUT,r.path="".concat(te.Fb,"/").concat(encodeURIComponent(n),"/close"),r}return Object(te.A)(t,e),t}(te.Wb),Dn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new te.ob(t,n),r}return Object(te.A)(t,e),t}(te.Yb),xn=function(e){function t(t){var n=t.channelUrl,r=t.channelType,a=t.pollId,i=t.optionText,s=e.call(this)||this;return s.method=te.a.POST,s.path="".concat(te.Fb,"/").concat(encodeURIComponent(a),"/options"),s.params={channel_url:n,channel_type:r,text:i},s}return Object(te.A)(t,e),t}(te.Wb),Pn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new te.ob(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Fn=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,a=t.optionText,i=e.call(this)||this;return i.method=te.a.PUT,i.path="".concat(te.Fb,"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),i.params={text:a},i}return Object(te.A)(t,e),t}(te.Wb),Hn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new te.ob(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Gn=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,a=e.call(this)||this;return a.method=te.a.DELETE,a.path="".concat(te.Fb,"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var Bn=function(e){function t(t){var n=t.reqId,r=t.channelType,a=t.channelUrl,i=t.pollId,s=t.pollOptionIds;return e.call(this,{code:"VOTE",ackRequired:!0,payload:Object(te.Vb)({req_id:n,channel_type:r===te.y.OPEN?"open_channels":"group_channels",channel_url:a,poll_id:i,option_ids:s})})||this}return Object(te.A)(t,e),t}(te.qb),zn=function(e){function t(t,n,r){var a=e.call(this,t,"VOTE",r)||this;return a.event=new te.Gb(r),a.channelUrl=r.channel_url,a.channelType=r.channel_type,a}return Object(te.A)(t,e),t}(te.w),Vn="GroupChannel",qn="Message";var Kn,Wn=Object(te.Xb)(Object(te.Xb)({},$e),{fileInfoList:[]}),Yn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onFileUploaded=te.yb,t}return Object(te.A)(t,e),t.prototype._triggerOnFileUploaded=function(e,t,n,r){this._onFileUploaded(e,t,n,r)},t.prototype.onFileUploaded=function(e){return this._onFileUploaded=e,this},t.prototype.onPending=function(t){return e.prototype.onPending.call(this,t),this},t.prototype.onFailed=function(t){return e.prototype.onFailed.call(this,t),this},t.prototype.onSucceeded=function(t){return e.prototype.onSucceeded.call(this,t),this},t}(Ze);!function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"}(Kn||(Kn={}));var Qn,Xn=function(e){function t(t,n){var r,a,i,s,o,l,c=this;return(c=e.call(this,t)||this)._name="",c._createdAt=0,c.channelType=te.y.BASE,c.coverUrl="",c.customType="",c.data="",c.isFrozen=!1,c.isEphemeral=!1,c.creator=null,c._messageCollectionLastAccessedAt=0,c._url=n.channel_url,c._name=null!==(r=n.name)&&void 0!==r?r:"",c._createdAt=1e3*n.created_at,c.coverUrl=null!==(a=n.cover_url)&&void 0!==a?a:"",c.customType=null!==(i=n.custom_type)&&void 0!==i?i:"",c.data=null!==(s=n.data)&&void 0!==s?s:"",c.isFrozen=null!==(o=n.freeze)&&void 0!==o&&o,c.isEphemeral=null!==(l=n.is_ephemeral)&&void 0!==l&&l,c.creator=n.created_by?new te.u(c._iid,n.created_by):null,n.metadata&&Object.keys(n.metadata).length>0&&n.ts&&(c._cachedMetaData=new Map,Object.keys(n.metadata).forEach((function(e){c._cachedMetaData.set(e,{value:n.metadata[e],isRemoved:!1,updatedAt:n.ts})}))),c}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return Object(te.Xb)(Object(te.Xb)({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:t.creator?te.u.payloadify(t.creator):null,created_at:t.createdAt/1e3})))},t.prototype.isGroupChannel=function(){return this.channelType===te.y.GROUP},t.prototype.isOpenChannel=function(){return this.channelType===te.y.OPEN},t.prototype.isFeedChannel=function(){return this.channelType===te.y.FEED},Object.defineProperty(t.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData?(this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e):e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),t.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},t.prototype._update=function(e){var t=Object(te.Vb)(e);Object.assign(this,t)},t.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){n._cachedMetaData||(n._cachedMetaData=new Map);var a=n._cachedMetaData.get(r);(!a||a.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},t.prototype._updateCachedMetaData=function(e,t){var n=this;this._cachedMetaData?this._cachedMetaData.forEach((function(r,a){var i;r.updatedAt<=t&&n._cachedMetaData.set(a,{value:null!==(i=e[a])&&void 0!==i?i:r.value,isRemoved:!e[a],updatedAt:t})})):(this._cachedMetaData=new Map,Object.keys(e).forEach((function(r){n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})})))},t.prototype._removeFromCachedMetaData=function(e,t){var n=this;this._cachedMetaData&&e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!0,r.updatedAt=t)}))},t.prototype._runIfHandleableWithGroupChannel=function(e){this.isGroupChannel()?e(this):this.isFeedChannel()&&e(this.groupChannel)},t.prototype._generateRequestId=function(){return"rq-".concat(Object(te.dc)())},t.prototype.isIdentical=function(e){return e&&this.url===e.url},t.prototype.isEqual=function(e){return Object(te.J)(this,e)},t.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new yt(this._iid,this.url,this.channelType,e)},t.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new Tt(this._iid,this.url,this.channelType,e)},t.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new At(this._iid,this.url,this.channelType,e)},t.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new Ot(this._iid,this.url,this.channelType,e)},t.prototype.addOperators=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new Mt({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.removeOperators=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new jt({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.getMyMutedInfo=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,c,u;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Rt({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return a=d.sent(),i=a.as(Ut),s=i.isMuted,o=i.startAt,l=i.endAt,c=i.remainingDuration,u=i.description,[2,{isMuted:s,startAt:o,endAt:l,remainingDuration:c,description:u}]}}))}))},t.prototype.getMetaData=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new Lt({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=o.sent(),a=r.as(kt),i=a.metadata,s=a.ts,this._upsertCachedMetaData(i,s),[2,i]}}))}))},t.prototype.getAllMetaData=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new Lt({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(kt),a=r.metadata,i=r.ts,this._updateCachedMetaData(a,i),[2,a]}}))}))},t.prototype.createMetaData=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t=te.v.of(this._iid).requestQueue,n=new Dt({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(xt).metaData,this._upsertCachedMetaData(a,0),[2,a]}}))}))},t.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return n=te.v.of(this._iid).requestQueue,r=new Pt({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return a=l.sent(),i=a.as(Ft),s=i.metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}}))}))},t.prototype.deleteMetaData=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new Gt({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=i.sent(),a=r.as(Bt).ts,this._removeFromCachedMetaData([e],a),[2]}}))}))},t.prototype.deleteAllMetaData=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new zt({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=a.sent(),r=n.as(Vt).ts,this._removeFromCachedMetaData(Object(te.fc)([],Object(te.gc)(this._cachedMetaData.keys()),!1),r),[2]}}))}))},t.prototype.getMetaCounters=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new qt({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Kt).metaCounter]}}))}))},t.prototype.getAllMetaCounters=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new qt({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return[2,n.sent().as(Kt).metaCounter]}}))}))},t.prototype.createMetaCounters=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=te.v.of(this._iid).requestQueue,n=new Wt({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Yt).metaCounter]}}))}))},t.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return n=te.v.of(this._iid).requestQueue,r=new Qt({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return[2,a.sent().as(Xt).metaCounter]}}))}))},t.prototype.increaseMetaCounters=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=te.v.of(this._iid).requestQueue,n=new Qt({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return[2,r.sent().as(Xt).metaCounter]}}))}))},t.prototype.decreaseMetaCounters=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=te.v.of(this._iid).requestQueue,n=new Qt({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return[2,r.sent().as(Xt).metaCounter]}}))}))},t.prototype.deleteMetaCounter=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new $t({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.deleteAllMetaCounters=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new Jt({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.muteUser=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},t.prototype.muteUserWithUserId=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("string",e)&&Object(te.B)("number",t,!0)&&Object(te.B)("string",n,!0)).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new en({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},t.prototype.unmuteUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},t.prototype.unmuteUserWithUserId=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new nn({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.banUser=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},t.prototype.banUserWithUserId=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("string",e)&&Object(te.B)("number",t,!0)&&Object(te.B)("string",n,!0)).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new an({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},t.prototype.unbanUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},t.prototype.unbanUserWithUserId=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new on({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.freeze=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new cn({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},t.prototype.unfreeze=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new cn({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},t.prototype.getMessagesByMessageId=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},De),t),Object(te.jc)(Object(te.B)("number",e)&&xe(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessagesByTimestamp=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},De),t),Object(te.jc)(Object(te.B)("number",e)&&xe(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return void 0===t&&(t={}),Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},Pe),t),Object(te.jc)(Object(te.B)("number",e)&&Fe(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessageChangeLogsSinceToken=function(e,t){return void 0===t&&(t={}),Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},Pe),t),Object(te.jc)(Object(te.B)("string",e)&&Fe(n)).throw(te.hc.invalidParameters),[4,Ca.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype._createPendingSendableMessagePayload=function(e,t,n){var r,a=te.v.of(this._iid).sessionManager;return Object(te.Vb)(Object(te.lc)({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return ce.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?he.payloadify(e.appleCriticalAlertOptions):null,created_at:n,user:a.currentUser?fe.payloadify(a.currentUser):null,req_id:t,request_state:te.lb.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return te.u.payloadify(e)}))}))},t.prototype._createPendingUserMessage=function(e,t,n){var r,a,i={};if(e.translationTargetLanguages)try{for(var s=Object(te.ic)(e.translationTargetLanguages),o=s.next();!o.done;o=s.next())i[o.value]=""}catch(e){r={error:e}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}var l=Object(te.Vb)(Object(te.Xb)(Object(te.Xb)({},this._createPendingSendableMessagePayload(e,t,n)),{type:te.ib.USER,message:e.message,translations:i})),c=new Ce(this._iid,l);return c.messageParams=e,c},t.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},t.prototype._createPendingFileMessage=function(e,t,n){var r,a,i,s,o,l,c=Object(te.Vb)(Object(te.Xb)(Object(te.Xb)({},this._createPendingSendableMessagePayload(e,t,n)),{type:te.ib.FILE,url:e.fileUrl,file:{name:null!==(r=e.fileName)&&void 0!==r?r:null===(a=e.file)||void 0===a?void 0:a.name,size:null!==(i=e.fileSize)&&void 0!==i?i:null===(s=e.file)||void 0===s?void 0:s.size,type:null!==(o=e.mimeType)&&void 0!==o?o:null===(l=e.file)||void 0===l?void 0:l.type,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}})):[]})),u=new Ae(this._iid,c);return u.messageParams=e,u},t.prototype._createPendingMultipleFilesMessage=function(e,t,n){var r=Object(te.Vb)(Object(te.Xb)(Object(te.Xb)({},this._createPendingSendableMessagePayload(e,t,n)),{type:te.ib.FILE})),a=new Te(this._iid,r);return a.messageParams=e,a},t.prototype._validateFailedFileMessageHasFile=function(e,t){var n;return Boolean(e.url)||Object(te.Zb)(t)||Object(te.Zb)(null===(n=e.messageParams)||void 0===n?void 0:n.file)},t.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},t.prototype._markMessageAsFailed=function(e,t,n){void 0===n&&(n=!1),e.errorCode=t.code,t.code===te.tb.REQUEST_CANCELED||t.code===te.tb.FILE_UPLOAD_CANCEL_FAILED?e.sendingStatus=te.lb.CANCELED:n||(e.sendingStatus=te.lb.FAILED)},t.prototype.sendUserMessage=function(e){var t=Object(te.Xb)(Object(te.Xb)({},tt),e);return Object(te.jc)(it(t)).throw(te.hc.invalidParameters),this._sendUserMessage(t)},t.prototype._sendUserMessage=function(e,t,n){var r=this;void 0===t&&(t=Kn.SEND);var a=te.v.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=null!=n?n:this._generateRequestId(),l=Date.now(),c=new Ze;return Object(te.ub)(2).then((function(){var n=r._createPendingUserMessage(e,o,l);i.dispatch(new te.K({messages:[n],source:t===Kn.RESEND?te.x.LOCAL_MESSAGE_RESEND_STARTED:te.x.EVENT_MESSAGE_SENT_PENDING})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,c._trigger(n)]}))}))}));var a=new pn(Object(te.Xb)(Object(te.Xb)({},e),{channelUrl:r.url,channelType:r.channelType,reqId:o}));s.send(a).then((function(e){var t=e.as(mn).message;i.dispatch(new te.K({messages:[t],source:te.x.EVENT_MESSAGE_SENT_SUCCESS})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,c._trigger(t)]}))}))}))})).catch((function(t){if(Object(te.L)(t))throw t;Object(te.ub)(2).then((function(){var n=r._createPendingUserMessage(e,o,l),a=te.v.of(r._iid).cacheContext,s=a.localCacheEnabled&&a.localCacheConfig.enableAutoResend&&Object(te.M)(t.code);r._markMessageAsFailed(n,t,s),i.dispatch(new te.K({messages:[n],source:n.sendingStatus===te.lb.PENDING?te.x.REQUEST_RESEND_MESSAGE:te.x.EVENT_MESSAGE_SENT_FAILED})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,c._triggerFailed(t,n)]}))}))}))}))}))})),c},t.prototype._autoResendUserMessage=function(e){return Object(te.jc)(e instanceof Ce&&!!e.messageParams).throw(te.hc.invalidParameters),this._sendUserMessage(e.messageParams,Kn.SEND,e.reqId)},t.prototype.resendUserMessage=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){return Object(te.jc)(e instanceof Ce&&!e.scheduledInfo).throw(te.hc.invalidParameters),n=new te.vb,r=null!==(t=e.messageParams)&&void 0!==t?t:at(e),this._sendUserMessage(r,Kn.RESEND,e.reqId).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},t.prototype.updateUserMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},bt),t),Object(te.jc)(Object(te.B)("number",e)&&_t(n)).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new bn(Object(te.Xb)({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(a)];case 1:return[2,i.sent().as(_n).message]}}))}))},t.prototype.copyUserMessage=function(e,n){var r,a,i;return Object(te.Ib)(this,void 0,void 0,(function(){var s,o;return Object(te.Tb)(this,(function(l){return Object(te.jc)(e instanceof t&&n instanceof Ce&&n.sendingStatus===te.lb.SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(te.hc.invalidParameters),Object(te.jc)(!n.poll).throw(te.hc.notSupportedError),s=new te.vb,o=null!==(r=n.messageParams)&&void 0!==r?r:Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},n),{mentionType:n.mentionType,mentionedUserIds:null!==(a=n.mentionedUserIds)&&void 0!==a?a:null===(i=n.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(n.translations),pushNotificationDeliveryOption:te.pb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),e._sendUserMessage(o).onSucceeded((function(e){s.resolve(e)})).onFailed((function(e){return s.reject(e)})),[2,s.promise]}))}))},t.prototype.translateUserMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return Object(te.jc)(e instanceof Ce&&e.messageId>0&&Object(te.k)("string",t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new Sn({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return[2,a.sent().as(In).message]}}))}))},t.prototype._createScheduledUserMessage=function(e,t){var n=this,r=te.v.of(this._iid).requestQueue,a=Date.now(),i=this._generateRequestId();Object(te.ub)(2).then((function(){var r=n._createPendingScheduledUserMessage(e,i,a);Object(te.b)((function(){return Object(te.Ib)(n,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,t._trigger(r)]}))}))}))}));var s=new An(Object(te.Xb)({reqId:i,channelType:this.channelType,channelUrl:this.url},e));r.send(s).then((function(e){var r=e.as(wn).message;Object(te.b)((function(){return Object(te.Ib)(n,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,t._trigger(r)]}))}))}))})).catch((function(r){if(Object(te.L)(r))throw r;Object(te.ub)(2).then((function(){var s=n._createPendingScheduledUserMessage(e,i,a);n._markMessageAsFailed(s,r),Object(te.b)((function(){return Object(te.Ib)(n,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,t._trigger(s)]}))}))}))}))}))},t.prototype.sendFileMessage=function(e){var t=Object(te.Xb)(Object(te.Xb)({},ct),e);return Object(te.jc)(ft(t)).throw(te.hc.invalidParameters),this._sendFileMessage(t)},t.prototype.sendMultipleFilesMessage=function(e){var t,n=Object(te.Xb)(Object(te.Xb)({},Wn),e),r=te.v.of(this._iid);Object(te.jc)(function(e,t){return void 0===t&&(t=te.Hb),Je(e)&&Array.isArray(e.fileInfoList)&&e.fileInfoList.length>=2&&e.fileInfoList.length<=t&&e.fileInfoList.every((function(e){return function(e){return(Object(te.Zb)(e.file)||Object(te.B)("string",e.fileUrl))&&Object(te.B)("string",e.fileName,!0)&&Object(te.B)("string",e.mimeType,!0)&&Object(te.B)("number",e.fileSize,!0)&&(void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return e.maxWidth>0&&e.maxHeight>0})))}(e)}))}(n,null===(t=r.appInfo)||void 0===t?void 0:t.multipleFilesMessageFileCountLimit)).throw(te.hc.invalidParameters);var a=!!e.fileInfoList.find((function(e){var t=r.appInfo.uploadSizeLimit;return e.file instanceof Blob&&e.file.size>t||e.fileSize>t}));return Object(te.jc)(!a).throw(te.hc.fileSizeLimitExceededError),this._sendMultipleFilesMessage(n)},t.prototype._sendFileMessage=function(e,t,n){var r=this;void 0===t&&(t=Kn.SEND);var a=te.v.of(this._iid).dispatcher,i=Ca.of(this._iid).fileMessageQueue,s=null!=n?n:this._generateRequestId(),o=Date.now(),l=new Ze;return Object(te.ub)(2).then((function(){var n=r._createPendingFileMessage(e,s,o);a.dispatch(new te.K({messages:[n],source:t===Kn.RESEND?te.x.LOCAL_MESSAGE_RESEND_STARTED:te.x.EVENT_MESSAGE_SENT_PENDING})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,l._trigger(n)]}))}))})),i.request(r,s,e).then((function(e){a.dispatch(new te.K({messages:[e],source:te.x.EVENT_MESSAGE_SENT_SUCCESS})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,l._trigger(e)]}))}))}))})).catch((function(t){if(Object(te.L)(t))throw t;Object(te.ub)(2).then((function(){var n=r._createPendingFileMessage(e,s,o),i=te.v.of(r._iid).cacheContext,c=i.localCacheEnabled&&i.localCacheConfig.enableAutoResend&&Object(te.M)(t.code);r._markMessageAsFailed(n,t,c),a.dispatch(new te.K({messages:[n],source:n.sendingStatus===te.lb.PENDING?te.x.REQUEST_RESEND_MESSAGE:t.code===te.tb.FILE_UPLOAD_CANCEL_FAILED?te.x.LOCAL_MESSAGE_CANCELED:te.x.EVENT_MESSAGE_SENT_FAILED})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,l._triggerFailed(t,n)]}))}))}))}))}))})),l},t.prototype._autoResendFileMessage=function(e){Object(te.jc)(e instanceof Ae&&!!e.messageParams).throw(te.hc.invalidParameters);var t=te.v.of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,Kn.SEND,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},t.prototype._sendMultipleFilesMessage=function(e,t,n){var r=this,a=te.v.of(this._iid).dispatcher,i=Ca.of(this._iid).fileMessageQueue,s=null!=n?n:this._generateRequestId(),o=Date.now(),l=new Yn;return Object(te.ub)(2).then((function(){var n=r._createPendingMultipleFilesMessage(e,s,o);a.dispatch(new te.K({messages:[n],source:t===Kn.RESEND?te.x.LOCAL_MESSAGE_RESEND_STARTED:te.x.EVENT_MESSAGE_SENT_PENDING})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,l._trigger(n)]}))}))})),i.request(r,s,e,{requestHandler:l,isCopy:t===Kn.COPY}).then((function(e){a.dispatch(new te.K({messages:[e],source:te.x.EVENT_MESSAGE_SENT_SUCCESS})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,l._trigger(e)]}))}))}))})).catch((function(t){if(Object(te.L)(t))throw t;Object(te.ub)(2).then((function(){var n=r._createPendingMultipleFilesMessage(e,s,o);r._markMessageAsFailed(n,t),a.dispatch(new te.K({messages:[n],source:te.x.EVENT_MESSAGE_SENT_FAILED})),Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,l._triggerFailed(t,n)]}))}))}))}))}))})),l},t.prototype._createScheduledFileMessage=function(e,t,n,r){var a=this,i=te.v.of(this._iid).requestQueue,s=new Mn(Object(te.Xb)(Object(te.Xb)({reqId:n,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));i.send(s).then((function(e){var n=e.as(jn).message;Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,t._trigger(n)]}))}))}))})).catch((function(i){if(Object(te.L)(i))throw i;Object(te.ub)(2).then((function(){var s=a._createPendingScheduledFileMessage(e,n,r);a._markMessageAsFailed(s,i),Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,t._triggerFailed(i,s)]}))}))}))}))}))},t.prototype.sendFileMessages=function(e){var t,n;Object(te.jc)(e.every((function(e){return ft(Object(te.Xb)(Object(te.Xb)({},ct),e))}))).throw(te.hc.invalidParameters);var r=new Ze;try{for(var a=Object(te.ic)(e),i=a.next();!i.done;i=a.next()){var s=i.value;this.sendFileMessage(s).onPending((function(e){return r._trigger(e)})).onFailed((function(e,t){return r._triggerFailed(e,t)})).onSucceeded((function(e){return r._trigger(e)}))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},t.prototype.resendFileMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){return n=this._validateFailedFileMessageHasFile(e,t),Object(te.jc)(e instanceof Ae&&n&&!e.scheduledInfo).throw(te.hc.invalidParameters),r=new te.vb,a=ht(e,t),this._sendFileMessage(a,Kn.RESEND,e.reqId).onFailed((function(e){return r.reject(e)})).onSucceeded((function(e){return r.resolve(e)})),[2,r.promise]}))}))},t.prototype.resendMessage=function(e,t){var n,r;if(Object(te.jc)(e instanceof _e&&!e.scheduledInfo&&e.isResendable).throw(te.hc.invalidParameters),e.isUserMessage()){var a=null!==(n=e.messageParams)&&void 0!==n?n:at(e);return this._sendUserMessage(a,Kn.RESEND,e.reqId)}if(e.isFileMessage()){var i=this._validateFailedFileMessageHasFile(e,t);return Object(te.jc)(i).throw(te.hc.invalidParameters),a=null!==(r=e.messageParams)&&void 0!==r?r:ht(e,t),this._sendFileMessage(a,Kn.RESEND,e.reqId)}if(e.isMultipleFilesMessage())throw te.hc.channelTypeNotSupportedError},t.prototype.updateFileMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},gt),t),Object(te.jc)(Object(te.B)("number",e)&&function(e){return mt(e)}(n)).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new gn(Object(te.Xb)({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(a)];case 1:return[2,i.sent().as(vn).message]}}))}))},t.prototype.cancelUploadingFileMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),Ca.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},t.prototype.copyFileMessage=function(e,n){var r,a,i;return Object(te.Ib)(this,void 0,void 0,(function(){var s,o;return Object(te.Tb)(this,(function(l){return Object(te.jc)(e instanceof t&&n instanceof Ae&&n.sendingStatus===te.lb.SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(te.hc.invalidParameters),s=new te.vb,o=Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},n),{fileUrl:n.url,fileName:n.name,fileSize:n.size,mimeType:n.type,mentionType:n.mentionType,mentionedUserIds:null!==(r=n.mentionedUserIds)&&void 0!==r?r:null===(a=n.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})),pushNotificationDeliveryOption:te.pb.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(i=n.thumbnails)||void 0===i?void 0:i.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:n.requireAuth,isPinnedMessage:!1})),e._sendFileMessage(o).onSucceeded((function(e){return s.resolve(e)})).onFailed((function(e){return s.reject(e)})),[2,s.promise]}))}))},t.prototype.copyMessage=function(e,n){Object(te.jc)(e instanceof t&&n instanceof _e&&n.sendingStatus===te.lb.SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(te.hc.invalidParameters);var r=n,a=e;if(r.isUserMessage()){Object(te.jc)(!r.poll).throw(te.hc.notSupportedError);var i=nt(r);return a._sendUserMessage(i)}if(r.isFileMessage())return i=ut(r),a._sendFileMessage(i);if(n.isMultipleFilesMessage())throw te.hc.channelTypeNotSupportedError},t.prototype.deleteMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(e instanceof be).throw(te.hc.invalidParameters),e.messageId>0?(t=te.v.of(this._iid).requestQueue,n=new En({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.addReaction=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return Object(te.jc)(e instanceof be&&e.messageId>0&&Object(te.B)("string",t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new On({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,a.sent().as(Cn).reactionEvent]}}))}))},t.prototype.deleteReaction=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return Object(te.jc)(e instanceof be&&e.messageId>0&&Object(te.B)("string",t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new Nn({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,a.sent().as(Tn).reactionEvent]}}))}))},t.prototype._updateUserMessageMetaArray=function(e,t,n,r){return Object(te.Ib)(this,void 0,void 0,(function(){var a,i,s,o,l,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return a=te.v.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=new bn({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,s.send(o)];case 1:return l=u.sent(),c=l.as(_n).message,i.dispatch(new te.K({messages:[c],source:te.x.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},t.prototype._updateFileMessageMetaArray=function(e,t,n,r){return Object(te.Ib)(this,void 0,void 0,(function(){var a,i,s,o,l,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return a=te.v.of(this._iid),i=a.dispatcher,s=a.requestQueue,o=new gn({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,s.send(o)];case 1:return l=u.sent(),c=l.as(vn).message,i.dispatch(new te.K({messages:[c],source:te.x.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},t.prototype.createMessageMetaArrayKeys=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){return Object(te.jc)(e instanceof be&&e.messageId>0&&Object(te.k)("string",t)).throw(te.hc.invalidParameters),n=t.map((function(e){return new ce({key:e})})),e instanceof Ae?[2,this._updateFileMessageMetaArray(e.messageId,n,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"add",!0)]}))}))},t.prototype.deleteMessageMetaArrayKeys=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){return Object(te.jc)(e instanceof be&&e.messageId>0&&Object(te.k)("string",t)).throw(te.hc.invalidParameters),n=t.map((function(e){return new ce({key:e})})),e instanceof Ae?[2,this._updateFileMessageMetaArray(e.messageId,n,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},t.prototype.addMessageMetaArrayValues=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){return Object(te.jc)(e instanceof be&&e.messageId>0&&t.every((function(e){return e instanceof ce}))).throw(te.hc.invalidParameters),e instanceof Ae?[2,this._updateFileMessageMetaArray(e.messageId,t,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"add",!0)]}))}))},t.prototype.removeMessageMetaArrayValues=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){return Object(te.jc)(e instanceof be&&e.messageId>0&&t.every((function(e){return e instanceof ce}))).throw(te.hc.invalidParameters),e instanceof Ae?[2,this._updateFileMessageMetaArray(e.messageId,t,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},t.prototype.report=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return Object(te.jc)(Object(te.q)(dt,e)&&Object(te.B)("string",t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid),r=n.sdkState,a=n.requestQueue,i=new dn({channelUrl:this.url,channelType:this.channelType,userId:r.userId,category:e,description:t}),[4,a.send(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.reportUser=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(e instanceof te.u&&Object(te.q)(dt,t)&&Object(te.B)("string",n)).throw(te.hc.invalidParameters),r=te.v.of(this._iid),a=r.sdkState,i=r.requestQueue,s=new hn({channelUrl:this.url,channelType:this.channelType,userId:a.userId,offendingUserId:e.userId,category:t,description:n}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},t.prototype.reportMessage=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(e instanceof _e&&Object(te.q)(dt,t)&&Object(te.B)("string",n)).throw(te.hc.invalidParameters),r=te.v.of(this._iid),a=r.sdkState,i=r.requestQueue,s=new fn({channelUrl:this.url,channelType:this.channelType,userId:a.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:t,description:n}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},t.prototype.updatePoll=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return Object(te.jc)(Object(te.B)("number",e)&&function(e){return Object(te.B)("string",e.title,!0)&&Object(te.Eb)(e.data)&&Object(te.B)("boolean",e.allowUserSuggestion,!0)&&Object(te.B)("boolean",e.allowMultipleVotes,!0)&&Object(te.B)("number",e.closeAt,!0)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new Rn(Object(te.Xb)({pollId:e},t)),[4,n.send(r)];case 1:return[2,a.sent().as(Un).poll]}}))}))},t.prototype.deletePoll=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return t=Object(te.B)("number",e),Object(te.jc)(t).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new Ln({pollId:e}),[4,n.send(r)];case 1:return a.sent(),[2]}}))}))},t.prototype.closePoll=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return t=Object(te.B)("number",e),Object(te.jc)(t).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new kn({pollId:e}),[4,n.send(r)];case 1:return[2,a.sent().as(Dn).poll]}}))}))},t.prototype.addPollOption=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return n=Object(te.B)("number",e)&&Object(te.B)("string",t)&&""!==t.trim(),Object(te.jc)(n).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new xn({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:t}),[4,r.send(a)];case 1:return[2,i.sent().as(Pn).poll]}}))}))},t.prototype.updatePollOption=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return r=Object(te.B)("number",e)&&Object(te.B)("number",t)&&Object(te.B)("string",n)&&""!==n.trim(),Object(te.jc)(r).throw(te.hc.invalidParameters),a=te.v.of(this._iid).requestQueue,i=new Fn({pollId:e,pollOptionId:t,optionText:n}),[4,a.send(i)];case 1:return[2,s.sent().as(Hn).poll]}}))}))},t.prototype.deletePollOption=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return n=Object(te.B)("number",e)&&Object(te.B)("number",t),Object(te.jc)(n).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new Gn({pollId:e,pollOptionId:t}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},t.prototype.votePoll=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return n=Object(te.B)("number",e)&&Object(te.k)("number",t),Object(te.jc)(n).throw(te.hc.invalidParameters),r=te.v.of(this._iid),a=r.requestQueue,i=r.dispatcher,s=new Bn({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:t}),[4,a.send(s)];case 1:return o=c.sent(),l=o.as(zn).event,i.dispatch(new te.N({event:l,source:te.x.EVENT_POLL_VOTED})),[2,l]}}))}))},t.prototype.getPollChangeLogsSinceTimestamp=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return Object(te.jc)(Object(te.B)("number",e)).throw(te.hc.invalidParameters),[4,te.O.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getPollChangeLogsSinceToken=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return Object(te.jc)(Object(te.B)("string",e,!0)),[4,te.O.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.createPollListQuery=function(e){return void 0===e&&(e=10),new te.kc(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},t.prototype.createPollVoterListQuery=function(e,t,n){return void 0===n&&(n=20),new te.nc(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:t,limit:n})},t}(te.I),Zn=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(te.A)(t,e),t}((function(){this.onConnected=te.yb,this.onReconnectStarted=te.yb,this.onReconnectSucceeded=te.yb,this.onReconnectFailed=te.yb,this.onDisconnected=te.yb})),$n=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(te.A)(t,e),t}((function(){this.onSessionExpired=te.yb,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=te.yb,this.onSessionRefreshed=te.yb,this.onSessionClosed=te.yb})),Jn=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(te.A)(t,e),t}((function(){this.onFriendsDiscovered=te.yb,this.onTotalUnreadMessageCountChanged=te.yb,this.onTotalUnreadMessageCountUpdated=te.yb})),er=function(e){function t(t){var n=t.limit,r=t.token,a=t.userIdsFilter,i=t.metaDataKeyFilter,s=t.metaDataValuesFilter,o=t.nicknameStartsWithFilter,l=e.call(this)||this;return l.method=te.a.GET,l.path=te.Ub,l.params=Object(te.Vb)({limit:n,token:r,user_ids:a,metadatakey:i,metadatavalues_in:s,nickname_startswith:o}),l}return Object(te.A)(t,e),t}(te.Wb),tr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new te.u(t,e)})),r.next=n.next,r}return Object(te.A)(t,e),t}(te.Yb),nr=function(e){function t(t,n){var r,a,i,s=this;return(s=e.call(this,t,n)||this).userIdsFilter=null,s.metaDataKeyFilter=null,s.metaDataValuesFilter=null,s.nicknameStartsWithFilter=null,s.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,s.metaDataKeyFilter=null!==(a=n.metaDataKeyFilter)&&void 0!==a?a:null,s.metaDataValuesFilter=null!==(i=n.metaDataValuesFilter)&&void 0!==i?i:null,s.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,s}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.k)("string",this.userIdsFilter,!0)&&Object(te.B)("string",this.metaDataKeyFilter,!0)&&Object(te.k)("string",this.metaDataValuesFilter,!0)&&Object(te.B)("string",this.metaDataKeyFilter,!0)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new er(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(tr),a=r.users,i=r.next,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),rr=function(e){function t(t){var n=t.userId,r=t.limit,a=t.token,i=t.userIdsFilter,s=e.call(this)||this;return s.method=te.a.GET,s.path="".concat(te.Ub,"/").concat(n,"/block"),s.params=Object(te.Vb)({limit:r,token:a,user_ids:i}),s}return Object(te.A)(t,e),t}(te.Wb),ar=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new te.u(t,e)})),r.next=n.next,r}return Object(te.A)(t,e),t}(te.Yb),ir=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this).userIdsFilter=null,a.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,a}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.k)("string",this.userIdsFilter,!0)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new rr(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{userId:t.userId,token:this._token}))),[4,n.send(r)]):[3,2]:[3,5];case 1:return a=l.sent(),i=a.as(ar),s=i.users,o=i.next,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),sr=function(e){function t(t){var n=t.userId,r=t.limit,a=t.token,i=e.call(this)||this;return i.method=te.a.GET,i.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/friends"),i.params={limit:r,token:a},i}return Object(te.A)(t,e),t}(te.Wb),or=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.hasMore=n.has_more,r.users=n.users.map((function(e){return new te.u(t,e)})),r.next=n.next,r}return Object(te.A)(t,e),t}(te.Yb),lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new sr(Object(te.Xb)(Object(te.Xb)({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return a=c.sent(),i=a.as(or),s=i.users,o=i.hasMore,l=i.next,this._token=l,this._hasNext=o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),cr={},ur=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,a=e.cacheLimit,i=void 0===a?256:a,s=e.blockHashBase,o=void 0===s?2:s,l=e.blockHashMultiplier,c=void 0===l?10:l,u=e.blockHashConstant,d=void 0===u?11:u,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,m=void 0!==p&&p;return cr[t]||(this.itemSizeLimit=r,this.cacheLimit=i,this.blockHashBase=o,this.blockHashMultiplier=c,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=m,cr[t]=this),cr[t]}return e.get=function(e){return cr[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Qn||(Qn={}));var dr,hr=function(e){function t(n){var r=n.code,a=void 0===r?Qn.UNKNOWN_ERROR:r,i=n.message,s=void 0===i?"Unknown error occurred.":i,o=e.call(this,s)||this;return o.code=a,Object.setPrototypeOf(o,t.prototype),o}return Object(te.A)(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:Qn.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:Qn.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:Qn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:Qn.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotInitialized",{get:function(){return new t({code:Qn.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:Qn.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:Qn.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:Qn.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeEncryptionInvalid",{get:function(){return new t({code:Qn.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:Qn.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:Qn.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:Qn.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:Qn.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:Qn.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:Qn.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:Qn.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:Qn.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:Qn.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:Qn.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:Qn.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:Qn.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:Qn.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:Qn.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:Qn.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:Qn.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(dr||(dr={}));var fr,pr=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw hr.circularReferenceFound;t.set(e,!0);var n=void 0;if(Array.isArray(e))n=e.map((function(e){return pr(e,t)}));else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=pr(e[r],t);return t.delete(e),n}return e},mr=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw hr.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},br=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},_r=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},gr=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e)if(["/and","&&"].includes(n)){if(e[n].some((function(e){return!gr(e,t)})))return!1}else if(["/or","||"].includes(n)){if(e[n].every((function(e){return!gr(e,t)})))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else{var r=n;if("object"==typeof e[r]){var a=e[r];for(var i in a)switch(i){case"/eq":case"=":if((s=t[r])!==(o=a[i]))return!1;break;case"/neq":case"!=":if((s=t[r])===(o=a[i]))return!1;break;case"/gt":case">":var s=t[r],o=a[i];if(!(mr(s,o)>0))return!1;break;case"/gte":case">=":if(s=t[r],o=a[i],!(mr(s,o)>=0))return!1;break;case"/lt":case"<":if(s=t[r],o=a[i],!(mr(s,o)<0))return!1;break;case"/lte":case"<=":if(s=t[r],o=a[i],!(mr(s,o)<=0))return!1;break;case"/in":if(s=t[r],!(o=a[i]).includes(s))return!1;break;case"/nin":if(s=t[r],(o=a[i]).includes(s))return!1;break;case"/contain":if(s=t[r],o=a[i],!s.includes(o))return!1;break;case"/regex":if(s=t[r],!(o=a[i]).test(s))return!1;break;case"/where":if(s=t[r],!(0,a[i])(s))return!1}}else if("function"==typeof e[r]){if(!e[r](t[r]))return!1}else if(e[r]!==t[r])return!1}return!0}return e(t)},vr=function(){},Er=function(){return Promise.resolve()},yr=function(e){return e},Or=function(e,t){t()};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(fr||(fr={}));var Cr,Nr,Tr,Sr=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,a=void 0===r?null:r,i=e.iterator,s=e.map,o=void 0===s?yr:s,l=e.backward,c=void 0===l?Er:l,u=e.forward,d=void 0===u?Er:u,h=e.complete,f=void 0===h?vr:h;this._prevValue=n,this._nextValue=a,this._error=null,this._map=o,this._backward=c,this._forward=d,this._iterator=i,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),Ir=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.blockManager,s=e.indexer;this.condition=n,this.backward=a,this._blockManager=i,this._indexer=s}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var a in this._indexer.fields){var i=this._indexer.fields[a],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),this.condition[i])if("object"==typeof this.condition[i]){var o=s>0?n:t;for(var l in this.condition[i])if(o.includes(l))for(var c=r;c>=0;c--)if(s*mr(this._indexer.origin[c].columnValues[a],this.condition[i][l])<=0){r=c;break}}else for(c=r;c>=0;c--)if(s*mr(this._indexer.origin[c].columnValues[a],this.condition[i])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var u=0;if("function"!=typeof this.condition){var d=function(r){var a=h._indexer.fields[r],i=1;if("-"===a[0]&&(a=a.slice(1),i=-1),h.condition[a])if("object"==typeof h.condition[a])Object.keys(h.condition[a]).forEach((function(s){if((i>0?t:n).includes(s))for(var o=u;o<e._indexer.origin.length;o++)if(i*mr(e._indexer.origin[o].columnValues[r],e.condition[a][s])>=0){u=o;break}}));else for(var s=u;s<h._indexer.origin.length;s++)if(i*mr(h._indexer.origin[s].columnValues[r],h.condition[a])>=0){u=s;break}},h=this;for(a=0;a<this._indexer.fields.length;a++)d(a)}return Math.max(u-1,0)},e.prototype.each=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l=this;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[++n]){if(!l._indexer.origin[++t])return!1;n=0}return!0}return!1},a=function(){if(l._indexer.origin[t]){if(!l._indexer.origin[t].keys[--n]){if(!l._indexer.origin[--t])return!1;n=l._indexer.origin[t].keys.length-1}return!0}return!1},i=null,!this._indexer.origin[t])return[3,4];s=this.backward?a:r,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if((o=c.sent())&&gr(this.condition,o))return i=o,[3,4];c.label=3;case 3:if(s())return[3,1];c.label=4;case 4:return[4,new Promise((function(s){var o=new Sr({initialNextValue:pr(i),iterator:e,forward:function(){return Object(te.Ib)(l,void 0,void 0,(function(){var e,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:e=this.backward?a:r,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(i=s.sent())&&gr(this.condition,i)?[2,pr(i)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return Object(te.Ib)(l,void 0,void 0,(function(){var e,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:e=this.backward?r:a,s.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(i=s.sent())&&gr(this.condition,i)?[2,pr(i)]:[3,1];case 3:return[2,null]}}))}))},complete:s});e(o)}))];case 5:return[2,c.sent()]}}))}))},e}(),Ar=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,a=void 0!==r&&r,i=e.mutex,s=e.blockManager,o=e.indexer;this._mutex=i,this._iterator=new Ir({condition:n,backward:a,blockManager:s,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i=this;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw hr.collectionQueryNotValid;s.label=1;case 1:return s.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return s.sent(),[4,this._iterator.each((function(e){return Object(te.Ib)(i,void 0,void 0,(function(){return Object(te.Tb)(this,(function(a){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return s.sent(),this._mutex.unlock(),[2,r];case 4:throw a=s.sent(),this._mutex.unlock(),a;case 5:return[2]}}))}))},e.prototype.count=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n=this;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return Object(te.Ib)(n,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),wr=function(e){return"".concat("nest","@").concat(e)},Mr=function(e,t){return"".concat(wr(e),"/").concat(t)},jr=function(e,t){return"".concat(Mr(e,t),".metadata")},Rr=function(e,t){return"".concat(Mr(e,t),"/block.")},Ur=function(e,t){return"".concat(Mr(e,t),"/blob.")},Lr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this.store=r}return e.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return[4,this.store.get(e)];case 1:return(t=u.sent())?(n=t.data,r=t.type,"undefined"==typeof fetch?[3,4]:[4,fetch(n)]):[3,5];case 2:return[4,u.sent().blob()];case 3:return[2,u.sent()];case 4:for(a=[],i=atob(n.split(",")[1]),s=0;s<i.length;s+=512){for(o=i.slice(s,s+512),l=new Array(o.length),c=0;c<o.length;c++)l[c]=o.charCodeAt(c);a.push(new Uint8Array(l))}return[2,new Blob(a,{type:r})];case 5:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s=this;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(n){var r=function(e,t,n,r){return void 0===r&&(r=0),"".concat(Ur(e,t)).concat(n,".").concat(r)}(s.dbname,s.collectionName,t),a=new FileReader;a.onload=function(){n({blobId:r,data:a.result,type:e.type})},a.readAsDataURL(e)}))];case 1:return n=o.sent(),r=n.blobId,a=n.data,i=n.type,[4,this.store.set({key:r,value:{data:a,type:i}})];case 2:return o.sent(),[2,r]}}))}))},e.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n=this;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return e=Ur(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=r.sent(),[4,Promise.all(t.filter((function(t){return t.startsWith(e)})).map((function(e){return Object(te.Ib)(n,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return[2,t.sent()]}}))}))})))];case 2:return r.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(Cr||(Cr={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(Nr||(Nr={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(Tr||(Tr={}));var kr,Dr,xr=[Nr.PENDING,Nr.VOLATILE],Pr={},Fr=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return Pr[t]||(this.dbname=t,this._items=[],this._limit=r,Pr[t]=this),Pr[t]}return e.get=function(e){return Pr[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=Tr.DEFAULT),Object(te.Ib)(this,void 0,void 0,(function(){var r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(a=i.sent())&&(r={key:t,value:a,state:n===Tr.PERSISTENT?Nr.PERSISTENT:Nr.VOLATILE},this.put(r)),[3,3];case 2:n===Tr.PERSISTENT&&(r.state=Nr.PERSISTENT),i.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=Tr.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===Tr.PERSISTENT&&(r.state=Nr.PERSISTENT),t!==Tr.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){var t,n;if(this._limit>0){var r=this._items.map((function(e){return e.key})).indexOf(e.key);if(r>-1)xr.includes(this._items[r].state)&&xr.includes(e.state)?(this._items.splice(r,1),this._items.push(e)):(this._items[r].state=e.state,this._items[r].value=e.value);else{this._items.push(e);var a=this._items.filter((function(e){return e.state===Nr.VOLATILE})).length-this._limit;if(a>0){var i=[];try{for(var s=Object(te.ic)(this._items),o=s.next();!o.done;o=s.next()){var l=o.value;l.state===Nr.VOLATILE&&a>0?a--:i.push(l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}this._items=i}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==Nr.VOLATILE}))},e}(),Hr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(Mr(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(Mr(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,Object(te.fc)([],Object(te.gc)(e),!1)),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var a=e[r],i=[],s=a.requests.length-1;s>=0;s--){var o=a.requests[s],l=o.data;n[l.key]||(i.unshift(o),n[l.key]=!0)}i.length>0&&(a.requests=i,t.unshift(a))}return t},e.prototype._applyRecord=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c,u;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:n=Fr.get(this.dbname),r=t.generation,a=t.requests,i=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this._store.setMany(a.map((function(e){return Object(te.Xb)(Object(te.Xb)({},e.data),{generation:r})})))];case 2:for(s=d.sent(),o=0;o<a.length;o++)s[o]instanceof Error&&(i||(i=s[o]),l=a[o].data,n.put(Object(te.Xb)(Object(te.Xb)({},l),{state:Nr.PERSISTENT})));return[3,4];case 3:return c=d.sent(),i=c,[3,4];case 4:return i?[3,6]:(u=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:u})]);case 5:return d.sent(),this._onWrite.forEach((function(e){e(a.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){i&&e(i)})),d.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=l.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=l.sent(),l.label=3;case 3:l.trys.push([3,8,9,10]),n=Object(te.ic)(t),r=n.next(),l.label=4;case 4:return r.done?[3,7]:(a=r.value,[4,this._applyRecord(t,a)]);case 5:l.sent(),l.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return i=l.sent(),s={error:i},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case Cr.COMMIT:this._onCommit.set(t,n);break;case Cr.WRITE:this._onWrite.set(t,n);break;case Cr.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){this._requests.push({data:e,options:t}),Fr.get(this.dbname).put(Object(te.Xb)({state:Nr.PENDING},e))},e.prototype.requestMultipleWrite=function(e,t){var n,r,a=Fr.get(this.dbname);try{for(var i=Object(te.ic)(e),s=i.next();!s.done;s=i.next()){var o=s.value;this._requests.push({data:o,options:t}),a.put(Object(te.Xb)({state:Nr.PENDING},o))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return Fr.get(this.dbname).clearByCondition((function(e){return e.state===Nr.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,c,u,d,h=this;return Object(te.Tb)(this,(function(f){switch(f.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},o=e.length-1;o>=0;o--)r=e[o],c=r.data,n[c.key]||(n[c.key]=!0,t.unshift(r));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return i=f.sent(),[4,this._store.set({key:this.recordsetKey,value:i})];case 2:return f.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(f.sent(),s=Fr.get(this.dbname),o=0;o<t.length;o++)l=t[o],c=l.data,u=l.options,s.put(Object(te.Xb)(Object(te.Xb)({},c),{state:u&&u.persistent?Nr.PERSISTENT:Nr.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),d=ur.get(this.dbname),setTimeout((function(){try{h._applyRecord(i,a)}catch(e){h._onError.forEach((function(t){return t(e)}))}}),d.transactionApplyDelay),f.label=4;case 4:return[2]}}))}))},e}(),Gr=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,a=void 0===r?[]:r,i=e.limit;this.blockId=t,this.keyName=n,this.limit=i,this._items=Object(te.fc)([],Object(te.gc)(a),!1)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this,n=this._items.find((function(n){var r=n[t.keyName];return e===r}));return null!=n?n:null},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),Br=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,a=e.hashFunction,i=void 0===a?br:a,s=e.transaction,o=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=i,this.metadata=r,this._transaction=s,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,a=t,i="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||br)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(Rr(n,r)).concat(a,".").concat(i);var n,r,a,i},e.prototype._findBlock=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:t=Fr.get(this.dbname),n=this.metadata.blockLevel,s.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((a=s.sent())&&(null==(i=Gr.createFromCacheItem(a))?void 0:i.getItemByKey(e)))return[2,i];s.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return n=ur.get(this.dbname),r=this.createBlockId(e),a=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,Fr.get(this.dbname).find(this._store,r)];case 1:return i=o.sent(),(null==(s=i?Gr.createFromCacheItem(i):new Gr({blockId:r,keyName:this.keyName,items:[],limit:a}))?void 0:s.add(t))?(this._transaction.requestWrite({key:s.blockId,value:s.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return e=Rr(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=r.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:return r.sent(),[4,this._transaction.clear()];case 3:return r.sent(),Fr.get(this.dbname).clearByCondition((function(t){return t.key.startsWith(e)})),[2]}}))}))},e}(),zr={},Vr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,a=e.fields,i=e.transaction,s=e.store,o=this;this._origin=[],this._table=[];var l=function(e,t,n){return"".concat(Mr(e,t),"/index.").concat(n)}(t,n,a.join(">"));return zr[l]||(this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=a,this.indexerKey=l,this._transaction=i,this._store=s,this._transaction.on(Cr.COMMIT,this.indexerKey,(function(){return o.commit()})),this._transaction.on(Cr.ERROR,this.indexerKey,(function(){return o.abort()}))),zr[l]}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.clearIndexerMap=function(){for(var e in zr)delete zr[e]},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(te.gc)(this.indexOf(n),2),a=r[0];return r[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(te.gc)(this.indexOf(n),2),a=r[0];if(r[1]){var i=this._table[a].keys.indexOf(t);if(i>-1)return this._table[a].keys.splice(i,1),0===this._table[a].keys.length&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){var t,n,r,a,i=[];try{for(var s=Object(te.ic)(this.fields),o=s.next();!o.done;o=s.next()){var l=o.value;if("-"===l[0]&&(l=l.slice(1)),r=e[l],void 0,a=typeof r,null!==r&&"undefined"!==a&&"boolean"!==a&&"number"!==a&&"string"!==a)throw hr.indexTypesNotMatch;i.push(e[l])}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,a=mr(e[n],t[n]);if(0!==a)return r*a}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),a=this.diff(e,this._table[r].columnValues);if(a>0)t=r+1;else{if(!(a<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,c,u,d,h,f,p,m,b;return Object(te.Tb)(this,(function(_){switch(_.label){case 0:return[4,(e=Fr.get(this.dbname)).find(this._store,this.indexerKey,Tr.PERSISTENT)];case 1:return(t=_.sent())?[3,11]:(n=Rr(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=_.sent(),_.label=3;case 3:_.trys.push([3,8,9,10]),a=Object(te.ic)(r),i=a.next(),_.label=4;case 4:return i.done?[3,7]:(s=i.value).startsWith(n)?[4,e.find(this._store,s,Tr.NO_CACHE)]:[3,6];case 5:if(o=_.sent(),l=Gr.createFromCacheItem(o))try{for(m=void 0,c=Object(te.ic)(l.items),u=c.next();!u.done;u=c.next())d=u.value,this._addItem(d)}catch(e){m={error:e}}finally{try{u&&!u.done&&(b=c.return)&&b.call(c)}finally{if(m)throw m.error}}_.label=6;case 6:return i=a.next(),[3,4];case 7:return[3,10];case 8:return h=_.sent(),f={error:h},[3,10];case 9:try{i&&!i.done&&(p=a.return)&&p.call(a)}finally{if(f)throw f.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=pr(this._origin),_.label=12;case 12:return zr[this.indexerKey]=this,[2]}}))}))},e.prototype.drop=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return Fr.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),delete zr[this.indexerKey],[2]}}))}))},e.prototype.addItem=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=pr(this._origin)},e.prototype.abort=function(){this._table=pr(this._origin)},e}(),qr=function(){return"undefined"!=typeof document&&"undefined"!=typeof navigator&&"ReactNative"!==navigator.product},Kr=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(kr||(kr={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Dr||(Dr={}));var Wr,Yr={},Qr=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=kr.PROCESSING,this._queue=[],this._activationQueue=[],Yr[e]&&!t.forceCreate||(this.nodeId=Kr(),this.key=e,qr()&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t,r,a=e.data,i=a.nodeId,s=a.requestId,o=a.key,l=a.op,c=a.data;if(i!==n.nodeId&&o===n.key)switch(l){case Dr.NEWNODE:n._sendSync();break;case Dr.CLAIM_HOST:n._sendSync(),n._hostId=i;break;case Dr.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);var u=c,d=u.currentItemRequestId,h=u.queue,f=function(e){n._queue.findIndex((function(t){return t.requestId===e.requestId}))<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:Dr.REQUEST_LOCK,ts:e.ts})};try{for(var p=Object(te.ic)(h),m=p.next();!m.done;m=p.next())f(m.value)}catch(e){t={error:e}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}n._currentItem=n._queue.find((function(e){return e.requestId===d})),n._completeSync()}break;case Dr.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==a.nodeId})),n._currentItem&&n._currentItem.nodeId===a.nodeId&&(n._currentItem=void 0,n._acquire(n._queue[0]));break;case Dr.REQUEST_LOCK:n._requestLock(a);break;case Dr.ACQUIRE_LOCK:var b=n._queue.find((function(e){return e.requestId===s}));n._acquire(b);break;case Dr.RELEASE_LOCK:n._release(s)}})),window.addEventListener("beforeunload",(function(){n._send(Dr.REMOVENODE)}))),Yr[e]=this),Yr[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==kr.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n;void 0===t&&(t={});var r={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:Kr(),key:this.key,op:e,data:t.data,ts:Date.now()};return qr()&&window.postMessage(r,"*"),r},e.prototype._acquire=function(e){e?(this._currentItem=e,this._currentItem.onAcquired&&this._currentItem.onAcquired(e.requestId)):this._currentItem=void 0},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(Dr.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased&&t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(Dr.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},a=!1;for(var i in t._queue)if(t._queue[i].ts>r.ts){t._queue.splice(parseInt(i),0,r),a=!0;break}a||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(Dr.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e=this;return Object(te.Tb)(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=kr.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Dr.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Dr.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(Dr.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)&&this._release(this._currentItem.requestId)},e}(),Xr=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,a=e.keyHash,i=e.indexes,s=e.store,o=this;this._state=dr.INIT,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=Object(te.fc)([[r]],Object(te.gc)(i.filter((function(e){return Vr.createKey(e)!==o.keyName}))),!1),this._keyHash=a,this._store=s,this._mutex=new Qr(function(e,t){return"".concat(Mr(e,t),".lock")}(t,n)),this._blobContainer=new Lr({dbname:t,collectionName:n,store:s}),this._transaction=new Hr({dbname:t,collectionName:n,store:s})}return e.metadataOf=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return r=jr(e,t),[4,n.get(r)];case 1:return[2,a.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===dr.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d,h,f,p,m=this;return Object(te.Tb)(this,(function(b){switch(b.label){case 0:return[4,this._mutex.lock()];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,9,,10]),t=ur.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=b.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:b.sent(),this._blockManager=new Br({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Object(te.fc)([],Object(te.gc)(this.indexes),!1),a=[],i=r.map((function(e){return Vr.createKey(e)})),s=n?n.indexes.map((function(e){return Vr.createKey(e)})):[];try{for(o=Object(te.ic)(s),l=o.next();!l.done;l=o.next())c=l.value,i.includes(c)||a.push(Vr.parseKey(c))}catch(e){f={error:e}}finally{try{l&&!l.done&&(p=o.return)&&p.call(o)}finally{if(f)throw f.error}}return(u=[]).push.apply(u,Object(te.fc)([],Object(te.gc)(r.map((function(e){var t=new Vr({dbname:m.dbname,collectionName:m.name,keyName:m.keyName,fields:e,transaction:m._transaction,store:m._store});return m._indexers.push(t),t.ensure()}))),!1)),u.push.apply(u,Object(te.fc)([],Object(te.gc)(a.map((function(e){return new Vr({dbname:m.dbname,collectionName:m.name,keyName:m.keyName,fields:e,transaction:m._transaction,store:m._store}).drop()}))),!1)),[4,Promise.all(u)];case 5:return b.sent(),[4,this._transaction.commit()];case 6:return b.sent(),i.sort().join(",")===s.sort().join(",")?[3,8]:(d=jr(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata})]);case 7:b.sent(),b.label=8;case 8:return this._state=dr.READY,this._mutex.unlock(),[3,10];case 9:throw h=b.sent(),this._mutex.unlock(),h;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=dr.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){var t,n;void 0===e&&(e=null),e||(e=[this.keyName]);var r=Vr.createKey(e);try{for(var a=Object(te.ic)(this._indexers),i=a.next();!i.done;i=a.next()){var s=i.value;if(r===Vr.createKey(s.fields))return s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}throw hr.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return e=jr(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return o.sent()?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return o.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return o.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:o.sent(),o.label=5;case 5:o.trys.push([5,10,11,12]),n=Object(te.ic)(this._indexers),r=n.next(),o.label=6;case 6:return r.done?[3,9]:[4,r.value.addItem(e)];case 7:o.sent(),o.label=8;case 8:return r=n.next(),[3,6];case 9:return[3,12];case 10:return a=o.sent(),i={error:a},[3,12];case 11:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}return[7];case 12:return[3,14];case 13:throw hr.collectionInsertDuplicate;case 14:return[2]}}))}))},e.prototype._requestUpsert=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d,h,f;return Object(te.Tb)(this,(function(p){switch(p.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=p.sent())?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return p.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return p.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:p.sent(),p.label=5;case 5:p.trys.push([5,10,11,12]),r=Object(te.ic)(this._indexers),a=r.next(),p.label=6;case 6:return a.done?[3,9]:[4,(l=a.value).addItem(e)];case 7:p.sent(),p.label=8;case 8:return a=r.next(),[3,6];case 9:return[3,12];case 10:return i=p.sent(),u={error:i},[3,12];case 11:try{a&&!a.done&&(d=r.return)&&d.call(r)}finally{if(u)throw u.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,e)];case 14:p.sent(),p.label=15;case 15:p.trys.push([15,21,22,23]),s=Object(te.ic)(this._indexers),o=s.next(),p.label=16;case 16:return o.done?[3,20]:0===(l=o.value).diff(l.getColumnValues(n),l.getColumnValues(e))?[3,19]:[4,l.removeItem(n)];case 17:return p.sent(),[4,l.addItem(e)];case 18:p.sent(),p.label=19;case 19:return o=s.next(),[3,16];case 20:return[3,23];case 21:return c=p.sent(),h={error:c},[3,23];case 22:try{o&&!o.done&&(f=s.return)&&f.call(s)}finally{if(h)throw h.error}return[7];case 23:return[2]}}))}))},e.prototype._requestUpdate=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=c.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,11];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,9,10,11]),r=Object(te.ic)(this._indexers),a=r.next(),c.label=4;case 4:return a.done?[3,8]:0===(i=a.value).diff(i.getColumnValues(n),i.getColumnValues(e))?[3,7]:[4,i.removeItem(n)];case 5:return c.sent(),[4,i.addItem(e)];case 6:c.sent(),c.label=7;case 7:return a=r.next(),[3,4];case 8:return[3,11];case 9:return s=c.sent(),o={error:s},[3,11];case 10:try{a&&!a.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 11:return[2]}}))}))},e.prototype._requestRemove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=o.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,10];case 2:o.sent(),o.label=3;case 3:o.trys.push([3,8,9,10]),n=Object(te.ic)(this._indexers),r=n.next(),o.label=4;case 4:return r.done?[3,7]:[4,r.value.removeItem(t)];case 5:o.sent(),o.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return a=o.sent(),i={error:a},[3,10];case 9:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}return[7];case 10:return[2]}}))}))},e.prototype._requestClear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:i.sent(),i.label=2;case 2:i.trys.push([2,7,8,9]),e=Object(te.ic)(this._indexers),t=e.next(),i.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:i.sent(),i.label=5;case 5:return t=e.next(),[3,3];case 6:return[3,9];case 7:return n=i.sent(),r={error:n},[3,9];case 8:try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}return[7];case 9:return[2]}}))}))},e.prototype.getByKey=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,pr(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw hr.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){if(void 0===e&&(e={}),this.isReady)return new Ar({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward});throw hr.collectionNotReady},e.prototype.insertOne=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw hr.collectionKeyNotGiven;return[4,this._requestInsert(pr(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw hr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l=this;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!l._hasPropertyOfKeyName(e)})))throw hr.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=Object(te.ic)(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestInsert(pr(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return a=c.sent(),s={error:a},[3,10];case 9:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return i=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),i;case 14:return[3,16];case 15:throw hr.collectionNotReady;case 16:return[2]}}))}))},e.prototype.upsertOne=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw hr.collectionKeyNotGiven;return[4,this._requestUpsert(pr(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw hr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l=this;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!l._hasPropertyOfKeyName(e)})))throw hr.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=Object(te.ic)(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestUpsert(pr(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return a=c.sent(),s={error:a},[3,10];case 9:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return i=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),i;case 14:return[3,16];case 15:throw hr.collectionNotReady;case 16:return[2]}}))}))},e.prototype.update=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw hr.collectionKeyNotGiven;return[4,this._requestUpdate(pr(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw hr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c,u,d,h,f,p,m,b=this;return Object(te.Tb)(this,(function(_){switch(_.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:_.sent(),_.label=2;case 2:return _.trys.push([2,13,,15]),n=e.where,r=void 0===n?{}:n,a=e.index,i=void 0===a?null:a,s=e.backward,o=void 0!==s&&s,l=[],[4,new Ir({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(i)}).each((function(e){return Object(te.Ib)(b,void 0,void 0,(function(){var n,a;return Object(te.Tb)(this,(function(i){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(n=e.nextValue,gr(r,n)&&t.set){if("function"!=typeof t.set)for(a in t.set)n[a]=t.set[a];else t.set(n);l.push(n)}e.next()}else e.stop();return[2]}))}))}))];case 3:_.sent(),_.label=4;case 4:_.trys.push([4,9,10,11]),c=Object(te.ic)(l),u=c.next(),_.label=5;case 5:return u.done?[3,8]:(d=u.value,[4,this._requestUpdate(pr(d))]);case 6:_.sent(),_.label=7;case 7:return u=c.next(),[3,5];case 8:return[3,11];case 9:return h=_.sent(),p={error:h},[3,11];case 10:try{u&&!u.done&&(m=c.return)&&m.call(c)}finally{if(p)throw p.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return _.sent(),this._mutex.unlock(),[2,l];case 13:return f=_.sent(),[4,this._transaction.clear()];case 14:throw _.sent(),this._mutex.unlock(),f;case 15:return[3,17];case 16:throw this._transaction.clear(),hr.collectionNotReady;case 17:return[2]}}))}))},e.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw hr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d,h,f,p,m=this;return Object(te.Tb)(this,(function(b){switch(b.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,13,,14]),t=e.where,n=void 0===t?{}:t,r=e.index,a=void 0===r?null:r,i=e.backward,s=void 0!==i&&i,o=[],[4,new Ir({condition:n,blockManager:this._blockManager,backward:s,indexer:this._getIndexerBy(a)}).each((function(e){return Object(te.Ib)(m,void 0,void 0,(function(){var t,r;return Object(te.Tb)(this,(function(a){if(e.error)throw e.stop(),e.error;return e.hasNext?(t=e.nextValue,gr(n,t)&&(r=t[this.keyName],o.push(r)),e.next()):e.stop(),[2]}))}))}))];case 3:b.sent(),b.label=4;case 4:b.trys.push([4,9,10,11]),l=Object(te.ic)(o),c=l.next(),b.label=5;case 5:return c.done?[3,8]:(u=c.value,[4,this._requestRemove(u)]);case 6:b.sent(),b.label=7;case 7:return c=l.next(),[3,5];case 8:return[3,11];case 9:return d=b.sent(),f={error:d},[3,11];case 10:try{c&&!c.done&&(p=l.return)&&p.call(l)}finally{if(f)throw f.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return b.sent(),this._mutex.unlock(),[2,o];case 13:throw h=b.sent(),this._mutex.unlock(),h;case 14:return[3,16];case 15:throw this._transaction.clear(),hr.collectionNotReady;case 16:return[2]}}))}))},e.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw hr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),Zr="[NESTDB]",$r=!0,Jr=function(){function e(){}return e.off=function(){$r=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$r&&console.log.apply(console,Object(te.fc)(["".concat(Zr,"[LOG]")],Object(te.gc)(e),!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$r&&console.warn.apply(console,Object(te.fc)(["".concat(Zr,"[WARNING]")],Object(te.gc)(e),!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];$r&&console.error.apply(console,Object(te.fc)(["".concat(Zr,"[ERROR]")],Object(te.gc)(e),!1))},e}(),ea=[{},{a:700400,n:"error"}],ta=function(){function e(e){var t,n,r;this.encryption=null!==(t=e.encryption)&&void 0!==t?t:te.Q,this.itemSizeLimit=null!==(n=e.itemSizeLimit)&&void 0!==n?n:4194304,this.metadataBuffer=null!==(r=e.metadataBuffer)&&void 0!==r?r:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(e,t){return void 0===t&&(t=""),"".concat(e).concat(t)},e.prototype._generateShardPostfixArray=function(e){return void 0===e&&(e=1),Object(te.fc)([],Object(te.gc)(Array(e).keys()),!1)},e.prototype._shardify=function(e){var t=this,n=e.key,r=e.value,a=JSON.stringify(this.encryption.encrypt(r)),i=Math.ceil(a.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(i).map((function(e){var r={key:t._getRawKey(n,".".concat(e)),data:a.substring(e*t.adjustedItemSizeLimit,(e+1)*t.adjustedItemSizeLimit)};return 0===e&&(r.metadata={shards:i}),r}))},e.prototype._resetIfEncryptionChanged=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,c=this;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(e=u.sent(),t={encrypted:ea.map((function(e){var t;return null===(t=c.encryption)||void 0===t?void 0:t.encrypt(e)}))},!(e&&e.encrypted&&Array.isArray(e.encrypted)))return[3,6];for(a in n=e.encrypted,r=[],n)r.push(a);i=0,u.label=2;case 2:return i<r.length?(a=r[i])in n?(s=a,o=JSON.stringify(e.encrypted[s]),l=JSON.stringify(t.encrypted[s]),o===l?[3,4]:(Jr.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return u.sent(),[3,5];case 4:return i++,[3,2];case 5:return[3,8];case 6:return e?[3,8]:[4,this.clear()];case 7:u.sent(),u.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 9:return u.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return e=0,[4,this._getAllRawKeys()];case 1:t=c.sent(),c.label=2;case 2:c.trys.push([2,7,8,9]),n=Object(te.ic)(t),r=n.next(),c.label=3;case 3:return r.done?[3,6]:(a=r.value,[4,this._getRaw(a)]);case 4:(i=c.sent())&&(e+=JSON.stringify(i).length),c.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return s=c.sent(),o={error:s},[3,9];case 8:try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}return[7];case 9:return[2,e]}}))}))},e.prototype.getAllKeys=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e=this;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter((function(e){return e.endsWith(".0")})).map((function(e){return e.replace(/\.0$/,"")})).filter((function(t){return!e._reservedKeys.includes(t)}))]}}))}))},e.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o=this;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:if(!(n=l.sent()))return[3,7];l.label=2;case 2:return l.trys.push([2,6,,7]),r=n.data,(null==(a=n.metadata)?void 0:a.shards)&&a.shards>1?[4,Promise.all(this._generateShardPostfixArray(null==a?void 0:a.shards).map((function(t){return Object(te.Ib)(o,void 0,void 0,(function(){var n,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t>0?(n=this._getRawKey(e,".".concat(t)),[4,this._getRaw(n)]):[3,2];case 1:if(!(a=i.sent()))throw hr.storeBrokenIntegrity;return[2,a.data];case 2:return[2,r]}}))}))})))]:[3,4];case 3:return s=l.sent(),[3,5];case 4:s=[r],l.label=5;case 5:return i=s,[2,this.encryption.decrypt(JSON.parse(i.join("")))];case 6:return l.sent(),[2,null];case 7:return[2,null]}}))}))},e.prototype.set=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return t=this._shardify(e),[4,this._setRaw(t)];case 1:return n.sent(),[2,Object(te.Xb)({},e.value)]}}))}))},e.prototype.setMany=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n=this;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,Object(te.fc)([],Object(te.gc)(e.map((function(e){return n._shardify(e)}))),!1)))];case 1:return r.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a=this;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:return(n=i.sent())?(r=n.metadata,[4,this._removeRaw(this._generateShardPostfixArray(null==r?void 0:r.shards).map((function(t){return a._getRawKey(e,".".concat(t))})))]):[3,3];case 2:return i.sent(),[2,!0];case 3:return[2,!1]}}))}))},e.prototype.removeMany=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u=this;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:t=[],n=function(e){var n,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return n=r._getRawKey(e,".0"),[4,r._getRaw(n)];case 1:return(a=s.sent())&&(i=a.metadata,t.push.apply(t,Object(te.fc)([],Object(te.gc)(r._generateShardPostfixArray(null==i?void 0:i.shards).map((function(t){return u._getRawKey(e,".".concat(t))}))),!1))),[2]}}))},r=this,d.label=1;case 1:d.trys.push([1,6,7,8]),a=Object(te.ic)(e),i=a.next(),d.label=2;case 2:return i.done?[3,5]:(s=i.value,[5,n(s)]);case 3:d.sent(),d.label=4;case 4:return i=a.next(),[3,2];case 5:return[3,8];case 6:return o=d.sent(),l={error:o},[3,8];case 7:try{i&&!i.done&&(c=a.return)&&c.call(a)}finally{if(l)throw l.error}return[7];case 8:return t.length>0?[4,this._removeRaw(t)]:[3,10];case 9:d.sent(),d.label=10;case 10:return[2,e]}}))}))},e}(),na={},ra=function(e){function t(t){void 0===t&&(t={});var n,r=this;r=e.call(this,Object(te.Xb)(Object(te.Xb)({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:4194304}))||this;var a=t.delay,i=void 0===a?1:a;return r.delay=i,r.observer={},r}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"rawData",{get:function(){return na[this.dbname]},set:function(e){na[this.dbname]=e},enumerable:!1,configurable:!0}),t.prototype._getAllRawKeys=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){if(na[this.dbname])return[2,Object.keys(na[this.dbname])];throw hr.storeNotAvailable}))}))},t.prototype._getRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return na[this.dbname]?[4,_r(this.delay)]:[3,2];case 1:return t.sent(),[2,na[this.dbname][e]?Object(te.Xb)({key:e},na[this.dbname][e]):null];case 2:throw hr.storeNotAvailable}}))}))},t.prototype._setRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return na[this.dbname]?[4,_r(this.delay)]:[3,2];case 1:c.sent();try{for(t=Object(te.ic)(e),n=t.next();!n.done;n=t.next())r=n.value,a=r.key,i=r.data,s=r.metadata,na[this.dbname][a]=Object.freeze({data:i,metadata:s})}catch(e){o={error:e}}finally{try{n&&!n.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}}return[3,3];case 2:throw hr.storeNotAvailable;case 3:return[2]}}))}))},t.prototype._removeRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return na[this.dbname]?[4,_r(this.delay)]:[3,2];case 1:s.sent();try{for(t=Object(te.ic)(e),n=t.next();!n.done;n=t.next())r=n.value,na[this.dbname][r]&&delete na[this.dbname][r]}catch(e){a={error:e}}finally{try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(a)throw a.error}}return[3,3];case 2:throw hr.storeNotAvailable;case 3:return[2]}}))}))},t.prototype.observe=function(e,t,n){var r=this;this.observer[e]||(this.observer[e]={}),t.forEach((function(t){return r.observer[e][t]=n}))},t.prototype.checkAvailability=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2]}))}))},t.prototype.init=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,na[this.dbname]||(na[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.set=function(t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){if((n=this.observer[t.key])&&"function"==typeof n.set&&(r=n.set()))throw r;return[2,e.prototype.set.call(this,t)]}))}))},t.prototype.setMany=function(t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){try{for(n=Object(te.ic)(t),r=n.next();!r.done;r=n.next())if(a=r.value,(i=this.observer[a.key])&&"function"==typeof i.set&&(s=i.set()))throw s}catch(e){o={error:e}}finally{try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}}return[2,e.prototype.setMany.call(this,t)]}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,_r(this.delay)];case 1:return e.sent(),na[this.dbname]={},[2]}}))}))},t}(ta),aa="NestDBStore";!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"}(Wr||(Wr={}));var ia,sa=function(e){function t(t){void 0===t&&(t={});var n,r=this;return(r=e.call(this,Object(te.Xb)(Object(te.Xb)({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:104857600}))||this)._storeName=aa,r._state=Wr.UNINITIALIZED,r._openJobQueue=[],r._window="undefined"!=typeof window?window:void 0,r._indexedDb=r._window?r._window.indexedDB||r._window.mozIndexedDB||r._window.webkitIndexedDB||r._window.msIndexedDB:void 0,r}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype._openDatabase=function(e){var t=this;return new Promise((function(n,r){if(t._indexedDb){t._state=Wr.OPENING;var a=t._indexedDb.open(e);a.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(aa,{keyPath:"key"})})),a.addEventListener("success",(function(r){t._state=Wr.OPEN,t._database=r.target.result,t._openJobQueue.forEach((function(e){return e()})),t._openJobQueue=[],t._database.onclose=function(){t._database=void 0,t._state=Wr.OPENING,setTimeout((function(){t._openDatabase(e)}),5)},n(t._database)})),a.addEventListener("error",(function(e){t._state=Wr.UNINITIALIZED,r(e.target.error)}))}else r(hr.storeNotAvailable)}))},t.prototype._getObjectStore=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this._database?[2,this._database.transaction(this._storeName,e).objectStore(this._storeName)]:[3,1];case 1:switch(this._state){case Wr.UNINITIALIZED:case Wr.OPEN:return[3,2];case Wr.OPENING:case Wr.CLOSED:return[3,3]}return[3,4];case 2:throw hr.storeNotInitialized;case 3:return[2,new Promise((function(n){t._openJobQueue.push((function(){return n(t._getObjectStore(e))}))}))];case 4:return[4,this._getObjectStore(e)];case 5:return[2,n.sent()]}}))}))},t.prototype._getAllRawKeys=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.getAllKeys();r.addEventListener("success",(function(e){t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},t.prototype._getRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return t=n.sent(),[4,new Promise((function(n,r){var a=t.get(e);a.addEventListener("success",(function(e){var t;n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.result)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 2:return[2,n.sent()]}}))}))},t.prototype._setRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=n.sent(),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var a=t.put(e);a.addEventListener("success",(function(e){n(e.target.result)})),a.addEventListener("error",(function(){r("Failed to write.")}))}))})))];case 2:return n.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=n.sent(),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var a=t.delete(e);a.addEventListener("success",(function(){return n(e)})),a.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 2:return n.sent(),[2]}}))}))},t.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},t.prototype.checkAvailability=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:if(!((null==(e="undefined"!=typeof window?window:null)?void 0:e.indexedDB)||(null==e?void 0:e.mozIndexedDB)||(null==e?void 0:e.webkitIndexedDB)||(null==e?void 0:e.msIndexedDB)))return[3,6];if(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,!this._window||!qr())return[3,4];if(!(qr()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw hr.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise((function(e,n){if(t._indexedDb)try{var r=t._indexedDb.open("_testMozilla");r.onerror=function(){return n(hr.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}catch(e){n(hr.storeNotAvailableInPrivateBrowsing)}else n(hr.storeNotAvailable)}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:throw hr.storeNotAvailable;case 5:return[3,7];case 6:throw hr.storeNotAvailable;case 7:return[2]}}))}))},t.prototype.init=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return t.sent(),[4,this._openDatabase(e)];case 2:return t.sent(),[4,this._resetIfEncryptionChanged()];case 3:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},t}(ta),oa=function(e){function t(t){var n=this,r=t.AsyncStorage,a=t.itemSizeLimit,i=void 0===a?6291456:a,s=Object(te.R)(t,["AsyncStorage","itemSizeLimit"]);return(n=e.call(this,Object(te.Xb)(Object(te.Xb)({},s),{itemSizeLimit:i}))||this)._asyncStorage=r,n}return Object(te.A)(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e=this;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substring("".concat(e.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:t=[];try{for(n=Object(te.ic)(e),r=n.next();!r.done;r=n.next())a=r.value,i=a.key,a.data.length<=this.adjustedItemSizeLimit&&t.push([this._getActualKey(i),JSON.stringify(a)])}catch(e){s={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}}return[4,this._asyncStorage.multiSet(t)];case 1:return l.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(e){return t._getActualKey(e)})))];case 1:return n.sent(),[2]}}))}))},t.prototype.checkAvailability=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){if(!this._asyncStorage)throw hr.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},t}(ta);!function(e){function t(t){var n,r=this;return(r=e.call(this,Object(te.Xb)(Object(te.Xb)({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:6291456}))||this)._mmkv=t.MMKV,r}Object(te.A)(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e=this;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substring("".concat(e.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){try{for(t=Object(te.ic)(e),n=t.next();!n.done;n=t.next())r=n.value,a=r.key,r.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(a),JSON.stringify(r))}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[2]}))}))},t.prototype._removeRaw=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){try{for(t=Object(te.ic)(e),n=t.next();!n.done;n=t.next())r=n.value,this._mmkv.delete(this._getActualKey(r))}catch(e){a={error:e}}finally{try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(a)throw a.error}}return[2]}))}))},t.prototype.checkAvailability=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){if(!this._mmkv)throw hr.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))}}(ta),function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(ia||(ia={}));var la,ca=function(){function e(e){var t=e.name,n=e.version,r=e.store,a=e.config;this.name=t,this._version=n,this._state=ia.INIT,this._config=a||new ur({dbname:t}),this._store=r,this._event={success:vr,error:vr,storeReplaced:vr,upgrade:Or},this._collections=new Map,this._globalMutex=new Qr("".concat(this.name,".lock")),this._config.disableLogger&&Jr.off(),new Fr({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,(t=this._store,Object(te.Ib)(void 0,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,t.usage()];case 1:return[2,e.sent()]}}))})))];case 1:return[2,e.sent()]}var t}))}))},e.prototype.commitSchema=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this._state!==ia.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return Object(te.Ib)(t,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,a=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new Xr({dbname:this.name,collectionName:t,keyName:n,indexes:a,store:this._store})),(i=this._collections.get(t))?[4,i.init()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw hr.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i=this;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return[4,this._globalMutex.lock()];case 1:if(s.sent(),this._state===ia.OPENED)return[3,12];this._state=ia.OPENING,s.label=2;case 2:return s.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return s.sent(),o=this.name,t="".concat(wr(o),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=s.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var a=function(e){r.version<i._version?i._event.upgrade(r.version,(function(n){return Object(te.Ib)(i,void 0,void 0,(function(){var a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r})];case 2:return i.sent(),e({continued:!0}),[3,4];case 3:return a=i.sent(),e({continued:!1,err:a}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),i.label=6;case 6:return[2]}}))}))})):e({continued:!1})},s=function(t){var o=t.continued,l=void 0!==o&&o,c=t.err,u=void 0===c?null:c;if(l)setTimeout((function(){return a(s)}),10);else if(u)Jr.error(u.message),i._globalMutex.unlock(),i._event.error(u),n(u);else{var d=[];r.collectionNames.forEach((function(e){var t=i._collections.get(e);t&&t.state===dr.READY||d.push(Object(te.Ib)(i,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return[4,Xr.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new Xr({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){i._state=ia.OPENED,i._globalMutex.unlock(),i._event.success(),e()})).catch((function(e){Jr.error(e.message),i._globalMutex.unlock(),i._event.error(e),n(e)}))}};a(s)}))];case 5:switch((a=s.sent()).code){case Qn.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Qn.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return Jr.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new ra({}),this._globalMutex.unlock(),this._event.error(a),this._event.storeReplaced(this._store),[4,this.open()];case 7:return s.sent(),[3,11];case 8:return Jr.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new ra({}),this._globalMutex.unlock(),this._event.error(a),this._event.storeReplaced(this._store),[4,this.open()];case 9:return s.sent(),[3,11];case 10:throw Jr.error(a.message),this._globalMutex.unlock(),this._event.error(a),a;case 11:return[3,12];case 12:return[2]}var o}))}))},e.prototype.close=function(){this._collections.forEach((function(e){return e.close()})),this._state=ia.CLOSED},e.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return e.sent(),[2]}}))}))},e.prototype.reset=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.close(),(e=Fr.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(wr(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?Or:vr)},e.prototype.collection=function(e){var t=this._collections.get(e);if(t)return t;throw hr.collectionNotReady},e}(),ua=function(){function e(){this.messageTypeFilter=te.nb.ALL,this.customTypesFilter=null,this.senderUserIdsFilter=null,this.replyType=te.wb.NONE}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){switch(this.messageTypeFilter){case te.nb.USER:if(e.messageType!==te.ib.USER)return!1;break;case te.nb.FILE:if(e.messageType!==te.ib.FILE)return!1;break;case te.nb.ADMIN:if(e.messageType!==te.ib.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(e.customType))return!1;if(this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0){if(!(e instanceof _e))return!1;if(!this.senderUserIdsFilter.includes(e.sender.userId))return!1}switch(this.replyType){case te.wb.NONE:if(e.parentMessageId>0)return!1;break;case te.wb.ONLY_REPLY_TO_CHANNEL:if(e instanceof _e&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},e}();!function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"}(la||(la={}));var da,ha=function(e){switch(e){case la.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case la.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},fa=Object(te.Xb)(Object(te.Xb)({},tt),{scheduledAt:void 0}),pa=Object(te.Xb)(Object(te.Xb)({},$e),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),ma="UnsentMessage",ba={},_a=function(e){function t(t){var n=e.call(this,t)||this;return n._mutex=new Qr("unsendmessagecache.lock"),ba[t]=n,n}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return te.v.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),t.of=function(e,n){return void 0===n&&(n=!1),ba[e]&&!n||(ba[e]=new t(e)),ba[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb,t=null==e?void 0:e.collection(ma);if(!t)throw te.hc.databaseError;return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){if(e.messageId>0)throw te.hc.invalidParameters;var t,n=Object(te.Xb)({},e.serialize());return e instanceof Ce?(e.messageParams&&(n.messageParams=et(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=(t=e.scheduledInfo.scheduledMessageParams,Object(te.Xb)(Object(te.Xb)({},et(t)),{scheduledAt:t.scheduledAt})))):e instanceof Ae?(e.messageParams&&(n.messageParams=lt(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=function(e){return Object(te.Xb)(Object(te.Xb)({},lt(e)),{scheduledAt:e.scheduledAt})}(e.scheduledInfo.scheduledMessageParams))):e instanceof Te&&e.messageParams&&(n.messageParams=function(e){return Object(te.Vb)({fileInfoList:e.fileInfoList,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption})}(e.messageParams)),n},t.prototype._deserialize=function(e){return e=Object(te.Xb)(Object(te.Xb)({},e),{messageId:parseInt(e.messageId)}),Ca.of(this._iid).buildMessageFromSerializedData(e)},t.prototype._deserializeWithMessageCreateParams=function(e){var t,n,r;return Object(te.Ib)(this,void 0,void 0,(function(){var a,i,s,o,l,c,u=this;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return a=Ca.of(this._iid),i=this._deserialize(e),e.messageParams?i instanceof Ce?(o=e.messageParams,i.messageParams=a.buildUserMessageCreateParamsFromSerializedData(o,i),[3,6]):[3,1]:[3,6];case 1:return i instanceof Ae?(o=e.messageParams).fileKey&&"string"==typeof o.fileKey&&ot(null!==(t=o.fileType)&&void 0!==t?t:"")?(s=o,[4,this.collection.getBlob(o.fileKey)]):[3,3]:[3,4];case 2:s.file=null!==(n=d.sent())&&void 0!==n?n:void 0,d.label=3;case 3:return i.messageParams=a.buildFileMessageCreateParamsFromSerializedData(o,i),[3,6];case 4:return i instanceof Te&&(o=e.messageParams)&&o.fileInfoList?(i.messageParams=a.buildMultipleFilesMessageCreateParamsFromSerializedData(o,i),[4,Promise.all(i.messageParams.fileInfoList.map((function(e){return Object(te.Ib)(u,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return"string"==typeof(null===(n=e._uploadedMetaData)||void 0===n?void 0:n.fileKey)&&ot(null!==(a=null===(r=e._uploadedMetaData)||void 0===r?void 0:r.fileType)&&void 0!==a?a:"")?(t=e,[4,this.collection.getBlob(e._uploadedMetaData.fileKey)]):[3,2];case 1:t.file=null!==(i=s.sent())&&void 0!==i?i:void 0,s.label=2;case 2:return[2]}}))}))})))]):[3,6];case 5:d.sent(),d.label=6;case 6:return i.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?i instanceof Ce?(l=e.scheduledInfo.scheduledMessageParams,i.scheduledInfo.scheduledMessageParams=a.buildScheduledUserMessageCreateParamsFromSerializedData(l,i),[3,10]):[3,7]:[3,10];case 7:return i instanceof Ae?(l=e.scheduledInfo.scheduledMessageParams).fileKey&&"string"==typeof l.fileKey&&"string"==typeof l.fileType&&ot(l.fileType)?(c=l,[4,this.collection.getBlob(l.fileKey)]):[3,9]:[3,10];case 8:c.file=null!==(r=d.sent())&&void 0!==r?r:void 0,d.label=9;case 9:i.scheduledInfo.scheduledMessageParams=a.buildScheduledFileMessageCreateParamsFromSerializedData(l,i),d.label=10;case 10:return[2,i]}}))}))},t.prototype._getFileInfoBlobKey=function(e,t){return"".concat(e,".").concat(t)},t.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserializeWithMessageCreateParams(t)];n.label=2;case 2:return[2,void 0]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.filter,r=void 0===n?new ua:n,a=e.order,i=void 0===a?la.CHANNEL_LATEST:a,s=e.sendingStatus,o=e.backward,l=void 0!==o&&o,c=e.parentMessageId;return Object(te.Ib)(this,void 0,void 0,(function(){var e,n,a,o,u=this;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return this.localCacheEnabled?(e=ha(i),n={"/where":function(e){return!!(i!==la.NEWEST_CHILD_MESSAGE||c&&0!==e.parentMessageId&&e.parentMessageId===c)&&r.match(u._deserialize(e))}},t&&(n.channelUrl=t),s&&(n.sendingStatus=s),a={where:n,index:e,backward:l},[4,this.collection.query(a)]):[3,3];case 1:return[4,d.sent().fetch({})];case 2:return o=d.sent(),[2,Promise.all(o.map((function(e){return Object(te.Ib)(u,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._deserializeWithMessageCreateParams(e)];case 1:return[2,t.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new ua),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this.fetch({filter:t,order:la.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(te.Ib)(t,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e instanceof Ae||e instanceof Te?[4,this._mutex.lock()]:[3,4];case 1:return n.sent(),[4,this.saveBlob(e)];case 2:return n.sent(),[4,this._mutex.unlock()];case 3:n.sent(),n.label=4;case 4:return t=this._serialize(e),[4,this.collection.upsertOne(t)];case 5:return n.sent(),[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(te.Ib)(t,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return t=[],e.threadInfo&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=n.sent(),n.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(te.ic)(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return a=o.sent(),i={error:a},[3,8];case 7:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.saveBlob=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a=this;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return e instanceof Ae?e.messageParams&&(r=e.messageParams).file&&st(r.file)?[4,this.collection.saveBlob(r.file,e.reqId)]:[3,2]:[3,5];case 1:n=i.sent(),r.fileKey=n,r.fileType=rt.BLOB,i.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(t=e.scheduledInfo.scheduledMessageParams).file&&st(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,4];case 3:n=i.sent(),t.fileKey=n,t.fileType=rt.BLOB,i.label=4;case 4:return[3,7];case 5:return e instanceof Te&&(r=e.messageParams)&&r.fileInfoList&&Array.isArray(r.fileInfoList)?[4,Promise.all(r.fileInfoList.map((function(t,n){return Object(te.Ib)(a,void 0,void 0,(function(){var r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return t.file&&st(t.file)?[4,this.collection.saveBlob(t.file,this._getFileInfoBlobKey(e.reqId,n))]:[3,2];case 1:r=a.sent(),t._uploadedMetaData||(t._uploadedMetaData={}),t._uploadedMetaData.fileKey=r,t._uploadedMetaData.fileType=rt.BLOB,a.label=2;case 2:return[2]}}))}))})))]:[3,7];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},t}(te.I),ga={},va=function(e){function t(t){var n=e.call(this,t)||this;return ga[t]=n,n}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"_sdkState",{get:function(){return te.v.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return te.v.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return _a.of(this._iid)},enumerable:!1,configurable:!0}),t.of=function(e,n){return void 0===n&&(n=!1),ga[e]&&!n||(ga[e]=new t(e)),ga[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(te.jc)(!!e).throw(te.hc.databaseError),e.collection(qn)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){return Object(te.Xb)(Object(te.Xb)({},e.serialize()),{messageId:"".concat(e.messageId)})},t.prototype._deserialize=function(e){return e=Object(te.Xb)(Object(te.Xb)({},e),{messageId:parseInt(e.messageId)}),Ca.of(this._iid).buildMessageFromSerializedData(e)},t.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,void 0]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,a=void 0===r?100:r,i=e.filter,s=void 0===i?new ua:i,o=e.order,l=void 0===o?la.CHANNEL_LATEST:o,c=e.backward,u=void 0!==c&&c,d=e.parentMessageId,h=e.isPollOnly,f=void 0!==h&&h,p=e.exactMatch,m=void 0!==p&&p,b=e.inclusive,_=void 0===b||b;return Object(te.Ib)(this,void 0,void 0,(function(){var e,r,i,o=this;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return this.localCacheEnabled?(e=ha(l),r={where:{channelUrl:t,"/where":function(e){if(n)switch(l){case la.CHANNEL_LATEST:if(m&&e.createdAt!==n)return!1;if(u){if(_&&e.createdAt<n||!_&&e.createdAt<=n)return!1}else if(_&&e.createdAt>n||!_&&e.createdAt>=n)return!1;break;case la.NEWEST_CHILD_MESSAGE:if(!d||0===e.parentMessageId||e.parentMessageId!==d)return!1}return!(f&&!e._poll)&&s.match(o._deserialize(e))}},index:e,backward:u},[4,this.collection.query(r)]):[3,3];case 1:return[4,c.sent().fetch({limit:null!=a?a:void 0})];case 2:return i=c.sent(),[2,Promise.all(i.map((function(e){return Object(te.Ib)(o,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this._deserialize(e)]}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new ua),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:t,order:la.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n=this;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,5];case 1:return r.sent(),t=e.map((function(e){return n._serialize(e)})),[4,this.collection.upsertMany(t)];case 2:return r.sent(),[4,this.upsertChildMessages(e)];case 3:return r.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(te.Ib)(t,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(te.ic)(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove("".concat(r))]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return a=o.sent(),i={error:a},[3,8];case 7:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:ha(la.CHANNEL_LATEST)})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.prototype.removeUnderOffset=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:ha(la.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.countBetween=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a=this;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?(r=ha(la.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=a._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,i.sent()];case 2:return[2,0]}}))}))},t.prototype.saveBlobs=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t=this;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return Object(te.Ib)(t,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return e instanceof Ae&&e.messageParams&&(t=e.messageParams).file&&st(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2];case 1:n=r.sent(),t.fileKey=n,r.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[2]}}))}))},t.prototype._getGroupChannelPreferenceSize=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return t=0,[4,(n=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return r=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return a=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return i=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return s=o.sent(),r&&(t+=JSON.stringify(r).length),a&&(t+=JSON.stringify(a).length),i&&(t+=JSON.stringify(i).length),s&&(t+=JSON.stringify(s).length),[2,t]}}))}))},t}(te.I),Ea={},ya=function(e){function t(t){var n=e.call(this,t)||this;return n._observers=new Map,n._dispatcherContext=n._dispatcher.on((function(e){return Object(te.Ib)(n,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d,h,f,p,m=this;return Object(te.Tb)(this,(function(b){switch(b.label){case 0:return e instanceof te.K?(t=e.messages,f=e.source,i=e.isWebSocketEventComing,n=t.filter((function(e){return e.messageId>0})),r=t.filter((function(e){return 0===e.messageId})),n.length>0?[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(n)];case 1:return e.sent(),[4,this._unsentMessageCache.remove(n.map((function(e){return e instanceof _e?e.reqId:null})).filter((function(e){return null!==e})))];case 2:return e.sent(),[2]}}))}))}))]:[3,2]):[3,5];case 1:b.sent(),i||this._broadcastUpdateEvent(n,f),b.label=2;case 2:return r.length>0?[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.upsert(r)];case 1:return e.sent(),[2]}}))}))}))]:[3,4];case 3:b.sent(),i||this._broadcastUpdateEvent(r,f),b.label=4;case 4:return[3,21];case 5:return e instanceof te.V?(a=e.messageIds,f=e.source,i=e.isWebSocketEventComing,[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.remove(a)];case 1:return e.sent(),[2]}}))}))}))]):[3,7];case 6:return b.sent(),i||this._broadcastRemoveEvent(a,f),[3,21];case 7:return e instanceof te.U?(s=e.reqId,f=e.source,[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.remove([s])];case 1:return e.sent(),[2]}}))}))}))]):[3,9];case 8:return b.sent(),this._broadcastRemoveUnsentEvent(s,f),[3,21];case 9:return e instanceof te.T?(o=e.polls,f=e.source,this._cacheContext.localCacheEnabled?(l=o.map((function(e){return e.messageId})),[4,Promise.all(l.map((function(e){return m._messageCache.get(e)})))]):[3,12]):[3,13];case 10:return(c=b.sent().filter((function(e){return e}))).length>0&&o.forEach((function(e){var t=c.find((function(t){return t.messageId===e.messageId}));t&&t.applyPoll(e)})),[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(c)];case 1:return[2,e.sent()]}}))}))}))];case 11:b.sent(),b.label=12;case 12:return this._broadcastPollChangeLogEvent(o,f),[3,21];case 13:return e instanceof te.S?(u=e.event,f=e.source,[4,this._messageCache.get(u.messageId)]):[3,17];case 14:return(d=b.sent())&&d.isUserMessage()&&d.poll&&d.poll.applyPollUpdateEvent(u)?[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([d])];case 1:return[2,e.sent()]}}))}))}))]:[3,16];case 15:b.sent(),b.label=16;case 16:return this._broadcastPollUpdateEvent(u,f),[3,21];case 17:return e instanceof te.N?(h=e.event,f=e.source,[4,this._messageCache.get(h.messageId)]):[3,21];case 18:return(p=b.sent())&&p.isUserMessage()&&p.poll&&p.poll.applyPollVoteEvent(h)?[4,Object(te.o)((function(){return Object(te.Ib)(m,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([p])];case 1:return[2,e.sent()]}}))}))}))]:[3,20];case 19:b.sent(),b.label=20;case 20:this._broadcastPollVoteEvent(h,f),b.label=21;case 21:return[2]}}))}))})),n}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return te.v.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_dispatcher",{get:function(){return te.v.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_messageCache",{get:function(){return va.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return _a.of(this._iid)},enumerable:!1,configurable:!0}),t.of=function(e,n){var r;return void 0===n&&(n=!1),Ea[e]&&!n||(Ea[e]&&(null===(r=Ea[e]._dispatcherContext)||void 0===r||r.close()),Ea[e]=new t(e)),Ea[e]},t.prototype._broadcastUpdateEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onUpdate&&s.onUpdate(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype._broadcastPollChangeLogEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onPollChangeLogUpdate&&s.onPollChangeLogUpdate(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype._broadcastPollUpdateEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onPollUpdate&&s.onPollUpdate(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype._broadcastPollVoteEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onPollVote&&s.onPollVote(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype._broadcastRemoveEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onRemove&&s.onRemove(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype._broadcastRemoveUnsentEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onRemoveUnsent&&s.onRemoveUnsent(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},t.prototype.subscribe=function(e,t){this._observers.set(e,t)},t.prototype.unsubscribe=function(e){this._observers.delete(e)},t.prototype.unsubscribeAll=function(){this._observers.clear()},t}(te.I),Oa={},Ca=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,a=t.requestQueue,i=t.onlineDetector,s=t.cacheContext;this._iid=e,this._sdkState=n,this._requestQueue=a,this._dispatcher=r,this._cacheContext=s,va.of(e),_a.of(e),ya.of(e),this.fileMessageQueue=new ke(e,{sdkState:n,dispatcher:r,requestQueue:a,onlineDetector:i,cacheContext:s}),Oa[e]=this}return e.of=function(e){return Oa[e]},e.prototype.buildMessageFromSerializedData=function(e){var t=Object(te.oc)(e);switch(t.messageType){case te.ib.USER:return new Ce(this._iid,Ce.payloadify(t));case te.ib.FILE:return Te._isMultipleFilesMessageSerializedData(t)?new Te(this._iid,Te.payloadify(t)):new Ae(this._iid,Ae.payloadify(t));case te.ib.ADMIN:return new ye(this._iid,ye.payloadify(t))}throw te.hc.invalidParameters},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(e,t){return Object(te.Vb)(Object(te.lc)({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:e.pollId}))},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(e,t){var n;return Object(te.Vb)(Object(te.lc)({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:e.file,fileKey:e.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:null===(n=t.thumbnails)||void 0===n?void 0:n.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),fileType:e.fileType,requireAuth:t.requireAuth}))},e.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(e,t){return Object(te.Vb)({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,fileInfoList:e.fileInfoList})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(e,t){return Object(te.Xb)(Object(te.Xb)({},this.buildUserMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(e,t){return Object(te.Xb)(Object(te.Xb)({},this.buildFileMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(e){var t=Object(te.oc)(e);return new fe(this._iid,fe.payloadify(t))},e.prototype.getMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return t=new He(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(Ge).message]}}))}))},e.prototype.getScheduledMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return t=new Ke(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(We).message]}}))}))},e.prototype.getMessagesByMessageId=function(e,t,n,r,a){return void 0===a&&(a=te.x.REQUEST_MESSAGE),Object(te.Ib)(this,void 0,void 0,(function(){var i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return i=new Be(Object(te.Xb)(Object(te.Xb)({channelType:t,channelUrl:e,token:String(n)},De),r)),[4,this._requestQueue.send(i)];case 1:return s=l.sent(),o=s.as(ze).messages,this._dispatcher.dispatch(new te.K({messages:o,source:a})),[2,o]}}))}))},e.prototype.getMessagesByTimestamp=function(e,t,n,r,a){return void 0===a&&(a=te.x.REQUEST_MESSAGE),Object(te.Ib)(this,void 0,void 0,(function(){var i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return i=new Be(Object(te.Xb)(Object(te.Xb)({channelType:t,channelUrl:e,timestamp:n},De),r)),[4,this._requestQueue.send(i)];case 1:return s=l.sent(),o=s.as(ze).messages,this._dispatcher.dispatch(new te.K({messages:o,source:a})),[2,o]}}))}))},e.prototype._getMessagesByTimestampForCollection=function(e,t,n,r,a,i,s){return void 0===a&&(a=te.x.REQUEST_MESSAGE),Object(te.Ib)(this,void 0,void 0,(function(){var o,l,c,u,d,h;return Object(te.Tb)(this,(function(f){switch(f.label){case 0:return o=new Be(Object(te.Xb)(Object(te.Xb)(Object(te.Xb)({channelType:t,channelUrl:e,timestamp:n},De),r),{checkingHasNext:i,checkingContinuousMessages:s})),[4,this._requestQueue.send(o)];case 1:return l=f.sent(),c=l.as(ze),u=c.messages,d=c.isContinuousMessages,h=c.hasNext,this._dispatcher.dispatch(new te.K({messages:u,source:a})),[2,{messages:u,isContinuousMessages:d,hasNext:h}]}}))}))},e.prototype.getThreadedMessagesByTimestamp=function(e,t,n,r){return void 0===r&&(r=te.x.REQUEST_THREADED_MESSAGE),Object(te.Ib)(this,void 0,void 0,(function(){var a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return a=new Be(Object(te.Xb)(Object(te.Xb)(Object(te.Xb)({channelUrl:e.channelUrl,channelType:e.channelType,timestamp:t},ve),n),{replyType:te.wb.ALL,parentMessageId:e.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(a)];case 1:return i=l.sent(),s=i.as(ze).messages,(o=s.slice(1)).forEach((function(t){t.parentMessage=e})),this._dispatcher.dispatch(new te.K({messages:o,source:r})),[2,{parentMessage:s[0],threadedMessages:o}]}}))}))},e.prototype.getMessageChangelogs=function(e,t,n,r,a){return void 0===a&&(a=te.x.REQUEST_MESSAGE_CHANGELOGS),Object(te.Ib)(this,void 0,void 0,(function(){var i,s,o,l,c,u,d,h;return Object(te.Tb)(this,(function(f){switch(f.label){case 0:return i=new Ve(Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null},Pe),r)))),[4,this._requestQueue.send(i)];case 1:return s=f.sent(),o=s.as(qe),l=o.updatedMessages,c=o.deletedMessagesInfo,u=o.hasMore,d=o.nextToken,h=c.map((function(e){return e.messageId})),l.length>0&&this._dispatcher.dispatch(new te.K({messages:l,source:a})),h.length>0&&this._dispatcher.dispatch(new te.V({messageIds:h,source:a})),[2,{updatedMessages:l,deletedMessageIds:h,hasMore:u,token:d}]}}))}))},e}(),Na=function(e){function t(t,n){var r=e.call(this,t)||this;r.targetMessageId=0;var a=n.thread_info,i=n.parent_message_id,s=n.channel_url,o=n.channel_type;return a&&Object(te.B)("object",a)&&Object(te.B)("number",i)&&Object(te.B)("string",s)&&Object(te.B)("string",o)&&(r.threadInfo=new ae(t,a),r.targetMessageId=i,r.channelUrl=s,r.channelType=o),r}return Object(te.A)(t,e),t}(te.I),Ta={channelUrl:"",channelType:te.y.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},Sa=function(e){function t(t){var n=t.channelCustomType,r=t.keyword,a=t.limit,i=t.reverse,s=t.exactMatch,o=t.channelUrl,l=t.order,c=t.messageTimestampFrom,u=t.messageTimestampTo,d=t.advancedQuery,h=t.targetFields,f=t.nextToken,p=e.call(this)||this;return p.method=te.a.GET,p.path="".concat(te.W,"/messages"),p.params={custom_type:n,query:r,limit:a,reverse:i,exact_match:s,channel_url:o,message_ts_from:c,message_ts_to:u,sort_field:l,advanced_query:d,target_fields:h,after:f},p}return Object(te.A)(t,e),t}(te.Wb),Ia=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.results.map((function(e){return Ie(t,e)})),r.hasNext=n.has_next,r.nextToken=n.end_cursor,r.totalCount=n.total_count,r}return Object(te.A)(t,e),t}(te.Yb);!function(e){e.SCORE="score",e.TIMESTAMP="ts"}(da||(da={}));var Aa,wa,Ma,ja=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h=this;return(h=e.call(this,t,n)||this).keyword="",h.reverse=!1,h.exactMatch=!1,h.channelUrl="",h.channelCustomType="",h.messageTimestampFrom=null,h.messageTimestampTo=null,h.order=da.SCORE,h.advancedQuery=!1,h.targetFields=null,h._nextToken="",h.totalCount=-1,h.keyword=n.keyword,h.reverse=null!==(r=n.reverse)&&void 0!==r&&r,h.exactMatch=null!==(a=n.exactMatch)&&void 0!==a&&a,h.channelUrl=null!==(i=n.channelUrl)&&void 0!==i?i:"",h.channelCustomType=null!==(s=n.channelCustomType)&&void 0!==s?s:"",h.messageTimestampFrom=null!==(o=n.messageTimestampFrom)&&void 0!==o?o:null,h.messageTimestampTo=null!==(l=n.messageTimestampTo)&&void 0!==l?l:null,h.order=null!==(c=n.order)&&void 0!==c?c:da.SCORE,h.advancedQuery=null!==(u=n.advancedQuery)&&void 0!==u&&u,h.targetFields=null!==(d=n.targetFields)&&void 0!==d?d:null,h}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("string",this.keyword)&&this.keyword.length>0&&Object(te.B)("boolean",this.reverse)&&Object(te.B)("boolean",this.exactMatch)&&Object(te.B)("string",this.channelUrl)&&Object(te.B)("string",this.channelCustomType)&&(Object(te.B)("number",this.messageTimestampFrom)||null===this.messageTimestampFrom)&&(Object(te.B)("number",this.messageTimestampTo)||null===this.messageTimestampTo)&&Object(te.q)(da,this.order)&&Object(te.B)("boolean",this.advancedQuery)&&Object(te.k)("string",this.targetFields,!0)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new Sa(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=l.sent(),r=n.as(Ia),a=r.messages,i=r.hasNext,s=r.nextToken,o=r.totalCount,this._nextToken=s,this._hasNext=i,this._isLoading=!1,this.totalCount=o,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),Ra={channelUrl:"",scheduledMessageId:0},Ua=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="message",t}return Object(te.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,a=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:c}),this._manager=new Ca(t,{sdkState:r,dispatcher:a,requestQueue:s,onlineDetector:l,cacheContext:c})},t.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},t.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},t.prototype.getMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},Ta),e),Object(te.jc)(function(e){return Object(te.B)("string",e.channelUrl)&&Object(te.q)(te.y,e.channelType)&&Object(te.B)("number",e.messageId)&&Object(te.B)("boolean",e.includeReactions,!0)&&Object(te.B)("boolean",e.includeMetaArray,!0)&&Object(te.B)("boolean",e.includeParentMessageInfo,!0)&&Object(te.B)("boolean",e.includeThreadInfo,!0)}(t)).throw(te.hc.invalidParameters),[2,this._manager.getMessage(t)]}))}))},t.prototype.getScheduledMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},Ra),e),Object(te.jc)(function(e){return Object(te.B)("string",e.channelUrl)&&""!==e.channelUrl&&Object(te.B)("number",e.scheduledMessageId)&&e.scheduledMessageId>0}(t)).throw(te.hc.invalidParameters),[2,this._manager.getScheduledMessage(t)]}))}))},t}(te.X),La=function(e,t){this.pollId=0,this.messageId=0,this.pollId=t.poll.id,this.messageId=t.poll.message_id,this._iid=e,this._payload=t},ka=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="poll",t}return Object(te.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,a=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:c}),this._manager=new te.O(t,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:c})},t.prototype.create=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},te.Y),e),Object(te.jc)(Object(te.Z)(t)).throw(te.hc.invalidParameters),[2,this._manager.create(t)]}))}))},t.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},te.ab),e),Object(te.jc)(Object(te.bb)(t)).throw(te.hc.invalidParameters),[2,this._manager.get(t)]}))}))},t.prototype.getOption=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},te.cb),e),Object(te.jc)(Object(te.db)(t)).throw(te.hc.invalidParameters),[2,this._manager.getOption(t)]}))}))},t.prototype.buildPollFromSerializedData=function(e){return this._manager.buildPollFromSerializedData(e)},t}(te.X);!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(Aa||(Aa={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(wa||(wa={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(Ma||(Ma={}));var Da,xa=function(e){switch(e){case Aa.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case Aa.CHRONOLOGICAL:return["-createdAt","syncIndex"];case Aa.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},Pa=function(e){function t(t){var n=t.message,r=e.call(this)||this;return r.message=n,r}return Object(te.A)(t,e),t}(te.eb),Fa={},Ha=function(){function e(e,t){var n=t.localCacheEnabled,r=t.enableAutoResend,a=t.dispatcher,i=t.sdkState,s=t.logger,o=this;this._iid=e,Fa[e]=this,this._localCacheEnabled=n,this._enableAutoResend=r,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=a,this._logger=s,this._sdkState=i,this._localCacheEnabled&&a.on((function(e){if(e instanceof te.pc)switch(e.stateType){case te.qc.CONNECTED:o._isProcessingAutoResend||o.processAutoResendRegisteredPendingMessages().then((function(){return o._processNextAutoResend()}));break;case te.qc.INTERNAL_DISCONNECTED:case te.qc.EXTERNAL_DISCONNECTED:o._isProcessingAutoResend=!1}}))}return e.of=function(e){return Fa[e]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._enableAutoResend?[4,this._fetchAllCachedPendingMessages()]:[2];case 1:e=s.sent();try{for(t=Object(te.ic)(e),n=t.next();!n.done;n=t.next())0===(r=n.value).errorCode&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",r.reqId),r.sendingStatus=te.lb.FAILED,r.errorCode=te.tb.ACK_TIMEOUT,this._dispatcher.dispatch(new te.K({messages:[r],source:te.x.LOCAL_MESSAGE_FAILED})))}catch(e){a={error:e}}finally{try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(a)throw a.error}}return[2]}}))}))},e.prototype.processAutoResendRegisteredPendingMessages=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=l.sent();try{for(t=Object(te.ic)(e),n=t.next();!n.done;n=t.next())r=n.value,this._enableAutoResend&&r.errorCode&&Object(te.M)(r.errorCode)&&(a=(new Date).getTime(),i=r.createdAt+2592e5,this._enableAutoResend&&a<=i?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(r.reqId)<0&&this._autoResendQueue.push(r):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(i).toLocaleString()),r.sendingStatus=te.lb.FAILED,this._dispatcher.dispatch(new te.K({messages:[r],source:te.x.LOCAL_MESSAGE_FAILED}))))}catch(e){s={error:e}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}}return[2]}}))}))},e.prototype.completeCurrentAndProcessNextAutoResend=function(e){if(this._localCacheEnabled&&this._enableAutoResend&&(e.sendingStatus===te.lb.SUCCEEDED||e.sendingStatus===te.lb.FAILED&&!Object(te.M)(e.errorCode))){var t=this.indexOf(e);t>=0&&this._autoResendQueue.splice(t,1),0===t&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=_a.of(this._iid),(t=new ua).replyType=te.wb.ALL,[4,e.fetch({sendingStatus:te.lb.PENDING,backward:!0,filter:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.indexOf=function(e){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId):-1},e.prototype._isNotInQueue=function(e){return-1===this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId)},e.prototype._processNextAutoResend=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){if(this._localCacheEnabled&&this._enableAutoResend&&"foreground"===this._sdkState.appState)try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),e=this._autoResendQueue[0],this._dispatcher.dispatch(new Pa({message:e})),this._logger.debug("processing auto-resend for message request id: ",e.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(e){this._logger.warn("process auto-resend error: ",e),this._isProcessingAutoResend=!1}return[2]}))}))},e}();!function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"}(Da||(Da={}));var Ga=function(){function e(e){this.category=e.cat,this.data=e.data}return e.getDataAsUserBlockEvent=function(e,t){var n=t.data,r=n.blocker,a=n.blockee;return{blocker:new te.u(e,r),blockee:new te.u(e,a)}},e.getDataAsFriendDiscoveredEvent=function(e,t){var n=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(n)?n.map((function(t){return new te.u(e,t)})):[]}},e}(),Ba=function(e){function t(t,n){var r=n.userId,a=e.call(this)||this;return a._iid=t,a.userId=r,a}return Object(te.A)(t,e),t}(te.eb),za=function(e){function t(){return e.call(this)||this}return Object(te.A)(t,e),t}(te.eb),Va=function(e){function t(t,n,r){var a=e.call(this,t,"USEV",r)||this;return a.event=new Ga(r),a}return Object(te.A)(t,e),t}(te.w),qa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(te.A)(t,e),t}(te.eb),Ka=function(e){this.key=e.key,this.url=e.url},Wa=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map((function(e){return new Ka(e)})):[]},Ya=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new Wa(e)})):[]},Qa={profileImage:void 0,profileUrl:void 0,nickname:void 0},Xa=function(e){return{v2:e.commitSchema([{collectionName:Vn,keyName:"url",index:[xa(Aa.LATEST_LAST_MESSAGE),xa(Aa.CHRONOLOGICAL),xa(Aa.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:qn,keyName:"messageId",index:[ha(la.CHANNEL_LATEST),ha(la.NEWEST_CHILD_MESSAGE)]},{collectionName:ma,keyName:"reqId",index:[ha(la.CHANNEL_LATEST),ha(la.NEWEST_CHILD_MESSAGE)]},{collectionName:"Poll",keyName:"pollId"}]),v3:e.commitSchema([{collectionName:"FeedChannel",keyName:"url",index:[["-lastMessageUpdatedAt","-createdAt","syncIndex"]]}])}},Za=function(e){return function(t,n){switch(t){case 1:e.clear().then((function(){Xa(e).v2.then((function(){return n()})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}));break;case 2:Xa(e).v3.then((function(){return n()})).catch((function(e){return n(e)}));break;default:n()}}},$a=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},Ja=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?$a:n,a=t.initialState,i=void 0===a?"visible":a,s=t.isEnabled,o=void 0===s||s,l=t.pauseCheckDelay,c=void 0===l?3e4:l,u=e.call(this)||this;return u._pauseCheckDelay=3e4,u._currentState="visible",u._getVisibilityState=r,u._pauseCheckDelay=c,u._currentState=i,u._isEnabled=o,u._boundToggleState=u._toggleState.bind(u),u}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(te.e),ei=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,a=this;this._onlineWorker=function(){var e;return null===(e=a.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=a.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(a.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(a.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:te.a.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),ti=function(e){function t(t){var n=t.userId,r=t.nickname,a=t.profileUrl,i=t.profileImage,s=t.preferredLanguages,o=e.call(this)||this;return o.method=te.a.PUT,o.path="".concat(te.Ub,"/").concat(encodeURIComponent(n)),o.params=Object(te.Vb)(Object(te.lc)({nickname:r,profile_url:a,profile_file:i,preferred_languages:s})),o}return Object(te.A)(t,e),t}(te.Wb),ni=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new te.u(t,Object(te.Xb)({},n)),r}return Object(te.A)(t,e),t}(te.Yb),ri=function(e){function t(t){var n=t.userId,r=t.token,a=e.call(this)||this;return a.method=te.a.POST,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/apns"),a.params={apns_device_token:r,always_push:!0},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?te.p[n.type.toLowerCase()]:te.p.UNKNOWN,r.user=new te.u(t,n.user),r}),e)}(te.Yb);var ai=function(e){function t(t){var n=t.userId,r=t.token,a=e.call(this)||this;return a.method=te.a.POST,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/gcm"),a.params={gcm_reg_token:r,always_push:!0},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?te.p[n.type.toLowerCase()]:te.p.UNKNOWN,r.user=new te.u(t,n.user),r}),e)}(te.Yb);var ii=function(e){function t(t){var n=t.userId,r=t.token,a=e.call(this)||this;return a.method=te.a.DELETE,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new te.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(te.Yb);var si=function(e){function t(t){var n=t.userId,r=t.token,a=e.call(this)||this;return a.method=te.a.DELETE,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new te.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(te.Yb);var oi=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.DELETE,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/apns"),r}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?te.p[n.type.toLowerCase()]:te.p.UNKNOWN,r.user=new te.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(te.Yb);var li=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.DELETE,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/gcm"),r}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?te.p[n.type.toLowerCase()]:te.p.UNKNOWN,r.user=new te.u(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(te.Yb);var ci=function(e){function t(t){var n=t.userId,r=t.type,a=t.token,i=t.ts,s=e.call(this)||this;return s.method=te.a.GET,s.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),s.params={created_ts:i,token:a},s}return Object(te.A)(t,e),t}(te.Wb),ui=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?te.p[n.type.toLowerCase()]:te.p.UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return Object(te.A)(t,e),t}(te.Yb),di=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return Object(te.A)(t,e),t}(te.Wb),hi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(te.A)(t,e),t}(te.Yb),fi=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,a=e.call(this)||this;return a.method=te.a.PUT,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),a.params={auto_accept:r},a}return Object(te.A)(t,e),t}(te.Wb),pi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(te.A)(t,e),t}(te.Yb),mi=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(te.A)(t,e),t}(te.Wb),bi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(te.A)(t,e),t}(te.Yb),_i=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,a=t.startHour,i=t.startMin,s=t.endHour,o=t.endMin,l=t.timezone,c=e.call(this)||this;return c.method=te.a.PUT,c.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference"),c.params={do_not_disturb:r,start_hour:a,start_min:i,end_hour:s,end_min:o,timezone:l},c}return Object(te.A)(t,e),t}(te.Wb),gi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(te.A)(t,e),t}(te.Yb),vi=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(te.A)(t,e),t}(te.Wb),Ei=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(te.A)(t,e),t}(te.Yb),yi=function(e){function t(t){var n=t.userId,r=t.snoozeOn,a=t.startTs,i=t.endTs,s=e.call(this)||this;return s.method=te.a.PUT,s.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference"),s.params={snooze_enabled:r,snooze_start_ts:a,snooze_end_ts:i},s}return Object(te.A)(t,e),t}(te.Wb),Oi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(te.A)(t,e),t}(te.Yb),Ci=function(e){function t(t){var n=t.userId,r=t.blockedUserId,a=e.call(this)||this;return a.method=te.a.POST,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/block"),a.params={target_id:r},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.user=new te.u(t,n),r}),e)}(te.Yb);var Ni=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,a=e.call(this)||this;return a.method=te.a.DELETE,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var Ti=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(te.A)(t,e),t}(te.Wb),Si=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(te.A)(t,e),t}(te.Yb),Ii=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,a=e.call(this)||this;return a.method=te.a.PUT,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference"),a.params={push_trigger_option:r},a}return Object(te.A)(t,e),t}(te.Wb),Ai=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(te.A)(t,e),t}(te.Yb),wi=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/template"),r}return Object(te.A)(t,e),t}(te.Wb),Mi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(te.A)(t,e),t}(te.Yb),ji=function(e){function t(t){var n=t.userId,r=t.templateName,a=e.call(this)||this;return a.method=te.a.PUT,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push/template"),a.params={name:r},a}return Object(te.A)(t,e),t}(te.Wb),Ri=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(te.A)(t,e),t}(te.Yb),Ui=function(e){function t(t){var n=t.userId,r=t.token,a=e.call(this)||this;return a.method=te.a.GET,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/friends/changelogs"),a.params={token:r},a}return Object(te.A)(t,e),t}(te.Wb),Li=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new te.u(t,e)})),updatedUsers:n.updated.map((function(e){return new te.u(t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return Object(te.A)(t,e),t}(te.Yb),ki=function(e){function t(t){var n=t.userId,r=t.discoveries,a=e.call(this)||this;return a.method=te.a.PUT,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/friend_discoveries"),a.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},a}return Object(te.A)(t,e),t}(te.Wb),Di=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return Object(te.A)(t,e),t}(te.Yb),xi=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,a=e.call(this)||this;return a.method=te.a.DELETE,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/friend_discoveries"),a.params={friend_discovery_keys:r},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var Pi=function(e){function t(t){var n=t.userId,r=t.userIds,a=e.call(this)||this;return a.method=te.a.POST,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/friends"),a.params={user_ids:r},a}return Object(te.A)(t,e),t}(te.Wb),Fi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new te.u(t,e)})),r}return Object(te.A)(t,e),t}(te.Yb),Hi=function(e){function t(t){var n=t.userId,r=t.userIds,a=e.call(this)||this;return a.method=te.a.DELETE,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/friends"),a.params={user_ids:r},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var Gi=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(n,"/allow_friend_discovery"),r.params={},r}return Object(te.A)(t,e),t}(te.Wb),Bi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return Object(te.A)(t,e),t}(te.Yb),zi=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,a=e.call(this)||this;return a.method=te.a.PUT,a.path="".concat(te.Ub,"/").concat(n,"/allow_friend_discovery"),a.params={allow_friend_discovery:r},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var Vi,qi=function(e){function t(){var t=e.call(this)||this;return t.method=te.a.GET,t.path=te.ac,t}return Object(te.A)(t,e),t}(te.Wb),Ki=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new Ya(n),r}return Object(te.A)(t,e),t}(te.Yb),Wi=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.ac,"/").concat(n),r}return Object(te.A)(t,e),t}(te.Wb),Yi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new Wa(n),r}return Object(te.A)(t,e),t}(te.Yb),Qi=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.bc,"/").concat(n),r}return Object(te.A)(t,e),t}(te.Wb),Xi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new Ka(n),r}return Object(te.A)(t,e),t}(te.Yb),Zi=function(e){function t(){var t=e.call(this)||this;return t.method=te.a.GET,t.path="".concat(te.cc),t}return Object(te.A)(t,e),t}(te.Wb),$i=function(e){function t(t,n){var r,a=this,i=null!=n?n:{};return(a=e.call(this,t,n)||this).uikitConfiguration={string:JSON.stringify(i),json:i},a.updatedAt=null!==(r=null==n?void 0:n.updated_at)&&void 0!==r?r:0,a}return Object(te.A)(t,e),t}(te.Yb),Ji=function(){function e(e,t,n){var r=this;this._storeInitialized=!1,this._iid=e,this.options=t;var a=te.v.of(e),i=a.sdkState,s=a.cacheContext,o=a.dispatcher,l=a.sessionManager,c=a.requestQueue,u=a.logger,d=a.userEventHandlers,h=a.appStateToggleEnabled;this._onlineDetector=new ei({logger:u,connectionDelegate:{reconnect:function(){var t=te.v.of(e),n=t.sdkState,r=t.connectionManager,a=t.sessionManager;a.session.hasSession?"foreground"===n.appState&&r.resetAndReconnect():r.connect(a.session.authToken),o.dispatch(new qa)},disconnect:function(){te.v.of(e).connectionManager.disconnect()}}});var f=new Ha(e,{localCacheEnabled:s.localCacheEnabled,enableAutoResend:s.localCacheConfig.enableAutoResend,dispatcher:o,sdkState:i,logger:u});n.forEach((function(t){t.init(e,{sdkState:i,cacheContext:s,dispatcher:o,sessionManager:l,requestQueue:c,logger:u,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new Ja({isEnabled:h}),this._appStateChangeDetector.on("resume",(function(){u.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){u.debug("the page freezes"),r.setBackgroundState()})),o.on((function(t){var n;if(t instanceof te.pc)t.stateType===te.qc.CONNECTED&&f.processNonAutoResendRegisteredPendingMessages();else if(t instanceof te.w){if("USEV"===t.code){var a=t.as(Va).event;if(a.category===Da.FRIEND_DISCOVERED){var o=Ga.getDataAsFriendDiscoveredEvent(e,a).friendDiscoveries;Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,d.forEach((function(e){e.onFriendsDiscovered&&e.onFriendsDiscovered(o)}))]}))}))}))}}}else if(t instanceof te.d){var l=te.v.of(r._iid).subscribedUnreadMessageCount,c=!1,h=t.ts;if("number"==typeof h&&h>l.ts){if(l.all!==t.all&&(c=!0),l.all=t.all>=0?t.all:0,t.customTypes)for(var p in t.customTypes)l.customTypes[p]!==t.customTypes[p]&&(c=!0),l.customTypes[p]=t.customTypes[p];c=c&&l.ts>0,l.ts=h}c&&Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,d.forEach((function(e){e.onTotalUnreadMessageCountChanged&&e.onTotalUnreadMessageCountChanged({groupChannelCount:l.all,feedChannelCount:l.feed,customTypeUnreadCount:l.customTypes}),e.onTotalUnreadMessageCountUpdated&&e.onTotalUnreadMessageCountUpdated(l.all,l.customTypes)}))]}))}))}))}else t instanceof te.f?(s.preference.set(r._getUserProfileCacheKey(i.userId),te.g.payloadify(t.userProfile)),(null===(n=t.userProfile.appInfo.notificationInfo)||void 0===n?void 0:n.isEnabled)&&s.preference.set(Object(te.h)(r.appId),{value:!0})):t instanceof te.i&&t.error&&t.error.isSessionInvalidatedError&&(u.debug("session revoked."),r.disconnect())}))}return e.init=function(t){var n=t.appId,r=t.appVersion,a=t.modules,i=void 0===a?[]:a,s=t.options,o=void 0===s?new te.s:s,l=t.debugMode,c=void 0!==l&&l,u=t.customApiHost,d=t.customWebSocketHost,h=t.newInstance,f=void 0!==h&&h,p=t.logLevel,m=t.localCacheEnabled,b=void 0!==m&&m,_=t.localCacheConfig,g=void 0===_?new te.l:_,v=t.localCacheEncryption,E=t.useAsyncStorageStore,y=void 0===E?null:E,O=t.appStateToggleEnabled,C=void 0===O||O;if(!Vi||f){var N="su-".concat(Object(te.dc)()),T=null!=v?v:{encrypt:function(e){return e},decrypt:function(e){return e}},S=new ra({encryption:T});c||(S=Object(te.ec)()?y?new oa({AsyncStorage:y,encryption:T}):new ra({encryption:T}):new sa({encryption:T})),new te.v(N,{appId:n,appVersion:r,options:o,apiHost:null!=u?u:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=d?d:"wss://ws-".concat(n,".sendbird.com"),store:S,encryption:T,logLevel:p,localCacheEnabled:b,localCacheConfig:g,debugMode:c,appStateToggleEnabled:C});var I=[new Ua,new ka],A=new e(N,o,Object(te.fc)(Object(te.fc)([],Object(te.gc)(i),!1),Object(te.gc)(I),!1));return Vi||(Vi=A),A}return Vi},Object.defineProperty(e,"instance",{get:function(){return Vi},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return te.mc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return te.v.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){var e=te.v.of(this._iid).appInfo;return null!=e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var e;return null!==(e=te.v.of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return!!te.v.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return te.v.of(this._iid).logger.level},set:function(e){te.v.of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return te.v.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCacheConfig",{get:function(){var e=te.v.of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return te.v.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var e;return null!==(e=te.v.of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var e=te.v.of(this._iid).connectionManager;return e.isConnected?te.c.OPEN:e.isConnecting?te.c.CONNECTING:te.c.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var e=te.v.of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){var e;return null!==(e=this._fcmPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){var e;return null!==(e=this._apnsPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),e.prototype._getNestDBVersion=function(){return 3},e.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},e.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},e.prototype.getMemoryStoreForDebugging=function(){var e=te.v.of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof ra?n.store:null;throw te.hc.debugModeRequired},e.prototype.addExtension=function(e,t){var n=te.v.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&n.extensions&&(n.extensions[e]=t)},e.prototype.addSendbirdExtensions=function(e,t,n){var r,a,i=te.v.of(this._iid),s=i.logger,o=i.sdkState,l=new RegExp(te.j);if(0===e.length)return s.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(e.find((function(e){return!l.test(e.version)})))return s.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(n)try{for(var c=Object(te.ic)(Object.entries(n)),u=c.next();!u.done;u=c.next()){var d=Object(te.gc)(u.value,2),h=d[0],f=d[1];if(/&|=/.test(h)||/&|=/.test(f))return s.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(e){r={error:e}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return o.sendbirdRuntimeEnvironment={sendbirdExtensions:e,deviceOS:t,customData:n},!0},e.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},e.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},e.prototype._safeInitializeStore=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:t=te.v.of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.replaceStore(new ra),[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.initializeCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:if(t=te.v.of(this._iid),n=t.sdkState,r=t.cacheContext,a=t.dispatcher,i=t.logger,n.userId&&n.userId===e)return[3,9];if(s="sendbird@".concat(n.appId,"/").concat(e,".db"),!r.localCacheEnabled)return[3,7];c.label=1;case 1:return c.trys.push([1,4,,6]),r.nestdb&&r.nestdb.state!==ia.CLOSED&&r.nestdb.name===s?[3,3]:((o=r.nestdb=new ca({name:"sendbird@".concat(n.appId,"/").concat(e,".db"),version:this._getNestDBVersion(),store:r.store})).on("upgrade",Za(o)),o.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,o.on("upgrade",Za(o))})),[4,o.open()]);case 2:c.sent(),this._storeInitialized=!0,a.dispatch(new Ba(this._iid,{userId:e})),c.label=3;case 3:return n.userId=e,[3,6];case 4:return l=c.sent(),i.warn("Nest DB Open Failed. ",l),[4,this._safeInitializeStore(s)];case 5:throw c.sent(),n.userId=e,te.hc.databaseError;case 6:return[3,9];case 7:return[4,this._safeInitializeStore(s)];case 8:c.sent(),n.userId=e,c.label=9;case 9:return[2]}}))}))},e.prototype.getCacheDataSize=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return(e=te.v.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},e.prototype.clearCachedData=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return(e=te.v.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.clearCachedMessages=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r=this;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=va.of(this._iid),n=_a.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},e.prototype._ready=function(e,t,n){return void 0===n&&(n={}),Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o,l,c,u;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return Object(te.jc)(Object(te.B)("string",e)&&Object(te.B)("string",t,!0)).throw(te.hc.invalidParameters),r=te.v.of(this._iid),a=r.sdkState,i=r.cacheContext,s=r.connectionManager,o=r.statLogCollector,l=n.errorForOtherUser,a.userId?[3,2]:[4,s.logout()];case 1:case 3:return d.sent(),[3,5];case 2:return a.userId===e?[3,5]:l?[3,4]:[4,s.logout()];case 4:throw l;case 5:return d.trys.push([5,7,,8]),[4,this.initializeCache(e)];case 6:return d.sent(),te.v.of(this._iid).dispatcher.dispatch(new za),[3,8];case 7:return d.sent(),c=te.v.of(this._iid).logger,i.localCacheEnabled=!1,c.warn("Cache initialization failed - cache is not available."),[3,8];case 8:return[4,i.preference.init(this._getPreferenceCacheKey(e),this._getNestDBVersion())];case 9:return d.sent(),[4,i.preference.get(this._getUserProfileCacheKey(e))];case 10:return(u=d.sent())&&new te.g(this._iid,u).apply(),[4,o.init("sendbird@".concat(a.appId,"/").concat(e,".statlog"))];case 11:return d.sent(),[2]}}))}))},e.prototype.authenticateFeed=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return n=te.v.of(this._iid),r=n.sessionManager,a=n.connectionManager,[4,this._ready(e,t,{errorForOtherUser:a.isConnected?te.hc.alreadyConnectedAsAnotherUser:void 0})];case 1:return i.sent(),r.session.hasLessServiceScopeThan([te.m.FEED])?[4,r.authenticateFeed(e,t)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,this.currentUser]}}))}))},e.prototype.connect=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._ready(e,t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,te.v.of(this._iid).connectionManager.connect(t)];case 3:return n.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},e.prototype.reconnect=function(){var e=te.v.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.session.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},e.prototype.disconnect=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return e=te.v.of(this._iid),t=e.connectionManager,n=e.requestQueue,e.sessionManager,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.logout()];case 1:return r.sent(),[4,this.clearCachedData()];case 2:return r.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return e=te.v.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket()];case 1:return r.sent(),[2]}}))}))},e.prototype.setBackgroundState=function(){var e=te.v.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background())},e.prototype.setForegroundState=function(){var e=te.v.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.dispatcher,a=e.logger;"background"===n.appState&&(n.appState="foreground",a.debug("going foreground state"),t.resetAndReconnect(),r.dispatch(new qa))},e.prototype.setSessionHandler=function(e){Object(te.jc)(e instanceof $n).throw(te.hc.invalidParameters),te.v.of(this._iid).sessionManager.handler=e},e.prototype.addUserEventHandler=function(e,t){Object(te.jc)(Object(te.B)("string",e)&&t instanceof Jn).throw(te.hc.invalidParameters),te.v.of(this._iid).userEventHandlers.set(e,t)},e.prototype.removeUserEventHandler=function(e){te.v.of(this._iid).userEventHandlers.delete(e)},e.prototype.removeAllUserEventHandler=function(){te.v.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(e,t){Object(te.jc)(Object(te.B)("string",e)&&t instanceof Zn).throw(te.hc.invalidParameters),te.v.of(this._iid).connectionHandlers.set(e,t)},e.prototype.removeConnectionHandler=function(e){te.v.of(this._iid).connectionHandlers.delete(e)},e.prototype.removeAllConnectionHandler=function(){te.v.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new nr(this._iid,e)},e.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new ir(this._iid,e)},e.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new lr(this._iid,e)},e.prototype.createMessageSearchQuery=function(e){return new ja(this._iid,e)},e.prototype.createPollListQuery=function(e){return new te.kc(this._iid,Object(te.Xb)({},e))},e.prototype.createPollVoterListQuery=function(e){return new te.nc(this._iid,Object(te.Xb)({},e))},e.prototype.buildUserFromSerializedData=function(e){var t=Object(te.oc)(e);return new te.u(this._iid,te.u.payloadify(t))},e.prototype.updateCurrentUserInfo=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},Qa),e),Object(te.jc)(function(e){return Object(te.Zb)(e.profileImage,!0)&&Object(te.B)("string",e.profileUrl,!0)&&Object(te.B)("string",e.nickname,!0)}(t)).throw(te.hc.invalidParameters),this.currentUser?(n=te.v.of(this._iid),r=n.sdkState,a=n.requestQueue,i=new ti(Object(te.Xb)({userId:r.userId},t)),[4,a.send(i)]):[3,2];case 1:return s=l.sent(),o=s.as(ni).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=o.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=o.profileUrl)),[2,o];case 2:throw te.hc.connectionRequired}}))}))},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),this.currentUser?(t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new ti({userId:n.userId,preferredLanguages:e}),[4,r.send(a)]):[3,2];case 1:return i=o.sent(),s=i.as(ni).user,this.currentUser&&(this.currentUser.preferredLanguages=s.preferredLanguages),[2,s];case 2:throw te.hc.connectionRequired}}))}))},e.prototype.registerFCMPushTokenForCurrentUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s=this;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:if(Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),!this.currentUser)return[3,6];o.label=1;case 1:return o.trys.push([1,4,,5]),t=te.v.of(this._iid),n=t.sessionManager,r=t.sdkState,a=t.requestQueue,n.hasDeviceToken(te.p.FCM,e)?[2,te.n.SUCCESS]:(i=new ai({userId:r.userId,token:e}),[4,a.send(i)]);case 2:return o.sent(),[4,Object(te.o)((function(){return Object(te.Ib)(s,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return n.setDeviceToken(te.p.FCM,e),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return o.sent(),this._fcmPushToken="",[2,te.n.SUCCESS];case 4:return o.sent(),[2,te.n.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,te.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o=this;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:if(Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),t=te.v.of(this._iid),n=t.sessionManager,r=t.sdkState,a=t.requestQueue,i=new si({userId:r.userId,token:e}),[4,a.send(i)];case 2:return s=l.sent().lastDeletedAt,[4,Object(te.o)((function(){return Object(te.Ib)(o,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return n.unsetDeviceToken(te.p.FCM,e),n.setDeviceTokenDeletedAt(s),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._fcmPushToken="",[2,te.n.SUCCESS];case 4:return l.sent(),[2,te.n.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,te.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s=this;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return this.currentUser?(e=te.v.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,a=new li({userId:n.userId}),[4,r.send(a)]):[3,3];case 1:return i=o.sent().lastDeletedAt,[4,Object(te.o)((function(){return Object(te.Ib)(s,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(te.p.FCM),t.setDeviceTokenDeletedAt(i),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.registerAPNSPushTokenForCurrentUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s=this;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:if(Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),!this.currentUser)return[3,6];o.label=1;case 1:return o.trys.push([1,4,,5]),t=te.v.of(this._iid),n=t.sessionManager,r=t.sdkState,a=t.requestQueue,n.hasDeviceToken(te.p.APNS,e)?[2,te.n.SUCCESS]:(i=new ri({userId:r.userId,token:e}),[4,a.send(i)]);case 2:return o.sent(),[4,Object(te.o)((function(){return Object(te.Ib)(s,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return n.setDeviceToken(te.p.APNS,e),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return o.sent(),this._apnsPushToken="",[2,te.n.SUCCESS];case 4:return o.sent(),[2,te.n.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,te.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o=this;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:if(Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),t=te.v.of(this._iid),n=t.sessionManager,r=t.sdkState,a=t.requestQueue,i=new ii({userId:r.userId,token:e}),[4,a.send(i)];case 2:return s=l.sent().lastDeletedAt,[4,Object(te.o)((function(){return Object(te.Ib)(o,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return n.unsetDeviceToken(te.p.APNS,e),n.setDeviceTokenDeletedAt(s),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._apnsPushToken="",[2,te.n.SUCCESS];case 4:return l.sent(),[2,te.n.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,te.n.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s=this;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return this.currentUser?(e=te.v.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,a=new oi({userId:n.userId}),[4,r.send(a)]):[3,3];case 1:return i=o.sent().lastDeletedAt,[4,Object(te.o)((function(){return Object(te.Ib)(s,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(te.p.APNS),t.setDeviceTokenDeletedAt(i),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.getChannelInvitationPreference=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new di({userId:t.userId}),[4,n.send(r)];case 1:return[2,{autoAccept:a.sent().as(hi).autoAccept}]}}))}))},e.prototype.setChannelInvitationPreference=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("boolean",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new fi({userId:n.userId,willAutoAccept:e}),[4,r.send(a)];case 1:return[2,{autoAccept:i.sent().as(pi).autoAccept}]}}))}))},e.prototype.getDoNotDisturb=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new mi({userId:t.userId}),[4,n.send(r)];case 1:return[2,a.sent().as(bi).preference]}}))}))},e.prototype.setDoNotDisturb=function(e,t,n,r,a,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=""),Object(te.Ib)(this,void 0,void 0,(function(){var s,o,l,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return Object(te.jc)(Object(te.B)("boolean",e)&&Object(te.B)("number",t)&&Object(te.B)("number",n)&&Object(te.B)("number",r)&&Object(te.B)("number",a)&&Object(te.B)("string",i)).throw(te.hc.invalidParameters),s=te.v.of(this._iid),o=s.sdkState,l=s.requestQueue,c=new _i({userId:o.userId,doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:a,timezone:i}),[4,l.send(c)];case 1:return[2,u.sent().as(gi).preference]}}))}))},e.prototype.getSnoozePeriod=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new vi({userId:t.userId}),[4,n.send(r)];case 1:return[2,a.sent().as(Ei).snoozePeriod]}}))}))},e.prototype.setSnoozePeriod=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(Object(te.B)("boolean",e)&&Object(te.B)("number",t)&&Object(te.B)("number",n)).throw(te.hc.invalidParameters),r=te.v.of(this._iid),a=r.sdkState,i=r.requestQueue,s=new yi({userId:a.userId,snoozeOn:e,startTs:t,endTs:n}),[4,i.send(s)];case 1:return[2,o.sent().as(Oi).snoozePeriod]}}))}))},e.prototype.getMyPushTokensByToken=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c,u,d,h,f;return Object(te.Tb)(this,(function(p){switch(p.label){case 0:return Object(te.jc)(Object(te.B)("string",e)&&Object(te.q)(te.p,t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid),r=n.sdkState,a=n.requestQueue,i=n.sessionManager,s=new ci({userId:r.userId,type:t,token:e}),[4,a.send(s)];case 1:o=p.sent(),l=o.as(ui).pushTokens;try{for(c=Object(te.ic)(l.deviceTokens),u=c.next();!u.done;u=c.next())d=u.value,i.setDeviceToken(l.type,d)}catch(e){h={error:e}}finally{try{u&&!u.done&&(f=c.return)&&f.call(c)}finally{if(h)throw h.error}}return[4,i.saveDeviceToken()];case 2:return p.sent(),[2,l]}}))}))},e.prototype.getPushTriggerOption=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Ti({userId:t.userId}),[4,n.send(r)];case 1:return[2,a.sent().as(Si).pushTriggerOption]}}))}))},e.prototype.setPushTriggerOption=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.q)(te.r,e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Ii({userId:n.userId,pushTriggerOption:e}),[4,r.send(a)];case 1:return[2,i.sent().as(Ai).pushTriggerOption]}}))}))},e.prototype.getPushTemplate=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new wi({userId:t.userId}),[4,n.send(r)];case 1:return[2,a.sent().as(Mi).name]}}))}))},e.prototype.setPushTemplate=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.q)(te.t,e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new ji({userId:n.userId,templateName:e}),[4,r.send(a)];case 1:return[2,i.sent().as(Ri).name]}}))}))},e.prototype.blockUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(e instanceof te.u||Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Ci({userId:n.userId,blockedUserId:e instanceof te.u?e.userId:e}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},e.prototype.blockUserWithUserId=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this.blockUser(e)]}))}))},e.prototype.unblockUser=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(e instanceof te.u||Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Ni({userId:n.userId,unblockedUserId:e instanceof te.u?e.userId:e}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},e.prototype.unblockUserWithUserId=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this.unblockUser(e)]}))}))},e.prototype.getFriendChangeLogsByToken=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Ui({userId:n.userId,token:e}),[4,r.send(a)];case 1:return[2,i.sent().as(Li).changelogs]}}))}))},e.prototype.getAllowFriendDiscovery=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Gi({userId:t.userId}),[4,n.send(r)];case 1:return[2,a.sent().as(Bi).allowFriendDiscovery]}}))}))},e.prototype.setAllowFriendDiscovery=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("boolean",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new zi({userId:n.userId,allowFriendDiscovery:e}),[4,r.send(a)];case 1:return i.sent(),[2,e]}}))}))},e.prototype.uploadFriendDiscoveries=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new ki({userId:n.userId,discoveries:e}),[4,r.send(a)];case 1:return[2,i.sent().as(Di).friendDiscoveryRequestId]}}))}))},e.prototype.deleteFriendDiscovery=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},e.prototype.deleteFriendDiscoveries=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new xi({userId:n.userId,discoveryKeys:e}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},e.prototype.addFriends=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Pi({userId:n.userId,userIds:e}),[4,r.send(a)];case 1:return[2,i.sent().as(Fi).users]}}))}))},e.prototype.deleteFriend=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this.deleteFriends([e])]}))}))},e.prototype.deleteFriends=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Hi({userId:n.userId,userIds:e}),[4,r.send(a)];case 1:return i.sent(),[2]}}))}))},e.prototype.getAllEmoji=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new qi,[4,e.send(t)];case 1:return[2,n.sent().as(Ki).emojiContainer]}}))}))},e.prototype.getEmojiCategory=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=te.v.of(this._iid).requestQueue,n=new Wi({categoryId:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Yi).emojiCategory]}}))}))},e.prototype.getEmoji=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=te.v.of(this._iid).requestQueue,n=new Qi({key:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Xi).emoji]}}))}))},e.prototype.getUIKitConfiguration=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return e=te.v.of(this._iid),Object(te.jc)(e.hasExtension("sb_uikit")).throw(te.hc.notSupportedError),t=e.requestQueue,n=new Zi,[4,t.send(n)];case 1:return[2,r.sent().as($i).uikitConfiguration]}}))}))},e}();const es=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});var ts;!function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"}(ts||(ts={}));var ns,rs=function(){function e(e){var t;this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=null!==(t=e.data)&&void 0!==t?t:{},this.ts=e.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===te.y.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===te.y.OPEN},enumerable:!1,configurable:!0}),e}(),as=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.event=new rs(r),a}return Object(te.A)(t,e),t}(te.w),is=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this,i=r.data.operators,s=void 0===i?[]:i;return a.operators=s.map((function(e){return new te.u(a._iid,e)})),a}return Object(te.A)(t,e),t}(as),ss=function(){function e(e){var t=e.top,n=void 0===t?Number.MAX_SAFE_INTEGER:t,r=e.bottom,a=void 0===r?0:r;this.top=n,this.bottom=a}return e.prototype.includes=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.every((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.overlap=function(e){return this.includes(e.top)||this.includes(e.bottom)},e.prototype.intersect=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.extends=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.top=Math.min.apply(Math,Object(te.fc)([this.top],Object(te.gc)(e),!1)),this.bottom=Math.max.apply(Math,Object(te.fc)([this.bottom],Object(te.gc)(e),!1))},e}(),os=function(e){function t(t,n){var r=e.call(this,t)||this;return r._logger=n.logger,r._sdkState=n.sdkState,r._sessionManager=n.sessionManager,r._requestQueue=n.requestQueue,r._dispatcher=n.dispatcher,r._cacheContext=n.cacheContext,r._channelType=n.channelType,r}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"_messageCache",{get:function(){return va.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return _a.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_messageBroadcast",{get:function(){return ya.of(this._iid)},enumerable:!1,configurable:!0}),t.prototype.subscribeMessageEvent=function(e,t){this._messageBroadcast.subscribe(e,t)},t.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},t.prototype.getMessageFromCache=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},t.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,filter:n,exactMatch:!0})];case 1:return[2,r.sent()]}}))}))},t.prototype.getMessagesFromCache=function(e,t,n,r,a,i){return void 0===a&&(a=100),void 0===i&&(i=!0),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:a,filter:r,backward:"next"===n,inclusive:i})];case 1:return[2,s.sent()]}}))}))},t.prototype.getPollMessagesFromCache=function(e,t,n,r){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:r,filter:n,backward:!1,isPollOnly:!0})];case 1:return[2,a.sent()]}}))}))},t.prototype.getCachedMessageCountBetween=function(e,t,n,r){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return[4,this._messageCache.countBetween(e,t,new ss({top:n,bottom:r}))];case 1:return[2,a.sent()]}}))}))},t.prototype.getUnsentMessagesFromCache=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:t})];case 1:return[2,n.sent()]}}))}))},t.prototype.removeFailedMessageFromCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return t.sent(),[2]}}))}))},t}(te.I),ls=function(e){function t(t,n,r){var a,i,s,o,l=this;(l=e.call(this,t,"ADMM",r)||this).message=new ye(t,r);var c=te.v.of(t).sdkState;return l.isMentioned=Object(te.sb)(l.message.mentionType,null!==(s=null!==(a=l.message.mentionedUserIds)&&void 0!==a?a:null===(i=l.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})))&&void 0!==s?s:[],c.userId),l.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,l}return Object(te.A)(t,e),t}(te.w),cs=function(e){function t(t,n,r){var a,i,s,o,l,c=this;(c=e.call(this,t,"AEDI",r)||this).message=new ye(t,r);var u=te.v.of(t).sdkState;return c.mentionCountChange=Object(te.Cb)({mentionType:null===(a=r.old_values)||void 0===a?void 0:a.mention_type,mentionedUserIds:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mentioned_user_ids)&&void 0!==s?s:[]},Object(te.lc)({mentionType:c.message.mentionType,mentionedUserIds:null!==(o=c.message.mentionedUserIds)&&void 0!==o?o:null===(l=c.message.mentionedUsers)||void 0===l?void 0:l.map((function(e){return e.userId}))}),u.userId),c}return Object(te.A)(t,e),t}(te.w),us=function(e){function t(t,n,r){var a=e.call(this,t,"MRCT",r)||this;return a.channelUrl=r.channel_url,a.channelType=r.channel_type,a.event=new oe(r),a}return Object(te.A)(t,e),t}(te.w),ds=function(e){function t(t,n,r){var a=e.call(this,t,"MTHD",r)||this;return a.event=new Na(t,r),a}return Object(te.A)(t,e),t}(te.w),hs=function(e){function t(t,n,r){var a=e.call(this,t,"MCNT",r)||this;return a.groupChannelMemberCounts=r.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),a.openChannelMemberCounts=r.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),a}return Object(te.A)(t,e),t}(te.w),fs=function(e){function t(t,n,r){var a=e.call(this,t,"PEDI",r)||this;return a.event=new La(t,r),a.status=Object(te.Qb)(r.poll.status)||r.poll.status,a.channelUrl=r.channel_url,a.channelType=r.channel_type,a}return Object(te.A)(t,e),t}(te.w),ps=function(){this.onUserMuted=te.yb,this.onUserUnmuted=te.yb,this.onUserBanned=te.yb,this.onUserUnbanned=te.yb,this.onChannelChanged=te.yb,this.onChannelDeleted=te.yb,this.onChannelFrozen=te.yb,this.onChannelUnfrozen=te.yb,this.onOperatorUpdated=te.yb,this.onChannelMemberCountChanged=te.yb,this.onMetaDataCreated=te.yb,this.onMetaDataUpdated=te.yb,this.onMetaDataDeleted=te.yb,this.onMetaCounterCreated=te.yb,this.onMetaCounterUpdated=te.yb,this.onMetaCounterDeleted=te.yb,this.onMessageReceived=te.yb,this.onMessageUpdated=te.yb,this.onMessageDeleted=te.yb,this.onMentionReceived=te.yb,this.onReactionUpdated=te.yb,this.onThreadInfoUpdated=te.yb},ms=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._channels=new Map,t._enteredChannelUrls=[],t}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(t){return e._channels.get(t)})).filter((function(e){return!!e}))},enumerable:!1,configurable:!0}),t.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},t.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},t.prototype.exit=function(e){var t=this._enteredChannelUrls.indexOf(e);t>=0&&this._enteredChannelUrls.splice(t,1)},t.prototype.exitAll=function(){this._enteredChannelUrls=[]},t.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this._channels.get(e)]}))}))},t.prototype.upsert=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n=this;return Object(te.Tb)(this,(function(r){return t=[],e.forEach((function(e){if(n._channels.has(e.url)){var r=n._channels.get(e.url);Object.assign(r,e),t.push(r)}else n._channels.set(e.url,e),t.push(e)})),[2,t]}))}))},t.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return this._channels.delete(e),this.exit(e),[2]}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},t}(te.I),bs={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},_s=function(e){function t(t){var n=t.channelUrl,r=t.isInternalCall,a=e.call(this)||this;return a.method=te.a.GET,a.path="".concat(r?te.Rb:te.Sb,"/").concat(encodeURIComponent(n)),a}return Object(te.A)(t,e),t}(te.Wb),gs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new Ls(t,n),r}return Object(te.A)(t,e),t}(te.Yb),vs=function(e){function t(t){var n=this,r=t.channelUrl,a=t.coverUrlOrImage,i=t.name,s=t.data,o=t.customType,l=t.operatorUserIds,c=t.isEphemeral;return(n=e.call(this)||this).method=te.a.POST,n.path=te.Sb,n.params=Object(te.Vb)(Object(te.lc)({channel_url:r,cover_url:Object(te.B)("string",a)?a:null,cover_file:Object(te.Zb)(a)?a:null,name:i,data:s,custom_type:o,operators:l,is_ephemeral:c})),n}return Object(te.A)(t,e),t}(te.Wb);ns=te.Yb,Object(te.A)((function(e,t){var n=ns.call(this,e,t)||this;return n.channel=new Ls(e,t),n}),ns);var Es=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"ENTR",payload:{channel_url:n},ackRequired:!0})||this}return Object(te.A)(t,e),t}(te.qb),ys=function(e){function t(t,n,r){var a,i,s=this;return s=e.call(this,t,"SYEV",r)||this,r.data&&(s.participantCount=null!==(a=r.data.participant_count)&&void 0!==a?a:0,s.user=new te.u(t,r.data),s.ts=null!==(i=r.data.edge_ts)&&void 0!==i?i:0),s}return Object(te.A)(t,e),t}(as),Os=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"EXIT",payload:{channel_url:n},ackRequired:!0})||this}return Object(te.A)(t,e),t}(te.qb),Cs=function(e){function t(t,n,r){var a,i,s=this;return s=e.call(this,t,"EXIT",r)||this,r.data&&(s.participantCount=null!==(a=r.data.participant_count)&&void 0!==a?a:0,s.user=new te.u(t,r.data),s.ts=null!==(i=r.data.edge_ts)&&void 0!==i?i:0),s}return Object(te.A)(t,e),t}(as),Ns={},Ts=function(e){function t(t,n){var r=e.call(this,t,Object(te.Xb)(Object(te.Xb)({},n),{channelType:te.y.OPEN}))||this;return r.subscribeChannelEvent=te.yb,r.unsubscribeChannelEvent=te.yb,r.refreshChannel=function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,Object(te.yb)()]}))}))},r._openChannelCache=new ms(t),r._openChannelHandlers=new Map,r._dispatcher.on((function(e){var t,n;if(e instanceof te.w)r._handleEvent(e);else if(e instanceof te.pc&&e.stateType===te.qc.CONNECTED){var a=r._openChannelCache.enteredChannels;try{for(var i=Object(te.ic)(a),s=i.next();!s.done;s=i.next())s.value.enter()}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}})),Ns[t]||(Ns[t]=r),r}return Object(te.A)(t,e),t.of=function(e){return Ns[e]},t.prototype.buildOpenChannelFromSerializedData=function(e){var t=Object(te.oc)(e);return new Ls(this._iid,Ls.payloadify(t))},t.prototype.getChannelFromCache=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},t.prototype.upsertChannelsToCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.removeChannelsFromCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),t=Object(te.ic)(e),n=t.next(),o.label=1;case 1:return n.done?[3,4]:(r=n.value,[4,this._openChannelCache.remove(r)]);case 2:o.sent(),o.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return a=o.sent(),i={error:a},[3,7];case 6:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},t.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},t.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},t.prototype._handleEvent=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N,T,S,I,A,w,M,j,R,U,L,k,D,x,P,F,H,G,B,z,V,q,K,W,Y,Q,X,Z,$,J,ee,ne,re,ae,ie,se,oe,le,ce,ue,de,he,fe,pe,me,be=this;return Object(te.Tb)(this,(function(_e){switch(_e.label){case 0:switch(_e.trys.push([0,57,,58]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,56];case 1:return a=null,"MESG"===e.code?a=e.as(mn):"FILE"===e.code?a=e.as(je):"ADMM"!==e.code&&"BRDM"!=e.code||(a=e.as(ls)),a?(t=a.message,n=a.isMentioned,t.channelType!==te.y.OPEN?[3,3]:[4,this.getChannel(t.channelUrl,!0)]):[3,3];case 2:r=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,a,i,s,o;return Object(te.Tb)(this,(function(l){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),a=e.next();!a.done;a=e.next())i=a.value,this._openChannelCache.isEnteredChannel(r.url)&&(i.onMessageReceived&&i.onMessageReceived(r,t),n&&i.onMentionReceived&&i.onMentionReceived(r,t))}catch(e){s={error:e}}finally{try{a&&!a.done&&(o=e.return)&&o.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),_e.label=3;case 3:return[3,56];case 4:return a=null,"MEDI"===e.code?a=e.as(_n):"FEDI"===e.code?a=e.as(vn):"AEDI"===e.code&&(a=e.as(cs)),a?(i=a.message,s=a.mentionCountChange,i.channelType!==te.y.OPEN?[3,6]:[4,this.getChannel(i.channelUrl,!0)]):[3,6];case 5:o=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(l){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(o.url)&&(n.onMessageUpdated&&n.onMessageUpdated(o,i),s>0&&n.onMentionReceived&&n.onMentionReceived(o,i))}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_e.label=6;case 6:return[3,56];case 7:return l=e.as(yn),j=l.channelUrl,R=l.channelType,c=l.messageId,R!==te.y.OPEN?[3,9]:[4,this.getChannel(j,!0)];case 8:u=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(u.url)&&n.onMessageDeleted&&n.onMessageDeleted(u,c)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_e.label=9;case 9:return[3,56];case 10:return d=e.as(us),j=d.channelUrl,R=d.channelType,h=d.event,R!==te.y.OPEN?[3,12]:[4,this.getChannel(j,!0)];case 11:f=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(f.url)&&n.onReactionUpdated&&n.onReactionUpdated(f,h)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_e.label=12;case 12:return[3,56];case 13:return(p=e.as(ds).event).channelType!==te.y.OPEN?[3,15]:[4,this.getChannel(p.channelUrl,!0)];case 14:m=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(m.url)&&n.onThreadInfoUpdated&&n.onThreadInfoUpdated(m,p)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_e.label=15;case 15:return[3,56];case 16:b=e.as(hs).openChannelMemberCounts,_=[],_e.label=17;case 17:_e.trys.push([17,22,23,24]),g=Object(te.ic)(b),v=g.next(),_e.label=18;case 18:return v.done?[3,21]:(E=v.value,j=E.channelUrl,G=E.participantCount,y=E.updatedAt,[4,this.getChannelFromCache(j)]);case 19:(O=_e.sent())&&O._updateParticipantCount(G,y)&&_.push(O),_e.label=20;case 20:return v=g.next(),[3,18];case 21:return[3,24];case 22:return C=_e.sent(),pe={error:C},[3,24];case 23:try{v&&!v.done&&(me=g.return)&&me.call(g)}finally{if(pe)throw pe.error}return[7];case 24:return _.length>0?[4,this.upsertChannelsToCache(_)]:[3,26];case 25:N=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelMemberCountChanged&&n.onChannelMemberCountChanged(N)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_e.label=26;case 26:return[3,56];case 27:return T=e.as(fs),S=T.event,I=T.status,j=T.channelUrl,R=T.channelType,j&&R===te.y.OPEN?[4,this.getChannel(j,!0)]:[3,29];case 28:A=_e.sent(),this._dispatcher.dispatch(new te.S({event:S,source:te.x.EVENT_POLL_UPDATED})),Object(te.b)(I===te.Mb?function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollDeleted&&n.onPollDeleted(A,S.pollId)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}:function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollUpdated&&n.onPollUpdated(A,S)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}),_e.label=29;case 29:return[3,56];case 30:return w=e.as(zn),M=w.event,j=w.channelUrl,R=w.channelType,j&&R===te.y.OPEN?[4,this.getChannel(j,!0)]:[3,32];case 31:U=_e.sent(),this._dispatcher.dispatch(new te.N({event:M,source:te.x.EVENT_POLL_VOTED})),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollVoted&&n.onPollVoted(U,M)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_e.label=32;case 32:return[3,56];case 33:if(!(L=e.as(as).event).isOpenChannelEvent)return[3,55];switch(L.category){case ts.CHANNEL_ENTER:return[3,34];case ts.CHANNEL_EXIT:return[3,36];case ts.CHANNEL_OPERATOR_UPDATE:return[3,38];case ts.USER_CHANNEL_MUTE:case ts.USER_CHANNEL_UNMUTE:return[3,40];case ts.USER_CHANNEL_BAN:case ts.USER_CHANNEL_UNBAN:return[3,42];case ts.CHANNEL_FREEZE:case ts.CHANNEL_UNFREEZE:return[3,44];case ts.CHANNEL_DELETED:return[3,46];case ts.CHANNEL_PROP_CHANGED:return[3,49];case ts.CHANNEL_META_DATA_CHANGED:return[3,51];case ts.CHANNEL_META_COUNTERS_CHANGED:return[3,53]}return[3,55];case 34:return[4,this.getChannel(L.channelUrl,!0)];case 35:return k=_e.sent(),D=e.as(ys),G=D.participantCount,x=D.user,P=k._updateParticipantCount(G,L.ts),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserEntered&&e.onUserEntered(k,x),P&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(k)})),[2]}))}))})),[3,55];case 36:return[4,this.getChannel(L.channelUrl,!0)];case 37:return F=_e.sent(),H=e.as(Cs),G=H.participantCount,B=H.user,z=F._updateParticipantCount(G,L.ts),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserExited&&e.onUserExited(F,B),z&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(F)})),[2]}))}))})),[3,55];case 38:return[4,this.getChannel(L.channelUrl,!0)];case 39:return V=_e.sent(),q=e.as(is).operators,V.operators=q,this.upsertChannelsToCache([V]),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(V,q)})),[2]}))}))})),[3,55];case 40:return[4,this.getChannel(L.channelUrl,!0)];case 41:return K=_e.sent(),W=L.category===ts.USER_CHANNEL_MUTE,Y=e.as(W?tn:rn).user,Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){W?e.onUserMuted&&e.onUserMuted(K,Y):e.onUserUnmuted&&e.onUserUnmuted(K,Y)})),[2]}))}))})),[3,55];case 42:return[4,this.getChannel(L.channelUrl,!0)];case 43:return Q=_e.sent(),X=L.category===ts.USER_CHANNEL_BAN,Z=e.as(X?sn:ln).user,Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){X?e.onUserBanned&&e.onUserBanned(Q,Z):e.onUserUnbanned&&e.onUserUnbanned(Q,Z)})),[2]}))}))})),[3,55];case 44:return[4,this.getChannel(L.channelUrl,!0)];case 45:return $=_e.sent(),J=e.as(un).freeze,$.isFrozen=J,this.upsertChannelsToCache([$]),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){J?e.onChannelFrozen&&e.onChannelFrozen($):e.onChannelUnfrozen&&e.onChannelUnfrozen($)})),[2]}))}))})),[3,55];case 46:return[4,this.getChannel(L.channelUrl,!0)];case 47:return ee=_e.sent(),[4,this.removeChannelsFromCache([ee.url])];case 48:return _e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(ee.url,ee.channelType)})),[2]}))}))})),[3,55];case 49:return[4,this.getChannelWithoutCache(L.channelUrl,!0)];case 50:return ne=_e.sent(),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(ne)})),[2]}))}))})),[3,55];case 51:return[4,this.getChannel(L.channelUrl,!0)];case 52:return re=_e.sent(),ae=e.as(Ht),ie=ae.created,se=ae.updated,oe=ae.deleted,ie&&re._upsertCachedMetaData(ie,L.ts),se&&re._upsertCachedMetaData(se,L.ts),oe&&re._removeFromCachedMetaData(oe,L.ts),Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){ie&&e.onMetaDataCreated&&e.onMetaDataCreated(re,ie),se&&e.onMetaDataUpdated&&e.onMetaDataUpdated(re,se),oe&&e.onMetaDataDeleted&&e.onMetaDataDeleted(re,oe)})),[2]}))}))})),[3,55];case 53:return[4,this.getChannel(L.channelUrl,!0)];case 54:return le=_e.sent(),ce=e.as(Zt),ue=ce.created,de=ce.updated,he=ce.deleted,Object(te.b)((function(){return Object(te.Ib)(be,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._openChannelHandlers.forEach((function(e){ue&&e.onMetaCounterCreated&&e.onMetaCounterCreated(le,ue),de&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(le,de),he&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(le,he)})),[2]}))}))})),[3,55];case 55:return[3,56];case 56:return[3,58];case 57:if(fe=_e.sent(),Object(te.L)(fe))throw fe;return[3,58];case 58:return[2]}}))}))},t.prototype.addHandler=function(e,t){this._openChannelHandlers.set(e,t)},t.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},t.prototype.clearHandler=function(){this._openChannelHandlers.clear()},t.prototype.getChannel=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(t=n.sent())?[2,t]:[3,4];case 3:return n.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e)];case 5:return[2,n.sent()]}}))}))},t.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),n=new _s({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:return r=i.sent(),a=r.as(gs).channel,[4,this.upsertChannelsToCache([a])];case 2:return[2,i.sent()[0]]}}))}))},t.prototype.createChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},bs),e),Object(te.jc)(function(e){return Object(te.k)("string",e.operatorUserIds,!0)&&(Object(te.B)("string",e.coverUrlOrImage,!0)||Object(te.Zb)(e.coverUrlOrImage,!0))&&Object(te.B)("string",e.name,!0)&&Object(te.B)("string",e.data,!0)&&Object(te.B)("string",e.customType,!0)&&(Object(te.B)("string",e.channelUrl)&&/^\w+$/.test(e.channelUrl)||null===e.channelUrl||void 0===e.channelUrl)&&Object(te.B)("boolean",e.isEphemeral,!0)}(t)).throw(te.hc.invalidParameters),n=new vs(t),[4,this._requestQueue.send(n)];case 1:return r=i.sent(),a=r.as(gs).channel,this.upsertChannelsToCache([a]),[2,a]}}))}))},t}(os),Ss={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},Is=function(e){function t(t){var n=this,r=t.channelUrl,a=t.token,i=t.limit;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(te.Sb,"/").concat(encodeURIComponent(r),"/participants"),n.params={token:a,limit:i},n}return Object(te.A)(t,e),t}(te.Wb),As=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.participants=[];var a=n.next,i=n.participants;return r.token=a,r.participants=i.map((function(e){return new Xe(t,e)})),r}return Object(te.A)(t,e),t}(te.Yb),ws=function(e){function t(t,n,r){return e.call(this,t,n,te.y.OPEN,r)||this}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new Is(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(As),a=r.participants,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb),Ms=function(e){function t(t){var n=this,r=t.channelUrl,a=t.coverUrlOrImage,i=t.name,s=t.data,o=t.customType,l=t.operatorUserIds;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.Sb,"/").concat(encodeURIComponent(r)),n.params=Object(te.Vb)(Object(te.lc)({cover_url:Object(te.B)("string",a)?a:null,cover_file:Object(te.Zb)(a)?a:null,name:i,data:s,custom_type:o,operators:l})),n}return Object(te.A)(t,e),t}(te.Wb),js=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new Ls(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Rs=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(te.Sb,"/").concat(encodeURIComponent(r)),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var Us,Ls=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.channelType=te.y.OPEN,a.participantCount=null!==(r=n.participant_count)&&void 0!==r?r:0,a.operators=Array.isArray(n.operators)?n.operators.map((function(e){return new te.u(t,e)})):[],a}return Object(te.A)(t,e),t.payloadify=function(e){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},Xn.payloadify(e)),{participant_count:e.participantCount,operators:e.operators.map((function(e){return te.u.payloadify(e)}))})))},t.prototype.serialize=function(){return Object(te.jb)(this)},t.prototype.isOperator=function(e){return e instanceof te.u?this.isOperator(e.userId):this.operators.some((function(t){return t.userId===e}))},t.prototype._updateParticipantCount=function(e,t){return t>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=t,!0)},t.prototype.createParticipantListQuery=function(e){return new ws(this._iid,this.url,e)},t.prototype.refresh=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,Ts.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},t.prototype.enter=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new Es({channelUrl:this.url}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(ys),a=r.participantCount,i=r.ts,this._updateParticipantCount(a,i),Ts.of(this._iid).setEnteredToCache(this),[2]}}))}))},t.prototype.exit=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new Os({channelUrl:this.url}),[4,e.send(t)];case 1:return n=s.sent(),r=n.as(Cs),a=r.participantCount,i=r.ts,this._updateParticipantCount(a,i),Ts.of(this._iid).setExitedToCache(this),Ca.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},t.prototype.updateChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},Ss),e),Object(te.jc)(function(e){return Object(te.k)("string",e.operatorUserIds,!0)&&(Object(te.B)("string",e.coverUrlOrImage)||Object(te.Zb)(e.coverUrlOrImage)||null===e.coverUrlOrImage)&&Object(te.B)("string",e.name,!0)&&Object(te.B)("string",e.data,!0)&&Object(te.B)("string",e.customType,!0)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new Ms(Object(te.Xb)({channelUrl:this.url},t)),[4,n.send(r)];case 1:return a=s.sent(),i=a.as(js).channel,this._update(i),[4,Ts.of(this._iid).upsertChannelsToCache([i])];case 2:return s.sent(),[2,this]}}))}))},t.prototype.updateChannelWithOperatorUserIds=function(e,t,n,r,a){return Object(te.Ib)(this,void 0,void 0,(function(){var i;return Object(te.Tb)(this,(function(s){return i=Object(te.Xb)(Object(te.Xb)({},Ss),{name:e,coverUrlOrImage:t,data:n,operatorUserIds:r,customType:a}),[2,this.updateChannel(i)]}))}))},t.prototype.delete=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new Rs({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[4,Ts.of(this._iid).removeChannelsFromCache([this.url])];case 2:return n.sent(),[2]}}))}))},t.prototype.sendUserMessage=function(t){return Object(te.jc)(!t.isPinnedMessage).throw(te.hc.notSupportedError),e.prototype.sendUserMessage.call(this,t)},t.prototype.sendFileMessage=function(t){return Object(te.jc)(!t.isPinnedMessage).throw(te.hc.notSupportedError),e.prototype.sendFileMessage.call(this,t)},t}(Xn),ks=(function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}Object(te.A)(t,e)}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserEntered=te.yb,t.onUserExited=te.yb,t.onChannelParticipantCountChanged=te.yb,t.onPollUpdated=te.yb,t.onPollVoted=te.yb,t.onPollDeleted=te.yb,t}return Object(te.A)(t,e),t}(ps)),function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.nameKeyword,s=t.urlKeyword,o=t.customTypes,l=t.includeFrozen,c=t.includeMetaData;return(n=e.call(this)||this).method=te.a.GET,n.path=te.Sb,n.params=Object(te.Vb)({token:r,limit:a,name_contains:i,url_contains:s,custom_types:o,show_frozen:l,show_metadata:c}),n}return Object(te.A)(t,e),t}(te.Wb)),Ds=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var a=n.next,i=n.channels,s=n.ts;return r.token=a,i&&i.length>0&&(r.channels=i.map((function(e){return new Ls(t,e)}))),r.ts="number"==typeof s?s:null,r}return Object(te.A)(t,e),t}(te.Yb),xs=function(e){function t(t,n){var r,a,i,s,o,l=this;return(l=e.call(this,t,n)||this).includeFrozen=!0,l.includeMetaData=!0,l.nameKeyword=null,l.urlKeyword=null,l.customTypes=null,l.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,l.includeMetaData=null===(a=n.includeMetaData)||void 0===a||a,l.nameKeyword=null!==(i=n.nameKeyword)&&void 0!==i?i:null,l.urlKeyword=null!==(s=n.urlKeyword)&&void 0!==s?s:null,l.customTypes=null!==(o=n.customTypes)&&void 0!==o?o:null,l}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("boolean",this.includeFrozen)&&Object(te.B)("boolean",this.includeMetaData)&&Object(te.B)("string",this.nameKeyword,!0)&&Object(te.B)("string",this.urlKeyword,!0)&&Object(te.k)("string",this.customTypes,!0)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new ks(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token}))),[4,e.send(t)]):[3,3]:[3,6];case 1:return n=s.sent(),r=n.as(Ds),a=r.channels,i=r.token,this._token=i,this._hasNext=!!i,[4,Ts.of(this._iid).upsertChannelsToCache(a)];case 2:return s.sent(),this._isLoading=!1,[2,a];case 3:return[2,[]];case 4:throw te.hc.queryInProgress;case 5:return[3,7];case 6:throw te.hc.invalidParameters;case 7:return[2]}}))}))},t}(te.P),Ps=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="openChannel",t}return Object(te.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,a=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:c}),this._manager=new Ts(t,{sdkState:r,dispatcher:a,requestQueue:s,logger:o,cacheContext:c,sessionManager:i})},t.prototype.createOpenChannelListQuery=function(e){return void 0===e&&(e={}),new xs(this._iid,e)},t.prototype.addOpenChannelHandler=function(e,t){this._manager.addHandler(e,t)},t.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},t.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},t.prototype.getChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return[2,this._manager.createChannel(e)]}))}))},t.prototype.createChannelWithOperatorUserIds=function(e,t,n,r,a){return Object(te.Ib)(this,void 0,void 0,(function(){var i;return Object(te.Tb)(this,(function(s){return(i=Object(te.Xb)({},bs)).name=e,i.coverUrlOrImage=t,i.data=n,i.operatorUserIds=r,i.customType=a,[2,this._manager.createChannel(i)]}))}))},t}(te.X);!function(e){e.NONE="none",e.JOINED="joined",e.INVITED="invited",e.LEFT="left"}(Us||(Us={}));var Fs,Hs,Gs,Bs,zs,Vs,qs,Ks,Ws=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.state=null,r.role=null,r.isMuted=!1,r.isBlockedByMe=!1,r.isBlockingMe=!1,r.state=Object(te.q)(Us,n.state)?n.state:null,r.role=Object(te.q)(te.D,n.role)?n.role:null,"boolean"==typeof n.is_muted&&(r.isMuted=n.is_muted),"boolean"==typeof n.is_blocked_by_me&&(r.isBlockedByMe=n.is_blocked_by_me),"boolean"==typeof n.is_blocking_me&&(r.isBlockingMe=n.is_blocking_me),r}return Object(te.A)(t,e),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{state:t.state,role:t.role,is_muted:t.isMuted,is_blocked_by_me:t.isBlockedByMe,is_blocking_me:t.isBlockingMe})))},t}(Qe),Ys=function(e){function t(t,n){var r,a,i=this;return(i=e.call(this,t)||this).channelUrl=null!==(r=n.channel_url)&&void 0!==r?r:"",i.channelType=null!==(a=n.channel_type)&&void 0!==a?a:te.y.GROUP,i.reader=new te.u(i._iid,n.user),i.readAt=n.ts,i}return Object(te.A)(t,e),t}(te.I);!function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(Fs||(Fs={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Hs||(Hs={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(Gs||(Gs={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Bs||(Bs={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(zs||(zs={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(Vs||(Vs={})),function(e){e.AND="AND",e.OR="OR"}(qs||(qs={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(Ks||(Ks={}));var Qs,Xs=function(){function e(){this._searchFilter=null,this._userIdsFilter=null,this.includeEmpty=!1,this.nicknameContainsFilter=null,this.nicknameStartsWithFilter=null,this.nicknameExactMatchFilter=null,this.channelNameContainsFilter="",this.myMemberStateFilter=Hs.ALL,this.customTypesFilter=null,this.channelUrlsFilter=null,this.superChannelFilter=Gs.ALL,this.publicChannelFilter=Fs.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Bs.ALL,this.hiddenChannelFilter=zs.UNHIDDEN,this.includeFrozen=!0}return e.prototype._isFriend=function(e){return!(!e||!e.friendDiscoveryKey&&!e.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={query:t,fields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=qs.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t,n=new e;this.searchFilter&&n.setSearchFilter(this.searchFilter.fields,null!==(t=this.searchFilter.query)&&void 0!==t?t:void 0),this.userIdsFilter&&n.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach((function(e){n[e]=r[e]})),n},e.prototype.match=function(e,t){if(this._searchFilter){var n=this._searchFilter,r=n.query,a=n.fields;if(r&&a&&a.length>0&&!a.some((function(t){switch(t){case Ks.CHANNEL_NAME:return e.name.toLowerCase().includes(r.toLowerCase());case Ks.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(r.toLowerCase())}));default:return!0}})))return!1}if(this._userIdsFilter){var i=this._userIdsFilter,s=i.userIds,o=i.includeMode,l=i.queryType,c=e.members.map((function(e){return e.userId}));if(o){if(s.length>0)switch(l){case qs.AND:if(s.some((function(e){return!c.includes(e)})))return!1;break;case qs.OR:if(s.every((function(e){return!c.includes(e)})))return!1}}else{if(s.includes(t)||s.push(t),e.members.length>s.length)return!1;if(!Object(te.Jb)(s,c))return!1}}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var u=this.nicknameContainsFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().includes(u)})))return!1}if(this.nicknameStartsWithFilter){var d=this.nicknameStartsWithFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().startsWith(d)})))return!1}if(this.nicknameExactMatchFilter){var h=this.nicknameExactMatchFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase()!=h})))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case Hs.JOINED:if("joined"!==e.myMemberState)return!1;break;case Hs.INVITED:if("invited"!==e.myMemberState)return!1;break;case Hs.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case Hs.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case zs.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case zs.HIDDEN:if(!e.isHidden)return!1;break;case zs.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case zs.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Bs.UNREAD_MESSAGE&&0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Fs.PUBLIC:if(!e.isPublic)return!1;break;case Fs.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case Gs.SUPER:if(!e.isSuper)return!1;break;case Gs.NON_SUPER:if(e.isSuper)return!1}return!(this.createdAfter&&e.createdAt<this.createdAfter||this.createdBefore&&e.createdAt>this.createdBefore)},e}(),Zs=function(e){function t(t,n){var r=n.sdkState,a=n.cacheContext,i=e.call(this,t)||this;return i._channels=new Map,i._sdkState=r,i._cacheContext=a,i}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(te.jc)(!!e).throw(te.hc.databaseError),e.collection(Vn)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e,t){return void 0===t&&(t=0),Object(te.Xb)(Object(te.Xb)({},e.serialize()),{lastMessageUpdatedAt:e.lastMessage?e.lastMessage.createdAt:0,syncIndex:t})},t.prototype._deserialize=function(e){return sl.of(this._iid).buildGroupChannelFromSerializedData(e)},Object.defineProperty(t.prototype,"channels",{get:function(){return Object(te.fc)([],Object(te.gc)(this._channels.values()),!1)},enumerable:!1,configurable:!0}),t.prototype.isCachedInMemory=function(e){return this._channels.has(e)},t.prototype.filterOffsetChanged=function(e){var t=this;return e.filter((function(e){if(t._channels.has(e.url))return t._channels.get(e.url).messageOffsetTimestamp<e.messageOffsetTimestamp}))},t.prototype.get=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return this._channels.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(t=r.sent())return n=this._deserialize(t),this._channels.set(e,n),[2,n];r.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(e)]}}))}))},t.prototype.fetch=function(e){var t=e.token,n=e.limit,r=void 0===n?100:n,a=e.backward,i=void 0!==a&&a,s=e.filter,o=void 0===s?new Xs:s,l=e.order,c=void 0===l?Aa.LATEST_LAST_MESSAGE:l,u=e.borderlineChannelUrl;return Object(te.Ib)(this,void 0,void 0,(function(){var e,n,a,s,l=this;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return this.localCacheEnabled?(e=xa(c),n={where:function(e){if(t)switch(c){case Aa.CHANNEL_NAME_ALPHABETICAL:if(!i&&e.name.localeCompare(t)<0||i&&e.name.localeCompare(t)>0)return!1;if(u&&u===e.url)return!1;break;case Aa.CHRONOLOGICAL:if(!i&&e.createdAt>t||i&&e.createdAt<t)return!1;if(u&&u===e.url)return!1;break;case Aa.LATEST_LAST_MESSAGE:if(!i&&e.lastMessageUpdatedAt>t||i&&e.lastMessageUpdatedAt<t)return!1;if(u&&u===e.url)return!1}return o.match(l._deserialize(e),l._sdkState.userId)},index:e,backward:i},[4,this.collection.query(n)]):[3,3];case 1:return[4,d.sent().fetch({limit:r})];case 2:return a=d.sent(),(s=a.map((function(e){return l._deserialize(e)}))).forEach((function(e){l._channels.has(e.url)||l._channels.set(e.url,e)})),[2,s];case 3:return[2,[]]}}))}))},t.prototype.upsert=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i=this;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:if(n=[],e.forEach((function(e){if(i._channels.has(e.url)){var r=i._channels.get(e.url);r._pinnedMessagesUpdatedAt<e._pinnedMessagesUpdatedAt&&(r._pinnedMessagesUpdatedAt=e._pinnedMessagesUpdatedAt),e.cachedMetaData&&t&&(r._updateCachedMetaData(e.cachedMetaData,t),Object.assign(e,{_cachedMetaData:void 0})),r._update(e),n.push(r)}else i._channels.set(e.url,e),n.push(e)})),!this.localCacheEnabled)return[3,2];for(a in r=[],n)r.push(this._serialize(n[a],parseInt(a)));return[4,this.collection.upsertMany(r)];case 1:s.sent(),s.label=2;case 2:return[2,n]}}))}))},t.prototype.remove=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),t=Object(te.ic)(e),n=t.next(),o.label=1;case 1:return n.done?[3,4]:(r=n.value,this._channels.delete(r),this.localCacheEnabled?[4,this.collection.remove(r)]:[3,3]);case 2:o.sent(),o.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return a=o.sent(),i={error:a},[3,7];case 6:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},t.prototype.clear=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.clearMemoryCache=function(){this._channels.clear()},t.prototype._setBlockStateOfAllChannels=function(e,t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y;return Object(te.Tb)(this,(function(O){switch(O.label){case 0:if(r=[],e===this._sdkState.userId)try{for(a=Object(te.ic)(this._channels.values()),i=a.next();!i.done;i=a.next()){u=i.value;try{for(b=void 0,s=Object(te.ic)(u.members),o=s.next();!o.done;o=s.next())if((f=o.value).userId===t){f.isBlockedByMe=n,r.push(u);break}}catch(e){b={error:e}}finally{try{o&&!o.done&&(_=s.return)&&_.call(s)}finally{if(b)throw b.error}}}}catch(e){p={error:e}}finally{try{i&&!i.done&&(m=a.return)&&m.call(a)}finally{if(p)throw p.error}}else if(t===this._sdkState.userId)try{for(l=Object(te.ic)(this._channels.values()),c=l.next();!c.done;c=l.next()){u=c.value;try{for(E=void 0,d=Object(te.ic)(u.members),h=d.next();!h.done;h=d.next())if((f=h.value).userId===e){f.isBlockingMe=n,r.push(u);break}}catch(e){E={error:e}}finally{try{h&&!h.done&&(y=d.return)&&y.call(d)}finally{if(E)throw E.error}}}}catch(e){g={error:e}}finally{try{c&&!c.done&&(v=l.return)&&v.call(l)}finally{if(g)throw g.error}}return r.length>0?[4,this.upsert(r)]:[3,2];case 1:O.sent(),O.label=2;case 2:return[2]}}))}))},t.prototype.block=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!0)];case 1:return n.sent(),[2]}}))}))},t.prototype.unblock=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!1)];case 1:return n.sent(),[2]}}))}))},t.prototype.markAsRead=function(e,t){return void 0===t&&(t=Object(te.fc)([],Object(te.gc)(this._channels.keys()),!1)),Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:n=[],u.label=1;case 1:u.trys.push([1,6,7,8]),r=Object(te.ic)(t),a=r.next(),u.label=2;case 2:return a.done?[3,5]:(i=a.value,[4,this.get(i)]);case 3:(null==(s=u.sent())?void 0:s._updateUnreadMemberState(this._sdkState.userId,e))&&(s._updateUnreadCount(0,0),n.push(s)),u.label=4;case 4:return a=r.next(),[3,2];case 5:return[3,8];case 6:return o=u.sent(),l={error:o},[3,8];case 7:try{a&&!a.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 8:return n.length>0?[4,this.upsert(n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[2]}}))}))},t}(te.I),$s={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},Js=function(e){return Object(te.k)("string",e.invitedUserIds,!0)&&Object(te.B)("string",e.channelUrl,!0)&&Object(te.B)("string",e.coverUrl,!0)&&(Object(te.Zb)(e.coverImage)||Object(te.B)("string",e.coverImage,!0))&&Object(te.B)("boolean",e.isDistinct,!0)&&Object(te.B)("boolean",e.isSuper,!0)&&Object(te.B)("boolean",e.isBroadcast,!0)&&Object(te.B)("boolean",e.isExclusive,!0)&&Object(te.B)("boolean",e.isPublic,!0)&&Object(te.B)("boolean",e.isStrict,!0)&&Object(te.B)("boolean",e.isDiscoverable,!0)&&Object(te.B)("boolean",e.isEphemeral,!0)&&Object(te.B)("string",e.accessCode,!0)&&Object(te.B)("string",e.name,!0)&&Object(te.B)("string",e.data,!0)&&Object(te.B)("string",e.customType,!0)&&Object(te.k)("string",e.operatorUserIds,!0)&&Object(te.B)("number",e.messageSurvivalSeconds,!0)},eo={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeChatNotification:!1},to=function(e){return Object(te.k)("string",e.customTypes,!0)&&Object(te.B)("boolean",e.includeEmpty)&&Object(te.B)("boolean",e.includeFrozen)&&Object(te.B)("boolean",e.includeChatNotification)},no={myMemberStateFilter:Hs.ALL},ro=function(e){return Object(te.q)(Hs,e.myMemberStateFilter)};!function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"}(Qs||(Qs={}));var ao={keys:[]},io={channelCustomTypesFilter:void 0,superChannelFilter:Gs.ALL},so={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:te.nb.ALL},oo=(Object(te.Xb)({},te.x),function(e){return e.startsWith("EVENT_")||e===te.x.SYNC_CHANNEL_CHANGELOGS||e===te.x.REFRESH_CHANNEL}),lo=function(e){function t(t){var n=t.channels,r=t.source,a=t.isWebSocketEventComing,i=void 0!==a&&a,s=t.data,o=void 0===s?null:s,l=t.ts,c=e.call(this)||this;return c.channels=n,c.source=r,c.isWebSocketEventComing=i,c.data=o,c.ts=l,c}return Object(te.A)(t,e),t}(te.eb),co=function(e){function t(t){var n=t.channelUrls,r=t.source,a=t.isWebSocketEventComing,i=void 0!==a&&a,s=e.call(this)||this;return s.channelUrls=n,s.source=r,s.isWebSocketEventComing=i,s}return Object(te.A)(t,e),t}(te.eb),uo=function(){function e(e){var t=e.groupChannelCache,n=e.messageCache,r=e.unsentMessageCache,a=e.dispatcher,i=this;this._observers=new Map,a.on((function(e){return Object(te.Ib)(i,void 0,void 0,(function(){var a,i,s,o,l,c,u,d,h,f,p,m,b,_,g=this;return Object(te.Tb)(this,(function(v){switch(v.label){case 0:if(!(e instanceof lo))return[3,10];a=e.channels,p=e.source,m=e.isWebSocketEventComing,i=e.data,s=a.filter((function(e){return e instanceof fc})),o=t.filterOffsetChanged(s),v.label=1;case 1:v.trys.push([1,6,7,8]),l=Object(te.ic)(o),c=l.next(),v.label=2;case 2:return c.done?[3,5]:(u=c.value,[4,n.removeUnderOffset(u.url,u.messageOffsetTimestamp)]);case 3:v.sent(),v.label=4;case 4:return c=l.next(),[3,2];case 5:return[3,8];case 6:return d=v.sent(),b={error:d},[3,8];case 7:try{c&&!c.done&&(_=l.return)&&_.call(l)}finally{if(b)throw b.error}return[7];case 8:return[4,t.upsert(s,e.ts)];case 9:return h=v.sent(),m||this._broadcastUpdateEvent(h,p,i),[3,15];case 10:return e instanceof co?(f=e.channelUrls,p=e.source,m=e.isWebSocketEventComing,[4,t.remove(f)]):[3,13];case 11:return v.sent(),[4,Object(te.o)((function(){return Object(te.Ib)(g,void 0,void 0,(function(){var e,t,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:l.trys.push([0,6,7,8]),e=Object(te.ic)(f),t=e.next(),l.label=1;case 1:return t.done?[3,5]:(a=t.value,[4,n.removeMessagesOfChannel(a)]);case 2:return l.sent(),[4,r.removeMessagesOfChannel(a)];case 3:l.sent(),l.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return i=l.sent(),s={error:i},[3,8];case 7:try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))}))];case 12:return v.sent(),m||this._broadcastRemoveEvent(f,p),[3,15];case 13:return e instanceof Ba?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,15];case 14:v.sent(),v.label=15;case 15:return[2]}}))}))}))}return e.prototype._broadcastUpdateEvent=function(e,t,n){var r,a;try{for(var i=Object(te.ic)(this._observers.values()),s=i.next();!s.done;s=i.next()){var o=s.value;o.onUpdate&&o.onUpdate(e,t,n)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}},e.prototype._broadcastRemoveEvent=function(e,t){var n,r;try{for(var a=Object(te.ic)(this._observers.values()),i=a.next();!i.done;i=a.next()){var s=i.value;s.onRemove&&s.onRemove(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.subscribe=function(e,t){this._observers.set(e,t)},e.prototype.unsubscribe=function(e){this._observers.delete(e)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),ho=function(e){function t(t){var n=t.userId,r=t.ts,a=t.token,i=t.filter,s=t.includeChatNotification,o=void 0!==s&&s,l=e.call(this)||this,c=Object(te.Xb)(Object(te.Xb)({},eo),i),u=c.customTypes,d=c.includeEmpty,h=c.includeFrozen;return l.method=te.a.GET,l.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/my_group_channels/changelogs"),l.params=Object(te.Vb)(Object(te.lc)({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:r||null,token:a,custom_types:u,show_empty:d,show_frozen:h,include_chat_notification:o})),l}return Object(te.A)(t,e),t}(te.Wb),fo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedChannels=n.updated.map((function(e){return new fc(t,Object.assign(e,{ts:n.ts}))})),r.deletedChannelUrls=n.deleted,r.hasMore=n.has_more,r.token=n.next,r.ts=n.ts,r}return Object(te.A)(t,e),t}(te.Yb),po=function(e){function t(t){var n=t.channelUrl,r=t.isInternalCall,a=e.call(this)||this;return a.method=te.a.GET,a.path="".concat(r?te.Kb:te.xb,"/").concat(encodeURIComponent(n)),a.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0},a}return Object(te.A)(t,e),t}(te.Wb),mo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new fc(t,n),r}return Object(te.A)(t,e),t}(te.Yb),bo={includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1,channelUrlsFilter:void 0,customTypesFilter:void 0,customTypeStartsWithFilter:void 0,nicknameContainsFilter:void 0,nicknameStartsWithFilter:void 0,nicknameExactMatchFilter:void 0,channelNameContainsFilter:void 0,myMemberStateFilter:Hs.ALL,unreadChannelFilter:Bs.ALL,superChannelFilter:Gs.ALL,publicChannelFilter:Fs.ALL,hiddenChannelFilter:zs.ALL,userIdsFilter:{userIds:[],includeMode:!0,queryType:qs.AND},searchFilter:{query:void 0,fields:[]},metadataKey:void 0,metadataValues:void 0,metadataOrderKeyFilter:void 0,metadataValueStartsWith:void 0,order:Aa.LATEST_LAST_MESSAGE,createdAfter:void 0,createdBefore:void 0},_o=function(e){function t(t){var n=this,r=t.userId,a=t.token,i=t.limit,s=t.order,o=t.includeEmpty,l=t.myMemberStateFilter,c=t.superChannelFilter,u=t.publicChannelFilter,d=t.unreadChannelFilter,h=t.nicknameContainsFilter,f=t.nicknameStartsWithFilter,p=t.nicknameExactMatchFilter,m=t.channelNameContainsFilter,b=t.channelUrlsFilter,_=t.customTypesFilter,g=t.customTypeStartsWithFilter,v=t.hiddenChannelFilter,E=t.metadataOrderKeyFilter,y=t.metadataKey,O=t.metadataValues,C=t.metadataValueStartsWith,N=t.includeFrozen,T=t.includeMetaData,S=t.searchFilter,I=t.userIdsFilter,A=t.includeChatNotification,w=void 0!==A&&A,M=t.createdAfter,j=t.createdBefore;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(te.Ub,"/").concat(encodeURIComponent(r),"/my_group_channels"),n.params=Object(te.Vb)({token:a,limit:i,order:null!=s?s:bo.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:null!=o?o:bo.includeEmpty,member_state_filter:null!=l?l:bo.myMemberStateFilter,super_mode:null!=c?c:bo.superChannelFilter,public_mode:null!=u?u:bo.publicChannelFilter,unread_filter:null!=d?d:bo.unreadChannelFilter,members_nickname_contains:h,members_nickname_startswith:f,members_nickname:p,name_contains:m,channel_urls:b,custom_types:_,custom_type_startswith:g,hidden_mode:v,metadata_order_key:E,metadata_key:y,metadata_values:O,metadata_value_startswith:C,show_frozen:N,show_metadata:T,include_chat_notification:w,created_after:M,created_before:j}),S&&S.query&&S.fields&&(n.params.search_query=S.query,n.params.search_fields=S.fields),I&&I.userIds&&I.userIds.length>0&&(I.includeMode?(n.params.members_include_in=I.userIds,n.params.query_type=I.queryType.toUpperCase()):n.params.members_exactly_in=I.userIds),n}return Object(te.A)(t,e),t}(te.Wb),go=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var a=n.next,i=n.channels,s=n.ts;return r.token=a,i&&i.length>0&&(r.channels=i.map((function(e){return e.ts=s,new fc(t,e)}))),r.ts=null!=s?s:0,r}return Object(te.A)(t,e),t}(te.Yb),vo=function(e){function t(t){var n=t.userId,r=t.filter,a=e.call(this)||this,i=r.myMemberStateFilter;return a.method=te.a.GET,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/group_channel_count"),a.params={state:null!=i?i:Hs.ALL},a}return Object(te.A)(t,e),t}(te.Wb),Eo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.groupChannelCount=n.group_channel_count,r}return Object(te.A)(t,e),t}(te.Yb),yo=function(e){function t(t){var n=t.userId,r=t.filter,a=e.call(this)||this,i=r.keys;return a.method=te.a.GET,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/unread_item_count"),a.params=Object(te.Vb)({item_keys:i}),a}return Object(te.A)(t,e),t}(te.Wb),Oo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return"number"==typeof n[Qs.GROUP_CHANNEL_UNREAD_MENTION_COUNT]&&(r.groupChannelUnreadMentionCount=n[Qs.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),"number"==typeof n[Qs.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]&&(r.groupChannelUnreadMessageCount=n[Qs.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),"number"==typeof n[Qs.GROUP_CHANNEL_INVITATION_COUNT]&&(r.groupChannelInvitationCount=n[Qs.GROUP_CHANNEL_INVITATION_COUNT]),"number"==typeof n[Qs.SUPER_UNREAD_MENTION_COUNT]&&(r.superGroupChannelUnreadMentionCount=n[Qs.SUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[Qs.SUPER_UNREAD_MESSAGE_COUNT]&&(r.superGroupChannelUnreadMessageCount=n[Qs.SUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[Qs.SUPER_INVITATION_COUNT]&&(r.superGroupChannelInvitationCount=n[Qs.SUPER_INVITATION_COUNT]),"number"==typeof n[Qs.NONSUPER_UNREAD_MENTION_COUNT]&&(r.nonSuperGroupChannelUnreadMentionCount=n[Qs.NONSUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[Qs.NONSUPER_UNREAD_MESSAGE_COUNT]&&(r.nonSuperGroupChannelUnreadMessageCount=n[Qs.NONSUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[Qs.NONSUPER_INVITATION_COUNT]&&(r.nonSuperGroupChannelInvitationCount=n[Qs.NONSUPER_INVITATION_COUNT]),r}return Object(te.A)(t,e),t}(te.Yb),Co=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=te.a.GET,r.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/unread_channel_count"),r}return Object(te.A)(t,e),t}(te.Wb),No=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.unreadCount=n.unread_count,r}return Object(te.A)(t,e),t}(te.Yb),To=function(e){function t(t){var n=t.userId,r=t.filter,a=t.includeFeedChannel,i=void 0!==a&&a,s=e.call(this)||this,o=r.channelCustomTypesFilter,l=r.superChannelFilter;return s.method=te.a.GET,s.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/unread_message_count"),s.params={super_mode:null!=l?l:Gs.ALL,custom_types:o,include_feed_channel:i},s}return Object(te.A)(t,e),t}(te.Wb),So=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.unreadCount=n.unread_count,r.unreadFeedCount=n.unread_feed_count,r}return Object(te.A)(t,e),t}(te.Yb),Io=function(e){function t(t){var n=t.channelUrl,r=t.scheduledStatus,a=t.messageTypeFilter,i=e.call(this)||this;return i.method=te.a.GET,i.path="".concat(te.hb,"/count"),i.params={channel_url:n,status:wo(r)},a&&(i.params.message_type=a),i}return Object(te.A)(t,e),t}(te.Wb),Ao=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.count=n.count,r}return Object(te.A)(t,e),t}(te.Yb),wo=function(e){if(!e)return[];var t=[];return e.forEach((function(e){switch(e){case ie.PENDING:t.push(se.PENDING);break;case ie.SENT:t.push(se.IN_QUEUE),t.push(se.SENT);break;case ie.CANCELED:t.push(se.CANCELED);break;case ie.FAILED:t.push(se.FAILED)}})),t},Mo=function(e){function t(t){var n=this,r=t.userId,a=t.channelUrl,i=t.coverUrl,s=t.coverImage,o=t.isDistinct,l=t.isSuper,c=t.isBroadcast,u=t.isPublic,d=t.isExclusive,h=t.isDiscoverable,f=t.isStrict,p=t.isEphemeral,m=t.accessCode,b=t.name,_=t.data,g=t.customType,v=t.messageSurvivalSeconds,E=t.invitedUserIds,y=t.operatorUserIds;return(n=e.call(this)||this).method=te.a.POST,n.path=te.xb,n.params=Object(te.Vb)({user_ids:Object(te.fc)([r],Object(te.gc)(null!=E?E:[]),!1).filter((function(e,t,n){return t===n.indexOf(e)})),channel_url:a,cover_url:i,cover_file:s,is_distinct:o,is_super:l,is_broadcast:c,is_exclusive:d,is_public:u,is_discoverable:h,strict:f,is_ephemeral:p,access_code:m,name:b,data:_,custom_type:g,operator_ids:y,message_survival_seconds:v}),n}return Object(te.A)(t,e),t}(te.Wb),jo=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,n)||this).channel=new fc(t,n),a.isCreated=null===(r=n.is_created)||void 0===r||r,a}return Object(te.A)(t,e),t}(te.Yb),Ro=function(e){function t(t){var n=t.userId,r=t.channelUrls,a=e.call(this)||this;return a.method=te.a.PUT,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/mark_as_read_all"),a.params={channel_urls:r},a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var Uo=function(e){function t(t){var n=this,r=t.channelUrl,a=t.userId,i=t.accessCode;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/join"),n.params={user_id:a,access_code:i},n}return Object(te.A)(t,e),t}(te.Wb),Lo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new fc(t,n),r}return Object(te.A)(t,e),t}(te.Yb),ko=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this,i=r.data,s=i.member_count,o=void 0===s?0:s,l=i.joined_member_count,c=void 0===l?0:l,u=i.users,d=void 0===u?null:u;return a.memberCount=o,a.joinedMemberCount=c,a.members=Array.isArray(d)?d.map((function(e){return new Ws(t,e)})):[new Ws(t,r.data)],a}return Object(te.A)(t,e),t}(as),Do=function(e){function t(t){var n=this,r=t.channelUrl,a=t.userId,i=t.shouldRemoveOperatorStatus;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/leave"),n.params={user_id:a,should_remove_operator_status:i},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var xo=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this,i=r.data,s=i.member_count,o=void 0===s?0:s,l=i.joined_member_count,c=void 0===l?0:l;return a.memberCount=o,a.joinedMemberCount=c,a.member=new Ws(a._iid,r.data),a}return Object(te.A)(t,e),t}(as),Po=function(e){function t(t){var n=this,r=t.channelUrl,a=t.userIds;return(n=e.call(this)||this).method=te.a.POST,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/invite"),n.params={user_ids:a},n}return Object(te.A)(t,e),t}(te.Wb),Fo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new fc(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Ho=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this;a.inviter=null;var i=r.data,s=i.member_count,o=void 0===s?0:s,l=i.joined_member_count,c=void 0===l?0:l,u=i.inviter,d=i.invitees,h=void 0===d?[]:d;return a.memberCount=o,a.joinedMemberCount=c,u&&Object.keys(u).length>0&&(a.inviter=new te.u(t,u)),a.invitees=h.map((function(e){return new Ws(t,e)})),a}return Object(te.A)(t,e),t}(as),Go=function(e){function t(t){var n=this,r=t.channelUrl,a=t.userId;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/decline"),n.params={user_id:a},n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.channel=new fc(t,n),r.channel.myMemberState=Us.NONE,r}),e)}(te.Yb);var Bo=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this,i=r.data,s=i.member_count,o=i.joined_member_count,l=i.inviter,c=i.invitee;return a.memberCount=null!=s?s:0,a.joinedMemberCount=null!=o?o:0,a.inviter=new te.u(t,l),a.invitee=new Ws(t,c),a}return Object(te.A)(t,e),t}(as),zo={hidePreviousMessages:!1,allowAutoUnhide:!0},Vo=function(e){function t(t){var n=this,r=t.channelUrl,a=t.userId,i=t.hidePreviousMessages,s=t.allowAutoUnhide;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/hide"),n.params={user_id:a,hide_previous_messages:null!=i?i:zo.hidePreviousMessages,allow_auto_unhide:null!=s?s:zo.allowAutoUnhide},n}return Object(te.A)(t,e),t}(te.Wb),qo=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.ts_message_offset;return r.messageOffsetTimestamp=a,r}return Object(te.A)(t,e),t}(te.Yb),Ko=function(e){function t(t,n,r){var a,i,s,o=this;return(o=e.call(this,t,"SYEV",r)||this).allowAutoUnhide=null,o.hidePreviousMessages=null,o.messageOffsetTimestamp=null,r.data&&(o.allowAutoUnhide=null!==(a=r.data.allow_auto_unhide)&&void 0!==a?a:null,o.hidePreviousMessages=null!==(i=r.data.hide_previous_messages)&&void 0!==i?i:null),o.messageOffsetTimestamp=null!==(s=r.ts_message_offset)&&void 0!==s?s:null,o}return Object(te.A)(t,e),t}(te.w),Wo=function(e){function t(t){var n=t.channelUrl,r=t.time;return e.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:n,time:r}})||this}return Object(te.A)(t,e),t}(te.qb),Yo=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new te.u(t,r.data),a}return Object(te.A)(t,e),t}(te.w),Qo=function(e){function t(t){var n=t.channelUrl,r=t.time;return e.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:n,time:r}})||this}return Object(te.A)(t,e),t}(te.qb),Xo=function(e){function t(t,n,r){var a=e.call(this,t,"SYEV",r)||this;return a.user=new te.u(t,r.data),a}return Object(te.A)(t,e),t}(te.w),Zo=function(e){function t(t){var n=t.channelUrl,r=t.messageId;return e.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:n,msg_id:r}})||this}return Object(te.A)(t,e),t}(te.qb),$o=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N,T,S=this;return(S=e.call(this,t,n)||this).includeEmpty=!1,S.includeFrozen=!0,S.includeMetaData=!0,S.includeChatNotification=!1,S.channelUrlsFilter=null,S.customTypesFilter=null,S.customTypeStartsWithFilter=null,S.nicknameContainsFilter=null,S.nicknameStartsWithFilter=null,S.nicknameExactMatchFilter=null,S.channelNameContainsFilter="",S.myMemberStateFilter=Hs.ALL,S.unreadChannelFilter=Bs.ALL,S.superChannelFilter=Gs.ALL,S.publicChannelFilter=Fs.ALL,S.hiddenChannelFilter=zs.UNHIDDEN,S.searchFilter={fields:[],query:null},S.userIdsFilter={userIds:[],includeMode:!0,queryType:qs.AND},S.metadataKey=null,S.metadataValues=null,S.metadataOrderKeyFilter=null,S.metadataValueStartsWith=null,S.order=Aa.LATEST_LAST_MESSAGE,S.includeEmpty=null!==(r=n.includeEmpty)&&void 0!==r&&r,S.includeFrozen=null===(a=n.includeFrozen)||void 0===a||a,S.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,S.includeChatNotification=null!==(s=n.includeChatNotification)&&void 0!==s&&s,S.channelUrlsFilter=null!==(o=n.channelUrlsFilter)&&void 0!==o?o:null,S.customTypesFilter=null!==(l=n.customTypesFilter)&&void 0!==l?l:null,S.customTypeStartsWithFilter=null!==(c=n.customTypeStartsWithFilter)&&void 0!==c?c:"",S.nicknameContainsFilter=null!==(u=n.nicknameContainsFilter)&&void 0!==u?u:null,S.nicknameStartsWithFilter=null!==(d=n.nicknameStartsWithFilter)&&void 0!==d?d:null,S.nicknameExactMatchFilter=null!==(h=n.nicknameExactMatchFilter)&&void 0!==h?h:null,S.channelNameContainsFilter=null!==(f=n.channelNameContainsFilter)&&void 0!==f?f:"",S.myMemberStateFilter=null!==(p=n.myMemberStateFilter)&&void 0!==p?p:Hs.ALL,S.unreadChannelFilter=null!==(m=n.unreadChannelFilter)&&void 0!==m?m:Bs.ALL,S.superChannelFilter=null!==(b=n.superChannelFilter)&&void 0!==b?b:Gs.ALL,S.publicChannelFilter=null!==(_=n.publicChannelFilter)&&void 0!==_?_:Fs.ALL,S.hiddenChannelFilter=null!==(g=n.hiddenChannelFilter)&&void 0!==g?g:zs.UNHIDDEN,S.searchFilter=null!==(v=n.searchFilter)&&void 0!==v?v:{fields:[],query:null},S.userIdsFilter=null!==(E=n.userIdsFilter)&&void 0!==E?E:{userIds:[],includeMode:!0,queryType:qs.AND},S.metadataKey=null!==(y=n.metadataKey)&&void 0!==y?y:null,S.metadataValues=null!==(O=n.metadataValues)&&void 0!==O?O:null,S.metadataOrderKeyFilter=null!==(C=n.metadataOrderKeyFilter)&&void 0!==C?C:null,S.metadataValueStartsWith=null!==(N=n.metadataValueStartsWith)&&void 0!==N?N:null,S.order=null!==(T=n.order)&&void 0!==T?T:Aa.LATEST_LAST_MESSAGE,n.createdAfter&&(S.createdAfter=n.createdAfter),n.createdBefore&&(S.createdBefore=n.createdBefore),S}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("boolean",this.includeEmpty)&&Object(te.B)("boolean",this.includeFrozen)&&Object(te.B)("boolean",this.includeMetaData)&&Object(te.B)("string",this.channelNameContainsFilter)&&Object(te.k)("string",this.channelUrlsFilter,!0)&&Object(te.k)("string",this.customTypesFilter,!0)&&Object(te.B)("string",this.customTypeStartsWithFilter)&&Object(te.B)("string",this.nicknameContainsFilter,!0)&&Object(te.B)("string",this.nicknameStartsWithFilter,!0)&&Object(te.B)("string",this.nicknameExactMatchFilter,!0)&&Object(te.q)(Hs,this.myMemberStateFilter)&&Object(te.q)(Gs,this.superChannelFilter)&&Object(te.q)(Fs,this.publicChannelFilter)&&Object(te.q)(Bs,this.unreadChannelFilter)&&Object(te.q)(zs,this.hiddenChannelFilter)&&Object(te.k)(Ks,this.searchFilter.fields)&&Object(te.B)("string",this.searchFilter.query,!0)&&Object(te.k)("string",this.userIdsFilter.userIds)&&Object(te.B)("boolean",this.userIdsFilter.includeMode)&&Object(te.q)(qs,this.userIdsFilter.queryType)&&Object(te.q)(Aa,this.order)&&Object(te.B)("string",this.metadataOrderKeyFilter,!0)&&Object(te.B)("string",this.metadataKey,!0)&&Object(te.k)("string",this.metadataValues,!0)&&Object(te.B)("string",this.metadataValueStartsWith,!0)&&Object(te.Lb)(this.createdAfter,!0)&&Object(te.Lb)(this.createdBefore,!0)},t.prototype.serialize=function(){return Object(te.jb)(this)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,sl.of(this._iid).getMyGroupChannels(this._token,Object(te.lc)(Object(te.Xb)({},this)),this.limit)]):[3,2]:[3,5];case 1:return e=r.sent(),t=e.channels,n=e.token,this._token=n,this._hasNext=!!n,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),Jo=function(e){function t(t,n,r){var a,i=this;return(i=e.call(this,t,"SYEV",r)||this).pinnedMessageIds=[],i.latestPinnedMessage=null,i.ts=0,r.data&&(i.pinnedMessageIds=null!==(a=r.data.pinned_message_ids)&&void 0!==a?a:[],i.latestPinnedMessage=r.data.latest_pinned_message?Ie(t,Object(te.Xb)({},r.data.latest_pinned_message)):null),i.ts=r.ts,i}return Object(te.A)(t,e),t}(te.w),el=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:n}})||this}return Object(te.A)(t,e),t}(te.qb),tl=function(e){function t(t,n,r){var a=e.call(this,t,"READ",r)||this;return a.readStatus=new Ys(t,r),a}return Object(te.A)(t,e),t}(te.w),nl=function(e){function t(t){var n=t.channelUrl,r=t.userId,a=e.call(this)||this;return(a=e.call(this)||this).method=te.a.PUT,a.path="".concat(te.xb,"/").concat(encodeURIComponent(n),"/messages/mark_as_delivered"),a.params=Object(te.Vb)({userId:r}),a}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var rl,al=function(e){function t(t,n,r){var a=e.call(this,t,"DLVR",r)||this;return a.channelUrl=r.channel_url,a.deliveredStateUpdate=r.updated,a}return Object(te.A)(t,e),t}(te.w),il={},sl=function(e){function t(t,n){var r,a=this;return(a=e.call(this,t,Object(te.Xb)(Object(te.Xb)({},n),{channelType:te.y.GROUP}))||this)._leftChannels=new Map,a._disableMack=!1,a._markAsReadAllLastSentAt=0,a._disableMack=null!==(r=n.disableMack)&&void 0!==r&&r,a._groupChannelHandlers=new Map,a._groupChannelCache=new Zs(a._iid,{sdkState:n.sdkState,cacheContext:n.cacheContext}),a._groupChannelBroadcast=new uo({dispatcher:n.dispatcher,groupChannelCache:a._groupChannelCache,messageCache:va.of(a._iid),unsentMessageCache:_a.of(a._iid)}),setInterval((function(){var e,t,n=function(e){e.invalidateTypingStatus()&&(a._dispatcher.dispatch(new lo({channels:[e],source:te.x.EVENT_CHANNEL_TYPING_STATUS_UPDATE})),a._groupChannelHandlers.forEach((function(t){t.onTypingStatusUpdated&&t.onTypingStatusUpdated(e)})))};try{for(var r=Object(te.ic)(a._groupChannelCache.channels),i=r.next();!i.done;i=r.next())n(i.value)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}),1e3),a._dispatcher.on((function(e){e instanceof te.w?a._handleEvent(e):e instanceof Pa?Object(te.Ib)(a,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=e.message,[4,this.getChannel(t.channelUrl,!0)];case 1:return n=r.sent(),t instanceof Ce?n._autoResendUserMessage(t):t instanceof Ae&&n._autoResendFileMessage(t),[2]}}))})):e instanceof za&&a.reduceDBSize()})),il[t]||(il[t]=a),a}return Object(te.A)(t,e),t.of=function(e){return il[e]||(il[e]=new t(e,te.v.of(e))),il[e]},t.clear=function(e){il[e]&&delete il[e]},Object.defineProperty(t.prototype,"handlers",{get:function(){return Object(te.fc)([],Object(te.gc)(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),t.prototype.buildGroupChannelFromSerializedData=function(e){var t=Object(te.oc)(e);return new fc(this._iid,fc.payloadify(t))},t.prototype.buildGroupChannelListQueryFromSerializedData=function(e){var t=Object(te.oc)(e);return new $o(this._iid,t)},t.prototype.buildMemberFromSerializedData=function(e){var t=Object(te.oc)(e);return new Ws(this._iid,Ws.payloadify(t))},t.prototype.getChannelFromCache=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,this._groupChannelCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},t.prototype.getChannelsFromCache=function(e,t,n,r,a){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return[4,this._groupChannelCache.fetch({token:e,filter:t,order:n,limit:r,borderlineChannelUrl:a})];case 1:return[2,i.sent()]}}))}))},t.prototype.upsertChannelsToCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.removeChannelsFromCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.remove(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.clearChannelsFromCache=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return e.sent(),[2]}}))}))},t.prototype.reduceDBSize=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o,l,c,u,d,h,f,p;return Object(te.Tb)(this,(function(m){switch(m.label){case 0:return e=va.of(this._iid),t=te.v.of(this._iid).cacheContext,n=t.localCacheConfig,r=t.nestdb,t.localCacheEnabled&&r&&r.state==ia.OPENED?(a=1024*n.maxSize*1024,[4,r.estimateUsage()]):[2];case 1:if((i=m.sent())<a)return[2];s=[],o=this._groupChannelCache.channels,l={},h=0,m.label=2;case 2:return h<o.length?[4,this.getMessagesFromCache(o[h].url,0,"prev",new ua)]:[3,5];case 3:c=m.sent(),l[o[h].url]=JSON.stringify(c).length,u=new te.z({channel:o[h],cachedMessageCount:c.length}),s.push(u),m.label=4;case 4:return h++,[3,2];case 5:d=s.sort(n.clearOrderComparator),h=0,m.label=6;case 6:return h<d.length?[4,e.removeMessagesOfChannel(d[h].channel.url)]:[3,10];case 7:return m.sent(),[4,e._getGroupChannelPreferenceSize(d[h].channel.url)];case 8:if(f=m.sent(),p=l[d[h].channel.url]+f,(i-=p)<a)return[3,10];m.label=9;case 9:return h++,[3,6];case 10:return[2]}}))}))},t.prototype._handleEvent=function(e){var t;return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N,T,S,I,A,w,M,j,R,U,L,k,D,x,P,F,H,G,B,z,V,q,K,W,Y,Q,X,Z,$,J,ee,ne,re,ae,ie,se,oe,le,ce,ue,de,he,fe,pe,me,be,ge,ve,Ee,ye,Oe,Ce,Ne,Te,Se,Ie,Ae,we,Me,Re,Ue,Le,ke,De,xe,Pe,Fe,He,Ge,Be,ze,Ve,qe,Ke,We,Ye,Qe,Xe,Ze,$e,Je,et,tt,nt,rt,at,it,st,ot,lt,ct,ut,dt,ht,ft,pt,mt,bt,_t,gt,vt,Et,yt,Ot,Ct,Nt,Tt,St,It,At,wt,Mt,jt,Rt,Ut,Lt,kt=this;return Object(te.Tb)(this,(function(Dt){switch(Dt.label){case 0:switch(Dt.trys.push([0,80,,81]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,19];case"MCNT":return[3,23];case"PEDI":return[3,32];case"VOTE":return[3,35];case"SYEV":return[3,38];case"USEV":return[3,78]}return[3,79];case 1:return c=null,"MESG"===e.code?c=e.as(mn):"FILE"===e.code?c=e.as(je):"ADMM"!==e.code&&"BRDM"!=e.code||(c=e.as(ls)),c?(n=c.message,r=c.isMentioned,a=c.forceUpdateLastMessage,n.channelType!==te.y.GROUP?[3,3]:(this._disableMack||Object(te.o)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){return e=new Zo(n),this._requestQueue.send(e),[2]}))}))})),S=this._groupChannelCache.isCachedInMemory(n.channelUrl),f=n instanceof _e&&n.sender.userId===this._sdkState.userId,[4,this.getChannel(n.channelUrl,!0)])):[3,3];case 2:if((i=Dt.sent()).hiddenState===oc.HIDDEN_ALLOW_AUTO_UNHIDE&&(i.hiddenState=oc.UNHIDDEN),n instanceof _e){s=te.v.of(this._iid).useMemberInfoInMessage;try{for(o=Object(te.ic)(i.members),l=o.next();!l.done;l=o.next())if((Ge=l.value).userId===n.sender.userId){s||(n.sender.nickname=Ge.nickname,n.sender.plainProfileUrl=Ge.plainProfileUrl,n.sender.metaData=Ge.metaData,n.sender.isBlockedByMe=Ge.isBlockedByMe);break}}catch(e){Tt={error:e}}finally{try{l&&!l.done&&(St=o.return)&&St.call(o)}finally{if(Tt)throw Tt.error}}!s&&r&&(null===(t=n.mentionedUsers)||void 0===t||t.forEach((function(e){var t,n;try{for(var r=Object(te.ic)(i.members),a=r.next();!a.done;a=r.next()){var s=a.value;if(e.userId===s.userId){e.nickname=s.nickname,e.plainProfileUrl=s.plainProfileUrl,e.metaData=s.metaData;break}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}))),f&&(b=this._sessionManager.currentUser)&&(b.nickname=n.sender.nickname,b.plainProfileUrl=n.sender.plainProfileUrl,b.metaData=n.sender.metaData)}n.silent&&!f||(i.isEphemeral||S)&&((!i.lastMessage||i.lastMessage.createdAt<n.createdAt)&&(i.lastMessage=n),f||i._updateUnreadCount(i.unreadMessageCount+1,i.unreadMentionCount+(r?1:0))),a&&(!i.lastMessage||i.lastMessage.createdAt<n.createdAt)&&(i.lastMessage=n),this._dispatcher.dispatch(new lo({channels:[i],source:te.x.EVENT_MESSAGE_RECEIVED})),n.silent&&!f||Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(s){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(i)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),this._dispatcher.dispatch(new te.K({messages:[n],source:te.x.EVENT_MESSAGE_RECEIVED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,a,s,o;return Object(te.Tb)(this,(function(l){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(a=t.value).onMessageReceived&&a.onMessageReceived(i,n),r&&a.onMentionReceived&&a.onMentionReceived(i,n)}catch(e){s={error:e}}finally{try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Dt.label=3;case 3:return[3,79];case 4:return c=null,"MEDI"===e.code?c=e.as(_n):"FEDI"===e.code?c=e.as(vn):"AEDI"===e.code&&(c=e.as(cs)),c?(u=c.message,d=c.mentionCountChange,u.channelType!==te.y.GROUP?[3,6]:(S=this._groupChannelCache.isCachedInMemory(u.channelUrl),[4,this.getChannel(u.channelUrl,!0)])):[3,6];case 5:h=Dt.sent(),f=u instanceof _e&&u.sender.userId===this._sdkState.userId,p=!1,f?(m=u.sender,(b=this._sessionManager.currentUser)&&(b.nickname=m.nickname,b.plainProfileUrl=m.plainProfileUrl,b.metaData=m.metaData)):h.isReadMessage(u)||0!==d&&!u.silent&&S&&(h._updateUnreadCount(h.unreadMessageCount,h.unreadMentionCount+d),p=!0),!h.lastMessage||h.lastMessage.createdAt<u.createdAt?(h.lastMessage=u,p=!0):h.lastMessage.isIdentical(u)&&(S?h.lastMessage.updatedAt<u.updatedAt&&(h.lastMessage=u,p=!0):p=!0),_=!1,h.lastPinnedMessage&&h.lastPinnedMessage.messageId===u.messageId&&(h.lastPinnedMessage=u,p=!0,_=!0),p&&(this._dispatcher.dispatch(new lo({channels:[h],source:_?te.x.EVENT_PINNED_MESSAGE_UPDATED:te.x.EVENT_MESSAGE_UPDATED})),u.silent&&!f||Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(h)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),_&&Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPinnedMessageUpdated&&n.onPinnedMessageUpdated(h)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),this._dispatcher.dispatch(new te.K({messages:[u],source:te.x.EVENT_MESSAGE_UPDATED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageUpdated&&n.onMessageUpdated(h,u),0!==d&&n.onMentionReceived&&n.onMentionReceived(h,u)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Dt.label=6;case 6:return[3,79];case 7:return g=e.as(yn),Q=g.channelUrl,X=g.channelType,v=g.messageId,X!==te.y.GROUP?[3,9]:[4,this.getChannel(Q,!0)];case 8:E=Dt.sent(),this._dispatcher.dispatch(new te.V({messageIds:[v],source:te.x.EVENT_MESSAGE_DELETED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageDeleted&&n.onMessageDeleted(E,v)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Dt.label=9;case 9:return[3,79];case 10:return(y=e.as(tl).readStatus).channelType!==te.y.GROUP?[3,12]:(S=this._groupChannelCache.isCachedInMemory(y.channelUrl),[4,this.getChannel(y.channelUrl,!0)]);case 11:O=Dt.sent(),S&&O._updateUnreadMemberState(y.reader.userId,y.readAt),y.reader.userId===this._sdkState.userId?S?(O.unreadMessageCount>0||O.unreadMentionCount>0)&&(O._updateUnreadCount(0,0),this._dispatcher.dispatch(new lo({channels:[O],source:te.x.EVENT_CHANNEL_READ})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(O)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))):0!==O.unreadMessageCount&&0!==O.unreadMentionCount||(this._dispatcher.dispatch(new lo({channels:[O],source:te.x.EVENT_CHANNEL_READ})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(O)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))):(this._dispatcher.dispatch(new lo({channels:[O],source:te.x.EVENT_CHANNEL_READ})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUnreadMemberStatusUpdated&&n.onUnreadMemberStatusUpdated(O)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),Dt.label=12;case 12:return[3,79];case 13:return C=e.as(al),Q=C.channelUrl,N=C.deliveredStateUpdate,T=void 0===N?{}:N,S=this._groupChannelCache.isCachedInMemory(Q),[4,this.getChannel(Q,!0)];case 14:if(I=Dt.sent(),S)for(A in T)I._updateUndeliveredMemberState(A,T[A]);return Object.keys(T).some((function(e){return e!==kt._sdkState.userId}))&&(this._dispatcher.dispatch(new lo({channels:[I],source:te.x.EVENT_CHANNEL_DELIVERED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUndeliveredMemberStatusUpdated&&n.onUndeliveredMemberStatusUpdated(I)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),[3,79];case 15:return w=e.as(us),Q=w.channelUrl,X=w.channelType,M=w.event,X!==te.y.GROUP?[3,18]:[4,this.getChannel(Q,!0)];case 16:return j=Dt.sent(),[4,this.getMessageFromCache(M.messageId)];case 17:(L=Dt.sent())&&(L.applyReactionEvent(M),this._dispatcher.dispatch(new te.K({messages:[L],source:te.x.EVENT_MESSAGE_REACTION_UPDATED}))),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onReactionUpdated&&n.onReactionUpdated(j,M)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Dt.label=18;case 18:return[3,79];case 19:return(R=e.as(ds).event).channelType!==te.y.GROUP?[3,22]:[4,this.getChannel(R.channelUrl,!0)];case 20:return U=Dt.sent(),[4,this.getMessageFromCache(R.targetMessageId)];case 21:(L=Dt.sent())&&(L.applyThreadInfoUpdateEvent(R),this._dispatcher.dispatch(new te.K({messages:[L],source:te.x.EVENT_MESSAGE_THREADINFO_UPDATED}))),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onThreadInfoUpdated&&n.onThreadInfoUpdated(U,R)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Dt.label=22;case 22:return[3,79];case 23:k=e.as(hs).groupChannelMemberCounts,D=[],Dt.label=24;case 24:Dt.trys.push([24,29,30,31]),x=Object(te.ic)(k),P=x.next(),Dt.label=25;case 25:return P.done?[3,28]:(F=P.value,Q=F.channelUrl,Ae=F.memberCount,we=F.joinedMemberCount,H=F.updatedAt,[4,this.getChannelFromCache(Q)]);case 26:(G=Dt.sent())&&G._setLatestMemberCount(Ae,we,H)&&D.push(G),Dt.label=27;case 27:return P=x.next(),[3,25];case 28:return[3,31];case 29:return B=Dt.sent(),It={error:B},[3,31];case 30:try{P&&!P.done&&(At=x.return)&&At.call(x)}finally{if(It)throw It.error}return[7];case 31:return D.length>0&&(this._dispatcher.dispatch(new lo({channels:D,source:te.x.EVENT_CHANNEL_MEMBER_COUNT_UPDATED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelMemberCountChanged&&n.onChannelMemberCountChanged(D)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}))),[3,79];case 32:return z=e.as(fs),V=z.event,q=z.status,Q=z.channelUrl,X=z.channelType,Q&&X===te.y.GROUP?[4,this.getChannel(Q,!0)]:[3,34];case 33:K=Dt.sent(),this._dispatcher.dispatch(new te.S({event:V,source:te.x.EVENT_POLL_UPDATED})),Object(te.b)(q===te.Mb?function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollDeleted&&n.onPollDeleted(K,V.pollId)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}:function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollUpdated&&n.onPollUpdated(K,V)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))}),Dt.label=34;case 34:return[3,79];case 35:return W=e.as(zn),Y=W.event,Q=W.channelUrl,X=W.channelType,Q&&X===te.y.GROUP?[4,this.getChannel(Q,!0)]:[3,37];case 36:Z=Dt.sent(),this._dispatcher.dispatch(new te.N({event:Y,source:te.x.EVENT_POLL_VOTED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollVoted&&n.onPollVoted(Z,Y)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Dt.label=37;case 37:return[3,79];case 38:if(!($=e.as(as).event).isGroupChannelEvent)return[3,77];switch($.category){case ts.CHANNEL_JOIN:return[3,39];case ts.CHANNEL_LEAVE:return[3,41];case ts.CHANNEL_OPERATOR_UPDATE:return[3,45];case ts.CHANNEL_INVITE:return[3,47];case ts.CHANNEL_DECLINE_INVITE:return[3,49];case ts.TYPING_START:case ts.TYPING_END:return[3,51];case ts.USER_CHANNEL_MUTE:case ts.USER_CHANNEL_UNMUTE:return[3,53];case ts.USER_CHANNEL_BAN:return[3,55];case ts.USER_CHANNEL_UNBAN:return[3,59];case ts.CHANNEL_FREEZE:case ts.CHANNEL_UNFREEZE:return[3,61];case ts.CHANNEL_HIDE:return[3,63];case ts.CHANNEL_UNHIDE:return[3,65];case ts.CHANNEL_DELETED:return[3,67];case ts.CHANNEL_PROP_CHANGED:return[3,69];case ts.CHANNEL_META_DATA_CHANGED:return[3,71];case ts.CHANNEL_META_COUNTERS_CHANGED:return[3,73];case ts.PINNED_MESSAGE_CHANGED:return[3,75]}return[3,77];case 39:return[4,this.getChannel($.channelUrl,!0)];case 40:return J=Dt.sent(),ee=e.as(ko),ne=ee.memberCount,re=ee.joinedMemberCount,ae=ee.members,ie=!1,ae.forEach((function(e){J.isExclusive||J.isSuper||J.isBroadcast?ie=ie||J._setLatestMemberCount(ne,re,$.ts):(e.state=Us.JOINED,J.addMember(e,$.ts),kt._updateJoinedMemberCount(J)),e.userId===kt._sdkState.userId&&(J.myMemberState=Us.JOINED)})),this._dispatcher.dispatch(new lo({channels:[J],source:te.x.EVENT_CHANNEL_JOINED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){var t,n;try{for(var r=Object(te.ic)(ae),a=r.next();!a.done;a=r.next()){var i=a.value;e.onUserJoined&&e.onUserJoined(J,i)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}J.isBroadcast&&ie&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([J])})),[2]}))}))})),[3,77];case 41:return(Be=this._leftChannels.get($.channelUrl))?(oe=Be.channel,[3,44]):[3,42];case 42:return[4,this.getChannel($.channelUrl,!0)];case 43:oe=Dt.sent(),Dt.label=44;case 44:return se=oe,le=e.as(xo),Ae=le.memberCount,we=le.joinedMemberCount,ce=le.member,ue=!1,de=te.v.of(this._iid).appInfo,se.isExclusive||se.isSuper||se.isBroadcast?ue=se._setLatestMemberCount(Ae,we,$.ts):((null==de?void 0:de.enabledChannelMemberShipHistory)?((he=se.members.find((function(e){return e.userId===he.userId})))&&(he.state=Us.LEFT),se.memberCount=Ae):se.removeMember(ce),this._updateJoinedMemberCount(se)),ce.userId===this._sdkState.userId?(se.myMemberState=Us.NONE,se.invitedAt=0,se.joinedAt=0,se._updateUnreadCount(0,0),se.isPublic?this._dispatcher.dispatch(new lo({channels:[se],source:te.x.EVENT_CHANNEL_LEFT})):(this._markAsLeave(se),this._dispatcher.dispatch(new co({channelUrls:[se.url],source:te.x.EVENT_CHANNEL_LEFT})))):this._dispatcher.dispatch(new lo({channels:[se],source:te.x.EVENT_CHANNEL_LEFT})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserLeft&&e.onUserLeft(se,ce),se.isBroadcast&&ue&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([se])})),[2]}))}))})),[3,77];case 45:return[4,this.getChannel($.channelUrl,!0)];case 46:fe=Dt.sent(),pe=e.as(is).operators,me=pe.map((function(e){return e.userId}));try{for(be=Object(te.ic)(fe.members),ge=be.next();!ge.done;ge=be.next())(Ge=ge.value).role=me.includes(Ge.userId)?te.D.OPERATOR:te.D.NONE}catch(e){wt={error:e}}finally{try{ge&&!ge.done&&(Mt=be.return)&&Mt.call(be)}finally{if(wt)throw wt.error}}return fe.myRole=me.includes(this._sdkState.userId)?te.D.OPERATOR:te.D.NONE,this._dispatcher.dispatch(new lo({channels:[fe],source:te.x.EVENT_CHANNEL_OPERATOR_UPDATED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(fe,pe)})),[2]}))}))})),[3,77];case 47:return[4,this.getChannel($.channelUrl,!0)];case 48:ve=Dt.sent(),Ee=e.as(Ho),Ae=Ee.memberCount,we=Ee.joinedMemberCount,ye=Ee.inviter,(Oe=Ee.invitees).forEach((function(e){return e.state=Us.INVITED}));try{for(Ce=Object(te.ic)(Oe),Ne=Ce.next();!Ne.done;Ne=Ce.next())Te=Ne.value,ve.isExclusive||ve.isSuper||ve.isBroadcast?ve._setLatestMemberCount(Ae,we,$.ts):ve.addMember(Te,$.ts),this._sdkState.userId===Te.userId&&(ve.hiddenState=oc.UNHIDDEN,ve.myMemberState!==Us.JOINED&&(ve.myMemberState=Us.INVITED),ve.invitedAt=$.ts)}catch(e){jt={error:e}}finally{try{Ne&&!Ne.done&&(Rt=Ce.return)&&Rt.call(Ce)}finally{if(jt)throw jt.error}}return this._dispatcher.dispatch(new lo({channels:[ve],source:te.x.EVENT_CHANNEL_INVITED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserReceivedInvitation&&e.onUserReceivedInvitation(ve,ye,Oe)})),[2]}))}))})),[3,77];case 49:return[4,this.getChannel($.channelUrl,!0)];case 50:return Se=Dt.sent(),Ie=e.as(Bo),Ae=Ie.memberCount,we=Ie.joinedMemberCount,Me=Ie.inviter,Re=Ie.invitee,Se.isExclusive||Se.isSuper||Se.isBroadcast?Se._setLatestMemberCount(Ae,we,$.ts):Se.removeMember(Re),this._sdkState.userId===Re.userId?(Se.invitedAt=0,Se.myMemberState=Us.NONE,Se.isPublic?this._dispatcher.dispatch(new lo({channels:[Se],source:te.x.EVENT_CHANNEL_DECLINED_INVITE})):this._dispatcher.dispatch(new co({channelUrls:[Se.url],source:te.x.EVENT_CHANNEL_DECLINED_INVITE}))):this._dispatcher.dispatch(new lo({channels:[Se],source:te.x.EVENT_CHANNEL_DECLINED_INVITE})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserDeclinedInvitation&&e.onUserDeclinedInvitation(Se,Me,Re)})),[2]}))}))})),[3,77];case 51:return[4,this.getChannel($.channelUrl,!0)];case 52:return Ue=Dt.sent(),Le=$.category===ts.TYPING_START,ke=e.as(Le?Yo:Xo).user,Ue._updateTypingStatus(ke,Le?$.ts:0),this._dispatcher.dispatch(new lo({channels:[Ue],source:te.x.EVENT_CHANNEL_TYPING_STATUS_UPDATE})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onTypingStatusUpdated&&e.onTypingStatusUpdated(Ue)})),[2]}))}))})),[3,77];case 53:return[4,this.getChannel($.channelUrl,!0)];case 54:De=Dt.sent(),xe=$.category===ts.USER_CHANNEL_MUTE,(Pe=e.as(xe?tn:rn).user).userId===this._sdkState.userId&&(De.myMutedState=xe?te.C.MUTED:te.C.UNMUTED,De._myMutedRemainingTime=Pe.restrictionInfo.remainingDuration);try{for(Fe=Object(te.ic)(De.members),He=Fe.next();!He.done;He=Fe.next())if((Ge=He.value).userId===Pe.userId){Ge.isMuted=xe;break}}catch(e){Ut={error:e}}finally{try{He&&!He.done&&(Lt=Fe.return)&&Lt.call(Fe)}finally{if(Ut)throw Ut.error}}return this._dispatcher.dispatch(new lo({channels:[De],source:xe?te.x.EVENT_CHANNEL_MUTED:te.x.EVENT_CHANNEL_UNMUTED,data:Pe.userId})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){xe?e.onUserMuted&&e.onUserMuted(De,Pe):e.onUserUnmuted&&e.onUserUnmuted(De,Pe)})),[2]}))}))})),[3,77];case 55:return(Be=this._leftChannels.get($.channelUrl))?(Ve=Be.channel,[3,58]):[3,56];case 56:return[4,this.getChannel($.channelUrl,!0)];case 57:Ve=Dt.sent(),Dt.label=58;case 58:return ze=Ve,this._markAsLeave(ze),(qe=e.as(sn).user).userId===this._sdkState.userId&&this._dispatcher.dispatch(new co({channelUrls:[ze.url],source:te.x.EVENT_CHANNEL_BANNED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserBanned&&e.onUserBanned(ze,qe)})),[2]}))}))})),[3,77];case 59:return[4,this.getChannel($.channelUrl,!0)];case 60:return Ke=Dt.sent(),(We=e.as(ln).user).userId===this._sdkState.userId&&this._dispatcher.dispatch(new co({channelUrls:[Ke.url],source:te.x.EVENT_CHANNEL_UNBANNED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserUnbanned&&e.onUserUnbanned(Ke,We)})),[2]}))}))})),[3,77];case 61:return[4,this.getChannel($.channelUrl,!0)];case 62:return Ye=Dt.sent(),Qe=e.as(un).freeze,Ye.isFrozen=Qe,this._dispatcher.dispatch(new lo({channels:[Ye],source:Qe?te.x.EVENT_CHANNEL_FROZEN:te.x.EVENT_CHANNEL_UNFROZEN})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){Qe?e.onChannelFrozen&&e.onChannelFrozen(Ye):e.onChannelUnfrozen&&e.onChannelUnfrozen(Ye)})),[2]}))}))})),[3,77];case 63:return[4,this.getChannel($.channelUrl,!0)];case 64:return Xe=Dt.sent(),Ze=e.as(Ko),$e=Ze.allowAutoUnhide,Je=Ze.hidePreviousMessages,et=Ze.messageOffsetTimestamp,null!==$e&&(Xe.hiddenState=$e?oc.HIDDEN_ALLOW_AUTO_UNHIDE:oc.HIDDEN_PREVENT_AUTO_UNHIDE),null!==Je&&Je&&Xe._updateUnreadCount(0,0),null!==et&&(Xe.messageOffsetTimestamp=et),this._dispatcher.dispatch(new lo({channels:[Xe],source:te.x.EVENT_CHANNEL_HIDDEN})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelHidden&&e.onChannelHidden(Xe)})),[2]}))}))})),[3,77];case 65:return[4,this.getChannel($.channelUrl,!0)];case 66:return(tt=Dt.sent()).hiddenState=oc.UNHIDDEN,this._dispatcher.dispatch(new lo({channels:[tt],source:te.x.EVENT_CHANNEL_UNHIDDEN})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(tt)})),[2]}))}))})),[3,77];case 67:return[4,this.getChannel($.channelUrl,!0)];case 68:return nt=Dt.sent(),this._dispatcher.dispatch(new co({channelUrls:[$.channelUrl],source:te.x.EVENT_CHANNEL_DELETED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(nt.url,nt.channelType)})),[2]}))}))})),[3,77];case 69:return[4,this.getChannelWithoutCache($.channelUrl,!0)];case 70:return rt=Dt.sent(),this._dispatcher.dispatch(new lo({channels:[rt],source:te.x.EVENT_CHANNEL_UPDATED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(rt)})),[2]}))}))})),[3,77];case 71:return[4,this.getChannel($.channelUrl,!0)];case 72:return at=Dt.sent(),it=e.as(Ht),st=it.created,ot=it.updated,lt=it.deleted,st&&(at._upsertCachedMetaData(st,$.ts),this._dispatcher.dispatch(new lo({channels:[at],source:te.x.EVENT_CHANNEL_METADATA_CREATED}))),ot&&(at._upsertCachedMetaData(ot,$.ts),this._dispatcher.dispatch(new lo({channels:[at],source:te.x.EVENT_CHANNEL_METADATA_UPDATED}))),lt&&(at._removeFromCachedMetaData(lt,$.ts),this._dispatcher.dispatch(new lo({channels:[at],source:te.x.EVENT_CHANNEL_METADATA_DELETED}))),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){st&&e.onMetaDataCreated&&e.onMetaDataCreated(at,st),ot&&e.onMetaDataUpdated&&e.onMetaDataUpdated(at,ot),lt&&e.onMetaDataDeleted&&e.onMetaDataDeleted(at,lt)})),[2]}))}))})),[3,77];case 73:return[4,this.getChannel($.channelUrl,!0)];case 74:return ct=Dt.sent(),ut=e.as(Zt),dt=ut.created,ht=ut.updated,ft=ut.deleted,dt&&this._dispatcher.dispatch(new lo({channels:[ct],source:te.x.EVENT_CHANNEL_METACOUNTER_CREATED})),ht&&this._dispatcher.dispatch(new lo({channels:[ct],source:te.x.EVENT_CHANNEL_METACOUNTER_UPDATED})),ft&&this._dispatcher.dispatch(new lo({channels:[ct],source:te.x.EVENT_CHANNEL_METACOUNTER_DELETED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){dt&&e.onMetaCounterCreated&&e.onMetaCounterCreated(ct,dt),ht&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(ct,ht),ft&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(ct,ft)})),[2]}))}))})),[3,77];case 75:return[4,this.getChannel($.channelUrl,!0)];case 76:return pt=Dt.sent(),mt=e.as(Jo),bt=mt.pinnedMessageIds,_t=mt.latestPinnedMessage,(gt=mt.ts)>pt._pinnedMessagesUpdatedAt&&(pt.pinnedMessageIds=bt,pt.lastPinnedMessage=_t,pt._pinnedMessagesUpdatedAt=gt,this._dispatcher.dispatch(new lo({channels:[pt],source:te.x.EVENT_PINNED_MESSAGE_UPDATED})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){try{for(e=Object(te.ic)(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(pt)}catch(e){r={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),Object(te.b)((function(){return Object(te.Ib)(kt,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(pt)})),[2]}))}))}))),[3,77];case 77:return[3,79];case 78:switch((vt=e.as(Va).event).category){case Da.USER_BLOCK:Et=Ga.getDataAsUserBlockEvent(this._iid,vt),Ot=Et.blocker,Ct=Et.blockee,this._groupChannelCache.block(Ot.userId,Ct.userId);break;case Da.USER_UNBLOCK:yt=Ga.getDataAsUserBlockEvent(this._iid,vt),Ot=yt.blocker,Ct=yt.blockee,this._groupChannelCache.unblock(Ot.userId,Ct.userId)}return[3,79];case 79:return[3,81];case 80:if(Nt=Dt.sent(),Object(te.L)(Nt))throw Nt;return[3,81];case 81:return[2]}}))}))},t.prototype._markAsLeave=function(e){var t,n=this,r=null!==(t=this._leftChannels.get(e.url))&&void 0!==t?t:{channel:e,ref:0};r.ref++,this._leftChannels.set(e.url,r),setTimeout((function(){r.ref--,0===r.ref&&n._leftChannels.delete(e.url)}),1e4)},t.prototype.addHandler=function(e,t){this._groupChannelHandlers.set(e,t)},t.prototype.removeHandler=function(e){this._groupChannelHandlers.delete(e)},t.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},t.prototype.subscribeChannelEvent=function(e,t){this._groupChannelBroadcast.subscribe(e,t)},t.prototype.unsubscribeChannelEvent=function(e){this._groupChannelBroadcast.unsubscribe(e)},t.prototype._updateJoinedMemberCount=function(e){e.joinedMemberCount=e.members.filter((function(e){return e.state===Us.JOINED})).length},t.prototype.getChannel=function(e,t){return void 0===t&&(t=!1),Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(n=r.sent())?[2,n]:[3,4];case 3:return r.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,t)];case 5:return[2,r.sent()]}}))}))},t.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),n=new po({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:switch(r=o.sent(),a=r.as(mo).channel,i=a.unreadMessageCount,s=a.unreadMentionCount,a.myCountPreference){case sc.UNREAD_MESSAGE_COUNT_ONLY:s=0;break;case sc.UNREAD_MENTION_COUNT_ONLY:i=0;break;case sc.OFF:i=0,s=0}return a._updateUnreadCount(i,s),[4,this.upsertChannelsToCache([a])];case 2:return[2,o.sent()[0]]}}))}))},t.prototype.refreshChannel=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=te.x.REFRESH_CHANNEL),Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),r=new po({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(r)];case 1:return a=l.sent(),(i=a.as(mo).channel).myMemberState!==Us.NONE?[3,2]:(this._dispatcher.dispatch(new co({channelUrls:[i.url],source:n})),[3,4]);case 2:return[4,this.upsertChannelsToCache([i])];case 3:s=l.sent(),this._dispatcher.dispatch(new lo({channels:s,source:n})),l.label=4;case 4:return[3,6];case 5:return(o=l.sent()).code!==te.tb.NON_AUTHORIZED&&o.code!==te.tb.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new co({channelUrls:[e],source:n})),[3,6];case 6:return[2]}}))}))},t.prototype.getMyGroupChannels=function(e,t,n,r){return void 0===r&&(r=te.x.REQUEST_CHANNEL),Object(te.Ib)(this,void 0,void 0,(function(){var a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return t.createdAfter&&(t.createdAfter=Math.floor(t.createdAfter/1e3)),t.createdBefore&&(t.createdBefore=Math.floor(t.createdBefore/1e3)),a=new _o(Object(te.Xb)(Object(te.Xb)({},t),{userId:this._sdkState.userId,token:e,limit:n})),[4,this._requestQueue.send(a)];case 1:return i=c.sent(),s=i.as(go),o=s.channels,l=s.token,this._dispatcher.dispatch(new lo({channels:o,source:r})),[2,{channels:o,token:l}]}}))}))},t.prototype.getMyGroupChannelChangeLogs=function(e,t,n){return void 0===n&&(n=te.x.REQUEST_CHANNEL_CHANGELOGS),Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o,l,c,u;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:return r=Object(te.Xb)(Object(te.Xb)({},eo),t),Object(te.jc)((Object(te.B)("string",e)||Object(te.B)("number",e))&&to(r)).throw(te.hc.invalidParameters),a=new ho(Object(te.lc)({userId:this._sdkState.userId,ts:"number"==typeof e?e:null,token:"string"==typeof e?e:null,filter:r})),[4,this._requestQueue.send(a)];case 1:return i=d.sent(),s=i.as(fo),o=s.updatedChannels,l=s.deletedChannelUrls,c=s.hasMore,u=s.ts,o.length>0&&this._dispatcher.dispatch(new lo({channels:o,source:n,ts:u})),l.length>0&&this._dispatcher.dispatch(new co({channelUrls:l,source:n})),[2,{updatedChannels:o,deletedChannelUrls:l,hasMore:c,token:s.token}]}}))}))},t.prototype.getGroupChannelCount=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},no),e),Object(te.jc)(ro(t)).throw(te.hc.invalidParameters),n=new vo({userId:this._sdkState.userId,filter:t}),[4,this._requestQueue.send(n)];case 1:return[2,r.sent().as(Eo).groupChannelCount]}}))}))},t.prototype.getUnreadItemCount=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d,h,f,p,m,b;return Object(te.Tb)(this,(function(_){switch(_.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},ao),e),Object(te.jc)(function(e){return Object(te.k)(Qs,e.keys)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid),r=n.sdkState,a=n.requestQueue,i=new yo({userId:r.userId,filter:t}),[4,a.send(i)];case 1:return s=_.sent(),o=s.as(Oo),l=o.groupChannelUnreadMentionCount,c=o.groupChannelUnreadMessageCount,u=o.groupChannelInvitationCount,d=o.superGroupChannelUnreadMentionCount,h=o.superGroupChannelUnreadMessageCount,f=o.superGroupChannelInvitationCount,p=o.nonSuperGroupChannelUnreadMentionCount,m=o.nonSuperGroupChannelUnreadMessageCount,b=o.nonSuperGroupChannelInvitationCount,[2,Object(te.Vb)({groupChannelUnreadMentionCount:l,groupChannelUnreadMessageCount:c,groupChannelInvitationCount:u,superGroupChannelUnreadMentionCount:d,superGroupChannelUnreadMessageCount:h,superGroupChannelInvitationCount:f,nonSuperGroupChannelUnreadMentionCount:p,nonSuperGroupChannelUnreadMessageCount:m,nonSuperGroupChannelInvitationCount:b})]}}))}))},t.prototype.getTotalUnreadChannelCount=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Co({userId:t.userId}),[4,n.send(r)];case 1:return[2,a.sent().as(No).unreadCount]}}))}))},t.prototype.getTotalUnreadMessageCount=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},io),e),Object(te.jc)(function(e){return Object(te.k)("string",e.channelCustomTypesFilter,!0)&&Object(te.q)(Gs,e.superChannelFilter)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid),r=n.sdkState,a=n.requestQueue,i=new To({userId:r.userId,filter:t}),[4,a.send(i)];case 1:return[2,s.sent().as(So).unreadCount]}}))}))},t.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},so),e),Object(te.jc)(function(e){return Object(te.B)("string",e.channelUrl,!0)&&Object(te.k)(ie,e.scheduledStatus,!0)&&Object(te.q)(te.nb,e.messageTypeFilter)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid).requestQueue,r=new Io(t),[4,n.send(r)];case 1:return[2,a.sent().as(Ao).count]}}))}))},t.prototype.getSubscribedTotalUnreadMessageCount=function(){var e=te.v.of(this._iid).subscribedUnreadMessageCount;return e.all>=0?e.all:0},t.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var e=0,t=te.v.of(this._iid).subscribedUnreadMessageCount;for(var n in t.customTypes)e+=t.customTypes[n];return e},t.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){var t;return null!==(t=te.v.of(this._iid).subscribedUnreadMessageCount.customTypes[e])&&void 0!==t?t:0},t.prototype.createChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},$s),e),Object(te.jc)(Js(t)).throw(te.hc.invalidParameters),t.isPublic||(t.accessCode=void 0),n=new Mo(Object(te.Xb)({userId:this._sdkState.userId},t)),[4,this._requestQueue.send(n)];case 1:return r=i.sent(),a=r.as(jo).channel,[4,this.upsertChannelsToCache([a])];case 2:return i.sent(),[2,a]}}))}))},t.prototype.markAsReadAll=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return e=Date.now(),Object(te.jc)(e-this._markAsReadAllLastSentAt>=1e3).throw(te.hc.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=e,t=new Ro({userId:this._sdkState.userId}),[4,this._requestQueue.send(t)];case 1:l.sent(),n=this._groupChannelCache.channels;try{for(r=Object(te.ic)(n),a=r.next();!a.done;a=r.next())(i=a.value)._updateUnreadMemberState(this._sdkState.userId,e),i._updateUnreadCount(0,0)}catch(e){s={error:e}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return n.length>0?[4,this.upsertChannelsToCache(n)]:[3,3];case 2:l.sent(),l.label=3;case 3:return[2]}}))}))},t.prototype.markAsReadWithChannelUrls=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return t=Date.now(),Object(te.jc)(Object(te.k)("string",e)&&t-this._markAsReadAllLastSentAt>=1e3).throw(te.hc.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,n=new Ro({userId:this._sdkState.userId,channelUrls:e}),[4,this._requestQueue.send(n)];case 1:u.sent(),r=this._groupChannelCache.channels,a=[];try{for(i=Object(te.ic)(r),s=i.next();!s.done;s=i.next())o=s.value,e.includes(o.url)&&(o._updateUnreadMemberState(this._sdkState.userId,t),o._updateUnreadCount(0,0),a.push(o))}catch(e){l={error:e}}finally{try{s&&!s.done&&(c=i.return)&&c.call(i)}finally{if(l)throw l.error}}return a.length>0?[4,this.upsertChannelsToCache(a)]:[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},t.prototype.markAsDelivered=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},t}(os);!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(rl||(rl={}));var ol,ll=function(e){function t(t,n,r,a){var i=e.call(this)||this;return i._state=rl.IDLE,i._retryCount=0,i._retryLimit=3,i.priority=0,i._worker=n,i}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"isIdle",{get:function(){return this._state===rl.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._state===rl.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDone",{get:function(){return this._state===rl.END},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),t.prototype._run=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:if(!this.isRunning)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._worker(e)];case 2:return t=r.sent(),this._retryCount=0,this.dispatch("progress",t),t.hasNext?this._run(t.nextToken):this.end(),[3,4];case 3:return n=r.sent(),this.dispatch("error",n),this._retryCount<this._retryLimit?(this._retryCount++,this._run(e)):this.stop(),[3,4];case 4:return[2]}}))}))},t.prototype.start=function(e){this.isIdle&&(this._state=rl.RUNNING,this._run(e))},t.prototype.stop=function(){this._state=rl.IDLE,this.dispatch("stop")},t.prototype.end=function(){this._state=rl.END,this.dispatch("end")},t}(te.e),cl={},ul=function(){function e(e){var t=e._iid,n=e.channel,r=e.limit,a=void 0===r?100:r,i=this;this.ref=0,this._iid=t,this._channel=n,this._limit=a,this._prevSyncLoopCount=0,this._nextSyncLoopCount=0;var s,o,l=te.v.of(this._iid),c=l.sdkState,u=l.cacheContext,d=l.dispatcher,h=l.logger,f=l.statLogCollector;this._metadataKey=(s=c.userId,o=n.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/message/sync.meta"));var p=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/sync")}(c.userId,n.url);this._prevSync=new ll(p,(function(e){return Object(te.Ib)(i,void 0,void 0,(function(){var t,r,a,i,s,o,l,c,d,p,m,b;return Object(te.Tb)(this,(function(_){switch(_.label){case 0:return t={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata(e)];case 1:if(_.sent(),h.debug("message background prev sync from",null===(o=this._metadata)||void 0===o?void 0:o.range.top),null===(l=this._metadata)||void 0===l?void 0:l.previousComplete)return[3,10];_.label=2;case 2:return _.trys.push([2,5,8,9]),[4,Ca.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(d=null===(c=this._metadata)||void 0===c?void 0:c.range)||void 0===d?void 0:d.top)?this._metadata.range.top:e,{prevResultSize:this._limit,nextResultSize:0,replyType:te.wb.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},te.x.SYNC_MESSAGE_BACKGROUND)];case 3:return(r=_.sent()).length>0&&(a=r.map((function(e){return e.createdAt})),(null===(p=this._metadata)||void 0===p?void 0:(s=p.range).intersect.apply(s,Object(te.fc)([],Object(te.gc)(a),!1)))?this.extendRange(r):this._metadata={range:new ss({top:Math.min.apply(Math,Object(te.fc)([],Object(te.gc)(a),!1)),bottom:Math.max.apply(Math,Object(te.fc)([],Object(te.gc)(a),!1))}),previousComplete:!1}),t.hasNext=r.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.top,this._metadata.previousComplete=r.length<this._limit),h.debug("message background prev sync progress",t),[4,this.saveMetadata()];case 4:return _.sent(),[3,9];case 5:return i=_.sent(),h.debug("message background prev sync error",i),i instanceof te.hc&&i.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:_.sent(),_.label=7;case 7:throw i;case 8:return f.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(b=null===(m=u.localCacheConfig)||void 0===m?void 0:m.maxSize)&&void 0!==b?b:0,use_local_cache:u.localCacheEnabled}})),[7];case 9:return[3,11];case 10:t.hasNext=!1,_.label=11;case 11:return[2,t]}}))}))})),this._nextSync=new ll(p,(function(e){return Object(te.Ib)(i,void 0,void 0,(function(){var t,r,a,i,s,o,l,c,d,p,m;return Object(te.Tb)(this,(function(b){switch(b.label){case 0:return t={hasNext:!0,nextToken:0},this._nextSyncLoopCount++,[4,this.loadMetadata(e)];case 1:b.sent(),h.debug("message background next sync from",null===(o=this._metadata)||void 0===o?void 0:o.range.bottom),b.label=2;case 2:return b.trys.push([2,5,6,7]),[4,Ca.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(c=null===(l=this._metadata)||void 0===l?void 0:l.range)||void 0===c?void 0:c.bottom)?this._metadata.range.bottom:e,{prevResultSize:0,nextResultSize:this._limit,replyType:te.wb.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},te.x.SYNC_MESSAGE_BACKGROUND)];case 3:return(r=b.sent()).length>0&&(a=r.map((function(e){return e.createdAt})),(null===(d=this._metadata)||void 0===d?void 0:(s=d.range).intersect.apply(s,Object(te.fc)([],Object(te.gc)(a),!1)))?this.extendRange(r):this._metadata={range:new ss({top:Math.min.apply(Math,Object(te.fc)([],Object(te.gc)(a),!1)),bottom:Math.max.apply(Math,Object(te.fc)([],Object(te.gc)(a),!1))}),previousComplete:!1}),t.hasNext=r.length>=this._limit&&this._nextSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.bottom),h.debug("message background next sync progress",t),[4,this.saveMetadata()];case 4:return b.sent(),[3,7];case 5:throw i=b.sent(),h.debug("message background next sync error",i),i;case 6:return f.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(m=null===(p=u.localCacheConfig)||void 0===p?void 0:p.maxSize)&&void 0!==m?m:0,use_local_cache:u.localCacheEnabled}})),[7];case 7:return[2,t]}}))}))})),this._connectionEventContext=d.on((function(e){e instanceof te.pc&&(e.stateType===te.qc.CONNECTED?i.resume():i.pause())}))}return e.of=function(t,n){return cl[t]||(cl[t]={}),cl[t][n.url]||(cl[t][n.url]=new e({_iid:t,channel:n})),cl[t][n.url].ref++,cl[t][n.url]},e.clear=function(e,t){cl[e]&&cl[e][t]&&(cl[e][t].close(),delete cl[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new ss({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(e){var t;return null===(t=this.range)||void 0===t?void 0:t.includes.apply(t,Object(te.fc)([],Object(te.gc)(e.map((function(e){return e.createdAt}))),!1))},e.prototype.extendRange=function(e){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,Object(te.fc)([],Object(te.gc)(e.map((function(e){return e.createdAt}))),!1))},e.prototype.loadMetadata=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return this._metadata?[3,2]:[4,te.v.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:(t=n.sent())?t.range.bottom<e?this._metadata={range:new ss({}),previousComplete:!1}:this._metadata={range:new ss(t.range),previousComplete:t.previousComplete}:this._metadata={range:new ss({}),previousComplete:!1},n.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,te.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,te.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(e){var t,n,r,a;void 0===e&&(e=Date.now());var i=te.v.of(this._iid),s=i.logger;i.connectionManager.isConnected&&(s.debug("message background sync resume()"),this._prevSyncLoopCount=this._nextSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start(null!==(n=null===(t=this._metadata)||void 0===t?void 0:t.range.top)&&void 0!==n?n:e),this._nextSync.start(null!==(a=null===(r=this._metadata)||void 0===r?void 0:r.range.bottom)&&void 0!==a?a:e))},e.prototype.pause=function(){te.v.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete cl[this._iid][this._channel.url])},e}(),dl={},hl=function(){function e(e){var t=e._iid,n=e.channel,r=this;this.ref=0,this._iid=t,this._channel=n;var a,i,s=te.v.of(this._iid),o=s.logger,l=s.sdkState,c=s.dispatcher;this._metadataKey=(a=l.userId,i=n.url,"sendbird:".concat(a,"@groupchannel/").concat(i,"/message/changelogs.meta"));var u=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/changelogs")}(l.userId,this._channel.url);this._sync=new ll(u,(function(){return Object(te.Ib)(r,void 0,void 0,(function(){var e,t,n,r,a,i,s,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:c.sent(),o.debug("message changelog sync from",null===(l=this._metadata)||void 0===l?void 0:l.token),c.label=2;case 2:return c.trys.push([2,5,,8]),[4,Ca.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,{replyType:te.wb.ALL,includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0},te.x.SYNC_MESSAGE_CHANGELOGS)];case 3:return t=c.sent(),n=t.updatedMessages,r=t.deletedMessageIds,a=t.hasMore,i=t.token,e.hasNext=a,e.nextToken=i,(n.length>0||r.length>0)&&this._metadata&&(this._metadata.token=i),o.debug("message changelog sync progress",e),[4,this.saveMetadata()];case 4:return c.sent(),[3,8];case 5:return s=c.sent(),o.debug("message changelog sync error",s),s instanceof te.hc&&s.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:c.sent(),c.label=7;case 7:throw s;case 8:return[2,e]}}))}))})),this._connectionEventContext=c.on((function(e){e instanceof te.pc&&(e.stateType===te.qc.CONNECTED?r.resume():r.pause())}))}return e.of=function(t,n){return dl[t]||(dl[t]={}),dl[t][n.url]||(dl[t][n.url]=new e({_iid:t,channel:n})),dl[t][n.url].ref++,dl[t][n.url]},e.clear=function(e,t){dl[e]&&dl[e][t]&&(dl[e][t].close(),delete dl[e])},e.prototype.loadMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(e=te.v.of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:r=a.sent(),this._metadata={token:r?r.token:n},a.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,te.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,te.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e=te.v.of(this._iid),t=e.logger;e.connectionManager.isConnected&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){var e=te.v.of(this._iid),t=e.logger;e.connectionManager,t.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete dl[this._iid][this._channel.url])},e}(),fl={},pl=function(){function e(e){var t=e._iid,n=e.channel,r=e.hasPollMessage,a=this;this.ref=0,this._iid=t,this._channel=n;var i,s,o=te.v.of(this._iid),l=o.logger,c=o.sdkState,u=o.dispatcher;this._metadataKey=(i=c.userId,s=n.url,"sendbird:".concat(i,"@groupchannel/").concat(s,"/poll/changelogs.meta"));var d=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/poll/changelogs")}(c.userId,this._channel.url);this._sync=new ll(d,(function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,t,n,a,i,s,o,c;return Object(te.Tb)(this,(function(u){switch(u.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return u.sent(),l.debug("poll changelog sync from",null===(c=this._metadata)||void 0===c?void 0:c.token),(t=!this._metadata||!this._metadata.token)?[4,r()]:[3,3];case 2:t=!u.sent(),u.label=3;case 3:if(t)return[2,{hasNext:!1,nextToken:0}];this._metadata||(n=te.v.of(this._iid).firstConnectedAt,this._metadata={token:n}),u.label=4;case 4:return u.trys.push([4,7,,10]),[4,te.O.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return a=u.sent(),i=a.hasMore,s=a.token,e.hasNext=i,e.nextToken=s,this._metadata.token=s,l.debug("poll changelog sync progress",e),[4,this.saveMetadata()];case 6:return u.sent(),[3,10];case 7:return o=u.sent(),l.debug("poll changelog sync error",o),o instanceof te.hc&&o.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:u.sent(),u.label=9;case 9:throw o;case 10:return[2,e]}}))}))})),this._connectionEventContext=u.on((function(e){e instanceof te.pc&&(e.stateType===te.qc.CONNECTED?a.resume():a.pause())}))}return e.of=function(t,n,r){return fl[t]||(fl[t]={}),fl[t][n.url]||(fl[t][n.url]=new e({_iid:t,channel:n,hasPollMessage:r})),fl[t][n.url].ref++,fl[t][n.url]},e.prototype.loadMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,te.v.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata=e?{token:e.token}:void 0,t.label=2;case 2:return[2]}}))}))},e.prototype.saveMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,te.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.clearMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,te.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){te.v.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){te.v.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete fl[this._iid][this._channel.url])},e}(),ml=function(e,t){return t instanceof _e?e.findIndex((function(e){return e instanceof _e&&t.isIdentical(e)})):e.findIndex((function(e){return e.isIdentical(t)}))},bl=function(e,t){return e.findIndex((function(e){return e.messageId===t}))},_l=function(e,t){if(e.length>0){for(var n=0,r=e.length-1,a=Math.floor((n+r)/2);n<r;){var i=e[a].createdAt-t.createdAt;if(i>0)r=a,a=Math.floor((n+r)/2);else{if(!(i<0))return a;n=a+1,a=Math.floor((n+r)/2)}}return e[a].createdAt>t.createdAt?a:a+1}return e.length},gl=function(e){function t(t){var n=t.channels,r=t.source,a=t.isWebSocketEventComing,i=void 0!==a&&a,s=t.data,o=void 0===s?null:s,l=e.call(this)||this;return l.channels=n,l.source=r,l.isWebSocketEventComing=i,l.data=o,l}return Object(te.A)(t,e),t}(te.eb),vl=(function(e){function t(t){var n=t.channelUrls,r=t.source,a=t.isWebSocketEventComing,i=void 0!==a&&a,s=e.call(this)||this;return s.channelUrls=n,s.source=r,s.isWebSocketEventComing=i,s}Object(te.A)(t,e)}(te.eb),function(e){function t(t){var n,r,a,i,s,o,l,c,u,d,h=this;return(h=e.call(this)||this).method=te.a.GET,h.path="".concat(Object(te.rb)(t.channelType),"/").concat(t.channelUrl,"/messages_gap"),h.params=Object(te.Vb)({prev_start_ts:t.prevStart,prev_end_ts:t.prevEnd,prev_cache_count:t.prevCount,next_start_ts:t.nextStart,next_end_ts:t.nextEnd,next_cache_count:t.nextCount,huge_gap_threshold:null!==(n=t.threshold)&&void 0!==n?n:null,reverse:!0,custom_types:null!==(r=t.customTypes)&&void 0!==r?r:["*"],message_type:null!==(a=t.messageType)&&void 0!==a?a:null,include_reply_type:null!==(i=t.replyType)&&void 0!==i?i:te.wb.NONE,include_reactions:null===(s=t.includeReactions)||void 0===s||s,include_meta_array:null===(o=t.includeMetaArray)||void 0===o||o,include_thread_info:null===(l=t.includeThreadInfo)||void 0===l||l,include_parent_message_info:null===(c=t.includeParentMessageInfo)||void 0===c||c,with_sorted_meta_array:null===(u=t.includeMetaArray)||void 0===u||u,show_subchannel_messages_only:null!==(d=t.showSubchannelMessagesOnly)&&void 0!==d&&d,include_poll_details:!0,checking_continuous_messages:t.checkingContinuousMessages}),h}return Object(te.A)(t,e),t}(te.Wb)),El=function(e){function t(t,n){var r,a,i,s,o,l,c=this;return(c=e.call(this,t,n)||this).isHugeGap=n.is_huge_gap,c.prevMessages=(null!==(r=n.prev_messages)&&void 0!==r?r:[]).map((function(e){return Ie(t,e)})),c.prevHasMore=null!==(a=n.prev_hasmore)&&void 0!==a&&a,c.isContinuousPrevMessages=null!==(i=n.is_continuous_prev_messages)&&void 0!==i&&i,c.nextMessages=(null!==(s=n.next_messages)&&void 0!==s?s:[]).map((function(e){return Ie(t,e)})),c.nextHasmore=null!==(o=n.next_hasmore)&&void 0!==o&&o,c.isContinuousNextMessages=null!==(l=n.is_continuous_next_messages)&&void 0!==l&&l,c}return Object(te.A)(t,e),t}(te.Yb),yl=function(e){this.source=e},Ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(te.A)(t,e),t}(yl),Cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(te.A)(t,e),t}(yl),Nl=function(e){this.source=e},Tl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(te.A)(t,e),t}(Nl),Sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(te.A)(t,e),t}(Nl),Il={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"}(ol||(ol={}));var Al,wl,Ml,jl=function(){function e(){this._onCacheResult=te.yb,this._onApiResult=te.yb}return e.prototype._invokeResponse=function(e,t,n){var r=this;Object(te.b)((function(){return Object(te.Ib)(r,void 0,void 0,(function(){return Object(te.Tb)(this,(function(r){switch(e){case"local":this._onCacheResult(t,n);break;case"remote":this._onApiResult(t,n)}return[2]}))}))}))},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),Rl=function(e){function t(t,n){return e.call(this,t,Object(te.Xb)(Object(te.Xb)({},n),{channelManager:sl.of(t)}))||this}return Object(te.A)(t,e),t.prototype.setMessageCollectionHandler=function(e){this._setBaseMessageCollectionHandler(e)},t.prototype._activate=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,e.prototype._activate.call(this)];case 1:return n.sent(),[4,this.channel.getMyMutedInfo()];case 2:return(t=n.sent()).isMuted&&-1!==t.remainingDuration&&this._startCheckMyMutedTimer(t.remainingDuration),[2]}}))}))},t}(function(){function e(e,t){var n=t.filter,r=t.startingPoint,a=t.limit,i=t.channel,s=t.channelManager,o=t.disableBackgroundSync,l=void 0!==o&&o,c=this;this._messages=[],this._unsentMessages=[],this._iid=e,this._key="mc-".concat(Object(te.dc)()),this._isDisposed=!1,this.filter=null!=n?n:new ua,this._channel=i,this._syncRange=new ss({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint="number"==typeof r?r:Date.now()+6e5,this._limit=a||100,this._channelManager=s,this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(e,t,n){var r=e.findIndex((function(e){return e.isIdentical(c.channel)}));r>=0&&(c._replaceChannelOfCollection(e[r]),c.channel._runIfHandleableWithGroupChannel((function(e){switch(t){case te.x.EVENT_CHANNEL_UPDATED:var r=!1;for(var a in c._messages)if(c._messages[a].createdAt>=e.messageOffsetTimestamp){r=!0;var i=parseInt(a);if(i>0){var s=c._messages.splice(0,i);c._removeMessagesFromView(s.map((function(e){return e.messageId})),te.x.EVENT_MESSAGE_OFFSET_UPDATED)}break}!r&&c._messages.length>0&&c._removeMessagesFromView(c._messages.map((function(e){return e.messageId})),te.x.EVENT_MESSAGE_OFFSET_UPDATED);break;case te.x.EVENT_CHANNEL_UNMUTED:var o=te.v.of(c._iid).sdkState,l=n;o.userId===l&&c._clearCheckMyMutedTimer();break;case te.x.EVENT_CHANNEL_MUTED:o=te.v.of(c._iid).sdkState;var u=n;o.userId===u&&-1!==e._myMutedRemainingTime&&c._startCheckMyMutedTimer(e._myMutedRemainingTime);break;case te.x.EVENT_CHANNEL_LEFT:e.isPublic&&c._clearCheckMyMutedTimer()}Object(te.b)((function(){return Object(te.Ib)(c,void 0,void 0,(function(){var e,n;return Object(te.Tb)(this,(function(r){return e=this._createChannelEventContext(t),oo(t)&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelUpdated)&&this._handler.onChannelUpdated(e,this.channel),[2]}))}))}))})))},onRemove:function(e,t){e.indexOf(c.channel.url)>=0&&(c._clearCheckMyMutedTimer(),Object(te.b)((function(){return Object(te.Ib)(c,void 0,void 0,(function(){var e,n;return Object(te.Tb)(this,(function(r){return e=this._createChannelEventContext(t),(null===(n=this._handler)||void 0===n?void 0:n.onChannelDeleted)&&this._handler.onChannelDeleted(e,this.channel.url),[2]}))}))})))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(e,t){var n,r,a=[],i=[];try{for(var s=Object(te.ic)(e),o=s.next();!o.done;o=s.next()){var l=o.value;l.channelUrl===c._channel.url&&(c.filter.match(l)?a.push(l):i.push(l.messageId))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}if(Object(te.Ob)(t)){if(a.length>0)switch(t){case te.x.LOCAL_MESSAGE_CANCELED:case te.x.LOCAL_MESSAGE_RESEND_STARTED:case te.x.EVENT_MESSAGE_SENT_FAILED:case te.x.EVENT_MESSAGE_SENT_SUCCESS:case te.x.EVENT_MESSAGE_UPDATED:case te.x.EVENT_MESSAGE_THREADINFO_UPDATED:case te.x.EVENT_MESSAGE_REACTION_UPDATED:case te.x.SYNC_MESSAGE_CHANGELOGS:c._updateMessagesToView(a,t);break;case te.x.EVENT_MESSAGE_SENT_PENDING:c._addMessagesToView(a,t);break;case te.x.EVENT_MESSAGE_RECEIVED:c.hasNext||c._addMessagesToView(a,t);break;case te.x.SYNC_MESSAGE_FILL:c._addMessagesToView(a,t)}i.length>0&&c._removeMessagesFromView(i,t)}},onRemove:function(e,t){c._removeMessagesFromView(e,t)},onRemoveUnsent:function(e,t){c._removeUnsentMessageFromView(e,t)},onPollChangeLogUpdate:function(e,t){c._updatePollsToView(e,t)},onPollUpdate:function(e,t){c._applyPollUpdateEventToView(e,t)},onPollVote:function(e,t){c._applyPollVoteEventToView(e,t)}});var u=te.v.of(this._iid),d=u.cacheContext,h=u.dispatcher;this._channel._updateMessageCollectionLastAccessedAt();var f=this._createChannelUpdateEventCommand(te.x.CHANNEL_LASTACCESSEDAT_UPDATED);f&&h.dispatch(f),!l&&this._shouldStartBackgroundSync()&&(this._backgroundSync=ul.of(this._iid,this._channel),this._backgroundSync.resume(this._startingPoint)),this._changelogSync=hl.of(this._iid,this._channel),this._changelogSync.resume(),this._pollChangelogSync=pl.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new ll(this._key,(function(e){return Object(te.Ib)(c,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return[4,this._getRemoteMessages(e,{prevLimit:this._limit,source:te.x.SYNC_MESSAGE_FILL,checkingContinuousMessages:d.localCacheEnabled})];case 1:return t=l.sent(),n=t.messages,r=t.isContinuousMessages,n.length>0?(a=Math.min.apply(Math,Object(te.fc)([],Object(te.gc)(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(a),r&&(null===(i=this._backgroundSync)||void 0===i||i.range.extends(a)),[2,{hasNext:n.length>=this._limit&&this.viewTop<a,nextToken:this._syncRange.top}]):(p.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(o=null===(s=d.localCacheConfig)||void 0===s?void 0:s.maxSize)&&void 0!==o?o:0,use_local_cache:d.localCacheEnabled}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._nextFill=new ll(this._key,(function(e){return Object(te.Ib)(c,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return[4,this._getRemoteMessages(e,{nextLimit:this._limit,source:te.x.SYNC_MESSAGE_FILL,checkingContinuousMessages:d.localCacheEnabled})];case 1:return t=l.sent(),n=t.messages,r=t.isContinuousMessages,n.length>0?(a=Math.max.apply(Math,Object(te.fc)([],Object(te.gc)(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(a),r&&(null===(i=this._backgroundSync)||void 0===i||i.range.extends(a)),[2,{hasNext:!(n.length>=this._limit&&this._hasNext)||this.viewBottom>a,nextToken:this._syncRange.bottom}]):(p.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(o=null===(s=d.localCacheConfig)||void 0===s?void 0:s.maxSize)&&void 0!==o?o:0,use_local_cache:d.localCacheEnabled}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._connectionEventContext=h.on((function(e){if(e instanceof te.pc)switch(e.stateType){case te.qc.CONNECTED:Object(te.o)((function(){return Object(te.Ib)(c,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._activate(),[2]}))}))}));break;case te.qc.LOGOUT:c.dispose();break;default:c._clearCheckMyMutedTimer(),c._prevFill.stop(),c._nextFill.stop()}}));var p=te.v.of(this._iid).statLogCollector;p.put(new te.fb({type:te.gb.FEATURE_LOCALCACHE,data:{use_local_cache:d.localCacheEnabled,collection_interface:{message:!0}}}))}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return Object(te.fc)([],Object(te.gc)(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===te.lb.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===te.lb.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,Object(te.fc)(Object(te.fc)([],Object(te.gc)(this._messages.map((function(e){return e.createdAt}))),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,Object(te.fc)(Object(te.fc)([],Object(te.gc)(this._messages.map((function(e){return e.createdAt}))),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return te.v.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(te.x.SYNC_CHANNEL_CHANGELOGS)];case 1:return e.sent(),[2]}}))}))},e.prototype._replaceChannelOfCollection=function(e){this._channel.isGroupChannel()?this._channel=e:this._channel.isFeedChannel()&&(this._channel._groupChannel=e._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var e=te.v.of(this._iid).cacheContext;return this.channel.isGroupChannel()?e.localCacheEnabled&&!this.channel.isSuper:e.localCacheEnabled},e.prototype._createChannelEventContext=function(e){switch(!0){case this.channel.isGroupChannel():return new Ol(e);case this.channel.isFeedChannel():return new Cl(e);default:throw new te.hc({code:te.tb.WRONG_CHANNEL_TYPE,message:"Wrong channel type"})}},e.prototype._createMessageEventContext=function(e){switch(!0){case this.channel.isGroupChannel():return new Tl(e);case this.channel.isFeedChannel():return new Sl(e);default:throw new te.hc({code:te.tb.WRONG_CHANNEL_TYPE,message:"Wrong channel type"})}},e.prototype._createChannelUpdateEventCommand=function(e){switch(!0){case this.channel.isGroupChannel():return new lo({channels:[this._channel],source:e});case this.channel.isFeedChannel():return new gl({channels:[this._channel],source:e});default:return null}},e.prototype._setBaseMessageCollectionHandler=function(e){this._handler=e},e.prototype._filterUnderOffsetMessage=function(e){return e},e.prototype._addMessagesToView=function(e,t){var n,r,a=this,i=this._filterUnderOffsetMessage(e),s=[],o=[];try{for(var l=Object(te.ic)(i),c=l.next();!c.done;c=l.next()){var u=c.value;if(t===te.x.SYNC_MESSAGE_FILL)if(u.messageId>0){if((p=ml(this._messages,u))<0){ml(this._unsentMessages,u)<0&&s.push(u);var d=_l(this._messages,u);this._messages.splice(d,0,u)}}else u instanceof _e&&(p=ml(this._unsentMessages,u))<0&&ml(this._messages,u)<0&&(this._unsentMessages.push(u),s.push(u));else if(u.messageId>0){if((p=ml(this._messages,u))<0){var h=ml(this._unsentMessages,u);h<0?s.push(u):(this._unsentMessages.splice(h,1),o.push(u)),d=_l(this._messages,u),this._messages.splice(d,0,u)}else o.push(u),this._messages[p]=u;if(u.updatedAt>0){var f=this._updateChildMessagesInView(u);o.push.apply(o,Object(te.fc)([],Object(te.gc)(f),!1))}}else if(u instanceof _e){var p;(p=ml(this._unsentMessages,u))<0?ml(this._messages,u)<0&&(this._unsentMessages.push(u),s.push(u)):(o.push(u),this._unsentMessages[p]=u)}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}Object(te.Ob)(t)&&Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,n,r,a,i;return Object(te.Tb)(this,(function(l){return e=this._createMessageEventContext(t),s.length>0&&(null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesAdded)||void 0===r||r.call(n,e,this.channel,s)),o.length>0&&(null===(i=null===(a=this._handler)||void 0===a?void 0:a.onMessagesUpdated)||void 0===i||i.call(a,e,this.channel,o)),[2]}))}))}))},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach((function(n){n.parentMessageId===e.messageId&&n.applyParentMessage(e)&&t.push(n)})),t},e.prototype._updatePollsToView=function(e,t){var n,r,a=this,i=[];try{for(var s=Object(te.ic)(e),o=s.next();!o.done;o=s.next()){var l=o.value,c=bl(this._messages,l.messageId);if(c>=0){var u=this._messages[c];u&&u.applyPoll(l),i.push(u)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i.length>0&&Object(te.Ob)(t)&&Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,n,r;return Object(te.Tb)(this,(function(a){return e=this._createMessageEventContext(t),i.length>0&&(null===(r=(n=this._handler).onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,i)),[2]}))}))})),i},e.prototype._applyPollUpdateEventToView=function(e,t){var n=this,r=bl(this._messages,e.messageId);if(r>=0){var a=this._messages[r];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollUpdateEvent(e)&&Object(te.Ob)(t)&&Object(te.b)((function(){return Object(te.Ib)(n,void 0,void 0,(function(){var e,n,r;return Object(te.Tb)(this,(function(i){return e=this._createMessageEventContext(t),null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,[a]),[2]}))}))}))}},e.prototype._applyPollVoteEventToView=function(e,t){var n=this,r=bl(this._messages,e.messageId);if(r>=0){var a=this._messages[r];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollVoteEvent(e)&&Object(te.Ob)(t)&&Object(te.b)((function(){return Object(te.Ib)(n,void 0,void 0,(function(){var e,n,r;return Object(te.Tb)(this,(function(i){return e=this._createMessageEventContext(t),null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,[a]),[2]}))}))}))}},e.prototype._updateMessagesToView=function(e,t){var n,r,a=this,i=[],s=[],o=[];try{for(var l=Object(te.ic)(e),c=l.next();!c.done;c=l.next()){var u,d=c.value;if(d.messageId>0)if((u=ml(this._messages,d))>=0)s.push(d),this._messages[u]=d;else{var h=ml(this._unsentMessages,d);if(h>=0){var f=this._unsentMessages.splice(h,1);if(this.hasNext&&f.length>0)o.push(f[0]);else{s.push(d);var p=_l(this._messages,d);this._messages.splice(p,0,d)}}else{var m=this._messages.map((function(e){return e.createdAt}));(d.createdAt<Math.min.apply(Math,Object(te.fc)([],Object(te.gc)(m),!1))&&!this._hasPrevious||d.createdAt>Math.max.apply(Math,Object(te.fc)([],Object(te.gc)(m),!1))&&!this._hasNext)&&i.push(d)}}else d instanceof _e&&(u=ml(this._unsentMessages,d))>=0&&(s.push(d),this._unsentMessages[u]=d)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Object(te.Ob)(t)&&Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,n,r,a,l;return Object(te.Tb)(this,(function(c){return e=this._createMessageEventContext(t),s.length>0?null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===r||r.call(n,e,this.channel,s):o.length>0?null===(l=null===(a=this._handler)||void 0===a?void 0:a.onMessagesDeleted)||void 0===l||l.call(a,e,this.channel,[],o):i.length>0&&this._addMessagesToView(i,t),[2]}))}))})),s},e.prototype._removeMessagesFromView=function(e,t){var n,r,a=this,i=[],s=[],o=function(e){var t=l._messages.findIndex((function(t){return t.messageId===e}));if(t>=0){var n=l._messages[t];i.push(n.messageId),s.push(n),l._messages.splice(t,1)}},l=this;try{for(var c=Object(te.ic)(e),u=c.next();!u.done;u=c.next())o(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Object(te.Ob)(t)&&s.length>0&&Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,n,r;return Object(te.Tb)(this,(function(a){return e=this._createMessageEventContext(t),null===(r=null===(n=this._handler)||void 0===n?void 0:n.onMessagesDeleted)||void 0===r||r.call(n,e,this.channel,i,s),[2]}))}))})),i},e.prototype._removeUnsentMessageFromView=function(e,t){var n=this._unsentMessages.findIndex((function(t){return t.reqId===e}));n>=0&&this._unsentMessages.splice(n,1)},e.prototype._getLocalMessages=function(e,t){var n=t.prevLimit,r=void 0===n?0:n,a=t.nextLimit,i=void 0===a?0:a,s=t.inclusive,o=void 0===s||s;return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,a,s,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return t=[],o?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,e,this.filter)]:[3,2];case 1:t=c.sent(),c.label=2;case 2:return r>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"prev",this.filter,r,!1)]:[3,4];case 3:return a=c.sent(),[3,5];case 4:a=[],c.label=5;case 5:return n=a,i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"next",this.filter,i,!1)]:[3,7];case 6:return l=c.sent(),[3,8];case 7:l=[],c.label=8;case 8:return s=l,[2,Object(te.fc)(Object(te.fc)(Object(te.fc)([],Object(te.gc)(t),!1),Object(te.gc)(n),!1),Object(te.gc)(s),!1).sort((function(e,t){return t.createdAt-e.createdAt}))]}}))}))},e.prototype._getRemoteMessages=function(e,t){var n=t.prevLimit,r=void 0===n?0:n,a=t.nextLimit,i=void 0===a?0:a,s=t.source,o=void 0===s?te.x.REQUEST_MESSAGE:s,l=t.reverse,c=void 0!==l&&l,u=t.checkingHasNext,d=void 0!==u&&u,h=t.checkingContinuousMessages,f=void 0!==h&&h;return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return t=Ca.of(this._iid),r>0||i>0?[4,t._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,e,Object(te.lc)(Object(te.Xb)(Object(te.Xb)(Object(te.Xb)({},this.filter),Il),{isInclusive:!0,reverse:c,prevResultSize:r,nextResultSize:i})),o,d,f)]:[3,2];case 1:return n=a.sent(),[3,3];case 2:n={messages:[],isContinuousMessages:!1},a.label=3;case 3:return[2,n]}}))}))},e.prototype._checkHugeGap=function(){var e,t,n,r,a;return Object(te.Ib)(this,void 0,void 0,(function(){var i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N,T,S,I,A,w=this;return Object(te.Tb)(this,(function(M){switch(M.label){case 0:return i=te.v.of(this._iid),s=i.dispatcher,o=i.requestQueue,l=i.cacheContext,c=i.statLogCollector,this._messages.length>0?(u=this._syncRange.top,d=this.viewTop,h=this._syncRange.bottom,f=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,d,u)]):[3,7];case 1:return p=M.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,h,f)];case 2:m=M.sent(),M.label=3;case 3:return M.trys.push([3,,5,6]),[4,Object(te.Pb)((function(){return Object(te.Ib)(w,void 0,void 0,(function(){var e,t,n,r,a,i,c,b,_,g,v,E,y,O,C,N,T,S=this;return Object(te.Tb)(this,(function(I){switch(I.label){case 0:return e=new vl(Object(te.Xb)(Object(te.Xb)({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:d,prevEnd:u,prevCount:p,nextStart:h,nextEnd:f,nextCount:m,checkingContinuousMessages:l.localCacheEnabled},this.filter),Il)),[4,o.send(e)];case 1:return t=I.sent(),n=t.as(El),r=n.isHugeGap,a=n.prevMessages,i=void 0===a?[]:a,c=n.prevHasMore,b=n.isContinuousPrevMessages,_=n.nextMessages,g=void 0===_?[]:_,v=n.nextHasmore,E=n.isContinuousNextMessages,r?Object(te.b)((function(){return Object(te.Ib)(S,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){return(null===(e=this._handler)||void 0===e?void 0:e.onHugeGapDetected)&&this._handler.onHugeGapDetected(),[2]}))}))})):(y=this.viewTop,O=this.viewBottom,C=Math.min.apply(Math,Object(te.fc)([Number.MAX_SAFE_INTEGER,y],Object(te.gc)(i.map((function(e){return e.createdAt}))),!1)),N=Math.max.apply(Math,Object(te.fc)([0,O],Object(te.gc)(g.map((function(e){return e.createdAt}))),!1)),s.dispatch(new te.K({messages:i,source:te.x.SYNC_MESSAGE_FILL})),s.dispatch(new te.K({messages:g,source:te.x.SYNC_MESSAGE_FILL})),this._syncRange.extends(C,N),(b||E)&&(null===(T=this._backgroundSync)||void 0===T||T.range.extends(C,N)),c&&this._prevFill.start(C),v&&this._nextFill.start(N)),[2]}}))}))}),1)];case 4:return M.sent(),[3,6];case 5:return c.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(t=null===(e=l.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:l.localCacheEnabled}})),[7];case 6:return[3,12];case 7:b=Math.floor(this._limit/2),_=Date.now(),M.label=8;case 8:return M.trys.push([8,10,11,12]),[4,this._getRemoteMessages(_,{prevLimit:b,nextLimit:b,source:te.x.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:l.localCacheEnabled})];case 9:if(g=M.sent(),v=g.messages,E=g.isContinuousMessages,y=g.hasNext,v.length>0){for(O=v.map((function(e){return e.createdAt})),C=0,N=0,T=0;T<O.length;T++)(S=O[T])<=_?C++:S>=_&&N++;this._hasPrevious=C>=b,this._hasNext=null!=y?y:N>=b,(A=this._syncRange).extends.apply(A,Object(te.fc)([],Object(te.gc)(O),!1)),E&&(null===(n=this._backgroundSync)||void 0===n||n.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(v,te.x.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,12];case 10:return(I=M.sent())instanceof te.hc&&I.code===te.tb.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,12];case 11:return c.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(a=null===(r=l.localCacheConfig)||void 0===r?void 0:r.maxSize)&&void 0!==a?a:0,use_local_cache:l.localCacheEnabled}})),[7];case 12:return[2]}}))}))},e.prototype._loadUnsentMessages=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return e=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return e._unsentMessages=t.sent(),[2]}}))}))},e.prototype._hasPollMessage=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return e.sent().length>0?[2,!0]:[2,!1]}}))}))},e.prototype._refreshChannel=function(e){this._channelManager.refreshChannel(this.channel.url,!0,e)},e.prototype._startCheckMyMutedTimer=function(e){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout((function(){return Object(te.Ib)(t,void 0,void 0,(function(){var e,t,n=this;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:this._checkMyMutedStateTimer=void 0,e=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return t=r.sent(),e=!t.isMuted,[3,5];case 3:return r.sent(),e=!0,[3,5];case 4:return e&&this.channel._runIfHandleableWithGroupChannel((function(e){var t,r;e.myMutedState=te.C.UNMUTED;var a=n._createChannelEventContext(te.x.EVENT_CHANNEL_UNMUTED);null===(r=null===(t=n._handler)||void 0===t?void 0:t.onChannelUpdated)||void 0===r||r.call(t,a,n.channel)})),[7];case 5:return[2]}}))}))}),e+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype.initialize=function(e){var t=this,n=new jl;this._messages=[],this._unsentMessages=[],this._syncRange=new ss({}),this._hasNext=!0,this._hasPrevious=!0,this._refreshChannel(te.x.REFRESH_CHANNEL),Object(te.o)((function(){return Object(te.Ib)(t,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(e=t.sent()).isMuted&&-1!==e.remainingDuration&&this._startCheckMyMutedTimer(e.remainingDuration),[2]}}))}))}));var r=te.v.of(this._iid),a=r.cacheContext,i=r.statLogCollector,s=Math.floor(this._limit/2);return e===ol.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:s,nextLimit:s}).then((function(e){return Object(te.Ib)(t,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return t=this._filterUnderOffsetMessage(e),this._addMessagesToView(t,te.x.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return r.sent(),n._invokeResponse("local",null,t),[2]}}))}))})).catch((function(e){if(Object(te.L)(e))throw e;n._invokeResponse("local",e,null)})).finally((function(){var r=te.v.of(t._iid).cacheContext;t._getRemoteMessages(t._startingPoint,{prevLimit:s,nextLimit:s,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:r.localCacheEnabled}).then((function(a){var o,l,c,u,d,h,f=a.messages,p=a.isContinuousMessages,m=a.hasNext,b=t._filterUnderOffsetMessage(f),_=!0;if(t._messages.length===b.length){var g=t._messages.map((function(e){return e.messageId}));for(var v in b)if(!g.includes(b[v].messageId)){_=!1;break}}else _=!1;if(t._messages=[],b.length>0){var E=b.map((function(e){return e.createdAt})),y=0,O=0;for(v=0;v<E.length;v++){var C=E[v];C<t._startingPoint?y++:C>t._startingPoint&&O++}t._hasPrevious=y>=s,t._hasNext=null!=m?m:O>=s,(o=t._syncRange).extends.apply(o,Object(te.fc)([],Object(te.gc)(b.map((function(e){return e.createdAt}))),!1)),p&&(null===(l=t._backgroundSync)||void 0===l||l.range.extends(t._syncRange.top,t._syncRange.bottom)),t._addMessagesToView(b,te.x.REQUEST_MESSAGE)}else t._hasPrevious=!1,t._hasNext=!1;i.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:_?"cache_hit":"cache_miss",max_db_size:null!==(u=null===(c=r.localCacheConfig)||void 0===c?void 0:c.maxSize)&&void 0!==u?u:0,message_init_policy:e,use_local_cache:r.localCacheEnabled,collection_id:t._key}})),i.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:"cache_fetch",max_db_size:null!==(h=null===(d=r.localCacheConfig)||void 0===d?void 0:d.maxSize)&&void 0!==h?h:0,message_init_policy:e,use_local_cache:r.localCacheEnabled,collection_id:t._key}})),n._invokeResponse("remote",null,b)})).catch((function(e){if(Object(te.L)(e))throw e;n._invokeResponse("remote",e,null)}))})),i.put(new te.fb({type:te.gb.FEATURE_LOCALCACHE,data:{use_local_cache:a.localCacheEnabled,collection_interface:{message_init_policy:e}}})),n},e.prototype.loadPrevious=function(){var e,t,n;return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o,l,c,u=this;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:if(this._isDisposed)throw new te.hc({code:te.tb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasPrevious?(r=Math.floor(this._limit/2),a=this.viewTop,i=[],[4,Object(te.o)((function(){return Object(te.Ib)(u,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(a,{prevLimit:r,inclusive:!1})];case 1:return i=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return d.sent(),s=i.length>=r,o=te.v.of(this._iid),l=o.cacheContext,(c=o.statLogCollector).put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:s?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=l.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:l.localCacheEnabled,collection_id:this._key}})),s&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(i))?[3,3]:[4,Object(te.o)((function(){return Object(te.Ib)(u,void 0,void 0,(function(){var e,t,n,s,o,l,u,d=this;return Object(te.Tb)(this,(function(h){switch(h.label){case 0:return e=te.v.of(this._iid).cacheContext,[4,this._getRemoteMessages(a,{prevLimit:r,reverse:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=h.sent(),i=(i=this._filterUnderOffsetMessage(t.messages)).filter((function(e){return ml(d._messages,e)<0})),this._hasPrevious=i.length>=r,i.length>0&&((n=this._syncRange).extends.apply(n,Object(te.fc)([],Object(te.gc)(i.map((function(e){return e.createdAt}))),!1)),(null===(s=this._backgroundSync)||void 0===s?void 0:s.range.overlap(this._syncRange))&&t.isContinuousMessages&&(null===(o=this._backgroundSync)||void 0===o||o.range.extends(this._syncRange.top))),c.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:null!==(u=null===(l=e.localCacheConfig)||void 0===l?void 0:l.maxSize)&&void 0!==u?u:0,use_local_cache:e.localCacheEnabled,collection_id:this._key}})),[2]}}))}))}))];case 2:return d.sent(),this._addMessagesToView(i,te.x.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=i.length>=r,i.length>0&&this._addMessagesToView(i,te.x.REQUEST_MESSAGE),d.label=4;case 4:return[2,i]}}))}))},e.prototype.loadNext=function(){var e,t,n;return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o,l,c,u=this;return Object(te.Tb)(this,(function(d){switch(d.label){case 0:if(this._isDisposed)throw new te.hc({code:te.tb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasNext?(r=Math.floor(this._limit/2),a=this.viewBottom,i=[],[4,Object(te.o)((function(){return Object(te.Ib)(u,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(a,{nextLimit:r,inclusive:!1})];case 1:return i=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return d.sent(),s=i.length>=r,o=te.v.of(this._iid),l=o.cacheContext,(c=o.statLogCollector).put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:s?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=l.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:l.localCacheEnabled,collection_id:this._key}})),s&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(i))?[3,3]:[4,Object(te.o)((function(){return Object(te.Ib)(u,void 0,void 0,(function(){var e,t,n,s,o,l,u,d,h=this;return Object(te.Tb)(this,(function(f){switch(f.label){case 0:return e=te.v.of(this._iid).cacheContext,[4,this._getRemoteMessages(a,{nextLimit:r,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=f.sent(),i=(i=this._filterUnderOffsetMessage(t.messages)).filter((function(e){return ml(h._messages,e)<0})),this._hasNext=null!==(s=t.hasNext)&&void 0!==s?s:i.length>=r,i.length>0&&((n=this._syncRange).extends.apply(n,Object(te.fc)([],Object(te.gc)(i.map((function(e){return e.createdAt}))),!1)),(null===(o=this._backgroundSync)||void 0===o?void 0:o.range.overlap(this._syncRange))&&t.isContinuousMessages&&(null===(l=this._backgroundSync)||void 0===l||l.range.extends(this._syncRange.bottom))),c.put(new te.Nb({type:te.gb.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:null!==(d=null===(u=e.localCacheConfig)||void 0===u?void 0:u.maxSize)&&void 0!==d?d:0,use_local_cache:e.localCacheEnabled,collection_id:this._key}})),[2]}}))}))}))];case 2:return d.sent(),this._addMessagesToView(i,te.x.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=i.length>=r,i.length>0&&this._addMessagesToView(i,te.x.REQUEST_MESSAGE),d.label=4;case 4:return[2,i]}}))}))},e.prototype.removeFailedMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:if(this._isDisposed)throw new te.hc({code:te.tb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(e)];case 1:return n.sent(),(t=this._unsentMessages.findIndex((function(t){return t.reqId===e})))>-1&&this._unsentMessages.splice(t,1),[2]}}))}))},e.prototype.dispose=function(){var e,t,n,r=this;if(!this._isDisposed){this._isDisposed=!0;var a=te.v.of(this._iid),i=a.cacheContext,s=a.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel((function(e){if(e.myMemberState!==Us.NONE){r._channel._updateMessageCollectionLastAccessedAt();var t=r._createChannelUpdateEventCommand(te.x.CHANNEL_LASTACCESSEDAT_UPDATED);t&&s.dispatch(t)}})),i.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._pollChangelogSync)||void 0===n||n.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}()),Ul={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},Ll=function(e){function t(t){var n=this,r=t.channelUrl,a=t.token,i=t.limit,s=t.order,o=t.mutedMemberFilter,l=t.memberStateFilter,c=t.nicknameStartsWithFilter,u=t.operatorFilter;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/members"),n.params={token:a,limit:i,order:s,muted_member_filter:o,member_state_filter:l,nickname_startswith:c,operator_filter:u,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},n}return Object(te.A)(t,e),t}(te.Wb),kl=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.members=[];var a=n.next,i=n.members;return r.token=a,i&&i.length>0&&(r.members=i.map((function(e){return new Ws(t,e)}))),r}return Object(te.A)(t,e),t}(te.Yb);!function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"}(Al||(Al={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(wl||(wl={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Ml||(Ml={}));var Dl=function(e){function t(t,n,r){var a,i,s,o,l=this;return(l=e.call(this,t,n,te.y.GROUP,r)||this).mutedMemberFilter=Al.ALL,l.memberStateFilter=Ml.ALL,l.nicknameStartsWithFilter=null,l.operatorFilter=Vs.ALL,l.order=wl.MEMBER_NICKNAME_ALPHABETICAL,l.mutedMemberFilter=null!==(a=r.mutedMemberFilter)&&void 0!==a?a:Al.ALL,l.memberStateFilter=null!==(i=r.memberStateFilter)&&void 0!==i?i:Ml.ALL,l.nicknameStartsWithFilter=null!==(s=r.nicknameStartsWithFilter)&&void 0!==s?s:null,l.order=null!==(o=r.order)&&void 0!==o?o:wl.MEMBER_NICKNAME_ALPHABETICAL,l}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.q)(Al,this.mutedMemberFilter)&&Object(te.q)(Ml,this.memberStateFilter)&&(Object(te.B)("string",this.nicknameStartsWithFilter)||null===this.nicknameStartsWithFilter)&&Object(te.q)(Vs,this.operatorFilter)&&Object(te.q)(wl,this.order)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new Ll(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(kl),a=r.members,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb),xl=function(e){function t(t){var n=this,r=t.channelUrl,a=t.userId,i=t.accessCode;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/accept"),n.params={user_id:a,access_code:i},n}return Object(te.A)(t,e),t}(te.Wb),Pl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new fc(t,n),r.channel.myMemberState=Us.JOINED,r}return Object(te.A)(t,e),t}(te.Yb),Fl=function(e){function t(t){var n=this,r=t.channelUrl,a=t.isDistinct,i=t.isPublic,s=t.isDiscoverable,o=t.coverUrl,l=t.coverImage,c=t.accessCode,u=t.name,d=t.data,h=t.customType,f=t.operatorUserIds,p=t.messageSurvivalSeconds;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r)),n.params=Object(te.Vb)({is_distinct:a,is_public:i,is_discoverable:s,name:u,data:d,custom_type:h,cover_url:o,cover_file:l,access_code:c,operator_ids:f,message_survival_seconds:p}),n}return Object(te.A)(t,e),t}(te.Wb),Hl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new fc(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Gl=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r)),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var Bl=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=te.a.DELETE,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/hide"),n}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(te.Yb);var zl=function(e){function t(t){var n=t.userId,r=t.channelUrl,a=t.countPreference,i=e.call(this)||this;return i.method=te.a.PUT,i.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/count_preference/").concat(encodeURIComponent(r)),i.params={count_preference:a},i}return Object(te.A)(t,e),t}(te.Wb),Vl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.countPreference=n.count_preference,r}return Object(te.A)(t,e),t}(te.Yb),ql=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=te.a.PUT,n.path="".concat(te.xb,"/").concat(encodeURIComponent(r),"/reset_user_history"),n}return Object(te.A)(t,e),t}(te.Wb),Kl=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.ts_message_offset;return r.messageOffsetTimestamp=a,r}return Object(te.A)(t,e),t}(te.Yb),Wl=Object(te.Xb)(Object(te.Xb)({},pt),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),Yl=Object(te.Xb)(Object(te.Xb)({},bt),{scheduledAt:void 0}),Ql=function(e){function t(t){var n,r=this;r=e.call(this)||this;var a=[];t.mentionType===te.kb.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map((function(e){return e.userId}))));var i=t.channelType,s=t.channelUrl,o=t.scheduledMessageId;return r.method=te.a.PUT,r.path="".concat(Object(te.rb)(i),"/").concat(encodeURIComponent(s),"/scheduled_messages/").concat(encodeURIComponent(o)),r.params=Object(te.Vb)(Object(te.lc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:te.Db.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:t.thumbnailSizes?t.thumbnailSizes.map((function(e){return ge.payloadify(e)})):[],custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return ce.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption})),r}return Object(te.A)(t,e),t}(te.Wb),Xl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Ae(t,n),r}return Object(te.A)(t,e),t}(te.Yb),Zl=function(e){function t(t){var n,r=this;r=e.call(this)||this;var a=[];t.mentionType===te.kb.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map((function(e){return e.userId}))));var i=t.channelType,s=t.channelUrl,o=t.scheduledMessageId;return r.method=te.a.PUT,r.path="".concat(Object(te.rb)(i),"/").concat(encodeURIComponent(s),"/scheduled_messages/").concat(encodeURIComponent(o)),r.params=Object(te.Vb)(Object(te.lc)({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:te.Db.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(n=t.metaArrays)||void 0===n?void 0:n.map((function(e){return ce.payloadify(e)})),apple_critical_alert_options:t.appleCriticalAlertOptions?he.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),r}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){var r=e.call(this,t,n)||this;return r.message=new Ce(t,n),r}),e)}(te.Yb);var $l=function(e){function t(t){var n=e.call(this)||this,r=t.channelType,a=t.channelUrl,i=t.scheduledMessageId;return n.method=te.a.DELETE,n.path="".concat(Object(te.rb)(r),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(i)),n}return Object(te.A)(t,e),t}(te.Wb),Jl=function(e){function t(t){var n=e.call(this)||this,r=t.channelType,a=t.channelUrl,i=t.scheduledMessageId;return n.method=te.a.POST,n.path="".concat(Object(te.rb)(r),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(i),"/send_now"),n}return Object(te.A)(t,e),t}(te.Wb),ec=function(e){function t(t){var n=t.userId,r=t.channelUrl,a=t.pushTriggerOption,i=e.call(this)||this;return i.method=te.a.PUT,i.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(r)),i.params={push_trigger_option:a},i}return Object(te.A)(t,e),t}(te.Wb),tc=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r.enabled=n.enable,r}return Object(te.A)(t,e),t}(te.Yb),nc=function(e){function t(t){var n=t.userId,r=t.channelUrl,a=e.call(this)||this;return a.method=te.a.GET,a.path="".concat(te.Ub,"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(r)),a}return Object(te.A)(t,e),t}(te.Wb),rc=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r.enabled=n.enable,r}return Object(te.A)(t,e),t}(te.Yb),ac=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=e.call(this)||this;return i.method=te.a.POST,i.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/pin"),i}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var ic=function(e){function t(t){var n=t.channelType,r=t.channelUrl,a=t.messageId,i=e.call(this)||this;return i.method=te.a.DELETE,i.path="".concat(Object(te.rb)(n),"/").concat(encodeURIComponent(r),"/messages/").concat(a,"/pin"),i}return Object(te.A)(t,e),t}(te.Wb);!function(e){Object(te.A)((function(t,n){return e.call(this,t,n)||this}),e)}(te.Yb);var sc,oc,lc=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=null,r.message=Ie(t,n.message),r}return Object(te.A)(t,e),t}(te.I),cc=function(e){function t(t){var n=this,r=t.channelType,a=t.channelUrl,i=t.limit,s=t.token,o=t.includeReactions,l=t.includeMetaArray,c=t.includeParentMessageInfo,u=t.includeThreadInfo,d=t.includePollDetails;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(Object(te.rb)(r),"/").concat(encodeURIComponent(a),"/pinned_messages"),n.params=Object(te.Vb)({limit:i,token:s,include_reactions:o,with_sorted_meta_array:l,include_thread_info:u,include_parent_message_info:c,include_poll_details:d}),n}return Object(te.A)(t,e),t}(te.Wb),uc=function(e){function t(t,n){var r=e.call(this,t,n)||this,a=n.pinned_messages,i=n.has_more,s=n.next;return r.pinnedMessages=a.map((function(e){return new lc(t,e)})),r.hasMore=i,r.token=s,r}return Object(te.A)(t,e),t}(te.Yb),dc=function(e){function t(t,n,r,a){var i=e.call(this,t,n,r,a)||this;return i.includeMetaArray=a.includeMetaArray,i.includeReactions=a.includeReactions,i.includeParentMessageInfo=a.includeParentMessageInfo,i.includeThreadInfo=a.includeThreadInfo,i.includePollDetails=a.includePollDetails,i}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("boolean",this.includeMetaArray,!0)&&Object(te.B)("boolean",this.includeReactions,!0)&&Object(te.B)("boolean",this.includeParentMessageInfo,!0)&&Object(te.B)("boolean",this.includeThreadInfo,!0)&&Object(te.B)("boolean",this.includePollDetails,!0)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new cc(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(uc),a=r.pinnedMessages,i=r.hasMore,s=r.token,this._token=s,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.zb);!function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"}(sc||(sc={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(oc||(oc={}));var hc,fc=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C=this;return(C=e.call(this,t,n)||this)._unreadMemberStateMap=new Map,C._undeliveredMemberStateMap=new Map,C._typingStatus=new Map,C._lastMemberCountUpdated=0,C._typingStarted=0,C._typingEnded=0,C.isDistinct=!1,C.isSuper=!1,C.isBroadcast=!1,C.isExclusive=!1,C.isPublic=!1,C.isDiscoverable=!0,C.isChatNotification=!1,C.isAccessCodeRequired=!1,C.isPushEnabled=!1,C.unreadMessageCount=0,C.unreadMentionCount=0,C.members=[],C.memberCount=0,C.joinedMemberCount=0,C.hiddenState=oc.UNHIDDEN,C.lastMessage=null,C.messageOffsetTimestamp=0,C.messageSurvivalSeconds=-1,C.myMemberState=Us.NONE,C.myRole=te.D.NONE,C.myMutedState=te.C.UNMUTED,C.myLastRead=0,C.myCountPreference=sc.ALL,C.myPushTriggerOption=te.r.DEFAULT,C.inviter=null,C.invitedAt=0,C.joinedAt=0,C.pinnedMessageIds=[],C.lastPinnedMessage=null,C._pinnedMessagesUpdatedAt=0,C._myMutedRemainingTime=-1,C.channelType=te.y.GROUP,C.isDistinct=null!==(a=n.is_distinct)&&void 0!==a&&a,C.isSuper=null!==(i=n.is_super)&&void 0!==i&&i,C.isBroadcast=null!==(s=n.is_broadcast)&&void 0!==s&&s,C.isExclusive=null!==(o=n.is_exclusive)&&void 0!==o&&o,C.isPublic=null!==(l=n.is_public)&&void 0!==l&&l,C.isDiscoverable=null!==(c=n.is_discoverable)&&void 0!==c?c:C.isPublic,C.isChatNotification=null!==(u=n.is_chat_notification)&&void 0!==u&&u,C.isAccessCodeRequired=null!==(d=n.is_access_code_required)&&void 0!==d&&d,C.isPushEnabled=null!==(h=n.is_push_enabled)&&void 0!==h&&h,Array.isArray(n.members)&&(r=C.members).push.apply(r,Object(te.fc)([],Object(te.gc)(n.members.map((function(e){return new Ws(C._iid,e)}))),!1)),C.memberCount=null!==(f=n.member_count)&&void 0!==f?f:0,C.joinedMemberCount=null!==(p=n.joined_member_count)&&void 0!==p?p:0,C.hiddenState=Object(te.q)(oc,n.hidden_state)?n.hidden_state:oc.UNHIDDEN,C.messageOffsetTimestamp=null!==(m=n.ts_message_offset)&&void 0!==m?m:0,C.messageSurvivalSeconds=null!==(b=n.message_survival_seconds)&&void 0!==b?b:-1,C.lastMessage=n.last_message?Ie(C._iid,Object(te.Xb)({channel_type:C.channelType},n.last_message)):null,n.read_receipt&&Object.keys(n.read_receipt).forEach((function(e){Object(te.B)("number",n.read_receipt[e])&&C._updateUnreadMemberState(e,n.read_receipt[e])})),n.delivery_receipt&&Object.keys(n.delivery_receipt).forEach((function(e){Object(te.B)("number",n.delivery_receipt[e])&&C._updateUndeliveredMemberState(e,n.delivery_receipt[e])})),C.myMemberState=Object(te.q)(Us,n.member_state)?n.member_state:Us.NONE,C.myRole=Object(te.q)(te.D,n.my_role)?n.my_role:te.D.NONE,Object(te.q)(te.C,n.is_muted)?C.myMutedState=n.is_muted:Object(te.B)("boolean",n.is_muted)?C.myMutedState=n.is_muted?te.C.MUTED:te.C.UNMUTED:C.myMutedState=te.C.UNMUTED,C.myCountPreference=Object(te.q)(sc,n.count_preference)?n.count_preference:sc.ALL,C.myPushTriggerOption=Object(te.q)(te.r,n.push_trigger_option)?n.push_trigger_option:te.r.ALL,C.myLastRead=null!==(_=n.user_last_read)&&void 0!==_?_:0,C.inviter=n.inviter?new te.u(C._iid,n.inviter):null,C.invitedAt=null!==(g=n.invited_at)&&void 0!==g?g:0,C.joinedAt=null!==(v=n.joined_ts)&&void 0!==v?v:0,C._updateUnreadCount(null!==(E=n.unread_message_count)&&void 0!==E?E:0,null!==(y=n.unread_mention_count)&&void 0!==y?y:0),C.pinnedMessageIds=null!==(O=n.pinned_message_ids)&&void 0!==O?O:[],C.lastPinnedMessage=n.latest_pinned_message?Ie(C._iid,Object(te.Xb)({channel_type:C.channelType},n.latest_pinned_message)):null,C}return Object(te.A)(t,e),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.hiddenState!==oc.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedUnreadMemberState",{get:function(){var e,t,n={};try{for(var r=Object(te.ic)(this._unreadMemberStateMap),a=r.next();!a.done;a=r.next()){var i=Object(te.gc)(a.value,2),s=i[0],o=i[1];n[s]=o}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedUndeliveredMemberState",{get:function(){var e,t,n={};try{for(var r=Object(te.ic)(this._undeliveredMemberStateMap),a=r.next();!a.done;a=r.next()){var i=Object(te.gc)(a.value,2),s=i[0],o=i[1];n[s]=o}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.payloadify=function(t){return Object(te.Vb)(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e.payloadify.call(this,t)),{is_access_code_required:t.isAccessCodeRequired,is_distinct:t.isDistinct,is_super:t.isSuper,is_broadcast:t.isBroadcast,is_exclusive:t.isExclusive,is_public:t.isPublic,is_discoverable:t.isDiscoverable,is_muted:t.myMutedState,is_push_enabled:t.isPushEnabled,unread_message_count:t.unreadMessageCount,unread_mention_count:t.unreadMentionCount,push_trigger_option:t.myPushTriggerOption,count_preference:t.myCountPreference,hidden_state:t.hiddenState,member_count:t.memberCount,joined_member_count:t.joinedMemberCount,member_state:t.myMemberState,my_role:t.myRole,user_last_read:t.myLastRead,ts_message_offset:t.messageOffsetTimestamp,message_survival_seconds:t.messageSurvivalSeconds,read_receipt:t.cachedUnreadMemberState,delivery_receipt:t.cachedUndeliveredMemberState,members:t.members.map((function(e){return Ws.payloadify(e)})),last_message:t.lastMessage?Se(t.lastMessage):null,inviter:t.inviter?te.u.payloadify(t.inviter):null,invited_at:t.invitedAt,joined_ts:t.joinedAt,pinned_message_ids:t.pinnedMessageIds,latest_pinned_message:t.lastPinnedMessage?Se(t.lastPinnedMessage):null})))},t.prototype._shouldUpdateLastMessageWith=function(e){return!(e instanceof _e&&e.parentMessageId>0&&!e.replyToChannel)&&(!this.lastMessage||this.lastMessage.createdAt<e.createdAt||this.lastMessage.createdAt===e.createdAt&&this.lastMessage.messageId===e.messageId&&this.lastMessage.updatedAt<e.updatedAt)},t.prototype._tryUpdateLastMessageAndCallEvents=function(e,t){var n=te.v.of(this._iid).dispatcher,r=sl.of(this._iid);e._shouldUpdateLastMessageWith(t)&&(e.lastMessage=t),r.handlers.map((function(t){t.onChannelChanged&&t.onChannelChanged(e)})),n.dispatch(new lo({channels:[e],source:te.x.EVENT_MESSAGE_SENT}))},t.prototype._updateUnreadCount=function(e,t){if("number"==typeof e&&e>=0)if(this.myCountPreference===sc.ALL||this.myCountPreference===sc.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var n=te.v.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=n&&e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&(this.myCountPreference===sc.ALL||this.myCountPreference===sc.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=t:this.unreadMentionCount=0},t.prototype._updateUnreadMemberState=function(e,t){var n=this._unreadMemberStateMap.get(e);return(!n||n<t)&&(this._unreadMemberStateMap.set(e,t),te.v.of(this._iid).sdkState.userId===e&&(this.myLastRead=t),!0)},t.prototype._updateUndeliveredMemberState=function(e,t){var n=this._undeliveredMemberStateMap.get(e);return(!n||n<t)&&(this._undeliveredMemberStateMap.set(e,t),!0)},t.prototype._updateTypingStatus=function(e,t){void 0===t&&(t=(new Date).getTime()),t>0?this._typingStatus.set(e.userId,{user:e,ts:t}):this._typingStatus.delete(e.userId)},t.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},t.prototype._setLatestMemberCount=function(e,t,n){var r=!1;return n>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=n,r=e!==this.memberCount||t!==this.joinedMemberCount,this.memberCount=e,this.joinedMemberCount=t),r},t.prototype.isReadMessage=function(e){var t=te.v.of(this._iid).sdkState,n=this._unreadMemberStateMap.get(t.userId);return!!n&&n>=e.createdAt},t.prototype.serialize=function(){var e=this;return Object(te.jb)(this,(function(t){t.cachedUnreadMemberState=e.cachedUnreadMemberState,t.cachedUndeliveredMemberState=e.cachedUndeliveredMemberState}))},t.prototype.createMessageCollection=function(e){return void 0===e&&(e={}),new Rl(this._iid,Object(te.Xb)(Object(te.Xb)({},e),{channel:this}))},t.prototype.createMemberListQuery=function(e){return void 0===e&&(e={}),new Dl(this._iid,this.url,e)},t.prototype.createPinnedMessageListQuery=function(e){return void 0===e&&(e={}),new dc(this._iid,this.url,this.channelType,e)},t.prototype.addMember=function(e,t){if(void 0===t&&(t=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var n=this.members.findIndex((function(t){return t.userId===e.userId}));if(n>-1){var r=this.members[n];r.state===Us.JOINED&&(e.state=r.state),this.members.splice(n,1),this.memberCount--}this.members.push(e),this.memberCount++,this._updateUnreadMemberState(e.userId,t),this._updateUndeliveredMemberState(e.userId,t)}},t.prototype.removeMember=function(e){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var t=e instanceof Ws?e.userId:e,n=this.members.findIndex((function(e){return e.userId===t}));if(n>-1)return this.members.splice(n,1),this.memberCount--,!0}return!1},t.prototype.getUnreadMemberCount=function(e){var t,n;if(e instanceof _e&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=te.v.of(this._iid).sdkState,a=e.createdAt,i=0;try{for(var s=Object(te.ic)(this.members),o=s.next();!o.done;o=s.next()){var l=o.value;r.userId!==l.userId&&l.state===Us.JOINED&&e.sender.userId!==l.userId&&(this.cachedUnreadMemberState[l.userId]||0)<a&&i++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}return 0},t.prototype.getUndeliveredMemberCount=function(e){var t,n;if(e instanceof _e&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=te.v.of(this._iid).sdkState,a=e.createdAt,i=0;try{for(var s=Object(te.ic)(this.members),o=s.next();!o.done;o=s.next()){var l=o.value;r.userId!==l.userId&&l.state===Us.JOINED&&e.sender.userId!==l.userId&&(this.cachedUndeliveredMemberState[l.userId]||0)<a&&i++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}return 0},t.prototype.getReadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var r=te.v.of(this._iid).sdkState;if(!r.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var a=e instanceof _e?e.sender:null,i=[];return this.members.forEach((function(s){if(t||s.userId!==r.userId&&s.userId!==(null==a?void 0:a.userId)){var o=n._unreadMemberStateMap.get(s.userId);o&&o>=e.createdAt&&i.push(s)}})),i},t.prototype.getUnreadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var r=te.v.of(this._iid).sdkState;if(!r.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var a=e instanceof _e?e.sender:null,i=[];return this.members.forEach((function(s){if(t||s.userId!==r.userId&&s.userId!==(null==a?void 0:a.userId)){var o=n._unreadMemberStateMap.get(s.userId);o&&o<e.createdAt&&i.push(s)}})),i},t.prototype.getReadStatus=function(e){var t=this;void 0===e&&(e=!1);var n=te.v.of(this._iid).sdkState;if(!n.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var r={};return this.members.forEach((function(a){if(e||a.userId!==n.userId){var i=t._unreadMemberStateMap.get(a.userId);r[a.userId]=new Ys(t._iid,{channel_url:t.url,channel_type:t.channelType,user:Ws.payloadify(a),ts:null!=i?i:0})}})),r},t.prototype.getTypingUsers=function(){var e=[];return this._typingStatus.forEach((function(t){var n=t.user;e.push(n)})),e},t.prototype.invalidateTypingStatus=function(){var e=this,t=te.v.of(this._iid).typingIndicatorInvalidateTime,n=Date.now(),r=!1;return this._typingStatus.forEach((function(a,i){var s=a.ts;n-s>=t&&(e._typingStatus.delete(i),r=!0)})),r},t.prototype.refresh=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,this._refresh()]}))}))},t.prototype._refresh=function(e){return void 0===e&&(e=!1),Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return t=te.v.of(this._iid),n=t.requestQueue,r=t.dispatcher,a=new po({channelUrl:this.url}),[4,n.send(a)];case 1:return i=o.sent(),s=i.as(mo).channel,this._update(s),e&&r.dispatch(new lo({channels:[s],source:te.x.REQUEST_CHANNEL})),[2,this]}}))}))},t.prototype.freeze=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,e.prototype.freeze.call(this)];case 1:return t.sent(),te.v.of(this._iid).dispatcher.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_FROZEN,isWebSocketEventComing:!0})),[2]}}))}))},t.prototype.unfreeze=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,e.prototype.unfreeze.call(this)];case 1:return t.sent(),te.v.of(this._iid).dispatcher.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_UNFROZEN,isWebSocketEventComing:!0})),[2]}}))}))},t.prototype.updateChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},Ul),e),Object(te.jc)(function(e){return Object(te.B)("string",e.coverUrl,!0)&&(Object(te.Zb)(e.coverImage)||Object(te.B)("string",e.coverImage,!0))&&Object(te.B)("boolean",e.isDistinct,!0)&&Object(te.B)("boolean",e.isPublic,!0)&&Object(te.B)("boolean",e.isDiscoverable,!0)&&Object(te.B)("string",e.accessCode,!0)&&Object(te.B)("string",e.name,!0)&&Object(te.B)("string",e.data,!0)&&Object(te.B)("string",e.customType,!0)&&Object(te.k)("string",e.operatorUserIds,!0)&&Object(te.B)("number",e.messageSurvivalSeconds,!0)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid),r=n.dispatcher,a=n.requestQueue,i=new Fl(Object(te.Xb)({channelUrl:this.url},t)),[4,a.send(i)];case 1:return s=l.sent(),o=s.as(Hl).channel,this._update(o),r.dispatch(new lo({channels:[o],source:te.x.EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.invite=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return Object(te.jc)(e.every((function(e){return e instanceof te.u}))).throw(te.hc.invalidParameters),[2,this.inviteWithUserIds(e.map((function(e){return e.userId})))]}))}))},t.prototype.inviteWithUserIds=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return Object(te.Tb)(this,(function(o){switch(o.label){case 0:return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.dispatcher,r=t.requestQueue,a=new Po({channelUrl:this.url,userIds:e}),[4,r.send(a)];case 1:return i=o.sent(),s=i.as(Fo).channel,this._update(s),n.dispatch(new lo({channels:[s],source:te.x.EVENT_CHANNEL_INVITED,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.join=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return Object(te.jc)(Object(te.B)("string",e,!0)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.dispatcher,r=t.sdkState,a=t.requestQueue,i=new Uo({channelUrl:this.url,userId:r.userId,accessCode:e}),[4,a.send(i)];case 1:return s=l.sent(),(o=s.as(Lo).channel).myMemberState=this.myMemberState=Us.JOINED,this._update(o),n.dispatch(new lo({channels:[o],source:te.x.EVENT_CHANNEL_JOINED,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.leave=function(e){return void 0===e&&(e=!1),Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return t=te.v.of(this._iid),n=t.sdkState,r=t.requestQueue,a=new Do({channelUrl:this.url,userId:n.userId,shouldRemoveOperatorStatus:e}),[4,r.send(a)];case 1:return i.sent(),this.myMemberState=Us.NONE,[2]}}))}))},t.prototype.acceptInvitation=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return Object(te.jc)(Object(te.B)("string",e,!0)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.dispatcher,r=t.sdkState,a=t.requestQueue,i=new xl({channelUrl:this.url,userId:r.userId,accessCode:e}),[4,a.send(i)];case 1:return s=l.sent(),(o=s.as(Pl).channel).myMemberState=this.myMemberState=Us.JOINED,this._update(o),n.dispatch(new lo({channels:[o],source:te.x.EVENT_CHANNEL_ACCEPTED_INVITE,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.declineInvitation=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Go({channelUrl:this.url,userId:t.userId}),[4,n.send(r)];case 1:return a.sent(),this.myMemberState=Us.NONE,[2,this]}}))}))},t.prototype.sendUserMessage=function(t){var n=this,r=new Ze,a=te.v.of(this._iid).dispatcher,i=Ha.of(this._iid);return e.prototype.sendUserMessage.call(this,t).onPending((function(e){i.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){t&&i.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){n.hiddenState===oc.HIDDEN_ALLOW_AUTO_UNHIDE&&(n.hiddenState=oc.UNHIDDEN),i.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),sl.of(n._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),a.dispatch(new lo({channels:[n],source:te.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.updateUserMessage=function(t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o=this;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return r=te.v.of(this._iid).dispatcher,[4,e.prototype.updateUserMessage.call(this,t,n)];case 1:return a=l.sent(),i=!1,!a.silent&&this._shouldUpdateLastMessageWith(a)&&(this.lastMessage=a,i=!0),s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,i=!0,s=!0),i&&(sl.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)})),r.dispatch(new lo({channels:[this],source:s?te.x.EVENT_PINNED_MESSAGE_UPDATED:te.x.EVENT_MESSAGE_UPDATED}))),s&&sl.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(o)})),r.dispatch(new te.K({messages:[a],source:te.x.EVENT_MESSAGE_UPDATED})),[2,a]}}))}))},t.prototype._autoResendUserMessage=function(t){var n=this,r=new Ze,a=te.v.of(this._iid).dispatcher,i=Ha.of(this._iid);return e.prototype._autoResendUserMessage.call(this,t).onPending((function(e){i.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){i.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){var t=sl.of(n._iid);i.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),a.dispatch(new lo({channels:[n],source:te.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.sendFileMessage=function(t){var n=this,r=new Ze,a=te.v.of(this._iid).dispatcher,i=Ha.of(this._iid);return e.prototype.sendFileMessage.call(this,t).onPending((function(e){i.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){t&&i.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){var t=sl.of(n._iid);i.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),a.dispatch(new lo({channels:[n],source:te.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.sendMultipleFilesMessage=function(t){var n=this,r=new Yn,a=te.v.of(this._iid).dispatcher;return e.prototype.sendMultipleFilesMessage.call(this,t).onPending((function(e){r._trigger(e)})).onFailed((function(e,t){r._triggerFailed(e,t)})).onSucceeded((function(e){var t=sl.of(n._iid);n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),a.dispatch(new lo({channels:[n],source:te.x.EVENT_MESSAGE_SENT})),r._trigger(e)})).onFileUploaded((function(e,t,n,a){r._triggerOnFileUploaded(e,t,n,a)})),r},t.prototype.updateFileMessage=function(t,n){return Object(te.Ib)(this,void 0,void 0,(function(){var r,a,i,s,o=this;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return r=te.v.of(this._iid).dispatcher,[4,e.prototype.updateFileMessage.call(this,t,n)];case 1:return a=l.sent(),i=!1,!a.silent&&this._shouldUpdateLastMessageWith(a)&&(this.lastMessage=a,i=!0),s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,i=!0,s=!0),i&&(sl.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)})),r.dispatch(new lo({channels:[this],source:s?te.x.EVENT_PINNED_MESSAGE_UPDATED:te.x.EVENT_MESSAGE_UPDATED}))),s&&sl.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(o)})),r.dispatch(new te.K({messages:[a],source:te.x.EVENT_MESSAGE_UPDATED})),[2,a]}}))}))},t.prototype._autoResendFileMessage=function(t){var n=this,r=new Ze,a=te.v.of(this._iid).dispatcher,i=Ha.of(this._iid);return e.prototype._autoResendFileMessage.call(this,t).onPending((function(e){i.completeCurrentAndProcessNextAutoResend(e),r._trigger(e)})).onFailed((function(e,t){i.completeCurrentAndProcessNextAutoResend(t),r._triggerFailed(e,t)})).onSucceeded((function(e){var t=sl.of(n._iid);i.completeCurrentAndProcessNextAutoResend(e),n._shouldUpdateLastMessageWith(e)&&(n.lastMessage=e),t.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(n)})),a.dispatch(new lo({channels:[n],source:te.x.EVENT_MESSAGE_SENT})),r._trigger(e)})),r},t.prototype.deleteMessage=function(t){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.deleteMessage.call(this,t)];case 1:return n.sent(),0===t.messageId&&t instanceof _e&&te.v.of(this._iid).dispatcher.dispatch(new te.U({reqId:t.reqId,source:te.x.EVENT_MESSAGE_DELETED})),[2]}}))}))},t.prototype.hide=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l;return Object(te.Tb)(this,(function(c){switch(c.label){case 0:return t=Object(te.Xb)(Object(te.Xb)({},zo),e),Object(te.jc)(function(e){return Object(te.B)("boolean",e.hidePreviousMessages,!0)&&Object(te.B)("boolean",e.allowAutoUnhide,!0)}(t)).throw(te.hc.invalidParameters),n=te.v.of(this._iid),r=n.dispatcher,a=n.sdkState,i=n.requestQueue,s=new Vo(Object(te.Xb)({channelUrl:this.url,userId:a.userId},t)),[4,i.send(s)];case 1:return o=c.sent(),l=o.as(qo).messageOffsetTimestamp,this.hiddenState=t.allowAutoUnhide?oc.HIDDEN_ALLOW_AUTO_UNHIDE:oc.HIDDEN_PREVENT_AUTO_UNHIDE,t.hidePreviousMessages&&this._updateUnreadCount(0,0),l&&(this.messageOffsetTimestamp=l),r.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_HIDDEN,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.unhide=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.dispatcher,n=e.requestQueue,r=new Bl({channelUrl:this.url}),[4,n.send(r)];case 1:return a.sent(),this.hiddenState=oc.UNHIDDEN,t.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_UNHIDDEN,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.delete=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=te.v.of(this._iid).requestQueue,t=new Gl({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.markAsRead=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o=this;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.dispatcher,r=e.requestQueue,a=new el({channelUrl:this.url}),[4,r.send(a)];case 1:return i=l.sent(),s=i.as(tl).readStatus,this._updateUnreadMemberState(t.userId,s.readAt),(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),sl.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)}))),n.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_READ})),[2]}}))}))},t.prototype.markAsDelivered=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new nl({channelUrl:this.url,userId:t.userId}),[4,n.send(r)];case 1:return a.sent(),[2]}}))}))},t.prototype.startTyping=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){return e=te.v.of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(r=(new Date).getTime())-this._typingStarted>=n&&(this._typingStarted=r,this._typingEnded=0,a=new Wo({channelUrl:this.url,time:this._typingStarted}),t.send(a)),[2]}))}))},t.prototype.endTyping=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a;return Object(te.Tb)(this,(function(i){return e=te.v.of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(r=(new Date).getTime())-this._typingEnded>=n&&(this._typingStarted=0,this._typingEnded=r,a=new Qo({channelUrl:this.url,time:this._typingStarted}),t.send(a)),[2]}))}))},t.prototype.createScheduledUserMessage=function(e){e=Object(te.Xb)(Object(te.Xb)({},fa),e),Object(te.jc)(function(e){return it(e)&&Object(te.B)("number",e.scheduledAt,!0)}(e)).throw(te.hc.invalidParameters);var t=new Ze;return this._createScheduledUserMessage(e,t),t},t.prototype.updateScheduledUserMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r,a;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},Yl),t),Object(te.jc)(function(e){return _t(e)&&Object(te.B)("number",e.scheduledAt,!0)}(n)).throw(te.hc.invalidParameters),r=te.v.of(this._iid).requestQueue,a=new Zl(Object(te.Xb)({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,r.send(a)];case 1:return[2,i.sent().as(wn).message]}}))}))},t.prototype.createScheduledFileMessage=function(e){var t=this;e=Object(te.Xb)(Object(te.Xb)({},pa),e),Object(te.jc)(function(e){return Je(e)&&Object(te.B)("number",e.scheduledAt)&&(Object(te.Zb)(e.file)||Object(te.B)("string",e.fileUrl))&&Object(te.B)("string",e.fileName,!0)&&Object(te.B)("string",e.mimeType,!0)&&Object(te.B)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(te.B)("object",e)&&e.maxWidth>0&&e.maxHeight>0})))}(e)).throw(te.hc.invalidParameters);var n=Date.now(),r=this._generateRequestId(),a=new Ze;return Object(te.ub)(2).then((function(){var i=t._createPendingScheduledFileMessage(e,r,n);Object(te.b)((function(){return Object(te.Ib)(t,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return[2,a._trigger(i)]}))}))}))})),Object(te.Zb)(e.file)?this._uploadFileAndUpdateParams(e).then((function(){return t._createScheduledFileMessage(e,a,r,n)})):this._createScheduledFileMessage(e,a,r,n),a},t.prototype.updateScheduledFileMessage=function(e,t){return Object(te.Ib)(this,void 0,void 0,(function(){var n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},Wl),t),Object(te.jc)(function(e){return mt(e)&&Object(te.B)("number",e.scheduledAt,!0)&&(Object(te.Zb)(e.file)||Object(te.B)("string",e.fileUrl))&&Object(te.B)("string",e.fileName,!0)&&Object(te.B)("string",e.mimeType,!0)&&Object(te.B)("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(te.B)("object",e)&&e.maxWidth>0&&e.maxHeight>0})))}(n)).throw(te.hc.invalidParameters),Object(te.Zb)(n.file)?[4,this._uploadFileAndUpdateParams(n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return r=new Ql(Object(te.Xb)({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,te.v.of(this._iid).requestQueue.send(r)];case 3:return[2,a.sent().as(Xl).message]}}))}))},t.prototype.cancelScheduledMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return t=new $l({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,te.v.of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.sendScheduledMessageNow=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return t=new Jl({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,te.v.of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},t.prototype.getMyPushTriggerOption=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return e=te.v.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new nc({userId:t.userId,channelUrl:this.url}),[4,n.send(r)];case 1:return a=s.sent(),i=a.as(rc).pushTriggerOption,this.myPushTriggerOption=i,[2,i]}}))}))},t.prototype.setMyPushTriggerOption=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return Object(te.jc)(Object(te.q)(te.r,e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.dispatcher,r=t.sdkState,a=t.requestQueue,i=new ec({userId:r.userId,channelUrl:this.url,pushTriggerOption:e}),[4,a.send(i)];case 1:return s=l.sent(),o=s.as(tc).pushTriggerOption,this.myPushTriggerOption=o,n.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,o]}}))}))},t.prototype.setMyCountPreference=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return Object(te.jc)(Object(te.q)(sc,e)).throw(te.hc.invalidParameters),t=te.v.of(this._iid),n=t.dispatcher,r=t.sdkState,a=t.requestQueue,i=new zl({channelUrl:this.url,userId:r.userId,countPreference:e}),[4,a.send(i)];case 1:return s=l.sent(),o=s.as(Vl).countPreference,this.myCountPreference=o,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),n.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,o]}}))}))},t.prototype.resetMyHistory=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return e=te.v.of(this._iid),t=e.dispatcher,n=e.requestQueue,r=new ql({channelUrl:this.url}),[4,n.send(r)];case 1:return a=s.sent(),i=a.as(Kl).messageOffsetTimestamp,this.messageOffsetTimestamp=i,this.lastMessage&&this.lastMessage.createdAt<i&&(this.lastMessage=null),t.dispatch(new lo({channels:[this],source:te.x.EVENT_CHANNEL_RESET_HISTORY,isWebSocketEventComing:!0})),[2,this]}}))}))},t.prototype.pinMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.B)("number",e)&&e>0).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new ac({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype.unpinMessage=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return Object(te.jc)(Object(te.B)("number",e)&&e>0).throw(te.hc.invalidParameters),t=te.v.of(this._iid).requestQueue,n=new ic({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},t.prototype._uploadFileAndUpdateParams=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t,n,r,a,i,s,o,l,c,u,d;return Object(te.Tb)(this,(function(h){switch(h.label){case 0:return Object(te.Zb)(e.file)?(t=te.v.of(this._iid).requestQueue,n=new ne({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:this._generateRequestId()}),[4,t.send(n)]):[3,2];case 1:r=h.sent(),a=r.as(re),i=a.url,s=a.fileSize,o=void 0===s?e.fileSize:s,l=a.thumbnailSizes,c=void 0===l?e.thumbnailSizes:l,u=a.requireAuth,d=void 0!==u&&u,e.fileUrl=i,e.fileSize=o,e.thumbnailSizes=c,e.requireAuth=d,h.label=2;case 2:return[2]}}))}))},t.prototype.resendMessage=function(e,t){var n,r=this;if(Object(te.jc)(e instanceof _e&&!e.scheduledInfo&&e.isResendable).throw(te.hc.invalidParameters),e.isUserMessage()){var a=null!==(n=e.messageParams)&&void 0!==n?n:at(e),i=new Ze;return this._sendUserMessage(a,Kn.RESEND,e.reqId).onPending((function(e){i._trigger(e)})).onFailed((function(e,t){i._triggerFailed(e,t)})).onSucceeded((function(e){r._tryUpdateLastMessageAndCallEvents(r,e),i._trigger(e)})),i}if(e.isFileMessage()){var s=this._validateFailedFileMessageHasFile(e,t);Object(te.jc)(s).throw(te.hc.invalidParameters),a=ht(e,t);var o=new Ze;return this._sendFileMessage(a,Kn.RESEND,e.reqId).onPending((function(e){o._trigger(e)})).onFailed((function(e,t){o._triggerFailed(e,t)})).onSucceeded((function(e){r._tryUpdateLastMessageAndCallEvents(r,e),o._trigger(e)})),o}if(e.isMultipleFilesMessage()){a=e.messageParams;var l=new Yn;return this._sendMultipleFilesMessage(a,Kn.RESEND,e.reqId).onPending((function(e){l._trigger(e)})).onFailed((function(e,t){l._triggerFailed(e,t)})).onSucceeded((function(e){r._tryUpdateLastMessageAndCallEvents(r,e),l._trigger(e)})).onFileUploaded((function(e,t,n,r){l._triggerOnFileUploaded(e,t,n,r)})),l}},t.prototype.copyMessage=function(e,t){var n=this;if(Object(te.jc)(e instanceof Xn&&t instanceof _e&&t.sendingStatus===te.lb.SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(te.hc.invalidParameters),t.isUserMessage()){Object(te.jc)(!t.poll).throw(te.hc.notSupportedError);var r=nt(t),a=new Ze;return e._sendUserMessage(r).onPending((function(e){a._trigger(e)})).onFailed((function(e,t){a._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),a._trigger(t)})),a}if(t.isFileMessage()){r=ut(t);var i=new Ze;return e._sendFileMessage(r).onPending((function(e){i._trigger(e)})).onFailed((function(e,t){i._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),i._trigger(t)})),i}if(t.isMultipleFilesMessage()){if(e.isGroupChannel()){r=function(e){var t,n,r;return null!==(t=e.messageParams)&&void 0!==t?t:Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},e),{isReplyToChannel:!1,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:te.pb.DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map((function(e){var t;return{fileUrl:e.plainUrl,fileName:e.fileName,fileSize:e.fileSize,mimeType:e.mimeType,thumbnailSizes:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),_uploadedMetaData:{requireAuth:e._requireAuth,isUploaded:!0}}}))}))}(t);var s=new Yn;return e._sendMultipleFilesMessage(r,Kn.COPY).onPending((function(e){s._trigger(e)})).onFailed((function(e,t){s._triggerFailed(e,t)})).onSucceeded((function(t){n._tryUpdateLastMessageAndCallEvents(e,t),s._trigger(t)})).onFileUploaded((function(e,t,n,r){s._triggerOnFileUploaded(e,t,n,r)})),s}throw te.hc.channelTypeNotSupportedError}},t}(Xn),pc={},mc=function(){function e(e){var t=e._iid,n=e.limit,r=void 0===n?100:n,a=this;this.ref=0,this._iid=t,this._limit=r;var i,s=te.v.of(this._iid),o=s.sdkState,l=s.dispatcher,c=s.logger,u=s.cacheContext;this._metadataKey=(i=o.userId,"sendbird:".concat(i,"@groupchannel/sync.meta"));var d=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(o.userId);this._sync=new ll(d,(function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,t,n,r,a,i,s,l,d,h,f,p;return Object(te.Tb)(this,(function(m){switch(m.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(m.sent(),c.debug("channel background sync from",null===(d=this._metadata)||void 0===d?void 0:d.token),null===(h=this._metadata)||void 0===h?void 0:h.completed)return[3,13];m.label=2;case 2:if(m.trys.push([2,9,,12]),(t={includeEmpty:!0,order:Aa.CHRONOLOGICAL}).order!==Aa.LATEST_LAST_MESSAGE)return[3,6];m.label=3;case 3:return m.trys.push([3,5,,6]),[4,u.preference.get(Object(te.h)(o.appId))];case 4:return n=m.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return m.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,sl.of(this._iid).getMyGroupChannels(null!==(p=null===(f=this._metadata)||void 0===f?void 0:f.token)&&void 0!==p?p:"",t,this._limit,te.x.SYNC_CHANNEL_BACKGROUND)];case 7:return r=m.sent(),a=r.channels,i=r.token,e.hasNext=a.length>=this._limit&&!!i,e.nextToken=i,this._metadata&&(this._metadata.token=i,(l=this._metadata.range).extends.apply(l,Object(te.fc)([],Object(te.gc)(a.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),c.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return m.sent(),[3,12];case 9:return s=m.sent(),c.debug("channel background sync error",s),s instanceof te.hc&&s.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:m.sent(),m.label=11;case 11:throw s;case 12:return[3,14];case 13:e.hasNext=!1,e.nextToken="",m.label=14;case 14:return[2,e]}}))}))})),this._connectionEventContext=l.on((function(e){e instanceof te.pc&&(e.stateType===te.qc.CONNECTED?a.resume():a.pause())}))}return e.of=function(t){return pc[t]||(pc[t]=new e({_iid:t})),pc[t].ref++,pc[t]},e.clear=function(e){pc[e]&&(pc[e].close(),delete pc[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new ss({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,te.v.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata={token:e?e.token:"",range:new ss(e?e.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!e&&e.completed},t.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,te.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetaData=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,te.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e,t,n=te.v.of(this._iid),r=n.logger;n.connectionManager.isConnected&&(r.debug("channel background sync resume()"),this._sync.start(null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.token)&&void 0!==t?t:""))},e.prototype.pause=function(){te.v.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete pc[this._iid])},e}(),bc={},_c=function(){function e(e){var t=e._iid,n=this;this.ref=0,this._iid=t;var r,a=te.v.of(this._iid),i=a.logger,s=a.sdkState,o=a.dispatcher,l=a.cacheContext;this._metadataKey=(r=s.userId,"sendbird:".concat(r,"@groupchannel/changelogs.meta"));var c=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(s.userId);this._sync=new ll(c,(function(){return Object(te.Ib)(n,void 0,void 0,(function(){var e,t,n,r,a,o,c,u,d,h;return Object(te.Tb)(this,(function(f){switch(f.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:f.sent(),i.debug("channel changelog sync from",null===(u=this._metadata)||void 0===u?void 0:u.token),f.label=2;case 2:f.trys.push([2,9,,12]),t={includeEmpty:!0},f.label=3;case 3:return f.trys.push([3,5,,6]),[4,l.preference.get(Object(te.h)(s.appId))];case 4:return n=f.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return f.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,sl.of(this._iid).getMyGroupChannelChangeLogs(null!==(h=null===(d=this._metadata)||void 0===d?void 0:d.token)&&void 0!==h?h:"",t,te.x.SYNC_CHANNEL_CHANGELOGS)];case 7:return r=f.sent(),a=r.hasMore,o=r.token,e.hasNext=a,e.nextToken=o,this._metadata&&(this._metadata.token=o),i.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return f.sent(),[3,12];case 9:return c=f.sent(),i.debug("channel changelog sync error",c),c instanceof te.hc&&c.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:f.sent(),f.label=11;case 11:throw c;case 12:return[2,e]}}))}))})),this._connectionEventContext=o.on((function(e){e instanceof te.pc&&(e.stateType===te.qc.CONNECTED?n.resume():n.pause())}))}return e.of=function(t){return bc[t]||(bc[t]=new e({_iid:t})),bc[t].ref++,bc[t]},e.clear=function(e){bc[e]&&(bc[e].close(),delete bc[e])},e.prototype.loadMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r;return Object(te.Tb)(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(e=te.v.of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:r=a.sent(),this._metadata={token:r?r.token:n},a.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return this._metadata?[4,te.v.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,te.v.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){te.v.of(this._iid).connectionManager.isConnected&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete bc[this._iid])},e}(),gc=function(e,t){return e.findIndex((function(e){return e.isIdentical(t)}))},vc=function(e,t,n){if(e.length>0){for(var r=gc(e,t),a=0,i=e.length-1,s=Math.floor((a+i)/2);a<i;){var o=Ec(e[s],t,n);if(o>0)i=s,s=Math.floor((a+i)/2);else{if(!(o<0))return{place:s,oldPosition:r};a=s+1,s=Math.floor((a+i)/2)}}return{place:Ec(e[s],t,n)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},Ec=function(e,t,n){switch(n){case Aa.LATEST_LAST_MESSAGE:return e.lastMessage&&t.lastMessage?t.lastMessage.createdAt-e.lastMessage.createdAt:e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case Aa.CHRONOLOGICAL:return t.createdAt-e.createdAt;case Aa.CHANNEL_NAME_ALPHABETICAL:var r=e.name.localeCompare(t.name);return 0===r?e.createdAt-t.createdAt:r;default:return 0}},yc=function(){function e(e,t){var n=t.filter,r=t.order,a=t.limit,i=this;this.channels=[],this._iid=e,this._key="gcc-".concat(Object(te.dc)()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this.filter=null!=n?n:new Xs,this.order=null!=r?r:Aa.LATEST_LAST_MESSAGE,this._hasMore=!0,this._token="",this._limit=null!=a?a:100;var s=te.v.of(this._iid),o=s.sdkState,l=s.cacheContext,c=s.dispatcher;l.localCacheEnabled&&(this._backgroundSync=mc.of(e),this._backgroundSync.resume()),this._changelogSync=_c.of(e),this._changelogSync.resume(),sl.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,t){if(oo(t)){var n=e.filter((function(e){return i.filter.match(e,o.userId)})),r=e.filter((function(e){return!i.filter.match(e,o.userId)})).map((function(e){return e.url}));n.length>0&&i._addChannelsToView(n,t),r.length>0&&i._removeChannelsFromView(r,t)}},onRemove:function(e,t){i._removeChannelsFromView(e,t)}}),te.v.of(this._iid).statLogCollector.put(new te.fb({type:te.gb.FEATURE_LOCALCACHE,data:{use_local_cache:l.localCacheEnabled,collection_interface:{group_channel:!0}}})),c.on((function(e){e instanceof te.pc&&(e.stateType===te.qc.CONNECTED?i._isGetRemoteChannelsSucceeded||Object(te.Ib)(i,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):e.stateType===te.qc.LOGOUT&&i.dispose())}))}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},e.prototype._addChannelsToView=function(e,t,n){var r,a,i,s,o=this;void 0===n&&(n=!1);var l=[],c=[],u=[];try{for(var d=Object(te.ic)(e),h=d.next();!h.done;h=d.next()){var f=h.value,p=gc(this.channels,f);p>=0&&this.channels.splice(p,1);var m=vc(this.channels,f,this.order).place;if(p<0)m===this.channels.length?!n&&this._hasMore||(l.push(f),this.channels.push(f)):(l.push(f),this.channels.splice(m,0,f));else switch(t){case te.x.EVENT_CHANNEL_UPDATED:case te.x.EVENT_MESSAGE_RECEIVED:case te.x.SYNC_CHANNEL_CHANGELOGS:case te.x.EVENT_MESSAGE_SENT:m!==p&&this._hasMore&&m===this.channels.length?u.push(f):(this.channels.splice(m,0,f),c.push(f));break;default:this.channels.splice(m,0,f),c.push(f)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}if(u.length>0)try{for(var b=Object(te.ic)(u),_=b.next();!_.done;_=b.next()){f=_.value;var g=gc(this.channels,f);-1!==g&&this.channels.splice(g,1)}}catch(e){i={error:e}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(i)throw i.error}}oo(t)&&Object(te.b)((function(){return Object(te.Ib)(o,void 0,void 0,(function(){var e,n,r,a;return Object(te.Tb)(this,(function(i){return e=new Ol(t),l.length>0&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelsAdded)&&this._handler.onChannelsAdded(e,l),c.length>0&&(null===(r=this._handler)||void 0===r?void 0:r.onChannelsUpdated)&&this._handler.onChannelsUpdated(e,c),u.length>0&&(null===(a=this._handler)||void 0===a?void 0:a.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,u.map((function(e){return e.url}))),[2]}))}))}))},e.prototype._removeChannelsFromView=function(e,t){var n,r,a=this,i=[],s=function(e){var t=o.channels.findIndex((function(t){return t.url===e}));t>=0&&(i.push(o.channels[t].url),o.channels.splice(t,1))},o=this;try{for(var l=Object(te.ic)(e),c=l.next();!c.done;c=l.next())s(c.value)}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return oo(t)&&i.length>0&&Object(te.b)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){var e,n;return Object(te.Tb)(this,(function(r){return e=new Ol(t),(null===(n=this._handler)||void 0===n?void 0:n.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,i),[2]}))}))})),i},e.prototype._getLocalChannels=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t;return Object(te.Tb)(this,(function(n){switch(n.label){case 0:return e=sl.of(this._iid),t=this.channels.length>0?function(e,t){var n,r,a,i;switch(t){case Aa.LATEST_LAST_MESSAGE:return null!==(r=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==r?r:e.createdAt;case Aa.CHRONOLOGICAL:return e.createdAt;case Aa.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(i=null===(a=e.lastMessage)||void 0===a?void 0:a.createdAt)&&void 0!==i?i:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,n.sent()]}}))}))},e.prototype._getRemoteChannels=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return[4,sl.of(this._iid).getMyGroupChannels(this._token,Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this.filter),{order:this.order})),this._limit)];case 1:return e=r.sent(),t=e.channels,n=e.token,this._token=n,this._hasMore=!!n,[2,t]}}))}))},e.prototype._revokeLoadMore=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e;return Object(te.Tb)(this,(function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,te.x.REQUEST_CHANNEL,!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},e.prototype.loadMore=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a=this;return Object(te.Tb)(this,(function(i){switch(i.label){case 0:if(this._isDisposed)throw new te.hc({code:te.tb.COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasMore?(e=te.v.of(this._iid),t=e.cacheContext,n=e.connectionManager,r=[],!t.localCacheEnabled||n.isConnected&&!this._backgroundSync.completed?[3,2]:[4,Object(te.o)((function(){return Object(te.Ib)(a,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return r=e.sent(),[2]}}))}))}))]):[3,6];case 1:return i.sent(),this._hasMore=r.length>=this._limit,[3,5];case 2:return i.trys.push([2,4,,5]),[4,this._getRemoteChannels()];case 3:return r=i.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,5];case 4:return i.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,5];case 5:return this._addChannelsToView(r,te.x.REQUEST_CHANNEL,!0),[2,r];case 6:return[2,[]]}}))}))},e.prototype.dispose=function(){var e,t;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),sl.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),Oc=function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.order,s=t.includeEmpty,o=t.membershipFilter,l=t.channelNameContainsFilter,c=t.channelUrlsFilter,u=t.customTypesFilter,d=t.customTypeStartsWithFilter,h=t.superChannelFilter,f=t.metadataOrderKeyFilter,p=t.metadataKey,m=t.metadataValues,b=t.metadataValueStartsWith,_=t.includeFrozen,g=t.includeMetaData;return(n=e.call(this)||this).method=te.a.GET,n.path=te.xb,n.params=Object(te.Vb)(Object(te.lc)({token:r,limit:a,order:i,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:s,public_mode:Fs.PUBLIC,public_membership_mode:o,name_contains:l,channel_urls:c,custom_types:u,custom_type_startswith:d,super_mode:h,metadata_order_key:f,metadata_key:p,metadata_values:m,metadata_value_startswith:b,show_frozen:_,show_metadata:g})),n}return Object(te.A)(t,e),t}(te.Wb),Cc=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var a=n.next,i=n.channels,s=n.ts;return r.token=a,i&&i.length>0&&(r.channels=i.map((function(e){return e.ts=s,new fc(t,e)}))),r.ts="number"==typeof s?s:0,r}return Object(te.A)(t,e),t}(te.Yb);!function(e){e.ALL="all",e.JOINED="joined"}(hc||(hc={}));var Nc=function(e){function t(t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_=this;return(_=e.call(this,t,n)||this).includeEmpty=!1,_.includeFrozen=!0,_.includeMetaData=!0,_.channelUrlsFilter=null,_.customTypesFilter=null,_.customTypeStartsWithFilter=null,_.channelNameContainsFilter=null,_.membershipFilter=hc.ALL,_.superChannelFilter=Gs.ALL,_.metadataKey=null,_.metadataValues=null,_.metadataOrderKeyFilter=null,_.metadataValueStartsWith=null,_.order=wa.CHRONOLOGICAL,_.includeEmpty=null!==(r=n.includeEmpty)&&void 0!==r&&r,_.includeFrozen=null===(a=n.includeFrozen)||void 0===a||a,_.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,_.channelUrlsFilter=null!==(s=n.channelUrlsFilter)&&void 0!==s?s:null,_.customTypesFilter=null!==(o=n.customTypesFilter)&&void 0!==o?o:null,_.customTypeStartsWithFilter=null!==(l=n.customTypeStartsWithFilter)&&void 0!==l?l:null,_.channelNameContainsFilter=null!==(c=n.channelNameContainsFilter)&&void 0!==c?c:null,_.membershipFilter=null!==(u=n.membershipFilter)&&void 0!==u?u:hc.ALL,_.superChannelFilter=null!==(d=n.superChannelFilter)&&void 0!==d?d:Gs.ALL,_.metadataKey=null!==(h=n.metadataKey)&&void 0!==h?h:null,_.metadataValues=null!==(f=n.metadataValues)&&void 0!==f?f:null,_.metadataOrderKeyFilter=null!==(p=n.metadataOrderKeyFilter)&&void 0!==p?p:null,_.metadataValueStartsWith=null!==(m=n.metadataValueStartsWith)&&void 0!==m?m:null,_.order=null!==(b=n.order)&&void 0!==b?b:wa.CHRONOLOGICAL,_}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("boolean",this.includeEmpty)&&Object(te.B)("boolean",this.includeFrozen)&&Object(te.B)("boolean",this.includeMetaData)&&Object(te.B)("string",this.channelNameContainsFilter,!0)&&Object(te.k)("string",this.channelUrlsFilter,!0)&&Object(te.k)("string",this.customTypesFilter,!0)&&Object(te.B)("string",this.customTypeStartsWithFilter,!0)&&Object(te.q)(hc,this.membershipFilter)&&Object(te.q)(Gs,this.superChannelFilter)&&Object(te.q)(wa,this.order)&&Object(te.B)("string",this.metadataOrderKeyFilter,!0)&&Object(te.B)("string",this.metadataKey,!0)&&Object(te.k)("string",this.metadataValues,!0)&&Object(te.B)("string",this.metadataValueStartsWith,!0)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i,s,o;return Object(te.Tb)(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=te.v.of(this._iid),n=t.requestQueue,t.dispatcher,r=new Oc(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token}))),[4,n.send(r)]):[3,2]):[3,5];case 1:return a=l.sent(),i=a.as(Cc),s=i.channels,o=i.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,e];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),Tc=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(te.A)(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserJoined=te.yb,t.onUserLeft=te.yb,t.onUserReceivedInvitation=te.yb,t.onUserDeclinedInvitation=te.yb,t.onChannelHidden=te.yb,t.onUnreadMemberStatusUpdated=te.yb,t.onUndeliveredMemberStatusUpdated=te.yb,t.onTypingStatusUpdated=te.yb,t.onPollUpdated=te.yb,t.onPollVoted=te.yb,t.onPollDeleted=te.yb,t.onPinnedMessageUpdated=te.yb,t}return Object(te.A)(t,e),t}(ps)),Sc=function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.order,s=t.reverse,o=t.channelUrl,l=t.messageTypeFilter,c=t.scheduledStatus;return(n=e.call(this)||this).method=te.a.GET,n.path="".concat(te.hb),n.params=Object(te.Vb)(Object(te.lc)({token:r,limit:a,reverse:s,channel_url:o,order:i,message_type:l,status:c})),n}return Object(te.A)(t,e),t}(te.Wb),Ic=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.scheduledMessages=[];var a=n.next,i=n.scheduled_messages;return r.token=a,r.scheduledMessages=i.map((function(e){return Ie(t,e)})),r}return Object(te.A)(t,e),t}(te.Yb),Ac=function(e){function t(t,n){var r,a,i,s,o,l=this;return(l=e.call(this,t,n)||this).channelUrl=null,l.order=null,l.reverse=!1,l.scheduledStatus=null,l.messageTypeFilter=te.nb.ALL,l.channelUrl=null!==(r=n.channelUrl)&&void 0!==r?r:null,l.order=null!==(a=n.order)&&void 0!==a?a:null,l.reverse=null!==(i=n.reverse)&&void 0!==i&&i,l.scheduledStatus=null!==(s=n.scheduledStatus)&&void 0!==s?s:null,l.messageTypeFilter=null!==(o=n.messageTypeFilter)&&void 0!==o?o:te.nb.ALL,l}return Object(te.A)(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(te.B)("string",this.channelUrl,!0)&&(Object(te.q)(Ma,this.order)||null===this.order)&&Object(te.B)("boolean",this.reverse)&&(Object(te.k)(ie,this.scheduledStatus)||null===this.scheduledStatus)&&Object(te.q)(te.nb,this.messageTypeFilter)},t.prototype.next=function(){return Object(te.Ib)(this,void 0,void 0,(function(){var e,t,n,r,a,i;return Object(te.Tb)(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.v.of(this._iid).requestQueue,t=new Sc(Object(te.lc)(Object(te.Xb)(Object(te.Xb)({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(Ic),a=r.scheduledMessages,i=r.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw te.hc.queryInProgress;case 4:return[3,6];case 5:throw te.hc.invalidParameters;case 6:return[2]}}))}))},t}(te.P),wc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return Object(te.A)(t,e),t.prototype.init=function(t,n){var r=n.sdkState,a=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:c}),this._manager=new sl(t,{sdkState:r,cacheContext:c,dispatcher:a,sessionManager:i,requestQueue:s,logger:o})},t.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new yc(this._iid,e)},t.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new $o(this._iid,e)},t.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new Nc(this._iid,e)},t.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new Ac(this._iid,e)},t.prototype.addGroupChannelHandler=function(e,t){Object(te.jc)(Object(te.B)("string",e)&&t instanceof Tc).throw(te.hc.invalidParameters),this._manager.addHandler(e,t)},t.prototype.removeGroupChannelHandler=function(e){Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),this._manager.removeHandler(e)},t.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},t.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},t.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},t.prototype.getChannel=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.getMyGroupChannelChangeLogsByToken=function(e,t){return void 0===t&&(t={}),Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},eo),t),Object(te.jc)(Object(te.B)("string",e)&&to(n)).throw(te.hc.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,t){return void 0===t&&(t={}),Object(te.Ib)(this,void 0,void 0,(function(){var n;return Object(te.Tb)(this,(function(r){switch(r.label){case 0:return n=Object(te.Xb)(Object(te.Xb)({},eo),t),Object(te.jc)(Object(te.B)("number",e)&&to(n)).throw(te.hc.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.getGroupChannelCount=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},no),e),Object(te.jc)(ro(t)).throw(te.hc.invalidParameters),[2,this._manager.getGroupChannelCount(t)]}))}))},t.prototype.getUnreadItemCount=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalUnreadChannelCount=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},t.prototype.getTotalUnreadMessageCount=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},t.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},$s),e),Object(te.jc)(Js(t)).throw(te.hc.invalidParameters),[2,this._manager.createChannel(t)]}))}))},t.prototype.createDistinctChannelIfNotExist=function(e){return void 0===e&&(e={}),Object(te.Ib)(this,void 0,void 0,(function(){var t;return Object(te.Tb)(this,(function(n){return t=Object(te.Xb)(Object(te.Xb)({},$s),e),Object(te.jc)(Js(t)).throw(te.hc.invalidParameters),t&&(t.isDistinct=!0),[2,this.createChannel(t)]}))}))},t.prototype.createChannelWithUserIds=function(e,t,n,r,a,i){return void 0===t&&(t=!1),void 0===a&&(a=""),void 0===i&&(i=""),Object(te.Ib)(this,void 0,void 0,(function(){var s;return Object(te.Tb)(this,(function(o){return s=Object(te.Xb)(Object(te.Xb)({},$s),{invitedUserIds:e,isDistinct:t,name:n,data:a,customType:i}),"string"==typeof r?s.coverUrl=r:s.coverImage=r,[2,this.createChannel(s)]}))}))},t.prototype.markAsReadAll=function(){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},t.prototype.markAsReadWithChannelUrls=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){return Object(te.jc)(Object(te.k)("string",e)).throw(te.hc.invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},t.prototype.markAsDelivered=function(e){return Object(te.Ib)(this,void 0,void 0,(function(){return Object(te.Tb)(this,(function(t){switch(t.label){case 0:return Object(te.jc)(Object(te.B)("string",e)).throw(te.hc.invalidParameters),[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},t}(te.X);let Mc=function(e){return e.NONE="NONE",e.PENDING="PENDING",e.SENT="SENT",e.FAILED="FAILED",e.DELIVERED="DELIVERED",e.READ="READ",e}({});const jc=(e,t)=>{var n;if("pending"===t.sendingStatus)return Mc.PENDING;if("failed"===t.sendingStatus)return Mc.FAILED;if(null!=e&&null!==(n=e.isGroupChannel)&&void 0!==n&&n.call(e)){var r,a,i,s;if(0===(null===(r=(a=e).getUnreadMemberCount)||void 0===r?void 0:r.call(a,t)))return Mc.READ;if(0===(null===(i=(s=e).getUndeliveredMemberCount)||void 0===i?void 0:i.call(s,t)))return Mc.DELIVERED}return"succeeded"===t.sendingStatus?Mc.SENT:Mc.NONE},Rc={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"]},Uc={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",MULTIPLE_FILES:"MULTIPLE_FILES",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},Lc={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",VOICE:"VOICE",OTHERS:"OTHERS"},kc={NONE:"none",SUCCEEDED:"succeeded",FAILED:"failed",PENDING:"pending"},Dc=e=>""===e||null===e,xc=e=>Rc.IMAGE.indexOf(e)>=0,Pc=e=>Rc.VIDEO.indexOf(e)>=0,Fc=e=>"image/gif"===e,Hc=e=>xc(e)||Pc(e),Gc=e=>Rc.AUDIO.indexOf(e)>=0,Bc=e=>Fc(e)?Lc.GIF:xc(e)?Lc.IMAGE:Pc(e)?Lc.VIDEO:Gc(e)?Lc.AUDIO:Lc.OTHERS,zc=e=>"succeeded"===e.sendingStatus,Vc=(e,t)=>jc(e,t)===Mc.READ,qc=e=>"failed"===(null==e?void 0:e.sendingStatus),Kc=e=>"pending"===(null==e?void 0:e.sendingStatus),Wc=e=>e&&(e.isUserMessage&&"function"==typeof e.isUserMessage?e.isUserMessage():"user"===(null==e?void 0:e.messageType)),Yc=e=>e&&(e.isFileMessage&&"function"==typeof e.isFileMessage?e.isFileMessage():"file"===(null==e?void 0:e.messageType)),Qc=e=>!!e.parentMessageId&&!!e.parentMessage,Xc=e=>{var t,n,r,a;return!!(e&&Wc(e)&&null!=e&&e.ogMetaData&&(null!==(t=e.ogMetaData)&&void 0!==t&&t.url||null!==(n=e.ogMetaData)&&void 0!==n&&n.title||null!==(r=e.ogMetaData)&&void 0!==r&&r.description||null!==(a=e.ogMetaData)&&void 0!==a&&a.defaultImage))},Zc=e=>Wc(e),$c=e=>e&&Yc(e)&&Hc(e.type),Jc=e=>e&&$c(e)&&xc(e.type),eu=e=>e&&$c(e)&&Pc(e.type),tu=e=>e&&$c(e)&&Fc(e.type),nu=e=>{var t,n,r,a;if(!e||!Yc(e)||!e.type)return!1;const[i,s]=e.type.split(";");if(!/^audio\//.test(i))return!1;if(s){const[e,t]=s.split("=");return"sbu_type"===e&&"voice"===t}return(e=>/^voice\//.test(e))(null!==(t=null==e||null===(n=e.metaArrays)||void 0===n||null===(r=n.find(e=>"KEY_INTERNAL_MESSAGE_TYPE"===e.key))||void 0===r||null===(a=r.value)||void 0===a?void 0:a[0])&&void 0!==t?t:"")},ru=e=>Wc(e)&&(null==e?void 0:e.updatedAt)>0,au=()=>s({},Uc),iu=e=>(e=>e&&(e.isAdminMessage&&"function"==typeof e.isAdminMessage?e.isAdminMessage():"admin"===(null==e?void 0:e.messageType)))(e)?Uc.ADMIN:Wc(e)?Xc(e)?Uc.OG:Uc.TEXT:Yc(e)?$c(e)?Uc.THUMBNAIL:nu(e)?Lc.VOICE:Uc.FILE:Uc.UNKNOWN,su=()=>s({},kc),ou=(e,t)=>Array.isArray(t)?[...e,...t]:(e.push(t),e),lu=e=>Array.isArray(e)?e.reduce(ou,[]).join(" "):e,cu=(e,t)=>t.userIds.some(t=>t===e),uu=(e,t,n,r)=>{let a="";return cu(t,e)&&(a=1===e.userIds.length?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),`${e.userIds.filter(e=>e!==t).map(e=>n.get(e)||r.TOOLTIP__UNKNOWN_USER).join(", ")}${a}`},du=/^((http|https):\/\/)?([a-z\d]+\.)+[a-z]{2,6}(\:[0-9]{1,5})?(\/[-a-zA-Z\d%_.~+&=]*)*(\?[;&a-zA-Z\d%_.~+=-]*)?(\#[-a-zA-Z\d_]*)?$/,hu=e=>du.test(e),fu=(e,t)=>{if(t||(t=40),null==e)return"";if(e.length<=t)return e;const n=t-"...".length,r=Math.ceil(n/2),a=Math.floor(n/2);return e.substr(0,r)+"..."+e.substr(e.length-a)},pu=e=>{if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return!1}finally{document.body.removeChild(t)}}return!1},mu=e=>{var t;return null==e||null===(t=e.emojiCategories)||void 0===t?void 0:t.map(e=>e.emojis).reduce((e,t)=>e.concat(t),[])},bu=e=>{return(null==e?void 0:e.sender)&&((null==(t=null==e?void 0:e.sender)?void 0:t.friendName)||(null==t?void 0:t.nickname)||(null==t?void 0:t.userId));var t},_u=e=>!!e&&!(!e.friendDiscoveryKey&&!e.friendName),gu=(e,t)=>{var n;const{customTypesFilter:r=[]}=e;if(null!=e&&e.messageTypeFilter&&e.messageTypeFilter!==t.messageType)return!1;if((null==r?void 0:r.length)>0){const e=r.filter(e=>"*"!==e);if(e.length>0&&!e.includes(t.customType))return!1}if(null!=e&&e.senderUserIdsFilter&&(null==e||null===(n=e.senderUserIdsFilter)||void 0===n?void 0:n.length)>0){var a,i;if(!(null!=t&&null!==(a=t.isUserMessage)&&void 0!==a&&a.call(t)||null!=t&&null!==(i=t.isFileMessage)&&void 0!==i&&i.call(t)))return!1;{var s;const n=t.sender||t._sender;if(null==e||null===(s=e.senderUserIdsFilter)||void 0===s||!s.includes(null==n?void 0:n.userId))return!1}}return!((null==e||!e.includeParentMessageInfo)&&(null!=t&&t.parentMessageId||null!=t&&t.parentMessage))},vu=(e,t,n)=>{var r,a,i,s;const{includeEmpty:o,includeFrozen:l,searchFilter:c,userIdsFilter:u,customTypesFilter:d,channelUrlsFilter:h,customTypeStartsWithFilter:f,channelNameContainsFilter:p,nicknameContainsFilter:m,myMemberStateFilter:b,hiddenChannelFilter:_,unreadChannelFilter:g,publicChannelFilter:v,superChannelFilter:E,metadataKey:y="",metadataValues:O=["a","b"],metadataValueStartsWith:C}=e;if(!o&&null===(null==t?void 0:t.lastMessage))return!1;if(null!=c&&c.query&&(null!==(r=null==c||null===(a=c.fields)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>0){const e=c.query,n=c.fields;if(e&&n&&n.length>0&&!n.some(n=>{switch(n){case"channel_name":var r;return null==t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase());case"member_nickname":var a;return null==t||null===(a=t.members)||void 0===a?void 0:a.some(t=>t.nickname.toLowerCase().includes(e.toLowerCase()));default:return!0}}))return!1}if((null==u||null===(i=u.userIds)||void 0===i?void 0:i.length)>0){var N;const{includeMode:e,queryType:r}=u,a=u.userIds,i=null==t||null===(N=t.members)||void 0===N?void 0:N.map(e=>e.userId);if(e){if(a.length>0)switch(r){case"AND":if(a.some(e=>!i.includes(e)))return!1;break;case"OR":if(a.every(e=>!i.includes(e)))return!1}}else{var T;if(a.includes(n)||a.push(n),(null==t||null===(T=t.members)||void 0===T?void 0:T.length)>a.length)return!1;if(!((e,t)=>{if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();for(let e=0;e<n.length;++e)if(n[e]!==r[e])return!1;return!0})(a,i))return!1}}if(!1===o&&null===(null==t?void 0:t.lastMessage))return!1;if(!1===l&&!0===(null==t?void 0:t.isFrozen))return!1;if(d&&!d.includes(null==t?void 0:t.customType))return!1;if(f&&!new RegExp("^"+f).test(null==t?void 0:t.customType))return!1;if(p&&(null==t||null===(s=t.name)||void 0===s||!s.toLowerCase().includes(p.toLowerCase())))return!1;if(m){var S;const e=m.toLowerCase();if(null!=t&&null!==(S=t.members)&&void 0!==S&&S.every(t=>!t.nickname.toLowerCase().includes(e)))return!1}if(h&&!h.includes(null==t?void 0:t.url))return!1;if(b)switch(b){case"joined_only":if("joined"!==(null==t?void 0:t.myMemberState))return!1;break;case"invited_only":if("invited"!==(null==t?void 0:t.myMemberState))return!1;break;case"invited_by_friend":if("invited"!==(null==t?void 0:t.myMemberState)||!_u(null==t?void 0:t.inviter))return!1;break;case"invited_by_non_friend":if("invited"!==(null==t?void 0:t.myMemberState)||_u(null==t?void 0:t.inviter))return!1}if(_)switch(_){case"unhidden_only":if(null!=t&&t.isHidden||"unhidden"!==(null==t?void 0:t.hiddenState))return!1;break;case"hidden_only":if(null==t||!t.isHidden)return!1;break;case"hidden_allow_auto_unhide":if(null==t||!t.isHidden||"hidden_allow_auto_unhide"!==(null==t?void 0:t.hiddenState))return!1;break;case"hidden_prevent_auto_unhide":if(null==t||!t.isHidden||"hidden_prevent_auto_unhide"!==(null==t?void 0:t.hiddenState))return!1}if(g)switch(g){case"unread_message":if(0===(null==t?void 0:t.unreadMessageCount))return!1}if(v)switch(v){case"public":if(null==t||!t.isPublic)return!1;break;case"private":if(null!=t&&t.isPublic)return!1}if(E)switch(E){case"super":if(null==t||!t.isSuper)return!1;break;case"nonsuper":if(null!=t&&t.isSuper)return!1}const{cachedMetaData:I={}}=t;if(y&&(O||C)){const e=I[y];if(!e)return!1;if(O&&!O.every(t=>e.includes(t)))return!1;if(C&&!e.startsWith(C))return!1}return!0},Eu=(e,t)=>{const n=Math.floor(e.length/2);if(e[n]===t)return n;const r=e.slice(0,n),a=e.slice(n+1,e.length);return e[n]>t?n+1+(0===a.length?0:Eu(a,t)):0===r.length?n:Eu(r,t)},yu=(e,t)=>{var n;if(e.some(e=>e.url===(null==t?void 0:t.url)))return e.map(e=>e.url===(null==t?void 0:t.url)?t:e);const r=Eu(e.map(e=>{var t;return(null==e||null===(t=e.lastMessage)||void 0===t?void 0:t.createdAt)||(null==e?void 0:e.createdAt)}),(null==t||null===(n=t.lastMessage)||void 0===n?void 0:n.createdAt)||(null==t?void 0:t.createdAt));return[...e.slice(0,r),t,...e.slice(r,e.length)]};const Ou="reactions",Cu="message_search_v3",Nu="enable_og_tag";const Tu={common:{enableUsingDefaultUserProfile:!1},groupChannel:{channel:{enableMention:!1,enableOgtag:!0,enableReactions:!0,enableTypingIndicator:!0,enableVoiceMessage:!1,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}},replyType:"quote_reply",threadReplySelectType:"thread"},channelList:{enableMessageReceiptStatus:!1,enableTypingIndicator:!1},setting:{enableMessageSearch:!1}},openChannel:{channel:{enableOgtag:!0,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}}}}};function Su(e,t){const n=Object.assign({},t);return Object.keys(e).forEach(t=>{var r,a;Object.prototype.hasOwnProperty.call(n,t)&&(r=e[t],a=n[t],Object.prototype.toString.call(r)===Object.prototype.toString.call(a))&&("object"==typeof e[t]?n[t]=Su(e[t],n[t]):n[t]=e[t])}),n}var Iu=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};const Au={items:{},getItem(e){var t;return Iu(this,void 0,void 0,(function*(){return null!==(t=Au.items[e])&&void 0!==t?t:null}))},setItem(e,t){return Iu(this,void 0,void 0,(function*(){Au.items[e]=t}))}};class wu{constructor(e){this.storage=null!=e?e:Au}init(e){return this.key=`sbu@${e}.uikitConfiguration`,this.get()}get safeKey(){if(!this.key)throw new Error("Please UIKitConfigManager.init() first");return this.key}update(e){return Iu(this,void 0,void 0,(function*(){const t=yield this.get(),n={updatedAt:e.updatedAt,configuration:Su(e.configuration,t.configuration)};return yield this.storage.setItem(this.safeKey,JSON.stringify(n)),n}))}get(){return Iu(this,void 0,void 0,(function*(){const e={updatedAt:0,configuration:Tu};try{const t=yield this.storage.getItem(this.safeKey);return t?JSON.parse(t):e}catch(t){return e}}))}}var Mu=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};function ju(e){var t,n;return null!==(n=null===(t=e.appInfo)||void 0===t?void 0:t.applicationAttributes)&&void 0!==n?n:[]}const Ru=Object(r.createContext)({initDashboardConfigs:()=>Promise.resolve(),configs:Tu,configsWithAppAttr:()=>Tu}),Uu=({storage:e,children:t,localConfigs:n={}})=>{const[i,s]=Object(r.useState)(Tu),[o]=Object(r.useState)(()=>new wu(e)),l=Object(r.useCallback)(e=>Mu(void 0,void 0,void 0,(function*(){const t=yield o.init(e.appId);if(e.appInfo&&e.appInfo.uikitConfigInfo.lastUpdatedAt===t.updatedAt)s(t.configuration);else try{const t=yield e.getUIKitConfiguration();if("object"==typeof(n=t.json)&&"configuration"in n&&"updated_at"in n){const e=function e(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return t.map(t=>e(t));const n={};return Object.keys(t).forEach(r=>{const a=r.replace(/_\w/g,e=>e[1].toUpperCase());n[a]=e(t[r])}),n}(t.json),n=yield o.update(e);s(n.configuration)}}catch(e){s(t.configuration)}var n})),[o]),c=Su(n,i),u=function(e){const t=Object(r.useRef)(e);return Object(r.useEffect)(()=>{t.current=e}),Object(r.useCallback)((...e)=>t.current(...e),[t])}(e=>({groupChannel:{channel:{get enableReactions(){return c.groupChannel.channel.enableReactions&&ju(e).includes(Ou)},get enableOgtag(){return c.groupChannel.channel.enableOgtag&&ju(e).includes(Nu)}},setting:{get enableMessageSearch(){return c.groupChannel.setting.enableMessageSearch&&ju(e).includes(Cu)}}},openChannel:{channel:{get enableOgtag(){return c.openChannel.channel.enableOgtag&&ju(e).includes(Nu)}}}}));return a.a.createElement(Ru.Provider,{value:{initDashboardConfigs:l,configs:c,configsWithAppAttr:u}},t)};var Lu=n(3);function ku(){return Object(r.useContext)(c)}const Du={IDLE:"IDLE",PREPARING:"PREPARING",PLAYING:"PLAYING",PAUSED:"PAUSED",COMPLETED:"COMPLETED"},xu=()=>({audioFile:null,playbackTime:0,duration:1e3,playingStatus:Du.IDLE}),Pu={currentPlayer:null,currentGroupKey:"",audioStorage:{}};function Fu(e,t){switch(t.type){case"INITIALIZE_AUDIO_UNIT":{var n;const{groupKey:r}=t.payload,a=null!==(n=e.audioStorage)&&void 0!==n&&n[r]?e.audioStorage[r]:xu();return a.playingStatus=Du.PREPARING,s(s({},e),{},{audioStorage:s(s({},e.audioStorage),{},{[r]:a})})}case"SET_CURRENT_PLAYER":{const{audioPlayer:n,groupKey:r}=t.payload;return s(s({},e),{},{currentPlayer:n,currentGroupKey:r})}case"ON_VOICE_PLAYER_PLAY":{var r;const{groupKey:n,audioFile:a}=t.payload,i=null!==(r=e.audioStorage)&&void 0!==r&&r[n]?e.audioStorage[n]:xu();return i.audioFile=a,i.playingStatus=Du.PLAYING,s(s({},e),{},{audioStorage:s(s({},e.audioStorage),{},{[n]:i})})}case"ON_VOICE_PLAYER_PAUSE":{var a;const{groupKey:n}=t.payload,r=null!==(a=e.audioStorage)&&void 0!==a&&a[n]?e.audioStorage[n]:xu();r.playingStatus=Du.PAUSED;const{currentTime:i,duration:o}=e.currentPlayer;return r.playbackTime===r.duration?r.playbackTime=0:i>0&&o>0&&(r.playbackTime=i,r.duration=o),s(s({},e),{},{audioStorage:s(s({},e.audioStorage),{},{[n]:r})})}case"ON_CURRENT_TIME_UPDATE":{var i;const{groupKey:n}=t.payload,{currentTime:r,duration:a}=e.currentPlayer,o=null!==(i=e.audioStorage)&&void 0!==i&&i[n]?e.audioStorage[n]:xu();return r>0&&a>0&&(o.playbackTime=r,o.duration=a),s(s({},e),{},{audioStorage:s(s({},e.audioStorage),{},{[n]:o})})}default:return e}}const Hu=()=>{},Gu=Object(r.createContext)({play:Hu,pause:Hu,stop:Hu,voicePlayerStore:{currentGroupKey:"",currentPlayer:null,audioStorage:{}}}),Bu=e=>{let{children:t}=e;const[n,i]=Object(r.useReducer)(Fu,Pu),{currentGroupKey:s,currentPlayer:o,audioStorage:l}=n,{config:c}=ku(),{logger:u}=c,d=e=>{s===e&&null!==o&&(u.info("VoicePlayer: Pause playing(by group key)."),null==o||o.pause()),"ALL"===e&&(u.info("VoicePlayer: Pause playing(all)."),null==o||o.pause())};return a.a.createElement(Gu.Provider,{value:{play:e=>{let{groupKey:t,audioFile:n=null,audioFileUrl:r=""}=e;t!==s&&d(s);const a=document.getElementById(Lu.k),o=document.getElementById(Lu.l);o&&a.removeChild(o),u.info("VoicePlayer: Start getting audio file."),new Promise(e=>{var a;if(i({type:"INITIALIZE_AUDIO_UNIT",payload:{groupKey:t}}),n)return u.info("VoicePlayer: Use the audioFile instance."),void e(n);const s=null==l||null===(a=l[t])||void 0===a?void 0:a.audioFile;if(s)return u.info("VoicePlayer: Get from the audioStorage."),void e(s);fetch(r).then(e=>e.blob()).then(t=>{const n=new File([t],Lu.g,{lastModified:(new Date).getTime(),type:Lu.h});e(n),u.info("VoicePlayer: Get the audioFile from URL.")})}).then(e=>{var n,r;const a=document.getElementById(Lu.k);u.info("VoicePlayer: Succeeded getting audio file.",{audioFile:e});const s=l[t]||xu(),o=new Audio(null===(n=URL)||void 0===n||null===(r=n.createObjectURL)||void 0===r?void 0:r.call(n,e));o.id=Lu.l,o.currentTime=s.playbackTime,o.volume=1,o.loop=!1,o.onplaying=()=>{u.info("VoicePlayer: OnPlaying event is called from audioPlayer",{groupKey:t,audioPlayer:o}),i({type:"ON_VOICE_PLAYER_PLAY",payload:{groupKey:t,audioFile:e}})},o.onpause=()=>{u.info("VoicePlayer: OnPause event is called from audioPlayer",{groupKey:t,audioPlayer:o}),i({type:"ON_VOICE_PLAYER_PAUSE",payload:{groupKey:t}})},o.ontimeupdate=()=>{i({type:"ON_CURRENT_TIME_UPDATE",payload:{groupKey:t}})},o.dataset.sbGroupId=t;try{null==a||a.childNodes.forEach(e=>{var n;const r=e;var s;(null===(n=r.dataset)||void 0===n?void 0:n.sbGroupKey)!==t&&(null==r||null===(s=r.pause)||void 0===s||s.call(r),i({type:"ON_VOICE_PLAYER_PAUSE",payload:{groupKey:t}}),a.removeChild(r),u.info("VoicePlayer: Removed other player.",{element:r}))})}finally{null==o||o.play(),null==a||a.appendChild(o),i({type:"SET_CURRENT_PLAYER",payload:{groupKey:t,audioPlayer:o}}),u.info("VoicePlayer: Succeeded playing audio player.",{groupKey:t,audioPlayer:o})}})},pause:d,stop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s.includes(e)&&(u.info("VoicePlayer: Pause playing(by text)."),d(s))},voicePlayerStore:n}},a.a.createElement("div",{id:Lu.k,style:{display:"none"}}),t)},zu=()=>Object(r.useContext)(Gu),Vu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";const t={en:{MESSAGE_STATUS__YESTERDAY:"Yesterday",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message(s) since",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_PREVIEW_MOBILE_LEAVE:"Leave channel",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__MEMBERS__SELECT_TITLE:"Select members",CHANNEL_SETTING__MEMBERS__OPERATOR:"Operator",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__OPERATORS__ADD_BUTTON:"Add",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL:"All muted members",CHANNEL_SETTING__NO_UNMUTED:"No muted members yet",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned users",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",CHANNEL_SETTING__MODERATION__MUTE:"Mute",CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",CHANNEL_SETTING__MODERATION__BAN:"Ban",CHANNEL_SETTING__MODERATION__UNBAN:"Unban",CHANNEL_SETTING__MODERATION__EMPTY_BAN:"No banned members yet",CHANNEL_SETTING__MODERATION__ALL_BAN:"All banned members",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS:"Select participants",OPEN_CHANNEL_LIST__TITLE:"Channels",CREATE_OPEN_CHANNEL_LIST__TITLE:"New channel profile",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION:"Channel image",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD:"Upload",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION:"Channel name",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER:"Enter channel name",CREATE_OPEN_CHANNEL_LIST__SUBMIT:"Create",OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete channel?",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT:"Once deleted, this channel can't be restored.",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE:"Operators",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD:"Add operator",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL:"All operators",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE:"Muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL:"All muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE:"No muted participants yet",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE:"Banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL:"All banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE:"No banned users yet",OPEN_CHANNEL_SETTINGS__MEMBERS__YOU:" (You)",OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR:"Operator",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",OPEN_CHANNEL_SETTING__MODERATION__MUTE:"Mute",OPEN_CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",OPEN_CHANNEL_SETTING__MODERATION__BAN:"Ban",OPEN_CHANNEL_SETTING__MODERATION__UNBAN:"Unban",TRYING_TO_CONNECT:"Trying to connect",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",MESSAGE_EDITED:"(edited)",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTED:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",MODAL__LEAVE_CHANNEL__TITLE:"Leave this channel?",MODAL__LEAVE_CHANNEL__FOOTER:"Leave",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:"You're muted by the operator.",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN:"Channel is frozen.",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you're muted",MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:"You're muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BUTTON__OK:"OK",BADGE__OVER:"+",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__THREAD:"Reply in thread",MESSAGE_MENU__OPEN_IN_CHANNEL:"Open in channel",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",MESSAGE_MENU__SAVE:"Save",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete",CONTEXT_MENU_DROPDOWN__SAVE:"Save",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",QUOTED_MESSAGE__UNAVAILABLE:"Message unavailable",THREAD__HEADER_TITLE:"Thread",CHANNEL__THREAD_REPLY:"reply",CHANNEL__THREAD_REPLIES:"replies",CHANNEL__THREAD_OVER_MAX:"99+",THREAD__THREAD_REPLY:"reply",THREAD__THREAD_REPLIES:"replies",THREAD__INPUT__REPLY_TO_THREAD:"Reply to thread",THREAD__INPUT__REPLY_IN_THREAD:"Reply in thread",MENTION_NAME__NO_NAME:"(No name)",MENTION_COUNT__OVER_LIMIT:"You can mention up to %d times at a time.",UI__FILE_VIEWER__UNSUPPORT:"Unsupported message",VOICE_RECORDING_PERMISSION_DENIED:"You cannot record the voice since\n        voice recording is not permitted in your device system setting",VOICE_MESSAGE:"Voice Message"}};return t[e]};var qu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Ku(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Wu={date:Ku({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Ku({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Ku({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Yu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Qu(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=null!=n&&n.width?String(n.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{var s=e.defaultWidth,o=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Xu(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var s,o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?$u(l,(function(e){return e.test(o)})):Zu(l,(function(e){return e.test(o)}));s=e.valueCallback?e.valueCallback(c):c,s=n.valueCallback?n.valueCallback(s):s;var u=t.slice(o.length);return{value:s,rest:u}}}function Zu(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function $u(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var Ju,ed={code:"en-US",formatDistance:function(e,t,n){var r,a=qu[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Wu,formatRelative:function(e,t,n,r){return Yu[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Qu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Qu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Qu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Qu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Ju={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(Ju.matchPattern);if(!n)return null;var r=n[0],a=e.match(Ju.parsePattern);if(!a)return null;var i=Ju.valueCallback?Ju.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;var s=e.slice(r.length);return{value:i,rest:s}}),era:Xu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Xu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Xu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Xu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Xu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};const td=a.a.createContext({stringSet:Vu("en"),dateLocale:ed}),nd=e=>{const{children:t}=e;return a.a.createElement(td.Provider,{value:e},t)},rd=()=>a.a.useContext(td);var ad=n(4);const id="sendbird-modal-root";var sd=n(2),od=n.n(sd);const ld={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},cd={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function ud(e){switch(e){case ld.H_1:return"sendbird-label--h-1";case ld.H_2:return"sendbird-label--h-2";case ld.SUBTITLE_1:return"sendbird-label--subtitle-1";case ld.SUBTITLE_2:return"sendbird-label--subtitle-2";case ld.BODY_1:return"sendbird-label--body-1";case ld.BODY_2:return"sendbird-label--body-2";case ld.BUTTON_1:return"sendbird-label--button-1";case ld.BUTTON_2:return"sendbird-label--button-2";case ld.CAPTION_1:return"sendbird-label--caption-1";case ld.CAPTION_2:return"sendbird-label--caption-2";case ld.CAPTION_3:return"sendbird-label--caption-3";default:return""}}function dd(e){switch(e){case cd.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case cd.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case cd.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case cd.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case cd.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case cd.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case cd.PRIMARY:return"sendbird-label--color-primary";case cd.ERROR:return"sendbird-label--color-error";case cd.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return""}}function hd(e){let{className:t,type:n,color:r,children:i}=e;return a.a.createElement("span",{className:[...Array.isArray(t)?t:[t],"sendbird-label",n?ud(n):"",r?dd(r):""].join(" ")},i)}hd.propTypes={className:od.a.oneOfType([od.a.string,od.a.arrayOf(od.a.string)]),type:od.a.string,color:od.a.string,children:od.a.oneOfType([od.a.string,od.a.number,od.a.element,od.a.any])},hd.defaultProps={className:[],type:"",color:"",children:null};const fd=ld,pd=cd,md=Vu("en");let bd=function(e){return e.PRIMARY="PRIMARY",e.SECONDARY="SECONDARY",e.DANGER="DANGER",e.DISABLED="DISABLED",e}({}),_d=function(e){return e.BIG="BIG",e.SMALL="SMALL",e}({});function gd(e){switch(e){case bd.PRIMARY:return"sendbird-button--primary";case bd.SECONDARY:return"sendbird-button--secondary";case bd.DANGER:return"sendbird-button--danger";case bd.DISABLED:return"sendbird-button--disabled";default:return null}}function vd(e){switch(e){case _d.BIG:return"sendbird-button--big";case _d.SMALL:return"sendbird-button--small";default:return null}}const Ed=bd,yd=_d;function Od(e){let{className:t,type:n=Ed.PRIMARY,size:r=yd.BIG,children:i="Button",disabled:s=!1,onClick:o=(()=>{})}=e;const l=[...Array.isArray(t)?t:[t],"sendbird-button",s?"sendbird-button__disabled":"",gd(n),vd(r)].join(" ");return a.a.createElement("button",{className:l,type:"button",onClick:o,disabled:s},a.a.createElement(hd,{className:"sendbird-button__text",type:fd.BUTTON_1,color:pd.ONCONTENT_1},i))}const Cd={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",AUDIO_ON_LINED:"AUDIO_ON_LINED",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SLIDE_LEFT:"SLIDE_LEFT",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THREAD:"THREAD",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER"},Nd={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",PRIMARY_2:"PRIMARY_2",SECONDARY:"SECONDARY",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",WHITE:"WHITE",GRAY:"GRAY",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",ON_BACKGROUND_4:"ON_BACKGROUND_4",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function Td(e){switch(e){case Nd.PRIMARY:return"sendbird-icon-color--primary";case Nd.PRIMARY_2:return"sendbird-icon-color--primary-2";case Nd.SECONDARY:return"sendbird-icon-color--secondary";case Nd.CONTENT:return"sendbird-icon-color--content";case Nd.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case Nd.WHITE:return"sendbird-icon-color--white";case Nd.GRAY:return"sendbird-icon-color--gray";case Nd.SENT:return"sendbird-icon-color--sent";case Nd.READ:return"sendbird-icon-color--read";case Nd.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case Nd.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case Nd.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case Nd.ON_BACKGROUND_4:return"sendbird-icon-color--on-background-4";case Nd.BACKGROUND_3:return"sendbird-icon-color--background-3";case Nd.ERROR:return"sendbird-icon-color--error";default:return""}}function Sd(e){switch(e){case Cd.ADD:return"sendbird-icon-add";case Cd.ARROW_LEFT:return"sendbird-icon-arrow-left";case Cd.ATTACH:return"sendbird-icon-attach";case Cd.AUDIO_ON_LINED:return"sendbird-icon-audio-on-lined";case Cd.BAN:return"sendbird-icon-ban";case Cd.BROADCAST:return"sendbird-icon-broadcast";case Cd.CAMERA:return"sendbird-icon-camera";case Cd.CHANNELS:return"sendbird-icon-channels";case Cd.CHAT:return"sendbird-icon-chat";case Cd.CHAT_FILLED:return"sendbird-icon-chat-filled";case Cd.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case Cd.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case Cd.CLOSE:return"sendbird-icon-close";case Cd.COLLAPSE:return"sendbird-icon-collapse";case Cd.COPY:return"sendbird-icon-copy";case Cd.CREATE:return"sendbird-icon-create";case Cd.DELETE:return"sendbird-icon-delete";case Cd.DISCONNECTED:return"sendbird-icon-disconnected";case Cd.DOCUMENT:return"sendbird-icon-document";case Cd.DONE:return"sendbird-icon-done";case Cd.DONE_ALL:return"sendbird-icon-done-all";case Cd.DOWNLOAD:return"sendbird-icon-down-load";case Cd.EDIT:return"sendbird-icon-edit";case Cd.EMOJI_MORE:return"sendbird-icon-emoji-more";case Cd.ERROR:return"sendbird-icon-error";case Cd.EXPAND:return"sendbird-icon-expand";case Cd.FILE_AUDIO:return"sendbird-icon-file-audio";case Cd.FILE_DOCUMENT:return"sendbird-icon-file-document";case Cd.FREEZE:return"sendbird-icon-freeze";case Cd.GIF:return"sendbird-icon-gif";case Cd.INFO:return"sendbird-icon-info";case Cd.LEAVE:return"sendbird-icon-leave";case Cd.MEMBERS:return"sendbird-icon-members";case Cd.MESSAGE:return"sendbird-icon-message";case Cd.MODERATIONS:return"sendbird-icon-moderations";case Cd.MORE:return"sendbird-icon-more";case Cd.MUTE:return"sendbird-icon-mute";case Cd.NOTIFICATIONS:return"sendbird-icon-notifications";case Cd.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case Cd.OPERATOR:return"sendbird-icon-operator";case Cd.PHOTO:return"sendbird-icon-photo";case Cd.PLAY:return"sendbird-icon-play";case Cd.PLUS:return"sendbird-iconn-plus";case Cd.QUESTION:return"sendbird-icon-question";case Cd.REFRESH:return"sendbird-icon-refresh";case Cd.REMOVE:return"sendbird-icon-remove";case Cd.REPLY:return"sendbird-icon-reply";case Cd.SEARCH:return"sendbird-icon-search";case Cd.SEND:return"sendbird-icon-send";case Cd.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case Cd.SPINNER:return"sendbird-icon-spinner";case Cd.SUPERGROUP:return"sendbird-icon-supergroup";case Cd.THREAD:return"sendbird-icon-thread";case Cd.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case Cd.TOGGLE_OFF:return"sendbird-icon-toggle-off";case Cd.TOGGLE_ON:return"sendbird-icon-toggle-on";case Cd.USER:return"sendbird-icon-user";default:return"sendbird-icon-unknown"}}var Id,Ad,wd,Md,jd,Rd,Ud,Ld,kd,Dd,xd,Pd,Fd,Hd,Gd,Bd,zd,Vd,qd,Kd,Wd,Yd,Qd,Xd,Zd,$d,Jd,eh,th,nh,rh,ah,ih,sh,oh,lh,ch,uh,dh,hh,fh,ph,mh,bh,_h,gh,vh,Eh,yh,Oh,Ch,Nh,Th,Sh,Ih,Ah,wh,Mh,jh,Rh;function Uh(){return(Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lh(e){return r.createElement("svg",Uh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Id||(Id=r.createElement("path",{className:"icon-add_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm0 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334a2.667 2.667 0 002.666 2.666h37.334a2.667 2.667 0 002.666-2.666V13.333a2.667 2.667 0 00-2.666-2.666zm-18.667 8a2.667 2.667 0 012.649 2.355l.018.311v8h8a2.667 2.667 0 01.311 5.316l-.311.018h-8v8a2.667 2.667 0 01-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 01-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0132 18.667z",fill:"#000",fillRule:"evenodd"})))}function kh(){return(kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dh(e){return r.createElement("svg",kh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ad||(Ad=r.createElement("path",{className:"icon-arrow-left_svg__fill",d:"M33.886 8.781a2.668 2.668 0 01.221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 01.311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 01.222 3.52l-.221.251a2.668 2.668 0 01-3.52.222l-.252-.222L8.781 33.886a2.668 2.668 0 01-.222-3.52l.222-.252L30.114 8.781a2.668 2.668 0 013.772 0z",fill:"#000",fillRule:"evenodd"})))}function xh(){return(xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ph(e){return r.createElement("svg",xh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),wd||(wd=r.createElement("path",{className:"icon-attach_svg__fill",d:"M55.334 28.926l-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 00-3.676-3.864L15.709 37.89a7.578 7.578 0 00-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 10-3.678-3.862z",fill:"#000",fillRule:"evenodd"})))}function Fh(){return(Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Hh(e){return r.createElement("svg",Fh({viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Md||(Md=r.createElement("g",{clipPath:"url(#icon-audio-on-lined_svg__clip0_1_7)"},r.createElement("path",{className:"icon-audio-on-lined_svg__fill",clipRule:"evenodd",d:"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0zm-5.333 10.667a5.333 5.333 0 0110.666 0V32a5.333 5.333 0 01-10.666 0V10.667z"}),r.createElement("path",{className:"icon-audio-on-lined_svg__fill",d:"M16 26.667a2.667 2.667 0 10-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 000 5.333h21.334a2.667 2.667 0 100-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 10-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16v-5.333z"}))),jd||(jd=r.createElement("defs",null,r.createElement("clipPath",{id:"icon-audio-on-lined_svg__clip0_1_7"},r.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))))}function Gh(){return(Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bh(e){return r.createElement("svg",Gh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Rd||(Rd=r.createElement("path",{className:"icon-ban_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm12.333 21.333a1 1 0 011 1v3.334a1 1 0 01-1 1H19.667a1 1 0 01-1-1v-3.334a1 1 0 011-1h24.666z",fill:"#000",fillRule:"evenodd"})))}function zh(){return(zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vh(e){return r.createElement("svg",zh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ud||(Ud=r.createElement("path",{className:"icon-broadcast_svg__fill",d:"M58.545 5.498c.08.258.122.526.122.796v46.079a2.666 2.666 0 01-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 01-7.997-7.75l-.003-.25V24a8 8 0 018-8H16L55.205 3.749a2.665 2.665 0 013.34 1.75zM21.333 44.587V48a5.333 5.333 0 0010.652.398L32 47.92l-10.667-3.333zm32-34.667l-32 9.997v18.83l32 9.997V9.92zM16 21.333h-5.333a2.67 2.67 0 00-2.65 2.356L8 24v10.667a2.667 2.667 0 002.667 2.666H16v-16z",fill:"#000",fillRule:"evenodd"})))}function qh(){return(qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kh(e){return r.createElement("svg",qh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ld||(Ld=r.createElement("path",{className:"icon-camera_svg__fill",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 017.986 7.53l.014.47v29.334a8 8 0 01-8 8H8a8 8 0 01-8-8V21.333a8 8 0 018-8h9.237l4.544-6.812a2.665 2.665 0 011.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 01-1.887 1.167l-.331.02H8a2.668 2.668 0 00-2.667 2.667v29.334A2.667 2.667 0 008 53.333h48a2.667 2.667 0 002.667-2.666V21.333A2.667 2.667 0 0056 18.667H45.333a2.665 2.665 0 01-2.218-1.188l-4.544-6.812zM32 21.333c7.364 0 13.333 5.97 13.333 13.334C45.333 42.03 39.363 48 32 48c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Wh(){return(Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yh(e){return r.createElement("svg",Wh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),kd||(kd=r.createElement("path",{className:"icon-channels_svg__fill",d:"M42.65 5.333l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 01.311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 01.312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 01-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 01-.311-5.315l.31-.018h11.835l1.515-13.627a2.668 2.668 0 012.634-2.373l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.668 2.668 0 012.634-2.373zm-5.927 32l1.186-10.667H27.272l-1.184 10.667h10.635z",fill:"#000",fillRule:"evenodd"})))}function Qh(){return(Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xh(e){return r.createElement("svg",Qh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Dd||(Dd=r.createElement("path",{className:"icon-chat_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8z",fill:"#000",fillRule:"evenodd"})))}function Zh(){return(Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $h(e){return r.createElement("svg",Zh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),xd||(xd=r.createElement("path",{className:"icon-chat-filled_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667z",fill:"#000",fillRule:"evenodd"})))}function Jh(){return(Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ef(e){return r.createElement("svg",Jh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Pd||(Pd=r.createElement("path",{className:"icon-chevron-down_svg__fill",d:"M16.121 21.879a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18 18a2.998 2.998 0 004.242 0l18-18a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L32 37.757 16.121 21.88z",fill:"#000",fillRule:"evenodd"})))}function tf(){return(tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nf(e){return r.createElement("svg",tf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Fd||(Fd=r.createElement("path",{className:"icon-chevron-right_svg__fill",d:"M22.114 46.114a2.668 2.668 0 003.772 3.772l16-16a2.668 2.668 0 000-3.772l-16-16a2.668 2.668 0 00-3.772 3.772L36.23 32 22.114 46.114z",fill:"#000",fillRule:"evenodd"})))}function rf(){return(rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function af(e){return r.createElement("svg",rf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Hd||(Hd=r.createElement("path",{className:"icon-close_svg__fill",d:"M52.552 11.448a2.666 2.666 0 01.222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 010 3.771 2.666 2.666 0 01-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 01-3.771 0 2.666 2.666 0 01-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function sf(){return(sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function of(e){return r.createElement("svg",sf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Gd||(Gd=r.createElement("path",{className:"icon-collapse_svg__fill",d:"M16 8a2.667 2.667 0 00-2.649 2.356l-.018.31v42.667a2.667 2.667 0 005.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.668 2.668 0 00-.221 3.52l.221.251a2.666 2.666 0 003.52.222l.252-.222 10.666-10.666a2.666 2.666 0 00.222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 00-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0016 8z",fill:"#000",fillRule:"evenodd"})))}function lf(){return(lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cf(e){return r.createElement("svg",lf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Bd||(Bd=r.createElement("path",{className:"icon-copy_svg__fill",d:"M53.333 21.333a8 8 0 018 8v24a8 8 0 01-8 8h-24a8 8 0 01-8-8v-24a8 8 0 018-8zm0 5.334h-24a2.667 2.667 0 00-2.666 2.666v24A2.667 2.667 0 0029.333 56h24A2.667 2.667 0 0056 53.333v-24a2.667 2.667 0 00-2.667-2.666zm-18.666-24a8 8 0 017.986 7.53l.014.47v2.666a2.667 2.667 0 01-5.316.311l-.018-.31v-2.667a2.67 2.67 0 00-2.355-2.65L34.667 8h-24a2.67 2.67 0 00-2.65 2.356l-.017.31v24a2.67 2.67 0 002.356 2.65l.31.017h2.667a2.667 2.667 0 01.311 5.316l-.31.018h-2.667a8.001 8.001 0 01-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013h24z",fill:"#000",fillRule:"evenodd"})))}function uf(){return(uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function df(e){return r.createElement("svg",uf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),zd||(zd=r.createElement("path",{className:"icon-create_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zm2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0z",fill:"#000",fillRule:"evenodd"})))}function hf(){return(hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ff(e){return r.createElement("svg",hf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Vd||(Vd=r.createElement("path",{className:"icon-delete_svg__fill",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 01.311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 01-.311-5.316L8 13.333h10.666v-2.666a8.002 8.002 0 017.53-7.987l.47-.013h10.667zm10.666 16H16v34.666a2.67 2.67 0 002.356 2.65l.31.017h26.667a2.67 2.67 0 002.65-2.356l.017-.31V18.666zm-21.332 8a2.667 2.667 0 012.648 2.355l.018.311v16a2.667 2.667 0 01-5.316.311l-.017-.31v-16a2.667 2.667 0 012.667-2.667zm10.666 0a2.67 2.67 0 012.65 2.355l.017.311v16a2.667 2.667 0 01-5.315.311l-.018-.31v-16a2.667 2.667 0 012.666-2.667zm0-18.667H26.667a2.67 2.67 0 00-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 00-2.356-2.65L37.334 8z",fill:"#000",fillRule:"evenodd"})))}function pf(){return(pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mf(e){return r.createElement("svg",pf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),qd||(qd=r.createElement("path",{className:"icon-disconnected_svg__fill",d:"M54.534 6.069l-.248.217-9.736 9.735-.04.04-9.573 9.573c-.15.118-.286.254-.405.404L6.286 54.286a2.423 2.423 0 003.18 3.645l.248-.217 13.374-13.373a2.419 2.419 0 001.88-.401 12.119 12.119 0 0114.04 0 2.424 2.424 0 102.808-3.952 16.951 16.951 0 00-11.303-3.072l6.743-6.744a24.105 24.105 0 0110.159 5.021 2.424 2.424 0 003.11-3.719 28.945 28.945 0 00-9.34-5.23l5.633-5.634a36.153 36.153 0 019.225 5.934 2.425 2.425 0 003.211-3.633 40.972 40.972 0 00-8.796-5.941l7.256-7.256a2.423 2.423 0 00-3.18-3.645zm-35.04 21.474a28.936 28.936 0 00-6.032 3.942 2.424 2.424 0 003.137 3.697 24.018 24.018 0 015.022-3.282 2.425 2.425 0 00-2.127-4.357zM4.748 22.909a2.424 2.424 0 003.207 3.636 36.363 36.363 0 0126.978-8.977 2.424 2.424 0 00.389-4.832A41.204 41.204 0 004.748 22.909z",fill:"#000",fillRule:"evenodd"})))}function bf(){return(bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _f(e){return r.createElement("svg",bf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Kd||(Kd=r.createElement("path",{className:"icon-document_svg__fill",d:"M37.333 2.667a3.305 3.305 0 01.274.014l.085.01.058.008c.047.007.094.016.141.026l.029.007c.05.01.098.023.146.037l.034.01c.237.07.46.173.663.303l.034.022c.036.023.07.047.104.072l.057.043a2.646 2.646 0 01.261.228l-.126-.117c.05.043.097.088.143.135L55.21 19.438c.047.046.091.094.134.143l.035.04c.026.032.052.063.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048c.009.043.017.086.024.13l.006.048.007.051.004.041c.01.09.014.18.014.27v32a8 8 0 01-8 8H16a8 8 0 01-8-8V10.667a8 8 0 018-8h21.333zM34.666 8H16a2.667 2.667 0 00-2.667 2.667v42.666A2.667 2.667 0 0016 56h32a2.667 2.667 0 002.667-2.667L50.666 24H37.333a2.667 2.667 0 01-2.648-2.356l-.018-.31L34.666 8zm12.227 10.667l-6.894-6.894.001 6.894h6.893z",fill:"#000",fillRule:"evenodd"})))}function gf(){return(gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vf(e){return r.createElement("svg",gf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Wd||(Wd=r.createElement("path",{className:"icon-done_svg__fill",d:"M12.552 31.448a2.665 2.665 0 10-3.771 3.771l13.333 13.333a2.666 2.666 0 003.772 0L55.219 19.22a2.667 2.667 0 00-3.771-3.771L24 42.895 12.552 31.448z",fill:"#000",fillRule:"evenodd"})))}function Ef(){return(Ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yf(e){return r.createElement("svg",Ef({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Yd||(Yd=r.createElement("path",{className:"icon-done-all_svg__fill",d:"M5.886 31.448L19.219 44.78a2.667 2.667 0 01-3.771 3.771L2.114 35.22a2.667 2.667 0 013.772-3.771zm52.228-16a2.666 2.666 0 113.772 3.771L32.552 48.552a2.665 2.665 0 01-3.771 0L15.448 35.22a2.665 2.665 0 010-3.771 2.665 2.665 0 013.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 010 3.771L32.556 35.215a2.665 2.665 0 01-3.771 0 2.664 2.664 0 010-3.77L44.78 15.447a2.665 2.665 0 013.771 0z",fill:"#000",fillRule:"evenodd"})))}function Of(){return(Of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cf(e){return r.createElement("svg",Of({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Qd||(Qd=r.createElement("path",{className:"icon-download_svg__fill",d:"M56 42.667a2.667 2.667 0 012.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 01-7.986-7.53l-.014-.47v-8a2.667 2.667 0 015.316-.311l.018.311v8a2.67 2.67 0 002.355 2.65l.311.017h37.334a2.667 2.667 0 002.648-2.356l.018-.31v-8A2.667 2.667 0 0156 42.667zm-36.552-8.781a2.666 2.666 0 013.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 015.316-.311l.018.311v30.894l6.114-6.113a2.668 2.668 0 013.52-.221l.251.221a2.666 2.666 0 01.222 3.52l-.222.252-10.658 10.657a2.341 2.341 0 01-.135.128l.127-.119a2.67 2.67 0 01-.195.176l-.056.045a1.74 1.74 0 01-.086.064l-.056.04-.086.056-.06.036-.081.046-.079.04a2.528 2.528 0 01-.14.065l-.09.036c-.023.01-.045.017-.067.025l-.09.03-.063.019c-.043.012-.086.024-.13.034l-.013.003a3.06 3.06 0 01-.144.028l-.064.01c-.03.005-.061.009-.092.012l-.084.008a1.727 1.727 0 01-.103.006l-.069.002h-.095c-.028 0-.055-.002-.082-.003l.139.003c-.084 0-.167-.004-.249-.011l-.061-.007a1.359 1.359 0 01-.092-.012l-.09-.015a2.242 2.242 0 01-.118-.025l-.04-.01a2.644 2.644 0 01-.34-.11l-.015-.006c-.05-.02-.097-.04-.145-.063l-.042-.02L30.71 45a1.16 1.16 0 01-.067-.039c-.03-.018-.059-.035-.087-.054l-.062-.041c-.03-.02-.06-.042-.088-.063l-.04-.03-.008-.007a2.796 2.796 0 01-.251-.223L19.448 33.886z",fill:"#000",fillRule:"evenodd"})))}function Nf(){return(Nf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tf(e){return r.createElement("svg",Nf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},e),Xd||(Xd=r.createElement("path",{className:"icon-edit_svg__fill",d:"M56 56a2.667 2.667 0 01.311 5.315l-.311.018H8a2.667 2.667 0 01-.311-5.316L8 56h48zM35.448 3.448a2.665 2.665 0 013.771 0l10.667 10.666a2.668 2.668 0 010 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 01-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16l-6.894-6.893z",fill:"#000",fillRule:"evenodd"})))}function Sf(){return(Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function If(e){return r.createElement("svg",Sf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Zd||(Zd=r.createElement("path",{className:"icon-emoji-more_svg__fill",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 01-1.144 4.111 24.669 24.669 0 00-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 011.494-2.62 2.13 2.13 0 012.62 1.494 28.895 28.895 0 011.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897C3.2 16.157 16.138 3.22 32.097 3.22zm10.705 34.792a2.133 2.133 0 012.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488-5.792 0-10.856-3.865-12.73-9.488a2.134 2.134 0 011.875-2.803l.15-.005h21.41zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23.292-.382zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133zm21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133zM54.853 0a.8.8 0 01.8.8v7.786h7.76a.8.8 0 01.8.8v2.667a.8.8 0 01-.8.8h-7.76v7.758a.8.8 0 01-.8.8h-2.666a.8.8 0 01-.8-.8v-7.758h-7.785a.8.8 0 01-.8-.8V9.387a.8.8 0 01.8-.8l7.784-.001V.8a.8.8 0 01.8-.8h2.667z",fill:"#000",fillRule:"evenodd"})))}function Af(){return(Af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wf(e){return r.createElement("svg",Af({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),$d||($d=r.createElement("path",{className:"icon-error_svg__fill",d:"M32 5.06a8 8 0 016.561 3.424l.287.439 22.608 37.744a8 8 0 01.022 7.962 8.005 8.005 0 01-6.356 4.014l-.535.024H9.384a8.002 8.002 0 01-6.862-4.038 8.008 8.008 0 01-.226-7.493l.27-.506L25.16 8.91A8.001 8.001 0 0132 5.06zm0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.669 2.669 0 001.909 3.973l.341.027h45.144a2.67 2.67 0 002.45-3.659l-.148-.304L34.28 11.676A2.666 2.666 0 0032 10.393zm0 32.274A2.667 2.667 0 1132 48a2.667 2.667 0 010-5.333zm0-21.334a2.667 2.667 0 012.649 2.356l.018.311v10.667a2.667 2.667 0 01-5.316.311l-.018-.311V24A2.667 2.667 0 0132 21.333z",fill:"#000",fillRule:"evenodd"})))}function Mf(){return(Mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jf(e){return r.createElement("svg",Mf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Jd||(Jd=r.createElement("path",{className:"icon-expand_svg__fill",d:"M48 8a2.667 2.667 0 012.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 01-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.668 2.668 0 01.221 3.52l-.221.251a2.666 2.666 0 01-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 01-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 013.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0148 8z",fill:"#000",fillRule:"evenodd"})))}function Rf(){return(Rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Uf(e){return r.createElement("svg",Rf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),eh||(eh=r.createElement("path",{className:"icon-file-audio_svg__fill",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 01-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 013.156-.047zm-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 01-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 013.156-.047z",fill:"#000",fillRule:"evenodd"})))}function Lf(){return(Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kf(e){return r.createElement("svg",Lf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),th||(th=r.createElement("path",{className:"icon-file-document_svg__fill",d:"M39.414 6.4a2.41 2.41 0 011.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm0-8.533l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 00-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.152 2.152 0 001.985-2.155c0-1.193-.957-2.16-2.137-2.16z",fill:"#000",fillRule:"evenodd"})))}function Df(){return(Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xf(e){return r.createElement("svg",Df({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),nh||(nh=r.createElement("path",{className:"icon-freeze_svg__fill",d:"M41.636 3.226l.251.222a2.668 2.668 0 01.222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 015.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.668 2.668 0 011.952 2.938l-.067.328a2.667 2.667 0 01-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 012.937 1.952l.067.328a2.669 2.669 0 01-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 01-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 01-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 01-3.52.222l-.251-.222a2.666 2.666 0 01-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 01-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 01-1.953-2.937l.067-.328a2.665 2.665 0 012.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 01-2.937-1.952l-.067-.328a2.668 2.668 0 011.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 015.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function Pf(){return(Pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ff(e){return r.createElement("svg",Pf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),rh||(rh=r.createElement("path",{className:"icon-gif_svg__fill",d:"M16.664 45.333c2.155 0 4.119-.318 5.89-.953 1.772-.636 3.143-1.53 4.113-2.683V31.34h-10.29v3.94h4.902v4.474c-.861.856-2.304 1.283-4.327 1.283-2.011 0-3.538-.695-4.58-2.085-1.04-1.39-1.562-3.446-1.562-6.168v-1.657c.012-2.698.497-4.73 1.455-6.097.958-1.366 2.352-2.05 4.184-2.05 1.437 0 2.565.345 3.385 1.034.82.69 1.35 1.777 1.59 3.262h5.243c-.324-2.804-1.36-4.94-3.107-6.408-1.748-1.468-4.172-2.201-7.273-2.201-2.226 0-4.169.502-5.827 1.506-1.658 1.004-2.927 2.454-3.807 4.35-.88 1.895-1.32 4.138-1.32 6.728v1.765c.024 2.52.5 4.712 1.428 6.578.928 1.865 2.245 3.288 3.95 4.269 1.707.98 3.69 1.47 5.953 1.47zm20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666h5.063z",fill:"#000",fillRule:"evenodd"})))}function Hf(){return(Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gf(e){return r.createElement("svg",Hf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ah||(ah=r.createElement("path",{className:"icon-info_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 011 1v14a1 1 0 01-1 1h-3.334a1 1 0 01-1-1v-14a1 1 0 011-1h3.334zm-1.667-8a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function Bf(){return(Bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zf(e){return r.createElement("svg",Bf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ih||(ih=r.createElement("path",{className:"icon-leave_svg__fill",d:"M32 5.333a2.667 2.667 0 01.311 5.316l-.311.018H10.667a2.67 2.67 0 00-2.65 2.355L8 13.333v37.334a2.667 2.667 0 002.356 2.648l.31.018H32a2.667 2.667 0 01.311 5.316l-.311.018H10.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V13.333a8 8 0 017.53-7.986l.47-.014H32zm17.634 13.893l.252.222 10.666 10.666a2.666 2.666 0 01.222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 01-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 01-.311-5.315l.311-.018h33.56l-7.446-7.448a2.668 2.668 0 01-.221-3.52l.221-.251a2.666 2.666 0 013.52-.222z",fill:"#000",fillRule:"evenodd"})))}function Vf(){return(Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qf(e){return r.createElement("svg",Vf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),sh||(sh=r.createElement("path",{className:"icon-members_svg__fill",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.333 13.333 0 019.986 12.297l.014.605V56a2.667 2.667 0 01-5.315.311L58.667 56v-5.331a8 8 0 00-6-7.74A2.667 2.667 0 1154 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 010 25.834 2.667 2.667 0 11-1.323-5.167 8 8 0 000-15.5 2.667 2.667 0 111.323-5.167zM24 10.667a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Kf(){return(Kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wf(e){return r.createElement("svg",Kf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),oh||(oh=r.createElement("path",{className:"icon-message_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zM18.667 29.333a2.667 2.667 0 11-.001 5.333 2.667 2.667 0 01.001-5.333zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",fill:"#000",fillRule:"evenodd"})))}function Yf(){return(Yf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qf(e){return r.createElement("svg",Yf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),lh||(lh=r.createElement("path",{className:"icon-moderations_svg__fill",d:"M18.667 34.667a2.667 2.667 0 01.311 5.316l-.311.017h-5.334v16a2.667 2.667 0 01-5.316.311L8 56V40H2.667a2.667 2.667 0 01-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 012.649 2.356l.018.311v24a2.667 2.667 0 01-5.316.311L29.333 56V32A2.667 2.667 0 0132 29.333zM61.333 40a2.667 2.667 0 01.311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 01-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 01-.311-5.316l.311-.017h16zm-8-34.667a2.67 2.67 0 012.65 2.356L56 8v24a2.667 2.667 0 01-5.315.311L50.667 32V8a2.667 2.667 0 012.666-2.667zm-42.666 0a2.667 2.667 0 012.648 2.356l.018.311v18.667a2.667 2.667 0 01-5.316.311L8 26.667V8a2.667 2.667 0 012.667-2.667zm21.333 0a2.667 2.667 0 012.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 01.311 5.317L40 24H24a2.667 2.667 0 01-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0132 5.333z",fill:"#000",fillRule:"evenodd"})))}function Xf(){return(Xf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zf(e){return r.createElement("svg",Xf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ch||(ch=r.createElement("path",{className:"icon-more_svg__fill",d:"M32 45.333a5.333 5.333 0 110 10.666 5.333 5.333 0 010-10.666zM32 28a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 28zm0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333z",fill:"#000",fillRule:"evenodd"})))}function $f(){return($f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jf(e){return r.createElement("svg",$f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),uh||(uh=r.createElement("path",{className:"icon-mute_svg__fill",d:"M55.62 19.616l.067.123A26.552 26.552 0 0158.667 32c0 4.326-1.03 8.41-2.864 12.025-1.012 2.726-1.235 4.847-.67 6.363.71 1.903 1.598 3.49 2.662 4.758 1.54 1.586 1.039 2.696-1.506 3.33-2.09.521-5.716-.027-10.879-1.646l-.488-.155-1.594-.527A26.56 26.56 0 0132 58.667a26.55 26.55 0 01-12.326-3.014l-.059-.03 4-4A21.24 21.24 0 0032 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219c.728.225 1.414.423 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.188 21.188 0 001.895-8.8 21.24 21.24 0 00-1.71-8.385l3.997-3.999zm2.266-13.502a2.668 2.668 0 01.221 3.52l-.221.252-48 48a2.668 2.668 0 01-3.993-3.52l.221-.252 5.238-5.237a26.563 26.563 0 01-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0116.877 6.02l5.237-5.239a2.668 2.668 0 013.772 0zM32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.248 21.248 0 0032 10.666z",fill:"#000",fillRule:"evenodd"})))}function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tp(e){return r.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),dh||(dh=r.createElement("path",{className:"icon-notifications_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zM32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.583 10.583 0 01-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16z",fill:"#000",fillRule:"evenodd"})))}function np(){return(np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rp(e){return r.createElement("svg",np({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),hh||(hh=r.createElement("path",{className:"icon-notifications-off-filled_svg__fill",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 012.85-.117l.127.117a2.105 2.105 0 010 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 010-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zm20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31l28.54-28.538z",fill:"#000",fillRule:"evenodd"})))}function ap(){return(ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ip(e){return r.createElement("svg",ap({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),fh||(fh=r.createElement("path",{className:"icon-operator_svg__fill",d:"M29.83 6.45a2.667 2.667 0 014.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0150.666 56H13.333a2.666 2.666 0 01-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 01-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 01-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 32z",fill:"#000",fillRule:"evenodd"})))}function sp(){return(sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function op(e){return r.createElement("svg",sp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ph||(ph=r.createElement("path",{className:"icon-photo_svg__fill",d:"M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 002.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.668 2.668 0 013.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 00-2.498-2.661l-.168-.005zm-28 5.333a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667z",fill:"#000",fillRule:"evenodd"})))}function lp(){return(lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cp(e){return r.createElement("svg",lp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),mh||(mh=r.createElement("path",{className:"icon-play_svg__fill",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016L51.908 34.75z",fill:"#000",fillRule:"evenodd"})))}function up(){return(up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dp(e){return r.createElement("svg",up({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),bh||(bh=r.createElement("path",{className:"icon-plus_svg__fill",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0v18.666z",fill:"#000",fillRule:"evenodd"})))}function hp(){return(hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fp(e){return r.createElement("svg",hp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),_h||(_h=r.createElement("path",{className:"icon-question_svg__fill",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333zM32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24zm2.213-18.63a2.667 2.667 0 11-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 00-10.364-1.777 2.667 2.667 0 01-5.032-1.77 10.668 10.668 0 0120.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21.268 21.268 0 01-2.813 1.578v.893zm-5.333 7.523a2.667 2.667 0 115.333 0v.44a2.667 2.667 0 11-5.333 0v-.44z",fill:"#000",fillRule:"evenodd"})))}function pp(){return(pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mp(e){return r.createElement("svg",pp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),gh||(gh=r.createElement("path",{className:"icon-refresh_svg__fill",d:"M46.14 14.43l.562.537 6.631 6.167v-7.8a2.67 2.67 0 012.356-2.65l.311-.017a2.667 2.667 0 012.649 2.355l.018.311v16a2.67 2.67 0 01-2.356 2.65L56 32H40a2.667 2.667 0 01-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 015.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",fill:"#000",fillRule:"evenodd"})))}function bp(){return(bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _p(e){return r.createElement("svg",bp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),vh||(vh=r.createElement("path",{className:"icon-remove_svg__fill",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zm9.886 19.447a2.668 2.668 0 00-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 00-3.638.124l-.124.134a2.667 2.667 0 00.124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 00.124 3.638l.134.124a2.667 2.667 0 003.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 003.638-.124l.124-.134a2.667 2.667 0 00-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 00-.124-3.638z",fill:"#000",fillRule:"evenodd"})))}function gp(){return(gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vp(e){return r.createElement("svg",gp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},e),Eh||(Eh=r.createElement("path",{className:"icon-reply-filled_svg__fill",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 00.062-.164c-.07-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.331 9.331 0 00-2.406-.655 9.542 9.542 0 00-.862-.078V2.225a.225.225 0 00-.128-.203.23.23 0 00-.24.028L.084 5.692A.221.221 0 000 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.222.222 0 00.13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.39 6.39 0 012.087.96c1.018.724 1.398 1.5 1.4 1.507a.23.23 0 00.205.128z",fill:"#000",fillRule:"evenodd"})))}function Ep(){return(Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yp(e){return r.createElement("svg",Ep({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),yh||(yh=r.createElement("path",{className:"icon-search_svg__fill",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667c0-11.782 9.552-21.334 21.334-21.334S48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 01-3.772 3.772l-13.67-13.67A21.239 21.239 0 0126.667 48zm0-5.333c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16-8.837 0-16 7.163-16 16 0 8.836 7.163 16 16 16z",fill:"#000",fillRule:"evenodd"})))}function Op(){return(Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cp(e){return r.createElement("svg",Op({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Oh||(Oh=r.createElement("path",{className:"icon-send_svg__fill",d:"M59.795 29.43L7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 001.544 1.275l32.273 5.394L11.4 37.47a1.998 1.998 0 00-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",fill:"#000",fillRule:"evenodd"})))}function Np(){return(Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tp(e){return r.createElement("svg",Np({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Ch||(Ch=r.createElement("path",{className:"icon-settings-filled_svg__fill",d:"M32 2.667A5.332 5.332 0 0137.333 8v.24A4.4 4.4 0 0040 12.267a4.4 4.4 0 004.853-.88l.16-.16a5.332 5.332 0 017.547 0 5.333 5.333 0 010 7.546l-.16.16a4.401 4.401 0 00-.88 4.854V24a4.4 4.4 0 004.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0051.733 40a4.4 4.4 0 00.88 4.853l.16.16a5.332 5.332 0 010 7.547 5.333 5.333 0 01-7.546 0l-.16-.16a4.401 4.401 0 00-4.854-.88 4.397 4.397 0 00-2.666 4.027V56a5.333 5.333 0 01-10.667 0v-.24A4.4 4.4 0 0024 51.733a4.4 4.4 0 00-4.853.88l-.16.16a5.332 5.332 0 01-7.547 0 5.333 5.333 0 010-7.546l.16-.16a4.401 4.401 0 00.88-4.854 4.397 4.397 0 00-4.027-2.666H8A5.333 5.333 0 018 26.88h.24A4.4 4.4 0 0012.267 24a4.4 4.4 0 00-.88-4.853l-.16-.16a5.332 5.332 0 010-7.547 5.333 5.333 0 017.546 0l.16.16a4.401 4.401 0 004.854.88H24a4.4 4.4 0 002.667-4.027V8A5.332 5.332 0 0132 2.667zM32 24a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Sp(){return(Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ip(e){return r.createElement("svg",Sp({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none"},e),Nh||(Nh=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.943 24.39a1.333 1.333 0 01-1.886 1.886l-9.333-9.333a1.333 1.333 0 010-1.886l9.333-9.333a1.333 1.333 0 111.886 1.885L13.553 16l8.39 8.391z",fill:"#000"})))}function Ap(){return(Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wp(e){return r.createElement("svg",Ap({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Th||(Th=r.createElement("path",{className:"icon-spinner_svg__fill",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 105.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 100 5.677z",fill:"#000",fillRule:"evenodd"})))}function Mp(){return(Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jp(e){return r.createElement("svg",Mp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Sh||(Sh=r.createElement("path",{className:"icon-supergroup_svg__fill",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 01-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 01-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011h9.778zm18.578-17.291c.266 0 .53.04.784.118 4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 01-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 01-2.648-2.356l-.018-.31a2.67 2.67 0 012.355-2.65l.311-.017h2.934zm-44 0l.31.018a2.666 2.666 0 012.356 2.648l-.018.311a2.666 2.666 0 01-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 010 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809.255-.078.52-.118.788-.118h2.953zM32 19.958c5.512 0 10 4.409 10 9.871 0 5.463-4.488 9.872-10 9.872s-10-4.41-10-9.872 4.488-9.871 10-9.871zm0 5.333c-2.588 0-4.667 2.043-4.667 4.538 0 2.496 2.08 4.538 4.667 4.538 2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538zM17.333 2.667c5.513 0 10 4.409 10 9.871 0 5.462-4.487 9.871-10 9.871-5.512 0-10-4.409-10-9.871 0-5.462 4.488-9.871 10-9.871zm29.334 0c5.512 0 10 4.409 10 9.871 0 5.462-4.488 9.871-10 9.871-5.513 0-10-4.409-10-9.871 0-5.462 4.487-9.871 10-9.871zM17.333 8c-2.587 0-4.666 2.042-4.666 4.538 0 2.496 2.079 4.538 4.666 4.538 2.588 0 4.667-2.042 4.667-4.538C22 10.042 19.921 8 17.333 8zm29.334 0C44.079 8 42 10.042 42 12.538c0 2.496 2.079 4.538 4.667 4.538 2.587 0 4.666-2.042 4.666-4.538 0-2.496-2.079-4.538-4.666-4.538z",fill:"#000",fillRule:"evenodd"})))}function Rp(){return(Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Up(e){return r.createElement("svg",Rp({viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ih||(Ih=r.createElement("path",{className:"icon-thread_svg__fill",clipRule:"evenodd",d:"M38.824 25.895a2.95 2.95 0 014.16-.074L57.1 39.378a2.921 2.921 0 01.002 4.213L42.985 57.177a2.95 2.95 0 01-4.158-.07 2.919 2.919 0 01.07-4.14l11.928-11.48-11.926-11.451a2.919 2.919 0 01-.075-4.14z"})),Ah||(Ah=r.createElement("path",{className:"icon-thread_svg__fill",clipRule:"evenodd",d:"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716 0 1.5-1.283 2.716-2.866 2.716H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6z"})))}function Lp(){return(Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kp(e){return r.createElement("svg",Lp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),wh||(wh=r.createElement("path",{className:"icon-thumbnail-none_svg__fill",d:"M34.667 5.333a2.667 2.667 0 010 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 013.771 0l8.781 8.78v-4.228a2.667 2.667 0 012.498-2.661l.169-.005a2.667 2.667 0 012.667 2.666v21.334a8 8 0 01-8 8H13.33a8 8 0 01-7.998-8V13.333a8 8 0 018-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 002.661-2.498l.005-.168v-9.563L42.667 30.438zM22.667 16a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667zM56.78 3.448a2.665 2.665 0 013.771 0 2.665 2.665 0 010 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 01-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 01-3.638.125l-.133-.125a2.665 2.665 0 010-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 01-.125-3.638l.125-.133a2.665 2.665 0 013.771 0l4.78 4.78z",fill:"#000",fillRule:"evenodd"})))}function Dp(){return(Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xp(e){return r.createElement("svg",Dp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),Mh||(Mh=r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("rect",{className:"icon-toggleoff_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),r.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),r.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),r.createElement("path",{className:"icon-toggleoff_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function Pp(){return(Pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fp(e){return r.createElement("svg",Pp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),jh||(jh=r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("rect",{className:"icon-toggleon_svg__fill",width:80,height:40,x:4,y:4,fill:"#000",rx:20}),r.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),r.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"}),r.createElement("path",{className:"icon-toggleon_svg__fill",fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"}))))}function Hp(){return(Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gp(e){return r.createElement("svg",Hp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Rh||(Rh=r.createElement("path",{className:"icon-user_svg__fill",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM32 5.333c7.364 0 13.333 5.97 13.333 13.334C45.333 26.03 39.363 32 32 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",fill:"#000",fillRule:"evenodd"})))}function Bp(e){let{className:t,type:n,fillColor:r,width:i,height:s,onClick:o,children:l}=e;const c={width:"string"==typeof i?i:i+"px",minWidth:"string"==typeof i?i:i+"px",height:"string"==typeof s?s:s+"px",minHeight:"string"==typeof s?s:s+"px"};return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-icon",Sd(n),Td(r)].join(" "),role:"button",onClick:o,onKeyDown:o,tabIndex:"0",style:c},l||function(e){switch(e){case Cd.ADD:return a.a.createElement(Lh,null);case Cd.ARROW_LEFT:return a.a.createElement(Dh,null);case Cd.ATTACH:return a.a.createElement(Ph,null);case Cd.AUDIO_ON_LINED:return a.a.createElement(Hh,null);case Cd.BAN:return a.a.createElement(Bh,null);case Cd.BROADCAST:return a.a.createElement(Vh,null);case Cd.CAMERA:return a.a.createElement(Kh,null);case Cd.CHANNELS:return a.a.createElement(Yh,null);case Cd.CHAT:return a.a.createElement(Xh,null);case Cd.CHAT_FILLED:return a.a.createElement($h,null);case Cd.CHEVRON_DOWN:return a.a.createElement(ef,null);case Cd.CHEVRON_RIGHT:return a.a.createElement(nf,null);case Cd.CLOSE:return a.a.createElement(af,null);case Cd.COLLAPSE:return a.a.createElement(of,null);case Cd.COPY:return a.a.createElement(cf,null);case Cd.CREATE:return a.a.createElement(df,null);case Cd.DELETE:return a.a.createElement(ff,null);case Cd.DISCONNECTED:return a.a.createElement(mf,null);case Cd.DOCUMENT:return a.a.createElement(_f,null);case Cd.DONE:return a.a.createElement(vf,null);case Cd.DONE_ALL:return a.a.createElement(yf,null);case Cd.DOWNLOAD:return a.a.createElement(Cf,null);case Cd.EDIT:return a.a.createElement(Tf,null);case Cd.EMOJI_MORE:return a.a.createElement(If,null);case Cd.ERROR:return a.a.createElement(wf,null);case Cd.EXPAND:return a.a.createElement(jf,null);case Cd.FILE_AUDIO:return a.a.createElement(Uf,null);case Cd.FILE_DOCUMENT:return a.a.createElement(kf,null);case Cd.FREEZE:return a.a.createElement(xf,null);case Cd.GIF:return a.a.createElement(Ff,null);case Cd.INFO:return a.a.createElement(Gf,null);case Cd.LEAVE:return a.a.createElement(zf,null);case Cd.MEMBERS:return a.a.createElement(qf,null);case Cd.MESSAGE:return a.a.createElement(Wf,null);case Cd.MODERATIONS:return a.a.createElement(Qf,null);case Cd.MORE:return a.a.createElement(Zf,null);case Cd.MUTE:return a.a.createElement(Jf,null);case Cd.NOTIFICATIONS:return a.a.createElement(tp,null);case Cd.NOTIFICATIONS_OFF_FILLED:return a.a.createElement(rp,null);case Cd.OPERATOR:return a.a.createElement(ip,null);case Cd.PHOTO:return a.a.createElement(op,null);case Cd.PLAY:return a.a.createElement(cp,null);case Cd.PLUS:return a.a.createElement(dp,null);case Cd.QUESTION:return a.a.createElement(fp,null);case Cd.REFRESH:return a.a.createElement(mp,null);case Cd.REMOVE:return a.a.createElement(_p,null);case Cd.REPLY:return a.a.createElement(vp,null);case Cd.SEARCH:return a.a.createElement(yp,null);case Cd.SEND:return a.a.createElement(Cp,null);case Cd.SETTINGS_FILLED:return a.a.createElement(Tp,null);case Cd.SLIDE_LEFT:return a.a.createElement(Ip,null);case Cd.SPINNER:return a.a.createElement(wp,null);case Cd.SUPERGROUP:return a.a.createElement(jp,null);case Cd.THREAD:return a.a.createElement(Up,null);case Cd.THUMBNAIL_NONE:return a.a.createElement(kp,null);case Cd.TOGGLE_OFF:return a.a.createElement(xp,null);case Cd.TOGGLE_ON:return a.a.createElement(Fp,null);case Cd.USER:return a.a.createElement(Gp,null);default:return"icon"}}(n))}Bp.propTypes={className:od.a.oneOfType([od.a.string,od.a.arrayOf(od.a.string)]),type:od.a.oneOfType([od.a.oneOf(Object.keys(Cd)),od.a.string]).isRequired,fillColor:od.a.oneOf(Object.keys(Nd)),width:od.a.oneOfType([od.a.string,od.a.number]),height:od.a.oneOfType([od.a.string,od.a.number]),onClick:od.a.func,children:od.a.element},Bp.defaultProps={className:"",fillColor:Nd.DEFAULT,width:26,height:26,onClick:()=>{},children:null};const zp=Cd,Vp=Nd,qp=a.a.forwardRef((e,t)=>{const{className:n="",children:i,disabled:o=!1,width:l="56px",height:c="56px",type:u="button",style:d={},onBlur:h=(()=>{}),onClick:f=(()=>{})}=e,[p,m]=Object(r.useState)(!1);return a.a.createElement("button",{className:[...Array.isArray(n)?n:[n],"sendbird-iconbutton",p?"sendbird-iconbutton--pressed":""].join(" "),disabled:o,ref:t,type:u,style:s(s({},d),{},{height:c,width:l}),onClick:e=>{o||(m(!0),null==f||f(e))},onBlur:e=>{m(!1),null==h||h(e)}},a.a.createElement("span",{className:"sendbird-iconbutton__inner"},i))}),Kp=a.a.createContext({breakpoint:!1,isMobile:!1}),Wp=()=>{try{const e=document.querySelector("body");null==e||e.classList.add("sendbird--mobile-mode")}catch(e){}},Yp=()=>{try{const e=document.querySelector("body");null==e||e.classList.remove("sendbird--mobile-mode")}catch(e){}},Qp=e=>{const{children:t,logger:n}=e,i=(null==e?void 0:e.breakpoint)||!1,[s,o]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{var e;const t=()=>{if("boolean"==typeof i){var e,t;if(o(i),i)null==n||null===(e=n.info)||void 0===e||e.call(n,"MediaQueryProvider: isMobile: true"),Wp();else null==n||null===(t=n.info)||void 0===t||t.call(n,"MediaQueryProvider: isMobile: false"),Yp()}else{var r;const e=window.matchMedia(`(max-width: ${i})`);var a,s;if(null==n||null===(r=n.info)||void 0===r||r.call(n,"MediaQueryProvider: Screensize updated to "+i),e.matches)o(!0),Wp(),null==n||null===(a=n.info)||void 0===a||a.call(n,"MediaQueryProvider: isMobile: true");else o(!1),Yp(),null==n||null===(s=n.info)||void 0===s||s.call(n,"MediaQueryProvider: isMobile: false")}};return t(),window.addEventListener("resize",t),null==n||null===(e=n.info)||void 0===e||e.call(n,"MediaQueryProvider: addEventListener",{updateSize:t}),()=>{var e;window.removeEventListener("resize",t),null==n||null===(e=n.info)||void 0===e||e.call(n,"MediaQueryProvider: removeEventListener",{updateSize:t})}},[i]),a.a.createElement(Kp.Provider,{value:{breakpoint:i,isMobile:s}},t)},Xp=()=>a.a.useContext(Kp),Zp=e=>{let{titleText:t}=e;return a.a.createElement("div",{className:"sendbird-modal__header"},a.a.createElement(hd,{type:fd.H_1,color:pd.ONBACKGROUND_1},t))},$p=e=>{let{children:t}=e;return a.a.createElement("div",{className:"sendbird-modal__body"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_2},t))},Jp=e=>{let{submitText:t,disabled:n=!1,type:i=Ed.DANGER,onSubmit:s,onCancel:o}=e;const{stringSet:l}=Object(r.useContext)(td);return a.a.createElement("div",{className:"sendbird-modal__footer"},a.a.createElement(Od,{type:Ed.SECONDARY,onClick:o},a.a.createElement(hd,{type:fd.BUTTON_1,color:pd.ONBACKGROUND_1},l.BUTTON__CANCEL)),a.a.createElement(Od,{type:i,disabled:n,onClick:s},t))};function em(e){const{children:t=null,className:n="",isCloseOnClickOutside:r=!1,isFullScreenOnMobile:i=!1,titleText:s,submitText:o,disabled:l=!1,hideFooter:c=!1,type:u=Ed.DANGER,onCancel:d=(()=>{}),onSubmit:h=(()=>{}),renderHeader:f}=e,{isMobile:p}=Xp();return Object(ad.createPortal)(a.a.createElement("div",{className:`\n      sendbird-modal ${n}\n      ${i&&p?"sendbird-modal--full-mobile":""}\n    `},a.a.createElement("div",{className:"sendbird-modal__content"},(null==f?void 0:f())||a.a.createElement(Zp,{titleText:s}),a.a.createElement($p,null,t),!c&&a.a.createElement(Jp,{disabled:l,onCancel:d,onSubmit:h,submitText:o,type:u}),a.a.createElement("div",{className:"sendbird-modal__close"},a.a.createElement(qp,{width:"32px",height:"32px",onClick:d},a.a.createElement(Bp,{type:zp.CLOSE,fillColor:Vp.DEFAULT,width:"24px",height:"24px"})))),a.a.createElement("div",{className:`\n          sendbird-modal__backdrop\n          ${r&&"sendbird-modal__backdrop--clickoutside"}\n        `,onClick:e=>{null==e||e.stopPropagation(),r&&d()}})),document.getElementById(id))}const tm=()=>{},nm=Object(r.createContext)({start:tm,stop:tm,isRecordable:!1}),rm=e=>{var t;const{children:i}=e,{config:s}=ku(),{logger:o,isVoiceMessageEnabled:l}=s,[c,u]=Object(r.useState)(null),[d,h]=Object(r.useState)(!1),[f,p]=Object(r.useState)(!1),{stringSet:m}=rd(),b=null!==(t=Lu.a.find(e=>MediaRecorder.isTypeSupported(e)))&&void 0!==t?t:"";b||o.error("VoiceRecorder: Browser does not support mimeType",{mimmeTypes:Lu.a});const[_,g]=Object(r.useState)(null);Object(r.useEffect)(()=>{l&&!_&&n.e(1).then(n.bind(null,22)).then(e=>{g(e)})},[]);const v=Object(r.useCallback)(e=>{var t,n,r;!l||_?(o.info("VoiceRecorder: Start recording."),c&&(E(),o.info("VoiceRecorder: Previous mediaRecorder is stopped.")),(()=>{try{navigator.permissions.query({name:"microphone"}).then(e=>{"denied"===e.state&&(o.warning("VoiceRecorder: Permission denied."),p(!0))})}catch(e){o.warning("VoiceRecorder: Failed to check permission.",e)}})(),null===(t=navigator)||void 0===t||null===(n=t.mediaDevices)||void 0===n||null===(r=n.getUserMedia)||void 0===r||r.call(n,{audio:!0}).then(t=>{o.info("VoiceRecorder: Succeeded getting media stream.",t),h(!0);const n=new MediaRecorder(t,{mimeType:b,audioBitsPerSecond:Lu.m});n.ondataavailable=n=>{var r,a,i;o.info("VoiceRecorder: Succeeded getting an available data.",n.data);const s=new File([n.data],Lu.g,{lastModified:(new Date).getTime(),type:Lu.h});null==_||_.downsampleToWav(s,t=>{const n=null==_?void 0:_.encodeMp3(t),r=new Blob(n,{type:Lu.h}),a=new File([r],Lu.g,{lastModified:(new Date).getTime(),type:Lu.h});null==e||e.onRecordingEnded(a),o.info("VoiceRecorder: Succeeded converting audio file.",a)}),null==t||null===(r=t.getAudioTracks)||void 0===r||null===(a=(i=r.call(t)).forEach)||void 0===a||a.call(i,e=>null==e?void 0:e.stop()),h(!1)},null==n||n.start(),u(n),null==e||e.onRecordingStarted()}).catch(e=>{o.error("VoiceRecorder: Failed getting media stream.",e),u(null)})):o.error("VoiceRecorder: Recording audio processor is being loaded.")},[c,_]),E=Object(r.useCallback)(()=>{null==c||c.stop(),u(null),h(!1),o.info("VoiceRecorder: Stop recording.")},[c]);return a.a.createElement(nm.Provider,{value:{start:v,stop:E,isRecordable:d}},i,f&&a.a.createElement(em,{hideFooter:!0,onCancel:()=>p(!1)},a.a.createElement(a.a.Fragment,null,m.VOICE_RECORDING_PERMISSION_DENIED)))},am=()=>Object(r.useContext)(nm);function im(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}function sm(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}const om=e=>{Object(r.useLayoutEffect)(()=>{(e=>{if(null==e)return!0;for(const t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})})(e)||D({variables:s(s({},{"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}),e)})},[e])},lm={INIT_SDK:"INIT_SDK",SET_SDK_LOADING:"SET_SDK_LOADING",RESET_SDK:"RESET_SDK",SDK_ERROR:"SDK_ERROR"},cm={initialized:!1,loading:!1,sdk:{},error:!1};function um(e,t){return X(t).with({type:lm.SET_SDK_LOADING},t=>{let{payload:n}=t;return s(s({},e),{},{initialized:!1,loading:n})}).with({type:lm.SDK_ERROR},()=>s(s({},e),{},{initialized:!1,loading:!1,error:!0})).with({type:lm.INIT_SDK},e=>{let{payload:t}=e;return{sdk:t,initialized:!0,loading:!1,error:!1}}).with({type:lm.RESET_SDK},()=>cm).otherwise(()=>e)}const dm={initialized:!1,loading:!1,user:{}};function hm(e,t){return X(t).with({type:$.INIT_USER},e=>{let{payload:t}=e;return{initialized:!0,loading:!1,user:t}}).with({type:$.RESET_USER},()=>dm).with({type:$.UPDATE_USER_INFO},t=>{let{payload:n}=t;return s(s({},e),{},{user:n})}).otherwise(()=>e)}async function fm(e){let{sdkDispatcher:t,userDispatcher:n,sdk:r}=e;return new Promise(e=>{t({type:lm.SET_SDK_LOADING,payload:!0}),null!=r&&r.disconnect?r.disconnect().then(()=>{t({type:lm.RESET_SDK}),n({type:$.RESET_USER})}).finally(()=>{e(!0)}):e(!0)})}const{INIT_SDK:pm,SET_SDK_LOADING:mm,RESET_SDK:bm,SDK_ERROR:_m}=lm,{INIT_USER:gm,UPDATE_USER_INFO:vm,RESET_USER:Em}=$;async function ym(e){let{logger:t,sdkDispatcher:n,userDispatcher:r,initDashboardConfigs:a,userId:i,appId:o,customApiHost:l,customWebSocketHost:c,configureSession:u,nickname:d,profileUrl:h,accessToken:f,isUserIdUsedForNickname:p,sdkInitParams:m,customExtensionParams:b,isMobile:_=!1}=e;return new Promise((e,g)=>{var v;if(null==t||null===(v=t.info)||void 0===v||v.call(t,"SendbirdProvider | useConnect/setupConnection/init",{userId:i,appId:o}),n({type:mm,payload:!0}),i&&o){var E,y,O,C,N,T,S;const v=function(e){let{appId:t,customApiHost:n,customWebSocketHost:r,sdkInitParams:a}=e;const i=s(s({modules:[new wc,new Ps],newInstance:!0},null!=a?a:{}),{},{appId:t});return n&&(i.customApiHost=n),r&&(i.customWebSocketHost=r),Ji.init(i)}({appId:o,customApiHost:l,customWebSocketHost:c,sdkInitParams:m});if(u&&"function"==typeof u){var I;const e=u(v);null==t||null===(I=t.info)||void 0===I||I.call(t,"SendbirdProvider | useConnect/setupConnection/configureSession",e),v.setSessionHandler(e)}null==t||null===(E=t.info)||void 0===E||E.call(t,"SendbirdProvider | useConnect/setupConnection/setVersion",{version:"3.6.8"}),null==v||null===(y=v.addSendbirdExtensions)||void 0===y||y.call(v,[{product:null!==(O=null===te.E||void 0===te.E?void 0:te.E.UIKIT_CHAT)&&void 0!==O?O:"uikit-chat",version:"3.6.8",platform:null!==(C=null===te.F||void 0===te.F?void 0:te.F.JS)&&void 0!==C?C:"js"}],_?null!==(N=null===te.G||void 0===te.G?void 0:te.G.MOBILE_WEB)&&void 0!==N?N:"mobile_web":null!==(T=null===te.G||void 0===te.G?void 0:te.G.WEB)&&void 0!==T?T:"web",b),v.addExtension("sb_uikit","3.6.8");const A=async i=>{var s,o;(null==t||null===(s=t.info)||void 0===s||s.call(t,"SendbirdProvider | useConnect/setupConnection/connectCbSucess",i),n({type:pm,payload:v}),r({type:gm,payload:i}),a(v).then(e=>{var n;null==t||null===(n=t.info)||void 0===n||n.call(t,"SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration success",{config:e})}).catch(e=>{var n;null==t||null===(n=t.error)||void 0===n||n.call(t,"SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration failed",{error:e})}),d===i.nickname&&h===i.profileUrl||Dc(d)&&Dc(h))?e():(null==t||null===(o=t.info)||void 0===o||o.call(t,"SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo",{nickname:d,profileUrl:h}),v.updateCurrentUserInfo({nickname:d||i.nickname||(p?i.userId:""),profileUrl:h||i.profileUrl}).then(e=>{var n;null==t||null===(n=t.info)||void 0===n||n.call(t,"SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo success",{nickname:d,profileUrl:h}),r({type:vm,payload:e})}).finally(()=>{e()}))},w=e=>{var a;const s=`SendbirdProvider | useConnect/setupConnection/Connection failed. ${(null==(l=e)?void 0:l.code)||""} ${(null==l?void 0:l.message)||""}`;var l;null==t||null===(a=t.error)||void 0===a||a.call(t,s,{e:e,appId:o,userId:i}),n({type:bm}),r({type:Em}),n({type:_m}),g(s)};null==t||null===(S=t.info)||void 0===S||S.call(t,"SendbirdProvider | useConnect/setupConnection/connect connecting using "+(null!=f?f:i)),v.connect(i,f).then(e=>A(e)).catch(e=>w(e))}else{var A;const e=function(e){let{userId:t,appId:n}=e;return`SendbirdProvider | useConnect/setupConnection/Connection failed UserId: ${t} or appId: ${n} missing`}({userId:i,appId:o});n({type:_m}),null==t||null===(A=t.error)||void 0===A||A.call(t,e),g(e)}})}async function Om(e){let{logger:t,sdkDispatcher:n,userDispatcher:r,initDashboardConfigs:a,userId:i,appId:s,customApiHost:o,customWebSocketHost:l,configureSession:c,nickname:u,profileUrl:d,accessToken:h,sdk:f,sdkInitParams:p,customExtensionParams:m,isMobile:b}=e;await fm({logger:t,sdkDispatcher:n,userDispatcher:r,sdk:f}),await ym({logger:t,sdkDispatcher:n,userDispatcher:r,initDashboardConfigs:a,userId:i,appId:s,customApiHost:o,customWebSocketHost:l,configureSession:c,nickname:u,profileUrl:d,accessToken:h,sdkInitParams:p,customExtensionParams:m,isMobile:b})}const Cm="debug",Nm="warning",Tm="error",Sm="info",Im="all",Am=e=>{let{level:t,title:n,description:r=""}=e;console.log(`%c SendbirdUIKit | ${t} | ${(new Date).toISOString()} | ${n} ${r&&"|"}`,(e=>{switch(e){case Nm:return"color: Orange";case Tm:return"color: Red";default:return"color: Gray"}})(t),r)},wm=()=>{},Mm=(e,t)=>{const n=t||Am,r=Array.isArray(e)?e:[e],a=e=>(t,r)=>n({level:e,title:t,description:r});return r.reduce((e,t)=>t===Cm||t===Im?s(s({},e),{},{info:a(Sm),error:a(Tm),warning:a(Nm)}):t===Sm?s(s({},e),{},{info:a(Sm)}):t===Tm?s(s({},e),{},{error:a(Tm)}):t===Nm?s(s({},e),{},{warning:a(Nm)}):s({},e),{info:wm,error:wm,warning:wm})};const jm=e=>{let{children:t,isVoiceMessageEnabled:n=!0}=e;return n?a.a.createElement(rm,null,a.a.createElement(Bu,null,t)):a.a.createElement(Bu,null,t)};function Rm(e){let{logger:t,timeout:n,cb:r}=e,a=[],i=null;return{push:e=>{if(a.find(t=>t.url===e.url)?t.info("Channel: Mark as read already in queue",{channel:e}):a.push(e),i)return;const s=a.shift();s&&r(s),i=setInterval(()=>{if(0===a.length&&i)return clearInterval(i),void(i=null);const e=a.shift();e&&r(e)},n||2e3)},clear:()=>{a=[],i&&(clearInterval(i),i=null)},getQueue:()=>a}}function Um(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(r.useLayoutEffect)(()=>()=>{e()},t)}function Lm(e){const t=function(e){var t,n,r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E,y,O,C,N,T;let{legacyConfig:S,uikitOptions:I={}}=e;const{replyType:A,isMentionEnabled:w,isReactionEnabled:M,disableUserProfile:j,isVoiceMessageEnabled:R,isTypingIndicatorEnabledOnChannelList:U,isMessageReceiptStatusEnabledOnChannelList:L,showSearchIcon:k}=S;return{common:{enableUsingDefaultUserProfile:null!==(t=null===(n=I.common)||void 0===n?void 0:n.enableUsingDefaultUserProfile)&&void 0!==t?t:"boolean"==typeof j?!j:void 0},groupChannel:{enableOgtag:null===(r=I.groupChannel)||void 0===r?void 0:r.enableOgtag,enableMention:null!==(a=null===(i=I.groupChannel)||void 0===i?void 0:i.enableMention)&&void 0!==a?a:w,enableReactions:null!==(s=null===(o=I.groupChannel)||void 0===o?void 0:o.enableReactions)&&void 0!==s?s:M,enableTypingIndicator:null===(l=I.groupChannel)||void 0===l?void 0:l.enableTypingIndicator,enableVoiceMessage:null!==(c=null===(u=I.groupChannel)||void 0===u?void 0:u.enableVoiceMessage)&&void 0!==c?c:R,replyType:null!==(d=null===(h=I.groupChannel)||void 0===h?void 0:h.replyType)&&void 0!==d?d:null!=A?im(A).lowerCase:void 0,threadReplySelectType:null===(f=I.groupChannel)||void 0===f?void 0:f.threadReplySelectType,input:{enableDocument:null===(p=I.groupChannel)||void 0===p||null===(m=p.input)||void 0===m?void 0:m.enableDocument},uikitMultipleFilesMessageLimit:null===(b=I.groupChannel)||void 0===b?void 0:b.uikitMultipleFilesMessageLimit},groupChannelList:{enableTypingIndicator:null!==(_=null===(g=I.groupChannelList)||void 0===g?void 0:g.enableTypingIndicator)&&void 0!==_?_:U,enableMessageReceiptStatus:null!==(v=null===(E=I.groupChannelList)||void 0===E?void 0:E.enableMessageReceiptStatus)&&void 0!==v?v:L},groupChannelSettings:{enableMessageSearch:null!==(y=null===(O=I.groupChannelSettings)||void 0===O?void 0:O.enableMessageSearch)&&void 0!==y?y:k},openChannel:{enableOgtag:null===(C=I.openChannel)||void 0===C?void 0:C.enableOgtag,input:{enableDocument:null===(N=I.openChannel)||void 0===N||null===(T=N.input)||void 0===T?void 0:T.enableDocument}}}}({legacyConfig:{replyType:e.replyType,isMentionEnabled:e.isMentionEnabled,isReactionEnabled:e.isReactionEnabled,disableUserProfile:e.disableUserProfile,isVoiceMessageEnabled:e.isVoiceMessageEnabled,isTypingIndicatorEnabledOnChannelList:e.isTypingIndicatorEnabledOnChannelList,isMessageReceiptStatusEnabledOnChannelList:e.isMessageReceiptStatusEnabledOnChannelList,showSearchIcon:e.showSearchIcon},uikitOptions:e.uikitOptions});return a.a.createElement(Uu,{localConfigs:{common:null==t?void 0:t.common,groupChannel:{channel:null==t?void 0:t.groupChannel,channelList:null==t?void 0:t.groupChannelList,setting:null==t?void 0:t.groupChannelSettings},openChannel:{channel:null==t?void 0:t.openChannel}}},a.a.createElement(km,e))}const km=e=>{let{appId:t,userId:n,children:i,accessToken:o="",customApiHost:l="",customWebSocketHost:u="",configureSession:d=null,theme:h="light",config:f={},nickname:p="",colorSet:m=null,stringSet:b=null,dateLocale:_=null,profileUrl:g="",voiceRecord:v={maxRecordingTime:Lu.e,minRecordingTime:Lu.f},userListQuery:E=null,imageCompression:y={},allowProfileEdit:O=!1,disableMarkAsDelivered:C=!1,renderUserProfile:N=null,onUserProfileMessage:T=null,breakpoint:S=!1,isUserIdUsedForNickname:I=!0,sdkInitParams:A,customExtensionParams:w,uikitMultipleFilesMessageLimit:M}=e;const{logLevel:j="",userMention:R={},isREMUnitEnabled:U=!1}=f,{isMobile:L}=Xp(),[k,D]=Object(r.useState)(Mm(j)),[x]=Object(r.useState)((()=>{const e={},t=e.hasOwnProperty;return{__getTopics:()=>e,subscribe:(n,r)=>{t.call(e,n)||(e[n]=[]);const a=e[n].push(r)-1;return{remove:()=>{delete e[n][a]}}},publish:(n,r)=>{t.call(e,n)&&e[n].forEach(e=>{e(void 0!==r?r:{})})}}})()),[P,F]=Object(r.useReducer)(um,cm),[H,G]=Object(r.useReducer)(hm,dm),{configs:B,configsWithAppAttr:z,initDashboardConfigs:V}=Object(r.useContext)(Ru),q=P.initialized,K=null==P?void 0:P.sdk;om(m);const W=function(e,t){var n;const{userId:a,appId:i,accessToken:o,isMobile:l,isUserIdUsedForNickname:c}=e,{logger:u,nickname:d,profileUrl:h,configureSession:f,customApiHost:p,customWebSocketHost:m,sdk:b,sdkDispatcher:_,userDispatcher:g,initDashboardConfigs:v,sdkInitParams:E,customExtensionParams:y}=t;return null==u||null===(n=u.info)||void 0===n||n.call(u,"SendbirdProvider | useConnect",s(s({},e),t)),Object(r.useEffect)(()=>{var e;null==u||null===(e=u.info)||void 0===e||e.call(u,"SendbirdProvider | useConnect/useEffect",{userId:a,appId:i,accessToken:o});try{Om({userId:a,appId:i,accessToken:o,logger:u,nickname:d,profileUrl:h,configureSession:f,customApiHost:p,customWebSocketHost:m,sdk:b,sdkDispatcher:_,userDispatcher:g,initDashboardConfigs:v,isUserIdUsedForNickname:c,sdkInitParams:E,customExtensionParams:y,isMobile:l})}catch(e){var t;null==u||null===(t=u.error)||void 0===t||t.call(u,"SendbirdProvider | useConnect/useEffect",e)}},[a,i,o]),Object(r.useCallback)(()=>{var e;null==u||null===(e=u.info)||void 0===e||e.call(u,"SendbirdProvider | useConnect/reconnect/useCallback",{sdk:b});try{Om({userId:a,appId:i,accessToken:o,logger:u,nickname:d,profileUrl:h,configureSession:f,customApiHost:p,customWebSocketHost:m,sdk:b,sdkDispatcher:_,userDispatcher:g,initDashboardConfigs:v,isUserIdUsedForNickname:c,sdkInitParams:E,customExtensionParams:y,isMobile:l})}catch(e){var t;null==u||null===(t=u.error)||void 0===t||t.call(u,"SendbirdProvider | useConnect/reconnect/useCallback",e)}},[b])}({appId:t,userId:n,accessToken:o,isUserIdUsedForNickname:I,isMobile:L},{logger:k,nickname:p,profileUrl:g,configureSession:d,customApiHost:l,customWebSocketHost:u,sdkInitParams:A,customExtensionParams:w,sdk:K,sdkDispatcher:F,userDispatcher:G,initDashboardConfigs:V});Um(()=>{"function"==typeof K.disconnect&&fm({logger:k,sdkDispatcher:F,userDispatcher:G,sdk:K})},[K.disconnect]),Object(r.useEffect)(()=>{D(Mm(j))},[j]),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;Object(r.useEffect)(()=>{const n=document.querySelector(t);return e.forEach(e=>{const t=document.createElement("div");t.setAttribute("id",e),n.appendChild(t)}),()=>{e.forEach(e=>{const t=document.getElementById(e);t&&n.removeChild(t)})}},[])}(["sendbird-modal-root","sendbird-dropdown-portal","sendbird-emoji-list-portal"],"body");const[Y,Q]=Object(r.useState)(h);Object(r.useEffect)(()=>{Q(h)},[h]),Object(r.useEffect)(()=>{const e=document.querySelector("body");e.classList.remove("sendbird-experimental__rem__units"),U&&e.classList.add("sendbird-experimental__rem__units")},[U]),Object(r.useEffect)(()=>{k.info("Setup theme","Theme: "+Y);try{const e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark"),e.classList.add("sendbird-theme--"+(Y||"light")),k.info("Finish setup theme")}catch(e){k.warning("Setup theme failed",""+e)}return()=>{try{const e=document.querySelector("body");e.classList.remove("sendbird-theme--light"),e.classList.remove("sendbird-theme--dark")}catch(e){}}},[Y]);const X=function(e,t){const[n,a]=Object(r.useState)(!0);return Object(r.useEffect)(()=>{const r=es();try{t.warning("sdk changed",r);const i=new Zn;i.onDisconnected=()=>{a(!1),t.warning("onDisconnected",{isOnline:n})},i.onReconnectStarted=()=>{a(!1),t.warning("onReconnectStarted",{isOnline:n})},i.onReconnectSucceeded=()=>{a(!0),t.warning("onReconnectSucceeded",{isOnline:n})},i.onReconnectFailed=()=>{e.reconnect(),t.warning("onReconnectFailed")},t.info("Added ConnectionHandler",r),null!=e&&e.addConnectionHandler&&e.addConnectionHandler(r,i)}catch(e){}return()=>{try{e.removeConnectionHandler(r),t.info("Removed ConnectionHandler",r)}catch(e){}}},[e]),Object(r.useEffect)(()=>{const n=()=>{try{t.warning("Try reconnecting SDK"),"OPEN"!==e.connectionState&&e.reconnect()}catch(e){}};return window.addEventListener("online",n),()=>{window.removeEventListener("online",n)}},[e]),Object(r.useEffect)(()=>{const e=document.querySelector("body");if(n)try{e.classList.remove("sendbird__offline"),t.info("Removed class sendbird__offline from body")}catch(e){}else try{e.classList.add("sendbird__offline"),t.info("Added class sendbird__offline to body")}catch(e){}},[n]),n}(P.sdk,k),Z=function(e,t){let{isConnected:n}=e,{logger:a}=t;const i=Object(r.useMemo)(()=>Rm({logger:a,cb:e=>{try{e.markAsRead()}catch(t){a.warning("Channel: Mark as delivered failed",{channel:e,error:t})}}}),[]);return Object(r.useEffect)(()=>{n||i.clear()},[n]),Um(()=>{i.clear()}),i}({isConnected:X},{logger:k}),$=function(e,t){let{isConnected:n}=e,{logger:a}=t;const i=Object(r.useMemo)(()=>Rm({logger:a,cb:e=>{try{e.markAsDelivered()}catch(t){a.warning("Channel: Mark as delivered failed",{channel:e,error:t})}}}),[]);return Object(r.useEffect)(()=>{n||i.clear()},[n]),Um(()=>{i.clear()}),i}({isConnected:X},{logger:k}),J=a.a.useMemo(()=>b?s(s({},Vu("en")),b):Vu("en"),[b]);return a.a.createElement(c.Provider,{value:{stores:{sdkStore:P,userStore:H},dispatchers:{sdkDispatcher:F,userDispatcher:G,reconnect:W},config:{disableMarkAsDelivered:C,renderUserProfile:N,onUserProfileMessage:T,allowProfileEdit:O,isOnline:X,userId:n,appId:t,accessToken:o,theme:Y,setCurrenttheme:Q,uikitMultipleFilesMessageLimit:M,userListQuery:E,logger:k,pubSub:x,imageCompression:s({compressionRate:.7},y),voiceRecord:v,userMention:{maxMentionCount:(null==R?void 0:R.maxMentionCount)||10,maxSuggestionCount:(null==R?void 0:R.maxSuggestionCount)||15},markAsReadScheduler:Z,markAsDeliveredScheduler:$,disableUserProfile:!B.common.enableUsingDefaultUserProfile,isReactionEnabled:q&&z(K).groupChannel.channel.enableReactions,isMentionEnabled:B.groupChannel.channel.enableMention,isVoiceMessageEnabled:B.groupChannel.channel.enableVoiceMessage,replyType:im(B.groupChannel.channel.replyType).upperCase,isTypingIndicatorEnabledOnChannelList:B.groupChannel.channelList.enableTypingIndicator,isMessageReceiptStatusEnabledOnChannelList:B.groupChannel.channelList.enableMessageReceiptStatus,showSearchIcon:q&&z(K).groupChannel.setting.enableMessageSearch,groupChannel:{enableOgtag:q&&z(K).groupChannel.channel.enableOgtag,enableTypingIndicator:B.groupChannel.channel.enableTypingIndicator,enableDocument:B.groupChannel.channel.input.enableDocument,threadReplySelectType:sm(B.groupChannel.channel.threadReplySelectType).upperCase},openChannel:{enableOgtag:q&&z(K).openChannel.channel.enableOgtag,enableDocument:B.openChannel.channel.input.enableDocument}}}},a.a.createElement(Qp,{logger:k,breakpoint:S},a.a.createElement(nd,{stringSet:J,dateLocale:_},a.a.createElement(jm,{isVoiceMessageEnabled:B.groupChannel.channel.enableVoiceMessage},i))))},Dm="SEND_MESSAGE_START",xm="SEND_MESSAGE_FAILED",Pm="SEND_USER_MESSAGE",Fm="SEND_FILE_MESSAGE",Hm="UPDATE_USER_MESSAGE",Gm="DELETE_MESSAGE",Bm="LEAVE_CHANNEL",zm="CREATE_CHANNEL",Vm=()=>{},qm=a.a.createContext({disableUserProfile:!0,isOpenChannel:!1,renderUserProfile:null,onUserProfileMessage:null}),Km=e=>{const{children:t}=e;return a.a.createElement(qm.Provider,{value:e},t)};Km.propTypes={children:od.a.oneOfType([od.a.element,od.a.arrayOf(od.a.element),od.a.any]).isRequired,isOpenChannel:od.a.bool,disableUserProfile:od.a.bool,renderUserProfile:od.a.func,onUserProfileMessage:od.a.func},Km.defaultProps={isOpenChannel:!1,disableUserProfile:!1,renderUserProfile:null,onUserProfileMessage:null};function Wm(e){let{sdk:t,sdkChannelHandlerId:n,channelListDispatcher:r,setChannelSource:a,onChannelSelect:i,userFilledChannelListQuery:s,logger:o,sortChannelList:l,disableAutoSelect:c,markAsDeliveredScheduler:u,disableMarkAsDelivered:d}=e;null!=t&&t.groupChannel?(e=>{let{sdk:t,sdkChannelHandlerId:n,channelListDispatcher:r,logger:a}=e;const i=new Tc({onChannelChanged:e=>{a.info("ChannelList: onChannelChanged",e),r({type:"ON_CHANNEL_CHANGED",payload:e})},onChannelDeleted:e=>{a.info("ChannelList: onChannelDeleted",e),r({type:"ON_CHANNEL_DELETED",payload:e})},onUserJoined:e=>{a.info("ChannelList: onUserJoined",e),null!=e&&e.lastMessage&&r({type:"ON_USER_JOINED",payload:e})},onUserReceivedInvitation:(e,n,i)=>{a.info("ChannelList: onUserReceivedInvitation",{channel:e,inviter:n,invitees:i});const{currentUser:s}=t;i.find(e=>(null==e?void 0:e.userId)===(null==s?void 0:s.userId))&&null!=e&&e.lastMessage&&r({type:"USER_INVITED",payload:e})},onUserBanned:(e,n)=>{const{currentUser:i}=t;a.info("Channel: onUserBanned",e),n.userId===i.userId?r({type:"ON_USER_LEFT",payload:{channel:e,isMe:!0}}):r({type:"ON_USER_LEFT",payload:{channel:e,isMe:!1}})},onUserLeft:(e,n)=>{const{currentUser:i}=t,s=i.userId===n.userId;a.info("ChannelList: onUserLeft",e),r({type:"ON_USER_LEFT",payload:{channel:e,isMe:s}})},onReadStatus:e=>{a.info("ChannelList: onReadStatus",e),r({type:"ON_READ_RECEIPT_UPDATED",payload:e})},onDeliveryReceiptUpdated:e=>{a.info("ChannelList: onDeliveryReceiptUpdated",e),null!=e&&e.lastMessage&&r({type:"ON_DELIVERY_RECEIPT_UPDATED",payload:e})},onMessageUpdated:(e,t)=>{null!=e&&e.lastMessage.isEqual(t)&&(a.info("ChannelList: onMessageUpdated",e),r({type:"ON_LAST_MESSAGE_UPDATED",payload:e}))},onChannelHidden:e=>{a.info("ChannelList: onChannelHidden",e),r({type:"ON_CHANNEL_ARCHIVED",payload:e})},onChannelFrozen:e=>{a.info("ChannelList: onChannelFrozen",e),r({type:"ON_CHANNEL_FROZEN",payload:e})},onChannelUnfrozen:e=>{a.info("ChannelList: onChannelUnfrozen",e),r({type:"ON_CHANNEL_UNFROZEN",payload:e})}});a.info("ChannelList: Added channelHandler"),t.groupChannel.addGroupChannelHandler(n,i)})({sdk:t,channelListDispatcher:r,sdkChannelHandlerId:n,logger:o}):o.warning("ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist",t),o.info("ChannelList - creating query",{userFilledChannelListQuery:s});const h=(e=>{let{sdk:t,userFilledChannelListQuery:n={}}=e;const r={includeEmpty:!1,limit:20,order:"latest_last_message"};n&&Object.keys(n).forEach(e=>{r[e]=n[e]});return t.groupChannel.createMyGroupChannelListQuery(r)})({sdk:t,userFilledChannelListQuery:s});o.info("ChannelList - created query",h),a(h),r({type:"INIT_CHANNELS_START"}),s&&(o.info("ChannelList - setting up channelListQuery",h),r({type:"CHANNEL_LIST_PARAMS_UPDATED",payload:{channelListQuery:h,currentUserId:t&&t.currentUser&&t.currentUser.userId}})),o.info("ChannelList - fetching channels"),h.hasNext?h.next().then(e=>{var n,a;o.info("ChannelList - fetched channels",e),o.info("ChannelList - highlight channel",e[0]);let s=e;l&&"function"==typeof l&&(s=l(e),o.info("ChannelList - channel list sorted",s)),c||i(s[0]),r({type:"INIT_CHANNELS_SUCCESS",payload:{channelList:s,disableAutoSelect:c}});(null==t||null===(n=t.appInfo)||void 0===n||null===(a=n.premiumFeatureList)||void 0===a?void 0:a.find(e=>"delivery_receipt"===e))&&!d&&s.forEach(e=>{u.push(e)})}).catch(e=>{e&&(o.error("ChannelList - couldnt fetch channels",e),r({type:"INIT_CHANNELS_FAILURE"}))}):o.info("ChannelList - there are no more channels")}var Ym={initialized:!1,loading:!0,allChannels:[],currentChannel:null,channelListQuery:null,currentUserId:"",disableAutoSelect:!1};function Qm(e,t){switch(t.type){case"INIT_CHANNELS_START":return s(s({},e),{},{loading:!0});case"RESET_CHANNEL_LIST":return Ym;case"INIT_CHANNELS_SUCCESS":{const{channelList:n,disableAutoSelect:r}=t.payload;return s(s({},e),{},{initialized:!0,loading:!1,allChannels:n,disableAutoSelect:r,currentChannel:!r&&n&&n.length&&n.length>0?n[0]:null})}case"FETCH_CHANNELS_SUCCESS":{const n=e.allChannels.map(e=>e.url),r=t.payload.filter(e=>{let{url:t}=e;return!n.find(e=>e===t)});return s(s({},e),{},{allChannels:[...e.allChannels,...r]})}case"USER_INVITED":{const n=t.payload;return e.channelListQuery?vu(e.channelListQuery,n,e.currentUserId)?s(s({},e),{},{allChannels:yu(e.allChannels,n)}):s(s({},e),{},{currentChannel:n}):s(s({},e),{},{allChannels:[n,...e.allChannels.filter(e=>e.url!==(null==n?void 0:n.url))]})}case"CREATE_CHANNEL":{const n=t.payload;return e.channelListQuery?vu(e.channelListQuery,n,e.currentUserId)?s(s({},e),{},{allChannels:yu(e.allChannels,n)}):s(s({},e),{},{currentChannel:n}):s(s({},e),{},{allChannels:[n,...e.allChannels.filter(e=>e.url!==(null==n?void 0:n.url))],currentChannel:n})}case"ON_CHANNEL_ARCHIVED":{var n;const r=t.payload;if(e.channelListQuery&&vu(e.channelListQuery,r,e.currentUserId))return s(s({},e),{},{allChannels:yu(e.allChannels,r)});const a=(null==r?void 0:r.url)===(null===(n=e.currentChannel)||void 0===n?void 0:n.url)?e.allChannels[e.allChannels[0].url===(null==r?void 0:r.url)?1:0]:e.currentChannel;return s(s({},e),{},{allChannels:e.allChannels.filter(e=>{let{url:t}=e;return t!==(null==r?void 0:r.url)}),currentChannel:e.disableAutoSelect?null:a})}case"LEAVE_CHANNEL_SUCCESS":case"ON_CHANNEL_DELETED":{var r;const n=t.payload;return s(s({},e),{},{currentChannel:n===(null===(r=e.currentChannel)||void 0===r?void 0:r.url)?e.allChannels[0]:e.currentChannel,allChannels:e.allChannels.filter(e=>{let{url:t}=e;return t!==n})})}case"ON_USER_LEFT":{var a;const{channel:n,isMe:r}=t.payload;if(e.channelListQuery){var i;if(vu(e.channelListQuery,n,e.currentUserId)){var o;const t=yu(e.allChannels,n),a=r&&(null==n?void 0:n.url)===(null===(o=e.currentChannel)||void 0===o?void 0:o.url)?t[0]:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:a,allChannels:t})}const t=(null==n?void 0:n.url)===(null===(i=e.currentChannel)||void 0===i?void 0:i.url)?e.allChannels[0]:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:t,allChannels:e.allChannels.filter(e=>{let{url:t}=e;return t!==(null==n?void 0:n.url)})})}const l=e.allChannels.filter(e=>!(e.url===(null==n?void 0:n.url)&&r)),c=r&&(null==n?void 0:n.url)===(null===(a=e.currentChannel)||void 0===a?void 0:a.url)?l[0]:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:c,allChannels:l})}case"ON_USER_JOINED":case"ON_CHANNEL_CHANGED":case"ON_READ_RECEIPT_UPDATED":case"ON_DELIVERY_RECEIPT_UPDATED":{const{allChannels:n=[]}=e,r=t.payload,{unreadMessageCount:a}=r;if(null==r||!r.lastMessage)return e;if(e.channelListQuery){var l;if(vu(e.channelListQuery,r,e.currentUserId))return s(s({},e),{},{allChannels:yu(n,r)});const t=(null==r?void 0:r.url)===(null===(l=e.currentChannel)||void 0===l?void 0:l.url)?e.allChannels[e.allChannels[0].url===(null==r?void 0:r.url)?1:0]:e.currentChannel;return s(s({},e),{},{currentChannel:e.disableAutoSelect?null:t,allChannels:e.allChannels.filter(e=>{let{url:t}=e;return t!==(null==r?void 0:r.url)})})}if(0===a){const t=n.find(e=>{let{url:t}=e;return t===(null==r?void 0:r.url)});if(0===(t&&t.unreadMessageCount))return s(s({},e),{},{allChannels:e.allChannels.map(e=>e.url===(null==r?void 0:r.url)?r:e)})}return s(s({},e),{},{allChannels:[r,...e.allChannels.filter(e=>{let{url:n}=e;return n!==t.payload.url})]})}case"SET_CURRENT_CHANNEL":return s(s({},e),{},{currentChannel:t.payload});case"ON_LAST_MESSAGE_UPDATED":return s(s({},e),{},{allChannels:e.allChannels.map(e=>(null==e?void 0:e.url)===t.payload.url?t.payload:e)});case"ON_CHANNEL_FROZEN":{const n=t.payload;if(e.channelListQuery){var c;if(vu(e.channelListQuery,n,e.currentUserId))return s(s({},e),{},{allChannels:yu(e.allChannels,n)});const t=(null==n?void 0:n.url)===(null===(c=e.currentChannel)||void 0===c?void 0:c.url)?e.allChannels[e.allChannels[0].url===(null==n?void 0:n.url)?1:0]:e.currentChannel;return s(s({},e),{},{allChannels:e.allChannels.filter(e=>{let{url:t}=e;return t!==(null==n?void 0:n.url)}),currentChannel:e.disableAutoSelect?null:t})}return s(s({},e),{},{allChannels:e.allChannels.map(e=>e.url===(null==n?void 0:n.url)?(e.isFrozen=!0,e):e)})}case"ON_CHANNEL_UNFROZEN":{const n=t.payload;if(e.channelListQuery){var u;if(vu(e.channelListQuery,n,e.currentUserId))return s(s({},e),{},{allChannels:yu(e.allChannels,n)});const t=(null==n?void 0:n.url)===(null===(u=e.currentChannel)||void 0===u?void 0:u.url)?e.allChannels[e.allChannels[0].url===(null==n?void 0:n.url)?1:0]:e.currentChannel;return s(s({},e),{},{allChannels:e.allChannels.filter(e=>{let{url:t}=e;return t!==(null==n?void 0:n.url)}),currentChannel:e.disableAutoSelect?null:t})}return s(s({},e),{},{allChannels:e.allChannels.map(e=>e.url===(null==n?void 0:n.url)?(e.isFrozen=!1,e):e)})}case"CHANNEL_REPLACED_TO_TOP":return e.channelListQuery?vu(e.channelListQuery,t.payload,e.currentUserId)?s(s({},e),{},{allChannels:[t.payload,...e.allChannels.filter(e=>(null==e?void 0:e.url)!==t.payload.url)]}):e:s(s({},e),{},{allChannels:[t.payload,...e.allChannels.filter(e=>(null==e?void 0:e.url)!==t.payload.url)]});case"CHANNEL_LIST_PARAMS_UPDATED":return s(s({},e),{},{currentUserId:t.payload.currentUserId,channelListQuery:t.payload.channelListQuery});default:return e}}const Xm=a.a.createContext({disableUserProfile:!0,allowProfileEdit:!0,onBeforeCreateChannel:null,onThemeChange:null,onProfileEditSuccess:null,onChannelSelect:null,queries:{},className:null,initialized:!1,loading:!1,allChannels:[],currentChannel:null,channelListQuery:{},currentUserId:null,channelListDispatcher:null,channelSource:null,typingChannels:[]}),Zm=e=>{var t,n;const{children:i,className:o,disableUserProfile:l,allowProfileEdit:c,queries:u,onProfileEditSuccess:d,onThemeChange:h,onBeforeCreateChannel:f,sortChannelList:p,overrideInviteUser:m,activeChannelUrl:b,isTypingIndicatorEnabled:_=null,isMessageReceiptStatusEnabled:g=null}=e,v=(null==e?void 0:e.disableAutoSelect)||!!b,E=(null==e?void 0:e.onChannelSelect)||Vm,y=ku(),{config:O,stores:C}=y,{sdkStore:N}=C,{pubSub:T,logger:S,onUserProfileMessage:I}=O,{markAsDeliveredScheduler:A,disableMarkAsDelivered:w=!1,isTypingIndicatorEnabledOnChannelList:M=!1,isMessageReceiptStatusEnabledOnChannelList:j=!1}=O,R=null==N?void 0:N.sdk,{premiumFeatureList:U=[]}=null!==(t=null==R?void 0:R.appInfo)&&void 0!==t?t:{},L=l||(null==O?void 0:O.disableUserProfile),k=null==O?void 0:O.renderUserProfile,D=c||(null==O?void 0:O.allowProfileEdit),x=null==u?void 0:u.channelListQuery,P=null==u?void 0:u.applicationUserListQuery,F=null==N?void 0:N.initialized,[H,G]=Object(r.useReducer)(Qm,Ym),{currentChannel:B}=H,[z,V]=Object(r.useState)(null),[q,K]=Object(r.useState)([]);Object(r.useEffect)(()=>{const e=((e,t)=>{const n=new Map;return e?(n.set(zm,e.subscribe(zm,e=>{const{channel:n}=e;t({type:"CREATE_CHANNEL",payload:n})})),n.set(Hm,e.subscribe(Hm,e=>{var n;const{channel:r,message:a}=e,i=r;(null==i||null===(n=i.lastMessage)||void 0===n?void 0:n.messageId)===a.messageId&&(i.lastMessage=a),r&&t({type:"ON_LAST_MESSAGE_UPDATED",payload:i})})),n.set(Bm,e.subscribe(Bm,e=>{const{channel:n}=e;t({type:"LEAVE_CHANNEL_SUCCESS",payload:null==n?void 0:n.url})})),n.set(Dm,e.subscribe(Dm,e=>{const{channel:n}=e;t({type:"CHANNEL_REPLACED_TO_TOP",payload:n})})),n):n})(T,G);return()=>{(e=>{e.forEach(e=>{try{e.remove()}catch(e){}})})(e)}},[F]),Object(r.useEffect)(()=>{const e=es();var t;F?(S.info("ChannelList: Setup channelHandlers"),Wm({sdk:R,sdkChannelHandlerId:e,channelListDispatcher:G,setChannelSource:V,onChannelSelect:E,userFilledChannelListQuery:x,logger:S,sortChannelList:p,disableAutoSelect:v,markAsDeliveredScheduler:A,disableMarkAsDelivered:w})):(S.info("ChannelList: Removing channelHandlers"),null!=R&&null!==(t=R.groupChannel)&&void 0!==t&&t.removeGroupChannelHandler&&R.groupChannel.removeGroupChannelHandler(e),V(null),G({type:"RESET_CHANNEL_LIST",payload:null}));return()=>{var t,n;(S.info("ChannelList: Removing channelHandlers"),null!=R&&null!==(t=R.groupChannel)&&void 0!==t&&t.removeGroupChannelHandler)&&(null==R||null===(n=R.groupChannel)||void 0===n||n.removeGroupChannelHandler(e))}},[F,x,p]),Object(r.useEffect)(()=>{var e;let t="";if(null!=R&&null!==(e=R.groupChannel)&&void 0!==e&&e.addGroupChannelHandler){var n;t=es();const e=new Tc({onTypingStatusUpdated:e=>{var t;const n=null==e||null===(t=e.getTypingUsers())||void 0===t?void 0:t.length,r=q.filter(t=>t.url!==e.url);K(n>0?[...r,e]:r)},onUnreadMemberStatusUpdated(e){G({type:"ON_LAST_MESSAGE_UPDATED",payload:e})},onUndeliveredMemberStatusUpdated(e){G({type:"ON_LAST_MESSAGE_UPDATED",payload:e})},onMessageUpdated(e){G({type:"ON_LAST_MESSAGE_UPDATED",payload:e}),R.groupChannel.getChannelWithoutCache(e.url).then(e=>{G({type:"ON_LAST_MESSAGE_UPDATED",payload:e})})},onMentionReceived(e){G({type:"ON_LAST_MESSAGE_UPDATED",payload:e}),R.groupChannel.getChannelWithoutCache(e.url).then(e=>{G({type:"ON_LAST_MESSAGE_UPDATED",payload:e})})}});null==R||null===(n=R.groupChannel)||void 0===n||n.addGroupChannelHandler(t,e)}return()=>{var e;null!=R&&null!==(e=R.groupChannel)&&void 0!==e&&e.removeGroupChannelHandler&&""!==t&&R.groupChannel.removeGroupChannelHandler(t)}},[null==R||null===(n=R.currentUser)||void 0===n?void 0:n.userId]);const W=Object(r.useMemo)(()=>({applicationUserListQuery:P,channelListQuery:x}),[P,x]),{allChannels:Y}=H,Q=p&&"function"==typeof p?p(Y):Y;if(Q.length!==Y.length){const e="ChannelList: You have removed/added extra channels on sortChannelList\n      this could cause unexpected problems";console.warn(e,{before:Y,after:Q}),S.warning(e,{before:Y,after:Q})}Object(r.useEffect)(()=>{R&&R.groupChannel&&B&&null!=B&&B.url&&R.groupChannel.getChannel(B.url).then(e=>{E(e||null)})},[null==B?void 0:B.url]),function(e,t){let{activeChannelUrl:n,channels:a,sdk:i}=e,{logger:s,channelListDispatcher:o}=t;Object(r.useEffect)(()=>{if(n){s.info("ChannelListProvider: looking for active channel",{activeChannelUrl:n});const t=null==a?void 0:a.find(e=>e.url===n);var e;if(t)o({type:"SET_CURRENT_CHANNEL",payload:t});else s.info("ChannelListProvider: searching backend for active channel",{activeChannelUrl:n}),null==i||null===(e=i.groupChannel)||void 0===e||e.getChannel(n).then(e=>{o({type:"FETCH_CHANNELS_SUCCESS",payload:[e]}),o({type:"SET_CURRENT_CHANNEL",payload:e})}).catch(()=>{s.warning("ChannelListProvider: Active channel not found")})}},[n])}({activeChannelUrl:b,channels:Q,sdk:R},{logger:S,channelListDispatcher:G});const X=((e,t)=>{let{channelSource:n,disableMarkAsDelivered:a}=e,{channelListDispatcher:i,logger:s,markAsDeliveredScheduler:o}=t;return Object(r.useCallback)(async()=>{if(null!=n&&n.hasNext){s.info("ChannelList: starting fetch"),i({type:"FETCH_CHANNELS_START",payload:null});try{const e=await n.next();s.info("ChannelList: succeeded fetch",{channelList:e}),i({type:"FETCH_CHANNELS_SUCCESS",payload:e}),a||(s.info("ChannelList: mark as delivered to fetched channels"),null==e||e.forEach(e=>{(null==e?void 0:e.unreadMessageCount)>0&&o.push(e)}))}catch(e){s.error("ChannelList: failed fetch",{error:e}),i({type:"FETCH_CHANNELS_FAILURE",payload:e})}}else s.info("ChannelList: not able to fetch")},[n,a])})({channelSource:z,disableMarkAsDelivered:w||!U.some(e=>e===Lu.b)},{channelListDispatcher:G,logger:S,markAsDeliveredScheduler:A});return a.a.createElement(Xm.Provider,{value:s(s({className:o,disableUserProfile:l,queries:W,onProfileEditSuccess:d,onThemeChange:h,onBeforeCreateChannel:f,overrideInviteUser:m,onChannelSelect:E,sortChannelList:p,allowProfileEdit:D,channelListDispatcher:G,channelSource:z},H),{},{allChannels:Q,typingChannels:q,isTypingIndicatorEnabled:null!==_?_:M,isMessageReceiptStatusEnabled:null!==g?g:j,fetchChannelList:X})},a.a.createElement(Km,{disableUserProfile:null!=L?L:null==O?void 0:O.disableUserProfile,renderUserProfile:k,onUserProfileMessage:I},a.a.createElement("div",{className:"sendbird-channel-list "+o},i)))};function $m(){return Object(r.useContext)(Xm)}var Jm=e=>"number"==typeof e?e+"px":e;function eb(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?"50%":Jm(t)}const tb=e=>{let{className:t="",url:n,alt:i="",width:s=null,height:o=null,circle:l=!1,fixedSize:c=!1,placeHolder:u=null,defaultComponent:d=null,borderRadius:h=null,onLoad:f=(()=>{}),onError:p=(()=>{})}=e;const[m,b]=Object(r.useState)(!1),[_,g]=Object(r.useState)(!0),v=Jm(s),E=Jm(o),y=Object(r.useMemo)(()=>"function"==typeof d?d():d,[d]),O=Object(r.useMemo)(()=>u&&"function"==typeof u?u({style:{width:"100%",minWidth:v,maxWidth:c?v:"400px",height:E,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):null,[u]),C=Object(r.useMemo)(()=>(b(!1),a.a.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:i,onLoad:()=>{g(!1),f()},onError:()=>{b(!0),p()}})),[n]);return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-image-renderer"].join(" "),style:{width:"100%",minWidth:v,maxWidth:c?v:"400px",height:E}},_&&O,m?y:a.a.createElement("div",{className:"sendbird-image-renderer__image",style:{width:"100%",minWidth:v,maxWidth:c?v:"400px",height:E,position:"absolute",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:`url(${n})`,borderRadius:eb(l,h)}}),C)};var nb=e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null};const rb=e=>{let{width:t,height:n}=e,r=nb(t),i=nb(n);return"number"==typeof r&&(r*=.575),"number"==typeof i&&(i*=.575),a.a.createElement("div",{className:"sendbird-avatar-img--default",style:{width:t,height:n}},a.a.createElement(Bp,{type:zp.USER,fillColor:Vp.CONTENT,width:r,height:i}))},ab=e=>{let{src:t="",alt:n="",height:r,width:i,customDefaultComponent:s}=e;const o=()=>s?s({width:i,height:r}):(e=>{let{width:t,height:n}=e;return a.a.createElement(rb,{width:t,height:n})})({width:i,height:r});return"string"==typeof t?a.a.createElement(tb,{className:"sendbird-avatar-img",url:t,height:r,width:i,alt:n,defaultComponent:o}):t&&t.length?1===t.length?a.a.createElement(tb,{className:"sendbird-avatar-img",url:t[0],height:r,width:i,alt:n,defaultComponent:o}):2===t.length?a.a.createElement("div",{className:"sendbird-avatar--inner__two-child"},a.a.createElement(tb,{className:"sendbird-avatar-img",url:t[0],height:r,width:i,alt:n,defaultComponent:o}),a.a.createElement(tb,{className:"sendbird-avatar-img",url:t[1],height:r,width:i,alt:n,defaultComponent:o})):3===t.length?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},a.a.createElement(tb,{className:"sendbird-avatar-img",url:t[0],height:r,width:i,alt:n,defaultComponent:o})),a.a.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},a.a.createElement(tb,{className:"sendbird-avatar-img",url:t[1],height:r,width:i,alt:n,defaultComponent:o}),a.a.createElement(tb,{className:"sendbird-avatar-img",url:t[2],height:r,width:i,alt:n,defaultComponent:o}))):a.a.createElement("div",{className:"sendbird-avatar--inner__four-child"},t.slice(0,4).map(e=>a.a.createElement(tb,{className:"sendbird-avatar-img",url:e,height:r,width:i,alt:n,key:es(),defaultComponent:o}))):a.a.createElement(tb,{className:"sendbird-avatar-img",url:"",height:r,width:i,alt:n,defaultComponent:o})};function ib(e,t){let{className:n="",src:r="",alt:i="",width:s="56px",height:o="56px",onClick:l,customDefaultComponent:c}=e;return a.a.createElement("div",{className:[...Array.isArray(n)?n:[n],"sendbird-avatar"].join(" "),role:"button",ref:t,style:{height:o,width:s},onClick:l,onKeyDown:l,tabIndex:0},a.a.createElement(ab,{src:r,width:s,height:o,alt:i,customDefaultComponent:c}))}var sb=a.a.forwardRef(ib);const ob=e=>{let{renderHeader:t,renderTitle:n,renderIconButton:i,onEdit:s,allowProfileEdit:o}=e;const{stores:l,config:c}=ku(),{user:u}=l.userStore,{logger:d}=c,{stringSet:h}=Object(r.useContext)(td);t&&(null==d||d.warning('Recomend to use "renderTitle" instead of "renderHeader". It will be deprecated.'));const f=t||n;return a.a.createElement("div",{className:["sendbird-channel-header",o?"sendbird-channel-header--allow-edit":""].join(" ")},(null==f?void 0:f())||a.a.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:()=>{null==s||s()},onKeyDown:()=>{null==s||s()},tabIndex:0},a.a.createElement("div",{className:"sendbird-channel-header__title__left"},a.a.createElement(sb,{width:"32px",height:"32px",src:u.profileUrl,alt:u.nickname})),a.a.createElement("div",{className:"sendbird-channel-header__title__right"},a.a.createElement(hd,{className:"sendbird-channel-header__title__right__name",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_1},u.nickname||h.NO_NAME),a.a.createElement(hd,{className:"sendbird-channel-header__title__right__user-id",type:fd.BODY_2,color:pd.ONBACKGROUND_2},u.userId))),a.a.createElement("div",{className:"sendbird-channel-header__right-icon"},null==i?void 0:i()))},lb=e=>{const{stores:t={}}=e,{sdkStore:n={}}=t,{sdk:r}=n;return r},cb=e=>{const{config:t={}}=e,{pubSub:n}=t;return n},ub=e=>t=>new Promise((n,r)=>{const a=lb(e),i=cb(e);a||r(new Error("Sdk not found")),a.groupChannel||r(new Error("Not found GroupChannelModule")),a.groupChannel.createChannel&&"function"==typeof a.groupChannel.createChannel||r(new Error('Not found the function "createChannel"')),a.groupChannel.createChannel(t).then(e=>{n(e),i.publish(zm,{channel:e})}).catch(r)});let db=function(e){return e.GROUP="group",e.SUPERGROUP="supergroup",e.BROADCAST="broadcast",e}({});const hb=a.a.createContext(void 0),fb=e=>{var t;const{children:n,onCreateChannel:i,onBeforeCreateChannel:s,overrideInviteUser:o,userListQuery:l}=e,c=ku(),u=null==c||null===(t=c.config)||void 0===t?void 0:t.userListQuery,d=ub(c),[h,f]=Object(r.useState)(0),[p,m]=Object(r.useState)(db.GROUP);return a.a.createElement(hb.Provider,{value:{onBeforeCreateChannel:s,createChannel:d,onCreateChannel:i,overrideInviteUser:o,userListQuery:l||u,step:h,setStep:f,type:p,setType:m}},n)},pb=()=>a.a.useContext(hb);function mb(e){const{height:t=24,width:n=24}=e;return a.a.createElement("div",{className:"sendbird-muted-avatar",style:{height:t+"px",width:n+"px"}},a.a.createElement("div",{className:"sendbird-muted-avatar__icon"},a.a.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:t+"px",width:n+"px"}}),a.a.createElement(Bp,{type:zp.MUTE,fillColor:Vp.WHITE,width:t-8+"px",height:n-8+"px"})))}function bb(e){let{id:t,checked:n=!1,disabled:i,onChange:s}=e;const[o,l]=Object(r.useState)(n);return a.a.createElement("label",{className:["sendbird-checkbox",i?"disabled":""].join(" "),htmlFor:t},a.a.createElement("input",{disabled:i,id:t,type:"checkbox",checked:o,onClick:()=>{i||l(!o)},onChange:s}),a.a.createElement("span",{className:["sendbird-checkbox--checkmark",i?"disabled":""].join(" ")}))}function _b(e){var t,n;let{user:i,currentUserId:s,disableMessaging:o=!1,onSuccess:l}=e;const c=ku(),u=ub(c),d=null==c||null===(t=c.config)||void 0===t?void 0:t.logger,{stringSet:h}=Object(r.useContext)(td),f=s||(null==c||null===(n=c.config)||void 0===n?void 0:n.userId),{onUserProfileMessage:p}=Object(r.useContext)(qm);return a.a.createElement("div",{className:"sendbird__user-profile"},a.a.createElement("section",{className:"sendbird__user-profile-avatar"},a.a.createElement(sb,{height:"80px",width:"80px",src:null==i?void 0:i.profileUrl})),a.a.createElement("section",{className:"sendbird__user-profile-name"},a.a.createElement(hd,{type:fd.H_2,color:pd.ONBACKGROUND_1},(null==i?void 0:i.nickname)||h.NO_NAME)),(null==i?void 0:i.userId)!==f&&!o&&a.a.createElement("section",{className:"sendbird__user-profile-message"},a.a.createElement(Od,{type:Ed.SECONDARY,onClick:()=>{const e={isDistinct:!1,invitedUserIds:[null==i?void 0:i.userId],operatorUserIds:[f]};l(),u(e).then(e=>{d.info("UserProfile, channel create",e),"function"==typeof p&&(null==p||p(e))})}},h.USER_PROFILE__MESSAGE)),a.a.createElement("div",{className:"sendbird__user-profile-separator"}),a.a.createElement("section",{className:"sendbird__user-profile-userId"},a.a.createElement(hd,{className:"sendbird__user-profile-userId--label",type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},h.USER_PROFILE__USER_ID),a.a.createElement(hd,{className:"sendbird__user-profile-userId--value",type:fd.BODY_1,color:pd.ONBACKGROUND_1},null==i?void 0:i.userId)))}const gb="sendbird-sort-by-row";function vb(e){let{className:t="",maxItemCount:n,itemWidth:r,itemHeight:i,children:s}=e;if(Array.isArray(s)&&s.length>n){const e=[];for(let o=0;o<s.length;o+=n)e.push(a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],gb].join(" "),key:es(),style:{width:r*n,height:i}},s.slice(o,o+n)));return a.a.createElement(a.a.Fragment,null,e)}return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],gb].join(" "),style:{width:r*(Array.isArray(s)?s.length:1),height:i}},s)}class Eb extends a.a.Component{constructor(e){super(e),o(this,"menuRef",a.a.createRef()),o(this,"setupEvents",()=>{const{closeDropdown:e}=this.props,{menuRef:t}=this,n=n=>{var r,a;null==t||!t.current||null!=t&&null!==(r=t.current)&&void 0!==r&&null!==(a=r.contains)&&void 0!==a&&a.call(r,n.target)||null==e||e()};this.setState({handleClickOutside:n}),document.addEventListener("mousedown",n)}),o(this,"cleanUpEvents",()=>{const{handleClickOutside:e}=this.state;document.removeEventListener("mousedown",e)}),o(this,"getMenuPosition",()=>{var e,t;const{parentRef:n,openLeft:r}=this.props,a=null==n||null===(e=n.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),i=(null==a?void 0:a.x)||(null==a?void 0:a.left)||0,s=(null==a?void 0:a.y)||(null==a?void 0:a.top)||0,o={top:s,left:i};if(!this.menuRef.current)return o;const{innerWidth:l,innerHeight:c}=window,u=this.menuRef.current.getBoundingClientRect();if(s+u.height+60>c&&(o.top-=u.height),i+u.width>l&&!r&&(o.left-=u.width),o.top<0&&(o.top=u.height<c?(c-u.height)/2:0),o.top+=32,r){const e=Number.isNaN(u.width-30)?108:u.width-30;o.left-=e}return o.left<0&&(o.left=u.width<l?(l-u.width)/2:0),this.setState({menuStyle:o}),o}),this.state={menuStyle:{},handleClickOutside:()=>{}}}componentDidMount(){this.setupEvents(),this.getMenuPosition()}componentWillUnmount(){this.cleanUpEvents()}render(){var e;const{menuStyle:t}=this.state,{children:n,style:r,className:i=""}=this.props;return Object(ad.createPortal)(a.a.createElement("div",{className:null===(e=this.props)||void 0===e?void 0:e.className},a.a.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),a.a.createElement("ul",{className:i+" sendbird-dropdown__menu",ref:this.menuRef,style:s({display:"inline-block",position:"fixed",left:Math.round(t.left)+"px",top:Math.round(t.top)+"px"},r)},n)),document.getElementById("sendbird-dropdown-portal"))}}const yb={x:0,y:0,left:0,top:0,height:0},Ob=Eb,Cb=e=>{let{children:t,parentRef:n,parentContainRef:i,spaceFromTrigger:s={x:0,y:0},closeDropdown:o}=e;const[l,c]=Object(r.useState)({left:0,top:0}),u=Object(r.useRef)(null);Object(r.useEffect)(()=>(i&&null!=i&&i.current&&i.current.classList.add("sendbird-reactions--pressed"),()=>{i&&null!=i&&i.current&&i.current.classList.remove("sendbird-reactions--pressed")}),[]),Object(r.useEffect)(()=>{const e=e=>{var t,n;null==u||!u.current||null!=u&&null!==(t=u.current)&&void 0!==t&&null!==(n=t.contains)&&void 0!==n&&n.call(t,e.target)||o()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),Object(r.useEffect)(()=>{var e,t;const r=(null==s?void 0:s.x)||0,a=(null==s?void 0:s.y)||0,i=null!==(e=null==n||null===(t=n.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==e?e:yb,o=i.x||i.left,l={top:i.y||i.top,left:o};if(null!=u&&u.current){var d;const e=null==u||null===(d=u.current)||void 0===d?void 0:d.getBoundingClientRect();l.top<e.height?(l.top+=i.height,l.top+=a):(l.top-=e.height,l.top-=a),l.left-=e.width/2,l.left+=i.height/2-2,l.left+=r;const t=window.innerWidth-e.width;t<l.left&&(l.left=t),l.left<0&&(l.left=0),c(l)}else c(l)},[]);const d=document.getElementById("sendbird-emoji-list-portal");return d?Object(ad.createPortal)(a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),a.a.createElement("ul",{className:"sendbird-dropdown__reaction-bar",ref:u,style:{display:"inline-block",position:"fixed",left:Math.round(l.left)+"px",top:Math.round(l.top)+"px"}},a.a.createElement(vb,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},t))),d):null},Nb=e=>{let{className:t="",children:n,onClick:r,disable:i=!1,dataSbId:s=""}=e;const o=e=>{!i&&r&&(null==r||r(e))};return a.a.createElement("li",{className:lu([t,"sendbird-dropdown__menu-item",i?"disable":""]),role:"menuitem","aria-disabled":!!i,onClick:o,onKeyPress:e=>{13===e.keyCode&&o(e)},tabIndex:0,"data-sb-id":s},a.a.createElement(hd,{className:"sendbird-dropdown__menu-item__text",type:fd.SUBTITLE_2,color:i?pd.ONBACKGROUND_4:pd.ONBACKGROUND_1},n))};function Tb(e){let{menuTrigger:t,menuItems:n,isOpen:i}=e;const[s,o]=Object(r.useState)(!1);return a.a.createElement("div",{className:"sendbird-context-menu",style:{display:"inline"}},null==t?void 0:t(()=>o(!s)),(s||i)&&n(()=>o(!1)))}function Sb(e){let{user:t,className:n,checked:i,checkBox:s,isOperator:o,disabled:l,disableMessaging:c,currentUser:u,action:d,onChange:h,avatarSize:f="40px"}=e;const p=t.userId,m=a.a.useRef(null),b=a.a.useRef(null),_=a.a.useRef(null),{disableUserProfile:g,renderUserProfile:v}=Object(r.useContext)(qm),{stringSet:E}=Object(r.useContext)(td);return a.a.createElement("div",{className:[...Array.isArray(n)?n:[n],"sendbird-user-list-item"].join(" "),ref:b},(null==t?void 0:t.isMuted)&&a.a.createElement(mb,{height:40,width:40}),a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(sb,{className:"sendbird-user-list-item__avatar",ref:_,src:t.profileUrl,width:f,height:f,onClick:()=>{g||e()}}),menuItems:e=>a.a.createElement(Ob,{openLeft:!0,parentRef:_,parentContainRef:_,closeDropdown:e,style:{paddingTop:"0px",paddingBottom:"0px"}},v?v({user:t,currentUserId:u,close:e}):a.a.createElement(_b,{disableMessaging:c,user:t,currentUserId:u,onSuccess:e}))}),a.a.createElement(hd,{className:"sendbird-user-list-item__title",type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},t.nickname||E.NO_NAME,u===t.userId&&" (You)"),!t.nickname&&a.a.createElement(hd,{className:"sendbird-user-list-item__subtitle",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},t.userId),s&&a.a.createElement("label",{className:"sendbird-user-list-item__checkbox",htmlFor:p},a.a.createElement(bb,{id:p,checked:i,disabled:l,onChange:e=>h(e)})),o&&a.a.createElement(hd,{className:["sendbird-user-list-item__operator",s?"checkbox":""].join(" "),type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_2},"Operator"),d&&a.a.createElement("div",{className:"sendbird-user-list-item__action",ref:m},d({actionRef:m,parentRef:b})))}const Ib=(e,t)=>("broadcast"===t&&(e.isBroadcast=!0),"supergroup"===t&&(e.isSuper=!0),e),Ab=()=>{try{document.documentElement.style.setProperty("--sendbird-vh",.01*window.innerHeight+"px")}catch(e){}},wb=e=>{var t,n,i;let{onCancel:o,userListQuery:l}=e;const{onBeforeCreateChannel:c,onCreateChannel:u,overrideInviteUser:d,createChannel:h,type:f}=pb(),p=ku(),m=null==p||null===(t=p.config)||void 0===t?void 0:t.userId,b=null==p||null===(n=p.stores)||void 0===n||null===(i=n.sdkStore)||void 0===i?void 0:i.sdk,_=[m],[g,v]=Object(r.useState)([]),[E,y]=Object(r.useState)({}),{stringSet:O}=Object(r.useContext)(td),[C,N]=Object(r.useState)(null),T=Object.keys(E).length,S=O.MODAL__CREATE_CHANNEL__TITLE,I=O.BUTTON__CREATE,A=l?l():(e=>{let{sdk:t,userFilledApplicationUserListQuery:n}=e;if(null!=t&&t.createApplicationUserListQuery){const e=null==t?void 0:t.createApplicationUserListQuery();return n&&Object.keys(n).forEach(t=>{e[t]=n[t]}),e}})({sdk:b});return Object(r.useEffect)(()=>{const e=A;N(e),null!=e&&e.isLoading||e.next().then(e=>{v(e)})},[]),Object(r.useEffect)(()=>(Ab(),window.addEventListener("resize",Ab),()=>{window.removeEventListener("resize",Ab)}),[]),a.a.createElement(em,{isFullScreenOnMobile:!0,titleText:S,submitText:I,type:Ed.PRIMARY,disabled:g.length>1&&0===Object.keys(E).length,onCancel:o,onSubmit:()=>{const e=Object.keys(E).length>0?Object.keys(E):[m];if("function"!=typeof d){if(c){const t=c(e);Ib(t,f),h(t).then(e=>{u(e)})}else{const t={};t.invitedUserIds=e,t.isDistinct=!1,m&&(t.operatorUserIds=[m]),Ib(t,f),h(t).then(e=>{u(e)})}o()}else d({users:e,onClose:o,channelType:f})}},a.a.createElement("div",null,a.a.createElement(hd,{color:T>0?pd.PRIMARY:pd.ONBACKGROUND_3,type:fd.CAPTION_1},`${T} ${O.MODAL__INVITE_MEMBER__SELECTED}`),a.a.createElement("div",{className:"sendbird-create-channel--scroll",onScroll:e=>{const t=e.target,{hasNext:n}=C,r=t.clientHeight+t.scrollTop+50>t.scrollHeight;n&&r&&C.next().then(e=>{v([...g,...e])})}},g.map(e=>!(e=>t=>null==e?void 0:e.includes(t))(_)(e.userId)&&a.a.createElement(Sb,{key:e.userId,user:e,checkBox:!0,checked:E[e.userId],onChange:e=>{const t=s(s({},E),{},{[e.target.id]:e.target.checked});e.target.checked||delete t[e.target.id],y(t)}})))))},Mb=e=>{const{onCancel:t}=e,n=ku(),i=lb(n),s=pb(),{setStep:o,setType:l}=s,{stringSet:c}=Object(r.useContext)(td),u=(e=>{var t;const n=null==e||null===(t=e.appInfo)||void 0===t?void 0:t.applicationAttributes;return!!Array.isArray(n)&&n.includes("allow_broadcast_channel")})(i),d=(e=>{var t;const n=null==e||null===(t=e.appInfo)||void 0===t?void 0:t.applicationAttributes;return!!Array.isArray(n)&&n.includes("allow_super_group_channel")})(i);return a.a.createElement(em,{titleText:null==c?void 0:c.MODAL__CREATE_CHANNEL__TITLE,hideFooter:!0,onCancel:()=>{t()},className:"sendbird-add-channel__modal"},a.a.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:()=>{l(db.GROUP),o(1)},role:"button",tabIndex:0,onKeyDown:()=>{l(db.GROUP),o(1)}},a.a.createElement(Bp,{className:"sendbird-add-channel__rectangle__chat-icon",type:zp.CHAT,fillColor:Vp.PRIMARY,width:"28px",height:"28px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},c.MODAL__CREATE_CHANNEL__GROUP)),d&&a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:()=>{l(db.SUPERGROUP),o(1)},role:"button",tabIndex:0,onKeyDown:()=>{l(db.SUPERGROUP),o(1)}},a.a.createElement(Bp,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:zp.SUPERGROUP,fillColor:Vp.PRIMARY,width:"28px",height:"28px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},c.MODAL__CREATE_CHANNEL__SUPER)),u&&a.a.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:()=>{l(db.BROADCAST),o(1)},role:"button",tabIndex:0,onKeyDown:()=>{l(db.BROADCAST),o(1)}},a.a.createElement(Bp,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:zp.BROADCAST,fillColor:Vp.PRIMARY,width:"28px",height:"28px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},c.MODAL__CREATE_CHANNEL__BROADCAST))))},jb=e=>{const{onCancel:t,renderStepOne:n}=e,{step:r,setStep:i,userListQuery:s}=pb();return a.a.createElement(a.a.Fragment,null,0===r&&((null==n?void 0:n())||a.a.createElement(Mb,{onCancel:t})),1===r&&a.a.createElement(wb,{userListQuery:s,onCancel:()=>{i(0),t()}}))},Rb=e=>{const{onBeforeCreateChannel:t,userListQuery:n,onCreateChannel:r,overrideInviteUser:i,onCancel:s,renderStepOne:o}=e;return a.a.createElement(fb,{onBeforeCreateChannel:t,userListQuery:n,onCreateChannel:r,overrideInviteUser:i},a.a.createElement(jb,{renderStepOne:o,onCancel:s}))},Ub=()=>{var e;const[t,n]=Object(r.useState)(!1),i=ku(),s=!(null==i||null===(e=i.config)||void 0===e?void 0:e.isOnline),{overrideInviteUser:o,onBeforeCreateChannel:l}=$m();return a.a.createElement(a.a.Fragment,null,a.a.createElement(qp,{height:"32px",width:"32px",onClick:()=>{n(!0)},disabled:s},a.a.createElement(Bp,{type:zp.CREATE,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),t&&a.a.createElement(Rb,{onCancel:()=>{n(!1)},overrideInviteUser:o,onCreateChannel:()=>{n(!1)},onBeforeCreateChannel:l}))},Lb=(e,t)=>null!=e&&e.coverUrl&&!new RegExp("^https://static.sendbird.com/sample/cover/cover_").test(e.coverUrl)?e.coverUrl:((null==e?void 0:e.members)||[]).filter(e=>e.userId!==t).map(e=>{let{profileUrl:t}=e;return t});function kb(e){let{channel:t,userId:n,theme:i,width:s=56,height:o=56}=e;const l=null==t?void 0:t.isBroadcast,c=Object(r.useMemo)(()=>l?(e=>null==e||!e.coverUrl||!!new RegExp("^https://static.sendbird.com/sample/cover/cover_").test(e.coverUrl))(t)?a.a.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:s,height:o,display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(Bp,{type:zp.BROADCAST,fillColor:Vp.CONTENT,width:.575*s,height:.575*o})):a.a.createElement(sb,{className:"sendbird-chat-header--avatar--broadcast-channel",src:Lb(t,n),width:s,height:o,alt:null==t?void 0:t.name}):a.a.createElement(sb,{className:"sendbird-chat-header--avatar--group-channel",src:Lb(t,n),width:s+"px",height:o+"px",alt:null==t?void 0:t.name}),[null==t?void 0:t.members,null==t?void 0:t.coverUrl,i]);return a.a.createElement(a.a.Fragment,null,c)}function Db(e){let{count:t,maxLevel:n=2,className:i=""}=e;const{stringSet:s}=Object(r.useContext)(td),o=parseInt("9".repeat(n>6?6:n),10);return a.a.createElement("div",{className:[...Array.isArray(i)?i:[i],"sendbird-badge"].join(" ")},a.a.createElement("div",{className:"sendbird-badge__text"},a.a.createElement(hd,{type:fd.CAPTION_2,color:pd.ONCONTENT_1},t>o?`${o}${s.BADGE__OVER}`:t)))}function xb(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Pb(e){return(Pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fb(e){xb(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Pb(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Hb(e){return(Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gb(e){return xb(1,arguments),e instanceof Date||"object"===Hb(e)&&"[object Date]"===Object.prototype.toString.call(e)}function Bb(e){if(xb(1,arguments),!Gb(e)&&"number"!=typeof e)return!1;var t=Fb(e);return!isNaN(Number(t))}function zb(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Vb(e,t){xb(2,arguments);var n=Fb(e).getTime(),r=zb(t);return new Date(n+r)}function qb(e,t){xb(2,arguments);var n=zb(t);return Vb(e,-n)}function Kb(e){xb(1,arguments);var t=1,n=Fb(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Wb(e){xb(1,arguments);var t=Fb(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=Kb(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var s=Kb(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function Yb(e){xb(1,arguments);var t=Wb(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Kb(n);return r}var Qb={};function Xb(){return Qb}function Zb(e,t){var n,r,a,i,s,o,l,c;xb(1,arguments);var u=Xb(),d=zb(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=Fb(e),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function $b(e,t){var n,r,a,i,s,o,l,c;xb(1,arguments);var u=Fb(e),d=u.getUTCFullYear(),h=Xb(),f=zb(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=Zb(p,t),b=new Date(0);b.setUTCFullYear(d,0,f),b.setUTCHours(0,0,0,0);var _=Zb(b,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=_.getTime()?d:d-1}function Jb(e,t){var n,r,a,i,s,o,l,c;xb(1,arguments);var u=Xb(),d=zb(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=$b(e,t),f=new Date(0);f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0);var p=Zb(f,t);return p}function e_(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var t_=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return e_("yy"===t?r%100:r,t.length)},n_=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):e_(n+1,2)},r_=function(e,t){return e_(e.getUTCDate(),t.length)},a_=function(e,t){return e_(e.getUTCHours()%12||12,t.length)},i_=function(e,t){return e_(e.getUTCHours(),t.length)},s_=function(e,t){return e_(e.getUTCMinutes(),t.length)},o_=function(e,t){return e_(e.getUTCSeconds(),t.length)},l_=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return e_(Math.floor(r*Math.pow(10,n-3)),t.length)},c_="midnight",u_="noon",d_="morning",h_="afternoon",f_="evening",p_="night";function m_(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var s=t||"";return n+String(a)+s+e_(i,2)}function b_(e,t){return e%60==0?(e>0?"-":"+")+e_(Math.abs(e)/60,2):__(e,t)}function __(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+e_(Math.floor(a/60),2)+n+e_(a%60,2)}var g_={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return t_(e,t)},Y:function(e,t,n,r){var a=$b(e,r),i=a>0?a:1-a;return"YY"===t?e_(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):e_(i,t.length)},R:function(e,t){return e_(Wb(e),t.length)},u:function(e,t){return e_(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return e_(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return e_(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return n_(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return e_(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=function(e,t){xb(1,arguments);var n=Fb(e),r=Zb(n,t).getTime()-Jb(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):e_(a,t.length)},I:function(e,t,n){var r=function(e){xb(1,arguments);var t=Fb(e),n=Kb(t).getTime()-Yb(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):e_(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):r_(e,t)},D:function(e,t,n){var r=function(e){xb(1,arguments);var t=Fb(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):e_(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return e_(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return e_(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return e_(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?u_:0===a?c_:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?f_:a>=12?h_:a>=4?d_:p_,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return a_(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):i_(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):e_(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):e_(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):s_(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):o_(e,t)},S:function(e,t){return l_(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return b_(a);case"XXXX":case"XX":return __(a);case"XXXXX":case"XXX":default:return __(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return b_(a);case"xxxx":case"xx":return __(a);case"xxxxx":case"xxx":default:return __(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+m_(a,":");case"OOOO":default:return"GMT"+__(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+m_(a,":");case"zzzz":default:return"GMT"+__(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return e_(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return e_((r._originalDate||e).getTime(),t.length)}},v_=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},E_=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},y_={p:E_,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return v_(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",v_(a,t)).replace("{{time}}",E_(i,t))}};function O_(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var C_=["D","DD"],N_=["YY","YYYY"];function T_(e){return-1!==C_.indexOf(e)}function S_(e){return-1!==N_.indexOf(e)}function I_(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var A_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,w_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,M_=/^'([^]*?)'?$/,j_=/''/g,R_=/[a-zA-Z]/;function U_(e,t,n){var r,a,i,s,o,l,c,u,d,h,f,p,m,b,_,g,v,E;xb(2,arguments);var y=String(t),O=Xb(),C=null!==(r=null!==(a=null==n?void 0:n.locale)&&void 0!==a?a:O.locale)&&void 0!==r?r:ed,N=zb(null!==(i=null!==(s=null!==(o=null!==(l=null==n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null==n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:O.firstWeekContainsDate)&&void 0!==s?s:null===(d=O.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==i?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=zb(null!==(f=null!==(p=null!==(m=null!==(b=null==n?void 0:n.weekStartsOn)&&void 0!==b?b:null==n||null===(_=n.locale)||void 0===_||null===(g=_.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:O.weekStartsOn)&&void 0!==p?p:null===(v=O.locale)||void 0===v||null===(E=v.options)||void 0===E?void 0:E.weekStartsOn)&&void 0!==f?f:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var S=Fb(e);if(!Bb(S))throw new RangeError("Invalid time value");var I=O_(S),A=qb(S,I),w={firstWeekContainsDate:N,weekStartsOn:T,locale:C,_originalDate:S},M=y.match(w_).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,y_[t])(e,C.formatLong):e})).join("").match(A_).map((function(r){if("''"===r)return"'";var a=r[0];if("'"===a)return L_(r);var i=g_[a];if(i)return null!=n&&n.useAdditionalWeekYearTokens||!S_(r)||I_(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!T_(r)||I_(r,t,String(e)),i(A,r,C.localize,w);if(a.match(R_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return r})).join("");return M}function L_(e){var t=e.match(M_);return t?t[1].replace(j_,"'"):e}function k_(e){let{className:t="",width:n="26px",height:r="26px",children:i}=e;return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-loader"].join(" "),style:{width:"string"==typeof n?n:n+"px",height:"string"==typeof r?r:r+"px"}},i||a.a.createElement(Bp,{type:zp.SPINNER,width:"26px",height:"26px"}))}function D_(e){xb(1,arguments);var t=Fb(e);return t.setHours(0,0,0,0),t}function x_(e,t){xb(2,arguments);var n=D_(e),r=D_(t);return n.getTime()===r.getTime()}function P_(e){return xb(1,arguments),x_(e,Date.now())}function F_(e,t){xb(2,arguments);var n=Fb(e),r=Fb(t);return n.getFullYear()===r.getFullYear()}function H_(e){return xb(1,arguments),F_(e,Date.now())}function G_(e,t){xb(2,arguments);var n=Fb(e),r=zb(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function B_(e,t){xb(2,arguments);var n=zb(t);return G_(e,-n)}function z_(e){return xb(1,arguments),x_(e,B_(Date.now(),1))}const V_=e=>{var t;let{channel:n,locale:r,stringSet:a}=e;const i=null==n||null===(t=n.lastMessage)||void 0===t?void 0:t.createdAt,s=r?{locale:r}:null;return i?P_(i)?U_(i,"p",s):z_(i)?(null==a?void 0:a.MESSAGE_STATUS__YESTERDAY)||"Yesterday":H_(i)?U_(i,"MMM d",s):U_(i,"yyyy/M/d",s):""},q_=e=>null!=e&&e.lastMessage?function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=30;if(!t)return"";if(t.isFileMessage())return fu(t.name,n);if(t.isMultipleFilesMessage()){const{fileInfoList:e}=t;return e.length>0?fu(e[0].fileName,n):""}return null!==(e=t.message)&&void 0!==e?e:""}(null==e?void 0:e.lastMessage):"",K_=e=>null!=e&&e.unreadMessageCount?e.unreadMessageCount:0;function W_(e){var t;let{className:n,message:r,channel:i,isDateSeparatorConsidered:s=!0}=e;const{stringSet:o,dateLocale:l}=rd(),c=jc(i,r),u=(null==i||null===(t=i.isGroupChannel)||void 0===t?void 0:t.call(i))&&(i.isSuper||i.isPublic||i.isBroadcast)&&!(c===Mc.PENDING||c===Mc.FAILED),d={[Mc.SENT]:zp.DONE,[Mc.DELIVERED]:zp.DONE_ALL,[Mc.READ]:zp.DONE_ALL,[Mc.FAILED]:zp.ERROR},h={[Mc.SENT]:Vp.SENT,[Mc.DELIVERED]:Vp.SENT,[Mc.READ]:Vp.READ,[Mc.FAILED]:Vp.ERROR};return a.a.createElement("div",{className:[...Array.isArray(n)?n:[n],"sendbird-message-status"].join(" ")},c===Mc.PENDING?a.a.createElement(k_,{className:"sendbird-message-status__icon",width:"16px",height:"16px"},a.a.createElement(Bp,{type:zp.SPINNER,fillColor:Vp.PRIMARY,width:"16px",height:"16px"})):a.a.createElement(Bp,{className:`sendbird-message-status__icon ${u?"hide-icon":""} ${c===Mc.FAILED?"":"sendbird-message-status--sent"}`,type:d[c]||zp.ERROR,fillColor:h[c],width:"16px",height:"16px"}),((f=c)===Mc.SENT||f===Mc.DELIVERED||f===Mc.READ)&&a.a.createElement(hd,{className:"sendbird-message-status__text",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},s?U_((null==r?void 0:r.createdAt)||0,"p",{locale:l}):V_({channel:i,locale:l,stringSet:o})));var f}function Y_(e){let{className:t="",children:n,isReverse:r=!1,color:i,userId:s}=e;return a.a.createElement("span",{className:`sendbird-mention-user-label ${t} ${r?"reverse":""} ${i}`,contentEditable:!1,"data-userid":s,"data-sb-mention":!0},n)}let Q_=function(e){return e.ONBACKGROUND_1="ONBACKGROUND_1",e.ONBACKGROUND_2="ONBACKGROUND_2",e.ONBACKGROUND_3="ONBACKGROUND_3",e.ONBACKGROUND_4="ONBACKGROUND_4",e.ONCONTENT_1="ONCONTENT_1",e.ONCONTENT_2="ONCONTENT_2",e.PRIMARY="PRIMARY",e.ERROR="ERROR",e}({});const X_=e=>{switch(e){case Q_.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case Q_.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case Q_.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case Q_.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case Q_.ONCONTENT_1:return"sendbird-color--oncontent-1";case Q_.PRIMARY:return"sendbird-color--primary";case Q_.ERROR:return"sendbird-color--error";default:return null}},Z_=e=>{let{className:t="",color:n=Q_.ONBACKGROUND_1,disabled:r=!1,disableUnderline:i=!1,onClick:s=(()=>{}),children:o}=e;return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],X_(n),i?"sendbird-textbutton--not-underline":"sendbird-textbutton",r?"sendbird-textbutton--disabled":""].join(" "),role:"button",tabIndex:0,onClick:e=>s(e),onKeyPress:e=>s(e)},o)},$_=10,J_=15;let eg=function(e){return e.PARENT="PARENT",e.THREAD="THREAD",e}({});var tg=Object.freeze({__proto__:null,RESET_MESSAGES:"RESET_MESSAGES",FETCH_INITIAL_MESSAGES_START:"FETCH_INITIAL_MESSAGES_START",FETCH_INITIAL_MESSAGES_SUCCESS:"FETCH_INITIAL_MESSAGES_SUCCESS",FETCH_INITIAL_MESSAGES_FAILURE:"FETCH_INITIAL_MESSAGES_FAILURE",FETCH_PREV_MESSAGES_SUCCESS:"FETCH_PREV_MESSAGES_SUCCESS",FETCH_PREV_MESSAGES_FAILURE:"FETCH_PREV_MESSAGES_FAILURE",FETCH_NEXT_MESSAGES_SUCCESS:"FETCH_NEXT_MESSAGES_SUCCESS",FETCH_NEXT_MESSAGES_FAILURE:"FETCH_NEXT_MESSAGES_FAILURE",SEND_MESSAGE_START:"SEND_MESSAGE_START",SEND_MESSAGE_SUCESS:"SEND_MESSAGE_SUCESS",SEND_MESSAGE_FAILURE:"SEND_MESSAGE_FAILURE",RESEND_MESSAGE_START:"RESEND_MESSAGE_START",ON_MESSAGE_RECEIVED:"ON_MESSAGE_RECEIVED",ON_MESSAGE_UPDATED:"ON_MESSAGE_UPDATED",ON_MESSAGE_THREAD_INFO_UPDATED:"ON_MESSAGE_THREAD_INFO_UPDATED",ON_MESSAGE_DELETED:"ON_MESSAGE_DELETED",ON_MESSAGE_DELETED_BY_REQ_ID:"ON_MESSAGE_DELETED_BY_REQ_ID",SET_CURRENT_CHANNEL:"SET_CURRENT_CHANNEL",SET_CHANNEL_INVALID:"SET_CHANNEL_INVALID",MARK_AS_READ:"MARK_AS_READ",ON_REACTION_UPDATED:"ON_REACTION_UPDATED",SET_EMOJI_CONTAINER:"SET_EMOJI_CONTAINER",MESSAGE_LIST_PARAMS_CHANGED:"MESSAGE_LIST_PARAMS_CHANGED"});const ng="undefined",{SUCCEEDED:rg,FAILED:ag,PENDING:ig}=su(),sg=(e,t)=>{try{var n;const r=e.current,a=null===(n=r.querySelectorAll(`[data-sb-created-at="${t}"]`))||void 0===n?void 0:n[0];if(a){const e=r.offsetHeight,t=(e-a.offsetHeight)/2;r.scrollTop=a.offsetTop-t}}catch(e){}},og=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;const n=10,r=e;if(!(r>n))try{const e=(null==t?void 0:t.current)||document.querySelector(".sendbird-conversation__messages-padding");e.scrollTop=e.scrollHeight}catch(e){setTimeout(()=>{og(r+1,t)},500*r)}},lg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null==e?void 0:e.myRole;return"operator"===t},cg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null==e?void 0:e.isFrozen;return t&&!lg(e)},ug=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=null==e?void 0:e.myMutedState;return"muted"===t},dg=e=>((e,t)=>[...new Map(e.map(e=>[e[t],e])).values()])(e,"messageId"),hg=e=>U_(e.createdAt,"p"),fg=(e,t,n)=>{var r,a,i,s;return!!(e&&t&&e.messageType&&"admin"!==e.messageType&&t.messageType&&"admin"!==(null==t?void 0:t.messageType)&&null!=e&&e.sender&&null!=t&&t.sender&&null!=e&&e.createdAt&&null!=t&&t.createdAt&&null!=e&&null!==(r=e.sender)&&void 0!==r&&r.userId&&null!=t&&null!==(a=t.sender)&&void 0!==a&&a.userId)&&((null==e?void 0:e.sendingStatus)===(null==t?void 0:t.sendingStatus)&&(null==e||null===(i=e.sender)||void 0===i?void 0:i.userId)===(null==t||null===(s=t.sender)||void 0===s?void 0:s.userId)&&hg(e)===hg(t)&&Vc(n,e)===Vc(n,t))},pg=(e,t)=>{const{sendingStatus:n=ng}=t;if(n===rg||n===ig){const n=e.map(e=>e.sendingStatus||(e.isAdminMessage&&e.isAdminMessage()?rg:ng)).lastIndexOf(rg);if(n+1<e.length){const r=[...e];return r.splice(n+1,0,t),r}}return[...e,t]},mg=e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number.parseFloat(e);if(!Number.isNaN(t))return t}return null},bg=(e,t,n)=>Math.abs(e-t)<=n,_g=e=>null==e;function gg(e,t){if(_g(e)||_g(t))return!1;return e.toString()===t.toString()}function vg(e){let{isBroadcast:t=!1,isSuper:n=!1,globalLevel:r=!0,moduleLevel:a}=e;return!(t||n)&&(null!=a?a:r)}var Eg={initialized:!1,loading:!0,allMessages:[],currentGroupChannel:{members:[]},hasMorePrev:!1,oldestMessageTimeStamp:0,hasMoreNext:!1,latestMessageTimeStamp:0,emojiContainer:{},unreadSince:null,isInvalid:!1,messageListParams:null};const{SUCCEEDED:yg}=su(),Og=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e[0];return t&&t.createdAt||null},Cg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e[e.length-1];return t&&t.createdAt||null};function Ng(e,t){var n,r,a;switch(t.type){case"RESET_MESSAGES":return s(s({},e),{},{hasMorePrev:!1,hasMoreNext:!1,allMessages:[]});case"FETCH_INITIAL_MESSAGES_START":return s(s({},e),{},{loading:!0,allMessages:[...e.allMessages.filter(e=>e.sendingStatus!==yg)]});case"FETCH_INITIAL_MESSAGES_SUCCESS":{var i;const{currentGroupChannel:n,messages:r}=t.payload;if((null==n?void 0:n.url)!==(null===(i=e.currentGroupChannel)||void 0===i?void 0:i.url))return e;const a=Og(r),o=Cg(r);return s(s({},e),{},{loading:!1,initialized:!0,hasMorePrev:!0,hasMoreNext:!0,oldestMessageTimeStamp:a,latestMessageTimeStamp:o,allMessages:[...r]})}case"FETCH_PREV_MESSAGES_SUCCESS":{var o,l,c,u;const{currentGroupChannel:n,messages:r}=t.payload;if((null==n?void 0:n.url)!==(null===(o=e.currentGroupChannel)||void 0===o?void 0:o.url))return e;const a=(null!==(l=null==r?void 0:r.length)&&void 0!==l?l:0)>=(null!==(c=null==e||null===(u=e.messageListParams)||void 0===u?void 0:u.prevResultSize)&&void 0!==c?c:30)+1,i=Og(r),d=[],h=e.allMessages.map(e=>{const t=r.find(t=>{let{messageId:n}=t;return gg(n,e.messageId)});return t?(d.push(t.messageId),t.updatedAt>e.updatedAt?t:e):e}),f=d.length>0?r.filter(e=>!d.find(t=>gg(t,e.messageId))):r;return s(s({},e),{},{hasMorePrev:a,oldestMessageTimeStamp:i,allMessages:[...f,...h]})}case"FETCH_NEXT_MESSAGES_SUCCESS":{var d,h,f,p;const{currentGroupChannel:n,messages:r}=t.payload;if((null==n?void 0:n.url)!==(null===(d=e.currentGroupChannel)||void 0===d?void 0:d.url))return e;const a=(null!==(h=null==r?void 0:r.length)&&void 0!==h?h:0)===(null!==(f=null==e||null===(p=e.messageListParams)||void 0===p?void 0:p.nextResultSize)&&void 0!==f?f:15)+1,i=Cg(r),o=((e,t)=>{const n=e[e.length-1],r=t[0];if((null==n?void 0:n.createdAt)<(null==r?void 0:r.createdAt))return[...e,...t];const a=[...e,...t],i=dg(a);return i.sort((e,t)=>e.createdAt-t.createdAt)})(e.allMessages,r);return s(s({},e),{},{hasMoreNext:a,latestMessageTimeStamp:i,allMessages:o})}case"FETCH_INITIAL_MESSAGES_FAILURE":case"FETCH_PREV_MESSAGES_FAILURE":case"FETCH_NEXT_MESSAGES_FAILURE":{var m;const{currentGroupChannel:n}=t.payload;return(null==n?void 0:n.url)!==(null==e||null===(m=e.currentGroupChannel)||void 0===m?void 0:m.url)?e:s(s({},e),{},{loading:!1,initialized:!1,allMessages:[],hasMorePrev:!1,hasMoreNext:!1,oldestMessageTimeStamp:null,latestMessageTimeStamp:null})}case"SEND_MESSAGE_START":return s(s({},e),{},{allMessages:[...e.allMessages,t.payload]});case"SEND_MESSAGE_SUCESS":{const n=t.payload,r=e.allMessages.filter(e=>(null==e?void 0:e.reqId)!==(null==n?void 0:n.reqId)),a=r.findIndex(e=>"pending"===(null==e?void 0:e.sendingStatus)||"failed"===(null==e?void 0:e.sendingStatus));return s(s({},e),{},{allMessages:a>-1?[...r.slice(0,a),n,...r.slice(a)]:[...r,n]})}case"SEND_MESSAGE_FAILURE":return t.payload.failed=!0,s(s({},e),{},{allMessages:e.allMessages.map(e=>gg(e.reqId,t.payload.reqId)?t.payload:e)});case"SET_CURRENT_CHANNEL":return s(s({},e),{},{currentGroupChannel:t.payload,isInvalid:!1});case"SET_CHANNEL_INVALID":return s(s({},e),{},{currentGroupChannel:null,isInvalid:!0});case"ON_MESSAGE_RECEIVED":{const{channel:n,message:r}=t.payload,{members:a}=n,{sender:i}=r,{currentGroupChannel:o={},unreadSince:l}=e,c=null==o?void 0:o.url;if(!gg(null==n?void 0:n.url,c))return e;if(e.allMessages.some(e=>e.messageId===r.messageId))return e;if(e.messageListParams&&!gu(e.messageListParams,r))return e;if(r.isAdminMessage&&r.isAdminMessage())return s(s({},e),{},{allMessages:pg(e.allMessages,r)});const u=null==a?void 0:a.find(e=>(null==e?void 0:e.userId)===(null==i?void 0:i.userId));return(null==u?void 0:u.profileUrl)===(null==i?void 0:i.profileUrl)&&(null==u?void 0:u.friendName)===(null==i?void 0:i.friendName)&&(null==u?void 0:u.nickname)===(null==i?void 0:i.nickname)||(n.members=a.map(e=>e.userId===i.userId?i:e)),s(s({},e),{},{currentGroupChannel:n,unreadSince:null!=e&&e.unreadSince?l:U_(new Date,"p MMM dd"),allMessages:pg(e.allMessages,r)})}case"ON_MESSAGE_UPDATED":{var b;const{channel:n,message:r}=t.payload,a=(null==e||null===(b=e.currentGroupChannel)||void 0===b?void 0:b.url)||"";return gg(null==n?void 0:n.url,a)?e.messageListParams&&!gu(e.messageListParams,r)?s(s({},e),{},{allMessages:e.allMessages.filter(e=>!gg(e.messageId,null==r?void 0:r.messageId))}):s(s({},e),{},{allMessages:e.allMessages.map(e=>gg(e.messageId,r.messageId)?r:(gg(e.parentMessageId,r.messageId)&&(e.parentMessage=r),e))}):e}case"ON_MESSAGE_THREAD_INFO_UPDATED":{var _;const{channel:n,event:r}=t.payload,{channelUrl:a,threadInfo:i,targetMessageId:o}=r,l=(null==e||null===(_=e.currentGroupChannel)||void 0===_?void 0:_.url)||"";return gg(null==n?void 0:n.url,l)&&gg(null==n?void 0:n.url,a)?s(s({},e),{},{allMessages:e.allMessages.map(e=>(gg(e.messageId,o)&&(e.threadInfo=i),e))}):e}case"RESEND_MESSAGE_START":return s(s({},e),{},{allMessages:e.allMessages.map(e=>gg(e.reqId,t.payload.reqId)?t.payload:e)});case"MARK_AS_READ":return(null===(n=e.currentGroupChannel)||void 0===n?void 0:n.url)!==(null===(r=t.payload)||void 0===r||null===(a=r.channel)||void 0===a?void 0:a.url)?e:s(s({},e),{},{unreadSince:null});case"ON_MESSAGE_DELETED":return s(s({},e),{},{allMessages:e.allMessages.filter(e=>!gg(e.messageId,t.payload))});case"ON_MESSAGE_DELETED_BY_REQ_ID":return s(s({},e),{},{allMessages:e.allMessages.filter(e=>!gg(e.reqId,t.payload))});case"SET_EMOJI_CONTAINER":return s(s({},e),{},{emojiContainer:t.payload});case"ON_REACTION_UPDATED":return s(s({},e),{},{allMessages:e.allMessages.map(e=>gg(e.messageId,t.payload.messageId)?(e.applyReactionEvent&&"function"==typeof e.applyReactionEvent&&e.applyReactionEvent(t.payload),e):e)});case"MESSAGE_LIST_PARAMS_CHANGED":return s(s({},e),{},{messageListParams:t.payload});default:return e}}function Tg(e,t){let{isOnline:n,replyType:a,disableMarkAsRead:i,reconnectOnIdle:s}=e,{logger:o,sdk:l,scrollRef:c,currentGroupChannel:u,messagesDispatcher:d,markAsReadScheduler:h,userFilledMessageListQuery:f}=t;const{shouldReconnect:p}=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[a,i]=Object(r.useState)(!1),s=!e;Object(r.useEffect)(()=>{const e=()=>{n&&i(document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[n,document.hidden]);const o=s&&null!=(null==t?void 0:t.url)&&!a;return{shouldReconnect:o}}(n,u,s);Object(r.useEffect)(()=>()=>{if(p){var e,t;o.info("Refreshing conversation state");const n={prevResultSize:30,isInclusive:!0,includeReactions:(null==l||null===(e=l.appInfo)||void 0===e?void 0:e.useReaction)||!1,nextResultSize:15};a&&"QUOTE_REPLY"===a&&(n.includeThreadInfo=!0,n.includeParentMessageInfo=!0,n.replyType=te.wb.ONLY_REPLY_TO_CHANNEL),f&&Object.keys(f).forEach(e=>{n[e]=f[e]}),o.info("Channel: Fetching messages",{currentGroupChannel:u,userFilledMessageListQuery:f}),d({type:"FETCH_INITIAL_MESSAGES_START",payload:null}),null==l||null===(t=l.groupChannel)||void 0===t||t.getChannel(null==u?void 0:u.url).then(e=>{const t=(new Date).getTime();e.getMessagesByTimestamp(t,n).then(e=>{d({type:"FETCH_INITIAL_MESSAGES_SUCCESS",payload:{currentGroupChannel:u,messages:e}}),setTimeout(()=>og(0,c))}).catch(e=>{o.error("Channel: Fetching messages failed",e),d({type:"FETCH_INITIAL_MESSAGES_FAILURE",payload:{currentGroupChannel:u}})}),i||h.push(u)})}},[p,a])}const Sg=a.a.createContext(void 0),Ig=e=>{var t,n,i,o,l,c;const{channelUrl:u,children:d,isReactionEnabled:h,isMessageGroupingEnabled:f=!0,showSearchIcon:p,animatedMessage:m,highlightedMessage:b,startingPoint:_,onBeforeSendUserMessage:g,onBeforeSendFileMessage:v,onBeforeUpdateUserMessage:E,onBeforeSendVoiceMessage:y,onChatHeaderActionClick:O,onSearchClick:C,onBackClick:N,replyType:T,threadReplySelectType:S,queries:I,filterMessageList:A,disableMarkAsRead:w=!1,onReplyInThread:M,onQuoteMessageClick:j,onMessageAnimated:R,onMessageHighlighted:U,scrollBehavior:L="auto",reconnectOnIdle:k=!0}=e,D=ku(),{config:x}=D,P=null!=T?T:x.replyType,{pubSub:F,logger:H,userId:G,isOnline:B,imageCompression:z,isMentionEnabled:V,isVoiceMessageEnabled:q,onUserProfileMessage:K,markAsReadScheduler:W,groupChannel:Y}=x,Q=null==D||null===(t=D.stores)||void 0===t||null===(n=t.sdkStore)||void 0===n?void 0:n.sdk,X=null==D||null===(i=D.stores)||void 0===i||null===(o=i.sdkStore)||void 0===o?void 0:o.initialized,Z=null==D?void 0:D.config,[$,J]=Object(r.useState)(_);Object(r.useEffect)(()=>{J(_)},[_,u]);const[ee,ne]=Object(r.useState)(0),[re,ae]=Object(r.useState)(b);Object(r.useEffect)(()=>{ae(b)},[b]);const ie=null==I?void 0:I.messageListParams,[se,oe]=Object(r.useState)(null),[le,ue]=Object(r.useReducer)(Ng,Eg),de=Object(r.useRef)(null),{allMessages:he,loading:fe,initialized:pe,unreadSince:me,isInvalid:be,currentGroupChannel:_e,hasMorePrev:ge,oldestMessageTimeStamp:ve,hasMoreNext:Ee,latestMessageTimeStamp:ye,emojiContainer:Oe,readStatus:Ce}=le,Ne=(null==_e?void 0:_e.isSuper)||!1,Te=vg({isBroadcast:(null==_e?void 0:_e.isBroadcast)||!1,isSuper:Ne,globalLevel:null==x?void 0:x.isReactionEnabled,moduleLevel:h}),Se=Object(r.useMemo)(()=>Te?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{emojiCategories:t=[]}=e,n=new Map;for(let e=0;e<t.length;e+=1){const{emojis:r}=t[e];for(let e=0;e<r.length;e+=1){const{key:t,url:a}=r[e];n.set(t,a)}}return n}(Oe):new Map,[Oe]),Ie=Object(r.useMemo)(()=>Te&&_e?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Map;for(let n=0;n<e.length;n+=1){const{userId:r,nickname:a}=e[n];t.set(r,a)}return t}(null==_e?void 0:_e.members):new Map,[null==_e?void 0:_e.members]);Object(r.useEffect)(()=>{m&&ne(m)},[m]);const Ae=function(e,t){let{currentGroupChannel:n,oldestMessageTimeStamp:a,userFilledMessageListQuery:i,replyType:s}=e,{hasMorePrev:o,logger:l,messagesDispatcher:c,sdk:u}=t;return Object(r.useCallback)(e=>{if(!o)return;const{appInfo:t={}}=u,r={prevResultSize:30,isInclusive:!0,includeReactions:t.useReaction||!1,includeMetaArray:!0};"QUOTE_REPLY"!==s&&"THREAD"!==s||(r.includeThreadInfo=!0,r.includeParentMessageInfo=!0,r.replyType=te.wb.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(e=>{r[e]=i[e]}),l.info("Channel: Fetching messages",{currentGroupChannel:n,userFilledMessageListQuery:i}),n.getMessagesByTimestamp(a||(new Date).getTime(),r).then(t=>{c({type:"FETCH_PREV_MESSAGES_SUCCESS",payload:{currentGroupChannel:n,messages:t}}),e([t,null])}).catch(t=>{l.error("Channel: Fetching messages failed",t),c({type:"FETCH_PREV_MESSAGES_FAILURE",payload:{currentGroupChannel:n}}),e([null,t])})},[n,a,s])}({currentGroupChannel:_e,oldestMessageTimeStamp:ve,userFilledMessageListQuery:ie,replyType:P,isVoiceMessageEnabled:q},{hasMorePrev:ge,logger:H,messagesDispatcher:ue,sdk:Q}),we=function(e,t){let{setInitialTimeStamp:n,setAnimatedMessageId:a,allMessages:i,scrollRef:s}=e,{logger:o}=t;return Object(r.useCallback)((e,t)=>{const r=i.find(e=>e.messageId===t);a(null),setTimeout(()=>{try{o.info("Channel: scroll to message - disabling mouse events"),function(e){const t=e.current,n=null==t?void 0:t.parentNode;t&&n&&(t.style.pointerEvents="none",n.style.cursor="wait")}(s),r?(o.info("Channel: scroll to message - message is present"),a(t),sg(s,e)):(o.info("Channel: scroll to message - fetching older messages"),n(null),n(e),a(t))}finally{o.info("Channel: scroll to message - enabled mouse events"),function(e){const t=e.current,n=null==t?void 0:t.parentNode;t&&n&&(t.style.pointerEvents="auto",n.style.cursor="auto")}(s)}})},[n,a,i])}({setInitialTimeStamp:J,setAnimatedMessageId:ne,allMessages:he,scrollRef:de},{logger:H}),Me=function(e,t){let{currentGroupChannel:n,latestMessageTimeStamp:a,userFilledMessageListQuery:i,hasMoreNext:s,replyType:o}=e,{logger:l,messagesDispatcher:c,sdk:u}=t;return Object(r.useCallback)(e=>{if(!s)return;const{appInfo:t={}}=u,r={nextResultSize:15,isInclusive:!0,includeReactions:t.useReaction||!1,includeMetaArray:!0};!o||"QUOTE_REPLY"!==o&&"THREAD"!==o||(r.includeThreadInfo=!0,r.includeParentMessageInfo=!0,r.replyType=te.wb.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(e=>{r[e]=i[e]}),l.info("Channel: Fetching later messages",{currentGroupChannel:n,userFilledMessageListQuery:i}),n.getMessagesByTimestamp(a||(new Date).getTime(),r).then(t=>{c({type:"FETCH_NEXT_MESSAGES_SUCCESS",payload:{currentGroupChannel:n,messages:t}}),e([t,null])}).catch(t=>{l.error("Channel: Fetching later messages failed",t),c({type:"FETCH_NEXT_MESSAGES_FAILURE",payload:{currentGroupChannel:n}}),e([null,t])})},[n,a,s,o])}({currentGroupChannel:_e,latestMessageTimeStamp:ye,userFilledMessageListQuery:ie,hasMoreNext:Ee,replyType:P,isVoiceMessageEnabled:q},{logger:H,messagesDispatcher:ue,sdk:Q}),je=function(e,t){let{currentGroupChannel:n}=e,{logger:a}=t;return Object(r.useCallback)((e,t,r)=>{r?n.deleteReaction(e,t).then(e=>{a.info("Delete reaction success",e)}).catch(e=>{a.warning("Delete reaction failed",e)}):n.addReaction(e,t).then(e=>{a.info("Add reaction success",e)}).catch(e=>{a.warning("Add reaction failed",e)})},[n])}({currentGroupChannel:_e},{logger:H});!function(e,t){let{channelUrl:n,sdkInit:a,disableMarkAsRead:i}=e,{messagesDispatcher:s,sdk:o,logger:l,markAsReadScheduler:c}=t;Object(r.useEffect)(()=>{n&&a&&o&&o.groupChannel&&(l.info("Channel | useSetChannel fetching channel",n),o.groupChannel.getChannel(n).then(e=>{l.info("Channel | useSetChannel fetched channel",e),s({type:"SET_CURRENT_CHANNEL",payload:e}),l.info("Channel: Mark as read",e),i||c.push(e)}).catch(e=>{l.warning("Channel | useSetChannel fetch channel failed",{channelUrl:n,e:e}),s({type:"SET_CHANNEL_INVALID"})}),o.getAllEmoji().then(e=>{l.info("Channel: Getting emojis success",e),s({type:"SET_EMOJI_CONTAINER",payload:e})}).catch(e=>{l.error("Channel: Getting emojis failed",e)}))},[n,a])}({channelUrl:u,sdkInit:X,disableMarkAsRead:w},{messagesDispatcher:ue,sdk:Q,logger:H,markAsReadScheduler:W}),Object(r.useEffect)(()=>{oe(null)},[u]),function(e,t){var n,a,i;let{sdkInit:s,currentUserId:o,currentGroupChannel:l,disableMarkAsRead:c}=e,{sdk:u,logger:d,scrollRef:h,setQuoteMessage:f,messagesDispatcher:p}=t;const m=ku(),{markAsReadScheduler:b,markAsDeliveredScheduler:_,disableMarkAsDelivered:g}=m.config,v=null===(n=m.stores.sdkStore.sdk)||void 0===n||null===(a=n.appInfo)||void 0===a||null===(i=a.premiumFeatureList)||void 0===i?void 0:i.find(e=>"delivery_receipt"===e);Object(r.useEffect)(()=>{const e=null==l?void 0:l.url,t=es();if(e&&s){var n;const r={onMessageReceived:(t,n)=>{if(gg(null==t?void 0:t.url,e)){var r,a;let e=!1;try{const{current:t}=h;e=t.offsetHeight+t.scrollTop>=t.scrollHeight-10}catch(e){}if(d.info("Channel | useHandleChannelEvents: onMessageReceived",n),p({type:"ON_MESSAGE_RECEIVED",payload:{channel:t,message:n}}),e&&0===(null===(r=document.getElementById("sendbird-dropdown-portal"))||void 0===r?void 0:r.childElementCount)&&0===(null===(a=document.getElementById("sendbird-emoji-list-portal"))||void 0===a?void 0:a.childElementCount))try{setTimeout(()=>{og(0,h)}),c||b.push(l),v&&!g&&_.push(l)}catch(e){d.warning("Channel | onMessageReceived | scroll to end failed")}}},onUnreadMemberStatusUpdated:t=>{d.info("Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated",t),gg(null==t?void 0:t.url,e)&&p({type:"SET_CURRENT_CHANNEL",payload:t})},onUndeliveredMemberStatusUpdated:t=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",t),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onMessageUpdated:(e,t)=>{d.info("Channel | useHandleChannelEvents: onMessageUpdated",t),p({type:"ON_MESSAGE_UPDATED",payload:{channel:e,message:t}})},onThreadInfoUpdated:(e,t)=>{d.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",{channel:e,threadInfoUpdateEvent:t}),p({type:"ON_MESSAGE_THREAD_INFO_UPDATED",payload:{channel:e,event:t}})},onMessageDeleted:(e,t)=>{d.info("Channel | useHandleChannelEvents: onMessageDeleted",{channel:e,messageId:t}),f(null),p({type:"ON_MESSAGE_DELETED",payload:t})},onReactionUpdated:(e,t)=>{d.info("Channel | useHandleChannelEvents: onReactionUpdated",{channel:e,reactionEvent:t}),p({type:"ON_REACTION_UPDATED",payload:t})},onChannelChanged:t=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onChannelChanged",t),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onChannelFrozen:t=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onChannelFrozen",t),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onChannelUnfrozen:t=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onChannelUnFrozen",t),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onUserMuted:(t,n)=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onUserMuted",{channel:t,user:n}),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onUserUnmuted:(t,n)=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onUserUnmuted",{channel:t,user:n}),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onUserBanned:(t,n)=>{var r;gg(null==t?void 0:t.url,e)&&(null==n?void 0:n.userId)===(null==u||null===(r=u.currentUser)||void 0===r?void 0:r.userId)&&(d.info("Channel | useHandleChannelEvents: onUserBanned",{channel:t,user:n}),p({type:"SET_CURRENT_CHANNEL",payload:null}))},onOperatorUpdated:(t,n)=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onOperatorUpdated",{channel:t,users:n}),p({type:"SET_CURRENT_CHANNEL",payload:t}))},onUserLeft:(t,n)=>{gg(null==t?void 0:t.url,e)&&(d.info("Channel | useHandleChannelEvents: onUserLeft",{channel:t,user:n}),(null==n?void 0:n.userId)===o&&p({type:"SET_CURRENT_CHANNEL",payload:null}))}};d.info("Channel | useHandleChannelEvents: Setup event handler",{channelHandlerId:t,channelHandler:r}),null===(n=u.groupChannel)||void 0===n||n.addGroupChannelHandler(t,new Tc(r))}return()=>{var e;null!=u&&null!==(e=u.groupChannel)&&void 0!==e&&e.removeGroupChannelHandler?(d.info("Channel | useHandleChannelEvents: Removing message reciver handler",t),u.groupChannel.removeGroupChannelHandler(t)):null!=u&&u.groupChannel&&d.error("Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler")}},[null==l?void 0:l.url,s])}({currentGroupChannel:_e,sdkInit:X,currentUserId:G,disableMarkAsRead:w},{messagesDispatcher:ue,sdk:Q,logger:H,scrollRef:de,setQuoteMessage:oe}),function(e,t){let{currentGroupChannel:n,userFilledMessageListQuery:a,initialTimeStamp:i,replyType:s}=e,{logger:o,scrollRef:l,messagesDispatcher:c}=t;const u=null==n?void 0:n.url;Object(r.useEffect)(()=>{if(o.info("Channel useInitialMessagesFetch: Setup started",n),c({type:"RESET_MESSAGES",payload:null}),n&&null!=n&&n.getMessagesByTimestamp){const e={prevResultSize:30};i&&(e.nextResultSize=15),e.isInclusive=!0,e.includeReactions=!0,e.includeMetaArray=!0,!s||"QUOTE_REPLY"!==s&&"THREAD"!==s||(e.includeThreadInfo=!0,e.includeParentMessageInfo=!0,e.replyType=te.wb.ONLY_REPLY_TO_CHANNEL),a&&Object.keys(a).forEach(t=>{e[t]=a[t]}),(s&&("QUOTE_REPLY"===s||"THREAD"===s)||a)&&(o.info("Channel useInitialMessagesFetch: Setup messageListParams",e),c({type:"MESSAGE_LIST_PARAMS_CHANGED",payload:e})),o.info("Channel: Fetching messages",{currentGroupChannel:n,userFilledMessageListQuery:a}),c({type:"FETCH_INITIAL_MESSAGES_START",payload:null}),n.getMessagesByTimestamp(i||(new Date).getTime(),e).then(e=>{c({type:"FETCH_INITIAL_MESSAGES_SUCCESS",payload:{currentGroupChannel:n,messages:e}})}).catch(e=>{o.error("Channel: Fetching messages failed",e),c({type:"FETCH_INITIAL_MESSAGES_FAILURE",payload:{currentGroupChannel:n}})}).finally(()=>{i?setTimeout(()=>{sg(l,i)},500):setTimeout(()=>og(0,l))})}},[u,a,i])}({currentGroupChannel:_e,userFilledMessageListQuery:ie,initialTimeStamp:$,latestMessageTimeStamp:ye,replyType:P,isVoiceMessageEnabled:q},{logger:H,scrollRef:de,messagesDispatcher:ue}),Object(r.useEffect)(()=>{const e=(e=>{let{channelUrl:t,pubSub:n,dispatcher:r,scrollRef:a}=e;const i=new Map;return n&&n.subscribe?(i.set(Pm,n.subscribe(Pm,e=>{const{channel:n,message:i}=e;og(0,a),t===(null==n?void 0:n.url)&&r({type:"SEND_MESSAGE_SUCESS",payload:i})})),i.set(Dm,n.subscribe(Dm,e=>{const{channel:n,message:a}=e;t===(null==n?void 0:n.url)&&r({type:"SEND_MESSAGE_START",payload:a})})),i.set(xm,n.subscribe(xm,e=>{const{channel:n,message:a}=e;t===(null==n?void 0:n.url)&&r({type:"SEND_MESSAGE_FAILURE",payload:a})})),i.set(Fm,n.subscribe(Fm,e=>{const{channel:n,message:i}=e;og(0,a),t===(null==n?void 0:n.url)&&r({type:"SEND_MESSAGE_SUCESS",payload:i})})),i.set(Hm,n.subscribe(Hm,e=>{const{channel:n,message:a,fromSelector:i}=e;i&&t===(null==n?void 0:n.url)&&r({type:"ON_MESSAGE_UPDATED",payload:{channel:n,message:a}})})),i.set(Gm,n.subscribe(Gm,e=>{const{channel:n,messageId:a}=e;t===(null==n?void 0:n.url)&&r({type:"ON_MESSAGE_DELETED",payload:a})})),i):i})({channelUrl:u,pubSub:F,dispatcher:ue,scrollRef:de});return()=>{(e=>{e.forEach(e=>{try{e.remove()}catch(e){}})})(e)}},[u,X]),Tg({isOnline:B,replyType:P,disableMarkAsRead:w,reconnectOnIdle:k},{logger:H,sdk:Q,scrollRef:de,currentGroupChannel:_e,messagesDispatcher:ue,userFilledMessageListQuery:ie,markAsReadScheduler:W});const Re=function(e,t){let{currentGroupChannel:n,messagesDispatcher:a}=e,{logger:i}=t;return Object(r.useCallback)(e=>{i.info("Channel | useDeleteMessageCallback: Deleting message",e);const{requestState:t}=e;return new Promise((r,s)=>{i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",t),"failed"!==t&&"pending"!==t||(i.info("Channel | useDeleteMessageCallback: Deleted message from local:",e),a({type:"ON_MESSAGE_DELETED_BY_REQ_ID",payload:e.reqId}),r(e)),i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",t),n.deleteMessage(e).then(()=>{i.info("Channel | useDeleteMessageCallback: Deleting message success!",e),a({type:"ON_MESSAGE_DELETED",payload:e.messageId}),r(e)}).catch(e=>{i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",e),s(e)})})},[n,a])}({currentGroupChannel:_e,messagesDispatcher:ue},{logger:H}),Ue=function(e,t){let{currentGroupChannel:n,messagesDispatcher:a,onBeforeUpdateUserMessage:i,isMentionEnabled:s}=e,{logger:o,pubSub:l}=t;return Object(r.useCallback)((e,t)=>{const{messageId:r,message:c,mentionedUsers:u,mentionTemplate:d}=e;i&&"function"==typeof i&&o.info("Channel: creating params using onBeforeUpdateUserMessage",i);const h=i?i(c):(()=>{const e={};return e.message=c,s&&(null==u?void 0:u.length)>0&&(e.mentionedUsers=u),e.mentionedMessageTemplate=s&&d?d:c,e})();o.info("Channel: Updating message!",h),n.updateUserMessage(r,h).then((e,r)=>{t&&t(r,e),o.info("Channel: Updating message success!",e),a({type:"ON_MESSAGE_UPDATED",payload:{channel:n,message:e}}),l.publish(Hm,{message:e,channel:n})})},[null==n?void 0:n.url,a,i])}({currentGroupChannel:_e,messagesDispatcher:ue,onBeforeUpdateUserMessage:E,isMentionEnabled:V},{logger:H,pubSub:F}),Le=function(e,t){let{currentGroupChannel:n,messagesDispatcher:a}=e,{logger:i}=t;return Object(r.useCallback)(e=>{i.info("Channel: Resending message has started",e);const{messageType:t,file:r}=e;if(null!=e&&e.isResendable){if(e.requestState="pending",e.sendingStatus="pending",a({type:"RESEND_MESSAGE_START",payload:e}),"user"===t)return n.resendUserMessage(e).then(e=>{i.info("Channel: Resending message success!",e),a({type:"SEND_MESSAGE_SUCESS",payload:e})}).catch(t=>{i.warning("Channel: Resending message failed!",t),e.requestState="failed",e.sendingStatus="failed",a({type:"SEND_MESSAGE_FAILURE",payload:e})}),e.requestState="pending",e.sendingStatus="pending",void a({type:"RESEND_MESSAGE_START",payload:e});"file"===t&&(n.resendFileMessage(e,r).then(e=>{i.info("Channel: Resending file message success!",e),a({type:"SEND_MESSAGE_SUCESS",payload:e})}).catch(t=>{i.warning("Channel: Resending file message failed!",t),e.requestState="failed",e.sendingStatus="failed",a({type:"SEND_MESSAGE_FAILURE",payload:e})}),e.requestState="pending",e.sendingStatus="pending",a({type:"RESEND_MESSAGE_START",payload:e}))}else console.error("Message is not resendable"),i.warning("Message is not resendable",e)},[n,a])}({currentGroupChannel:_e,messagesDispatcher:ue},{logger:H}),[ke,De]=function(e,t){let{isMentionEnabled:n,currentGroupChannel:a,onBeforeSendUserMessage:i}=e,{logger:s,pubSub:o,scrollRef:l,messagesDispatcher:c}=t;return[Object(r.useRef)(null),Object(r.useCallback)(e=>{const{quoteMessage:t=null,message:r,mentionTemplate:u,mentionedUsers:d}=e;i&&"function"==typeof i&&s.info("Channel: creating params using onBeforeSendUserMessage",i);const h=i?i(r,t):(()=>{const e={};return e.message=r,n&&(null==d?void 0:d.length)>0&&(e.mentionedUsers=d),n&&u&&(null==d?void 0:d.length)>0&&(e.mentionedMessageTemplate=u),t&&(e.isReplyToChannel=!0,e.parentMessageId=t.messageId),e})();s.info("Channel: Sending message has started",h),a.sendUserMessage(h).onPending(e=>{o.publish(Dm,{message:e,channel:a}),setTimeout(()=>og(0,l))}).onFailed((e,t)=>{s.warning("Channel: Sending message failed!",{message:t,error:e}),c({type:"SEND_MESSAGE_FAILURE",payload:t})}).onSucceeded(e=>{s.info("Channel: Sending message success!",e),c({type:"SEND_MESSAGE_SUCESS",payload:e})})},[a,i])]}({currentGroupChannel:_e,onBeforeSendUserMessage:g,isMentionEnabled:V},{logger:H,pubSub:F,scrollRef:de,messagesDispatcher:ue}),[xe]=function(e,t){let{currentGroupChannel:n,onBeforeSendFileMessage:a,imageCompression:i={}}=e,{logger:o,pubSub:l,scrollRef:c,messagesDispatcher:u}=t;return[Object(r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{compressionRate:r,resizingWidth:d,resizingHeight:h}=i,f=a&&"function"==typeof a,p="image/jpg"===e.type||"image/png"===e.type||"image/jpeg"===e.type,m=r>0&&r<1,b=mg(d)||mg(h),_=p&&(m||b),g=e=>{const n={};return n.file=e,t&&(n.isReplyToChannel=!0,n.parentMessageId=t.messageId),n};if(_)try{const i=document.createElement("img");i.src=URL.createObjectURL(e),i.onload=()=>{URL.revokeObjectURL(i.src);const p=document.createElement("canvas"),m=i.naturalWidth||i.width,_=i.naturalHeight||i.height;let v=mg(d)||m,E=mg(h)||_;"image/png"!==e.type||b||(v*=r,E*=r),p.width=v,p.height=E;const y=p.getContext("2d");y.drawImage(i,0,0,v,E),y.canvas.toBlob(r=>{const i=new File([r],e.name,{type:e.type});f&&o.info("Channel: Creating params using onBeforeSendFileMessage",a);const d=f?a(i,t):g(i);o.info("Channel: Uploading file message start!",d),n.sendFileMessage(d).onPending(e=>{l.publish(Dm,{message:s(s({},e),{},{url:URL.createObjectURL(i),requestState:"pending"}),channel:n}),setTimeout(()=>og(0,c),1e3)}).onFailed((e,t)=>{o.error("Channel: Sending file message failed!",{failedMessage:t,err:e}),t.localUrl=URL.createObjectURL(i),t.file=i,u({type:"SEND_MESSAGE_FAILURE",payload:t})}).onSucceeded(e=>{o.info("Channel: Sending file message success!",e),u({type:"SEND_MESSAGE_SUCESS",payload:e})})},e.type,r)}}catch(e){o.error("Channel: Sending file message failed!",e)}else{f&&o.info("Channel: creating params using onBeforeSendFileMessage",a);const r=a?a(e,t):g(e);o.info("Channel: Uploading file message start!",r),n.sendFileMessage(r).onPending(t=>{l.publish(Dm,{message:s(s({},t),{},{url:URL.createObjectURL(e),requestState:"pending"}),channel:n}),setTimeout(()=>og(0,c),1e3)}).onFailed((t,n)=>{o.error("Channel: Sending file message failed!",{message:n,error:t}),n.localUrl=URL.createObjectURL(e),n.file=e,u({type:"SEND_MESSAGE_FAILURE",payload:n})}).onSucceeded(e=>{o.info("Channel: Sending message success!",e),u({type:"SEND_MESSAGE_SUCESS",payload:e})})}}),[n,a,i])]}({currentGroupChannel:_e,onBeforeSendFileMessage:v,imageCompression:z},{logger:H,pubSub:F,scrollRef:de,messagesDispatcher:ue}),[Pe]=((e,t)=>{let{currentGroupChannel:n,onBeforeSendVoiceMessage:a}=e,{logger:i,pubSub:s,scrollRef:o,messagesDispatcher:l}=t;return[Object(r.useCallback)((e,t,r)=>{const c=a&&"function"==typeof a?a(e,r):{file:e,fileName:Lu.g,mimeType:Lu.h,metaArrays:[new ce({key:Lu.c,value:[""+t]}),new ce({key:Lu.i,value:[Lu.j]})]};r&&(c.isReplyToChannel=!0,c.parentMessageId=r.messageId),i.info("Channel: Start sending voice message",c),n.sendFileMessage(c).onPending(e=>{s.publish(Dm,{message:e,channel:n}),setTimeout(()=>og(0,o),1e3)}).onFailed((e,t)=>{i.error("Channel: Sending voice message failed!",{failedMessage:t,err:e}),l({type:"SEND_MESSAGE_FAILURE",payload:t})}).onSucceeded(e=>{i.info("Channel: Sending voice message success!",e),l({type:"SEND_MESSAGE_SUCESS",payload:e})})},[n,a])]})({currentGroupChannel:_e,onBeforeSendVoiceMessage:y},{logger:H,pubSub:F,scrollRef:de,messagesDispatcher:ue});return a.a.createElement(Sg.Provider,{value:{channelUrl:u,isReactionEnabled:Te,isMessageGroupingEnabled:f,showSearchIcon:null!=p?p:Z.showSearchIcon,highlightedMessage:b,startingPoint:_,onBeforeSendUserMessage:g,onBeforeSendFileMessage:v,onBeforeUpdateUserMessage:E,onChatHeaderActionClick:O,onSearchClick:C,onBackClick:N,replyType:P,threadReplySelectType:null!==(l=null!=S?S:sm(Y.threadReplySelectType).upperCase)&&void 0!==l?l:eg.THREAD,queries:I,filterMessageList:A,disableMarkAsRead:w,onReplyInThread:M,onQuoteMessageClick:j,onMessageAnimated:R,onMessageHighlighted:U,allMessages:he,loading:fe,initialized:pe,unreadSince:me,isInvalid:be,currentGroupChannel:_e,hasMorePrev:ge,hasMoreNext:Ee,oldestMessageTimeStamp:ve,latestMessageTimeStamp:ye,emojiContainer:Oe,readStatus:Ce,scrollToMessage:we,quoteMessage:se,setQuoteMessage:oe,deleteMessage:Re,updateMessage:Ue,resendMessage:Le,messageInputRef:ke,sendMessage:De,sendFileMessage:xe,sendVoiceMessage:Pe,initialTimeStamp:$,messageActionTypes:tg,messagesDispatcher:ue,setInitialTimeStamp:J,setAnimatedMessageId:ne,setHighLightedMessageId:ae,animatedMessageId:ee,highLightedMessageId:re,nicknamesMap:Ie,emojiAllMap:Se,onScrollCallback:Ae,onScrollDownCallback:Me,scrollRef:de,scrollBehavior:L,toggleReaction:je}},a.a.createElement(Km,{disableUserProfile:null!==(c=null==e?void 0:e.disableUserProfile)&&void 0!==c?c:null==x?void 0:x.disableUserProfile,renderUserProfile:null==e?void 0:e.renderUserProfile,onUserProfileMessage:K},d))},Ag=()=>a.a.useContext(Sg),wg=e=>{let{members:t}=e;const{stringSet:n}=Object(r.useContext)(td);return t&&0!==t.length?t&&1===t.length?`${t[0].nickname} ${n.TYPING_INDICATOR__IS_TYPING}`:t&&2===t.length?`${t[0].nickname} ${n.TYPING_INDICATOR__AND} ${t[1].nickname} ${n.TYPING_INDICATOR__ARE_TYPING}`:n.TYPING_INDICATOR__MULTIPLE_TYPING:""},Mg=()=>{var e,t,n;const{channelUrl:i}=Ag(),s=ku(),o=null==s||null===(e=s.stores)||void 0===e||null===(t=e.sdkStore)||void 0===t?void 0:t.sdk,l=null==s||null===(n=s.config)||void 0===n?void 0:n.logger,[c,u]=Object(r.useState)(es()),[d,h]=Object(r.useState)([]);return Object(r.useEffect)(()=>{var e;if(null!=o&&null!==(e=o.groupChannel)&&void 0!==e&&e.addGroupChannelHandler){o.groupChannel.removeGroupChannelHandler(c);const e=es(),t=new Tc({onTypingStatusUpdated:e=>{if(l.info("Channel > Typing Indicator: onTypingStatusUpdated",e),e.url===i){const t=e.getTypingUsers();h(t)}}});o.groupChannel.addGroupChannelHandler(e,t),u(e)}return()=>{var e;h([]),null!=o&&null!==(e=o.groupChannel)&&void 0!==e&&e.removeGroupChannelHandler&&o.groupChannel.removeGroupChannelHandler(c)}},[i]),a.a.createElement(hd,{className:"sendbird-conversation__footer__typing-indicator__text",type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},a.a.createElement(wg,{members:d}))},jg=300;function Rg(e){(function(e){return e&&"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()}function Ug(e){let{onLongPress:t,onClick:n}=e,{delay:a=jg,shouldPreventDefault:i=!0,shouldStopPropagation:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isMobile:l}=Xp(),[c,u]=Object(r.useState)(!1),[d,h]=Object(r.useState)(!1),f=Object(r.useRef)(),p=Object(r.useRef)(),m=Object(r.useCallback)(e=>{e.persist();const n=s({},e);h(!1),o&&e.stopPropagation(),i&&e.target&&(e.target.addEventListener("touchend",Rg,{passive:!1}),p.current=e.target),f.current=setTimeout(()=>{t(n),u(!0)},a)},[t,a,i,o,l]),b=Object(r.useCallback)((function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(!!r),null!=f&&f.current&&clearTimeout(f.current),!t||c||d||null==n||n(e),u(!1),i&&p.current&&p.current.removeEventListener("touchend",Rg)}),[i,n,c,d]);return{onMouseDown:e=>m(e),onMouseUp:e=>b(e),onMouseLeave:e=>b(e,!1),onTouchStart:e=>m(e),onTouchMove:e=>b(e,!1,!0),onTouchEnd:e=>b(e)}}const Lg=e=>{var t,n,i,o,c,u,d,h,f;let{channel:p,isActive:m=!1,isTyping:b=!1,renderChannelAction:_,onLeaveChannel:g,onClick:v,tabIndex:E}=e;const y=ku(),{isTypingIndicatorEnabled:O=!1,isMessageReceiptStatusEnabled:C=!1}=$m(),{dateLocale:N,stringSet:T}=rd(),{isMobile:S}=Xp(),[I,A]=Object(r.useState)(!1),w=null==y||null===(t=y.stores)||void 0===t||null===(n=t.userStore)||void 0===n||null===(i=n.user)||void 0===i?void 0:i.userId,M=null==y||null===(o=y.config)||void 0===o?void 0:o.theme,j=null==y||null===(c=y.config)||void 0===c?void 0:c.isMentionEnabled,R=(null==p?void 0:p.isFrozen)||!1,U=(null==p?void 0:p.isBroadcast)||!1,L=O&&b,k=C&&("user"===(null==p||null===(u=p.lastMessage)||void 0===u?void 0:u.messageType)||"file"===(null==p||null===(d=p.lastMessage)||void 0===d?void 0:d.messageType))&&(null==p||null===(h=p.lastMessage)||void 0===h||null===(f=h.sender)||void 0===f?void 0:f.userId)===w,D=Ug({onLongPress:()=>{S&&A(!0)},onClick:v},{delay:1e3}),x=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:md;return null!=t&&t.name||null!=t&&t.members?null!=t&&t.name&&"Group Channel"!==t.name?t.name:1===(null==t||null===(e=t.members)||void 0===e?void 0:e.length)?r.NO_MEMBERS:((null==t?void 0:t.members)||[]).filter(e=>{let{userId:t}=e;return t!==n}).map(e=>{let{nickname:t}=e;return t||r.NO_NAME}).join(", "):r.NO_TITLE}(p,w,T);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",l({className:["sendbird-channel-preview",m?"sendbird-channel-preview--active":""].join(" "),role:"link",tabIndex:E},S?s({},D):{onClick:v}),a.a.createElement("div",{className:"sendbird-channel-preview__avatar"},a.a.createElement(kb,{channel:p,userId:w,theme:M})),a.a.createElement("div",{className:"sendbird-channel-preview__content"},a.a.createElement("div",{className:"sendbird-channel-preview__content__upper"},a.a.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},U&&a.a.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},a.a.createElement(Bp,{type:zp.BROADCAST,fillColor:Vp.SECONDARY,height:"16px",width:"16px"})),a.a.createElement(hd,{className:"sendbird-channel-preview__content__upper__header__channel-name",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_1},x),a.a.createElement(hd,{className:"sendbird-channel-preview__content__upper__header__total-members",type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},(e=>null!=e&&e.memberCount?e.memberCount:0)(p)),R&&a.a.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},a.a.createElement(Bp,{type:zp.FREEZE,fillColor:Vp.PRIMARY,height:12,width:12}))),!(null!=p&&p.isEphemeral)&&k&&a.a.createElement(W_,{className:"sendbird-channel-preview__content__upper__last-message-at",channel:p,message:null==p?void 0:p.lastMessage,isDateSeparatorConsidered:!1}),!(null!=p&&p.isEphemeral)&&!k&&a.a.createElement(hd,{className:"sendbird-channel-preview__content__upper__last-message-at",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},V_({channel:p,locale:N,stringSet:T}))),a.a.createElement("div",{className:"sendbird-channel-preview__content__lower"},a.a.createElement(hd,{className:"sendbird-channel-preview__content__lower__last-message",type:fd.BODY_2,color:pd.ONBACKGROUND_3},L&&a.a.createElement(wg,{members:null==p?void 0:p.getTypingUsers()}),!L&&!nu(null==p?void 0:p.lastMessage)&&q_(p),!L&&nu(null==p?void 0:p.lastMessage)&&T.VOICE_MESSAGE),!(null!=p&&p.isEphemeral)&&a.a.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},j&&(null==p?void 0:p.unreadMentionCount)>0?a.a.createElement(Y_,{className:"sendbird-channel-preview__content__lower__unread-message-count__mention",color:"purple"},"@"):null,K_(p)?a.a.createElement(Db,{count:K_(p)}):null))),!S&&a.a.createElement("div",{className:"sendbird-channel-preview__action"},_({channel:p}))),I&&S&&a.a.createElement(em,{className:"sendbird-channel-preview__leave--mobile",titleText:x,hideFooter:!0,isCloseOnClickOutside:!0,onCancel:()=>A(!1)},a.a.createElement(Z_,{onClick:()=>{g(),A(!1)},className:"sendbird-channel-preview__leave-label--mobile"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},T.CHANNEL_PREVIEW_MOBILE_LEAVE))))},kg=e=>{var t,n,r;const{channel:i=null,onSubmit:s=Vm,onCancel:o=Vm}=e,l=null===(t=$m())||void 0===t?void 0:t.currentChannel,c=i||l,u=ku(),{stringSet:d}=rd(),h=null==u||null===(n=u.config)||void 0===n?void 0:n.logger,f=null==u||null===(r=u.config)||void 0===r?void 0:r.isOnline;if(c)return a.a.createElement(em,{disabled:!f,onCancel:o,onSubmit:()=>{h.info("ChannelSettings: Leaving channel",c),null==c||c.leave().then(()=>{h.info("ChannelSettings: Leaving channel successful!",c),s()})},submitText:d.MODAL__LEAVE_CHANNEL__FOOTER,titleText:d.MODAL__LEAVE_CHANNEL__TITLE})};function Dg(e){let{channel:t,disabled:n,onLeaveChannel:i}=e;const s=Object(r.useRef)(null),o=Object(r.useRef)(null),[l,c]=Object(r.useState)(!1),{stringSet:u}=Object(r.useContext)(td);return a.a.createElement("div",{role:"button",style:{display:"inline-block"},onKeyDown:e=>{e.stopPropagation()},tabIndex:0,onClick:e=>{e.stopPropagation()},ref:o},a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{ref:s,onClick:e,height:"32px",width:"32px"},a.a.createElement(Bp,{type:zp.MORE,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),menuItems:e=>a.a.createElement(Ob,{parentRef:s,parentContainRef:o,closeDropdown:e},a.a.createElement(Nb,{onClick:()=>{n||(c(!0),e())},dataSbId:"channel_list_item_context_menu_leave_channel"},u.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}),l&&a.a.createElement(kg,{channel:t,onSubmit:()=>{c(!1),i()},onCancel:()=>c(!1)}))}Dg.propTypes={disabled:od.a.bool,onLeaveChannel:od.a.func.isRequired,channel:od.a.shape({})},Dg.defaultProps={disabled:!1,channel:null};const xg=e=>{let{children:t}=e;return a.a.createElement(hd,{className:"sendbird-input-label",type:fd.CAPTION_3,color:pd.ONBACKGROUND_1},t)},Pg=a.a.forwardRef((e,t)=>{const{name:n,required:i,disabled:s,value:o,placeHolder:l}=e,[c,u]=Object(r.useState)(o);return a.a.createElement("div",{className:"sendbird-input"},a.a.createElement("input",{className:"sendbird-input__input",ref:t,name:n,required:i,disabled:s,value:c,onChange:e=>{u(e.target.value)}}),l&&!c&&a.a.createElement(hd,{className:"sendbird-input__placeholder",type:fd.BODY_1,color:pd.ONBACKGROUND_3},l))}),Fg=a.a.createContext(void 0),Hg=e=>{const{children:t,onEditProfile:n,onCancel:i,onThemeChange:s}=e,o=Object(r.useMemo)(()=>({onEditProfile:n,onCancel:i,onThemeChange:s}),[]);return a.a.createElement(Fg.Provider,{value:o},t)};function Gg(){var e,t,n,i,s,o,l;const c=a.a.useContext(Fg),u=ku(),d=Object(r.useRef)(null),h=Object(r.useRef)(null),f=Object(r.useRef)(null),{stringSet:p}=Object(r.useContext)(td),[m,b]=Object(r.useState)(null),[_,g]=Object(r.useState)(null),{onEditProfile:v,onCancel:E,onThemeChange:y}=c,O=(null==u||null===(e=u.config)||void 0===e?void 0:e.theme)||"light",C=(null==u||null===(t=u.config)||void 0===t?void 0:t.setCurrenttheme)||Vm,N=null==u||null===(n=u.stores)||void 0===n||null===(i=n.userStore)||void 0===i?void 0:i.user,T=null==u||null===(s=u.stores)||void 0===s||null===(o=s.sdkStore)||void 0===o?void 0:o.sdk,S=null==u||null===(l=u.dispatchers)||void 0===l?void 0:l.userDispatcher;return a.a.createElement(em,{titleText:p.EDIT_PROFILE__TITLE,submitText:p.BUTTON__SAVE,type:Ed.PRIMARY,onCancel:E,isFullScreenOnMobile:!0,onSubmit:()=>{var e;""===(null==N?void 0:N.nickname)||h.current.value?null==T||T.updateCurrentUserInfo({nickname:null==h||null===(e=h.current)||void 0===e?void 0:e.value,profileImage:_}).then(e=>{S({type:$.UPDATE_USER_INFO,payload:e}),v&&"function"==typeof v&&v(e)}):f.current.reportValidity&&f.current.reportValidity()}},a.a.createElement("form",{className:"sendbird-edit-user-profile",ref:f,onSubmit:e=>{e.preventDefault()}},a.a.createElement("section",{className:"sendbird-edit-user-profile__img"},a.a.createElement(xg,null,p.EDIT_PROFILE__IMAGE_LABEL),a.a.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},a.a.createElement(sb,{width:"80px",height:"80px",src:m||(null==N?void 0:N.profileUrl)})),a.a.createElement("input",{ref:d,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:e=>{b(URL.createObjectURL(e.target.files[0])),g(e.target.files[0]),d.current.value=""}}),a.a.createElement(Z_,{className:"sendbird-edit-user-profile__img__avatar-button",disableUnderline:!0,onClick:()=>d.current.click()},a.a.createElement(hd,{type:fd.BUTTON_1,color:pd.PRIMARY},p.EDIT_PROFILE__IMAGE_UPLOAD))),a.a.createElement("section",{className:"sendbird-edit-user-profile__name"},a.a.createElement(xg,null,p.EDIT_PROFILE__NICKNAME_LABEL),a.a.createElement(Pg,{required:""!==(null==N?void 0:N.nickname),name:"sendbird-edit-user-profile__name__input",ref:h,value:null==N?void 0:N.nickname,placeHolder:p.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),a.a.createElement("section",{className:"sendbird-edit-user-profile__userid"},a.a.createElement(xg,null,p.EDIT_PROFILE__USERID_LABEL),a.a.createElement(Pg,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:null==N?void 0:N.userId})),a.a.createElement("section",{className:"sendbird-edit-user-profile__theme"},a.a.createElement(xg,null,p.EDIT_PROFILE__THEME_LABEL),a.a.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},"dark"===O?a.a.createElement(Bp,{onClick:()=>{C("light"),null==y||y("light")},type:zp.TOGGLE_ON,width:44,height:24}):a.a.createElement(Bp,{onClick:()=>{C("dark"),null==y||y("dark")},type:zp.TOGGLE_OFF,width:44,height:24})))))}const Bg=e=>{const{onEditProfile:t,onCancel:n,onThemeChange:r}=e;return a.a.createElement(Hg,{onEditProfile:t,onCancel:n,onThemeChange:r},a.a.createElement(Gg,null))};var zg={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};const Vg=zg;function qg(e){let{className:t="",type:n,iconSize:i,searchInString:s="",retryToConnect:o=null}=e;const{stringSet:l}=Object(r.useContext)(td);return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-place-holder"].join(" ")},n===Vg.LOADING&&a.a.createElement(k_,{width:i||"48px",height:i||"48px"},a.a.createElement(Bp,{type:zp.SPINNER,fillColor:Vp.PRIMARY,width:i||"48px",height:i||"48px"})),(n===Vg.NO_CHANNELS||n===Vg.NO_MESSAGES||n===Vg.WRONG)&&a.a.createElement("div",{className:"sendbird-place-holder__body"},n===Vg.NO_CHANNELS&&a.a.createElement(Bp,{className:"sendbird-place-holder__body__icon",type:zp.CHAT,fillColor:Vp.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),n===Vg.WRONG&&a.a.createElement(Bp,{className:"sendbird-place-holder__body__icon",type:zp.ERROR,fillColor:Vp.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),n===Vg.NO_MESSAGES&&a.a.createElement(Bp,{className:"sendbird-place-holder__body__icon",type:zp.MESSAGE,fillColor:Vp.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),a.a.createElement(hd,{className:"sendbird-place-holder__body__text",type:fd.BODY_1,color:pd.ONBACKGROUND_2},n===Vg.NO_CHANNELS&&l.PLACE_HOLDER__NO_CHANNEL,n===Vg.WRONG&&l.PLACE_HOLDER__WRONG,n===Vg.NO_MESSAGES&&l.PLACE_HOLDER__NO_MESSAGES),o&&a.a.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:o,onKeyPress:o,tabIndex:0},a.a.createElement(Bp,{className:"sendbird-place-holder__body__reconnect__icon",type:zp.REFRESH,fillColor:Vp.PRIMARY,width:"20px",height:"20px"}),a.a.createElement(hd,{className:"sendbird-place-holder__body__reconnect__text",type:fd.BUTTON_1,color:pd.PRIMARY},l.PLACE_HOLDER__RETRY_TO_CONNECT))),(n===Vg.NO_RESULTS||n===Vg.SEARCH_IN||n===Vg.SEARCHING)&&a.a.createElement("div",{className:"sendbird-place-holder__body--align-top"},n===Vg.SEARCH_IN&&a.a.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},a.a.createElement(hd,{className:"sendbird-place-holder__body--align-top__text__search-in",type:fd.BUTTON_2,color:pd.ONBACKGROUND_2},l.SEARCH_IN),a.a.createElement(hd,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:fd.BUTTON_2,color:pd.PRIMARY},"'"+s),a.a.createElement(hd,{className:"sendbird-place-holder__body--align-top__text__quote",type:fd.BUTTON_2,color:pd.PRIMARY},"'")),n===Vg.SEARCHING&&a.a.createElement(hd,{className:"sendbird-place-hlder__body--align-top__searching",type:fd.BODY_1,color:pd.ONBACKGROUND_2},l.SEARCHING),n===Vg.NO_RESULTS&&a.a.createElement(hd,{className:"sendbird-place-hlder__body--align-top__no-result",type:fd.BODY_1,color:pd.ONBACKGROUND_2},l.NO_SEARCHED_MESSAGE)))}const Kg=e=>{var t;const{renderHeader:n,renderChannelPreview:i,renderPlaceHolderError:s,renderPlaceHolderLoading:o,renderPlaceHolderEmptyList:l}=e,[c,u]=Object(r.useState)(!1),{onThemeChange:d,allowProfileEdit:h,allChannels:f,loading:p,currentChannel:m,channelListDispatcher:b,typingChannels:_,initialized:g,fetchChannelList:v}=$m(),E=ku(),y=null==E||null===(t=E.stores)||void 0===t?void 0:t.sdkStore,O=null==E?void 0:E.config,{logger:C,isOnline:N=!1}=O,T=null==y?void 0:y.error;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-channel-list__header"},(null==n?void 0:n())||a.a.createElement(ob,{onEdit:()=>{h&&u(!0)},allowProfileEdit:h,renderIconButton:()=>a.a.createElement(Ub,null)})),c&&a.a.createElement(Bg,{onThemeChange:d,onCancel:()=>{u(!1)},onEditProfile:()=>{u(!1)}}),a.a.createElement("div",{className:"sendbird-channel-list__body",onScroll:e=>{const t=null==e?void 0:e.target;var n,r,a;n=t.clientHeight+t.scrollTop,r=t.scrollHeight,a=10,Math.abs(n-r)<=a&&v()}},T&&!p&&(s&&"function"==typeof s?null==s?void 0:s():a.a.createElement(qg,{type:Vg.WRONG})),a.a.createElement("div",null,f&&f.map((e,t)=>{const n=(t,n)=>{C.info("ChannelList: Leaving channel",t),t.leave().then(t=>{C.info("ChannelList: Leaving channel success",t),n&&"function"==typeof n&&n(t,null),b({type:"LEAVE_CHANNEL_SUCCESS",payload:null==e?void 0:e.url})}).catch(e=>{C.error("ChannelList: Leaving channel failed",e),n&&"function"==typeof n&&n(null,e)})},r=()=>{N&&(C.info("ChannelList: Clicked on channel:",e),b({type:"SET_CURRENT_CHANNEL",payload:e}))};return i?a.a.createElement("div",{key:null==e?void 0:e.url,onClick:r},i({channel:e,onLeaveChannel:n})):a.a.createElement(Lg,{key:null==e?void 0:e.url,tabIndex:t,onClick:r,channel:e,onLeaveChannel:()=>n(e,null),isActive:(null==e?void 0:e.url)===(null==m?void 0:m.url),isTyping:null==_?void 0:_.some(t=>{let{url:n}=t;return n===(null==e?void 0:e.url)}),renderChannelAction:()=>a.a.createElement(Dg,{channel:e,disabled:!N,onLeaveChannel:()=>n(e,null)})})})),!g&&p&&(o&&"function"==typeof o?null==o?void 0:o():a.a.createElement(qg,{type:Vg.LOADING})),g&&0===(null==f?void 0:f.length)&&(l&&"function"==typeof l?null==l?void 0:l():a.a.createElement(qg,{type:Vg.NO_CHANNELS}))))},Wg=e=>a.a.createElement(Zm,{className:null==e?void 0:e.className,disableUserProfile:null==e?void 0:e.disableUserProfile,allowProfileEdit:null==e?void 0:e.allowProfileEdit,onBeforeCreateChannel:null==e?void 0:e.onBeforeCreateChannel,onThemeChange:null==e?void 0:e.onThemeChange,overrideInviteUser:null==e?void 0:e.overrideInviteUser,onProfileEditSuccess:null==e?void 0:e.onProfileEditSuccess,onChannelSelect:null==e?void 0:e.onChannelSelect,sortChannelList:null==e?void 0:e.sortChannelList,queries:null==e?void 0:e.queries,disableAutoSelect:null==e?void 0:e.disableAutoSelect,activeChannelUrl:null==e?void 0:e.activeChannelUrl,isTypingIndicatorEnabled:null==e?void 0:e.isTypingIndicatorEnabled,isMessageReceiptStatusEnabled:null==e?void 0:e.isMessageReceiptStatusEnabled},a.a.createElement(Kg,{renderChannelPreview:null==e?void 0:e.renderChannelPreview,renderUserProfile:null==e?void 0:e.renderUserProfile,renderHeader:null==e?void 0:e.renderHeader,renderPlaceHolderEmptyList:null==e?void 0:e.renderPlaceHolderEmptyList,renderPlaceHolderError:null==e?void 0:e.renderPlaceHolderError,renderPlaceHolderLoading:null==e?void 0:e.renderPlaceHolderLoading}));function Yg(){const{stringSet:e}=Object(r.useContext)(td);return a.a.createElement("div",{className:"sendbird-connection-status"},a.a.createElement(hd,{type:fd.BODY_2,color:pd.ONBACKGROUND_2},e.TRYING_TO_CONNECT),a.a.createElement(Bp,{type:zp.DISCONNECTED,fillColor:Vp.SENT,width:"14px",height:"14px"}))}const Qg=(e,t,n)=>{var r;const a=n||md;return null!=e&&e.name||null!=e&&e.members?null!=e&&e.name&&"Group Channel"!==e.name?e.name:1===(null==e||null===(r=e.members)||void 0===r?void 0:r.length)?a.NO_MEMBERS:null==e?void 0:e.members.filter(e=>{let{userId:n}=e;return n!==t}).map(e=>{let{nickname:t}=e;return t||a.NO_NAME}).join(", "):a.NO_TITLE},Xg=e=>{var t,n,i;let{className:s=""}=e;const o=ku(),l=null==o||null===(t=o.config)||void 0===t?void 0:t.userId,c=null==o||null===(n=o.config)||void 0===n?void 0:n.theme,u=Ag(),{isMobile:d}=Xp(),{currentGroupChannel:h,showSearchIcon:f,onSearchClick:p,onChatHeaderActionClick:m,onBackClick:b=Vm}=u,_=(null==h?void 0:h.members)&&2!==(null==h||null===(i=h.members)||void 0===i?void 0:i.length),g="muted"===(null==h?void 0:h.myMutedState),{stringSet:v}=Object(r.useContext)(td);return a.a.createElement("div",{className:"sendbird-chat-header "+s},a.a.createElement("div",{className:"sendbird-chat-header__left"},d&&a.a.createElement(Bp,{className:"sendbird-chat-header__icon_back",onClick:b,fillColor:Vp.PRIMARY,width:"24px",height:"24px",type:zp.ARROW_LEFT}),a.a.createElement(kb,{theme:c,channel:h,userId:l,height:32,width:32}),a.a.createElement(hd,{className:"sendbird-chat-header__left__title",type:fd.H_2,color:pd.ONBACKGROUND_1},Qg(h,l,v)),a.a.createElement(hd,{className:"sendbird-chat-header__left__subtitle",type:fd.BODY_1,color:pd.ONBACKGROUND_2},_)),a.a.createElement("div",{className:"sendbird-chat-header__right"},("string"==typeof g&&"true"===g||"boolean"==typeof g&&g)&&a.a.createElement(Bp,{className:"sendbird-chat-header__right__mute",type:zp.NOTIFICATIONS_OFF_FILLED,fillColor:Vp.ON_BACKGROUND_2,width:"24px",height:"24px"}),f&&!(null!=h&&h.isEphemeral)&&a.a.createElement(qp,{className:"sendbird-chat-header__right__search",width:"32px",height:"32px",onClick:p},a.a.createElement(Bp,{type:zp.SEARCH,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(qp,{className:"sendbird-chat-header__right__info",width:"32px",height:"32px",onClick:m},a.a.createElement(Bp,{type:zp.INFO,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}))))},Zg="Enter",$g="ArrowUp",Jg="ArrowDown",ev="Backspace",tv=1,nv=3,rv="SPAN",av="BR",iv="DIV";let sv=function(e){return e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED",e}({}),ov=function(e){return e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED",e}({}),lv=function(e){return e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED",e}({});const cv=e=>null===(null==e?void 0:e.parentMessage)&&"number"==typeof(null==e?void 0:e.parentMessageId)&&!(null!=e&&e.parentMessageId),uv=e=>null!==(null==e?void 0:e.parentMessage)&&"number"==typeof(null==e?void 0:e.parentMessageId)&&(null==e?void 0:e.parentMessageId)>0&&null===(null==e?void 0:e.threadInfo),dv=(e,t,n)=>Math.abs(e-t)<=n,hv=e=>null==e;function fv(e,t){if(hv(e)||hv(t))return!1;return e.toString()===t.toString()}const pv=e=>U_(e.createdAt,"p"),mv=(e,t)=>jc(e,t)===Mc.READ,bv=(e,t,n)=>{var r,a,i,s;return!!(e&&t&&e.messageType&&"admin"!==e.messageType&&t.messageType&&"admin"!==(null==t?void 0:t.messageType)&&null!=e&&e.sender&&null!=t&&t.sender&&null!=e&&e.createdAt&&null!=t&&t.createdAt&&null!=e&&null!==(r=e.sender)&&void 0!==r&&r.userId&&null!=t&&null!==(a=t.sender)&&void 0!==a&&a.userId)&&((null==e?void 0:e.sendingStatus)===(null==t?void 0:t.sendingStatus)&&(null==e||null===(i=e.sender)||void 0===i?void 0:i.userId)===(null==t||null===(s=t.sender)||void 0===s?void 0:s.userId)&&pv(e)===pv(t)&&mv(n,e)===mv(n,t))},_v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=10,n=e;if(!(n>t))try{const e=document.querySelector(".sendbird-thread-ui--scroll");e.scrollTop=e.scrollHeight}catch(e){setTimeout(()=>{_v(n+1)},500*n)}};let gv=function(e){return e.INIT_USER_ID="INIT_USER_ID",e.GET_CHANNEL_START="GET_CHANNEL_START",e.GET_CHANNEL_SUCCESS="GET_CHANNEL_SUCCESS",e.GET_CHANNEL_FAILURE="GET_CHANNEL_FAILURE",e.SET_EMOJI_CONTAINER="SET_EMOJI_CONTAINER",e.GET_PARENT_MESSAGE_START="GET_PARENT_MESSAGE_START",e.GET_PARENT_MESSAGE_SUCCESS="GET_PARENT_MESSAGE_SUCCESS",e.GET_PARENT_MESSAGE_FAILURE="GET_PARENT_MESSAGE_FAILURE",e.INITIALIZE_THREAD_LIST_START="INITIALIZE_THREAD_LIST_START",e.INITIALIZE_THREAD_LIST_SUCCESS="INITIALIZE_THREAD_LIST_SUCCESS",e.INITIALIZE_THREAD_LIST_FAILURE="INITIALIZE_THREAD_LIST_FAILURE",e.GET_PREV_MESSAGES_START="GET_PREV_MESSAGES_START",e.GET_PREV_MESSAGES_SUCESS="GET_PREV_MESSAGES_SUCESS",e.GET_PREV_MESSAGES_FAILURE="GET_PREV_MESSAGES_FAILURE",e.GET_NEXT_MESSAGES_START="GET_NEXT_MESSAGES_START",e.GET_NEXT_MESSAGES_SUCESS="GET_NEXT_MESSAGES_SUCESS",e.GET_NEXT_MESSAGES_FAILURE="GET_NEXT_MESSAGES_FAILURE",e.SEND_MESSAGE_START="SEND_MESSAGE_START",e.SEND_MESSAGE_SUCESS="SEND_MESSAGE_SUCESS",e.SEND_MESSAGE_FAILURE="SEND_MESSAGE_FAILURE",e.RESEND_MESSAGE_START="RESEND_MESSAGE_START",e.ON_MESSAGE_DELETED_BY_REQ_ID="ON_MESSAGE_DELETED_BY_REQ_ID",e.ON_MESSAGE_RECEIVED="ON_MESSAGE_RECEIVED",e.ON_MESSAGE_UPDATED="ON_MESSAGE_UPDATED",e.ON_MESSAGE_DELETED="ON_MESSAGE_DELETED",e.ON_REACTION_UPDATED="ON_REACTION_UPDATED",e.ON_USER_MUTED="ON_USER_MUTED",e.ON_USER_UNMUTED="ON_USER_UNMUTED",e.ON_USER_BANNED="ON_USER_BANNED",e.ON_USER_UNBANNED="ON_USER_UNBANNED",e.ON_USER_LEFT="ON_USER_LEFT",e.ON_CHANNEL_FROZEN="ON_CHANNEL_FROZEN",e.ON_CHANNEL_UNFROZEN="ON_CHANNEL_UNFROZEN",e.ON_OPERATOR_UPDATED="ON_OPERATOR_UPDATED",e}({});function vv(e,t){switch(t.type){case gv.INIT_USER_ID:return s(s({},e),{},{currentUserId:t.payload});case gv.GET_CHANNEL_START:return s(s({},e),{},{channelState:sv.LOADING,currentChannel:null});case gv.GET_CHANNEL_SUCCESS:{var n,r;const a=t.payload.groupChannel;return s(s({},e),{},{channelState:sv.INITIALIZED,currentChannel:a,isMuted:(null==a||null===(n=a.members)||void 0===n||null===(r=n.find(t=>(null==t?void 0:t.userId)===e.currentUserId))||void 0===r?void 0:r.isMuted)||!1,isChannelFrozen:(null==a?void 0:a.isFrozen)||!1})}case gv.GET_CHANNEL_FAILURE:return s(s({},e),{},{channelState:sv.INVALID,currentChannel:null});case gv.SET_EMOJI_CONTAINER:{const{emojiContainer:n}=t.payload;return s(s({},e),{},{emojiContainer:n})}case gv.GET_PARENT_MESSAGE_START:return s(s({},e),{},{parentMessageState:ov.LOADING,parentMessage:null});case gv.GET_PARENT_MESSAGE_SUCCESS:return s(s({},e),{},{parentMessageState:ov.INITIALIZED,parentMessage:t.payload.parentMessage});case gv.GET_PARENT_MESSAGE_FAILURE:return s(s({},e),{},{parentMessageState:ov.INVALID,parentMessage:null});case gv.INITIALIZE_THREAD_LIST_START:return s(s({},e),{},{threadListState:lv.LOADING,allThreadMessages:[]});case gv.INITIALIZE_THREAD_LIST_SUCCESS:{const{parentMessage:n,anchorMessage:r,threadedMessages:a}=t.payload,i=null!=r&&r.messageId?null==r?void 0:r.createdAt:null==n?void 0:n.createdAt,o=a.findIndex(e=>(null==e?void 0:e.createdAt)>i),l=o>-1?a.slice(0,o):a,c=null!=r&&r.messageId?[r]:[],u=o>-1?a.slice(o):[];return s(s({},e),{},{threadListState:lv.INITIALIZED,hasMorePrev:-1===o||30===o,hasMoreNext:a.length-o==30,allThreadMessages:[l,c,u].flat()})}case gv.INITIALIZE_THREAD_LIST_FAILURE:return s(s({},e),{},{threadListState:lv.INVALID,allThreadMessages:[]});case gv.GET_NEXT_MESSAGES_START:return s({},e);case gv.GET_NEXT_MESSAGES_SUCESS:{const{threadedMessages:n}=t.payload;return s(s({},e),{},{hasMoreNext:30===n.length,allThreadMessages:[...e.allThreadMessages,...n]})}case gv.GET_NEXT_MESSAGES_FAILURE:return s(s({},e),{},{hasMoreNext:!1});case gv.GET_PREV_MESSAGES_START:return s({},e);case gv.GET_PREV_MESSAGES_SUCESS:{const{threadedMessages:n}=t.payload;return s(s({},e),{},{hasMorePrev:30===n.length,allThreadMessages:[...n,...e.allThreadMessages]})}case gv.GET_PREV_MESSAGES_FAILURE:return s(s({},e),{},{hasMorePrev:!1});case gv.ON_MESSAGE_RECEIVED:{var a,i,o,l;const{channel:n,message:r}=t.payload;if((null===(a=e.currentChannel)||void 0===a?void 0:a.url)!==(null==n?void 0:n.url)||e.hasMoreNext||(null==r||null===(i=r.parentMessage)||void 0===i?void 0:i.messageId)!==(null==e||null===(o=e.parentMessage)||void 0===o?void 0:o.messageId))return e;const c=e.allThreadMessages.findIndex(e=>e.messageId===r.messageId)>-1;return s(s({},e),{},{parentMessage:(null===(l=e.parentMessage)||void 0===l?void 0:l.messageId)===(null==r?void 0:r.messageId)?r:e.parentMessage,allThreadMessages:c?e.allThreadMessages.map(e=>e.messageId===r.messageId?r:e):[...e.allThreadMessages.filter(e=>(null==e?void 0:e.reqId)!==(null==r?void 0:r.reqId)),r]})}case gv.ON_MESSAGE_UPDATED:{var c,u,d;const{channel:n,message:r}=t.payload;return(null===(c=e.currentChannel)||void 0===c?void 0:c.url)!==(null==n?void 0:n.url)?e:s(s({},e),{},{parentMessage:(null===(u=e.parentMessage)||void 0===u?void 0:u.messageId)===(null==r?void 0:r.messageId)?r:e.parentMessage,allThreadMessages:null===(d=e.allThreadMessages)||void 0===d?void 0:d.map(e=>(null==e?void 0:e.messageId)===(null==r?void 0:r.messageId)?r:e)})}case gv.ON_MESSAGE_DELETED:{var h,f,p;const{channel:n,messageId:r}=t.payload;return(null===(h=e.currentChannel)||void 0===h?void 0:h.url)!==(null==n?void 0:n.url)?e:(null==e||null===(f=e.parentMessage)||void 0===f?void 0:f.messageId)===r?s(s({},e),{},{parentMessage:null,parentMessageState:ov.NIL,allThreadMessages:[]}):s(s({},e),{},{allThreadMessages:null===(p=e.allThreadMessages)||void 0===p?void 0:p.filter(e=>(null==e?void 0:e.messageId)!==r)})}case gv.ON_MESSAGE_DELETED_BY_REQ_ID:return s(s({},e),{},{allThreadMessages:e.allThreadMessages.filter(e=>!fv(e.reqId,t.payload))});case gv.ON_REACTION_UPDATED:{var m,b;const n=null===(m=t.payload)||void 0===m?void 0:m.reactionEvent;var _,g;if((null==e||null===(b=e.parentMessage)||void 0===b?void 0:b.messageId)===(null==n?void 0:n.messageId))null===(_=e.parentMessage)||void 0===_||null===(g=_.applyReactionEvent)||void 0===g||g.call(_,n);return s(s({},e),{},{allThreadMessages:e.allThreadMessages.map(e=>{var t;return(null==n?void 0:n.messageId)===(null==e?void 0:e.messageId)?(null==e||null===(t=e.applyReactionEvent)||void 0===t||t.call(e,n),e):e})})}case gv.ON_USER_MUTED:{var v;const{channel:n,user:r}=t.payload;return(null===(v=e.currentChannel)||void 0===v?void 0:v.url)!==(null==n?void 0:n.url)||e.currentUserId!==(null==r?void 0:r.userId)?e:s(s({},e),{},{isMuted:!0})}case gv.ON_USER_UNMUTED:{var E;const{channel:n,user:r}=t.payload;return(null===(E=e.currentChannel)||void 0===E?void 0:E.url)!==(null==n?void 0:n.url)||e.currentUserId!==(null==r?void 0:r.userId)?e:s(s({},e),{},{isMuted:!1})}case gv.ON_USER_BANNED:return s(s({},e),{},{channelState:sv.NIL,threadListState:lv.NIL,parentMessageState:ov.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1});case gv.ON_USER_UNBANNED:return s({},e);case gv.ON_USER_LEFT:return s(s({},e),{},{channelState:sv.NIL,threadListState:lv.NIL,parentMessageState:ov.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1});case gv.ON_CHANNEL_FROZEN:return s(s({},e),{},{isChannelFrozen:!0});case gv.ON_CHANNEL_UNFROZEN:return s(s({},e),{},{isChannelFrozen:!1});case gv.ON_OPERATOR_UPDATED:{var y;const{channel:n}=t.payload;return(null==n?void 0:n.url)===(null===(y=e.currentChannel)||void 0===y?void 0:y.url)?s(s({},e),{},{currentChannel:n}):e}case gv.SEND_MESSAGE_START:{const{message:n}=t.payload;return s(s({},e),{},{allThreadMessages:[...e.allThreadMessages,n]})}case gv.SEND_MESSAGE_SUCESS:{const{message:n}=t.payload,r=e.allThreadMessages.filter(e=>!fv(null==e?void 0:e.reqId,null==n?void 0:n.reqId));return s(s({},e),{},{allThreadMessages:[...r,n]})}case gv.SEND_MESSAGE_FAILURE:{const{message:n}=t.payload;return s(s({},e),{},{allThreadMessages:e.allThreadMessages.map(e=>fv(null==e?void 0:e.reqId,null==n?void 0:n.reqId)?n:e)})}case gv.RESEND_MESSAGE_START:return s({},e);default:return e}}const Ev={currentChannel:null,allThreadMessages:[],parentMessage:null,channelState:sv.NIL,parentMessageState:ov.NIL,threadListState:lv.NIL,hasMorePrev:!1,hasMoreNext:!1,emojiContainer:{},isMuted:!1,isChannelFrozen:!1,currentUserId:""};const yv=a.a.createContext(null),Ov=e=>{var t,n;const{children:i,channelUrl:o,onHeaderActionClick:l,onMoveToParentMessage:c,onBeforeSendVoiceMessage:u,disableUserProfile:d,renderUserProfile:h}=e,f=null==e?void 0:e.message,p=(m=f)?cv(m)?m:uv(m)&&(null==m?void 0:m.parentMessage)||null:null;var m;const b=ku(),{stores:_,config:g}=b,{sdkStore:v,userStore:E}=_,{sdk:y}=v,{user:O}=E,C=null==v?void 0:v.initialized,{logger:N,pubSub:T,replyType:S,isMentionEnabled:I,isReactionEnabled:A,onUserProfileMessage:w}=g,[M,j]=Object(r.useReducer)(vv,Ev),{currentChannel:R,allThreadMessages:U,parentMessage:L,channelState:k,threadListState:D,parentMessageState:x,hasMorePrev:P,hasMoreNext:F,emojiContainer:H,isMuted:G,isChannelFrozen:B,currentUserId:z}=M;Object(r.useEffect)(()=>{j({type:gv.INIT_USER_ID,payload:null==O?void 0:O.userId})},[O]),function(e,t){let{channelUrl:n,sdkInit:a,message:i}=e,{sdk:s,logger:o,threadDispatcher:l}=t;Object(r.useEffect)(()=>{var e,t;a&&n&&null!=s&&s.groupChannel&&(l({type:gv.GET_CHANNEL_START,payload:null}),null===(e=(t=s.groupChannel).getChannel)||void 0===e||e.call(t,n).then(e=>{o.info("Thread | useInitialize: Get channel succeeded",e),l({type:gv.GET_CHANNEL_SUCCESS,payload:{groupChannel:e}})}).catch(e=>{o.info("Thread | useInitialize: Get channel failed",e),l({type:gv.GET_CHANNEL_FAILURE,payload:e})}))},[i,a])}({channelUrl:o,sdkInit:C,message:f},{sdk:y,logger:N,threadDispatcher:j}),function(e,t){let{channelUrl:n,sdkInit:a,parentMessage:i}=e,{sdk:s,logger:o,threadDispatcher:l}=t;Object(r.useEffect)(()=>{var e;if(a&&null!=s&&null!==(e=s.message)&&void 0!==e&&e.getMessage){l({type:gv.GET_PARENT_MESSAGE_START,payload:null});const e={channelUrl:n,channelType:te.y.GROUP,messageId:null==i?void 0:i.messageId,includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};o.info("Thread | useGetParentMessage: Get parent message start.",e);(async()=>{var t,n;return await(null===(t=(n=s.message).getMessage)||void 0===t?void 0:t.call(n,e))})().then(e=>{o.info("Thread | useGetParentMessage: Get parent message succeeded.",i),e.ogMetaData=(null==i?void 0:i.ogMetaData)||null,l({type:gv.GET_PARENT_MESSAGE_SUCCESS,payload:{parentMessage:e}})}).catch(e=>{o.info("Thread | useGetParentMessage: Get parent message failed.",e),l({type:gv.GET_PARENT_MESSAGE_FAILURE,payload:e})})}},[a,null==i?void 0:i.messageId])}({channelUrl:o,sdkInit:C,parentMessage:p},{sdk:y,logger:N,threadDispatcher:j}),function(e,t){let{sdkInit:n,parentMessage:a,anchorMessage:i,isReactionEnabled:s}=e,{logger:o,threadDispatcher:l}=t;Object(r.useEffect)(()=>{if(n&&null!=a&&a.getThreadedMessagesByTimestamp){var e;l({type:gv.INITIALIZE_THREAD_LIST_START,payload:null});const t=(null==i?void 0:i.createdAt)||0,n={prevResultSize:30,nextResultSize:30,includeReactions:s,includeMetaArray:!0};o.info("Thread | useGetThreadList: Initialize thread list start.",{timeStamp:t,params:n}),null===(e=a.getThreadedMessagesByTimestamp)||void 0===e||e.call(a,t,n).then(e=>{let{parentMessage:t,threadedMessages:n}=e;o.info("Thread | useGetThreadList: Initialize thread list succeeded.",{parentMessage:t,threadedMessages:n}),l({type:gv.INITIALIZE_THREAD_LIST_SUCCESS,payload:{parentMessage:t,anchorMessage:i,threadedMessages:n}})}).catch(e=>{o.info("Therad | useGetThreadList: Initialize thread list failed.",e),l({type:gv.INITIALIZE_THREAD_LIST_FAILURE,payload:e})})}},[n,null==a?void 0:a.messageId,i])}({sdkInit:C,parentMessage:L,isReactionEnabled:A,anchorMessage:(null==f?void 0:f.messageId)!==(null==p?void 0:p.messageId)?f:null},{logger:N,threadDispatcher:j}),function(e,t){let{sdk:n}=e,{logger:a,threadDispatcher:i}=t;Object(r.useEffect)(()=>{null!=n&&n.getAllEmoji&&(null==n||n.getAllEmoji().then(e=>{a.info("Thread | useGetAllEmoji: Getting emojis succeeded.",e),i({type:gv.SET_EMOJI_CONTAINER,payload:{emojiContainer:e}})}).catch(e=>{a.info("Thread | useGetAllEmoji: Getting emojis failed.",e)}))},[n])}({sdk:y},{logger:N,threadDispatcher:j}),function(e,t){let{sdk:n,currentChannel:a}=e,{logger:i,threadDispatcher:s}=t;Object(r.useEffect)(()=>{var e;const t=es();if(null!=n&&null!==(e=n.groupChannel)&&void 0!==e&&e.addGroupChannelHandler&&a){var r,o;const e=new Tc({onMessageReceived(e,t){i.info("Thread | useHandleChannelEvents: onMessageReceived",{channel:e,message:t}),s({type:gv.ON_MESSAGE_RECEIVED,payload:{channel:e,message:t}})},onMessageUpdated(e,t){i.info("Thread | useHandleChannelEvents: onMessageUpdated",{channel:e,message:t}),s({type:gv.ON_MESSAGE_UPDATED,payload:{channel:e,message:t}})},onMessageDeleted(e,t){i.info("Thread | useHandleChannelEvents: onMessageDeleted",{channel:e,messageId:t}),s({type:gv.ON_MESSAGE_DELETED,payload:{channel:e,messageId:t}})},onReactionUpdated(e,t){i.info("Thread | useHandleChannelEvents: onReactionUpdated",{channel:e,reactionEvent:t}),s({type:gv.ON_REACTION_UPDATED,payload:{channel:e,reactionEvent:t}})},onUserMuted(e,t){i.info("Thread | useHandleChannelEvents: onUserMuted",{channel:e,user:t}),s({type:gv.ON_USER_MUTED,payload:{channel:e,user:t}})},onUserUnmuted(e,t){i.info("Thread | useHandleChannelEvents: onUserUnmuted",{channel:e,user:t}),s({type:gv.ON_USER_UNMUTED,payload:{channel:e,user:t}})},onUserBanned(e,t){i.info("Thread | useHandleChannelEvents: onUserBanned",{channel:e,user:t}),s({type:gv.ON_USER_BANNED,payload:{channel:e,user:t}})},onUserUnbanned(e,t){i.info("Thread | useHandleChannelEvents: onUserUnbanned",{channel:e,user:t}),s({type:gv.ON_USER_UNBANNED,payload:{channel:e,user:t}})},onUserLeft(e,t){i.info("Thread | useHandleChannelEvents: onUserLeft",{channel:e,user:t}),s({type:gv.ON_USER_LEFT,payload:{channel:e,user:t}})},onChannelFrozen(e){i.info("Thread | useHandleChannelEvents: onChannelFrozen",{channel:e}),s({type:gv.ON_CHANNEL_FROZEN,payload:{channel:e}})},onChannelUnfrozen(e){i.info("Thread | useHandleChannelEvents: onChannelUnfrozen",{channel:e}),s({type:gv.ON_CHANNEL_UNFROZEN,payload:{channel:e}})},onOperatorUpdated(e,t){i.info("Thread | useHandleChannelEvents: onOperatorUpdated",{channel:e,users:t}),s({type:gv.ON_OPERATOR_UPDATED,payload:{channel:e,users:t}})}});null===(r=(o=n.groupChannel).addGroupChannelHandler)||void 0===r||r.call(o,t,e),i.info("Thread | useHandleChannelEvents: Added channelHandler in Thread",{handlerId:t,channelHandler:e})}return()=>{var e,r,a;t&&null!=n&&null!==(e=n.groupChannel)&&void 0!==e&&e.removeGroupChannelHandler&&(null===(r=(a=n.groupChannel).removeGroupChannelHandler)||void 0===r||r.call(a,t),i.info("Thread | useHandleChannelEvents: Removed channelHandler in Thread.",t))}},[null==n?void 0:n.groupChannel,a])}({sdk:y,currentChannel:R},{logger:N,threadDispatcher:j}),function(e,t){let{sdkInit:n,currentChannel:a,parentMessage:i}=e,{pubSub:s,threadDispatcher:o}=t;Object(r.useEffect)(()=>{const e=(()=>{const e=new Map;if(!s||!s.subscribe)return e;e.set(Pm,s.subscribe(Pm,e=>{const{channel:t,message:n}=e;(null==a?void 0:a.url)===(null==t?void 0:t.url)&&(null==n?void 0:n.parentMessageId)===(null==i?void 0:i.messageId)&&o({type:gv.SEND_MESSAGE_SUCESS,payload:{message:n}}),null==_v||_v()})),e.set(xm,s.subscribe(xm,e=>{const{channel:t,message:n}=e;(null==a?void 0:a.url)===(null==t?void 0:t.url)&&(null==n?void 0:n.parentMessageId)===(null==i?void 0:i.messageId)&&o({type:gv.SEND_MESSAGE_FAILURE,payload:{message:n}})})),e.set(Fm,s.subscribe(Fm,e=>{const{channel:t,message:n}=e;(null==a?void 0:a.url)===(null==t?void 0:t.url)&&o({type:gv.SEND_MESSAGE_SUCESS,payload:{message:n}}),null==_v||_v()})),e.set(Hm,s.subscribe(Hm,e=>{const{channel:t,message:n}=e;(null==a?void 0:a.url)===(null==t?void 0:t.url)&&o({type:gv.ON_MESSAGE_UPDATED,payload:{channel:t,message:n}})})),e.set(Gm,s.subscribe(Gm,e=>{const{channel:t,messageId:n}=e;(null==a?void 0:a.url)===(null==t?void 0:t.url)&&o({type:gv.ON_MESSAGE_DELETED,payload:{messageId:n}})}))})();return()=>{null==e||e.forEach(e=>{try{null==e||e.remove()}catch(e){}})}},[n,a])}({sdkInit:C,currentChannel:R,parentMessage:L},{logger:N,pubSub:T,threadDispatcher:j});const V=function(e,t){let{hasMorePrev:n,parentMessage:a,threadListState:i,oldestMessageTimeStamp:s,isReactionEnabled:o}=e,{logger:l,threadDispatcher:c}=t;return Object(r.useCallback)(e=>{var t;i===lv.INITIALIZED&&null!=a&&a.getThreadedMessagesByTimestamp&&0!==s&&(c({type:gv.GET_PREV_MESSAGES_START,payload:null}),null===(t=a.getThreadedMessagesByTimestamp)||void 0===t||t.call(a,s,{prevResultSize:30,nextResultSize:0,includeReactions:o,includeMetaArray:!0}).then(t=>{let{parentMessage:n,threadedMessages:r}=t;l.info("Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.",{parentMessage:n,threadedMessages:r}),c({type:gv.GET_PREV_MESSAGES_SUCESS,payload:{parentMessage:n,threadedMessages:r}}),e(r)}).catch(e=>{l.info("Thread | useGetPrevThreadsCallback: Fetch prev threads failed.",e),c({type:gv.GET_PREV_MESSAGES_FAILURE,payload:e})}))},[n,a,i,s])}({hasMorePrev:P,parentMessage:L,threadListState:D,isReactionEnabled:A,oldestMessageTimeStamp:(null===(t=U[0])||void 0===t?void 0:t.createdAt)||0},{logger:N,threadDispatcher:j}),q=function(e,t){let{hasMoreNext:n,parentMessage:a,threadListState:i,latestMessageTimeStamp:s,isReactionEnabled:o}=e,{logger:l,threadDispatcher:c}=t;return Object(r.useCallback)(e=>{var t;i===lv.INITIALIZED&&null!=a&&a.getThreadedMessagesByTimestamp&&0!==s&&(c({type:gv.GET_NEXT_MESSAGES_START,payload:null}),null===(t=a.getThreadedMessagesByTimestamp)||void 0===t||t.call(a,s,{prevResultSize:0,nextResultSize:30,includeReactions:o,includeMetaArray:!0}).then(t=>{let{parentMessage:n,threadedMessages:r}=t;l.info("Thread | useGetNextThreadsCallback: Fetch next threads succeeded.",{parentMessage:n,threadedMessages:r}),c({type:gv.GET_NEXT_MESSAGES_SUCESS,payload:{parentMessage:n,threadedMessages:r}}),e(r)}).catch(e=>{l.info("Thread | useGetNextThreadsCallback: Fetch next threads failed.",e),c({type:gv.GET_NEXT_MESSAGES_FAILURE,payload:e})}))},[n,a,i,s])}({hasMoreNext:F,parentMessage:L,threadListState:D,isReactionEnabled:A,latestMessageTimeStamp:(null===(n=U[U.length-1])||void 0===n?void 0:n.createdAt)||0},{logger:N,threadDispatcher:j}),K=function(e,t){let{currentChannel:n}=e,{logger:a}=t;return Object(r.useCallback)((e,t,r)=>{var i,s;r?null==n||null===(s=n.deleteReaction)||void 0===s||s.call(n,e,t).then(e=>{a.info("Thread | useToggleReactionsCallback: Delete reaction succeeded.",e)}).catch(e=>{a.warning("Thread | useToggleReactionsCallback: Delete reaction failed.",e)}):null==n||null===(i=n.addReaction)||void 0===i||i.call(n,e,t).then(e=>{a.info("Thread | useToggleReactionsCallback: Add reaction succeeded.",e)}).catch(e=>{a.warning("Thread | useToggleReactionsCallback: Add reaction failed.",e)})},[n])}({currentChannel:R},{logger:N}),W=function(e,t){let{isMentionEnabled:n,currentChannel:a}=e,{logger:i,pubSub:s,threadDispatcher:o}=t;return Object(r.useCallback)(e=>{const{message:t,quoteMessage:r=null,mentionTemplate:l,mentionedUsers:c}=e,u=(()=>{const e={};e.message=t;const a=(null==c?void 0:c.length)||0;return n&&a&&(e.mentionedUsers=c),n&&l&&a&&(e.mentionedMessageTemplate=l),r&&(e.isReplyToChannel=!0,e.parentMessageId=r.messageId),e})();i.info("Thread | useSendUserMessageCallback: Sending user message start.",u),null!=a&&a.sendUserMessage&&(null==a||a.sendUserMessage(u).onPending(e=>{o({type:gv.SEND_MESSAGE_START,payload:{message:e}})}).onFailed((e,t)=>{i.info("Thread | useSendUserMessageCallback: Sending user message failed.",{message:t,error:e}),o({type:gv.SEND_MESSAGE_FAILURE,payload:{error:e,message:t}})}).onSucceeded(e=>{i.info("Thread | useSendUserMessageCallback: Sending user message succeeded.",e),o({type:gv.SEND_MESSAGE_SUCESS,payload:{message:e}}),s.publish(Pm,{channel:a,message:e})}))},[n,a])}({isMentionEnabled:I,currentChannel:R},{logger:N,pubSub:T,threadDispatcher:j}),Y=function(e,t){let{currentChannel:n}=e,{logger:a,pubSub:i,threadDispatcher:o}=t;return Object(r.useCallback)((e,t)=>{const r=(()=>{const n={};return n.file=e,t&&(n.isReplyToChannel=!0,n.parentMessageId=t.messageId),n})();a.info("Thread | useSendFileMessageCallback: Sending file message start.",r),null==n||n.sendFileMessage(r).onPending(t=>{o({type:gv.SEND_MESSAGE_START,payload:{message:s(s({},t),{},{url:URL.createObjectURL(e),requestState:"pending"})}}),setTimeout(()=>_v(),1e3)}).onFailed((t,n)=>{n.localUrl=URL.createObjectURL(e),n.file=e,a.info("Thread | useSendFileMessageCallback: Sending file message failed.",{message:n,error:t}),o({type:gv.SEND_MESSAGE_FAILURE,payload:{message:n,error:t}})}).onSucceeded(e=>{a.info("Thread | useSendFileMessageCallback: Sending file message succeeded.",e),i.publish(Fm,{channel:n,message:e})})},[n])}({currentChannel:R},{logger:N,pubSub:T,threadDispatcher:j}),Q=((e,t)=>{let{currentChannel:n,onBeforeSendVoiceMessage:a}=e,{logger:i,pubSub:o,threadDispatcher:l}=t;return Object(r.useCallback)((e,t,r)=>{const c=a&&"function"==typeof a?a(e,r):{file:e,fileName:Lu.g,mimeType:Lu.h,metaArrays:[new ce({key:Lu.c,value:[""+t]}),new ce({key:Lu.i,value:[Lu.j]})]};r&&(c.isReplyToChannel=!0,c.parentMessageId=r.messageId),i.info("Thread | useSendVoiceMessageCallback:  Start sending voice message",c),null==n||n.sendFileMessage(c).onPending(t=>{l({type:gv.SEND_MESSAGE_START,payload:{message:s(s({},t),{},{url:URL.createObjectURL(e),requestState:"pending"})}}),setTimeout(()=>_v(),1e3)}).onFailed((t,n)=>{n.localUrl=URL.createObjectURL(e),n.file=e,i.info("Thread | useSendVoiceMessageCallback: Sending voice message failed.",{message:n,error:t}),l({type:gv.SEND_MESSAGE_FAILURE,payload:{message:n,error:t}})}).onSucceeded(e=>{i.info("Thread | useSendVoiceMessageCallback: Sending voice message succeeded.",e),o.publish(Fm,{channel:n,message:e})})},[n,a])})({currentChannel:R,onBeforeSendVoiceMessage:u},{logger:N,pubSub:T,threadDispatcher:j}),X=function(e,t){let{currentChannel:n}=e,{logger:a,pubSub:i,threadDispatcher:s}=t;return Object(r.useCallback)(e=>{var t,r;if(null!=e&&e.isResendable)if(e.sendingStatus=te.lb.PENDING,a.info("Thread | useResendMessageCallback: Resending failedMessage start.",e),s({type:gv.RESEND_MESSAGE_START,payload:e}),null!=e&&null!==(t=e.isUserMessage)&&void 0!==t&&t.call(e)||(null==e?void 0:e.messageType)===te.ib.USER)null==n||n.resendUserMessage(e).then(e=>{a.info("Thread | useResendMessageCallback: Resending failedMessage succeeded.",e),s({type:gv.SEND_MESSAGE_SUCESS,payload:{message:e}}),i.publish(Pm,{channel:n,message:e})}).catch(t=>{a.warning("Thread | useResendMessageCallback: Resending failedMessage failed.",t),e.sendingStatus=te.lb.FAILED,s({type:gv.SEND_MESSAGE_FAILURE,payload:{message:e}})});else if(null!=e&&null!==(r=e.isFileMessage)&&void 0!==r&&r.call(e)||(null==e?void 0:e.messageType)===te.ib.FILE){var o;null==n||null===(o=n.resendFileMessage)||void 0===o||o.call(n,e).then(e=>{a.info("Thread | useResendMessageCallback: Resending failedMessage succeeded.",e),s({type:gv.SEND_MESSAGE_SUCESS,payload:{message:e}})}).catch(t=>{a.warning("Thread | useResendMessageCallback: Resending failedMessage failed.",t),e.sendingStatus=te.lb.FAILED,s({type:gv.SEND_MESSAGE_FAILURE,payload:{message:e}}),i.publish(Fm,{channel:n,message:e})})}else a.warning("Thread | useResendMessageCallback: Message is not resendable.",e),e.sendingStatus=te.lb.FAILED,s({type:gv.SEND_MESSAGE_FAILURE,payload:{message:e}})},[n])}({currentChannel:R},{logger:N,pubSub:T,threadDispatcher:j}),Z=function(e,t){let{currentChannel:n,isMentionEnabled:a}=e,{logger:i,pubSub:s,threadDispatcher:o}=t;return Object(r.useCallback)(e=>{var t;const{messageId:r,message:l,mentionedUsers:c,mentionTemplate:u}=e,d=(()=>{const e={};return e.message=l,a&&(null==c?void 0:c.length)>0&&(e.mentionedUsers=c),e.mentionedMessageTemplate=a&&u?u:l,e})();i.info("Thread | useUpdateMessageCallback: Message update start.",d),null==n||null===(t=n.updateUserMessage)||void 0===t||t.call(n,r,d).then(e=>{i.info("Thread | useUpdateMessageCallback: Message update succeeded.",e),o({type:gv.ON_MESSAGE_UPDATED,payload:{channel:n,message:e}}),s.publish(Hm,{fromSelector:!0,channel:n,message:e})})},[n,a])}({currentChannel:R,isMentionEnabled:I},{logger:N,pubSub:T,threadDispatcher:j}),$=function(e,t){let{currentChannel:n,threadDispatcher:a}=e,{logger:i}=t;return Object(r.useCallback)(e=>{i.info("Thread | useDeleteMessageCallback: Deleting message.",e);const{sendingStatus:t}=e;return new Promise((r,s)=>{var o;i.info("Thread | useDeleteMessageCallback: Deleting message requestState:",t),"failed"!==t&&"pending"!==t||(i.info("Thread | useDeleteMessageCallback: Deleted message from local:",e),a({type:gv.ON_MESSAGE_DELETED_BY_REQ_ID,payload:e.reqId}),r(e)),i.info("Thread | useDeleteMessageCallback: Deleting message from remote:",t),null==n||null===(o=n.deleteMessage)||void 0===o||o.call(n,e).then(()=>{i.info("Thread | useDeleteMessageCallback: Deleting message success!",e),a({type:gv.ON_MESSAGE_DELETED,payload:{message:e,channel:n}}),r(e)}).catch(e=>{i.warning("Thread | useDeleteMessageCallback: Deleting message failed!",e),s(e)})})},[n])}({currentChannel:R,threadDispatcher:j},{logger:N}),J=Object(r.useMemo)(()=>S&&R?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Map;for(let n=0;n<e.length;n+=1){const{userId:r,nickname:a}=e[n];t.set(r,a)}return t}(null==R?void 0:R.members):new Map,[null==R?void 0:R.members]);return a.a.createElement(yv.Provider,{value:{channelUrl:o,message:f,onHeaderActionClick:l,onMoveToParentMessage:c,currentChannel:R,allThreadMessages:U,parentMessage:L,channelState:k,threadListState:D,parentMessageState:x,hasMorePrev:P,hasMoreNext:F,emojiContainer:H,fetchPrevThreads:V,fetchNextThreads:q,toggleReaction:K,sendMessage:W,sendFileMessage:Y,sendVoiceMessage:Q,resendMessage:X,updateMessage:Z,deleteMessage:$,nicknamesMap:J,isMuted:G,isChannelFrozen:B,currentUserId:z}},a.a.createElement(Km,{disableUserProfile:null!=d?d:g.disableUserProfile,renderUserProfile:h,onUserProfileMessage:w},i))},Cv=()=>a.a.useContext(yv);function Nv(e){const{member:t,isFocused:n=!1,parentScrollRef:i,onClick:s,onMouseOver:o,onMouseMove:l,renderUserMentionItem:c}=e,u=Object(r.useRef)(null),{stringSet:d={}}=Object(r.useContext)(td);Object(r.useEffect)(()=>{n&&null!=(null==i?void 0:i.current)&&null!=(null==u?void 0:u.current)&&(i.current.scrollTop>=u.current.offsetTop||i.current.scrollTop+i.current.clientHeight<=u.current.offsetTop)&&u.current.scrollIntoView({block:"nearest",inline:"nearest"})},[n]);const h=Object(r.useMemo)(()=>{if(c)return a.a.createElement("div",{className:"sendbird-mention-suggest-list__user-item",onClick:e=>null==s?void 0:s({event:e,member:t,itemRef:u}),onMouseOver:e=>null==o?void 0:o({event:e,member:t,itemRef:u}),onMouseMove:e=>null==l?void 0:l({event:e,member:t,itemRef:u}),key:(null==t?void 0:t.userId)||es(),ref:u},c({user:t}))},[c]);return h||a.a.createElement("div",{className:"sendbird-mention-suggest-list__user-item "+(n?"focused":""),onClick:e=>null==s?void 0:s({event:e,member:t,itemRef:u}),onMouseOver:e=>null==o?void 0:o({event:e,member:t,itemRef:u}),onMouseMove:e=>null==l?void 0:l({event:e,member:t,itemRef:u}),key:(null==t?void 0:t.userId)||es(),ref:u},a.a.createElement(sb,{className:"sendbird-mention-suggest-list__user-item__avatar",src:null==t?void 0:t.profileUrl,alt:"user-profile",width:"24px",height:"24px"}),a.a.createElement(hd,{className:"sendbird-mention-suggest-list__user-item__nickname",type:fd.SUBTITLE_2,color:null!=t&&t.nickname?pd.ONBACKGROUND_1:pd.ONBACKGROUND_3},(null==t?void 0:t.nickname)||(null==d?void 0:d.MENTION_NAME__NO_NAME)),a.a.createElement(hd,{className:"sendbird-mention-suggest-list__user-item__user-id",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_2},null==t?void 0:t.userId))}function Tv(e){var t,n,i,s,o;const{className:l,targetNickname:c="",onUserItemClick:u,onFocusItemChange:d,onFetchUsers:h,renderUserMentionItem:f,inputEvent:p,ableAddMention:m=!0,maxMentionCount:b=$_,maxSuggestionCount:_=J_}=e,g=null==Ag||null===(t=Ag())||void 0===t?void 0:t.currentGroupChannel,v=null==Cv||null===(n=Cv())||void 0===n?void 0:n.currentChannel,E=g||v,{config:y,stores:O}=ku(),{logger:C}=y,N=(null==O||null===(i=O.sdkStore)||void 0===i||null===(s=i.sdk)||void 0===s||null===(o=s.currentUser)||void 0===o?void 0:o.userId)||"",T=Object(r.useRef)(null),{stringSet:S}=Object(r.useContext)(td),[I,A]=Object(r.useState)(null),[w,M]=Object(r.useState)(""),[j,R]=Object(r.useState)(""),[U,L]=Object(r.useState)(null),[k,D]=Object(r.useState)([]);return Object(r.useEffect)(()=>{clearTimeout(I),A(setTimeout(()=>{M(c)},300))},[c]),Object(r.useEffect)(()=>{if((null==p?void 0:p.key)===Zg&&k.length>0&&u(U),(null==p?void 0:p.key)===$g){const e=k.findIndex(e=>(null==e?void 0:e.userId)===(null==U?void 0:U.userId));0<e&&(L(k[e-1]),d(k[e-1]))}if((null==p?void 0:p.key)===Jg){const e=k.findIndex(e=>(null==e?void 0:e.userId)===(null==U?void 0:U.userId));e<k.length-1&&(L(k[e+1]),d(k[e+1]))}},[p]),Object(r.useEffect)(()=>{if(null==E||!E.createMemberListQuery)return void C.warning("SuggestedMentionList: Creating member list query failed");if(j&&0===w.indexOf(j)&&0===k.length)return;const e=null==E?void 0:E.createMemberListQuery({limit:_+1,nicknameStartsWithFilter:w.slice("@".length)});e.next().then(t=>{const n=t.filter(e=>N!==(null==e?void 0:e.userId)).slice(0,_);n.length<1?C.info("SuggestedMentionList: Fetched member list is empty"):(C.info("SuggestedMentionList: Fetching member list succeeded",{memberListQuery:e,memberList:n}),L(n[0])),R(w),h(n),D(n)}).catch(e=>{e&&C.error("SuggestedMentionList: Fetching member list failed",e)})},[null==E?void 0:E.url,w]),m||0!==k.length?a.a.createElement("div",{className:"sendbird-mention-suggest-list "+l,key:"sendbird-mention-suggest-list",ref:T},m&&(null==k?void 0:k.map(e=>a.a.createElement(Nv,{key:(null==e?void 0:e.userId)||es(),member:e,isFocused:(null==e?void 0:e.userId)===(null==U?void 0:U.userId),parentScrollRef:T,onClick:e=>{let{member:t}=e;u(t)},onMouseOver:e=>{let{member:t}=e;L(t)},renderUserMentionItem:f}))),!m&&a.a.createElement("div",{className:"sendbird-mention-suggest-list__notice-item"},a.a.createElement(Bp,{className:"sendbird-mention-suggest-list__notice-item__icon",type:zp.INFO,fillColor:Vp.ON_BACKGROUND_2,width:"20px",height:"20px"}),a.a.createElement(hd,{className:"sendbird-mention-suggest-list__notice-item__text",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_2},S.MENTION_COUNT__OVER_LIMIT.replace("%d",b)))):null}const Sv=e=>{let{children:t=null,className:n="",separatorColor:r=Q_.ONBACKGROUND_4}=e;return a.a.createElement("div",{className:[...Array.isArray(n)?n:[n],"sendbird-separator"].join(" ")},a.a.createElement("div",{className:["sendbird-separator__left",X_(r)+"--background-color"].join(" ")}),a.a.createElement("div",{className:"sendbird-separator__text"},t||a.a.createElement(hd,{type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},"Date Separator")),a.a.createElement("div",{className:["sendbird-separator__right",X_(r)+"--background-color"].join(" ")}))};var Iv=n(5),Av=n.n(Iv);function wv(e){let{userId:t,nickname:n}=e;const r=`<span data-userid="${t}" data-sb-mention="true" class="sendbird-mention-user-label">${n}</span>`,a=Av()(window).sanitize(r).split(" "),[i,...s]=a;return[i,'contenteditable="false"',...s].join(" ")}const Mv=e=>null==e?void 0:e.replace(/[\u00A0-\u9999<>]/gim,e=>"".concat("&#",e.charCodeAt(0),";")),jv=e=>{try{return Array.from(e)}catch(e){return[]}};function Rv(e,t){return[e,...Array.from(e.querySelectorAll(t))].find(e=>e.matches(t))}const Uv=e=>{let t="";return e.forEach(e=>{const n=e.querySelectorAll(".sendbird-word");n.length>0&&(t+=Uv(Array.from(n))+" "),t+=e.innerText+" "}),t};function Lv(e){let{ref:t,setIsInput:n,setHeight:a,channel:i,setMentionedUsers:s}=e;return Object(r.useCallback)(e=>{e.preventDefault();const t=null==e?void 0:e.clipboardData.getData("text/html");if(!t){const t=null==e?void 0:e.clipboardData.getData("text");return document.execCommand("insertHTML",!1,Mv(t)),n(!0),void a()}const r=Av()(window).sanitize(t),o=function(){const e=document.body.querySelector("#sendbird-uikit__paste-node");e&&(null==e||e.remove());const t=document.createElement("div");return t.id="sendbird-uikit__paste-node",t.style.display="none",t}();if(o.innerHTML=r,null==(l=o)||!l.querySelector(".sendbird-word__mention, .sendbird-mention-user-label")){const e=Uv(Array.from(o.children));return document.execCommand("insertHTML",!1,Mv(e)),o.remove(),n(!0),void a()}var l;const c=function(e){const t=Rv(e,".sendbird-og-message-item-body__text-bubble");if(t)return jv(t.childNodes);const n=Rv(e,".sendbird-text-message-item-body");return jv(n?n.childNodes:e.childNodes)}(o),u=null==(d=c)?void 0:d.reduce((e,t)=>{let n,r=null==t?void 0:t.innerText;if(t instanceof Text&&(n=!1,r=t.textContent),t instanceof HTMLElement&&(n=t.classList.contains("sendbird-word__mention")||t.classList.contains("sendbird-mention-user-label")?t:t.querySelector(".sendbird-word__mention, .sendbird-mention-user-label")),n){var a;const r=null==t?void 0:t.innerText,i=null===(a=n.dataset)||void 0===a?void 0:a.userid;return[...e,{text:r,userId:i}]}return[...e,{text:r}]},[]);var d;const h=function(e,t){const n={},r=t.members;return e.forEach(e=>{if(e.userId){const t=r.find(t=>t.userId===e.userId);t&&(n[e.userId]=t)}}),Object.values(n)}(u,i);s(h),function(e){const t=e.map(e=>{const{text:t,userId:n}=e;return n?wv({userId:n,nickname:t}):Mv(t)}).join(" ").concat(" ");document.execCommand("insertHTML",!1,t)}(u),o.remove(),n(!0),a()},[t,n,a,i,s])}const kv="@",Dv="string",xv="mention",Pv="url",Fv="undetermined";function Hv(e){let{tokens:t,mentionedUsers:n=[],templatePrefix:r=kv}=e;if(null==n||!n.length)return t;const a=function(e,t){const n=t||kv;return RegExp(`(${e.map(e=>{const t=e.userId.replace(/([.*+?^${}()|[\]\\])/g,"\\$1");return`${n}\\{${t}\\}`}).join("|")})`,"g")}(n,r);return t.map(e=>{if(e.type!==Fv)return e;const{value:t}=e;return t.split(a).map(e=>{if(e.match(a)){const t=n.find(t=>`@{${null==t?void 0:t.userId}}`===e);return{value:(null==t?void 0:t.nickname)||"(No name)",type:xv,userId:null==t?void 0:t.userId}}return{value:e,type:Fv}})}).flat()}function Gv(e){let{messageText:t,mentionedUsers:n=[],templatePrefix:r=kv}=e;const a=Hv({tokens:[{type:Fv,value:t}],mentionedUsers:n,templatePrefix:r}),i=a.map(e=>{if(e.type!==Fv)return e;const{value:t=""}=e;return t.split(" ").map(e=>hu(e)?{value:e,type:Pv}:{value:e,type:Dv})}).flat();return i.reduce((e,t)=>{const n=e[e.length-1];return(null==n?void 0:n.type)===Dv&&t.type===Dv?(n.value=`${n.value} ${t.value}`,e):[...e,t]},[])}var Bv=function(e){return e.BASE="base",e.GROUP="group",e.OPEN="open",e}(Bv||{});const zv=()=>{},Vv=e=>{try{e.current.innerHTML=""}catch(e){}},qv={targetString:"",startNodeIndex:null,startOffsetIndex:null,endNodeIndex:null,endOffsetIndex:null},Kv=a.a.forwardRef((e,t)=>{var n,i,o;const{className:l,messageFieldId:c,isEdit:u,isMentionEnabled:d,isVoiceMessageEnabled:h,disabled:f,message:p,placeholder:m,maxLength:b,onFileUpload:_,onSendMessage:g,onUpdateMessage:v,onCancelEdit:E,onStartTyping:y,channelUrl:O,channel:C,mentionSelectedUser:N,onUserMentioned:T,onMentionStringChange:S,onMentionedUserIdsUpdated:I,onVoiceMessageIconClick:A,onKeyUp:w,onKeyDown:M,renderFileUploadIcon:j,renderVoiceMessageIcon:R,renderSendMessageIcon:U,setMentionedUsers:L}=e,k=c||"sendbird-message-input-text-field",{stringSet:D}=rd(),{config:x}=ku(),P=(e=>{let{channel:t,config:n}=e;return X(null==t?void 0:t.channelType).with(Bv.GROUP,()=>{var e;return null==n||null===(e=n.groupChannel)||void 0===e?void 0:e.enableDocument}).with(Bv.OPEN,()=>{var e;return null==n||null===(e=n.openChannel)||void 0===e?void 0:e.enableDocument}).otherwise(()=>!0)})({channel:C,config:x}),F=Object(r.useRef)(null),[H,G]=Object(r.useState)(!1),[B,z]=Object(r.useState)([]),[V,q]=Object(r.useState)(s({},qv)),K=Object(r.useMemo)(()=>()=>{try{const e=null==t?void 0:t.current,n=.6*window.document.body.offsetHeight;e&&e.scrollHeight>=76?n<e.scrollHeight?(e.style.height="auto",e.style.height=n+"px"):(e.style.height="auto",e.style.height=e.scrollHeight+"px"):e.style.height=""}catch(e){}},[]),W=null==e?void 0:e.value;Object(r.useEffect)(()=>{var e;const n=null==t?void 0:t.current;try{n.innerHTML=W,((e,t)=>{const n=document.createRange(),r=window.getSelection();n.setStart(e.childNodes[0],t),n.collapse(!0),r.removeAllRanges(),r.addRange(n),e.focus()})(n,null==W?void 0:W.length)}catch(e){}z([]),G((null==n||null===(e=n.textContent)||void 0===e?void 0:e.trim().length)>0),K()},[W]),Object(r.useEffect)(()=>{u||(G(!1),Vv(t))},[O]),Object(r.useEffect)(()=>{if(u&&null!=p&&p.messageId){var e,n,r;const a=null==t?void 0:t.current;if(d&&(null==p||null===(e=p.mentionedUsers)||void 0===e?void 0:e.length)>0&&(null==p||null===(n=p.mentionedMessageTemplate)||void 0===n?void 0:n.length)>0){const{mentionedUsers:e=[]}=p,t=Gv({messageText:null==p?void 0:p.mentionedMessageTemplate,mentionedUsers:e});a.innerHTML=t.map(t=>{if(t.type===xv){const n=e.find(e=>e.userId===t.userId),r=`${kv}${(null==n?void 0:n.nickname)||t.value||D.MENTION_NAME__NO_NAME}`;return wv({userId:t.userId,nickname:r})}return Mv(t.value)}).join(" ")}else{try{a.innerHTML=Mv(null==p?void 0:p.message)}catch(e){}z([])}G((null==a||null===(r=a.textContent)||void 0===r?void 0:r.trim().length)>0),K()}},[u,p]);const Y=Object(r.useCallback)(()=>{var e;const n=null==t?void 0:t.current;if(d){const e=[...n.getElementsByClassName("sendbird-mention-user-label")].map(e=>{var t;return null==e||null===(t=e.dataset)||void 0===t?void 0:t.userid});((e,t)=>{if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1})(B,e)&&0!==e.length||(I(e),z(e))}G((null===(e=n.textContent)||void 0===e?void 0:e.trim().length)>0)},[V,d]);Object(r.useEffect)(()=>{if(d&&N){const{targetString:i,startNodeIndex:o,startOffsetIndex:l,endNodeIndex:c,endOffsetIndex:u}=V;if(i&&null!==o&&null!==l){var e,n,r,a;const i=null==t?void 0:t.current,d=jv(null==i?void 0:i.childNodes),h=null===(e=document)||void 0===e?void 0:e.createTextNode(null===(n=d[o])||void 0===n?void 0:n.textContent.slice(0,l)),f=null===(r=document)||void 0===r?void 0:r.createTextNode(""+(null===(a=d[c])||void 0===a?void 0:a.textContent.slice(u))),p=wv({userId:null==N?void 0:N.userId,nickname:"@"+((null==N?void 0:N.nickname)||D.MENTION_NAME__NO_NAME)}),m=document.createElement("div");m.innerHTML=p;const b=[...d.slice(0,o),h,m.childNodes[0],f,...d.slice(c+1)];if(i.innerHTML="",b.forEach(e=>{i.appendChild(e)}),T(N),window.getSelection||document.getSelection){const e=window.getSelection()||document.getSelection();e.removeAllRanges();const t=new Range;t.selectNodeContents(i),t.setStart(i.childNodes[o+2],1),t.setEnd(i.childNodes[o+2],1),t.collapse(!1),e.addRange(t),i.focus()}q(s({},qv)),K(),Y()}}},[N,d]);const Q=Object(r.useCallback)(()=>{var e,n,r,a;const i=(null===(e=window)||void 0===e||null===(n=e.getSelection)||void 0===n?void 0:n.call(e))||(null===(r=document)||void 0===r||null===(a=r.getSelection)||void 0===a?void 0:a.call(r)),s=null==t?void 0:t.current;if(i.anchorNode===s&&S(""),d&&i&&i.anchorNode===i.focusNode&&i.anchorOffset===i.focusOffset){let e="",t=null,n=null;for(let r=0;r<s.childNodes.length;r+=1){const a=s.childNodes[r];if(a.nodeType===nv){const s=a===i.anchorNode?(null==a?void 0:a.textContent.slice(0,i.anchorOffset))||"":(null==a?void 0:a.textContent)||"";if(e.length>0)e+=s;else{let a=s.lastIndexOf("@");for(let e=a-1;e>-1&&"@"===s[e];e-=1)a=e;a>-1&&(e=s,t=r,n=a)}}else e="",t=null,n=null;if(a===i.anchorNode){const a=e?e.slice(n):"";return q({targetString:a,startNodeIndex:t,startOffsetIndex:n,endNodeIndex:r,endOffsetIndex:i.anchorOffset}),void S(a)}}}},[d]),Z=()=>{const e=null==t?void 0:t.current;if(!u&&null!=e&&e.textContent){let n="",r="";e.childNodes.forEach(e=>{if(e.nodeType===tv&&e.nodeName===rv){const{innerText:t,dataset:a={}}=e,{userid:i=""}=a;n+=t,r+=`@{${i}}`}else if(e.nodeType===tv&&e.nodeName===av)n+="\n",r+="\n";else if((null==e?void 0:e.nodeType)===tv&&(null==e?void 0:e.nodeName)===iv){const{textContent:t=""}=e;n+="\n"+t,r+="\n"+t}else{const{textContent:t=""}=e;n+=t,r+=t}});g({message:n,mentionTemplate:r}),Vv(t),e.focus(),G(!1),K()}},$=!(null!=t&&null!==(n=t.current)&&void 0!==n&&null!==(i=n.textContent)&&void 0!==i&&i.trim()),J=Lv({ref:t,setMentionedUserIds:z,setMentionedUsers:L,channel:C,setIsInput:G,setHeight:K}),ee=null==t?void 0:t.current;return a.a.createElement("form",{className:lu([l,u?"sendbird-message-input__edit":"",f?"sendbird-message-input-form__disabled":""])},a.a.createElement("div",{className:lu(["sendbird-message-input",f?"sendbird-message-input__disabled":""])},a.a.createElement("div",{id:`${k}${u?null==p?void 0:p.messageId:""}`,className:"sendbird-message-input--textarea "+k,contentEditable:!f,role:"textbox","aria-label":"Text Input",disabled:f,ref:t,maxLength:b,onKeyDown:e=>{var n,r,a,i,s,o,l,c,u;M(e)?e.preventDefault():(!e.shiftKey&&e.key===Zg&&(null==ee||null===(n=ee.textContent)||void 0===n?void 0:n.trim().length)>0&&!0!==(null==e||null===(r=e.nativeEvent)||void 0===r?void 0:r.isComposing)&&(e.preventDefault(),Z()),e.key!==ev||2!==(null==t||null===(a=t.current)||void 0===a||null===(i=a.childNodes)||void 0===i?void 0:i.length)||null!=t&&null!==(s=t.current)&&void 0!==s&&null!==(o=s.childNodes)&&void 0!==o&&null!==(l=o[0])&&void 0!==l&&l.textContent||(null==t||null===(c=t.current.childNodes)||void 0===c||null===(u=c[1])||void 0===u?void 0:u.nodeType)!==tv||null==t||t.current.removeChild(null==t?void 0:t.current.childNodes[1]))},onKeyUp:e=>{w(e)?e.preventDefault():Q()},onClick:()=>{Q()},onInput:()=>{var e;K(),y(),G((null==ee||null===(e=ee.textContent)||void 0===e?void 0:e.trim().length)>0),Y()},onPaste:J}),0===(null==ee||null===(o=ee.innerText)||void 0===o?void 0:o.length)&&a.a.createElement(hd,{className:"sendbird-message-input--placeholder",type:fd.BODY_1,color:f?pd.ONBACKGROUND_4:pd.ONBACKGROUND_3},m||D.MESSAGE_INPUT__PLACE_HOLDER),!u&&H&&a.a.createElement(qp,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:()=>Z()},(null==U?void 0:U())||a.a.createElement(Bp,{type:zp.SEND,fillColor:f?Vp.ON_BACKGROUND_4:Vp.PRIMARY,width:"20px",height:"20px"})),!u&&!H&&((null==j?void 0:j())||P&&a.a.createElement(qp,{className:"sendbird-message-input--attach "+(h?"is-voice-message-enabled":""),height:"32px",width:"32px",onClick:()=>{var e,t;null==F||null===(e=F.current)||void 0===e||null===(t=e.click)||void 0===t||t.call(e)}},a.a.createElement(Bp,{type:zp.ATTACH,fillColor:f?Vp.ON_BACKGROUND_4:Vp.CONTENT_INVERSE,width:"20px",height:"20px"}),a.a.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:F,onChange:(te=_,e=>{e.target.files&&e.target.files[0]&&te(e.target.files[0]),e.target.value=""})}))),h&&!u&&!H&&a.a.createElement(qp,{className:"sendbird-message-input--voice-message",width:"32px",height:"32px",onClick:A},(null==R?void 0:R())||a.a.createElement(Bp,{type:zp.AUDIO_ON_LINED,fillColor:f?Vp.ON_BACKGROUND_4:Vp.CONTENT_INVERSE,width:"20px",height:"20px"}))),u&&a.a.createElement("div",{className:"sendbird-message-input--edit-action"},a.a.createElement(Od,{className:"sendbird-message-input--edit-action__cancel",type:Ed.SECONDARY,size:yd.SMALL,onClick:E},D.BUTTON__CANCEL),a.a.createElement(Od,{className:"sendbird-message-input--edit-action__save",type:Ed.PRIMARY,size:yd.SMALL,disabled:$,onClick:()=>(()=>{const e=null==t?void 0:t.current,n=null==p?void 0:p.messageId;if(u&&n){let r="",a="";e.childNodes.forEach(e=>{if(e.nodeType===tv&&e.nodeName===rv){const{innerText:t,dataset:n={}}=e,{userid:i=""}=n;r+=t,a+=`@{${i}}`,r+="\n",a+="\n"}else{const{textContent:t=""}=e;r+=t,a+=t}});v({messageId:n,message:r,mentionTemplate:a}),Vv(t)}})()},D.BUTTON__SAVE)));var te});Kv.propTypes={className:od.a.oneOfType([od.a.string,od.a.arrayOf(od.a.string)]),messageFieldId:od.a.string,placeholder:od.a.oneOfType([od.a.string,od.a.bool]),value:od.a.string,isEdit:od.a.bool,isMentionEnabled:od.a.bool,isVoiceMessageEnabled:od.a.bool,onVoiceMessageIconClick:od.a.func,message:od.a.shape({messageId:od.a.oneOfType([od.a.string,od.a.number]),message:od.a.string,mentionedMessageTemplate:od.a.string,mentionedUsers:od.a.arrayOf(od.a.shape({}))}),disabled:od.a.bool,maxLength:od.a.number,onFileUpload:od.a.func,onSendMessage:od.a.func,onUpdateMessage:od.a.func,onStartTyping:od.a.func,onCancelEdit:od.a.func,channelUrl:od.a.string,mentionSelectedUser:od.a.shape({userId:od.a.string,nickname:od.a.string}),setMentionedUsers:od.a.func,onUserMentioned:od.a.func,onMentionStringChange:od.a.func,onMentionedUserIdsUpdated:od.a.func,onKeyUp:od.a.func,onKeyDown:od.a.func,renderVoiceMessageIcon:od.a.func,renderSendMessageIcon:od.a.func,renderFileUploadIcon:od.a.func,channel:od.a.shape({channelType:od.a.string}).isRequired},Kv.defaultProps={className:"",messageFieldId:"",channelUrl:"",onSendMessage:zv,onUpdateMessage:zv,value:null,message:null,isEdit:!1,isMentionEnabled:!1,isVoiceMessageEnabled:!0,onVoiceMessageIconClick:zv,disabled:!1,placeholder:"",maxLength:5e3,onFileUpload:zv,onCancelEdit:zv,onStartTyping:zv,mentionSelectedUser:null,onUserMentioned:zv,onMentionStringChange:zv,onMentionedUserIdsUpdated:zv,onKeyUp:zv,onKeyDown:zv,setMentionedUsers:zv,renderVoiceMessageIcon:zv,renderFileUploadIcon:zv,renderSendMessageIcon:zv};const Wv="operator";function Yv(e){var t;let{className:n,message:i,channel:s,isByMe:o=!1,disabled:l=!1,replyType:c,disableDeleteMessage:u=null,showEdit:d,showRemove:h,resendMessage:f,setQuoteMessage:p,setSupposedHover:m,onReplyInThread:b,onMoveToParentMessage:_=null}=e;const{stringSet:g}=Object(r.useContext)(td),v=Object(r.useRef)(null),E=Object(r.useRef)(null),y=Wc(i),O=!(null!=s&&s.isEphemeral)&&Wc(i)&&zc(i)&&o,C=qc(i)&&(null==i?void 0:i.isResendable)&&o,N=!(null!=s&&s.isEphemeral)&&!Kc(i)&&o,T=null!==_,S=!qc(i)&&!Kc(i)&&(null==s||null===(t=s.isGroupChannel)||void 0===t?void 0:t.call(s))&&!(null!=s&&s.isEphemeral)&&((null==s?void 0:s.isBroadcast)&&(null==s?void 0:s.myRole)===Wv||!(null!=s&&s.isBroadcast)),I=S&&"QUOTE_REPLY"===c,A=S&&"THREAD"===c&&!(null!=i&&i.parentMessageId)&&b;return y||I||A||T||O||C||N?a.a.createElement("div",{className:lu([n,"sendbird-message-item-menu"]),ref:E},a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-message-item-menu__trigger",ref:v,width:"32px",height:"32px",onClick:()=>{e(),m(!0)},onBlur:()=>{m(!1)}},a.a.createElement(Bp,{className:"sendbird-message-item-menu__trigger__icon",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE,width:"24px",height:"24px"})),menuItems:e=>{var t;const n=()=>{e(),m(!1)};return a.a.createElement(Ob,{className:"sendbird-message-item-menu__list",parentRef:v,parentContainRef:E,closeDropdown:n,openLeft:o},y&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-copy",onClick:()=>{pu(null==i?void 0:i.message),n()},dataSbId:"ui_message_item_menu_copy"},g.MESSAGE_MENU__COPY),I&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-reply",onClick:()=>{p(i),n()},disable:(null==i?void 0:i.parentMessageId)>0,dataSbId:"ui_message_item_menu_reply"},g.MESSAGE_MENU__REPLY),A&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-thread",onClick:()=>{null==b||b({message:i}),n()},dataSbId:"ui_message_item_menu_thread"},g.MESSAGE_MENU__THREAD),T&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-open-channel",onClick:()=>{null==_||_(),n()},dataSbId:"ui_message_item_menu_open_in_channel"},g.MESSAGE_MENU__OPEN_IN_CHANNEL),O&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-edit",onClick:()=>{l||(d(!0),n())},dataSbId:"ui_message_item_menu_edit"},g.MESSAGE_MENU__EDIT),C&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-resend",onClick:()=>{l||(f(i),n())},dataSbId:"ui_message_item_menu_resend"},g.MESSAGE_MENU__RESEND),N&&a.a.createElement(Nb,{className:"sendbird-message-item-menu__list__menu-item menu-item-delete",onClick:()=>{l||(h(!0),n())},disable:"boolean"==typeof u?u:(null==i||null===(t=i.threadInfo)||void 0===t?void 0:t.replyCount)>0,dataSbId:"ui_message_item_menu_delete"},g.MESSAGE_MENU__DELETE))}})):null}const Qv=a.a.forwardRef((e,t)=>{const{className:n,width:r,height:i,selected:s,dataSbId:o="",onClick:c,children:u}=e,d=Ug({onLongPress:Vm,onClick:c},{shouldPreventDefault:!0,shouldStopPropagation:!0});return a.a.createElement("div",l({className:[...Array.isArray(n)?n:[n],"sendbird-reaction-button"+(s?"--selected":"")].join(" "),ref:t,role:"button",style:{width:r,height:i}},d,{tabIndex:0,"data-sb-id":o}),a.a.createElement("div",{className:"sendbird-reaction-button__inner"},u))});function Xv(e){let{className:t,message:n,userId:i,spaceFromTrigger:s={x:0,y:0},emojiContainer:o,toggleReaction:l,setSupposedHover:c}=e;const u=Object(r.useRef)(null),d=Object(r.useRef)(null);return Kc(n)||qc(n)?null:a.a.createElement("div",{className:lu([t,"sendbird-message-item-reaction-menu"]),ref:d},a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-message-item-reaction-menu__trigger",ref:u,width:"32px",height:"32px",onClick:()=>{e(),c(!0)},onBlur:()=>{c(!1)}},a.a.createElement(Bp,{className:"sendbird-message-item-reaction-menu__trigger__icon",type:zp.EMOJI_MORE,fillColor:Vp.CONTENT_INVERSE,width:"24px",height:"24px"})),menuItems:e=>{const t=()=>{e(),c(!1)};return a.a.createElement(Cb,{parentRef:u,parentContainRef:d,closeDropdown:t,spaceFromTrigger:s},mu(o).map(e=>{var r,s,o;const c=null==n||null===(r=n.reactions)||void 0===r||null===(s=r.filter(t=>t.key===e.key)[0])||void 0===s||null===(o=s.userIds)||void 0===o?void 0:o.some(e=>e===i);return a.a.createElement(Qv,{key:e.key,width:"36px",height:"36px",selected:c,onClick:()=>{t(),l(n,e.key,c)},dataSbId:"ui_emoji_reactions_menu_"+e.key},a.a.createElement(tb,{url:e.url,width:"28px",height:"28px",placeHolder:e=>a.a.createElement("div",{style:e},a.a.createElement(Bp,{type:zp.QUESTION,fillColor:Vp.ON_BACKGROUND_3,width:"28px",height:"28px"}))}))}))}}))}const Zv=a.a.forwardRef((e,t)=>{const{className:n="",children:r,count:i="",isAdd:s=!1,selected:o=!1,onClick:l=(()=>{})}=e;return a.a.createElement("div",{className:[...Array.isArray(n)?n:[n],"sendbird-reaction-badge"+(o&&!s?"--selected":s?"--is-add":"")].join(" "),role:"button",ref:t,onClick:l,onKeyDown:l,onTouchEnd:l,tabIndex:0},a.a.createElement("div",{className:"sendbird-reaction-badge__inner"},a.a.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},r),a.a.createElement(hd,{className:r&&i&&"sendbird-reaction-badge__inner__count",type:fd.CAPTION_3,color:pd.ONBACKGROUND_1},i)))}),$v=e=>{const{className:t="",children:n,onBackdropClick:i}=e,s=Object(r.useRef)();return s.current=document.getElementById(id),s.current||(s.current=document.createElement("div"),s.current.setAttribute("id",id),document.body.appendChild(s.current)),Object(ad.createPortal)(a.a.createElement("div",{className:t+" sendbird-bottomsheet"},a.a.createElement("div",{className:"sendbird-bottomsheet__content",role:"dialog","aria-modal":"true","aria-expanded":"true"},n),a.a.createElement("div",{className:"\n          sendbird-bottomsheet__backdrop\n        ",onClick:e=>{null==e||e.stopPropagation(),i()}})),s.current)};function Jv(e){let{className:t="",children:n=""}=e;return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-tooltip"].join(" ")},a.a.createElement(hd,{className:"sendbird-tooltip__text",type:fd.CAPTION_2,color:pd.ONCONTENT_1},n))}function eE(e){let{className:t="",children:n,hoverTooltip:i}=e;const[s,o]=Object(r.useState)(!1),l=Object(r.useRef)(null);return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-tooltip-wrapper"].join(" "),onMouseOver:()=>{o(!0)},onFocus:()=>{o(!0)},onMouseOut:()=>{o(!1)},onBlur:()=>{o(!1)}},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:l},n),s&&a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + 8px)"}},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},a.a.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:l.current&&`calc(${l.current.offsetWidth/2}px - 50%)`}},i))))}const tE={message:{},isByMe:!1},nE=a.a.createContext(tE),rE=e=>{const{children:t,message:n,isByMe:r=!1}=e;return a.a.createElement(nE.Provider,{value:{message:n,isByMe:r}},t)},aE=()=>{const e=a.a.useContext(nE);if(void 0===e)throw new Error("useMessageContext must be used within a MessageProvider");return e},iE=e=>{var t,n,i;let{message:s,channel:o,emojiKey:l="",hideMenu:c,emojiContainer:u}=e;const{members:d=[]}=o,[h,f]=Object(r.useState)(l);return a.a.createElement($v,{onBackdropClick:c},a.a.createElement("div",{className:"sendbird-message__bottomsheet"},a.a.createElement("div",{className:"sendbird-message__bottomsheet__reacted-members"},null===(t=s.reactions)||void 0===t?void 0:t.map(e=>{const t=((e,t)=>{var n,r;const a=(i=null!=t?t:"",e=>{let{key:t}=e;return t===i});var i;return(null==e||null===(n=e.emojiCategories.find(e=>e.emojis.some(a)))||void 0===n||null===(r=n.emojis.find(a))||void 0===r?void 0:r.url)||""})(u,e.key);return a.a.createElement("div",{key:e.key,className:`\n                  sendbird-message__bottomsheet__reacted-members__item\n                  ${h===e.key?"sendbird-message__bottomsheet__reacted-members__item__selected":""}\n                `,onClick:()=>{f(e.key)}},a.a.createElement(tb,{url:t,width:"28px",height:"28px",placeHolder:e=>a.a.createElement("div",{style:e},a.a.createElement(Bp,{type:zp.QUESTION,fillColor:Vp.ON_BACKGROUND_3,width:"28px",height:"28px"}))}),a.a.createElement(hd,{type:fd.BUTTON_2,color:h===e.key?pd.PRIMARY:pd.ONBACKGROUND_3},e.userIds.length))})),a.a.createElement("div",{className:"sendbird-message__bottomsheet__reactor-list"},(null===(n=s.reactions)||void 0===n||null===(i=n.find(e=>e.key===h))||void 0===i?void 0:i.userIds.map(e=>d.find(t=>t.userId===e)).filter(e=>void 0!==e)).map(e=>a.a.createElement(Sb,{key:e.userId,className:"sendbird-message__bottomsheet__reactor-list__item",user:e,avatarSize:"36px"})))))};function sE(e){var t;let{reaction:n,memberNicknamesMap:i,setEmojiKey:s,toggleReaction:o,emojisMap:l,channel:c}=e;const u=ku(),{isMobile:d}=Xp(),h=aE(),f=null==h?void 0:h.message,{stringSet:p}=Object(r.useContext)(td),m=u.config.userId,b=cu(m,n),_=n.userIds.length>0&&(null==c?void 0:c.isGroupChannel())&&!c.isSuper,g=()=>{s(""),null==o||o(f,n.key,b)},v=Ug({onLongPress:()=>{s(n.key)},onClick:g},{shouldPreventDefault:!0,shouldStopPropagation:!0});return a.a.createElement(eE,{className:"sendbird-emoji-reactions__reaction-badge",hoverTooltip:_?a.a.createElement(Jv,null,uu(n,m,i,p)):a.a.createElement(a.a.Fragment,null)},a.a.createElement("div",d?v:{onClick:g},a.a.createElement(Zv,{count:n.userIds.length,selected:b},a.a.createElement(tb,{circle:!0,url:(null===(t=l.get(null==n?void 0:n.key))||void 0===t?void 0:t.url)||"",width:"20px",height:"20px",defaultComponent:a.a.createElement(Bp,{width:"20px",height:"20px",type:zp.QUESTION})}))))}const oE=e=>{let{onClick:t}=e;const n=Ug({onLongPress:()=>{},onClick:t},{shouldPreventDefault:!0,shouldStopPropagation:!0});return a.a.createElement("div",l({className:"sendbird-emoji-reactions__add-reaction-badge"},n),a.a.createElement(Zv,{isAdd:!0},a.a.createElement(Bp,{type:zp.EMOJI_MORE,fillColor:Vp.ON_BACKGROUND_3,width:"20px",height:"20px"})))},lE=e=>{let{userId:t,message:n,emojiContainer:i,hideMenu:s,toggleReaction:o}=e;const l=Object(r.useMemo)(()=>mu(i),[i]);return a.a.createElement($v,{onBackdropClick:s},a.a.createElement("div",{className:"sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet"},l.map(e=>{var r,i,l,c;const u=null!==(r=null==n||null===(i=n.reactions)||void 0===i||null===(l=i.find(t=>t.key===e.key))||void 0===l||null===(c=l.userIds)||void 0===c?void 0:c.some(e=>e===t))&&void 0!==r&&r;return a.a.createElement(Qv,{key:e.key,width:"44px",height:"44px",selected:u,onClick:t=>{null==t||t.stopPropagation(),null==o||o(n,e.key,u),s()},dataSbId:"ui_mobile_emoji_reactions_menu_"+e.key},a.a.createElement(tb,{url:e.url,width:"38px",height:"38px",placeHolder:e=>a.a.createElement("div",{style:e},a.a.createElement(Bp,{type:zp.QUESTION,fillColor:Vp.ON_BACKGROUND_3,width:"28px",height:"28px"}))}))})))},cE=e=>{var t,n,i,s,o;let{className:l="",userId:c,message:u,channel:d,emojiContainer:h,memberNicknamesMap:f,spaceFromTrigger:p={x:0,y:0},isByMe:m=!1,toggleReaction:b}=e;const{isMobile:_}=Xp(),g=Object(r.useRef)(null),[v,E]=Object(r.useState)(!1),[y,O]=Object(r.useState)(""),C=(e=>{var t;const n=new Map;return null==e||null===(t=e.emojiCategories)||void 0===t||t.forEach(e=>{var t;null==e||null===(t=e.emojis)||void 0===t||t.forEach(e=>{e&&e.key&&n.set(e.key,e)})}),n})(h),N=(null!==(t=null===(n=u.reactions)||void 0===n?void 0:n.length)&&void 0!==t?t:0)<C.size;return a.a.createElement("div",{className:lu([l,"sendbird-emoji-reactions",m?"outgoing":"incoming"])},(null!==(i=null===(s=u.reactions)||void 0===s?void 0:s.length)&&void 0!==i?i:0)>0&&(null===(o=u.reactions)||void 0===o?void 0:o.map(e=>a.a.createElement(sE,{key:null==e?void 0:e.key,reaction:e,memberNicknamesMap:f,setEmojiKey:O,toggleReaction:b,emojisMap:C,channel:d}))),!_&&N&&a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(Zv,{className:"sendbird-emoji-reactions__add-reaction-badge",ref:g,isAdd:!0,onClick:t=>{var n;e(),null==t||null===(n=t.stopPropagation)||void 0===n||n.call(t)}},a.a.createElement(Bp,{type:zp.EMOJI_MORE,fillColor:Vp.ON_BACKGROUND_3,width:"20px",height:"20px"})),menuItems:e=>a.a.createElement(Cb,{parentRef:g,parentContainRef:g,closeDropdown:e,spaceFromTrigger:p},mu(h).map(t=>{var n,r,i;const s=(null==u||null===(n=u.reactions)||void 0===n||null===(r=n.find(e=>e.key===t.key))||void 0===r||null===(i=r.userIds)||void 0===i?void 0:i.some(e=>e===c))||!1;return a.a.createElement(Qv,{key:t.key,width:"36px",height:"36px",selected:s,onClick:n=>{e(),null==b||b(u,t.key,s),null==n||n.stopPropagation()},dataSbId:"ui_emoji_reactions_menu_"+t.key},a.a.createElement(tb,{url:(null==t?void 0:t.url)||"",width:"28px",height:"28px",placeHolder:e=>a.a.createElement("div",{style:e},a.a.createElement(Bp,{type:zp.QUESTION,fillColor:Vp.ON_BACKGROUND_3,width:"28px",height:"28px"}))}))}))}),_&&N&&a.a.createElement(oE,{onClick:()=>{E(!0)}}),_&&v&&a.a.createElement(lE,{userId:c,message:u,emojiContainer:h,hideMenu:()=>{E(!1)},toggleReaction:b}),_&&y&&null!==d&&a.a.createElement(iE,{message:u,channel:d,emojiKey:y,hideMenu:()=>{O("")},emojiContainer:h}))};function uE(e){var t;let{className:n="",message:r}=e;return(null!=r&&r.isAdminMessage||null!=r&&r.messageType)&&null!=r&&null!==(t=r.isAdminMessage)&&void 0!==t&&t.call(r)&&"admin"===(null==r?void 0:r.messageType)?a.a.createElement("div",{className:[...Array.isArray(n)?n:[n],"sendbird-admin-message"].join(" ")},a.a.createElement(hd,{className:"sendbird-admin-message__text",type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},null==r?void 0:r.message)):null}function dE(e){var t,n,i;const{mentionTemplate:s,mentionedUserId:o,mentionedUserNickname:l,isByMe:c}=e,u=Object(r.useRef)(),d=ku(),h=null==d||null===(t=d.config)||void 0===t?void 0:t.userId,f=null==d||null===(n=d.stores)||void 0===n||null===(i=n.sdkStore)||void 0===i?void 0:i.sdk,p=h===o,[m,b]=Object(r.useState)(),_=Object(r.useCallback)(e=>{if(m||null==f||!f.createApplicationUserListQuery)return void e();(null==f?void 0:f.createApplicationUserListQuery({userIdsFilter:[o]})).next().then(t=>{(null==t?void 0:t.length)>0&&b(t[0]),e()})},[f,o]);return a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement("a",{className:`\n            sendbird-word__mention\n            ${p?"sendbird-word__mention--me":""}\n          `,onClick:()=>_(e),ref:u,"data-userid":o,"data-nickname":l,"data-sb-mention":!0},a.a.createElement(hd,{type:fd.CAPTION_1,color:c?pd.ONCONTENT_1:pd.ONBACKGROUND_1},`${s}${l}`)),menuItems:e=>a.a.createElement(Ob,{parentRef:u,parentContainRef:u,closeDropdown:e,style:{paddingTop:"0px",paddingBottom:"0px"}},a.a.createElement(_b,{user:m,onSuccess:e,currentUserId:h}))})}const hE=/https?:\/\//;function fE(e){let{className:t,src:n,type:r,color:i,children:s}=e;const o=hE.test(n)?n:"http://"+n;return a.a.createElement("a",{className:[...Array.isArray(t)?t:[t],"sendbird-link-label",i?dd(i):""].join(" "),href:o,target:"_blank",rel:"noopener noreferrer",onTouchEnd:e=>{e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),window.open(o,"_blank","noopener,noreferrer")}},a.a.createElement(hd,{className:"sendbird-link-label__label",type:r,color:i},s))}fE.propTypes={className:od.a.oneOfType([od.a.string,od.a.arrayOf(od.a.string)]),src:od.a.string.isRequired,type:od.a.string,color:od.a.string,children:od.a.oneOfType([od.a.string,od.a.element,od.a.arrayOf(od.a.string),od.a.arrayOf(od.a.element)]).isRequired},fE.defaultProps={className:"",type:"",color:""};function pE(e){let{tokens:t}=e;const n=aE(),r=null==n?void 0:n.message,i=null==n?void 0:n.isByMe,{updatedAt:s,createdAt:o}=r;return a.a.createElement(a.a.Fragment,null,null==t?void 0:t.map((e,t)=>{const n=function(e,t,n){return`sb-msg_${e}_${t}_${n}`}(o,s,t);return X(e.type).with(xv,()=>a.a.createElement("span",{className:"sendbird-word",key:n},a.a.createElement(dE,{mentionTemplate:kv,mentionedUserId:e.userId,mentionedUserNickname:e.value,isByMe:i}))).with(Pv,()=>a.a.createElement("span",{className:"sendbird-word",key:n},a.a.createElement(fE,{className:"sendbird-word__url",src:e.value,type:fd.BODY_1},e.value))).otherwise(()=>a.a.createElement(a.a.Fragment,{key:n},e.value.split("\n").map(e=>{var t,n;const r=(null===(t=e.match(/^\s*/))||void 0===t?void 0:t[0])||"",a=(null===(n=e.match(/\s*$/))||void 0===n?void 0:n[0])||"",i=r.replace(/ /g,""),s=a.replace(/ /g,"");return i+e.trim()+s}).join("\n")))}))}function mE(e){var t,n,i;let{className:s="",message:o,isByMe:l=!1,mouseHover:c=!1,isMentionEnabled:u=!1,isReactionEnabled:d=!1}=e;const{stringSet:h}=Object(r.useContext)(td),f=u&&(null==o||null===(t=o.mentionedMessageTemplate)||void 0===t?void 0:t.length)>0&&(null==o||null===(n=o.mentionedUsers)||void 0===n?void 0:n.length)>0,p=Object(r.useMemo)(()=>Gv(f?{mentionedUsers:null==o?void 0:o.mentionedUsers,messageText:null==o?void 0:o.mentionedMessageTemplate}:{messageText:null==o?void 0:o.message}),[null==o?void 0:o.updatedAt]);return a.a.createElement(hd,{type:fd.BODY_1,color:l?pd.ONCONTENT_1:pd.ONBACKGROUND_1},a.a.createElement("div",{className:lu([s,"sendbird-text-message-item-body",l?"outgoing":"incoming",c?"mouse-hover":"",d&&(null==o||null===(i=o.reactions)||void 0===i?void 0:i.length)>0?"reactions":""])},a.a.createElement(pE,{tokens:p}),ru(o)&&a.a.createElement(hd,{className:"sendbird-text-message-item-body__message edited",type:fd.BODY_1,color:l?pd.ONCONTENT_2:pd.ONBACKGROUND_2},` ${h.MESSAGE_EDITED} `)))}function bE(e){var t;let{className:n,message:r,isByMe:i=!1,mouseHover:s=!1,isReactionEnabled:o=!1,truncateLimit:l=null}=e;const{isMobile:c}=Xp(),u=l||(c?20:null);return a.a.createElement("div",{className:lu([n,"sendbird-file-message-item-body",i?"outgoing":"incoming",s?"mouse-hover":"",o&&(null==r||null===(t=r.reactions)||void 0===t?void 0:t.length)>0?"reactions":""])},a.a.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},a.a.createElement(Bp,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:zp.PHOTO,VIDEO:zp.PLAY,AUDIO:zp.FILE_AUDIO,GIF:zp.GIF,OTHERS:zp.FILE_DOCUMENT}[Bc(null==r?void 0:r.type)],fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(Z_,{className:"sendbird-file-message-item-body__file-name",onClick:()=>{window.open(null==r?void 0:r.url)},color:i?Q_.ONCONTENT_1:Q_.ONBACKGROUND_1},a.a.createElement(hd,{className:"sendbird-file-message-item-body__file-name__text",type:fd.BODY_1,color:i?pd.ONCONTENT_1:pd.ONBACKGROUND_1},fu((null==r?void 0:r.name)||(null==r?void 0:r.url),u))))}function _E(e){var t,n,i;let{className:s="",message:o,isByMe:c=!1,mouseHover:u=!1,isReactionEnabled:d=!1,showFileViewer:h=Vm,style:f={}}=e;const{thumbnails:p=[]}=o,m=p.length>0?null===(t=p[0])||void 0===t?void 0:t.url:"",[b,_]=Object(r.useState)(!1),g=Ug({onLongPress:Vm,onClick:()=>{zc(o)&&(null==h||h(!0))}});return a.a.createElement("div",l({className:lu([s,"sendbird-thumbnail-message-item-body",c?"outgoing":"incoming",u?"mouse-hover":"",d&&(null!==(n=null===(i=o.reactions)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0?"reactions":""])},g),a.a.createElement(tb,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:m||(null==o?void 0:o.url),alt:null==o?void 0:o.type,width:(null==f?void 0:f.width)||"360px",height:(null==f?void 0:f.height)||"270px",onLoad:()=>{_(!0)},placeHolder:e=>a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:e})}),eu(o)&&!m&&!b&&a.a.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},a.a.createElement("source",{src:null==o?void 0:o.url,type:null==o?void 0:o.type})),a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(eu(o)||tu(o))&&a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},a.a.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},a.a.createElement(Bp,{type:eu(o)?zp.PLAY:zp.GIF,fillColor:Vp.GRAY,width:"34px",height:"34px"}))))}function gE(e){var t,n,i,s,o,l,c,u,d,h,f,p;let{className:m,message:b,isByMe:_=!1,mouseHover:g=!1,isMentionEnabled:v=!1,isReactionEnabled:E=!1,onMessageHeightChange:y=(()=>{})}=e;const O=Object(r.useRef)(null),{stringSet:C}=Object(r.useContext)(td),N=()=>{var e,t;null!=b&&null!==(e=b.ogMetaData)&&void 0!==e&&e.url&&window.open(null==b||null===(t=b.ogMetaData)||void 0===t?void 0:t.url)},T=v&&(null==b||null===(t=b.mentionedMessageTemplate)||void 0===t?void 0:t.length)>0&&(null==b||null===(n=b.mentionedUsers)||void 0===n?void 0:n.length)>0,S=Object(r.useMemo)(()=>Gv(T?{mentionedUsers:null==b?void 0:b.mentionedUsers,messageText:null==b?void 0:b.mentionedMessageTemplate}:{messageText:null==b?void 0:b.message}),[null==b?void 0:b.updatedAt]);return a.a.createElement("div",{className:lu([m,"sendbird-og-message-item-body",_?"outgoing":"incoming",g?"mouse-hover":"",E&&(null==b||null===(i=b.reactions)||void 0===i?void 0:i.length)>0?"reactions":""])},a.a.createElement(hd,{type:fd.BODY_1,color:_?pd.ONCONTENT_1:pd.ONBACKGROUND_1},a.a.createElement("div",{className:"sendbird-og-message-item-body__text-bubble"},a.a.createElement(pE,{tokens:S}),ru(b)&&a.a.createElement(hd,{className:"sendbird-og-message-item-body__text-bubble__message",type:fd.BODY_1,color:_?pd.ONCONTENT_2:pd.ONBACKGROUND_2},` ${C.MESSAGE_EDITED} `))),a.a.createElement("div",{ref:O,className:`sendbird-og-message-item-body__og-thumbnail\n          ${null!=b&&null!==(s=b.ogMetaData)&&void 0!==s&&null!==(o=s.defaultImage)&&void 0!==o&&o.url?"":"sendbird-og-message-item-body__og-thumbnail__empty"}\n        `,onClick:N},a.a.createElement(tb,{onLoad:y,onError:()=>{try{var e,t;null==O||null===(e=O.current)||void 0===e||null===(t=e.classList)||void 0===t||t.add("sendbird-og-message-item-body__og-thumbnail__empty")}catch(e){}},className:"sendbird-og-message-item-body__og-thumbnail__image",url:(null==b||null===(l=b.ogMetaData)||void 0===l||null===(c=l.defaultImage)||void 0===c?void 0:c.url)||"",alt:null==b||null===(u=b.ogMetaData)||void 0===u||null===(d=u.defaultImage)||void 0===d?void 0:d.alt,defaultComponent:a.a.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},a.a.createElement(Bp,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:zp.THUMBNAIL_NONE,width:"56px",height:"56px"}))})),a.a.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:N},(null==b||null===(h=b.ogMetaData)||void 0===h?void 0:h.title)&&a.a.createElement(hd,{className:"sendbird-og-message-item-body__description__title",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_1},b.ogMetaData.title),(null==b||null===(f=b.ogMetaData)||void 0===f?void 0:f.description)&&a.a.createElement(hd,{className:"sendbird-og-message-item-body__description__description",type:fd.BODY_2,color:pd.ONBACKGROUND_1},b.ogMetaData.description),(null==b||null===(p=b.ogMetaData)||void 0===p?void 0:p.url)&&a.a.createElement(hd,{className:"sendbird-og-message-item-body__description__url",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},b.ogMetaData.url)),a.a.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}function vE(e){var t;let{className:n,message:i,isByMe:s=!1,mouseHover:o=!1,isReactionEnabled:l=!1}=e;const{stringSet:c}=Object(r.useContext)(td);return a.a.createElement("div",{className:lu([n,"sendbird-unknown-message-item-body",s?"outgoing":"incoming",o?"mouse-hover":"",l&&(null==i||null===(t=i.reactions)||void 0===t?void 0:t.length)>0?"reactions":""])},a.a.createElement(hd,{className:"sendbird-unknown-message-item-body__header",type:fd.BODY_1,color:s?pd.ONCONTENT_1:pd.ONBACKGROUND_1},c.UNKNOWN__UNKNOWN_MESSAGE_TYPE),a.a.createElement(hd,{className:"sendbird-unknown-message-item-body__description",type:fd.BODY_1,color:s?pd.ONCONTENT_2:pd.ONBACKGROUND_2},c.UNKNOWN__CANNOT_READ_MESSAGE))}function EE(e){var t,n,i,o;let{message:l,userId:c="",isByMe:u=!1,className:d="",isUnavailable:h=!1,onClick:f}=e;const{stringSet:p}=Object(r.useContext)(td),{parentMessage:m}=l,b=null==m?void 0:m.sender,_=c===(null==b?void 0:b.userId)?p.QUOTED_MESSAGE__CURRENT_USER:null==b?void 0:b.nickname,g=(null==m?void 0:m.url)||"",v=null==m?void 0:m.type,E=c===(null==l||null===(t=l.sender)||void 0===t?void 0:t.userId)?p.QUOTED_MESSAGE__CURRENT_USER:null==l||null===(n=l.sender)||void 0===n?void 0:n.nickname,[y,O]=Object(r.useState)(!1),C=s({},Lc),N=null!=m&&m.name?m.name.split("/"):g.split("/");return a.a.createElement("div",{className:lu([d,"sendbird-quote-message",u?"outgoing":"incoming",h?"unavailable":""]),key:null==m?void 0:m.messageId,onClick:()=>{!h&&f&&f()},onTouchEnd:()=>{!h&&f&&f()}},a.a.createElement("div",{className:"sendbird-quote-message__replied-to"},a.a.createElement(Bp,{className:"sendbird-quote-message__replied-to__icon",type:zp.REPLY,fillColor:Vp.ON_BACKGROUND_3,width:"12px",height:"12px"}),a.a.createElement(hd,{className:"sendbird-quote-message__replied-to__text",type:fd.CAPTION_2,color:pd.ONBACKGROUND_3},a.a.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},E),a.a.createElement("span",{className:"sendbird-quote-message__replied-to__text__text"},p.QUOTED_MESSAGE__REPLIED_TO),a.a.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},_))),a.a.createElement("div",{className:"sendbird-quote-message__replied-message"},h&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},a.a.createElement(hd,{className:"sendbird-quote-message__replied-message__text-message__word",type:fd.BODY_2,color:pd.ONBACKGROUND_1},p.QUOTED_MESSAGE__UNAVAILABLE)),Wc(m)&&(null==m||null===(i=m.message)||void 0===i?void 0:i.length)>0&&!h&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},a.a.createElement(hd,{className:"sendbird-quote-message__replied-message__text-message__word",type:fd.BODY_2,color:pd.ONBACKGROUND_1},null==m?void 0:m.message)),nu(m)&&g&&!h&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},a.a.createElement(hd,{className:"sendbird-quote-message__replied-message__text-message__word",type:fd.BODY_2,color:pd.ONBACKGROUND_1},p.VOICE_MESSAGE)),$c(m)&&g&&!h&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},a.a.createElement(tb,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:g,alt:v,width:"144px",height:"108px",onLoad:()=>O(!0),defaultComponent:a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},a.a.createElement(Bp,{type:Pc(v)?zp.PLAY:zp.PHOTO,fillColor:Vp.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),Pc(v)&&!((null==m||null===(o=m.thumbnails)||void 0===o?void 0:o.length)>0)&&a.a.createElement(a.a.Fragment,null,a.a.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},a.a.createElement("source",{src:g,type:v})),a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},a.a.createElement(Bp,{type:zp.PLAY,fillColor:Vp.GRAY,width:"14px",height:"14px"})))),y&&Fc(v)&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},a.a.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},a.a.createElement(Bp,{type:zp.GIF,fillColor:Vp.GRAY,width:"14px",height:"14px"})))),iu(m)===Uc.FILE&&g&&!h&&a.a.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},a.a.createElement(Bp,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:{[C.IMAGE]:zp.PHOTO,[C.VIDEO]:zp.PLAY,[C.AUDIO]:zp.FILE_AUDIO,[C.GIF]:zp.GIF,[C.OTHERS]:zp.FILE_DOCUMENT}[Bc(v)],fillColor:Vp.ON_BACKGROUND_3,width:"16px",height:"16px"}),a.a.createElement(hd,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:fd.BODY_2,color:pd.ONBACKGROUND_3},fu(N[N.length-1])))))}const yE=e=>{var t,n,r;const{hideMenu:i,channel:s,message:o,replyType:l,userId:c,resendMessage:u,showEdit:d,showRemove:h,deleteMenuState:f,setQuoteMessage:p,parentRef:m,onReplyInThread:b,isOpenedFromThread:_=!1}=e,g=(null==o||null===(t=o.sender)||void 0===t?void 0:t.userId)===c,{stringSet:v}=rd(),E=Wc(o),y=Wc(o)&&zc(o)&&g,O=qc(o)&&(null==o?void 0:o.isResendable)&&g,C=!Kc(o)&&g,N=g&&(void 0===f||"HIDE"!==f)&&C,T=void 0!==f&&"DISABLE"===f||(null!==(n=null==o||null===(r=o.threadInfo)||void 0===r?void 0:r.replyCount)&&void 0!==n?n:0)>0,S=!Kc(o)&&Yc(o)&&!(nu(o)&&(null!=s&&s.isSuper||null!=s&&s.isBroadcast)),I="QUOTE_REPLY"===l&&!qc(o)&&!Kc(o)&&(null==s?void 0:s.isGroupChannel()),A="THREAD"===l&&!_&&!qc(o)&&!Kc(o)&&!Qc(o)&&(null==s?void 0:s.isGroupChannel()),w=o;return a.a.createElement(Tb,{isOpen:!0,menuItems:()=>{var e,t,n;return a.a.createElement(Ob,{className:"sendbird-message__mobile-context-menu",parentRef:m,parentContainRef:m,closeDropdown:i},E&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-copy",onClick:()=>{i(),pu(null==o?void 0:o.message)},dataSbId:"ui_mobile_message_item_menu_copy"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},null==v?void 0:v.MESSAGE_MENU__COPY),a.a.createElement(Bp,{type:zp.COPY,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),I&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-reply",onClick:()=>{i(),p(o)},disable:(null!==(e=null==o?void 0:o.parentMessageId)&&void 0!==e?e:0)>0,dataSbId:"ui_mobile_message_item_menu_reply"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:(null!==(t=null==o?void 0:o.parentMessageId)&&void 0!==t?t:0)>0?pd.ONBACKGROUND_4:pd.ONBACKGROUND_1},v.MESSAGE_MENU__REPLY),a.a.createElement(Bp,{type:zp.REPLY,fillColor:(null!==(n=null==o?void 0:o.parentMessageId)&&void 0!==n?n:0)>0?Vp.ON_BACKGROUND_4:Vp.PRIMARY,width:"24px",height:"24px"})),A&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-reply",onClick:()=>{i(),null==b||b({message:o})},dataSbId:"ui_mobile_message_item_menu_thread"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},v.MESSAGE_MENU__THREAD),a.a.createElement(Bp,{type:zp.THREAD,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),y&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-edit",onClick:()=>{i(),d(!0)},dataSbId:"ui_mobile_message_item_menu_edit"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},v.MESSAGE_MENU__EDIT),a.a.createElement(Bp,{type:zp.EDIT,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),O&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-resend",onClick:()=>{i(),u(o)},dataSbId:"ui_mobile_message_item_menu_resend"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},v.MESSAGE_MENU__RESEND),a.a.createElement(Bp,{type:zp.REFRESH,fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),N&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-delete",onClick:()=>{T||(i(),h(!0))},disable:T,dataSbId:"ui_mobile_message_item_menu_delete"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:T?pd.ONBACKGROUND_4:pd.ONBACKGROUND_1},v.MESSAGE_MENU__DELETE),a.a.createElement(Bp,{type:zp.DELETE,fillColor:T?Vp.ON_BACKGROUND_4:Vp.PRIMARY,width:"24px",height:"24px"})),S&&a.a.createElement(Nb,{className:"sendbird-message__mobile-context-menu-item menu-item-save",onClick:()=>{i()},dataSbId:"ui_mobile_message_item_menu_download_file"},a.a.createElement("a",{className:"sendbird-message__contextmenu--hyperlink",rel:"noopener noreferrer",href:null==w?void 0:w.url,target:"_blank"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},v.MESSAGE_MENU__SAVE),a.a.createElement(Bp,{type:zp.DOWNLOAD,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}))))}})},OE=e=>{var t,n,i;const{hideMenu:s,channel:o,emojiContainer:l,message:c,replyType:u,userId:d,resendMessage:h,toggleReaction:f,isReactionEnabled:p,showEdit:m,showRemove:b,deleteMenuState:_,setQuoteMessage:g,onReplyInThread:v,isOpenedFromThread:E=!1}=e,y=(null==c||null===(t=c.sender)||void 0===t?void 0:t.userId)===d,{stringSet:O}=rd(),C=Wc(c),N=Wc(c)&&zc(c)&&y,T=qc(c)&&(null==c?void 0:c.isResendable)&&y,S=!Kc(c)&&y,I=y&&(void 0===_||"HIDE"!==_)&&S,A=void 0!==_&&"DISABLE"===_||(null!==(n=null==c||null===(i=c.threadInfo)||void 0===i?void 0:i.replyCount)&&void 0!==n?n:0)>0,w=!Kc(c)&&Yc(c)&&!nu(c),M=!qc(c)&&!Kc(c)&&p,j="QUOTE_REPLY"===u&&!qc(c)&&!Kc(c)&&(null==o?void 0:o.isGroupChannel())&&!(null!=o&&o.isBroadcast),R="THREAD"===u&&!E&&!qc(c)&&!Kc(c)&&!Qc(c)&&(null==o?void 0:o.isGroupChannel())&&!(null!=o&&o.isBroadcast),U=(null==c?void 0:c.parentMessageId)>0,L=c,k=Math.floor(window.innerWidth/38)-1,[D,x]=Object(r.useState)(!1),P=mu(l),F=D?P:null==P?void 0:P.slice(0,k),H=P.length>k;return a.a.createElement($v,{onBackdropClick:s},a.a.createElement("div",{className:"sendbird-message__bottomsheet"},M&&a.a.createElement("div",{className:"sendbird-message__bottomsheet-reactions"},a.a.createElement("ul",{className:"sendbird-message__bottomsheet-reaction-bar"},a.a.createElement("div",{className:`\n                    sendbird-message__bottomsheet-reaction-bar__row\n                    ${D?"sendbird-message__bottomsheet-reaction-bar__all":""}\n                  `},F.map(e=>{var t,n,r;const i=null==c||null===(t=c.reactions)||void 0===t||null===(n=t.filter(t=>t.key===e.key)[0])||void 0===n||null===(r=n.userIds)||void 0===r?void 0:r.some(e=>e===d);return a.a.createElement(Qv,{key:e.key,width:"38px",height:"38px",selected:i,onClick:()=>{s(),f(c,e.key,i)},dataSbId:"ui_mobile_emoji_reactions_menu_"+e.key},a.a.createElement(tb,{url:(null==e?void 0:e.url)||"",width:"28px",height:"28px",placeHolder:e=>a.a.createElement("div",{style:e},a.a.createElement(Bp,{type:zp.QUESTION,fillColor:Vp.ON_BACKGROUND_3,width:"28px",height:"28px"}))}))}),H&&!D&&a.a.createElement(Qv,{key:"emoji_more",width:"38px",height:"38px",onClick:()=>{x(!0)},dataSbId:"ui_mobile_emoji_reactions_menu_emojiadd"},a.a.createElement(tb,{url:"",width:"28px",height:"28px",placeHolder:e=>a.a.createElement("div",{style:e},a.a.createElement(Bp,{type:zp.EMOJI_MORE,fillColor:Vp.ON_BACKGROUND_3,width:"28px",height:"28px"}))}))))),!D&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--actions"},C&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--action",onClick:()=>{s(),pu(null==c?void 0:c.message)}},a.a.createElement(Bp,{type:zp.COPY,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},null==O?void 0:O.MESSAGE_MENU__COPY)),N&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--action",onClick:()=>{s(),m(!0)}},a.a.createElement(Bp,{type:zp.EDIT,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},null==O?void 0:O.MESSAGE_MENU__EDIT)),T&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--action",onClick:()=>{s(),h(c)}},a.a.createElement(Bp,{type:zp.REFRESH,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},null==O?void 0:O.MESSAGE_MENU__RESEND)),j&&a.a.createElement("div",{className:`sendbird-message__bottomsheet--action\n                      ${U?"sendbird-message__bottomsheet--action-disabled":""}\n                    `,role:"menuitem","aria-disabled":!!U,onClick:()=>{U||(s(),g(c))}},a.a.createElement(Bp,{type:zp.REPLY,fillColor:U?Vp.ON_BACKGROUND_3:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:U?pd.ONBACKGROUND_4:pd.ONBACKGROUND_1},null==O?void 0:O.MESSAGE_MENU__REPLY)),R&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--action",onClick:()=>{s(),null==v||v({message:c})}},a.a.createElement(Bp,{type:zp.THREAD,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},O.MESSAGE_MENU__THREAD)),I&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--action",onClick:()=>{A||(s(),null==b||b(!0))}},a.a.createElement(Bp,{type:zp.DELETE,fillColor:A?Vp.ON_BACKGROUND_4:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:A?pd.ONBACKGROUND_4:pd.ONBACKGROUND_1},null==O?void 0:O.MESSAGE_MENU__DELETE)),w&&a.a.createElement("div",{className:"sendbird-message__bottomsheet--action",onClick:()=>{s()}},a.a.createElement("a",{className:"sendbird-message__bottomsheet--hyperlink",rel:"noopener noreferrer",href:null==L?void 0:L.url,target:"_blank"},a.a.createElement(Bp,{type:zp.DOWNLOAD,fillColor:Vp.PRIMARY,width:"24px",height:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},null==O?void 0:O.MESSAGE_MENU__SAVE))))))},CE=e=>{const{message:t,hideMenu:n,userId:r,channel:i,isReactionEnabled:s=!1,isByMe:o,replyType:l,disabled:c,deleteMenuState:u,showRemove:d,showEdit:h,resendMessage:f,setQuoteMessage:p,emojiContainer:m,toggleReaction:b,parentRef:_,onReplyInThread:g,isOpenedFromThread:v}=e;return a.a.createElement(a.a.Fragment,null,s?a.a.createElement(OE,{channel:i,message:t,hideMenu:n,isByMe:o,userId:r,replyType:l,disabled:c,showRemove:d,showEdit:h,deleteMenuState:u,resendMessage:f,setQuoteMessage:p,emojiContainer:m,toggleReaction:b,isReactionEnabled:s,onReplyInThread:g,isOpenedFromThread:v}):a.a.createElement(yE,{channel:i,userId:r,message:t,hideMenu:n,isByMe:o,showEdit:h,replyType:l,disabled:c,deleteMenuState:u,showRemove:d,resendMessage:f,setQuoteMessage:p,parentRef:_,onReplyInThread:g,isOpenedFromThread:v}))};function NE(e){var t;let{className:n,threadInfo:r,onClick:i}=e;const{mostRepliedUsers:s=[],replyCount:o}=r,{stringSet:l}=rd();return a.a.createElement("div",{className:"sendbird-ui-thread-replies "+n,role:"button",onClick:e=>{i(e),null==e||e.stopPropagation()},onKeyDown:e=>{i(e),null==e||e.stopPropagation()}},a.a.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles"},s.slice(0,4).map(e=>a.a.createElement(sb,{key:es(),className:"sendbird-ui-thread-replies__user-profiles__avatar",src:null==e?void 0:e.profileUrl,alt:"user profile",width:"20px",height:"20px"})),(null==s?void 0:s.length)>=5&&a.a.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar"},a.a.createElement(sb,{className:"sendbird-ui-thread-replies__user-profiles__avatar__image",src:null==s||null===(t=s[4])||void 0===t?void 0:t.profileUrl,alt:"user profile",width:"20px",height:"20px"}),a.a.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__cover"}),a.a.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__plus"},a.a.createElement(Bp,{type:zp.PLUS,fillColor:Vp.WHITE,width:"16px",height:"16px"})))),a.a.createElement(hd,{className:"sendbird-ui-thread-replies__reply-counts",type:fd.CAPTION_2,color:pd.PRIMARY},1===o?`${o} ${l.CHANNEL__THREAD_REPLY}`:`${o>99?l.CHANNEL__THREAD_OVER_MAX:o} ${l.CHANNEL__THREAD_REPLIES}`),a.a.createElement(Bp,{className:"sendbird-ui-thread-replies__icon",type:zp.CHEVRON_RIGHT,fillColor:Vp.PRIMARY,width:"16px",height:"16px"}))}const TE={PRIMARY:"progress-bar-color--primary",GRAY:"progress-bar-color--gray"},SE=e=>{let{className:t="",disabled:n=!1,maxSize:i,currentSize:s=0,colorType:o=TE.PRIMARY}=e;const l=Object(r.useMemo)(()=>s/i*100+"%",[s,i]);return a.a.createElement("div",{className:`sendbird-progress-bar ${t} ${o} ${n?"progress-bar--disabled":""}`},a.a.createElement("div",{className:"sendbird-progress-bar__fill",style:{width:l}}))},IE=e=>{var t;let{key:n="",channelUrl:a="",audioFile:i=null,audioFileUrl:s=""}=e;const[o]=Object(r.useState)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return`${e}-${t}`}(a,n)),{play:l,pause:c,stop:u,voicePlayerStore:d}=zu(),{isRecordable:h}=am(),f=(null==d||null===(t=d.audioStorage)||void 0===t?void 0:t[o])||xu();return Object(r.useEffect)(()=>()=>{if(i||s){var e,t;const n=document.getElementById(Lu.l);null==n||null===(e=(t=n).pause)||void 0===e||e.call(t)}},[]),{play:()=>{h||null==l||l({groupKey:o,audioFile:i,audioFileUrl:s})},pause:()=>{null==c||c(o)},stop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";null==u||u(e)},playbackTime:1e3*f.playbackTime,duration:1e3*f.duration,playingStatus:f.playingStatus}},AE=e=>{let{className:t,time:n=0,labelType:r=fd.CAPTION_2,labelColor:i=pd.ONCONTENT_1}=e;const s=n<0?0:n,o=Math.floor(s/36e5),l=Math.floor(s%36e5/6e4),c=Math.floor(s%36e5%6e4/1e3);return a.a.createElement("div",{className:"sendbird-ui-play-time "+t},a.a.createElement(hd,{type:r,color:i},`${o?o+":":""}${l<10?"0":""}${l||"0"}:${c<10?"0":""}${c}`))},wE=e=>{var t;let{className:n,message:i,channelUrl:s,isByMe:o=!1,isReactionEnabled:l=!1}=e;const[c,u]=Object(r.useState)(!1),{play:d,pause:h,playbackTime:f=0,duration:p,playingStatus:m=Du.IDLE}=IE({channelUrl:s,key:""+(null==i?void 0:i.messageId),audioFileUrl:null==i?void 0:i.url});Object(r.useEffect)(()=>{var e;l&&(null==i||null===(e=i.reactions)||void 0===e?void 0:e.length)>0?u(!0):u(!1)},[l,null==i||null===(t=i.reactions)||void 0===t?void 0:t.length]);const b=Object(r.useMemo)(()=>{if(null!=i&&i.metaArrays){var e;const t=null==i||null===(e=i.metaArrays.find(e=>"KEY_VOICE_MESSAGE_DURATION"===e.key))||void 0===e?void 0:e.value[0];return t&&parseInt(t)}return 1},[null==i?void 0:i.metaArrays]);return a.a.createElement("div",{className:`sendbird-voice-message-item-body ${n} ${c?"is-reactions-contained":""}`},a.a.createElement(SE,{className:"sendbird-voice-message-item-body__progress-bar",maxSize:p||b,currentSize:f,colorType:o?TE.PRIMARY:TE.GRAY}),a.a.createElement("div",{className:"sendbird-voice-message-item-body__status-button"},(m===Du.IDLE||m===Du.PAUSED)&&a.a.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:d},a.a.createElement(Bp,{width:"18px",height:"18px",type:zp.PLAY,fillColor:Vp.PRIMARY})),m===Du.PREPARING&&a.a.createElement(k_,{width:"22.2px",height:"22.2px"},a.a.createElement(Bp,{width:"22.2px",height:"22.2px",type:zp.SPINNER,fillColor:Vp.PRIMARY_2})),m===Du.PLAYING&&a.a.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:()=>{h()}},a.a.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause"},a.a.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"}),a.a.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"})))),a.a.createElement(AE,{className:"sendbird-voice-message-item-body__playback-time",time:b-f,labelType:fd.BODY_1,labelColor:o?pd.ONCONTENT_1:pd.ONBACKGROUND_1}))};function ME(e){var t,n,i,o,c,u,d,h,f,p,m,b;let{className:_,userId:g,channel:v,message:E,disabled:y=!1,chainTop:O=!1,chainBottom:C=!1,isReactionEnabled:N=!1,disableQuoteMessage:T=!1,replyType:S,threadReplySelectType:I,nicknamesMap:A,emojiContainer:w,scrollToMessage:M,showEdit:j,showRemove:R,showFileViewer:U,resendMessage:L,toggleReaction:k,setQuoteMessage:D,onReplyInThread:x,onQuoteMessageClick:P,onMessageHeightChange:F}=e;const H=au(),{dateLocale:G}=rd(),{config:B}=(null==ku?void 0:ku())||{},{disableUserProfile:z,renderUserProfile:V}=Object(r.useContext)(qm),q=Object(r.useRef)(null),K=Object(r.useRef)(null),{isMobile:W}=Xp(),[Y,Q]=Object(r.useState)(!1),[X,Z]=Object(r.useState)(!1),[$,J]=Object(r.useState)(!1),ee=g===(null==E||null===(t=E.sender)||void 0===t?void 0:t.userId)||"pending"===(null==E?void 0:E.sendingStatus)||"failed"===(null==E?void 0:E.sendingStatus),te=ee?"outgoing":"incoming",ne=O?"chain-top":"",re=N&&!(null!=v&&v.isEphemeral),ae=re?"use-reactions":"",ie=$?"sendbird-mouse-hover":"",se=!("QUOTE_REPLY"!==S&&"THREAD"!==S||null==E||!E.parentMessageId||null==E||!E.parentMessage||T),oe=se?"use-quote":"",le=(null==v?void 0:v.isGroupChannel())&&B.groupChannel.enableOgtag,ce=(null==E||null===(n=E.threadInfo)||void 0===n?void 0:n.replyCount)>0&&"THREAD"===S,ue=Ug({onLongPress:()=>{W&&Q(!0)},onClick:Vm},{delay:300,shouldPreventDefault:!1});return null!=E&&null!==(i=E.isAdminMessage)&&void 0!==i&&i.call(E)||"admin"===(null==E?void 0:E.messageType)?a.a.createElement(uE,{message:E}):a.a.createElement("div",{className:lu([_,"sendbird-message-content",te]),onMouseOver:()=>Z(!0),onMouseLeave:()=>Z(!1)},a.a.createElement("div",{className:lu(["sendbird-message-content__left",ae,te,oe])},!ee&&!C&&a.a.createElement(Tb,{menuTrigger:e=>{var t,n,r;return a.a.createElement(sb,{className:"sendbird-message-content__left__avatar "+(ce?"use-thread-replies":""),src:(null==v||null===(t=v.members)||void 0===t||null===(n=t.find(e=>{var t;return(null==e?void 0:e.userId)===(null==E||null===(t=E.sender)||void 0===t?void 0:t.userId)}))||void 0===n?void 0:n.profileUrl)||(null==E||null===(r=E.sender)||void 0===r?void 0:r.profileUrl)||"",ref:q,width:"28px",height:"28px",onClick:()=>{z||e()}})},menuItems:e=>a.a.createElement(Ob,{parentRef:q,parentContainRef:q,closeDropdown:e,style:{paddingTop:"0px",paddingBottom:"0px"}},V?V({user:null==E?void 0:E.sender,close:e}):a.a.createElement(_b,{user:E.sender,onSuccess:e}))}),ee&&!W&&a.a.createElement("div",{className:lu(["sendbird-message-content-menu",ae,ie,te])},a.a.createElement(Yv,{className:"sendbird-message-content-menu__normal-menu",channel:v,message:E,isByMe:ee,replyType:S,disabled:y,showEdit:j,showRemove:R,resendMessage:L,setQuoteMessage:D,setSupposedHover:J,onReplyInThread:e=>{let{message:t}=e;if(I===eg.THREAD)x({message:t});else if(I===eg.PARENT){var n;M(null===(n=t.parentMessage)||void 0===n?void 0:n.createdAt,t.parentMessageId)}}}),re&&a.a.createElement(Xv,{className:"sendbird-message-content-menu__reaction-menu",message:E,userId:g,spaceFromTrigger:{},emojiContainer:w,toggleReaction:k,setSupposedHover:J}))),a.a.createElement("div",l({className:"sendbird-message-content__middle"},W?s({},ue):{},{ref:K}),!ee&&!O&&!se&&a.a.createElement(hd,{className:"sendbird-message-content__middle__sender-name",type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},(null==v||null===(o=v.members)||void 0===o||null===(c=o.find(e=>{var t;return(null==e?void 0:e.userId)===(null==E||null===(t=E.sender)||void 0===t?void 0:t.userId)}))||void 0===c?void 0:c.nickname)||bu(E)),se?a.a.createElement("div",{className:lu(["sendbird-message-content__middle__quote-message",ee?"outgoing":"incoming",oe])},a.a.createElement(EE,{className:"sendbird-message-content__middle__quote-message__quote",message:E,userId:g,isByMe:ee,isUnavailable:"THREAD"===S&&(null!==(u=null==v?void 0:v.joinedAt)&&void 0!==u?u:0)>(null!==(d=null===(h=E.parentMessage)||void 0===h?void 0:h.createdAt)&&void 0!==d?d:0),onClick:()=>{var e;"THREAD"===S&&I===eg.THREAD&&(null==P||P({message:E})),("QUOTE_REPLY"===S||"THREAD"===S&&I===eg.PARENT)&&null!=E&&null!==(e=E.parentMessage)&&void 0!==e&&e.createdAt&&null!=E&&E.parentMessageId&&M(E.parentMessage.createdAt,E.parentMessageId)}})):null,a.a.createElement("div",{className:lu(["sendbird-message-content__middle__body-container"])},ee&&!C&&a.a.createElement("div",{className:lu(["sendbird-message-content__middle__body-container__created-at","left",ie])},a.a.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},a.a.createElement(W_,{message:E,channel:v}))),le&&Xc(E)?a.a.createElement(gE,{className:"sendbird-message-content__middle__message-item-body",message:E,isByMe:ee,mouseHover:X,isMentionEnabled:(null==B?void 0:B.isMentionEnabled)||!1,isReactionEnabled:re,onMessageHeightChange:F}):Zc(E)&&a.a.createElement(mE,{className:"sendbird-message-content__middle__message-item-body",message:E,isByMe:ee,mouseHover:X,isMentionEnabled:(null==B?void 0:B.isMentionEnabled)||!1,isReactionEnabled:re}),iu(E)===H.FILE&&a.a.createElement(bE,{className:"sendbird-message-content__middle__message-item-body",message:E,isByMe:ee,mouseHover:X,isReactionEnabled:re}),nu(E)&&a.a.createElement(wE,{className:"sendbird-message-content__middle__message-item-body",message:E,channelUrl:null!==(f=null==v?void 0:v.url)&&void 0!==f?f:"",isByMe:ee,isReactionEnabled:re}),$c(E)&&a.a.createElement(_E,{className:"sendbird-message-content__middle__message-item-body",message:E,isByMe:ee,mouseHover:X,isReactionEnabled:re,showFileViewer:U,style:W?{width:"100%"}:{}}),iu(E)===H.UNKNOWN&&a.a.createElement(vE,{className:"sendbird-message-content__middle__message-item-body",message:E,isByMe:ee,mouseHover:X,isReactionEnabled:re}),re&&(null==E||null===(p=E.reactions)||void 0===p?void 0:p.length)>0&&a.a.createElement("div",{className:lu(["sendbird-message-content-reactions",!ee||$c(E)||Xc(E)?"":"primary",X?"mouse-hover":""])},a.a.createElement(cE,{userId:g,message:E,channel:v,isByMe:ee,emojiContainer:w,memberNicknamesMap:A,toggleReaction:k})),!ee&&!C&&a.a.createElement(hd,{className:lu(["sendbird-message-content__middle__body-container__created-at","right",ie]),type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},U_((null==E?void 0:E.createdAt)||0,"p",{locale:G}))),ce&&a.a.createElement(NE,{className:"sendbird-message-content__middle__thread-replies",threadInfo:null==E?void 0:E.threadInfo,onClick:()=>null==x?void 0:x({message:E})})),a.a.createElement("div",{className:lu(["sendbird-message-content__right",ne,ae,oe])},!ee&&!W&&a.a.createElement("div",{className:lu(["sendbird-message-content-menu",ne,ie,te])},re&&a.a.createElement(Xv,{className:"sendbird-message-content-menu__reaction-menu",message:E,userId:g,spaceFromTrigger:{},emojiContainer:w,toggleReaction:k,setSupposedHover:J}),a.a.createElement(Yv,{className:"sendbird-message-content-menu__normal-menu",channel:v,message:E,isByMe:ee,replyType:S,disabled:y,showRemove:R,resendMessage:L,setQuoteMessage:D,setSupposedHover:J,onReplyInThread:e=>{let{message:t}=e;if(I===eg.THREAD)x({message:t});else if(I===eg.PARENT){var n;M(null===(n=t.parentMessage)||void 0===n?void 0:n.createdAt,t.parentMessageId)}}}))),Y&&((null==E||null===(m=E.isUserMessage)||void 0===m?void 0:m.call(E))||(null==E||null===(b=E.isFileMessage)||void 0===b?void 0:b.call(E)))&&a.a.createElement(CE,{parentRef:K,channel:v,hideMenu:()=>{Q(!1)},message:E,isReactionEnabled:re,isByMe:ee,userId:g,replyType:S,disabled:y,showRemove:R,emojiContainer:w,resendMessage:L,setQuoteMessage:D,toggleReaction:k,showEdit:j,onReplyInThread:e=>{let{message:t}=e;if(I===eg.THREAD)null==x||x({message:t});else if(I===eg.PARENT){var n;null==M||M((null==t||null===(n=t.parentMessage)||void 0===n?void 0:n.createdAt)||0,(null==t?void 0:t.parentMessageId)||0)}}}))}const jE=e=>{let{profileUrl:t,nickname:n,name:r,type:i,url:s,isByMe:o,onCancel:l,onDelete:c,disableDelete:u}=e;return a.a.createElement("div",{className:"sendbird-fileviewer"},a.a.createElement("div",{className:"sendbird-fileviewer__header"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},a.a.createElement(sb,{height:"32px",width:"32px",src:t})),a.a.createElement(hd,{className:"sendbird-fileviewer__header__left__filename",type:fd.H_2,color:pd.ONBACKGROUND_1},r),a.a.createElement(hd,{className:"sendbird-fileviewer__header__left__sender-name",type:fd.BODY_1,color:pd.ONBACKGROUND_2},n)),a.a.createElement("div",{className:"sendbird-fileviewer__header__right"},Hc(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},a.a.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:s,target:"_blank"},a.a.createElement(Bp,{type:zp.DOWNLOAD,fillColor:Vp.ON_BACKGROUND_1,height:"24px",width:"24px"})),c&&o&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},a.a.createElement(Bp,{className:u?"disabled":"",type:zp.DELETE,fillColor:u?Vp.GRAY:Vp.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:()=>{u||c()}}))),a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},a.a.createElement(Bp,{type:zp.CLOSE,fillColor:Vp.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:l})))),a.a.createElement("div",{className:"sendbird-fileviewer__content"},Pc(i)&&a.a.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},a.a.createElement("source",{src:s,type:i})),xc(i)&&a.a.createElement("img",{src:s,alt:r,className:"sendbird-fileviewer__content__img"}),!Hc(i)&&a.a.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},a.a.createElement(hd,{type:fd.H_1,color:pd.ONBACKGROUND_1},"Unsupoprted message"))))},RE=e=>{var t,n,r;let{onCancel:i,message:s}=e;const{deleteMessage:o}=Ag(),{sender:l,type:c,url:u,name:d="",threadInfo:h}=s,f=(null===(t=ku())||void 0===t||null===(n=t.config)||void 0===n?void 0:n.userId)===(null==s||null===(r=s.sender)||void 0===r?void 0:r.userId),p=(null==h?void 0:h.replyCount)>0,{profileUrl:m,nickname:b=""}=l;return Object(ad.createPortal)(a.a.createElement(jE,{profileUrl:m,nickname:b,type:c,url:u,name:d,onCancel:i,onDelete:()=>{o(s).then(()=>{i()})},isByMe:f,disableDelete:p}),document.getElementById(id))},UE=e=>{var t;const{onSubmit:n=(()=>{}),onCancel:i,message:s}=e,{stringSet:o}=Object(r.useContext)(td),{deleteMessage:l}=Ag();return a.a.createElement(em,{type:Ed.DANGER,disabled:(null==s||null===(t=s.threadInfo)||void 0===t?void 0:t.replyCount)>0,onCancel:i,onSubmit:()=>{l(s).then(()=>{n(),i()})},submitText:o.MESSAGE_MENU__DELETE,titleText:o.MODAL__DELETE_MESSAGE__TITLE})};function LE(e,t){const n=Object(r.useRef)(null);return Object(r.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...a)},t)}}function kE(e){let{hasMore:t,hasNext:n,onScroll:a,scrollRef:i,setShowScrollDownButton:s}=e;return LE(Object(r.useCallback)(()=>{const e=null==i?void 0:i.current;if(null==e)return;const{scrollTop:r,scrollHeight:o,clientHeight:l}=e,c=function(e,t){return e-t}(o,r);"function"==typeof s&&s(o>r+l+1),t&&r<Lu.d&&a(()=>{e.scrollTop=e.scrollHeight-c}),n&&a(()=>{e.scrollTop=r-(o-e.scrollHeight)})},[s,t,a,i]),500)}function DE(e){if(e){const t=e.querySelectorAll("[data-sb-mention='true']");return Array.from(t)}return[]}function xE(e,t){let{ref:n}=e,{logger:a}=t;const i=n.current,[s,o]=Object(r.useState)([]);return Object(r.useLayoutEffect)(()=>{if(i){const e=DE(i);o(e)}},[i]),Object(r.useEffect)(()=>{const e={childList:!0,subtree:!0},t=new MutationObserver(e=>{e.length>0&&o(DE(i))});return i&&(t.observe(i,e),a.info("useDirtyGetMentions: observer started",{observer:t,config:e})),()=>{try{t.disconnect(),a.info("useDirtyGetMentions: observer disconnected",{observer:t})}catch(e){a.error("useDirtyGetMentions: observer disconnect failed",{observer:t})}}},[i]),s}const PE=(e,t)=>{const[n,a]=Object(r.useState)(!1);Object(r.useEffect)(()=>{n?e():a(!0)},t)},FE=e=>{var t,n;let{message:i,hasSeparator:s,chainTop:o,chainBottom:l,handleScroll:c,renderCustomSeparator:u,renderEditInput:d,renderMessage:h,renderMessageContent:f}=e;const{dateLocale:p}=rd(),m=ku(),{userId:b,isOnline:_,isMentionEnabled:g,userMention:v,logger:E}=m.config,y=(null==v?void 0:v.maxMentionCount)||$_,O=(null==v?void 0:v.maxSuggestionCount)||J_,{initialized:C,currentGroupChannel:N,highLightedMessageId:T,setHighLightedMessageId:S,animatedMessageId:I,setAnimatedMessageId:A,updateMessage:w,scrollToMessage:M,replyType:j,threadReplySelectType:R,isReactionEnabled:U,toggleReaction:L,emojiContainer:k,nicknamesMap:D,setQuoteMessage:x,resendMessage:P,renderUserMentionItem:F,onReplyInThread:H,onQuoteMessageClick:G,onMessageAnimated:B,onMessageHighlighted:z,onScrollCallback:V}=Ag(),[q,K]=Object(r.useState)(!1),[W,Y]=Object(r.useState)(!1),[Q,X]=Object(r.useState)(!1),[Z,$]=Object(r.useState)(!1),[J,ee]=Object(r.useState)(!1),[te,ne]=Object(r.useState)(""),[re,ae]=Object(r.useState)([]),[ie,se]=Object(r.useState)([]),[oe,le]=Object(r.useState)(null),[ce,ue]=Object(r.useState)(null),[de,he]=Object(r.useState)([]),fe=Object(r.useRef)(null),pe=Object(r.useRef)(null),me=_&&g&&te.length>0&&!cg(N)&&!ug(N),be=!C||cg(N)||ug(N)||!_,_e=kE({hasMore:!1,onScroll:V,scrollRef:pe}),ge=xE({ref:fe},{logger:E}),ve=(null==ge?void 0:ge.length)<y;Object(r.useEffect)(()=>{ae(re.filter(e=>{let{userId:t}=e;const n=ie.indexOf(t);return!(n<0)&&(ie.splice(n,1),!0)}))},[ie]),Object(r.useLayoutEffect)(()=>{null==c||c()},[]),PE(()=>{null==c||c()},[q,null==i||null===(t=i.reactions)||void 0===t?void 0:t.length]),PE(()=>{null==c||c(!0)},[null==i?void 0:i.updatedAt]),Object(r.useLayoutEffect)(()=>{let e=null,t=null;return T===i.messageId&&null!=pe&&pe.current?(_e(),$(!1),e=setTimeout(()=>{ee(!0)},500),t=setTimeout(()=>{S(0),null==z||z()},1600)):ee(!1),()=>{clearTimeout(e),clearTimeout(t)}},[T,pe.current,i.messageId]),Object(r.useLayoutEffect)(()=>{let e=null,t=null;return I===i.messageId&&null!=pe&&pe.current?(_e(),ee(!1),e=setTimeout(()=>{$(!0)},500),t=setTimeout(()=>{A(0),null==B||B()},1600)):$(!1),()=>{clearTimeout(e),clearTimeout(t)}},[I,pe.current,i.messageId,B]);const Ee=Object(r.useMemo)(()=>null==h?void 0:h({message:i,chainTop:o,chainBottom:l}),[i,h]),ye=Object(r.useMemo)(()=>u?null==u?void 0:u({message:i}):null,[i,u]);return Ee?a.a.createElement("div",{"data-sb-message-id":i.messageId,"data-sb-created-at":i.createdAt,ref:pe,className:lu(["sendbird-msg-hoc sendbird-msg--scroll-ref",Z?"sendbird-msg-hoc__animated":"",J?"sendbird-msg-hoc__highlighted":""])},s&&(ye||a.a.createElement(Sv,null,a.a.createElement(hd,{type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},U_(i.createdAt,"MMMM dd, yyyy",{locale:p})))),Ee):q&&null!=i&&null!==(n=i.isUserMessage)&&void 0!==n&&n.call(i)?(null==d?void 0:d())||a.a.createElement(a.a.Fragment,null,me&&a.a.createElement(Tv,{targetNickname:te,inputEvent:oe,renderUserMentionItem:F,onUserItemClick:e=>{e&&ae([...re,e]),ne(""),ue(e),le(null)},onFocusItemChange:()=>{le(null)},onFetchUsers:e=>{he(e)},ableAddMention:ve,maxMentionCount:y,maxSuggestionCount:O}),a.a.createElement(Kv,{isEdit:!0,channel:N,disabled:be,ref:fe,mentionSelectedUser:ce,isMentionEnabled:g,message:i,onStartTyping:()=>{var e;null==N||null===(e=N.startTyping)||void 0===e||e.call(N)},onUpdateMessage:e=>{var t;let{messageId:n,message:r,mentionTemplate:a}=e;w({messageId:n,message:r,mentionedUsers:re,mentionTemplate:a}),K(!1),null==N||null===(t=N.endTyping)||void 0===t||t.call(N)},onCancelEdit:()=>{var e;ne(""),ae([]),se([]),he([]),K(!1),null==N||null===(e=N.endTyping)||void 0===e||e.call(N)},onUserMentioned:e=>{(null==ce?void 0:ce.userId)===(null==e?void 0:e.userId)&&(ue(null),ne(""))},onMentionStringChange:e=>{ne(e)},onMentionedUserIdsUpdated:e=>{se(e)},onKeyDown:e=>!!(me&&(null==de?void 0:de.length)>0&&(e.key===Zg&&ve||e.key===$g||e.key===Jg))&&(le(e),!0)})):a.a.createElement("div",{className:lu(["sendbird-msg-hoc sendbird-msg--scroll-ref",Z?"sendbird-msg-hoc__animated":"",J?"sendbird-msg-hoc__highlighted":""]),style:{marginBottom:"2px"},"data-sb-message-id":i.messageId,"data-sb-created-at":i.createdAt,ref:pe},s&&(ye||a.a.createElement(Sv,null,a.a.createElement(hd,{type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},U_(i.createdAt,"MMMM dd, yyyy",{locale:p})))),(null==f?void 0:f())||a.a.createElement(ME,{className:"sendbird-message-hoc__message-content",userId:b,scrollToMessage:M,channel:N,message:i,disabled:!_,chainTop:o,chainBottom:l,isReactionEnabled:U,replyType:j,threadReplySelectType:R,nicknamesMap:D,emojiContainer:k,showEdit:K,showRemove:Y,showFileViewer:X,resendMessage:P,toggleReaction:L,setQuoteMessage:x,onReplyInThread:H,onQuoteMessageClick:G,onMessageHeightChange:c}),W&&a.a.createElement(UE,{message:i,onCancel:()=>Y(!1)}),Q&&a.a.createElement(RE,{message:i,onCancel:()=>X(!1)}))},HE=e=>{let{allMessages:t=[],isMessageGroupingEnabled:n=!0,currentIndex:r=0,currentMessage:a=null,currentChannel:i=null,replyType:s=""}=e;const o=t[r-1],l=t[r+1],[c,u]=n?((e,t,n,r,a)=>{if("THREAD"===a&&null!=t&&t.threadInfo)return[!1,!1];const i=(null==t?void 0:t.sendingStatus)||"",s="pending"!==i&&"failed"!==i;return[fg(e,t,r)&&s,fg(t,n,r)&&s]})(o,a,l,i,s):[!1,!1],d=null==o?void 0:o.createdAt,h=a.createdAt;return{chainTop:c,chainBottom:u,hasSeparator:!(d&&x_(h,d))}},GE=e=>{var t,n;let{className:i="",count:s=0,time:o="",onClick:l}=e;const{stringSet:c}=Object(r.useContext)(td),u=(null==o||null===(t=o.toString)||void 0===t||null===(n=t.call(o))||void 0===n?void 0:n.split(" "))||[];return null==u||u.splice(-2,0,c.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),a.a.createElement("div",{className:`sendbird-notification${s<1?"--hide":""} ${i}`,onClick:l},a.a.createElement(hd,{className:"sendbird-notification__text",color:pd.ONCONTENT_1,type:fd.CAPTION_2},s+" ",c.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," "+u.join(" ")),a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.CHEVRON_DOWN,fillColor:Vp.CONTENT}))},BE=e=>{let{className:t=""}=e;const{stringSet:n}=Object(r.useContext)(td);return a.a.createElement("div",{className:"sendbird-notification sendbird-notification--frozen "+t},a.a.createElement(hd,{className:"sendbird-notification__text",type:fd.CAPTION_2},n.CHANNEL_FROZEN))};const zE=e=>{let{className:t="",renderMessage:n,renderPlaceholderEmpty:i,renderCustomSeparator:s,renderPlaceholderLoader:o}=e;const{allMessages:l,hasMorePrev:c,hasMoreNext:u,setInitialTimeStamp:d,setAnimatedMessageId:h,setHighLightedMessageId:f,isMessageGroupingEnabled:p,scrollRef:m,onScrollCallback:b,onScrollDownCallback:_,messagesDispatcher:g,messageActionTypes:v,currentGroupChannel:E,disableMarkAsRead:y,filterMessageList:O,replyType:C,loading:N,unreadSince:T}=Ag(),S=ku(),I="function"==typeof O?l.filter(O):l,A=S.config.markAsReadScheduler;!function(){const{scrollRef:e,scrollBehavior:t="auto"}=Ag();Object(r.useEffect)(()=>{e.current&&(e.current.style.scrollBehavior=t)},[e.current])}();const w=()=>{var e,t,n,r,a;(null==d||d(null),null==h||h(null),null==f||f(null),(null==m||null===(e=m.current)||void 0===e?void 0:e.scrollTop)>-1)&&(m.current.scrollTop=(null!==(t=null==m||null===(n=m.current)||void 0===n?void 0:n.scrollHeight)&&void 0!==t?t:0)-(null!==(r=null==m||null===(a=m.current)||void 0===a?void 0:a.offsetHeight)&&void 0!==r?r:0))},M=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=null==m?void 0:m.current;if(t){const n=t.scrollHeight-t.scrollTop-t.offsetHeight;U<n&&(!e||U<Lu.d)&&(t.scrollTop+=n-U)}},j=kE({hasMore:c,hasNext:u,onScroll:()=>{const e=null==m?void 0:m.current;if(null==e)return;const{scrollTop:t,clientHeight:n,scrollHeight:r}=e;bg(t,0,Lu.d)&&b(e=>{}),bg(n+t,r,Lu.d)&&u&&_(e=>{}),!y&&bg(n+t,r,Lu.d)&&E&&(g({type:v.MARK_AS_READ,payload:{channel:E}}),A.push(E))},scrollRef:m}),{scrollToBottomHandler:R,scrollBottom:U}=function(e){let{loading:t}=e;const[n,a]=Object(r.useState)(0);return Object(r.useEffect)(()=>{t&&a(0)},[t]),{scrollBottom:n,scrollToBottomHandler:LE(e=>{const t=e.target;try{a(t.scrollHeight-t.scrollTop-t.offsetHeight)}catch(e){}},500)}}({loading:N});return N?"function"==typeof o?o():a.a.createElement(qg,{type:Vg.LOADING}):I.length<1?i&&"function"==typeof i?i():a.a.createElement(qg,{className:"sendbird-conversation__no-messages",type:Vg.NO_MESSAGES}):a.a.createElement("div",{className:"sendbird-conversation__messages "+t},a.a.createElement("div",{className:"sendbird-conversation__scroll-container"},a.a.createElement("div",{className:"sendbird-conversation__padding"}),a.a.createElement("div",{className:"sendbird-conversation__messages-padding",ref:m,onScroll:e=>{j(),R(e)}},I.map((e,t)=>{var r,i;const{chainTop:o,chainBottom:l,hasSeparator:c}=HE({allMessages:I,replyType:C,isMessageGroupingEnabled:p,currentIndex:t,currentMessage:e,currentChannel:E}),u=(null==e||null===(r=e.sender)||void 0===r?void 0:r.userId)===(null==S||null===(i=S.config)||void 0===i?void 0:i.userId);return a.a.createElement(rE,{message:e,key:null==e?void 0:e.messageId,isByMe:u},a.a.createElement(FE,{handleScroll:M,renderMessage:n,message:e,hasSeparator:c,chainTop:o,chainBottom:l,renderCustomSeparator:s}))}))),(null==E?void 0:E.isFrozen)&&a.a.createElement(BE,{className:"sendbird-conversation__messages__notification"}),T&&a.a.createElement(GE,{className:"sendbird-conversation__messages__notification",count:null==E?void 0:E.unreadMessageCount,time:T,onClick:()=>{var e,t,n,r,a;null!=m&&null!==(e=m.current)&&void 0!==e&&e.scrollTop&&(m.current.scrollTop=(null!==(t=null==m||null===(n=m.current)||void 0===n?void 0:n.scrollHeight)&&void 0!==t?t:0)-(null!==(r=null==m||null===(a=m.current)||void 0===a?void 0:a.offsetHeight)&&void 0!==r?r:0));!y&&E&&(A.push(E),g({type:v.MARK_AS_READ,payload:{channel:E}})),d(null),h(null),f(null)}}),U>50&&a.a.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:w,onKeyDown:w,tabIndex:0,role:"button"},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.CHEVRON_DOWN,fillColor:Vp.PRIMARY})))},VE="sendbird-quote_message_input__avatar";function qE(e){let{message:t}=e;if(!Yc(t)||nu(t))return null;const n=t.thumbnails&&t.thumbnails.length>0&&t.thumbnails[0].url||Jc(t)&&t.url;return $c(t)&&n?a.a.createElement(tb,{className:VE,url:n,alt:t.type,width:"44px",height:"44px",fixedSize:!0}):(e=>e&&Yc(e)&&Gc(e.type))(t)?a.a.createElement("div",{className:VE},a.a.createElement(Bp,{type:zp.FILE_AUDIO,fillColor:Vp.ON_BACKGROUND_2,width:"24px",height:"24px"})):a.a.createElement("div",{className:VE},a.a.createElement(Bp,{type:zp.FILE_DOCUMENT,fillColor:Vp.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function KE(e){let{className:t,replyingMessage:n,onClose:i}=e;const{stringSet:s}=Object(r.useContext)(td),o=n,l=null==n?void 0:n.sender,c=Yc(n)&&!nu(n);return a.a.createElement("div",{className:lu(["sendbird-quote_message_input",t])},c&&a.a.createElement(qE,{message:o}),a.a.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:`calc(100% - ${c?"164px":"120px"})`,left:c?"92px":"40px"}},a.a.createElement(hd,{className:"sendbird-quote_message_input__body__sender-name",type:fd.CAPTION_1,color:pd.ONBACKGROUND_1},`${s.QUOTE_MESSAGE_INPUT__REPLY_TO} ${l&&l.nickname?l.nickname:s.NO_NAME}`),a.a.createElement(hd,{className:"sendbird-quote_message_input__body__message-content",type:fd.BODY_2,color:pd.ONBACKGROUND_3},Jc(o)&&!tu(o)&&s.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,eu(o)&&s.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,tu(o)&&s.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Wc(n)&&n.message,iu(n)===Uc.FILE&&o.name,nu(n)&&s.VOICE_MESSAGE)),a.a.createElement(Bp,{className:"sendbird-quote_message_input__close-button",type:zp.CLOSE,fillColor:Vp.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:()=>i(n)}))}const WE="PREPARING",YE="READY_TO_RECORD",QE="RECORDING",XE="COMPLETED",ZE=()=>{},$E=e=>{let{onRecordingStarted:t=ZE,onRecordingEnded:n=ZE}=e;const{config:a}=ku(),{voiceRecord:i}=a,{maxRecordingTime:s}=i,o=am(),{isRecordable:l}=o,[c,u]=Object(r.useState)(null),[d,h]=Object(r.useState)(WE);Object(r.useEffect)(()=>{l&&d===WE&&h(YE)},[l]);const f=Object(r.useCallback)(()=>{null==o||o.start({onRecordingStarted:()=>{h(QE),t(),function(){v(),_(0);const e=setInterval(()=>{_(e=>{const t=e+100;return t>s&&v(),t})},100);g=e}()},onRecordingEnded:e=>{h(XE),n(e),u(e),v()}})},[t,n]),p=Object(r.useCallback)(()=>{null==o||o.stop(),v()},[o]),m=Object(r.useCallback)(()=>{p(),u(null)},[o]),[b,_]=Object(r.useState)(0);let g=null;function v(){clearInterval(g),g=null}return Object(r.useEffect)(()=>{b>s&&p()},[b,s,p]),{start:f,stop:p,cancel:m,recordingStatus:d,recordingTime:b,recordedFile:c,recordingLimit:s}},JE="READY_TO_RECORD",ey="RECORDING",ty="READY_TO_PLAY",ny="PLAYING",ry=e=>{let{inputState:t}=e;switch(t){case JE:return a.a.createElement("div",{className:"sendbird-controler-icon record-icon"});case ey:return a.a.createElement("div",{className:"sendbird-controler-icon stop-icon"});case ty:return a.a.createElement(Bp,{className:"sendbird-controler-icon play-icon",width:"20px",height:"20px",type:zp.PLAY,fillColor:Vp.ON_BACKGROUND_1});case ny:return a.a.createElement("div",{className:"sendbird-controler-icon pause-icon"},a.a.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}),a.a.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}));default:return null}},ay=e=>{let{minRecordTime:t=Lu.f,maximumValue:n,currentValue:i=0,currentType:s,onCancelClick:o,onControlClick:l,onSubmitClick:c,renderCancelButton:u,renderControlButton:d,renderSubmitButton:h}=e;const[f,p]=Object(r.useState)(0),m=Object(r.useMemo)(()=>s===JE,[s]),b=Object(r.useMemo)(()=>s===ey,[s]),_=Object(r.useMemo)(()=>(s===JE||s===ey)&&t>i,[s,t,i]),g=Object(r.useMemo)(()=>s===ty||s===ny,[s]),{stringSet:v}=rd(),E=Object(r.useCallback)(()=>{const e=Date.now();e-f>Lu.n&&(l(s),p(e))},[s]);return a.a.createElement("div",{className:"sendbird-voice-message-input"},a.a.createElement("div",{className:"sendbird-voice-message-input__indicator"},a.a.createElement("div",{className:"sendbird-voice-message-input__indicator__progress-bar"},a.a.createElement(SE,{className:"sendbird-voice-message-input__indicator__progress-bar__bar",disabled:m,maxSize:n,currentSize:i})),b?a.a.createElement("div",{className:"sendbird-voice-message-input__indicator__on-rec"}):null,a.a.createElement(AE,{className:"sendbird-voice-message-input__indicator__playback-time",time:g?n-i:i,labelColor:m?pd.ONBACKGROUND_4:pd.ONCONTENT_1})),a.a.createElement("div",{className:"sendbird-voice-message-input__controler"},(null==u?void 0:u())||a.a.createElement(Z_,{className:"sendbird-voice-message-input__controler__cancel",onClick:()=>{const e=Date.now();e-f>Lu.n&&(o(),p(e))},disableUnderline:!0},a.a.createElement(hd,{type:fd.BUTTON_1,color:pd.PRIMARY},v.BUTTON__CANCEL)),(null==d?void 0:d(s))||a.a.createElement("div",{className:"sendbird-voice-message-input__controler__main",onClick:E},a.a.createElement(ry,{inputState:s})),(null==h?void 0:h())||a.a.createElement("div",{className:"sendbird-voice-message-input__controler__submit "+(_?"voice-message--disabled":""),onClick:()=>{const e=Date.now();e-f>Lu.n&&(_||c(),p(e))}},a.a.createElement(Bp,{width:"19px",height:"19px",type:zp.SEND,fillColor:_?Vp.ON_BACKGROUND_4:Vp.CONTENT}))))},iy=e=>{var t;let{channel:n,onCancelClick:i,onSubmitClick:s}=e;const o=Object(r.useRef)(es()).current,[l,c]=Object(r.useState)(null),[u,d]=Object(r.useState)(JE),[h,f]=Object(r.useState)(!1),[p,m]=Object(r.useState)(!1),[b,_]=Object(r.useState)(!1),{stringSet:g}=rd(),{config:v}=ku(),E=(null==v||null===(t=v.voiceRecord)||void 0===t?void 0:t.minRecordingTime)||Lu.f,{start:y,stop:O,cancel:C,recordingTime:N,recordingStatus:T,recordingLimit:S}=$E({onRecordingStarted:()=>{d(ey)},onRecordingEnded:e=>{c(e)}}),I=IE({channelUrl:null==n?void 0:n.url,key:o,audioFile:l}),{play:A,pause:w,playbackTime:M,playingStatus:j}=I,R=I.stop;return Object(r.useEffect)(()=>{cg(n)||ug(n)?m(!0):m(!1)},[null==n?void 0:n.myRole,null==n?void 0:n.isFrozen,null==n?void 0:n.myMutedState]),Object(r.useEffect)(()=>{h&&l&&(s(l,N),f(!1),c(null))},[h,l,N]),Object(r.useEffect)(()=>{l&&(N<E?(d(JE),c(null)):j===Du.PLAYING?d(ny):d(ty))},[l,N,j]),a.a.createElement("div",{className:"sendbird-voice-message-input-wrapper"},a.a.createElement(ay,{currentValue:T===XE?M:N,maximumValue:T===XE?N:S,currentType:u,onCancelClick:()=>{i(),C(),R()},onSubmitClick:()=>{p?(_(!0),d(JE)):(O(),w(),f(!0))},onControlClick:e=>{switch(e){case JE:R(),y();break;case ey:N>=E&&!p?O():p?(C(),_(!0),d(JE)):(C(),d(JE));break;case ty:A();break;case ny:w()}}}),b&&a.a.createElement(em,{className:"sendbird-voice-message-input-wrapper-alert",titleText:ug(n)?g.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:g.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,hideFooter:!0,isCloseOnClickOutside:!0,onCancel:()=>{_(!1),i()}},a.a.createElement("div",{className:"sendbird-voice-message-input-wrapper-alert__body"},a.a.createElement(Od,{className:"sendbird-voice-message-input-wrapper-alert__body__ok-button",type:Ed.PRIMARY,size:yd.BIG,onClick:()=>{_(!1),i()}},g.BUTTON__OK))))},sy=(e,t)=>{const{value:n,renderFileUploadIcon:i,renderVoiceMessageIcon:s,renderSendMessageIcon:o}=e,l=e.disabled,{currentGroupChannel:c,initialized:u,quoteMessage:d,sendMessage:h,sendFileMessage:f,sendVoiceMessage:p,setQuoteMessage:m,messageInputRef:b,renderUserMentionItem:_}=Ag(),g=ku(),{isMobile:v}=Xp(),E=c,{isOnline:y,isMentionEnabled:O,userMention:C,isVoiceMessageEnabled:N,logger:T}=g.config,S=(null==C?void 0:C.maxMentionCount)||10,I=(null==C?void 0:C.maxSuggestionCount)||15,{stringSet:A}=Object(r.useContext)(td),[w,M]=Object(r.useState)(""),[j,R]=Object(r.useState)([]),[U,L]=Object(r.useState)([]),[k,D]=Object(r.useState)(null),[x,P]=Object(r.useState)([]),[F,H]=Object(r.useState)(null),[G,B]=Object(r.useState)(!1),z=l||!u||cg(E)||ug(E)||!y,V=lg(E),q=null==E?void 0:E.isBroadcast,K=y&&O&&w.length>0&&!cg(E)&&!ug(E)&&!q;Object(r.useEffect)(()=>{M(""),R([]),L([]),D(null),P([]),H(null),B(!1)},[null==E?void 0:E.url]);const W=xE({ref:t||b},{logger:T}),Y=(null==W?void 0:W.length)<S;return Object(r.useEffect)(()=>{R(j.filter(e=>{let{userId:t}=e;const n=U.indexOf(t);return!(n<0)&&(U.splice(n,1),!0)}))},[U]),q&&!V?null:a.a.createElement("div",{className:"sendbird-message-input-wrapper"+(G?"--voice-message":"")},K&&a.a.createElement(Tv,{targetNickname:w,inputEvent:F,renderUserMentionItem:_,onUserItemClick:e=>{e&&R([...j,e]),M(""),D(e),H(null)},onFocusItemChange:()=>{H(null)},onFetchUsers:e=>{P(e)},ableAddMention:Y,maxMentionCount:S,maxSuggestionCount:I}),d&&a.a.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},a.a.createElement(KE,{replyingMessage:d,onClose:()=>m(null)})),G?a.a.createElement(iy,{channel:E,onSubmitClick:(e,t)=>{p(e,t,d),m(null),B(!1)},onCancelClick:()=>{B(!1)}}):a.a.createElement(Kv,{className:"sendbird-message-input-wrapper__message-input",value:n,channelUrl:null==E?void 0:E.url,mentionSelectedUser:k,isMentionEnabled:O,isVoiceMessageEnabled:N,onVoiceMessageIconClick:()=>{B(!0)},setMentionedUsers:R,channel:E,placeholder:d&&A.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||cg(E)&&A.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||ug(E)&&(v?A.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:A.MESSAGE_INPUT__PLACE_HOLDER__MUTED),ref:t||b,disabled:z,renderFileUploadIcon:i,renderSendMessageIcon:o,renderVoiceMessageIcon:s,onStartTyping:()=>{null==E||E.startTyping()},onSendMessage:e=>{var t;let{message:n,mentionTemplate:r}=e;h({message:n,quoteMessage:d,mentionedUsers:j,mentionTemplate:r}),M(""),R([]),m(null),null==E||null===(t=E.endTyping)||void 0===t||t.call(E)},onFileUpload:e=>{f(e,d),m(null)},onUserMentioned:e=>{(null==k?void 0:k.userId)===(null==e?void 0:e.userId)&&(D(null),M(""))},onMentionStringChange:e=>{M(e)},onMentionedUserIdsUpdated:e=>{L(e)},onKeyDown:e=>!!(K&&(null==x?void 0:x.length)>0&&(e.key===Zg&&Y||e.key===$g||e.key===Jg))&&(H(e),!0)}))};var oy=a.a.forwardRef(sy);const ly=e=>{var t,n,r,i,s,o;let{isLoading:l,renderPlaceholderLoader:c,renderPlaceholderInvalid:u,renderPlaceholderEmpty:d,renderChannelHeader:h,renderMessage:f,renderMessageInput:p,renderTypingIndicator:m,renderCustomSeparator:b,renderFileUploadIcon:_,renderVoiceMessageIcon:g,renderSendMessageIcon:v}=e;const{channelUrl:E,isInvalid:y}=Ag(),O=ku(),C=null==O||null===(t=O.stores)||void 0===t||null===(n=t.sdkStore)||void 0===n?void 0:n.error,N=null==O||null===(r=O.config)||void 0===r?void 0:r.logger,T=null==O||null===(i=O.config)||void 0===i?void 0:i.isOnline;return l?a.a.createElement("div",{className:"sendbird-conversation"},(null==c?void 0:c())||a.a.createElement(qg,{type:Vg.LOADING})):E?y?a.a.createElement("div",{className:"sendbird-conversation"},(null==u?void 0:u())||a.a.createElement(qg,{type:Vg.WRONG})):C?a.a.createElement("div",{className:"sendbird-conversation"},(null==u?void 0:u())||a.a.createElement(qg,{type:Vg.WRONG,retryToConnect:()=>{N.info("Channel: reconnecting")}})):a.a.createElement("div",{className:"sendbird-conversation"},(null==h?void 0:h())||a.a.createElement(Xg,{className:"sendbird-conversation__channel-header"}),a.a.createElement(zE,{className:"sendbird-conversation__message-list",renderMessage:f,renderPlaceholderEmpty:d,renderCustomSeparator:b,renderPlaceholderLoader:c}),a.a.createElement("div",{className:"sendbird-conversation__footer"},(null==p?void 0:p())||a.a.createElement(oy,{renderFileUploadIcon:_,renderVoiceMessageIcon:g,renderSendMessageIcon:v}),a.a.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},(null==m?void 0:m())||(null==O||null===(s=O.config)||void 0===s||null===(o=s.groupChannel)||void 0===o?void 0:o.enableTypingIndicator)&&a.a.createElement(Mg,null),!T&&a.a.createElement(Yg,null)))):a.a.createElement("div",{className:"sendbird-conversation"},(null==u?void 0:u())||a.a.createElement(qg,{type:Vg.NO_CHANNELS}))},cy=e=>a.a.createElement(Ig,{channelUrl:null==e?void 0:e.channelUrl,isReactionEnabled:null==e?void 0:e.isReactionEnabled,isMessageGroupingEnabled:null==e?void 0:e.isMessageGroupingEnabled,showSearchIcon:null==e?void 0:e.showSearchIcon,animatedMessage:null==e?void 0:e.animatedMessage,highlightedMessage:null==e?void 0:e.highlightedMessage,startingPoint:null==e?void 0:e.startingPoint,onBeforeSendUserMessage:null==e?void 0:e.onBeforeSendUserMessage,onBeforeSendFileMessage:null==e?void 0:e.onBeforeSendFileMessage,onBeforeUpdateUserMessage:null==e?void 0:e.onBeforeUpdateUserMessage,onChatHeaderActionClick:null==e?void 0:e.onChatHeaderActionClick,onSearchClick:null==e?void 0:e.onSearchClick,onBackClick:null==e?void 0:e.onBackClick,replyType:null==e?void 0:e.replyType,threadReplySelectType:null==e?void 0:e.threadReplySelectType,queries:null==e?void 0:e.queries,renderUserProfile:null==e?void 0:e.renderUserProfile,filterMessageList:null==e?void 0:e.filterMessageList,disableUserProfile:null==e?void 0:e.disableUserProfile,disableMarkAsRead:null==e?void 0:e.disableMarkAsRead,onReplyInThread:null==e?void 0:e.onReplyInThread,onQuoteMessageClick:null==e?void 0:e.onQuoteMessageClick,onMessageAnimated:null==e?void 0:e.onMessageAnimated,onMessageHighlighted:null==e?void 0:e.onMessageHighlighted,scrollBehavior:e.scrollBehavior,reconnectOnIdle:e.reconnectOnIdle},a.a.createElement(ly,{isLoading:null==e?void 0:e.isLoading,renderPlaceholderLoader:null==e?void 0:e.renderPlaceholderLoader,renderPlaceholderInvalid:null==e?void 0:e.renderPlaceholderInvalid,renderPlaceholderEmpty:null==e?void 0:e.renderPlaceholderEmpty,renderChannelHeader:null==e?void 0:e.renderChannelHeader,renderMessage:null==e?void 0:e.renderMessage,renderMessageInput:null==e?void 0:e.renderMessageInput,renderTypingIndicator:null==e?void 0:e.renderTypingIndicator,renderCustomSeparator:null==e?void 0:e.renderCustomSeparator,renderFileUploadIcon:null==e?void 0:e.renderFileUploadIcon,renderVoiceMessageIcon:null==e?void 0:e.renderVoiceMessageIcon,renderSendMessageIcon:null==e?void 0:e.renderSendMessageIcon})),uy=a.a.createContext(void 0),dy=e=>{var t;const{children:n,className:i,channelUrl:s,onCloseClick:o,onLeaveChannel:l,onChannelModified:c,overrideInviteUser:u,onBeforeUpdateChannel:d,queries:h}=e,f=ku(),{config:p,stores:m}=f,{sdkStore:b}=m,{logger:_,onUserProfileMessage:g}=p,{initialized:v}=b,E=null==b?void 0:b.sdk,[y,O]=Object(r.useState)(es()),[C,N]=Object(r.useState)(null),[T,S]=Object(r.useState)(!1);return Object(r.useEffect)(()=>{if(_.info("ChannelSettings: Setting up"),s&&v&&E){if(!E||!E.groupChannel)return void _.warning("ChannelSettings: No GroupChannel");E.groupChannel.getChannel(s).then(e=>{e?(_.info("ChannelSettings: Fetched group channel",e),S(!1),N(e)):(_.warning("ChannelSettings: Channel not found"),S(!0))})}else _.warning("ChannelSettings: Setting up failed","No channelUrl or sdk uninitialized"),S(!1)},[s,v,y]),a.a.createElement(uy.Provider,{value:{channelUrl:s,onCloseClick:o,onLeaveChannel:l,onChannelModified:c,onBeforeUpdateChannel:d,queries:h,overrideInviteUser:u,setChannelUpdateId:O,forceUpdateUI:()=>{O(es())},channel:C,invalidChannel:T}},a.a.createElement(Km,{renderUserProfile:null==e?void 0:e.renderUserProfile,disableUserProfile:null!==(t=null==e?void 0:e.disableUserProfile)&&void 0!==t?t:null==p?void 0:p.disableUserProfile,onUserProfileMessage:g},a.a.createElement("div",{className:"sendbird-channel-settings "+i},n)))},hy=()=>a.a.useContext(uy),fy=e=>{var t,n,i;const{onSubmit:s,onCancel:o}=e,{channel:l,onChannelModified:c,onBeforeUpdateChannel:u,setChannelUpdateId:d}=hy(),h=null==l?void 0:l.name,f=ku(),p=null==f||null===(t=f.config)||void 0===t?void 0:t.userId,m=null==f||null===(n=f.config)||void 0===n?void 0:n.theme,b=null==f||null===(i=f.config)||void 0===i?void 0:i.logger,_=Object(r.useRef)(null),g=Object(r.useRef)(null),v=Object(r.useRef)(null),[E,y]=Object(r.useState)(null),[O,C]=Object(r.useState)(null),{stringSet:N}=Object(r.useContext)(td);return a.a.createElement(em,{isFullScreenOnMobile:!0,titleText:N.MODAL__CHANNEL_INFORMATION__TITLE,submitText:N.BUTTON__SAVE,onCancel:o,onSubmit:()=>{if(""!==h&&!_.current.value)return void(g.current.reportValidity&&g.current.reportValidity());const e=_.current.value,t=O;if(b.info("ChannelSettings: Channel information being updated",{currentTitle:e,currentImg:t}),u){b.info("ChannelSettings: onBeforeUpdateChannel");const n=u(e,t,null==l?void 0:l.data);null==l||l.updateChannel(n).then(e=>{null==c||c(e),d(es()),s()})}else b.info("ChannelSettings: normal"),null==l||l.updateChannel({coverImage:t,name:e,data:(null==l?void 0:l.data)||""}).then(e=>{b.info("ChannelSettings: Channel information updated",e),null==c||c(e),d(es()),s()})},type:Ed.PRIMARY},a.a.createElement("form",{className:"channel-profile-form",ref:g,onSubmit:e=>{e.preventDefault()}},a.a.createElement("div",{className:"channel-profile-form__img-section"},a.a.createElement(xg,null,N.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),a.a.createElement("div",{className:"channel-profile-form__avatar"},E?a.a.createElement(sb,{height:"80px",width:"80px",src:E}):a.a.createElement(kb,{height:80,width:80,channel:l,userId:p,theme:m})),a.a.createElement("input",{ref:v,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:e=>{y(URL.createObjectURL(e.target.files[0])),C(e.target.files[0]),v.current.value=""}}),a.a.createElement(Z_,{className:"channel-profile-form__avatar-button",onClick:()=>v.current.click(),disableUnderline:!0},a.a.createElement(hd,{type:fd.BUTTON_1,color:pd.PRIMARY},N.MODAL__CHANNEL_INFORMATION__UPLOAD))),a.a.createElement("div",{className:"channel-profile-form__name-section"},a.a.createElement(xg,null,N.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),a.a.createElement(Pg,{required:""!==h,name:"channel-profile-form__name",ref:_,value:h,placeHolder:N.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER}))))},py=()=>{var e,t,n;const i=ku(),s=hy(),{stringSet:o}=Object(r.useContext)(td),[l,c]=Object(r.useState)(!1),u=null==i||null===(e=i.config)||void 0===e?void 0:e.userId,d=(null==i||null===(t=i.config)||void 0===t?void 0:t.theme)||"light",h=!(null==i||null===(n=i.config)||void 0===n?void 0:n.isOnline),{channel:f}=s;return a.a.createElement("div",{className:"sendbird-channel-profile"},a.a.createElement("div",{className:"sendbird-channel-profile--inner"},a.a.createElement("div",{className:"sendbird-channel-profile__avatar"},a.a.createElement(kb,{channel:f,userId:u,theme:d,width:80,height:80})),a.a.createElement(hd,{className:"sendbird-channel-profile__title",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_1},null!=f&&f.name&&"Group Channel"!==(null==f?void 0:f.name)?f.name:"Group Channel"!==(null==f?void 0:f.name)&&null!=f&&f.name?o.NO_TITLE:((null==f?void 0:f.members)||[]).map(e=>e.nickname||o.NO_NAME).join(", ")),a.a.createElement(Z_,{disabled:h,className:"sendbird-channel-profile__edit",onClick:()=>{h||c(!0)},disableUnderline:!0},a.a.createElement(hd,{type:fd.BUTTON_1,color:h?pd.ONBACKGROUND_2:pd.PRIMARY},o.CHANNEL_SETTING__PROFILE__EDIT)),l&&a.a.createElement(fy,{onCancel:()=>c(!1),onSubmit:()=>c(!1)})))},my=a.a.createContext({opened:"",setOpened:Vm}),by=my.Consumer,_y=my.Provider;function gy(e){let{className:t,id:n,renderTitle:i,renderContent:s,renderFooter:o}=e;const[l,c]=Object(r.useState)(!1);return a.a.createElement(by,null,e=>{const{opened:r,setOpened:u}=e;c(n===r);const d=()=>{u(l?"":n)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-accordion__panel-header"].join(" "),id:n,role:"switch","aria-checked":!1,onClick:d,onKeyDown:d,tabIndex:0},i(),a.a.createElement(Bp,{type:zp.CHEVRON_RIGHT,className:["sendbird-accordion__panel-icon-right","sendbird-accordion__panel-icon--chevron",l?"sendbird-accordion__panel-icon--open":""].join(" "),height:"24px",width:"24px"})),l&&a.a.createElement("div",{className:"sendbird-accordion"},a.a.createElement("div",{className:"sendbird-accordion__list"},s()),o&&a.a.createElement("div",{className:"sendbird-accordion__footer"},o())))})}const vy=function(e){let{children:t,className:n=""}=e;const[i,s]=Object(r.useState)("");return a.a.createElement(_y,{value:{opened:i,setOpened:s}},a.a.createElement("div",{className:n},t))},Ey=()=>{},yy={checked:null,defaultChecked:!1,disabled:!1,onChange:Ey,onFocus:Ey,onBlur:Ey},Oy=a.a.createContext(yy);function Cy(e){let{checked:t=yy.checked,defaultChecked:n=yy.defaultChecked,disabled:i=yy.disabled,onChange:s=yy.onChange,onFocus:o=yy.onFocus,onBlur:l=yy.onBlur,children:c}=e;const[u,d]=Object(r.useState)(n||!1),h=Object(r.useCallback)(e=>{i||(null===t&&d(e.currentTarget.checked),s(e))},[s,t]);return a.a.createElement(Oy.Provider,{value:{checked:null!==t?t:u,disabled:i,onChange:h,onFocus:e=>{i||o(e)},onBlur:e=>{i||l(e)}}},c)}function Ny(e){var t;const{reversed:n=!1,width:i="40px",animationDuration:o="0.5s",style:l={},name:c="",id:u="",ariaLabel:d="",ariaLabelledby:h=""}=e,{checked:f,disabled:p,onChange:m,onFocus:b,onBlur:_}=function(){const e=a.a.useContext(Oy);if(void 0===e)throw new Error("@sendbird/uikit-react/ui/Toggle: useToggleContext must be used within a ToggleContainer.");return e}(),[g,v]=Object(r.useState)(""),E=null===(t=function(e){if("string"!=typeof e&&"number"!=typeof e){try{const{config:t}=ku(),{logger:n}=t;n.warning("@sendbird/uikit-react/ui/Toggle: TypeError - expected string or number.",e)}catch(e){}return[]}return"number"==typeof e?[e]:(e.match(/(-?\d+)(\.\d+)?/g)||[]).map(parseFloat)}(i))||void 0===t?void 0:t[0],y=E/2,O=.6*y;return a.a.createElement("label",{className:["sendbird-input-toggle-button",g,f?"sendbird-input-toggle-button--checked":"sendbird-input-toggle-button--unchecked",p?"sendbird-input-toggle-button--disabled":[],n?"sendbird-input-toggle-button--reversed":[]].flat().join(" "),style:s({width:E+"px",height:y+"px",borderRadius:O+"px"},l)},a.a.createElement("div",{className:["sendbird-input-toggle-button__inner-dot",f?"sendbird-input-toggle-button__inner-dot--activate":"sendbird-input-toggle-button__inner-dot--inactivate"].join(" "),style:{width:O+"px",height:O+"px",animationDuration:o}}),a.a.createElement("input",{type:"checkbox","aria-label":d,"aria-labelledby":h,name:c,id:u,checked:f,disabled:p,onChange:e=>{m(e),v(e.currentTarget.checked?"sendbird-input-toggle-button--turned-on":"sendbird-input-toggle-button--turned-off")},onFocus:b,onBlur:_}))}function Ty(e){const{checked:t,defaultChecked:n,disabled:r,onChange:i,onFocus:s,onBlur:o,className:l,reversed:c,width:u,animationDuration:d,style:h,name:f,id:p,ariaLabel:m,ariaLabelledby:b}=e;return a.a.createElement("div",{className:"sendbird-ui-toggle "+l},a.a.createElement(Cy,{checked:t,defaultChecked:n,disabled:r,onChange:i,onFocus:s,onBlur:o},a.a.createElement(Ny,{reversed:c,width:u,animationDuration:d,style:h,name:f,id:p,ariaLabel:m,ariaLabelledby:b})))}const Sy=e=>{let{user:t,className:n,currentUser:i,action:s}=e;const o=Object(r.useRef)(null),l=Object(r.useRef)(null),c=Object(r.useRef)(null),{stringSet:u}=Object(r.useContext)(td),{disableUserProfile:d,renderUserProfile:h}=Object(r.useContext)(qm),f=Array.isArray(n)?n:[n];return a.a.createElement("div",{ref:l,className:["sendbird-user-list-item--small",...f].join(" ")},a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(sb,{onClick:()=>{d||e()},ref:c,className:"sendbird-user-list-item--small__avatar",src:t.profileUrl,width:24,height:24}),t.isMuted&&a.a.createElement(mb,null)),menuItems:e=>a.a.createElement(Ob,{openLeft:!0,parentRef:c,parentContainRef:c,closeDropdown:e,style:{paddingTop:"0px",paddingBottom:"0px"}},h?h({user:t,currentUserId:i,close:e}):a.a.createElement(_b,{user:t,currentUserId:i,onSuccess:e}))}),a.a.createElement(hd,{className:"sendbird-user-list-item--small__title",type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},t.nickname||u.NO_NAME,i===t.userId&&u.CHANNEL_SETTING__MEMBERS__YOU),!t.nickname&&a.a.createElement(hd,{className:"sendbird-user-list-item--small__subtitle",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},t.userId),"operator"===t.role&&a.a.createElement(hd,{className:"sendbird-user-list-item--small__operator",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_2},u.CHANNEL_SETTING__MEMBERS__OPERATOR),s&&a.a.createElement("div",{ref:o,className:"sendbird-user-list-item--small__action"},s({actionRef:o,parentRef:l})))};function Iy(e){var t;let{onCancel:n}=e;const[i,o]=Object(r.useState)([]),[l,c]=Object(r.useState)(null),{channel:u}=hy(),d=ku(),h=null==d||null===(t=d.config)||void 0===t?void 0:t.userId,{stringSet:f}=Object(r.useContext)(td);return Object(r.useEffect)(()=>{const e=null==u?void 0:u.createMemberListQuery({limit:20});e.next().then(e=>{o(e)}),c(e)},[]),a.a.createElement("div",null,a.a.createElement(em,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:()=>n(),onSubmit:Vm,titleText:f.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:e=>{const{hasNext:t}=l,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&l.next().then(e=>{o([...i,...e])})}},i.map(e=>a.a.createElement(Sb,{user:e,key:e.userId,currentUser:h,action:t=>{let{parentRef:n,actionRef:r}=t;return a.a.createElement(a.a.Fragment,null,"operator"===(null==u?void 0:u.myRole)&&a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:()=>{e()}},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{parentContainRef:n,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(Nb,{disable:h===e.userId,onClick:()=>{"operator"!==e.role?null==u||u.addOperators([e.userId]).then(()=>{o(i.map(t=>t.userId===e.userId?s(s({},e),{},{role:"operator"}):t)),t()}):null==u||u.removeOperators([e.userId]).then(()=>{o(i.map(t=>t.userId===e.userId?s(s({},e),{},{role:""}):t)),t()})},dataSbId:"channel_setting_member_context_menu_"+("operator"!==e.role?"register_as_operator":"unregister_operator")},"operator"!==e.role?f.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:f.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),!(null!=u&&u.isBroadcast)&&a.a.createElement(Nb,{onClick:()=>{e.isMuted?null==u||u.unmuteUser(e).then(()=>{o(i.map(t=>t.userId===e.userId?s(s({},e),{},{isMuted:!1}):t)),t()}):null==u||u.muteUser(e).then(()=>{o(i.map(t=>t.userId===e.userId?s(s({},e),{},{isMuted:!0}):t)),t()})},dataSbId:"channel_setting_member_context_menu_"+(e.isMuted?"unmute":"mute")},e.isMuted?f.CHANNEL_SETTING__MODERATION__UNMUTE:f.CHANNEL_SETTING__MODERATION__MUTE),a.a.createElement(Nb,{onClick:()=>{null==u||u.banUser(e,-1,"").then(()=>{o(i.filter(t=>{let{userId:n}=t;return n!==e.userId}))})},dataSbId:"channel_setting_member_context_menu_ban"},f.CHANNEL_SETTING__MODERATION__BAN))}))}})))))}function Ay(e){var t,n,i;let{onCancel:o,onSubmit:l}=e;const[c,u]=Object(r.useState)([]),[d,h]=Object(r.useState)({}),[f,p]=Object(r.useState)(null),m=ku(),b=null==m||null===(t=m.stores)||void 0===t||null===(n=t.sdkStore)||void 0===n?void 0:n.sdk,_=null==m||null===(i=m.config)||void 0===i?void 0:i.userListQuery,{channel:g,overrideInviteUser:v,queries:E}=hy(),y=s({},null==E?void 0:E.applicationUserListQuery),{stringSet:O}=rd();return Object(r.useEffect)(()=>{const e=_?_():null==b?void 0:b.createApplicationUserListQuery(y);null!=e&&e.next&&(e.next().then(e=>{u(e)}),p(e))},[b]),a.a.createElement("div",null,a.a.createElement(em,{isFullScreenOnMobile:!0,disabled:0===Object.keys(d).length,submitText:O.BUTTON__INVITE,type:Ed.PRIMARY,onCancel:()=>o(),onSubmit:()=>{const e=Object.keys(d).filter(e=>d[e]);"function"!=typeof v?null==g||g.inviteWithUserIds(e).then(()=>{l(e)}):v({users:e,onClose:o,channel:g})},titleText:O.CHANNEL_SETTING__MEMBERS__SELECT_TITLE},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:e=>{const{hasNext:t}=f,n=e.target,r=(a=n.clientHeight+n.scrollTop,i=n.scrollHeight,s=20,Math.abs(a-i)<=s);var a,i,s;t&&r&&f.next().then(e=>{u([...c,...e])})}},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll__inner"},c.map(e=>{var t;const n=null==g||null===(t=g.members)||void 0===t?void 0:t.some(t=>{let{userId:n}=t;return n===(null==e?void 0:e.userId)});return a.a.createElement(Sb,{checkBox:!0,checked:n||d[e.userId],disabled:n,onChange:e=>{const t=s(s({},d),{},{[e.target.id]:e.target.checked});e.target.checked||delete t[e.target.id],h(t)},user:e,key:e.userId})})))))}const wy=()=>{var e,t,n;const[i,s]=Object(r.useState)([]),[o,l]=Object(r.useState)(!1),[c,u]=Object(r.useState)(!1),[d,h]=Object(r.useState)(!1),f=ku(),{channel:p,setChannelUpdateId:m}=hy(),{stringSet:b}=Object(r.useContext)(td),_=null==f||null===(e=f.stores)||void 0===e||null===(t=e.sdkStore)||void 0===t?void 0:t.sdk,g=null==f||null===(n=f.config)||void 0===n?void 0:n.userId;Object(r.useEffect)(()=>{if(!p)return void s([]);const e=null==p?void 0:p.createMemberListQuery({limit:10});e.next().then(t=>{s(t),l(e.hasNext)})},[p]);const v=Object(r.useCallback)(()=>{if(!p)return void s([]);const e=null==p?void 0:p.createMemberListQuery({limit:10});e.next().then(t=>{s(t),l(e.hasNext),m(es())})},[p]);return a.a.createElement("div",{className:"sendbird-channel-settings-member-list sendbird-accordion"},i.map(e=>a.a.createElement(Sy,{key:e.userId,user:e,currentUser:_.currentUser.userId,action:"operator"===(null==p?void 0:p.myRole)&&g!==e.userId?t=>{let{actionRef:n,parentRef:r}=t;return a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{parentContainRef:r,parentRef:n,closeDropdown:t,openLeft:!0},a.a.createElement(Nb,{onClick:()=>{"operator"!==e.role?null==p||p.addOperators([e.userId]).then(()=>{v(),t()}):null==p||p.removeOperators([e.userId]).then(()=>{v(),t()})},dataSbId:"channel_setting_member_context_menu_"+("operator"!==e.role?"register_as_operator":"unregister_operator")},"operator"!==e.role?b.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:b.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),!(null!=p&&p.isBroadcast)&&a.a.createElement(Nb,{onClick:()=>{e.isMuted?null==p||p.unmuteUser(e).then(()=>{v(),t()}):null==p||p.muteUser(e).then(()=>{v(),t()})},dataSbId:"channel_setting_member_context_menu_"+(e.isMuted?"unmute":"mute")},e.isMuted?b.CHANNEL_SETTING__MODERATION__UNMUTE:b.CHANNEL_SETTING__MODERATION__MUTE),a.a.createElement(Nb,{onClick:()=>{null==p||p.banUser(e,-1,"").then(()=>{v(),t()})},dataSbId:"channel_setting_member_context_menu_ban"},b.CHANNEL_SETTING__MODERATION__BAN))})}:null})),a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},o&&a.a.createElement(Od,{type:Ed.SECONDARY,size:yd.SMALL,onClick:()=>u(!0)},b.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS),a.a.createElement(Od,{type:Ed.SECONDARY,size:yd.SMALL,onClick:()=>h(!0)},b.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER)),c&&a.a.createElement(Iy,{onCancel:()=>{u(!1),v()}}),d&&a.a.createElement(Ay,{onSubmit:()=>{h(!1),v()},onCancel:()=>h(!1)}))};function My(e){var t;let{onCancel:n}=e;const[i,s]=Object(r.useState)([]),[o,l]=Object(r.useState)(null),{channel:c}=hy(),u=ku(),d=null==u||null===(t=u.config)||void 0===t?void 0:t.userId,{stringSet:h}=Object(r.useContext)(td);return Object(r.useEffect)(()=>{const e=null==c?void 0:c.createOperatorListQuery({limit:20});e.next().then(e=>{s(e)}),l(e)},[]),a.a.createElement("div",null,a.a.createElement(em,{isFullScreenOnMobile:!0,hideFooter:!0,titleText:h.CHANNEL_SETTING__OPERATORS__TITLE_ALL,onCancel:n},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:e=>{const{hasNext:t}=o,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&o.next().then(e=>{s([...i,...e])})}},i.map(e=>a.a.createElement(Sb,{currentUser:d,user:e,key:e.userId,action:t=>{let{parentRef:n,actionRef:r}=t;return(null==e?void 0:e.userId)!==d&&a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{parentContainRef:n,parentRef:r,closeDropdown:t,openLeft:!0},a.a.createElement(Nb,{onClick:()=>{null==c||c.removeOperators([e.userId]).then(()=>{s(i.filter(t=>{let{userId:n}=t;return n!==e.userId}))}),t()},dataSbId:"channel_setting_operator_context_menu_unregister_unregister_operator"},h.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))})}})))))}function jy(e){let{onCancel:t,onSubmit:n}=e;const[i,o]=Object(r.useState)([]),[l,c]=Object(r.useState)({}),[u,d]=Object(r.useState)(null),{stringSet:h}=Object(r.useContext)(td),{channel:f}=hy();Object(r.useEffect)(()=>{const e=null==f?void 0:f.createMemberListQuery({operatorFilter:Vs.NONOPERATOR,limit:20});e.next().then(e=>{o(e)}),d(e)},[]);const p=Object.keys(l).filter(e=>l[e]).length;return a.a.createElement("div",null,a.a.createElement(em,{isFullScreenOnMobile:!0,type:Ed.PRIMARY,submitText:h.CHANNEL_SETTING__OPERATORS__ADD_BUTTON,onCancel:t,onSubmit:()=>{const e=Object.keys(l).filter(e=>l[e]);null==f||f.addOperators(e).then(()=>{n(e)})},titleText:h.CHANNEL_SETTING__MEMBERS__SELECT_TITLE},a.a.createElement(hd,{color:p>0?pd.PRIMARY:pd.ONBACKGROUND_3,type:fd.CAPTION_1},`${p} ${h.MODAL__INVITE_MEMBER__SELECTED}`),a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:e=>{const{hasNext:t}=u,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&u.next().then(e=>{o([...i,...e])})}},i.map(e=>a.a.createElement(Sb,{checkBox:!0,checked:l[e.userId],isOperator:"operator"===(null==e?void 0:e.role),disabled:"operator"===(null==e?void 0:e.role),onChange:e=>{const t=s(s({},l),{},{[e.target.id]:e.target.checked});e.target.checked||delete t[e.target.id],c(t)},user:e,key:e.userId})))))}const Ry=()=>{var e;const[t,n]=Object(r.useState)([]),[i,s]=Object(r.useState)(!1),[o,l]=Object(r.useState)(!1),[c,u]=Object(r.useState)(!1),{stringSet:d}=Object(r.useContext)(td),h=ku(),{channel:f}=hy(),p=null==h||null===(e=h.config)||void 0===e?void 0:e.userId;Object(r.useEffect)(()=>{if(!f)return void n([]);const e=null==f?void 0:f.createOperatorListQuery({limit:10});e.next().then(t=>{n(t),u(e.hasNext)})},[f]);const m=Object(r.useCallback)(()=>{if(!f)return void n([]);const e=null==f?void 0:f.createOperatorListQuery({limit:10});e.next().then(t=>{n(t),u(e.hasNext)})},[f]);return a.a.createElement(a.a.Fragment,null,t.map(e=>a.a.createElement(Sy,{key:e.userId,user:e,currentUser:p,action:r=>{let{actionRef:i}=r;return(null==e?void 0:e.userId)===p?null:a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:r=>a.a.createElement(Ob,{parentRef:i,closeDropdown:r,openLeft:!0},a.a.createElement(Nb,{onClick:()=>{null==f||f.removeOperators([e.userId]).then(()=>{n(t.filter(t=>{let{userId:n}=t;return n!==e.userId}))}),r()},dataSbId:"channel_setting_operator_context_menu_unregister_operator"},d.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))})}})),a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(Od,{type:Ed.SECONDARY,size:yd.SMALL,onClick:()=>{l(!0)}},d.CHANNEL_SETTING__OPERATORS__TITLE_ADD),c&&a.a.createElement(Od,{type:Ed.SECONDARY,size:yd.SMALL,onClick:()=>{s(!0)}},d.CHANNEL_SETTING__OPERATORS__TITLE_ALL)),i&&a.a.createElement(My,{onCancel:()=>{s(!1),m()}}),o&&a.a.createElement(jy,{onCancel:()=>l(!1),onSubmit:()=>{m(),l(!1)}}))};function Uy(e){let{onCancel:t}=e;const[n,i]=Object(r.useState)([]),[s,o]=Object(r.useState)(null),{channel:l}=hy(),{stringSet:c}=rd();return Object(r.useEffect)(()=>{const e=null==l?void 0:l.createBannedUserListQuery();e.next().then(e=>{i(e)}),o(e)},[]),a.a.createElement("div",null,a.a.createElement(em,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:()=>t(),onSubmit:Vm,titleText:c.CHANNEL_SETTING__MUTED_MEMBERS__TITLE},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:e=>{const{hasNext:t}=s,r=e.target,a=r.clientHeight+r.scrollTop===r.scrollHeight;t&&a&&s.next().then(e=>{i([...n,...e])})}},n.map(e=>a.a.createElement(Sb,{user:e,key:e.userId,action:t=>{let{parentRef:r,actionRef:s}=t;return a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{parentContainRef:r,parentRef:s,closeDropdown:t,openLeft:!0},a.a.createElement(Nb,{onClick:()=>{null==l||l.unbanUser(e).then(()=>{t(),i(n.filter(t=>t.userId!==e.userId))})},dataSbId:"channel_setting_banned_user_context_menu_ban"},c.CHANNEL_SETTING__MODERATION__BAN))})}})))))}const Ly=()=>{const[e,t]=Object(r.useState)([]),[n,i]=Object(r.useState)(!1),[s,o]=Object(r.useState)(!1),{stringSet:l}=Object(r.useContext)(td),{channel:c}=hy(),u={limit:10};Object(r.useEffect)(()=>{if(!c)return void t([]);const e=null==c?void 0:c.createBannedUserListQuery(u);e.next().then(n=>{t(n),i(e.hasNext)})},[c]);const d=Object(r.useCallback)(()=>{if(!c)return void t([]);const e=null==c?void 0:c.createBannedUserListQuery(u);e.next().then(n=>{t(n),i(e.hasNext)})},[c]);return a.a.createElement(a.a.Fragment,null,e.map(e=>a.a.createElement(Sy,{key:e.userId,user:e,action:t=>{let{actionRef:n,parentRef:r}=t;return a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{parentContainRef:r,parentRef:n,closeDropdown:t,openLeft:!0},a.a.createElement(Nb,{onClick:()=>{null==c||c.unbanUser(e).then(()=>{t(),d()})},dataSbId:"channel_setting_banned_user_context_menu_unban"},l.CHANNEL_SETTING__MODERATION__UNBAN))})}})),e&&0===e.length&&a.a.createElement(hd,{className:"sendbird-channel-settings__empty-list",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_3},l.CHANNEL_SETTING__MODERATION__EMPTY_BAN),n&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(Od,{type:Ed.SECONDARY,size:yd.SMALL,onClick:()=>{o(!0)}},l.CHANNEL_SETTING__MODERATION__ALL_BAN)),s&&a.a.createElement(Uy,{onCancel:()=>{o(!1),d()}}))};function ky(e){var t;let{onCancel:n}=e;const[i,s]=Object(r.useState)([]),[o,l]=Object(r.useState)(null),{channel:c}=hy(),u=ku(),d=null==u||null===(t=u.config)||void 0===t?void 0:t.userId,{stringSet:h}=rd();return Object(r.useEffect)(()=>{const e=null==c?void 0:c.createMemberListQuery({limit:10,mutedMemberFilter:"muted"});e.next().then(e=>{s(e)}),l(e)},[]),a.a.createElement("div",null,a.a.createElement(em,{isFullScreenOnMobile:!0,hideFooter:!0,onCancel:()=>n(),onSubmit:Vm,titleText:h.CHANNEL_SETTING__MUTED_MEMBERS__TITLE},a.a.createElement("div",{className:"sendbird-more-members__popup-scroll",onScroll:e=>{const{hasNext:t}=o,n=e.target,r=n.clientHeight+n.scrollTop===n.scrollHeight;t&&r&&o.next().then(e=>{s([...i,...e])})}},i.map(e=>a.a.createElement(Sb,{currentUser:d,user:e,key:e.userId,action:t=>{let{actionRef:n,parentRef:r}=t;return a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{parentContainRef:r,parentRef:n,closeDropdown:t,openLeft:!0},a.a.createElement(Nb,{onClick:()=>{null==c||c.unmuteUser(e).then(()=>{t(),s(i.filter(t=>t.userId!==e.userId))})},dataSbId:"channel_setting_muted_member_context_menu_unmute"},h.CHANNEL_SETTING__MODERATION__UNMUTE))})}})))))}const Dy=()=>{var e;const[t,n]=Object(r.useState)([]),[i,s]=Object(r.useState)(!1),[o,l]=Object(r.useState)(!1),{stringSet:c}=rd(),{channel:u}=hy(),d=ku(),h=null==d||null===(e=d.config)||void 0===e?void 0:e.userId;Object(r.useEffect)(()=>{if(!u)return void n([]);const e=null==u?void 0:u.createMemberListQuery({limit:10,mutedMemberFilter:"muted"});e.next().then(t=>{n(t),s(e.hasNext)})},[u]);const f=Object(r.useCallback)(()=>{if(!u)return void n([]);const e=null==u?void 0:u.createMemberListQuery({limit:10,mutedMemberFilter:"muted"});e.next().then(t=>{n(t),s(e.hasNext)})},[u]);return a.a.createElement(a.a.Fragment,null,t.map(e=>a.a.createElement(Sy,{key:e.userId,user:e,currentUser:h,action:t=>{let{actionRef:n,parentRef:r}=t;return a.a.createElement(Tb,{menuTrigger:e=>a.a.createElement(qp,{className:"sendbird-user-message__more__menu",width:"32px",height:"32px",onClick:e},a.a.createElement(Bp,{width:"24px",height:"24px",type:zp.MORE,fillColor:Vp.CONTENT_INVERSE})),menuItems:t=>a.a.createElement(Ob,{closeDropdown:t,openLeft:!0,parentContainRef:r,parentRef:n},a.a.createElement(Nb,{onClick:()=>{null==u||u.unmuteUser(e).then(()=>{f(),t()})},dataSbId:"channel_setting_muted_member_context_menu_unmute"},(null==c?void 0:c.CHANNEL_SETTING__UNMUTE)||c.CHANNEL_SETTING__MODERATION__UNMUTE))})}})),t&&0===t.length&&a.a.createElement(hd,{className:"sendbird-channel-settings__empty-list",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_3},c.CHANNEL_SETTING__NO_UNMUTED),i&&a.a.createElement("div",{className:"sendbird-channel-settings-accordion__footer"},a.a.createElement(Od,{type:Ed.SECONDARY,size:yd.SMALL,onClick:()=>{l(!0)}},c.CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL)),o&&a.a.createElement(ky,{onCancel:()=>{l(!1),f()}}))};function xy(){const[e,t]=Object(r.useState)(!1),{stringSet:n}=Object(r.useContext)(td),{channel:i}=hy();return Object(r.useEffect)(()=>{t(null==i?void 0:i.isFrozen)},[i]),a.a.createElement(vy,{className:"sendbird-channel-settings__operator"},a.a.createElement(gy,{className:"sendbird-channel-settings__operators-list",id:"operators",renderTitle:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Bp,{type:zp.OPERATOR,fillColor:Vp.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},n.CHANNEL_SETTING__OPERATORS__TITLE)),renderContent:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Ry,null))}),a.a.createElement(gy,{className:"sendbird-channel-settings__members-list",id:"members",renderTitle:()=>{return a.a.createElement(a.a.Fragment,null,a.a.createElement(Bp,{type:zp.MEMBERS,fillColor:Vp.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},n.CHANNEL_SETTING__MEMBERS__TITLE),a.a.createElement(Db,{count:(e=null==i?void 0:i.memberCount,Math.abs(e)>999?(Math.abs(e)/1e3).toFixed(1)+"K":e)}));var e},renderContent:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(wy,null))}),!(null!=i&&i.isBroadcast)&&a.a.createElement(gy,{id:"mutedMembers",className:"sendbird-channel-settings__muted-members-list",renderTitle:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Bp,{type:zp.MUTE,fillColor:Vp.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},n.CHANNEL_SETTING__MUTED_MEMBERS__TITLE)),renderContent:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Dy,null))}),a.a.createElement(gy,{className:"sendbird-channel-settings__banned-members-list",id:"bannedUsers",renderTitle:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Bp,{type:zp.BAN,fillColor:Vp.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},n.CHANNEL_SETTING__BANNED_MEMBERS__TITLE)),renderContent:()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Ly,null))}),!(null!=i&&i.isBroadcast)&&a.a.createElement("div",{className:"sendbird-channel-settings__freeze"},a.a.createElement(Bp,{type:zp.FREEZE,fillColor:Vp.PRIMARY,width:24,height:24,className:"sendbird-channel-settings__accordion-icon"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},n.CHANNEL_SETTING__FREEZE_CHANNEL),a.a.createElement(Ty,{className:"sendbird-channel-settings__frozen-icon",checked:e,onChange:()=>{e?null==i||i.unfreeze().then(()=>{t(e=>!e)}):null==i||i.freeze().then(()=>{t(e=>!e)})}})))}const Py=e=>{var t,n;const{onSubmit:r=Vm,onCancel:i=Vm}=e,{channel:s,onLeaveChannel:o}=hy(),{stringSet:l}=rd(),c=ku(),u=null==c||null===(t=c.config)||void 0===t?void 0:t.logger,d=null==c||null===(n=c.config)||void 0===n?void 0:n.isOnline,{isMobile:h}=Xp(),f=e=>null!=e&&e.name&&"Group Channel"!==(null==e?void 0:e.name)?e.name:"Group Channel"!==(null==e?void 0:e.name)&&null!=e&&e.name?l.NO_TITLE:((null==e?void 0:e.members)||[]).map(e=>e.nickname||l.NO_NAME).join(", ");return h?a.a.createElement(em,{className:"sendbird-channel-settings__leave--mobile",titleText:f(s),hideFooter:!0,isCloseOnClickOutside:!0,onCancel:i},a.a.createElement(Z_,{onClick:()=>{u.info("ChannelSettings: Leaving channel",s),null==s||s.leave().then(()=>{u.info("ChannelSettings: Leaving channel successful!",s),o()})},className:"sendbird-channel-settings__leave-label--mobile"},a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},l.CHANNEL_PREVIEW_MOBILE_LEAVE))):a.a.createElement(em,{isFullScreenOnMobile:!0,disabled:!d,onCancel:i,onSubmit:()=>{u.info("ChannelSettings: Leaving channel",s),null==s||s.leave().then(()=>{u.info("ChannelSettings: Leaving channel successful!",s),o?o():r()})},submitText:l.MODAL__LEAVE_CHANNEL__FOOTER,titleText:l.MODAL__LEAVE_CHANNEL__TITLE})},Fy=()=>{const{stringSet:e}=Object(r.useContext)(td),[t,n]=Object(r.useState)(!1),{channel:i}=hy();return a.a.createElement("div",{className:"sendbird-channel-settings__user-panel"},a.a.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__members"].join(" "),role:"switch","aria-checked":t,onKeyDown:()=>n(!t),onClick:()=>n(!t),tabIndex:0},a.a.createElement(Bp,{className:"sendbird-channel-settings__panel-icon-left",type:zp.MEMBERS,fillColor:Vp.PRIMARY,height:"24px",width:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},e.CHANNEL_SETTING__MEMBERS__TITLE,a.a.createElement(Db,{className:"sendbird-channel-settings__badge",count:(s=null==i?void 0:i.memberCount,Math.abs(s)>999?(Math.abs(s)/1e3).toFixed(1)+"K":s)})),a.a.createElement(Bp,{className:["sendbird-channel-settings__panel-icon-right","sendbird-channel-settings__panel-icon--chevron",t?"sendbird-channel-settings__panel-icon--open":""].join(" "),type:zp.CHEVRON_RIGHT,height:"24px",width:"24px"})),t&&a.a.createElement(wy,null));var s},Hy=e=>{var t,n;const{stringSet:i}=Object(r.useContext)(td),s=ku(),o=hy(),[l,c]=Object(r.useState)(!1),u=null==s||null===(t=s.config)||void 0===t?void 0:t.isOnline,d=null==s||null===(n=s.config)||void 0===n?void 0:n.logger,{channel:h,invalidChannel:f,onCloseClick:p}=o,{renderPlaceholderError:m,renderChannelProfile:b,renderModerationPanel:_,renderLeaveChannel:g}=e;return!h||f?a.a.createElement("div",null,a.a.createElement("div",{className:"sendbird-channel-settings__header"},a.a.createElement(hd,{type:fd.H_2,color:pd.ONBACKGROUND_1},i.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement(Bp,{className:"sendbird-channel-settings__close-icon",type:zp.CLOSE,height:"24px",width:"24px",onClick:()=>{d.info("ChannelSettings: Click close"),null==p||p()}})),a.a.createElement("div",null,m?m():a.a.createElement(qg,{type:Vg.WRONG}))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sendbird-channel-settings__header"},a.a.createElement(hd,{type:fd.H_2,color:pd.ONBACKGROUND_1},i.CHANNEL_SETTING__HEADER__TITLE),a.a.createElement("div",{className:"sendbird-channel-settings__header-icon"},a.a.createElement(qp,{width:"32px",height:"32px",onClick:()=>{d.info("ChannelSettings: Click close"),null==p||p()}},a.a.createElement(Bp,{className:"sendbird-channel-settings__close-icon",type:zp.CLOSE,height:"22px",width:"22px"})))),a.a.createElement("div",{className:"sendbird-channel-settings__scroll-area"},(null==b?void 0:b())||a.a.createElement(py,null),(null==_?void 0:_())||("operator"===(null==h?void 0:h.myRole)?a.a.createElement(xy,null):a.a.createElement(Fy,null)),(null==g?void 0:g())||a.a.createElement("div",{className:["sendbird-channel-settings__panel-item","sendbird-channel-settings__leave-channel",u?"":"sendbird-channel-settings__panel-item__disabled"].join(" "),role:"button",onKeyDown:()=>{u&&c(!0)},onClick:()=>{u&&c(!0)},tabIndex:0},a.a.createElement(Bp,{className:["sendbird-channel-settings__panel-icon-left","sendbird-channel-settings__panel-icon__leave"].join(" "),type:zp.LEAVE,fillColor:Vp.ERROR,height:"24px",width:"24px"}),a.a.createElement(hd,{type:fd.SUBTITLE_1,color:pd.ONBACKGROUND_1},i.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)),l&&a.a.createElement(Py,{onCancel:()=>{c(!1)},onSubmit:()=>{c(!1),null==p||p()}})))},Gy=e=>a.a.createElement(dy,{overrideInviteUser:null==e?void 0:e.overrideInviteUser,channelUrl:e.channelUrl,onCloseClick:null==e?void 0:e.onCloseClick,onLeaveChannel:null==e?void 0:e.onLeaveChannel,onChannelModified:null==e?void 0:e.onChannelModified,onBeforeUpdateChannel:null==e?void 0:e.onBeforeUpdateChannel,queries:null==e?void 0:e.queries,className:null==e?void 0:e.className,disableUserProfile:null==e?void 0:e.disableUserProfile,renderUserProfile:null==e?void 0:e.renderUserProfile},a.a.createElement(Hy,{renderPlaceholderError:null==e?void 0:e.renderPlaceholderError,renderChannelProfile:null==e?void 0:e.renderChannelProfile,renderModerationPanel:null==e?void 0:e.renderModerationPanel,renderLeaveChannel:null==e?void 0:e.renderLeaveChannel}));function By(e,t){switch(t.type){case"SET_CURRENT_CHANNEL":{const n=t.payload;return s(s({},e),{},{currentChannel:n,initialized:!0})}case"CHANNEL_INVALID":return s(s({},e),{},{currentChannel:null,initialized:!1});case"GET_SEARCHED_MESSAGES":{const{messages:n,createdQuery:r}=t.payload;return r&&r.channelUrl===(null==e?void 0:e.currentMessageSearchQuery).channelUrl&&r.key===(null==e?void 0:e.currentMessageSearchQuery).key?s(s({},e),{},{loading:!1,isInvalid:!1,allMessages:[...n],hasMoreResult:(null==e?void 0:e.currentMessageSearchQuery).hasNext}):s({},e)}case"SET_QUERY_INVALID":return s(s({},e),{},{isInvalid:!0});case"START_MESSAGE_SEARCH":return s(s({},e),{},{isInvalid:!1,loading:!1});case"START_GETTING_SEARCHED_MESSAGES":{const n=t.payload;return s(s({},e),{},{loading:!0,currentMessageSearchQuery:n})}case"GET_NEXT_SEARCHED_MESSAGES":{const n=t.payload;return s(s({},e),{},{allMessages:[...e.allMessages,...n],hasMoreResult:(null==e?void 0:e.currentMessageSearchQuery).hasNext})}case"RESET_SEARCH_STRING":return s(s({},e),{},{allMessages:[]});default:return e}}const zy={allMessages:[],loading:!1,isInvalid:!1,initialized:!1,currentChannel:null,currentMessageSearchQuery:null,hasMoreResult:!1};var Vy=function(e){return e.SCORE="score",e.TIMESTAMP="ts",e}(Vy||{});const qy=a.a.createContext(void 0),Ky=e=>{var t,n,i,o,l;const{channelUrl:c,searchString:u,messageSearchQuery:d,onResultLoaded:h,onResultClick:f}=e,p=ku(),[m,b]=Object(r.useState)(0),[_,g]=Object(r.useState)(0),[v,E]=Object(r.useReducer)(By,zy),{allMessages:y,loading:O,isInvalid:C,currentChannel:N,currentMessageSearchQuery:T,hasMoreResult:S}=v,I=null==p||null===(t=p.config)||void 0===t?void 0:t.logger,A=null==p||null===(n=p.stores)||void 0===n||null===(i=n.sdkStore)||void 0===i?void 0:i.sdk,w=null==p||null===(o=p.stores)||void 0===o||null===(l=o.sdkStore)||void 0===l?void 0:l.initialized,M=Object(r.useRef)(null);!function(e,t){let{channelUrl:n,sdkInit:a}=e,{sdk:i,logger:s,messageSearchDispatcher:o}=t;Object(r.useEffect)(()=>{n&&a&&null!=i&&i.groupChannel&&i.groupChannel.getChannel(n).then(e=>{s.info("MessageSearch | useSetChannel group channel",e),o({type:"SET_CURRENT_CHANNEL",payload:e})}).catch(()=>{o({type:"CHANNEL_INVALID",payload:null})})},[n,a])}({channelUrl:c,sdkInit:w},{sdk:A,logger:I,messageSearchDispatcher:E});const j=function(e,t){let{searchString:n}=e,{messageSearchDispatcher:a}=t;const[i,s]=Object(r.useState)(""),[o,l]=Object(r.useState)(null);return Object(r.useEffect)(()=>{clearTimeout(o),n?l(setTimeout(()=>{s(n)},500)):(s(""),a({type:"RESET_SEARCH_STRING",payload:""}))},[n]),i}({searchString:u},{messageSearchDispatcher:E});!function(e,t){let{currentChannel:n,channelUrl:a,requestString:i,messageSearchQuery:o,onResultLoaded:l,retryCount:c}=e,{sdk:u,logger:d,messageSearchDispatcher:h}=t;Object(r.useEffect)(()=>{h({type:"START_MESSAGE_SEARCH",payload:null}),u&&a&&u.createMessageSearchQuery&&n&&(i?n.refresh().then(e=>{const t=s({order:Vy.TIMESTAMP,channelUrl:a,messageTimestampFrom:e.invitedAt,keyword:i},o),n=u.createMessageSearchQuery(t);n.next().then(e=>{d.info("MessageSearch | useGetSearchedMessages: succeeded getting messages",e),h({type:"GET_SEARCHED_MESSAGES",payload:{messages:e,createdQuery:n}}),l&&"function"==typeof l&&l(e,null)}).catch(e=>{d.warning("MessageSearch | useGetSearchedMessages: getting failed",e),h({type:"SET_QUERY_INVALID",payload:null}),l&&"function"==typeof l&&l(null,e)}),h({type:"START_GETTING_SEARCHED_MESSAGES",payload:n})}):d.info("MessageSearch | useGetSeasrchedMessages: search string is empty"))},[a,o,i,n,c])}({currentChannel:N,channelUrl:c,requestString:j,messageSearchQuery:d,onResultLoaded:h,retryCount:m},{sdk:A,logger:I,messageSearchDispatcher:E});const R=function(e,t){let{currentMessageSearchQuery:n,hasMoreResult:a,onResultLoaded:i}=e,{logger:s,messageSearchDispatcher:o}=t;return Object(r.useCallback)(e=>{a||s.warning("MessageSearch | useScrollCallback: no more searched results",a),n&&n.hasNext?n.next().then(t=>{s.info("MessageSearch | useScrollCallback: succeeded getting searched messages",t),o({type:"GET_NEXT_SEARCHED_MESSAGES",payload:t}),e(t,null),i&&"function"==typeof i&&i(t,null)}).catch(t=>{s.warning("MessageSearch | useScrollCallback: failed getting searched messages",t),e(null,t),i&&"function"==typeof i&&i(null,t)}):s.warning("MessageSearch | useScrollCallback: no currentMessageSearchQuery")},[n,a])}({currentMessageSearchQuery:T,hasMoreResult:S,onResultLoaded:h},{logger:I,messageSearchDispatcher:E});return a.a.createElement(qy.Provider,{value:{channelUrl:c,searchString:u,requestString:j,messageSearchQuery:d,onResultLoaded:h,onResultClick:f,retryCount:m,setRetryCount:b,selectedMessageId:_,setSelectedMessageId:g,messageSearchDispatcher:E,allMessages:y,loading:O,isInvalid:C,currentChannel:N,currentMessageSearchQuery:T,hasMoreResult:S,onScroll:R,scrollRef:M,handleRetryToConnect:()=>{b(m+1)},handleOnScroll:e=>{const t=e.target,{scrollTop:n,scrollHeight:r,clientHeight:a}=t;S&&n+a>=r&&R(()=>{})}}},null==e?void 0:e.children)};function Wy(e){let{className:t,message:n,selected:r,onClick:i}=e;const{createdAt:s}=n,o=n.message,l=n.sender||n._sender,{profileUrl:c,nickname:u}=l,{stringSet:d,dateLocale:h}=rd();return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-message-search-item",r?"sendbird-message-search-item--selected":""].join(" "),onClick:e=>{e.stopPropagation(),i(n)}},a.a.createElement("div",{className:"sendbird-message-search-item__left"},a.a.createElement(sb,{className:"sendbird-message-search-item__left__sender-avatar",src:c,alt:"profile image",width:"56px",height:"56px"})),a.a.createElement("div",{className:"sendbird-message-search-item__right"},a.a.createElement(hd,{className:"sendbird-message-search-item__right__sender-name",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_1},u||d.NO_NAME),a.a.createElement(hd,{className:"sendbird-message-search-item__right__message-text",type:fd.BODY_2,color:pd.ONBACKGROUND_3},o),a.a.createElement(hd,{className:"sendbird-message-search-item__right__message-created-at",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},function(e){let{createdAt:t,locale:n,stringSet:r}=e;const a=n?{locale:n}:null;return t?P_(t)?U_(t,"p",a):z_(t)?(null==r?void 0:r.MESSAGE_STATUS__YESTERDAY)||"Yesterday":H_(t)?U_(t,"MMM d",a):U_(t,"yyyy/M/d",a):""}({createdAt:s,locale:h,stringSet:d}))),a.a.createElement("div",{className:"sendbird-message-search-item__right-footer"}))}function Yy(e){const{url:t}=e,n=t.match(/\.([^.]*?)(?=\?|#|$)/)[1];return/(jpg|jpeg|png)$/i.test(n)?zp.PHOTO:/mp4$/i.test(n)||nu(e)?zp.PLAY:/mp3/i.test(n)?zp.FILE_AUDIO:/gif/i.test(n)?zp.GIF:zp.FILE_DOCUMENT}function Qy(e){const{className:t,message:n,selected:r,onClick:i}=e,{createdAt:s,url:o,name:l}=n,c=n.sender||n._sender,{profileUrl:u,nickname:d}=c,{stringSet:h,dateLocale:f}=rd(),p=nu(n),m=p?h.VOICE_MESSAGE:l||o;return a.a.createElement("div",{className:[...Array.isArray(t)?t:[t],"sendbird-message-search-file-item",r?"sendbird-message-search-file-item--selected":""].join(" "),onClick:e=>{e.stopPropagation(),i(n)}},a.a.createElement("div",{className:"sendbird-message-search-file-item__left"},a.a.createElement(sb,{className:"sendbird-message-search-file-item__left__sender-avatar",src:u,alt:"profile image",width:"56px",height:"56px"})),a.a.createElement("div",{className:"sendbird-message-search-file-item__right"},a.a.createElement(hd,{className:"sendbird-message-search-file-item__right__sender-name",type:fd.SUBTITLE_2,color:pd.ONBACKGROUND_1},d||h.NO_NAME),a.a.createElement("div",{className:"sendbird-message-search-file-item__right__content"},!p&&a.a.createElement("div",{className:"sendbird-message-search-file-item__right__content__type-icon"},a.a.createElement(Bp,{type:Yy(n),fillColor:Vp.PRIMARY,width:"18px",height:"18px"})),a.a.createElement(hd,{className:"sendbird-message-search-file-item__right__content__url",type:fd.BODY_2,color:pd.ONBACKGROUND_1},m))),a.a.createElement(hd,{className:"sendbird-message-search-file-item__message-created-at",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},function(e){let{createdAt:t,locale:n,stringSet:r}=e;const a=n?{locale:n}:null;return t?P_(t)?U_(t,"p",a):z_(t)?(null==r?void 0:r.MESSAGE_STATUS__YESTERDAY)||"Yesterday":H_(t)?U_(t,"MMM d",a):U_(t,"yyyy/M/d",a):""}({createdAt:s,locale:f,stringSet:h})),a.a.createElement("div",{className:"sendbird-message-search-file-item__right-footer"}))}const Xy=e=>{let{renderPlaceHolderError:t,renderPlaceHolderLoading:n,renderPlaceHolderNoString:i,renderPlaceHolderEmptyList:s,renderSearchItem:o}=e;const{isInvalid:l,searchString:c,requestString:u,currentChannel:d,retryCount:h,setRetryCount:f,loading:p,scrollRef:m,hasMoreResult:b,onScroll:_,allMessages:g,onResultClick:v,selectedMessageId:E,setSelectedMessageId:y}=a.a.useContext(qy),{stringSet:O}=Object(r.useContext)(td),C=()=>{f(h+1)};return l&&c&&u?(null==t?void 0:t())||a.a.createElement("div",{className:"sendbird-message-search"},a.a.createElement(qg,{type:Vg.WRONG,retryToConnect:C})):p&&c&&u?(null==n?void 0:n())||a.a.createElement("div",{className:"sendbird-message-search"},a.a.createElement(qg,{type:Vg.SEARCHING})):c?a.a.createElement("div",{className:"sendbird-message-search",onScroll:e=>{const t=e.target,{scrollTop:n,scrollHeight:r,clientHeight:a}=t;b&&n+a>=r-1&&_(()=>{})},ref:m},g.length>0?g.map(e=>o?o({message:e,onResultClick:v}):"file"===e.messageType?a.a.createElement(Qy,{className:"sendbird-message-search__message-search-item",message:e,key:e.messageId,selected:E===e.messageId,onClick:()=>{v(e),y(e.messageId)}}):a.a.createElement(Wy,{className:"sendbird-message-search__message-search-item",message:e,key:e.messageId,selected:E===e.messageId,onClick:()=>{v(e),y(e.messageId)}})):(null==s?void 0:s())||a.a.createElement(qg,{type:Vg.NO_RESULTS})):(null==i?void 0:i())||a.a.createElement("div",{className:"sendbird-message-search"},a.a.createElement(qg,{type:Vg.SEARCH_IN,searchInString:d&&null!=d&&d.name&&"Group Channel"!==(null==d?void 0:d.name)?null==d?void 0:d.name:!d||"Group Channel"!==(null==d?void 0:d.name)&&null!=d&&d.name?O.NO_TITLE:d.members.map(e=>e.nickname||O.NO_NAME).join(", ")}))};function Zy(e){const{channelUrl:t,onResultClick:n,onCloseClick:i,messageSearchQuery:s,renderPlaceHolderError:o,renderPlaceHolderLoading:l,renderPlaceHolderNoString:c,renderPlaceHolderEmptyList:u,renderSearchItem:d}=e,[h,f]=Object(r.useState)(""),[p,m]=Object(r.useState)(""),[b,_]=Object(r.useState)(!1),{stringSet:g}=Object(r.useContext)(td);let v=null;Object(r.useEffect)(()=>{v&&clearTimeout(v),v=setTimeout(()=>{f(p),_(!0),v=null},500)},[p]);return a.a.createElement("div",{className:"sendbird-message-search-pannel"},a.a.createElement("div",{className:"sendbird-message-search-pannel__header"},a.a.createElement(hd,{className:"sendbird-message-search-pannel__header__title",type:fd.H_2,color:pd.ONBACKGROUND_1},g.SEARCH_IN_CHANNEL),a.a.createElement(qp,{className:"sendbird-message-search-pannel__header__close-button",width:"32px",height:"32px",onClick:i},a.a.createElement(Bp,{type:zp.CLOSE,fillColor:Vp.ON_BACKGROUND_1,width:"22px",height:"22px"}))),a.a.createElement("div",{className:"sendbird-message-search-pannel__input"},a.a.createElement("div",{className:"sendbird-message-search-pannel__input__container"},a.a.createElement(Bp,{className:"sendbird-message-search-pannel__input__container__search-icon",type:zp.SEARCH,fillColor:Vp.ON_BACKGROUND_3,width:"24px",height:"24px"}),a.a.createElement("input",{className:"sendbird-message-search-pannel__input__container__input-area",placeholder:g.SEARCH,value:p,onChange:e=>{m(e.target.value)}}),p&&b&&a.a.createElement(k_,{className:"sendbird-message-search-pannel__input__container__spinner",width:"20px",height:"20px"},a.a.createElement(Bp,{type:zp.SPINNER,fillColor:Vp.PRIMARY,width:"20px",height:"20px"})),!b&&p&&a.a.createElement(Bp,{className:"sendbird-message-search-pannel__input__container__reset-input-button",type:zp.REMOVE,fillColor:Vp.ON_BACKGROUND_3,width:"20px",height:"20px",onClick:e=>{e.stopPropagation(),m(""),f("")}}))),a.a.createElement("div",{className:"sendbird-message-search-pannel__message-search"},a.a.createElement(Ky,{channelUrl:t,searchString:h,onResultClick:n,onResultLoaded:()=>{_(!1)},messageSearchQuery:s},a.a.createElement(Xy,{renderPlaceHolderError:o,renderPlaceHolderLoading:l,renderPlaceHolderNoString:c,renderPlaceHolderEmptyList:u,renderSearchItem:d}))))}const $y=e=>{var t;const{onCancel:n,onSubmit:i,message:s}=e,{stringSet:o}=Object(r.useContext)(td),{deleteMessage:l}=Cv();return a.a.createElement(em,{type:Ed.DANGER,disabled:(null==s||null===(t=s.threadInfo)||void 0===t?void 0:t.replyCount)>0,onCancel:n,onSubmit:()=>{l(s).then(()=>{null==n||n(),null==i||i()})},submitText:o.MESSAGE_MENU__DELETE,titleText:o.MODAL__DELETE_MESSAGE__TITLE})};function Jy(e){var t,n,i,s,o,l,c,u;let{className:d,message:h,showFileViewer:f}=e;const{stores:p,config:m}=ku(),{replyType:b,isMentionEnabled:_,isReactionEnabled:g}=m,v=null==p||null===(t=p.userStore)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.userId,{stringSet:E}=rd(),{currentChannel:y,emojiContainer:O,nicknamesMap:C,toggleReaction:N}=Cv(),T=_&&(null==h||null===(i=h.mentionedMessageTemplate)||void 0===i?void 0:i.length)>0&&(null==h||null===(s=h.mentionedUsers)||void 0===s?void 0:s.length)>0,S=g&&"THREAD"===b&&!(null!=y&&y.isSuper)&&!(null!=y&&y.isBroadcast)&&(null==h||null===(o=h.reactions)||void 0===o?void 0:o.length)>0,I=Object(r.useMemo)(()=>Gv(T?{mentionedUsers:null==h?void 0:h.mentionedUsers,messageText:null==h?void 0:h.mentionedMessageTemplate}:{messageText:null==h?void 0:h.message}),[null==h?void 0:h.updatedAt]),[A,w]=Object(r.useState)(!1),M=(null==h||null===(l=h.thumbnails)||void 0===l?void 0:l.length)>0?null==h||null===(c=h.thumbnails[0])||void 0===c?void 0:c.url:"";return a.a.createElement("div",{className:"sendbird-parent-message-info-item "+d},Wc(h)&&a.a.createElement(hd,{className:"sendbird-parent-message-info-item__text-message",type:fd.BODY_1,color:pd.ONBACKGROUND_1},a.a.createElement(pE,{tokens:I}),ru(h)&&a.a.createElement(hd,{className:"sendbird-parent-message-info-item__text-message edited",type:fd.BODY_1,color:pd.ONBACKGROUND_2},` ${E.MESSAGE_EDITED} `)),iu(h)===au().FILE&&a.a.createElement("div",{className:"sendbird-parent-message-info-item__file-message"},a.a.createElement("div",{className:"sendbird-parent-message-info-item__file-message__file-icon"},a.a.createElement(Bp,{className:"sendbird-parent-message-info-item__file-message__file-icon__icon",type:{IMAGE:zp.PHOTO,VIDEO:zp.PLAY,AUDIO:zp.FILE_AUDIO,GIF:zp.GIF,OTHERS:zp.FILE_DOCUMENT}[Bc(null==h?void 0:h.type)],fillColor:Vp.PRIMARY,width:"24px",height:"24px"})),a.a.createElement(Z_,{className:"sendbird-parent-message-info-item__file-message__file-name",onClick:()=>{window.open(null==h?void 0:h.url)},color:pd.ONBACKGROUND_1},a.a.createElement(hd,{className:"sendbird-parent-message-info-item__file-message__file-name__text",type:fd.BODY_1,color:pd.ONBACKGROUND_1},fu((null==h?void 0:h.name)||(null==h?void 0:h.url),30)))),nu(h)&&a.a.createElement("div",{className:"sendbird-parent-message-info-item__voice-message"},a.a.createElement(wE,{className:"sendbird-parent-message-info-item__voice-message__item",message:h,channelUrl:null==y?void 0:y.url,isByMe:!1,isReactionEnabled:g})),$c(h)&&a.a.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message",onClick:()=>{zc(h)&&f(!0)}},a.a.createElement(tb,{className:"sendbird-parent-message-info-item__thumbnail-message__thumbnail",url:M||(null==h?void 0:h.url)||(null==h?void 0:h.plainUrl),alt:null==h?void 0:h.type,width:"200px",height:"148px",onLoad:()=>{w(!0)},placeHolder:e=>a.a.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__placeholder",style:e},a.a.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__placeholder__icon"},a.a.createElement(Bp,{type:eu(h)?zp.PLAY:zp.PHOTO,fillColor:Vp.ON_BACKGROUND_2,width:"34px",height:"34px"})))}),eu(h)&&!M&&!A&&a.a.createElement("video",{className:"sendbird-parent-message-info-item__thumbnail-message__video"},a.a.createElement("source",{src:(null==h?void 0:h.url)||(null==h?void 0:h.plainUrl),type:null==h?void 0:h.type})),a.a.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__image-cover"}),(eu(h)||tu(h))&&a.a.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__icon-wrapper"},a.a.createElement("div",{className:"sendbird-parent-message-info-item__thumbnail-message__icon-wrapper__icon"},a.a.createElement(Bp,{type:eu(h)?zp.PLAY:zp.GIF,fillColor:Vp.GRAY,width:"34px",height:"34px"})))),iu(h)===(null==au||null===(u=au())||void 0===u?void 0:u.UNKNOWN)&&a.a.createElement("div",{className:"sendbird-parent-message-info-item__unknown-message"},a.a.createElement(hd,{className:"sendbird-parent-message-info-item__unknown-message__header",type:fd.BODY_1,color:pd.ONBACKGROUND_1},E.UNKNOWN__UNKNOWN_MESSAGE_TYPE),a.a.createElement(hd,{className:"sendbird-parent-message-info-item__unknown-message__description",type:fd.BODY_1,color:pd.ONBACKGROUND_2},E.UNKNOWN__CANNOT_READ_MESSAGE)),S&&a.a.createElement("div",{className:"sendbird-parent-message-info__reactions"},a.a.createElement(cE,{userId:v,message:h,channel:y,isByMe:!1,emojiContainer:O,memberNicknamesMap:C,toggleReaction:N})))}const eO={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]};s({},eO);const tO="MULTI";function nO(e){if(e.viewerType!==tO){const{onDelete:t,isByMe:n,disableDelete:r,className:i}=e;return n?a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete "+i},a.a.createElement(Bp,{className:r?"disabled":"",type:zp.DELETE,fillColor:r?Vp.GRAY:Vp.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:e=>{r||null==t||t(e)}})):a.a.createElement(a.a.Fragment,null)}return a.a.createElement(a.a.Fragment,null)}function rO(e){if(e.viewerType===tO){const{onClickLeft:t,onClickRight:n}=e;return a.a.createElement("div",{className:"sendbird-file-viewer-slider"},a.a.createElement("div",{className:"sendbird-file-viewer-arrow--left"},a.a.createElement(Bp,{type:zp.SLIDE_LEFT,fillColor:Vp.ON_BACKGROUND_1,height:Lu.o,width:Lu.o,onClick:e=>{null==t||t(),e.stopPropagation()}})),a.a.createElement("div",{className:"sendbird-file-viewer-arrow--right"},a.a.createElement(Bp,{type:zp.SLIDE_LEFT,fillColor:Vp.ON_BACKGROUND_1,height:Lu.o,width:Lu.o,onClick:e=>{e.stopPropagation(),null==n||n()}})))}return a.a.createElement(a.a.Fragment,null)}const aO=e=>{const t=Object(r.useRef)(null),{profileUrl:n,nickname:i,onClose:s}=e,{onKeyDown:o}=function(e){let{props:t,ref:n}=e;const{onClose:a}=t;let i=Vm,s=Vm;return t.viewerType===tO&&(i=t.onClickLeft,s=t.onClickRight),Object(r.useLayoutEffect)(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},[n.current]),{onKeyDown:Object(r.useCallback)(e=>{switch(e.key){case"Escape":a(e);break;case"ArrowLeft":i();break;case"ArrowRight":s()}e.stopPropagation()},[a,i,s])}}({props:e,ref:t}),{name:c,type:u,url:d}=function(e){let{props:t}=e;if(t.viewerType===tO){const{fileInfoList:e,currentIndex:n}=t;return e[n]}const n=t;return{name:n.name,type:n.type,url:n.url}}({props:e}),{stringSet:h}=Object(r.useContext)(td);return a.a.createElement("div",{className:"sendbird-fileviewer",onKeyDown:o,tabIndex:1,ref:t},a.a.createElement("div",{className:"sendbird-fileviewer__header"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left"},a.a.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},a.a.createElement(sb,{height:"32px",width:"32px",src:n})),a.a.createElement(hd,{className:"sendbird-fileviewer__header__left__filename",type:fd.H_2,color:pd.ONBACKGROUND_1},c),a.a.createElement(hd,{className:"sendbird-fileviewer__header__left__sender-name",type:fd.BODY_1,color:pd.ONBACKGROUND_2},i)),a.a.createElement("div",{className:"sendbird-fileviewer__header__right"},Hc(u)&&a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},a.a.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:d,target:"_blank"},a.a.createElement(Bp,{type:zp.DOWNLOAD,fillColor:Vp.ON_BACKGROUND_1,height:"24px",width:"24px"})),a.a.createElement(nO,l({className:"sendbird-fileviewer__header__right__actions__delete"},e))),a.a.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},a.a.createElement(Bp,{type:zp.CLOSE,fillColor:Vp.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:e=>null==s?void 0:s(e)})))),a.a.createElement("div",{className:"sendbird-fileviewer__content"},Pc(u)&&a.a.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},a.a.createElement("source",{src:d,type:u})),xc(u)&&a.a.createElement("img",{src:d,alt:c,className:e.viewerType===tO?"sendbird-fileviewer__content__img__multi":"sendbird-fileviewer__content__img"}),!Hc(u)&&a.a.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},a.a.createElement(hd,{type:fd.H_1,color:pd.ONBACKGROUND_1},(null==h?void 0:h.UI__FILE_VIEWER__UNSUPPORT)||"Unsupported message")),a.a.createElement(rO,e)))};function iO(e){let{message:t,onClose:n,isByMe:r=!1,onDelete:i,currentIndex:s,onClickLeft:o,onClickRight:l}=e;var c,u,d,h,f;return t.isMultipleFilesMessage()?a.a.createElement(aO,{profileUrl:null===(c=t.sender)||void 0===c?void 0:c.profileUrl,nickname:null===(u=t.sender)||void 0===u?void 0:u.nickname,viewerType:tO,fileInfoList:t.fileInfoList.map(e=>({name:e.fileName||"",type:e.mimeType||"",url:e.url})),currentIndex:s||0,onClickLeft:o||Vm,onClickRight:l||Vm,onClose:n}):t.isFileMessage()?Object(ad.createPortal)(a.a.createElement(aO,{profileUrl:null===(d=t.sender)||void 0===d?void 0:d.profileUrl,nickname:null===(h=t.sender)||void 0===h?void 0:h.nickname,name:t.name,type:t.type,url:null==t?void 0:t.url,isByMe:r,disableDelete:((null==t||null===(f=t.threadInfo)||void 0===f?void 0:f.replyCount)||0)>0,onClose:n,onDelete:i||Vm}),document.getElementById(id)):a.a.createElement(a.a.Fragment,null)}function sO(e){var t,n,i,o,c,u;let{className:d}=e;const{stores:h,config:f}=ku(),{isMentionEnabled:p,isReactionEnabled:m,replyType:b,isOnline:_,userMention:g,logger:v}=f,E=null!==(t=null===(n=h.userStore.user)||void 0===n?void 0:n.userId)&&void 0!==t?t:"",{dateLocale:y}=rd(),{currentChannel:O,parentMessage:C,allThreadMessages:N,emojiContainer:T,toggleReaction:S,updateMessage:I,deleteMessage:A,onMoveToParentMessage:w,onHeaderActionClick:M,isMuted:j,isChannelFrozen:R}=Cv(),{isMobile:U}=Xp(),[L,k]=Object(r.useState)(!1),[D,x]=Object(r.useState)(!1),[P,F]=Object(r.useState)(!1),H=vg({globalLevel:m,isSuper:O.isSuper,isBroadcast:O.isBroadcast}),G=E===C.sender.userId,B=Object(r.useRef)(null),[z,V]=Object(r.useState)(!1),q=Ug({onLongPress:()=>{U&&V(!0)}},{shouldPreventDefault:!1}),[K,W]=Object(r.useState)(!1),Y=!_||j||R&&!((null==O?void 0:O.myRole)===Wv),Q=Object(r.useRef)(null),[X,Z]=Object(r.useState)(""),[$,J]=Object(r.useState)([]),[ee,te]=Object(r.useState)([]),[ne,re]=Object(r.useState)(null),[ae,ie]=Object(r.useState)(null),[se,oe]=Object(r.useState)([]),le=_&&p&&X.length>0&&!j&&!(R&&O.myRole!==Wv),ce=xE({ref:Q},{logger:v}),ue=(null==ce?void 0:ce.length)<(null==g?void 0:g.maxMentionCount);Object(r.useEffect)(()=>{J($.filter(e=>{let{userId:t}=e;const n=ee.indexOf(t);return!(n<0)&&(ee.splice(n,1),!0)}))},[ee]);const de=Object(r.useRef)(null),{disableUserProfile:he,renderUserProfile:fe}=Object(r.useContext)(qm);return K&&null!=C&&null!==(i=C.isUserMessage)&&void 0!==i&&i.call(C)?a.a.createElement(a.a.Fragment,null,le&&a.a.createElement(Tv,{className:"parent-message-info--suggested-mention-list",targetNickname:X,inputEvent:ne,onUserItemClick:e=>{e&&J([...$,e]),Z(""),ie(e),re(null)},onFocusItemChange:()=>{re(null)},onFetchUsers:e=>{oe(e)},ableAddMention:ue,maxMentionCount:null==g?void 0:g.maxMentionCount,maxSuggestionCount:null==g?void 0:g.maxSuggestionCount}),a.a.createElement(Kv,{channel:O,isEdit:!0,disabled:Y,ref:Q,mentionSelectedUser:ae,isMentionEnabled:p,message:C,onStartTyping:()=>{var e;null==O||null===(e=O.startTyping)||void 0===e||e.call(O)},onUpdateMessage:e=>{var t;let{messageId:n,message:r,mentionTemplate:a}=e;I({messageId:n,message:r,mentionedUsers:$,mentionTemplate:a}),W(!1),null==O||null===(t=O.endTyping)||void 0===t||t.call(O)},onCancelEdit:()=>{var e;Z(""),J([]),te([]),oe([]),W(!1),null==O||null===(e=O.endTyping)||void 0===e||e.call(O)},onUserMentioned:e=>{(null==ae?void 0:ae.userId)===(null==e?void 0:e.userId)&&(ie(null),Z(""))},onMentionStringChange:e=>{Z(e)},onMentionedUserIdsUpdated:e=>{te(e)},onKeyDown:e=>!!(le&&(null==se?void 0:se.length)>0&&(e.key===Zg&&ue||e.key===$g||e.key===Jg))&&(re(e),!0)})):a.a.createElement("div",l({className:"sendbird-parent-message-info "+d},U?s({},q):{},{ref:B}),a.a.createElement(Tb,{menuTrigger:e=>{var t,n,r;return a.a.createElement(sb,{className:"sendbird-parent-message-info__sender",ref:de,src:(null==O||null===(t=O.members)||void 0===t||null===(n=t.find(e=>{var t;return(null==e?void 0:e.userId)===(null==C||null===(t=C.sender)||void 0===t?void 0:t.userId)}))||void 0===n?void 0:n.profileUrl)||(null==C||null===(r=C.sender)||void 0===r?void 0:r.profileUrl),alt:"thread message sender",width:"40px",height:"40px",onClick:()=>{he||e()}})},menuItems:e=>a.a.createElement(Ob,{parentRef:de,parentContainRef:de,closeDropdown:e,style:{paddingTop:"0px",paddingBottom:"0px"}},fe?fe({user:null==C?void 0:C.sender,close:e}):a.a.createElement(_b,{user:null==C?void 0:C.sender,currentUserId:E,onSuccess:e}))}),a.a.createElement("div",{className:"sendbird-parent-message-info__content"},a.a.createElement("div",{className:"sendbird-parent-message-info__content__info"},a.a.createElement(hd,{className:"sendbird-parent-message-info__content__info__sender-name"+(H?"--use-reaction":""),type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},(null==O||null===(o=O.members)||void 0===o||null===(c=o.find(e=>{var t;return(null==e?void 0:e.userId)===(null==C||null===(t=C.sender)||void 0===t?void 0:t.userId)}))||void 0===c?void 0:c.nickname)||(null==bu?void 0:bu(C))),a.a.createElement(hd,{className:"sendbird-parent-message-info__content__info__sent-at",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},U_((null==C?void 0:C.createdAt)||0,"p",{locale:y}))),a.a.createElement(Jy,{message:C,showFileViewer:F})),!U&&a.a.createElement(Yv,{className:`sendbird-parent-message-info__context-menu ${H?"use-reaction":""} ${D?"sendbird-mouse-hover":""}`,channel:O,message:C,isByMe:E===(null==C||null===(u=C.sender)||void 0===u?void 0:u.userId),disableDeleteMessage:N.length>0,replyType:b,showEdit:W,showRemove:k,setSupposedHover:x,onMoveToParentMessage:()=>{w({message:C,channel:O})}}),H&&!U&&a.a.createElement(Xv,{className:"sendbird-parent-message-info__reaction-menu "+(D?"sendbird-mouse-hover":""),message:C,userId:E,emojiContainer:T,toggleReaction:S,setSupposedHover:x}),L&&a.a.createElement($y,{onCancel:()=>k(!1),onSubmit:()=>{null==M||M()},message:C}),P&&a.a.createElement(iO,{message:C,onClose:()=>F(!1),onDelete:()=>{A(C).then(()=>{F(!1)})}}),z&&a.a.createElement(CE,{parentRef:B,channel:O,message:C,userId:E,replyType:b,hideMenu:()=>{V(!1)},deleteMenuState:0===(null==N?void 0:N.length)?"ACTIVE":"HIDE",isReactionEnabled:H,isByMe:G,emojiContainer:T,showEdit:W,showRemove:k,toggleReaction:S,isOpenedFromThread:!0}))}function oO(e){let{className:t,channelName:n,renderActionIcon:i,onActionIconClick:s,onChannelNameClick:o}=e;const{stringSet:l}=rd(),c=Object(r.useMemo)(()=>"function"==typeof i?i({onActionIconClick:s}):null,[i]);return a.a.createElement("div",{className:"sendbird-thread-header "+t},a.a.createElement(hd,{className:"sendbird-thread-header__title",type:fd.H_2,color:pd.ONBACKGROUND_1},l.THREAD__HEADER_TITLE),a.a.createElement(Z_,{onClick:e=>null==o?void 0:o(e),disableUnderline:!0},a.a.createElement(hd,{className:"sendbird-thread-header__channel-name",type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},n)),c||a.a.createElement("div",{className:"sendbird-thread-header__action"},a.a.createElement(qp,{width:"32px",height:"32px",onClick:e=>s(e)},a.a.createElement(Bp,{type:zp.CLOSE,fillColor:Vp.ON_BACKGROUND_1,width:"22px",height:"22px"}))))}function lO(e){var t,n,i,o;let{className:c,userId:u,channel:d,message:h,disabled:f=!1,chainTop:p=!1,chainBottom:m=!1,isMentionEnabled:b=!1,isReactionEnabled:_=!1,disableQuoteMessage:g=!1,replyType:v,nicknamesMap:E,emojiContainer:y,showEdit:O,showRemove:C,showFileViewer:N,resendMessage:T,toggleReaction:S,onReplyInThread:I}=e;const A=au(),{isMobile:w}=Xp(),{dateLocale:M}=rd(),{config:j}=ku(),[R,U]=Object(r.useState)(!1),{disableUserProfile:L,renderUserProfile:k}=Object(r.useContext)(qm),D=Object(r.useRef)(null),x=u===(null==h||null===(t=h.sender)||void 0===t?void 0:t.userId)||"pending"===(null==h?void 0:h.sendingStatus)||"failed"===(null==h?void 0:h.sendingStatus),P=!("QUOTE_REPLY"!==v&&"THREAD"!==v||null==h||!h.parentMessageId||null==h||!h.parentMessage||g),F=R?"sendbird-mouse-hover":"",H=_&&!(null!=d&&d.isEphemeral),G=d.isGroupChannel()&&j.groupChannel.enableOgtag,B=Object(r.useRef)(null),[z,V]=Object(r.useState)(!1),q=Ug({onLongPress:()=>{w&&V(!0)}},{shouldPreventDefault:!1});return a.a.createElement("div",{className:`sendbird-thread-list-item-content ${c} ${x?"outgoing":"incoming"}`,ref:B},a.a.createElement("div",{className:`sendbird-thread-list-item-content__left ${H?"use-reaction":""} ${x?"outgoing":"incoming"}`},!x&&!m&&a.a.createElement(Tb,{menuTrigger:e=>{var t,n,r;return a.a.createElement(sb,{className:"sendbird-thread-list-item-content__left__avatar",src:(null==d||null===(t=d.members)||void 0===t||null===(n=t.find(e=>{var t;return(null==e?void 0:e.userId)===(null==h||null===(t=h.sender)||void 0===t?void 0:t.userId)}))||void 0===n?void 0:n.profileUrl)||(null==h||null===(r=h.sender)||void 0===r?void 0:r.profileUrl)||"",ref:D,width:"28px",height:"28px",onClick:()=>{L||null==e||e()}})},menuItems:e=>a.a.createElement(Ob,{parentRef:D,parentContainRef:D,closeDropdown:e,style:{paddingTop:"0px",paddingBottom:"0px"}},k?k({user:null==h?void 0:h.sender,close:e}):a.a.createElement(_b,{user:null==h?void 0:h.sender,onSuccess:e}))}),x&&!w&&a.a.createElement("div",{className:`sendbird-thread-list-item-content-menu ${H?"use-reaction":""} ${x?"outgoing":"incoming"} ${F}`},a.a.createElement(Yv,{className:"sendbird-thread-list-item-content-menu__normal-menu",channel:d,message:h,isByMe:x,replyType:v,disabled:f,showEdit:O,showRemove:C,resendMessage:T,setSupposedHover:U,onReplyInThread:I}),H&&a.a.createElement(Xv,{className:"sendbird-thread-list-item-content-menu__reaction-menu",message:h,userId:u,spaceFromTrigger:{},emojiContainer:y,toggleReaction:S,setSupposedHover:U}))),a.a.createElement("div",l({className:"sendbird-thread-list-item-content__middle"},w?s({},q):{}),!x&&!p&&!P&&a.a.createElement(hd,{className:"sendbird-thread-list-item-content__middle__sender-name",type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},(null==d||null===(n=d.members)||void 0===n||null===(i=n.find(e=>{var t;return(null==e?void 0:e.userId)===(null==h||null===(t=h.sender)||void 0===t?void 0:t.userId)}))||void 0===i?void 0:i.nickname)||bu(h)),a.a.createElement("div",{className:lu(["sendbird-thread-list-item-content__middle__body-container"])},x&&!m&&a.a.createElement("div",{className:lu(["sendbird-thread-list-item-content__middle__body-container__created-at","left",F])},a.a.createElement("div",{className:"sendbird-thread-list-item-content__middle__body-container__created-at__component-container"},a.a.createElement(W_,{message:h,channel:d}))),G&&Xc(h)?a.a.createElement(gE,{className:"sendbird-thread-list-item-content__middle__message-item-body",message:h,isByMe:x,isMentionEnabled:b,isReactionEnabled:H}):Zc(h)&&a.a.createElement(mE,{className:"sendbird-thread-list-item-content__middle__message-item-body",message:h,isByMe:x,isMentionEnabled:b,isReactionEnabled:H}),nu(h)&&a.a.createElement(wE,{className:"sendbird-thread-list-item-content__middle__message-item-body",message:h,channelUrl:null==d?void 0:d.url,isByMe:x,isReactionEnabled:H}),iu(h)===A.FILE&&a.a.createElement(bE,{className:"sendbird-thread-list-item-content__middle__message-item-body",message:h,isByMe:x,isReactionEnabled:H,truncateLimit:x?18:14}),$c(h)&&a.a.createElement(_E,{className:"sendbird-thread-list-item-content__middle__message-item-body",message:h,isByMe:x,isReactionEnabled:H,showFileViewer:N,style:{width:w?"100%":"200px",height:"148px"}}),iu(h)===A.UNKNOWN&&a.a.createElement(vE,{className:"sendbird-thread-list-item-content__middle__message-item-body",message:h,isByMe:x,isReactionEnabled:H}),H&&(null==h||null===(o=h.reactions)||void 0===o?void 0:o.length)>0&&a.a.createElement("div",{className:lu(["sendbird-thread-list-item-content-reactions",!x||$c(h)||G&&Xc(h)?"":"primary"])},a.a.createElement(cE,{userId:u,message:h,channel:d,isByMe:x,emojiContainer:y,memberNicknamesMap:E,toggleReaction:S})),!x&&!m&&a.a.createElement(hd,{className:lu(["sendbird-thread-list-item-content__middle__body-container__created-at","right",F]),type:fd.CAPTION_3,color:pd.ONBACKGROUND_2},U_((null==h?void 0:h.createdAt)||0,"p",{locale:M})))),a.a.createElement("div",{className:`sendbird-thread-list-item-content__right ${p?"chain-top":""} ${x?"outgoing":"incoming"}`},!x&&!w&&a.a.createElement("div",{className:"sendbird-thread-list-item-content-menu "+F},H&&a.a.createElement(Xv,{className:"sendbird-thread-list-item-content-menu__reaction-menu",message:h,userId:u,spaceFromTrigger:{},emojiContainer:y,toggleReaction:S,setSupposedHover:U}),a.a.createElement(Yv,{className:"sendbird-thread-list-item-content-menu__normal-menu",channel:d,message:h,isByMe:x,replyType:v,disabled:f,showRemove:C,resendMessage:T,setSupposedHover:U,onReplyInThread:I}))),z&&a.a.createElement(CE,{parentRef:B,channel:d,message:h,userId:u,replyType:v,hideMenu:()=>{V(!1)},isReactionEnabled:_,isByMe:x,emojiContainer:y,showEdit:O,showRemove:C,toggleReaction:S,isOpenedFromThread:!0}))}function cO(e){var t,n,i,s;let{className:o,message:l,chainTop:c,chainBottom:u,hasSeparator:d,renderCustomSeparator:h,handleScroll:f}=e;const{stores:p,config:m}=ku(),{isReactionEnabled:b,isMentionEnabled:_,isOnline:g,replyType:v,userMention:E,logger:y}=m,O=null==p||null===(t=p.userStore)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.userId,{dateLocale:C}=rd(),N=null==Cv?void 0:Cv(),{currentChannel:T,nicknamesMap:S,emojiContainer:I,toggleReaction:A,threadListState:w,updateMessage:M,resendMessage:j,deleteMessage:R,isMuted:U,isChannelFrozen:L}=N,k=null==N?void 0:N.message,[D,x]=Object(r.useState)(!1),[P,F]=Object(r.useState)(!1),[H,G]=Object(r.useState)(!1),B=vg({globalLevel:b,isSuper:T.isSuper,isBroadcast:T.isBroadcast}),z=Object(r.useRef)(null);Object(r.useLayoutEffect)(()=>{var e;(null==k?void 0:k.messageId)===(null==l?void 0:l.messageId)&&null!=z&&z.current&&(null===(e=z.current)||void 0===e||e.scrollIntoView({block:"center",inline:"center"}))},[k,null==z?void 0:z.current]),Object(r.useLayoutEffect)(()=>{null==f||f()},[D,null==l||null===(i=l.reactions)||void 0===i?void 0:i.length]);const V=Object(r.useRef)(null),[q,K]=Object(r.useState)(""),[W,Y]=Object(r.useState)([]),[Q,X]=Object(r.useState)([]),[Z,$]=Object(r.useState)(null),[J,ee]=Object(r.useState)(null),[te,ne]=Object(r.useState)([]),re=g&&_&&q.length>0&&!U&&!(L&&T.myRole!==Wv),ae=xE({ref:V},{logger:y}),ie=(null==ae?void 0:ae.length)<(null==E?void 0:E.maxMentionCount);Object(r.useEffect)(()=>{Y(W.filter(e=>{let{userId:t}=e;const n=Q.indexOf(t);return!(n<0)&&(Q.splice(n,1),!0)}))},[Q]);const se=!(w===lv.INITIALIZED)||!g||U||L,oe=Object(r.useMemo)(()=>{if("function"==typeof h)return null==h?void 0:h({message:l})},[l,h]);return D&&l.isUserMessage()?a.a.createElement(a.a.Fragment,null,re&&a.a.createElement(Tv,{targetNickname:q,inputEvent:Z,onUserItemClick:e=>{e&&Y([...W,e]),K(""),ee(e),$(null)},onFocusItemChange:()=>{$(null)},onFetchUsers:e=>{ne(e)},ableAddMention:ie,maxMentionCount:null==E?void 0:E.maxMentionCount,maxSuggestionCount:null==E?void 0:E.maxSuggestionCount}),a.a.createElement(Kv,{isEdit:!0,channel:T,disabled:se,ref:V,mentionSelectedUser:J,isMentionEnabled:_,message:l,onStartTyping:()=>{var e;null==T||null===(e=T.startTyping)||void 0===e||e.call(T)},onUpdateMessage:e=>{var t;let{messageId:n,message:r,mentionTemplate:a}=e;M({messageId:n,message:r,mentionedUsers:W,mentionTemplate:a}),x(!1),null==T||null===(t=T.endTyping)||void 0===t||t.call(T)},onCancelEdit:()=>{var e;K(""),Y([]),X([]),ne([]),x(!1),null==T||null===(e=T.endTyping)||void 0===e||e.call(T)},onUserMentioned:e=>{(null==J?void 0:J.userId)===(null==e?void 0:e.userId)&&(ee(null),K(""))},onMentionStringChange:e=>{K(e)},onMentionedUserIdsUpdated:e=>{X(e)},onKeyDown:e=>!!(re&&(null==te?void 0:te.length)>0&&(e.key===Zg&&ie||e.key===$g||e.key===Jg))&&($(e),!0)})):a.a.createElement("div",{ref:z,className:"sendbird-thread-list-item "+o},d&&(null==l?void 0:l.createdAt)&&(oe||a.a.createElement(Sv,null,a.a.createElement(hd,{type:fd.CAPTION_2,color:pd.ONBACKGROUND_2},U_(null==l?void 0:l.createdAt,"MMM dd, yyyy",{locale:C})))),a.a.createElement(lO,{userId:O,channel:T,message:l,chainTop:c,chainBottom:u,isReactionEnabled:B,isMentionEnabled:_,disableQuoteMessage:!0,replyType:v,nicknamesMap:S,emojiContainer:I,resendMessage:j,showRemove:F,showFileViewer:G,toggleReaction:A,showEdit:x}),P&&a.a.createElement($y,{message:l,onCancel:()=>F(!1)}),H&&a.a.createElement(iO,{message:l,isByMe:(null==l||null===(s=l.sender)||void 0===s?void 0:s.userId)===O,onClose:()=>G(!1),onDelete:()=>{R(l),G(!1)}}))}var uO=n(7);function dO(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function hO(e){dO(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===Object(uO.a)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function fO(e){dO(1,arguments);var t=hO(e);return t.setHours(0,0,0,0),t}function pO(e){let{className:t,allThreadMessages:n,renderMessage:i,renderCustomSeparator:s,scrollRef:o,scrollBottom:l}=e;const{config:c}=ku(),{replyType:u,userId:d}=c,{currentChannel:h}=Cv(),f=Object(r.useMemo)(()=>e=>{let{message:t,chainTop:n,chainBottom:r,hasSeparator:a}=e;return"function"==typeof i?i({message:t,chainTop:n,chainBottom:r,hasSeparator:a}):null},[i]);return a.a.createElement("div",{className:"sendbird-thread-list "+t},n.map((e,t)=>{var r;const i=(null==e||null===(r=e.sender)||void 0===r?void 0:r.userId)===d,c=n[t-1],p=n[t+1],[m,b]=((e,t,n,r,a)=>{if("THREAD"===a&&null!=t&&t.threadInfo)return[!1,!1];const i=(null==t?void 0:t.sendingStatus)||"",s="pending"!==i&&"failed"!==i;return[bv(e,t,r)&&s,bv(t,n,r)&&s]})(c,e,p,h,u),_=!((null==c?void 0:c.createdAt)>0&&function(e,t){dO(2,arguments);var n=fO(e),r=fO(t);return n.getTime()===r.getTime()}(null==e?void 0:e.createdAt,null==c?void 0:c.createdAt));return a.a.createElement(rE,{message:e,isByMe:i,key:null==e?void 0:e.messageId},f({message:e,chainTop:m,chainBottom:b,hasSeparator:_})||a.a.createElement(cO,{message:e,chainTop:m,chainBottom:b,hasSeparator:_,renderCustomSeparator:s,handleScroll:()=>{const e=null==o?void 0:o.current;if(e){const t=e.scrollHeight-e.scrollTop-e.offsetHeight;l<t&&(e.scrollTop+=t-l)}}}))}))}const mO=(e,t)=>{const{className:n,renderFileUploadIcon:i,renderVoiceMessageIcon:s,renderSendMessageIcon:o}=e,l=e.disabled,{config:c}=ku(),{stringSet:u}=rd(),{isMentionEnabled:d,isOnline:h,userMention:f,isVoiceMessageEnabled:p,logger:m}=c,{currentChannel:b,parentMessage:_,sendMessage:g,sendFileMessage:v,sendVoiceMessage:E,isMuted:y,isChannelFrozen:O,allThreadMessages:C}=Cv(),N=Object(r.useRef)(),T=l||y||!((null==b?void 0:b.myRole)===Wv)&&O||null===_,[S,I]=Object(r.useState)(""),[A,w]=Object(r.useState)([]),[M,j]=Object(r.useState)([]),[R,U]=Object(r.useState)(null),[L,k]=Object(r.useState)([]),[D,x]=Object(r.useState)(null),[P,F]=Object(r.useState)(!1),H=h&&d&&S.length>0&&!cg(b)&&!ug(b)&&!(null!=b&&b.isBroadcast);Object(r.useEffect)(()=>{F(!1)},[null==b?void 0:b.url]);const G=xE({ref:t||N},{logger:m}),B=(null==G?void 0:G.length)<(null==f?void 0:f.maxMentionCount);return Object(r.useEffect)(()=>{w(A.filter(e=>{let{userId:t}=e;const n=M.indexOf(t);return!(n<0)&&(M.splice(n,1),!0)}))},[M]),null!=b&&b.isBroadcast&&(null==b?void 0:b.myRole)!==Wv?null:a.a.createElement("div",{className:`sendbird-thread-message-input${P?"--voice-message":""} ${n}`},H&&a.a.createElement(Tv,{targetNickname:S,inputEvent:D,onUserItemClick:e=>{e&&w([...A,e]),I(""),U(e),x(null)},onFocusItemChange:()=>{x(null)},onFetchUsers:e=>{k(e)},ableAddMention:B,maxMentionCount:null==f?void 0:f.maxMentionCount,maxSuggestionCount:null==f?void 0:f.maxSuggestionCount}),P?a.a.createElement(iy,{channel:b,onSubmitClick:(e,t)=>{E(e,t,_),F(!1)},onCancelClick:()=>{F(!1)}}):a.a.createElement(Kv,{className:"sendbird-thread-message-input__message-input",messageFieldId:"sendbird-message-input-text-field--thread",disabled:T,channel:b,setMentionedUsers:w,channelUrl:null==b?void 0:b.url,mentionSelectedUser:R,isMentionEnabled:d,isVoiceMessageEnabled:p,onVoiceMessageIconClick:()=>{F(!0)},renderFileUploadIcon:i,renderVoiceMessageIcon:s,renderSendMessageIcon:o,ref:t||N,placeholder:(null==b?void 0:b.isFrozen)&&!((null==b?void 0:b.myRole)===Wv)&&u.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||(null==b?void 0:b.myMutedState)===te.C.MUTED&&u.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT||(C.length>0?u.THREAD__INPUT__REPLY_TO_THREAD:u.THREAD__INPUT__REPLY_IN_THREAD),onStartTyping:()=>{var e;null==b||null===(e=b.startTyping)||void 0===e||e.call(b)},onSendMessage:e=>{var t;let{message:n,mentionTemplate:r}=e;g({message:n,mentionedUsers:A,mentionTemplate:r,quoteMessage:_}),I(""),w([]),null==b||null===(t=b.endTyping)||void 0===t||t.call(b)},onFileUpload:e=>{v(e,_)},onUserMentioned:e=>{(null==R?void 0:R.userId)===(null==e?void 0:e.userId)&&(U(null),I(""))},onMentionStringChange:e=>{I(e)},onMentionedUserIdsUpdated:e=>{j(e)},onKeyDown:e=>!!(H&&(null==L?void 0:L.length)>0&&(e.key===Zg&&B||e.key===$g||e.key===Jg))&&(x(e),!0)}))};var bO=a.a.forwardRef(mO);const _O=e=>{var t,n,i,s;let{renderHeader:o,renderParentMessageInfo:l,renderMessage:c,renderMessageInput:u,renderCustomSeparator:d,renderParentMessageInfoPlaceholder:h,renderThreadListPlaceHolder:f,renderFileUploadIcon:p,renderVoiceMessageIcon:m,renderSendMessageIcon:b}=e;const{stores:_}=ku(),g=null==_||null===(t=_.sdkStore)||void 0===t||null===(n=t.sdk)||void 0===n||null===(i=n.currentUser)||void 0===i?void 0:i.userId,{stringSet:v}=rd(),{currentChannel:E,allThreadMessages:y,parentMessage:O,parentMessageState:C,threadListState:N,hasMorePrev:T,hasMoreNext:S,fetchPrevThreads:I,fetchNextThreads:A,onHeaderActionClick:w,onMoveToParentMessage:M}=Cv(),j=y.length,R=g===(null==O||null===(s=O.sender)||void 0===s?void 0:s.userId),U=(e=>{let{renderHeader:t}=e;return Object(r.useMemo)(()=>"function"==typeof t?t():null,[t])})({renderHeader:o}),L=(e=>{let{parentMessage:t,parentMessageState:n,renderParentMessageInfo:i,renderParentMessageInfoPlaceholder:s}=e;return Object(r.useMemo)(()=>{if(n===ov.NIL||n===ov.LOADING||n===ov.INVALID){if("function"==typeof s)return s(n);switch(n){case ov.NIL:return a.a.createElement(qg,{className:"sendbird-thread-ui__parent-message-info placeholder-nil",type:Vg.NO_RESULTS,iconSize:"64px"});case ov.LOADING:return a.a.createElement(qg,{className:"sendbird-thread-ui__parent-message-info placeholder-loading",type:Vg.LOADING,iconSize:"64px"});case ov.INVALID:return a.a.createElement(qg,{className:"sendbird-thread-ui__parent-message-info placeholder-invalid",type:Vg.WRONG,iconSize:"64px"});default:return null}}else if(n===ov.INITIALIZED&&"function"==typeof i)return i();return null},[t,n,i,s])})({parentMessage:O,parentMessageState:C,renderParentMessageInfo:l,renderParentMessageInfoPlaceholder:h}),k=(e=>{let{threadListState:t,renderThreadListPlaceHolder:n}=e;return Object(r.useMemo)(()=>{if(t===lv.NIL||t===lv.LOADING||t===lv.INVALID){if("function"==typeof n)return n(t);switch(t){case lv.LOADING:return a.a.createElement(qg,{className:"sendbird-thread-ui__thread-list placeholder-loading",type:Vg.LOADING,iconSize:"64px"});case lv.INVALID:return a.a.createElement(qg,{className:"sendbird-thread-ui__thread-list placeholder-invalid",type:Vg.WRONG,iconSize:"64px"});case lv.NIL:return a.a.createElement(a.a.Fragment,null);default:return null}}return null},[t,n])})({threadListState:N,renderThreadListPlaceHolder:f}),[D,x]=Object(r.useState)(0),P=Object(r.useRef)(null);return a.a.createElement("div",{className:"sendbird-thread-ui"},U||a.a.createElement(oO,{className:"sendbird-thread-ui__header",channelName:Qg(E,g,v),onActionIconClick:w,onChannelNameClick:()=>{null==M||M({message:O,channel:E})}}),a.a.createElement("div",{className:"sendbird-thread-ui--scroll",ref:P,onScroll:e=>{var t;const n=e.target,{scrollTop:r,clientHeight:a,scrollHeight:i}=n,s=null===(t=P.current)||void 0===t?void 0:t.querySelectorAll(".sendbird-thread-list-item"),o=null==s?void 0:s[0];if(dv(r,0,10)&&T&&I(e=>{if(e)try{var t;null==o||null===(t=o.scrollIntoView)||void 0===t||t.call(o,{block:"start",inline:"nearest"})}catch(e){}}),dv(a+r,i,10)&&S){const e=r;A(t=>{if(t)try{n.scrollTop=e,P.current.scrollTop=e}catch(e){}})}if(null!=P&&P.current){const e=null==P?void 0:P.current;x(e.scrollHeight-e.scrollTop-e.offsetHeight)}}},a.a.createElement(rE,{message:O,isByMe:R},L||a.a.createElement(sO,{className:"sendbird-thread-ui__parent-message-info"})),j>0&&a.a.createElement("div",{className:"sendbird-thread-ui__reply-counts"},a.a.createElement(hd,{type:fd.BODY_1,color:pd.ONBACKGROUND_3},`${j} ${j>1?v.THREAD__THREAD_REPLIES:v.THREAD__THREAD_REPLY}`)),k||a.a.createElement(pO,{className:"sendbird-thread-ui__thread-list",allThreadMessages:y,renderMessage:c,renderCustomSeparator:d,scrollRef:P,scrollBottom:D})),(null==u?void 0:u())||a.a.createElement(bO,{className:"sendbird-thread-ui__message-input",renderFileUploadIcon:p,renderVoiceMessageIcon:m,renderSendMessageIcon:b}))},gO=e=>{const{className:t,channelUrl:n,message:r,onHeaderActionClick:i,onMoveToParentMessage:s,renderHeader:o,renderParentMessageInfo:l,renderMessage:c,renderMessageInput:u,renderCustomSeparator:d,renderParentMessageInfoPlaceholder:h,renderThreadListPlaceHolder:f,renderFileUploadIcon:p,renderVoiceMessageIcon:m,renderSendMessageIcon:b}=e;return a.a.createElement("div",{className:"sendbird-thread "+t},a.a.createElement(Ov,{channelUrl:n,message:r,onHeaderActionClick:i,onMoveToParentMessage:s},a.a.createElement(_O,{renderHeader:o,renderParentMessageInfo:l,renderMessage:c,renderMessageInput:u,renderCustomSeparator:d,renderParentMessageInfoPlaceholder:h,renderThreadListPlaceHolder:f,renderFileUploadIcon:p,renderVoiceMessageIcon:m,renderSendMessageIcon:b})))},vO=e=>{const{isReactionEnabled:t,replyType:n,isMessageGroupingEnabled:i,allowProfileEdit:s,showSearchIcon:o,onProfileEditSuccess:l,disableAutoSelect:c,currentChannel:u,setCurrentChannel:d,showSettings:h,setShowSettings:f,showSearch:p,setShowSearch:m,highlightedMessage:b,setHighlightedMessage:_,startingPoint:g,setStartingPoint:v,showThread:E,setShowThread:y,threadTargetMessage:O,setThreadTargetMessage:C}=e,[N,T]=Object(r.useState)(null);return a.a.createElement("div",{className:"sendbird-app__wrap"},a.a.createElement("div",{className:"sendbird-app__channellist-wrap"},a.a.createElement(Wg,{allowProfileEdit:s,activeChannelUrl:null==u?void 0:u.url,onProfileEditSuccess:l,disableAutoSelect:c,onChannelSelect:e=>{null==v||v(null),null==_||_(null),d(e||null)}})),a.a.createElement("div",{className:`\n          ${h?"sendbird-app__conversation--settings-open":""}\n          ${p?"sendbird-app__conversation--search-open":""}\n          sendbird-app__conversation-wrap\n        `},a.a.createElement(cy,{channelUrl:(null==u?void 0:u.url)||"",onChatHeaderActionClick:()=>{m(!1),y(!1),f(!h)},onSearchClick:()=>{f(!1),y(!1),m(!p)},onReplyInThread:e=>{let{message:t}=e;f(!1),m(!1),"THREAD"===n&&(C(t),y(!0))},onQuoteMessageClick:e=>{let{message:t}=e;f(!1),m(!1),"THREAD"===n&&(C(t),y(!0))},onMessageAnimated:()=>{T(null)},onMessageHighlighted:()=>{null==_||_(null)},showSearchIcon:o,startingPoint:g,animatedMessage:N,highlightedMessage:b,isReactionEnabled:t,replyType:n,isMessageGroupingEnabled:i})),h&&a.a.createElement("div",{className:"sendbird-app__settingspanel-wrap"},a.a.createElement(Gy,{className:"sendbird-channel-settings",channelUrl:(null==u?void 0:u.url)||"",onCloseClick:()=>{f(!1)}})),p&&a.a.createElement("div",{className:"sendbird-app__searchpanel-wrap"},a.a.createElement(Zy,{channelUrl:(null==u?void 0:u.url)||"",onResultClick:e=>{e.messageId===b?(null==_||_(null),setTimeout(()=>{null==_||_(e.messageId)})):(null==v||v(e.createdAt),null==_||_(e.messageId))},onCloseClick:()=>{m(!1)}})),E&&a.a.createElement(gO,{className:"sendbird-app__thread",channelUrl:(null==u?void 0:u.url)||"",message:O,onHeaderActionClick:()=>{y(!1)},onMoveToParentMessage:e=>{let{message:t,channel:n}=e;(null==n?void 0:n.url)!==(null==u?void 0:u.url)&&d(n),(null==t?void 0:t.messageId)!==N&&(null==v||v(null==t?void 0:t.createdAt)),setTimeout(()=>{T(null==t?void 0:t.messageId)},500)}}))};var EO=function(e){return e.CHANNEL_LIST="CHANNEL_LIST",e.CHANNEL="CHANNEL",e.CHANNEL_SETTINGS="CHANNEL_SETTINGS",e.MESSAGE_SEARCH="MESSAGE_SEARCH",e.THREAD="THREAD",e}(EO||{});const yO=e=>{var t,n,i;const{replyType:s,isMessageGroupingEnabled:o,allowProfileEdit:l,isReactionEnabled:c,showSearchIcon:u,onProfileEditSuccess:d,currentChannel:h,setCurrentChannel:f,highlightedMessage:p,setHighlightedMessage:m,startingPoint:b,setStartingPoint:_,threadTargetMessage:g,setThreadTargetMessage:v}=e,[E,y]=Object(r.useState)(EO.CHANNEL_LIST),[O,C]=Object(r.useState)(null),N=ku(),T=null==N||null===(t=N.stores)||void 0===t||null===(n=t.sdkStore)||void 0===n?void 0:n.sdk,S=null==N||null===(i=N.config)||void 0===i?void 0:i.userId,{pause:I}=zu(),A=(e,t)=>{null==_||_((null==e?void 0:e.createdAt)||null),setTimeout(()=>{null==t||t((null==e?void 0:e.messageId)||null)},500)};return Object(r.useEffect)(()=>{E!==EO.CHANNEL&&A(null,()=>C(null))},[E]),Object(r.useEffect)(()=>{var e;const t=es();if(null!=T&&null!==(e=T.groupChannel)&&void 0!==e&&e.addGroupChannelHandler){var n;const e=new Tc({onUserBanned:(e,t)=>{e.url===(null==h?void 0:h.url)&&(null==t?void 0:t.userId)===S&&y(EO.CHANNEL_LIST)},onChannelDeleted:e=>{e===(null==h?void 0:h.url)&&y(EO.CHANNEL_LIST)},onUserLeft:(e,t)=>{e.url===(null==h?void 0:h.url)&&(null==t?void 0:t.userId)===S&&y(EO.CHANNEL_LIST)}});null==T||null===(n=T.groupChannel)||void 0===n||n.addGroupChannelHandler(t,e)}return()=>{var e,n;null==T||null===(e=T.groupChannel)||void 0===e||null===(n=e.removeGroupChannelHandler)||void 0===n||n.call(e,t)}},[T]),Object(r.useEffect)(()=>{E===EO.THREAD&&y(EO.CHANNEL)},[null==h?void 0:h.url]),a.a.createElement("div",{className:"sb_mobile"},E===EO.CHANNEL_LIST&&a.a.createElement("div",{className:"sb_mobile__panelwrap"},a.a.createElement(Wg,{onProfileEditSuccess:d,onChannelSelect:e=>{f(e),y(EO.CHANNEL)},allowProfileEdit:l,disableAutoSelect:!0})),E===EO.CHANNEL&&a.a.createElement("div",{className:"sb_mobile__panelwrap"},a.a.createElement(cy,{replyType:s,channelUrl:(null==h?void 0:h.url)||"",onSearchClick:()=>{y(EO.MESSAGE_SEARCH)},onBackClick:()=>{y(EO.CHANNEL_LIST),I("ALL")},isReactionEnabled:c,showSearchIcon:u,isMessageGroupingEnabled:o,startingPoint:b,animatedMessage:O,highlightedMessage:p,onChatHeaderActionClick:()=>{y(EO.CHANNEL_SETTINGS)},onReplyInThread:e=>{let{message:t}=e;"THREAD"===s&&(y(EO.THREAD),v(t))},onQuoteMessageClick:e=>{let{message:t}=e;"THREAD"===s&&(v(t),y(EO.THREAD))}})),E===EO.CHANNEL_SETTINGS&&a.a.createElement("div",{className:"sb_mobile__panelwrap"},a.a.createElement(Gy,{channelUrl:(null==h?void 0:h.url)||"",onCloseClick:()=>{y(EO.CHANNEL)},onLeaveChannel:()=>{y(EO.CHANNEL_LIST)}})),E===EO.MESSAGE_SEARCH&&a.a.createElement("div",{className:"sb_mobile__panelwrap"},a.a.createElement(Zy,{channelUrl:(null==h?void 0:h.url)||"",onCloseClick:()=>{y(EO.CHANNEL)},onResultClick:e=>{y(EO.CHANNEL),A(e,e=>{null==m||m(e)})}})),E===EO.THREAD&&a.a.createElement("div",{className:"sb_mobile__panelwrap"},a.a.createElement(gO,{channelUrl:(null==h?void 0:h.url)||"",message:g,onHeaderActionClick:()=>{y(EO.CHANNEL),I("ALL")},onMoveToParentMessage:e=>{let{message:t,channel:n}=e;f(n),A(t,e=>{y(EO.CHANNEL),C(e)})}})))},OO=e=>{var t,n,i;const{isMessageGroupingEnabled:s,allowProfileEdit:o,onProfileEditSuccess:l,disableAutoSelect:c,currentChannel:u,setCurrentChannel:d}=e,h=ku(),f=null==h?void 0:h.config,[p,m]=Object(r.useState)(!1),[b,_]=Object(r.useState)(null),[g,v]=Object(r.useState)(!1),[E,y]=Object(r.useState)(!1),[O,C]=Object(r.useState)(null),[N,T]=Object(r.useState)(null),{isMobile:S}=Xp(),I=null!==(t=e.replyType)&&void 0!==t?t:null==f?void 0:f.replyType,A=null!==(n=e.isReactionEnabled)&&void 0!==n?n:null==f?void 0:f.isReactionEnabled,w=null!==(i=e.showSearchIcon)&&void 0!==i?i:null==f?void 0:f.showSearchIcon;return a.a.createElement(a.a.Fragment,null,S?a.a.createElement(yO,{replyType:I,showSearchIcon:w,isReactionEnabled:A,isMessageGroupingEnabled:s,allowProfileEdit:o,onProfileEditSuccess:l,currentChannel:u,setCurrentChannel:d,highlightedMessage:O,setHighlightedMessage:C,startingPoint:N,setStartingPoint:T,threadTargetMessage:b,setThreadTargetMessage:_}):a.a.createElement(vO,{replyType:I,isReactionEnabled:A,showSearchIcon:w,isMessageGroupingEnabled:s,allowProfileEdit:o,onProfileEditSuccess:l,disableAutoSelect:c,currentChannel:u,setCurrentChannel:d,showThread:p,setShowThread:m,threadTargetMessage:b,setThreadTargetMessage:_,showSettings:g,setShowSettings:v,showSearch:E,setShowSearch:y,highlightedMessage:O,setHighlightedMessage:C,startingPoint:N,setStartingPoint:T}))};function CO(e){const{appId:t,userId:n,accessToken:i,customApiHost:s,customWebSocketHost:o,breakpoint:l,theme:c,userListQuery:u,nickname:d,profileUrl:h,dateLocale:f,config:p={},isReactionEnabled:m,isMentionEnabled:b,isVoiceMessageEnabled:_,voiceRecord:g,replyType:v,isMessageGroupingEnabled:E,colorSet:y,stringSet:O,allowProfileEdit:C,disableUserProfile:N,disableMarkAsDelivered:T,renderUserProfile:S,showSearchIcon:I,onProfileEditSuccess:A,imageCompression:w,disableAutoSelect:M,uikitMultipleFilesMessageLimit:j,isTypingIndicatorEnabledOnChannelList:R,isMessageReceiptStatusEnabledOnChannelList:U,uikitOptions:L,isUserIdUsedForNickname:k,sdkInitParams:D,customExtensionParams:x}=e,[P,F]=Object(r.useState)(null);return a.a.createElement(Lm,{stringSet:O,appId:t,userId:n,accessToken:i,customApiHost:s,customWebSocketHost:o,breakpoint:l,theme:c,nickname:d,profileUrl:h,dateLocale:f,userListQuery:u,config:p,colorSet:y,disableUserProfile:N,disableMarkAsDelivered:T,renderUserProfile:S,imageCompression:w,isReactionEnabled:m,isMentionEnabled:b,isVoiceMessageEnabled:_,voiceRecord:g,onUserProfileMessage:e=>{F(e)},uikitMultipleFilesMessageLimit:j,isTypingIndicatorEnabledOnChannelList:R,isMessageReceiptStatusEnabledOnChannelList:U,replyType:v,showSearchIcon:I,uikitOptions:L,isUserIdUsedForNickname:k,sdkInitParams:D,customExtensionParams:x},a.a.createElement(OO,{isReactionEnabled:m,replyType:v,showSearchIcon:I,isMessageGroupingEnabled:E,allowProfileEdit:C,onProfileEditSuccess:A,disableAutoSelect:M,currentChannel:P,setCurrentChannel:F}))}CO.propTypes={appId:od.a.string.isRequired,userId:od.a.string.isRequired,accessToken:od.a.string,customApiHost:od.a.string,customWebSocketHost:od.a.string,theme:od.a.string,userListQuery:od.a.func,nickname:od.a.string,profileUrl:od.a.string,breakpoint:od.a.oneOf([od.a.string,od.a.bool]),allowProfileEdit:od.a.bool,disableUserProfile:od.a.bool,disableMarkAsDelivered:od.a.bool,renderUserProfile:od.a.func,onProfileEditSuccess:od.a.func,dateLocale:od.a.shape({}),config:od.a.shape({logLevel:od.a.oneOfType([od.a.string,od.a.arrayOf(od.a.string)]),isREMUnitEnabled:od.a.bool}),uikitMultipleFilesMessageLimit:od.a.number,uikitOptions:od.a.shape({}),isReactionEnabled:od.a.bool,replyType:od.a.oneOf(["NONE","QUOTE_REPLY","THREAD"]),showSearchIcon:od.a.bool,isMessageGroupingEnabled:od.a.bool,stringSet:od.a.objectOf(od.a.string),colorSet:od.a.objectOf(od.a.string),imageCompression:od.a.shape({compressionRate:od.a.number,resizingWidth:od.a.oneOfType([od.a.number,od.a.string]),resizingHeight:od.a.oneOfType([od.a.number,od.a.string])}),disableAutoSelect:od.a.bool,isMentionEnabled:od.a.bool,isVoiceMessageEnabled:od.a.bool,voiceRecord:od.a.shape({maxRecordingTime:od.a.number,minRecordingTime:od.a.number}),isTypingIndicatorEnabledOnChannelList:od.a.bool,isMessageReceiptStatusEnabledOnChannelList:od.a.bool,isUserIdUsedForNickname:od.a.bool,sdkInitParams:od.a.shape({}),customExtensionParams:od.a.shape({})},CO.defaultProps={accessToken:"",customApiHost:"",customWebSocketHost:"",theme:"light",nickname:"",profileUrl:"",userListQuery:null,breakpoint:null,dateLocale:null,allowProfileEdit:!1,onProfileEditSuccess:null,disableMarkAsDelivered:!1,renderUserProfile:null,config:{},voiceRecord:{maxRecordingTime:Lu.e,minRecordingTime:Lu.f},uikitMultipleFilesMessageLimit:null,isMessageGroupingEnabled:!0,stringSet:null,colorSet:null,imageCompression:{},disableAutoSelect:!1,uikitOptions:void 0,showSearchIcon:void 0,isMentionEnabled:void 0,isReactionEnabled:void 0,replyType:void 0,disableUserProfile:void 0,isVoiceMessageEnabled:void 0,isTypingIndicatorEnabledOnChannelList:void 0,isMessageReceiptStatusEnabledOnChannelList:void 0,isUserIdUsedForNickname:!0,sdkInitParams:void 0,customExtensionParams:void 0};n(16),n(17);function NO(e,t){return(NO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var TO=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,NO(t,n),r.prototype.render=function(){var e,t,n,r;return a.a.createElement(CO,{appId:null===(e=this.props.model)||void 0===e?void 0:e.sendbirdAppId,accessToken:null===(t=this.props.model)||void 0===t?void 0:t.accessToken,userId:null===(n=this.props.model)||void 0===n?void 0:n.userId,nickname:null===(r=this.props.model)||void 0===r?void 0:r.userNickname,theme:"light",useReaction:!0,useMessageGrouping:!0})},r}(r.Component)}]).default}));
//# sourceMappingURL=my-app.min.js.map