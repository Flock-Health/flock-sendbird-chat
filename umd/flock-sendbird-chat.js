/*!
 * flock-sendbird-chat v0.0.1
 * MIT Licensed
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("react"));
	else if(typeof define === 'function' && define.amd)
		define(["react"], factory);
	else if(typeof exports === 'object')
		exports["FlockChat"] = factory(require("react"));
	else
		root["FlockChat"] = factory(root["React"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE__1__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 	};
/******/
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		0: 0
/******/ 	};
/******/
/******/
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "" + chunkId + ".flock-sendbird-chat.js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 							error.name = 'ChunkLoadError';
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonpFlockChat"] = window["webpackJsonpFlockChat"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 9);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return oe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return q; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return Tr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return te; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return mr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return ts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return wr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return Yr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return Xr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return kr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return F; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return xe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return Ze; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return g; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return f; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return N; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return P; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return R; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return d; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return Zr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return js; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return Ue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return S; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return Ke; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "A", function() { return qs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "B", function() { return r; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C", function() { return w; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "D", function() { return yo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "E", function() { return p; });
/* unused harmony export a1 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "F", function() { return Hs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "G", function() { return M; });
/* unused harmony export a4 */
/* unused harmony export a5 */
/* unused harmony export a6 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H", function() { return V; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "I", function() { return u; });
/* unused harmony export a9 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "J", function() { return Ce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "K", function() { return pe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return Ie; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "M", function() { return j; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "N", function() { return so; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "O", function() { return ve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "P", function() { return lo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Q", function() { return Ur; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "R", function() { return I; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "S", function() { return $e; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "T", function() { return no; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "U", function() { return Ao; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "V", function() { return co; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "W", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "X", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y", function() { return Xs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Z", function() { return Js; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ab", function() { return to; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bb", function() { return eo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cb", function() { return $s; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "db", function() { return Ys; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "eb", function() { return Se; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fb", function() { return X; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gb", function() { return fe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hb", function() { return Ks; });
/* unused harmony export aZ */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ib", function() { return mo; });
/* unused harmony export aa */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jb", function() { return Ge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "kb", function() { return je; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lb", function() { return ue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mb", function() { return Mr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nb", function() { return y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ob", function() { return z; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pb", function() { return Kr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "qb", function() { return K; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rb", function() { return Pe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sb", function() { return Ne; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tb", function() { return le; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ub", function() { return Zs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "vb", function() { return W; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wb", function() { return A; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xb", function() { return G; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "yb", function() { return ao; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zb", function() { return Y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ab", function() { return Q; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bb", function() { return Ae; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cb", function() { return Je; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Db", function() { return os; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Eb", function() { return Xe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Fb", function() { return B; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Gb", function() { return nt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hb", function() { return uo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ib", function() { return s; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Jb", function() { return To; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Kb", function() { return No; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lb", function() { return wo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mb", function() { return So; });
/* unused harmony export b4 */
/* unused harmony export b5 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Nb", function() { return ie; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ob", function() { return xs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pb", function() { return Oe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Qb", function() { return be; });
/* unused harmony export ba */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rb", function() { return H; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sb", function() { return O; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tb", function() { return he; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ub", function() { return C; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vb", function() { return et; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wb", function() { return io; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Xb", function() { return Be; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Yb", function() { return Ws; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Zb", function() { return cs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ac", function() { return ro; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bc", function() { return _e; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cc", function() { return de; });
/* unused harmony export bn */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dc", function() { return Me; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ec", function() { return ze; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fc", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gc", function() { return ce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hc", function() { return re; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ic", function() { return De; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jc", function() { return n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "kc", function() { return Re; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lc", function() { return k; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mc", function() { return ge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nc", function() { return Ee; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "oc", function() { return me; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pc", function() { return Te; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "qc", function() { return $; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rc", function() { return Qe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sc", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tc", function() { return a; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "uc", function() { return gr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "vc", function() { return v; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wc", function() { return o; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xc", function() { return se; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "yc", function() { return l; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zc", function() { return Qr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ac", function() { return Oo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bc", function() { return Lo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cc", function() { return Br; });
var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};function i(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function r(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}function s(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function c(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var u,l="4.12.3",h=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();!function(e){e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.APPLICATION_NOT_FOUND=400304]="APPLICATION_NOT_FOUND",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE=400940]="NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.INVALID_REQUIRED_FORM_VALUE=400105]="INVALID_REQUIRED_FORM_VALUE",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE=901500]="NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE",e[e.ERR_DUPLICATED_DATA=400202]="ERR_DUPLICATED_DATA",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.XMLHTTPREQUEST_NOT_SUPPORTED=700800]="XMLHTTPREQUEST_NOT_SUPPORTED",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED=800270]="ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR",e[e.USER_DEACTIVATED=900021]="USER_DEACTIVATED"}(u||(u={}));var d,_,f,p,E,g=function(e){return!(e instanceof v&&!e.shouldThrowOutside)},v=function(e){function n(t){var i=t.code,r=void 0===i?0:i,s=t.message,o=void 0===s?"":s,a=e.call(this,o)||this;return a.shouldThrowOutside=!1,a._detail="",a.name="SendbirdError",a.code=r,Object.setPrototypeOf(a,n.prototype),a}return t(n,e),Object.defineProperty(n.prototype,"detail",{get:function(){return this._detail},enumerable:!1,configurable:!0}),n.prototype.setDetail=function(e){this._detail=e},Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===u.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===u.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===u.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===u.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===u.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===u.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isNetworkError",{get:function(){return this.code===u.NETWORK_ERROR||this.code===u.NETWORK_ROUTING_ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:u.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:u.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:u.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:u.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:u.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:u.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"xmlHttpRequestNotSupported",{get:function(){return new n({code:u.XMLHTTPREQUEST_NOT_SUPPORTED,message:"Cannot upload file. XMLHttpRequest is not defined in this environment."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:u.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:u.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:u.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:u.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:u.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:u.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:u.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:u.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:u.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:u.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:u.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:u.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:u.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:u.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:u.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:u.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:u.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:u.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:u.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"statLogUploadLimitExceededError",{get:function(){return new n({code:u.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED,message:"The upload request failed due to the retry count being exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"malformedDataError",{get:function(){return new n({code:u.MALFORMED_DATA,message:"Malformed data."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n}(Error),b=[u.CONNECTION_REQUIRED,u.NETWORK_ERROR,u.ACK_TIMEOUT,u.WEBSOCKET_CONNECTION_CLOSED,u.WEBSOCKET_CONNECTION_FAILED,u.FILE_UPLOAD_CANCEL_FAILED,u.REQUEST_CANCELED,u.INTERNAL_SERVER_ERROR,u.RATE_LIMIT_EXCEEDED,u.UNKNOWN_SERVER_ERROR,u.USER_DEACTIVATED],m=[u.WEBSOCKET_CONNECTION_CLOSED,u.WEBSOCKET_CONNECTION_FAILED,u.CONNECTION_REQUIRED],y=function(e,t){if(e!==t){var i=n({},e),r=n({},t);return(!i.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||i.messageId===r.messageId)&&((!i.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||i.reqId===r.reqId)&&(i.hasOwnProperty("messageId")&&delete i.messageId,i.hasOwnProperty("reqId")&&delete i.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(i)===JSON.stringify(r)))}return!0},w=function(e,t,n){return void 0===n&&(n=!1),!(!n||!D(t))||("string"!=typeof e?"object"==typeof e?S(e,t):T(e,t):typeof t===e)},S=function(e,t,n){return void 0===n&&(n=!1),!(!n||!D(t))||Object.values(e).includes(t)},T=function(e,t){return t instanceof e},N=function(e,t,n){return void 0===n&&(n=!1),!(!n||!D(t))||Array.isArray(t)&&t.every((function(t){return w(e,t)}))},C=function(e,t){return void 0===t&&(t=!1),!(!t||!D(e))||"number"==typeof e&&13===e.toString().length},A=function(e){return e>0&&b.indexOf(e)>=0},I=function(e){return e>0&&m.indexOf(e)>=0},k=function(e,t){if(void 0===t&&(t=!1),t&&D(e))return!0;var n="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!n){if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n},O=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=c([],a(e),!1).sort(),i=c([],a(t),!1).sort(),r=0;r<n.length;++r)if(n[r]!==i[r])return!1;return!0},D=function(e){return null==e},R=function(){function e(e){var t=void 0===e?{}:e,n=t.useMemberInfoInMessage,i=void 0===n||n,r=t.typingIndicatorInvalidateTime,s=void 0===r?1e4:r,o=t.typingIndicatorThrottle,a=void 0===o?1e3:o,c=t.websocketResponseTimeout,u=void 0===c?1e4:c,l=t.websocketPayloadDecompression,h=void 0===l||l,d=t.sessionTokenRefreshTimeout,_=void 0===d?60:d;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=a,this._websocketResponseTimeout=u,this._sessionTokenRefreshTimeout=_,this.websocketPayloadDecompression=h}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(e){w("boolean",e)&&(this._useMemberInfoInMessage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(e){w("number",e)&&(this._typingIndicatorInvalidateTime=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(e){w("number",e)&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(e){w("number",e)&&e>=5e3&&e<=3e4&&(this._websocketResponseTimeout=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(e){w("number",e)&&(e<60?e=60:e>1800&&(e=1800),this._sessionTokenRefreshTimeout=e)},enumerable:!1,configurable:!0}),e}(),L={encrypt:function(e){return e},decrypt:function(e){return e}},x=function(){function e(e){var t=e.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:this._keysAddress,value:c([],a(this._preference.keys()),!1)})];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(e,t){var n;return void 0===t&&(t=1),r(this,void 0,void 0,(function(){var i,r,a,c,u,l,h,d,_,f;return s(this,(function(s){switch(s.label){case 0:return this._version=t,this._keysAddress=e,i="".concat(e,".metadata.version"),[4,this._store.get(i)];case 1:return r=s.sent(),[4,this._store.get(e)];case 2:return a=null!==(n=s.sent())&&void 0!==n?n:[],!r||r.version<this._version?[4,this._resetPreferenceData(a,i)]:[3,4];case 3:return s.sent(),[3,11];case 4:s.trys.push([4,9,10,11]),c=o(a),u=c.next(),s.label=5;case 5:return u.done?[3,8]:(l=u.value,[4,this._store.get(l)]);case 6:(h=s.sent())&&this._preference.set(l,h),s.label=7;case 7:return u=c.next(),[3,5];case 8:return[3,11];case 9:return d=s.sent(),_={error:d},[3,11];case 10:try{u&&!u.done&&(f=c.return)&&f.call(c)}finally{if(_)throw _.error}return[7];case 11:return[2]}}))}))},e.prototype._resetPreferenceData=function(e,t){return r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this._preference=new Map,[4,this._store.removeMany(e)];case 1:return n.sent(),[4,this._store.set({key:t,value:{version:this._version}})];case 2:return n.sent(),[2]}}))}))},e.prototype.get=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this._preference.get(e)]}))}))},e.prototype.set=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=!this._preference.has(e),[4,this._store.set({key:e,value:t})];case 1:return i.sent(),this._preference.set(e,t),n?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.remove=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this._store.remove(e)];case 1:return t.sent(),this._preference.delete(e),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._store.removeMany(c([],a(this._preference.keys()),!1))];case 1:return e.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},e}(),U=function(){function e(e){var t=e.encryption,n=e.store,i=e.localCacheEnabled,r=e.localCacheConfig;this.store=n,this.preference=new x({store:n}),this.encryption=null!=t?t:L,this.localCacheEnabled=i,this.localCacheConfig=r}return e.prototype.replaceStore=function(e){this.store=e,this.preference=new x({store:e})},e}();!function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"}(d||(d={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(_||(_={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(f||(f={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(p||(p={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(E||(E={}));var P,M=function(){function e(e){var t=e.channel,n=e.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=n}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),F=function(){function e(e){var t=void 0===e?{}:e,n=t.maxSize,i=void 0===n?256:n,r=t.clearOrder,s=void 0===r?E.MESSAGE_COLLECTION_ACCESSED_AT:r,o=t.customClearOrderComparator,a=t.enableAutoResend,c=void 0===a||a;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(e,t){return e.channel.messageCollectionLastAccessedAt===t.channel.messageCollectionLastAccessedAt?e.channel.lastMessage&&!t.channel.lastMessage?1:!e.channel.lastMessage&&t.channel.lastMessage?-1:e.channel.lastMessage||t.channel.lastMessage?e.channel.lastMessage.createdAt-t.channel.lastMessage.createdAt:0:e.channel.messageCollectionLastAccessedAt>t.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),o?(this._clearOrder=s,this._customClearOrderComparator=o):this._clearOrder=E.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=c}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var e;return this._clearOrder===E.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:null!==(e=this._customClearOrderComparator)&&void 0!==e?e:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),e}();!function(e){e.FEED="feed",e.CHAT="chat"}(P||(P={}));var q,V,H,z,G,j,K,B,Q,W,Z,Y,X,J=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e}(),$=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},ee=function(){function e(e){var t=e.container;this._container={},this._container=t,this.key=$()}return e.prototype._register=function(e,t,n){var i;return e in this._container||(this._container[e]=new Map),null===(i=this._container[e])||void 0===i||i.set(this.key,{occurence:t,handler:n}),this},e.prototype.on=function(e,t){return this._register(e,-1,t)},e.prototype.once=function(e,t){return this._register(e,1,t)},e.prototype.close=function(){var e=this;Object.keys(this._container).forEach((function(t){var n;null===(n=e._container[t])||void 0===n||n.delete(e.key)}))},e}(),te=function(){function e(){this._container={}}return e.prototype.on=function(e,t){return new ee({container:this._container}).on(e,t)},e.prototype.once=function(e,t){return new ee({container:this._container}).once(e,t)},e.prototype.dispatch=function(e,t){var n,i,r=this._container[e];if(r){var s=[];try{for(var a=o(r.keys()),c=a.next();!c.done;c=a.next()){var u=c.value,l=r.get(u);l.handler(t),l.occurence>0&&(l.occurence--,0===l.occurence&&s.push(u))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}s.forEach((function(e){return r.delete(e)}))}},e}(),ne=function(){function e(){this._dispatcher=new te}return e.prototype.on=function(e){return this._dispatcher.on("event",e)},e.prototype.once=function(e){return this._dispatcher.once("event",e)},e.prototype.dispatch=function(e){this._dispatcher.dispatch("event",e)},e}(),ie=function(){},re=function(e){var t={};return e&&Object.keys(e).forEach((function(n){void 0===e[n]||Number.isNaN(e[n])||null===e[n]||(t[n]=e[n])})),t},se=function(e){if(null!=e){if("object"==typeof e){if(Array.isArray(e)){for(var t=c([],a(e),!1),n=0;n<t.length;n++)t[n]=se(t[n]);return t}return Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]})),e}return e}};!function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"}(q||(q={})),function(e){e.OPERATOR="operator",e.NONE="none"}(V||(V={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(H||(H={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(z||(z={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(G||(G={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(j||(j={})),function(e){e.USERS="users",e.CHANNEL="channel"}(K||(K={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(B||(B={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(Q||(Q={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(W||(W={})),function(e){e.INREVIEW="InReview",e.APPROVED="Approved"}(Z||(Z={})),function(e){e.HIGH="high",e.NORMAL="normal",e.LOW="low"}(Y||(Y={})),function(e){e.CREATED_AT="created_at",e.UPDATED_AT="updated_at"}(X||(X={}));var oe,ae="v3",ce="/".concat(ae,"/users"),ue="/".concat(ae,"/storage/file"),le="/".concat(ae,"/group_channels"),he="/".concat(ae,"/sdk/group_channels"),de="/".concat(ae,"/open_channels"),_e="/".concat(ae,"/sdk/open_channels"),fe="/".concat(ae,"/search"),pe="/".concat(ae,"/report"),Ee="/".concat(ae,"/emojis"),ge="/".concat(ae,"/emoji_categories"),ve="/".concat(ae,"/polls"),be="/".concat(ae,"/scheduled_messages"),me="/".concat(ae,"/sdk/ui_kit/configuration"),ye="/".concat(ae,"/sdk/statistics"),we="/".concat(ae,"/notifications"),Se="/".concat(ae,"/message_templates"),Te="/".concat(ae,"/sdk/push_delivery"),Ne=function(e){switch(e){case q.FEED:case q.GROUP:return le;case q.OPEN:return de;default:return null}},Ce=function(e){switch(e){case q.GROUP:return"".concat(pe,"/group_channels");case q.OPEN:return"".concat(pe,"/open_channels");default:return null}},Ae=function(e,t,n){var i,r;switch(e){case K.CHANNEL:return!0;case K.USERS:if(t)try{for(var s=o(t),a=s.next();!a.done;a=s.next()){if(a.value===n)return!0}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}return!1},Ie=function(e,t,n){var i,r,s,o,a=Ae(null!==(i=e.mentionType)&&void 0!==i?i:null,null!==(r=e.mentionedUserIds)&&void 0!==r?r:[],n),c=Ae(null!==(s=t.mentionType)&&void 0!==s?s:null,null!==(o=t.mentionedUserIds)&&void 0!==o?o:[],n);return!a&&c?1:a&&!c?-1:0},ke=function(e,t,n){var i,r=t||new FormData;for(var s in e)if(e.hasOwnProperty(s)){var o=e[s],a=n?"".concat(n,"[").concat(s,"]"):s;k(o)?r.append(a,o,null!==(i=o.name)&&void 0!==i?i:"filename"):"object"!=typeof o||null===o||Array.isArray(o)||o instanceof Blob?r.append(a,String(o)):r=ke(o,r,a)}return r};!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(oe||(oe={}));var Oe,De=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=$(),t}return t(n,e),n.prototype.encodeParams=function(e){var t=this;return null==e||""===e?encodeURIComponent(""):Array.isArray(e)?e.map((function(e){return t.encodeParams(e)})).join(","):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(String(e))},Object.defineProperty(n.prototype,"query",{get:function(){var e=this,t=re(this.params);return"?".concat(Object.keys(t).map((function(n){return"".concat(encodeURIComponent(n),"=").concat(e.encodeParams(t[n]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var e=re(this.params);return Object.keys(e).some((function(t){return k(e[t])}))?ke(e):JSON.stringify(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSessionKey",{get:function(){return void 0!==this.headers["Session-Key"]},enumerable:!1,configurable:!0}),n}(ie),Re=function(e){function i(t,n){var i=e.call(this)||this;return i._iid=t,i._payload=n,i}return t(i,e),Object.defineProperty(i.prototype,"payload",{get:function(){return n({},this._payload)},enumerable:!1,configurable:!0}),i.prototype.as=function(e){return new e(this._iid,this.payload)},i}(ie),Le=function(e){function n(t){var n=e.call(this)||this;return n.requestId=t,n}return t(n,e),n}(ie),xe=function(e){function n(t){var n=t.expires_in,i=t.reason,r=void 0===i?u.SESSION_KEY_EXPIRED:i,s=e.call(this)||this;switch(s.expiresIn=null!=n?n:0,r){case u.SESSION_KEY_EXPIRED:case u.SESSION_TOKEN_EXPIRED:case u.SESSION_REVOKED:case u.USER_AUTH_DEACTIVATED:case u.USER_AUTH_DELETED_OR_NOT_FOUND:s.error=new v({code:r})}return s}return t(n,e),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var e;return!!(null===(e=this.error)||void 0===e?void 0:e.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n}(ie),Ue=function(e){function n(t,n,i,r){void 0===r&&(r="");var s,o=this;return(o=e.call(this)||this)._iid=t,o.code=n,o.payload=i,o.requestId=null!==(s=i.req_id)&&void 0!==s?s:r,o}return t(n,e),n.createFromRawMessage=function(e,t){var i=t.substring(0,4),r={};try{r=JSON.parse(t.substring(4))}catch(e){i="NOOP"}finally{return new n(e,i,r)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},n.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},n}(ie),Pe=function(e){function n(t){var n,i=t.code,r=t.ackRequired,s=t.payload,o=void 0===s?{}:s,a=this;return(a=e.call(this)||this).code=i,a.payload=o,a.requestId=null!==(n=a.payload.req_id)&&void 0!==n?n:$(),a.ackRequired=r,a.payload.req_id=a.requestId,a}return t(n,e),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},n}(ie),Me=function(e){function n(t){var n=t.userId,i=t.authToken,r=t.services,s=t.expiringSession,o=void 0===s||s,a=e.call(this)||this;return a.path="".concat(ce,"/").concat(n,"/session_key"),a.method=oe.POST,a.params=re({token:i,services:r,expiring_session:!!o}),a.requireAuth=!1,a}return t(n,e),n}(De),Fe=function(e){function n(t){var n=t.authToken,i=t.expiringSession,r=void 0===i||i,s=t.requestId,o=void 0===s?void 0:s;return e.call(this,{code:"LOGI",payload:re({token:n,expiring_session:r?1:0,req_id:o}),ackRequired:!0})||this}return t(n,e),n}(Pe),qe=function(e){function n(t,n){var i=e.call(this,t,n)||this,r=n.key,s=n.expires_at,o=n.services;return i.key=r,i.expiresAt=s,i.services=o,i}return t(n,e),n}(Re),Ve=function(e){function n(t,n,i){var r,s=this;return(s=e.call(this,t,"LOGI",i)||this).error=null,s.newKey=null,s.newKey=null!==(r=i.new_key)&&void 0!==r?r:null,s.error=i.error?new v(i):null,s}return t(n,e),n}(Ue),He=function(e){function n(t){var n=e.call(this)||this;return n.statLog=t,n}return t(n,e),n}(ie),ze=function(e){function n(t){var n=t.request,i=t.deferred,r=t.error,s=void 0===r?v.requestFailed:r,o=e.call(this)||this;return o.request=n,o.deferred=i,o.error=s,o}return t(n,e),n}(ie);!function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.NOTIFICATION="noti:stats",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"}(Oe||(Oe={}));var Ge,je,Ke,Be=function(){function e(e){var t=e.type,n=e.data,i=e.ts,r=void 0===i?Date.now():i;this.type=t,this.createdAt=r,this.data=n}return e.payloadify=function(e){return re({stat_type:e.type,ts:e.createdAt,data:re(e.data)})},e}(),Qe=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},We=function(){return!("undefined"==typeof navigator||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};!function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live"}(Ge||(Ge={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}(je||(je={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(Ke||(Ke={}));var Ze="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",Ye=function(){function e(){}return e.sendbirdSdkUserAgentWithExtension=function(e){var t=Qe()?je.REACT_NATIVE:je.JS,i={main_sdk_info:"chat/".concat(t,"/").concat(h.SDK_VERSION),device_os_platform:We()?"mobile-web":"web",os_version:h.OS_VERSION};if(e){var r=e.sendbirdExtensions,s=e.deviceOS,o=e.customData,c=void 0===o?{}:o;s.version&&(i.os_version=s.version),s.platform&&(i.device_os_platform=s.platform),r.length>0&&(i.extension_sdk_info=r.map((function(e){var t=e.product,n=e.platform,i=e.version;return"".concat(t,"/").concat(n,"/").concat(i)})).join(",")),Object.keys(i).forEach((function(e){return delete c[e]})),Object.keys(c).length>0&&(i=n(n({},i),c))}return Object.entries(i).map((function(e){var t=a(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(i)})).join("&")},e.userAgentWithExtension=function(e){var t=Qe()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",i=e.sb_uikit?"u".concat(e.sb_uikit):"",r=e["device-os-platform"]?"o".concat(e["device-os-platform"]):We()?"omobile-web":"oweb";return"".concat(t,"/c").concat(h.SDK_VERSION,"/").concat(n,"/").concat(i,"/").concat(r)},e}(),Xe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=function(e){n(e)}}))},Je=function(e){function n(t){var n=e.call(this)||this;return n.requestId=t.requestId,n}return t(n,e),n}(ie),$e=function(e){function n(t){var n=e.call(this)||this;return n.method=oe.DELETE,n.path="".concat(Ne(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),t.messageToken&&(n.params=re({mesg_token:t.messageToken})),n}return t(n,e),n}(De);!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e)}(Re);var et=function(e){function n(t,n,i){var r,s=this;return(s=e.call(this,t,"DELM",i)||this).channelUrl=i.channel_url,s.channelType=i.channel_type,s.messageId=Number(i.msg_id),s.silent=i.silent,s.messageCreatedAt=i.message_created_at?Number(i.message_created_at):-1,s.senderId=null!==(r=i.sender_id)&&void 0!==r?r:void 0,s}return t(n,e),n}(Ue),tt=function(){function e(e,t){var n=t.session,i=t.sdkState,r=t.dispatcher,s=t.logger,o=t.useFetchCompat,a=void 0!==o&&o,c=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=e,this._session=n,this._sdkState=i,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof Le&&c.cancel(e.requestId)})),this._logger=s,this._shouldImportFetchCompat=a}return e.prototype._createHeader=function(e,t){var i=this._sdkState,r=i.appId,s=i.appVersion,o=i.sendbirdRuntimeEnvironment,a=n(n({},e.headers),{SendBird:"JS,".concat(h.OS_VERSION,",").concat(h.SDK_VERSION,",").concat(r).concat(s?",".concat(s):""),"SB-User-Agent":Ye.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":Ye.sendbirdSdkUserAgentWithExtension(o)});return t||(a["Content-Type"]="application/json; charset=utf-8"),e.requireAuth&&!e.hasSessionKey&&this._session.hasSession&&(a["Session-Key"]=this._session.sessionKey),a["App-Id"]=r,this._session&&this._session.authToken&&(a["Access-Token"]=this._session.authToken),a},e.prototype._statLogApiResult=function(e,t,n){this._dispatcher.dispatch(new He(new Be({type:Oe.API_RESULT,data:{endpoint:e.path,method:e.method,success:!n,latency:Date.now()-t,error_code:null==n?void 0:n.code,error_description:null==n?void 0:n.message}})))},e.prototype._isBodyRequired=function(e){var t=e.method;return t!==oe.GET&&(t!==oe.DELETE||e instanceof $e)},e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,o,a,c,l,h,d,_,f,p,E,g,b,m,y,w,S;return s(this,(function(s){switch(s.label){case 0:t=e.path,n=e.method,i=e.uploadProgressHandler,r=this._isBodyRequired(e),o=this._sdkState.api,a="".concat(o.host).concat(t).concat(r?"":e.query),c=r?e.payload:null,l=this._createHeader(e,c instanceof FormData?c:void 0),h=new AbortController,d=h.signal,this._abortControl.set(e.requestId,h),_=Date.now(),s.label=1;case 1:return s.trys.push([1,13,,14]),i?[4,__webpack_require__.e(/* import() */ 4).then(__webpack_require__.bind(null, 17))]:[3,6];case 2:f=s.sent().xmlHttpRequest,s.label=3;case 3:return s.trys.push([3,5,,6]),[4,f(this._iid,{requestId:e.requestId,method:e.method,url:a,headers:l,data:null!=c?c:void 0,uploadProgressHandler:i})];case 4:return p=s.sent(),this._logger.debug("receive api response",e.requestId),this._statLogApiResult(e,_),[2,p];case 5:if(!((E=s.sent())instanceof v&&E.code===u.XMLHTTPREQUEST_NOT_SUPPORTED))throw E;return this._logger.debug("XMLHttpRequest is not available in this environment. progressHandler is ignored."),[3,6];case 6:return this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,("undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{fetch:null}).fetch=null),"undefined"!=typeof AbortController?[3,8]:[4,__webpack_require__.e(/* import() */ 2).then(__webpack_require__.t.bind(null, 18, 7))];case 7:s.sent(),s.label=8;case 8:return"function"==typeof fetch?[3,10]:[4,__webpack_require__.e(/* import() */ 3).then(__webpack_require__.t.bind(null, 19, 7))];case 9:s.sent(),s.label=10;case 10:return[4,fetch(a,{method:n,body:c,headers:l,signal:d})];case 11:return[4,(g=s.sent()).json()];case 12:if(b=s.sent(),g.ok||g.redirected)return this._logger.debug("receive api response",e.requestId),this._statLogApiResult(e,_),[2,new Re(this._iid,b)];if(b){if((m=new v(b)).isSessionExpiredError){if(this._dispatcher.dispatch(new xe({reason:m.code})),!(e instanceof Me))return y=new Xe,this._dispatcher.dispatch(new ze({request:e,deferred:y,error:m})),[2,y.promise];throw m}throw m.isSessionInvalidatedError?(this._dispatcher.dispatch(new xe({reason:m.code})),m):m}throw v.requestFailed;case 13:throw w=s.sent(),this._statLogApiResult(e,_,w),w instanceof v?(this._logger.debug("fail api request",w),w):"AbortError"===(null==w?void 0:w.name)?v.requestCanceled:(S=v.networkError,this._logger.debug("fail api request",S),S);case 14:return[2]}}))}))},e.prototype.cancel=function(e){this._abortControl.has(e)&&(this._abortControl.get(e).abort(),this._abortControl.delete(e));this._dispatcher.dispatch(new Je({requestId:e}))},e.prototype.cancelAll=function(){var e,t;try{for(var n=o(this._abortControl.values()),i=n.next();!i.done;i=n.next()){i.value.abort()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._abortControl.clear(),this._dispatcher.dispatch(new Je({}))},e}(),nt=function(){};function it(e){let t=e.length;for(;--t>=0;)e[t]=0}const rt=256,st=286,ot=30,at=15,ct=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ut=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),lt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ht=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dt=new Array(576);it(dt);const _t=new Array(60);it(_t);const ft=new Array(512);it(ft);const pt=new Array(256);it(pt);const Et=new Array(29);it(Et);const gt=new Array(ot);function vt(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let bt,mt,yt;function wt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}it(gt);const St=e=>e<256?ft[e]:ft[256+(e>>>7)],Tt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Nt=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Tt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ct=(e,t,n)=>{Nt(e,n[2*t],n[2*t+1])},At=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},It=(e,t,n)=>{const i=new Array(16);let r,s,o=0;for(r=1;r<=at;r++)o=o+n[r-1]<<1,i[r]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=At(i[t]++,t))}},kt=e=>{let t;for(t=0;t<st;t++)e.dyn_ltree[2*t]=0;for(t=0;t<ot;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ot=e=>{e.bi_valid>8?Tt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Dt=(e,t,n,i)=>{const r=2*t,s=2*n;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},Rt=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&Dt(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Dt(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},Lt=(e,t,n)=>{let i,r,s,o,a=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+a++],i+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===i?Ct(e,r,t):(s=pt[r],Ct(e,s+rt+1,t),o=ct[s],0!==o&&(r-=Et[s],Nt(e,r,o)),i--,s=St(i),Ct(e,s,n),o=ut[s],0!==o&&(i-=gt[s],Nt(e,i,o)))}while(a<e.sym_next);Ct(e,256,t)},xt=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,u=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[2*c+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)Rt(e,n,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Rt(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*c]=n[2*o]+n[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=c,e.heap[1]=c++,Rt(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,l,h,d,_,f,p=0;for(d=0;d<=at;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)l=e.heap[u],d=n[2*n[2*l+1]+1]+1,d>c&&(d=c,p++),n[2*l+1]=d,l>i||(e.bl_count[d]++,_=0,l>=a&&(_=o[l-a]),f=n[2*l],e.opt_len+=f*(d+_),s&&(e.static_len+=f*(r[2*l+1]+_)));if(0!==p){do{for(d=c-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(d=c;0!==d;d--)for(l=e.bl_count[d];0!==l;)h=e.heap[--u],h>i||(n[2*h+1]!==d&&(e.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),l--)}})(e,t),It(n,u,e.bl_count)},Ut=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=o,o=t[2*(i+1)+1],++a<c&&r===o||(a<u?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=r,0===o?(c=138,u=3):r===o?(c=6,u=3):(c=7,u=4))},Pt=(e,t,n)=>{let i,r,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),i=0;i<=n;i++)if(r=o,o=t[2*(i+1)+1],!(++a<c&&r===o)){if(a<u)do{Ct(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==s&&(Ct(e,r,e.bl_tree),a--),Ct(e,16,e.bl_tree),Nt(e,a-3,2)):a<=10?(Ct(e,17,e.bl_tree),Nt(e,a-3,3)):(Ct(e,18,e.bl_tree),Nt(e,a-11,7));a=0,s=r,0===o?(c=138,u=3):r===o?(c=6,u=3):(c=7,u=4)}};let Mt=!1;const Ft=(e,t,n,i)=>{Nt(e,0+(i?1:0),3),Ot(e),Tt(e,n),Tt(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var qt=(e,t,n,i)=>{let r,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<rt;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),xt(e,e.l_desc),xt(e,e.d_desc),o=(e=>{let t;for(Ut(e,e.dyn_ltree,e.l_desc.max_code),Ut(e,e.dyn_dtree,e.d_desc.max_code),xt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ht[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==t?Ft(e,t,n,i):4===e.strategy||s===r?(Nt(e,2+(i?1:0),3),Lt(e,dt,_t)):(Nt(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(Nt(e,t-257,5),Nt(e,n-1,5),Nt(e,i-4,4),r=0;r<i;r++)Nt(e,e.bl_tree[2*ht[r]+1],3);Pt(e,e.dyn_ltree,t-1),Pt(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Lt(e,e.dyn_ltree,e.dyn_dtree)),kt(e),i&&Ot(e)},Vt={_tr_init:e=>{Mt||((()=>{let e,t,n,i,r;const s=new Array(16);for(n=0,i=0;i<28;i++)for(Et[i]=n,e=0;e<1<<ct[i];e++)pt[n++]=i;for(pt[n-1]=i,r=0,i=0;i<16;i++)for(gt[i]=r,e=0;e<1<<ut[i];e++)ft[r++]=i;for(r>>=7;i<ot;i++)for(gt[i]=r<<7,e=0;e<1<<ut[i]-7;e++)ft[256+r++]=i;for(t=0;t<=at;t++)s[t]=0;for(e=0;e<=143;)dt[2*e+1]=8,e++,s[8]++;for(;e<=255;)dt[2*e+1]=9,e++,s[9]++;for(;e<=279;)dt[2*e+1]=7,e++,s[7]++;for(;e<=287;)dt[2*e+1]=8,e++,s[8]++;for(It(dt,287,s),e=0;e<ot;e++)_t[2*e+1]=5,_t[2*e]=At(e,5);bt=new vt(dt,ct,257,st,at),mt=new vt(_t,ut,0,ot,at),yt=new vt(new Array(0),lt,0,19,7)})(),Mt=!0),e.l_desc=new wt(e.dyn_ltree,bt),e.d_desc=new wt(e.dyn_dtree,mt),e.bl_desc=new wt(e.bl_tree,yt),e.bi_buf=0,e.bi_valid=0,kt(e)},_tr_stored_block:Ft,_tr_flush_block:qt,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(pt[n]+rt+1)]++,e.dyn_dtree[2*St(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Nt(e,2,3),Ct(e,256,dt),(e=>{16===e.bi_valid?(Tt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Ht=(e,t,n,i)=>{let r=65535&e,s=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+t[i++]|0,s=s+r|0}while(--o);r%=65521,s%=65521}return r|s<<16};const zt=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Gt=(e,t,n,i)=>{const r=zt,s=i+n;e^=-1;for(let n=i;n<s;n++)e=e>>>8^r[255&(e^t[n])];return~e},jt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Kt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Bt,_tr_stored_block:Qt,_tr_flush_block:Wt,_tr_tally:Zt,_tr_align:Yt}=Vt,{Z_NO_FLUSH:Xt,Z_PARTIAL_FLUSH:Jt,Z_FULL_FLUSH:$t,Z_FINISH:en,Z_BLOCK:tn,Z_OK:nn,Z_STREAM_END:rn,Z_STREAM_ERROR:sn,Z_DATA_ERROR:on,Z_BUF_ERROR:an,Z_DEFAULT_COMPRESSION:cn,Z_FILTERED:un,Z_HUFFMAN_ONLY:ln,Z_RLE:hn,Z_FIXED:dn,Z_DEFAULT_STRATEGY:_n,Z_UNKNOWN:fn,Z_DEFLATED:pn}=Kt,En=258,gn=262,vn=42,bn=113,mn=666,yn=(e,t)=>(e.msg=jt[t],t),wn=e=>2*e-(e>4?9:0),Sn=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Tn=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)};let Nn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Cn=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},An=(e,t)=>{Wt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Cn(e.strm)},In=(e,t)=>{e.pending_buf[e.pending++]=t},kn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},On=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=Ht(e.adler,t,r,n):2===e.state.wrap&&(e.adler=Gt(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},Dn=(e,t)=>{let n,i,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-gn?e.strstart-(e.w_size-gn):0,u=e.window,l=e.w_mask,h=e.prev,d=e.strstart+En;let _=u[s+o-1],f=u[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,u[n+o]===f&&u[n+o-1]===_&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<d);if(i=En-(d-s),s=d-En,i>o){if(e.match_start=t,o=i,i>=a)break;_=u[s+o-1],f=u[s+o]}}}while((t=h[t&l])>c&&0!=--r);return o<=e.lookahead?o:e.lookahead},Rn=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-gn)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Tn(e),i+=t),0===e.strm.avail_in)break;if(n=On(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Nn(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Nn(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<gn&&0!==e.strm.avail_in)},Ln=(e,t)=>{let n,i,r,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>r&&(n=r),n<s&&(0===n&&t!==en||t===Xt||n!==i+e.strm.avail_in))break;o=t===en&&n===i+e.strm.avail_in?1:0,Qt(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Cn(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(On(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Xt&&t!==en&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(On(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,s=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=s||(i||t===en)&&t!==Xt&&0===e.strm.avail_in&&i<=r)&&(n=i>r?r:i,o=t===en&&0===e.strm.avail_in&&n===i?1:0,Qt(e,e.block_start,n,o),e.block_start+=n,Cn(e.strm)),o?3:1)},xn=(e,t)=>{let n,i;for(;;){if(e.lookahead<gn){if(Rn(e),e.lookahead<gn&&t===Xt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Nn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-gn&&(e.match_length=Dn(e,n)),e.match_length>=3)if(i=Zt(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Nn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Nn(e,e.ins_h,e.window[e.strstart+1]);else i=Zt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(An(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===en?(An(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(An(e,!1),0===e.strm.avail_out)?1:2},Un=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<gn){if(Rn(e),e.lookahead<gn&&t===Xt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Nn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-gn&&(e.match_length=Dn(e,n),e.match_length<=5&&(e.strategy===un||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=Zt(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Nn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(An(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=Zt(e,0,e.window[e.strstart-1]),i&&An(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Zt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===en?(An(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(An(e,!1),0===e.strm.avail_out)?1:2};function Pn(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const Mn=[new Pn(0,0,0,0,Ln),new Pn(4,4,8,4,xn),new Pn(4,5,16,8,xn),new Pn(4,6,32,32,xn),new Pn(4,4,16,16,Un),new Pn(8,16,32,32,Un),new Pn(8,16,128,128,Un),new Pn(8,32,128,256,Un),new Pn(32,128,258,1024,Un),new Pn(32,258,258,4096,Un)];function Fn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Sn(this.dyn_ltree),Sn(this.dyn_dtree),Sn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Sn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Sn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const qn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==vn&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==bn&&t.status!==mn?1:0},Vn=e=>{if(qn(e))return yn(e,sn);e.total_in=e.total_out=0,e.data_type=fn;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?vn:bn,e.adler=2===t.wrap?0:1,t.last_flush=-2,Bt(t),nn},Hn=e=>{const t=Vn(e);var n;return t===nn&&((n=e.state).window_size=2*n.w_size,Sn(n.head),n.max_lazy_match=Mn[n.level].max_lazy,n.good_match=Mn[n.level].good_length,n.nice_match=Mn[n.level].nice_length,n.max_chain_length=Mn[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},zn=(e,t,n,i,r,s)=>{if(!e)return sn;let o=1;if(t===cn&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>9||n!==pn||i<8||i>15||t<0||t>9||s<0||s>dn||8===i&&1!==o)return yn(e,sn);8===i&&(i=9);const a=new Fn;return e.state=a,a.strm=e,a.status=vn,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,Hn(e)};var Gn={deflateInit:(e,t)=>zn(e,t,pn,15,8,_n),deflateInit2:zn,deflateReset:Hn,deflateResetKeep:Vn,deflateSetHeader:(e,t)=>qn(e)||2!==e.state.wrap?sn:(e.state.gzhead=t,nn),deflate:(e,t)=>{if(qn(e)||t>tn||t<0)return e?yn(e,sn):sn;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===mn&&t!==en)return yn(e,0===e.avail_out?an:sn);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Cn(e),0===e.avail_out)return n.last_flush=-1,nn}else if(0===e.avail_in&&wn(t)<=wn(i)&&t!==en)return yn(e,an);if(n.status===mn&&0!==e.avail_in)return yn(e,an);if(n.status===vn&&0===n.wrap&&(n.status=bn),n.status===vn){let t=pn+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=ln||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,kn(n,t),0!==n.strstart&&(kn(n,e.adler>>>16),kn(n,65535&e.adler)),e.adler=1,n.status=bn,Cn(e),0!==n.pending)return n.last_flush=-1,nn}if(57===n.status)if(e.adler=0,In(n,31),In(n,139),In(n,8),n.gzhead)In(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),In(n,255&n.gzhead.time),In(n,n.gzhead.time>>8&255),In(n,n.gzhead.time>>16&255),In(n,n.gzhead.time>>24&255),In(n,9===n.level?2:n.strategy>=ln||n.level<2?4:0),In(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(In(n,255&n.gzhead.extra.length),In(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Gt(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(In(n,0),In(n,0),In(n,0),In(n,0),In(n,0),In(n,9===n.level?2:n.strategy>=ln||n.level<2?4:0),In(n,3),n.status=bn,Cn(e),0!==n.pending)return n.last_flush=-1,nn;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Gt(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,Cn(e),0!==n.pending)return n.last_flush=-1,nn;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=Gt(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Gt(e.adler,n.pending_buf,n.pending-i,i)),Cn(e),0!==n.pending)return n.last_flush=-1,nn;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,In(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=Gt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Gt(e.adler,n.pending_buf,n.pending-i,i)),Cn(e),0!==n.pending)return n.last_flush=-1,nn;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,In(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=Gt(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Cn(e),0!==n.pending))return n.last_flush=-1,nn;In(n,255&e.adler),In(n,e.adler>>8&255),e.adler=0}if(n.status=bn,Cn(e),0!==n.pending)return n.last_flush=-1,nn}if(0!==e.avail_in||0!==n.lookahead||t!==Xt&&n.status!==mn){let i=0===n.level?Ln(n,t):n.strategy===ln?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Rn(e),0===e.lookahead)){if(t===Xt)return 1;break}if(e.match_length=0,n=Zt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(An(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===en?(An(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(An(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===hn?((e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=En){if(Rn(e),e.lookahead<=En&&t===Xt)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+En;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=En-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Zt(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Zt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(An(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===en?(An(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(An(e,!1),0===e.strm.avail_out)?1:2})(n,t):Mn[n.level].func(n,t);if(3!==i&&4!==i||(n.status=mn),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),nn;if(2===i&&(t===Jt?Yt(n):t!==tn&&(Qt(n,0,0,!1),t===$t&&(Sn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Cn(e),0===e.avail_out))return n.last_flush=-1,nn}return t!==en?nn:n.wrap<=0?rn:(2===n.wrap?(In(n,255&e.adler),In(n,e.adler>>8&255),In(n,e.adler>>16&255),In(n,e.adler>>24&255),In(n,255&e.total_in),In(n,e.total_in>>8&255),In(n,e.total_in>>16&255),In(n,e.total_in>>24&255)):(kn(n,e.adler>>>16),kn(n,65535&e.adler)),Cn(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?nn:rn)},deflateEnd:e=>{if(qn(e))return sn;const t=e.state.status;return e.state=null,t===bn?yn(e,on):nn},deflateSetDictionary:(e,t)=>{let n=t.length;if(qn(e))return sn;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==vn||i.lookahead)return sn;if(1===r&&(e.adler=Ht(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(Sn(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Rn(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Nn(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,Rn(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,nn},deflateInfo:"pako deflate (from Nodeca project)"};const jn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Kn={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)jn(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];n.set(r,i),i+=r.length}return n}};let Bn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Bn=!1}const Qn=new Uint8Array(256);for(let e=0;e<256;e++)Qn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Qn[254]=Qn[254]=1;var Wn={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const s=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){s[r++]=t;continue}let o=Qn[t];if(o>4)s[r++]=65533,i+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&i<n;)t=t<<6|63&e[i++],o--;o>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Bn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(s,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Qn[e[n]]>t?n:t}};var Zn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Yn=Object.prototype.toString,{Z_NO_FLUSH:Xn,Z_SYNC_FLUSH:Jn,Z_FULL_FLUSH:$n,Z_FINISH:ei,Z_OK:ti,Z_STREAM_END:ni,Z_DEFAULT_COMPRESSION:ii,Z_DEFAULT_STRATEGY:ri,Z_DEFLATED:si}=Kt;function oi(e){this.options=Kn.assign({level:ii,method:si,chunkSize:16384,windowBits:15,memLevel:8,strategy:ri},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zn,this.strm.avail_out=0;let n=Gn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ti)throw new Error(jt[n]);if(t.header&&Gn.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Wn.string2buf(t.dictionary):"[object ArrayBuffer]"===Yn.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Gn.deflateSetDictionary(this.strm,e),n!==ti)throw new Error(jt[n]);this._dict_set=!0}}function ai(e,t){const n=new oi(t);if(n.push(e,!0),n.err)throw n.msg||jt[n.err];return n.result}oi.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?ei:Xn,"string"==typeof e?n.input=Wn.string2buf(e):"[object ArrayBuffer]"===Yn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===Jn||s===$n)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Gn.deflate(n,s),r===ni)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Gn.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ti;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},oi.prototype.onData=function(e){this.chunks.push(e)},oi.prototype.onEnd=function(e){e===ti&&(this.result=Kn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ci={Deflate:oi,deflate:ai,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ai(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ai(e,t)},constants:Kt};const ui=16209;var li=function(e,t){let n,i,r,s,o,a,c,u,l,h,d,_,f,p,E,g,v,b,m,y,w,S,T,N;const C=e.state;n=e.next_in,T=e.input,i=n+(e.avail_in-5),r=e.next_out,N=e.output,s=r-(t-e.avail_out),o=r+(e.avail_out-257),a=C.dmax,c=C.wsize,u=C.whave,l=C.wnext,h=C.window,d=C.hold,_=C.bits,f=C.lencode,p=C.distcode,E=(1<<C.lenbits)-1,g=(1<<C.distbits)-1;e:do{_<15&&(d+=T[n++]<<_,_+=8,d+=T[n++]<<_,_+=8),v=f[d&E];t:for(;;){if(b=v>>>24,d>>>=b,_-=b,b=v>>>16&255,0===b)N[r++]=65535&v;else{if(!(16&b)){if(64&b){if(32&b){C.mode=16191;break e}e.msg="invalid literal/length code",C.mode=ui;break e}v=f[(65535&v)+(d&(1<<b)-1)];continue t}for(m=65535&v,b&=15,b&&(_<b&&(d+=T[n++]<<_,_+=8),m+=d&(1<<b)-1,d>>>=b,_-=b),_<15&&(d+=T[n++]<<_,_+=8,d+=T[n++]<<_,_+=8),v=p[d&g];;){if(b=v>>>24,d>>>=b,_-=b,b=v>>>16&255,16&b){if(y=65535&v,b&=15,_<b&&(d+=T[n++]<<_,_+=8,_<b&&(d+=T[n++]<<_,_+=8)),y+=d&(1<<b)-1,y>a){e.msg="invalid distance too far back",C.mode=ui;break e}if(d>>>=b,_-=b,b=r-s,y>b){if(b=y-b,b>u&&C.sane){e.msg="invalid distance too far back",C.mode=ui;break e}if(w=0,S=h,0===l){if(w+=c-b,b<m){m-=b;do{N[r++]=h[w++]}while(--b);w=r-y,S=N}}else if(l<b){if(w+=c+l-b,b-=l,b<m){m-=b;do{N[r++]=h[w++]}while(--b);if(w=0,l<m){b=l,m-=b;do{N[r++]=h[w++]}while(--b);w=r-y,S=N}}}else if(w+=l-b,b<m){m-=b;do{N[r++]=h[w++]}while(--b);w=r-y,S=N}for(;m>2;)N[r++]=S[w++],N[r++]=S[w++],N[r++]=S[w++],m-=3;m&&(N[r++]=S[w++],m>1&&(N[r++]=S[w++]))}else{w=r-y;do{N[r++]=N[w++],N[r++]=N[w++],N[r++]=N[w++],m-=3}while(m>2);m&&(N[r++]=N[w++],m>1&&(N[r++]=N[w++]))}break}if(64&b){e.msg="invalid distance code",C.mode=ui;break e}v=p[(65535&v)+(d&(1<<b)-1)]}}break}}while(n<i&&r<o);m=_>>3,n-=m,_-=m<<3,d&=(1<<_)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<o?o-r+257:257-(r-o),C.hold=d,C.bits=_};const hi=15,di=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_i=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pi=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Ei=(e,t,n,i,r,s,o,a)=>{const c=a.bits;let u,l,h,d,_,f,p=0,E=0,g=0,v=0,b=0,m=0,y=0,w=0,S=0,T=0,N=null;const C=new Uint16Array(16),A=new Uint16Array(16);let I,k,O,D=null;for(p=0;p<=hi;p++)C[p]=0;for(E=0;E<i;E++)C[t[n+E]]++;for(b=c,v=hi;v>=1&&0===C[v];v--);if(b>v&&(b=v),0===v)return r[s++]=20971520,r[s++]=20971520,a.bits=1,0;for(g=1;g<v&&0===C[g];g++);for(b<g&&(b=g),w=1,p=1;p<=hi;p++)if(w<<=1,w-=C[p],w<0)return-1;if(w>0&&(0===e||1!==v))return-1;for(A[1]=0,p=1;p<hi;p++)A[p+1]=A[p]+C[p];for(E=0;E<i;E++)0!==t[n+E]&&(o[A[t[n+E]]++]=E);if(0===e?(N=D=o,f=20):1===e?(N=di,D=_i,f=257):(N=fi,D=pi,f=0),T=0,E=0,p=g,_=s,m=b,y=0,h=-1,S=1<<b,d=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){I=p-y,o[E]+1<f?(k=0,O=o[E]):o[E]>=f?(k=D[o[E]-f],O=N[o[E]-f]):(k=96,O=0),u=1<<p-y,l=1<<m,g=l;do{l-=u,r[_+(T>>y)+l]=I<<24|k<<16|O}while(0!==l);for(u=1<<p-1;T&u;)u>>=1;if(0!==u?(T&=u-1,T+=u):T=0,E++,0==--C[p]){if(p===v)break;p=t[n+o[E]]}if(p>b&&(T&d)!==h){for(0===y&&(y=b),_+=g,m=p-y,w=1<<m;m+y<v&&(w-=C[m+y],!(w<=0));)m++,w<<=1;if(S+=1<<m,1===e&&S>852||2===e&&S>592)return 1;h=T&d,r[h]=b<<24|m<<16|_-s}}return 0!==T&&(r[_+T]=p-y<<24|64<<16),a.bits=b,0};const{Z_FINISH:gi,Z_BLOCK:vi,Z_TREES:bi,Z_OK:mi,Z_STREAM_END:yi,Z_NEED_DICT:wi,Z_STREAM_ERROR:Si,Z_DATA_ERROR:Ti,Z_MEM_ERROR:Ni,Z_BUF_ERROR:Ci,Z_DEFLATED:Ai}=Kt,Ii=16180,ki=16190,Oi=16191,Di=16192,Ri=16194,Li=16199,xi=16200,Ui=16206,Pi=16209,Mi=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Fi(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qi=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ii||t.mode>16211?1:0},Vi=e=>{if(qi(e))return Si;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ii,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mi},Hi=e=>{if(qi(e))return Si;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Vi(e)},zi=(e,t)=>{let n;if(qi(e))return Si;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Si:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,Hi(e))},Gi=(e,t)=>{if(!e)return Si;const n=new Fi;e.state=n,n.strm=e,n.window=null,n.mode=Ii;const i=zi(e,t);return i!==mi&&(e.state=null),i};let ji,Ki,Bi=!0;const Qi=e=>{if(Bi){ji=new Int32Array(512),Ki=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ei(1,e.lens,0,288,ji,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ei(2,e.lens,0,32,Ki,0,e.work,{bits:5}),Bi=!1}e.lencode=ji,e.lenbits=9,e.distcode=Ki,e.distbits=5},Wi=(e,t,n,i)=>{let r;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),(i-=r)?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0};var Zi={inflateReset:Hi,inflateReset2:zi,inflateResetKeep:Vi,inflateInit:e=>Gi(e,15),inflateInit2:Gi,inflate:(e,t)=>{let n,i,r,s,o,a,c,u,l,h,d,_,f,p,E,g,v,b,m,y,w,S,T=0;const N=new Uint8Array(4);let C,A;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qi(e)||!e.output||!e.input&&0!==e.avail_in)return Si;n=e.state,n.mode===Oi&&(n.mode=Di),o=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,u=n.hold,l=n.bits,h=a,d=c,S=mi;e:for(;;)switch(n.mode){case Ii:if(0===n.wrap){n.mode=Di;break}for(;l<16;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&u,N[1]=u>>>8&255,n.check=Gt(n.check,N,2,0),u=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=Pi;break}if((15&u)!==Ai){e.msg="unknown compression method",n.mode=Pi;break}if(u>>>=4,l-=4,w=8+(15&u),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=Pi;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:Oi,u=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(n.flags=u,(255&n.flags)!==Ai){e.msg="unknown compression method",n.mode=Pi;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Pi;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=Gt(n.check,N,2,0)),u=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,N[2]=u>>>16&255,N[3]=u>>>24&255,n.check=Gt(n.check,N,4,0)),u=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=Gt(n.check,N,2,0)),u=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=Gt(n.check,N,2,0)),u=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(_=n.length,_>a&&(_=a),_&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+_),w)),512&n.flags&&4&n.wrap&&(n.check=Gt(n.check,i,_,s)),a-=_,s+=_,n.length-=_),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;_=0;do{w=i[s+_++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&_<a);if(512&n.flags&&4&n.wrap&&(n.check=Gt(n.check,i,_,s)),a-=_,s+=_,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;_=0;do{w=i[s+_++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&_<a);if(512&n.flags&&4&n.wrap&&(n.check=Gt(n.check,i,_,s)),a-=_,s+=_,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Pi;break}u=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Oi;break;case 16189:for(;l<32;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}e.adler=n.check=Mi(u),u=0,l=0,n.mode=ki;case ki:if(0===n.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=u,n.bits=l,wi;e.adler=n.check=1,n.mode=Oi;case Oi:if(t===vi||t===bi)break e;case Di:if(n.last){u>>>=7&l,l-=7&l,n.mode=Ui;break}for(;l<3;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}switch(n.last=1&u,u>>>=1,l-=1,3&u){case 0:n.mode=16193;break;case 1:if(Qi(n),n.mode=Li,t===bi){u>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Pi}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Pi;break}if(n.length=65535&u,u=0,l=0,n.mode=Ri,t===bi)break e;case Ri:n.mode=16195;case 16195:if(_=n.length,_){if(_>a&&(_=a),_>c&&(_=c),0===_)break e;r.set(i.subarray(s,s+_),o),a-=_,s+=_,c-=_,o+=_,n.length-=_;break}n.mode=Oi;break;case 16196:for(;l<14;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Pi;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}n.lens[I[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},S=Ei(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid code lengths set",n.mode=Pi;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[u&(1<<n.lenbits)-1],E=T>>>24,g=T>>>16&255,v=65535&T,!(E<=l);){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(v<16)u>>>=E,l-=E,n.lens[n.have++]=v;else{if(16===v){for(A=E+2;l<A;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(u>>>=E,l-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=Pi;break}w=n.lens[n.have-1],_=3+(3&u),u>>>=2,l-=2}else if(17===v){for(A=E+3;l<A;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}u>>>=E,l-=E,w=0,_=3+(7&u),u>>>=3,l-=3}else{for(A=E+7;l<A;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}u>>>=E,l-=E,w=0,_=11+(127&u),u>>>=7,l-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Pi;break}for(;_--;)n.lens[n.have++]=w}}if(n.mode===Pi)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Pi;break}if(n.lenbits=9,C={bits:n.lenbits},S=Ei(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid literal/lengths set",n.mode=Pi;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},S=Ei(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,S){e.msg="invalid distances set",n.mode=Pi;break}if(n.mode=Li,t===bi)break e;case Li:n.mode=xi;case xi:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=u,n.bits=l,li(e,d),o=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,u=n.hold,l=n.bits,n.mode===Oi&&(n.back=-1);break}for(n.back=0;T=n.lencode[u&(1<<n.lenbits)-1],E=T>>>24,g=T>>>16&255,v=65535&T,!(E<=l);){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(g&&!(240&g)){for(b=E,m=g,y=v;T=n.lencode[y+((u&(1<<b+m)-1)>>b)],E=T>>>24,g=T>>>16&255,v=65535&T,!(b+E<=l);){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=E,l-=E,n.back+=E,n.length=v,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=Oi;break}if(64&g){e.msg="invalid literal/length code",n.mode=Pi;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;l<A;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[u&(1<<n.distbits)-1],E=T>>>24,g=T>>>16&255,v=65535&T,!(E<=l);){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(!(240&g)){for(b=E,m=g,y=v;T=n.distcode[y+((u&(1<<b+m)-1)>>b)],E=T>>>24,g=T>>>16&255,v=65535&T,!(b+E<=l);){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=E,l-=E,n.back+=E,64&g){e.msg="invalid distance code",n.mode=Pi;break}n.offset=v,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;l<A;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Pi;break}n.mode=16204;case 16204:if(0===c)break e;if(_=d-c,n.offset>_){if(_=n.offset-_,_>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Pi;break}_>n.wnext?(_-=n.wnext,f=n.wsize-_):f=n.wnext-_,_>n.length&&(_=n.length),p=n.window}else p=r,f=o-n.offset,_=n.length;_>c&&(_=c),c-=_,n.length-=_;do{r[o++]=p[f++]}while(--_);0===n.length&&(n.mode=xi);break;case 16205:if(0===c)break e;r[o++]=n.length,c--,n.mode=xi;break;case Ui:if(n.wrap){for(;l<32;){if(0===a)break e;a--,u|=i[s++]<<l,l+=8}if(d-=c,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?Gt(n.check,r,d,o-d):Ht(n.check,r,d,o-d)),d=c,4&n.wrap&&(n.flags?u:Mi(u))!==n.check){e.msg="incorrect data check",n.mode=Pi;break}u=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break e;a--,u+=i[s++]<<l,l+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Pi;break}u=0,l=0}n.mode=16208;case 16208:S=yi;break e;case Pi:S=Ti;break e;case 16210:return Ni;default:return Si}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=u,n.bits=l,(n.wsize||d!==e.avail_out&&n.mode<Pi&&(n.mode<Ui||t!==gi))&&Wi(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?Gt(n.check,r,d,e.next_out-d):Ht(n.check,r,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Oi?128:0)+(n.mode===Li||n.mode===Ri?256:0),(0===h&&0===d||t===gi)&&S===mi&&(S=Ci),S},inflateEnd:e=>{if(qi(e))return Si;let t=e.state;return t.window&&(t.window=null),e.state=null,mi},inflateGetHeader:(e,t)=>{if(qi(e))return Si;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,mi):Si},inflateSetDictionary:(e,t)=>{const n=t.length;let i,r,s;return qi(e)?Si:(i=e.state,0!==i.wrap&&i.mode!==ki?Si:i.mode===ki&&(r=1,r=Ht(r,t,n,0),r!==i.check)?Ti:(s=Wi(e,t,n,n),s?(i.mode=16210,Ni):(i.havedict=1,mi)))},inflateInfo:"pako inflate (from Nodeca project)"};var Yi=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Xi=Object.prototype.toString,{Z_NO_FLUSH:Ji,Z_FINISH:$i,Z_OK:er,Z_STREAM_END:tr,Z_NEED_DICT:nr,Z_STREAM_ERROR:ir,Z_DATA_ERROR:rr,Z_MEM_ERROR:sr}=Kt;function or(e){this.options=Kn.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zn,this.strm.avail_out=0;let n=Zi.inflateInit2(this.strm,t.windowBits);if(n!==er)throw new Error(jt[n]);if(this.header=new Yi,Zi.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Wn.string2buf(t.dictionary):"[object ArrayBuffer]"===Xi.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Zi.inflateSetDictionary(this.strm,t.dictionary),n!==er)))throw new Error(jt[n])}function ar(e,t){const n=new or(t);if(n.push(e),n.err)throw n.msg||jt[n.err];return n.result}or.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?$i:Ji,"[object ArrayBuffer]"===Xi.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Zi.inflate(n,o),s===nr&&r&&(s=Zi.inflateSetDictionary(n,r),s===er?s=Zi.inflate(n,o):s===rr&&(s=nr));n.avail_in>0&&s===tr&&n.state.wrap>0&&0!==e[n.next_in];)Zi.inflateReset(n),s=Zi.inflate(n,o);switch(s){case ir:case rr:case nr:case sr:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===tr))if("string"===this.options.to){let e=Wn.utf8border(n.output,n.next_out),t=n.next_out-e,r=Wn.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==er||0!==a){if(s===tr)return s=Zi.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},or.prototype.onData=function(e){this.chunks.push(e)},or.prototype.onEnd=function(e){e===er&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Kn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var cr={Inflate:or,inflate:ar,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ar(e,t)},ungzip:ar,constants:Kt};const{Deflate:ur,deflate:lr,deflateRaw:hr,gzip:dr}=ci,{Inflate:_r,inflate:fr,inflateRaw:pr,ungzip:Er}=cr;var gr,vr={Deflate:ur,deflate:lr,deflateRaw:hr,gzip:dr,Inflate:_r,inflate:fr,inflateRaw:pr,ungzip:Er,constants:Kt},br=function(e){return r(void 0,void 0,void 0,(function(){var t;return s(this,(function(n){return t=vr.ungzip(e),[2,String.fromCharCode.apply(null,t)]}))}))};!function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"}(gr||(gr={}));var mr,yr=function(e){function n(t,n){var i=n.sdkState,r=n.dispatcher,s=n.logger,o=e.call(this)||this;return o.lastActive=0,o._iid=t,o._sdkState=i,o._dispatcher=r,o._logger=s,o}return t(n,e),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===gr.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return gr.CONNECTING;case 1:return gr.OPEN}return gr.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var e;return null!==(e=this._ws)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(e){var t=this;e.split("\n").forEach((function(e){if(e){var n=Ue.createFromRawMessage(t._iid,e);if(t._logger.debug("receive websocket event",n),"LOGI"===n.code)t.dispatch("message",n);else if("PONG"===n.code)t.dispatch("pong");else if("EXPR"===n.code){if(n.payload){var i=new xe(n.payload);i.expiresIn>=0&&t._dispatcher.dispatch(i)}}else"NOOP"===n.code||t.dispatch("message",n)}}))},n.prototype.connect=function(e,t){var n=this;void 0===t&&(t=""),this._ws=new WebSocket(e,encodeURIComponent(t)),this._ws.onopen=function(){n._logger.debug("websocket open"),n.dispatch("open")},this._ws.onmessage=function(e){return r(n,void 0,void 0,(function(){var t,n,i,o,a=this;return s(this,(function(c){switch(c.label){case 0:return(null===(o=this._sdkState.websocket)||void 0===o?void 0:o.compression)?e.data instanceof Blob?((t=new FileReader).readAsArrayBuffer(e.data),t.onloadend=function(){return r(a,void 0,void 0,(function(){var e,n;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,br(t.result)];case 1:return e=i.sent(),this._handleMessage(e),[3,3];case 2:return n=i.sent(),this.error(n),[3,3];case 3:return[2]}}))}))},[3,7]):[3,1]:[3,8];case 1:if(!(e.data instanceof ArrayBuffer))return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,br(new Uint8Array(e.data))];case 3:return n=c.sent(),this._handleMessage(n),[3,5];case 4:return i=c.sent(),this.error(i),[3,5];case 5:return[3,7];case 6:"string"==typeof e.data&&this._handleMessage(e.data),c.label=7;case 7:return[3,9];case 8:this._handleMessage(e.data),c.label=9;case 9:return[2]}}))}))},this._ws.onerror=function(){n._logger.debug("websocket error"),n.dispatch("error",v.networkError)},this._ws.onclose=function(){n._logger.debug("websocket close"),n.dispatch("close")},this.lastActive=Date.now()},n.prototype.disconnect=function(){var e=this;return new Promise((function(t){e._logger.debug("websocket disconnect"),e._ws?(e._ws.onopen=nt,e._ws.onmessage=nt,e._ws.onerror=nt,e.connectionState!==gr.CLOSED?(e._ws.onclose=function(){e.dispatch("close"),t()},e._ws.close(),e._ws=void 0):t()):t()}))},n.prototype.send=function(e){if(!this._ws)throw v.connectionClosed;"PING"!==e.code?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},n.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},n}(te),wr=function(e){function n(t){var n=t.all,i=t.feed,r=t.custom_types,s=t.ts,o=e.call(this)||this;return o.all=n,o.feed=i,o.customTypes=r,o.ts=s,o}return t(n,e),n}(ie),Sr=function(){function e(e,t){var n=t.session,i=t.sdkState,r=t.dispatcher,s=t.logger,o=t.useFetchCompat,a=void 0!==o&&o,c=this;this._ackStateMap=new Map,this._sdkState=i,this._dispatcher=r,this._logger=s,this.apiClient=new tt(e,{session:n,sdkState:i,dispatcher:r,logger:s,useFetchCompat:a}),this.websocketClient=new yr(e,{sdkState:i,dispatcher:r,logger:s}),this.websocketClient.on("message",(function(e){if(e.payload.unread_cnt&&c._dispatcher.dispatch(new wr(e.payload.unread_cnt)),e.requestId){if(c._ackStateMap.has(e.requestId)){var t=c._ackStateMap.get(e.requestId);"EROR"!==e.code?t.resolve(e):t.reject(new v({code:e.payload.code,message:e.payload.message}))}}else c._dispatcher.dispatch(e)})).on("close",(function(){c._ackStateMap.forEach((function(e){e.reject(v.connectionClosed)})),c._ackStateMap.clear()}))}return e.prototype._sendApiRequest=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.apiClient.send(e)];case 1:return[2,t.sent()]}}))}))},e.prototype._sendWebsocketRequest=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r=this;return s(this,(function(s){if(!this._sdkState.websocket)throw v.connectionRequired;if(t=new Xe,e.ackRequired){i=function(i,s){r._ackStateMap.has(e.requestId)&&(r._ackStateMap.delete(e.requestId),n&&(clearTimeout(n),n=null),i?(r._logger.debug("fail websocket request",e.requestId,i),t.reject(i)):(r._logger.debug("receive websocket ack",e.requestId,e),r._logger.debug("receive websocket ack",s),t.resolve(s)))};try{n=setTimeout((function(){return i(v.noAckTimeout)}),this._sdkState.websocket.responseTimeout),this._ackStateMap.set(e.requestId,{resolve:function(e){return i(void 0,e)},reject:function(e){return i(e)}}),this.websocketClient.send(e)}catch(e){i(e)}}else try{this.websocketClient.send(e),t.resolve()}catch(e){t.reject(e)}return[2,t.promise]}))}))},e.prototype.send=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e instanceof De?[4,this._sendApiRequest(e)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e instanceof Pe?[4,this._sendWebsocketRequest(e)]:[3,4];case 4:throw v.invalidParameters}}))}))},e.prototype.cancel=function(e){this.apiClient.cancel(e)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();!function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"}(mr||(mr={}));var Tr=function(e){function n(t){var n=t.stateType,i=e.call(this)||this;return i.stateType=n,i}return t(n,e),n}(ie),Nr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(ie),Cr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(ie),Ar=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(ie),Ir=function(){function e(e){var t,n,i,r;this.isEnabled=null!==(t=e.enabled)&&void 0!==t&&t,this.feedChannels=null!==(n=e.feed_channels)&&void 0!==n?n:{},this.templateListToken=null!==(i=e.template_list_token)&&void 0!==i?i:null,this.settingsUpdatedAt=null!==(r=e.settings_updated_at)&&void 0!==r?r:0}return e.payloadify=function(e){return re(se({enabled:e.isEnabled,feed_channels:e.feedChannels,template_list_token:e.templateListToken,settings_updated_at:e.settingsUpdatedAt}))},e}(),kr=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},Or=function(){function e(e){var t;this.lastUpdatedAt=null!==(t=e.last_updated_at)&&void 0!==t?t:0}return e.payloadify=function(e){return re(se({last_updated_at:e.lastUpdatedAt}))},e}(),Dr=function(){function e(e){var t;this.token=null!==(t=e.template_list_token)&&void 0!==t?t:""}return e.payloadify=function(e){return re(se({template_list_token:e.token}))},e}(),Rr=function(){function e(e){void 0===e&&(e={min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}),this.minStatCount=e.min_stat_count,this.minInterval=1e3*e.min_interval,this.maxStatCountPerRequest=e.max_stat_count_per_request,this.lowerThreshold=e.lower_threshold,this.requestDelayRange=1e3*e.request_delay_range}return e.payloadify=function(e){return re(se({min_stat_count:e.minStatCount,min_interval:e.minInterval/1e3,max_stat_count_per_request:e.maxStatCountPerRequest,lower_threshold:e.lowerThreshold,request_delay_range:e.requestDelayRange/1e3}))},e}(),Lr=function(){function e(e){void 0===e&&(e={default:{min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}}),this.default=new Rr(e.default),this.realTime=new Rr(e.realtime)}return e.payloadify=function(e){return re(se({default:Rr.payloadify(e.default),realtime:Rr.payloadify(e.realTime)}))},e}(),xr=1048576,Ur=5,Pr=function(){function e(e){var t,n,i,r,s;void 0===e&&(e={}),this.emojiHash=e.emoji_hash||"",this.uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*xr:Number.MAX_SAFE_INTEGER,this.useReaction=!!e.use_reaction,this.applicationAttributes=null!==(t=e.application_attributes)&&void 0!==t?t:[],this.premiumFeatureList=null!==(n=e.premium_feature_list)&&void 0!==n?n:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=null!==(i=e.multiple_file_send_max_size)&&void 0!==i?i:5,this.allowSdkStatsUpload=null===(r=e.allow_sdk_log_ingestion)||void 0===r||r,this.uikitConfigInfo=new Or(null!==(s=e.uikit_config)&&void 0!==s?s:{}),this.notificationInfo=e.notifications?new Ir(e.notifications):null,this.messageTemplateInfo=e.message_template?new Dr(e.message_template):null,this.statConfigInfo=e.log_publish_config?new Lr(e.log_publish_config):new Lr}return e.payloadify=function(e){return re(se({emoji_hash:e.emojiHash,file_upload_size_limit:e.uploadSizeLimit/xr,application_attributes:e.applicationAttributes,premium_feature_list:e.premiumFeatureList,use_reaction:e.useReaction,allow_sdk_log_ingestion:e.allowSdkStatsUpload,uikit_config:e.uikitConfigInfo?Or.payloadify(e.uikitConfigInfo):null,notifications:e.notificationInfo?Ir.payloadify(e.notificationInfo):null,message_template:e.messageTemplateInfo?Dr.payloadify(e.messageTemplateInfo):null,log_publish_config:e.statConfigInfo?Lr.payloadify(e.statConfigInfo):null}))},e}(),Mr=function(){function e(e){this._iid="",this._iid=e}return e.payloadify=function(e){return{}},e}(),Fr=function(e){function n(t){var n=t.userId,i=t.metadata,r=e.call(this)||this;return r.method=oe.POST,r.path="".concat(ce,"/").concat(n,"/metadata"),r.params={metadata:i},r}return t(n,e),n}(De),qr=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.metaData=n,i}return t(n,e),n}(Re),Vr=function(e){function n(t){var n=t.userId,i=t.metadata,r=t.upsert,s=e.call(this)||this;return s.method=oe.PUT,s.path="".concat(ce,"/").concat(n,"/metadata"),s.params={metadata:i,upsert:r},s}return t(n,e),n}(De),Hr=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.metadata=n,i}return t(n,e),n}(Re),zr=function(e){function n(t){var n=t.userId,i=t.metadataKey,r=e.call(this)||this;return r.method=oe.DELETE,r.path="".concat(ce,"/").concat(n,"/metadata/").concat(i),r}return t(n,e),n}(De);!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e)}(Re);var Gr=function(e){function n(t){var n=t.userId,i=e.call(this)||this;return i.method=oe.DELETE,i.path="".concat(ce,"/").concat(n,"/metadata"),i}return t(n,e),n}(De);!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e)}(Re);var jr,Kr=function(e,t){var n=JSON.parse(JSON.stringify(e));return n._iid&&delete n._iid,t&&t(n),n},Br=function(e,t){var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},Qr=function(e){return{do:function(t){e||t()},throw:function(t){if(!e)throw t}}};!function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"}(jr||(jr={}));var Wr,Zr=function(e){function i(t,n){var i,r,s,o,u,l,h,d,_,f,p,E,g=this;return(g=e.call(this,t)||this).userId=null!==(r=null!==(i=n.guest_id)&&void 0!==i?i:n.user_id)&&void 0!==r?r:"",g.nickname=null!==(o=null!==(s=n.nickname)&&void 0!==s?s:n.name)&&void 0!==o?o:"",g.plainProfileUrl=null!==(l=null!==(u=n.profile_url)&&void 0!==u?u:n.image)&&void 0!==l?l:"",g.requireAuth=null!==(h=n.require_auth_for_profile_image)&&void 0!==h&&h,g.metaData=null!==(d=n.metadata)&&void 0!==d?d:{},g.connectionStatus=jr.NON_AVAILABLE,S(jr,n.is_online)?g.connectionStatus=n.is_online:w("boolean",n.is_online)&&(g.connectionStatus=n.is_online?jr.ONLINE:jr.OFFLINE),g.isActive=null===(_=n.is_active)||void 0===_||_,g.lastSeenAt=null!==(f=n.last_seen_at)&&void 0!==f?f:null,g.preferredLanguages=n.preferred_languages?c([],a(n.preferred_languages),!1):null,g.friendDiscoveryKey=null!==(p=n.friend_discovery_key)&&void 0!==p?p:null,g.friendName=null!==(E=n.friend_name)&&void 0!==E?E:null,g}return t(i,e),i.payloadify=function(t){return re(se(n(n({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},Object.defineProperty(i.prototype,"profileUrl",{get:function(){var e=js.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),i.prototype.serialize=function(){return Kr(this)},i.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return w("string",e)}))},i.prototype._applyMetaData=function(e,t){var n=this;void 0===t&&(t=!1),Object.keys(e).forEach((function(i){t?delete n.metaData[i]:n.metaData[i]=e[i]}))},i.prototype.createMetaData=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,o,a;return s(this,(function(s){switch(s.label){case 0:return Qr(this._isValidMetaData(e)).throw(v.invalidParameters),t=js.of(this._iid),n=t.sdkState,i=t.requestQueue,r=new Fr({userId:n.userId,metadata:e}),[4,i.send(r)];case 1:return o=s.sent(),a=o.as(qr).metaData,this._applyMetaData(a),[2,this.metaData]}}))}))},i.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var n,i,r,o,a,c;return s(this,(function(s){switch(s.label){case 0:return Qr(this._isValidMetaData(e)).throw(v.invalidParameters),n=js.of(this._iid),i=n.sdkState,r=n.requestQueue,o=new Vr({userId:i.userId,metadata:e,upsert:t}),[4,r.send(o)];case 1:return a=s.sent(),c=a.as(Hr).metadata,this._applyMetaData(c),[2,this.metaData]}}))}))},i.prototype.deleteMetaData=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,o;return s(this,(function(s){switch(s.label){case 0:return Qr(w("string",e)).throw(v.invalidParameters),t=js.of(this._iid),n=t.sdkState,i=t.requestQueue,r=new zr({userId:n.userId,metadataKey:e}),[4,i.send(r)];case 1:return s.sent(),this._applyMetaData(((o={})[e]=!0,o),!0),[2,this.metaData]}}))}))},i.prototype.deleteAllMetaData=function(){return r(this,void 0,void 0,(function(){var e,t,n,i;return s(this,(function(r){switch(r.label){case 0:return e=js.of(this._iid),t=e.sdkState,n=e.requestQueue,i=new Gr({userId:t.userId}),[4,n.send(i)];case 1:return r.sent(),this.metaData={},[2]}}))}))},i}(Mr),Yr=function(e){function n(t){var n=t.userProfile,i=e.call(this)||this;return i.userProfile=n,i}return t(n,e),n}(ie),Xr=function(){function e(e,t){var n,i,r,s,o,a,c,u,l,h,d,_,f,p;this._iid=e,this.appInfo=new Pr(t),this.user=new Zr(e,t),this.connectedAt=null!==(n=t.login_ts)&&void 0!==n?n:0,this.firstConnectedAt=0,this.pingInterval=null!==(i=t.ping_interval)&&void 0!==i?i:15e3,this.pongTimeout=null!==(r=t.pong_timeout)&&void 0!==r?r:5e3,this.reconnectInterval=null!==(o=null===(s=t.reconnect)||void 0===s?void 0:s.interval)&&void 0!==o?o:3e3,this.reconnectMaxInterval=null!==(c=null===(a=t.reconnect)||void 0===a?void 0:a.max_interval)&&void 0!==c?c:6e4,this.reconnectRetryCount=null!==(l=null===(u=t.reconnect)||void 0===u?void 0:u.retry_cnt)&&void 0!==l?l:5,this.reconnectIntervalMultiple=null!==(d=null===(h=t.reconnect)||void 0===h?void 0:h.mul)&&void 0!==d?d:2,this.maxUnreadCountOnSuperGroup=null!==(_=t.max_unread_cnt_on_super_group)&&void 0!==_?_:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=null!==(f=t.concurrent_call_limit)&&void 0!==f?f:5,this.backOffDelay=null!==(p=t.back_off_delay)&&void 0!==p?p:100}return e.payloadify=function(e){return re(se(n(n(n({},Zr.payloadify(e.user)),Pr.payloadify(e.appInfo)),{login_ts:e.connectedAt,ping_interval:e.pingInterval,pong_timeout:e.pongTimeout,reconnect:{interval:e.reconnectInterval,max_interval:e.reconnectMaxInterval,retry_cnt:e.reconnectRetryCount,mul:e.reconnectIntervalMultiple},max_unread_cnt_on_super_group:e.maxUnreadCountOnSuperGroup,profile_image_encryption:e.profileImageEncryption,concurrent_call_limit:e.concurrentCallLimit,back_off_delay:e.backOffDelay})))},e.prototype.apply=function(){var e=this.reconnectInterval,t=this.reconnectMaxInterval,n=this.reconnectIntervalMultiple,i=js.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(i){return i>0?1e3*Math.min(e*Math.pow(n,i-1),t):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.dispatcher.dispatch(new Yr({userProfile:this}))},e}(),Jr=function(e){function i(t){var i=t.request,r=void 0===i||i,s=t.features,o=void 0===s?{}:s,a=t.options,c=void 0===a?{}:a,u=t.statConfigInfo,l=e.call(this)||this;return l.request=r,l.features=n({localCache:!0,notification:!0},o),l.options=n({ingestion:!0},c),l.statConfigInfo=u,l}return t(i,e),i}(ie),$r=function(e){function i(t,n,i){var r,s,o,a,c=this;return(c=e.call(this,t,n,i)||this).error=null,c.services=[],c.userProfile=new Xr(t,i),c.deviceTokenLastDeletedAt=null!==(r=i.device_token_last_deleted_at)&&void 0!==r?r:0,c.key=null!==(s=i.key)&&void 0!==s?s:"",c.ekey=null!==(o=i.ekey)&&void 0!==o?o:"",c.error=i.error?new v(i):null,c.services=null!==(a=i.services)&&void 0!==a?a:[],c}return t(i,e),i.asError=function(e){return new i("","LOGI",n({user_id:"",error:!0},e))},i.prototype.applyTo=function(e){return r(this,void 0,void 0,(function(){var t,n,i;return s(this,(function(r){switch(r.label){case 0:return this.error?[3,4]:(t=js.of(e))?(n=t.sessionManager,i=t.dispatcher,[4,n.login(this)]):[3,2];case 1:return r.sent(),this.userProfile.apply(),i.dispatch(new Jr({request:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish"),notification:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_noti_stats_log_publish")},options:{ingestion:this.userProfile.appInfo.allowSdkStatsUpload},statConfigInfo:this.userProfile.appInfo.statConfigInfo})),[3,3];case 2:throw v.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},i}(Ue),es=function(){function e(){this.type=mr.NONE,this.name="none"}return e.prototype.run=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e.prototype.onReconnect=function(e,t){return t.resetReconnectCount,r(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e.prototype.onDisconnect=function(e,t){return t.error,t.autoReconnect,t.cause,r(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e.prototype.onDisconnectWebSocket=function(e,t){return r(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},e}(),ts=function(e){return r(void 0,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:if(!((t=n.sent())instanceof v))throw t;return t.throwOutside(),[3,3];case 3:return[2]}}))}))},ns=function(e){return r(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},is=function(e){function n(t){void 0===t&&(t={});var n,i=this;return(i=e.call(this)||this).type=mr.LOGOUT,i.name="logout",i._wasPreviouslyConnected=null===(n=t.wasPreviouslyConnected)||void 0===n||n,i}return t(n,e),n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t,n,i=this;return s(this,(function(o){switch(o.label){case 0:return t=Date.now(),n=e.sdkState.userId,[4,e.logout()];case 1:return o.sent(),[4,e.changeState(new ps,t)];case 2:return o.sent(),this._wasPreviouslyConnected&&ts((function(){return r(i,void 0,void 0,(function(){return s(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onDisconnected&&e.onDisconnected(n)})),[2]}))}))})),[2]}}))}))},n}(es),rs=function(e){function n(){var t=e.call(this)||this;return t.type=mr.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return t(n,e),n.prototype.run=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,e.disconnect()];case 1:return t.sent(),[2]}}))}))},n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return i.sent(),[4,e.changeState(new ds({authToken:t}),n)];case 2:return i.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new us,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new is,t)];case 1:return n.sent(),[2]}}))}))},n}(es),ss=function(e){function n(t){var n=t.autoReconnect,i=e.call(this)||this;return i.type=mr.INTERNAL_DISCONNECTED,i.name="internaldisconnected",i._autoReconnect=!1,i._autoReconnect=n,i}return t(n,e),n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),this._autoReconnect?[4,e.changeState(new us,t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return i.sent(),[4,e.changeState(new ds({authToken:t}),n)];case 2:return i.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new us,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new rs,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new is,t)];case 1:return n.sent(),[2]}}))}))},n}(es),os=function(e){return r(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},as=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),cs=function(e,t,n){return void 0===n&&(n=new as),r(void 0,void 0,void 0,(function(){var i,r,o,a,c,u;return s(this,(function(s){switch(s.label){case 0:i=0,r=null,o=function(e){return r=null!=e?e:new Error("Halted")},a=function(){i=0},s.label=1;case 1:if(!(-1===t||i<t))return[3,9];s.label=2;case 2:return s.trys.push([2,4,,8]),[4,e(o,a)];case 3:if(c=s.sent(),r)throw r;return[2,c];case 4:if(u=s.sent(),r)return[3,6];if(++i===t)throw u;return[4,os(n.calcTimeout(i))];case 5:return s.sent(),[3,7];case 6:throw r;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}}))}))},us=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=mr.RECONNECTING,t.name="reconnecting",t._callbacks=[],t}return t(n,e),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t,n,i,o,a,c,l=this;return s(this,(function(h){switch(h.label){case 0:t=Date.now(),n=new Xe,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),ts((function(){return r(l,void 0,void 0,(function(){return s(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectStarted&&e.onReconnectStarted()})),[2]}))}))})),h.label=1;case 1:return h.trys.push([1,4,,9]),i=e.sdkState.websocket,o=i.reconnectMaxRetry,a=i.reconnectRetryStrategy,[4,cs((function(t,n){return r(l,void 0,void 0,(function(){var i;return s(this,(function(r){switch(r.label){case 0:this._haltConnect=t,this._resetConnect=n,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.connect()];case 2:return r.sent(),[3,4];case 3:if(i=r.sent(),e.clearLoginTimer(),i instanceof v){if(i.code===u.CONNECTION_CANCELED)return t(i),[2];if(i.isSessionExpiredError||i.isSessionInvalidatedError)return t(i),[2]}throw i;case 4:return[2]}}))}))}),o,a)];case 2:return h.sent(),[4,e.changeState(new ls,t)];case 3:return h.sent(),this._flushCallbacks(),ts((function(){return r(l,void 0,void 0,(function(){return s(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectSucceeded&&e.onReconnectSucceeded()})),[2]}))}))})),[3,9];case 4:return c=h.sent(),g(c)?[3,7]:c instanceof v?c.code===u.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new ss({autoReconnect:!1}),t)]:[3,6];case 5:h.sent(),h.label=6;case 6:return this._flushCallbacks(c),ts((function(){return r(l,void 0,void 0,(function(){return s(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectFailed&&e.onReconnectFailed()})),[2]}))}))})),[3,8];case 7:throw c;case 8:return[3,9];case 9:return[2,n.promise]}}))}))},n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){return n=new Xe,this._halt(v.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var i=Date.now();e.changeState(new ds({authToken:t}),i).then((function(){n.resolve()})).catch((function(e){n.reject(e)}))})),[2,n.promise]}))}))},n.prototype.onReconnect=function(e,t){var n=t.resetReconnectCount,i=void 0!==n&&n;return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){return e=new Xe,this._resetConnect&&i&&this._resetConnect(),this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},n.prototype.onDisconnect=function(e,t){t.error;var n=t.autoReconnect,i=void 0===n||n;return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(v.connectionCanceled),[4,e.changeState(new ss({autoReconnect:i}),t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(v.connectionCanceled),[4,e.changeState(new rs,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(v.connectionCanceled),[4,e.changeState(new is,t)];case 1:return n.sent(),[2]}}))}))},n}(es),ls=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=mr.CONNECTED,t.name="connected",t}return t(n,e),n.prototype.onReconnect=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),[4,e.changeState(new us,t)];case 2:return n.sent(),[2]}}))}))},n.prototype.onDisconnect=function(e,t){var n=t.autoReconnect;return r(this,void 0,void 0,(function(){var t;return s(this,(function(i){switch(i.label){case 0:return t=Date.now(),[4,e.changeState(new ss({autoReconnect:n}),t)];case 1:return i.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new rs,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new is,t)];case 1:return n.sent(),[2]}}))}))},n}(es);!function(e){e.ExternalSetBackground="ExternalSetBackground",e.ExternalDisconnectWebSocket="ExternalDisconnectWebSocket"}(Wr||(Wr={}));var hs=function(){function e(e,t){var n=t.sdkState,i=t.cacheContext,r=t.connectionHandlers,s=t.sessionManager,o=t.websocketClient,a=t.dispatcher,c=t.logger,u=t.disableWebSocketCloseEventHandling,l=void 0!==u&&u;this._disableWebSocketCloseEventHandling=!1,this._webSocketClosedCause=null,this._logger=c,this._disableWebSocketCloseEventHandling=l,this._context=new bs(e,{sdkState:n,cacheContext:i,connectionHandlers:r,sessionManager:s,websocketClient:o,dispatcher:a,logger:c}),this._sdkState=n,this._sessionManager=s,this._websocketClient=o}return e.prototype._registerEventDispatcher=function(){var e=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh",(function(){e.isConnecting||e.isConnected||(e._logger.debug("try reconnect by session key refresh"),ns((function(){return r(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.reconnect()];case 1:return e.sent(),[2]}}))}))})))})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){"foreground"!==e._sdkState.appState||e._webSocketClosedCause||ns((function(){return r(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this._sessionManager.isSessionKeyRefreshing?[3,2]:(this._logger.debug("try reconnect by websocket connection closed"),[4,this.reconnect()]);case 1:return e.sent(),[3,4];case 2:return[4,this.disconnectWebSocket()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}))})))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===mr.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var e=this._context.currentState;return e.type===mr.CONNECTING||e.type===mr.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=this._context.currentState,this._webSocketClosedCause=null,[4,t.onConnect(this._context,e)];case 1:return n.sent(),this._registerEventDispatcher(),[2]}}))}))},e.prototype.reconnect=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._webSocketClosedCause=null,[4,e.onReconnect(this._context,{})];case 1:return t.sent(),[2]}}))}))},e.prototype.resetAndReconnect=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._webSocketClosedCause=null,[4,e.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.background=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._webSocketClosedCause=Wr.ExternalSetBackground,[4,e.onDisconnect(this._context,{autoReconnect:!1,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnect=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:e,autoReconnect:!0,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(e){return void 0===e&&(e=!1),r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=this._context.currentState,e&&(this._webSocketClosedCause=Wr.ExternalDisconnectWebSocket),[4,t.onDisconnectWebSocket(this._context,{cause:this._webSocketClosedCause})];case 1:return n.sent(),[2]}}))}))},e.prototype.logout=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context)];case 1:return t.sent(),[2]}}))}))},e}(),ds=function(e){function n(t){var n=t.authToken,i=e.call(this)||this;return i.type=mr.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=n,i}return t(n,e),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t,n,i,o=this;return s(this,(function(a){switch(a.label){case 0:t=Date.now(),n=new Xe,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),a.label=1;case 1:return a.trys.push([1,4,,10]),[4,cs((function(t){return r(o,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:this._haltConnect=t,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.connect(this._authToken)];case 2:return i.sent(),[3,4];case 3:if(n=i.sent(),e.clearLoginTimer(),n instanceof v&&n.code===u.CONNECTION_CANCELED)return t(n),[2];throw n;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return a.sent(),[4,e.changeState(new ls,t)];case 3:return a.sent(),ts((function(){return r(o,void 0,void 0,(function(){return s(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(t){t.onConnected&&t.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,10];case 4:return i=a.sent(),g(i)?[3,8]:[4,e.disconnect()];case 5:return a.sent(),i instanceof v?i.code===u.CONNECTION_CANCELED?[3,7]:[4,e.changeState(new ps,t)]:[3,7];case 6:a.sent(),a.label=7;case 7:return ts((function(){return r(o,void 0,void 0,(function(){return s(this,(function(e){return this._flushCallbacks(i),[2]}))}))})),[3,9];case 8:throw i;case 9:return[3,10];case 10:return[2,n.promise]}}))}))},n.prototype.onConnect=function(e){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){return e=new Xe,this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},n.prototype.onDisconnect=function(e,t){var n=t.error,i=void 0===n?null:n,o=t.autoReconnect,a=void 0!==o&&o,c=t.cause,u=void 0===c?null:c;return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(null!=i?i:_s(u)),e.hasSession?[4,e.changeState(new ss({autoReconnect:a}),t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new is,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return this._halt(_s((null==t?void 0:t.cause)||null)),n=Date.now(),e.hasSession?[4,e.changeState(new rs,n)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,e.changeState(new is,n)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(v.connectionCanceled),[4,e.changeState(new is,t)];case 1:return n.sent(),[2]}}))}))},n}(es);function _s(e){var t=v.connectionCanceled;if(e){var n=null;switch(e){case Wr.ExternalSetBackground:n="Connection has been canceled due to the application having externally moved to background while in ConnectingState.";break;case Wr.ExternalDisconnectWebSocket:n="Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState."}n&&t.setDetail(n)}return t}var fs,ps=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=mr.INITIALIZED,t.name="initialized",t}return t(n,e),n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,e.changeState(new ds({authToken:t}),n)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new is({wasPreviouslyConnected:!1}),t)];case 1:return n.sent(),[2]}}))}))},n}(es),Es=function(e){function n(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return t(n,e),n}(Pe),gs=function(){function e(e){var t=e.pingDelegate,n=e.sdkState,i=e.logger;this.pingDelegate=t,this.sdkState=n,this._logger=i}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var e,t=this;if(!this.sdkState.websocket)throw v.connectionRequired;var n=new Es;try{var i=null!==(e=this.sdkState.websocket.pongTimeout)&&void 0!==e?e:5e3;this._pingTimeoutTimer=setTimeout((function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()}),i),this.pingDelegate.send(n),this._logger.debug("pinger.ping()")}catch(e){this._logger.debug("pinger.ping() error",e),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return n},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var e,t=this;if(!this.sdkState.websocket)throw v.connectionRequired;this._logger.debug("pinger.refreshTimer()");var n=null!==(e=this.sdkState.websocket.pingInterval)&&void 0!==e?e:15e3;this.stop(),this._pingTimer=setInterval((function(){t.ping()}),n)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),vs=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications","message_template"],bs=function(e){function n(t,n){var i,r=n.sdkState,s=n.cacheContext,o=n.connectionHandlers,a=n.sessionManager,c=n.websocketClient,u=n.dispatcher,l=n.logger,h=n.entryState,d=void 0===h?new ps:h,_=this;return(_=e.call(this)||this)._stateUpdatedAt=0,_._connectingAt=0,_._connectionRequestQueue=[],_._iid=t,_.sdkState=r,_.cacheContext=s,_.connectionHandlers=o,_._sessionManager=a,_._websocketClient=c,_._dispatcher=u,_._logger=l,_._currentState=d,(null===(i=_.sdkState.websocket)||void 0===i?void 0:i.pingerDisabled)||(_._pinger=new gs({pingDelegate:{send:function(e){return _._websocketClient.send(e)},error:function(e){return _._websocketClient.error(e)}},sdkState:_.sdkState,logger:l})),_._websocketClient.on("open",(function(){_._tryResolveConnectionRequest()})).on("message",(function(e){if("LOGI"===e.code)_.clearLoginTimer(),_._dispatcher.dispatch(e.as($r))})).on("ping-refresh",(function(){var e;return null===(e=_._pinger)||void 0===e?void 0:e.refreshTimer()})).on("pong",(function(){var e;return null===(e=_._pinger)||void 0===e?void 0:e.pong()})).on("error",(function(){var e;return null===(e=_._pinger)||void 0===e?void 0:e.stop()})).on("close",(function(){_._logiProcessingTimer=setTimeout((function(){_._logiProcessingTimer=void 0,_._unresolvedLogi||_._rejectConnectionRequest(v.networkError)}),500)})),_._dispatcher.on((function(e){e instanceof $r&&(_._unresolvedLogi=e,_._tryResolveConnectionRequest())})),_}return t(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),n.prototype.changeState=function(e,t){return r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return t>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=t,this._dispatcher.dispatch(new Tr({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},n.prototype._tryResolveConnectionRequest=function(){var e;return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=this._unresolvedLogi,this._websocketClient.isOpen&&t?(this._unresolvedLogi=void 0,t.error?[3,2]:[4,t.applyTo(this._iid)]):[3,3];case 1:return n.sent(),this._statLogConnection(),null===(e=this._pinger)||void 0===e||e.start(),this._connectionRequestQueue.forEach((function(e){return e.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.session.authToken=void 0,(t.error.isSessionExpiredError||t.error.isSessionInvalidatedError)&&this._dispatcher.dispatch(new xe({reason:t.error.code})),this._rejectConnectionRequest(t.error),n.label=3;case 3:return[2]}}))}))},n.prototype._rejectConnectionRequest=function(e){var t;if(null===(t=this._pinger)||void 0===t||t.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var n=this._connectionRequestQueue;this._connectionRequestQueue=[],n.forEach((function(t){return t.reject(e)})),this._statLogConnection(e)}},n.prototype._url=function(){var e,t=this.sdkState,n=t.appId,i=t.appVersion,r=t.userId,s=t.extensions,o=t.sendbirdRuntimeEnvironment,a=this.cacheContext.localCacheEnabled,c=this._sessionManager.session,u=null===(e=this.sdkState.websocket)||void 0===e?void 0:e.compression,l=!!(null!=s?s:{}).sb_uikit,d=Ye.userAgentWithExtension(s);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(h.OS_VERSION),"&sv=").concat(encodeURIComponent(h.SDK_VERSION),"&ai=").concat(n).concat(i?"&av=".concat(i):"").concat(c.hasSession?"":"&user_id=".concat(encodeURIComponent(r)),"&pmce=").concat(u?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(d,"&SB-SDK-User-Agent=").concat(encodeURIComponent(Ye.sendbirdSdkUserAgentWithExtension(o)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(vs))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(a?1:0,"&include_poll_details=1").concat(l?"&uikit_config=1":"")},n.prototype._statLogConnection=function(e){var t;this._dispatcher.dispatch(new He(new Be({type:Oe.WEBSOCKET_CONNECT,data:{host_url:null===(t=this.sdkState.websocket)||void 0===t?void 0:t.host,success:!e,latency:Date.now()-this._connectingAt,error_code:null==e?void 0:e.code,error_description:null==e?void 0:e.message}})))},n.prototype.connect=function(e){var t;return void 0===e&&(e=""),r(this,void 0,void 0,(function(){var n,i,r,o=this;return s(this,(function(s){return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(v.connectionCanceled)),n=this._url(),i=new Xe,this._connectionRequestQueue.push(i),1===this._connectionRequestQueue.length&&(this._connectingAt=Date.now(),this._loginTimer=setTimeout((function(){o._loginTimer=void 0,o._rejectConnectionRequest(v.loginTimeout)}),null===(t=this.sdkState.websocket)||void 0===t?void 0:t.responseTimeout),r=this._sessionManager.session,e&&(r.authToken=e),r.sessionKey||r.authToken?this._websocketClient.connect(n,JSON.stringify(r.hasSession?{auth:r.sessionKey}:{token:r.authToken})):this._websocketClient.connect(n,JSON.stringify({}))),[2,i.promise]}))}))},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch($r.asError(v.connectionRenew))},n.prototype.disconnect=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},n.prototype.logout=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this.disconnect()];case 1:return e.sent(),[4,this._sessionManager.clear()];case 2:return e.sent(),[2]}}))}))},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n}(te),ms=function(e){function n(t){var n=t.appId,i=t.userId,r=t.services,s=t.includeUIKitConfig,o=void 0!==s&&s,a=t.localCacheEnabled,c=void 0===a||a,u=t.expiringSession,l=void 0===u||u,h=e.call(this)||this;return h.path="".concat(ce,"/").concat(i,"/login"),h.method=oe.POST,h.params=re({expiring_session:!!l,services:r,include_logi:!0,include_extra_data:String(vs),uikit_config:o,use_local_cache:c,app_id:n}),h.requireAuth=!1,h}return t(n,e),n}(De),ys=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.logi=new $r(t,"LOGI",n),i}return t(n,e),n}(Re);!function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"}(fs||(fs={}));var ws,Ss,Ts=[Me,ms],Ns=function(){function e(e,t){var n=t.session,i=t.sdkState,r=t.dispatcher,s=t.logger,a=t.useFetchCompat,c=void 0!==a&&a,u=this;this._currentConnectionStateType=mr.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new Sr(e,{session:n,sdkState:i,dispatcher:r,logger:s,useFetchCompat:c}),this._session=n,this._logger=s,this._dispatcher=r,this._dispatcher.on((function(e){var t,n,i,r;if(e instanceof Tr){var s=e.stateType;switch(u._currentConnectionStateType=s,s){case mr.CONNECTED:u._resolveLazyCallQueue();break;case mr.INITIALIZED:case mr.INTERNAL_DISCONNECTED:case mr.EXTERNAL_DISCONNECTED:case mr.LOGOUT:u._rejectLazyCallQueue((null===(i=u._session)||void 0===i?void 0:i.hasSession)?v.connectionClosed:v.connectionRequired)}}else if(e instanceof Nr)(null===(r=u._session.services)||void 0===r?void 0:r.includes(P.CHAT))||u._resolveLazyCallQueue(fs.API);else if(e instanceof Cr||e instanceof Ar)u._rejectLazyCallQueue(v.connectionClosed);else if(e instanceof ze){var a=e.request,c=e.deferred,l=e.error;try{for(var h=o(Ts),d=h.next();!d.done;d=h.next()){if(a instanceof d.value)return void c.reject(l)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}u._lazyCallQueue.push({command:a,deferred:c})}}))}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===mr.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===mr.CONNECTING||this._currentConnectionStateType===mr.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(e){var t,n=[],i=[];switch(e){case fs.ALL:t=null;break;case fs.WEBSOCKET:t=Pe;break;case fs.API:t=De}var r=!1;return this._lazyCallQueue.forEach((function(e){!t||e.command instanceof t||(r=!0),r?i.push(e):n.push(e)})),[n,i]},e.prototype._resolveLazyCallQueue=function(e){var t=this;void 0===e&&(e=fs.ALL);var n=a(this._classifyLazyCallQueueByScope(e),2),i=n[0],o=n[1];this._lazyCallQueue=o,i.forEach((function(e){return r(t,void 0,void 0,(function(){var t,n,i,r,o;return s(this,(function(s){switch(s.label){case 0:t=e.command,n=e.deferred,(i=e.timeout)&&clearTimeout(i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.send(t)];case 2:return r=s.sent(),n.resolve(r),[3,4];case 3:return o=s.sent(),n.reject(o),[3,4];case 4:return[2]}}))}))}))},e.prototype._rejectLazyCallQueue=function(e,t){var n=this;void 0===t&&(t=fs.ALL);var i=a(this._classifyLazyCallQueueByScope(t),2),o=i[0],c=i[1];this._lazyCallQueue=c,o.forEach((function(t){return r(n,void 0,void 0,(function(){var n,i;return s(this,(function(r){return n=t.deferred,i=t.timeout,clearTimeout(i),n.reject(e),[2]}))}))}))},e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t,n,i=this;return s(this,(function(r){switch(r.label){case 0:return e instanceof Pe?this.isReady?(this._logger.debug("send websocket request",e),[4,this.commandRouter.send(e)]):[3,2]:[3,4];case 1:case 5:case 7:return[2,r.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",e),t=new Xe,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return i.timeout(e.requestId)}),1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),v.connectionRequired;case 3:case 9:return[3,11];case 4:return e instanceof De?this._session.hasSession?(this._logger.debug("send api request",e),[4,this.commandRouter.send(e)]):[3,6]:[3,10];case 6:return e.hasSessionKey?(this._logger.debug("send api request with tmp session key",e),[4,this.commandRouter.send(e)]):[3,8];case 8:if(this.isLazyCallActivated)return this._logger.debug("wait api request",e),t=new Xe,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return i.timeout(e.requestId)}),1e4)}),[2,t.promise];throw n=v.connectionRequired,this._logger.debug("fail api request",n),n;case 10:throw v.invalidCommand;case 11:return[2]}}))}))},e.prototype.forceSend=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this._logger.debug("send forced request",e),e instanceof Pe||e instanceof De?[4,this.commandRouter.send(e)]:[3,2];case 1:return[2,t.sent()];case 2:throw v.invalidCommand}}))}))},e.prototype.timeout=function(e){this._logger.debug("timeout request",e);var t=this._lazyCallQueue.findIndex((function(t){return t.command.requestId===e}));t>-1&&(this._lazyCallQueue[t].deferred.reject(v.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(e){this._logger.debug("cancel api request",e),this.commandRouter.cancel(e)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),Cs="sendbird@devicetokens",As=function(){function e(e){var t=e.type,n=e.token,i=e.device_os,r=e.device_manufacturer,s=e.system_push_enabled;this.type=t,this.token=n,this.deviceOS=i,this.deviceManufacturer=r,this.systemPushEnabled=s}return e.payloadify=function(e){return re(se({type:e.type,token:e.token,device_os:e.deviceOS,device_manufacturer:e.deviceManufacturer,system_push_enabled:e.systemPushEnabled}))},e}(),Is=new WeakMap,ks=function(e){function n(t){var n=t._iid,i=t.session,r=t.cacheContext,s=t.sdkState,o=t.dispatcher,a=t.requestQueue,c=t.logger,u=t.pushNotificationAckManager,l=e.call(this)||this;return l._currentConnectionStateType=mr.INITIALIZED,l._isRefreshingAuthToken=!1,l.currentUser=null,l.session=i,l._iid=n,l._cacheContext=r,l._sdkState=s,l._dispatcher=o,l._requestQueue=a,l._logger=c,l._pushNotificationAckManager=u,l._deviceTokens=[],l._dispatcher.on((function(e){var t,n,i;if(e instanceof Tr){var r=e.stateType;l._currentConnectionStateType=r}else e instanceof xe&&l.handler&&!l.isSessionKeyRefreshing&&((null===(t=e.error)||void 0===t?void 0:t.isSessionInvalidatedError)?l.close():((null===(n=e.error)||void 0===n?void 0:n.isSessionTokenExpiredError)&&l.refreshAuthToken().catch((function(e){if(g(e)&&"foreground"===l._sdkState.appState)throw e})),(null===(i=e.error)||void 0===i?void 0:i.isSessionKeyExpiredError)&&(l._logger.debug("session expired"),l.handler.onSessionExpired&&l.handler.onSessionExpired(),l.refreshSessionKey().catch((function(e){if(g(e)&&"foreground"===l._sdkState.appState)throw e})))))})),l}return t(n,e),Object.defineProperty(n.prototype,"ekey",{get:function(){return Is.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(e,t){return this._deviceTokens.findIndex((function(n){return n.type===e&&n.token===t}))},n.prototype.hasDeviceToken=function(e,t){return this.indexOfDeviceToken(e,t)>=0},n.prototype.createRefreshWebsocketCommand=function(e,t){return new Fe({authToken:e,expiringSession:!0,requestId:t})},n.prototype._refreshSessionKeyByWebSocket=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,o;return s(this,(function(s){switch(s.label){case 0:return t=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(t)];case 1:if(n=s.sent(),i=n.as(Ve),r=i.newKey,o=i.error)throw o;return this.session.sessionKey=null!=r?r:this.session.sessionKey,[2]}}))}))},n.prototype._refreshSessionKeyByApi=function(e){return r(this,void 0,void 0,(function(){var t,n=this;return s(this,(function(i){switch(i.label){case 0:return t=new Me({userId:this._sdkState.userId,authToken:e,services:this.session.services&&this.session.services.length>0?this.session.services:void 0,expiringSession:!0}),[4,cs((function(e){return r(n,void 0,void 0,(function(){var n,i,r,o,a;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(t)];case 1:return n=s.sent(),i=n.as(qe),r=i.key,o=i.services,this.session.sessionKey=r,this.session.services=o,[3,3];case 2:if(a=s.sent(),!this._isSessionRelatedError(a))throw a;return e(a),[3,3];case 3:return[2]}}))}))}),3)];case 1:return i.sent(),[2]}}))}))},n.prototype._refreshSessionKey=function(e,t){return void 0===t&&(t=!0),r(this,void 0,void 0,(function(){var n,i;return s(this,(function(r){switch(r.label){case 0:if(this._currentConnectionStateType!==mr.CONNECTED)return[3,8];r.label=1;case 1:return r.trys.push([1,3,,8]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return r.sent(),this.complete(),[2];case 3:n=r.sent(),r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this._handleSessionRefreshError(n,t)];case 5:return r.sent(),[2];case 6:return r.sent(),[3,7];case 7:return[3,8];case 8:return r.trys.push([8,10,,12]),[4,this._refreshSessionKeyByApi(e)];case 9:return r.sent(),this.complete(),[3,12];case 10:return i=r.sent(),[4,this._handleSessionRefreshError(i,t)];case 11:return r.sent(),[3,12];case 12:return[2]}}))}))},n.prototype._receiveNewAuthToken=function(){var e,t=this,n=new Xe;if(this._isRefreshingAuthToken=!0,this.session.sessionKey=void 0,this.session.authToken=void 0,null===(e=this.handler)||void 0===e?void 0:e.onSessionTokenRequired){var i=null,o=function(){i&&(clearTimeout(i),i=null)},a=function(e){o(),t._isRefreshingAuthToken&&(t._isRefreshingAuthToken=!1,n.resolve(e))},c=function(e){o(),t._isRefreshingAuthToken&&(t._isRefreshingAuthToken=!1,n.reject(e))};i=setTimeout((function(){return c()}),1e3*this._sdkState.sessionTokenRefreshTimeout),ts((function(){return r(t,void 0,void 0,(function(){var e;return s(this,(function(t){return(null===(e=this.handler)||void 0===e?void 0:e.onSessionTokenRequired)&&this.handler.onSessionTokenRequired(a,c),[2]}))}))}))}else n.resolve(null);return n.promise},n.prototype._handleSessionRefreshError=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return e instanceof v&&(e.isSessionTokenExpiredError||e.code===u.APPLICATION_NOT_FOUND)?(this.session.authToken=void 0,t?[4,this._receiveNewAuthToken()]:[3,6]):[3,6];case 1:return(n=i.sent())?(this.session.authToken=n,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,3];case 2:return i.sent(),this.complete(),[3,5];case 3:return[4,this.clear()];case 4:i.sent(),i.label=5;case 5:return[2];case 6:throw e}}))}))},n.prototype._isSessionRelatedError=function(e){return e instanceof v&&(e.isSessionExpiredError||e.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticateFeed=function(e,t){var n;return r(this,void 0,void 0,(function(){var i,r,o;return s(this,(function(s){switch(s.label){case 0:return this.session.authToken=t,i=new ms({appId:this._sdkState.appId,userId:e,services:[P.FEED],includeUIKitConfig:!!(null!==(n=this._sdkState.extensions)&&void 0!==n?n:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:!t||this.isSessionExpiring}),[4,this._requestQueue.commandRouter.send(i)];case 1:return r=s.sent(),(o=r.as(ys).logi).error?[3,3]:[4,o.applyTo(this._iid)];case 2:return s.sent(),[3,4];case 3:throw o.error;case 4:return[2]}}))}))},n.prototype.login=function(e){var t;return r(this,void 0,void 0,(function(){var n,i,r,o,a,c,u,l;return s(this,(function(s){switch(s.label){case 0:return n=e.key,i=e.ekey,r=e.services,o=e.userProfile,a=e.deviceTokenLastDeletedAt,c=void 0===a?0:a,this.session.sessionKey=n,this.session.services=r,Is.set(this,i),this._deviceTokenCacheEnabled=null===(t=null==o?void 0:o.appInfo)||void 0===t?void 0:t.deviceTokenCache,u=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,u.get(Cs)]:[3,5];case 1:return!(l=s.sent())||l.lastDeletedAt<c?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=c,[4,this.saveDeviceToken()]):[3,3];case 2:return s.sent(),[3,4];case 3:this._deviceTokens=l.tokens.map((function(e){return new As(As.payloadify(e))})),this._deviceTokenLastDeletedAt=l.lastDeletedAt,s.label=4;case 4:return[3,7];case 5:return[4,u.remove(Cs)];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))},n.prototype.complete=function(){var e=this;this.dispatch("refresh"),this._dispatcher.dispatch(new Nr),ts((function(){return r(e,void 0,void 0,(function(){var e;return s(this,(function(t){return this._logger.debug("session refreshed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionRefreshed)&&this.handler.onSessionRefreshed(),[2]}))}))}))},n.prototype.error=function(e){var t=this;ts((function(){return r(t,void 0,void 0,(function(){var t;return s(this,(function(n){return(null===(t=this.handler)||void 0===t?void 0:t.onSessionError)&&this.handler.onSessionError(e),[2]}))}))}))},n.prototype.close=function(){var e=this;this.dispatch("close"),this._dispatcher.dispatch(new Ar),ts((function(){return r(e,void 0,void 0,(function(){var e;return s(this,(function(t){return this._logger.debug("session closed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionClosed)&&this.handler.onSessionClosed(),[2]}))}))}))},n.prototype.refreshAuthToken=function(){return r(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:if(e=null,!this.isSessionExpiring||this.session.isRefreshing)return[3,9];this.session.isRefreshing=!0,n.label=1;case 1:return n.trys.push([1,7,8,9]),[4,this._receiveNewAuthToken()];case 2:return(e=n.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=e,[4,this._refreshSessionKey(this.session.authToken)]):[3,4];case 3:return n.sent(),[3,6];case 4:return[4,this.clear()];case 5:n.sent(),n.label=6;case 6:return[3,9];case 7:throw n.sent(),t=e?v.sessionTokenRefreshFailed:v.sessionTokenRequestFailed,this._dispatcher.dispatch(new Cr),this.error(t),this._logger.debug("refresh auth token error = ",t),t;case 8:return this.session.isRefreshing=!1,[7];case 9:return[2]}}))}))},n.prototype.refreshSessionKey=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:if(!this.isSessionExpiring||this.session.isRefreshing)return[3,5];this.session.isRefreshing=!0,t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,this._refreshSessionKey(this.session.authToken)];case 2:return t.sent(),[3,5];case 3:throw t.sent(),e=v.sessionTokenRefreshFailed,this._dispatcher.dispatch(new Cr),this.error(e),e;case 4:return this.session.isRefreshing=!1,[7];case 5:return[2]}}))}))},n.prototype.setDeviceToken=function(e,t,n){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,t)<0){var i=new As({type:e,token:t,device_os:null==n?void 0:n.deviceOS,device_manufacturer:null==n?void 0:n.deviceManufacturer,system_push_enabled:null==n?void 0:n.systemPushEnabled});return this._deviceTokens.push(i),!0}return!1},n.prototype.unsetDeviceToken=function(e,t){if(this._deviceTokenCacheEnabled){var n=this.indexOfDeviceToken(e,t);n>=0&&this._deviceTokens.splice(n,1)}},n.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(t){return t.type!==e})):[])},n.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},n.prototype.saveDeviceToken=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(Cs,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),Is.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),this._pushNotificationAckManager.clear(),[2]}}))}))},n}(te),Os=function(e,t){var n,i;if(null!==e&&null!==t){var r=Object.keys(e),s=Object.keys(t),u=c([],a(new Set(c(c([],a(r),!1),a(s),!1))),!1),l={};try{for(var h=o(u),d=h.next();!d.done;d=h.next()){var _=d.value,f=typeof e[_],p=typeof t[_];"undefined"===f?l[_]=t[_]:"undefined"===p?l[_]=e[_]:f!==p?l[_]=t[_]:"object"===f&&e[_]&&t[_]?l[_]=Os(e[_],t[_]):l[_]=t[_]}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return l}return t};!function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"}(ws||(ws={})),function(e){e.DAILY="daily",e.DEFAULT="default",e.REALTIME="realtime"}(Ss||(Ss={}));var Ds,Rs=function(e){function n(t){var n=t.deviceId,i=t.statLogs,r=e.call(this)||this;return r.method=oe.POST,r.path="".concat(ye),r.params={device_id:n,log_entries:i.map((function(e){return Be.payloadify(e)}))},r}return t(n,e),n}(De),Ls=function(){function e(e){var t=e.deviceId,n=e.cacheContext,i=e.requestQueue;this.queue=[],this.flushWaitQueue=[],this.enabledState=ws.PENDING,this.isFlushing=!1,this.deviceId=t,this.cacheContext=n,this.requestQueue=i,this.logInfo={deviceId:t,statLogs:[],generation:1,lastFlushedAt:0},this.limit=100}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.enabledState===ws.ENABLED},enumerable:!1,configurable:!0}),e.prototype.init=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this.key=e,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=n.sent())&&(this.logInfo=t),[2]}}))}))},e.prototype._mergeQueue=function(){this.flushWaitQueue.length>0&&(this.queue=this.queue.concat(this.flushWaitQueue),this.flushWaitQueue=[])},e.prototype._flush=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r;return s(this,(function(s){switch(s.label){case 0:if(t=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,s.label=1;case 1:return s.trys.push([1,4,8,9]),n=c([],a(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),i=new Rs({deviceId:this.deviceId,statLogs:n}),[4,this.requestQueue.send(i)];case 2:return s.sent(),this.queue=c([],a(e),!1).slice(n.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=100,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return s.sent(),[3,9];case 4:return(r=s.sent())instanceof v?r.code!==u.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return s.sent(),this.enabledState=ws.DISABLED,[3,7];case 6:r.code===u.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=ws.COLLECT_ONLY),s.label=7;case 7:return this.limit=this.limit+20,t=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,s.label=11;case 11:return[2,t]}}))}))},e.prototype._save=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=c(c([],a(this.queue),!1),a(this.flushWaitQueue),!1),[4,this.cacheContext.preference.set(this.key,{deviceId:this.logInfo.deviceId,statLogs:e.map((function(e){return Be.payloadify(e)})),generation:this.logInfo.generation++,lastFlushedAt:this.logInfo.lastFlushedAt})];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return r(this,void 0,void 0,(function(){return s(this,(function(e){return this.queue=[],this.flushWaitQueue=[],this.logInfo.generation=1,this._save(),[2]}))}))},e}(),xs=function(e){function n(t){var n,i,r,s,o=t.type,a=t.data,c=t.ts,u=void 0===c?Date.now():c,l=e.call(this,{type:o,data:a,ts:u})||this;return l.date=new Date(u),l.key="".concat((n=l.date,i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),"".concat(i).concat(r).concat(s)),"_").concat(o),l}return t(n,e),n}(Be),Us=function(e){function n(t){var n=t.deviceId,i=t.cacheContext,r=t.requestQueue;return e.call(this,{deviceId:n,cacheContext:i,requestQueue:r})||this}return t(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return 0!==this.queue.length&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,e.prototype.init.call(this,t+".daily")];case 1:return n.sent(),this.queue=this.logInfo.statLogs.map((function(e){return new Be({type:e.stat_type,ts:e.ts,data:e.data})})),[2]}}))}))},n.prototype.setConfig=function(e,t){return r(this,void 0,void 0,(function(){var n,i,r,o;return s(this,(function(s){switch(s.label){case 0:return this.statConfig=e,this.statConfig.minInterval=864e5,this._mergeQueue(),t.localCacheStat?(this.enabledState=t.enabledStat?ws.ENABLED:ws.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=ws.DISABLED,[4,this.clear()];case 2:s.sent(),s.label=3;case 3:return this.isEnabled&&this._isSendable?[4,this._getUploadStats()]:[3,9];case 4:n=s.sent(),i=Math.min(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),r=0,s.label=5;case 5:return r<n.length?(o=n.slice(r,1+this.statConfig.maxStatCountPerRequest),[4,os(i)]):[3,9];case 6:return s.sent(),[4,this._flush(o)];case 7:s.sent(),s.label=8;case 8:return r+=this.statConfig.maxStatCountPerRequest,[3,5];case 9:return[2]}}))}))},n.prototype.put=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r;return s(this,(function(s){switch(s.label){case 0:return this.enabledState===ws.DISABLED?[2,!0]:(t=this.enabledState===ws.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,n=a(t.filter((function(t){return t instanceof xs&&t.key===e.key})),1),(i=n[0])?i.data=Os(i.data,e.data):t.push(e),this.enabledState===ws.PENDING?[3,2]:[4,this._save()]);case 1:s.sent(),s.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable?[4,this._getUploadStats()]:[3,5]):[3,5];case 3:return r=s.sent(),[4,this._flush(r)];case 4:return[2,s.sent()];case 5:return[2,!0]}}))}))},n.prototype._getUploadStats=function(){return r(this,void 0,void 0,(function(){var e;return s(this,(function(t){return e=this.queue.filter((function(e){if(e instanceof xs){var t=new Date,n=a([e.date.getFullYear(),t.getFullYear()],2),i=n[0],r=n[1];if(i<r)return!0;if(i===r){var s=a([e.date.getMonth(),t.getMonth()],2),o=s[0],c=s[1];if(o<c)return!0;if(o===c){var u=a([e.date.getDate(),t.getDate()],2);return u[0]<u[1]}}}return!1})),[2,e]}))}))},n}(Ls),Ps=function(e){function i(t){var n=t.deviceId,i=t.cacheContext,r=t.requestQueue;return e.call(this,{deviceId:n,cacheContext:i,requestQueue:r})||this}return t(i,e),i.prototype._isSendable=function(e){if(void 0===e&&(e=!1),this.queue.length<this.statConfig.lowerThreshold)return!1;if(e){if(Date.now()-this.logInfo.lastFlushedAt<this.statConfig.minInterval)return!1}else if(this.queue.length<this.statConfig.minStatCount)return!1;return!0},i.prototype._filterQueueByType=function(e,t){return r(this,void 0,void 0,(function(){return s(this,(function(n){return[2,t?e.filter((function(e){return e.type!==Oe.FEATURE_LOCALCACHE_EVENT})):e.filter((function(e){return e.type===Oe.FEATURE_LOCALCACHE_EVENT}))]}))}))},i.prototype.init=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,e.prototype.init.call(this,t+".default")];case 1:return i.sent(),this.queue=this.logInfo.statLogs.map((function(e){return e.data=n({message_init_policy:"",starting_point:0},e.data),new Be({type:e.stat_type,ts:e.ts,data:e.data})})),[2]}}))}))},i.prototype.setConfig=function(e,t){return r(this,void 0,void 0,(function(){var n,i,r,o;return s(this,(function(s){switch(s.label){case 0:return this.statConfig=e,this._mergeQueue(),t.requestStat||t.localCacheStat?(this.enabledState=t.enabledStat?ws.ENABLED:ws.COLLECT_ONLY,n=void 0,t.requestStat||(n=!1),t.localCacheStat||(n=!0),void 0===n?[3,3]:(i=this,[4,this._filterQueueByType(this.queue,n)])):[3,4];case 1:return i.queue=s.sent(),r=this,[4,this._filterQueueByType(this.flushWaitQueue,n)];case 2:r.flushWaitQueue=s.sent(),this._save(),s.label=3;case 3:return[3,6];case 4:return this.enabledState=ws.DISABLED,[4,this.clear()];case 5:s.sent(),s.label=6;case 6:return this.isEnabled&&this._isSendable(!0)?(o=Math.min(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,os(o)]):[3,9];case 7:return s.sent(),[4,this._flush(this.queue)];case 8:s.sent(),s.label=9;case 9:return[2]}}))}))},i.prototype.put=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this.enabledState===ws.DISABLED?[2,!0]:((t=this.enabledState===ws.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(e),this.enabledState===ws.PENDING?[3,2]:[4,this._save()]);case 1:n.sent(),n.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable()?[4,this._flush(t)]:[3,4]):[3,4];case 3:return[2,n.sent()];case 4:return[2,!0]}}))}))},i}(Ls),Ms=function(e){function i(t){var n=t.deviceId,i=t.cacheContext,r=t.requestQueue;return e.call(this,{deviceId:n,cacheContext:i,requestQueue:r})||this}return t(i,e),Object.defineProperty(i.prototype,"_isSendable",{get:function(){return this.queue.length>=this.statConfig.minStatCount&&this.queue.length>this.statConfig.lowerThreshold||Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),i.prototype.init=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,e.prototype.init.call(this,t+".realtime")];case 1:return i.sent(),this.queue=this.logInfo.statLogs.map((function(e){var t;return e.data=re(n(n({},e.data),{message_id:null!==(t=e.data.notificationId)&&void 0!==t?t:e.data.message_id,notificationId:void 0})),new Be({type:e.stat_type,ts:e.ts,data:e.data})})),[2]}}))}))},i.prototype.setConfig=function(e,t){return r(this,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return this.statConfig=e,this._mergeQueue(),t.notificationStat?(this.enabledState=t.enabledStat?ws.ENABLED:ws.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=ws.DISABLED,[4,this.clear()];case 2:i.sent(),i.label=3;case 3:return this.isEnabled&&this._isSendable?(n=Math.min(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,os(n)]):[3,6];case 4:return i.sent(),[4,this._flush(this.queue)];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},i.prototype.put=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this.enabledState===ws.DISABLED?[2,!0]:((t=this.enabledState===ws.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(e),this.enabledState===ws.PENDING?[3,2]:[4,this._save()]);case 1:n.sent(),n.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this.isEnabled&&this._isSendable?[4,this._flush(t)]:[3,4]):[3,4];case 3:return[2,n.sent()];case 4:return[2,!0]}}))}))},i}(Ls),Fs=function(){function e(e){var t=e.cacheContext,n=e.requestQueue,i=e.dispatcher,r=e.logger;this._collectRequestStat=!0,this._collectFeatureLocalCacheStat=!0,this._collectionNotificationStat=!0,this._retryCount=0,this.deviceId=$(),this.cacheContext=t,this.requestQueue=n,this.dispatcher=i,this.logger=r,this._dailyStatCollector=new Us({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._defaultStatCollector=new Ps({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._realTimeStatCollector=new Ms({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue})}return e.prototype._migration=function(){return r(this,void 0,void 0,(function(){var e,t,i,r;return s(this,(function(s){switch(s.label){case 0:return[4,this.cacheContext.preference.get(this.key)];case 1:return(e=s.sent())?(t=[],e.statLogs.forEach((function(e){e.stat_type===Oe.FEATURE_LOCALCACHE&&t.push(new Be({type:e.stat_type,ts:e.ts,data:e.data}))})),[4,this.cacheContext.preference.set(this.key+".daily",{deviceId:e.deviceId,statLogs:t.map((function(e){return Be.payloadify(e)})),generation:e.generation,lastFlushedAt:e.lastFlushedAt})]):[3,6];case 2:return s.sent(),i=[],e.statLogs.forEach((function(e){e.stat_type!==Oe.FEATURE_LOCALCACHE&&e.stat_type!==Oe.NOTIFICATION&&(e.stat_type===Oe.FEATURE_LOCALCACHE_EVENT&&(e.data=n({message_init_policy:"",starting_point:0},e.data)),i.push(new Be({type:e.stat_type,ts:e.ts,data:e.data})))})),[4,this.cacheContext.preference.set(this.key+".default",{deviceId:e.deviceId,statLogs:i.map((function(e){return Be.payloadify(e)})),generation:e.generation,lastFlushedAt:e.lastFlushedAt})];case 3:return s.sent(),r=[],e.statLogs.forEach((function(e){var t;e.stat_type===Oe.NOTIFICATION&&(e.data=re(n(n({},e.data),{message_id:null!==(t=e.data.notificationId)&&void 0!==t?t:e.data.message_id,notificationId:void 0})),r.push(new Be({type:e.stat_type,ts:e.ts,data:e.data})))})),[4,this.cacheContext.preference.set(this.key+".realtime",{deviceId:e.deviceId,statLogs:r.map((function(e){return Be.payloadify(e)})),generation:e.generation,lastFlushedAt:e.lastFlushedAt})];case 4:return s.sent(),[4,this.cacheContext.preference.remove(this.key)];case 5:s.sent(),s.label=6;case 6:return[2]}}))}))},e.prototype.init=function(e){return r(this,void 0,void 0,(function(){var t=this;return s(this,(function(n){switch(n.label){case 0:return this.key=e,[4,this._migration()];case 1:return n.sent(),[4,this._dailyStatCollector.init(this.key)];case 2:return n.sent(),[4,this._defaultStatCollector.init(this.key)];case 3:return n.sent(),[4,this._realTimeStatCollector.init(this.key)];case 4:return n.sent(),this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(e){return r(t,void 0,void 0,(function(){var t,n,i,r,o,a;return s(this,(function(s){return e instanceof He?(t=e.statLog,this.put(t)):e instanceof Jr&&(n=e.request,i=e.features,r=e.options,o=e.statConfigInfo,this._retryCount=0,this._collectRequestStat=n,this._collectFeatureLocalCacheStat=null==i?void 0:i.localCache,this._collectionNotificationStat=null==i?void 0:i.notification,this._statConfig=o,this._dailyStatCollector.setConfig(this._statConfig.default,{localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:r.ingestion}),this._defaultStatCollector.setConfig(this._statConfig.default,{requestStat:this._collectRequestStat,localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:r.ingestion}),this._realTimeStatCollector.setConfig(null!==(a=this._statConfig.realTime)&&void 0!==a?a:this._statConfig.default,{notificationStat:this._collectionNotificationStat,enabledStat:r.ingestion})),[2]}))}))}))),[2]}}))}))},e.prototype.put=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=!0,e instanceof xs?this._collectFeatureLocalCacheStat?[4,this._dailyStatCollector.put(e)]:[3,2]:[3,3];case 1:t=n.sent(),n.label=2;case 2:return[3,13];case 3:switch(e.type){case Oe.API_RESULT:case Oe.WEBSOCKET_CONNECT:return[3,4];case Oe.FEATURE_LOCALCACHE:case Oe.FEATURE_LOCALCACHE_EVENT:return[3,7];case Oe.NOTIFICATION:return[3,10]}return[3,13];case 4:return this._collectRequestStat?[4,this._defaultStatCollector.put(e)]:[3,6];case 5:t=n.sent(),n.label=6;case 6:return[3,13];case 7:return this._collectFeatureLocalCacheStat?[4,this._defaultStatCollector.put(e)]:[3,9];case 8:t=n.sent(),n.label=9;case 9:return[3,13];case 10:return this._collectionNotificationStat?[4,this._realTimeStatCollector.put(e)]:[3,12];case 11:t=n.sent(),n.label=12;case 12:return[3,13];case 13:return t?this._retryCount=0:(this._retryCount++,this._retryCount>20&&(this._dailyStatCollector.enabledState=ws.COLLECT_ONLY,this._defaultStatCollector.enabledState=ws.COLLECT_ONLY,this._realTimeStatCollector.enabledState=ws.COLLECT_ONLY,this.logger.debug(v.statLogUploadLimitExceededError))),[2]}}))}))},e.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},e}();!function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"}(Ds||(Ds={}));var qs,Vs=function(){function e(){this.level=Ds.WARN}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=Ds.VERBOSE&&console.log.apply(console,c(["[verbose]"],a(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=Ds.DEBUG&&console.log.apply(console,c(["[debug]"],a(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=Ds.INFO&&console.log.apply(console,c(["[info]"],a(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=Ds.WARN&&console.warn.apply(console,c(["[warn]"],a(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=Ds.ERROR&&console.error.apply(console,c(["[error]"],a(e),!1))},e}();!function(e){e.DELIVERY_RECEIPT="delivery_receipt",e.PUSH_ACKNOWLEDGEMENT="push_acknowledgement"}(qs||(qs={}));var Hs,zs=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t._pushAckedCache={},t}return t(n,e),n.prototype.isAcked=function(e,t){var n,i="".concat(e,"_").concat(t);return null!==(n=this._pushAckedCache[i])&&void 0!==n&&n},n.prototype.markAsAcked=function(e,t){var n="".concat(e,"_").concat(t);this._pushAckedCache[n]=!0},n.prototype.clear=function(){js.of(this._iid).logger.debug("clear push acked cache"),this._pushAckedCache={}},n.prototype.parseData=function(e){var t,n,i,r,s=js.of(this._iid).logger,o=e.sendbird;if("string"==typeof o)try{o=JSON.parse(o)}catch(e){throw s.info("push notification payload does not contain sendbird payload in JSON format."),v.malformedDataError}if(!o||"object"!=typeof o)throw s.info("push notification payload does not contain sendbird payload in JSON format."),v.malformedDataError;var a=null!==(t=o.push_tracking_id)&&void 0!==t?t:"",c=o.notification_message_id,u=o.notification_channel_key,l=o.notification_template_key,h=o.notification_event_deadline,d=null!==(n=o.session_key)&&void 0!==n?n:{},_=null!==(i=null==d?void 0:d.key)&&void 0!==i?i:"",f=null!==(r=null==d?void 0:d.topics)&&void 0!==r?r:[];if("string"!=typeof a||0===a.length)throw s.info("push tracking id is not available"),v.malformedDataError;if("string"!=typeof c||0===c.length)throw s.info("message id is not available"),v.malformedDataError;return{pushTrackingId:a,sessionKey:_,sessionTopics:f,messageId:c,channelKey:u,templateKey:l,notificationEventDeadline:h}},n}(Mr),Gs={},js=function(){function e(e,t){var n,i,r,s,o,a,c,u,l,d;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!Gs[e]){Gs[e]=this;var _=null!==(n=t.options)&&void 0!==n?n:new R,f=this.sdkState={appId:t.appId,appVersion:null!==(i=t.appVersion)&&void 0!==i?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:null!==(r=t.apiHost)&&void 0!==r?r:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:null!==(s=t.websocketHost)&&void 0!==s?s:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new as,responseTimeout:_.websocketResponseTimeout},sessionTokenRefreshTimeout:_.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var p=this.logger=new Vs;this.logger.level=null!==(o=t.logLevel)&&void 0!==o?o:Ds.WARN,this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var E=this.cacheContext=new U({encryption:t.encryption,store:t.store,localCacheEnabled:null!==(a=t.localCacheEnabled)&&void 0!==a&&a,localCacheConfig:null!==(c=t.localCacheConfig)&&void 0!==c?c:new F});this.debugMode=null!==(u=t.debugMode)&&void 0!==u&&u,this.maxSuperGroupChannelUnreadCount=h.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=_.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=_.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=_.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var g=this.dispatcher=new ne,v=new J;this.requestQueue=new Ns(e,{session:v,sdkState:f,dispatcher:g,logger:p,useFetchCompat:t.useFetchCompat}),this.pushNotificationAckManager=new zs(e),this.sessionManager=new ks({_iid:e,session:v,cacheContext:E,sdkState:f,dispatcher:g,requestQueue:this.requestQueue,logger:p,pushNotificationAckManager:this.pushNotificationAckManager}),this.connectionManager=new hs(e,{sdkState:f,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:g,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:null!==(l=t.disableWebSocketCloseEventHandling)&&void 0!==l&&l,logger:p}),this.statManager=new Fs({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:this.dispatcher,logger:p}),this.appStateToggleEnabled=null===(d=t.appStateToggleEnabled)||void 0===d||d}return Gs[e]}return e.of=function(e){if(Gs[e])return Gs[e];throw v.lostInstance},e.clear=function(e){Gs[e]&&delete Gs[e]},e.prototype.hasExtension=function(e){return this.sdkState.extensions&&this.sdkState.extensions[e]},e}(),Ks=function(){function e(){}return e.prototype.init=function(e,t){var n=t.sdkState,i=t.dispatcher,r=t.sessionManager,s=t.requestQueue,o=t.logger;t.onlineDetector;var a=t.cacheContext;this._iid=e,this._cacheContext=a,this._sdkState=n,this._dispatcher=i,this._sessionManager=r,this._requestQueue=s,this._logger=o},e}();!function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_FEEDBACK_ADDED="EVENT_MESSAGE_FEEDBACK_ADDED",e.EVENT_MESSAGE_FEEDBACK_UPDATED="EVENT_MESSAGE_FEEDBACK_UPDATED",e.EVENT_MESSAGE_FEEDBACK_DELETED="EVENT_MESSAGE_FEEDBACK_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_THREAD_INFO_UPDATED="EVENT_THREADINFO_UPDATED",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"}(Hs||(Hs={}));var Bs,Qs=n({},Hs),Ws=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===Hs.SYNC_MESSAGE_FILL||e===Hs.SYNC_MESSAGE_CHANGELOGS||e===Hs.SYNC_POLL_CHANGELOGS},Zs=function(e){function n(t){var n=t.messages,i=t.source,r=t.isWebSocketEventComing,s=void 0!==r&&r,o=e.call(this)||this;return o.messages=n,o.source=i,o.isWebSocketEventComing=s,o}return t(n,e),n}(ie),Ys=function(e){function n(t){var n=t.messageIds,i=t.source,r=t.isWebSocketEventComing,s=void 0!==r&&r,o=e.call(this)||this;return o.messageIds=n,o.source=i,o.isWebSocketEventComing=s,o}return t(n,e),n}(ie),Xs=function(e){function n(t){var n=t.event,i=t.source,r=t.isWebSocketEventComing,s=void 0!==r&&r,o=e.call(this)||this;return o.event=n,o.source=i,o.isWebSocketEventComing=s,o}return t(n,e),n}(ie),Js=function(e){function n(t){var n=t.event,i=t.source,r=t.isWebSocketEventComing,s=void 0!==r&&r,o=e.call(this)||this;return o.event=n,o.source=i,o.isWebSocketEventComing=s,o}return t(n,e),n}(ie),$s=function(e){function n(t){var n=t.reqId,i=t.source,r=e.call(this)||this;return r.reqId=n,r.source=i,r}return t(n,e),n}(ie),eo=function(e){function n(t){var n=t.polls,i=t.source,r=e.call(this)||this;return r.polls=n,r.source=i,r}return t(n,e),n}(ie),to=function(e){function n(t){var n=t.event,i=t.source,r=e.call(this)||this;return r.event=n,r.source=i,r}return t(n,e),n}(ie),no=function(e){function n(t){var n=t.event,i=t.source,r=e.call(this)||this;return r.event=n,r.source=i,r}return t(n,e),n}(ie);!function(e){e.OPEN="open",e.CLOSED="closed"}(Bs||(Bs={}));var io="removed",ro=function(e){switch(e){case"open":return Bs.OPEN;case"closed":return Bs.CLOSED;default:return null}},so=function(e){return!e||!!e.text&&w("string",e.text)},oo=function(e){function i(t,n){var i,r,s,o,a,c,u,l=this;return(l=e.call(this,t)||this).pollId=0,l.id=0,l.text=null,l.voteCount=0,l.createdBy=null,l.createdAt=0,l.updatedAt=0,l._lastVotedAt=0,l.pollId=null!==(i=n.poll_id)&&void 0!==i?i:0,l.id=null!==(r=n.id)&&void 0!==r?r:0,l.text=null!==(s=n.text)&&void 0!==s?s:null,l.voteCount=null!==(o=n.vote_count)&&void 0!==o?o:0,l.createdBy=null!==(a=n.created_by)&&void 0!==a?a:null,l.createdAt=null!==(c=n.created_at)&&void 0!==c?c:0,l.updatedAt=null!==(u=n.updated_at)&&void 0!==u?u:0,l}return t(i,e),i.payloadify=function(t){return re(se(n(n({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},i}(Mr),ao=function(e){function i(t,n){var i,r,s,o,a,c,u,l,h,d,_,f,p,E=this;return(E=e.call(this,t)||this).id=0,E.title=null,E.createdAt=0,E.updatedAt=0,E.closeAt=-1,E.status=Bs.CLOSED,E.messageId=0,E.data=null,E.voterCount=-1,E.options=[],E.createdBy=null,E.allowUserSuggestion=!1,E.allowMultipleVotes=!1,E.votedPollOptionIds=[],E.id=null!==(i=n.id)&&void 0!==i?i:0,E.title=null!==(r=n.title)&&void 0!==r?r:null,E.createdAt=null!==(s=n.created_at)&&void 0!==s?s:0,E.updatedAt=null!==(o=n.updated_at)&&void 0!==o?o:0,E.closeAt=null!==(a=n.close_at)&&void 0!==a?a:-1,E.status=null!==(c=ro(n.status))&&void 0!==c?c:Bs.CLOSED,E.messageId=null!==(u=n.message_id)&&void 0!==u?u:0,E.data=null!==(l=n.data)&&void 0!==l?l:null,E.voterCount=null!==(h=n.voter_count)&&void 0!==h?h:-1,E.options=n.options?n.options.map((function(e){return new oo(E._iid,e)})):[],E.createdBy=null!==(d=n.created_by)&&void 0!==d?d:null,E.allowUserSuggestion=null!==(_=n.allow_user_suggestion)&&void 0!==_&&_,E.allowMultipleVotes=null!==(f=n.allow_multiple_votes)&&void 0!==f&&f,E.votedPollOptionIds=null!==(p=n.voted_option_ids)&&void 0!==p?p:[],E}return t(i,e),i.prototype._applyPollUpdatePayload=function(e){var t,n,i,r,s,o,a,c,u=this;this.title=null!==(t=e.title)&&void 0!==t?t:this.title,this.updatedAt=null!==(n=e.updated_at)&&void 0!==n?n:this.updatedAt,this.closeAt=null!==(i=e.close_at)&&void 0!==i?i:this.closeAt,this.status=null!==(r=ro(e.status))&&void 0!==r?r:this.status,this.data=null!==(s=e.data)&&void 0!==s?s:this.data,this.voterCount=null!==(o=e.voter_count)&&void 0!==o?o:this.voterCount,e.options&&(this.options=e.options.map((function(e){return new oo(u._iid,e)})),this.votedPollOptionIds=e.options.filter((function(e){return e.vote_count>0})).map((function(e){return e.id}))),this.allowUserSuggestion=null!==(a=e.allow_user_suggestion)&&void 0!==a?a:this.allowUserSuggestion,this.allowMultipleVotes=null!==(c=e.allow_multiple_votes)&&void 0!==c?c:this.allowMultipleVotes},i.payloadify=function(t){return re(se(n(n({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map((function(e){return oo.payloadify(e)})),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},i.prototype.applyPollUpdateEvent=function(e){var t=e._payload.poll;return!(!t||this.id!==t.id||t.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(t),!0)},i.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var t=this.options,n=t.map((function(e){return e.id})),i=e._payload,r=Math.floor(i.ts/1e3);return i.updated_vote_counts.forEach((function(e){var i=n.indexOf(e.option_id);if(i>-1){var s=t[i];r>=s._lastVotedAt&&(s.voteCount=e.vote_count,s._lastVotedAt=r)}})),i.req_id&&i.voted_option_ids&&(this.votedPollOptionIds=i.voted_option_ids),"number"==typeof i.voter_count&&(this.voterCount=i.voter_count),!0},i.prototype.serialize=function(){return Kr(this)},i}(Mr),co=function(){function e(e,t){var n;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=e,this.limit=null!==(n=t.limit)&&void 0!==n?n:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return w("number",this.limit)&&this.limit>0},e}(),uo=function(e){function n(t,n,i,r){var s=e.call(this,t,r)||this;return s.channelUrl=n,s.channelType=i,s}return t(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&w("string",this.channelUrl)&&S(q,this.channelType)},n}(co),lo=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},ho=function(e){function n(t){var n=t.title,i=t.optionTexts,r=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,a=t.closeAt,c=e.call(this)||this;return c.method=oe.POST,c.path=ve,c.params={title:n,options:i,data:r,allow_user_suggestion:s,allow_multiple_votes:o,close_at:a},c}return t(n,e),n}(De),_o=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.poll=new ao(t,n),i}return t(n,e),n}(Re),fo=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.pollId,s=e.call(this)||this;return s.method=oe.GET,s.path="".concat(ve,"/").concat(encodeURIComponent(r)),s.params={channel_url:n,channel_type:i},s}return t(n,e),n}(De),po=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.poll=new ao(t,n),i}return t(n,e),n}(Re),Eo=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.pollId,s=t.pollOptionId,o=e.call(this)||this;return o.method=oe.GET,o.path="".concat(ve,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(s)),o.params={channel_url:n,channel_type:i},o}return t(n,e),n}(De),go=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.pollOption=new oo(t,n),i}return t(n,e),n}(Re),vo=function(e){function n(t){var n=t.channelType,i=t.channelUrl,r=t.timestamp,s=t.token,o=e.call(this)||this;return o.method=oe.GET,o.path="".concat(Ne(n),"/").concat(encodeURIComponent(i),"/polls/changelogs"),o.params=re({change_ts:r,token:s}),o}return t(n,e),n}(De),bo=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.updatedPolls=n.updated.map((function(e){return function(e,t){return new ao(e,t)}(t,e)})),i.deletedPollIds=n.deleted.map((function(e){return e})),i.hasMore=n.has_more,i.nextToken=n.next,i}return t(n,e),n}(Re),mo={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},yo=function(e){return w("string",e.title)&&(t=e.optionTexts,N("string",t)&&t.every((function(e){return""!==e.trim()})))&&so(e.data)&&w("boolean",e.allowUserSuggestion,!0)&&w("boolean",e.allowMultipleVotes,!0)&&w("number",e.closeAt,!0);var t},wo={channelUrl:"",channelType:q.BASE,pollId:0,pollOptionId:0},So=function(e){return w("string",e.channelUrl)&&""!==e.channelUrl&&S(q,e.channelType)&&w("number",e.pollId)&&e.pollId>0&&w("number",e.pollOptionId)&&e.pollOptionId>0},To={channelUrl:"",channelType:q.BASE,pollId:0},No=function(e){return w("string",e.channelUrl)&&""!==e.channelUrl&&S(q,e.channelType)&&w("number",e.pollId)},Co={},Ao=function(){function e(e,t){var n=t.sdkState,i=t.dispatcher,r=t.sessionManager,s=t.requestQueue,o=t.logger;this._iid=e,this._sdkState=n,this._sessionManager=r,this._requestQueue=s,this._dispatcher=i,this._logger=o,Co[e]=this}return e.of=function(e){return Co[e]},e.prototype.buildPollFromSerializedData=function(e){var t=Br(e);return new ao(this._iid,ao.payloadify(t))},e.prototype.get=function(e){return r(this,void 0,void 0,(function(){var t,i;return s(this,(function(r){switch(r.label){case 0:return Qr(No(e)).throw(v.invalidParameters),t=new fo(n({},e)),[4,this._requestQueue.send(t)];case 1:return i=r.sent(),[2,i.as(po).poll]}}))}))},e.prototype.create=function(e){return r(this,void 0,void 0,(function(){var t,i;return s(this,(function(r){switch(r.label){case 0:return Qr(yo(e)).throw(v.invalidParameters),t=new ho(n({},e)),[4,this._requestQueue.send(t)];case 1:return i=r.sent(),[2,i.as(_o).poll]}}))}))},e.prototype.getOption=function(e){return r(this,void 0,void 0,(function(){var t,i;return s(this,(function(r){switch(r.label){case 0:return Qr(So(e)).throw(v.invalidParameters),t=new Eo(n({},e)),[4,this._requestQueue.send(t)];case 1:return i=r.sent(),[2,i.as(go).pollOption]}}))}))},e.prototype.getPollChangeLogs=function(e,t,n,i){return void 0===i&&(i=Hs.SYNC_POLL_CHANGELOGS),r(this,void 0,void 0,(function(){var r,o,a,c,u,l,h;return s(this,(function(s){switch(s.label){case 0:return r=new vo(se({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null})),[4,this._requestQueue.send(r)];case 1:return o=s.sent(),a=o.as(bo),c=a.updatedPolls,u=a.deletedPollIds,l=a.hasMore,h=a.nextToken,c.length>0&&this._dispatcher.dispatch(new eo({polls:c,source:i})),[2,{updatedPolls:c,deletedPollIds:u,hasMore:l,token:h}]}}))}))},e}(),Io=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.token,s=t.limit,o=e.call(this)||this;return o.method=oe.GET,o.path=ve,o.params={channel_url:n,channel_type:i,token:r,limit:s},o}return t(n,e),n}(De),ko=function(e){function n(t,n){var i,r=this;return(r=e.call(this,t,n)||this).polls=(null!==(i=n.polls)&&void 0!==i?i:[]).map((function(e){return new ao(t,e)})),r.token=n.next,r}return t(n,e),n}(Re),Oo=function(e){function i(t,n){return e.call(this,t,n.channelUrl,n.channelType,n)||this}return t(i,e),i.prototype.next=function(){return r(this,void 0,void 0,(function(){var e,t,i,r,o,a;return s(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=js.of(this._iid).requestQueue,t=new Io(n(n({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return i=s.sent(),r=i.as(ko),o=r.polls,a=r.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw v.queryInProgress;case 4:return[3,6];case 5:throw v.invalidParameters;case 6:return[2]}}))}))},i}(uo),Do=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.pollId,s=t.pollOptionId,o=t.token,a=t.limit,c=e.call(this)||this;return c.method=oe.GET,c.path="".concat(ve,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(s),"/voters"),c.params={channel_url:n,channel_type:i,token:o,limit:a},c}return t(n,e),n}(De),Ro=function(e){function n(t,n){var i,r=this;return(r=e.call(this,t,n)||this).voters=(null!==(i=n.voters)&&void 0!==i?i:[]).map((function(e){return new Zr(t,e)})),r.token=n.next,r}return t(n,e),n}(Re),Lo=function(e){function i(t,n){var i=e.call(this,t,n.channelUrl,n.channelType,n)||this;return i.pollId=n.pollId,i.pollOptionId=n.pollOptionId,i}return t(i,e),i.prototype._validate=function(){return e.prototype._validate.call(this)&&w("number",this.pollId)&&w("number",this.pollOptionId)},i.prototype.next=function(){return r(this,void 0,void 0,(function(){var e,t,i,r,o,a;return s(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=js.of(this._iid).requestQueue,t=new Do(n(n({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return i=s.sent(),r=i.as(Ro),o=r.voters,a=r.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw v.queryInProgress;case 4:return[3,6];case 5:throw v.invalidParameters;case 6:return[2]}}))}))},i}(uo);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(8)))

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__1__;

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BROWSER_SUPPORT_MIME_TYPE_LIST; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return CACHED_MESSAGE_TEMPLATES_TOKEN_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return DELIVERY_RECEIPT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return META_ARRAY_VOICE_DURATION_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return ONE_MiB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return SCROLL_BUFFER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return VOICE_RECORDER_AUDIO_SAMPLE_RATE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return SCROLL_BOTTOM_DELAY_FOR_FETCH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return SCROLL_BOTTOM_DELAY_FOR_SEND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return VOICE_PLAYER_AUDIO_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return VOICE_RECORDER_CLICK_BUFFER_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return VOICE_RECORDER_DEFAULT_MIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return VOICE_PLAYER_ROOT_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return VOICE_MESSAGE_FILE_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return VOICE_MESSAGE_MIME_TYPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return META_ARRAY_MESSAGE_TYPE_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return META_ARRAY_MESSAGE_TYPE_VALUE__VOICE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return VOICE_RECORDER_AUDIO_BIT_RATE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return SLIDER_BUTTON_ICON_SIDE_LENGTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return CACHED_MESSAGE_TEMPLATES_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return DEFAULT_MULTIPLE_FILES_MESSAGE_LIMIT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return DEFAULT_UPLOAD_SIZE_LIMIT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return VOICE_RECORDER_DEFAULT_MAX; });
var ONE_MiB = 1024 * 1024;
var SCROLL_BUFFER = 10;
var SCROLL_BOTTOM_DELAY_FOR_SEND = 100;
var SCROLL_BOTTOM_DELAY_FOR_FETCH = 100;
// voice message record
var VOICE_RECORDER_CLICK_BUFFER_TIME = 250;
var VOICE_RECORDER_DEFAULT_MIN = 1000; // 1 seconds
var VOICE_RECORDER_DEFAULT_MAX = 600000; // 10 minutes
var VOICE_RECORDER_AUDIO_BIT_RATE = 12000;
var VOICE_RECORDER_AUDIO_SAMPLE_RATE = 11025;
var BROWSER_SUPPORT_MIME_TYPE_LIST = ['audio/webm', 'audio/mp4', 'audio/mpeg', 'audio/ogg'];
/**
 * Append Audio element to the root
 * because I can't get the Audio element in the useEffect unmount scope
 */
var VOICE_PLAYER_ROOT_ID = 'sendbird-voice-player-provider-root';
var VOICE_PLAYER_AUDIO_ID = 'sendbird-global-audio-player-id';
// voice message file
var VOICE_MESSAGE_FILE_NAME = 'Voice_message.mp3';
var VOICE_MESSAGE_MIME_TYPE = 'audio/mp3;sbu_type=voice';
// meta array
var META_ARRAY_VOICE_DURATION_KEY = 'KEY_VOICE_MESSAGE_DURATION';
var META_ARRAY_MESSAGE_TYPE_KEY = 'KEY_INTERNAL_MESSAGE_TYPE';
var META_ARRAY_MESSAGE_TYPE_VALUE__VOICE = 'voice/mp3';
// delivery receipt in feature list
var DELIVERY_RECEIPT = 'delivery_receipt';
// file viewer slider
var SLIDER_BUTTON_ICON_SIDE_LENGTH = '32px';
// multiple files message file info count limit
var DEFAULT_MULTIPLE_FILES_MESSAGE_LIMIT = 10;
var DEFAULT_UPLOAD_SIZE_LIMIT = 25 * 1024 * 1024;
// Local storage item key for sdk templates token
var CACHED_MESSAGE_TEMPLATES_TOKEN_KEY = 'sendbird_message_templates_token_key';
// Local storage item key for templates in JSON string form
var CACHED_MESSAGE_TEMPLATES_KEY = 'sendbird_message_templates_key';


//# sourceMappingURL=bundle-DhBuJR0w.js.map


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function checkDCE() {
  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */
  if (
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'
  ) {
    return;
  }
  if (false) {}
  try {
    // Verify that the code above has been dead code eliminated (DCE'd).
    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
  } catch (err) {
    // DevTools shouldn't crash React, no matter what.
    // We should still report in case we break this code.
    console.error(err);
  }
}

if (true) {
  // DCE check should happen before ReactDOM bundle executes so that
  // DevTools can report bad minification during injection.
  checkDCE();
  module.exports = __webpack_require__(10);
} else {}


/***/ }),
/* 4 */,
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */

(function (global, factory) {
   true ? module.exports = factory() :
  undefined;
})(this, (function () { 'use strict';

  const {
    entries,
    setPrototypeOf,
    isFrozen,
    getPrototypeOf,
    getOwnPropertyDescriptor
  } = Object;
  let {
    freeze,
    seal,
    create
  } = Object; // eslint-disable-line import/no-mutable-exports

  let {
    apply,
    construct
  } = typeof Reflect !== 'undefined' && Reflect;

  if (!apply) {
    apply = function apply(fun, thisValue, args) {
      return fun.apply(thisValue, args);
    };
  }

  if (!freeze) {
    freeze = function freeze(x) {
      return x;
    };
  }

  if (!seal) {
    seal = function seal(x) {
      return x;
    };
  }

  if (!construct) {
    construct = function construct(Func, args) {
      return new Func(...args);
    };
  }

  const arrayForEach = unapply(Array.prototype.forEach);
  const arrayPop = unapply(Array.prototype.pop);
  const arrayPush = unapply(Array.prototype.push);
  const stringToLowerCase = unapply(String.prototype.toLowerCase);
  const stringToString = unapply(String.prototype.toString);
  const stringMatch = unapply(String.prototype.match);
  const stringReplace = unapply(String.prototype.replace);
  const stringIndexOf = unapply(String.prototype.indexOf);
  const stringTrim = unapply(String.prototype.trim);
  const regExpTest = unapply(RegExp.prototype.test);
  const typeErrorCreate = unconstruct(TypeError);
  function unapply(func) {
    return function (thisArg) {
      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      return apply(func, thisArg, args);
    };
  }
  function unconstruct(func) {
    return function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      return construct(func, args);
    };
  }
  /* Add properties to a lookup table */

  function addToSet(set, array, transformCaseFunc) {
    var _transformCaseFunc;

    transformCaseFunc = (_transformCaseFunc = transformCaseFunc) !== null && _transformCaseFunc !== void 0 ? _transformCaseFunc : stringToLowerCase;

    if (setPrototypeOf) {
      // Make 'in' and truthy checks like Boolean(set.constructor)
      // independent of any properties defined on Object.prototype.
      // Prevent prototype setters from intercepting set as a this value.
      setPrototypeOf(set, null);
    }

    let l = array.length;

    while (l--) {
      let element = array[l];

      if (typeof element === 'string') {
        const lcElement = transformCaseFunc(element);

        if (lcElement !== element) {
          // Config presets (e.g. tags.js, attrs.js) are immutable.
          if (!isFrozen(array)) {
            array[l] = lcElement;
          }

          element = lcElement;
        }
      }

      set[element] = true;
    }

    return set;
  }
  /* Shallow clone an object */

  function clone(object) {
    const newObject = create(null);

    for (const [property, value] of entries(object)) {
      newObject[property] = value;
    }

    return newObject;
  }
  /* This method automatically checks if the prop is function
   * or getter and behaves accordingly. */

  function lookupGetter(object, prop) {
    while (object !== null) {
      const desc = getOwnPropertyDescriptor(object, prop);

      if (desc) {
        if (desc.get) {
          return unapply(desc.get);
        }

        if (typeof desc.value === 'function') {
          return unapply(desc.value);
        }
      }

      object = getPrototypeOf(object);
    }

    function fallbackValue(element) {
      console.warn('fallback value for', element);
      return null;
    }

    return fallbackValue;
  }

  const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']); // SVG

  const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);
  const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']); // List of SVG elements that are disallowed by default.
  // We still need to know them so that we can do namespace
  // checks properly in case one wants to add them to
  // allow-list.

  const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);
  const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']); // Similarly to SVG, we want to know all MathML elements,
  // even those that we disallow by default.

  const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);
  const text = freeze(['#text']);

  const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);
  const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);
  const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);
  const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);

  const MUSTACHE_EXPR = seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode

  const ERB_EXPR = seal(/<%[\w\W]*|[\w\W]*%>/gm);
  const TMPLIT_EXPR = seal(/\${[\w\W]*}/gm);
  const DATA_ATTR = seal(/^data-[\-\w.\u00B7-\uFFFF]/); // eslint-disable-line no-useless-escape

  const ARIA_ATTR = seal(/^aria-[\-\w]+$/); // eslint-disable-line no-useless-escape

  const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i // eslint-disable-line no-useless-escape
  );
  const IS_SCRIPT_OR_DATA = seal(/^(?:\w+script|data):/i);
  const ATTR_WHITESPACE = seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g // eslint-disable-line no-control-regex
  );
  const DOCTYPE_NAME = seal(/^html$/i);

  var EXPRESSIONS = /*#__PURE__*/Object.freeze({
    __proto__: null,
    MUSTACHE_EXPR: MUSTACHE_EXPR,
    ERB_EXPR: ERB_EXPR,
    TMPLIT_EXPR: TMPLIT_EXPR,
    DATA_ATTR: DATA_ATTR,
    ARIA_ATTR: ARIA_ATTR,
    IS_ALLOWED_URI: IS_ALLOWED_URI,
    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,
    ATTR_WHITESPACE: ATTR_WHITESPACE,
    DOCTYPE_NAME: DOCTYPE_NAME
  });

  const getGlobal = () => typeof window === 'undefined' ? null : window;
  /**
   * Creates a no-op policy for internal use only.
   * Don't export this function outside this module!
   * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.
   * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).
   * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types
   * are not supported or creating the policy failed).
   */


  const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {
    if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {
      return null;
    } // Allow the callers to control the unique policy name
    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.
    // Policy creation with duplicate names throws in Trusted Types.


    let suffix = null;
    const ATTR_NAME = 'data-tt-policy-suffix';

    if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {
      suffix = purifyHostElement.getAttribute(ATTR_NAME);
    }

    const policyName = 'dompurify' + (suffix ? '#' + suffix : '');

    try {
      return trustedTypes.createPolicy(policyName, {
        createHTML(html) {
          return html;
        },

        createScriptURL(scriptUrl) {
          return scriptUrl;
        }

      });
    } catch (_) {
      // Policy creation failed (most likely another DOMPurify script has
      // already run). Skip creating the policy, as this will only cause errors
      // if TT are enforced.
      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');
      return null;
    }
  };

  function createDOMPurify() {
    let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();

    const DOMPurify = root => createDOMPurify(root);
    /**
     * Version label, exposed for easier checks
     * if DOMPurify is up to date or not
     */


    DOMPurify.version = '3.0.5';
    /**
     * Array of elements that DOMPurify removed during sanitation.
     * Empty if nothing was removed.
     */

    DOMPurify.removed = [];

    if (!window || !window.document || window.document.nodeType !== 9) {
      // Not running in a browser, provide a factory function
      // so that you can pass your own Window
      DOMPurify.isSupported = false;
      return DOMPurify;
    }

    const originalDocument = window.document;
    const currentScript = originalDocument.currentScript;
    let {
      document
    } = window;
    const {
      DocumentFragment,
      HTMLTemplateElement,
      Node,
      Element,
      NodeFilter,
      NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,
      HTMLFormElement,
      DOMParser,
      trustedTypes
    } = window;
    const ElementPrototype = Element.prototype;
    const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');
    const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');
    const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');
    const getParentNode = lookupGetter(ElementPrototype, 'parentNode'); // As per issue #47, the web-components registry is inherited by a
    // new document created via createHTMLDocument. As per the spec
    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)
    // a new empty registry is used when creating a template contents owner
    // document, so we use that as our parent document to ensure nothing
    // is inherited.

    if (typeof HTMLTemplateElement === 'function') {
      const template = document.createElement('template');

      if (template.content && template.content.ownerDocument) {
        document = template.content.ownerDocument;
      }
    }

    let trustedTypesPolicy;
    let emptyHTML = '';
    const {
      implementation,
      createNodeIterator,
      createDocumentFragment,
      getElementsByTagName
    } = document;
    const {
      importNode
    } = originalDocument;
    let hooks = {};
    /**
     * Expose whether this browser supports running the full DOMPurify.
     */

    DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;
    const {
      MUSTACHE_EXPR,
      ERB_EXPR,
      TMPLIT_EXPR,
      DATA_ATTR,
      ARIA_ATTR,
      IS_SCRIPT_OR_DATA,
      ATTR_WHITESPACE
    } = EXPRESSIONS;
    let {
      IS_ALLOWED_URI: IS_ALLOWED_URI$1
    } = EXPRESSIONS;
    /**
     * We consider the elements and attributes below to be safe. Ideally
     * don't add any new ones but feel free to remove unwanted ones.
     */

    /* allowed element names */

    let ALLOWED_TAGS = null;
    const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);
    /* Allowed attribute names */

    let ALLOWED_ATTR = null;
    const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);
    /*
     * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.
     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)
     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)
     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.
     */

    let CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {
      tagNameCheck: {
        writable: true,
        configurable: false,
        enumerable: true,
        value: null
      },
      attributeNameCheck: {
        writable: true,
        configurable: false,
        enumerable: true,
        value: null
      },
      allowCustomizedBuiltInElements: {
        writable: true,
        configurable: false,
        enumerable: true,
        value: false
      }
    }));
    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */

    let FORBID_TAGS = null;
    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */

    let FORBID_ATTR = null;
    /* Decide if ARIA attributes are okay */

    let ALLOW_ARIA_ATTR = true;
    /* Decide if custom data attributes are okay */

    let ALLOW_DATA_ATTR = true;
    /* Decide if unknown protocols are okay */

    let ALLOW_UNKNOWN_PROTOCOLS = false;
    /* Decide if self-closing tags in attributes are allowed.
     * Usually removed due to a mXSS issue in jQuery 3.0 */

    let ALLOW_SELF_CLOSE_IN_ATTR = true;
    /* Output should be safe for common template engines.
     * This means, DOMPurify removes data attributes, mustaches and ERB
     */

    let SAFE_FOR_TEMPLATES = false;
    /* Decide if document with <html>... should be returned */

    let WHOLE_DOCUMENT = false;
    /* Track whether config is already set on this instance of DOMPurify. */

    let SET_CONFIG = false;
    /* Decide if all elements (e.g. style, script) must be children of
     * document.body. By default, browsers might move them to document.head */

    let FORCE_BODY = false;
    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html
     * string (or a TrustedHTML object if Trusted Types are supported).
     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead
     */

    let RETURN_DOM = false;
    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html
     * string  (or a TrustedHTML object if Trusted Types are supported) */

    let RETURN_DOM_FRAGMENT = false;
    /* Try to return a Trusted Type object instead of a string, return a string in
     * case Trusted Types are not supported  */

    let RETURN_TRUSTED_TYPE = false;
    /* Output should be free from DOM clobbering attacks?
     * This sanitizes markups named with colliding, clobberable built-in DOM APIs.
     */

    let SANITIZE_DOM = true;
    /* Achieve full DOM Clobbering protection by isolating the namespace of named
     * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.
     *
     * HTML/DOM spec rules that enable DOM Clobbering:
     *   - Named Access on Window (7.3.3)
     *   - DOM Tree Accessors (3.1.5)
     *   - Form Element Parent-Child Relations (4.10.3)
     *   - Iframe srcdoc / Nested WindowProxies (4.8.5)
     *   - HTMLCollection (4.2.10.2)
     *
     * Namespace isolation is implemented by prefixing `id` and `name` attributes
     * with a constant string, i.e., `user-content-`
     */

    let SANITIZE_NAMED_PROPS = false;
    const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';
    /* Keep element content when removing element? */

    let KEEP_CONTENT = true;
    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead
     * of importing it into a new Document and returning a sanitized copy */

    let IN_PLACE = false;
    /* Allow usage of profiles like html, svg and mathMl */

    let USE_PROFILES = {};
    /* Tags to ignore content of when KEEP_CONTENT is true */

    let FORBID_CONTENTS = null;
    const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);
    /* Tags that are safe for data: URIs */

    let DATA_URI_TAGS = null;
    const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);
    /* Attributes safe for values like "javascript:" */

    let URI_SAFE_ATTRIBUTES = null;
    const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);
    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';
    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';
    const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';
    /* Document namespace */

    let NAMESPACE = HTML_NAMESPACE;
    let IS_EMPTY_INPUT = false;
    /* Allowed XHTML+XML namespaces */

    let ALLOWED_NAMESPACES = null;
    const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);
    /* Parsing of strict XHTML documents */

    let PARSER_MEDIA_TYPE;
    const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];
    const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';
    let transformCaseFunc;
    /* Keep a reference to config to pass to hooks */

    let CONFIG = null;
    /* Ideally, do not touch anything below this line */

    /* ______________________________________________ */

    const formElement = document.createElement('form');

    const isRegexOrFunction = function isRegexOrFunction(testValue) {
      return testValue instanceof RegExp || testValue instanceof Function;
    };
    /**
     * _parseConfig
     *
     * @param  {Object} cfg optional config literal
     */
    // eslint-disable-next-line complexity


    const _parseConfig = function _parseConfig(cfg) {
      if (CONFIG && CONFIG === cfg) {
        return;
      }
      /* Shield configuration object from tampering */


      if (!cfg || typeof cfg !== 'object') {
        cfg = {};
      }
      /* Shield configuration object from prototype pollution */


      cfg = clone(cfg);
      PARSER_MEDIA_TYPE = // eslint-disable-next-line unicorn/prefer-includes
      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE; // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.

      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;
      /* Set configuration parameters */

      ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;
      ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;
      ALLOWED_NAMESPACES = 'ALLOWED_NAMESPACES' in cfg ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;
      URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), // eslint-disable-line indent
      cfg.ADD_URI_SAFE_ATTR, // eslint-disable-line indent
      transformCaseFunc // eslint-disable-line indent
      ) // eslint-disable-line indent
      : DEFAULT_URI_SAFE_ATTRIBUTES;
      DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), // eslint-disable-line indent
      cfg.ADD_DATA_URI_TAGS, // eslint-disable-line indent
      transformCaseFunc // eslint-disable-line indent
      ) // eslint-disable-line indent
      : DEFAULT_DATA_URI_TAGS;
      FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;
      FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};
      FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};
      USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;
      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true

      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true

      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false

      ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true

      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false

      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false

      RETURN_DOM = cfg.RETURN_DOM || false; // Default false

      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false

      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false

      FORCE_BODY = cfg.FORCE_BODY || false; // Default false

      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true

      SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false

      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true

      IN_PLACE = cfg.IN_PLACE || false; // Default false

      IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;
      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;
      CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};

      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {
        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;
      }

      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {
        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;
      }

      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {
        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;
      }

      if (SAFE_FOR_TEMPLATES) {
        ALLOW_DATA_ATTR = false;
      }

      if (RETURN_DOM_FRAGMENT) {
        RETURN_DOM = true;
      }
      /* Parse profile info */


      if (USE_PROFILES) {
        ALLOWED_TAGS = addToSet({}, [...text]);
        ALLOWED_ATTR = [];

        if (USE_PROFILES.html === true) {
          addToSet(ALLOWED_TAGS, html$1);
          addToSet(ALLOWED_ATTR, html);
        }

        if (USE_PROFILES.svg === true) {
          addToSet(ALLOWED_TAGS, svg$1);
          addToSet(ALLOWED_ATTR, svg);
          addToSet(ALLOWED_ATTR, xml);
        }

        if (USE_PROFILES.svgFilters === true) {
          addToSet(ALLOWED_TAGS, svgFilters);
          addToSet(ALLOWED_ATTR, svg);
          addToSet(ALLOWED_ATTR, xml);
        }

        if (USE_PROFILES.mathMl === true) {
          addToSet(ALLOWED_TAGS, mathMl$1);
          addToSet(ALLOWED_ATTR, mathMl);
          addToSet(ALLOWED_ATTR, xml);
        }
      }
      /* Merge configuration parameters */


      if (cfg.ADD_TAGS) {
        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {
          ALLOWED_TAGS = clone(ALLOWED_TAGS);
        }

        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);
      }

      if (cfg.ADD_ATTR) {
        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {
          ALLOWED_ATTR = clone(ALLOWED_ATTR);
        }

        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);
      }

      if (cfg.ADD_URI_SAFE_ATTR) {
        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);
      }

      if (cfg.FORBID_CONTENTS) {
        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {
          FORBID_CONTENTS = clone(FORBID_CONTENTS);
        }

        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);
      }
      /* Add #text in case KEEP_CONTENT is set to true */


      if (KEEP_CONTENT) {
        ALLOWED_TAGS['#text'] = true;
      }
      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */


      if (WHOLE_DOCUMENT) {
        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);
      }
      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */


      if (ALLOWED_TAGS.table) {
        addToSet(ALLOWED_TAGS, ['tbody']);
        delete FORBID_TAGS.tbody;
      }

      if (cfg.TRUSTED_TYPES_POLICY) {
        if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {
          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');
        }

        if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {
          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');
        } // Overwrite existing TrustedTypes policy.


        trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY; // Sign local variables required by `sanitize`.

        emptyHTML = trustedTypesPolicy.createHTML('');
      } else {
        // Uninitialized policy, attempt to initialize the internal dompurify policy.
        if (trustedTypesPolicy === undefined) {
          trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);
        } // If creating the internal policy succeeded sign internal variables.


        if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {
          emptyHTML = trustedTypesPolicy.createHTML('');
        }
      } // Prevent further manipulation of configuration.
      // Not available in IE8, Safari 5, etc.


      if (freeze) {
        freeze(cfg);
      }

      CONFIG = cfg;
    };

    const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);
    const HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']); // Certain elements are allowed in both SVG and HTML
    // namespace. We need to specify them explicitly
    // so that they don't get erroneously deleted from
    // HTML namespace.

    const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);
    /* Keep track of all possible SVG and MathML tags
     * so that we can perform the namespace checks
     * correctly. */

    const ALL_SVG_TAGS = addToSet({}, svg$1);
    addToSet(ALL_SVG_TAGS, svgFilters);
    addToSet(ALL_SVG_TAGS, svgDisallowed);
    const ALL_MATHML_TAGS = addToSet({}, mathMl$1);
    addToSet(ALL_MATHML_TAGS, mathMlDisallowed);
    /**
     *
     *
     * @param  {Element} element a DOM element whose namespace is being checked
     * @returns {boolean} Return false if the element has a
     *  namespace that a spec-compliant parser would never
     *  return. Return true otherwise.
     */

    const _checkValidNamespace = function _checkValidNamespace(element) {
      let parent = getParentNode(element); // In JSDOM, if we're inside shadow DOM, then parentNode
      // can be null. We just simulate parent in this case.

      if (!parent || !parent.tagName) {
        parent = {
          namespaceURI: NAMESPACE,
          tagName: 'template'
        };
      }

      const tagName = stringToLowerCase(element.tagName);
      const parentTagName = stringToLowerCase(parent.tagName);

      if (!ALLOWED_NAMESPACES[element.namespaceURI]) {
        return false;
      }

      if (element.namespaceURI === SVG_NAMESPACE) {
        // The only way to switch from HTML namespace to SVG
        // is via <svg>. If it happens via any other tag, then
        // it should be killed.
        if (parent.namespaceURI === HTML_NAMESPACE) {
          return tagName === 'svg';
        } // The only way to switch from MathML to SVG is via`
        // svg if parent is either <annotation-xml> or MathML
        // text integration points.


        if (parent.namespaceURI === MATHML_NAMESPACE) {
          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);
        } // We only allow elements that are defined in SVG
        // spec. All others are disallowed in SVG namespace.


        return Boolean(ALL_SVG_TAGS[tagName]);
      }

      if (element.namespaceURI === MATHML_NAMESPACE) {
        // The only way to switch from HTML namespace to MathML
        // is via <math>. If it happens via any other tag, then
        // it should be killed.
        if (parent.namespaceURI === HTML_NAMESPACE) {
          return tagName === 'math';
        } // The only way to switch from SVG to MathML is via
        // <math> and HTML integration points


        if (parent.namespaceURI === SVG_NAMESPACE) {
          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];
        } // We only allow elements that are defined in MathML
        // spec. All others are disallowed in MathML namespace.


        return Boolean(ALL_MATHML_TAGS[tagName]);
      }

      if (element.namespaceURI === HTML_NAMESPACE) {
        // The only way to switch from SVG to HTML is via
        // HTML integration points, and from MathML to HTML
        // is via MathML text integration points
        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {
          return false;
        }

        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {
          return false;
        } // We disallow tags that are specific for MathML
        // or SVG and should never appear in HTML namespace


        return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);
      } // For XHTML and XML documents that support custom namespaces


      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {
        return true;
      } // The code should never reach this place (this means
      // that the element somehow got namespace that is not
      // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).
      // Return false just in case.


      return false;
    };
    /**
     * _forceRemove
     *
     * @param  {Node} node a DOM node
     */


    const _forceRemove = function _forceRemove(node) {
      arrayPush(DOMPurify.removed, {
        element: node
      });

      try {
        // eslint-disable-next-line unicorn/prefer-dom-node-remove
        node.parentNode.removeChild(node);
      } catch (_) {
        node.remove();
      }
    };
    /**
     * _removeAttribute
     *
     * @param  {String} name an Attribute name
     * @param  {Node} node a DOM node
     */


    const _removeAttribute = function _removeAttribute(name, node) {
      try {
        arrayPush(DOMPurify.removed, {
          attribute: node.getAttributeNode(name),
          from: node
        });
      } catch (_) {
        arrayPush(DOMPurify.removed, {
          attribute: null,
          from: node
        });
      }

      node.removeAttribute(name); // We void attribute values for unremovable "is"" attributes

      if (name === 'is' && !ALLOWED_ATTR[name]) {
        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {
          try {
            _forceRemove(node);
          } catch (_) {}
        } else {
          try {
            node.setAttribute(name, '');
          } catch (_) {}
        }
      }
    };
    /**
     * _initDocument
     *
     * @param  {String} dirty a string of dirty markup
     * @return {Document} a DOM, filled with the dirty markup
     */


    const _initDocument = function _initDocument(dirty) {
      /* Create a HTML document */
      let doc;
      let leadingWhitespace;

      if (FORCE_BODY) {
        dirty = '<remove></remove>' + dirty;
      } else {
        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */
        const matches = stringMatch(dirty, /^[\r\n\t ]+/);
        leadingWhitespace = matches && matches[0];
      }

      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {
        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)
        dirty = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + dirty + '</body></html>';
      }

      const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;
      /*
       * Use the DOMParser API by default, fallback later if needs be
       * DOMParser not work for svg when has multiple root element.
       */

      if (NAMESPACE === HTML_NAMESPACE) {
        try {
          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);
        } catch (_) {}
      }
      /* Use createHTMLDocument in case DOMParser is not available */


      if (!doc || !doc.documentElement) {
        doc = implementation.createDocument(NAMESPACE, 'template', null);

        try {
          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;
        } catch (_) {// Syntax error if dirtyPayload is invalid xml
        }
      }

      const body = doc.body || doc.documentElement;

      if (dirty && leadingWhitespace) {
        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);
      }
      /* Work on whole document or just its body */


      if (NAMESPACE === HTML_NAMESPACE) {
        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];
      }

      return WHOLE_DOCUMENT ? doc.documentElement : body;
    };
    /**
     * _createIterator
     *
     * @param  {Document} root document/fragment to create iterator for
     * @return {Iterator} iterator instance
     */


    const _createIterator = function _createIterator(root) {
      return createNodeIterator.call(root.ownerDocument || root, root, // eslint-disable-next-line no-bitwise
      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);
    };
    /**
     * _isClobbered
     *
     * @param  {Node} elm element to check for clobbering attacks
     * @return {Boolean} true if clobbered, false if safe
     */


    const _isClobbered = function _isClobbered(elm) {
      return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');
    };
    /**
     * _isNode
     *
     * @param  {Node} obj object to check whether it's a DOM node
     * @return {Boolean} true is object is a DOM node
     */


    const _isNode = function _isNode(object) {
      return typeof Node === 'object' ? object instanceof Node : object && typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';
    };
    /**
     * _executeHook
     * Execute user configurable hooks
     *
     * @param  {String} entryPoint  Name of the hook's entry point
     * @param  {Node} currentNode node to work on with the hook
     * @param  {Object} data additional hook parameters
     */


    const _executeHook = function _executeHook(entryPoint, currentNode, data) {
      if (!hooks[entryPoint]) {
        return;
      }

      arrayForEach(hooks[entryPoint], hook => {
        hook.call(DOMPurify, currentNode, data, CONFIG);
      });
    };
    /**
     * _sanitizeElements
     *
     * @protect nodeName
     * @protect textContent
     * @protect removeChild
     *
     * @param   {Node} currentNode to check for permission to exist
     * @return  {Boolean} true if node was killed, false if left alive
     */


    const _sanitizeElements = function _sanitizeElements(currentNode) {
      let content;
      /* Execute a hook if present */

      _executeHook('beforeSanitizeElements', currentNode, null);
      /* Check if element is clobbered or can clobber */


      if (_isClobbered(currentNode)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Now let's check the element's type and name */


      const tagName = transformCaseFunc(currentNode.nodeName);
      /* Execute a hook if present */

      _executeHook('uponSanitizeElement', currentNode, {
        tagName,
        allowedTags: ALLOWED_TAGS
      });
      /* Detect mXSS attempts abusing namespace confusion */


      if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\w]/g, currentNode.innerHTML) && regExpTest(/<[/\w]/g, currentNode.textContent)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Remove element if anything forbids its presence */


      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {
        /* Check if we have a custom element to handle */
        if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {
          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) return false;
          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) return false;
        }
        /* Keep content except for bad-listed elements */


        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {
          const parentNode = getParentNode(currentNode) || currentNode.parentNode;
          const childNodes = getChildNodes(currentNode) || currentNode.childNodes;

          if (childNodes && parentNode) {
            const childCount = childNodes.length;

            for (let i = childCount - 1; i >= 0; --i) {
              parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));
            }
          }
        }

        _forceRemove(currentNode);

        return true;
      }
      /* Check whether element has a valid namespace */


      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Make sure that older browsers don't get fallback-tag mXSS */


      if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\/no(script|embed|frames)/i, currentNode.innerHTML)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Sanitize element content to be template-safe */


      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {
        /* Get the element's text content */
        content = currentNode.textContent;
        content = stringReplace(content, MUSTACHE_EXPR, ' ');
        content = stringReplace(content, ERB_EXPR, ' ');
        content = stringReplace(content, TMPLIT_EXPR, ' ');

        if (currentNode.textContent !== content) {
          arrayPush(DOMPurify.removed, {
            element: currentNode.cloneNode()
          });
          currentNode.textContent = content;
        }
      }
      /* Execute a hook if present */


      _executeHook('afterSanitizeElements', currentNode, null);

      return false;
    };
    /**
     * _isValidAttribute
     *
     * @param  {string} lcTag Lowercase tag name of containing element.
     * @param  {string} lcName Lowercase attribute name.
     * @param  {string} value Attribute value.
     * @return {Boolean} Returns true if `value` is valid, otherwise false.
     */
    // eslint-disable-next-line complexity


    const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {
      /* Make sure attribute cannot clobber */
      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {
        return false;
      }
      /* Allow valid data-* attributes: At least one character after "-"
          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)
          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)
          We don't need to check the value; it's always URI safe. */


      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {
        if ( // First condition does a very basic check if a) it's basically a valid custom element tagname AND
        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck
        _basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || // Alternative, second condition checks if it's an `is`-attribute, AND
        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {
          return false;
        }
        /* Check value is safe. First, is attr inert? If so, is safe */

      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {
        return false;
      } else ;

      return true;
    };
    /**
     * _basicCustomElementCheck
     * checks if at least one dash is included in tagName, and it's not the first char
     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name
     * @param {string} tagName name of the tag of the node to sanitize
     */


    const _basicCustomElementTest = function _basicCustomElementTest(tagName) {
      return tagName.indexOf('-') > 0;
    };
    /**
     * _sanitizeAttributes
     *
     * @protect attributes
     * @protect nodeName
     * @protect removeAttribute
     * @protect setAttribute
     *
     * @param  {Node} currentNode to sanitize
     */


    const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {
      let attr;
      let value;
      let lcName;
      let l;
      /* Execute a hook if present */

      _executeHook('beforeSanitizeAttributes', currentNode, null);

      const {
        attributes
      } = currentNode;
      /* Check if we have attributes; if not we might have a text node */

      if (!attributes) {
        return;
      }

      const hookEvent = {
        attrName: '',
        attrValue: '',
        keepAttr: true,
        allowedAttributes: ALLOWED_ATTR
      };
      l = attributes.length;
      /* Go backwards over all attributes; safely remove bad ones */

      while (l--) {
        attr = attributes[l];
        const {
          name,
          namespaceURI
        } = attr;
        value = name === 'value' ? attr.value : stringTrim(attr.value);
        lcName = transformCaseFunc(name);
        /* Execute a hook if present */

        hookEvent.attrName = lcName;
        hookEvent.attrValue = value;
        hookEvent.keepAttr = true;
        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set

        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);

        value = hookEvent.attrValue;
        /* Did the hooks approve of the attribute? */

        if (hookEvent.forceKeepAttr) {
          continue;
        }
        /* Remove attribute */


        _removeAttribute(name, currentNode);
        /* Did the hooks approve of the attribute? */


        if (!hookEvent.keepAttr) {
          continue;
        }
        /* Work around a security issue in jQuery 3.0 */


        if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\/>/i, value)) {
          _removeAttribute(name, currentNode);

          continue;
        }
        /* Sanitize attribute content to be template-safe */


        if (SAFE_FOR_TEMPLATES) {
          value = stringReplace(value, MUSTACHE_EXPR, ' ');
          value = stringReplace(value, ERB_EXPR, ' ');
          value = stringReplace(value, TMPLIT_EXPR, ' ');
        }
        /* Is `value` valid for this attribute? */


        const lcTag = transformCaseFunc(currentNode.nodeName);

        if (!_isValidAttribute(lcTag, lcName, value)) {
          continue;
        }
        /* Full DOM Clobbering protection via namespace isolation,
         * Prefix id and name attributes with `user-content-`
         */


        if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {
          // Remove the attribute with this value
          _removeAttribute(name, currentNode); // Prefix the value and later re-create the attribute with the sanitized value


          value = SANITIZE_NAMED_PROPS_PREFIX + value;
        }
        /* Handle attributes that require Trusted Types */


        if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {
          if (namespaceURI) ; else {
            switch (trustedTypes.getAttributeType(lcTag, lcName)) {
              case 'TrustedHTML':
                {
                  value = trustedTypesPolicy.createHTML(value);
                  break;
                }

              case 'TrustedScriptURL':
                {
                  value = trustedTypesPolicy.createScriptURL(value);
                  break;
                }
            }
          }
        }
        /* Handle invalid data-* attribute set by try-catching it */


        try {
          if (namespaceURI) {
            currentNode.setAttributeNS(namespaceURI, name, value);
          } else {
            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. "x-schema". */
            currentNode.setAttribute(name, value);
          }

          arrayPop(DOMPurify.removed);
        } catch (_) {}
      }
      /* Execute a hook if present */


      _executeHook('afterSanitizeAttributes', currentNode, null);
    };
    /**
     * _sanitizeShadowDOM
     *
     * @param  {DocumentFragment} fragment to iterate over recursively
     */


    const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {
      let shadowNode;

      const shadowIterator = _createIterator(fragment);
      /* Execute a hook if present */


      _executeHook('beforeSanitizeShadowDOM', fragment, null);

      while (shadowNode = shadowIterator.nextNode()) {
        /* Execute a hook if present */
        _executeHook('uponSanitizeShadowNode', shadowNode, null);
        /* Sanitize tags and elements */


        if (_sanitizeElements(shadowNode)) {
          continue;
        }
        /* Deep shadow DOM detected */


        if (shadowNode.content instanceof DocumentFragment) {
          _sanitizeShadowDOM(shadowNode.content);
        }
        /* Check attributes, sanitize if necessary */


        _sanitizeAttributes(shadowNode);
      }
      /* Execute a hook if present */


      _executeHook('afterSanitizeShadowDOM', fragment, null);
    };
    /**
     * Sanitize
     * Public method providing core sanitation functionality
     *
     * @param {String|Node} dirty string or DOM node
     * @param {Object} configuration object
     */
    // eslint-disable-next-line complexity


    DOMPurify.sanitize = function (dirty) {
      let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      let body;
      let importedNode;
      let currentNode;
      let returnNode;
      /* Make sure we have a string to sanitize.
        DO NOT return early, as this will return the wrong type if
        the user has requested a DOM object rather than a string */

      IS_EMPTY_INPUT = !dirty;

      if (IS_EMPTY_INPUT) {
        dirty = '<!-->';
      }
      /* Stringify, in case dirty is an object */


      if (typeof dirty !== 'string' && !_isNode(dirty)) {
        if (typeof dirty.toString === 'function') {
          dirty = dirty.toString();

          if (typeof dirty !== 'string') {
            throw typeErrorCreate('dirty is not a string, aborting');
          }
        } else {
          throw typeErrorCreate('toString is not a function');
        }
      }
      /* Return dirty HTML if DOMPurify cannot run */


      if (!DOMPurify.isSupported) {
        return dirty;
      }
      /* Assign config vars */


      if (!SET_CONFIG) {
        _parseConfig(cfg);
      }
      /* Clean up removed elements */


      DOMPurify.removed = [];
      /* Check if dirty is correctly typed for IN_PLACE */

      if (typeof dirty === 'string') {
        IN_PLACE = false;
      }

      if (IN_PLACE) {
        /* Do some early pre-sanitization to avoid unsafe root nodes */
        if (dirty.nodeName) {
          const tagName = transformCaseFunc(dirty.nodeName);

          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {
            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');
          }
        }
      } else if (dirty instanceof Node) {
        /* If dirty is a DOM element, append to an empty document to avoid
           elements being stripped by the parser */
        body = _initDocument('<!---->');
        importedNode = body.ownerDocument.importNode(dirty, true);

        if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {
          /* Node is already a body, use as is */
          body = importedNode;
        } else if (importedNode.nodeName === 'HTML') {
          body = importedNode;
        } else {
          // eslint-disable-next-line unicorn/prefer-dom-node-append
          body.appendChild(importedNode);
        }
      } else {
        /* Exit directly if we have nothing to do */
        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && // eslint-disable-next-line unicorn/prefer-includes
        dirty.indexOf('<') === -1) {
          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;
        }
        /* Initialize the document to work on */


        body = _initDocument(dirty);
        /* Check we have a DOM node from the data */

        if (!body) {
          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';
        }
      }
      /* Remove first element node (ours) if FORCE_BODY is set */


      if (body && FORCE_BODY) {
        _forceRemove(body.firstChild);
      }
      /* Get node iterator */


      const nodeIterator = _createIterator(IN_PLACE ? dirty : body);
      /* Now start iterating over the created document */


      while (currentNode = nodeIterator.nextNode()) {
        /* Sanitize tags and elements */
        if (_sanitizeElements(currentNode)) {
          continue;
        }
        /* Shadow DOM detected, sanitize it */


        if (currentNode.content instanceof DocumentFragment) {
          _sanitizeShadowDOM(currentNode.content);
        }
        /* Check attributes, sanitize if necessary */


        _sanitizeAttributes(currentNode);
      }
      /* If we sanitized `dirty` in-place, return it. */


      if (IN_PLACE) {
        return dirty;
      }
      /* Return sanitized string or DOM */


      if (RETURN_DOM) {
        if (RETURN_DOM_FRAGMENT) {
          returnNode = createDocumentFragment.call(body.ownerDocument);

          while (body.firstChild) {
            // eslint-disable-next-line unicorn/prefer-dom-node-append
            returnNode.appendChild(body.firstChild);
          }
        } else {
          returnNode = body;
        }

        if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {
          /*
            AdoptNode() is not used because internal state is not reset
            (e.g. the past names map of a HTMLFormElement), this is safe
            in theory but we would rather not risk another attack vector.
            The state that is cloned by importNode() is explicitly defined
            by the specs.
          */
          returnNode = importNode.call(originalDocument, returnNode, true);
        }

        return returnNode;
      }

      let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;
      /* Serialize doctype if allowed */

      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {
        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\n' + serializedHTML;
      }
      /* Sanitize final string template-safe */


      if (SAFE_FOR_TEMPLATES) {
        serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');
        serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');
        serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR, ' ');
      }

      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;
    };
    /**
     * Public method to set the configuration once
     * setConfig
     *
     * @param {Object} cfg configuration object
     */


    DOMPurify.setConfig = function (cfg) {
      _parseConfig(cfg);

      SET_CONFIG = true;
    };
    /**
     * Public method to remove the configuration
     * clearConfig
     *
     */


    DOMPurify.clearConfig = function () {
      CONFIG = null;
      SET_CONFIG = false;
    };
    /**
     * Public method to check if an attribute value is valid.
     * Uses last set config, if any. Otherwise, uses config defaults.
     * isValidAttribute
     *
     * @param  {string} tag Tag name of containing element.
     * @param  {string} attr Attribute name.
     * @param  {string} value Attribute value.
     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.
     */


    DOMPurify.isValidAttribute = function (tag, attr, value) {
      /* Initialize shared config vars if necessary. */
      if (!CONFIG) {
        _parseConfig({});
      }

      const lcTag = transformCaseFunc(tag);
      const lcName = transformCaseFunc(attr);
      return _isValidAttribute(lcTag, lcName, value);
    };
    /**
     * AddHook
     * Public method to add DOMPurify hooks
     *
     * @param {String} entryPoint entry point for the hook to add
     * @param {Function} hookFunction function to execute
     */


    DOMPurify.addHook = function (entryPoint, hookFunction) {
      if (typeof hookFunction !== 'function') {
        return;
      }

      hooks[entryPoint] = hooks[entryPoint] || [];
      arrayPush(hooks[entryPoint], hookFunction);
    };
    /**
     * RemoveHook
     * Public method to remove a DOMPurify hook at a given entryPoint
     * (pops it from the stack of hooks if more are present)
     *
     * @param {String} entryPoint entry point for the hook to remove
     * @return {Function} removed(popped) hook
     */


    DOMPurify.removeHook = function (entryPoint) {
      if (hooks[entryPoint]) {
        return arrayPop(hooks[entryPoint]);
      }
    };
    /**
     * RemoveHooks
     * Public method to remove all DOMPurify hooks at a given entryPoint
     *
     * @param  {String} entryPoint entry point for the hooks to remove
     */


    DOMPurify.removeHooks = function (entryPoint) {
      if (hooks[entryPoint]) {
        hooks[entryPoint] = [];
      }
    };
    /**
     * RemoveAllHooks
     * Public method to remove all DOMPurify hooks
     *
     */


    DOMPurify.removeAllHooks = function () {
      hooks = {};
    };

    return DOMPurify;
  }

  var purify = createDOMPurify();

  return purify;

}));
//# sourceMappingURL=purify.js.map


/***/ }),
/* 6 */,
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _typeof; });
function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}

/***/ }),
/* 8 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(16);


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
var aa=__webpack_require__(1),m=__webpack_require__(11),r=__webpack_require__(12);function y(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+"Capture",b)}
function ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}
var fa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,
ja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}
function na(a,b,c,d){if(null===b||"undefined"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});
["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});
["checked","multiple","muted","selected"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}
"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(oa,
pa);D[b]=new B(b,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});
D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});
function qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}
var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;
if("function"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E("react.element");ta=E("react.portal");ua=E("react.fragment");wa=E("react.strict_mode");xa=E("react.profiler");ya=E("react.provider");za=E("react.context");Aa=E("react.forward_ref");Ba=E("react.suspense");Ca=E("react.suspense_list");Da=E("react.memo");Ea=E("react.lazy");Fa=E("react.block");E("react.scope");Ga=E("react.opaque.id");Ha=E("react.debug_trace_mode");Ia=E("react.offscreen");Ja=E("react.legacy_hidden")}
var Ka="function"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||"object"!==typeof a)return null;a=Ka&&a[Ka]||a["@@iterator"];return"function"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\n( *(at )?)/);Ma=b&&b[1]||""}return"\n"+Ma+a}var Oa=!1;
function Pa(a,b){if(!a||Oa)return"";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&"string"===typeof k.stack){for(var e=k.stack.split("\n"),
f=d.stack.split("\n"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return"\n"+e[g].replace(" at new "," at ");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?Na(a):""}
function Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return""}}
function Ra(a){if(null==a)return null;if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case za:return(a.displayName||"Context")+".Consumer";case ya:return(a._context.displayName||"Context")+".Provider";case Aa:var b=a.render;b=b.displayName||b.name||"";
return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;default:return""}}function Ta(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}
function Ua(a){var b=Ta(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=
null;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ta(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}
function Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,"checked",b,!1)}
function ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?bb(a,b.type,c):b.hasOwnProperty("defaultValue")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}
function cb(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}
function bb(a,b,c){if("number"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function db(a){var b="";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}
function fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}
function gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:Sa(c)}}
function ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};
function lb(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?lb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}
var nb,ob=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||"innerHTML"in a)a.innerHTML=b;else{nb=nb||document.createElement("div");nb.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});
function pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}
var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,
floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(""+b).trim():b+"px"}
function tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=sb(c,b[c],d);"float"===c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});
function vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(y(62));}}
function wb(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;
function Bb(a){if(a=Cb(a)){if("function"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}
function Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}
function Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==
typeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}});window.addEventListener("test",Qb,Qb);window.removeEventListener("test",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}
function Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}
function bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===
c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}
function dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
function rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case "focusin":case "focusout":kc=null;break;case "dragenter":case "dragleave":lc=null;break;case "mouseover":case "mouseout":mc=null;break;case "pointerover":case "pointerout":nc.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":oc.delete(b.pointerId)}}
function tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}
function uc(a,b,c,d,e){switch(b){case "focusin":return kc=tc(kc,a,b,c,d,e),!0;case "dragenter":return lc=tc(lc,a,b,c,d,e),!0;case "mouseover":return mc=tc(mc,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}
function vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}
function xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}
function Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}
function Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}
function Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}
function Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};
fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}
var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart",
"lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e="on"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;
function Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;
F=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}
function Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}
function Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}
function $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}
function hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}
function yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;
function nd(){if(md)return md;var a,b=ld,c=b.length,d,e="value"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}
function rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&
(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}
var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if("movementX"in
a)return a.movementX;a!==yd&&(yd&&"mousemove"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",
Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",
119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}
var Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=od(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return"keypress"===a.type?od(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?od(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},
deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be=null;fa&&"documentMode"in document&&(be=document.documentMode);var ce=fa&&"TextEvent"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;
function ge(a,b){switch(a){case "keyup":return-1!==$d.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "focusout":return!0;default:return!1}}function he(a){a=a.detail;return"object"===typeof a&&"data"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case "compositionend":return he(b);case "keypress":if(32!==b.which)return null;fe=!0;return ee;case "textInput":return a=b.data,a===ee&&fe?null:a;default:return null}}
function ke(a,b){if(ie)return"compositionend"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case "compositionend":return de&&"ko"!==b.locale?null:b.data;default:return null}}
var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!le[a.type]:"textarea"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,"onChange");0<b.length&&(c=new td("onChange","change",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}
function ve(a,b){if("change"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;");ye="function"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if("value"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}
function Ce(a,b,c){"focusin"===a?(Ae(),pe=b,qe=c,pe.attachEvent("onpropertychange",Be)):"focusout"===a&&Ae()}function De(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return te(qe)}function Ee(a,b){if("click"===a)return te(b)}function Fe(a,b){if("input"===a||"change"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He="function"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;
function Je(a,b){if(He(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}
function Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}
function Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}
var Pe=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;
function Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(b=new td("onSelect","select",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}
Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea("onMouseEnter",["mouseout","mouseover"]);
ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));
da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));
function Ze(a,b,c){var d=a.type||"unknown-event";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}
function se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}
function G(a,b){var c=$e(b),d=a+"__bubble";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}
function df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;"selectionchange"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if("scroll"!==a)return;e|=2;f=d}var g=$e(f),h=a+"__"+(b?"capture":"bubble");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}
function af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||"touchstart"!==b&&"touchmove"!==b&&"wheel"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}
function jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];
a:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case "keypress":if(0===od(c))break a;case "keydown":case "keyup":k=Rd;break;case "focusin":x="focus";k=Fd;break;case "focusout":x="blur";k=Fd;break;case "beforeblur":case "afterblur":k=Fd;break;case "click":if(2===c.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":k=Bd;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":k=
Dd;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case "scroll":k=vd;break;case "wheel":k=Zd;break;case "copy":case "cut":case "paste":k=Jd;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":k=Td}var w=0!==(b&4),z=!w&&"scroll"===a,u=w?null!==h?h+"Capture":null:h;w=[];for(var t=d,q;null!==
t;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h="mouseover"===a||"pointerover"===a;k="mouseout"===a||"pointerout"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==
x&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v="onMouseLeave";u="onMouseEnter";t="mouse";if("pointerout"===a||"pointerover"===a)w=Td,v="onPointerLeave",u="onPointerEnter",t="pointer";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+"leave",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+"enter",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=
gf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if("select"===k||"input"===k&&"file"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&"input"===k.toLowerCase()&&("checkbox"===h.type||"radio"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);"focusout"===a&&(K=h._wrapperState)&&
K.controlled&&"number"===h.type&&bb(h,"number",h.value)}K=d?ue(d):window;switch(a){case "focusin":if(me(K)||"true"===K.contentEditable)Qe=K,Re=d,Se=null;break;case "focusout":Se=Re=Qe=null;break;case "mousedown":Te=!0;break;case "contextmenu":case "mouseup":case "dragend":Te=!1;Ue(g,c,e);break;case "selectionchange":if(Pe)break;case "keydown":case "keyup":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case "compositionstart":var L="onCompositionStart";break b;case "compositionend":L="onCompositionEnd";break b;
case "compositionupdate":L="onCompositionUpdate";break b}L=void 0}else ie?ge(a,c)&&(L="onCompositionEnd"):"keydown"===a&&229===c.keyCode&&(L="onCompositionStart");L&&(de&&"ko"!==c.locale&&(ie||"onCompositionStart"!==L?"onCompositionEnd"===L&&ie&&(Q=nd()):(kd=e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,"onBeforeInput"),0<d.length&&(e=new Ld("onBeforeInput",
"beforeinput",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+"Capture",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}
function hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}
function nf(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of="function"===typeof setTimeout?setTimeout:void 0,pf="function"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent="":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=""))}
function rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if("$"===c||"$!"===c||"$?"===c){if(0===b)return a;b--}else"/$"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;
function wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}
function $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;
function Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}
function If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||"Unknown",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}
var Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};
function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}
function jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}
function rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}
function vg(a,b){if(pg!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}
function yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}
function Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=
b;c.lastBaseUpdate=b}
function Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,
next:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if("function"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h="function"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===
f)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if("function"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;
function Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}
var Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=
b);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}
function Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;"object"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}
function Ng(a,b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}
function Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;"function"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||
(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);"function"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;
function Qg(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}
function Rg(a,b){if("textarea"!==a.type)throw Error(y(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b));}
function Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,
c):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=
Wg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if("string"===typeof b||"number"===typeof b)return b=Ug(""+b,a.mode,c),b.return=a,b;if("object"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,
a.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||
null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===
n.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if("function"!==typeof l)throw Error(y(150));h=l.call(h);if(null==
h)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&
u.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k="object"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l="object"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);
d=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=
Wg(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if("undefined"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||"Component"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);
function dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);
function ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||"$?"===c.data||"$!"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;
function mh(a,b){var c=nh(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}
function ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}
function rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if("/$"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else"$"!==c&&"$!"!==c&&"$?"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}
function sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}
function Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}
function Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return"function"===typeof b?b(a):b}
function Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,
eagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}
function Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}
function Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}
function Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=
e.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}
function Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}
function Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}
function Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}
function $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}
function di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}
function Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}
var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,
b,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;
wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c("r:"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c("r:"+(tf++).toString(36))},
void 0,null));return b}b="r:"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,
a]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,
a]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}
function ii(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}
function ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}
function mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if("hidden"===d.mode||"unstable-defer-without-hiding"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}
function oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}
function pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A="function"===typeof n||"function"===typeof g.getSnapshotBeforeUpdate;A||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&
"function"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?("function"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===
typeof g.componentDidMount&&(b.flags|=4)):("function"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;"object"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n="function"===typeof C||
"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?("function"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||"function"!==typeof g.UNSAFE_componentWillUpdate&&"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,
x,k),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),"function"===typeof g.componentDidUpdate&&(b.flags|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):("function"!==typeof g.componentDidUpdate||
h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}
function qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}
var si={dehydrated:null,retryLane:0};
function ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if("number"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},
b.memoizedState=si,b.lanes=33554432,a;c=vi({mode:"visible",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:
{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:"hidden",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}
function xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:"visible",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}
function wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:"hidden",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}
function zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}
function Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=
null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case "together":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}
function hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;
Bi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};
Di=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case "input":e=Ya(a,e);d=Ya(a,d);f=[];break;case "option":e=eb(a,e);d=eb(a,d);f=[];break;case "select":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case "textarea":e=gb(a,e);d=gb(a,d);f=[];break;default:"function"!==typeof e.onClick&&"function"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if("style"===
l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if("style"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]="");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||
(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else"dangerouslySetInnerHTML"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):"children"===l?"string"!==typeof k&&"number"!==typeof k||(f=f||[]).push(l,""+k):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(ca.hasOwnProperty(l)?(null!=k&&"onScroll"===l&&G("scroll",a),f||h===k||(f=[])):"object"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push("style",
c);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}
function Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===
b.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case "dialog":G("cancel",d);G("close",d);break;case "iframe":case "object":case "embed":G("load",d);break;case "video":case "audio":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case "source":G("error",d);break;case "img":case "image":case "link":G("error",d);G("load",d);break;case "details":G("toggle",d);break;case "input":Za(d,f);G("invalid",d);break;case "select":d._wrapperState=
{wasMultiple:!!f.multiple};G("invalid",d);break;case "textarea":hb(d,f),G("invalid",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],"children"===g?"string"===typeof e?d.textContent!==e&&(a=["children",e]):"number"===typeof e&&d.textContent!==""+e&&(a=["children",""+e]):ca.hasOwnProperty(g)&&null!=e&&"onScroll"===g&&G("scroll",d));switch(c){case "input":Va(d);cb(d,f,!0);break;case "textarea":Va(d);jb(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=
jf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?"script"===c?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),"select"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case "dialog":G("cancel",a);G("close",a);
e=d;break;case "iframe":case "object":case "embed":G("load",a);e=d;break;case "video":case "audio":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case "source":G("error",a);e=d;break;case "img":case "image":case "link":G("error",a);G("load",a);e=d;break;case "details":G("toggle",a);e=d;break;case "input":Za(a,d);e=Ya(a,d);G("invalid",a);break;case "option":e=eb(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G("invalid",a);break;case "textarea":hb(a,d);e=
gb(a,d);G("invalid",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];"style"===f?tb(a,k):"dangerouslySetInnerHTML"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):"children"===f?"string"===typeof k?("textarea"!==c||""!==k)&&pb(a,k):"number"===typeof k&&pb(a,""+k):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(ca.hasOwnProperty(f)?null!=k&&"onScroll"===f&&G("scroll",a):null!=k&&qa(a,f,k,g))}switch(c){case "input":Va(a);cb(a,d,!1);
break;case "textarea":Va(a);jb(a);break;case "option":null!=d.value&&a.setAttribute("value",""+Sa(d.value));break;case "select":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(y(166));
c=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=
4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);
null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,
f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&"hidden"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=
64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&"unstable-defer-without-hiding"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}
function Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}
function Mi(a,b){try{var c="",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e="\nError generating stack: "+f.message+"\n"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi="function"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}
function Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}var Ui="function"===typeof WeakSet?WeakSet:Set;
function Vi(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}
function Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,
b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));
return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}
function aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,"function"===typeof d.setProperty?d.setProperty("display","none","important"):d.display="none";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null;d.style.display=sb("display",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?"":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===
a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}
function bj(a,b){if(Mf&&"function"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if("function"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,
f)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}
function fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,""),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===
c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}
function gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}
function hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}
function cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,
8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}
function ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;"input"===a&&"radio"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=
2){var g=f[e],h=f[e+1];"style"===g?tb(c,h):"dangerouslySetInnerHTML"===g?ob(c,h):"children"===g?pb(c,h):qa(c,g,h,b)}switch(a){case "input":ab(c,d);break;case "textarea":ib(c,d);break;case "select":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=
b.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}
function mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}
function Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}
function Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}
function Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),
c=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}
function Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=
a.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>
c?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}
function Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}
function Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}
function Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}
function Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&"object"===typeof k&&"function"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):
(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=
void 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==V&&(V=2);k=Mi(k,h);p=
g;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&("function"===typeof K.getDerivedStateFromError||null!==Q&&"function"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}
function Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}
function Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==
a.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}
function dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==
Cj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if("selectionStart"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;
break a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===
Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,"");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&("function"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==
J&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),"selectionStart"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===
g.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});"function"===typeof t.focus&&t.focus();for(t=
0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}"function"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=
Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&"function"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}
function ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}
function fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if("function"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=
null,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}
function Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if("function"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}
function Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;
ck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==
b?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if("object"===
typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);
a=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));
d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&
ph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,
c),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=
k.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,
f.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));
};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}
function hk(a){if("function"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}
function Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};
c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}
function Vg(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)ji(a)&&(g=1);else if("string"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if("object"===
typeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,""));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}
function Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}
function jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}
function kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}
function lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==
d&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}
function qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}
qk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}
function sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}
function tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if("function"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};
gc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};
yb=function(a,b,c){switch(b){case "input":ab(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case "textarea":ib(a,c);break;case "select":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;
Hb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"};
var xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||
pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;
exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if("function"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};
exports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};
exports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version="17.0.2";


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/


/* eslint-disable no-unused-vars */
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line no-new-wrappers
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (err) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (getOwnPropertySymbols) {
			symbols = getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


if (true) {
  module.exports = __webpack_require__(13);
} else {}


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var f,g,h,k;if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}
if("undefined"===typeof window||"function"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if("undefined"!==typeof console){var z=
window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");"function"!==typeof z&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=
E};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=
x(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}
function K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;
function T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}
function V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if("function"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();"function"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;
exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};
exports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};
exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();"object"===typeof c&&null!==c?(c=c.delay,c="number"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};
exports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "default", function() { return /* binding */ Component; });

// EXTERNAL MODULE: external {"root":"React","commonjs2":"react","commonjs":"react","amd":"react"}
var external_root_React_commonjs2_react_commonjs_react_amd_react_ = __webpack_require__(1);
var external_root_React_commonjs2_react_commonjs_react_amd_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs2_react_commonjs_react_amd_react_);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DKkCwVCs.js
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __spreadArray(to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};


//# sourceMappingURL=bundle-DKkCwVCs.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/constants/applicationAttributes.js
const applicationAttributes = {
    reactions: 'reactions',
    message_search_v3: 'message_search_v3',
    enable_og_tag: 'enable_og_tag',
    enable_message_threading: 'enable_message_threading',
    allow_broadcast_channel: 'allow_broadcast_channel',
    allow_super_group_channel: 'allow_super_group_channel',
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/constants/premiumFeatures.js
const premiumFeatures = {
    reactions: 'reactions',
    moderation_group: 'moderation_group',
    message_search_v3: 'message_search_v3',
    data_export: 'data_export',
    migration: 'migration',
    delivery_receipt: 'delivery_receipt',
    auto_thumbnail: 'auto_thumbnail',
    image_moderation: 'image_moderation',
    super_group_channel: 'super_group_channel',
    announcement: 'announcement',
    moderation_open: 'moderation_open',
    desk: 'desk',
    bot_interface: 'bot_interface',
    auto_trans: 'auto_trans',
};

// EXTERNAL MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-0b1520ed.js
var _bundle_0b1520ed = __webpack_require__(0);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-dc8db3c3.js
var _bundle_dc8db3c3_Ne,_bundle_dc8db3c3_ke=function(){function r(e,t,n){var r,i;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=e,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=null!==(r=t.real_width)&&void 0!==r?r:t.width,this.realHeight=null!==(i=t.real_height)&&void 0!==i?i:t.height,this._requireAuth=n}return r.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(n instanceof r?{url:n.plainUrl,width:n.width,height:n.height,real_width:n.realWidth,real_height:n.realHeight}:{url:"",width:n.maxWidth,height:n.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(r.prototype,"url",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager;return this._requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),r}(),_bundle_dc8db3c3_Ce=function(t){function n(n){var r=t.call(this)||this;if(r.method=_bundle_0b1520ed["b" /* A */].POST,r.path="".concat(_bundle_0b1520ed["lb" /* ad */]),r.params=Object(_bundle_0b1520ed["hc" /* e */])({file:n.file,channel_url:n.channelUrl}),n.thumbnailSizes)for(var a=0;a<n.thumbnailSizes.length;a++){var o=n.thumbnailSizes[a],u=o.maxWidth,c=o.maxHeight;r.params["thumbnail".concat(a+1)]="".concat(u,",").concat(c)}return r.requestId=n.requestId,r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_Pe=function(e){function t(t,n){var r,i,s,a,o=this;return(o=e.call(this,t,n)||this).url=n.url,o.fileSize=null!==(r=n.file_size)&&void 0!==r?r:0,o.thumbnails=null!==(s=null===(i=n.thumbnails)||void 0===i?void 0:i.map((function(e){return new _bundle_dc8db3c3_ke(t,e,!1)})))&&void 0!==s?s:[],o.requireAuth=null!==(a=n.require_auth)&&void 0!==a&&a,o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_Oe=function(n){function i(e,t){var r,i,s,a,o,u=this;return(u=n.call(this,e)||this).replyCount=0,u.memberCount=0,u.lastRepliedAt=0,u.updatedAt=0,u.replyCount=null!==(r=t.reply_count)&&void 0!==r?r:0,u.memberCount=null!==(i=t.member_count)&&void 0!==i?i:0,u.mostRepliedUsers=t.most_replies&&Object(_bundle_0b1520ed["r" /* Q */])("object",t.most_replies)?t.most_replies.map((function(e){return new _bundle_0b1520ed["v" /* U */](u._iid,e)})):[],u.unreadReplyCount=null!==(s=t.unread_message_count)&&void 0!==s?s:0,u.isPushNotificationEnabled="number"==typeof t.push_enabled?t.push_enabled>0:void 0,u.lastRepliedAt=null!==(a=t.last_replied_at)&&void 0!==a?a:0,u.updatedAt=null!==(o=t.updated_at)&&void 0!==o?o:0,u}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{reply_count:r.replyCount,unread_message_count:r.unreadReplyCount,member_count:r.memberCount,most_replies:Array.isArray(r.mostRepliedUsers)?r.mostRepliedUsers.map((function(e){return _bundle_0b1520ed["v" /* U */].payloadify(e)})):[],push_enabled:"boolean"==typeof r.isPushNotificationEnabled?r.isPushNotificationEnabled?1:0:void 0,last_replied_at:r.lastRepliedAt,updated_at:r.updatedAt})))},Object.defineProperty(i.prototype,"_isUpdateRequired",{get:function(){return void 0===this.unreadReplyCount||void 0===this.isPushNotificationEnabled},enumerable:!1,configurable:!0}),i.prototype._updateFrom=function(e){var t,n;this.unreadReplyCount=null!==(t=e.unreadReplyCount)&&void 0!==t?t:this.unreadReplyCount,this.isPushNotificationEnabled=null!==(n=e.isPushNotificationEnabled)&&void 0!==n?n:this.isPushNotificationEnabled},i}(_bundle_0b1520ed["mb" /* ae */]);!function(e){e.ADD="add",e.DELETE="delete"}(_bundle_dc8db3c3_Ne||(_bundle_dc8db3c3_Ne={}));var _bundle_dc8db3c3_Re,_bundle_dc8db3c3_xe=function(e){this.messageId=0,this.operation=null,this.updatedAt=0;var t=Object(_bundle_0b1520ed["C" /* a */])("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,n=e.user_id,r=e.operation?e.operation.toLowerCase():null,i=e.reaction,s=e.updated_at;t&&Object(_bundle_0b1520ed["C" /* a */])("string",n)&&Object(_bundle_0b1520ed["C" /* a */])("string",r)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_dc8db3c3_Ne,r)&&Object(_bundle_0b1520ed["C" /* a */])("string",i)&&i&&Object(_bundle_0b1520ed["C" /* a */])("number",s)&&(this.messageId=t,this.userId=n,this.key=i,this.operation=r,this.updatedAt=s)},_bundle_dc8db3c3_De=function(){function n(e){var t,n,r,i=e.key,s=null!==(r=Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(e.user_ids),!1))&&void 0!==r?r:[],a=e.updated_at;Object(_bundle_0b1520ed["C" /* a */])("string",i)&&i&&Object(_bundle_0b1520ed["r" /* Q */])("string",s)&&s.length>0&&Object(_bundle_0b1520ed["C" /* a */])("number",a)&&(this.key=i,this.userIds=s,this.updatedAt=a);var o={};try{for(var u=Object(_bundle_0b1520ed["wc" /* t */])(this.userIds),c=u.next();!c.done;c=u.next()){o[c.value]=this.updatedAt}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}this._version=o}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),n.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({key:n.key,user_ids:n.userIds,updated_at:n.updatedAt}))},n.prototype.applyEvent=function(e){if(e.key===this.key&&this.updatedAt<=e.updatedAt){if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var t=this.userIds.indexOf(e.userId);switch(e.operation){case _bundle_dc8db3c3_Ne.ADD:t<0&&this.userIds.push(e.userId);break;case _bundle_dc8db3c3_Ne.DELETE:t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}this.updatedAt=Math.max(this.updatedAt,e.updatedAt)}},n}(),_bundle_dc8db3c3_Le=function(){function n(e){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=e.url,e.secure_url&&(this.secureUrl=e.secure_url),e.type&&(this.type=e.type),e.width&&(this.width=e.width),e.height&&(this.height=e.height),e.alt&&(this.alt=e.alt)}return n.payloadify=function(n){var r,i;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({url:n.url,secure_url:n.secureUrl,type:n.type,width:null!==(r=n.width)&&void 0!==r?r:0,height:null!==(i=n.height)&&void 0!==i?i:0,alt:n.alt}))},n}(),_bundle_dc8db3c3_Fe=function(){function n(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e["og:title"]&&(this.title=e["og:title"]),e["og:url"]&&(this.url=e["og:url"]),e["og:description"]&&(this.description=e["og:description"]),e["og:image"]&&(this.defaultImage=new _bundle_dc8db3c3_Le(e["og:image"]))}return n.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({"og:title":n.title,"og:url":n.url,"og:description":n.description,"og:image":n.defaultImage?_bundle_dc8db3c3_Le.payloadify(n.defaultImage):null}))},n}(),_bundle_dc8db3c3_qe=function(){function n(e){var t,n;this.volume=0,this.name=null!==(t=e.name)&&void 0!==t?t:"default",this.volume=null!==(n=e.volume)&&void 0!==n?n:1}return n.prototype.serialize=function(){return{name:this.name,volume:this.volume}},n.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({name:n.name,volume:n.volume}))},n}();!function(e){e.GOOD="good",e.BAD="bad"}(_bundle_dc8db3c3_Re||(_bundle_dc8db3c3_Re={}));var _bundle_dc8db3c3_ze,_bundle_dc8db3c3_Be=function(){function n(e){this.id=e.id,this.rating=e.rating,this.comment=e.comment}return n.parseFeedbackStatusFromPayload=function(e){return e&&null!==e.id&&null!==e.rating?"SUBMITTED":"NOT_APPLICABLE"},n.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({id:n.id,rating:n.rating,comment:n.comment}))},n}(),_bundle_dc8db3c3_Ke=function(n){function i(e,t){var r,i=this;return(i=n.call(this,e,t)||this).isBlockedByMe=!1,i.role=Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["H" /* a7 */],t.role)?t.role:_bundle_0b1520ed["H" /* a7 */].NONE,i.isBlockedByMe=null!==(r=t.is_blocked_by_me)&&void 0!==r&&r,i}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{role:r.role,is_blocked_by_me:r.isBlockedByMe})))},i}(_bundle_0b1520ed["v" /* U */]),_bundle_dc8db3c3_je=function(){function n(e){this.key=e.key,this.value=Object(_bundle_0b1520ed["r" /* Q */])("string",e.value)?Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(e.value),!1):[]}return n.payloadify=function(n){var r;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({key:n.key,value:null!==(r=n.value)&&void 0!==r?r:[]}))},n}(),_bundle_dc8db3c3_Qe=function(e){switch(e){case _bundle_0b1520ed["ob" /* ag */].BASE:return"";case _bundle_0b1520ed["ob" /* ag */].USER:return"MESG";case _bundle_0b1520ed["ob" /* ag */].FILE:return"FILE";case _bundle_0b1520ed["ob" /* ag */].ADMIN:return"ADMM"}},_bundle_dc8db3c3_Ge=function(n){function i(e,t){var r,i,s,a,o,u,l,d,h,p,m=this;(m=n.call(this,e)||this).channelType=_bundle_0b1520ed["d" /* C */].BASE,m.messageType=_bundle_0b1520ed["ob" /* ag */].BASE,m.mentionType=null,m.mentionedUsers=null,m.mentionedUserIds=null,m.metaArrays=[],m.extendedMessage={},m.createdAt=0,m.updatedAt=0,m.channelUrl=t.channel_url,m.channelType=Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["d" /* C */],t.channel_type)?t.channel_type:_bundle_0b1520ed["d" /* C */].GROUP,t.channel&&(t.channel.channel_url&&(m.channelUrl=t.channel.channel_url),t.channel.channel_type&&(m.channelType=t.channel.channel_type)),m.data=null!==(r=t.data)&&void 0!==r?r:"",m.customType=null!==(i=t.custom_type)&&void 0!==i?i:"",m.mentionType=Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["qb" /* ai */],t.mention_type)?t.mention_type:null,m.mentionedUsers=t.mentioned_users?t.mentioned_users.map((function(e){return new _bundle_0b1520ed["v" /* U */](m._iid,e)})):null,m.mentionedUserIds=null!==(s=t.mentioned_user_ids)&&void 0!==s?s:null,m.mentionedUsers&&!m.mentionedUserIds&&(m.mentionedUserIds=m.mentionedUsers.map((function(e){return e.userId}))),m.mentionedMessageTemplate=null!==(a=t.mentioned_message_template)&&void 0!==a?a:"";var v=null!==(o=t.metaarray)&&void 0!==o?o:{},y=null!==(u=t.metaarray_key_order)&&void 0!==u?u:Object.keys(v).sort((function(e,t){return e.localeCompare(t)}));m.metaArrays=[];for(var _=0;_<y.length;_++){var b=y[_];m.metaArrays.push(new _bundle_dc8db3c3_je({key:b,value:v[b]||[]}))}return t.sorted_metaarray&&(m.metaArrays=t.sorted_metaarray.map((function(e){return new _bundle_dc8db3c3_je(e)}))),m.extendedMessage=null!==(l=t.extended_message)&&void 0!==l?l:{},m.extendedMessagePayload=t.extended_message_payload,m.createdAt=null!==(h=null!==(d=t.created_at)&&void 0!==d?d:t.ts)&&void 0!==h?h:0,m.updatedAt=null!==(p=t.updated_at)&&void 0!==p?p:0,m}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){var i,s;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{channel_url:r.channelUrl,channel_type:r.channelType,type:_bundle_dc8db3c3_Qe(r.messageType),data:r.data,custom_type:r.customType,mention_type:r.mentionType,mentioned_user_ids:r.mentionedUserIds,mentioned_users:null===(i=r.mentionedUsers)||void 0===i?void 0:i.map((function(e){return _bundle_0b1520ed["v" /* U */].payloadify(e)})),mentioned_message_template:r.mentionedMessageTemplate,sorted_metaarray:null===(s=r.metaArrays)||void 0===s?void 0:s.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})),extended_message:r.extendedMessage,extended_message_payload:r.extendedMessagePayload,created_at:r.createdAt,updated_at:r.updatedAt})))},i.prototype.isIdentical=function(e){return!0},i.prototype.isEqual=function(e){return Object(_bundle_0b1520ed["nb" /* af */])(this,e)},i.prototype.isUserMessage=function(){return this.messageType===_bundle_0b1520ed["ob" /* ag */].USER},i.prototype.isFileMessage=function(){return this.messageType===_bundle_0b1520ed["ob" /* ag */].FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},i.prototype.isMultipleFilesMessage=function(){return this.messageType===_bundle_0b1520ed["ob" /* ag */].FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},i.prototype.isAdminMessage=function(){return this.messageType===_bundle_0b1520ed["ob" /* ag */].ADMIN},i.prototype.hasForm=function(){var e,t;return!!(null===(t=null===(e=this.extendedMessagePayload)||void 0===e?void 0:e.forms)||void 0===t?void 0:t[0])},i.prototype.serialize=function(){return Object(_bundle_0b1520ed["pb" /* ah */])(this)},i.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(t){return e.includes(t.key)}))},i}(_bundle_0b1520ed["mb" /* ae */]);!function(e){e.Text="text",e.Phone="phone",e.Email="email",e.Password="password"}(_bundle_dc8db3c3_ze||(_bundle_dc8db3c3_ze={}));var _bundle_dc8db3c3_Ve=function(){function n(e,t,n){this.messageId=e,this.key=t,this.fields=n,this.formKey=t}return Object.defineProperty(n.prototype,"isSubmitted",{get:function(){return void 0!==this.answers&&Object.keys(this.answers).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSubmittable",{get:function(){return this.fields.every((function(e){return e.isSubmittable}))},enumerable:!1,configurable:!0}),n.prototype.getFieldAnswer=function(e){var t;return null===(t=this.answers)||void 0===t?void 0:t[e]},n.payloadify=function(n){var r;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({key:null!==(r=n.formKey)&&void 0!==r?r:n.key,fields:n.fields.map((function(e){return _bundle_dc8db3c3_He.payloadify(e)}))}))},n.isFormPayload=function(e){var t;return Boolean(null===(t=null==e?void 0:e.forms)||void 0===t?void 0:t[0])},n}(),_bundle_dc8db3c3_He=function(){function n(e){this.key=e.key,this.inputType=e.input_type,this.title=e.title,this.required=e.required,this.regex=e.regex,this.placeholder=e.placeholder,this.fieldKey=e.key}return n.prototype.isValid=function(e){if(!this.regex)return!0;try{return new RegExp(this.regex).test(e)}catch(e){return!0}},Object.defineProperty(n.prototype,"isSubmittable",{get:function(){return!(null!=this.temporaryAnswer&&!this.isValid(this.temporaryAnswer)||this.required&&null==this.temporaryAnswer)},enumerable:!1,configurable:!0}),n.payloadify=function(n){var r;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({key:null!==(r=n.fieldKey)&&void 0!==r?r:n.key,input_type:n.inputType,title:n.title,required:n.required,regex:n.regex,placeholder:n.placeholder}))},n}(),_bundle_dc8db3c3_We=function(e){function t(t,n){var r,i,s=this;return(s=e.call(this,t)||this).channelUrl=null!==(r=n.channel_url)&&void 0!==r?r:"",s.channelType=null!==(i=n.channel_type)&&void 0!==i?i:_bundle_0b1520ed["d" /* C */].GROUP,s.reader=new _bundle_0b1520ed["v" /* U */](s._iid,n.user),s.readAt=n.ts,s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["mb" /* ae */]),_bundle_dc8db3c3_Ye=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:n}})||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["rb" /* aj */]),_bundle_dc8db3c3_Je=function(n){function s(r){var s=n.call(this)||this,a=r.channelUrl,o=r.channelType,u=r.userId,c=r.notificationIds;return s.method=_bundle_0b1520ed["b" /* A */].PUT,s.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(o),"/").concat(encodeURIComponent(a),"/messages/mark_as_read"),s.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({user_id:u,message_ids:c})),s}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_Xe=function(e){function t(t,n,r){var i=e.call(this,t,"READ",r)||this;return i.readStatus=new _bundle_dc8db3c3_We(t,r),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_dc8db3c3_Ze=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.readAt=n.ts,r.unreadMessageCount=n.unread_message_count,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_$e=function(e){function t(t){var n=t.channelUrl,r=t.messageId;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:n,parent_message_id:r}})||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["rb" /* aj */]),_bundle_dc8db3c3_et=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.pushEnabled,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].PUT,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(s,"/thread_push"),o.params={push_enabled:a},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){return e.call(this,t,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_dc8db3c3_tt=function(t){function n(n){var r=t.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].POST,r.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(n.channelUrl),"/messages/").concat(n.messageId,"/submit_forms"),r.params=Object(_bundle_0b1520ed["hc" /* e */])({forms:n.forms}),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_nt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.rating,o=t.comment,u=e.call(this)||this;return u.method=_bundle_0b1520ed["b" /* A */].POST,u.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(s,"/feedbacks"),u.params={rating:a,comment:o},u}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_rt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.feedback=new _bundle_dc8db3c3_Be(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_it=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.feedbackId,o=t.rating,u=t.comment,c=e.call(this)||this;return c.method=_bundle_0b1520ed["b" /* A */].PUT,c.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(s,"/feedbacks/").concat(a),c.params={rating:o,comment:u},c}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_st=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.feedback=new _bundle_dc8db3c3_Be(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_at=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.feedbackId,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].DELETE,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(s,"/feedbacks/").concat(a),o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.feedback=new _bundle_dc8db3c3_Be(n),r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_dc8db3c3_ot,_bundle_dc8db3c3_ut,_bundle_dc8db3c3_ct=function(i){function s(e,t){var n,r,s,a,o,c=this;return(c=i.call(this,e)||this).plainUrl="",c.fileName=null,c.mimeType=null,c.fileSize=0,c.thumbnails=[],c._requireAuth=!1,c.plainUrl=null!==(n=t.url)&&void 0!==n?n:"",c.fileName=null!==(r=t.file_name)&&void 0!==r?r:null,c.mimeType=null!==(s=t.file_type)&&void 0!==s?s:null,c.fileSize=null!==(a=t.file_size)&&void 0!==a?a:0,c._requireAuth=null!==(o=t.require_auth)&&void 0!==o&&o,c.thumbnails=t.thumbnails?t.thumbnails.map((function(e){var t;return new _bundle_dc8db3c3_ke(c._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),c._requireAuth)})):[],c}return Object(_bundle_0b1520ed["fc" /* c */])(s,i),s.payloadify=function(n){var r;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({url:n.plainUrl,file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:null===(r=n.thumbnails)||void 0===r?void 0:r.map((function(e){var t;return{url:(null!==(t=e.plainUrl)&&void 0!==t?t:"").split("auth=")[0],width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),require_auth:n._requireAuth}))},Object.defineProperty(s.prototype,"url",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager;return this._requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),s}(_bundle_0b1520ed["mb" /* ae */]),_bundle_dc8db3c3_lt=function(e){var t=e.channelUrl,n=e.channelType,r=e.parentMessage;this.channelUrl=t,this.channelType=n,this.parentMessage=r};!function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"}(_bundle_dc8db3c3_ot||(_bundle_dc8db3c3_ot={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(_bundle_dc8db3c3_ut||(_bundle_dc8db3c3_ut={}));var _bundle_dc8db3c3_dt,_bundle_dc8db3c3_ht=function(i){function s(e,t){var n,r,s,a,o,u,c,l,d,h,f=this;return(f=i.call(this,e,t)||this).parentMessage=null,f.silent=!1,f.isOperatorMessage=!1,f.threadInfo=null,f.reactions=[],f.appleCriticalAlertOptions=null,f.scheduledInfo=null,f.suggestedReplies=null,f.myFeedback=null,f.myFeedbackStatus="NOT_APPLICABLE",f.forms=null,f._isContinuousMessages=!1,f._scheduledStatus=null,f.messageId=null!==(r=null!==(n=t.msg_id)&&void 0!==n?n:t.message_id)&&void 0!==r?r:0,f.parentMessageId=null!==(s="string"==typeof t.parent_message_id?parseInt(t.parent_message_id):t.parent_message_id)&&void 0!==s?s:0,f.threadInfo=t.thread_info?new _bundle_dc8db3c3_Oe(f._iid,t.thread_info):null,f.reactions=t.reactions?t.reactions.map((function(e){return new _bundle_dc8db3c3_De(e)})):[],f.ogMetaData=t.og_tag?new _bundle_dc8db3c3_Fe(t.og_tag):null,f.silent=null!==(a=t.silent)&&void 0!==a&&a,f.isOperatorMessage=null!==(o=t.is_op_msg)&&void 0!==o&&o,f.appleCriticalAlertOptions=t.apple_critical_alert_options?new _bundle_dc8db3c3_qe(t.apple_critical_alert_options):null,"number"==typeof t.scheduled_message_id&&"number"==typeof t.scheduled_at&&t.scheduled_status&&(f.scheduledInfo={scheduledMessageId:t.scheduled_message_id,scheduledAt:t.scheduled_at},f._scheduledStatus=t.scheduled_status),f._isContinuousMessages=null!==(u=t.is_continuous_messages)&&void 0!==u&&u,f.myFeedback=(null===(c=t.feedback)||void 0===c?void 0:c.id)?new _bundle_dc8db3c3_Be(t.feedback):null,f.myFeedbackStatus=null!==(l=t.my_feedback_status)&&void 0!==l?l:_bundle_dc8db3c3_Be.parseFeedbackStatusFromPayload(t.feedback),f.suggestedReplies=null!==(h=null===(d=t.extended_message_payload)||void 0===d?void 0:d.suggested_replies)&&void 0!==h?h:null,f.forms=_bundle_dc8db3c3_Ve.isFormPayload(t.extended_message_payload)?t.extended_message_payload.forms.map((function(e){return new _bundle_dc8db3c3_Ve(f.messageId,e.key,e.fields.map((function(e){return new _bundle_dc8db3c3_He(e)})))})):null,f}return Object(_bundle_0b1520ed["fc" /* c */])(s,i),s.payloadify=function(n){var r,s;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},i.payloadify.call(this,n)),{message_id:n.messageId,parent_message_id:n.parentMessageId,thread_info:n.threadInfo?_bundle_dc8db3c3_Oe.payloadify(n.threadInfo):null,reactions:n.reactions.map((function(e){return _bundle_dc8db3c3_De.payloadify(e)})),og_tag:n.ogMetaData?_bundle_dc8db3c3_Fe.payloadify(n.ogMetaData):null,silent:n.silent,is_op_msg:n.isOperatorMessage,apple_critical_alert_options:n.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(n.appleCriticalAlertOptions):null,scheduled_message_id:null===(r=n.scheduledInfo)||void 0===r?void 0:r.scheduledMessageId,scheduled_at:null===(s=n.scheduledInfo)||void 0===s?void 0:s.scheduledAt,scheduled_status:n._scheduledStatus,feedback:n.myFeedback?_bundle_dc8db3c3_Be.payloadify(n.myFeedback):null,my_feedback_status:n.myFeedbackStatus,forms:n.forms?n.forms.map((function(e){return _bundle_dc8db3c3_Ve.payloadify(e)})):null})))},s._getParentMessageInfoPayload=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({type:_bundle_dc8db3c3_Qe(n.messageType),ts:n.createdAt,user:n.sender?_bundle_dc8db3c3_Ke.payloadify(n.sender):null,message:n.message,file:{url:n.plainUrl,name:n.name,type:n.type,require_auth:n.requireAuth},files:Array.isArray(n.fileInfoList)?n.fileInfoList.map((function(e){return _bundle_dc8db3c3_ct.payloadify(e)})):null}))},s.prototype.isIdentical=function(e){return this.messageId===e.messageId},s.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(e.threadInfo._isUpdateRequired&&this.threadInfo&&e.threadInfo._updateFrom(this.threadInfo),this.threadInfo=e.threadInfo,!0)},s.prototype.applyReactionEvent=function(e){if(this.messageId===e.messageId){for(var t=!1,n=0;n<this.reactions.length;n++)if(this.reactions[n].key===e.key){this.reactions[n].applyEvent(e),this.reactions[n].isEmpty&&this.reactions.splice(n,1),t=!0;break}t||"add"!==e.operation||this.reactions.push(new _bundle_dc8db3c3_De(_bundle_dc8db3c3_De.payloadify({key:e.key,userIds:[e.userId],updatedAt:e.updatedAt})))}},s.prototype.applyParentMessage=function(e){if(!this.parentMessage)return this.parentMessage=e,!0;if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1},s.prototype._triggerThreadInfoUpdatedEvent=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return(e=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher).dispatch(new _bundle_dc8db3c3_lt({channelType:_bundle_0b1520ed["d" /* C */].GROUP,channelUrl:this.channelUrl,parentMessage:this})),e.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[this],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_THREADINFO_UPDATED})),[2]}))}))},s.prototype.markThreadAsRead=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new _bundle_dc8db3c3_$e({channelUrl:this.channelUrl,messageId:this.messageId}),[4,e.send(t)];case 1:return r.sent(),this.threadInfo&&0!==this.threadInfo.unreadReplyCount?(this.threadInfo.unreadReplyCount=0,[4,this._triggerThreadInfoUpdatedEvent()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},s.prototype.setPushNotificationEnabled=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new _bundle_dc8db3c3_et({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,pushEnabled:e}),[4,t.send(r)];case 1:return i.sent(),this.threadInfo&&this.threadInfo.isPushNotificationEnabled!==e&&(this.threadInfo.isPushNotificationEnabled=e),[2]}}))}))},s.prototype.submitForm=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:if(Object(_bundle_0b1520ed["zc" /* w */])(e.form&&e.form instanceof _bundle_dc8db3c3_Ve||Object(_bundle_0b1520ed["C" /* a */])("string",e.formId)&&Object(_bundle_0b1520ed["C" /* a */])("object",e.answers)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),r=t.requestQueue,i=t.sdkState,s=t.logger,!e.form)return[3,2];if(!(a=e.form).isSubmittable)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].INVALID_PARAMETER,message:"The given form is not submittable."});if(a.isSubmitted)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].INVALID_PARAMETER,message:"The given form is already submitted."});if(a.messageId!=this.messageId)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].INVALID_PARAMETER,message:"This form does not belong to the message."});return o=a.fields.reduce((function(e,t){return e[t.key]=t.temporaryAnswer,e}),{}),u=new _bundle_dc8db3c3_tt({userId:i.userId,channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,forms:[{form_key:a.key,data:o}]}),[4,r.send(u)];case 1:return c.sent(),[3,4];case 2:return e.formId&&e.answers?(s.warn("The submitForm method with formId and answers is deprecated. Use submitForm({ form: Form }) instead."),u=new _bundle_dc8db3c3_tt({userId:i.userId,channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,forms:[{form_key:e.formId,data:e.answers}]}),[4,r.send(u)]):[3,4];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))},s.prototype.submitFeedback=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),r=t.requestQueue,i=t.dispatcher,s=new _bundle_dc8db3c3_nt({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,rating:e.rating,comment:e.comment}),[4,r.send(s)];case 1:return a=u.sent(),o=a.as(_bundle_dc8db3c3_rt),this.myFeedback=o.feedback,this.myFeedbackStatus="SUBMITTED",i.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[this],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_FEEDBACK_ADDED})),[2]}}))}))},s.prototype.updateFeedback=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),r=t.requestQueue,i=t.dispatcher,s=new _bundle_dc8db3c3_it({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:e.id,rating:e.rating,comment:e.comment}),[4,r.send(s)];case 1:return a=u.sent(),o=a.as(_bundle_dc8db3c3_st),this.myFeedback=o.feedback,this.myFeedbackStatus="SUBMITTED",i.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[this],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_FEEDBACK_UPDATED})),[2]}}))}))},s.prototype.deleteFeedback=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),r=t.requestQueue,i=t.dispatcher,s=new _bundle_dc8db3c3_at({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:e}),[4,r.send(s)];case 1:return a.sent(),this.myFeedback=null,this.myFeedbackStatus="NO_FEEDBACK",i.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[this],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_FEEDBACK_DELETED})),[2]}}))}))},s}(_bundle_dc8db3c3_Ge),_bundle_dc8db3c3_ft=function(n){function i(e,t){var r,i,s,a,o=this;if((o=n.call(this,e,t)||this).reqId="",o.replyToChannel=!1,o.errorCode=0,o.sender=t.user?new _bundle_dc8db3c3_Ke(o._iid,t.user):t.sender_id,o.reqId=null!==(i=null!==(r=t.req_id)&&void 0!==r?r:t.request_id)&&void 0!==i?i:"",o.replyToChannel=null!==(s=t.is_reply_to_channel)&&void 0!==s&&s,t.request_state&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["vb" /* an */],t.request_state)&&(o.sendingStatus=t.request_state),!o.sendingStatus)if(o.messageId>0)o.sendingStatus=_bundle_0b1520ed["vb" /* an */].SUCCEEDED;else if(o.scheduledInfo)switch(t.scheduled_status&&(o._scheduledStatus=t.scheduled_status),t.scheduled_status){case _bundle_dc8db3c3_ut.SENT:case _bundle_dc8db3c3_ut.IN_QUEUE:o.sendingStatus=_bundle_0b1520ed["vb" /* an */].SUCCEEDED;break;case _bundle_dc8db3c3_ut.PENDING:o.sendingStatus=_bundle_0b1520ed["vb" /* an */].SCHEDULED;break;case _bundle_dc8db3c3_ut.FAILED:case _bundle_dc8db3c3_ut.REMOVED:o.sendingStatus=_bundle_0b1520ed["vb" /* an */].FAILED;break;case _bundle_dc8db3c3_ut.CANCELED:o.sendingStatus=_bundle_0b1520ed["vb" /* an */].CANCELED}else o.sendingStatus=_bundle_0b1520ed["vb" /* an */].PENDING;return o.errorCode=null!==(a=t.error_code)&&void 0!==a?a:0,o._messageToken=t.mesg_token,o}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{user:_bundle_dc8db3c3_Ke.payloadify(r.sender),req_id:r.reqId,is_reply_to_channel:r.replyToChannel,request_state:r.sendingStatus,error_code:r.errorCode,mesg_token:r._messageToken})))},Object.defineProperty(i.prototype,"isResendable",{get:function(){return(this.sendingStatus===_bundle_0b1520ed["vb" /* an */].FAILED||this.sendingStatus===_bundle_0b1520ed["vb" /* an */].CANCELED)&&Object(_bundle_0b1520ed["wb" /* ao */])(this.errorCode)},enumerable:!1,configurable:!0}),i.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},i}(_bundle_dc8db3c3_ht),_bundle_dc8db3c3_pt={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:_bundle_0b1520ed["xb" /* ap */].ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},_bundle_dc8db3c3_mt=function(e){return Object(_bundle_0b1520ed["C" /* a */])("number",e.prevResultSize)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.nextResultSize)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isInclusive)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.reverse)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.messageTypeFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["xb" /* ap */],e.messageTypeFilter)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.customTypesFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.senderUserIdsFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeMetaArray)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeReactions)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeParentMessageInfo)},_bundle_dc8db3c3_vt=function(n){function i(r,i){var s,a,o,c,l=this;if((l=n.call(this,r,i)||this).translations={},l.message=null!==(s=i.message)&&void 0!==s?s:"",l.messageType=_bundle_0b1520ed["ob" /* ag */].ADMIN,l.translations=null!==(a=i.translations)&&void 0!==a?a:{},i.parent_message_info){var d=i.parent_message_info;l.parentMessage=_bundle_dc8db3c3_Tt(r,Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},d),{message_id:l.parentMessageId,channel_url:l.channelUrl,channel_type:l.channelType,file:d.file,url:null===(o=d.file)||void 0===o?void 0:o.url,require_auth:null===(c=d.file)||void 0===c?void 0:c.require_auth}))))}return l}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{message:r.message,translations:r.translations,parent_message_info:r.parentMessage?n._getParentMessageInfoPayload.call(this,r.parentMessage):null})))},i.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_pt),t),Object(_bundle_0b1520ed["zc" /* w */])(this.messageId>0&&Object(_bundle_0b1520ed["C" /* a */])("number",e)&&_bundle_dc8db3c3_mt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},i}(_bundle_dc8db3c3_ht),_bundle_dc8db3c3_yt=function(){function n(e){var t,n;this.detail={},this.type=null!==(t=e.type)&&void 0!==t?t:"",this.vendor=null!==(n=e.vendor)&&void 0!==n?n:"",e.detail&&Object(_bundle_0b1520ed["C" /* a */])("object",e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}return n.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({type:n.type,vendor:n.vendor,detail:n.detail}))},n}(),_bundle_dc8db3c3_t=function(){function t(e){this.status=e.status,e.original_message_info&&(this.originalMessageInfo={createdAt:e.original_message_info.ts,messageId:e.original_message_info.id})}return t.payloadify=function(t){return Object(_bundle_0b1520ed["hc" /* e */])({status:t.status,original_message_info:t.originalMessageInfo?{id:t.originalMessageInfo.messageId,ts:t.originalMessageInfo.createdAt}:void 0})},t}(),_bundle_dc8db3c3_gt=function(n){function i(r,i){var s,a,o,c,l,d,h,f=this;if((f=n.call(this,r,i)||this).message="",f.messageParams=null,f.translations={},f.translationTargetLanguages=[],f.messageSurvivalSeconds=-1,f.plugins=[],f._poll=null,f.message=i.message,f.messageType=_bundle_0b1520ed["ob" /* ag */].USER,f.translations=null!==(o=i.translations)&&void 0!==o?o:{},f.translationTargetLanguages=null!==(c=i.target_langs)&&void 0!==c?c:[],0===Object.keys(f.translations).length&&f.translationTargetLanguages.length>0)try{for(var p=Object(_bundle_0b1520ed["wc" /* t */])(f.translationTargetLanguages),m=p.next();!m.done;m=p.next()){var y=m.value;f.translations[y]=""}}catch(e){s={error:e}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}if(f.messageSurvivalSeconds=null!==(l=i.message_survival_seconds)&&void 0!==l?l:-1,f.plugins=i.plugins?i.plugins.map((function(e){return new _bundle_dc8db3c3_yt(e)})):[],f._poll=i.poll?new _bundle_0b1520ed["yb" /* aq */](f._iid,i.poll):null,i.parent_message_info){var _=i.parent_message_info;f.parentMessage=_bundle_dc8db3c3_Tt(r,Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_),{created_at:_.ts,message_id:f.parentMessageId,channel_url:f.channelUrl,channel_type:f.channelType,file:_.file,url:null===(d=_.file)||void 0===d?void 0:d.url,require_auth:null===(h=_.file)||void 0===h?void 0:h.require_auth}))))}return i.review_info&&(f.messageReviewInfo=new _bundle_dc8db3c3_t(i.review_info)),f}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{message:r.message,translations:r.translations,message_survival_seconds:r.messageSurvivalSeconds,plugins:r.plugins.map((function(e){return _bundle_dc8db3c3_yt.payloadify(e)})),poll:r._poll?_bundle_0b1520ed["yb" /* aq */].payloadify(r._poll):null,parent_message_info:r.parentMessage?n._getParentMessageInfoPayload.call(this,r.parentMessage):null,review_info:r.messageReviewInfo?_bundle_dc8db3c3_t.payloadify(r.messageReviewInfo):void 0})))},i.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_pt),t),Object(_bundle_0b1520ed["zc" /* w */])(this.messageId>0&&Object(_bundle_0b1520ed["C" /* a */])("number",e)&&_bundle_dc8db3c3_mt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},i.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt)&&(this._poll=e,!0)},Object.defineProperty(i.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),i}(_bundle_dc8db3c3_ft),_bundle_dc8db3c3_bt=function(n){function i(r,i){var s,a,o,c,l,d=this;if((d=n.call(this,r,i)||this).messageParams=null,d.fileInfoList=[],d.messageSurvivalSeconds=-1,d.messageType=_bundle_0b1520ed["ob" /* ag */].FILE,d.fileInfoList=null!==(a=null===(s=i.files)||void 0===s?void 0:s.map((function(e){return new _bundle_dc8db3c3_ct(r,e)})))&&void 0!==a?a:[],d.messageSurvivalSeconds=null!==(o=i.message_survival_seconds)&&void 0!==o?o:-1,i.parent_message_info){var h=i.parent_message_info;d.parentMessage=_bundle_dc8db3c3_Tt(r,Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},h),{created_at:h.ts,message_id:d.parentMessageId,channel_url:d.channelUrl,channel_type:d.channelType,file:h.file,url:null===(c=h.file)||void 0===c?void 0:c.url,require_auth:null===(l=h.file)||void 0===l?void 0:l.require_auth}))))}return d}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_pt),t),Object(_bundle_0b1520ed["zc" /* w */])(this.messageId>0&&Object(_bundle_0b1520ed["C" /* a */])("number",e)&&_bundle_dc8db3c3_mt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{files:Array.isArray(r.fileInfoList)?r.fileInfoList.map((function(e){return _bundle_dc8db3c3_ct.payloadify(e)})):null,message_survival_seconds:r.messageSurvivalSeconds,parent_message_info:r.parentMessage?n._getParentMessageInfoPayload.call(this,r.parentMessage):null})))},i._isMultipleFilesMessagePayload=function(e){var t=e.files;return Array.isArray(t)&&t.length>=2},i._isMultipleFilesMessageSerializedData=function(e){var t=e.fileInfoList;return Array.isArray(t)},i}(_bundle_dc8db3c3_ft);!function(e){e.SENT="SENT",e.READ="READ"}(_bundle_dc8db3c3_dt||(_bundle_dc8db3c3_dt={}));var It=function(n){function i(e,t){var r,i,s=this;if((s=n.call(this,e,t)||this).notificationData=null,s.notificationId=t.notification_message_id,s.messageType=_bundle_0b1520ed["ob" /* ag */].ADMIN,s.messageStatus=null!==(r=t.message_status)&&void 0!==r?r:_bundle_dc8db3c3_dt.SENT,s.priority=null!==(i=t.priority)&&void 0!==i?i:_bundle_0b1520ed["zb" /* ar */].NORMAL,s.notificationEventDeadline=t.notification_event_deadline,0===s.extendedMessage.sub_type)try{var a=JSON.parse(s.extendedMessage.sub_data),o=a.label,u=a.tags,c=void 0===u?[]:u,l=a.template_key,d=a.template_variables;s.notificationData={label:o,tags:c,templateKey:l,templateVariables:d}}catch(e){}return s}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),{notification_message_id:r.notificationId,message_status:r.messageStatus,priority:r.priority,notification_event_deadline:r.notificationEventDeadline})))},i.prototype.isIdentical=function(e){return this.notificationId===e.notificationId},i}(_bundle_dc8db3c3_Ge),_bundle_dc8db3c3_Et=function(e){if(e.notificationId)return It.payloadify(e);switch(e.messageType){case _bundle_0b1520ed["ob" /* ag */].USER:return _bundle_dc8db3c3_gt.payloadify(e);case _bundle_0b1520ed["ob" /* ag */].FILE:return e.fileInfoList?_bundle_dc8db3c3_bt.payloadify(e):wt.payloadify(e);case _bundle_0b1520ed["ob" /* ag */].ADMIN:return _bundle_dc8db3c3_vt.payloadify(e);default:throw _bundle_0b1520ed["vc" /* s */].unknown}},_bundle_dc8db3c3_Tt=function(e,t){if(t.notification_message_id)return new It(e,t);switch(t.type){case"MESG":return new _bundle_dc8db3c3_gt(e,t);case"FILE":return _bundle_dc8db3c3_bt._isMultipleFilesMessagePayload(t)?new _bundle_dc8db3c3_bt(e,t):new wt(e,t);case"ADMM":case"BRDM":return new _bundle_dc8db3c3_vt(e,t);default:return null}},wt=function(i){function s(n,r){var s,a,o,c,l,d,h,f,p,m,v,y,_,b,I=this;(I=i.call(this,n,r)||this).messageParams=null,I.plainUrl="",I.requireAuth=!1,I.thumbnails=[],I.messageSurvivalSeconds=-1,I.messageType=_bundle_0b1520ed["ob" /* ag */].FILE;var E=r.file;if(I.plainUrl=(null!==(a=null!==(s=null==E?void 0:E.url)&&void 0!==s?s:r.url)&&void 0!==a?a:"").split("?auth=")[0],I.name=null!==(c=null!==(o=null==E?void 0:E.name)&&void 0!==o?o:r.name)&&void 0!==c?c:"File",I.size=null!==(d=null!==(l=null==E?void 0:E.size)&&void 0!==l?l:r.size)&&void 0!==d?d:0,I.data=null!==(f=null!==(h=null==E?void 0:E.data)&&void 0!==h?h:r.custom)&&void 0!==f?f:"",I.type=E?null!==(p=E.type)&&void 0!==p?p:"":null!==(m=r.type)&&void 0!==m?m:"",I.requireAuth=null!==(v=r.require_auth)&&void 0!==v&&v,I.thumbnails=r.thumbnails?r.thumbnails.map((function(e){var t;return new _bundle_dc8db3c3_ke(I._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),I.requireAuth)})):[],I.messageSurvivalSeconds=null!==(y=r.message_survival_seconds)&&void 0!==y?y:-1,r.parent_message_info){var T=r.parent_message_info;I.parentMessage=_bundle_dc8db3c3_Tt(n,Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},T),{created_at:T.ts,message_id:I.parentMessageId,channel_url:I.channelUrl,channel_type:I.channelType,file:T.file,url:null===(_=T.file)||void 0===_?void 0:_.url,require_auth:null===(b=T.file)||void 0===b?void 0:b.require_auth}))))}return I}return Object(_bundle_0b1520ed["fc" /* c */])(s,i),s.payloadify=function(n){var r;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},i.payloadify.call(this,n)),{url:n.plainUrl,require_auth:n.requireAuth,file:{name:n.name,size:n.size,type:n.type,data:n.data},thumbnails:null===(r=n.thumbnails)||void 0===r?void 0:r.map((function(e){return{url:e.plainUrl,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),message_survival_seconds:n.messageSurvivalSeconds,parent_message_info:n.parentMessage?i._getParentMessageInfoPayload.call(this,n.parentMessage):null})))},Object.defineProperty(s.prototype,"url",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),s.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_pt),t),Object(_bundle_0b1520ed["zc" /* w */])(this.messageId>0&&Object(_bundle_0b1520ed["C" /* a */])("number",e)&&_bundle_dc8db3c3_mt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},s}(_bundle_dc8db3c3_ft),_bundle_dc8db3c3_St=function(e){function t(t,n){var r=n.file,i=n.fileUrl,s=n.fileName,a=n.fileSize,o=n.mimeType,u=n.thumbnailSizes,c=n._uploadedMetaData,l=n._thumbnails,d=e.call(this,t)||this;return d._plainUrl=i,d.file=r,d.fileName=s,d.fileSize=a,d.mimeType=o,d.thumbnailSizes=u,d._uploadedMetaData=c,d._thumbnails=l,d}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.getPlainUrl=function(e){return e instanceof t?e._plainUrl:e.fileUrl},Object.defineProperty(t.prototype,"fileUrl",{get:function(){var e,t=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager;return this._plainUrl&&(null===(e=this._uploadedMetaData)||void 0===e?void 0:e.requireAuth)&&t.ekey?"".concat(this._plainUrl,"?auth=").concat(t.ekey):this._plainUrl},set:function(e){this._plainUrl=e},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return{file:this.file,fileUrl:this._plainUrl,fileName:this.fileName,fileSize:this.fileSize,mimeType:this.mimeType,thumbnailSizes:this.thumbnailSizes,_thumbnails:this._thumbnails,_uploadedMetaData:this._uploadedMetaData}},t}(_bundle_0b1520ed["mb" /* ae */]),_bundle_dc8db3c3_Mt=function(n){function i(r){var i,s,a,o,u=[];return r.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(r.mentionedUserIds?u=r.mentionedUserIds:r.mentionedUsers&&(u=r.mentionedUsers.map((function(e){return e.userId})))),n.call(this,{code:"FILE",ackRequired:!0,payload:Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({channel_url:r.channelUrl,files:r.files?kt(r.files):null,url:r.url,name:null!==(i=r.fileName)&&void 0!==i?i:"",type:null!==(s=r.mimeType)&&void 0!==s?s:"",size:null!==(a=r.fileSize)&&void 0!==a?a:0,custom:r.data,custom_type:r.customType,thumbnails:null===(o=r._thumbnails)||void 0===o?void 0:o.map((function(e){return _bundle_dc8db3c3_ke.payloadify(e)})),require_auth:r.requireAuth,metaarray:r.metaArrays,mention_type:r.mentionType,mentioned_user_ids:u,push_option:r.pushNotificationDeliveryOption&&r.pushNotificationDeliveryOption!==_bundle_0b1520ed["Ab" /* as */].DEFAULT?r.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:r.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(r.appleCriticalAlertOptions):null,silent:r.silent,reply_to_channel:r.isReplyToChannel,parent_message_id:r.parentMessageId?r.parentMessageId:null,req_id:r.reqId,pin_message:r.isPinnedMessage}))})||this}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i}(_bundle_0b1520ed["rb" /* aj */]),_bundle_dc8db3c3_Ut=function(n){function s(r){var s,a,o=this;o=n.call(this)||this;var u=[];return r.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(r.mentionedUserIds?u=r.mentionedUserIds:r.mentionedUsers&&(u=r.mentionedUsers.map((function(e){return e.userId})))),o.method=_bundle_0b1520ed["b" /* A */].POST,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(r.channelType),"/").concat(encodeURIComponent(r.channelUrl),"/messages"),o.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({message_type:_bundle_0b1520ed["ob" /* ag */].FILE,user_id:r.userId,files:r.files?kt(r.files):null,url:r.fileUrl,mention_type:r.mentionType,mentioned_user_ids:u,file_name:r.fileName,file_size:r.fileSize,file_type:r.mimeType,data:r.data,custom_type:r.customType,thumbnails:null===(s=r._thumbnails)||void 0===s?void 0:s.map((function(e){return _bundle_dc8db3c3_ke.payloadify(e)})),require_auth:r.requireAuth,sorted_metaarray:null===(a=r.metaArrays)||void 0===a?void 0:a.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})),push_option:r.pushNotificationDeliveryOption,parent_message_id:r.parentMessageId?r.parentMessageId:null,apple_critical_alert_options:r.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(r.appleCriticalAlertOptions):null,reply_to_channel:r.isReplyToChannel,req_id:r.reqId,pin_message:r.isPinnedMessage})),o}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_At=function(e){function t(t,r,i){var s,a,o,u,c=this;(c=e.call(this,t,"FILE",i)||this).message=i.files&&i.files.length>=2?new _bundle_dc8db3c3_bt(t,i):new wt(t,i);var l=_bundle_0b1520ed["w" /* V */].of(t).sdkState;return c.isMentioned=Object(_bundle_0b1520ed["Bb" /* at */])(c.message.mentionType,null!==(o=null!==(s=c.message.mentionedUserIds)&&void 0!==s?s:null===(a=c.message.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})))&&void 0!==o?o:[],l.userId),c.forceUpdateLastMessage=null!==(u=i.force_update_last_message)&&void 0!==u&&u,c}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_dc8db3c3_Nt=function(e){function t(t,r){var i,s,a,o,u=this;(u=e.call(this,t,r)||this).message=r.files&&r.files.length>=2?new _bundle_dc8db3c3_bt(t,r):new wt(t,r);var c=_bundle_0b1520ed["w" /* V */].of(t).sdkState;return u.isMentioned=Object(_bundle_0b1520ed["Bb" /* at */])(u.message.mentionType,null!==(a=null!==(i=u.message.mentionedUserIds)&&void 0!==i?i:null===(s=u.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})))&&void 0!==a?a:[],c.userId),u.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,u}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]);function kt(n){return n.map((function(n){var r,i;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({url:_bundle_dc8db3c3_St.getPlainUrl(n),file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:null===(r=n._thumbnails)||void 0===r?void 0:r.map((function(e){return _bundle_dc8db3c3_ke.payloadify(e)})),require_auth:null===(i=n._uploadedMetaData)||void 0===i?void 0:i.requireAuth}))}))}var _bundle_dc8db3c3_Ct;!function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"}(_bundle_dc8db3c3_Ct||(_bundle_dc8db3c3_Ct={}));var Pt=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,a=t.cacheContext,o=this;this._queueMap=new Map,this._iid=e,this._sdkState=n,this._requestQueue=i,this._cacheContext=a,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof _bundle_0b1520ed["e" /* D */]&&(o._connectionState=e.stateType)})),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===_bundle_0b1520ed["g" /* F */].CONNECTED||this._connectionState===_bundle_0b1520ed["g" /* F */].CONNECTING||this._connectionState===_bundle_0b1520ed["g" /* F */].RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return n=this._createSendFileMessageRequestParams(e,t),this._shouldSendThroughWebSocket?(r=new _bundle_dc8db3c3_Mt(n),[4,this._requestQueue.send(r)]):[3,2];case 1:return i=s.sent(),[2,i.as(_bundle_dc8db3c3_At).message];case 2:return r=new _bundle_dc8db3c3_Ut(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n),{userId:this._sdkState.userId})),[4,this._requestQueue.send(r)];case 3:return i=s.sent(),[2,i.as(_bundle_dc8db3c3_Nt).message]}}))}))},e.prototype._createSendFileMessageRequestParams=function(e,t){var n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},t.params),{channelUrl:e.url,channelType:e.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var r=t.params;n.files=r.fileInfoList}else{r=t.params;n.url=r.fileUrl,n.requireAuth=r.requireAuth}return n},e.prototype._resolveMessageQueue=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l,d,h,f,p;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(m){switch(m.label){case 0:if(!(n=this._queueMap.get(e.url)))return[3,21];if(n.isResolving)return[3,20];n.isResolving=!0,r=[],i=!0,m.label=1;case 1:m.trys.push([1,15,16,17]),s=Object(_bundle_0b1520ed["wc" /* t */])(n.messageQueue),a=s.next(),m.label=2;case 2:if(a.done)return[3,14];switch(o=a.value,o.state){case _bundle_dc8db3c3_Ct.PENDING:case _bundle_dc8db3c3_Ct.UPLOADING:return[3,3];case _bundle_dc8db3c3_Ct.UPLOADED:return[3,4];case _bundle_dc8db3c3_Ct.FAILED:return[3,12]}return[3,13];case 3:return i=!1,r.push(o),[3,13];case 4:if(!i)return[3,10];m.label=5;case 5:return m.trys.push([5,8,,9]),o.state=_bundle_dc8db3c3_Ct.SENDING,[4,this._sendFileMessage(e,o)];case 6:return u=m.sent(),o.deferred.resolve(u),[4,Object(_bundle_0b1520ed["Db" /* av */])(100)];case 7:return m.sent(),[3,9];case 8:return c=m.sent(),o.deferred.reject(c),[3,9];case 9:return[3,11];case 10:r.push(o),m.label=11;case 11:return[3,13];case 12:return l=null!==(t=o.error)&&void 0!==t?t:_bundle_0b1520ed["vc" /* s */].unknown,o.deferred.reject(l.code===_bundle_0b1520ed["I" /* a8 */].REQUEST_CANCELED?_bundle_0b1520ed["vc" /* s */].fileUploadCanceled:l),[3,13];case 13:return a=s.next(),[3,2];case 14:return[3,17];case 15:return d=m.sent(),f={error:d},[3,17];case 16:try{a&&!a.done&&(p=s.return)&&p.call(s)}finally{if(f)throw f.error}return[7];case 17:return h=n.isResolveRequestPending,n.messageQueue=r,n.isResolving=!1,n.isResolveRequestPending=!1,h?[4,this._resolveMessageQueue(e)]:[3,19];case 18:m.sent(),m.label=19;case 19:return[3,21];case 20:n.isResolveRequestPending=!0,m.label=21;case 21:return[2]}}))}))},e.prototype._uploadNextPendingItem=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l,d;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return(n=this._queueMap.get(e.url))&&(r=n.messageQueue.find((function(e){return e.state===_bundle_dc8db3c3_Ct.PENDING})))?r.multipleFileUploadInfo?(i=r.multipleFileUploadInfo,s=i.uploadIndex,a=i.uploadCount,o=i.requestHandler,d=r.params,u=d.fileInfoList[s],!Object(_bundle_0b1520ed["lc" /* i */])(u.file)||(null===(t=u._uploadedMetaData)||void 0===t?void 0:t.isUploaded)?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]):[3,4]:[3,9];case 1:return h.sent(),[3,3];case 2:r.state=s<a-1?_bundle_dc8db3c3_Ct.PENDING:_bundle_dc8db3c3_Ct.UPLOADED,h.label=3;case 3:return c=d.fileInfoList[s],l=r.multipleFileUploadInfo.uploadIndex++,r.multipleFileUploadInfo.isCopy||null==o||o._triggerOnFileUploaded(r.requestId,l,c,r.error),[3,7];case 4:return d=r.params,Object(_bundle_0b1520ed["lc" /* i */])(d.file)?[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]:[3,6];case 5:return h.sent(),[3,7];case 6:d.thumbnailSizes=[],r.state=_bundle_dc8db3c3_Ct.UPLOADED,h.label=7;case 7:return this._uploadNextPendingItem(e),[4,this._resolveMessageQueue(e)];case 8:h.sent(),h.label=9;case 9:return[2]}}))}))},e.prototype._tryUploadNextItemAndUpdateItemState=function(e,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(i=l.sent(),!_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager.currentUser||!i)return r.error=_bundle_0b1520ed["vc" /* s */].connectionRequired,r.state=_bundle_dc8db3c3_Ct.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];r.state=_bundle_dc8db3c3_Ct.UPLOADING,t.uploadQueue.push(r),l.label=2;case 2:return l.trys.push([2,7,,8]),r.multipleFileUploadInfo?(s=r.multipleFileUploadInfo,a=s.uploadIndex,o=s.uploadCount,u=r.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(e,r,u)]):[3,4];case 3:return l.sent(),r.state=a<o-1?_bundle_dc8db3c3_Ct.PENDING:_bundle_dc8db3c3_Ct.UPLOADED,[3,6];case 4:return u=r.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(e,r,u)];case 5:l.sent(),r.state=_bundle_dc8db3c3_Ct.UPLOADED,l.label=6;case 6:return[3,8];case 7:switch((c=l.sent()).code){case _bundle_0b1520ed["I" /* a8 */].REQUEST_FAILED:r.error=new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].NETWORK_ERROR,message:"Failed to upload a file."});break;case _bundle_0b1520ed["I" /* a8 */].REQUEST_CANCELED:r.error=_bundle_0b1520ed["vc" /* s */].fileUploadCanceled;break;default:r.error=c}return r.state=_bundle_dc8db3c3_Ct.FAILED,[3,8];case 8:this._dequeueUploadItem(t,r),l.label=9;case 9:return[2]}}))}))},e.prototype._dequeueUploadItem=function(e,t){var n=e.uploadQueue.findIndex((function(e){return e.requestId===t.requestId}));n>=0&&e.uploadQueue.splice(n,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(e,t,n){var r,i,s;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var a,o,u,c,l,d,h,f,p,m;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(v){switch(v.label){case 0:return a=new _bundle_dc8db3c3_Ce({file:n.file,channelUrl:e.url,thumbnailSizes:n.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(a)];case 1:return o=v.sent(),u=o.as(_bundle_dc8db3c3_Pe),c=u.url,l=u.fileSize,d=void 0===l?n.fileSize:l,h=u.thumbnails,f=void 0===h?[]:h,p=u.requireAuth,m=void 0!==p&&p,n.fileName=null!==(r=n.fileName)&&void 0!==r?r:n.file.name,n.mimeType=null!==(i=n.mimeType)&&void 0!==i?i:n.file.type,n.fileSize=null!==(s=n.fileSize)&&void 0!==s?s:n.file.size,n.fileUrl=c,n.fileSize=d,n.requireAuth=m,n._thumbnails=f,[2]}}))}))},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(e,t,n){var r,i,s;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var a,o,c,l,d,h,f,p,m,v,y;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(_){switch(_.label){case 0:return a=t.multipleFileUploadInfo.uploadIndex,o=n.fileInfoList[a],c=new _bundle_dc8db3c3_Ce({file:o.file,channelUrl:e.url,thumbnailSizes:o.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(c)];case 1:return l=_.sent(),d=l.as(_bundle_dc8db3c3_Pe),h=d.url,f=d.fileSize,p=void 0===f?o.fileSize:f,m=d.thumbnails,v=d.requireAuth,y=void 0!==v&&v,o.fileName=null!==(r=o.fileName)&&void 0!==r?r:o.file.name,o.mimeType=null!==(i=o.mimeType)&&void 0!==i?i:o.file.type,o.fileSize=null!==(s=o.fileSize)&&void 0!==s?s:o.file.size,o.file=void 0,o.fileUrl=h,o.fileSize=p,o._thumbnails=m,o._uploadedMetaData=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},o._uploadedMetaData),{requireAuth:y,isUploaded:!0}),o instanceof _bundle_dc8db3c3_St||(n.fileInfoList[a]=new _bundle_dc8db3c3_St(this._iid,o)),[2]}}))}))},e.prototype.request=function(e,t,n,r){return void 0===r&&(r={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){return this._queueMap.has(e.url)||(i={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(e.url,i)),s=this._queueMap.get(e.url),a=new _bundle_0b1520ed["Eb" /* aw */],o={requestId:t,params:n,state:_bundle_dc8db3c3_Ct.PENDING,deferred:a},function(e){return"fileInfoList"in e}(n)&&(c=Object(_bundle_0b1520ed["jc" /* g */])({uploadIndex:0,uploadCount:n.fileInfoList.length},r),o.multipleFileUploadInfo=c),s.messageQueue.push(o),this._uploadNextPendingItem(e),[2,a.promise]}))}))},e.prototype.cancel=function(e,t){var n,r,i=this._queueMap.get(e.url);if(i){var s=t?[i.messageQueue.find((function(e){return e.requestId===t}))]:Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(i.messageQueue),!1);try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(s),o=a.next();!o.done;o=a.next()){var u=o.value;if(u)switch(u.state){case _bundle_dc8db3c3_Ct.PENDING:if(u.state=_bundle_dc8db3c3_Ct.FAILED,u.error=_bundle_0b1520ed["vc" /* s */].requestCanceled,u.multipleFileUploadInfo&&!u.multipleFileUploadInfo.isCopy){var c=u.multipleFileUploadInfo,l=c.uploadIndex,d=c.requestHandler,h=u.params.fileInfoList[l];null==d||d._triggerOnFileUploaded(u.requestId,l,h,_bundle_0b1520ed["vc" /* s */].fileUploadCanceled)}this._resolveMessageQueue(e);break;case _bundle_dc8db3c3_Ct.UPLOADING:this._requestQueue.cancel(u.requestId),this._dispatcher.dispatch(new _bundle_0b1520ed["Cb" /* au */]({requestId:u.requestId}))}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}else t&&(this._requestQueue.cancel(t),this._dispatcher.dispatch(new _bundle_0b1520ed["Cb" /* au */]({requestId:t})))},e}();var Ot,_bundle_dc8db3c3_Rt={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:_bundle_0b1520ed["xb" /* ap */].ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:_bundle_0b1520ed["Fb" /* ax */].NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},xt=function(e){return Object(_bundle_0b1520ed["C" /* a */])("number",e.prevResultSize)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.nextResultSize)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isInclusive)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.reverse)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.messageTypeFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["xb" /* ap */],e.messageTypeFilter)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.customTypesFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.senderUserIdsFilter,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["Fb" /* ax */],e.replyType)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeMetaArray)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeReactions)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeParentMessageInfo)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeThreadInfo)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.showSubchannelMessagesOnly)},_bundle_dc8db3c3_Dt={replyType:_bundle_0b1520ed["Fb" /* ax */].NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Lt=function(e){return Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["Fb" /* ax */],e.replyType)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeReactions)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeMetaArray)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeParentMessageInfo)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeThreadInfo)},Ft=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.includeMetaArray,o=t.includeReactions,u=t.includeThreadInfo,c=t.includeParentMessageInfo,l=e.call(this)||this;return l.method=_bundle_0b1520ed["b" /* A */].GET,l.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(s)),l.params={is_sdk:!0,with_sorted_meta_array:a,include_reactions:o,include_thread_info:u,include_parent_message_info:c,include_poll_details:!0},l}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),qt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?_bundle_dc8db3c3_Tt(t,Object(_bundle_0b1520ed["jc" /* g */])({},n)):null,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_zt=function(n){function s(r){var s=r.channelType,a=r.channelUrl,o=r.timestamp,u=r.token,c=r.prevResultSize,l=r.nextResultSize,d=r.isInclusive,h=r.reverse,f=r.messageTypeFilter,p=r.customTypesFilter,m=r.senderUserIdsFilter,v=r.replyType,y=r.includeMetaArray,_=r.includeReactions,g=r.parentMessageId,b=r.includeThreadInfo,I=r.includeParentMessageInfo,E=r.showSubchannelMessagesOnly,T=r.checkingHasNext,S=r.checkingContinuousMessages,M=n.call(this)||this;return M.method=_bundle_0b1520ed["b" /* A */].GET,M.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(a),"/messages"),M.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({is_sdk:!0,prev_limit:c,next_limit:l,include:d,reverse:h,message_ts:o,message_id:u,message_type:null!=f?f:null,custom_types:p,sender_ids:m,include_reply_type:v,with_sorted_meta_array:y,include_reactions:_,parent_message_id:g,include_thread_info:b,include_parent_message_info:I,show_subchannel_message_only:E,include_poll_details:!0,checking_has_next:T,checking_continuous_messages:S})),M}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),Bt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return void 0!==n.is_continuous_messages&&(r.isContinuousMessages=n.is_continuous_messages),void 0!==n.has_next&&(r.hasNext=n.has_next),r.messages=n.messages.map((function(e){return _bundle_dc8db3c3_Tt(t,e)})),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_Kt=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.timestamp,a=t.token,o=t.replyType,u=t.includeMetaArray,c=t.includeReactions,l=t.includeThreadInfo,d=t.includeParentMessageInfo,h=e.call(this)||this;return h.method=_bundle_0b1520ed["b" /* A */].GET,h.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/changelogs"),h.params={change_ts:s,token:a,with_sorted_meta_array:u,include_reactions:c,include_thread_info:l,include_reply_type:o,include_parent_message_info:d,include_poll_details:!0},h}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedMessages=n.updated.map((function(e){return _bundle_dc8db3c3_Tt(t,e)})),r.deletedMessagesInfo=n.deleted.map((function(e){return{messageId:e.message_id,deletedAt:e.deleted_at}})),r.hasMore=n.has_more,r.nextToken=n.next,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_Qt=function(e){function t(t){var n=t.channelUrl,r=t.scheduledMessageId,s=e.call(this)||this;return s.method=_bundle_0b1520ed["b" /* A */].GET,s.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(n),"/scheduled_messages/").concat(encodeURIComponent(r)),s.params={},s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Gt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?_bundle_dc8db3c3_Tt(t,Object(_bundle_0b1520ed["jc" /* g */])({},n)):null,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]);!function(e){e.MUTED="muted",e.BANNED="banned"}(Ot||(Ot={}));var Vt=function(){function n(e){var t,n,r,i;this.restrictionType=null,Object(_bundle_0b1520ed["y" /* X */])(Ot,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(t=e.description)&&void 0!==t?t:null,this.endAt=null!==(r=null!==(n=e.end_at)&&void 0!==n?n:e.muted_end_at)&&void 0!==r?r:-1,this.remainingDuration=null!==(i=e.remaining_duration)&&void 0!==i?i:-1}return n.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({restriction_type:n.restrictionType,description:n.description,end_at:n.endAt,remaining_duration:n.remainingDuration}))},n}(),Ht=function(n){function i(e,t){var r=n.call(this,e,t)||this;return r.restrictionInfo=new Vt(t),r}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i.payloadify=function(r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n.payloadify.call(this,r)),Vt.payloadify(r.restrictionInfo))))},i}(_bundle_0b1520ed["v" /* U */]),_bundle_dc8db3c3_Wt=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).isMuted=!1,i.isMuted=null!==(r=n.is_muted)&&void 0!==r&&r,i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["v" /* U */]),_bundle_dc8db3c3_Yt=function(){function e(){this._onPending=_bundle_0b1520ed["Gb" /* ay */],this._onFailed=_bundle_0b1520ed["Gb" /* ay */],this._onSucceeded=_bundle_0b1520ed["Gb" /* ay */]}return e.prototype._trigger=function(e){switch(null==e?void 0:e.sendingStatus){case _bundle_0b1520ed["vb" /* an */].PENDING:0===e.errorCode&&this._onPending(e);break;case _bundle_0b1520ed["vb" /* an */].SCHEDULED:case _bundle_0b1520ed["vb" /* an */].SUCCEEDED:this._onSucceeded(e)}},e.prototype._triggerFailed=function(e,t){switch(null==t?void 0:t.sendingStatus){case _bundle_0b1520ed["vb" /* an */].FAILED:case _bundle_0b1520ed["vb" /* an */].CANCELED:this._onFailed(e,t.scheduledInfo?null:t)}},e.prototype.onPending=function(e){return this._onPending=e,this},e.prototype.onFailed=function(e){return this._onFailed=e,this},e.prototype.onSucceeded=function(e){return this._onSucceeded=e,this},e}(),_bundle_dc8db3c3_Jt={data:void 0,customType:void 0,mentionType:_bundle_0b1520ed["qb" /* ai */].USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1},_bundle_dc8db3c3_Xt=function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.data,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.customType,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["qb" /* ai */],e.mentionType)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.mentionedUserIds,!0)&&Object(_bundle_0b1520ed["r" /* Q */])(_bundle_0b1520ed["v" /* U */],e.mentionedUsers,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.mentionedMessageTemplate,!0)&&Object(_bundle_0b1520ed["r" /* Q */])(_bundle_dc8db3c3_je,e.metaArrays,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.parentMessageId,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isReplyToChannel)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["Ab" /* as */],e.pushNotificationDeliveryOption,!0)&&Object(_bundle_0b1520ed["C" /* a */])(_bundle_dc8db3c3_qe,e.appleCriticalAlertOptions,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isPinnedMessage,!0)},_bundle_dc8db3c3_Zt=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},_bundle_dc8db3c3_$t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Jt),{message:"",translationTargetLanguages:void 0,pollId:void 0,extendedMessagePayload:void 0});function _bundle_dc8db3c3_en(e){var n,r,i;return null!==(n=e.messageParams)&&void 0!==n?n:Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{mentionType:e.mentionType,mentionedUserIds:null!==(r=e.mentionedUserIds)&&void 0!==r?r:null===(i=e.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:_bundle_0b1520ed["Ab" /* as */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var _bundle_dc8db3c3_tn,_bundle_dc8db3c3_nn=function(n){var r;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({data:n.data,customType:n.customType,mentionType:n.mentionType,mentionedUsers:n.mentionedUsers,mentionedUserIds:n.mentionedUserIds,mentionedMessageTemplate:n.mentionedMessageTemplate,metaArrays:n.metaArrays,pollId:null===(r=n.poll)||void 0===r?void 0:r.id,parentMessageId:n.parentMessageId,appleCriticalAlertOptions:n.appleCriticalAlertOptions,message:n.message,translationTargetLanguages:Object.keys(n.translations),extendedMessagePayload:n.extendedMessagePayload}))},_bundle_dc8db3c3_rn=function(e){return _bundle_dc8db3c3_Xt(e)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.message)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.translationTargetLanguages,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.pollId,!0)&&Object(_bundle_0b1520ed["C" /* a */])("object",e.extendedMessagePayload,!0)};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(_bundle_dc8db3c3_tn||(_bundle_dc8db3c3_tn={}));var _bundle_dc8db3c3_sn=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},_bundle_dc8db3c3_an=function(e){return e===_bundle_dc8db3c3_tn.BLOB||e===_bundle_dc8db3c3_tn.FILE},_bundle_dc8db3c3_on=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},_bundle_dc8db3c3_un=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Jt),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1});function _bundle_dc8db3c3_cn(e){var n,r,i,s;return null!==(n=e.messageParams)&&void 0!==n?n:Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:null!==(r=e.mentionedUserIds)&&void 0!==r?r:null===(i=e.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),pushNotificationDeliveryOption:_bundle_0b1520ed["Ab" /* as */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(s=e.thumbnails)||void 0===s?void 0:s.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:e.requireAuth,isPinnedMessage:!1,_thumbnails:e.thumbnails}))}var _bundle_dc8db3c3_ln,_bundle_dc8db3c3_dn=function(n,r){var i;return n.messageParams?(!n.url&&Object(_bundle_0b1520ed["lc" /* i */])(r)&&(n.messageParams.file=r),n.messageParams):Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({data:n.data,customType:n.customType,mentionType:n.mentionType,mentionedUsers:n.mentionedUsers,mentionedUserIds:n.mentionedUserIds,metaArrays:n.metaArrays,parentMessageId:n.parentMessageId,appleCriticalAlertOptions:n.appleCriticalAlertOptions,file:r,fileUrl:n.url,fileName:n.name,fileSize:n.size,mimeType:n.type,thumbnailSizes:null===(i=n.thumbnails)||void 0===i?void 0:i.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))}))},_bundle_dc8db3c3_hn=function(e){return _bundle_dc8db3c3_Xt(e)&&(Object(_bundle_0b1520ed["lc" /* i */])(e.file)||Object(_bundle_0b1520ed["C" /* a */])("string",e.fileUrl))&&Object(_bundle_0b1520ed["C" /* a */])("string",e.fileName,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.mimeType,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return Object(_bundle_0b1520ed["C" /* a */])("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},fn={data:void 0,customType:void 0,mentionType:_bundle_0b1520ed["qb" /* ai */].USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},_bundle_dc8db3c3_pn=function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.data,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.customType,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["qb" /* ai */],e.mentionType)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.mentionedUserIds,!0)&&Object(_bundle_0b1520ed["r" /* Q */])(_bundle_0b1520ed["v" /* U */],e.mentionedUsers,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.mentionedMessageTemplate,!0)&&Object(_bundle_0b1520ed["r" /* Q */])(_bundle_dc8db3c3_je,e.metaArrays,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["Ab" /* as */],e.pushNotificationDeliveryOption,!0)&&Object(_bundle_0b1520ed["C" /* a */])(_bundle_dc8db3c3_qe,e.appleCriticalAlertOptions,!0)},_bundle_dc8db3c3_mn=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},fn),{message:void 0,translationTargetLanguages:void 0,pollId:void 0}),vn=function(e){return _bundle_dc8db3c3_pn(e)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.message,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.translationTargetLanguages,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.pollId,!0)},_bundle_dc8db3c3_yn=Object(_bundle_0b1520ed["jc" /* g */])({},fn),_bundle_dc8db3c3_n=function(e){function t(t){var n=t.channelUrl,r=t.channelType,s=t.token,a=t.limit,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].GET,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(r),"/").concat(encodeURIComponent(n),"/operators"),o.params={token:s,limit:a},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_gn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),r.token=n.next,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_bn=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new _bundle_dc8db3c3_n(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(r)]):[3,2]):[3,5];case 1:return i=c.sent(),s=i.as(_bundle_dc8db3c3_gn),a=s.operators,o=s.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,a];case 2:return[2,e];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_0b1520ed["Hb" /* az */]),_bundle_dc8db3c3_In=function(e){function n(t,n,r,i){var s,a,o,u,c,l,d,h,f,p,m=this;return(m=e.call(this,t,n,r,i)||this).reverse=!1,m.messageTypeFilter=_bundle_0b1520ed["xb" /* ap */].ALL,m.customTypesFilter=null,m.senderUserIdsFilter=null,m.replyType=_bundle_0b1520ed["Fb" /* ax */].NONE,m.includeMetaArray=!1,m.includeReactions=!1,m.includeParentMessageInfo=!1,m.includeThreadInfo=!1,m.showSubchannelMessagesOnly=!1,m._edge=Number.MAX_SAFE_INTEGER,m.reverse=null!==(s=i.reverse)&&void 0!==s&&s,m.messageTypeFilter=null!==(a=i.messageTypeFilter)&&void 0!==a?a:_bundle_0b1520ed["xb" /* ap */].ALL,m.customTypesFilter=null!==(o=i.customTypesFilter)&&void 0!==o?o:null,m.senderUserIdsFilter=null!==(u=i.senderUserIdsFilter)&&void 0!==u?u:null,m.replyType=null!==(c=i.replyType)&&void 0!==c?c:_bundle_0b1520ed["Fb" /* ax */].NONE,m.includeMetaArray=null!==(l=i.includeMetaArray)&&void 0!==l&&l,m.includeReactions=null!==(d=i.includeReactions)&&void 0!==d&&d,m.includeParentMessageInfo=null!==(h=i.includeParentMessageInfo)&&void 0!==h&&h,m.includeThreadInfo=null!==(f=i.includeThreadInfo)&&void 0!==f&&f,m.showSubchannelMessagesOnly=null!==(p=i.showSubchannelMessagesOnly)&&void 0!==p&&p,m}return Object(_bundle_0b1520ed["fc" /* c */])(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.reverse)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["xb" /* ap */],this.messageTypeFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["Fb" /* ax */],this.replyType)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.customTypesFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.senderUserIdsFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeMetaArray)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeReactions)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeParentMessageInfo)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeThreadInfo)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,js.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,Object(_bundle_0b1520ed["xc" /* u */])({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return e=n.sent(),this._edge=Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([Number.MAX_SAFE_INTEGER],Object(_bundle_0b1520ed["tc" /* q */])(e.map((function(e){return e.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_0b1520ed["Hb" /* az */]),_bundle_dc8db3c3_En=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.limit,o=t.token;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:a,token:o},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_Tn=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.mutedUsers=[];var i=n.next,s=n.muted_list;return r.token=i,s&&s.length>0&&(r.mutedUsers=s.map((function(e){return new Ht(t,e)}))),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_wn=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new _bundle_dc8db3c3_En(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=o.sent(),i=r.as(_bundle_dc8db3c3_Tn),s=i.mutedUsers,a=i.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_0b1520ed["Hb" /* az */]),_bundle_dc8db3c3_Sn=function(t){function n(n){var r=this,s=n.channelUrl,a=n.channelType,o=n.limit,u=n.token;return(r=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(a),"/").concat(encodeURIComponent(s),"/ban"),r.params=Object(_bundle_0b1520ed["hc" /* e */])({limit:o,token:u}),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_Mn=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.bannedUsers=[];var i=n.next,s=n.banned_list;return r.token=i,s&&s.length>0&&(r.bannedUsers=s.map((function(e){return new Ht(t,e.user)}))),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_Un=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new _bundle_dc8db3c3_Sn(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=o.sent(),i=r.as(_bundle_dc8db3c3_Mn),s=i.bannedUsers,a=i.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_0b1520ed["Hb" /* az */]);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(_bundle_dc8db3c3_ln||(_bundle_dc8db3c3_ln={}));var _bundle_dc8db3c3_An=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.operatorUserIds;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:a},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_dc8db3c3_Nn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.operatorUserIds;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:a},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){return e.call(this,t,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var kn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.userId;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/mute/").concat(a),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_Cn=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=0,r.endAt=0;var i=n.is_muted,s=n.start_at,a=n.end_at,o=n.remaining_duration,u=n.description;return r.isMuted=i,r.startAt=s,r.endAt=a,r.remainingDuration=o,r.description=u,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Pn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.keys;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:a,include_ts:!0},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),On=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.metadata,s=n.ts;return r.metadata=i,r.ts=s,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Rn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.metadata;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:a,include_ts:!0},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),xn=function(e){function t(t,n){var r,i,s=this;return(s=e.call(this,t,n)||this).metaData=null!==(r=n.metadata)&&void 0!==r?r:{},s.ts=null!==(i=n.ts)&&void 0!==i?i:null,s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_Dn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.metadata,o=t.upsert;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:a,include_ts:!0,upsert:null!=o&&o},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_Ln=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.metadata,s=n.ts;return r.metadata=i,r.ts=s,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Fn=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),qn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.key;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metadata/").concat(a),n.params={include_ts:!0},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),zn=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.ts;return r.ts=i,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Bn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Kn=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.ts;return r.ts=i,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),jn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.keys;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:a},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Qn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Gn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.metaCounter;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:a},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Vn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Hn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.metaCounter,o=t.upsert,u=void 0!==o&&o,c=t.mode,l=void 0===c?"set":c;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:a,upsert:u,mode:l},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Wn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Yn=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),Jn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.key;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metacounter/").concat(a),n.params={},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){return e.call(this,t,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var Xn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var Zn=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.userId,o=t.seconds,u=t.description;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:a,seconds:o,description:u},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){return e.call(this,t,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var $n=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Ht(t,r.data),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),er=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.userId;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(a)),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var tr=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Ht(t,r.data),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),nr=function(t){function n(n){var r=this,s=n.channelUrl,a=n.channelType,o=n.userId,u=n.seconds,c=n.description;return(r=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,r.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(a),"/").concat(encodeURIComponent(s),"/ban"),r.params=Object(_bundle_0b1520ed["hc" /* e */])({user_id:o,seconds:u,description:c}),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var rr=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Ht(t,r.data),r.data.member_count&&(i.memberCount=r.data.member_count),r.data.joined_member_count&&(i.joinedMemberCount=r.data.joined_member_count),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),ir=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.userId;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(a)),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var sr=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Ht(t,r.data),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),ar=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.freezing;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:a},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var or=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.freeze=r.data.freeze,i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),ur=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.category,o=t.userId,u=t.description;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(Object(_bundle_0b1520ed["J" /* aA */])(s),"/").concat(encodeURIComponent(r)),n.params={report_category:a,reporting_user_id:o,report_description:u},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),cr=function(e){function t(t){var n=this,r=t.channelUrl,s=t.channelType,a=t.category,o=t.userId,u=t.offendingUserId,c=t.description;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(_bundle_0b1520ed["K" /* aB */],"/users/").concat(u),n.params={channel_url:r,channel_type:s===_bundle_0b1520ed["d" /* C */].OPEN?"open_channels":"group_channels",report_category:a,reporting_user_id:o,report_description:c},n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),lr=function(t){function n(n){var r=this,s=n.channelUrl,a=n.channelType,o=n.category,u=n.userId,c=n.offendingUserId,l=n.messageId,d=n.description,h=n.messageToken;return(r=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,r.path="".concat(Object(_bundle_0b1520ed["J" /* aA */])(a),"/").concat(encodeURIComponent(s),"/messages/").concat(l),r.params=Object(_bundle_0b1520ed["hc" /* e */])({report_category:o,reporting_user_id:u,report_description:d,offending_user_id:c,mesg_token:h}),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),dr=function(n){function i(r){var i=[];return r.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(r.mentionedUserIds?i=r.mentionedUserIds:r.mentionedUsers&&(i=r.mentionedUsers.map((function(e){return e.userId})))),n.call(this,{code:"MESG",ackRequired:!0,payload:Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({channel_url:r.channelUrl,message:r.message,data:r.data,custom_type:r.customType,metaarray:r.metaArrays,mention_type:r.mentionType,mentioned_user_ids:i,mentioned_message_template:r.mentionedMessageTemplate,target_langs:r.translationTargetLanguages,push_option:r.pushNotificationDeliveryOption&&r.pushNotificationDeliveryOption!==_bundle_0b1520ed["Ab" /* as */].DEFAULT?r.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:r.appleCriticalAlertOptions,silent:r.silent,reply_to_channel:r.isReplyToChannel,parent_message_id:r.parentMessageId?r.parentMessageId:null,req_id:r.reqId,poll_id:r.pollId,pin_message:r.isPinnedMessage,extended_message_payload:r.extendedMessagePayload}))})||this}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i}(_bundle_0b1520ed["rb" /* aj */]),hr=function(e){function t(t,r,i){var s,a,o,u,c=this;(c=e.call(this,t,"MESG",i)||this).message=new _bundle_dc8db3c3_gt(t,i);var l=_bundle_0b1520ed["w" /* V */].of(t).sdkState;return c.isMentioned=Object(_bundle_0b1520ed["Bb" /* at */])(c.message.mentionType,null!==(o=null!==(s=c.message.mentionedUserIds)&&void 0!==s?s:null===(a=c.message.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})))&&void 0!==o?o:[],l.userId),c.forceUpdateLastMessage=null!==(u=i.force_update_last_message)&&void 0!==u&&u,c}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),fr=function(n){function i(r){var i=null;return r.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(r.mentionedUserIds?i=r.mentionedUserIds:r.mentionedUsers&&(i=r.mentionedUsers.map((function(e){return e.userId})))),n.call(this,{code:"MEDI",ackRequired:!0,payload:Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({channel_url:r.channelUrl,msg_id:r.messageId,message:r.message,data:r.data,custom_type:r.customType,metaarray:r.metaArrayParams,mention_type:r.mentionType,mentioned_user_ids:i,mentioned_message_template:r.mentionedMessageTemplate,apple_critical_alert_options:r.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(r.appleCriticalAlertOptions):null,poll_id:r.pollId}))})||this}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i}(_bundle_0b1520ed["rb" /* aj */]),pr=function(e){function i(r,i,s){var a,o,u,c,l,d=this;(d=e.call(this,r,"MEDI",s)||this).message=new _bundle_dc8db3c3_gt(r,s);var h=_bundle_0b1520ed["w" /* V */].of(r).sdkState;return d.mentionCountChange=Object(_bundle_0b1520ed["L" /* aC */])({mentionType:null===(a=s.old_values)||void 0===a?void 0:a.mention_type,mentionedUserIds:null!==(u=null===(o=s.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==u?u:[]},Object(_bundle_0b1520ed["xc" /* u */])({mentionType:d.message.mentionType,mentionedUserIds:null!==(c=d.message.mentionedUserIds)&&void 0!==c?c:null===(l=d.message.mentionedUsers)||void 0===l?void 0:l.map((function(e){return e.userId}))}),h.userId),d}return Object(_bundle_0b1520ed["fc" /* c */])(i,e),i}(_bundle_0b1520ed["x" /* W */]),mr=function(n){function i(r){var i=null;return r.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(r.mentionedUserIds?i=r.mentionedUserIds:r.mentionedUsers&&(i=r.mentionedUsers.map((function(e){return e.userId})))),n.call(this,{code:"FEDI",ackRequired:!0,payload:Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({channel_url:r.channelUrl,msg_id:r.messageId,data:r.data,custom_type:r.customType,metaarray:r.metaArrayParams,mention_type:r.mentionType,mentioned_user_ids:i,apple_critical_alert_options:r.appleCriticalAlertOptions}))})||this}return Object(_bundle_0b1520ed["fc" /* c */])(i,n),i}(_bundle_0b1520ed["rb" /* aj */]),vr=function(e){function i(r,i,s){var a,o,u,c,l,d=this;(d=e.call(this,r,"FEDI",s)||this).message=new wt(r,s);var h=_bundle_0b1520ed["w" /* V */].of(r).sdkState;return d.mentionCountChange=Object(_bundle_0b1520ed["L" /* aC */])({mentionType:null===(a=s.old_values)||void 0===a?void 0:a.mention_type,mentionedUserIds:null!==(u=null===(o=s.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==u?u:[]},Object(_bundle_0b1520ed["xc" /* u */])({mentionType:d.message.mentionType,mentionedUserIds:null!==(c=d.message.mentionedUserIds)&&void 0!==c?c:null===(l=d.message.mentionedUsers)||void 0===l?void 0:l.map((function(e){return e.userId}))}),h.userId),d}return Object(_bundle_0b1520ed["fc" /* c */])(i,e),i}(_bundle_0b1520ed["x" /* W */]),yr=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.reactionKey,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].POST,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(s,"/reactions"),o.params={reaction:a},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),_bundle_dc8db3c3_r=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new _bundle_dc8db3c3_xe(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),gr=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.reactionKey,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].DELETE,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(s,"/reactions"),o.params={reaction:a},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),br=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new _bundle_dc8db3c3_xe(Object(_bundle_0b1520ed["jc" /* g */])({},n)),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Ir=function(e){function t(t){var n=t.channelType,r=t.channelUrl,s=t.messageId,a=t.translationTargetLanguages,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].POST,o.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(s),"/translation"),o.params={target_langs:a},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Er=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new _bundle_dc8db3c3_gt(t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Tr=function(n){function s(r){var s,a=this;a=n.call(this)||this;var o=[];r.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(r.mentionedUserIds?o=r.mentionedUserIds:r.mentionedUsers&&(o=r.mentionedUsers.map((function(e){return e.userId}))));var u=r.channelType,c=r.channelUrl;return a.method=_bundle_0b1520ed["b" /* A */].POST,a.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(u),"/").concat(encodeURIComponent(c),"/scheduled_messages"),a.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({req_id:r.reqId,scheduled_at:r.scheduledAt,message_type:_bundle_0b1520ed["M" /* aD */].USER,message:r.message,custom_type:r.customType,data:r.data,mention_type:r.mentionType,mentioned_user_ids:o,sorted_metaarray:null===(s=r.metaArrays)||void 0===s?void 0:s.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})),apple_critical_alert_options:r.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(r.appleCriticalAlertOptions):null,target_langs:r.translationTargetLanguages,push_option:r.pushNotificationDeliveryOption})),a}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),wr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new _bundle_dc8db3c3_gt(t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Sr=function(e){function n(n){var r,s,a=this;a=e.call(this)||this;var o=[];n.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(n.mentionedUserIds?o=n.mentionedUserIds:n.mentionedUsers&&(o=n.mentionedUsers.map((function(e){return e.userId}))));var u=n.channelType,c=n.channelUrl;return a.method=_bundle_0b1520ed["b" /* A */].POST,a.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(u),"/").concat(encodeURIComponent(c),"/scheduled_messages"),a.params=Object(_bundle_0b1520ed["xc" /* u */])({req_id:n.reqId,scheduled_at:n.scheduledAt,message_type:_bundle_0b1520ed["M" /* aD */].FILE,url:n.fileUrl,file_name:n.fileName,file_size:n.fileSize,file_type:n.mimeType,thumbnails:null===(r=n._thumbnails)||void 0===r?void 0:r.map((function(e){return _bundle_dc8db3c3_ke.payloadify(e)})),custom_type:n.customType,data:n.data,require_auth:n.requireAuth,mention_type:n.mentionType,mentioned_user_ids:o,sorted_metaarray:null===(s=n.metaArrays)||void 0===s?void 0:s.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})),apple_critical_alert_options:n.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(n.appleCriticalAlertOptions):null,push_option:n.pushNotificationDeliveryOption}),a}return Object(_bundle_0b1520ed["fc" /* c */])(n,e),n}(_bundle_0b1520ed["ic" /* f */]),Mr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new wt(t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Ur=function(e){function t(t){var n=t.pollId,r=t.title,s=t.data,a=t.allowUserSuggestion,o=t.allowMultipleVotes,u=t.closeAt,c=e.call(this)||this;return c.method=_bundle_0b1520ed["b" /* A */].PUT,c.path="".concat(_bundle_0b1520ed["O" /* aF */],"/").concat(encodeURIComponent(n)),c.params={title:r,data:s,allow_user_suggestion:a,allow_multiple_votes:o,close_at:u},c}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Ar=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new _bundle_0b1520ed["yb" /* aq */](t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Nr=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].DELETE,r.path="".concat(_bundle_0b1520ed["O" /* aF */],"/").concat(encodeURIComponent(n)),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var kr=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].PUT,r.path="".concat(_bundle_0b1520ed["O" /* aF */],"/").concat(encodeURIComponent(n),"/close"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Cr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new _bundle_0b1520ed["yb" /* aq */](t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Pr=function(e){function t(t){var n=t.channelUrl,r=t.channelType,s=t.pollId,a=t.optionText,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].POST,o.path="".concat(_bundle_0b1520ed["O" /* aF */],"/").concat(encodeURIComponent(s),"/options"),o.params={channel_url:n,channel_type:r,text:a},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Or=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new _bundle_0b1520ed["yb" /* aq */](t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Rr=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,s=t.optionText,a=e.call(this)||this;return a.method=_bundle_0b1520ed["b" /* A */].PUT,a.path="".concat(_bundle_0b1520ed["O" /* aF */],"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),a.params={text:s},a}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),xr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new _bundle_0b1520ed["yb" /* aq */](t,n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Dr=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,s=e.call(this)||this;return s.method=_bundle_0b1520ed["b" /* A */].DELETE,s.path="".concat(_bundle_0b1520ed["O" /* aF */],"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var Lr=function(t){function n(n){var r=n.reqId,i=n.channelType,s=n.channelUrl,a=n.pollId,o=n.pollOptionIds;return t.call(this,{code:"VOTE",ackRequired:!0,payload:Object(_bundle_0b1520ed["hc" /* e */])({req_id:r,channel_type:i===_bundle_0b1520ed["d" /* C */].OPEN?"open_channels":"group_channels",channel_url:s,poll_id:a,option_ids:o})})||this}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["rb" /* aj */]),Fr=function(e){function t(t,n,r){var i=e.call(this,t,"VOTE",r)||this;return i.event=new _bundle_0b1520ed["P" /* aG */](r),i.channelUrl=r.channel_url,i.channelType=r.channel_type,i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),qr=100,zr="GroupChannel",Br="url",Kr=100,jr="Message",Qr="messageId",Gr=100,Vr="NotificationMessage",Hr="notificationId",Wr="Poll",Yr="pollId",Jr=100,Xr="FeedChannel",Zr="url";function $r(e){var n,r,i;return null!==(n=e.messageParams)&&void 0!==n?n:Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{isReplyToChannel:!1,mentionedUserIds:null!==(r=e.mentionedUserIds)&&void 0!==r?r:null===(i=e.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),pushNotificationDeliveryOption:_bundle_0b1520ed["Ab" /* as */].DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map((function(e){var t;return{fileUrl:e.plainUrl,fileName:e.fileName,fileSize:e.fileSize,mimeType:e.mimeType,thumbnailSizes:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),_thumbnails:e.thumbnails,_uploadedMetaData:{requireAuth:e._requireAuth,isUploaded:!0}}}))}))}var ei,ti=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Jt),{fileInfoList:[]}),ni=function(e){return(Object(_bundle_0b1520ed["lc" /* i */])(e.file)||Object(_bundle_0b1520ed["C" /* a */])("string",e.fileUrl))&&Object(_bundle_0b1520ed["C" /* a */])("string",e.fileName,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.mimeType,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.fileSize,!0)&&(void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return e.maxWidth>0&&e.maxHeight>0})))},ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onFileUploaded=_bundle_0b1520ed["Gb" /* ay */],t}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._triggerOnFileUploaded=function(e,t,n,r){this._onFileUploaded(e,t,n,r)},t.prototype.onFileUploaded=function(e){return this._onFileUploaded=e,this},t.prototype.onPending=function(t){return e.prototype.onPending.call(this,t),this},t.prototype.onFailed=function(t){return e.prototype.onFailed.call(this,t),this},t.prototype.onSucceeded=function(t){return e.prototype.onSucceeded.call(this,t),this},t}(_bundle_dc8db3c3_Yt),ii=2;!function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"}(ei||(ei={}));var si,ai=function(i){function s(e,t){var n,r,s,a,o,u,l=this;return(l=i.call(this,e)||this)._name="",l._createdAt=0,l.channelType=_bundle_0b1520ed["d" /* C */].BASE,l.coverUrl="",l.customType="",l.data="",l.isFrozen=!1,l.isEphemeral=!1,l.creator=null,l._messageCollectionLastAccessedAt=0,l._url=t.channel_url,l._name=null!==(n=t.name)&&void 0!==n?n:"",l._createdAt=1e3*t.created_at,l.coverUrl=null!==(r=t.cover_url)&&void 0!==r?r:"",l.customType=null!==(s=t.custom_type)&&void 0!==s?s:"",l.data=null!==(a=t.data)&&void 0!==a?a:"",l.isFrozen=null!==(o=t.freeze)&&void 0!==o&&o,l.isEphemeral=null!==(u=t.is_ephemeral)&&void 0!==u&&u,l.creator=t.created_by?new _bundle_0b1520ed["v" /* U */](l._iid,t.created_by):null,t.metadata&&Object.keys(t.metadata).length>0&&t.ts&&(l._cachedMetaData=new Map,Object.keys(t.metadata).forEach((function(e){l._cachedMetaData.set(e,{value:t.metadata[e],isRemoved:!1,updatedAt:t.ts})}))),l}return Object(_bundle_0b1520ed["fc" /* c */])(s,i),Object.defineProperty(s.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),s.prototype.toJSON=function(){return Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},s.payloadify=function(n){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},i.payloadify.call(this,n)),{channel_url:n.url,name:n.name,cover_url:n.coverUrl,custom_type:n.customType,data:n.data,freeze:n.isFrozen,is_ephemeral:n.isEphemeral,created_by:n.creator?_bundle_0b1520ed["v" /* U */].payloadify(n.creator):null,created_at:n.createdAt/1e3})))},s.prototype.isGroupChannel=function(){return this.channelType===_bundle_0b1520ed["d" /* C */].GROUP},s.prototype.isOpenChannel=function(){return this.channelType===_bundle_0b1520ed["d" /* C */].OPEN},s.prototype.isFeedChannel=function(){return this.channelType===_bundle_0b1520ed["d" /* C */].FEED},Object.defineProperty(s.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData?(this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e):e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),s.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},s.prototype._update=function(t){var n=Object(_bundle_0b1520ed["hc" /* e */])(t);Object.assign(this,n)},s.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){n._cachedMetaData||(n._cachedMetaData=new Map);var i=n._cachedMetaData.get(r);(!i||i.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},s.prototype._updateCachedMetaData=function(e,t){var n=this;this._cachedMetaData?this._cachedMetaData.forEach((function(r,i){var s;r.updatedAt<=t&&n._cachedMetaData.set(i,{value:null!==(s=e[i])&&void 0!==s?s:r.value,isRemoved:!e[i],updatedAt:t})})):(this._cachedMetaData=new Map,Object.keys(e).forEach((function(r){n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})})))},s.prototype._removeFromCachedMetaData=function(e,t){var n=this;this._cachedMetaData&&e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!0,r.updatedAt=t)}))},s.prototype._runIfHandleableWithGroupChannel=function(e){this.isGroupChannel()?e(this):this.isFeedChannel()&&e(this.groupChannel)},s.prototype._generateRequestId=function(){return"rq-".concat(Object(_bundle_0b1520ed["qc" /* n */])())},s.prototype.isIdentical=function(e){return e&&this.url===e.url},s.prototype.isEqual=function(e){return Object(_bundle_0b1520ed["nb" /* af */])(this,e)},s.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new _bundle_dc8db3c3_bn(this._iid,this.url,this.channelType,e)},s.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new _bundle_dc8db3c3_wn(this._iid,this.url,this.channelType,e)},s.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new _bundle_dc8db3c3_Un(this._iid,this.url,this.channelType,e)},s.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new _bundle_dc8db3c3_In(this._iid,this.url,this.channelType,e)},s.prototype.addOperators=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new _bundle_dc8db3c3_An({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(r)];case 1:return i.sent(),[2]}}))}))},s.prototype.removeOperators=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new _bundle_dc8db3c3_Nn({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(r)];case 1:return i.sent(),[2]}}))}))},s.prototype.getMyMutedInfo=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a,o,u,c,l,d;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,r=e.requestQueue,i=new kn({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,r.send(i)];case 1:return s=h.sent(),a=s.as(_bundle_dc8db3c3_Cn),o=a.isMuted,u=a.startAt,c=a.endAt,l=a.remainingDuration,d=a.description,[2,{isMuted:o,startAt:u,endAt:c,remainingDuration:l,description:d}]}}))}))},s.prototype.getMetaData=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Pn({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(r)];case 1:return i=u.sent(),s=i.as(On),a=s.metadata,o=s.ts,this._upsertCachedMetaData(a,o),[2,a]}}))}))},s.prototype.getAllMetaData=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new Pn({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return r=o.sent(),i=r.as(On),s=i.metadata,a=i.ts,this._updateCachedMetaData(s,a),[2,s]}}))}))},s.prototype.createMetaData=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Rn({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(r)];case 1:return i=a.sent(),s=i.as(xn).metaData,this._upsertCachedMetaData(s,0),[2,s]}}))}))},s.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new _bundle_dc8db3c3_Dn({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,r.send(i)];case 1:return s=c.sent(),a=s.as(_bundle_dc8db3c3_Ln),o=a.metadata,u=a.ts,this._upsertCachedMetaData(o,u),[2,o]}}))}))},s.prototype.deleteMetaData=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new qn({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(r)];case 1:return i=a.sent(),s=i.as(zn).ts,this._removeFromCachedMetaData([e],s),[2]}}))}))},s.prototype.deleteAllMetaData=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new Bn({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return r=s.sent(),i=r.as(Kn).ts,this._removeFromCachedMetaData(Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._cachedMetaData.keys()),!1),i),[2]}}))}))},s.prototype.getMetaCounters=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new jn({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(r)];case 1:return i=s.sent(),[2,i.as(Qn).metaCounter]}}))}))},s.prototype.getAllMetaCounters=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new jn({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return r=i.sent(),[2,r.as(Qn).metaCounter]}}))}))},s.prototype.createMetaCounters=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Gn({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(r)];case 1:return i=s.sent(),[2,i.as(Vn).metaCounter]}}))}))},s.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new Hn({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(Wn).metaCounter]}}))}))},s.prototype.increaseMetaCounters=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Hn({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(r)];case 1:return i=s.sent(),[2,i.as(Wn).metaCounter]}}))}))},s.prototype.decreaseMetaCounters=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Hn({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(r)];case 1:return i=s.sent(),[2,i.as(Wn).metaCounter]}}))}))},s.prototype.deleteMetaCounter=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Jn({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(r)];case 1:return i.sent(),[2]}}))}))},s.prototype.deleteAllMetaCounters=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new Xn({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return r.sent(),[2]}}))}))},s.prototype.muteUser=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},s.prototype.muteUserWithUserId=function(e,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Object(_bundle_0b1520ed["C" /* a */])("number",t,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",r,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new Zn({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:r}),[4,i.send(s)];case 1:return a.sent(),[2]}}))}))},s.prototype.unmuteUser=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},s.prototype.unmuteUserWithUserId=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new er({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(r)];case 1:return i.sent(),[2]}}))}))},s.prototype.banUser=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},s.prototype.banUserWithUserId=function(e,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Object(_bundle_0b1520ed["C" /* a */])("number",t,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",r,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new nr({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:r}),[4,i.send(s)];case 1:return a.sent(),[2]}}))}))},s.prototype.unbanUser=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},s.prototype.unbanUserWithUserId=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new ir({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(r)];case 1:return i.sent(),[2]}}))}))},s.prototype.freeze=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new ar({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return r.sent(),this.isFrozen=!0,[2]}}))}))},s.prototype.unfreeze=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new ar({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return r.sent(),this.isFrozen=!1,[2]}}))}))},s.prototype.getMessagesByMessageId=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Rt),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&xt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},s.prototype.getMessagesByTimestamp=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Rt),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&xt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},s.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Dt),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&Lt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},s.prototype.getMessageChangeLogsSinceToken=function(e,t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Dt),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Lt(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,js.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},s.prototype._createPendingSendableMessagePayload=function(r,i,s){var a,o=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:r.parentMessageId,data:r.data,custom_type:r.customType,mention_type:r.mentionType,sorted_metaarray:r.metaArrays?r.metaArrays.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})):null,apple_critical_alert_options:r.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(r.appleCriticalAlertOptions):null,created_at:s,user:o.currentUser?_bundle_dc8db3c3_Ke.payloadify(o.currentUser):null,req_id:i,request_state:_bundle_0b1520ed["vb" /* an */].PENDING,mentioned_user_ids:r.mentionedUserIds,mentioned_users:null===(a=r.mentionedUsers)||void 0===a?void 0:a.map((function(e){return _bundle_0b1520ed["v" /* U */].payloadify(e)}))}))},s.prototype._createPendingUserMessage=function(t,n,r){var i,s,a={};if(t.translationTargetLanguages)try{for(var o=Object(_bundle_0b1520ed["wc" /* t */])(t.translationTargetLanguages),c=o.next();!c.done;c=o.next()){a[c.value]=""}}catch(e){i={error:e}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}var l=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this._createPendingSendableMessagePayload(t,n,r)),{type:_bundle_0b1520ed["ob" /* ag */].USER,message:t.message,translations:a,extended_message_payload:t.extendedMessagePayload})),d=new _bundle_dc8db3c3_gt(this._iid,l);return d.messageParams=t,d},s.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},s.prototype._createPendingFileMessage=function(t,n,r){var i,s,a,o,c,l,d,h=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this._createPendingSendableMessagePayload(t,n,r)),{type:_bundle_0b1520ed["ob" /* ag */].FILE,url:t.fileUrl,file:{name:null!==(i=t.fileName)&&void 0!==i?i:null===(s=t.file)||void 0===s?void 0:s.name,size:null!==(a=t.fileSize)&&void 0!==a?a:null===(o=t.file)||void 0===o?void 0:o.size,type:null!==(c=t.mimeType)&&void 0!==c?c:null===(l=t.file)||void 0===l?void 0:l.type,data:t.data},thumbnails:null===(d=t._thumbnails)||void 0===d?void 0:d.map((function(e){return _bundle_dc8db3c3_ke.payloadify(e)}))})),f=new wt(this._iid,h);return f.messageParams=t,f},s.prototype._createPendingMultipleFilesMessage=function(t,n,r){var i=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this._createPendingSendableMessagePayload(t,n,r)),{type:_bundle_0b1520ed["ob" /* ag */].FILE})),s=new _bundle_dc8db3c3_bt(this._iid,i);return s.messageParams=t,s},s.prototype._validateFailedFileMessageHasFile=function(e,t){var n;return Boolean(e.url)||Object(_bundle_0b1520ed["lc" /* i */])(t)||Object(_bundle_0b1520ed["lc" /* i */])(null===(n=e.messageParams)||void 0===n?void 0:n.file)},s.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},s.prototype._markMessageAsFailed=function(e,t,n){void 0===n&&(n=!1),e.errorCode=t.code,t.code===_bundle_0b1520ed["I" /* a8 */].REQUEST_CANCELED||t.code===_bundle_0b1520ed["I" /* a8 */].FILE_UPLOAD_CANCEL_FAILED?e.sendingStatus=_bundle_0b1520ed["vb" /* an */].CANCELED:n||(e.sendingStatus=_bundle_0b1520ed["vb" /* an */].FAILED)},s.prototype.sendUserMessage=function(e){var t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_$t),e);return Object(_bundle_0b1520ed["zc" /* w */])(_bundle_dc8db3c3_rn(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this._sendUserMessage(t)},s.prototype._sendUserMessage=function(e,t,r){var i=this;void 0===t&&(t=ei.SEND);var s=_bundle_0b1520ed["w" /* V */].of(this._iid),a=s.dispatcher,o=s.requestQueue,c=null!=r?r:this._generateRequestId(),l=Date.now(),d=new _bundle_dc8db3c3_Yt;return Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var r=i._createPendingUserMessage(e,c,l);a.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[r],source:t===ei.RESEND?_bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_RESEND_STARTED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_PENDING})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,d._trigger(r)]}))}))}));var s=new dr(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{channelUrl:i.url,channelType:i.channelType,reqId:c}));o.send(s).then((function(e){var t=e.as(hr).message;a.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[t],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_SUCCESS})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,d._trigger(t)]}))}))}))})).catch((function(t){if(Object(_bundle_0b1520ed["p" /* O */])(t))throw t;Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var r=i._createPendingUserMessage(e,c,l),s=_bundle_0b1520ed["w" /* V */].of(i._iid).cacheContext,o=s.localCacheEnabled&&s.localCacheConfig.enableAutoResend&&Object(_bundle_0b1520ed["R" /* aI */])(t.code);i._markMessageAsFailed(r,t,o),a.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[r],source:r.sendingStatus===_bundle_0b1520ed["vb" /* an */].PENDING?_bundle_0b1520ed["F" /* a2 */].REQUEST_RESEND_MESSAGE:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_FAILED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,d._triggerFailed(t,r)]}))}))}))}))}))})),d},s.prototype._autoResendUserMessage=function(e){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_gt&&!!e.messageParams).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this._sendUserMessage(e.messageParams,ei.SEND,e.reqId)},s.prototype.resendUserMessage=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_gt&&!e.scheduledInfo).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=new _bundle_0b1520ed["Eb" /* aw */],r=null!==(t=e.messageParams)&&void 0!==t?t:_bundle_dc8db3c3_nn(e),this._sendUserMessage(r,ei.RESEND,e.reqId).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},s.prototype.updateUserMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return r=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_mn),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&vn(r)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new fr(Object(_bundle_0b1520ed["jc" /* g */])({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:r.metaArrays?{array:r.metaArrays,mode:"add",upsert:!0}:void 0},r)),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(pr).message]}}))}))},s.prototype.copyUserMessage=function(e,n){var r,i,a;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var o,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof s&&n instanceof _bundle_dc8db3c3_gt&&n.sendingStatus===_bundle_0b1520ed["vb" /* an */].SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),Object(_bundle_0b1520ed["zc" /* w */])(!n.poll).throw(_bundle_0b1520ed["vc" /* s */].notSupportedError),o=new _bundle_0b1520ed["Eb" /* aw */],c=null!==(r=n.messageParams)&&void 0!==r?r:Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n),{mentionType:n.mentionType,mentionedUserIds:null!==(i=n.mentionedUserIds)&&void 0!==i?i:null===(a=n.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(n.translations),pushNotificationDeliveryOption:_bundle_0b1520ed["Ab" /* as */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),e._sendUserMessage(c).onSucceeded((function(e){o.resolve(e)})).onFailed((function(e){return o.reject(e)})),[2,o.promise]}))}))},s.prototype.translateUserMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_gt&&e.messageId>0&&Object(_bundle_0b1520ed["r" /* Q */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new Ir({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(Er).message]}}))}))},s.prototype._createScheduledUserMessage=function(e,t){var r=this,i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=Date.now(),a=this._generateRequestId();Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var n=r._createPendingScheduledUserMessage(e,a,s);Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,t._trigger(n)]}))}))}))}));var o=new Tr(Object(_bundle_0b1520ed["jc" /* g */])({reqId:a,channelType:this.channelType,channelUrl:this.url},e));i.send(o).then((function(e){var n=e.as(wr).message;Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,t._trigger(n)]}))}))}))})).catch((function(n){if(Object(_bundle_0b1520ed["p" /* O */])(n))throw n;Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var i=r._createPendingScheduledUserMessage(e,a,s);r._markMessageAsFailed(i,n),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,t._triggerFailed(n,i)]}))}))}))}))}))},s.prototype.sendFileMessage=function(e){var t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_un),e);return Object(_bundle_0b1520ed["zc" /* w */])(_bundle_dc8db3c3_hn(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this._sendFileMessage(t)},s.prototype.sendMultipleFilesMessage=function(e){var t,r=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},ti),e),i=_bundle_0b1520ed["w" /* V */].of(this._iid);Object(_bundle_0b1520ed["zc" /* w */])(function(e,t){return void 0===t&&(t=_bundle_0b1520ed["Q" /* aH */]),_bundle_dc8db3c3_Xt(e)&&Array.isArray(e.fileInfoList)&&e.fileInfoList.length>=2&&e.fileInfoList.length<=t&&e.fileInfoList.every((function(e){return ni(e)}))}(r,null===(t=i.appInfo)||void 0===t?void 0:t.multipleFilesMessageFileCountLimit)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);var s=!!e.fileInfoList.find((function(e){var t=i.appInfo.uploadSizeLimit;return e.file instanceof Blob&&e.file.size>t||e.fileSize>t}));return Object(_bundle_0b1520ed["zc" /* w */])(!s).throw(_bundle_0b1520ed["vc" /* s */].fileSizeLimitExceededError),this._sendMultipleFilesMessage(r)},s.prototype._sendFileMessage=function(e,t,r){var i=this;void 0===t&&(t=ei.SEND);var s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,a=js.of(this._iid).fileMessageQueue,o=null!=r?r:this._generateRequestId(),u=Date.now(),c=new _bundle_dc8db3c3_Yt;return Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var r=i._createPendingFileMessage(e,o,u);s.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[r],source:t===ei.RESEND?_bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_RESEND_STARTED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_PENDING})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,c._trigger(r)]}))}))})),a.request(i,o,e).then((function(e){s.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[e],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_SUCCESS})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,c._trigger(e)]}))}))}))})).catch((function(t){if(Object(_bundle_0b1520ed["p" /* O */])(t))throw t;Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var r=i._createPendingFileMessage(e,o,u),a=_bundle_0b1520ed["w" /* V */].of(i._iid).cacheContext,l=a.localCacheEnabled&&a.localCacheConfig.enableAutoResend&&Object(_bundle_0b1520ed["R" /* aI */])(t.code);i._markMessageAsFailed(r,t,l),s.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[r],source:r.sendingStatus===_bundle_0b1520ed["vb" /* an */].PENDING?_bundle_0b1520ed["F" /* a2 */].REQUEST_RESEND_MESSAGE:t.code===_bundle_0b1520ed["I" /* a8 */].FILE_UPLOAD_CANCEL_FAILED?_bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_CANCELED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_FAILED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,c._triggerFailed(t,r)]}))}))}))}))}))})),c},s.prototype._autoResendFileMessage=function(e){Object(_bundle_0b1520ed["zc" /* w */])(e instanceof wt&&!!e.messageParams).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);var t=_bundle_0b1520ed["w" /* V */].of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,ei.SEND,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},s.prototype._sendMultipleFilesMessage=function(e,t,r){var i=this,s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,a=js.of(this._iid).fileMessageQueue,o=null!=r?r:this._generateRequestId(),u=Date.now(),c=new ri;return Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var n=i._createPendingMultipleFilesMessage(e,o,u);s.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[n],source:t===ei.RESEND?_bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_RESEND_STARTED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_PENDING})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,c._trigger(n)]}))}))})),a.request(i,o,e,{requestHandler:c,isCopy:t===ei.COPY}).then((function(e){s.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[e],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_SUCCESS})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,c._trigger(e)]}))}))}))})).catch((function(t){if(Object(_bundle_0b1520ed["p" /* O */])(t))throw t;Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var n=i._createPendingMultipleFilesMessage(e,o,u);i._markMessageAsFailed(n,t),s.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[n],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_FAILED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,c._triggerFailed(t,n)]}))}))}))}))}))})),c},s.prototype._createScheduledFileMessage=function(e,t,r,i){var s=this,a=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,o=new Sr(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({reqId:r,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));a.send(o).then((function(e){var n=e.as(Mr).message;Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(s,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,t._trigger(n)]}))}))}))})).catch((function(n){if(Object(_bundle_0b1520ed["p" /* O */])(n))throw n;Object(_bundle_0b1520ed["Db" /* av */])(2).then((function(){var a=s._createPendingScheduledFileMessage(e,r,i);s._markMessageAsFailed(a,n),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(s,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,t._triggerFailed(n,a)]}))}))}))}))}))},s.prototype.sendFileMessages=function(e){var t,n;Object(_bundle_0b1520ed["zc" /* w */])(e.every((function(e){return _bundle_dc8db3c3_hn(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_un),e))}))).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);var r=new _bundle_dc8db3c3_Yt;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.sendFileMessage(a).onPending((function(e){return r._trigger(e)})).onFailed((function(e,t){return r._triggerFailed(e,t)})).onSucceeded((function(e){return r._trigger(e)}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},s.prototype.resendFileMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){return n=this._validateFailedFileMessageHasFile(e,t),Object(_bundle_0b1520ed["zc" /* w */])(e instanceof wt&&n&&!e.scheduledInfo).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=new _bundle_0b1520ed["Eb" /* aw */],i=_bundle_dc8db3c3_dn(e,t),this._sendFileMessage(i,ei.RESEND,e.reqId).onFailed((function(e){return r.reject(e)})).onSucceeded((function(e){return r.resolve(e)})),[2,r.promise]}))}))},s.prototype.resendMessage=function(e,t){var n,r;if(Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ft&&!e.scheduledInfo&&e.isResendable).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),e.isUserMessage()){var i=null!==(n=e.messageParams)&&void 0!==n?n:_bundle_dc8db3c3_nn(e);return this._sendUserMessage(i,ei.RESEND,e.reqId)}if(e.isFileMessage()){var s=this._validateFailedFileMessageHasFile(e,t);Object(_bundle_0b1520ed["zc" /* w */])(s).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);i=null!==(r=e.messageParams)&&void 0!==r?r:_bundle_dc8db3c3_dn(e,t);return this._sendFileMessage(i,ei.RESEND,e.reqId)}if(e.isMultipleFilesMessage())throw _bundle_0b1520ed["vc" /* s */].channelTypeNotSupportedError},s.prototype.updateFileMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return r=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_yn),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&function(e){return _bundle_dc8db3c3_pn(e)}(r)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new mr(Object(_bundle_0b1520ed["jc" /* g */])({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:r.metaArrays?{array:r.metaArrays,mode:"add",upsert:!0}:void 0},r)),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(vr).message]}}))}))},s.prototype.uploadFile=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=Object(_bundle_0b1520ed["qc" /* n */])(),(i=new _bundle_dc8db3c3_Ce({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:r})).uploadProgressHandler=e.progressHandler,e.uploadStartedHandler&&e.uploadStartedHandler(r),[4,t.send(i)];case 1:return s=c.sent(),a=s.as(_bundle_dc8db3c3_Pe),o=a.url,u=a.thumbnails,[2,{requestId:r,url:o,thumbnails:u}]}}))}))},s.prototype.cancelUploadingFileMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),js.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},s.prototype.copyFileMessage=function(e,n){var r,i,a;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var o,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof s&&n instanceof wt&&n.sendingStatus===_bundle_0b1520ed["vb" /* an */].SUCCEEDED&&this.url===n.channelUrl&&!n.scheduledInfo).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),o=new _bundle_0b1520ed["Eb" /* aw */],c=Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n),{fileUrl:n.url,fileName:n.name,fileSize:n.size,mimeType:n.type,mentionType:n.mentionType,mentionedUserIds:null!==(r=n.mentionedUserIds)&&void 0!==r?r:null===(i=n.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),pushNotificationDeliveryOption:_bundle_0b1520ed["Ab" /* as */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(a=n.thumbnails)||void 0===a?void 0:a.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:n.requireAuth,isPinnedMessage:!1})),e._sendFileMessage(c).onSucceeded((function(e){return o.resolve(e)})).onFailed((function(e){return o.reject(e)})),[2,o.promise]}))}))},s.prototype.copyMessage=function(e,t){Object(_bundle_0b1520ed["zc" /* w */])(e instanceof s&&t instanceof _bundle_dc8db3c3_ft&&t.sendingStatus===_bundle_0b1520ed["vb" /* an */].SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);var n=t,r=e;if(n.isUserMessage()){Object(_bundle_0b1520ed["zc" /* w */])(!n.poll).throw(_bundle_0b1520ed["vc" /* s */].notSupportedError);var i=_bundle_dc8db3c3_en(n);return r._sendUserMessage(i)}if(n.isFileMessage()){i=_bundle_dc8db3c3_cn(n);return r._sendFileMessage(i)}if(t.isMultipleFilesMessage())throw _bundle_0b1520ed["vc" /* s */].channelTypeNotSupportedError},s.prototype.deleteMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),e.messageId>0?(t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new _bundle_0b1520ed["S" /* aJ */]({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,messageToken:e instanceof _bundle_dc8db3c3_ft?e._messageToken:void 0}),[4,t.send(r)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},s.prototype.addReaction=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht&&e.messageId>0&&Object(_bundle_0b1520ed["C" /* a */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new yr({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(_bundle_dc8db3c3_r).reactionEvent]}}))}))},s.prototype.deleteReaction=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht&&e.messageId>0&&Object(_bundle_0b1520ed["C" /* a */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new gr({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(br).reactionEvent]}}))}))},s.prototype._updateUserMessageMetaArray=function(e,t,r,i){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,a,o,u,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return s=_bundle_0b1520ed["w" /* V */].of(this._iid),a=s.dispatcher,o=s.requestQueue,u=new fr({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:r,upsert:i}}),[4,o.send(u)];case 1:return c=d.sent(),l=c.as(pr).message,a.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[l],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED})),[2,l]}}))}))},s.prototype._updateFileMessageMetaArray=function(e,t,r,i){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,a,o,u,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return s=_bundle_0b1520ed["w" /* V */].of(this._iid),a=s.dispatcher,o=s.requestQueue,u=new mr({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:r,upsert:i}}),[4,o.send(u)];case 1:return c=d.sent(),l=c.as(vr).message,a.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[l],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED})),[2,l]}}))}))},s.prototype.createMessageMetaArrayKeys=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht&&e.messageId>0&&Object(_bundle_0b1520ed["r" /* Q */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=t.map((function(e){return new _bundle_dc8db3c3_je({key:e})})),e instanceof wt?[2,this._updateFileMessageMetaArray(e.messageId,n,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"add",!0)]}))}))},s.prototype.deleteMessageMetaArrayKeys=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht&&e.messageId>0&&Object(_bundle_0b1520ed["r" /* Q */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=t.map((function(e){return new _bundle_dc8db3c3_je({key:e})})),e instanceof wt?[2,this._updateFileMessageMetaArray(e.messageId,n,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},s.prototype.addMessageMetaArrayValues=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht&&e.messageId>0&&t.every((function(e){return e instanceof _bundle_dc8db3c3_je}))).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),e instanceof wt?[2,this._updateFileMessageMetaArray(e.messageId,t,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"add",!0)]}))}))},s.prototype.removeMessageMetaArrayValues=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ht&&e.messageId>0&&t.every((function(e){return e instanceof _bundle_dc8db3c3_je}))).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),e instanceof wt?[2,this._updateFileMessageMetaArray(e.messageId,t,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},s.prototype.report=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_dc8db3c3_ln,e)&&Object(_bundle_0b1520ed["C" /* a */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid),i=r.sdkState,s=r.requestQueue,a=new ur({channelUrl:this.url,channelType:this.channelType,userId:i.userId,category:e,description:t}),[4,s.send(a)];case 1:return o.sent(),[2]}}))}))},s.prototype.reportUser=function(e,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_0b1520ed["v" /* U */]&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_dc8db3c3_ln,t)&&Object(_bundle_0b1520ed["C" /* a */])("string",r)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid),s=i.sdkState,a=i.requestQueue,o=new cr({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.userId,category:t,description:r}),[4,a.send(o)];case 1:return u.sent(),[2]}}))}))},s.prototype.reportMessage=function(e,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ft&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_dc8db3c3_ln,t)&&Object(_bundle_0b1520ed["C" /* a */])("string",r)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid),s=i.sdkState,a=i.requestQueue,o=new lr({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:t,description:r,messageToken:e._messageToken}),[4,a.send(o)];case 1:return u.sent(),[2]}}))}))},s.prototype.updatePoll=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.title,!0)&&Object(_bundle_0b1520ed["N" /* aE */])(e.data)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.allowUserSuggestion,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.allowMultipleVotes,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.closeAt,!0)}(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new Ur(Object(_bundle_0b1520ed["jc" /* g */])({pollId:e},t)),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(Ar).poll]}}))}))},s.prototype.deletePoll=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=Object(_bundle_0b1520ed["C" /* a */])("number",e),Object(_bundle_0b1520ed["zc" /* w */])(t).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new Nr({pollId:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},s.prototype.closePoll=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return t=Object(_bundle_0b1520ed["C" /* a */])("number",e),Object(_bundle_0b1520ed["zc" /* w */])(t).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new kr({pollId:e}),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(Cr).poll]}}))}))},s.prototype.addPollOption=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return r=Object(_bundle_0b1520ed["C" /* a */])("number",e)&&Object(_bundle_0b1520ed["C" /* a */])("string",t)&&""!==t.trim(),Object(_bundle_0b1520ed["zc" /* w */])(r).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new Pr({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:t}),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(Or).poll]}}))}))},s.prototype.updatePollOption=function(e,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return i=Object(_bundle_0b1520ed["C" /* a */])("number",e)&&Object(_bundle_0b1520ed["C" /* a */])("number",t)&&Object(_bundle_0b1520ed["C" /* a */])("string",r)&&""!==r.trim(),Object(_bundle_0b1520ed["zc" /* w */])(i).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),s=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,a=new Rr({pollId:e,pollOptionId:t,optionText:r}),[4,s.send(a)];case 1:return o=u.sent(),[2,o.as(xr).poll]}}))}))},s.prototype.deletePollOption=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return r=Object(_bundle_0b1520ed["C" /* a */])("number",e)&&Object(_bundle_0b1520ed["C" /* a */])("number",t),Object(_bundle_0b1520ed["zc" /* w */])(r).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new Dr({pollId:e,pollOptionId:t}),[4,i.send(s)];case 1:return a.sent(),[2]}}))}))},s.prototype.votePoll=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a,o,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return r=Object(_bundle_0b1520ed["C" /* a */])("number",e)&&Object(_bundle_0b1520ed["r" /* Q */])("number",t),Object(_bundle_0b1520ed["zc" /* w */])(r).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid),s=i.requestQueue,a=i.dispatcher,o=new Lr({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:t}),[4,s.send(o)];case 1:return u=l.sent(),c=u.as(Fr).event,a.dispatch(new _bundle_0b1520ed["T" /* aK */]({event:c,source:_bundle_0b1520ed["F" /* a2 */].EVENT_POLL_VOTED})),[2,c]}}))}))},s.prototype.getPollChangeLogsSinceTimestamp=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,_bundle_0b1520ed["U" /* aL */].of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},s.prototype.getPollChangeLogsSinceToken=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e,!0)),[4,_bundle_0b1520ed["U" /* aL */].of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},s.prototype.createPollListQuery=function(e){return void 0===e&&(e=10),new _bundle_0b1520ed["Ac" /* x */](this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},s.prototype.createPollVoterListQuery=function(e,t,n){return void 0===n&&(n=20),new _bundle_0b1520ed["Bc" /* y */](this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:t,limit:n})},s}(_bundle_0b1520ed["mb" /* ae */]),oi=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}((function(){this.onConnected=_bundle_0b1520ed["Gb" /* ay */],this.onReconnectStarted=_bundle_0b1520ed["Gb" /* ay */],this.onReconnectSucceeded=_bundle_0b1520ed["Gb" /* ay */],this.onReconnectFailed=_bundle_0b1520ed["Gb" /* ay */],this.onDisconnected=_bundle_0b1520ed["Gb" /* ay */]})),ui=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}((function(){this.onSessionExpired=_bundle_0b1520ed["Gb" /* ay */],this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=_bundle_0b1520ed["Gb" /* ay */],this.onSessionRefreshed=_bundle_0b1520ed["Gb" /* ay */],this.onSessionClosed=_bundle_0b1520ed["Gb" /* ay */]})),ci=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}((function(){this.onFriendsDiscovered=_bundle_0b1520ed["Gb" /* ay */],this.onTotalUnreadMessageCountChanged=_bundle_0b1520ed["Gb" /* ay */],this.onTotalUnreadMessageCountUpdated=_bundle_0b1520ed["Gb" /* ay */]})),li=function(t){function n(n){var r=n.limit,s=n.token,a=n.userIdsFilter,o=n.metaDataKeyFilter,u=n.metaDataValuesFilter,c=n.nicknameStartsWithFilter,l=t.call(this)||this;return l.method=_bundle_0b1520ed["b" /* A */].GET,l.path=_bundle_0b1520ed["gc" /* d */],l.params=Object(_bundle_0b1520ed["hc" /* e */])({limit:r,token:s,user_ids:a,metadatakey:o,metadatavalues_in:u,nickname_startswith:c}),l}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),di=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),r.next=n.next,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),hi=function(e){function i(t,n){var r,i,s,a=this;return(a=e.call(this,t,n)||this).userIdsFilter=null,a.metaDataKeyFilter=null,a.metaDataValuesFilter=null,a.nicknameStartsWithFilter=null,a.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,a.metaDataKeyFilter=null!==(i=n.metaDataKeyFilter)&&void 0!==i?i:null,a.metaDataValuesFilter=null!==(s=n.metaDataValuesFilter)&&void 0!==s?s:null,a.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,a}return Object(_bundle_0b1520ed["fc" /* c */])(i,e),i.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.userIdsFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metaDataKeyFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.metaDataValuesFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.nicknameStartsWithFilter,!0)},i.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new li(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),s=i.as(di),a=s.users,o=s.next,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},i}(_bundle_0b1520ed["V" /* aM */]),fi=function(t){function n(n){var r=n.userId,s=n.limit,a=n.token,o=n.userIdsFilter,u=t.call(this)||this;return u.method=_bundle_0b1520ed["b" /* A */].GET,u.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(r,"/block"),u.params=Object(_bundle_0b1520ed["hc" /* e */])({limit:s,token:a,user_ids:o}),u}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),pi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),r.next=n.next,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),mi=function(e){function i(t,n){var r,i=this;return(i=e.call(this,t,n)||this).userIdsFilter=null,i.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,i}return Object(_bundle_0b1520ed["fc" /* c */])(i,e),i.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.userIdsFilter,!0)},i.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,r,i,s,a,o,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid),r=e.sdkState,i=e.requestQueue,s=new fi(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{userId:r.userId,token:this._token}))),[4,i.send(s)]):[3,2]:[3,5];case 1:return a=d.sent(),o=a.as(pi),c=o.users,l=o.next,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,c];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},i}(_bundle_0b1520ed["V" /* aM */]),vi=function(e){function t(t){var n=t.userId,r=t.limit,s=t.token,a=e.call(this)||this;return a.method=_bundle_0b1520ed["b" /* A */].GET,a.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/friends"),a.params={limit:r,token:s},a}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),yi=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.hasMore=n.has_more,r.users=n.users.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),r.next=n.next,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),_bundle_dc8db3c3_i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a,o,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,r=e.requestQueue,i=new vi(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{userId:t.userId,token:this._token})),[4,r.send(i)]):[3,2]:[3,5];case 1:return s=d.sent(),a=s.as(yi),o=a.users,c=a.hasMore,l=a.next,this._token=l,this._hasNext=c,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_0b1520ed["V" /* aM */]),gi={},bi=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,i=e.cacheLimit,s=void 0===i?256:i,a=e.blockHashBase,o=void 0===a?2:a,u=e.blockHashMultiplier,c=void 0===u?10:u,l=e.blockHashConstant,d=void 0===l?11:l,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,m=void 0!==p&&p;return gi[t]||(this.itemSizeLimit=r,this.cacheLimit=s,this.blockHashBase=o,this.blockHashMultiplier=c,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=m,gi[t]=this),gi[t]}return e.get=function(e){return gi[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(si||(si={}));var Ii,Ei=function(e){function t(n){var r=n.code,i=void 0===r?si.UNKNOWN_ERROR:r,s=n.message,a=void 0===s?"Unknown error occurred.":s,o=e.call(this,a)||this;return o.code=i,Object.setPrototypeOf(o,t.prototype),o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:si.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:si.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:si.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:si.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotInitialized",{get:function(){return new t({code:si.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:si.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:si.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:si.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeEncryptionInvalid",{get:function(){return new t({code:si.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:si.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:si.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:si.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:si.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:si.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:si.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:si.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:si.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:si.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:si.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:si.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:si.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:si.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:si.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:si.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:si.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(Ii||(Ii={}));var Ti,wi=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw Ei.circularReferenceFound;t.set(e,!0);var n=void 0;if(Array.isArray(e))n=e.map((function(e){return wi(e,t)}));else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=wi(e[r],t);return t.delete(e),n}return e},Si=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw Ei.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},Mi=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},Ui=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},Ai=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e){if(["/and","&&"].includes(n)){if(e[n].some((function(e){return!Ai(e,t)})))return!1}else if(["/or","||"].includes(n)){if(e[n].every((function(e){return!Ai(e,t)})))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else{var r=n;if("object"==typeof e[r]){var i=e[r];for(var s in i)switch(s){case"/eq":case"=":if((a=t[r])!==(o=i[s]))return!1;break;case"/neq":case"!=":if((a=t[r])===(o=i[s]))return!1;break;case"/gt":case">":var a=t[r],o=i[s];if(!(Si(a,o)>0))return!1;break;case"/gte":case">=":a=t[r],o=i[s];if(!(Si(a,o)>=0))return!1;break;case"/lt":case"<":a=t[r],o=i[s];if(!(Si(a,o)<0))return!1;break;case"/lte":case"<=":a=t[r],o=i[s];if(!(Si(a,o)<=0))return!1;break;case"/in":a=t[r];if(!(o=i[s]).includes(a))return!1;break;case"/nin":a=t[r];if((o=i[s]).includes(a))return!1;break;case"/contain":a=t[r],o=i[s];if(!a.includes(o))return!1;break;case"/regex":a=t[r];if(!(o=i[s]).test(a))return!1;break;case"/where":a=t[r];if(!(0,i[s])(a))return!1}}else if("function"==typeof e[r]){if(!e[r](t[r]))return!1}else if(e[r]!==t[r])return!1}}return!0}return e(t)},Ni=function(){},ki=function(){return Promise.resolve()},Ci=function(e){return e},Pi=function(e,t){t()};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Ti||(Ti={}));var Oi,Ri,xi,Di=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,i=void 0===r?null:r,s=e.iterator,a=e.map,o=void 0===a?Ci:a,u=e.backward,c=void 0===u?ki:u,l=e.forward,d=void 0===l?ki:l,h=e.complete,f=void 0===h?Ni:h;this._prevValue=n,this._nextValue=i,this._error=null,this._map=o,this._backward=c,this._forward=d,this._iterator=s,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),Li=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,s=e.blockManager,a=e.indexer;this.condition=n,this.backward=i,this._blockManager=s,this._indexer=a}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var i in this._indexer.fields){var s=this._indexer.fields[i],a=1;if("-"===s[0]&&(s=s.slice(1),a=-1),this.condition[s])if("object"==typeof this.condition[s]){var o=a>0?n:t;for(var u in this.condition[s])if(o.includes(u))for(var c=r;c>=0;c--)if(a*Si(this._indexer.origin[c].columnValues[i],this.condition[s][u])<=0){r=c;break}}else for(c=r;c>=0;c--)if(a*Si(this._indexer.origin[c].columnValues[i],this.condition[s])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var l=0;if("function"!=typeof this.condition)for(var d=function(r){var i=h._indexer.fields[r],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),h.condition[i])if("object"==typeof h.condition[i])Object.keys(h.condition[i]).forEach((function(a){if((s>0?t:n).includes(a))for(var o=l;o<e._indexer.origin.length;o++)if(s*Si(e._indexer.origin[o].columnValues[r],e.condition[i][a])>=0){l=o;break}}));else for(var a=l;a<h._indexer.origin.length;a++)if(s*Si(h._indexer.origin[a].columnValues[r],h.condition[i])>=0){l=a;break}},h=this,i=0;i<this._indexer.fields.length;i++)d(i);return Math.max(l-1,0)},e.prototype.each=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[++n]){if(!u._indexer.origin[++t])return!1;n=0}return!0}return!1},i=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[--n]){if(!u._indexer.origin[--t])return!1;n=u._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];a=this.backward?i:r,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if((o=c.sent())&&Ai(this.condition,o))return s=o,[3,4];c.label=3;case 3:if(a())return[3,1];c.label=4;case 4:return[4,new Promise((function(a){var o=new Di({initialNextValue:wi(s),iterator:e,forward:function(){return Object(_bundle_0b1520ed["B" /* _ */])(u,void 0,void 0,(function(){var e,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:e=this.backward?i:r,a.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=a.sent())&&Ai(this.condition,s)?[2,wi(s)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return Object(_bundle_0b1520ed["B" /* _ */])(u,void 0,void 0,(function(){var e,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:e=this.backward?r:i,a.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=a.sent())&&Ai(this.condition,s)?[2,wi(s)]:[3,1];case 3:return[2,null]}}))}))},complete:a});e(o)}))];case 5:return[2,c.sent()]}}))}))},e}(),Fi=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,s=e.mutex,a=e.blockManager,o=e.indexer;this._mutex=s,this._iterator=new Li({condition:n,backward:i,blockManager:a,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw Ei.collectionQueryNotValid;a.label=1;case 1:return a.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return a.sent(),[4,this._iterator.each((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(s,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return a.sent(),this._mutex.unlock(),[2,r];case 4:throw i=a.sent(),this._mutex.unlock(),i;case 5:return[2]}}))}))},e.prototype.count=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),qi=function(e){return"".concat("nest","@").concat(e)},zi=function(e,t){return"".concat(qi(e),"/").concat(t)},Bi=function(e,t){return"".concat(zi(e,t),".metadata")},Ki=function(e,t){return"".concat(zi(e,t),"/block.")},ji=function(e,t){return"".concat(zi(e,t),"/blob.")},Qi=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this.store=r}return e.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return[4,this.store.get(e)];case 1:return(t=l.sent())?(n=t.data,r=t.type,"undefined"==typeof fetch?[3,4]:[4,fetch(n)]):[3,5];case 2:return[4,l.sent().blob()];case 3:return[2,l.sent()];case 4:for(512,i=[],s=atob(n.split(",")[1]),a=0;a<s.length;a+=512){for(o=s.slice(a,a+512),u=new Array(o.length),c=0;c<o.length;c++)u[c]=o.charCodeAt(c);i.push(new Uint8Array(u))}return[2,new Blob(i,{type:r})];case 5:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(n){var r=function(e,t,n,r){return void 0===r&&(r=0),"".concat(ji(e,t)).concat(n,".").concat(r)}(a.dbname,a.collectionName,t),i=new FileReader;i.onload=function(){n({blobId:r,data:i.result,type:e.type})},i.readAsDataURL(e)}))];case 1:return n=o.sent(),r=n.blobId,i=n.data,s=n.type,[4,this.store.set({key:r,value:{data:i,type:s}})];case 2:return o.sent(),[2,r]}}))}))},e.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=ji(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=r.sent(),[4,Promise.all(t.filter((function(t){return t.startsWith(e)})).map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return[2,t.sent()]}}))}))})))];case 2:return r.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(Oi||(Oi={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(Ri||(Ri={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(xi||(xi={}));var Gi,Vi,Hi=[Ri.PENDING,Ri.VOLATILE],Wi={},Yi=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return Wi[t]||(this.dbname=t,this._items=[],this._limit=r,Wi[t]=this),Wi[t]}return e.get=function(e){return Wi[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=xi.DEFAULT),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(i=s.sent())&&(r={key:t,value:i,state:n===xi.PERSISTENT?Ri.PERSISTENT:Ri.VOLATILE},this.put(r)),[3,3];case 2:n===xi.PERSISTENT&&(r.state=Ri.PERSISTENT),s.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=xi.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===xi.PERSISTENT&&(r.state=Ri.PERSISTENT),t!==xi.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){var t,n;if(this._limit>0){var r=this._items.map((function(e){return e.key})).indexOf(e.key);if(r>-1)Hi.includes(this._items[r].state)&&Hi.includes(e.state)?(this._items.splice(r,1),this._items.push(e)):(this._items[r].state=e.state,this._items[r].value=e.value);else{this._items.push(e);var i=this._items.filter((function(e){return e.state===Ri.VOLATILE})),s=i.length-this._limit;if(s>0){var a=[];try{for(var o=Object(_bundle_0b1520ed["wc" /* t */])(this._items),u=o.next();!u.done;u=o.next()){var c=u.value;c.state===Ri.VOLATILE&&s>0?s--:a.push(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this._items=a}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==Ri.VOLATILE}))},e}(),Ji=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(zi(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(zi(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(e),!1)),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var i=e[r],s=[],a=i.requests.length-1;a>=0;a--){var o=i.requests[a],u=o.data;n[u.key]||(s.unshift(o),n[u.key]=!0)}s.length>0&&(i.requests=s,t.unshift(i))}return t},e.prototype._applyRecord=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,c,l,d;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:n=Yi.get(this.dbname),r=t.generation,i=t.requests,s=null,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._store.setMany(i.map((function(e){return Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e.data),{generation:r})})))];case 2:for(a=h.sent(),o=0;o<i.length;o++)a[o]instanceof Error&&(s||(s=a[o]),c=i[o].data,n.put(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},c),{state:Ri.PERSISTENT})));return[3,4];case 3:return l=h.sent(),s=l,[3,4];case 4:return s?[3,6]:(d=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:d})]);case 5:return h.sent(),this._onWrite.forEach((function(e){e(i.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){s&&e(s)})),h.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),n=Object(_bundle_0b1520ed["wc" /* t */])(t),r=n.next(),u.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._applyRecord(t,i)]);case 5:u.sent(),u.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s=u.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}return[7];case 10:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case Oi.COMMIT:this._onCommit.set(t,n);break;case Oi.WRITE:this._onWrite.set(t,n);break;case Oi.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){this._requests.push({data:e,options:t}),Yi.get(this.dbname).put(Object(_bundle_0b1520ed["jc" /* g */])({state:Ri.PENDING},e))},e.prototype.requestMultipleWrite=function(e,t){var n,r,i=Yi.get(this.dbname);try{for(var s=Object(_bundle_0b1520ed["wc" /* t */])(e),a=s.next();!a.done;a=s.next()){var o=a.value;this._requests.push({data:o,options:t}),i.put(Object(_bundle_0b1520ed["jc" /* g */])({state:Ri.PENDING},o))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return Yi.get(this.dbname).clearByCondition((function(e){return e.state===Ri.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,c,l,d,h,f=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(p){switch(p.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},o=e.length-1;o>=0;o--)r=e[o],l=r.data,n[l.key]||(n[l.key]=!0,t.unshift(r));return i={generation:this.generation,requests:t},[4,this._getReducedRecordset([i])];case 1:return s=p.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return p.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(p.sent(),a=Yi.get(this.dbname),o=0;o<t.length;o++)c=t[o],l=c.data,d=c.options,a.put(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},l),{state:d&&d.persistent?Ri.PERSISTENT:Ri.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),h=bi.get(this.dbname),setTimeout((function(){try{f._applyRecord(s,i)}catch(e){f._onError.forEach((function(t){return t(e)}))}}),h.transactionApplyDelay),p.label=4;case 4:return[2]}}))}))},e}(),Xi=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,i=void 0===r?[]:r,s=e.limit;this.blockId=t,this.keyName=n,this.limit=s,this._items=Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(i),!1)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this,n=this._items.find((function(n){var r=n[t.keyName];return e===r}));return null!=n?n:null},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),Zi=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,i=e.hashFunction,s=void 0===i?Mi:i,a=e.transaction,o=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=s,this.metadata=r,this._transaction=a,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,i=t,s="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||Mi)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(Ki(n,r)).concat(i,".").concat(s);var n,r,i,s},e.prototype._findBlock=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:t=Yi.get(this.dbname),n=this.metadata.blockLevel,a.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((i=a.sent())&&(s=Xi.createFromCacheItem(i),null==s?void 0:s.getItemByKey(e)))return[2,s];a.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return n=bi.get(this.dbname),r=this.createBlockId(e),i=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,Yi.get(this.dbname).find(this._store,r)];case 1:return s=o.sent(),(null==(a=s?Xi.createFromCacheItem(s):new Xi({blockId:r,keyName:this.keyName,items:[],limit:i}))?void 0:a.add(t))?(this._transaction.requestWrite({key:a.blockId,value:a.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=Ki(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=r.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:return r.sent(),[4,this._transaction.clear()];case 3:return r.sent(),Yi.get(this.dbname).clearByCondition((function(t){return t.key.startsWith(e)})),[2]}}))}))},e}(),$i={},es=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.fields,s=e.transaction,a=e.store,o=this;this._origin=[],this._table=[];var u=function(e,t,n){return"".concat(zi(e,t),"/index.").concat(n)}(t,n,i.join(">"));return $i[u]||(this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=i,this.indexerKey=u,this._transaction=s,this._store=a,this._transaction.on(Oi.COMMIT,this.indexerKey,(function(){return o.commit()})),this._transaction.on(Oi.ERROR,this.indexerKey,(function(){return o.abort()}))),$i[u]}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.clearIndexerMap=function(){for(var e in $i)delete $i[e]},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(_bundle_0b1520ed["tc" /* q */])(this.indexOf(n),2),i=r[0];return r[1]?!this._table[i].keys.includes(t)&&(this._table[i].keys.push(t),!0):(this._table.splice(i,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(_bundle_0b1520ed["tc" /* q */])(this.indexOf(n),2),i=r[0];if(r[1]){var s=this._table[i].keys.indexOf(t);if(s>-1)return this._table[i].keys.splice(s,1),0===this._table[i].keys.length&&this._table.splice(i,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){var t,n,r,i,s=[];try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(this.fields),o=a.next();!o.done;o=a.next()){var u=o.value;if("-"===u[0]&&(u=u.slice(1)),r=e[u],i=void 0,i=typeof r,null!==r&&"undefined"!==i&&"boolean"!==i&&"number"!==i&&"string"!==i)throw Ei.indexTypesNotMatch;s.push(e[u])}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,i=Si(e[n],t[n]);if(0!==i)return r*i}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),i=this.diff(e,this._table[r].columnValues);if(i>0)t=r+1;else{if(!(i<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u,c,l,d,h,f,p,m,y;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(_){switch(_.label){case 0:return[4,(e=Yi.get(this.dbname)).find(this._store,this.indexerKey,xi.PERSISTENT)];case 1:return(t=_.sent())?[3,11]:(n=Ki(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=_.sent(),_.label=3;case 3:_.trys.push([3,8,9,10]),i=Object(_bundle_0b1520ed["wc" /* t */])(r),s=i.next(),_.label=4;case 4:return s.done?[3,7]:(a=s.value).startsWith(n)?[4,e.find(this._store,a,xi.NO_CACHE)]:[3,6];case 5:if(o=_.sent(),u=Xi.createFromCacheItem(o))try{for(m=void 0,c=Object(_bundle_0b1520ed["wc" /* t */])(u.items),l=c.next();!l.done;l=c.next())d=l.value,this._addItem(d)}catch(e){m={error:e}}finally{try{l&&!l.done&&(y=c.return)&&y.call(c)}finally{if(m)throw m.error}}_.label=6;case 6:return s=i.next(),[3,4];case 7:return[3,10];case 8:return h=_.sent(),f={error:h},[3,10];case 9:try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=wi(this._origin),_.label=12;case 12:return $i[this.indexerKey]=this,[2]}}))}))},e.prototype.drop=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return Yi.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),delete $i[this.indexerKey],[2]}}))}))},e.prototype.addItem=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=wi(this._origin)},e.prototype.abort=function(){this._table=wi(this._origin)},e}(),ts=function(){return"undefined"!=typeof document&&"undefined"!=typeof navigator&&"ReactNative"!==navigator.product},ns=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(Gi||(Gi={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Vi||(Vi={}));var rs,is={},ss=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=Gi.PROCESSING,this._queue=[],this._activationQueue=[],is[e]&&!t.forceCreate||(this.nodeId=ns(),this.key=e,ts()&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t,r,i=e.data,s=i.nodeId,a=i.requestId,o=i.key,u=i.op,c=i.data;if(s!==n.nodeId&&o===n.key)switch(u){case Vi.NEWNODE:n._sendSync();break;case Vi.CLAIM_HOST:n._sendSync(),n._hostId=s;break;case Vi.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);var l=c,d=l.currentItemRequestId,h=l.queue,f=function(e){var t=n._queue.findIndex((function(t){return t.requestId===e.requestId}));t<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:Vi.REQUEST_LOCK,ts:e.ts})};try{for(var p=Object(_bundle_0b1520ed["wc" /* t */])(h),m=p.next();!m.done;m=p.next()){f(m.value)}}catch(e){t={error:e}}finally{try{m&&!m.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}n._currentItem=n._queue.find((function(e){return e.requestId===d})),n._completeSync()}break;case Vi.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==i.nodeId})),n._currentItem&&n._currentItem.nodeId===i.nodeId&&(n._currentItem=void 0,n._acquire(n._queue[0]));break;case Vi.REQUEST_LOCK:n._requestLock(i);break;case Vi.ACQUIRE_LOCK:var y=n._queue.find((function(e){return e.requestId===a}));n._acquire(y);break;case Vi.RELEASE_LOCK:n._release(a)}})),window.addEventListener("beforeunload",(function(){n._send(Vi.REMOVENODE)}))),is[e]=this),is[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==Gi.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n;void 0===t&&(t={});var r={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:ns(),key:this.key,op:e,data:t.data,ts:Date.now()};return ts()&&window.postMessage(r,"*"),r},e.prototype._acquire=function(e){e?(this._currentItem=e,this._currentItem.onAcquired&&this._currentItem.onAcquired(e.requestId)):this._currentItem=void 0},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(Vi.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased&&t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(Vi.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},i=!1;for(var s in t._queue)if(t._queue[s].ts>r.ts){t._queue.splice(parseInt(s),0,r),i=!0;break}i||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(Vi.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=Gi.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Vi.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Vi.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(Vi.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)&&this._release(this._currentItem.requestId)},e}(),as=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.keyHash,s=e.indexes,a=e.store,o=this;this._state=Ii.INIT,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=Object(_bundle_0b1520ed["sc" /* p */])([[r]],Object(_bundle_0b1520ed["tc" /* q */])(s.filter((function(e){return es.createKey(e)!==o.keyName}))),!1),this._keyHash=i,this._store=a,this._mutex=new ss(function(e,t){return"".concat(zi(e,t),".lock")}(t,n)),this._blobContainer=new Qi({dbname:t,collectionName:n,store:a}),this._transaction=new Ji({dbname:t,collectionName:n,store:a})}return e.metadataOf=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return r=Bi(e,t),[4,n.get(r)];case 1:return[2,i.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===Ii.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f,y,_=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(g){switch(g.label){case 0:return[4,this._mutex.lock()];case 1:g.sent(),g.label=2;case 2:return g.trys.push([2,9,,10]),t=bi.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=g.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:g.sent(),this._blockManager=new Zi({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this.indexes),!1),i=[],s=r.map((function(e){return es.createKey(e)})),a=n?n.indexes.map((function(e){return es.createKey(e)})):[];try{for(o=Object(_bundle_0b1520ed["wc" /* t */])(a),u=o.next();!u.done;u=o.next())c=u.value,s.includes(c)||i.push(es.parseKey(c))}catch(e){f={error:e}}finally{try{u&&!u.done&&(y=o.return)&&y.call(o)}finally{if(f)throw f.error}}return(l=[]).push.apply(l,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r.map((function(e){var t=new es({dbname:_.dbname,collectionName:_.name,keyName:_.keyName,fields:e,transaction:_._transaction,store:_._store});return _._indexers.push(t),t.ensure()}))),!1)),l.push.apply(l,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(i.map((function(e){return new es({dbname:_.dbname,collectionName:_.name,keyName:_.keyName,fields:e,transaction:_._transaction,store:_._store}).drop()}))),!1)),[4,Promise.all(l)];case 5:return g.sent(),[4,this._transaction.commit()];case 6:return g.sent(),s.sort().join(",")===a.sort().join(",")?[3,8]:(d=Bi(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata})]);case 7:g.sent(),g.label=8;case 8:return this._state=Ii.READY,this._mutex.unlock(),[3,10];case 9:throw h=g.sent(),this._mutex.unlock(),h;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=Ii.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){var t,n;void 0===e&&(e=null),e||(e=[this.keyName]);var r=es.createKey(e);try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),s=i.next();!s.done;s=i.next()){var a=s.value;if(r===es.createKey(a.fields))return a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw Ei.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=Bi(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return o.sent()?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return o.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return o.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:o.sent(),o.label=5;case 5:o.trys.push([5,10,11,12]),n=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),r=n.next(),o.label=6;case 6:return r.done?[3,9]:[4,r.value.addItem(e)];case 7:o.sent(),o.label=8;case 8:return r=n.next(),[3,6];case 9:return[3,12];case 10:return i=o.sent(),s={error:i},[3,12];case 11:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw Ei.collectionInsertDuplicate;case 14:return[2]}}))}))},e.prototype._requestUpsert=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(p){switch(p.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=p.sent())?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return p.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return p.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:p.sent(),p.label=5;case 5:p.trys.push([5,10,11,12]),r=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),i=r.next(),p.label=6;case 6:return i.done?[3,9]:[4,(u=i.value).addItem(e)];case 7:p.sent(),p.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return s=p.sent(),l={error:s},[3,12];case 11:try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(l)throw l.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,e)];case 14:p.sent(),p.label=15;case 15:p.trys.push([15,21,22,23]),a=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),o=a.next(),p.label=16;case 16:return o.done?[3,20]:0===(u=o.value).diff(u.getColumnValues(n),u.getColumnValues(e))?[3,19]:[4,u.removeItem(n)];case 17:return p.sent(),[4,u.addItem(e)];case 18:p.sent(),p.label=19;case 19:return o=a.next(),[3,16];case 20:return[3,23];case 21:return c=p.sent(),h={error:c},[3,23];case 22:try{o&&!o.done&&(f=a.return)&&f.call(a)}finally{if(h)throw h.error}return[7];case 23:return[2]}}))}))},e.prototype._requestUpdate=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=c.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,11];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,9,10,11]),r=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),i=r.next(),c.label=4;case 4:return i.done?[3,8]:0===(s=i.value).diff(s.getColumnValues(n),s.getColumnValues(e))?[3,7]:[4,s.removeItem(n)];case 5:return c.sent(),[4,s.addItem(e)];case 6:c.sent(),c.label=7;case 7:return i=r.next(),[3,4];case 8:return[3,11];case 9:return a=c.sent(),o={error:a},[3,11];case 10:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 11:return[2]}}))}))},e.prototype._requestRemove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=o.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,10];case 2:o.sent(),o.label=3;case 3:o.trys.push([3,8,9,10]),n=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),r=n.next(),o.label=4;case 4:return r.done?[3,7]:[4,r.value.removeItem(t)];case 5:o.sent(),o.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return i=o.sent(),s={error:i},[3,10];case 9:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},e.prototype._requestClear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),e=Object(_bundle_0b1520ed["wc" /* t */])(this._indexers),t=e.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=e.next(),[3,3];case 6:return[3,9];case 7:return n=s.sent(),r={error:n},[3,9];case 8:try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}return[7];case 9:return[2]}}))}))},e.prototype.getByKey=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,wi(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw Ei.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){if(void 0===e&&(e={}),this.isReady)return new Fi({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward});throw Ei.collectionNotReady},e.prototype.insertOne=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Ei.collectionKeyNotGiven;return[4,this._requestInsert(wi(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Ei.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!u._hasPropertyOfKeyName(e)})))throw Ei.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestInsert(wi(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=c.sent(),a={error:i},[3,10];case 9:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(a)throw a.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Ei.collectionNotReady;case 16:return[2]}}))}))},e.prototype.upsertOne=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Ei.collectionKeyNotGiven;return[4,this._requestUpsert(wi(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Ei.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!u._hasPropertyOfKeyName(e)})))throw Ei.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestUpsert(wi(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=c.sent(),a={error:i},[3,10];case 9:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(a)throw a.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Ei.collectionNotReady;case 16:return[2]}}))}))},e.prototype.update=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Ei.collectionKeyNotGiven;return[4,this._requestUpdate(wi(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Ei.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l,d,h,f,p,m,y=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(_){switch(_.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:_.sent(),_.label=2;case 2:return _.trys.push([2,13,,15]),n=e.where,r=void 0===n?{}:n,i=e.index,s=void 0===i?null:i,a=e.backward,o=void 0!==a&&a,u=[],[4,new Li({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(s)}).each((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(y,void 0,void 0,(function(){var n,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(n=e.nextValue,Ai(r,n)&&t.set){if("function"!=typeof t.set)for(i in t.set)n[i]=t.set[i];else t.set(n);u.push(n)}e.next()}else e.stop();return[2]}))}))}))];case 3:_.sent(),_.label=4;case 4:_.trys.push([4,9,10,11]),c=Object(_bundle_0b1520ed["wc" /* t */])(u),l=c.next(),_.label=5;case 5:return l.done?[3,8]:(d=l.value,[4,this._requestUpdate(wi(d))]);case 6:_.sent(),_.label=7;case 7:return l=c.next(),[3,5];case 8:return[3,11];case 9:return h=_.sent(),p={error:h},[3,11];case 10:try{l&&!l.done&&(m=c.return)&&m.call(c)}finally{if(p)throw p.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return _.sent(),this._mutex.unlock(),[2,u];case 13:return f=_.sent(),[4,this._transaction.clear()];case 14:throw _.sent(),this._mutex.unlock(),f;case 15:return[3,17];case 16:throw this._transaction.clear(),Ei.collectionNotReady;case 17:return[2]}}))}))},e.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Ei.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f,p,m=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(y){switch(y.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:y.sent(),y.label=2;case 2:return y.trys.push([2,13,,14]),t=e.where,n=void 0===t?{}:t,r=e.index,i=void 0===r?null:r,s=e.backward,a=void 0!==s&&s,o=[],[4,new Li({condition:n,blockManager:this._blockManager,backward:a,indexer:this._getIndexerBy(i)}).each((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(m,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){if(e.error)throw e.stop(),e.error;return e.hasNext?(t=e.nextValue,Ai(n,t)&&(r=t[this.keyName],o.push(r)),e.next()):e.stop(),[2]}))}))}))];case 3:y.sent(),y.label=4;case 4:y.trys.push([4,9,10,11]),u=Object(_bundle_0b1520ed["wc" /* t */])(o),c=u.next(),y.label=5;case 5:return c.done?[3,8]:(l=c.value,[4,this._requestRemove(l)]);case 6:y.sent(),y.label=7;case 7:return c=u.next(),[3,5];case 8:return[3,11];case 9:return d=y.sent(),f={error:d},[3,11];case 10:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return y.sent(),this._mutex.unlock(),[2,o];case 13:throw h=y.sent(),this._mutex.unlock(),h;case 14:return[3,16];case 15:throw this._transaction.clear(),Ei.collectionNotReady;case 16:return[2]}}))}))},e.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw Ei.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),os="[NESTDB]",us=!0,cs=function(){function e(){}return e.off=function(){us=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];us&&console.log.apply(console,Object(_bundle_0b1520ed["sc" /* p */])(["".concat(os,"[LOG]")],Object(_bundle_0b1520ed["tc" /* q */])(e),!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];us&&console.warn.apply(console,Object(_bundle_0b1520ed["sc" /* p */])(["".concat(os,"[WARNING]")],Object(_bundle_0b1520ed["tc" /* q */])(e),!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];us&&console.error.apply(console,Object(_bundle_0b1520ed["sc" /* p */])(["".concat(os,"[ERROR]")],Object(_bundle_0b1520ed["tc" /* q */])(e),!1))},e}(),ls=[{},{a:700400,n:"error"}],ds=function(){function e(e){var t,n,r;this.encryption=null!==(t=e.encryption)&&void 0!==t?t:_bundle_0b1520ed["W" /* aN */],this.itemSizeLimit=null!==(n=e.itemSizeLimit)&&void 0!==n?n:4194304,this.metadataBuffer=null!==(r=e.metadataBuffer)&&void 0!==r?r:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(e,t){return void 0===t&&(t=""),"".concat(e).concat(t)},e.prototype._generateShardPostfixArray=function(e){return void 0===e&&(e=1),Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(Array(e).keys()),!1)},e.prototype._shardify=function(e){var t=this,n=e.key,r=e.value,i=JSON.stringify(this.encryption.encrypt(r)),s=Math.ceil(i.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map((function(e){var r={key:t._getRawKey(n,".".concat(e)),data:i.substring(e*t.adjustedItemSizeLimit,(e+1)*t.adjustedItemSizeLimit)};return 0===e&&(r.metadata={shards:s}),r}))},e.prototype._resetIfEncryptionChanged=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u,c=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(e=l.sent(),t={encrypted:ls.map((function(e){var t;return null===(t=c.encryption)||void 0===t?void 0:t.encrypt(e)}))},!(e&&e.encrypted&&Array.isArray(e.encrypted)))return[3,6];for(i in n=e.encrypted,r=[],n)r.push(i);s=0,l.label=2;case 2:return s<r.length?(i=r[s])in n?(a=i,o=JSON.stringify(e.encrypted[a]),u=JSON.stringify(t.encrypted[a]),o===u?[3,4]:(cs.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return l.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return[4,this.clear()];case 7:l.sent(),l.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 9:return l.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return e=0,[4,this._getAllRawKeys()];case 1:t=c.sent(),c.label=2;case 2:c.trys.push([2,7,8,9]),n=Object(_bundle_0b1520ed["wc" /* t */])(t),r=n.next(),c.label=3;case 3:return r.done?[3,6]:(i=r.value,[4,this._getRaw(i)]);case 4:(s=c.sent())&&(e+=JSON.stringify(s).length),c.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return a=c.sent(),o={error:a},[3,9];case 8:try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(o)throw o.error}return[7];case 9:return[2,e]}}))}))},e.prototype.getAllKeys=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter((function(e){return e.endsWith(".0")})).map((function(e){return e.replace(/\.0$/,"")})).filter((function(t){return!e._reservedKeys.includes(t)}))]}}))}))},e.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:if(!(n=u.sent()))return[3,7];u.label=2;case 2:return u.trys.push([2,6,,7]),r=n.data,(null==(i=n.metadata)?void 0:i.shards)&&i.shards>1?[4,Promise.all(this._generateShardPostfixArray(null==i?void 0:i.shards).map((function(t){return Object(_bundle_0b1520ed["B" /* _ */])(o,void 0,void 0,(function(){var n,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t>0?(n=this._getRawKey(e,".".concat(t)),[4,this._getRaw(n)]):[3,2];case 1:if(!(i=s.sent()))throw Ei.storeBrokenIntegrity;return[2,i.data];case 2:return[2,r]}}))}))})))]:[3,4];case 3:return a=u.sent(),[3,5];case 4:a=[r],u.label=5;case 5:return s=a,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return u.sent(),[2,null];case 7:return[2,null]}}))}))},e.prototype.set=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return t=this._shardify(e),[4,this._setRaw(t)];case 1:return n.sent(),[2,Object(_bundle_0b1520ed["jc" /* g */])({},e.value)]}}))}))},e.prototype.setMany=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(e.map((function(e){return n._shardify(e)}))),!1)))];case 1:return r.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:return(n=s.sent())?(r=n.metadata,[4,this._removeRaw(this._generateShardPostfixArray(null==r?void 0:r.shards).map((function(t){return i._getRawKey(e,".".concat(t))})))]):[3,3];case 2:return s.sent(),[2,!0];case 3:return[2,!1]}}))}))},e.prototype.removeMany=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:t=[],n=function(e){var n,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return n=r._getRawKey(e,".0"),[4,r._getRaw(n)];case 1:return(i=a.sent())&&(s=i.metadata,t.push.apply(t,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r._generateShardPostfixArray(null==s?void 0:s.shards).map((function(t){return l._getRawKey(e,".".concat(t))}))),!1))),[2]}}))},r=this,d.label=1;case 1:d.trys.push([1,6,7,8]),i=Object(_bundle_0b1520ed["wc" /* t */])(e),s=i.next(),d.label=2;case 2:return s.done?[3,5]:(a=s.value,[5,n(a)]);case 3:d.sent(),d.label=4;case 4:return s=i.next(),[3,2];case 5:return[3,8];case 6:return o=d.sent(),u={error:o},[3,8];case 7:try{s&&!s.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}return[7];case 8:return t.length>0?[4,this._removeRaw(t)]:[3,10];case 9:d.sent(),d.label=10;case 10:return[2,e]}}))}))},e}(),hs={},fs=function(e){function t(t){void 0===t&&(t={});var n,r=this;r=e.call(this,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:4194304}))||this;var i=t.delay,s=void 0===i?1:i;return r.delay=s,r.observer={},r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"rawData",{get:function(){return hs[this.dbname]},set:function(e){hs[this.dbname]=e},enumerable:!1,configurable:!0}),t.prototype._getAllRawKeys=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){if(hs[this.dbname])return[2,Object.keys(hs[this.dbname])];throw Ei.storeNotAvailable}))}))},t.prototype._getRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return hs[this.dbname]?[4,Ui(this.delay)]:[3,2];case 1:return t.sent(),[2,hs[this.dbname][e]?Object(_bundle_0b1520ed["jc" /* g */])({key:e},hs[this.dbname][e]):null];case 2:throw Ei.storeNotAvailable}}))}))},t.prototype._setRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return hs[this.dbname]?[4,Ui(this.delay)]:[3,2];case 1:c.sent();try{for(t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,s=r.data,a=r.metadata,hs[this.dbname][i]=Object.freeze({data:s,metadata:a})}catch(e){o={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(o)throw o.error}}return[3,3];case 2:throw Ei.storeNotAvailable;case 3:return[2]}}))}))},t.prototype._removeRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return hs[this.dbname]?[4,Ui(this.delay)]:[3,2];case 1:a.sent();try{for(t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next();!n.done;n=t.next())r=n.value,hs[this.dbname][r]&&delete hs[this.dbname][r]}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[3,3];case 2:throw Ei.storeNotAvailable;case 3:return[2]}}))}))},t.prototype.observe=function(e,t,n){var r=this;this.observer[e]||(this.observer[e]={}),t.forEach((function(t){return r.observer[e][t]=n}))},t.prototype.checkAvailability=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2]}))}))},t.prototype.init=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,hs[this.dbname]||(hs[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.set=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){if((n=this.observer[t.key])&&"function"==typeof n.set&&(r=n.set()))throw r;return[2,e.prototype.set.call(this,t)]}))}))},t.prototype.setMany=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){try{for(n=Object(_bundle_0b1520ed["wc" /* t */])(t),r=n.next();!r.done;r=n.next())if(i=r.value,(s=this.observer[i.key])&&"function"==typeof s.set&&(a=s.set()))throw a}catch(e){o={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(o)throw o.error}}return[2,e.prototype.setMany.call(this,t)]}))}))},t.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,Ui(this.delay)];case 1:return e.sent(),hs[this.dbname]={},[2]}}))}))},t}(ds),ps="NestDBStore";!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"}(rs||(rs={}));var ms=function(e){function t(t){void 0===t&&(t={});var n,r=this;return(r=e.call(this,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:104857600}))||this)._storeName=ps,r._state=rs.UNINITIALIZED,r._openJobQueue=[],r._window="undefined"!=typeof window?window:void 0,r._indexedDb=r._window?r._window.indexedDB||r._window.mozIndexedDB||r._window.webkitIndexedDB||r._window.msIndexedDB:void 0,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTransactionReusable",{get:function(){var e=null===navigator||void 0===navigator?void 0:navigator.userAgent;if(e){var t="15.0.0";if(e.includes("Safari/")?t=e.split("Safari/")[0].trim().split("Version/")[1]:e.includes("AppleWebKit/")&&(t=e.split("AppleWebKit/")[0].trim().split("Version/")[1]),(t?parseInt(t.split(".")[0]):0)<=14)return!1}return!0},enumerable:!1,configurable:!0}),t.prototype._putToObjectStore=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return[2,new Promise((function(n,r){var i=e.put(t);i.addEventListener("success",(function(e){n(e.target.result)})),i.addEventListener("error",(function(){r("Failed to write.")}))}))]}))}))},t.prototype._deleteFromObjectStore=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return[2,new Promise((function(n,r){var i=e.delete(t);i.addEventListener("success",(function(){return n(t)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))]}))}))},t.prototype._openDatabase=function(e){var t=this;return new Promise((function(n,r){if(t._indexedDb){t._state=rs.OPENING;var i=t._indexedDb.open(e);i.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(ps,{keyPath:"key"})})),i.addEventListener("success",(function(r){t._state=rs.OPEN,t._database=r.target.result,t._openJobQueue.forEach((function(e){return e()})),t._openJobQueue=[],t._database.onclose=function(){t._database=void 0,t._state=rs.OPENING,setTimeout((function(){t._openDatabase(e)}),5)},n(t._database)})),i.addEventListener("error",(function(e){t._state=rs.UNINITIALIZED,r(e.target.error)}))}else r(Ei.storeNotAvailable)}))},t.prototype._getObjectStore=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this._database?[2,this._database.transaction(this._storeName,e).objectStore(this._storeName)]:[3,1];case 1:switch(this._state){case rs.UNINITIALIZED:case rs.OPEN:return[3,2];case rs.OPENING:case rs.CLOSED:return[3,3]}return[3,4];case 2:throw Ei.storeNotInitialized;case 3:return[2,new Promise((function(n){t._openJobQueue.push((function(){return n(t._getObjectStore(e))}))}))];case 4:return[4,this._getObjectStore(e)];case 5:return[2,n.sent()]}}))}))},t.prototype._getAllRawKeys=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.getAllKeys();r.addEventListener("success",(function(e){t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},t.prototype._getRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return t=n.sent(),[4,new Promise((function(n,r){var i=t.get(e);i.addEventListener("success",(function(e){var t;n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.result)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 2:return[2,n.sent()]}}))}))},t.prototype._setRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=c.sent(),this.isTransactionReusable?[4,Promise.all(e.map((function(e){return u._putToObjectStore(t,e)})))]:[3,3];case 2:return c.sent(),[3,10];case 3:c.trys.push([3,8,9,10]),n=Object(_bundle_0b1520ed["wc" /* t */])(e),r=n.next(),c.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._putToObjectStore(t,i)]);case 5:c.sent(),c.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s=c.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}return[7];case 10:return[2]}}))}))},t.prototype._removeRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=c.sent(),this.isTransactionReusable?[4,Promise.all(e.map((function(e){return u._deleteFromObjectStore(t,e)})))]:[3,3];case 2:return c.sent(),[3,10];case 3:c.trys.push([3,8,9,10]),n=Object(_bundle_0b1520ed["wc" /* t */])(e),r=n.next(),c.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._deleteFromObjectStore(t,i)]);case 5:c.sent(),c.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s=c.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}return[7];case 10:return[2]}}))}))},t.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},t.prototype.checkAvailability=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:if(!((null==(e="undefined"!=typeof window?window:null)?void 0:e.indexedDB)||(null==e?void 0:e.mozIndexedDB)||(null==e?void 0:e.webkitIndexedDB)||(null==e?void 0:e.msIndexedDB)))return[3,6];if(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,!this._window||!ts())return[3,4];if(!(ts()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw Ei.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise((function(e,n){if(t._indexedDb)try{var r=t._indexedDb.open("_testMozilla");r.onerror=function(){return n(Ei.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(r){if(r.target.result.close(),t._indexedDb){var i=t._indexedDb.deleteDatabase("_testMozilla");i.onerror=function(){return e()},i.onsuccess=function(){return e()}}else n(Ei.storeNotAvailable)}}catch(e){n(Ei.storeNotAvailableInPrivateBrowsing)}else n(Ei.storeNotAvailable)}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:throw Ei.storeNotAvailable;case 5:return[3,7];case 6:throw Ei.storeNotAvailable;case 7:return[2]}}))}))},t.prototype.init=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return t.sent(),[4,this._openDatabase(e)];case 2:return t.sent(),[4,this._resetIfEncryptionChanged()];case 3:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},t}(ds),vs=function(e){function t(t){var n=this,r=t.AsyncStorage,i=t.itemSizeLimit,s=void 0===i?6291456:i,a=Object(_bundle_0b1520ed["X" /* aO */])(t,["AsyncStorage","itemSizeLimit"]);return(n=e.call(this,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},a),{itemSizeLimit:s}))||this)._asyncStorage=r,n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return e=n.sent(),[2,e.filter((function(e){return t._isBelonging(e)})).map((function(e){return e.substring("".concat(t.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:t=[];try{for(n=Object(_bundle_0b1520ed["wc" /* t */])(e),r=n.next();!r.done;r=n.next())i=r.value,s=i.key,i.data.length<=this.adjustedItemSizeLimit&&t.push([this._getActualKey(s),JSON.stringify(i)])}catch(e){a={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}}return[4,this._asyncStorage.multiSet(t)];case 1:return u.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(e){return t._getActualKey(e)})))];case 1:return n.sent(),[2]}}))}))},t.prototype.checkAvailability=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){if(!this._asyncStorage)throw Ei.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},t}(ds);!function(e){function t(t){var n,r=this;return(r=e.call(this,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:6291456}))||this)._mmkv=t.MMKV,r}Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return e=n.sent(),[2,e.filter((function(e){return t._isBelonging(e)})).map((function(e){return e.substring("".concat(t.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){try{for(t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,r.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(i),JSON.stringify(r))}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return[2]}))}))},t.prototype._removeRaw=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){try{for(t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next();!n.done;n=t.next())r=n.value,this._mmkv.delete(this._getActualKey(r))}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[2]}))}))},t.prototype.checkAvailability=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){if(!this._mmkv)throw Ei.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},t.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))}}(ds);var ys;!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(ys||(ys={}));var _bundle_dc8db3c3_s,gs=function(){function e(e){var t=e.name,n=e.version,r=e.store,i=e.config;this.name=t,this._version=n,this._state=ys.INIT,this._config=i||new bi({dbname:t}),this._store=r,this._event={success:Ni,error:Ni,storeReplaced:Ni,upgrade:Pi},this._collections=new Map,this._globalMutex=new ss("".concat(this.name,".lock")),this._config.disableLogger&&cs.off(),new Yi({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,(t=this._store,Object(_bundle_0b1520ed["B" /* _ */])(void 0,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,t.usage()];case 1:return[2,e.sent()]}}))})))];case 1:return[2,e.sent()]}var t}))}))},e.prototype.commitSchema=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this._state!==ys.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,i=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new as({dbname:this.name,collectionName:t,keyName:n,indexes:i,store:this._store})),(s=this._collections.get(t))?[4,s.init()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw Ei.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return[4,this._globalMutex.lock()];case 1:if(a.sent(),this._state===ys.OPENED)return[3,12];this._state=ys.OPENING,a.label=2;case 2:return a.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return a.sent(),o=this.name,t="".concat(qi(o),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=a.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var i=function(e){r.version<s._version?s._event.upgrade(r.version,(function(n){return Object(_bundle_0b1520ed["B" /* _ */])(s,void 0,void 0,(function(){var i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r})];case 2:return s.sent(),e({continued:!0}),[3,4];case 3:return i=s.sent(),e({continued:!1,err:i}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),s.label=6;case 6:return[2]}}))}))})):e({continued:!1})},a=function(t){var o=t.continued,u=void 0!==o&&o,c=t.err,l=void 0===c?null:c;if(u)setTimeout((function(){return i(a)}),10);else if(l)cs.error(l.message),s._globalMutex.unlock(),s._event.error(l),n(l);else{var d=[];r.collectionNames.forEach((function(e){var t=s._collections.get(e);t&&t.state===Ii.READY||d.push(Object(_bundle_0b1520ed["B" /* _ */])(s,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return[4,as.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new as({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){s._state=ys.OPENED,s._globalMutex.unlock(),s._event.success(),e()})).catch((function(e){cs.error(e.message),s._globalMutex.unlock(),s._event.error(e),n(e)}))}};i(a)}))];case 5:switch(i=a.sent(),i.code){case si.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case si.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return cs.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new fs({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 7:return a.sent(),[3,11];case 8:return cs.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new fs({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 9:return a.sent(),[3,11];case 10:throw cs.error(i.message),this._globalMutex.unlock(),this._event.error(i),i;case 11:return[3,12];case 12:return[2]}var o}))}))},e.prototype.close=function(){this._collections.forEach((function(e){return e.close()})),this._state=ys.CLOSED},e.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return e.sent(),[2]}}))}))},e.prototype.reset=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.close(),(e=Yi.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(qi(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){if("function"==typeof this._event[e])if("upgrade"===e)this._event[e]=Pi;else this._event[e]=Ni},e.prototype.collection=function(e){var t=this._collections.get(e);if(t)return t;throw Ei.collectionNotReady},e}(),bs=function(){function e(e){var t,n,r,i;this.messageTypeFilter=null!==(t=null==e?void 0:e.messageTypeFilter)&&void 0!==t?t:_bundle_0b1520ed["xb" /* ap */].ALL,this.customTypesFilter=null!==(n=null==e?void 0:e.customTypesFilter)&&void 0!==n?n:null,this.senderUserIdsFilter=null!==(r=null==e?void 0:e.senderUserIdsFilter)&&void 0!==r?r:null,this.replyType=null!==(i=null==e?void 0:e.replyType)&&void 0!==i?i:_bundle_0b1520ed["Fb" /* ax */].NONE}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){switch(this.messageTypeFilter){case _bundle_0b1520ed["xb" /* ap */].USER:if(e.messageType!==_bundle_0b1520ed["ob" /* ag */].USER)return!1;break;case _bundle_0b1520ed["xb" /* ap */].FILE:if(e.messageType!==_bundle_0b1520ed["ob" /* ag */].FILE)return!1;break;case _bundle_0b1520ed["xb" /* ap */].ADMIN:if(e.messageType!==_bundle_0b1520ed["ob" /* ag */].ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(e.customType))return!1;if(this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0){if(!(e instanceof _bundle_dc8db3c3_ft))return!1;if(!this.senderUserIdsFilter.includes(e.sender.userId))return!1}if(e instanceof _bundle_dc8db3c3_ht)switch(this.replyType){case _bundle_0b1520ed["Fb" /* ax */].NONE:if(e.parentMessageId>0)return!1;break;case _bundle_0b1520ed["Fb" /* ax */].ONLY_REPLY_TO_CHANNEL:if(e instanceof _bundle_dc8db3c3_ft&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},e}();!function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"}(_bundle_dc8db3c3_s||(_bundle_dc8db3c3_s={}));var Is,Es=function(e){switch(e){case _bundle_dc8db3c3_s.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case _bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},Ts=function(){return["channelUrl","-createdAt","-notificationId"]},ws=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_$t),{scheduledAt:void 0}),Ss=function(e){return _bundle_dc8db3c3_rn(e)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.scheduledAt,!0)},Ms=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Jt),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),Us=function(e){return _bundle_dc8db3c3_Xt(e)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.scheduledAt)&&(Object(_bundle_0b1520ed["lc" /* i */])(e.file)||Object(_bundle_0b1520ed["C" /* a */])("string",e.fileUrl))&&Object(_bundle_0b1520ed["C" /* a */])("string",e.fileName,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.mimeType,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(_bundle_0b1520ed["C" /* a */])("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},As="UnsentMessage",Ns="reqId",ks={},Cs=function(t){function i(e){var n=t.call(this,e)||this;return n._mutex=new ss("unsendmessagecache.lock"),ks[e]=n,n}return Object(_bundle_0b1520ed["fc" /* c */])(i,t),Object.defineProperty(i.prototype,"_cacheContext",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),i.of=function(e,t){return void 0===t&&(t=!1),ks[e]&&!t||(ks[e]=new i(e)),ks[e]},Object.defineProperty(i.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb,t=null==e?void 0:e.collection(As);if(!t)throw _bundle_0b1520ed["vc" /* s */].databaseError;return t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),i.prototype._serialize=function(t){if(t.messageId>0)throw _bundle_0b1520ed["vc" /* s */].invalidParameters;var n,r=Object(_bundle_0b1520ed["jc" /* g */])({},t.serialize());return t instanceof _bundle_dc8db3c3_gt?(t.messageParams&&(r.messageParams=_bundle_dc8db3c3_Zt(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(r.scheduledInfo.scheduledMessageParams=(n=t.scheduledInfo.scheduledMessageParams,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_Zt(n)),{scheduledAt:n.scheduledAt})))):t instanceof wt?(t.messageParams&&(r.messageParams=_bundle_dc8db3c3_on(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(r.scheduledInfo.scheduledMessageParams=function(e){return Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_on(e)),{scheduledAt:e.scheduledAt})}(t.scheduledInfo.scheduledMessageParams))):t instanceof _bundle_dc8db3c3_bt&&t.messageParams&&(r.messageParams=function(t){return Object(_bundle_0b1520ed["hc" /* e */])({fileInfoList:t.fileInfoList,isReplyToChannel:t.isReplyToChannel,pushNotificationDeliveryOption:t.pushNotificationDeliveryOption})}(t.messageParams)),r},i.prototype._deserialize=function(e){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{messageId:parseInt(e.messageId)}),js.of(this._iid).buildMessageFromSerializedData(e)},i.prototype._deserializeWithMessageCreateParams=function(e){var t,n,r;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o,u,c,l=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return i=js.of(this._iid),s=this._deserialize(e),e.messageParams?s instanceof _bundle_dc8db3c3_gt?(o=e.messageParams,s.messageParams=i.buildUserMessageCreateParamsFromSerializedData(o,s),[3,6]):[3,1]:[3,6];case 1:return s instanceof wt?(o=e.messageParams).fileKey&&"string"==typeof o.fileKey&&_bundle_dc8db3c3_an(null!==(t=o.fileType)&&void 0!==t?t:"")?(a=o,[4,this.collection.getBlob(o.fileKey)]):[3,3]:[3,4];case 2:a.file=null!==(n=d.sent())&&void 0!==n?n:void 0,d.label=3;case 3:return s.messageParams=i.buildFileMessageCreateParamsFromSerializedData(o,s),[3,6];case 4:return s instanceof _bundle_dc8db3c3_bt&&((o=e.messageParams)&&o.fileInfoList)?(s.messageParams=i.buildMultipleFilesMessageCreateParamsFromSerializedData(o,s),[4,Promise.all(s.messageParams.fileInfoList.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(l,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return"string"==typeof(null===(n=e._uploadedMetaData)||void 0===n?void 0:n.fileKey)&&_bundle_dc8db3c3_an(null!==(i=null===(r=e._uploadedMetaData)||void 0===r?void 0:r.fileType)&&void 0!==i?i:"")?(t=e,[4,this.collection.getBlob(e._uploadedMetaData.fileKey)]):[3,2];case 1:t.file=null!==(s=a.sent())&&void 0!==s?s:void 0,a.label=2;case 2:return[2]}}))}))})))]):[3,6];case 5:d.sent(),d.label=6;case 6:return s.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?s instanceof _bundle_dc8db3c3_gt?(u=e.scheduledInfo.scheduledMessageParams,s.scheduledInfo.scheduledMessageParams=i.buildScheduledUserMessageCreateParamsFromSerializedData(u,s),[3,10]):[3,7]:[3,10];case 7:return s instanceof wt?(u=e.scheduledInfo.scheduledMessageParams).fileKey&&"string"==typeof u.fileKey&&"string"==typeof u.fileType&&_bundle_dc8db3c3_an(u.fileType)?(c=u,[4,this.collection.getBlob(u.fileKey)]):[3,9]:[3,10];case 8:c.file=null!==(r=d.sent())&&void 0!==r?r:void 0,d.label=9;case 9:s.scheduledInfo.scheduledMessageParams=i.buildScheduledFileMessageCreateParamsFromSerializedData(u,s),d.label=10;case 10:return[2,s]}}))}))},i.prototype._getFileInfoBlobKey=function(e,t){return"".concat(e,".").concat(t)},i.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserializeWithMessageCreateParams(t)];n.label=2;case 2:return[2,void 0]}}))}))},i.prototype.fetch=function(e){var t=e.channelUrl,n=e.filter,r=void 0===n?new bs:n,i=e.order,s=void 0===i?_bundle_dc8db3c3_s.CHANNEL_LATEST:i,a=e.sendingStatus,o=e.backward,u=void 0!==o&&o,c=e.parentMessageId;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n,i,o,l=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return this.localCacheEnabled?(e=Es(s),n={"/where":function(e){return!!(s!==_bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE||c&&0!==e.parentMessageId&&e.parentMessageId===c)&&r.match(l._deserialize(e))}},t&&(n.channelUrl=t),a&&(n.sendingStatus=a),i={where:n,index:e,backward:u},[4,this.collection.query(i)]):[3,3];case 1:return[4,d.sent().fetch({})];case 2:return o=d.sent(),[2,Promise.all(o.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(l,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._deserializeWithMessageCreateParams(e)];case 1:return[2,t.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},i.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new bs),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this.fetch({filter:t,order:_bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},i.prototype.upsert=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return e instanceof wt||e instanceof _bundle_dc8db3c3_bt?[4,this._mutex.lock()]:[3,4];case 1:return n.sent(),[4,this.saveBlob(e)];case 2:return n.sent(),[4,this._mutex.unlock()];case 3:n.sent(),n.label=4;case 4:return t=this._serialize(e),[4,this.collection.upsertOne(t)];case 5:return n.sent(),[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},i.prototype.upsertChildMessages=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return t=[],e.threadInfo&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=n.sent(),n.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},i.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=o.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},i.prototype.removeMessagesOfChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},i.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},i.prototype.saveBlob=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e instanceof wt?e.messageParams&&(r=e.messageParams).file&&_bundle_dc8db3c3_sn(r.file)?[4,this.collection.saveBlob(r.file,e.reqId)]:[3,2]:[3,5];case 1:n=s.sent(),r.fileKey=n,r.fileType=_bundle_dc8db3c3_tn.BLOB,s.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&((t=e.scheduledInfo.scheduledMessageParams).file&&_bundle_dc8db3c3_sn(t.file))?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,4];case 3:n=s.sent(),t.fileKey=n,t.fileType=_bundle_dc8db3c3_tn.BLOB,s.label=4;case 4:return[3,7];case 5:return e instanceof _bundle_dc8db3c3_bt&&((r=e.messageParams)&&r.fileInfoList&&Array.isArray(r.fileInfoList))?[4,Promise.all(r.fileInfoList.map((function(t,n){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){var r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return t.file&&_bundle_dc8db3c3_sn(t.file)?[4,this.collection.saveBlob(t.file,this._getFileInfoBlobKey(e.reqId,n))]:[3,2];case 1:r=i.sent(),t._uploadedMetaData||(t._uploadedMetaData={}),t._uploadedMetaData.fileKey=r,t._uploadedMetaData.fileType=_bundle_dc8db3c3_tn.BLOB,i.label=2;case 2:return[2]}}))}))})))]:[3,7];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))},i}(_bundle_0b1520ed["mb" /* ae */]),Ps={},Os=function(e){function t(t){var n=e.call(this,t)||this;return Ps[t]=n,n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"_sdkState",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return Cs.of(this._iid)},enumerable:!1,configurable:!0}),t.of=function(e,n){return void 0===n&&(n=!1),Ps[e]&&!n||(Ps[e]=new t(e)),Ps[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(_bundle_0b1520ed["zc" /* w */])(!!e).throw(_bundle_0b1520ed["vc" /* s */].databaseError),e.collection(jr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){return Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e.serialize()),{messageId:"".concat(e.messageId)})},t.prototype._deserialize=function(e){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{messageId:parseInt(e.messageId)}),js.of(this._iid).buildMessageFromSerializedData(e)},t.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,void 0]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,i=void 0===r?100:r,s=e.filter,a=void 0===s?new bs:s,o=e.order,u=void 0===o?_bundle_dc8db3c3_s.CHANNEL_LATEST:o,c=e.backward,l=void 0!==c&&c,d=e.parentMessageId,h=e.isPollOnly,f=void 0!==h&&h,p=e.exactMatch,m=void 0!==p&&p,v=e.inclusive,y=void 0===v||v;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,r,s,o=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this.localCacheEnabled?(e=Es(u),r={where:{channelUrl:t,"/where":function(e){if(n)switch(u){case _bundle_dc8db3c3_s.CHANNEL_LATEST:if(m&&e.createdAt!==n)return!1;if(l){if(y&&e.createdAt<n||!y&&e.createdAt<=n)return!1}else if(y&&e.createdAt>n||!y&&e.createdAt>=n)return!1;break;case _bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE:if(!d||0===e.parentMessageId||e.parentMessageId!==d)return!1}return!(f&&!e._poll)&&a.match(o._deserialize(e))}},index:e,backward:l},[4,this.collection.query(r)]):[3,3];case 1:return[4,c.sent().fetch({limit:null!=i?i:void 0})];case 2:return s=c.sent(),[2,Promise.all(s.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(o,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this._deserialize(e)]}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new bs),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:t,order:_bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,13];case 1:d.sent(),d.label=2;case 2:d.trys.push([2,7,8,9]),n=Object(_bundle_0b1520ed["wc" /* t */])(e),r=n.next(),d.label=3;case 3:return r.done?[3,6]:(i=r.value,(null===(t=i.threadInfo)||void 0===t?void 0:t._isUpdateRequired)?[4,this.get(i.messageId)]:[3,5]);case 4:(null==(s=d.sent())?void 0:s.threadInfo)&&i.threadInfo._updateFrom(s.threadInfo),d.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return a=d.sent(),u={error:a},[3,9];case 8:try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}return[7];case 9:return o=e.map((function(e){return l._serialize(e)})),[4,this.collection.upsertMany(o)];case 10:return d.sent(),[4,this.upsertChildMessages(e)];case 11:return d.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 12:d.sent(),d.label=13;case 13:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove("".concat(r))]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=o.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:Es(_bundle_dc8db3c3_s.CHANNEL_LATEST)})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.prototype.removeUnderOffset=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:Es(_bundle_dc8db3c3_s.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.countBetween=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return this.localCacheEnabled?(r=Es(_bundle_dc8db3c3_s.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=i._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,s.sent()];case 2:return[2,0]}}))}))},t.prototype.saveBlobs=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e instanceof wt&&e.messageParams&&((t=e.messageParams).file&&_bundle_dc8db3c3_sn(t.file))?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2];case 1:n=r.sent(),t.fileKey=n,r.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[2]}}))}))},t.prototype._getGroupChannelPreferenceSize=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return t=0,[4,(n=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return r=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return i=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return s=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return a=o.sent(),r&&(t+=JSON.stringify(r).length),i&&(t+=JSON.stringify(i).length),s&&(t+=JSON.stringify(s).length),a&&(t+=JSON.stringify(a).length),[2,t]}}))}))},t}(_bundle_0b1520ed["mb" /* ae */]),Rs={},xs=function(e){function t(t){var n=e.call(this,t)||this;return Rs[t]=n,n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"_sdkState",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),t.of=function(e,n){return void 0===n&&(n=!1),Rs[e]&&!n||(Rs[e]=new t(e)),Rs[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(_bundle_0b1520ed["zc" /* w */])(!!e).throw(_bundle_0b1520ed["vc" /* s */].databaseError),e.collection(Vr)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){return Object(_bundle_0b1520ed["jc" /* g */])({},e.serialize())},t.prototype._deserialize=function(e){return js.of(this._iid).buildMessageFromSerializedData(e)},t.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,void 0]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,i=void 0===r?100:r,s=e.filter,a=void 0===s?new bs:s,o=e.backward,u=void 0!==o&&o,c=e.exactMatch,l=void 0!==c&&c,d=e.inclusive,h=void 0===d||d;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,r=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return this.localCacheEnabled?(e={where:{channelUrl:t,"/where":function(e){if(n){if(l&&e.createdAt!==n)return!1;if(u){if(h&&e.createdAt<n||!h&&e.createdAt<=n)return!1}else if(h&&e.createdAt>n||!h&&e.createdAt>=n)return!1}return a.match(r._deserialize(e))}},index:["channelUrl","-createdAt","-notificationId"],backward:u},[4,this.collection.query(e)]):[3,3];case 1:return[4,s.sent().fetch({limit:null!=i?i:void 0})];case 2:return[2,s.sent().map((function(e){return r._deserialize(e)}))];case 3:return[2,[]]}}))}))},t.prototype.upsert=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?(t=e.map((function(e){return n._serialize(e)})),[4,this.collection.upsertMany(t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=o.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},t.prototype.markAsReadByTimestamp=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:e,messageStatus:_bundle_dc8db3c3_dt.SENT,createdAt:{"<":t}}},{set:{messageStatus:_bundle_dc8db3c3_dt.READ}})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.markAsReadByMessageIds=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:e,notificationId:{"/in":t},messageStatus:_bundle_dc8db3c3_dt.SENT}},{set:{messageStatus:_bundle_dc8db3c3_dt.READ}})]:[3,2];case 1:return[2,n.sent().length];case 2:return[2,0]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:["channelUrl","-createdAt","-notificationId"]})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.prototype.removeUnderOffset=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:Es(_bundle_dc8db3c3_s.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.countBetween=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return this.localCacheEnabled?(r=["channelUrl","-createdAt","-notificationId"],[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=i._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,s.sent()];case 2:return[2,0]}}))}))},t}(_bundle_0b1520ed["mb" /* ae */]),Ds={},Ls=function(e){function t(t){var n=e.call(this,t)||this;return n._observers=new Map,n._dispatcherContext=n._dispatcher.on((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f,p,m,v,y,_,g,b=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(E){switch(E.label){case 0:return e instanceof _bundle_0b1520ed["ub" /* am */]?(t=e.messages,g=e.source,a=e.isWebSocketEventComing,n=t.filter((function(e){return e instanceof _bundle_dc8db3c3_ht&&e.channelType!==_bundle_0b1520ed["d" /* C */].OPEN&&e.messageId>0})),r=t.filter((function(e){return e instanceof _bundle_dc8db3c3_ht&&e.channelType!==_bundle_0b1520ed["d" /* C */].OPEN&&0===e.messageId})),i=t.filter((function(e){return e instanceof It})),n.length>0?[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(n)];case 1:return e.sent(),[4,this._unsentMessageCache.remove(n.map((function(e){return e instanceof _bundle_dc8db3c3_ft?e.reqId:null})).filter((function(e){return null!==e})))];case 2:return e.sent(),[2]}}))}))}))]:[3,2]):[3,7];case 1:E.sent(),a||this._broadcastUpdateEvent(n,g),E.label=2;case 2:return r.length>0?[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.upsert(r)];case 1:return e.sent(),[2]}}))}))}))]:[3,4];case 3:E.sent(),a||this._broadcastUpdateEvent(r,g),E.label=4;case 4:return i.length>0?[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._notificationCache.upsert(i)];case 1:return e.sent(),[2]}}))}))}))]:[3,6];case 5:E.sent(),a||this._broadcastUpdateEvent(i,g),E.label=6;case 6:return[3,24];case 7:return e instanceof _bundle_0b1520ed["db" /* aU */]?(s=e.messageIds,g=e.source,a=e.isWebSocketEventComing,o=s.filter((function(e){return"number"==typeof e})),u=s.filter((function(e){return"string"==typeof e})),[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return o.length>0?[4,this._messageCache.remove(o)]:[3,2];case 1:e.sent(),e.label=2;case 2:return u.length>0?[4,this._notificationCache.remove(u)]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}))]):[3,9];case 8:return E.sent(),a||this._broadcastRemoveEvent(s,g),[3,24];case 9:return e instanceof _bundle_0b1520ed["cb" /* aT */]?(c=e.reqId,g=e.source,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.remove([c])];case 1:return e.sent(),[2]}}))}))}))]):[3,11];case 10:return E.sent(),this._broadcastRemoveUnsentEvent(c,g),[3,24];case 11:return e instanceof _bundle_0b1520ed["bb" /* aS */]?(l=e.polls,g=e.source,this._cacheContext.localCacheEnabled?(d=l.map((function(e){return e.messageId})),[4,Promise.all(d.map((function(e){return b._messageCache.get(e)})))]):[3,14]):[3,15];case 12:return(h=E.sent().filter((function(e){return e}))).length>0&&l.forEach((function(e){var t=h.find((function(t){return t.messageId===e.messageId}));t&&t.applyPoll(e)})),[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(h)];case 1:return[2,e.sent()]}}))}))}))];case 13:E.sent(),E.label=14;case 14:return this._broadcastPollChangeLogEvent(l,g),[3,24];case 15:return e instanceof _bundle_0b1520ed["ab" /* aR */]?(f=e.event,g=e.source,[4,this._messageCache.get(f.messageId)]):[3,19];case 16:return(p=E.sent())&&p.isUserMessage()&&p.poll&&p.poll.applyPollUpdateEvent(f)?[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([p])];case 1:return[2,e.sent()]}}))}))}))]:[3,18];case 17:E.sent(),E.label=18;case 18:return this._broadcastPollUpdateEvent(f,g),[3,24];case 19:return e instanceof _bundle_0b1520ed["T" /* aK */]?(m=e.event,g=e.source,[4,this._messageCache.get(m.messageId)]):[3,23];case 20:return(v=E.sent())&&v.isUserMessage()&&v.poll&&v.poll.applyPollVoteEvent(m)?[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(b,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([v])];case 1:return[2,e.sent()]}}))}))}))]:[3,22];case 21:E.sent(),E.label=22;case 22:return this._broadcastPollVoteEvent(m,g),[3,24];case 23:e instanceof _bundle_0b1520ed["Y" /* aP */]?(y=e.event,g=e.source,y.messageId>0&&this._broadcastReactionUpdateEvent(y,g)):e instanceof _bundle_0b1520ed["Z" /* aQ */]&&(_=e.event,g=e.source,this._broadcastThreadUpdateEvent(_,g)),E.label=24;case 24:return[2]}}))}))})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"_cacheContext",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_dispatcher",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_messageCache",{get:function(){return Os.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_unsentMessageCache",{get:function(){return Cs.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_notificationCache",{get:function(){return xs.of(this._iid)},enumerable:!1,configurable:!0}),t.of=function(e,n){var r;return void 0===n&&(n=!1),Ds[e]&&!n||(Ds[e]&&(null===(r=Ds[e]._dispatcherContext)||void 0===r||r.close()),Ds[e]=new t(e)),Ds[e]},t.prototype._broadcastUpdateEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onUpdate&&a.onUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastPollChangeLogEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollChangeLogUpdate&&a.onPollChangeLogUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastPollUpdateEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollUpdate&&a.onPollUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastPollVoteEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollVote&&a.onPollVote(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastRemoveEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemove&&a.onRemove(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastRemoveUnsentEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemoveUnsent&&a.onRemoveUnsent(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastReactionUpdateEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onReactionUpdate&&a.onReactionUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype._broadcastThreadUpdateEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onThreadInfoUpdate&&a.onThreadInfoUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.subscribe=function(e,t){this._observers.set(e,t)},t.prototype.unsubscribe=function(e){this._observers.delete(e)},t.prototype.unsubscribeAll=function(){this._observers.clear()},t}(_bundle_0b1520ed["mb" /* ae */]),Fs=function(t){function n(n){var r=this,s=n.reverse,a=void 0!==s&&s,o=n.limit,u=void 0===o?20:o,c=n.keys,l=n.token;return(r=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["eb" /* aV */]),r.params=Object(_bundle_0b1520ed["hc" /* e */])({token:l,limit:u,reverse:a,order:_bundle_0b1520ed["fb" /* aW */].UPDATED_AT,show_ui_template:!0,show_color_variables:!0,keys:c}),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),qs=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.next,s=n.has_more,a=void 0!==s&&s,o=n.templates;return r.nextToken=i,r.hasMore=a,r.templates=o.map((function(e){return{template:JSON.stringify(e)}})),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),zs=function(e){function t(t){var n=this,r=t.key;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(_bundle_0b1520ed["eb" /* aV */],"/").concat(r),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Bs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.template=JSON.stringify(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Ks={},js=function(){function n(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,a=t.cacheContext;this._iid=e,this._sdkState=n,this._requestQueue=i,this._dispatcher=r,this._cacheContext=a,Os.of(e),Cs.of(e),Ls.of(e),this.fileMessageQueue=new Pt(e,{sdkState:n,dispatcher:r,requestQueue:i,onlineDetector:s,cacheContext:a}),Ks[e]=this}return n.of=function(e){return Ks[e]},n.prototype.buildMessageFromSerializedData=function(e){var t=Object(_bundle_0b1520ed["Cc" /* z */])(e);if(t.notificationId)return new It(this._iid,It.payloadify(t));switch(t.messageType){case _bundle_0b1520ed["ob" /* ag */].USER:return new _bundle_dc8db3c3_gt(this._iid,_bundle_dc8db3c3_gt.payloadify(t));case _bundle_0b1520ed["ob" /* ag */].FILE:return _bundle_dc8db3c3_bt._isMultipleFilesMessageSerializedData(t)?new _bundle_dc8db3c3_bt(this._iid,_bundle_dc8db3c3_bt.payloadify(t)):new wt(this._iid,wt.payloadify(t));case _bundle_0b1520ed["ob" /* ag */].ADMIN:return new _bundle_dc8db3c3_vt(this._iid,_bundle_dc8db3c3_vt.payloadify(t))}throw _bundle_0b1520ed["vc" /* s */].invalidParameters},n.prototype.buildUserMessageCreateParamsFromSerializedData=function(n,r){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({data:r.data,customType:r.customType,mentionType:r.mentionType,mentionedUserIds:r.mentionedUserIds,mentionedUsers:r.mentionedUsers,mentionedMessageTemplate:r.mentionedMessageTemplate,metaArrays:r.metaArrays,parentMessageId:r.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:r.appleCriticalAlertOptions,reqId:r.reqId,message:r.message,translationTargetLanguages:Object.keys(r.translations),pollId:n.pollId}))},n.prototype.buildFileMessageCreateParamsFromSerializedData=function(n,r){var i;return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({data:r.data,customType:r.customType,mentionType:r.mentionType,mentionedUserIds:r.mentionedUserIds,mentionedUsers:r.mentionedUsers,mentionedMessageTemplate:r.mentionedMessageTemplate,metaArrays:r.metaArrays,parentMessageId:r.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:r.appleCriticalAlertOptions,reqId:r.reqId,file:n.file,fileKey:n.fileKey,fileUrl:r.plainUrl,fileName:r.name,fileSize:r.size,mimeType:r.type,thumbnailSizes:null===(i=r.thumbnails)||void 0===i?void 0:i.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),fileType:n.fileType,requireAuth:r.requireAuth}))},n.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(t,n){var r=this;return Object(_bundle_0b1520ed["hc" /* e */])({data:n.data,customType:n.customType,mentionType:n.mentionType,mentionedUserIds:n.mentionedUserIds,mentionedUsers:n.mentionedUsers,mentionedMessageTemplate:n.mentionedMessageTemplate,metaArrays:n.metaArrays,parentMessageId:n.parentMessageId,isReplyToChannel:t.isReplyToChannel,pushNotificationDeliveryOption:t.pushNotificationDeliveryOption,appleCriticalAlertOptions:n.appleCriticalAlertOptions,reqId:n.reqId,fileInfoList:t.fileInfoList.map((function(e){return new _bundle_dc8db3c3_St(r._iid,e)}))})},n.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(e,t){return Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this.buildUserMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},n.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(e,t){return Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this.buildFileMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},n.prototype.buildSenderFromSerializedData=function(e){var t=Object(_bundle_0b1520ed["Cc" /* z */])(e);return new _bundle_dc8db3c3_Ke(this._iid,_bundle_dc8db3c3_Ke.payloadify(t))},n.prototype.getMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return t=new Ft(e),[4,this._requestQueue.send(t)];case 1:return n=r.sent(),[2,n.as(qt).message]}}))}))},n.prototype.getScheduledMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return t=new _bundle_dc8db3c3_Qt(e),[4,this._requestQueue.send(t)];case 1:return n=r.sent(),[2,n.as(Gt).message]}}))}))},n.prototype.getMessagesByMessageId=function(e,t,n,r,i){return void 0===i&&(i=_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return s=new _bundle_dc8db3c3_zt(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({channelType:t,channelUrl:e,token:String(n)},_bundle_dc8db3c3_Rt),r)),[4,this._requestQueue.send(s)];case 1:return a=c.sent(),o=a.as(Bt).messages,this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:o,source:i})),[2,o]}}))}))},n.prototype.getMessagesByTimestamp=function(e,t,n,r,i){return void 0===i&&(i=_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return s=new _bundle_dc8db3c3_zt(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({channelType:t,channelUrl:e,timestamp:n},_bundle_dc8db3c3_Rt),r)),[4,this._requestQueue.send(s)];case 1:return a=c.sent(),o=a.as(Bt).messages,this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:o,source:i})),[2,o]}}))}))},n.prototype._getMessagesByTimestampForCollection=function(e,t,n,r,i,s,a){return void 0===i&&(i=_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var o,c,l,d,h,f;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(p){switch(p.label){case 0:return o=new _bundle_dc8db3c3_zt(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({channelType:t,channelUrl:e,timestamp:n},_bundle_dc8db3c3_Rt),r),{checkingHasNext:s,checkingContinuousMessages:a})),[4,this._requestQueue.send(o)];case 1:return c=p.sent(),l=c.as(Bt),d=l.messages,h=l.isContinuousMessages,f=l.hasNext,this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:d,source:i})),[2,{messages:d,isContinuousMessages:h,hasNext:f}]}}))}))},n.prototype.getThreadedMessagesByTimestamp=function(e,t,n,r){return void 0===r&&(r=_bundle_0b1520ed["F" /* a2 */].REQUEST_THREADED_MESSAGE),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return i=new _bundle_dc8db3c3_zt(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({channelUrl:e.channelUrl,channelType:e.channelType,timestamp:t},_bundle_dc8db3c3_pt),n),{replyType:_bundle_0b1520ed["Fb" /* ax */].ALL,parentMessageId:e.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(i)];case 1:return s=c.sent(),a=s.as(Bt).messages,(o=a.slice(1)).forEach((function(t){t.parentMessage=e})),this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:o,source:r})),[2,{parentMessage:a[0],threadedMessages:o}]}}))}))},n.prototype.getMessageTemplatesByToken=function(e,t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return n=new Fs(Object(_bundle_0b1520ed["jc" /* g */])({token:e},t)),[4,this._requestQueue.send(n)];case 1:return r=c.sent(),i=r.as(qs),s=i.hasMore,a=i.nextToken,o=i.templates,[2,{hasMore:s,token:a,templates:o}]}}))}))},n.prototype.getMessageTemplate=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return t=new zs({key:e}),[4,this._requestQueue.send(t)];case 1:return n=r.sent(),[2,{template:n.as(Bs).template}]}}))}))},n.prototype.getMessageChangelogs=function(n,r,i,s,a){return void 0===a&&(a=_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE_CHANGELOGS),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var o,c,l,d,h,f,p,m;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(v){switch(v.label){case 0:return o=new _bundle_dc8db3c3_Kt(Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({channelType:r,channelUrl:n,timestamp:"number"==typeof i?i:null,token:"string"==typeof i?i:null},_bundle_dc8db3c3_Dt),s)))),[4,this._requestQueue.send(o)];case 1:return c=v.sent(),l=c.as(_bundle_dc8db3c3_jt),d=l.updatedMessages,h=l.deletedMessagesInfo,f=l.hasMore,p=l.nextToken,m=h.map((function(e){return e.messageId})),d.length>0&&this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:d,source:a})),m.length>0&&this._dispatcher.dispatch(new _bundle_0b1520ed["db" /* aU */]({messageIds:m,source:a})),[2,{updatedMessages:d,deletedMessageIds:m,hasMore:f,token:p}]}}))}))},n}(),Qs=function(e){function t(t,n){var r=e.call(this,t)||this;r.targetMessageId=0;var i=n.thread_info,s=n.parent_message_id,a=n.channel_url,o=n.channel_type;return i&&Object(_bundle_0b1520ed["C" /* a */])("object",i)&&Object(_bundle_0b1520ed["C" /* a */])("number",s)&&Object(_bundle_0b1520ed["C" /* a */])("string",a)&&Object(_bundle_0b1520ed["C" /* a */])("string",o)&&(r.threadInfo=new _bundle_dc8db3c3_Oe(t,i),r.targetMessageId=s,r.channelUrl=a,r.channelType=o),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["mb" /* ae */]),Gs={channelUrl:"",channelType:_bundle_0b1520ed["d" /* C */].BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},Vs=function(e){function t(t){var n=t.channelCustomType,r=t.keyword,s=t.limit,a=t.reverse,o=t.exactMatch,u=t.channelUrl,c=t.order,l=t.messageTimestampFrom,d=t.messageTimestampTo,h=t.advancedQuery,f=t.targetFields,p=t.nextToken,m=e.call(this)||this;return m.method=_bundle_0b1520ed["b" /* A */].GET,m.path="".concat(_bundle_0b1520ed["gb" /* aX */],"/messages"),m.params={custom_type:n,query:r,limit:s,reverse:a,exact_match:o,channel_url:u,message_ts_from:l,message_ts_to:d,sort_field:c,advanced_query:h,target_fields:f,after:p},m}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),Hs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.results.map((function(e){return _bundle_dc8db3c3_Tt(t,e)})),r.hasNext=n.has_next,r.nextToken=n.end_cursor,r.totalCount=n.total_count,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]);!function(e){e.SCORE="score",e.TIMESTAMP="ts"}(Is||(Is={}));var Ws=function(e){function i(t,n){var r,i,s,a,o,u,c,l,d,h=this;return(h=e.call(this,t,n)||this).keyword="",h.reverse=!1,h.exactMatch=!1,h.channelUrl="",h.channelCustomType="",h.messageTimestampFrom=null,h.messageTimestampTo=null,h.order=Is.SCORE,h.advancedQuery=!1,h.targetFields=null,h._nextToken="",h.totalCount=-1,h.keyword=n.keyword,h.reverse=null!==(r=n.reverse)&&void 0!==r&&r,h.exactMatch=null!==(i=n.exactMatch)&&void 0!==i&&i,h.channelUrl=null!==(s=n.channelUrl)&&void 0!==s?s:"",h.channelCustomType=null!==(a=n.channelCustomType)&&void 0!==a?a:"",h.messageTimestampFrom=null!==(o=n.messageTimestampFrom)&&void 0!==o?o:null,h.messageTimestampTo=null!==(u=n.messageTimestampTo)&&void 0!==u?u:null,h.order=null!==(c=n.order)&&void 0!==c?c:Is.SCORE,h.advancedQuery=null!==(l=n.advancedQuery)&&void 0!==l&&l,h.targetFields=null!==(d=n.targetFields)&&void 0!==d?d:null,h}return Object(_bundle_0b1520ed["fc" /* c */])(i,e),i.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.keyword)&&this.keyword.length>0&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.reverse)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.exactMatch)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.channelUrl)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.channelCustomType)&&(Object(_bundle_0b1520ed["C" /* a */])("number",this.messageTimestampFrom)||null===this.messageTimestampFrom)&&(Object(_bundle_0b1520ed["C" /* a */])("number",this.messageTimestampTo)||null===this.messageTimestampTo)&&Object(_bundle_0b1520ed["y" /* X */])(Is,this.order)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.advancedQuery)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.targetFields,!0)},i.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,r,i,s,a,o,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,r=new Vs(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=d.sent(),s=i.as(Hs),a=s.messages,o=s.hasNext,c=s.nextToken,l=s.totalCount,this._nextToken=c,this._hasNext=o,this._isLoading=!1,this.totalCount=l,[2,a];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},i}(_bundle_0b1520ed["V" /* aM */]),Ys=function(n){function s(r){var s=r.channelType,a=r.channelUrl,o=r.limit,u=r.token,c=n.call(this)||this;return c.method=_bundle_0b1520ed["b" /* A */].GET,c.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(a),"/messages/parent_thread_message"),c.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({limit:o,token:u})),c}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),Js=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.next,r.messages=n.messages.map((function(e){return _bundle_dc8db3c3_Tt(t,e)})),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),Xs=function(e){function t(t,n,r,i){var s=e.call(this,t,n,r,i)||this;return s._edge="",s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.load=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new Ys({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=o.sent(),i=r.as(Js),s=i.messages,a=i.token,this._edge=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_0b1520ed["Hb" /* az */]),Zs={channelUrl:"",scheduledMessageId:0},$s={reverse:!1,limit:20},ea=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="message",t}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,a=n.requestQueue,o=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:a,logger:o,onlineDetector:u,cacheContext:c}),this._manager=new js(t,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:u,cacheContext:c})},t.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},t.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},t.prototype.getMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},Gs),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.channelUrl)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["d" /* C */],e.channelType)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.messageId)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeReactions,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeMetaArray,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeParentMessageInfo,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeThreadInfo,!0)}(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,this._manager.getMessage(t)];case 1:if((n=r.sent())instanceof _bundle_dc8db3c3_ht||n instanceof It||null===n)return[2,n];throw"Unknown message type is given."}}))}))},t.prototype.getScheduledMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},Zs),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.channelUrl)&&""!==e.channelUrl&&Object(_bundle_0b1520ed["C" /* a */])("number",e.scheduledMessageId)&&e.scheduledMessageId>0}(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getScheduledMessage(t)]}))}))},t.prototype.getMessageTemplatesByToken=function(e,t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},$s),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e,!0)&&function(e){return Object(_bundle_0b1520ed["C" /* a */])("boolean",e.reverse,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.limit,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.keys,!0)}(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getMessageTemplatesByToken(e,n)]}))}))},t.prototype.getMessageTemplate=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getMessageTemplate(e)]}))}))},t}(_bundle_0b1520ed["hb" /* aY */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-7b94e16f.js
var _bundle_7b94e16f_E,_bundle_7b94e16f_p,_bundle_7b94e16f_R;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(_bundle_7b94e16f_E||(_bundle_7b94e16f_E={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(_bundle_7b94e16f_p||(_bundle_7b94e16f_p={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(_bundle_7b94e16f_R||(_bundle_7b94e16f_R={}));var _bundle_7b94e16f_C,_bundle_7b94e16f_L=function(e){switch(e){case _bundle_7b94e16f_E.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case _bundle_7b94e16f_E.CHRONOLOGICAL:return["-createdAt","syncIndex"];case _bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},_bundle_7b94e16f_b=function(t){function s(e){var s=e.message,n=t.call(this)||this;return n.message=s,n}return Object(_bundle_0b1520ed["fc" /* c */])(s,t),s}(_bundle_0b1520ed["Nb" /* b6 */]),_bundle_7b94e16f_I={},_bundle_7b94e16f_S=function(){function e(e,t){var s=t.localCacheEnabled,n=t.enableAutoResend,r=t.dispatcher,a=t.sdkState,u=t.logger,d=this;this._iid=e,_bundle_7b94e16f_I[e]=this,this._localCacheEnabled=s,this._enableAutoResend=n,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=r,this._logger=u,this._sdkState=a,this._localCacheEnabled&&r.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])switch(e.stateType){case _bundle_0b1520ed["g" /* F */].CONNECTED:d._isProcessingAutoResend||d.processAutoResendRegisteredPendingMessages().then((function(){return d._processNextAutoResend()}));break;case _bundle_0b1520ed["g" /* F */].INTERNAL_DISCONNECTED:case _bundle_0b1520ed["g" /* F */].EXTERNAL_DISCONNECTED:d._isProcessingAutoResend=!1}}))}return e.of=function(e){return _bundle_7b94e16f_I[e]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,s,a,i,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return this._enableAutoResend?[4,this._fetchAllCachedPendingMessages()]:[2];case 1:e=n.sent();try{for(t=Object(_bundle_0b1520ed["wc" /* t */])(e),s=t.next();!s.done;s=t.next())0===(a=s.value).errorCode&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",a.reqId),a.sendingStatus=_bundle_0b1520ed["vb" /* an */].FAILED,a.errorCode=_bundle_0b1520ed["I" /* a8 */].ACK_TIMEOUT,this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[a],source:_bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_FAILED})))}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}}return[2]}}))}))},e.prototype.processAutoResendRegisteredPendingMessages=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,s,i,o,d,l,_;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=n.sent();try{for(t=Object(_bundle_0b1520ed["wc" /* t */])(e),s=t.next();!s.done;s=t.next())i=s.value,this._enableAutoResend&&i.errorCode&&Object(_bundle_0b1520ed["R" /* aI */])(i.errorCode)&&(o=(new Date).getTime(),d=i.createdAt+2592e5,this._enableAutoResend&&o<=d?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(i.reqId)<0&&this._autoResendQueue.push(i):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(d).toLocaleString()),i.sendingStatus=_bundle_0b1520ed["vb" /* an */].FAILED,this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[i],source:_bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_FAILED}))))}catch(e){l={error:e}}finally{try{s&&!s.done&&(_=t.return)&&_.call(t)}finally{if(l)throw l.error}}return[2]}}))}))},e.prototype.completeCurrentAndProcessNextAutoResend=function(e){if(this._localCacheEnabled&&this._enableAutoResend&&(e.sendingStatus===_bundle_0b1520ed["vb" /* an */].SUCCEEDED||e.sendingStatus===_bundle_0b1520ed["vb" /* an */].FAILED&&!Object(_bundle_0b1520ed["R" /* aI */])(e.errorCode))){var t=this.indexOf(e);t>=0&&this._autoResendQueue.splice(t,1),0===t&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e=Cs.of(this._iid),(t=new bs).replyType=_bundle_0b1520ed["Fb" /* ax */].ALL,[4,e.fetch({sendingStatus:_bundle_0b1520ed["vb" /* an */].PENDING,backward:!0,filter:t})];case 1:return[2,s.sent()]}}))}))},e.prototype.indexOf=function(e){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId):-1},e.prototype._isNotInQueue=function(e){return-1===this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId)},e.prototype._processNextAutoResend=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){if(this._localCacheEnabled&&this._enableAutoResend&&"foreground"===this._sdkState.appState)try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),e=this._autoResendQueue[0],this._dispatcher.dispatch(new _bundle_7b94e16f_b({message:e})),this._logger.debug("processing auto-resend for message request id: ",e.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(e){this._logger.warn("process auto-resend error: ",e),this._isProcessingAutoResend=!1}return[2]}))}))},e}();!function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"}(_bundle_7b94e16f_C||(_bundle_7b94e16f_C={}));var _bundle_7b94e16f_N=function(){function e(e){this.category=e.cat,this.data=e.data}return e.getDataAsUserBlockEvent=function(e,t){var s=t.data,n=s.blocker,r=s.blockee;return{blocker:new _bundle_0b1520ed["v" /* U */](e,n),blockee:new _bundle_0b1520ed["v" /* U */](e,r)}},e.getDataAsFriendDiscoveredEvent=function(e,t){var s=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(s)?s.map((function(t){return new _bundle_0b1520ed["v" /* U */](e,t)})):[]}},e}(),_bundle_7b94e16f_v=function(t){function s(e,s){var n=s.userId,r=t.call(this)||this;return r._iid=e,r.userId=n,r}return Object(_bundle_0b1520ed["fc" /* c */])(s,t),s}(_bundle_0b1520ed["Nb" /* b6 */]),_bundle_7b94e16f_D=function(t){function s(){return t.call(this)||this}return Object(_bundle_0b1520ed["fc" /* c */])(s,t),s}(_bundle_0b1520ed["Nb" /* b6 */]),_bundle_7b94e16f_T=function(t){function s(e,s,n){var r=t.call(this,e,"USEV",n)||this;return r.event=new _bundle_7b94e16f_N(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(s,t),s}(_bundle_0b1520ed["x" /* W */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/constants/sbuConstants.js

const sbuConstants = {
    collection: {
        groupChannel: {
            defaultLimit: 20,
            defaultOrder: _bundle_7b94e16f_E.LATEST_LAST_MESSAGE,
            defaultIncludeEmpty: false,
        },
        message: {
            defaultLimit: { next: 25, prev: 25 },
            searchLimit: { next: 10, prev: 10 },
        },
    },
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/constants/index.js




// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-acd77193.js
var _bundle_acd77193_s=function(s,i){this.pollId=0,this.messageId=0,this.pollId=i.poll.id,this.messageId=i.poll.message_id,this._iid=s,this._payload=i};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-168f8164.js
var _bundle_168f8164_A;!function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"}(_bundle_168f8164_A||(_bundle_168f8164_A={}));var _bundle_168f8164_p=function(){function n(e){var n;this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=null!==(n=e.data)&&void 0!==n?n:{},this.ts=e.ts}return Object.defineProperty(n.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===_bundle_0b1520ed["d" /* C */].GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===_bundle_0b1520ed["d" /* C */].OPEN},enumerable:!1,configurable:!0}),n}(),_bundle_168f8164_f=function(e){function t(n,t,r){var s=e.call(this,n,"SYEV",r)||this;return s.event=new _bundle_168f8164_p(r),s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_168f8164_m=function(e){function t(n,t,s){var o=e.call(this,n,t,s)||this,i=s.data.operators,a=void 0===i?[]:i;return o.operators=a.map((function(e){return new _bundle_0b1520ed["v" /* U */](o._iid,e)})),o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_168f8164_f),_bundle_168f8164_v=function(e){function t(n,t){var r=e.call(this,n)||this;return r._logger=t.logger,r._sdkState=t.sdkState,r._sessionManager=t.sessionManager,r._requestQueue=t.requestQueue,r._dispatcher=t.dispatcher,r._cacheContext=t.cacheContext,r._channelType=t.channelType,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"_messageBroadcast",{get:function(){return Ls.of(this._iid)},enumerable:!1,configurable:!0}),t.prototype.subscribeMessageEvent=function(e,n){this._messageBroadcast.subscribe(e,n)},t.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},t.prototype.getMessageFromCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,null]}))}))},t.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,n,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,[]]}))}))},t.prototype.getMessagesFromCache=function(e,n,t,r,i,a){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,[]]}))}))},t.prototype.getPollMessagesFromCache=function(e,n,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,[]]}))}))},t.prototype.getCachedMessageCountBetween=function(e,n,t,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,0]}))}))},t.prototype.getUnsentMessagesFromCache=function(e,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,[]]}))}))},t.prototype.removeFailedMessageFromCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2]}))}))},t}(_bundle_0b1520ed["mb" /* ae */]),_bundle_168f8164_H=function(e){function t(n,t,r){var s,o,i,E,N=this;(N=e.call(this,n,"ADMM",r)||this).message=new _bundle_dc8db3c3_vt(n,r);var c=_bundle_0b1520ed["w" /* V */].of(n).sdkState;return N.isMentioned=Object(_bundle_0b1520ed["Bb" /* at */])(N.message.mentionType,null!==(i=null!==(s=N.message.mentionedUserIds)&&void 0!==s?s:null===(o=N.message.mentionedUsers)||void 0===o?void 0:o.map((function(e){return e.userId})))&&void 0!==i?i:[],c.userId),N.forceUpdateLastMessage=null!==(E=r.force_update_last_message)&&void 0!==E&&E,N}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_168f8164_T=function(e){function t(n,t,r){var s,o,i,u,c,_=this;(_=e.call(this,n,"AEDI",r)||this).message=new _bundle_dc8db3c3_vt(n,r);var h=_bundle_0b1520ed["w" /* V */].of(n).sdkState;return _.mentionCountChange=Object(_bundle_0b1520ed["L" /* aC */])({mentionType:null===(s=r.old_values)||void 0===s?void 0:s.mention_type,mentionedUserIds:null!==(i=null===(o=r.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==i?i:[]},Object(_bundle_0b1520ed["xc" /* u */])({mentionType:_.message.mentionType,mentionedUserIds:null!==(u=_.message.mentionedUserIds)&&void 0!==u?u:null===(c=_.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))}),h.userId),_}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_168f8164_L=function(e){function t(n,t,r){var s=e.call(this,n,"MRCT",r)||this;return s.channelUrl=r.channel_url,s.channelType=r.channel_type,s.event=new _bundle_dc8db3c3_xe(r),s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_168f8164_g=function(e){function t(n,t,r){var s=e.call(this,n,"MTHD",r)||this;return s.event=new Qs(n,r),s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_168f8164_U=function(e){function t(n,t,r){var s=e.call(this,n,"MCNT",r)||this;return s.groupChannelMemberCounts=r.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),s.openChannelMemberCounts=r.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]),_bundle_168f8164_I=function(e){function t(n,t,r){var s=e.call(this,n,"PEDI",r)||this;return s.event=new _bundle_acd77193_s(n,r),s.status=Object(_bundle_0b1520ed["ac" /* bk */])(r.poll.status)||r.poll.status,s.channelUrl=r.channel_url,s.channelType=r.channel_type,s}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["x" /* W */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-a5a397f1.js
var _bundle_a5a397f1_qt;!function(e){e.NONE="none",e.JOINED="joined",e.INVITED="invited",e.LEFT="left"}(_bundle_a5a397f1_qt||(_bundle_a5a397f1_qt={}));var _bundle_a5a397f1_zt,_bundle_a5a397f1_jt,_bundle_a5a397f1_Wt,_bundle_a5a397f1_Qt,_bundle_a5a397f1_Kt,_bundle_a5a397f1_Yt,_bundle_a5a397f1_Jt,_bundle_a5a397f1_Xt,_bundle_a5a397f1_Zt=function(a){function o(e,t){var n=a.call(this,e,t)||this;return n.state=null,n.role=null,n.isMuted=!1,n.isBlockedByMe=!1,n.isBlockingMe=!1,n.state=Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_qt,t.state)?t.state:null,n.role=Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["H" /* a7 */],t.role)?t.role:null,"boolean"==typeof t.is_muted&&(n.isMuted=t.is_muted),"boolean"==typeof t.is_blocked_by_me&&(n.isBlockedByMe=t.is_blocked_by_me),"boolean"==typeof t.is_blocking_me&&(n.isBlockingMe=t.is_blocking_me),n}return Object(_bundle_0b1520ed["fc" /* c */])(o,a),o.payloadify=function(e){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},a.payloadify.call(this,e)),{state:e.state,role:e.role,is_muted:e.isMuted,is_blocked_by_me:e.isBlockedByMe,is_blocking_me:e.isBlockingMe})))},o}(Ht);!function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(_bundle_a5a397f1_zt||(_bundle_a5a397f1_zt={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(_bundle_a5a397f1_jt||(_bundle_a5a397f1_jt={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(_bundle_a5a397f1_Wt||(_bundle_a5a397f1_Wt={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(_bundle_a5a397f1_Qt||(_bundle_a5a397f1_Qt={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(_bundle_a5a397f1_Kt||(_bundle_a5a397f1_Kt={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(_bundle_a5a397f1_Yt||(_bundle_a5a397f1_Yt={})),function(e){e.AND="AND",e.OR="OR"}(_bundle_a5a397f1_Jt||(_bundle_a5a397f1_Jt={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(_bundle_a5a397f1_Xt||(_bundle_a5a397f1_Xt={}));var _bundle_a5a397f1_$t,_bundle_a5a397f1_en=function(){function e(e){var t,n,s,r,i,a,o,u,c,l,h,d,_,p;this._searchFilter=null,this._userIdsFilter=null,this.includeEmpty=null!==(t=null==e?void 0:e.includeEmpty)&&void 0!==t&&t,this.nicknameContainsFilter=null!==(n=null==e?void 0:e.nicknameContainsFilter)&&void 0!==n?n:null,this.nicknameStartsWithFilter=null!==(s=null==e?void 0:e.nicknameStartsWithFilter)&&void 0!==s?s:null,this.nicknameExactMatchFilter=null!==(r=null==e?void 0:e.nicknameExactMatchFilter)&&void 0!==r?r:null,this.channelNameContainsFilter=null!==(i=null==e?void 0:e.channelNameContainsFilter)&&void 0!==i?i:"",this.myMemberStateFilter=null!==(a=null==e?void 0:e.myMemberStateFilter)&&void 0!==a?a:_bundle_a5a397f1_jt.ALL,this.customTypesFilter=null!==(o=null==e?void 0:e.customTypesFilter)&&void 0!==o?o:null,this.channelUrlsFilter=null!==(u=null==e?void 0:e.channelUrlsFilter)&&void 0!==u?u:null,this.superChannelFilter=null!==(c=null==e?void 0:e.superChannelFilter)&&void 0!==c?c:_bundle_a5a397f1_Wt.ALL,this.publicChannelFilter=null!==(l=null==e?void 0:e.publicChannelFilter)&&void 0!==l?l:_bundle_a5a397f1_zt.ALL,this.customTypeStartsWithFilter=null!==(h=null==e?void 0:e.customTypeStartsWithFilter)&&void 0!==h?h:null,this.unreadChannelFilter=null!==(d=null==e?void 0:e.unreadChannelFilter)&&void 0!==d?d:_bundle_a5a397f1_Qt.ALL,this.hiddenChannelFilter=null!==(_=null==e?void 0:e.hiddenChannelFilter)&&void 0!==_?_:_bundle_a5a397f1_Kt.UNHIDDEN,this.includeFrozen=null===(p=null==e?void 0:e.includeFrozen)||void 0===p||p,(null==e?void 0:e.createdAfter)&&(this.createdAfter=e.createdAfter),(null==e?void 0:e.createdBefore)&&(this.createdBefore=e.createdBefore)}return e.prototype._isFriend=function(e){return!(!e||!e.friendDiscoveryKey&&!e.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={query:t,fields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=_bundle_a5a397f1_Jt.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t,n=new e;this.searchFilter&&n.setSearchFilter(this.searchFilter.fields,null!==(t=this.searchFilter.query)&&void 0!==t?t:void 0),this.userIdsFilter&&n.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var s=JSON.parse(JSON.stringify(this));return Object.keys(s).forEach((function(e){n[e]=s[e]})),n},e.prototype.match=function(e,t){if(this._searchFilter){var n=this._searchFilter,s=n.query,r=n.fields;if(s&&r&&r.length>0&&!r.some((function(t){switch(t){case _bundle_a5a397f1_Xt.CHANNEL_NAME:return e.name.toLowerCase().includes(s.toLowerCase());case _bundle_a5a397f1_Xt.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(s.toLowerCase())}));default:return!0}})))return!1}if(this._userIdsFilter){var i=this._userIdsFilter,o=i.userIds,u=i.includeMode,c=i.queryType,l=e.members.map((function(e){return e.userId}));if(u){if(o.length>0)switch(c){case _bundle_a5a397f1_Jt.AND:if(o.some((function(e){return!l.includes(e)})))return!1;break;case _bundle_a5a397f1_Jt.OR:if(o.every((function(e){return!l.includes(e)})))return!1}}else{if(o.includes(t)||o.push(t),e.members.length>o.length)return!1;if(!Object(_bundle_0b1520ed["Sb" /* bc */])(o,l))return!1}}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var h=this.nicknameContainsFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().includes(h)})))return!1}if(this.nicknameStartsWithFilter){var d=this.nicknameStartsWithFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().startsWith(d)})))return!1}if(this.nicknameExactMatchFilter){var _=this.nicknameExactMatchFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase()!=_})))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case _bundle_a5a397f1_jt.ALL:if("none"===e.myMemberState)return!1;break;case _bundle_a5a397f1_jt.JOINED:if("joined"!==e.myMemberState)return!1;break;case _bundle_a5a397f1_jt.INVITED:if("invited"!==e.myMemberState)return!1;break;case _bundle_a5a397f1_jt.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case _bundle_a5a397f1_jt.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case _bundle_a5a397f1_Kt.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case _bundle_a5a397f1_Kt.HIDDEN:if(!e.isHidden)return!1;break;case _bundle_a5a397f1_Kt.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case _bundle_a5a397f1_Kt.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===_bundle_a5a397f1_Qt.UNREAD_MESSAGE)if(0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case _bundle_a5a397f1_zt.PUBLIC:if(!e.isPublic)return!1;break;case _bundle_a5a397f1_zt.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case _bundle_a5a397f1_Wt.SUPER:if(!e.isSuper)return!1;break;case _bundle_a5a397f1_Wt.NON_SUPER:if(e.isSuper)return!1}return!(this.createdAfter&&e.createdAt<this.createdAfter)&&!(this.createdBefore&&e.createdAt>this.createdBefore)},e}(),_bundle_a5a397f1_tn=function(t){function n(e,n){var s=n.sdkState,r=n.cacheContext,i=t.call(this,e)||this;return i._channels=new Map,i._sdkState=s,i._cacheContext=r,i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(_bundle_0b1520ed["zc" /* w */])(!!e).throw(_bundle_0b1520ed["vc" /* s */].databaseError),e.collection(zr)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e,t){return void 0===t&&(t=0),Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e.serialize()),{lastMessageUpdatedAt:e.lastMessage?e.lastMessage.createdAt:0,syncIndex:t})},n.prototype._deserialize=function(e){return _bundle_a5a397f1_hs.of(this._iid).buildGroupChannelFromSerializedData(e)},Object.defineProperty(n.prototype,"channels",{get:function(){return Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(e){return this._channels.has(e)},n.prototype.filterOffsetChanged=function(e){var t=this;return e.filter((function(e){if(t._channels.has(e.url))return t._channels.get(e.url).messageOffsetTimestamp<e.messageOffsetTimestamp}))},n.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return this._channels.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(t=s.sent())return n=this._deserialize(t),this._channels.set(e,n),[2,n];s.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(e)]}}))}))},n.prototype.fetch=function(e){var t=e.token,n=e.limit,s=void 0===n?qr:n,r=e.backward,i=void 0!==r&&r,a=e.filter,o=void 0===a?new _bundle_a5a397f1_en:a,u=e.order,c=void 0===u?_bundle_7b94e16f_E.LATEST_LAST_MESSAGE:u,l=e.borderlineChannelUrl;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n,r,a,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return this.localCacheEnabled?(e=_bundle_7b94e16f_L(c),n={where:function(e){if(t)switch(c){case _bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL:if(!i&&e.name.localeCompare(t)<0||i&&e.name.localeCompare(t)>0)return!1;if(l&&l===e.url)return!1;break;case _bundle_7b94e16f_E.CHRONOLOGICAL:if(!i&&e.createdAt>t||i&&e.createdAt<t)return!1;if(l&&l===e.url)return!1;break;case _bundle_7b94e16f_E.LATEST_LAST_MESSAGE:if(!i&&e.lastMessageUpdatedAt>t||i&&e.lastMessageUpdatedAt<t)return!1;if(l&&l===e.url)return!1}return o.match(u._deserialize(e),u._sdkState.userId)},index:e,backward:i},[4,this.collection.query(n)]):[3,3];case 1:return[4,h.sent().fetch({limit:s})];case 2:return r=h.sent(),(a=r.map((function(e){return u._deserialize(e)}))).forEach((function(e){u._channels.has(e.url)||u._channels.set(e.url,e)})),[2,a];case 3:return[2,[]]}}))}))},n.prototype.upsert=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,s,r,i=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:if(n=[],e.forEach((function(e){if(i._channels.has(e.url)){var s=i._channels.get(e.url);s._pinnedMessagesUpdatedAt<e._pinnedMessagesUpdatedAt&&(s._pinnedMessagesUpdatedAt=e._pinnedMessagesUpdatedAt),s._messageCollectionLastAccessedAt>e._messageCollectionLastAccessedAt&&Object.assign(e,{_messageCollectionLastAccessedAt:void 0}),e.cachedMetaData&&t&&(s._updateCachedMetaData(e.cachedMetaData,t),Object.assign(e,{_cachedMetaData:void 0})),s._update(e),n.push(s)}else i._channels.set(e.url,e),n.push(e)})),!this.localCacheEnabled)return[3,2];for(s=[],r=0;r<n.length;r++)s.push(this._serialize(n[r],r));return[4,this.collection.upsertMany(s)];case 1:a.sent(),a.label=2;case 2:return[2,n]}}))}))},n.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),t=Object(_bundle_0b1520ed["wc" /* t */])(e),n=t.next(),o.label=1;case 1:return n.done?[3,4]:(s=n.value,this._channels.delete(s),this.localCacheEnabled?[4,this.collection.remove(s)]:[3,3]);case 2:o.sent(),o.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return r=o.sent(),i={error:r},[3,7];case 6:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,r,i,a,o,u,c,l,h,_,f,v,m,g,E,C,y,M,b;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:if(s=[],e===this._sdkState.userId)try{for(r=Object(_bundle_0b1520ed["wc" /* t */])(this._channels.values()),i=r.next();!i.done;i=r.next()){l=i.value;try{for(g=void 0,a=Object(_bundle_0b1520ed["wc" /* t */])(l.members),o=a.next();!o.done;o=a.next())if((f=o.value).userId===t){f.isBlockedByMe=n,s.push(l);break}}catch(e){g={error:e}}finally{try{o&&!o.done&&(E=a.return)&&E.call(a)}finally{if(g)throw g.error}}}}catch(e){v={error:e}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(v)throw v.error}}else if(t===this._sdkState.userId)try{for(u=Object(_bundle_0b1520ed["wc" /* t */])(this._channels.values()),c=u.next();!c.done;c=u.next()){l=c.value;try{for(M=void 0,h=Object(_bundle_0b1520ed["wc" /* t */])(l.members),_=h.next();!_.done;_=h.next())if((f=_.value).userId===e){f.isBlockingMe=n,s.push(l);break}}catch(e){M={error:e}}finally{try{_&&!_.done&&(b=h.return)&&b.call(h)}finally{if(M)throw M.error}}}}catch(e){C={error:e}}finally{try{c&&!c.done&&(y=u.return)&&y.call(u)}finally{if(C)throw C.error}}return s.length>0?[4,this.upsert(s)]:[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}}))}))},n.prototype.block=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!0)];case 1:return n.sent(),[2]}}))}))},n.prototype.unblock=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!1)];case 1:return n.sent(),[2]}}))}))},n.prototype.markAsRead=function(e,t){return void 0===t&&(t=Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._channels.keys()),!1)),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,s,r,i,a,o,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:n=[],l.label=1;case 1:l.trys.push([1,6,7,8]),s=Object(_bundle_0b1520ed["wc" /* t */])(t),r=s.next(),l.label=2;case 2:return r.done?[3,5]:(i=r.value,[4,this.get(i)]);case 3:(null==(a=l.sent())?void 0:a._updateUnreadMemberState(this._sdkState.userId,e))&&(a._updateUnreadCount(0,0),n.push(a)),l.label=4;case 4:return r=s.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),u={error:o},[3,8];case 7:try{r&&!r.done&&(c=s.return)&&c.call(s)}finally{if(u)throw u.error}return[7];case 8:return n.length>0?[4,this.upsert(n)]:[3,10];case 9:l.sent(),l.label=10;case 10:return[2]}}))}))},n}(_bundle_0b1520ed["mb" /* ae */]),_bundle_a5a397f1_nn={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},_bundle_a5a397f1_sn=function(e){return Object(_bundle_0b1520ed["r" /* Q */])("string",e.invitedUserIds,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.channelUrl,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.coverUrl,!0)&&(Object(_bundle_0b1520ed["lc" /* i */])(e.coverImage)||Object(_bundle_0b1520ed["C" /* a */])("string",e.coverImage,!0))&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isDistinct,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isSuper,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isBroadcast,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isExclusive,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isPublic,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isStrict,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isDiscoverable,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isEphemeral,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.accessCode,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.name,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.data,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.customType,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.operatorUserIds,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.messageSurvivalSeconds,!0)},_bundle_a5a397f1_rn={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeChatNotification:!1},_bundle_a5a397f1_an=function(e){return Object(_bundle_0b1520ed["r" /* Q */])("string",e.customTypes,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeEmpty)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeFrozen)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.includeChatNotification)},_bundle_a5a397f1_on={myMemberStateFilter:_bundle_a5a397f1_jt.ALL},_bundle_a5a397f1_un=function(e){return Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_jt,e.myMemberStateFilter)};!function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"}(_bundle_a5a397f1_$t||(_bundle_a5a397f1_$t={}));var _bundle_a5a397f1_cn={keys:[]},_bundle_a5a397f1_ln={channelCustomTypesFilter:void 0,superChannelFilter:_bundle_a5a397f1_Wt.ALL},_bundle_a5a397f1_hn=function(e){return Object(_bundle_0b1520ed["r" /* Q */])("string",e.channelCustomTypesFilter,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Wt,e.superChannelFilter)},_bundle_a5a397f1_dn={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:_bundle_0b1520ed["xb" /* ap */].ALL},_bundle_a5a397f1_n=Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_0b1520ed["F" /* a2 */]),_bundle_a5a397f1_pn=function(e){return e.startsWith("EVENT_")||e===_bundle_0b1520ed["F" /* a2 */].SYNC_CHANNEL_CHANGELOGS||e===_bundle_0b1520ed["F" /* a2 */].REFRESH_CHANNEL},_bundle_a5a397f1_fn=function(t){function n(e){var n=e.channels,s=e.context,r=e.isWebSocketEventComing,i=void 0!==r&&r,a=e.ts,o=t.call(this)||this;return o.channels=n,o.context=s,o.isWebSocketEventComing=i,o.ts=a,o}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["Nb" /* b6 */]),_bundle_a5a397f1_vn=function(t){function n(e){var n=e.channelUrls,s=e.context,r=e.isWebSocketEventComing,i=void 0!==r&&r,a=t.call(this)||this;return a.channelUrls=n,a.context=s,a.isWebSocketEventComing=i,a}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["Nb" /* b6 */]),_bundle_a5a397f1_mn=function(){function e(e){var t=e.groupChannelCache,n=e.messageCache,s=e.unsentMessageCache,r=e.dispatcher,i=this;this._observers=new Map,r.on((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){var r,i,a,o,u,c,l,_,f,v,m,g,C,M,b,N,U,S,T=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(A){switch(A.label){case 0:if(!(e instanceof _bundle_a5a397f1_fn))return[3,19];if(r=e.channels,C=e.context,M=e.isWebSocketEventComing,i=r.filter((function(e){return e instanceof _bundle_a5a397f1_dr})),C.source!==_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_RESET_HISTORY&&C.source!==_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_HIDDEN)return[3,9];A.label=1;case 1:A.trys.push([1,6,7,8]),a=Object(_bundle_0b1520ed["wc" /* t */])(i),o=a.next(),A.label=2;case 2:return o.done?[3,5]:(f=o.value,[4,n.removeUnderOffset(f.url,f.messageOffsetTimestamp)]);case 3:A.sent(),A.label=4;case 4:return o=a.next(),[3,2];case 5:return[3,8];case 6:return u=A.sent(),b={error:u},[3,8];case 7:try{o&&!o.done&&(N=a.return)&&N.call(a)}finally{if(b)throw b.error}return[7];case 8:return[3,17];case 9:c=t.filterOffsetChanged(i),A.label=10;case 10:A.trys.push([10,15,16,17]),l=Object(_bundle_0b1520ed["wc" /* t */])(c),_=l.next(),A.label=11;case 11:return _.done?[3,14]:(f=_.value,[4,n.removeUnderOffset(f.url,f.messageOffsetTimestamp)]);case 12:A.sent(),A.label=13;case 13:return _=l.next(),[3,11];case 14:return[3,17];case 15:return v=A.sent(),U={error:v},[3,17];case 16:try{_&&!_.done&&(S=l.return)&&S.call(l)}finally{if(U)throw U.error}return[7];case 17:return[4,t.upsert(i,e.ts)];case 18:return m=A.sent(),M||this._broadcastUpdateEvent(m,C),[3,24];case 19:return e instanceof _bundle_a5a397f1_vn?(g=e.channelUrls,C=e.context,M=e.isWebSocketEventComing,[4,t.remove(g)]):[3,22];case 20:return A.sent(),[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(T,void 0,void 0,(function(){var e,t,r,i,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:u.trys.push([0,6,7,8]),e=Object(_bundle_0b1520ed["wc" /* t */])(g),t=e.next(),u.label=1;case 1:return t.done?[3,5]:(r=t.value,[4,n.removeMessagesOfChannel(r)]);case 2:return u.sent(),[4,s.removeMessagesOfChannel(r)];case 3:u.sent(),u.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return i=u.sent(),a={error:i},[3,8];case 7:try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}))}))];case 21:return A.sent(),M||this._broadcastRemoveEvent(g,C),[3,24];case 22:return e instanceof _bundle_7b94e16f_v?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,24];case 23:A.sent(),A.label=24;case 24:return[2]}}))}))}))}return e.prototype._broadcastUpdateEvent=function(e,t){var n,s;try{for(var r=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),i=r.next();!i.done;i=r.next()){var a=i.value;a.onUpdate&&a.onUpdate(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}},e.prototype._broadcastRemoveEvent=function(e,t){var n,s;try{for(var r=Object(_bundle_0b1520ed["wc" /* t */])(this._observers.values()),i=r.next();!i.done;i=r.next()){var a=i.value;a.onRemove&&a.onRemove(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}},e.prototype.subscribe=function(e,t){this._observers.set(e,t)},e.prototype.unsubscribe=function(e){this._observers.delete(e)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),_bundle_a5a397f1_gn=function(r){function i(e){var i=e.userId,a=e.ts,o=e.token,u=e.filter,c=e.includeChatNotification,l=void 0!==c&&c,h=r.call(this)||this,d=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_rn),u),_=d.customTypes,p=d.includeEmpty,f=d.includeFrozen;return h.method=_bundle_0b1520ed["b" /* A */].GET,h.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(i),"/my_group_channels/changelogs"),h.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:a||null,token:o,custom_types:_,show_empty:p,show_frozen:f,include_chat_notification:l})),h}return Object(_bundle_0b1520ed["fc" /* c */])(i,r),i}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_En=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.updatedChannels=n.updated.map((function(t){return new _bundle_a5a397f1_dr(e,Object.assign(t,{ts:n.ts}))})),s.deletedChannelUrls=n.deleted,s.hasMore=n.has_more,s.token=n.next,s.ts=n.ts,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Cn=function(t){function n(e){var n=e.channelUrl,s=e.isInternalCall,r=t.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(s?_bundle_0b1520ed["Tb" /* bd */]:_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(n)),r.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_yn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_a5a397f1_dr(e,n),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Mn={includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1,channelUrlsFilter:void 0,customTypesFilter:void 0,customTypeStartsWithFilter:void 0,nicknameContainsFilter:void 0,nicknameStartsWithFilter:void 0,nicknameExactMatchFilter:void 0,channelNameContainsFilter:void 0,myMemberStateFilter:_bundle_a5a397f1_jt.ALL,unreadChannelFilter:_bundle_a5a397f1_Qt.ALL,superChannelFilter:_bundle_a5a397f1_Wt.ALL,publicChannelFilter:_bundle_a5a397f1_zt.ALL,hiddenChannelFilter:_bundle_a5a397f1_Kt.ALL,userIdsFilter:{userIds:[],includeMode:!0,queryType:_bundle_a5a397f1_Jt.AND},searchFilter:{query:void 0,fields:[]},metadataKey:void 0,metadataValues:void 0,metadataOrderKeyFilter:void 0,metadataValueStartsWith:void 0,order:_bundle_7b94e16f_E.LATEST_LAST_MESSAGE,createdAfter:void 0,createdBefore:void 0},_bundle_a5a397f1_bn=function(n){function s(e){var s=this,r=e.userId,i=e.token,a=e.limit,o=e.order,u=e.includeEmpty,c=e.myMemberStateFilter,l=e.superChannelFilter,h=e.publicChannelFilter,d=e.unreadChannelFilter,_=e.nicknameContainsFilter,p=e.nicknameStartsWithFilter,f=e.nicknameExactMatchFilter,v=e.channelNameContainsFilter,m=e.channelUrlsFilter,g=e.customTypesFilter,E=e.customTypeStartsWithFilter,C=e.hiddenChannelFilter,y=e.metadataOrderKeyFilter,N=e.metadataKey,U=e.metadataValues,S=e.metadataValueStartsWith,T=e.includeFrozen,A=e.includeMetaData,I=e.searchFilter,w=e.userIdsFilter,L=e.includeChatNotification,D=void 0!==L&&L,x=e.includeLeftChannel,R=void 0!==x&&x,F=e.createdAfter,P=e.createdBefore;return(s=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,s.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(r),"/my_group_channels"),s.params=Object(_bundle_0b1520ed["hc" /* e */])({token:i,limit:a,order:null!=o?o:_bundle_a5a397f1_Mn.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:null!=u?u:_bundle_a5a397f1_Mn.includeEmpty,member_state_filter:null!=c?c:_bundle_a5a397f1_Mn.myMemberStateFilter,super_mode:null!=l?l:_bundle_a5a397f1_Mn.superChannelFilter,public_mode:null!=h?h:_bundle_a5a397f1_Mn.publicChannelFilter,unread_filter:null!=d?d:_bundle_a5a397f1_Mn.unreadChannelFilter,members_nickname_contains:_,members_nickname_startswith:p,members_nickname:f,name_contains:v,channel_urls:m,custom_types:g,custom_type_startswith:E,hidden_mode:C,metadata_order_key:y,metadata_key:N,metadata_values:U,metadata_value_startswith:S,show_frozen:T,show_metadata:A,include_chat_notification:D,include_left_channel:R,created_after:F,created_before:P}),I&&I.query&&I.fields&&(s.params.search_query=I.query,s.params.search_fields=I.fields),w&&w.userIds&&w.userIds.length>0&&(w.includeMode?(s.params.members_include_in=w.userIds,s.params.query_type=w.queryType.toUpperCase()):s.params.members_exactly_in=w.userIds),s}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Nn=function(t){function n(e,n){var s=t.call(this,e,n)||this;s.channels=[];var r=n.next,i=n.channels,a=n.ts;return s.token=r,i&&i.length>0&&(s.channels=i.map((function(t){return t.ts=a,new _bundle_a5a397f1_dr(e,t)}))),s.ts=null!=a?a:0,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Un=function(t){function n(e){var n=e.userId,s=e.filter,r=t.call(this)||this,i=s.myMemberStateFilter;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/group_channel_count"),r.params={state:null!=i?i:_bundle_a5a397f1_jt.ALL},r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Sn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.groupChannelCount=n.group_channel_count,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Tn=function(n){function s(e){var s=e.userId,r=e.filter,i=n.call(this)||this,a=r.keys;return i.method=_bundle_0b1520ed["b" /* A */].GET,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(s),"/unread_item_count"),i.params=Object(_bundle_0b1520ed["hc" /* e */])({item_keys:a}),i}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_An=function(t){function n(e,n){var s=t.call(this,e,n)||this;return"number"==typeof n[_bundle_a5a397f1_$t.GROUP_CHANNEL_UNREAD_MENTION_COUNT]&&(s.groupChannelUnreadMentionCount=n[_bundle_a5a397f1_$t.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]&&(s.groupChannelUnreadMessageCount=n[_bundle_a5a397f1_$t.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.GROUP_CHANNEL_INVITATION_COUNT]&&(s.groupChannelInvitationCount=n[_bundle_a5a397f1_$t.GROUP_CHANNEL_INVITATION_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.SUPER_UNREAD_MENTION_COUNT]&&(s.superGroupChannelUnreadMentionCount=n[_bundle_a5a397f1_$t.SUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.SUPER_UNREAD_MESSAGE_COUNT]&&(s.superGroupChannelUnreadMessageCount=n[_bundle_a5a397f1_$t.SUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.SUPER_INVITATION_COUNT]&&(s.superGroupChannelInvitationCount=n[_bundle_a5a397f1_$t.SUPER_INVITATION_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.NONSUPER_UNREAD_MENTION_COUNT]&&(s.nonSuperGroupChannelUnreadMentionCount=n[_bundle_a5a397f1_$t.NONSUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.NONSUPER_UNREAD_MESSAGE_COUNT]&&(s.nonSuperGroupChannelUnreadMessageCount=n[_bundle_a5a397f1_$t.NONSUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[_bundle_a5a397f1_$t.NONSUPER_INVITATION_COUNT]&&(s.nonSuperGroupChannelInvitationCount=n[_bundle_a5a397f1_$t.NONSUPER_INVITATION_COUNT]),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_In=function(t){function n(e){var n=e.userId,s=t.call(this)||this;return s.method=_bundle_0b1520ed["b" /* A */].GET,s.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/unread_channel_count"),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_wn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.unreadCount=n.unread_count,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Ln=function(t){function n(e){var n=e.userId,s=e.filter,r=e.includeFeedChannel,i=void 0!==r&&r,a=t.call(this)||this,o=s.channelCustomTypesFilter,u=s.superChannelFilter;return a.method=_bundle_0b1520ed["b" /* A */].GET,a.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/unread_message_count"),a.params={super_mode:null!=u?u:_bundle_a5a397f1_Wt.ALL,custom_types:o,include_feed_channel:i},a}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Dn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.unreadCount=n.unread_count,s.unreadFeedCount=n.unread_feed_count,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_xn=function(t){function n(e){var n=e.channelUrl,s=e.scheduledStatus,r=e.messageTypeFilter,i=t.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].GET,i.path="".concat(_bundle_0b1520ed["Qb" /* b9 */],"/count"),i.params={channel_url:n,status:_bundle_a5a397f1_Fn(s)},r&&(i.params.message_type=r),i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Rn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.count=n.count,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Fn=function(e){if(!e)return[];var t=[];return e.forEach((function(e){switch(e){case _bundle_dc8db3c3_ot.PENDING:t.push(_bundle_dc8db3c3_ut.PENDING);break;case _bundle_dc8db3c3_ot.SENT:t.push(_bundle_dc8db3c3_ut.IN_QUEUE),t.push(_bundle_dc8db3c3_ut.SENT);break;case _bundle_dc8db3c3_ot.CANCELED:t.push(_bundle_dc8db3c3_ut.CANCELED);break;case _bundle_dc8db3c3_ot.FAILED:t.push(_bundle_dc8db3c3_ut.FAILED)}})),t},_bundle_a5a397f1_Pn=function(n){function s(e){var s=this,r=e.userId,i=e.channelUrl,a=e.coverUrl,o=e.coverImage,u=e.isDistinct,h=e.isSuper,d=e.isBroadcast,_=e.isPublic,p=e.isExclusive,f=e.isDiscoverable,v=e.isStrict,m=e.isEphemeral,g=e.accessCode,E=e.name,C=e.data,y=e.customType,b=e.messageSurvivalSeconds,N=e.invitedUserIds,U=e.operatorUserIds;return(s=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,s.path=_bundle_0b1520ed["tb" /* al */],s.params=Object(_bundle_0b1520ed["hc" /* e */])({user_ids:Object(_bundle_0b1520ed["sc" /* p */])([r],Object(_bundle_0b1520ed["tc" /* q */])(null!=N?N:[]),!1).filter((function(e,t,n){return t===n.indexOf(e)})),channel_url:i,cover_url:a,cover_file:o,is_distinct:u,is_super:h,is_broadcast:d,is_exclusive:p,is_public:_,is_discoverable:f,strict:v,is_ephemeral:m,access_code:g,name:E,data:C,custom_type:y,operator_ids:U,message_survival_seconds:b}),s}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_kn=function(t){function n(e,n){var s,r=this;return(r=t.call(this,e,n)||this).channel=new _bundle_a5a397f1_dr(e,n),r.isCreated=null===(s=n.is_created)||void 0===s||s,r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_On=function(t){function n(e){var n=e.userId,s=e.channelUrls,r=t.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].PUT,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/mark_as_read_all"),r.params={channel_urls:s},r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_Hn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,i=e.accessCode;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/join"),n.params={user_id:r,access_code:i},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Vn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_a5a397f1_dr(e,n),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Gn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this,i=s.data,a=i.member_count,o=void 0===a?0:a,u=i.joined_member_count,c=void 0===u?0:u,l=i.users,h=void 0===l?null:l;return r.memberCount=o,r.joinedMemberCount=c,r.members=Array.isArray(h)?h.map((function(t){return new _bundle_a5a397f1_Zt(e,t)})):[new _bundle_a5a397f1_Zt(e,s.data)],r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_168f8164_f),_bundle_a5a397f1_Bn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,i=e.shouldRemoveOperatorStatus;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/leave"),n.params={user_id:r,should_remove_operator_status:i},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_qn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this,i=s.data,a=i.member_count,o=void 0===a?0:a,u=i.joined_member_count,c=void 0===u?0:u;return r.memberCount=o,r.joinedMemberCount=c,r.member=new _bundle_a5a397f1_Zt(r._iid,s.data),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_168f8164_f),_bundle_a5a397f1_zn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userIds;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/invite"),n.params={user_ids:r},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_jn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_a5a397f1_dr(e,n),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Wn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this;r.inviter=null;var i=s.data,a=i.member_count,o=void 0===a?0:a,u=i.joined_member_count,c=void 0===u?0:u,l=i.inviter,h=i.invitees,d=void 0===h?[]:h;return r.memberCount=o,r.joinedMemberCount=c,l&&Object.keys(l).length>0&&(r.inviter=new _bundle_0b1520ed["v" /* U */](e,l)),r.invitees=d.map((function(t){return new _bundle_a5a397f1_Zt(e,t)})),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_168f8164_f),_bundle_a5a397f1_Qn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/decline"),n.params={user_id:r},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_a5a397f1_dr(e,n),s.channel.myMemberState=_bundle_a5a397f1_qt.NONE,s}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_Kn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this,i=s.data,a=i.member_count,o=i.joined_member_count,u=i.inviter,c=i.invitee;return r.memberCount=null!=a?a:0,r.joinedMemberCount=null!=o?o:0,r.inviter=new _bundle_0b1520ed["v" /* U */](e,u),r.invitee=new _bundle_a5a397f1_Zt(e,c),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_168f8164_f),_bundle_a5a397f1_Yn={hidePreviousMessages:!1,allowAutoUnhide:!0},_bundle_a5a397f1_Jn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,i=e.hidePreviousMessages,a=e.allowAutoUnhide;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/hide"),n.params={user_id:r,hide_previous_messages:null!=i?i:_bundle_a5a397f1_Yn.hidePreviousMessages,allow_auto_unhide:null!=a?a:_bundle_a5a397f1_Yn.allowAutoUnhide},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Xn=function(t){function n(e,n){var s=t.call(this,e,n)||this,r=n.ts_message_offset;return s.messageOffsetTimestamp=r,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Zn=function(t){function n(e,n,s){var r,i,a,o=this;return(o=t.call(this,e,"SYEV",s)||this).allowAutoUnhide=null,o.hidePreviousMessages=null,o.messageOffsetTimestamp=null,s.data&&(o.allowAutoUnhide=null!==(r=s.data.allow_auto_unhide)&&void 0!==r?r:null,o.hidePreviousMessages=null!==(i=s.data.hide_previous_messages)&&void 0!==i?i:null),o.messageOffsetTimestamp=null!==(a=s.ts_message_offset)&&void 0!==a?a:null,o}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["x" /* W */]),_bundle_a5a397f1_$n=function(t){function n(e){var n=e.channelUrl,s=e.time;return t.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:n,time:s}})||this}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["rb" /* aj */]),_bundle_a5a397f1_es=function(t){function n(e,n,s){var r=t.call(this,e,"SYEV",s)||this;return r.user=new _bundle_0b1520ed["v" /* U */](e,s.data),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["x" /* W */]),_bundle_a5a397f1_ts=function(t){function n(e){var n=e.channelUrl,s=e.time;return t.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:n,time:s}})||this}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["rb" /* aj */]),_bundle_a5a397f1_ns=function(t){function n(e,n,s){var r=t.call(this,e,"SYEV",s)||this;return r.user=new _bundle_0b1520ed["v" /* U */](e,s.data),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["x" /* W */]),_bundle_a5a397f1_ss=function(t){function n(e){var n=e.channelUrl,s=e.messageId;return t.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:n,msg_id:s}})||this}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["rb" /* aj */]),_bundle_a5a397f1_rs=function(t){function i(e,n){var s,r,i,a,o,u,c,l,h,d,_,p,f,v,m,g,E,C,y,M,b,N,U,S=this;return(S=t.call(this,e,n)||this).includeEmpty=!1,S.includeFrozen=!0,S.includeMetaData=!0,S.includeChatNotification=!1,S.channelUrlsFilter=null,S.customTypesFilter=null,S.customTypeStartsWithFilter=null,S.nicknameContainsFilter=null,S.nicknameStartsWithFilter=null,S.nicknameExactMatchFilter=null,S.channelNameContainsFilter="",S.myMemberStateFilter=_bundle_a5a397f1_jt.ALL,S.unreadChannelFilter=_bundle_a5a397f1_Qt.ALL,S.superChannelFilter=_bundle_a5a397f1_Wt.ALL,S.publicChannelFilter=_bundle_a5a397f1_zt.ALL,S.hiddenChannelFilter=_bundle_a5a397f1_Kt.UNHIDDEN,S.searchFilter={fields:[],query:null},S.userIdsFilter={userIds:[],includeMode:!0,queryType:_bundle_a5a397f1_Jt.AND},S.metadataKey=null,S.metadataValues=null,S.metadataOrderKeyFilter=null,S.metadataValueStartsWith=null,S.order=_bundle_7b94e16f_E.LATEST_LAST_MESSAGE,S.includeEmpty=null!==(s=n.includeEmpty)&&void 0!==s&&s,S.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,S.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,S.includeChatNotification=null!==(a=n.includeChatNotification)&&void 0!==a&&a,S.channelUrlsFilter=null!==(o=n.channelUrlsFilter)&&void 0!==o?o:null,S.customTypesFilter=null!==(u=n.customTypesFilter)&&void 0!==u?u:null,S.customTypeStartsWithFilter=null!==(c=n.customTypeStartsWithFilter)&&void 0!==c?c:"",S.nicknameContainsFilter=null!==(l=n.nicknameContainsFilter)&&void 0!==l?l:null,S.nicknameStartsWithFilter=null!==(h=n.nicknameStartsWithFilter)&&void 0!==h?h:null,S.nicknameExactMatchFilter=null!==(d=n.nicknameExactMatchFilter)&&void 0!==d?d:null,S.channelNameContainsFilter=null!==(_=n.channelNameContainsFilter)&&void 0!==_?_:"",S.myMemberStateFilter=null!==(p=n.myMemberStateFilter)&&void 0!==p?p:_bundle_a5a397f1_jt.ALL,S.unreadChannelFilter=null!==(f=n.unreadChannelFilter)&&void 0!==f?f:_bundle_a5a397f1_Qt.ALL,S.superChannelFilter=null!==(v=n.superChannelFilter)&&void 0!==v?v:_bundle_a5a397f1_Wt.ALL,S.publicChannelFilter=null!==(m=n.publicChannelFilter)&&void 0!==m?m:_bundle_a5a397f1_zt.ALL,S.hiddenChannelFilter=null!==(g=n.hiddenChannelFilter)&&void 0!==g?g:_bundle_a5a397f1_Kt.UNHIDDEN,S.searchFilter=null!==(E=n.searchFilter)&&void 0!==E?E:{fields:[],query:null},S.userIdsFilter=null!==(C=n.userIdsFilter)&&void 0!==C?C:{userIds:[],includeMode:!0,queryType:_bundle_a5a397f1_Jt.AND},S.metadataKey=null!==(y=n.metadataKey)&&void 0!==y?y:null,S.metadataValues=null!==(M=n.metadataValues)&&void 0!==M?M:null,S.metadataOrderKeyFilter=null!==(b=n.metadataOrderKeyFilter)&&void 0!==b?b:null,S.metadataValueStartsWith=null!==(N=n.metadataValueStartsWith)&&void 0!==N?N:null,S.order=null!==(U=n.order)&&void 0!==U?U:_bundle_7b94e16f_E.LATEST_LAST_MESSAGE,n.createdAfter&&(S.createdAfter=n.createdAfter),n.createdBefore&&(S.createdBefore=n.createdBefore),S}return Object(_bundle_0b1520ed["fc" /* c */])(i,t),i.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeEmpty)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeFrozen)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeMetaData)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.channelNameContainsFilter)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.channelUrlsFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.customTypesFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.customTypeStartsWithFilter)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.nicknameContainsFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.nicknameStartsWithFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.nicknameExactMatchFilter,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_jt,this.myMemberStateFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Wt,this.superChannelFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_zt,this.publicChannelFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Qt,this.unreadChannelFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Kt,this.hiddenChannelFilter)&&Object(_bundle_0b1520ed["r" /* Q */])(_bundle_a5a397f1_Xt,this.searchFilter.fields)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.searchFilter.query,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.userIdsFilter.userIds)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.userIdsFilter.includeMode)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Jt,this.userIdsFilter.queryType)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_7b94e16f_E,this.order)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metadataOrderKeyFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metadataKey,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.metadataValues,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metadataValueStartsWith,!0)&&Object(_bundle_0b1520ed["Ub" /* be */])(this.createdAfter,!0)&&Object(_bundle_0b1520ed["Ub" /* be */])(this.createdBefore,!0)},i.prototype.serialize=function(){return Object(_bundle_0b1520ed["pb" /* ah */])(this)},i.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,_bundle_a5a397f1_hs.of(this._iid).getMyGroupChannels(this._token,Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])({},this)),this.limit,_bundle_0b1520ed["F" /* a2 */].REQUEST_CHANNEL,!0)]):[3,2]:[3,5];case 1:return e=i.sent(),t=e.channels,r=e.token,this._token=r,this._hasNext=!!r,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},i}(_bundle_0b1520ed["V" /* aM */]),_bundle_a5a397f1_is=function(t){function n(e,n,r){var i,a=this;return(a=t.call(this,e,"SYEV",r)||this).pinnedMessageIds=[],a.latestPinnedMessage=null,a.ts=0,r.data&&(a.pinnedMessageIds=null!==(i=r.data.pinned_message_ids)&&void 0!==i?i:[],a.latestPinnedMessage=r.data.latest_pinned_message?_bundle_dc8db3c3_Tt(e,Object(_bundle_0b1520ed["jc" /* g */])({},r.data.latest_pinned_message)):null),a.ts=r.ts,a}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["x" /* W */]),_bundle_a5a397f1_as=function(n){function s(e){var s=e.channelUrl,r=e.userId,i=n.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/messages/mark_as_delivered"),i.params=Object(_bundle_0b1520ed["hc" /* e */])({userId:r}),i}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_os,_bundle_a5a397f1_us=function(t){function n(e,n,s){var r=t.call(this,e,"DLVR",s)||this;return r.channelUrl=s.channel_url,r.deliveredStateUpdate=s.updated,r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["x" /* W */]),_bundle_a5a397f1_cs=function(){function e(e){var t=e.top,n=void 0===t?Number.MAX_SAFE_INTEGER:t,s=e.bottom,r=void 0===s?0:s;this.top=n,this.bottom=r}return e.prototype.includes=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.every((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.overlap=function(e){return this.includes(e.top)||this.includes(e.bottom)},e.prototype.intersect=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.extends=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.top=Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([this.top],Object(_bundle_0b1520ed["tc" /* q */])(e),!1)),this.bottom=Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([this.bottom],Object(_bundle_0b1520ed["tc" /* q */])(e),!1))},e}(),_bundle_a5a397f1_ls={},_bundle_a5a397f1_hs=function(a){function _(e,t){var n,r=this;return(r=a.call(this,e,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},t),{channelType:_bundle_0b1520ed["d" /* C */].GROUP}))||this)._leftChannels=new Map,r._disableMack=!1,r._markAsReadAllLastSentAt=0,r._disableMack=null!==(n=t.disableMack)&&void 0!==n&&n,r._groupChannelHandlers=new Map,r._groupChannelCache=new _bundle_a5a397f1_tn(r._iid,{sdkState:t.sdkState,cacheContext:t.cacheContext}),r._groupChannelBroadcast=new _bundle_a5a397f1_mn({dispatcher:t.dispatcher,groupChannelCache:r._groupChannelCache,messageCache:Os.of(r._iid),unsentMessageCache:Cs.of(r._iid)}),setInterval((function(){var e,t,n=function(e){e.invalidateTypingStatus()&&(r._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[e],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),r._groupChannelHandlers.forEach((function(t){t.onTypingStatusUpdated&&t.onTypingStatusUpdated(e)})))};try{for(var s=Object(_bundle_0b1520ed["wc" /* t */])(r._groupChannelCache.channels),i=s.next();!i.done;i=s.next()){n(i.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}),1e3),r._dispatcher.on((function(e){e instanceof _bundle_0b1520ed["x" /* W */]?r._handleEvent(e).catch((function(e){if(Object(_bundle_0b1520ed["p" /* O */])(e)&&"foreground"===r._sdkState.appState)throw e})):e instanceof _bundle_7b94e16f_b?Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=e.message,[4,this.getChannel(t.channelUrl,!0)];case 1:return n=s.sent(),t instanceof _bundle_dc8db3c3_gt?n._autoResendUserMessage(t):t instanceof wt&&n._autoResendFileMessage(t),[2]}}))})):e instanceof _bundle_7b94e16f_D?r.reduceDBSize():e instanceof _bundle_dc8db3c3_lt&&Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var t,n,s,r,i,a=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return t=e.channelUrl,n=e.channelType,s=e.parentMessage,r=new Qs(this._iid,{channel_type:_bundle_0b1520ed["d" /* C */].GROUP,channel_url:t,parent_message_id:s.messageId,thread_info:_bundle_dc8db3c3_Oe.payloadify(s.threadInfo)}),n!==_bundle_0b1520ed["d" /* C */].GROUP?[3,2]:[4,this.getChannel(t,!0)];case 1:i=o.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(a,void 0,void 0,(function(){var e,t,n,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onThreadInfoUpdated&&n.onThreadInfoUpdated(i,r)}catch(e){s={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),o.label=2;case 2:return[2]}}))}))})),_bundle_a5a397f1_ls[e]||(_bundle_a5a397f1_ls[e]=r),r}return Object(_bundle_0b1520ed["fc" /* c */])(_,a),Object.defineProperty(_.prototype,"_messageCache",{get:function(){return Os.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"_unsentMessageCache",{get:function(){return Cs.of(this._iid)},enumerable:!1,configurable:!0}),_.of=function(e){return _bundle_a5a397f1_ls[e]||(_bundle_a5a397f1_ls[e]=new _(e,_bundle_0b1520ed["w" /* V */].of(e))),_bundle_a5a397f1_ls[e]},_.clear=function(e){_bundle_a5a397f1_ls[e]&&delete _bundle_a5a397f1_ls[e]},Object.defineProperty(_.prototype,"handlers",{get:function(){return Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),_.prototype.buildGroupChannelFromSerializedData=function(e){var t=Object(_bundle_0b1520ed["Cc" /* z */])(e);return new _bundle_a5a397f1_dr(this._iid,_bundle_a5a397f1_dr.payloadify(t))},_.prototype.buildGroupChannelListQueryFromSerializedData=function(e){var t=Object(_bundle_0b1520ed["Cc" /* z */])(e);return new _bundle_a5a397f1_rs(this._iid,t)},_.prototype.buildMemberFromSerializedData=function(e){var t=Object(_bundle_0b1520ed["Cc" /* z */])(e);return new _bundle_a5a397f1_Zt(this._iid,_bundle_a5a397f1_Zt.payloadify(t))},_.prototype.getChannelFromCache=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._groupChannelCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},_.prototype.getChannelsFromCache=function(e,t,n,s,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return[4,this._groupChannelCache.fetch({token:e,filter:t,order:n,limit:s,borderlineChannelUrl:r})];case 1:return[2,i.sent()]}}))}))},_.prototype.upsertChannelsToCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},_.prototype.removeChannelsFromCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.remove(e)];case 1:return t.sent(),[2]}}))}))},_.prototype.clearChannelsFromCache=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return e.sent(),[2]}}))}))},_.prototype.reduceDBSize=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r,i,a,o,u,c,l,h,_,p,f;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return e=Os.of(this._iid),t=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext,n=t.localCacheConfig,s=t.nestdb,t.localCacheEnabled&&s&&s.state==ys.OPENED?(r=1024*n.maxSize*1024,[4,s.estimateUsage()]):[2];case 1:if((i=d.sent())<r)return[2];a=[],o=this._groupChannelCache.channels,u={},_=0,d.label=2;case 2:return _<o.length?[4,this.getMessagesFromCache(o[_].url,0,"prev",new bs)]:[3,5];case 3:c=d.sent(),u[o[_].url]=JSON.stringify(c).length,l=new _bundle_0b1520ed["G" /* a3 */]({channel:o[_],cachedMessageCount:c.length}),a.push(l),d.label=4;case 4:return _++,[3,2];case 5:h=a.sort(n.clearOrderComparator),_=0,d.label=6;case 6:return _<h.length?[4,e.removeMessagesOfChannel(h[_].channel.url)]:[3,10];case 7:return d.sent(),[4,e._getGroupChannelPreferenceSize(h[_].channel.url)];case 8:if(p=d.sent(),f=u[h[_].channel.url]+p,(i-=f)<r)return[3,10];d.label=9;case 9:return _++,[3,6];case 10:return[2]}}))}))},_.prototype._handleEvent=function(e){var t,n;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,r,a,o,u,c,l,_,f,v,m,g,C,M,b,N,U,S,T,A,I,w,L,D,x,R,P,V,Y,X,Z,$,ee,te,ne,se,re,ie,ae,oe,ue,ce,le,he,de,_e,pe,fe,ve,me,ge,Ee,Ce,ye,Me,be,Ne,Ue,Se,Te,Ae,Ie,we,Le,Qe,Ke,Ye,Je,Xe,Ze,$e,et,tt,nt,st,rt,it,at,ot,ut,ct,lt,ht,dt,_t,pt,ft,vt,mt,gt,Et,Ct,yt,Mt,bt,Nt,Ut,St,Tt,At,Dt,Rt,zt,jt,Wt,Qt,Kt,Yt,Jt,Xt,Zt,$t,en,tn,nn,sn,rn,an,on,un,cn,ln,hn,dn,_n,pn,mn,gn,En,Cn,yn,Mn,bn,Nn,Un,Sn,Tn,An,In,wn,Ln=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(Dn){switch(Dn.label){case 0:switch(Dn.trys.push([0,80,,81]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,19];case"MCNT":return[3,23];case"PEDI":return[3,32];case"VOTE":return[3,35];case"SYEV":return[3,38];case"USEV":return[3,78]}return[3,79];case 1:return _=null,"MESG"===e.code?_=e.as(hr):"FILE"===e.code?_=e.as(_bundle_dc8db3c3_At):"ADMM"!==e.code&&"BRDM"!=e.code||(_=e.as(_bundle_168f8164_H)),_?(s=_.message,r=_.isMentioned,a=_.forceUpdateLastMessage,s.channelType!==_bundle_0b1520ed["d" /* C */].GROUP?[3,3]:(this._disableMack||Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return e=new _bundle_a5a397f1_ss(s),this._requestQueue.send(e),[2]}))}))})),V=this._groupChannelCache.isCachedInMemory(s.channelUrl),w=s instanceof _bundle_dc8db3c3_ft&&s.sender.userId===this._sdkState.userId,[4,this.getChannel(s.channelUrl,!0)])):[3,3];case 2:if((o=Dn.sent()).hiddenState===_bundle_a5a397f1_ar.HIDDEN_ALLOW_AUTO_UNHIDE&&(o.hiddenState=_bundle_a5a397f1_ar.UNHIDDEN),s instanceof _bundle_dc8db3c3_ft){u=_bundle_0b1520ed["w" /* V */].of(this._iid).useMemberInfoInMessage;try{for(c=Object(_bundle_0b1520ed["wc" /* t */])(o.members),l=c.next();!l.done;l=c.next())if((yt=l.value).userId===s.sender.userId){u||(s.sender.nickname=yt.nickname,s.sender.plainProfileUrl=yt.plainProfileUrl,s.sender.metaData=yt.metaData,s.sender.isBlockedByMe=yt.isBlockedByMe);break}}catch(e){yn={error:e}}finally{try{l&&!l.done&&(Mn=c.return)&&Mn.call(c)}finally{if(yn)throw yn.error}}!u&&r&&(null===(t=s.mentionedUsers)||void 0===t||t.forEach((function(e){var t,n;try{for(var s=Object(_bundle_0b1520ed["wc" /* t */])(o.members),r=s.next();!r.done;r=s.next()){var i=r.value;if(e.userId===i.userId){e.nickname=i.nickname,e.plainProfileUrl=i.plainProfileUrl,e.metaData=i.metaData;break}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}))),w&&(M=this._sessionManager.currentUser)&&(M.nickname=s.sender.nickname,M.plainProfileUrl=s.sender.plainProfileUrl,M.metaData=s.sender.metaData)}s.silent&&!w||(o.isEphemeral||V)&&(o._updateLastMessage(s),w||o._updateUnreadCount(o.unreadMessageCount+1,o.unreadMentionCount+(r?1:0))),a&&o._updateLastMessage(s),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[o],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_RECEIVED}})),s.silent&&!w||Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(o)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[s],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_RECEIVED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,i,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageReceived&&n.onMessageReceived(o,s),r&&n.onMentionReceived&&n.onMentionReceived(o,s)}catch(e){i={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(i)throw i.error}}return[2]}))}))})),Dn.label=3;case 3:return[3,79];case 4:return _=null,"MEDI"===e.code?_=e.as(pr):"FEDI"===e.code?_=e.as(vr):"AEDI"===e.code&&(_=e.as(_bundle_168f8164_T)),_?(f=_.message,v=_.mentionCountChange,f.threadInfo&&(f.threadInfo.unreadReplyCount=void 0),f.channelType!==_bundle_0b1520ed["d" /* C */].GROUP?[3,6]:(V=this._groupChannelCache.isCachedInMemory(f.channelUrl),[4,this.getChannel(f.channelUrl,!0)])):[3,6];case 5:m=Dn.sent(),w=f instanceof _bundle_dc8db3c3_ft&&f.sender.userId===this._sdkState.userId,g=!1,w?(C=f.sender,(M=this._sessionManager.currentUser)&&(M.nickname=C.nickname,M.plainProfileUrl=C.plainProfileUrl,M.metaData=C.metaData)):m.isReadMessage(f)||0!==v&&!f.silent&&V&&(m._updateUnreadCount(m.unreadMessageCount,m.unreadMentionCount+v),g=!0),m._updateLastMessage(f)?g=!0:(null===(n=m.lastMessage)||void 0===n?void 0:n.isIdentical(f))&&(V?m._updateLastMessage(f)&&(g=!0):g=!0),b=!1,m.lastPinnedMessage&&m.lastPinnedMessage.messageId===f.messageId&&(m.lastPinnedMessage=f,g=!0,b=!0),g&&(this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[m],context:{source:b?_bundle_0b1520ed["F" /* a2 */].EVENT_PINNED_MESSAGE_UPDATED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED}})),f.silent&&!w||Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(m)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),b&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPinnedMessageUpdated&&n.onPinnedMessageUpdated(m)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[f],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageUpdated&&n.onMessageUpdated(m,f),v>0&&n.onMentionReceived&&n.onMentionReceived(m,f)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Dn.label=6;case 6:return[3,79];case 7:return N=e.as(_bundle_0b1520ed["Vb" /* bf */]),me=N.channelUrl,ge=N.channelType,U=N.messageId,S=N.silent,T=N.messageCreatedAt,A=N.senderId,ge!==_bundle_0b1520ed["d" /* C */].GROUP?[3,9]:[4,this.getChannel(me,!0)];case 8:I=Dn.sent(),w=A===this._sdkState.userId,S||w||T>0&&I.myLastRead<T&&I.unreadMessageCount>0&&I._updateUnreadCount(I.unreadMessageCount-1,0),this._dispatcher.dispatch(new _bundle_0b1520ed["db" /* aU */]({messageIds:[U],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_DELETED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageDeleted&&n.onMessageDeleted(I,U)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Dn.label=9;case 9:return[3,79];case 10:return(L=e.as(_bundle_dc8db3c3_Xe).readStatus).channelType!==_bundle_0b1520ed["d" /* C */].GROUP?[3,12]:(V=this._groupChannelCache.isCachedInMemory(L.channelUrl),[4,this.getChannel(L.channelUrl,!0)]);case 11:D=Dn.sent(),V&&D._updateUnreadMemberState(L.reader.userId,L.readAt),L.reader.userId===this._sdkState.userId?V?(D.unreadMessageCount>0||D.unreadMentionCount>0)&&(D._updateUnreadCount(0,0),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[D],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_READ}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(D)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))):0!==D.unreadMessageCount&&0!==D.unreadMentionCount||(this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[D],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_READ}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(D)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))):(this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[D],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_READ}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUnreadMemberStatusUpdated&&n.onUnreadMemberStatusUpdated(D)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),Dn.label=12;case 12:return[3,79];case 13:return x=e.as(_bundle_a5a397f1_us),me=x.channelUrl,R=x.deliveredStateUpdate,P=void 0===R?{}:R,V=this._groupChannelCache.isCachedInMemory(me),[4,this.getChannel(me,!0)];case 14:return Y=Dn.sent(),V&&Object.keys(P).forEach((function(e){Y._updateUndeliveredMemberState(e,P[e])})),Object.keys(P).some((function(e){return e!==Ln._sdkState.userId}))&&(this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Y],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_DELIVERED}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUndeliveredMemberStatusUpdated&&n.onUndeliveredMemberStatusUpdated(Y)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),[3,79];case 15:return X=e.as(_bundle_168f8164_L),me=X.channelUrl,ge=X.channelType,Z=X.event,ge!==_bundle_0b1520ed["d" /* C */].GROUP?[3,18]:[4,this.getChannel(me,!0)];case 16:return $=Dn.sent(),[4,this.getMessageFromCache(Z.messageId)];case 17:(ne=Dn.sent())?ne instanceof _bundle_dc8db3c3_ht&&(ne.applyReactionEvent(Z),this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[ne],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_REACTION_UPDATED}))):this._dispatcher.dispatch(new _bundle_0b1520ed["Y" /* aP */]({event:Z,source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_REACTION_UPDATED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onReactionUpdated&&n.onReactionUpdated($,Z)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Dn.label=18;case 18:return[3,79];case 19:return(ee=e.as(_bundle_168f8164_g).event).channelType!==_bundle_0b1520ed["d" /* C */].GROUP?[3,22]:[4,this.getChannel(ee.channelUrl,!0)];case 20:return te=Dn.sent(),[4,this.getMessageFromCache(ee.targetMessageId)];case 21:(ne=Dn.sent())?ne instanceof _bundle_dc8db3c3_ht&&(ne.applyThreadInfoUpdateEvent(ee),this._dispatcher.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[ne],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_THREADINFO_UPDATED}))):this._dispatcher.dispatch(new _bundle_0b1520ed["Z" /* aQ */]({event:ee,source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_THREADINFO_UPDATED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onThreadInfoUpdated&&n.onThreadInfoUpdated(te,ee)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Dn.label=22;case 22:return[3,79];case 23:se=e.as(_bundle_168f8164_U).groupChannelMemberCounts,re=[],Dn.label=24;case 24:Dn.trys.push([24,29,30,31]),ie=Object(_bundle_0b1520ed["wc" /* t */])(se),ae=ie.next(),Dn.label=25;case 25:return ae.done?[3,28]:(oe=ae.value,me=oe.channelUrl,ct=oe.memberCount,lt=oe.joinedMemberCount,ue=oe.updatedAt,[4,this.getChannelFromCache(me)]);case 26:(ce=Dn.sent())&&ce._setLatestMemberCount(ct,lt,ue)&&re.push(ce),Dn.label=27;case 27:return ae=ie.next(),[3,25];case 28:return[3,31];case 29:return le=Dn.sent(),bn={error:le},[3,31];case 30:try{ae&&!ae.done&&(Nn=ie.return)&&Nn.call(ie)}finally{if(bn)throw bn.error}return[7];case 31:return re.length>0&&(this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:re,context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_MEMBER_COUNT_UPDATED}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelMemberCountChanged&&n.onChannelMemberCountChanged(re)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),[3,79];case 32:return he=e.as(_bundle_168f8164_I),de=he.event,_e=he.status,me=he.channelUrl,ge=he.channelType,me&&ge===_bundle_0b1520ed["d" /* C */].GROUP?[4,this.getChannel(me,!0)]:[3,34];case 33:pe=Dn.sent(),this._dispatcher.dispatch(new _bundle_0b1520ed["ab" /* aR */]({event:de,source:_bundle_0b1520ed["F" /* a2 */].EVENT_POLL_UPDATED})),Object(_bundle_0b1520ed["h" /* G */])(_e===_bundle_0b1520ed["Wb" /* bg */]?function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollDeleted&&n.onPollDeleted(pe,de.pollId)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}:function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollUpdated&&n.onPollUpdated(pe,de)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}),Dn.label=34;case 34:return[3,79];case 35:return fe=e.as(Fr),ve=fe.event,me=fe.channelUrl,ge=fe.channelType,me&&ge===_bundle_0b1520ed["d" /* C */].GROUP?[4,this.getChannel(me,!0)]:[3,37];case 36:Ee=Dn.sent(),this._dispatcher.dispatch(new _bundle_0b1520ed["T" /* aK */]({event:ve,source:_bundle_0b1520ed["F" /* a2 */].EVENT_POLL_VOTED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollVoted&&n.onPollVoted(Ee,ve)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Dn.label=37;case 37:return[3,79];case 38:if(!(Ce=e.as(_bundle_168f8164_f).event).isGroupChannelEvent)return[3,77];switch(Ce.category){case _bundle_168f8164_A.CHANNEL_JOIN:return[3,39];case _bundle_168f8164_A.CHANNEL_LEAVE:return[3,41];case _bundle_168f8164_A.CHANNEL_OPERATOR_UPDATE:return[3,45];case _bundle_168f8164_A.CHANNEL_INVITE:return[3,47];case _bundle_168f8164_A.CHANNEL_DECLINE_INVITE:return[3,49];case _bundle_168f8164_A.TYPING_START:case _bundle_168f8164_A.TYPING_END:return[3,51];case _bundle_168f8164_A.USER_CHANNEL_MUTE:case _bundle_168f8164_A.USER_CHANNEL_UNMUTE:return[3,53];case _bundle_168f8164_A.USER_CHANNEL_BAN:return[3,55];case _bundle_168f8164_A.USER_CHANNEL_UNBAN:return[3,59];case _bundle_168f8164_A.CHANNEL_FREEZE:case _bundle_168f8164_A.CHANNEL_UNFREEZE:return[3,61];case _bundle_168f8164_A.CHANNEL_HIDE:return[3,63];case _bundle_168f8164_A.CHANNEL_UNHIDE:return[3,65];case _bundle_168f8164_A.CHANNEL_DELETED:return[3,67];case _bundle_168f8164_A.CHANNEL_PROP_CHANGED:return[3,69];case _bundle_168f8164_A.CHANNEL_META_DATA_CHANGED:return[3,71];case _bundle_168f8164_A.CHANNEL_META_COUNTERS_CHANGED:return[3,73];case _bundle_168f8164_A.PINNED_MESSAGE_CHANGED:return[3,75]}return[3,77];case 39:return[4,this.getChannel(Ce.channelUrl,!0)];case 40:return ye=Dn.sent(),Me=e.as(_bundle_a5a397f1_Gn),be=Me.memberCount,Ne=Me.joinedMemberCount,Ue=Me.members,Se=!1,Ue.forEach((function(e){ye.isExclusive||ye.isSuper||ye.isBroadcast?Se=Se||ye._setLatestMemberCount(be,Ne,Ce.ts):(e.state=_bundle_a5a397f1_qt.JOINED,ye.addMember(e,Ce.ts),Ln._updateJoinedMemberCount(ye)),e.userId===Ln._sdkState.userId&&(ye.myMemberState=_bundle_a5a397f1_qt.JOINED)})),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[ye],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_JOINED,users:Ue}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){var t,n;try{for(var s=Object(_bundle_0b1520ed["wc" /* t */])(Ue),r=s.next();!r.done;r=s.next()){var i=r.value;e.onUserJoined&&e.onUserJoined(ye,i)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}ye.isBroadcast&&Se&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([ye])})),[2]}))}))})),[3,77];case 41:return(Mt=this._leftChannels.get(Ce.channelUrl))?(Ae=Mt.channel,[3,44]):[3,42];case 42:return[4,this.getChannel(Ce.channelUrl,!0)];case 43:Ae=Dn.sent(),Dn.label=44;case 44:return Te=Ae,Ie=e.as(_bundle_a5a397f1_qn),ct=Ie.memberCount,lt=Ie.joinedMemberCount,we=Ie.member,Le=!1,Qe=_bundle_0b1520ed["w" /* V */].of(this._iid).appInfo,Te.isExclusive||Te.isSuper||Te.isBroadcast?Le=Te._setLatestMemberCount(ct,lt,Ce.ts):((null==Qe?void 0:Qe.enabledChannelMemberShipHistory)?((Ke=Te.members.find((function(e){return e.userId===we.userId})))&&(Ke.state=_bundle_a5a397f1_qt.LEFT),Te.memberCount=ct):Te.removeMember(we),this._updateJoinedMemberCount(Te)),we.userId===this._sdkState.userId?(Te.myMemberState=_bundle_a5a397f1_qt.NONE,Te.invitedAt=0,Te.joinedAt=0,Te._updateUnreadCount(0,0),Te.isPublic?this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Te],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_LEFT,user:we}})):(this._markAsLeave(Te),this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[Te.url],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_LEFT,user:we}})))):this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Te],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_LEFT,user:we}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserLeft&&e.onUserLeft(Te,we),Te.isBroadcast&&Le&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([Te])})),[2]}))}))})),[3,77];case 45:return[4,this.getChannel(Ce.channelUrl,!0)];case 46:Ye=Dn.sent(),Je=e.as(_bundle_168f8164_m).operators,Xe=Je.map((function(e){return e.userId}));try{for(Ze=Object(_bundle_0b1520ed["wc" /* t */])(Ye.members),$e=Ze.next();!$e.done;$e=Ze.next())(yt=$e.value).role=Xe.includes(yt.userId)?_bundle_0b1520ed["H" /* a7 */].OPERATOR:_bundle_0b1520ed["H" /* a7 */].NONE}catch(e){Un={error:e}}finally{try{$e&&!$e.done&&(Sn=Ze.return)&&Sn.call(Ze)}finally{if(Un)throw Un.error}}return Ye.myRole=Xe.includes(this._sdkState.userId)?_bundle_0b1520ed["H" /* a7 */].OPERATOR:_bundle_0b1520ed["H" /* a7 */].NONE,this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Ye],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_OPERATOR_UPDATED,operators:Je}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(Ye,Je)})),[2]}))}))})),[3,77];case 47:return[4,this.getChannel(Ce.channelUrl,!0)];case 48:et=Dn.sent(),tt=e.as(_bundle_a5a397f1_Wn),ct=tt.memberCount,lt=tt.joinedMemberCount,nt=tt.inviter,(st=tt.invitees).forEach((function(e){return e.state=_bundle_a5a397f1_qt.INVITED}));try{for(rt=Object(_bundle_0b1520ed["wc" /* t */])(st),it=rt.next();!it.done;it=rt.next())at=it.value,et.isExclusive||et.isSuper||et.isBroadcast?et._setLatestMemberCount(ct,lt,Ce.ts):et.addMember(at,Ce.ts),this._sdkState.userId===at.userId&&(et.hiddenState=_bundle_a5a397f1_ar.UNHIDDEN,et.myMemberState!==_bundle_a5a397f1_qt.JOINED&&(et.myMemberState=_bundle_a5a397f1_qt.INVITED),et.invitedAt=Ce.ts)}catch(e){Tn={error:e}}finally{try{it&&!it.done&&(An=rt.return)&&An.call(rt)}finally{if(Tn)throw Tn.error}}return this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[et],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_INVITED,inviter:nt,invitees:st}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserReceivedInvitation&&e.onUserReceivedInvitation(et,nt,st)})),[2]}))}))})),[3,77];case 49:return[4,this.getChannel(Ce.channelUrl,!0)];case 50:return ot=Dn.sent(),ut=e.as(_bundle_a5a397f1_Kn),ct=ut.memberCount,lt=ut.joinedMemberCount,ht=ut.inviter,dt=ut.invitee,ot.isExclusive||ot.isSuper||ot.isBroadcast?ot._setLatestMemberCount(ct,lt,Ce.ts):ot.removeMember(dt),this._sdkState.userId===dt.userId?(ot.invitedAt=0,ot.myMemberState=_bundle_a5a397f1_qt.NONE,ot.isPublic?this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[ot],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_DECLINED_INVITE,inviter:ht,invitee:dt}})):this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[ot.url],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_DECLINED_INVITE,inviter:ht,invitee:dt}}))):this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[ot],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_DECLINED_INVITE,inviter:ht,invitee:dt}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserDeclinedInvitation&&e.onUserDeclinedInvitation(ot,ht,dt)})),[2]}))}))})),[3,77];case 51:return[4,this.getChannel(Ce.channelUrl,!0)];case 52:return _t=Dn.sent(),pt=Ce.category===_bundle_168f8164_A.TYPING_START,ft=e.as(pt?_bundle_a5a397f1_es:_bundle_a5a397f1_ns).user,_t._updateTypingStatus(ft,pt?Ce.ts:0),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[_t],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onTypingStatusUpdated&&e.onTypingStatusUpdated(_t)})),[2]}))}))})),[3,77];case 53:return[4,this.getChannel(Ce.channelUrl,!0)];case 54:vt=Dn.sent(),mt=Ce.category===_bundle_168f8164_A.USER_CHANNEL_MUTE,(gt=e.as(mt?$n:tr).user).userId===this._sdkState.userId&&(vt.myMutedState=mt?_bundle_0b1520ed["Rb" /* bb */].MUTED:_bundle_0b1520ed["Rb" /* bb */].UNMUTED,vt._myMutedRemainingTime=gt.restrictionInfo.remainingDuration);try{for(Et=Object(_bundle_0b1520ed["wc" /* t */])(vt.members),Ct=Et.next();!Ct.done;Ct=Et.next())if((yt=Ct.value).userId===gt.userId){yt.isMuted=mt;break}}catch(e){In={error:e}}finally{try{Ct&&!Ct.done&&(wn=Et.return)&&wn.call(Et)}finally{if(In)throw In.error}}return this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[vt],context:{source:mt?_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_MUTED:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNMUTED,user:gt}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){mt?e.onUserMuted&&e.onUserMuted(vt,gt):e.onUserUnmuted&&e.onUserUnmuted(vt,gt)})),[2]}))}))})),[3,77];case 55:return(Mt=this._leftChannels.get(Ce.channelUrl))?(Nt=Mt.channel,[3,58]):[3,56];case 56:return[4,this.getChannel(Ce.channelUrl,!0)];case 57:Nt=Dn.sent(),Dn.label=58;case 58:return bt=Nt,this._markAsLeave(bt),Ut=e.as(rr).user,Ut.userId===this._sdkState.userId&&this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[bt.url],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_BANNED,user:Ut}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserBanned&&e.onUserBanned(bt,Ut)})),[2]}))}))})),[3,77];case 59:return[4,this.getChannel(Ce.channelUrl,!0)];case 60:return St=Dn.sent(),Tt=e.as(sr).user,Tt.userId===this._sdkState.userId&&this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[St.url],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNBANNED,user:Tt}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserUnbanned&&e.onUserUnbanned(St,Tt)})),[2]}))}))})),[3,77];case 61:return[4,this.getChannel(Ce.channelUrl,!0)];case 62:return At=Dn.sent(),Dt=e.as(or).freeze,At.isFrozen=Dt,this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[At],context:{source:Dt?_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_FROZEN:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNFROZEN}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){Dt?e.onChannelFrozen&&e.onChannelFrozen(At):e.onChannelUnfrozen&&e.onChannelUnfrozen(At)})),[2]}))}))})),[3,77];case 63:return[4,this.getChannel(Ce.channelUrl,!0)];case 64:return Rt=Dn.sent(),zt=e.as(_bundle_a5a397f1_Zn),jt=zt.allowAutoUnhide,Wt=zt.hidePreviousMessages,Qt=zt.messageOffsetTimestamp,null!==jt&&(Rt.hiddenState=jt?_bundle_a5a397f1_ar.HIDDEN_ALLOW_AUTO_UNHIDE:_bundle_a5a397f1_ar.HIDDEN_PREVENT_AUTO_UNHIDE),null!==Wt&&Wt&&Rt._updateUnreadCount(0,0),null!==Qt&&(Rt.messageOffsetTimestamp=Qt),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Rt],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_HIDDEN}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelHidden&&e.onChannelHidden(Rt)})),[2]}))}))})),[3,77];case 65:return[4,this.getChannel(Ce.channelUrl,!0)];case 66:return(Kt=Dn.sent()).hiddenState=_bundle_a5a397f1_ar.UNHIDDEN,this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Kt],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNHIDDEN}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(Kt)})),[2]}))}))})),[3,77];case 67:return[4,this.getChannel(Ce.channelUrl,!0)];case 68:return Yt=Dn.sent(),this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[Ce.channelUrl],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_DELETED}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(Yt.url,Yt.channelType)})),[2]}))}))})),[3,77];case 69:return[4,this.getChannelWithoutCache(Ce.channelUrl,!0)];case 70:return Jt=Dn.sent(),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Jt],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UPDATED}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(Jt)})),[2]}))}))})),[3,77];case 71:return[4,this.getChannel(Ce.channelUrl,!0)];case 72:return Xt=Dn.sent(),Zt=e.as(Fn),$t=Zt.created,en=Zt.updated,tn=Zt.deleted,$t&&(Xt._upsertCachedMetaData($t,Ce.ts),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Xt],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_METADATA_CREATED,metaData:$t}}))),en&&(Xt._upsertCachedMetaData(en,Ce.ts),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Xt],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_METADATA_UPDATED,metaData:en}}))),tn&&(Xt._removeFromCachedMetaData(tn,Ce.ts),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[Xt],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_METADATA_DELETED,metaDataKeys:tn}}))),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){$t&&e.onMetaDataCreated&&e.onMetaDataCreated(Xt,$t),en&&e.onMetaDataUpdated&&e.onMetaDataUpdated(Xt,en),tn&&e.onMetaDataDeleted&&e.onMetaDataDeleted(Xt,tn)})),[2]}))}))})),[3,77];case 73:return[4,this.getChannel(Ce.channelUrl,!0)];case 74:return nn=Dn.sent(),sn=e.as(Yn),rn=sn.created,an=sn.updated,on=sn.deleted,rn&&this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[nn],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_METACOUNTER_CREATED,metaCounters:rn}})),an&&this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[nn],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_METACOUNTER_UPDATED,metaCounters:an}})),on&&this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[nn],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_METACOUNTER_DELETED,metaCounterKeys:on}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){rn&&e.onMetaCounterCreated&&e.onMetaCounterCreated(nn,rn),an&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(nn,an),on&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(nn,on)})),[2]}))}))})),[3,77];case 75:return[4,this.getChannel(Ce.channelUrl,!0)];case 76:return un=Dn.sent(),cn=e.as(_bundle_a5a397f1_is),ln=cn.pinnedMessageIds,hn=cn.latestPinnedMessage,(dn=cn.ts)>un._pinnedMessagesUpdatedAt&&(un.pinnedMessageIds=ln,un.lastPinnedMessage=hn,un._pinnedMessagesUpdatedAt=dn,this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[un],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_PINNED_MESSAGE_UPDATED}})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(un)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Ln,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(un)})),[2]}))}))}))),[3,77];case 77:return[3,79];case 78:switch((_n=e.as(_bundle_7b94e16f_T).event).category){case _bundle_7b94e16f_C.USER_BLOCK:pn=_bundle_7b94e16f_N.getDataAsUserBlockEvent(this._iid,_n),gn=pn.blocker,En=pn.blockee,this._groupChannelCache.block(gn.userId,En.userId);break;case _bundle_7b94e16f_C.USER_UNBLOCK:mn=_bundle_7b94e16f_N.getDataAsUserBlockEvent(this._iid,_n),gn=mn.blocker,En=mn.blockee,this._groupChannelCache.unblock(gn.userId,En.userId)}return[3,79];case 79:return[3,81];case 80:if(Cn=Dn.sent(),Object(_bundle_0b1520ed["p" /* O */])(Cn))throw Cn;return[3,81];case 81:return[2]}}))}))},_.prototype._markAsLeave=function(e){var t,n=this,s=null!==(t=this._leftChannels.get(e.url))&&void 0!==t?t:{channel:e,ref:0};s.ref++,this._leftChannels.set(e.url,s),setTimeout((function(){s.ref--,0===s.ref&&n._leftChannels.delete(e.url)}),1e4)},_.prototype.addHandler=function(e,t){this._groupChannelHandlers.set(e,t)},_.prototype.removeHandler=function(e){this._groupChannelHandlers.delete(e)},_.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},_.prototype.subscribeChannelEvent=function(e,t){this._groupChannelBroadcast.subscribe(e,t)},_.prototype.unsubscribeChannelEvent=function(e){this._groupChannelBroadcast.unsubscribe(e)},_.prototype._updateJoinedMemberCount=function(e){e.joinedMemberCount=e.members.filter((function(e){return e.state===_bundle_a5a397f1_qt.JOINED})).length},_.prototype.getChannel=function(e,t){return void 0===t&&(t=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(n=s.sent())?[2,n]:[3,4];case 3:return s.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,t)];case 5:return[2,s.sent()]}}))}))},_.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,s,r,i,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=new _bundle_a5a397f1_Cn({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:switch(s=c.sent(),r=s.as(_bundle_a5a397f1_yn).channel,i=r.unreadMessageCount,a=r.unreadMentionCount,r.myCountPreference){case _bundle_a5a397f1_ir.UNREAD_MESSAGE_COUNT_ONLY:a=0;break;case _bundle_a5a397f1_ir.UNREAD_MENTION_COUNT_ONLY:i=0;break;case _bundle_a5a397f1_ir.OFF:i=0,a=0}return r._updateUnreadCount(i,a),[4,this.upsertChannelsToCache([r])];case 2:return[2,c.sent()[0]]}}))}))},_.prototype.refreshChannel=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=_bundle_0b1520ed["F" /* a2 */].REFRESH_CHANNEL),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,r,i,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),s=new _bundle_a5a397f1_Cn({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(s)];case 1:return r=u.sent(),(i=r.as(_bundle_a5a397f1_yn).channel).myMemberState!==_bundle_a5a397f1_qt.NONE?[3,2]:(this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[i.url],context:{source:n}})),[3,4]);case 2:return[4,this.upsertChannelsToCache([i])];case 3:a=u.sent(),this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:a,context:{source:n}})),u.label=4;case 4:return[3,6];case 5:return(o=u.sent()).code!==_bundle_0b1520ed["I" /* a8 */].NON_AUTHORIZED&&o.code!==_bundle_0b1520ed["I" /* a8 */].NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:[e],context:{source:n}})),[3,6];case 6:return[2]}}))}))},_.prototype.getMyGroupChannels=function(e,t,n,r,i){return void 0===r&&(r=_bundle_0b1520ed["F" /* a2 */].REQUEST_CHANNEL),void 0===i&&(i=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var a,o,u,c,l,h,_,p,f;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return t.createdAfter&&(t.createdAfter=Math.floor(t.createdAfter/1e3)),t.createdBefore&&(t.createdBefore=Math.floor(t.createdBefore/1e3)),a=!1,i&&(o=_bundle_0b1520ed["w" /* V */].of(this._iid),u=o.appInfo,(c=o.cacheContext)&&!c.localCacheEnabled&&(null==u?void 0:u.enabledChannelMemberShipHistory)&&(null==u?void 0:u.applicationAttributes.includes("left_user_view_support"))&&(a=!0)),l=new _bundle_a5a397f1_bn(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},t),{userId:this._sdkState.userId,token:e,limit:n,includeLeftChannel:i&&a})),[4,this._requestQueue.send(l)];case 1:return h=d.sent(),_=h.as(_bundle_a5a397f1_Nn),p=_.channels,f=_.token,this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:p,context:{source:r}})),[2,{channels:p,token:f}]}}))}))},_.prototype.getMyGroupChannelChangeLogs=function(e,t,r){return void 0===r&&(r=_bundle_0b1520ed["F" /* a2 */].REQUEST_CHANNEL_CHANGELOGS),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,a,c,l,h,_,p,f;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return i=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_rn),t),Object(_bundle_0b1520ed["zc" /* w */])((Object(_bundle_0b1520ed["C" /* a */])("string",e)||Object(_bundle_0b1520ed["C" /* a */])("number",e))&&_bundle_a5a397f1_an(i)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),a=new _bundle_a5a397f1_gn(Object(_bundle_0b1520ed["xc" /* u */])({userId:this._sdkState.userId,ts:"number"==typeof e?e:null,token:"string"==typeof e?e:null,filter:i})),[4,this._requestQueue.send(a)];case 1:return c=d.sent(),l=c.as(_bundle_a5a397f1_En),h=l.updatedChannels,_=l.deletedChannelUrls,p=l.hasMore,f=l.ts,h.length>0&&this._dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:h,context:{source:r},ts:f})),_.length>0&&this._dispatcher.dispatch(new _bundle_a5a397f1_vn({channelUrls:_,context:{source:r}})),[2,{updatedChannels:h,deletedChannelUrls:_,hasMore:p,token:l.token}]}}))}))},_.prototype.getGroupChannelCount=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_on),e),Object(_bundle_0b1520ed["zc" /* w */])(_bundle_a5a397f1_un(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=new _bundle_a5a397f1_Un({userId:this._sdkState.userId,filter:t}),[4,this._requestQueue.send(n)];case 1:return r=i.sent(),[2,r.as(_bundle_a5a397f1_Sn).groupChannelCount]}}))}))},_.prototype.getUnreadItemCount=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,a,c,l,h,_,p,v,m,g,E,C,y,M;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_cn),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["r" /* Q */])(_bundle_a5a397f1_$t,e.keys)}(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid),i=r.sdkState,a=r.requestQueue,c=new _bundle_a5a397f1_Tn({userId:i.userId,filter:n}),[4,a.send(c)];case 1:return l=d.sent(),h=l.as(_bundle_a5a397f1_An),_=h.groupChannelUnreadMentionCount,p=h.groupChannelUnreadMessageCount,v=h.groupChannelInvitationCount,m=h.superGroupChannelUnreadMentionCount,g=h.superGroupChannelUnreadMessageCount,E=h.superGroupChannelInvitationCount,C=h.nonSuperGroupChannelUnreadMentionCount,y=h.nonSuperGroupChannelUnreadMessageCount,M=h.nonSuperGroupChannelInvitationCount,[2,Object(_bundle_0b1520ed["hc" /* e */])({groupChannelUnreadMentionCount:_,groupChannelUnreadMessageCount:p,groupChannelInvitationCount:v,superGroupChannelUnreadMentionCount:m,superGroupChannelUnreadMessageCount:g,superGroupChannelInvitationCount:E,nonSuperGroupChannelUnreadMentionCount:C,nonSuperGroupChannelUnreadMessageCount:y,nonSuperGroupChannelInvitationCount:M})]}}))}))},_.prototype.getTotalUnreadChannelCount=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_a5a397f1_In({userId:t.userId}),[4,n.send(s)];case 1:return r=i.sent(),[2,r.as(_bundle_a5a397f1_wn).unreadCount]}}))}))},_.prototype.getTotalUnreadMessageCount=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,a,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_ln),e),Object(_bundle_0b1520ed["zc" /* w */])(_bundle_a5a397f1_hn(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,a=new _bundle_a5a397f1_Ln({userId:r.userId,filter:t}),[4,i.send(a)];case 1:return c=l.sent(),[2,c.as(_bundle_a5a397f1_Dn).unreadCount]}}))}))},_.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,i,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_dn),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.channelUrl,!0)&&Object(_bundle_0b1520ed["r" /* Q */])(_bundle_dc8db3c3_ot,e.scheduledStatus,!0)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["xb" /* ap */],e.messageTypeFilter)}(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new _bundle_a5a397f1_xn(t),[4,n.send(i)];case 1:return a=c.sent(),[2,a.as(_bundle_a5a397f1_Rn).count]}}))}))},_.prototype.getSubscribedTotalUnreadMessageCount=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).subscribedUnreadMessageCount;return e.all>=0?e.all:0},_.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var e=0,t=_bundle_0b1520ed["w" /* V */].of(this._iid).subscribedUnreadMessageCount;return Object.keys(t.customTypes).forEach((function(n){e+=t.customTypes[n]})),e},_.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){var t;return null!==(t=_bundle_0b1520ed["w" /* V */].of(this._iid).subscribedUnreadMessageCount.customTypes[e])&&void 0!==t?t:0},_.prototype.createChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_nn),e),Object(_bundle_0b1520ed["zc" /* w */])(_bundle_a5a397f1_sn(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t.isPublic||(t.accessCode=void 0),n=new _bundle_a5a397f1_Pn(Object(_bundle_0b1520ed["jc" /* g */])({userId:this._sdkState.userId},t)),[4,this._requestQueue.send(n)];case 1:return r=a.sent(),i=r.as(_bundle_a5a397f1_kn).channel,[4,this.upsertChannelsToCache([i])];case 2:return a.sent(),[2,i]}}))}))},_.prototype.markAsReadAll=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r,i,a,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return e=Date.now(),Object(_bundle_0b1520ed["zc" /* w */])(e-this._markAsReadAllLastSentAt>=1e3).throw(_bundle_0b1520ed["vc" /* s */].markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=e,t=new _bundle_a5a397f1_On({userId:this._sdkState.userId}),[4,this._requestQueue.send(t)];case 1:l.sent(),n=this._groupChannelCache.channels;try{for(s=Object(_bundle_0b1520ed["wc" /* t */])(n),r=s.next();!r.done;r=s.next())(i=r.value)._updateUnreadMemberState(this._sdkState.userId,e),i._updateUnreadCount(0,0)}catch(e){a={error:e}}finally{try{r&&!r.done&&(c=s.return)&&c.call(s)}finally{if(a)throw a.error}}return n.length>0?[4,this.upsertChannelsToCache(n)]:[3,3];case 2:l.sent(),l.label=3;case 3:return[2]}}))}))},_.prototype.markAsReadWithChannelUrls=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a,c,l,h;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return t=Date.now(),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)&&t-this._markAsReadAllLastSentAt>=1e3).throw(_bundle_0b1520ed["vc" /* s */].markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,n=new _bundle_a5a397f1_On({userId:this._sdkState.userId,channelUrls:e}),[4,this._requestQueue.send(n)];case 1:d.sent(),s=this._groupChannelCache.channels,r=[];try{for(i=Object(_bundle_0b1520ed["wc" /* t */])(s),a=i.next();!a.done;a=i.next())c=a.value,e.includes(c.url)&&(c._updateUnreadMemberState(this._sdkState.userId,t),c._updateUnreadCount(0,0),r.push(c))}catch(e){l={error:e}}finally{try{a&&!a.done&&(h=i.return)&&h.call(i)}finally{if(l)throw l.error}}return r.length>0?[4,this.upsertChannelsToCache(r)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))},_.prototype.markAsDelivered=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},_.prototype.getMessageFromCache=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},_.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,t,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,filter:n,exactMatch:!0})];case 1:return[2,s.sent()]}}))}))},_.prototype.getMessagesFromCache=function(e,t,n,s,r,i){return void 0===r&&(r=Kr),void 0===i&&(i=!0),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:r,filter:s,backward:"next"===n,inclusive:i})];case 1:return[2,a.sent()]}}))}))},_.prototype.getPollMessagesFromCache=function(e,t,n,s){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:s,filter:n,backward:!1,isPollOnly:!0})];case 1:return[2,r.sent()]}}))}))},_.prototype.getCachedMessageCountBetween=function(e,t,n,s){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.countBetween(e,t,new _bundle_a5a397f1_cs({top:n,bottom:s}))];case 1:return[2,r.sent()]}}))}))},_.prototype.getUnsentMessagesFromCache=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:t})];case 1:return[2,n.sent()]}}))}))},_.prototype.removeFailedMessageFromCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return t.sent(),[2]}}))}))},_}(_bundle_168f8164_v),_bundle_a5a397f1_ds=function(e,t){return t instanceof _bundle_dc8db3c3_ft?e.findIndex((function(e){return e instanceof _bundle_dc8db3c3_ft&&t.isIdentical(e)})):e.findIndex((function(e){return e.isIdentical(t)}))},_bundle_a5a397f1_s=function(e,t){return e.findIndex((function(e){return e instanceof _bundle_dc8db3c3_ht?e.messageId===t:e instanceof It?e.notificationId===t:void 0}))},_bundle_a5a397f1_ps=function(e,t){if(e.length>0){for(var n=0,s=e.length-1,r=Math.floor((n+s)/2);n<s;){var i=e[r].createdAt-t.createdAt;if(i>0)s=r,r=Math.floor((n+s)/2);else{if(!(i<0))return r;n=r+1,r=Math.floor((n+s)/2)}}return e[r].createdAt>t.createdAt?r:r+1}return e.length};!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(_bundle_a5a397f1_os||(_bundle_a5a397f1_os={}));var _bundle_a5a397f1_fs,_bundle_a5a397f1_vs=function(t){function n(e,n,s,r){var i=t.call(this)||this;return i._state=_bundle_a5a397f1_os.IDLE,i._retryCount=0,i._retryLimit=3,i.priority=0,i._worker=n,i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===_bundle_a5a397f1_os.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===_bundle_a5a397f1_os.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===_bundle_a5a397f1_os.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:if(!this.isRunning)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._worker(e)];case 2:return t=s.sent(),this._retryCount=0,this.dispatch("progress",t),t.hasNext?this._run(t.nextToken):this.end(),[3,4];case 3:return n=s.sent(),this.dispatch("error",n),this._retryCount<this._retryLimit?(this._retryCount++,this._run(e)):this.stop(),[3,4];case 4:return[2]}}))}))},n.prototype.start=function(e){this.isIdle&&(this._state=_bundle_a5a397f1_os.RUNNING,this._run(e))},n.prototype.stop=function(){this._state=_bundle_a5a397f1_os.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=_bundle_a5a397f1_os.END,this.dispatch("end")},n}(_bundle_0b1520ed["f" /* E */]),_bundle_a5a397f1_ms={},_bundle_a5a397f1_gs=function(){function e(e){var t=e._iid,n=e.channel,s=e.limit,r=void 0===s?100:s,i=this;this.ref=0,this._iid=t,this._channel=n,this._limit=r,this._prevSyncLoopCount=0;var a,o,_=_bundle_0b1520ed["w" /* V */].of(this._iid),p=_.sdkState,f=_.cacheContext,v=_.dispatcher,m=_.logger,g=_.statManager;this._metadataKey=(a=p.userId,o=n.url,"sendbird:".concat(a,"@groupchannel/").concat(o,"/message/sync.meta"));var C=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/sync")}(p.userId,n.url);this._prevSync=new _bundle_a5a397f1_vs(C,(function(e){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){var t,s,r,i,a,o,h,_,p,v,C,y;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return t={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata(e)];case 1:if(d.sent(),m.debug("message background prev sync from",null===(o=this._metadata)||void 0===o?void 0:o.range.top),null===(h=this._metadata)||void 0===h?void 0:h.previousComplete)return[3,10];d.label=2;case 2:return d.trys.push([2,5,8,9]),[4,js.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(p=null===(_=this._metadata)||void 0===_?void 0:_.range)||void 0===p?void 0:p.top)?this._metadata.range.top:e,{prevResultSize:this._limit,nextResultSize:0,replyType:_bundle_0b1520ed["Fb" /* ax */].ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_BACKGROUND)];case 3:return(s=d.sent()).length>0&&(r=s.map((function(e){return e.createdAt})),(null===(v=this._metadata)||void 0===v?void 0:(a=v.range).intersect.apply(a,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r),!1)))?this.extendRange(s):this._metadata={range:new _bundle_a5a397f1_cs({top:Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r),!1)),bottom:Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r),!1))}),previousComplete:!1}),t.hasNext=s.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.top,this._metadata.previousComplete=s.length<this._limit),m.debug("message background prev sync progress",t),[4,this.saveMetadata()];case 4:return d.sent(),[3,9];case 5:return i=d.sent(),m.debug("message background prev sync error",i),i instanceof _bundle_0b1520ed["vc" /* s */]&&i.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:d.sent(),d.label=7;case 7:throw i;case 8:return g.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(y=null===(C=f.localCacheConfig)||void 0===C?void 0:C.maxSize)&&void 0!==y?y:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 9:return[3,11];case 10:t.hasNext=!1,d.label=11;case 11:return[2,t]}}))}))})),this._nextSync=new _bundle_a5a397f1_vs(C,(function(e){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){var t,s,r,i,a,o,u,h,_,p,v;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return t={hasNext:!0,nextToken:0},[4,this.loadMetadata(e)];case 1:d.sent(),m.debug("message background next sync from",null===(o=this._metadata)||void 0===o?void 0:o.range.bottom),d.label=2;case 2:return d.trys.push([2,5,6,7]),[4,js.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(h=null===(u=this._metadata)||void 0===u?void 0:u.range)||void 0===h?void 0:h.bottom)?this._metadata.range.bottom:e,{prevResultSize:0,nextResultSize:this._limit,replyType:_bundle_0b1520ed["Fb" /* ax */].ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_BACKGROUND)];case 3:return(s=d.sent()).length>0&&(r=s.map((function(e){return e.createdAt})),(null===(_=this._metadata)||void 0===_?void 0:(a=_.range).intersect.apply(a,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r),!1)))?this.extendRange(s):this._metadata={range:new _bundle_a5a397f1_cs({top:Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r),!1)),bottom:Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(r),!1))}),previousComplete:!1}),t.hasNext=s.length>=this._limit,this._metadata&&(t.nextToken=this._metadata.range.bottom),m.debug("message background next sync progress",t),[4,this.saveMetadata()];case 4:return d.sent(),[3,7];case 5:throw i=d.sent(),m.debug("message background next sync error",i),i;case 6:return g.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(v=null===(p=f.localCacheConfig)||void 0===p?void 0:p.maxSize)&&void 0!==v?v:0,use_local_cache:f.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[2,t]}}))}))})),this._connectionEventContext=v.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])if(e.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED)i.resume();else i.pause()}))}return e.of=function(t,n){return _bundle_a5a397f1_ms[t]||(_bundle_a5a397f1_ms[t]={}),_bundle_a5a397f1_ms[t][n.url]||(_bundle_a5a397f1_ms[t][n.url]=new e({_iid:t,channel:n})),_bundle_a5a397f1_ms[t][n.url].ref++,_bundle_a5a397f1_ms[t][n.url]},e.clear=function(e,t){_bundle_a5a397f1_ms[e]&&_bundle_a5a397f1_ms[e][t]&&(_bundle_a5a397f1_ms[e][t].close(),delete _bundle_a5a397f1_ms[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new _bundle_a5a397f1_cs({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(e){var t;return null===(t=this.range)||void 0===t?void 0:t.includes.apply(t,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(e.map((function(e){return e.createdAt}))),!1))},e.prototype.extendRange=function(e){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(e.map((function(e){return e.createdAt}))),!1))},e.prototype.loadMetadata=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata=e?{range:new _bundle_a5a397f1_cs(e.range),previousComplete:e.previousComplete}:{range:new _bundle_a5a397f1_cs({}),previousComplete:!1},t.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(e){var t,n,s,r;void 0===e&&(e=Date.now());var i=_bundle_0b1520ed["w" /* V */].of(this._iid),a=i.logger;i.sessionManager.session.hasSession&&(a.debug("message background sync resume()"),this._prevSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start(null!==(n=null===(t=this._metadata)||void 0===t?void 0:t.range.top)&&void 0!==n?n:e),this._nextSync.start(null!==(r=null===(s=this._metadata)||void 0===s?void 0:s.range.bottom)&&void 0!==r?r:e))},e.prototype.pause=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete _bundle_a5a397f1_ms[this._iid][this._channel.url])},e}(),_bundle_a5a397f1_Es={},_bundle_a5a397f1_Cs=function(){function e(e){var t=e._iid,n=e.channel,r=e.includeParams,i=this;this.ref=0,this._iid=t,this._channel=n,this._includeParams=r;var a,o,c=_bundle_0b1520ed["w" /* V */].of(this._iid),l=c.logger,_=c.sdkState,p=c.dispatcher;this._metadataKey=(a=_.userId,o=n.url,"sendbird:".concat(a,"@groupchannel/").concat(o,"/message/changelogs.meta"));var f=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/changelogs")}(_.userId,this._channel.url);this._sync=new _bundle_a5a397f1_vs(f,(function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){var e,t,n,r,i,a,o,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:h.sent(),l.debug("message changelog sync from",null===(c=this._metadata)||void 0===c?void 0:c.token),h.label=2;case 2:return h.trys.push([2,5,,8]),[4,js.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,Object(_bundle_0b1520ed["jc" /* g */])({replyType:_bundle_0b1520ed["Fb" /* ax */].ALL},this._includeParams),_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_CHANGELOGS)];case 3:return t=h.sent(),n=t.updatedMessages,r=t.deletedMessageIds,i=t.hasMore,a=t.token,e.hasNext=i,e.nextToken=a,(n.length>0||r.length>0)&&this._metadata&&(this._metadata.token=a),l.debug("message changelog sync progress",e),[4,this.saveMetadata()];case 4:return h.sent(),[3,8];case 5:return o=h.sent(),l.debug("message changelog sync error",o),o instanceof _bundle_0b1520ed["vc" /* s */]&&o.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:h.sent(),h.label=7;case 7:throw o;case 8:return[2,e]}}))}))})),this._connectionEventContext=p.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])if(e.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED)i.resume();else i.pause()}))}return e.of=function(t,n,s){return _bundle_a5a397f1_Es[t]||(_bundle_a5a397f1_Es[t]={}),_bundle_a5a397f1_Es[t][n.url]||(_bundle_a5a397f1_Es[t][n.url]=new e({_iid:t,channel:n,includeParams:s})),_bundle_a5a397f1_Es[t][n.url].ref++,_bundle_a5a397f1_Es[t][n.url]},e.clear=function(e,t){_bundle_a5a397f1_Es[e]&&_bundle_a5a397f1_Es[e][t]&&(_bundle_a5a397f1_Es[e][t].close(),delete _bundle_a5a397f1_Es[e])},e.prototype.loadMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return this._metadata?[3,2]:(e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:s=r.sent(),this._metadata={token:s?s.token:n},r.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.logger;e.sessionManager.session.hasSession&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).logger.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete _bundle_a5a397f1_Es[this._iid][this._channel.url])},e}(),_bundle_a5a397f1_ys={},_bundle_a5a397f1_Ms=function(){function e(e){var t=e._iid,n=e.channel,s=e.hasPollMessage,r=this;this.ref=0,this._iid=t,this._channel=n;var i,a,o=_bundle_0b1520ed["w" /* V */].of(this._iid),c=o.logger,l=o.sdkState,_=o.dispatcher;this._metadataKey=(i=l.userId,a=n.url,"sendbird:".concat(i,"@groupchannel/").concat(a,"/poll/changelogs.meta"));var p=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/poll/changelogs")}(l.userId,this._channel.url);this._sync=new _bundle_a5a397f1_vs(p,(function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var e,t,n,r,i,a,o,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return h.sent(),c.debug("poll changelog sync from",null===(l=this._metadata)||void 0===l?void 0:l.token),(t=!this._metadata||!this._metadata.token)?[4,s()]:[3,3];case 2:t=!h.sent(),h.label=3;case 3:if(t)return[2,{hasNext:!1,nextToken:0}];this._metadata||(n=_bundle_0b1520ed["w" /* V */].of(this._iid).firstConnectedAt,this._metadata={token:n}),h.label=4;case 4:return h.trys.push([4,7,,10]),[4,_bundle_0b1520ed["U" /* aL */].of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return r=h.sent(),i=r.hasMore,a=r.token,e.hasNext=i,e.nextToken=a,this._metadata.token=a,c.debug("poll changelog sync progress",e),[4,this.saveMetadata()];case 6:return h.sent(),[3,10];case 7:return o=h.sent(),c.debug("poll changelog sync error",o),o instanceof _bundle_0b1520ed["vc" /* s */]&&o.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:h.sent(),h.label=9;case 9:throw o;case 10:return[2,e]}}))}))})),this._connectionEventContext=_.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])if(e.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED)r.resume();else r.pause()}))}return e.of=function(t,n,s){return _bundle_a5a397f1_ys[t]||(_bundle_a5a397f1_ys[t]={}),_bundle_a5a397f1_ys[t][n.url]||(_bundle_a5a397f1_ys[t][n.url]=new e({_iid:t,channel:n,hasPollMessage:s})),_bundle_a5a397f1_ys[t][n.url].ref++,_bundle_a5a397f1_ys[t][n.url]},e.prototype.loadMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata=e?{token:e.token}:void 0,t.label=2;case 2:return[2]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete _bundle_a5a397f1_ys[this._iid][this._channel.url])},e}(),_bundle_a5a397f1_bs=function(n){function s(e){var s,r,i,a,o,u,c,l,h,d,_=this;return(_=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,_.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(e.channelType),"/").concat(e.channelUrl,"/messages_gap"),_.params=Object(_bundle_0b1520ed["hc" /* e */])({prev_start_ts:e.prevStart,prev_end_ts:e.prevEnd,prev_cache_count:e.prevCount,next_start_ts:e.nextStart,next_end_ts:e.nextEnd,next_cache_count:e.nextCount,huge_gap_threshold:null!==(s=e.threshold)&&void 0!==s?s:null,reverse:!0,custom_types:null!==(r=e.customTypes)&&void 0!==r?r:["*"],message_type:null!==(i=e.messageType)&&void 0!==i?i:null,include_reply_type:null!==(a=e.replyType)&&void 0!==a?a:_bundle_0b1520ed["Fb" /* ax */].NONE,include_reactions:null===(o=e.includeReactions)||void 0===o||o,include_meta_array:null===(u=e.includeMetaArray)||void 0===u||u,include_thread_info:null===(c=e.includeThreadInfo)||void 0===c||c,include_parent_message_info:null===(l=e.includeParentMessageInfo)||void 0===l||l,with_sorted_meta_array:null===(h=e.includeMetaArray)||void 0===h||h,show_subchannel_messages_only:null!==(d=e.showSubchannelMessagesOnly)&&void 0!==d&&d,include_poll_details:!0,checking_continuous_messages:e.checkingContinuousMessages}),_}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Ns=function(t){function n(e,n){var s,r,i,a,o,u,c=this;return(c=t.call(this,e,n)||this).isHugeGap=n.is_huge_gap,c.prevMessages=(null!==(s=n.prev_messages)&&void 0!==s?s:[]).map((function(t){return _bundle_dc8db3c3_Tt(e,t)})),c.prevHasMore=null!==(r=n.prev_hasmore)&&void 0!==r&&r,c.isContinuousPrevMessages=null!==(i=n.is_continuous_prev_messages)&&void 0!==i&&i,c.nextMessages=(null!==(a=n.next_messages)&&void 0!==a?a:[]).map((function(t){return _bundle_dc8db3c3_Tt(e,t)})),c.nextHasmore=null!==(o=n.next_hasmore)&&void 0!==o&&o,c.isContinuousNextMessages=null!==(u=n.is_continuous_next_messages)&&void 0!==u&&u,c}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Us={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"}(_bundle_a5a397f1_fs||(_bundle_a5a397f1_fs={}));var _bundle_a5a397f1_Ss,_bundle_a5a397f1_Ts,_bundle_a5a397f1_As,_bundle_a5a397f1_Is=function(){function e(){this._onCacheResult=_bundle_0b1520ed["Gb" /* ay */],this._onApiResult=_bundle_0b1520ed["Gb" /* ay */]}return e.prototype._invokeResponse=function(e,t,n){var s=this;Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(s,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(e){case"local":this._onCacheResult(t,n);break;case"remote":this._onApiResult(t,n)}return[2]}))}))}))},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),_bundle_a5a397f1_ws=function(){function e(e,t){var n=t.filter,s=t.startingPoint,r=t.limit,i=t.prevResultLimit,a=t.nextResultLimit,o=t.channel,u=t.channelManager,_=t.disableBackgroundSync,f=void 0!==_&&_,v=this;this._messages=[],this._unsentMessages=[],this._isLoadingPrevious=!1,this._isLoadingNext=!1,this._iid=e,this._key="mc-".concat(Object(_bundle_0b1520ed["qc" /* n */])()),this._isDisposed=!1,this.filter=null!=n?n:new bs,this._channel=o,this._syncRange=new _bundle_a5a397f1_cs({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint="number"==typeof s&&Number.isFinite(s)?s:Number.MAX_SAFE_INTEGER,this._limit=r||Kr,this._prevResultLimit=null!=i?i:Math.floor(this._limit/2),this._nextResultLimit=null!=a?a:Math.floor(this._limit/2),this._channelManager=u,this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(e,t){var n=t.source,s=e.findIndex((function(e){return e.isIdentical(v.channel)}));s>=0&&(v._replaceChannelOfCollection(e[s]),v.channel._runIfHandleableWithGroupChannel((function(e){switch(n){case _bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UPDATED:for(var s=!1,r=0;r<v._messages.length;r++){if(v._messages[r].createdAt>=e.messageOffsetTimestamp){s=!0;var i=r;if(i>0){var a=v._messages.splice(0,i);v._removeMessagesFromView(a.map((function(e){return v.keyOf(e)})),_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_OFFSET_UPDATED)}break}}!s&&v._messages.length>0&&v._removeMessagesFromView(v._messages.map((function(e){return v.keyOf(e)})),_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_OFFSET_UPDATED);break;case _bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNMUTED:var o=_bundle_0b1520ed["w" /* V */].of(v._iid).sdkState,u=t.user;o.userId===u.userId&&v._clearCheckMyMutedTimer();break;case _bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_MUTED:o=_bundle_0b1520ed["w" /* V */].of(v._iid).sdkState,u=t.user;o.userId===u.userId&&-1!==e._myMutedRemainingTime&&v._startCheckMyMutedTimer(e._myMutedRemainingTime);break;case _bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_LEFT:e.isPublic&&v._clearCheckMyMutedTimer()}Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){return _bundle_a5a397f1_pn(n)&&(null===(e=this._handler)||void 0===e?void 0:e.onChannelUpdated)&&this._handler.onChannelUpdated(t,this.channel),[2]}))}))}))})),v._postprocessChannelUpdateEvent(e[s],n))},onRemove:function(e,t){var n=e.indexOf(v.channel.url);n>=0&&(v._clearCheckMyMutedTimer(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return(null===(e=this._handler)||void 0===e?void 0:e.onChannelDeleted)&&this._handler.onChannelDeleted(t,this.channel.url),[2]}))}))})),v._postprocessChannelRemoveEvent(e[n]))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(e,t){var n,s,r=[],i=[];try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(e),o=a.next();!o.done;o=a.next()){var u=o.value;u.channelUrl===v._channel.url&&(v.filter.match(u)?r.push(u):i.push(v.keyOf(u)))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}if(Object(_bundle_0b1520ed["Yb" /* bi */])(t)){if(r.length>0)switch(t){case _bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_CANCELED:case _bundle_0b1520ed["F" /* a2 */].LOCAL_MESSAGE_RESEND_STARTED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_FAILED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_SUCCESS:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_THREADINFO_UPDATED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_REACTION_UPDATED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_FEEDBACK_ADDED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_FEEDBACK_UPDATED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_FEEDBACK_DELETED:case _bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_CHANGELOGS:v._updateMessagesToView(r,t);break;case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_PENDING:v._addMessagesToView(r,t);break;case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_RECEIVED:v.hasNext||v._addMessagesToView(r,t);break;case _bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL:v._addMessagesToView(r,t)}i.length>0&&v._removeMessagesFromView(i,t)}v._postprocessMessageUpdateEvent(e,t)},onRemove:function(e,t){v._removeMessagesFromView(e,t),v._postprocessMessageRemoveEvent(e)},onRemoveUnsent:function(e,t){v._removeUnsentMessageFromView(e,t)},onPollChangeLogUpdate:function(e,t){v._updatePollsToView(e,t)},onPollUpdate:function(e,t){v._applyPollUpdateEventToView(e,t)},onPollVote:function(e,t){v._applyPollVoteEventToView(e,t)},onReactionUpdate:function(e,t){v._applyReactionEventToView(e,t)},onThreadInfoUpdate:function(e,t){v._applyThreadInfoEventToView(e,t)}});var m=_bundle_0b1520ed["w" /* V */].of(this._iid),g=m.cacheContext,C=m.dispatcher;this._channel._updateMessageCollectionLastAccessedAt(),C.dispatch(new _bundle_a5a397f1_fn({channels:[this._channel],context:{source:_bundle_0b1520ed["F" /* a2 */].CHANNEL_LASTACCESSEDAT_UPDATED}})),!f&&this._shouldStartBackgroundSync()&&(this._backgroundSync=_bundle_a5a397f1_gs.of(this._iid,this._channel),this._backgroundSync.resume(this._startingPoint)),this._changelogSync=_bundle_a5a397f1_Cs.of(this._iid,this._channel,this.changelogIncludeParams),this._changelogSync.resume(),this._pollChangelogSync=_bundle_a5a397f1_Ms.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new _bundle_a5a397f1_vs(this._key,(function(e){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var t,n,s,r,i,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return[4,this._getRemoteMessages(e,{prevLimit:this._prevResultLimit,source:_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL,checkingContinuousMessages:g.localCacheEnabled})];case 1:return t=u.sent(),n=t.messages,s=t.isContinuousMessages,n.length>0?(r=Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(r),s&&(null===(i=this._backgroundSync)||void 0===i||i.range.extends(r)),[2,{hasNext:n.length>=this._prevResultLimit&&this.viewTop<r,nextToken:this._syncRange.top}]):(M.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(o=null===(a=g.localCacheConfig)||void 0===a?void 0:a.maxSize)&&void 0!==o?o:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._nextFill=new _bundle_a5a397f1_vs(this._key,(function(e){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var t,n,s,r,i,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return[4,this._getRemoteMessages(e,{nextLimit:this._nextResultLimit,source:_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL,checkingContinuousMessages:g.localCacheEnabled})];case 1:return t=u.sent(),n=t.messages,s=t.isContinuousMessages,n.length>0?(r=Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(r),s&&(null===(i=this._backgroundSync)||void 0===i||i.range.extends(r)),[2,{hasNext:!(n.length>=this._nextResultLimit&&this._hasNext)||this.viewBottom>r,nextToken:this._syncRange.bottom}]):(M.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(o=null===(a=g.localCacheConfig)||void 0===a?void 0:a.maxSize)&&void 0!==o?o:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._connectionEventContext=C.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])switch(e.stateType){case _bundle_0b1520ed["g" /* F */].CONNECTED:Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._activate(),[2]}))}))}));break;case _bundle_0b1520ed["g" /* F */].LOGOUT:v.dispose();break;default:v._clearCheckMyMutedTimer(),v._prevFill.stop(),v._nextFill.stop()}}));var M=_bundle_0b1520ed["w" /* V */].of(this._iid).statManager;M.put(new _bundle_0b1520ed["Ob" /* b7 */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE,data:{use_local_cache:g.localCacheEnabled,collection_interface:{message:!0}}}))}return e.prototype.keyOf=function(e){return 0},Object.defineProperty(e.prototype,"changelogIncludeParams",{get:function(){return{includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0}},enumerable:!1,configurable:!0}),e.prototype._postprocessChannelUpdateEvent=function(e,t){},e.prototype._postprocessChannelRemoveEvent=function(e){},e.prototype._postprocessMessageUpdateEvent=function(e,t){},e.prototype._postprocessMessageRemoveEvent=function(e){},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===_bundle_0b1520ed["vb" /* an */].FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===_bundle_0b1520ed["vb" /* an */].PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])(Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._messages.map((function(e){return e.createdAt}))),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])(Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(this._messages.map((function(e){return e.createdAt}))),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return _bundle_0b1520ed["w" /* V */].of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(_bundle_0b1520ed["F" /* a2 */].SYNC_CHANNEL_CHANGELOGS)];case 1:return e.sent(),[2]}}))}))},e.prototype._replaceChannelOfCollection=function(e){this._channel.isGroupChannel()?this._channel=e:this._channel.isFeedChannel()&&(this._channel._groupChannel=e._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext;return this.channel.isGroupChannel()?e.localCacheEnabled&&!this.channel.isSuper:e.localCacheEnabled},e.prototype._setBaseMessageCollectionHandler=function(e){this._handler=e},e.prototype._filterUnderOffsetMessage=function(e){return e},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach((function(n){n instanceof _bundle_dc8db3c3_ht&&n.parentMessageId===e.messageId&&n.applyParentMessage(e)&&t.push(n)})),t},e.prototype._updatePollsToView=function(e,t){var n,s,r=this,i=[];try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(e),o=a.next();!o.done;o=a.next()){var u=o.value,c=_bundle_a5a397f1_s(this._messages,u.messageId);if(c>=0){var l=this._messages[c];l.isUserMessage()&&l.applyPoll(u),i.push(l)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return i.length>0&&Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var e,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return e={source:t},i.length>0&&(null===(s=(n=this._handler).onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,i)),[2]}))}))})),i},e.prototype._applyPollUpdateEventToView=function(e,t){var n=this,s=_bundle_a5a397f1_s(this._messages,e.messageId);if(s>=0){var r=this._messages[s];r&&r.isUserMessage()&&r.poll&&r.poll.applyPollUpdateEvent(e)&&Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){var e,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){return e={source:t},null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,[r]),[2]}))}))}))}},e.prototype._applyPollVoteEventToView=function(e,t){var n=this,s=_bundle_a5a397f1_s(this._messages,e.messageId);if(s>=0){var r=this._messages[s];r&&r.isUserMessage()&&r.poll&&r.poll.applyPollVoteEvent(e)&&Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){var e,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){return e={source:t},null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,[r]),[2]}))}))}))}},e.prototype._applyReactionEventToView=function(e,t){var n=this,s=_bundle_a5a397f1_s(this._messages,e.messageId);if(s>=0){var r=this._messages[s];r&&(r.isUserMessage()||r.isFileMessage()||r.isMultipleFilesMessage())&&Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&(r.applyReactionEvent(e),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){var e,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){return e={source:t},null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,[r]),[2]}))}))})))}},e.prototype._applyThreadInfoEventToView=function(e,t){var n=this,s=_bundle_a5a397f1_s(this._messages,e.targetMessageId);if(s>=0){var r=this._messages[s];r&&(r.isUserMessage()||r.isFileMessage()||r.isMultipleFilesMessage())&&Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&(r.applyThreadInfoUpdateEvent(e),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){var e,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){return e={source:t},null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,[r]),[2]}))}))})))}},e.prototype._removeMessagesFromView=function(e,t){var n,s,r=this,i=[],a=[],o=function(e){var t=u._messages.findIndex((function(t){return r.keyOf(t)===e}));if(t>=0){var n=u._messages[t];i.push(u.keyOf(n)),a.push(n),u._messages.splice(t,1)}},u=this;try{for(var c=Object(_bundle_0b1520ed["wc" /* t */])(e),l=c.next();!l.done;l=c.next()){o(l.value)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}return Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&a.length>0&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var e,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){return e={source:t},null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesDeleted)||void 0===s||s.call(n,e,this.channel,i,a),[2]}))}))})),i},e.prototype._removeUnsentMessageFromView=function(e,t){var n=this._unsentMessages.findIndex((function(t){return t.reqId===e}));n>=0&&this._unsentMessages.splice(n,1)},e.prototype._getLocalMessages=function(e,t){var n=t.prevLimit,s=void 0===n?0:n,r=t.nextLimit,i=void 0===r?0:r,a=t.inclusive,o=void 0===a||a;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,a,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return t=[],o?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,e,this.filter)]:[3,2];case 1:t=h.sent(),h.label=2;case 2:return s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"prev",this.filter,s,!1)]:[3,4];case 3:return r=h.sent(),[3,5];case 4:r=[],h.label=5;case 5:return n=r,i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"next",this.filter,i,!1)]:[3,7];case 6:return u=h.sent(),[3,8];case 7:u=[],h.label=8;case 8:return a=u,[2,Object(_bundle_0b1520ed["sc" /* p */])(Object(_bundle_0b1520ed["sc" /* p */])(Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(t),!1),Object(_bundle_0b1520ed["tc" /* q */])(n),!1),Object(_bundle_0b1520ed["tc" /* q */])(a),!1).sort((function(e,t){return t.createdAt-e.createdAt}))]}}))}))},e.prototype._getRemoteMessages=function(e,t){var r=t.prevLimit,i=void 0===r?0:r,a=t.nextLimit,o=void 0===a?0:a,u=t.source,c=void 0===u?_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE:u,l=t.reverse,_=void 0!==l&&l,p=t.checkingHasNext,f=void 0!==p&&p,v=t.checkingContinuousMessages,m=void 0!==v&&v;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return t=js.of(this._iid),i>0||o>0?[4,t._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,e,Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this.filter),_bundle_a5a397f1_Us),{isInclusive:!0,reverse:_,prevResultSize:i,nextResultSize:o})),c,f,m)]:[3,2];case 1:return r=a.sent(),[3,3];case 2:r={messages:[],isContinuousMessages:!1},a.label=3;case 3:return[2,r]}}))}))},e.prototype._checkHugeGap=function(){var e,t,n,r,i;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var a,o,_,p,f,v,m,g,C,y,M,b,N,U,S,T,A,I,w,L,D,x,R,P,k,O=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(V){switch(V.label){case 0:return a=_bundle_0b1520ed["w" /* V */].of(this._iid),o=a.dispatcher,_=a.requestQueue,p=a.cacheContext,f=a.statManager,v=a.logger,this._messages.length>0?(m=this._syncRange.top,g=this.viewTop,C=this._syncRange.bottom,y=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,g,m)]):[3,8];case 1:return M=V.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,C,y)];case 2:b=V.sent(),V.label=3;case 3:return V.trys.push([3,5,6,7]),[4,Object(_bundle_0b1520ed["Zb" /* bj */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(O,void 0,void 0,(function(){var e,t,n,r,i,a,u,f,v,N,U,S,T,A,I,w,L,D=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(x){switch(x.label){case 0:return e=new _bundle_a5a397f1_bs(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:g,prevEnd:m,prevCount:M,nextStart:C,nextEnd:y,nextCount:b,checkingContinuousMessages:p.localCacheEnabled},this.filter),_bundle_a5a397f1_Us)),[4,_.send(e)];case 1:return t=x.sent(),n=t.as(_bundle_a5a397f1_Ns),r=n.isHugeGap,i=n.prevMessages,a=void 0===i?[]:i,u=n.prevHasMore,f=n.isContinuousPrevMessages,v=n.nextMessages,N=void 0===v?[]:v,U=n.nextHasmore,S=n.isContinuousNextMessages,r?Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(D,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return(null===(e=this._handler)||void 0===e?void 0:e.onHugeGapDetected)&&this._handler.onHugeGapDetected(),[2]}))}))})):(T=this.viewTop,A=this.viewBottom,I=Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([Number.MAX_SAFE_INTEGER,T],Object(_bundle_0b1520ed["tc" /* q */])(a.map((function(e){return e.createdAt}))),!1)),w=Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([0,A],Object(_bundle_0b1520ed["tc" /* q */])(N.map((function(e){return e.createdAt}))),!1)),o.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:a,source:_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL})),o.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:N,source:_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL})),this._syncRange.extends(I,w),(f||S)&&(null===(L=this._backgroundSync)||void 0===L||L.range.extends(I,w)),u&&this._prevFill.start(I),U&&this._nextFill.start(w)),[2]}}))}))}),1)];case 4:return V.sent(),[3,7];case 5:return N=V.sent(),v.debug("Failed HugeGap Check ",N),[3,7];case 6:return f.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(t=null===(e=p.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:p.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[3,13];case 8:U=Date.now(),V.label=9;case 9:return V.trys.push([9,11,12,13]),[4,this._getRemoteMessages(U,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,source:_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:p.localCacheEnabled})];case 10:if(S=V.sent(),T=S.messages,A=S.isContinuousMessages,I=S.hasNext,T.length>0){for(w=T.map((function(e){return e.createdAt})),L=0,D=0,x=0;x<w.length;x++)(R=w[x])<=U?L++:R>=U&&D++;this._hasPrevious=L>=this._prevResultLimit,this._hasNext=null!=I?I:D>=this._nextResultLimit,(k=this._syncRange).extends.apply(k,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(w),!1)),A&&(null===(n=this._backgroundSync)||void 0===n||n.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(T,_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,13];case 11:return(P=V.sent())instanceof _bundle_0b1520ed["vc" /* s */]&&P.code===_bundle_0b1520ed["I" /* a8 */].NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,13];case 12:return f.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(i=null===(r=p.localCacheConfig)||void 0===r?void 0:r.maxSize)&&void 0!==i?i:0,use_local_cache:p.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 13:return[2]}}))}))},e.prototype._loadUnsentMessages=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return e._unsentMessages=t.sent(),[2]}}))}))},e.prototype._hasPollMessage=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return e.sent().length>0?[2,!0]:[2,!1]}}))}))},e.prototype._refreshChannel=function(e){var t=this;Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this._channelManager.refreshChannel(this.channel.url,!0,e)];case 1:return t.sent(),[2]}}))}))}))},e.prototype._startCheckMyMutedTimer=function(e){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout((function(){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var e,t,n,s=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:this._checkMyMutedStateTimer=void 0,e=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return t=r.sent(),e=!t.isMuted,[3,5];case 3:return r.sent(),e=!0,[3,5];case 4:return e&&(n=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager,this.channel._runIfHandleableWithGroupChannel((function(e){var t,r;e.myMutedState=_bundle_0b1520ed["Rb" /* bb */].UNMUTED;var i={source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNMUTED,user:n.currentUser};null===(r=null===(t=s._handler)||void 0===t?void 0:t.onChannelUpdated)||void 0===r||r.call(t,i,s.channel)}))),[7];case 5:return[2]}}))}))}),e+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype.initialize=function(e){var t=this,n=new _bundle_a5a397f1_Is;this._messages=[],this._unsentMessages=[],this._syncRange=new _bundle_a5a397f1_cs({}),this._hasNext=!0,this._hasPrevious=!0,this._refreshChannel(_bundle_0b1520ed["F" /* a2 */].REFRESH_CHANNEL);var s=_bundle_0b1520ed["w" /* V */].of(this._iid),r=s.cacheContext,i=s.statManager;if(e===_bundle_a5a397f1_fs.CACHE_AND_REPLACE_BY_API)this._getLocalMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit}).then((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return t=this._filterUnderOffsetMessage(e),this._addMessagesToView(t,_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return s.sent(),n._invokeResponse("local",null,t),[2]}}))}))})).catch((function(e){if(Object(_bundle_0b1520ed["p" /* O */])(e))throw e;n._invokeResponse("local",e,null)})).finally((function(){var s=_bundle_0b1520ed["w" /* V */].of(t._iid).cacheContext;t._getRemoteMessages(t._startingPoint,{prevLimit:t._prevResultLimit,nextLimit:t._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:s.localCacheEnabled}).then((function(r){var a,o,u,h,d,_,p=r.messages,f=r.isContinuousMessages,v=r.hasNext,m=t._filterUnderOffsetMessage(p),g=!0;if(t._messages.length===m.length){for(var C=t._messages.map((function(e){return t.keyOf(e)})),y=0;y<m.length;y++)if(!C.includes(t.keyOf(m[y]))){g=!1;break}}else g=!1;if(t._messages=[],m.length>0){var M=m.map((function(e){return e.createdAt})),b=0,N=0;for(y=0;y<M.length;y++){var U=M[y];U<t._startingPoint?b++:U>t._startingPoint&&N++}t._hasPrevious=b>=t._prevResultLimit,t._hasNext=null!=v?v:N>=t._nextResultLimit,(a=t._syncRange).extends.apply(a,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(m.map((function(e){return e.createdAt}))),!1)),f&&(null===(o=t._backgroundSync)||void 0===o||o.range.extends(t._syncRange.top,t._syncRange.bottom)),t._addMessagesToView(m,_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE)}else t._hasPrevious=!1,t._hasNext=!1;i.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:g?"cache_hit":"cache_miss",max_db_size:null!==(h=null===(u=s.localCacheConfig)||void 0===u?void 0:u.maxSize)&&void 0!==h?h:0,message_init_policy:e,use_local_cache:s.localCacheEnabled,collection_id:t._key}})),i.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:"cache_fetch",max_db_size:null!==(_=null===(d=s.localCacheConfig)||void 0===d?void 0:d.maxSize)&&void 0!==_?_:0,message_init_policy:e,use_local_cache:s.localCacheEnabled,collection_id:t._key}})),n._invokeResponse("remote",null,m)})).catch((function(e){if(Object(_bundle_0b1520ed["p" /* O */])(e))throw e;n._invokeResponse("remote",e,null)}))}));return i.put(new _bundle_0b1520ed["Ob" /* b7 */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE,data:{use_local_cache:r.localCacheEnabled,collection_interface:{message_init_policy:e}}})),n},e.prototype.loadPrevious=function(){var e,t,n;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,r,i,a,o,_,p,f,v=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(m){switch(m.label){case 0:if(this._isDisposed)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return s=_bundle_0b1520ed["w" /* V */].of(this._iid),r=s.cacheContext,i=s.statManager,a=s.logger,this._hasPrevious?this._isLoadingPrevious?(a.warn("Messages are already fetching."),[2,[]]):(this._isLoadingPrevious=!0,o=this.viewTop,_=[],[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(o,{prevLimit:this._prevResultLimit,inclusive:!1})];case 1:return _=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return m.sent(),p=_.length>=this._prevResultLimit,i.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:r.localCacheEnabled&&p?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=r.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:r.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),p&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(_))?[3,3]:(f=!1,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var e,t,n,s,r,a,u,h=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext,[4,this._getRemoteMessages(o,{prevLimit:this._prevResultLimit,reverse:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=d.sent(),(_=this._filterUnderOffsetMessage(t.messages)).length>0&&((n=this._syncRange).extends.apply(n,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(_.map((function(e){return e.createdAt}))),!1)),(null===(s=this._backgroundSync)||void 0===s?void 0:s.range.overlap(this._syncRange))&&t.isContinuousMessages&&(f=!0,null===(r=this._backgroundSync)||void 0===r||r.range.extends(this._syncRange.top))),_=_.filter((function(e){return _bundle_a5a397f1_ds(h._messages,e)<0})),this._hasPrevious=_.length>=this._prevResultLimit,f&&i.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:null!==(u=null===(a=e.localCacheConfig)||void 0===a?void 0:a.maxSize)&&void 0!==u?u:0,use_local_cache:e.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}}))}))}))]);case 2:return m.sent(),this._addMessagesToView(_,_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=_.length>=this._prevResultLimit,_.length>0&&this._addMessagesToView(_,_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),m.label=4;case 4:return this._isLoadingPrevious=!1,[2,_]}}))}))},e.prototype.loadNext=function(){var e,t,n;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var s,r,i,a,o,_,p,f,v=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(m){switch(m.label){case 0:if(this._isDisposed)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return s=_bundle_0b1520ed["w" /* V */].of(this._iid),r=s.cacheContext,i=s.statManager,a=s.logger,this._hasNext?this._isLoadingNext?(a.warn("Messages are already fetching."),[2,[]]):(this._isLoadingNext=!0,o=this.viewBottom,_=[],[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(o,{nextLimit:this._nextResultLimit,inclusive:!1})];case 1:return _=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return m.sent(),p=_.length>=this._nextResultLimit,i.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:r.localCacheEnabled&&p?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=r.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:r.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),p&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(_))?[3,3]:(f=!1,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(v,void 0,void 0,(function(){var e,t,n,s,r,a,u,h,p=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext,[4,this._getRemoteMessages(o,{nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=d.sent(),(_=this._filterUnderOffsetMessage(t.messages)).length>0&&((n=this._syncRange).extends.apply(n,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(_.map((function(e){return e.createdAt}))),!1)),(null===(s=this._backgroundSync)||void 0===s?void 0:s.range.overlap(this._syncRange))&&t.isContinuousMessages&&(f=!0,null===(r=this._backgroundSync)||void 0===r||r.range.extends(this._syncRange.bottom))),_=_.filter((function(e){return _bundle_a5a397f1_ds(p._messages,e)<0})),this._hasNext=null!==(a=t.hasNext)&&void 0!==a?a:_.length>=this._nextResultLimit,f&&i.put(new _bundle_0b1520ed["Xb" /* bh */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:null!==(h=null===(u=e.localCacheConfig)||void 0===u?void 0:u.maxSize)&&void 0!==h?h:0,use_local_cache:e.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}}))}))}))]);case 2:return m.sent(),this._addMessagesToView(_,_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),[3,4];case 3:this._hasNext=_.length>=this._nextResultLimit,_.length>0&&this._addMessagesToView(_,_bundle_0b1520ed["F" /* a2 */].REQUEST_MESSAGE),m.label=4;case 4:return this._isLoadingNext=!1,[2,_]}}))}))},e.prototype.removeFailedMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:if(this._isDisposed)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(e)];case 1:return n.sent(),(t=this._unsentMessages.findIndex((function(t){return t.reqId===e})))>-1&&this._unsentMessages.splice(t,1),[2]}}))}))},e.prototype.dispose=function(){var e,t,n,s=this;if(!this._isDisposed){this._isDisposed=!0;var r=_bundle_0b1520ed["w" /* V */].of(this._iid),i=r.cacheContext,a=r.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel((function(e){e.myMemberState!==_bundle_a5a397f1_qt.NONE&&(s._channel._updateMessageCollectionLastAccessedAt(),a.dispatch(new _bundle_a5a397f1_fn({channels:[s._channel],context:{source:_bundle_0b1520ed["F" /* a2 */].CHANNEL_LASTACCESSEDAT_UPDATED}})))})),i.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._pollChangelogSync)||void 0===n||n.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}(),_bundle_a5a397f1_Ls=function(t){function n(e,n){return t.call(this,e,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},n),{channelManager:_bundle_a5a397f1_hs.of(e)}))||this}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n.prototype.keyOf=function(e){return e.messageId},n.prototype.initialize=function(e){var n=this;return Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(n,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(e=t.sent()).isMuted&&-1!==e.remainingDuration&&this._startCheckMyMutedTimer(e.remainingDuration),[2]}}))}))})),t.prototype.initialize.call(this,e)},n.prototype.setMessageCollectionHandler=function(e){this._setBaseMessageCollectionHandler(e)},n.prototype._activate=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,t.prototype._activate.call(this)];case 1:return n.sent(),[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(e,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(e=t.sent()).isMuted&&-1!==e.remainingDuration&&this._startCheckMyMutedTimer(e.remainingDuration),[2]}}))}))}))];case 2:return n.sent(),[2]}}))}))},n.prototype._addMessagesToView=function(e,t){var n,s,r=this,i=this._filterUnderOffsetMessage(e),a=[],o=[];try{for(var u=Object(_bundle_0b1520ed["wc" /* t */])(i),_=u.next();!_.done;_=u.next()){var f=_.value;if(t===_bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL){if(f.messageId>0){if((C=_bundle_a5a397f1_ds(this._messages,f))<0){_bundle_a5a397f1_ds(this._unsentMessages,f)<0&&a.push(f);var v=_bundle_a5a397f1_ps(this._messages,f);this._messages.splice(v,0,f)}}else if(f instanceof _bundle_dc8db3c3_ft){(C=_bundle_a5a397f1_ds(this._unsentMessages,f))<0&&_bundle_a5a397f1_ds(this._messages,f)<0&&(this._unsentMessages.push(f),a.push(f))}}else if(f.messageId>0){if((C=_bundle_a5a397f1_ds(this._messages,f))<0){var m=_bundle_a5a397f1_ds(this._unsentMessages,f);m<0?a.push(f):(this._unsentMessages.splice(m,1),o.push(f));v=_bundle_a5a397f1_ps(this._messages,f);this._messages.splice(v,0,f)}else o.push(f),this._messages[C]=f;if(f.updatedAt>0){var g=this._updateChildMessagesInView(f);o.push.apply(o,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(g),!1))}}else if(f instanceof _bundle_dc8db3c3_ft){var C;(C=_bundle_a5a397f1_ds(this._unsentMessages,f))<0?_bundle_a5a397f1_ds(this._messages,f)<0&&(this._unsentMessages.push(f),a.push(f)):(o.push(f),this._unsentMessages[C]=f)}}}catch(e){n={error:e}}finally{try{_&&!_.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var e,n,s,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){return e={source:t},a.length>0&&(null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesAdded)||void 0===s||s.call(n,e,this.channel,a)),o.length>0&&(null===(i=null===(r=this._handler)||void 0===r?void 0:r.onMessagesUpdated)||void 0===i||i.call(r,e,this.channel,o)),[2]}))}))}))},n.prototype._updateMessagesToView=function(e,t){var n,s,r=this,i=[],a=[],o=[];try{for(var u=Object(_bundle_0b1520ed["wc" /* t */])(e),_=u.next();!_.done;_=u.next()){var f,v=_.value;if(v.messageId>0)if((f=_bundle_a5a397f1_ds(this._messages,v))>=0)a.push(v),this._messages[f]=v;else{var m=_bundle_a5a397f1_ds(this._unsentMessages,v);if(m>=0){var g=Object(_bundle_0b1520ed["tc" /* q */])(this._unsentMessages.splice(m,1),1)[0];if(this.hasNext&&g)o.push(g);else{a.push(v);var E=_bundle_a5a397f1_ps(this._messages,v);this._messages.splice(E,0,v)}}else{var C=this._messages.map((function(e){return e.createdAt}));(v.createdAt<Math.min.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(C),!1))&&!this._hasPrevious||v.createdAt>Math.max.apply(Math,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(C),!1))&&!this._hasNext)&&i.push(v)}}else if(v instanceof _bundle_dc8db3c3_ft)(f=_bundle_a5a397f1_ds(this._unsentMessages,v))>=0&&(a.push(v),this._unsentMessages[f]=v)}}catch(e){n={error:e}}finally{try{_&&!_.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}return Object(_bundle_0b1520ed["Yb" /* bi */])(t)&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var e,n,s,r,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){return e={source:t},a.length>0?null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,a):o.length>0?null===(u=null===(r=this._handler)||void 0===r?void 0:r.onMessagesDeleted)||void 0===u||u.call(r,e,this.channel,[],o):i.length>0&&this._addMessagesToView(i,t),[2]}))}))})),a},n}(_bundle_a5a397f1_ws),_bundle_a5a397f1_Ds={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},_bundle_a5a397f1_xs=function(t){function n(e){var n=this,s=e.channelUrl,r=e.token,i=e.limit,a=e.order,o=e.mutedMemberFilter,u=e.memberStateFilter,c=e.nicknameStartsWithFilter,l=e.operatorFilter;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/members"),n.params={token:r,limit:i,order:a,muted_member_filter:o,member_state_filter:u,nickname_startswith:c,operator_filter:l,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Rs=function(t){function n(e,n){var s=t.call(this,e,n)||this;s.members=[];var r=n.next,i=n.members;return s.token=r,i&&i.length>0&&(s.members=i.map((function(t){return new _bundle_a5a397f1_Zt(e,t)}))),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]);!function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"}(_bundle_a5a397f1_Ss||(_bundle_a5a397f1_Ss={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(_bundle_a5a397f1_Ts||(_bundle_a5a397f1_Ts={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(_bundle_a5a397f1_As||(_bundle_a5a397f1_As={}));var _bundle_a5a397f1_Fs=function(t){function i(e,n,s){var r,i,a,o,u=this;return(u=t.call(this,e,n,_bundle_0b1520ed["d" /* C */].GROUP,s)||this).mutedMemberFilter=_bundle_a5a397f1_Ss.ALL,u.memberStateFilter=_bundle_a5a397f1_As.ALL,u.nicknameStartsWithFilter=null,u.operatorFilter=_bundle_a5a397f1_Yt.ALL,u.order=_bundle_a5a397f1_Ts.MEMBER_NICKNAME_ALPHABETICAL,u.mutedMemberFilter=null!==(r=s.mutedMemberFilter)&&void 0!==r?r:_bundle_a5a397f1_Ss.ALL,u.memberStateFilter=null!==(i=s.memberStateFilter)&&void 0!==i?i:_bundle_a5a397f1_As.ALL,u.nicknameStartsWithFilter=null!==(a=s.nicknameStartsWithFilter)&&void 0!==a?a:null,u.order=null!==(o=s.order)&&void 0!==o?o:_bundle_a5a397f1_Ts.MEMBER_NICKNAME_ALPHABETICAL,u}return Object(_bundle_0b1520ed["fc" /* c */])(i,t),i.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Ss,this.mutedMemberFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_As,this.memberStateFilter)&&(Object(_bundle_0b1520ed["C" /* a */])("string",this.nicknameStartsWithFilter)||null===this.nicknameStartsWithFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Yt,this.operatorFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Ts,this.order)},i.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,r,i,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new _bundle_a5a397f1_xs(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=c.sent(),i=r.as(_bundle_a5a397f1_Rs),a=i.members,o=i.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},i}(_bundle_0b1520ed["Hb" /* az */]),_bundle_a5a397f1_Ps=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,i=e.accessCode;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/accept"),n.params={user_id:r,access_code:i},n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_ks=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_a5a397f1_dr(e,n),s.channel.myMemberState=_bundle_a5a397f1_qt.JOINED,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Os=function(n){function s(e){var s=this,r=e.channelUrl,i=e.isDistinct,a=e.isPublic,o=e.isDiscoverable,u=e.coverUrl,c=e.coverImage,l=e.accessCode,h=e.name,d=e.data,_=e.customType,p=e.operatorUserIds,f=e.messageSurvivalSeconds;return(s=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,s.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(r)),s.params=Object(_bundle_0b1520ed["hc" /* e */])({is_distinct:i,is_public:a,is_discoverable:o,name:h,data:d,custom_type:_,cover_url:u,cover_file:c,access_code:l,operator_ids:p,message_survival_seconds:f}),s}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Hs=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_a5a397f1_dr(e,n),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Vs=function(t){function n(e){var n=this,s=e.channelUrl;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s)),n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_Gs=function(t){function n(e){var n=this,s=e.channelUrl;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/hide"),n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_Bs=function(t){function n(e){var n=e.userId,s=e.channelUrl,r=e.countPreference,i=t.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/count_preference/").concat(encodeURIComponent(s)),i.params={count_preference:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_qs=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.countPreference=n.count_preference,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_zs=function(t){function n(e){var n=this,s=e.channelUrl;return(n=t.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,n.path="".concat(_bundle_0b1520ed["tb" /* al */],"/").concat(encodeURIComponent(s),"/reset_user_history"),n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_js=function(t){function n(e,n){var s=t.call(this,e,n)||this,r=n.ts_message_offset;return s.messageOffsetTimestamp=r,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Ws=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},fn),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),_bundle_a5a397f1_Qs=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_dc8db3c3_mn),{scheduledAt:void 0}),_bundle_a5a397f1_Ks=function(s){function r(e){var r,i,a=this;a=s.call(this)||this;var o=[];e.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(e.mentionedUserIds?o=e.mentionedUserIds:e.mentionedUsers&&(o=e.mentionedUsers.map((function(e){return e.userId}))));var u=e.channelType,c=e.channelUrl,l=e.scheduledMessageId;return a.method=_bundle_0b1520ed["b" /* A */].PUT,a.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(u),"/").concat(encodeURIComponent(c),"/scheduled_messages/").concat(encodeURIComponent(l)),a.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:_bundle_0b1520ed["M" /* aD */].FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:null===(r=e._thumbnails)||void 0===r?void 0:r.map((function(e){return _bundle_dc8db3c3_ke.payloadify(e)})),custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:o,sorted_metaarray:null===(i=e.metaArrays)||void 0===i?void 0:i.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})),apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption})),a}return Object(_bundle_0b1520ed["fc" /* c */])(r,s),r}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Ys=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.message=new wt(e,n),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_Js=function(s){function r(e){var r,i=this;i=s.call(this)||this;var a=[];e.mentionType===_bundle_0b1520ed["qb" /* ai */].USERS&&(e.mentionedUserIds?a=e.mentionedUserIds:e.mentionedUsers&&(a=e.mentionedUsers.map((function(e){return e.userId}))));var o=e.channelType,u=e.channelUrl,c=e.scheduledMessageId;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(o),"/").concat(encodeURIComponent(u),"/scheduled_messages/").concat(encodeURIComponent(c)),i.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:_bundle_0b1520ed["M" /* aD */].USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:a,sorted_metaarray:null===(r=e.metaArrays)||void 0===r?void 0:r.map((function(e){return _bundle_dc8db3c3_je.payloadify(e)})),apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_dc8db3c3_qe.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),i}return Object(_bundle_0b1520ed["fc" /* c */])(r,s),r}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.message=new _bundle_dc8db3c3_gt(e,n),s}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_Xs=function(t){function n(e){var n=t.call(this)||this,s=e.channelType,r=e.channelUrl,i=e.scheduledMessageId;return n.method=_bundle_0b1520ed["b" /* A */].DELETE,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_Zs=function(t){function n(e){var n=t.call(this)||this,s=e.channelType,r=e.channelUrl,i=e.scheduledMessageId;return n.method=_bundle_0b1520ed["b" /* A */].POST,n.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(s),"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i),"/send_now"),n}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_$s=function(t){function n(e){var n=e.userId,s=e.channelUrl,r=e.pushTriggerOption,i=t.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(s)),i.params={push_trigger_option:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_er=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.pushTriggerOption=n.push_trigger_option,s.enabled=n.enable,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_tr=function(t){function n(e){var n=e.userId,s=e.channelUrl,r=t.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(s)),r}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_nr=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.pushTriggerOption=n.push_trigger_option,s.enabled=n.enable,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_sr=function(t){function n(e){var n=e.channelType,s=e.channelUrl,r=e.messageId,i=t.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].POST,i.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(s),"/messages/").concat(r,"/pin"),i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_rr=function(t){function n(e){var n=e.channelType,s=e.channelUrl,r=e.messageId,i=t.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].DELETE,i.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(n),"/").concat(encodeURIComponent(s),"/messages/").concat(r,"/pin"),i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["ic" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_0b1520ed["fc" /* c */])(n,t)}(_bundle_0b1520ed["kc" /* h */]);var _bundle_a5a397f1_ir,_bundle_a5a397f1_ar,_bundle_a5a397f1_or=function(t){function n(e,n){var s=t.call(this,e)||this;return s.message=null,s.message=_bundle_dc8db3c3_Tt(e,n.message),s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["mb" /* ae */]),_bundle_a5a397f1_ur=function(n){function s(e){var s=this,r=e.channelType,i=e.channelUrl,a=e.limit,o=e.token,u=e.includeReactions,c=e.includeMetaArray,l=e.includeParentMessageInfo,h=e.includeThreadInfo,d=e.includePollDetails;return(s=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,s.path="".concat(Object(_bundle_0b1520ed["sb" /* ak */])(r),"/").concat(encodeURIComponent(i),"/pinned_messages"),s.params=Object(_bundle_0b1520ed["hc" /* e */])({limit:a,token:o,include_reactions:u,with_sorted_meta_array:c,include_thread_info:h,include_parent_message_info:l,include_poll_details:d}),s}return Object(_bundle_0b1520ed["fc" /* c */])(s,n),s}(_bundle_0b1520ed["ic" /* f */]),_bundle_a5a397f1_cr=function(t){function n(e,n){var s=t.call(this,e,n)||this,r=n.pinned_messages,i=n.has_more,a=n.next;return s.pinnedMessages=r.map((function(t){return new _bundle_a5a397f1_or(e,t)})),s.hasMore=i,s.token=a,s}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["kc" /* h */]),_bundle_a5a397f1_lr=function(t){function n(e,n,s,r){var i=t.call(this,e,n,s,r)||this;return i.includeMetaArray=r.includeMetaArray,i.includeReactions=r.includeReactions,i.includeParentMessageInfo=r.includeParentMessageInfo,i.includeThreadInfo=r.includeThreadInfo,i.includePollDetails=r.includePollDetails,i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeMetaArray,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeReactions,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeParentMessageInfo,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeThreadInfo,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new _bundle_a5a397f1_ur(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=c.sent(),r=n.as(_bundle_a5a397f1_cr),i=r.pinnedMessages,a=r.hasMore,o=r.token,this._token=o,this._hasNext=!!a,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_0b1520ed["Hb" /* az */]),_bundle_a5a397f1_hr=function(t){function n(e,n){var s,r,i=this;return(i=t.call(this,e)||this).channelUrl=null!==(s=n.channel_url)&&void 0!==s?s:"",i.channelType=null!==(r=n.channel_type)&&void 0!==r?r:_bundle_0b1520ed["d" /* C */].GROUP,i.member=new _bundle_0b1520ed["v" /* U */](i._iid,n.user),i.deliveryAt=n.ts,i}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n}(_bundle_0b1520ed["mb" /* ae */]);!function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"}(_bundle_a5a397f1_ir||(_bundle_a5a397f1_ir={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(_bundle_a5a397f1_ar||(_bundle_a5a397f1_ar={}));var _bundle_a5a397f1_dr=function(a){function _(e,t){var n,o,u,h,d,_,p,f,m,g,E,C,y,M,b,N,U,S,T,A,w,L=this;return(L=a.call(this,e,t)||this)._unreadMemberStateMap=new Map,L._undeliveredMemberStateMap=new Map,L._typingStatus=new Map,L._lastMemberCountUpdated=0,L._typingStarted=0,L._typingEnded=0,L.isDistinct=!1,L.isSuper=!1,L.isBroadcast=!1,L.isExclusive=!1,L.isPublic=!1,L.isDiscoverable=!0,L.isChatNotification=!1,L.isAccessCodeRequired=!1,L.isPushEnabled=!1,L.unreadMessageCount=0,L.unreadMentionCount=0,L.totalUnreadReplyCount=0,L.members=[],L.memberCount=0,L.joinedMemberCount=0,L.hiddenState=_bundle_a5a397f1_ar.UNHIDDEN,L.lastMessage=null,L.messageOffsetTimestamp=0,L.messageSurvivalSeconds=-1,L.myMemberState=_bundle_a5a397f1_qt.NONE,L.myRole=_bundle_0b1520ed["H" /* a7 */].NONE,L.myMutedState=_bundle_0b1520ed["Rb" /* bb */].UNMUTED,L.myLastRead=0,L.myCountPreference=_bundle_a5a397f1_ir.ALL,L.myPushTriggerOption=_bundle_0b1520ed["a" /* $ */].DEFAULT,L.inviter=null,L.invitedAt=0,L.joinedAt=0,L.pinnedMessageIds=[],L.lastPinnedMessage=null,L._pinnedMessagesUpdatedAt=0,L._myMutedRemainingTime=-1,L.channelType=_bundle_0b1520ed["d" /* C */].GROUP,L.isDistinct=null!==(o=t.is_distinct)&&void 0!==o&&o,L.isSuper=null!==(u=t.is_super)&&void 0!==u&&u,L.isBroadcast=null!==(h=t.is_broadcast)&&void 0!==h&&h,L.isExclusive=null!==(d=t.is_exclusive)&&void 0!==d&&d,L.isPublic=null!==(_=t.is_public)&&void 0!==_&&_,L.isDiscoverable=null!==(p=t.is_discoverable)&&void 0!==p?p:L.isPublic,L.isChatNotification=null!==(f=t.is_chat_notification)&&void 0!==f&&f,L.isAccessCodeRequired=null!==(m=t.is_access_code_required)&&void 0!==m&&m,L.isPushEnabled=null!==(g=t.is_push_enabled)&&void 0!==g&&g,Array.isArray(t.members)&&(n=L.members).push.apply(n,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(t.members.map((function(e){return new _bundle_a5a397f1_Zt(L._iid,e)}))),!1)),L.memberCount=null!==(E=t.member_count)&&void 0!==E?E:0,L.joinedMemberCount=null!==(C=t.joined_member_count)&&void 0!==C?C:0,L.hiddenState=Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_ar,t.hidden_state)?t.hidden_state:_bundle_a5a397f1_ar.UNHIDDEN,L.messageOffsetTimestamp=null!==(y=t.ts_message_offset)&&void 0!==y?y:0,L.messageSurvivalSeconds=null!==(M=t.message_survival_seconds)&&void 0!==M?M:-1,L.lastMessage=t.last_message?_bundle_dc8db3c3_Tt(L._iid,Object(_bundle_0b1520ed["jc" /* g */])({channel_type:L.channelType},t.last_message)):null,t.read_receipt&&Object.keys(t.read_receipt).forEach((function(e){Object(_bundle_0b1520ed["C" /* a */])("number",t.read_receipt[e])&&L._updateUnreadMemberState(e,t.read_receipt[e])})),t.delivery_receipt&&Object.keys(t.delivery_receipt).forEach((function(e){Object(_bundle_0b1520ed["C" /* a */])("number",t.delivery_receipt[e])&&L._updateUndeliveredMemberState(e,t.delivery_receipt[e])})),L.myMemberState=Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_qt,t.member_state)?t.member_state:_bundle_a5a397f1_qt.NONE,L.myRole=Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["H" /* a7 */],t.my_role)?t.my_role:_bundle_0b1520ed["H" /* a7 */].NONE,Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["Rb" /* bb */],t.is_muted)?L.myMutedState=t.is_muted:Object(_bundle_0b1520ed["C" /* a */])("boolean",t.is_muted)?L.myMutedState=t.is_muted?_bundle_0b1520ed["Rb" /* bb */].MUTED:_bundle_0b1520ed["Rb" /* bb */].UNMUTED:L.myMutedState=_bundle_0b1520ed["Rb" /* bb */].UNMUTED,L.myCountPreference=Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_ir,t.count_preference)?t.count_preference:_bundle_a5a397f1_ir.ALL,L.myPushTriggerOption=Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["a" /* $ */],t.push_trigger_option)?t.push_trigger_option:_bundle_0b1520ed["a" /* $ */].ALL,L.myLastRead=null!==(b=t.user_last_read)&&void 0!==b?b:0,L.inviter=t.inviter?new _bundle_0b1520ed["v" /* U */](L._iid,t.inviter):null,L.invitedAt=null!==(N=t.invited_at)&&void 0!==N?N:0,L.joinedAt=null!==(U=t.joined_ts)&&void 0!==U?U:0,L._updateUnreadCount(null!==(S=t.unread_message_count)&&void 0!==S?S:0,null!==(T=t.unread_mention_count)&&void 0!==T?T:0),L.totalUnreadReplyCount=null!==(A=t.total_unread_thread_message_count)&&void 0!==A?A:0,L.pinnedMessageIds=null!==(w=t.pinned_message_ids)&&void 0!==w?w:[],L.lastPinnedMessage=t.latest_pinned_message?_bundle_dc8db3c3_Tt(L._iid,Object(_bundle_0b1520ed["jc" /* g */])({channel_type:L.channelType},t.latest_pinned_message)):null,L}return Object(_bundle_0b1520ed["fc" /* c */])(_,a),Object.defineProperty(_.prototype,"isHidden",{get:function(){return this.hiddenState!==_bundle_a5a397f1_ar.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cachedUnreadMemberState",{get:function(){var e,t,n={};try{for(var s=Object(_bundle_0b1520ed["wc" /* t */])(this._unreadMemberStateMap),r=s.next();!r.done;r=s.next()){var i=Object(_bundle_0b1520ed["tc" /* q */])(r.value,2),a=i[0],o=i[1];n[a]=o}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"cachedUndeliveredMemberState",{get:function(){var e,t,n={};try{for(var s=Object(_bundle_0b1520ed["wc" /* t */])(this._undeliveredMemberStateMap),r=s.next();!r.done;r=s.next()){var i=Object(_bundle_0b1520ed["tc" /* q */])(r.value,2),a=i[0],o=i[1];n[a]=o}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),_.payloadify=function(e){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},a.payloadify.call(this,e)),{is_access_code_required:e.isAccessCodeRequired,is_distinct:e.isDistinct,is_super:e.isSuper,is_broadcast:e.isBroadcast,is_exclusive:e.isExclusive,is_public:e.isPublic,is_discoverable:e.isDiscoverable,is_muted:e.myMutedState,is_push_enabled:e.isPushEnabled,unread_message_count:e.unreadMessageCount,unread_mention_count:e.unreadMentionCount,total_unread_thread_message_count:e.totalUnreadReplyCount,push_trigger_option:e.myPushTriggerOption,count_preference:e.myCountPreference,hidden_state:e.hiddenState,member_count:e.memberCount,joined_member_count:e.joinedMemberCount,member_state:e.myMemberState,my_role:e.myRole,user_last_read:e.myLastRead,ts_message_offset:e.messageOffsetTimestamp,message_survival_seconds:e.messageSurvivalSeconds,read_receipt:e.cachedUnreadMemberState,delivery_receipt:e.cachedUndeliveredMemberState,members:e.members.map((function(e){return _bundle_a5a397f1_Zt.payloadify(e)})),last_message:e.lastMessage?_bundle_dc8db3c3_Et(e.lastMessage):null,inviter:e.inviter?_bundle_0b1520ed["v" /* U */].payloadify(e.inviter):null,invited_at:e.invitedAt,joined_ts:e.joinedAt,pinned_message_ids:e.pinnedMessageIds,latest_pinned_message:e.lastPinnedMessage?_bundle_dc8db3c3_Et(e.lastPinnedMessage):null})))},_.prototype._shouldUpdateLastMessageWith=function(e){return!e.silent&&(!this.lastMessage||this.lastMessage.createdAt<e.createdAt||this.lastMessage.createdAt===e.createdAt&&this.lastMessage.messageId===e.messageId&&this.lastMessage.updatedAt<e.updatedAt)},_.prototype._tryUpdateLastMessageAndCallEvents=function(e,t){var n=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,s=_bundle_a5a397f1_hs.of(this._iid);this._updateLastMessage(t),s.handlers.map((function(t){t.onChannelChanged&&t.onChannelChanged(e)})),n.dispatch(new _bundle_a5a397f1_fn({channels:[e],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT}}))},_.prototype._updateLastMessage=function(e){return!!this._shouldUpdateLastMessageWith(e)&&(this.lastMessage=e,!0)},_.prototype._updateUnreadCount=function(e,t){if("number"==typeof e&&e>=0)if(this.myCountPreference===_bundle_a5a397f1_ir.ALL||this.myCountPreference===_bundle_a5a397f1_ir.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var n=_bundle_0b1520ed["w" /* V */].of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=n&&e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&(this.myCountPreference===_bundle_a5a397f1_ir.ALL||this.myCountPreference===_bundle_a5a397f1_ir.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=t:this.unreadMentionCount=0},_.prototype._updateUnreadMemberState=function(e,t){var n=this._unreadMemberStateMap.get(e);return(!n||n<t)&&(this._unreadMemberStateMap.set(e,t),_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState.userId===e&&(this.myLastRead=t),!0)},_.prototype._updateUndeliveredMemberState=function(e,t){var n=this._undeliveredMemberStateMap.get(e);return(!n||n<t)&&(this._undeliveredMemberStateMap.set(e,t),!0)},_.prototype._updateTypingStatus=function(e,t){void 0===t&&(t=(new Date).getTime()),t>0?this._typingStatus.set(e.userId,{user:e,ts:t}):this._typingStatus.delete(e.userId)},_.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},_.prototype._setLatestMemberCount=function(e,t,n){var s=!1;return n>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=n,s=e!==this.memberCount||t!==this.joinedMemberCount,this.memberCount=e,this.joinedMemberCount=t),s},_.prototype.isReadMessage=function(e){var t=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState,n=this._unreadMemberStateMap.get(t.userId);return!!n&&n>=e.createdAt},_.prototype.serialize=function(){var e=this;return Object(_bundle_0b1520ed["pb" /* ah */])(this,(function(t){t.cachedUnreadMemberState=e.cachedUnreadMemberState,t.cachedUndeliveredMemberState=e.cachedUndeliveredMemberState}))},_.prototype.createMessageCollection=function(e){return void 0===e&&(e={}),new _bundle_a5a397f1_Ls(this._iid,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},e),{channel:this}))},_.prototype.createMemberListQuery=function(e){return void 0===e&&(e={}),new _bundle_a5a397f1_Fs(this._iid,this.url,e)},_.prototype.createThreadedParentMessageListQuery=function(e){return void 0===e&&(e={}),new Xs(this._iid,this.url,this.channelType,e)},_.prototype.createPinnedMessageListQuery=function(e){return void 0===e&&(e={}),new _bundle_a5a397f1_lr(this._iid,this.url,this.channelType,e)},_.prototype.addMember=function(e,t){if(void 0===t&&(t=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var n=this.members.findIndex((function(t){return t.userId===e.userId}));if(n>-1){var s=this.members[n];s.state===_bundle_a5a397f1_qt.JOINED&&(e.state=s.state),this.members.splice(n,1),this.memberCount--}this.members.push(e),this.memberCount++,this._updateUnreadMemberState(e.userId,t),this._updateUndeliveredMemberState(e.userId,t)}},_.prototype.removeMember=function(e){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var t=e instanceof _bundle_a5a397f1_Zt?e.userId:e,n=this.members.findIndex((function(e){return e.userId===t}));if(n>-1)return this.members.splice(n,1),this.memberCount--,!0}return!1},_.prototype.getUnreadMemberCount=function(e){var t,n;if(e instanceof _bundle_dc8db3c3_ft&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var s=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState,r=e.createdAt,i=0;try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(this.members),o=a.next();!o.done;o=a.next()){var u=o.value;if(s.userId!==u.userId&&u.state===_bundle_a5a397f1_qt.JOINED&&e.sender.userId!==u.userId)(this.cachedUnreadMemberState[u.userId]||0)<r&&i++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}return 0},_.prototype.getUndeliveredMemberCount=function(e){var t,n;if(e instanceof _bundle_dc8db3c3_ft&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var s=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState,r=e.createdAt,i=0;try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(this.members),o=a.next();!o.done;o=a.next()){var u=o.value;if(s.userId!==u.userId&&u.state===_bundle_a5a397f1_qt.JOINED&&e.sender.userId!==u.userId)(this.cachedUndeliveredMemberState[u.userId]||0)<r&&i++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}return 0},_.prototype.getReadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var s=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState;if(!s.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var r=e instanceof _bundle_dc8db3c3_ft?e.sender:null,i=[];return this.members.forEach((function(a){if(t||a.userId!==s.userId&&a.userId!==(null==r?void 0:r.userId)){var o=n._unreadMemberStateMap.get(a.userId);o&&o>=e.createdAt&&i.push(a)}})),i},_.prototype.getUnreadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var s=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState;if(!s.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var r=e instanceof _bundle_dc8db3c3_ft?e.sender:null,i=[];return this.members.forEach((function(a){if(t||a.userId!==s.userId&&a.userId!==(null==r?void 0:r.userId)){var o=n._unreadMemberStateMap.get(a.userId);o&&o<e.createdAt&&i.push(a)}})),i},_.prototype.getReadStatus=function(e){var t=this;void 0===e&&(e=!1);var n=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState;if(!n.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var s={};return this.members.forEach((function(r){if(e||r.userId!==n.userId){var i=t._unreadMemberStateMap.get(r.userId);s[r.userId]=new _bundle_dc8db3c3_We(t._iid,{channel_url:t.url,channel_type:t.channelType,user:_bundle_a5a397f1_Zt.payloadify(r),ts:null!=i?i:0})}})),s},_.prototype.getDeliveryStatus=function(e){var t=this;void 0===e&&(e=!0);var n=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState;if(!n.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var s={};return this.members.forEach((function(r){if(e||r.userId!==n.userId){var i=t._undeliveredMemberStateMap.get(r.userId);s[r.userId]=new _bundle_a5a397f1_hr(t._iid,{channel_url:t.url,channel_type:t.channelType,user:_bundle_a5a397f1_Zt.payloadify(r),ts:null!=i?i:0})}})),s},_.prototype.getTypingUsers=function(){var e=[];return this._typingStatus.forEach((function(t){var n=t.user;e.push(n)})),e},_.prototype.invalidateTypingStatus=function(){var e=this,t=_bundle_0b1520ed["w" /* V */].of(this._iid).typingIndicatorInvalidateTime,n=Date.now(),s=!1;return this._typingStatus.forEach((function(r,i){var a=r.ts;n-a>=t&&(e._typingStatus.delete(i),s=!0)})),s},_.prototype.refresh=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,this._refresh()]}))}))},_.prototype._refresh=function(e){return void 0===e&&(e=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.requestQueue,s=t.dispatcher,r=new _bundle_a5a397f1_Cn({channelUrl:this.url}),[4,n.send(r)];case 1:return i=o.sent(),a=i.as(_bundle_a5a397f1_yn).channel,this._update(a),e||s.dispatch(new _bundle_a5a397f1_fn({channels:[a],context:{source:_bundle_0b1520ed["F" /* a2 */].REFRESH_CHANNEL}})),[2,this]}}))}))},_.prototype.freeze=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,a.prototype.freeze.call(this)];case 1:return e.sent(),_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_FROZEN},isWebSocketEventComing:!0})),[2]}}))}))},_.prototype.unfreeze=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,a.prototype.unfreeze.call(this)];case 1:return e.sent(),_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNFROZEN},isWebSocketEventComing:!0})),[2]}}))}))},_.prototype.updateChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,a,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_Ds),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["C" /* a */])("string",e.coverUrl,!0)&&(Object(_bundle_0b1520ed["lc" /* i */])(e.coverImage)||Object(_bundle_0b1520ed["C" /* a */])("string",e.coverImage,!0))&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isDistinct,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isPublic,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isDiscoverable,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.accessCode,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.name,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.data,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.customType,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",e.operatorUserIds,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.messageSurvivalSeconds,!0)}(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.dispatcher,i=n.requestQueue,a=new _bundle_a5a397f1_Os(Object(_bundle_0b1520ed["jc" /* g */])({channelUrl:this.url},t)),[4,i.send(a)];case 1:return c=h.sent(),l=c.as(_bundle_a5a397f1_Hs).channel,this._update(l),r.dispatch(new _bundle_a5a397f1_fn({channels:[l],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.invite=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return Object(_bundle_0b1520ed["zc" /* w */])(e.every((function(e){return e instanceof _bundle_0b1520ed["v" /* U */]}))).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this.inviteWithUserIds(e.map((function(e){return e.userId})))]}))}))},_.prototype.inviteWithUserIds=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.dispatcher,s=t.requestQueue,r=t.sessionManager,i=new _bundle_a5a397f1_zn({channelUrl:this.url,userIds:e}),[4,s.send(i)];case 1:return a=l.sent(),c=a.as(_bundle_a5a397f1_jn).channel,this._update(c),n.dispatch(new _bundle_a5a397f1_fn({channels:[c],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_INVITED,inviter:r.currentUser,invitees:[]},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.join=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,r=t.requestQueue,i=new _bundle_a5a397f1_Hn({channelUrl:this.url,userId:s.userId,accessCode:e}),[4,r.send(i)];case 1:return a=l.sent(),(c=a.as(_bundle_a5a397f1_Vn).channel).myMemberState=this.myMemberState=_bundle_a5a397f1_qt.JOINED,this._update(c),n.dispatch(new _bundle_a5a397f1_fn({channels:[c],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_JOINED,users:[]},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.leave=function(e){return void 0===e&&(e=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,s=t.requestQueue,r=new _bundle_a5a397f1_Bn({channelUrl:this.url,userId:n.userId,shouldRemoveOperatorStatus:e}),[4,s.send(r)];case 1:return i.sent(),this.myMemberState=_bundle_a5a397f1_qt.NONE,[2]}}))}))},_.prototype.acceptInvitation=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,r=t.requestQueue,i=new _bundle_a5a397f1_Ps({channelUrl:this.url,userId:s.userId,accessCode:e}),[4,r.send(i)];case 1:return a=l.sent(),(c=a.as(_bundle_a5a397f1_ks).channel).myMemberState=this.myMemberState=_bundle_a5a397f1_qt.JOINED,this._update(c),n.dispatch(new _bundle_a5a397f1_fn({channels:[c],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_ACCEPTED_INVITE},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.declineInvitation=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_a5a397f1_Qn({channelUrl:this.url,userId:t.userId}),[4,n.send(s)];case 1:return r.sent(),this.myMemberState=_bundle_a5a397f1_qt.NONE,[2,this]}}))}))},_.prototype.sendUserMessage=function(e){var t=this,n=new _bundle_dc8db3c3_Yt,s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,r=_bundle_7b94e16f_S.of(this._iid);return a.prototype.sendUserMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){t&&r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){t.hiddenState===_bundle_a5a397f1_ar.HIDDEN_ALLOW_AUTO_UNHIDE&&(t.hiddenState=_bundle_a5a397f1_ar.UNHIDDEN),r.completeCurrentAndProcessNextAutoResend(e),t._updateLastMessage(e),_bundle_a5a397f1_hs.of(t._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_a5a397f1_fn({channels:[t],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT}})),n._trigger(e)})),n},_.prototype.updateUserMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,s,r,i,o=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return n=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,[4,a.prototype.updateUserMessage.call(this,e,t)];case 1:return s=u.sent(),r=this._updateLastMessage(s),i=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===s.messageId&&(this.lastPinnedMessage=s,r=!0,i=!0),r&&(_bundle_a5a397f1_hs.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)})),n.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:i?_bundle_0b1520ed["F" /* a2 */].EVENT_PINNED_MESSAGE_UPDATED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED}}))),i&&_bundle_a5a397f1_hs.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(o)})),n.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[s],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED})),[2,s]}}))}))},_.prototype._autoResendUserMessage=function(e){var t=this,n=new _bundle_dc8db3c3_Yt,s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,r=_bundle_7b94e16f_S.of(this._iid);return a.prototype._autoResendUserMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){var i=_bundle_a5a397f1_hs.of(t._iid);r.completeCurrentAndProcessNextAutoResend(e),t._updateLastMessage(e),i.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_a5a397f1_fn({channels:[t],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT}})),n._trigger(e)})),n},_.prototype.sendFileMessage=function(e){var t=this,n=new _bundle_dc8db3c3_Yt,s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,r=_bundle_7b94e16f_S.of(this._iid);return a.prototype.sendFileMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){t&&r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){var i=_bundle_a5a397f1_hs.of(t._iid);r.completeCurrentAndProcessNextAutoResend(e),t._updateLastMessage(e),i.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_a5a397f1_fn({channels:[t],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT}})),n._trigger(e)})),n},_.prototype.sendMultipleFilesMessage=function(e){var t=this,n=new ri,s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher;return a.prototype.sendMultipleFilesMessage.call(this,e).onPending((function(e){n._trigger(e)})).onFailed((function(e,t){n._triggerFailed(e,t)})).onSucceeded((function(e){var r=_bundle_a5a397f1_hs.of(t._iid);t._updateLastMessage(e),r.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_a5a397f1_fn({channels:[t],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT}})),n._trigger(e)})).onFileUploaded((function(e,t,s,r){n._triggerOnFileUploaded(e,t,s,r)})),n},_.prototype.updateFileMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,s,r,i,o=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return n=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,[4,a.prototype.updateFileMessage.call(this,e,t)];case 1:return s=u.sent(),r=this._updateLastMessage(s),i=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===s.messageId&&(this.lastPinnedMessage=s,r=!0,i=!0),r&&(_bundle_a5a397f1_hs.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)})),n.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:i?_bundle_0b1520ed["F" /* a2 */].EVENT_PINNED_MESSAGE_UPDATED:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED}}))),i&&_bundle_a5a397f1_hs.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(o)})),n.dispatch(new _bundle_0b1520ed["ub" /* am */]({messages:[s],source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED})),[2,s]}}))}))},_.prototype._autoResendFileMessage=function(e){var t=this,n=new _bundle_dc8db3c3_Yt,s=_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher,r=_bundle_7b94e16f_S.of(this._iid);return a.prototype._autoResendFileMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){var i=_bundle_a5a397f1_hs.of(t._iid);r.completeCurrentAndProcessNextAutoResend(e),t._updateLastMessage(e),i.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_a5a397f1_fn({channels:[t],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT}})),n._trigger(e)})),n},_.prototype.deleteMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,a.prototype.deleteMessage.call(this,e)];case 1:return t.sent(),0===e.messageId&&e instanceof _bundle_dc8db3c3_ft&&_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_0b1520ed["cb" /* aT */]({reqId:e.reqId,source:_bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_DELETED})),[2]}}))}))},_.prototype.hide=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,a,c,l,h;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:return t=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_Yn),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["C" /* a */])("boolean",e.hidePreviousMessages,!0)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.allowAutoUnhide,!0)}(t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.dispatcher,i=n.sdkState,a=n.requestQueue,c=new _bundle_a5a397f1_Jn(Object(_bundle_0b1520ed["jc" /* g */])({channelUrl:this.url,userId:i.userId},t)),[4,a.send(c)];case 1:return l=d.sent(),h=l.as(_bundle_a5a397f1_Xn).messageOffsetTimestamp,this.hiddenState=t.allowAutoUnhide?_bundle_a5a397f1_ar.HIDDEN_ALLOW_AUTO_UNHIDE:_bundle_a5a397f1_ar.HIDDEN_PREVENT_AUTO_UNHIDE,t.hidePreviousMessages&&this._updateUnreadCount(0,0),h&&(this.messageOffsetTimestamp=h),r.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_HIDDEN},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.unhide=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.dispatcher,n=e.requestQueue,s=new _bundle_a5a397f1_Gs({channelUrl:this.url}),[4,n.send(s)];case 1:return r.sent(),this.hiddenState=_bundle_a5a397f1_ar.UNHIDDEN,t.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UNHIDDEN},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.delete=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new _bundle_a5a397f1_Vs({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},_.prototype.markAsRead=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r,i,a,o=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(u){switch(u.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.dispatcher,s=e.requestQueue,r=new _bundle_dc8db3c3_Ye({channelUrl:this.url}),[4,s.send(r)];case 1:return i=u.sent(),a=i.as(_bundle_dc8db3c3_Xe).readStatus,this._updateUnreadMemberState(t.userId,a.readAt),(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),_bundle_a5a397f1_hs.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)}))),n.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_READ}})),[2]}}))}))},_.prototype.markAsDelivered=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_a5a397f1_as({channelUrl:this.url,userId:t.userId}),[4,n.send(s)];case 1:return r.sent(),[2]}}))}))},_.prototype.startTyping=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(s=(new Date).getTime())-this._typingStarted>=n?(this._typingStarted=s,this._typingEnded=0,r=new _bundle_a5a397f1_$n({channelUrl:this.url,time:this._typingStarted}),[4,t.send(r)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},_.prototype.endTyping=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(s=(new Date).getTime())-this._typingEnded>=n?(this._typingStarted=0,this._typingEnded=s,r=new _bundle_a5a397f1_ts({channelUrl:this.url,time:this._typingStarted}),[4,t.send(r)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},_.prototype.createScheduledUserMessage=function(e){e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},ws),e),Object(_bundle_0b1520ed["zc" /* w */])(Ss(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);var t=new _bundle_dc8db3c3_Yt;return this._createScheduledUserMessage(e,t),t},_.prototype.updateScheduledUserMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_Qs),t),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return vn(e)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.scheduledAt,!0)}(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,i=new _bundle_a5a397f1_Js(Object(_bundle_0b1520ed["jc" /* g */])({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,r.send(i)];case 1:return a=c.sent(),[2,a.as(wr).message]}}))}))},_.prototype.createScheduledFileMessage=function(e){var t=this;e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},Ms),e),Object(_bundle_0b1520ed["zc" /* w */])(Us(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);var n=Date.now(),r=this._generateRequestId(),i=new _bundle_dc8db3c3_Yt;return Object(_bundle_0b1520ed["Db" /* av */])(ii).then((function(){var s=t._createPendingScheduledFileMessage(e,r,n);Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(t,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,i._trigger(s)]}))}))}))})),Object(_bundle_0b1520ed["lc" /* i */])(e.file)?this._uploadFileAndUpdateParams(e).then((function(){return t._createScheduledFileMessage(e,i,r,n)})):this._createScheduledFileMessage(e,i,r,n),i},_.prototype.updateScheduledFileMessage=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_Ws),t),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return _bundle_dc8db3c3_pn(e)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.scheduledAt,!0)&&(Object(_bundle_0b1520ed["lc" /* i */])(e.file)||Object(_bundle_0b1520ed["C" /* a */])("string",e.fileUrl))&&Object(_bundle_0b1520ed["C" /* a */])("string",e.fileName,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.mimeType,!0)&&Object(_bundle_0b1520ed["C" /* a */])("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(_bundle_0b1520ed["C" /* a */])("object",e)&&e.maxWidth>0&&e.maxHeight>0})))}(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),Object(_bundle_0b1520ed["lc" /* i */])(n.file)?[4,this._uploadFileAndUpdateParams(n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return r=new _bundle_a5a397f1_Ks(Object(_bundle_0b1520ed["jc" /* g */])({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue.send(r)];case 3:return i=a.sent(),[2,i.as(_bundle_a5a397f1_Ys).message]}}))}))},_.prototype.cancelScheduledMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return t=new _bundle_a5a397f1_Xs({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},_.prototype.sendScheduledMessageNow=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return t=new _bundle_a5a397f1_Zs({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},_.prototype.getMyPushTriggerOption=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_a5a397f1_tr({userId:t.userId,channelUrl:this.url}),[4,n.send(s)];case 1:return r=a.sent(),i=r.as(_bundle_a5a397f1_nr).pushTriggerOption,this.myPushTriggerOption=i,[2,i]}}))}))},_.prototype.setMyPushTriggerOption=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,i,a,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["a" /* $ */],e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,i=t.requestQueue,a=new _bundle_a5a397f1_$s({userId:s.userId,channelUrl:this.url,pushTriggerOption:e}),[4,i.send(a)];case 1:return c=h.sent(),l=c.as(_bundle_a5a397f1_er).pushTriggerOption,this.myPushTriggerOption=l,n.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,l]}}))}))},_.prototype.setMyCountPreference=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,i,a,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_ir,e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,i=t.requestQueue,a=new _bundle_a5a397f1_Bs({channelUrl:this.url,userId:s.userId,countPreference:e}),[4,i.send(a)];case 1:return c=h.sent(),l=c.as(_bundle_a5a397f1_qs).countPreference,this.myCountPreference=l,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),n.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,l]}}))}))},_.prototype.resetMyHistory=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,s,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.dispatcher,n=e.requestQueue,s=new _bundle_a5a397f1_zs({channelUrl:this.url}),[4,n.send(s)];case 1:return r=a.sent(),i=r.as(_bundle_a5a397f1_js).messageOffsetTimestamp,this.messageOffsetTimestamp=i,this.lastMessage&&this.lastMessage.createdAt<i&&(this.lastMessage=null),this._updateUnreadCount(0,0),this.totalUnreadReplyCount=0,t.dispatch(new _bundle_a5a397f1_fn({channels:[this],context:{source:_bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_RESET_HISTORY},isWebSocketEventComing:!0})),[2,this]}}))}))},_.prototype.pinMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&e>0).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new _bundle_a5a397f1_sr({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return s.sent(),[2]}}))}))},_.prototype.unpinMessage=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",e)&&e>0).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new _bundle_a5a397f1_rr({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return s.sent(),[2]}}))}))},_.prototype._uploadFileAndUpdateParams=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,s,r,i,a,o,u,c,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(h){switch(h.label){case 0:return Object(_bundle_0b1520ed["lc" /* i */])(e.file)?(t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new _bundle_dc8db3c3_Ce({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:this._generateRequestId()}),[4,t.send(n)]):[3,2];case 1:s=h.sent(),r=s.as(_bundle_dc8db3c3_Pe),i=r.url,a=r.fileSize,o=void 0===a?e.fileSize:a,u=r.thumbnails,c=r.requireAuth,l=void 0!==c&&c,e.fileUrl=i,e.fileSize=o,e.requireAuth=l,e._thumbnails=u,h.label=2;case 2:return[2]}}))}))},_.prototype.resendMessage=function(e,t){var n,s=this;if(Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_dc8db3c3_ft&&!e.scheduledInfo&&e.isResendable).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),e.isUserMessage()){var r=null!==(n=e.messageParams)&&void 0!==n?n:_bundle_dc8db3c3_nn(e),i=new _bundle_dc8db3c3_Yt;return this._sendUserMessage(r,ei.RESEND,e.reqId).onPending((function(e){i._trigger(e)})).onFailed((function(e,t){i._triggerFailed(e,t)})).onSucceeded((function(e){s._tryUpdateLastMessageAndCallEvents(s,e),i._trigger(e)})),i}if(e.isFileMessage()){var a=this._validateFailedFileMessageHasFile(e,t);Object(_bundle_0b1520ed["zc" /* w */])(a).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters);r=_bundle_dc8db3c3_dn(e,t);var c=new _bundle_dc8db3c3_Yt;return this._sendFileMessage(r,ei.RESEND,e.reqId).onPending((function(e){c._trigger(e)})).onFailed((function(e,t){c._triggerFailed(e,t)})).onSucceeded((function(e){s._tryUpdateLastMessageAndCallEvents(s,e),c._trigger(e)})),c}if(e.isMultipleFilesMessage()){r=e.messageParams;var l=new ri;return this._sendMultipleFilesMessage(r,ei.RESEND,e.reqId).onPending((function(e){l._trigger(e)})).onFailed((function(e,t){l._triggerFailed(e,t)})).onSucceeded((function(e){s._tryUpdateLastMessageAndCallEvents(s,e),l._trigger(e)})).onFileUploaded((function(e,t,n,s){l._triggerOnFileUploaded(e,t,n,s)})),l}},_.prototype.copyMessage=function(e,t){var n=this;if(Object(_bundle_0b1520ed["zc" /* w */])(e instanceof ai&&t instanceof _bundle_dc8db3c3_ft&&t.sendingStatus===_bundle_0b1520ed["vb" /* an */].SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t.isUserMessage()){Object(_bundle_0b1520ed["zc" /* w */])(!t.poll).throw(_bundle_0b1520ed["vc" /* s */].notSupportedError);var s=_bundle_dc8db3c3_en(t),r=new _bundle_dc8db3c3_Yt;return e._sendUserMessage(s).onPending((function(e){r._trigger(e)})).onFailed((function(e,t){r._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),r._trigger(t)})),r}if(t.isFileMessage()){s=_bundle_dc8db3c3_cn(t);var i=new _bundle_dc8db3c3_Yt;return e._sendFileMessage(s).onPending((function(e){i._trigger(e)})).onFailed((function(e,t){i._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),i._trigger(t)})),i}if(t.isMultipleFilesMessage()){if(e.isGroupChannel()){s=$r(t);var a=new ri;return e._sendMultipleFilesMessage(s,ei.COPY).onPending((function(e){a._trigger(e)})).onFailed((function(e,t){a._triggerFailed(e,t)})).onSucceeded((function(t){n._tryUpdateLastMessageAndCallEvents(e,t),a._trigger(t)})).onFileUploaded((function(e,t,n,s){a._triggerOnFileUploaded(e,t,n,s)})),a}throw _bundle_0b1520ed["vc" /* s */].channelTypeNotSupportedError}},_}(ai);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useAsyncEffect.js
var useAsyncEffect_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

const useAsyncEffect = (asyncEffect, deps) => {
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(createAsyncEffectCallback(asyncEffect), deps);
};
const useAsyncLayoutEffect = (asyncEffect, deps) => {
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(createAsyncEffectCallback(asyncEffect), deps);
};
const iife = (callback) => callback();
const createAsyncEffectCallback = (asyncEffect) => () => {
    const destructor = iife(asyncEffect);
    return () => {
        if (!destructor)
            return;
        if (destructor instanceof Promise) {
            iife(() => useAsyncEffect_awaiter(void 0, void 0, void 0, function* () {
                const awaitedDestructor = yield destructor;
                if (awaitedDestructor)
                    awaitedDestructor();
            }));
        }
        else {
            iife(destructor);
        }
    };
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-8b967450.js
var _bundle_8b967450_t=function(){this.onUserMuted=_bundle_0b1520ed["Gb" /* ay */],this.onUserUnmuted=_bundle_0b1520ed["Gb" /* ay */],this.onUserBanned=_bundle_0b1520ed["Gb" /* ay */],this.onUserUnbanned=_bundle_0b1520ed["Gb" /* ay */],this.onChannelChanged=_bundle_0b1520ed["Gb" /* ay */],this.onChannelDeleted=_bundle_0b1520ed["Gb" /* ay */],this.onChannelFrozen=_bundle_0b1520ed["Gb" /* ay */],this.onChannelUnfrozen=_bundle_0b1520ed["Gb" /* ay */],this.onOperatorUpdated=_bundle_0b1520ed["Gb" /* ay */],this.onChannelMemberCountChanged=_bundle_0b1520ed["Gb" /* ay */],this.onMetaDataCreated=_bundle_0b1520ed["Gb" /* ay */],this.onMetaDataUpdated=_bundle_0b1520ed["Gb" /* ay */],this.onMetaDataDeleted=_bundle_0b1520ed["Gb" /* ay */],this.onMetaCounterCreated=_bundle_0b1520ed["Gb" /* ay */],this.onMetaCounterUpdated=_bundle_0b1520ed["Gb" /* ay */],this.onMetaCounterDeleted=_bundle_0b1520ed["Gb" /* ay */],this.onMessageReceived=_bundle_0b1520ed["Gb" /* ay */],this.onMessageUpdated=_bundle_0b1520ed["Gb" /* ay */],this.onMessageDeleted=_bundle_0b1520ed["Gb" /* ay */],this.onMentionReceived=_bundle_0b1520ed["Gb" /* ay */],this.onReactionUpdated=_bundle_0b1520ed["Gb" /* ay */],this.onThreadInfoUpdated=_bundle_0b1520ed["Gb" /* ay */]};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/groupChannel.js
var groupChannel_Ge,groupChannel_Ue={},groupChannel_Oe=function(){function t(t){var n=t._iid,r=t.limit,a=void 0===r?100:r,o=this;this.ref=0,this._iid=n,this._limit=a;var l,u=_bundle_0b1520ed["w" /* V */].of(this._iid),c=u.sdkState,d=u.dispatcher,p=u.logger,m=u.cacheContext;this._metadataKey=(l=c.userId,"sendbird:".concat(l,"@groupchannel/sync.meta"));var y=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(c.userId);this._sync=new _bundle_a5a397f1_vs(y,(function(){return Object(_bundle_0b1520ed["B" /* _ */])(o,void 0,void 0,(function(){var e,t,n,r,a,i,o,l,u,h,d,f;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(s.sent(),p.debug("channel background sync from",null===(u=this._metadata)||void 0===u?void 0:u.token),null===(h=this._metadata)||void 0===h?void 0:h.completed)return[3,13];s.label=2;case 2:if(s.trys.push([2,9,,12]),(t={includeEmpty:!0,order:_bundle_7b94e16f_E.CHRONOLOGICAL}).order!==_bundle_7b94e16f_E.LATEST_LAST_MESSAGE)return[3,6];s.label=3;case 3:return s.trys.push([3,5,,6]),[4,m.preference.get(Object(_bundle_0b1520ed["l" /* K */])(c.appId))];case 4:return n=s.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return s.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_bundle_a5a397f1_hs.of(this._iid).getMyGroupChannels(null!==(f=null===(d=this._metadata)||void 0===d?void 0:d.token)&&void 0!==f?f:"",t,this._limit,_bundle_0b1520ed["F" /* a2 */].SYNC_CHANNEL_BACKGROUND)];case 7:return r=s.sent(),a=r.channels,i=r.token,e.hasNext=a.length>=this._limit&&!!i,e.nextToken=i,this._metadata&&(this._metadata.token=i,(l=this._metadata.range).extends.apply(l,Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(a.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),p.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return s.sent(),[3,12];case 9:return o=s.sent(),p.debug("channel background sync error",o),o instanceof _bundle_0b1520ed["vc" /* s */]&&o.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:s.sent(),s.label=11;case 11:throw o;case 12:return[3,14];case 13:e.hasNext=!1,e.nextToken="",s.label=14;case 14:return[2,e]}}))}))})),this._connectionEventContext=d.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])if(e.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED)o.resume();else o.pause()}))}return t.of=function(e){return groupChannel_Ue[e]||(groupChannel_Ue[e]=new t({_iid:e})),groupChannel_Ue[e].ref++,groupChannel_Ue[e]},t.clear=function(e){groupChannel_Ue[e]&&(groupChannel_Ue[e].close(),delete groupChannel_Ue[e])},Object.defineProperty(t.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new _bundle_a5a397f1_cs({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata={token:e?e.token:"",range:new _bundle_a5a397f1_cs(e?e.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!e&&e.completed},t.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetaData=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var e,t,n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.logger;n.sessionManager.session.hasSession&&(r.debug("channel background sync resume()"),this._sync.start(null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.token)&&void 0!==t?t:""))},t.prototype.pause=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete groupChannel_Ue[this._iid])},t}(),groupChannel_De={},groupChannel_Pe=function(){function t(t){var n=t._iid,r=this;this.ref=0,this._iid=n;var a,o=_bundle_0b1520ed["w" /* V */].of(this._iid),l=o.logger,u=o.sdkState,c=o.dispatcher,d=o.cacheContext;this._metadataKey=(a=u.userId,"sendbird:".concat(a,"@groupchannel/changelogs.meta")),this._subscribers=new _bundle_0b1520ed["f" /* E */];var p=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(u.userId);this._sync=new _bundle_a5a397f1_vs(p,(function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var e,t,n,r,a,i,o,c,h,p,f,v;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:s.sent(),l.debug("channel changelog sync from",null===(p=this._metadata)||void 0===p?void 0:p.token),s.label=2;case 2:s.trys.push([2,9,,12]),t={includeEmpty:!0},s.label=3;case 3:return s.trys.push([3,5,,6]),[4,d.preference.get(Object(_bundle_0b1520ed["l" /* K */])(u.appId))];case 4:return n=s.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return s.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_bundle_a5a397f1_hs.of(this._iid).getMyGroupChannelChangeLogs(null!==(v=null===(f=this._metadata)||void 0===f?void 0:f.token)&&void 0!==v?v:"",t,_bundle_0b1520ed["F" /* a2 */].SYNC_CHANNEL_CHANGELOGS)];case 7:return r=s.sent(),a=r.updatedChannels,i=r.deletedChannelUrls,o=r.hasMore,c=r.token,this._subscribers.dispatch("progress",{updatedChannels:a,deletedChannelUrls:i,hasMore:o,token:c}),e.hasNext=o,e.nextToken=c,this._metadata&&(this._metadata.token=c),l.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return s.sent(),[3,12];case 9:return h=s.sent(),l.debug("channel changelog sync error",h),h instanceof _bundle_0b1520ed["vc" /* s */]&&h.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:s.sent(),s.label=11;case 11:throw h;case 12:return[2,e]}}))}))})),this._sync.on("stop",(function(){r._subscribers.dispatch("pause")})),this._connectionEventContext=c.on((function(e){if(e instanceof _bundle_0b1520ed["e" /* D */])if(e.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED)r.resume();else r.pause()}))}return t.of=function(e){return groupChannel_De[e]||(groupChannel_De[e]=new t({_iid:e})),groupChannel_De[e].ref++,groupChannel_De[e]},t.clear=function(e){groupChannel_De[e]&&(groupChannel_De[e].close(),delete groupChannel_De[e])},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:r=a.sent(),this._metadata={token:r?r.token:n},a.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.on=function(e,t){return this._subscribers.on(e,t)},t.prototype.resume=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},t.prototype.pause=function(){this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete groupChannel_De[this._iid])},t}(),groupChannel_Ie=function(e,t){return e.findIndex((function(e){return e.isIdentical(t)}))},groupChannel_He=function(e,t,n){if(e.length>0){for(var r=groupChannel_Ie(e,t),a=0,i=e.length-1,s=Math.floor((a+i)/2);a<i;){var o=groupChannel_Re(e[s],t,n);if(o>0)i=s,s=Math.floor((a+i)/2);else{if(!(o<0))return{place:s,oldPosition:r};a=s+1,s=Math.floor((a+i)/2)}}return{place:groupChannel_Re(e[s],t,n)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},groupChannel_Re=function(e,t,n){switch(n){case _bundle_7b94e16f_E.LATEST_LAST_MESSAGE:return e.lastMessage&&t.lastMessage?t.lastMessage.createdAt-e.lastMessage.createdAt:e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case _bundle_7b94e16f_E.CHRONOLOGICAL:return t.createdAt-e.createdAt;case _bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL:var r=e.name.localeCompare(t.name);return 0===r?e.createdAt-t.createdAt:r;default:return 0}},groupChannel_Ve=function(){function t(t,n){var r=n.filter,a=void 0===r?new _bundle_a5a397f1_en:r,o=n.order,l=void 0===o?_bundle_7b94e16f_E.LATEST_LAST_MESSAGE:o,u=n.limit,c=void 0===u?qr:u,d=n.includeChangesOnInitialLoad,p=void 0!==d&&d,_=this;this.channels=[],this._iid=t,this._key="gcc-".concat(Object(_bundle_0b1520ed["qc" /* n */])()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=p,this.filter=a,this.order=l,this._hasMore=!0,this._token="",this._limit=c;var v=_bundle_0b1520ed["w" /* V */].of(this._iid),m=v.sdkState,g=v.cacheContext,y=v.dispatcher;g.localCacheEnabled&&(this._backgroundSync=groupChannel_Oe.of(t),this._backgroundSync.resume()),this._changelogSync=groupChannel_Pe.of(t),this._changelogSync.resume(),_bundle_a5a397f1_hs.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,t){var n=t.source;if(_bundle_a5a397f1_pn(n)){var r=e.filter((function(e){return _.filter.match(e,m.userId)})),a=e.filter((function(e){return!_.filter.match(e,m.userId)})).map((function(e){return e.url}));r.length>0&&_._addChannelsToView(r,t),a.length>0&&_._removeChannelsFromView(a,t)}},onRemove:function(e,t){_._removeChannelsFromView(e,t)}}),_bundle_0b1520ed["w" /* V */].of(this._iid).statManager.put(new _bundle_0b1520ed["Ob" /* b7 */]({type:_bundle_0b1520ed["Pb" /* b8 */].FEATURE_LOCALCACHE,data:{use_local_cache:g.localCacheEnabled,collection_interface:{group_channel:!0}}})),y.on((function(t){t instanceof _bundle_0b1520ed["e" /* D */]&&(t.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED?_._isGetRemoteChannelsSucceeded||Object(_bundle_0b1520ed["B" /* _ */])(_,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):t.stateType===_bundle_0b1520ed["g" /* F */].LOGOUT&&_.dispose())}))}return Object.defineProperty(t.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),t.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},t.prototype._addChannelsToView=function(t,n,r){var a,i,o,l,u=this;void 0===r&&(r=!1);var c=[],h=[],d=[];try{for(var p=Object(_bundle_0b1520ed["wc" /* t */])(t),f=p.next();!f.done;f=p.next()){var _=f.value,v=groupChannel_Ie(this.channels,_);v>=0&&this.channels.splice(v,1);var m=groupChannel_He(this.channels,_,this.order).place;if(v<0)m===this.channels.length?!r&&this._hasMore||(c.push(_),this.channels.push(_)):(c.push(_),this.channels.splice(m,0,_));else switch(n.source){case _bundle_0b1520ed["F" /* a2 */].EVENT_CHANNEL_UPDATED:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_RECEIVED:case _bundle_0b1520ed["F" /* a2 */].SYNC_CHANNEL_CHANGELOGS:case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT:this.order===_bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&m===this.channels.length?d.push(_):(this.channels.splice(m,0,_),h.push(_));break;default:this.channels.splice(m,0,_),h.push(_)}}}catch(e){a={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}if(d.length>0)try{for(var g=Object(_bundle_0b1520ed["wc" /* t */])(d),y=g.next();!y.done;y=g.next()){_=y.value;var C=groupChannel_Ie(this.channels,_);-1!==C&&this.channels.splice(C,1)}}catch(e){o={error:e}}finally{try{y&&!y.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}_bundle_a5a397f1_pn(n.source)&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(u,void 0,void 0,(function(){var e,t,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){return c.length>0&&(null===(e=this._handler)||void 0===e?void 0:e.onChannelsAdded)&&this._handler.onChannelsAdded(n,c),h.length>0&&(null===(t=this._handler)||void 0===t?void 0:t.onChannelsUpdated)&&this._handler.onChannelsUpdated(n,h),d.length>0&&(null===(r=this._handler)||void 0===r?void 0:r.onChannelsDeleted)&&this._handler.onChannelsDeleted(n,d.map((function(e){return e.url}))),[2]}))}))}))},t.prototype._removeChannelsFromView=function(t,n){var r,a,i=this,o=[],l=function(e){var t=u.channels.findIndex((function(t){return t.url===e}));t>=0&&(o.push(u.channels[t].url),u.channels.splice(t,1))},u=this;try{for(var c=Object(_bundle_0b1520ed["wc" /* t */])(t),h=c.next();!h.done;h=c.next()){l(h.value)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return _bundle_a5a397f1_pn(n.source)&&o.length>0&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(i,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return(null===(e=this._handler)||void 0===e?void 0:e.onChannelsDeleted)&&this._handler.onChannelsDeleted(n,o),[2]}))}))})),o},t.prototype._getLocalChannels=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return e=_bundle_a5a397f1_hs.of(this._iid),t=this.channels.length>0?function(e,t){var n,r,a,i;switch(t){case _bundle_7b94e16f_E.LATEST_LAST_MESSAGE:return null!==(r=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==r?r:e.createdAt;case _bundle_7b94e16f_E.CHRONOLOGICAL:return e.createdAt;case _bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(i=null===(a=e.lastMessage)||void 0===a?void 0:a.createdAt)&&void 0!==i?i:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,n.sent()]}}))}))},t.prototype._getRemoteChannels=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return[4,_bundle_a5a397f1_hs.of(this._iid).getMyGroupChannels(this._token,Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this.filter),{order:this.order})),this._limit)];case 1:return e=r.sent(),t=e.channels,n=e.token,this._token=n,this._hasMore=!!n,[2,t]}}))}))},t.prototype._revokeLoadMore=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,{source:_bundle_0b1520ed["F" /* a2 */].REQUEST_CHANNEL},!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},t.prototype.loadMore=function(){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,a,o,l,u,c,h,d,p,f,v,m,g,y,C,b,S,M=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(L){switch(L.label){case 0:if(this._isDisposed)throw new _bundle_0b1520ed["vc" /* s */]({code:_bundle_0b1520ed["I" /* a8 */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return n=null,this._includeChangesOnInitialLoad&&0===this.channels.length&&this._changelogSync.isRunning?[4,new Promise((function(e){M._changelogSyncSubscriberContext=M._changelogSync.on("progress",(function(t){return e(t)})).on("pause",(function(){return e(null)}))}))]:[3,2];case 1:n=L.sent(),null===(t=this._changelogSyncSubscriberContext)||void 0===t||t.close(),L.label=2;case 2:return r=[],this._hasMore?(a=_bundle_0b1520ed["w" /* V */].of(this._iid),o=a.cacheContext,l=a.connectionManager,!o.localCacheEnabled||l.isConnected&&!this._backgroundSync.completed?[3,4]:[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(M,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return r=e.sent(),[2]}}))}))}))]):[3,8];case 3:return L.sent(),this._hasMore=r.length>=this._limit,[3,7];case 4:return L.trys.push([4,6,,7]),[4,this._getRemoteChannels()];case 5:return r=L.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,7];case 6:return L.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,7];case 7:this._addChannelsToView(r,{source:_bundle_0b1520ed["F" /* a2 */].REQUEST_CHANNEL},!0),L.label=8;case 8:if(n){try{for(u=Object(_bundle_0b1520ed["wc" /* t */])(n.updatedChannels),c=u.next();!c.done;c=u.next())h=c.value,(g=groupChannel_Ie(r,h))>=0?r[g]=h:(d=groupChannel_He(r,h,this.order).place,r.splice(d,0,h))}catch(e){y={error:e}}finally{try{c&&!c.done&&(C=u.return)&&C.call(u)}finally{if(y)throw y.error}}p=r.map((function(e){return e.url}));try{for(f=Object(_bundle_0b1520ed["wc" /* t */])(n.deletedChannelUrls),v=f.next();!v.done;v=f.next())m=v.value,(g=p.indexOf(m))>=0&&(r.splice(g,1),p.splice(g,1))}catch(e){b={error:e}}finally{try{v&&!v.done&&(S=f.return)&&S.call(f)}finally{if(b)throw b.error}}}return[2,r]}}))}))},t.prototype.dispose=function(){var e,t,n;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._changelogSyncSubscriberContext)||void 0===n||n.close(),_bundle_a5a397f1_hs.of(this._iid).unsubscribeChannelEvent(this._key))},t}(),groupChannel_Ke=function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.order,s=t.includeEmpty,o=t.membershipFilter,l=t.channelNameContainsFilter,u=t.channelUrlsFilter,c=t.customTypesFilter,h=t.customTypeStartsWithFilter,d=t.superChannelFilter,p=t.metadataOrderKeyFilter,f=t.metadataKey,_=t.metadataValues,v=t.metadataValueStartsWith,m=t.includeFrozen,g=t.includeMetaData;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path=_bundle_0b1520ed["tb" /* al */],n.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({token:r,limit:a,order:i,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:s,public_mode:_bundle_a5a397f1_zt.PUBLIC,public_membership_mode:o,name_contains:l,channel_urls:u,custom_types:c,custom_type_startswith:h,super_mode:d,metadata_order_key:p,metadata_key:f,metadata_values:_,metadata_value_startswith:v,show_frozen:m,show_metadata:g})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),groupChannel_Qe=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.channels=[];var a=n.next,i=n.channels,s=n.ts;return r.token=a,i&&i.length>0&&(r.channels=i.map((function(e){return e.ts=s,new _bundle_a5a397f1_dr(t,e)}))),r.ts="number"==typeof s?s:0,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]);!function(e){e.ALL="all",e.JOINED="joined"}(groupChannel_Ge||(groupChannel_Ge={}));var groupChannel_je=function(t){function n(e,n){var r,a,i,s,o,l,u,c,h,d,p,f,_,v,m=this;return(m=t.call(this,e,n)||this).includeEmpty=!1,m.includeFrozen=!0,m.includeMetaData=!0,m.channelUrlsFilter=null,m.customTypesFilter=null,m.customTypeStartsWithFilter=null,m.channelNameContainsFilter=null,m.membershipFilter=groupChannel_Ge.ALL,m.superChannelFilter=_bundle_a5a397f1_Wt.ALL,m.metadataKey=null,m.metadataValues=null,m.metadataOrderKeyFilter=null,m.metadataValueStartsWith=null,m.order=_bundle_7b94e16f_p.CHRONOLOGICAL,m.includeEmpty=null!==(r=n.includeEmpty)&&void 0!==r&&r,m.includeFrozen=null===(a=n.includeFrozen)||void 0===a||a,m.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,m.channelUrlsFilter=null!==(s=n.channelUrlsFilter)&&void 0!==s?s:null,m.customTypesFilter=null!==(o=n.customTypesFilter)&&void 0!==o?o:null,m.customTypeStartsWithFilter=null!==(l=n.customTypeStartsWithFilter)&&void 0!==l?l:null,m.channelNameContainsFilter=null!==(u=n.channelNameContainsFilter)&&void 0!==u?u:null,m.membershipFilter=null!==(c=n.membershipFilter)&&void 0!==c?c:groupChannel_Ge.ALL,m.superChannelFilter=null!==(h=n.superChannelFilter)&&void 0!==h?h:_bundle_a5a397f1_Wt.ALL,m.metadataKey=null!==(d=n.metadataKey)&&void 0!==d?d:null,m.metadataValues=null!==(p=n.metadataValues)&&void 0!==p?p:null,m.metadataOrderKeyFilter=null!==(f=n.metadataOrderKeyFilter)&&void 0!==f?f:null,m.metadataValueStartsWith=null!==(_=n.metadataValueStartsWith)&&void 0!==_?_:null,m.order=null!==(v=n.order)&&void 0!==v?v:_bundle_7b94e16f_p.CHRONOLOGICAL,m}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeEmpty)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeFrozen)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeMetaData)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.channelNameContainsFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.channelUrlsFilter,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.customTypesFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.customTypeStartsWithFilter,!0)&&Object(_bundle_0b1520ed["y" /* X */])(groupChannel_Ge,this.membershipFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_a5a397f1_Wt,this.superChannelFilter)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_7b94e16f_p,this.order)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metadataOrderKeyFilter,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metadataKey,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.metadataValues,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,a,o,l;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new groupChannel_Ke(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token}))),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=s.sent(),a=r.as(groupChannel_Qe),o=a.channels,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,e];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_0b1520ed["V" /* aM */]),groupChannel_We=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserJoined=_bundle_0b1520ed["Gb" /* ay */],t.onUserLeft=_bundle_0b1520ed["Gb" /* ay */],t.onUserReceivedInvitation=_bundle_0b1520ed["Gb" /* ay */],t.onUserDeclinedInvitation=_bundle_0b1520ed["Gb" /* ay */],t.onChannelHidden=_bundle_0b1520ed["Gb" /* ay */],t.onUnreadMemberStatusUpdated=_bundle_0b1520ed["Gb" /* ay */],t.onUndeliveredMemberStatusUpdated=_bundle_0b1520ed["Gb" /* ay */],t.onTypingStatusUpdated=_bundle_0b1520ed["Gb" /* ay */],t.onPollUpdated=_bundle_0b1520ed["Gb" /* ay */],t.onPollVoted=_bundle_0b1520ed["Gb" /* ay */],t.onPollDeleted=_bundle_0b1520ed["Gb" /* ay */],t.onPinnedMessageUpdated=_bundle_0b1520ed["Gb" /* ay */],t}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_8b967450_t)),groupChannel_ze=function(e){function t(t){var n=this,r=t.token,a=t.limit,i=t.order,s=t.reverse,o=t.channelUrl,l=t.messageTypeFilter,u=t.scheduledStatus;return(n=e.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,n.path="".concat(_bundle_0b1520ed["Qb" /* b9 */]),n.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({token:r,limit:a,reverse:s,channel_url:o,order:i,message_type:l,status:u})),n}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),groupChannel_Be=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.scheduledMessages=[];var a=n.next,i=n.scheduled_messages;return r.token=a,r.scheduledMessages=i.map((function(e){return _bundle_dc8db3c3_Tt(t,e)})),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),groupChannel_qe=function(t){function n(e,n){var r,a,i,s,o,l=this;return(l=t.call(this,e,n)||this).channelUrl=null,l.order=null,l.reverse=!1,l.scheduledStatus=null,l.messageTypeFilter=_bundle_0b1520ed["xb" /* ap */].ALL,l.channelUrl=null!==(r=n.channelUrl)&&void 0!==r?r:null,l.order=null!==(a=n.order)&&void 0!==a?a:null,l.reverse=null!==(i=n.reverse)&&void 0!==i&&i,l.scheduledStatus=null!==(s=n.scheduledStatus)&&void 0!==s?s:null,l.messageTypeFilter=null!==(o=n.messageTypeFilter)&&void 0!==o?o:_bundle_0b1520ed["xb" /* ap */].ALL,l}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.channelUrl,!0)&&(Object(_bundle_0b1520ed["y" /* X */])(_bundle_7b94e16f_R,this.order)||null===this.order)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.reverse)&&(Object(_bundle_0b1520ed["r" /* Q */])(_bundle_dc8db3c3_ot,this.scheduledStatus)||null===this.scheduledStatus)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["xb" /* ap */],this.messageTypeFilter)},n.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new groupChannel_ze(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=s.sent(),r=n.as(groupChannel_Be),a=r.scheduledMessages,o=r.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_0b1520ed["V" /* aM */]),groupChannel_Ye=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="groupChannel",e}return Object(_bundle_0b1520ed["fc" /* c */])(n,t),n.prototype.init=function(e,n){var r=n.sdkState,a=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,u=n.cacheContext;t.prototype.init.call(this,e,{sdkState:r,dispatcher:a,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:u}),this._manager=new _bundle_a5a397f1_hs(e,{sdkState:r,cacheContext:u,dispatcher:a,sessionManager:i,requestQueue:s,logger:o})},n.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new groupChannel_Ve(this._iid,e)},n.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new _bundle_a5a397f1_rs(this._iid,e)},n.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new groupChannel_je(this._iid,e)},n.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new groupChannel_qe(this._iid,e)},n.prototype.addGroupChannelHandler=function(e,t){Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&t instanceof groupChannel_We).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this._manager.addHandler(e,t)},n.prototype.removeGroupChannelHandler=function(e){Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this._manager.removeHandler(e)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},n.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},n.prototype.getChannel=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getChannel(t)]}))}))},n.prototype.getChannelWithoutCache=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getChannelWithoutCache(t)]}))}))},n.prototype.getMyGroupChannelChangeLogsByToken=function(t,n){return void 0===n&&(n={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_rn),n),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",t)&&_bundle_a5a397f1_an(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(t,n){return void 0===n&&(n={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_rn),n),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("number",t)&&_bundle_a5a397f1_an(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getGroupChannelCount=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_on),t),Object(_bundle_0b1520ed["zc" /* w */])(_bundle_a5a397f1_un(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getGroupChannelCount(e)]}))}))},n.prototype.getUnreadItemCount=function(t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._manager.getUnreadItemCount(t)];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalUnreadChannelCount=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalUnreadMessageCount=function(t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(t)];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalScheduledMessageCount=function(t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(t)];case 1:return[2,e.sent()]}}))}))},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},n.prototype.createChannel=function(t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_nn),t),Object(_bundle_0b1520ed["zc" /* w */])(_bundle_a5a397f1_sn(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.createChannel(e)]}))}))},n.prototype.createDistinctChannelIfNotExist=function(t){return void 0===t&&(t={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_nn),t),Object(_bundle_0b1520ed["zc" /* w */])(_bundle_a5a397f1_sn(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),e&&(e.isDistinct=!0),[2,this.createChannel(e)]}))}))},n.prototype.createChannelWithUserIds=function(t,n,r,a,i,o){return void 0===n&&(n=!1),void 0===i&&(i=""),void 0===o&&(o=""),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_a5a397f1_nn),{invitedUserIds:t,isDistinct:n,name:r,data:i,customType:o}),"string"==typeof a?e.coverUrl=a:e.coverImage=a,[2,this.createChannel(e)]}))}))},n.prototype.markAsReadAll=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},n.prototype.markAsReadWithChannelUrls=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this._manager.markAsReadWithChannelUrls(t),[2]}))}))},n.prototype.markAsDelivered=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",t)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[4,this.getChannel(t)];case 1:return[4,e.sent().markAsDelivered()];case 2:return e.sent(),[2]}}))}))},n}(_bundle_0b1520ed["hb" /* aY */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useUniqId.js

let useUniqId_id = 0;
function useUniqId() {
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(() => `${useUniqId_id++}`)[0];
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelHandler.js



const useGroupChannelHandler = (sdk, hookHandler, handlerId) => {
    const handlerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(hookHandler);
    const id = useUniqId();
    const internalHandlerId = handlerId !== null && handlerId !== void 0 ? handlerId : id;
    handlerRef.current = hookHandler;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        var _a;
        const handlerMapper = (handler) => {
            const handlerKeys = Object.keys(handler);
            handlerKeys.forEach((key) => {
                // @ts-ignore
                handler[key] = (...args) => { var _a, _b; return (_b = (_a = handlerRef.current) === null || _a === void 0 ? void 0 : _a[key]) === null || _b === void 0 ? void 0 : _b.call(_a, ...args); };
            });
            return handler;
        };
        (_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.addGroupChannelHandler(internalHandlerId, handlerMapper(new groupChannel_We()));
        return () => {
            var _a;
            (_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler(internalHandlerId);
        };
    }, [sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel, internalHandlerId]);
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/usePreservedCallback.js

/**
 * Preserves a reference to the given callback function as an argument while the component is mounted.
 * Wraps the given callback in React's Ref to preserve the reference.
 * @param callback want to be preserved
 */
function usePreservedCallback(callback) {
    const callbackRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(callback);
    callbackRef.current = callback;
    // useEffect(() => {
    //   callbackRef.current = callback;
    // });
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((...args) => callbackRef.current(...args), [callbackRef]);
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelList/reducer.js
var reducer_rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

const defaultReducer = (_a, action) => {
    var draft = reducer_rest(_a, []);
    const compareByOrder = createCompareByOrder(draft.order);
    switch (action.type) {
        case 'update_refreshing': {
            draft.refreshing = action.value.status;
            break;
        }
        case 'update_initialized': {
            draft.initialized = action.value.status;
            break;
        }
        case 'update_channels': {
            getGroupChannels(action.value.channels).forEach((freshChannel) => {
                const idx = draft.groupChannels.findIndex((staleChannel) => staleChannel.url === freshChannel.url);
                if (idx > -1)
                    draft.groupChannels[idx] = freshChannel;
            });
            compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
            break;
        }
        case 'delete_channels': {
            action.value.channelUrls.forEach((url) => {
                const idx = draft.groupChannels.findIndex((c) => c.url === url);
                if (idx > -1)
                    draft.groupChannels.splice(idx, 1);
            });
            compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
            break;
        }
        case 'append_channels': {
            const groupChannels = getGroupChannels(action.value.channels);
            if (action.value.clearBeforeAction) {
                draft.groupChannels = groupChannels;
            }
            else {
                draft.groupChannels = mergeObjectArrays(draft.groupChannels, groupChannels, 'url');
            }
            compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
            break;
        }
        case 'update_order': {
            draft.order = action.value.order;
            const compareByOrder = createCompareByOrder(draft.order);
            compareByOrder && (draft.groupChannels = draft.groupChannels.sort(compareByOrder));
            break;
        }
    }
    return draft;
};
const useGroupChannelListReducer = (order) => {
    const [{ initialized, refreshing, groupChannels }, dispatch] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(defaultReducer, {
        initialized: false,
        refreshing: false,
        groupChannels: [],
        order,
    });
    const updateChannels = (channels) => {
        dispatch({ type: 'update_channels', value: { channels } });
    };
    const deleteChannels = (channelUrls) => {
        dispatch({ type: 'delete_channels', value: { channelUrls } });
    };
    const appendChannels = (channels, clearBeforeAction) => {
        dispatch({ type: 'append_channels', value: { channels, clearBeforeAction } });
    };
    const updateInitialized = (status) => {
        dispatch({ type: 'update_initialized', value: { status } });
    };
    const updateRefreshing = (status) => {
        dispatch({ type: 'update_refreshing', value: { status } });
    };
    const updateOrder = (order) => {
        dispatch({ type: 'update_order', value: { order } });
    };
    return {
        updateInitialized,
        updateRefreshing,
        updateChannels,
        deleteChannels,
        appendChannels,
        updateOrder,
        initialized,
        refreshing,
        groupChannels,
    };
};
const createCompareByOrder = (order) => {
    if (!order)
        return undefined;
    return (channel1, channel2) => {
        switch (order) {
            case 'latest_last_message': {
                if (channel1.lastMessage && channel2.lastMessage) {
                    return channel2.lastMessage.createdAt - channel1.lastMessage.createdAt;
                }
                else if (channel1.lastMessage) {
                    return -1;
                }
                else if (channel2.lastMessage) {
                    return 1;
                }
                else {
                    return channel2.createdAt - channel1.createdAt;
                }
            }
            case 'chronological': {
                return channel2.createdAt - channel1.createdAt;
            }
            case 'channel_name_alphabetical': {
                return channel1.name.localeCompare(channel2.name);
            }
            default: {
                return 0;
            }
        }
    };
};
function mergeObjectArrays(A, B, key) {
    const uniqueValues = new Set(A.map((obj) => obj[key]));
    const newArr = [...A];
    for (let i = 0; i < B.length; i++) {
        if (!uniqueValues.has(B[i][key])) {
            newArr.push(B[i]);
            uniqueValues.add(B[i][key]);
        }
    }
    return newArr;
}
function getGroupChannels(channels) {
    return channels.filter((it) => it.isGroupChannel());
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelList/index.js
var useGroupChannelList_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








const createGroupChannelListCollection = (sdk, collectionCreator) => {
    const basicParams = {
        includeEmpty: sbuConstants.collection.groupChannel.defaultIncludeEmpty,
        limit: sbuConstants.collection.groupChannel.defaultLimit,
        order: sbuConstants.collection.groupChannel.defaultOrder,
    };
    const passedCollection = collectionCreator === null || collectionCreator === void 0 ? void 0 : collectionCreator(basicParams);
    if (passedCollection)
        return passedCollection;
    return sdk.groupChannel.createGroupChannelCollection(Object.assign(Object.assign({}, basicParams), { filter: new _bundle_a5a397f1_en(basicParams) }));
};
const useGroupChannelList = (sdk, options) => {
    var _a, _b, _c;
    const deliveryReceiptEnabled = Boolean((_b = (_a = sdk.appInfo) === null || _a === void 0 ? void 0 : _a.premiumFeatureList) === null || _b === void 0 ? void 0 : _b.includes(premiumFeatures.delivery_receipt));
    const collectionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    // update reference for event handler
    const internalOptions = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(options);
    internalOptions.current = options;
    const { initialized, groupChannels, refreshing, appendChannels, deleteChannels, updateRefreshing, updateInitialized, } = useGroupChannelListReducer();
    const updateChannelsAndMarkAsDelivered = (shouldMarkAsDelivered, source, updatedChannels) => {
        var _a, _b, _c, _d;
        const channels = (_b = (_a = collectionRef.current) === null || _a === void 0 ? void 0 : _a.channels) !== null && _b !== void 0 ? _b : [];
        appendChannels(channels, true);
        if (shouldMarkAsDelivered && deliveryReceiptEnabled) {
            switch (source) {
                case _bundle_a5a397f1_n.EVENT_MESSAGE_RECEIVED:
                case _bundle_a5a397f1_n.EVENT_MESSAGE_SENT:
                case _bundle_a5a397f1_n.SYNC_CHANNEL_BACKGROUND:
                case _bundle_a5a397f1_n.SYNC_CHANNEL_CHANGELOGS:
                case undefined:
                    (_d = (_c = internalOptions.current) === null || _c === void 0 ? void 0 : _c.markAsDelivered) === null || _d === void 0 ? void 0 : _d.call(_c, updatedChannels !== null && updatedChannels !== void 0 ? updatedChannels : channels);
                    break;
            }
        }
    };
    const init = usePreservedCallback((uid) => useGroupChannelList_awaiter(void 0, void 0, void 0, function* () {
        var _d, _e, _f, _g;
        if (collectionRef.current)
            (_d = collectionRef.current) === null || _d === void 0 ? void 0 : _d.dispose();
        if (uid) {
            collectionRef.current = createGroupChannelListCollection(sdk, options === null || options === void 0 ? void 0 : options.collectionCreator);
            (_e = collectionRef.current) === null || _e === void 0 ? void 0 : _e.setGroupChannelCollectionHandler({
                onChannelsAdded: (context, channels) => {
                    var _a, _b;
                    const groupChannels = channels.filter((channel) => channel.isGroupChannel());
                    updateChannelsAndMarkAsDelivered(true, context.source, groupChannels);
                    (_b = (_a = internalOptions.current) === null || _a === void 0 ? void 0 : _a.onChannelsAdded) === null || _b === void 0 ? void 0 : _b.call(_a, groupChannels);
                },
                onChannelsUpdated: (context, channels) => {
                    var _a, _b;
                    const groupChannels = channels.filter((channel) => channel.isGroupChannel());
                    updateChannelsAndMarkAsDelivered(true, context.source, groupChannels);
                    (_b = (_a = internalOptions.current) === null || _a === void 0 ? void 0 : _a.onChannelsUpdated) === null || _b === void 0 ? void 0 : _b.call(_a, groupChannels);
                },
                onChannelsDeleted: (_, channelUrls) => {
                    var _a, _b;
                    updateChannelsAndMarkAsDelivered(false);
                    (_b = (_a = internalOptions.current) === null || _a === void 0 ? void 0 : _a.onChannelsDeleted) === null || _b === void 0 ? void 0 : _b.call(_a, channelUrls);
                },
            });
            if ((_f = collectionRef.current) === null || _f === void 0 ? void 0 : _f.hasMore) {
                yield ((_g = collectionRef.current) === null || _g === void 0 ? void 0 : _g.loadMore());
                updateChannelsAndMarkAsDelivered(true);
            }
        }
    }));
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        return () => {
            var _a;
            if (collectionRef.current)
                (_a = collectionRef.current) === null || _a === void 0 ? void 0 : _a.dispose();
        };
    }, []);
    useAsyncEffect(() => useGroupChannelList_awaiter(void 0, void 0, void 0, function* () {
        updateInitialized(false);
        if (sdk.currentUser) {
            yield init(sdk.currentUser.userId);
            updateInitialized(true);
        }
    }), [sdk, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId]);
    useGroupChannelHandler(sdk, {
        onUserBanned: (channel, user) => {
            var _a, _b, _c;
            const isMe = user.userId === ((_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
            if (isMe) {
                deleteChannels([channel.url]);
                (_c = (_b = internalOptions.current) === null || _b === void 0 ? void 0 : _b.onChannelsDeleted) === null || _c === void 0 ? void 0 : _c.call(_b, [channel.url]);
            }
            else {
                updateChannelsAndMarkAsDelivered(false);
            }
        },
    });
    const refresh = usePreservedCallback(() => useGroupChannelList_awaiter(void 0, void 0, void 0, function* () {
        if (sdk.currentUser) {
            updateRefreshing(true);
            yield init(sdk.currentUser.userId);
            updateRefreshing(false);
        }
    }));
    const loadMore = usePreservedCallback(() => useGroupChannelList_awaiter(void 0, void 0, void 0, function* () {
        var _h, _j;
        if ((_h = collectionRef.current) === null || _h === void 0 ? void 0 : _h.hasMore) {
            yield ((_j = collectionRef.current) === null || _j === void 0 ? void 0 : _j.loadMore());
            updateChannelsAndMarkAsDelivered(true);
        }
    }));
    return {
        /**
         * Initializing state, only available on first render
         * */
        initialized,
        /**
         * Get group channels state
         * */
        groupChannels,
        /**
         * Refresh, clear and reload messages from latest
         * @return {Promise<void>}
         * */
        refresh,
        /**
         * Refreshing state, status is changes when the refresh is called.
         * */
        refreshing,
        /**
         * Fetch more channels to state
         * @return {Promise<void>}
         * */
        loadMore,
    };
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/utils/channel.js
/**
 * Diff utils for channel
 * @param {BaseChannel} [a]
 * @param {BaseChannel} [b]
 * @returns {boolean}
 * */
function isDifferentChannel(a, b) {
    if (!a || !b)
        return true;
    return a.url !== b.url;
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/utils/message.js
function isSendableMessage(msg) {
    return msg !== undefined && msg !== null && 'sendingStatus' in msg;
}
function isMyMessage(msg, currentUserId = '##__USER_ID_IS_NOT_PROVIDED__##') {
    var _a;
    if (!isSendableMessage(msg))
        return false;
    return ((_a = msg.sender) === null || _a === void 0 ? void 0 : _a.userId) === currentUserId;
}
function isNewMessage(msg, currentUserId) {
    const myMessage = isMyMessage(msg, currentUserId);
    if (myMessage)
        return false;
    if (msg.isAdminMessage())
        return false;
    return msg.updatedAt === 0;
}
function getMessageUniqId(msg) {
    if ('sendingStatus' in msg) {
        if (msg.sendingStatus === 'succeeded')
            return String(msg.messageId);
        return msg.reqId;
    }
    return String(msg.messageId);
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/utils/validators.js
// NOTE: type guard fix for optional chaining - https://github.com/microsoft/TypeScript/pull/55613
function isBoolean(val) {
    return typeof val === 'boolean';
}
function isOneOf(val, values) {
    return values.includes(val);
}
function isSet(val) {
    return val instanceof Set;
}
function isNotEmptyArray(arr) {
    if (!arr || !Array.isArray(arr))
        return false;
    return arr.length !== 0;
}
function isSameType(a, b) {
    // we do this cause typeof can't differenciate object/ array/ null
    return Object.prototype.toString.call(a) === Object.prototype.toString.call(b);
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useForceUpdate.js

const useForceUpdate = () => {
    const [, updater] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => updater((prev) => prev + 1), []);
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/utils/convertors.js
function snakeToCamel(obj) {
    if (typeof obj !== 'object' || obj === null) {
        return obj;
    }
    if (Array.isArray(obj)) {
        return obj.map((item) => snakeToCamel(item));
    }
    const result = {};
    Object.keys(obj).forEach((key) => {
        const camelKey = key.replace(/_\w/g, (m) => m[1].toUpperCase());
        // @ts-ignore
        result[camelKey] = snakeToCamel(obj[key]);
    });
    return result;
}
function arrayToMapWithGetter(arr, getSelector) {
    return arr.reduce((accum, curr) => {
        const _key = getSelector(curr);
        accum[_key] = curr;
        return accum;
    }, {});
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelMessages/reducer.js
var useGroupChannelMessages_reducer_rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};




const reducer_defaultReducer = (_a, action) => {
    var draft = useGroupChannelMessages_reducer_rest(_a, []);
    switch (action.type) {
        case 'update_initialized': {
            draft['initialized'] = action.value.status;
            return draft;
        }
        case 'update_refreshing': {
            draft['refreshing'] = action.value.status;
            return draft;
        }
        case 'update_loading': {
            draft['loading'] = action.value.status;
            return draft;
        }
        case 'update_messages': {
            const userId = action.value.currentUserId;
            if (action.value.clearBeforeAction) {
                draft['messageMap'] = messagesToObject(action.value.messages);
            }
            else {
                // Filtering meaningless message updates
                const nextMessages = action.value.messages.filter((next) => {
                    var _a;
                    if (isMyMessage(next, userId)) {
                        const prev = (_a = draft['messageMap'][next.reqId]) !== null && _a !== void 0 ? _a : draft['messageMap'][next.messageId];
                        if (isMyMessage(prev, userId)) {
                            const shouldUpdate = shouldUpdateMessage(prev, next);
                            if (shouldUpdate) {
                                // Remove existing messages before update to prevent duplicate display
                                delete draft['messageMap'][prev.reqId];
                                delete draft['messageMap'][prev.messageId];
                            }
                            return shouldUpdate;
                        }
                    }
                    return true;
                });
                const obj = messagesToObject(nextMessages);
                draft['messageMap'] = Object.assign(Object.assign({}, draft['messageMap']), obj);
            }
            return draft;
        }
        case 'update_new_messages': {
            const userId = action.value.currentUserId;
            const newMessages = action.value.messages.filter((it) => isNewMessage(it, userId));
            if (action.value.clearBeforeAction) {
                draft['newMessageMap'] = arrayToMapWithGetter(newMessages, getMessageUniqId);
            }
            else {
                // Remove existing messages before update to prevent duplicate display
                const messageKeys = newMessages.map((it) => it.messageId);
                messageKeys.forEach((key) => delete draft['newMessageMap'][key]);
                draft['newMessageMap'] = Object.assign(Object.assign({}, draft['newMessageMap']), arrayToMapWithGetter(newMessages, getMessageUniqId));
            }
            return draft;
        }
        case 'delete_messages':
        case 'delete_new_messages': {
            const key = action.type === 'delete_messages' ? 'messageMap' : 'newMessageMap';
            draft[key] = Object.assign({}, draft[key]);
            action.value.messageIds.forEach((msgId) => {
                const message = draft[key][msgId];
                if (message) {
                    if (isSendableMessage(message))
                        delete draft[key][message.reqId];
                    delete draft[key][message.messageId];
                }
            });
            action.value.reqIds.forEach((reqId) => {
                const message = draft[key][reqId];
                if (message) {
                    if (isSendableMessage(message))
                        delete draft[key][message.reqId];
                    delete draft[key][message.messageId];
                }
            });
            return draft;
        }
    }
};
const messagesToObject = (messages) => {
    return messages.reduce((accum, curr) => {
        if (isSendableMessage(curr)) {
            accum[curr.reqId] = curr;
            if (curr.sendingStatus === _bundle_0b1520ed["vb" /* an */].SUCCEEDED) {
                accum[curr.messageId] = curr;
            }
        }
        else {
            accum[curr.messageId] = curr;
        }
        return accum;
    }, {});
};
const shouldUpdateMessage = (prev, next) => {
    // message data update (e.g. reactions)
    if (prev.sendingStatus === _bundle_0b1520ed["vb" /* an */].SUCCEEDED)
        return next.sendingStatus === _bundle_0b1520ed["vb" /* an */].SUCCEEDED;
    // message sending status update
    return prev.sendingStatus !== next.sendingStatus;
};
const useChannelMessagesReducer = (sortComparator = defaultMessageComparator) => {
    const [{ initialized, loading, refreshing, messageMap, newMessageMap }, dispatch] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(reducer_defaultReducer, {
        initialized: false,
        loading: true,
        refreshing: false,
        messageMap: {},
        newMessageMap: {},
    });
    const updateMessages = (messages, clearBeforeAction, currentUserId) => {
        dispatch({ type: 'update_messages', value: { messages, clearBeforeAction, currentUserId } });
    };
    const deleteMessages = (messageIds, reqIds) => {
        dispatch({ type: 'delete_messages', value: { messageIds, reqIds } });
    };
    const updateNewMessages = (messages, clearBeforeAction, currentUserId) => {
        dispatch({ type: 'update_new_messages', value: { messages, clearBeforeAction, currentUserId } });
    };
    const deleteNewMessages = (messageIds, reqIds) => {
        dispatch({ type: 'delete_new_messages', value: { messageIds, reqIds } });
    };
    const updateInitialized = (status) => {
        dispatch({ type: 'update_initialized', value: { status } });
    };
    const updateLoading = (status) => {
        dispatch({ type: 'update_loading', value: { status } });
    };
    const updateRefreshing = (status) => {
        dispatch({ type: 'update_refreshing', value: { status } });
    };
    const newMessages = Object.values(newMessageMap);
    const messages = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => Array.from(new Set(Object.values(messageMap))).sort(sortComparator), [messageMap]);
    return {
        updateInitialized,
        updateLoading,
        updateRefreshing,
        updateMessages,
        deleteMessages,
        initialized,
        loading,
        refreshing,
        messages,
        newMessages,
        updateNewMessages,
        deleteNewMessages,
    };
};
const LARGE_OFFSET = Math.floor(Number.MAX_SAFE_INTEGER / 10);
function defaultMessageComparator(a, b) {
    let aStatusOffset = 0;
    let bStatusOffset = 0;
    if (isSendableMessage(a) && a.sendingStatus !== 'succeeded')
        aStatusOffset = LARGE_OFFSET;
    if (isSendableMessage(b) && b.sendingStatus !== 'succeeded')
        bStatusOffset = LARGE_OFFSET;
    return a.createdAt + aStatusOffset - (b.createdAt + bStatusOffset);
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useGroupChannelMessages/index.js
var useGroupChannelMessages_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};











const createMessageCollection = (channel, limit, options) => {
    var _a;
    const basicParams = {
        prevResultLimit: limit.prev,
        nextResultLimit: limit.next,
        startingPoint: options === null || options === void 0 ? void 0 : options.startingPoint,
        replyType: options === null || options === void 0 ? void 0 : options.replyType,
    };
    const passedCollection = (_a = options === null || options === void 0 ? void 0 : options.collectionCreator) === null || _a === void 0 ? void 0 : _a.call(options, basicParams);
    if (passedCollection)
        return passedCollection;
    return channel.createMessageCollection(Object.assign(Object.assign({}, basicParams), { filter: new bs(basicParams) }));
};
// NOTE: In React-Native's FlatList, the bidirectional message loading doesn't work reliably, causing a bug
//  where scrolling jumps to a random position when loading a large number of messages at once.
//  Therefore, in the message search that explores past messages, a small number of messages is loaded to address this issue.
function getCollectionLimitBy(startingPoint) {
    return startingPoint < Date.now()
        ? sbuConstants.collection.message.searchLimit
        : sbuConstants.collection.message.defaultLimit;
}
/**
 * group channel messages hook
 * - Receive new messages from other users & should count new messages -> append to state(newMessages)
 * - onTopReached -> prev() -> fetch prev messages and append to state(messages)
 * - onBottomReached -> next() -> fetch next messages and append to state(messages)
 * */
const useGroupChannelMessages = (sdk, channel, options = {}) => {
    var _a, _b, _c;
    const internalOptions = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(options); // to keep reference of options in event handler
    internalOptions.current = options;
    const channelRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(channel); // to keep reference of channel in event handler
    channelRef.current = channel;
    const logger = internalOptions.current.logger;
    const initialStartingPoint = (_a = internalOptions.current.startingPoint) !== null && _a !== void 0 ? _a : Number.MAX_SAFE_INTEGER;
    const initialLimit = getCollectionLimitBy(initialStartingPoint);
    const isFetching = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])({ prev: false, next: false });
    const forceUpdate = useForceUpdate();
    const collectionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])({
        initialized: false,
        apiInitialized: false,
        instance: null,
    });
    const { initialized, loading, refreshing, messages, newMessages, updateMessages, updateNewMessages, deleteNewMessages, deleteMessages, updateInitialized, updateLoading, updateRefreshing, } = useChannelMessagesReducer(options === null || options === void 0 ? void 0 : options.sortComparator);
    const markAsReadBySource = usePreservedCallback((source) => {
        var _a, _b, _c, _d;
        if (!channelRef.current || !channelRef.current.url)
            return (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages] channel is required');
        try {
            switch (source) {
                case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_RECEIVED:
                case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_SENT_SUCCESS:
                case _bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL:
                case undefined:
                    (_c = (_b = internalOptions.current).markAsRead) === null || _c === void 0 ? void 0 : _c.call(_b, [channelRef.current]);
                    break;
            }
        }
        catch (e) {
            (_d = logger === null || logger === void 0 ? void 0 : logger.warn) === null || _d === void 0 ? void 0 : _d.call(logger, '[useGroupChannelMessages/markAsReadBySource]', e);
        }
    });
    const updateNewMessagesReceived = usePreservedCallback((source, messages) => {
        var _a, _b, _c, _d, _e;
        const incomingMessages = messages.filter((it) => { var _a; return !isMyMessage(it, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId); });
        if (incomingMessages.length > 0) {
            switch (source) {
                case _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_RECEIVED:
                case _bundle_0b1520ed["F" /* a2 */].SYNC_MESSAGE_FILL: {
                    if ((_b = (_a = internalOptions.current).shouldCountNewMessages) === null || _b === void 0 ? void 0 : _b.call(_a)) {
                        updateNewMessages(incomingMessages, false, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId);
                    }
                    (_e = (_d = internalOptions.current).onMessagesReceived) === null || _e === void 0 ? void 0 : _e.call(_d, incomingMessages);
                    break;
                }
            }
        }
    });
    const init = usePreservedCallback((startingPoint, limit) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        return new Promise((resolve) => {
            var _a, _b;
            if (!channelRef.current || !channelRef.current.url)
                return (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages] channel is required');
            if (collectionRef.current.instance)
                collectionRef.current.instance.dispose();
            markAsReadBySource();
            updateNewMessages([], true, (_b = sdk.currentUser) === null || _b === void 0 ? void 0 : _b.userId);
            const updateUnsentMessages = () => {
                var _a, _b, _c;
                const { pendingMessages, failedMessages } = (_a = collectionRef.current.instance) !== null && _a !== void 0 ? _a : {};
                if (isNotEmptyArray(pendingMessages))
                    updateMessages(pendingMessages, false, (_b = sdk.currentUser) === null || _b === void 0 ? void 0 : _b.userId);
                if (isNotEmptyArray(failedMessages))
                    updateMessages(failedMessages, false, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId);
            };
            const collectionInstance = createMessageCollection(channelRef.current, limit, Object.assign(Object.assign({}, internalOptions.current), { startingPoint }));
            collectionRef.current = { apiInitialized: false, initialized: false, instance: collectionInstance };
            collectionInstance.setMessageCollectionHandler({
                onMessagesAdded: (ctx, __, messages) => {
                    var _a;
                    markAsReadBySource(ctx.source);
                    updateNewMessagesReceived(ctx.source, messages);
                    updateMessages(messages, false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                },
                onMessagesUpdated: (ctx, __, messages) => {
                    var _a, _b, _c;
                    markAsReadBySource(ctx.source);
                    updateNewMessagesReceived(ctx.source, messages); // NOTE: admin message is not added via onMessagesAdded handler, not checked yet is this a bug.
                    updateMessages(messages, false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                    if (ctx.source === _bundle_0b1520ed["F" /* a2 */].EVENT_MESSAGE_UPDATED) {
                        (_c = (_b = internalOptions.current).onMessagesUpdated) === null || _c === void 0 ? void 0 : _c.call(_b, messages);
                    }
                },
                onMessagesDeleted: (_, __, ___, messages) => {
                    const msgIds = messages.map((it) => it.messageId);
                    const reqIds = messages.filter(isSendableMessage).map((it) => it.reqId);
                    deleteMessages(msgIds, reqIds);
                    deleteNewMessages(msgIds, reqIds);
                },
                onChannelDeleted: (_, channelUrl) => {
                    var _a, _b;
                    (_b = (_a = internalOptions.current).onChannelDeleted) === null || _b === void 0 ? void 0 : _b.call(_a, channelUrl);
                },
                onChannelUpdated: (_, channel) => {
                    var _a, _b;
                    forceUpdate();
                    (_b = (_a = internalOptions.current).onChannelUpdated) === null || _b === void 0 ? void 0 : _b.call(_a, channel);
                },
                onHugeGapDetected: () => {
                    init(Number.MAX_SAFE_INTEGER, sbuConstants.collection.message.defaultLimit);
                },
            });
            collectionInstance
                .initialize(_bundle_a5a397f1_fs.CACHE_AND_REPLACE_BY_API)
                .onCacheResult((err, messages) => {
                var _a, _b, _c;
                if (err)
                    sdk.isCacheEnabled && ((_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages/onCacheResult]', err));
                else if (messages) {
                    (_b = logger === null || logger === void 0 ? void 0 : logger.debug) === null || _b === void 0 ? void 0 : _b.call(logger, '[useGroupChannelMessages/onCacheResult]', 'message length:', messages.length);
                    updateMessages(messages, true, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId);
                    updateUnsentMessages();
                    // Note: If there are messages exchanged in the channel but no cached messages have been saved yet,
                    //  to prevent the API-retrieved messages from appearing immediately after the 'no messages' UI is displayed,
                    //  resolve only when there are messages present in the cache
                    if (messages.length > 0) {
                        collectionRef.current.initialized = true;
                        resolve();
                    }
                }
            })
                .onApiResult((err, messages) => {
                var _a, _b, _c, _d, _e;
                if (err)
                    (_a = logger === null || logger === void 0 ? void 0 : logger.warn) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages/onApiResult]', err);
                else if (messages) {
                    (_b = logger === null || logger === void 0 ? void 0 : logger.debug) === null || _b === void 0 ? void 0 : _b.call(logger, '[useGroupChannelMessages/onApiResult]', 'message length:', messages.length);
                    updateMessages(messages, true, (_c = sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId);
                    if (!internalOptions.current.startingPoint)
                        (_e = (_d = internalOptions.current).onMessagesReceived) === null || _e === void 0 ? void 0 : _e.call(_d, messages);
                    if (sdk.isCacheEnabled)
                        updateUnsentMessages();
                }
                collectionRef.current.initialized = true;
                collectionRef.current.apiInitialized = true;
                resolve();
            });
        });
    }));
    useGroupChannelHandler(sdk, {
        onUserBanned(eventChannel, bannedUser) {
            var _a, _b, _c;
            if (eventChannel.isGroupChannel() && !isDifferentChannel(eventChannel, channelRef.current)) {
                if (bannedUser.userId === ((_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId)) {
                    (_c = (_b = internalOptions.current).onCurrentUserBanned) === null || _c === void 0 ? void 0 : _c.call(_b);
                }
                else {
                    forceUpdate();
                }
            }
        },
    });
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
        const timeout = setTimeout(() => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
            if (sdk.currentUser && channelRef.current) {
                updateInitialized(false);
                updateLoading(true);
                yield init(initialStartingPoint, initialLimit);
                updateLoading(false);
                updateInitialized(true);
            }
        }));
        return () => clearTimeout(timeout);
    }, [sdk, (_b = sdk.currentUser) === null || _b === void 0 ? void 0 : _b.userId, (_c = channelRef.current) === null || _c === void 0 ? void 0 : _c.url, internalOptions.current.replyType]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        return () => {
            if (collectionRef.current.instance)
                collectionRef.current.instance.dispose();
        };
    }, []);
    const refresh = usePreservedCallback(() => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        if (sdk.currentUser && channelRef.current) {
            updateRefreshing(true);
            yield init(Number.MAX_SAFE_INTEGER, sbuConstants.collection.message.defaultLimit);
            updateRefreshing(false);
        }
    }));
    const loadPrevious = usePreservedCallback(() => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _d;
        const collection = collectionRef.current.instance;
        if ((collection === null || collection === void 0 ? void 0 : collection.hasPrevious) && !isFetching.current.prev) {
            try {
                isFetching.current.prev = true;
                const list = yield collection.loadPrevious();
                updateMessages(list, false, (_d = sdk.currentUser) === null || _d === void 0 ? void 0 : _d.userId);
            }
            catch (_e) {
                // noop
            }
            finally {
                isFetching.current.prev = false;
            }
        }
    }));
    const hasPrevious = usePreservedCallback(() => {
        const { initialized, instance } = collectionRef.current;
        if (initialized && instance) {
            return instance.hasPrevious;
        }
        else {
            return false;
        }
    });
    const loadNext = usePreservedCallback(() => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _f;
        const collection = collectionRef.current.instance;
        if ((collection === null || collection === void 0 ? void 0 : collection.hasNext) && !isFetching.current.next) {
            try {
                isFetching.current.next = true;
                const list = yield collection.loadNext();
                updateMessages(list, false, (_f = sdk.currentUser) === null || _f === void 0 ? void 0 : _f.userId);
            }
            catch (_g) {
                // noop
            }
            finally {
                isFetching.current.next = false;
            }
        }
    }));
    const hasNext = usePreservedCallback(() => {
        // When the API is not initialized, the default value of collection.hasNext is true.
        // Due to this, there is an issue with UI elements such as the scroll to bottom button appearing and disappearing.
        // To address this, we additionally check the API initialized state.
        const { initialized, apiInitialized, instance } = collectionRef.current;
        if (apiInitialized && initialized && instance) {
            return instance.hasNext;
        }
        else {
            return false;
        }
    });
    const sendUserMessage = usePreservedCallback((params, onPending) => {
        var _a;
        if (!channelRef.current || !channelRef.current.url) {
            (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        return new Promise((resolve, reject) => {
            channelRef.current
                .sendUserMessage(params)
                .onPending((pendingMessage) => {
                var _a;
                if (pendingMessage.channelUrl === channelRef.current.url) {
                    updateMessages([pendingMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
            })
                .onSucceeded((sentMessage) => {
                var _a;
                if (sentMessage.channelUrl === channelRef.current.url) {
                    updateMessages([sentMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                resolve(sentMessage);
            })
                .onFailed((err, failedMessage) => {
                var _a;
                if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
                    updateMessages([failedMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                reject(err);
            });
        });
    });
    const sendFileMessage = usePreservedCallback((params, onPending) => {
        var _a;
        if (!channelRef.current || !channelRef.current.url) {
            (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        return new Promise((resolve, reject) => {
            channelRef.current
                .sendFileMessage(params)
                .onPending((pendingMessage) => {
                var _a;
                if (pendingMessage.channelUrl === channelRef.current.url) {
                    updateMessages([pendingMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
            })
                .onSucceeded((sentMessage) => {
                var _a;
                if (sentMessage.channelUrl === channelRef.current.url) {
                    updateMessages([sentMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                resolve(sentMessage);
            })
                .onFailed((err, failedMessage) => {
                var _a;
                if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
                    updateMessages([failedMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                reject(err);
            });
        });
    });
    const sendFileMessages = usePreservedCallback((paramsList, onPending) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _h;
        if (!channelRef.current || !channelRef.current.url) {
            (_h = logger === null || logger === void 0 ? void 0 : logger.error) === null || _h === void 0 ? void 0 : _h.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        return new Promise((resolve) => {
            const messages = [];
            channelRef.current
                .sendFileMessages(paramsList)
                .onPending((pendingMessage) => {
                var _a;
                if (pendingMessage.channelUrl === channelRef.current.url) {
                    updateMessages([pendingMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
            })
                .onSucceeded((sentMessage) => {
                var _a;
                if (sentMessage.isFileMessage() && sentMessage.channelUrl === channelRef.current.url) {
                    updateMessages([sentMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                    messages.push(sentMessage);
                }
                if (messages.length === paramsList.length)
                    resolve(messages);
            })
                .onFailed((_, failedMessage) => {
                var _a;
                if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
                    updateMessages([failedMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                    messages.push(failedMessage);
                }
                else {
                    // NOTE: Since failedMessage is nullable by type, to resolve the promise, handle pushing null even when there is no failedMessage.
                    messages.push(null);
                }
                if (messages.length === paramsList.length)
                    resolve(messages);
            });
        });
    }));
    const sendMultipleFilesMessage = usePreservedCallback((params, onPending) => {
        var _a;
        if (!channelRef.current || !channelRef.current.url) {
            (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        return new Promise((resolve, reject) => {
            channelRef.current
                .sendMultipleFilesMessage(params)
                .onPending((pendingMessage) => {
                var _a;
                if (pendingMessage.channelUrl === channelRef.current.url) {
                    updateMessages([pendingMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                onPending === null || onPending === void 0 ? void 0 : onPending(pendingMessage);
            })
                .onFileUploaded(() => {
                // Just re-render to use updated message.messageParams
                forceUpdate();
            })
                .onSucceeded((sentMessage) => {
                var _a;
                if (sentMessage.channelUrl === channelRef.current.url) {
                    updateMessages([sentMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                resolve(sentMessage);
            })
                .onFailed((err, failedMessage) => {
                var _a;
                if (failedMessage && failedMessage.channelUrl === channelRef.current.url) {
                    updateMessages([failedMessage], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                }
                reject(err);
            });
        });
    });
    const updateUserMessage = usePreservedCallback((messageId, params) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _j, _k;
        if (!channelRef.current || !channelRef.current.url) {
            (_j = logger === null || logger === void 0 ? void 0 : logger.error) === null || _j === void 0 ? void 0 : _j.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        const updatedMessage = yield channelRef.current.updateUserMessage(messageId, params);
        if (updatedMessage.channelUrl === channelRef.current.url) {
            updateMessages([updatedMessage], false, (_k = sdk.currentUser) === null || _k === void 0 ? void 0 : _k.userId);
        }
        return updatedMessage;
    }));
    const updateFileMessage = usePreservedCallback((messageId, params) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _l, _m;
        if (!channelRef.current || !channelRef.current.url) {
            (_l = logger === null || logger === void 0 ? void 0 : logger.error) === null || _l === void 0 ? void 0 : _l.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        const updatedMessage = yield channelRef.current.updateFileMessage(messageId, params);
        if (updatedMessage.channelUrl === channelRef.current.url) {
            updateMessages([updatedMessage], false, (_m = sdk.currentUser) === null || _m === void 0 ? void 0 : _m.userId);
        }
        return updatedMessage;
    }));
    const resendMessage = usePreservedCallback((failedMessage) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _o;
        if (!channelRef.current || !channelRef.current.url) {
            (_o = logger === null || logger === void 0 ? void 0 : logger.error) === null || _o === void 0 ? void 0 : _o.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        return new Promise((resolve, reject) => {
            let handler = undefined;
            if (failedMessage.isUserMessage())
                handler = channelRef.current.resendMessage(failedMessage);
            if (failedMessage.isFileMessage())
                handler = channelRef.current.resendMessage(failedMessage);
            if (failedMessage.isMultipleFilesMessage())
                handler = channelRef.current.resendMessage(failedMessage);
            if (handler) {
                if ('onPending' in handler) {
                    handler.onPending((message) => {
                        var _a;
                        if (message.channelUrl === channelRef.current.url) {
                            updateMessages([message], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                        }
                    });
                }
                if ('onFileUploaded' in handler) {
                    handler.onFileUploaded(() => {
                        // Just re-render to use updated message.messageParams
                        forceUpdate();
                    });
                }
                if ('onSucceeded' in handler) {
                    handler.onSucceeded((message) => {
                        var _a;
                        if (message.channelUrl === channelRef.current.url) {
                            updateMessages([message], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                        }
                        resolve(message);
                    });
                }
                if ('onFailed' in handler) {
                    handler.onFailed((err, message) => {
                        var _a;
                        if (message && message.channelUrl === channelRef.current.url) {
                            updateMessages([message], false, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                        }
                        reject(err);
                    });
                }
            }
        });
    }));
    const deleteMessage = usePreservedCallback((message) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _p, _q;
        if (!channelRef.current || !channelRef.current.url) {
            (_p = logger === null || logger === void 0 ? void 0 : logger.error) === null || _p === void 0 ? void 0 : _p.call(logger, '[useGroupChannelMessages] channel is required');
            throw new Error('Channel is required');
        }
        if (message.sendingStatus === 'succeeded') {
            if (message.isUserMessage())
                yield channelRef.current.deleteMessage(message);
            if (message.isFileMessage())
                yield channelRef.current.deleteMessage(message);
            if (message.isMultipleFilesMessage())
                yield channelRef.current.deleteMessage(message);
        }
        else {
            try {
                yield ((_q = collectionRef.current.instance) === null || _q === void 0 ? void 0 : _q.removeFailedMessage(message.reqId));
            }
            finally {
                deleteMessages([message.messageId], [message.reqId]);
            }
        }
    }));
    const resetNewMessages = usePreservedCallback(() => {
        var _a;
        updateNewMessages([], true, (_a = sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
    });
    const resetWithStartingPoint = usePreservedCallback((startingPoint) => useGroupChannelMessages_awaiter(void 0, void 0, void 0, function* () {
        var _r;
        if (sdk.currentUser && channelRef.current) {
            const limit = getCollectionLimitBy(startingPoint);
            updateLoading(true);
            updateMessages([], true, (_r = sdk.currentUser) === null || _r === void 0 ? void 0 : _r.userId);
            yield init(startingPoint, limit);
            updateLoading(false);
        }
    }));
    return {
        /**
         * Initialized state, only available on first render
         * */
        initialized,
        /**
         * Loading state, status is changes on first mount or when the resetWithStartingPoint is called.
         * */
        loading,
        /**
         * Refreshing state, status is changes when the refresh is called.
         * */
        refreshing,
        /**
         * Get messages, this state is for render
         * For example, if a user receives a new messages while searching for an old message
         * for this case, new messages will be included here.
         * */
        messages,
        /**
         * If the `shouldCountNewMessages()` is true, only then push in the newMessages state.
         * (Return false for the `shouldCountNewMessages()` if the message scroll is the most recent; otherwise, return true.)
         *
         * A new message means a message that meets the below conditions
         * - Not admin message
         * - Not updated message
         * - Not current user's message
         * */
        newMessages,
        /**
         * Reset new message list
         * @return {void}
         * */
        resetNewMessages,
        /**
         * Reset message list and create a new collection for latest messages
         * @return {Promise<void>}
         * */
        refresh,
        /**
         * Load previous messages to state
         * @return {Promise<void>}
         * */
        loadPrevious,
        /**
         * Check if there are more previous messages to fetch
         * @return {boolean}
         * */
        hasPrevious,
        /**
         * Load next messages to state
         * @return {Promise<void>}
         * */
        loadNext,
        /**
         * Check if there are more next messages to fetch
         * @return {boolean}
         * */
        hasNext,
        /**
         * Send user message
         * @param {UserMessageCreateParams} params user message create params
         * @param {function} [onPending] pending message callback
         * @return {Promise<UserMessage>} succeeded message
         * */
        sendUserMessage,
        /**
         * Send file message
         * @param {FileMessageCreateParams} params file message create params
         * @param {function} [onPending] pending message callback
         * @return {Promise<FileMessage>} succeeded message
         * */
        sendFileMessage,
        /**
         * Send file messages
         * @param {FileMessageCreateParams[]} paramList file message create params
         * @param {function} [onPending] pending message callback for each message request
         * @return {Promise<FileMessage[]>} succeeded or failed message
         * */
        sendFileMessages,
        /**
         * Send multiple files message
         * @param {MultipleFilesMessageCreateParams} params multiple files message create params
         * @param {function} [onPending] pending message callback
         * @return {Promise<MultipleFilesMessage>} succeeded message
         * */
        sendMultipleFilesMessage,
        /**
         * Update user message
         * @param {number} messageId
         * @param {UserMessageUpdateParams} params user message update params
         * @return {Promise<UserMessage>}
         * */
        updateUserMessage,
        /**
         * Update file message
         * @param {number} messageId
         * @param {FileMessageUpdateParams} params file message update params
         * @return {Promise<FileMessage>}
         * */
        updateFileMessage,
        /**
         * Resend failed message
         * @template {UserMessage | FileMessage | MultipleFilesMessage} T
         * @param {T} failedMessage message to resend
         * @return {Promise<T>}
         * */
        resendMessage,
        /**
         * Delete a message
         * @template {UserMessage | FileMessage | MultipleFilesMessage} T
         * @param {T} message succeeded or failed message
         * @return {Promise<void>}
         * */
        deleteMessage,
        /**
         * Reset message list and create a new collection with starting point
         * @param {number} startingPoint
         * @param {function} callback
         * @return {void}
         * */
        resetWithStartingPoint,
        /**
         * Do not use this api
         * */
        _dangerous_reducer_updateMessages: updateMessages,
        /**
         * Do not use this api
         * */
        _dangerous_reducer_deleteMessages: deleteMessages,
    };
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/useIIFE.js
const useIIFE = (callback) => {
    return useIIFE_iife(callback);
};
const useIIFE_iife = (callback) => callback();

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/hooks/index.js









// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/utils/mergeObject.js

/**
 * Merges values from the subset object into the target object.
 *
 * @param target - The target object to merge into.
 * @param subset - The subset object from which values are merged into the target.
 * @returns A new object resulting from the merge operation.
 */
function mergeObject(target, subset) {
    // copy target to prevent mutation
    const object = Object.assign({}, target);
    Object.keys(subset).forEach((key) => {
        if (Object.prototype.hasOwnProperty.call(object, key) && isSameType(object[key], subset[key])) {
            if (typeof subset[key] === 'object' && !Array.isArray(subset[key])) {
                // Recursively call getConfigsByPriority only when the value of the key is Object
                object[key] = mergeObject(object[key], subset[key]);
            }
            else {
                object[key] = subset[key];
            }
        }
    });
    return object;
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/initialConfig.js
const createInitialConfig = () => ({
    common: {
        enableUsingDefaultUserProfile: false,
    },
    groupChannel: {
        channel: {
            enableMention: false,
            enableOgtag: true,
            enableReactions: true,
            enableReactionsSupergroup: false,
            enableTypingIndicator: true,
            enableVoiceMessage: false,
            input: {
                camera: {
                    enablePhoto: true,
                    enableVideo: true,
                },
                enableDocument: true,
                gallery: {
                    enablePhoto: true,
                    enableVideo: true,
                },
            },
            replyType: 'quote_reply',
            threadReplySelectType: 'thread',
            typingIndicatorTypes: new Set(['text']),
            enableFeedback: false,
            enableSuggestedReplies: false,
            showSuggestedRepliesFor: 'last_message_only',
            suggestedRepliesDirection: 'vertical',
        },
        channelList: {
            enableMessageReceiptStatus: false,
            enableTypingIndicator: false,
        },
        setting: {
            enableMessageSearch: false,
        },
    },
    openChannel: {
        channel: {
            enableOgtag: true,
            input: {
                camera: {
                    enablePhoto: true,
                    enableVideo: true,
                },
                enableDocument: true,
                gallery: {
                    enablePhoto: true,
                    enableVideo: true,
                },
            },
        },
    },
});
function deleteLocalConfigs(config) {
    // @ts-ignore
    delete config.groupChannel.channel.typingIndicatorTypes;
    // @ts-ignore
    delete config.groupChannel.channel.enableFeedback;
    // @ts-ignore
    delete config.groupChannel.channel.enableSuggestedReplies;
    // @ts-ignore
    delete config.groupChannel.channel.showSuggestedRepliesFor;
    // @ts-ignore
    delete config.groupChannel.channel.suggestedRepliesDirection;
    return config;
}
const createInitialRemoteConfig = () => {
    const config = createInitialConfig();
    return deleteLocalConfigs(config);
};
const initialConfig = createInitialConfig();
const initialRemoteConfig = createInitialRemoteConfig();

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/configManager.js
var configManager_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const MemoryStorage = {
    items: {},
    getItem(key) {
        var _a;
        return configManager_awaiter(this, void 0, void 0, function* () {
            return (_a = MemoryStorage.items[key]) !== null && _a !== void 0 ? _a : null;
        });
    },
    setItem(key, value) {
        return configManager_awaiter(this, void 0, void 0, function* () {
            MemoryStorage.items[key] = value;
        });
    },
};
class configManager_UIKitConfigManager {
    constructor(storage) {
        this.storage = storage !== null && storage !== void 0 ? storage : MemoryStorage;
    }
    init(appId) {
        this.key = `sbu@${appId}.uikitConfiguration`;
        return this.get();
    }
    get safeKey() {
        if (!this.key)
            throw new Error('Please UIKitConfigManager.init() first');
        return this.key;
    }
    update(remoteConfigPayload) {
        return configManager_awaiter(this, void 0, void 0, function* () {
            const storedConfigPayload = yield this.get();
            const mergedConfigPayload = {
                updatedAt: remoteConfigPayload.updatedAt,
                configuration: mergeObject(storedConfigPayload.configuration, remoteConfigPayload.configuration),
            };
            yield this.storage.setItem(this.safeKey, JSON.stringify(mergedConfigPayload));
            return mergedConfigPayload;
        });
    }
    get() {
        return configManager_awaiter(this, void 0, void 0, function* () {
            const initialPayload = {
                updatedAt: 0,
                configuration: initialRemoteConfig,
            };
            try {
                const storedConfig = yield this.storage.getItem(this.safeKey);
                if (storedConfig) {
                    // TODO: Validation
                    return JSON.parse(storedConfig);
                }
                else {
                    return initialPayload;
                }
            }
            catch (_a) {
                return initialPayload;
            }
        });
    }
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/updators/updateCommonConfigs.js

function updateCommonConfigs(target, local, remote) {
    var _a, _b;
    // common.enableUsingDefaultUserProfile
    if (remote.common && isBoolean((_a = remote.common) === null || _a === void 0 ? void 0 : _a.enableUsingDefaultUserProfile)) {
        target.enableUsingDefaultUserProfile = remote.common.enableUsingDefaultUserProfile;
    }
    if (local.common && isBoolean((_b = local.common) === null || _b === void 0 ? void 0 : _b.enableUsingDefaultUserProfile)) {
        target.enableUsingDefaultUserProfile = local.common.enableUsingDefaultUserProfile;
    }
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/updators/updateGroupChannelConfigs.js

function updateGroupChannelConfigs(target, local, remote) {
    // target.channel
    updateChannelConfig(target, local, remote);
    // target.channel.input
    updateChannelInputConfig(target, local, remote);
    //target.channelList
    updateChannelListConfig(target, local, remote);
    //target.setting
    updateChannelSettingConfig(target, local, remote);
}
function updateChannelConfig(target, local, remote) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78;
    // enableOgtag: boolean;
    if (((_a = remote.groupChannel) === null || _a === void 0 ? void 0 : _a.channel) && isBoolean((_c = (_b = remote.groupChannel) === null || _b === void 0 ? void 0 : _b.channel) === null || _c === void 0 ? void 0 : _c.enableOgtag)) {
        target.channel.enableOgtag = remote.groupChannel.channel.enableOgtag;
    }
    if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.channel) && isBoolean((_f = (_e = local.groupChannel) === null || _e === void 0 ? void 0 : _e.channel) === null || _f === void 0 ? void 0 : _f.enableOgtag)) {
        target.channel.enableOgtag = (_h = (_g = local.groupChannel) === null || _g === void 0 ? void 0 : _g.channel) === null || _h === void 0 ? void 0 : _h.enableOgtag;
    }
    // enableTypingIndicator: boolean;
    if (((_j = remote.groupChannel) === null || _j === void 0 ? void 0 : _j.channel) && isBoolean((_l = (_k = remote.groupChannel) === null || _k === void 0 ? void 0 : _k.channel) === null || _l === void 0 ? void 0 : _l.enableTypingIndicator)) {
        target.channel.enableTypingIndicator = (_o = (_m = remote.groupChannel) === null || _m === void 0 ? void 0 : _m.channel) === null || _o === void 0 ? void 0 : _o.enableTypingIndicator;
    }
    if (((_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channel) && isBoolean((_r = (_q = local.groupChannel) === null || _q === void 0 ? void 0 : _q.channel) === null || _r === void 0 ? void 0 : _r.enableTypingIndicator)) {
        target.channel.enableTypingIndicator = (_t = (_s = local.groupChannel) === null || _s === void 0 ? void 0 : _s.channel) === null || _t === void 0 ? void 0 : _t.enableTypingIndicator;
    }
    // enableReactions: boolean;
    if (((_u = remote.groupChannel) === null || _u === void 0 ? void 0 : _u.channel) && isBoolean((_w = (_v = remote.groupChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.enableReactions)) {
        target.channel.enableReactions = (_y = (_x = remote.groupChannel) === null || _x === void 0 ? void 0 : _x.channel) === null || _y === void 0 ? void 0 : _y.enableReactions;
    }
    if (((_z = local.groupChannel) === null || _z === void 0 ? void 0 : _z.channel) && isBoolean((_1 = (_0 = local.groupChannel) === null || _0 === void 0 ? void 0 : _0.channel) === null || _1 === void 0 ? void 0 : _1.enableReactions)) {
        target.channel.enableReactions = (_3 = (_2 = local.groupChannel) === null || _2 === void 0 ? void 0 : _2.channel) === null || _3 === void 0 ? void 0 : _3.enableReactions;
    }
    // enableReactionsSupergroup: boolean;
    if (((_4 = remote.groupChannel) === null || _4 === void 0 ? void 0 : _4.channel) && isBoolean((_6 = (_5 = remote.groupChannel) === null || _5 === void 0 ? void 0 : _5.channel) === null || _6 === void 0 ? void 0 : _6.enableReactionsSupergroup)) {
        target.channel.enableReactionsSupergroup = (_8 = (_7 = remote.groupChannel) === null || _7 === void 0 ? void 0 : _7.channel) === null || _8 === void 0 ? void 0 : _8.enableReactionsSupergroup;
    }
    if (((_9 = local.groupChannel) === null || _9 === void 0 ? void 0 : _9.channel) && isBoolean((_11 = (_10 = local.groupChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.enableReactionsSupergroup)) {
        target.channel.enableReactionsSupergroup = (_13 = (_12 = local.groupChannel) === null || _12 === void 0 ? void 0 : _12.channel) === null || _13 === void 0 ? void 0 : _13.enableReactionsSupergroup;
    }
    // enableMention: boolean;
    if (((_14 = remote.groupChannel) === null || _14 === void 0 ? void 0 : _14.channel) && isBoolean((_16 = (_15 = remote.groupChannel) === null || _15 === void 0 ? void 0 : _15.channel) === null || _16 === void 0 ? void 0 : _16.enableMention)) {
        target.channel.enableMention = (_18 = (_17 = remote.groupChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.enableMention;
    }
    if (((_19 = local.groupChannel) === null || _19 === void 0 ? void 0 : _19.channel) && isBoolean((_21 = (_20 = local.groupChannel) === null || _20 === void 0 ? void 0 : _20.channel) === null || _21 === void 0 ? void 0 : _21.enableMention)) {
        target.channel.enableMention = (_23 = (_22 = local.groupChannel) === null || _22 === void 0 ? void 0 : _22.channel) === null || _23 === void 0 ? void 0 : _23.enableMention;
    }
    // replyType: 'none' | 'quote_reply' | 'thread';
    if (((_24 = remote.groupChannel) === null || _24 === void 0 ? void 0 : _24.channel) &&
        isOneOf((_26 = (_25 = remote.groupChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.replyType, ['none', 'quote_reply', 'thread'])) {
        target.channel.replyType = (_28 = (_27 = remote.groupChannel) === null || _27 === void 0 ? void 0 : _27.channel) === null || _28 === void 0 ? void 0 : _28.replyType;
    }
    if (((_29 = local.groupChannel) === null || _29 === void 0 ? void 0 : _29.channel) &&
        isOneOf((_31 = (_30 = local.groupChannel) === null || _30 === void 0 ? void 0 : _30.channel) === null || _31 === void 0 ? void 0 : _31.replyType, ['none', 'quote_reply', 'thread'])) {
        target.channel.replyType = (_33 = (_32 = local.groupChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.replyType;
    }
    // threadReplySelectType: 'thread' | 'parent';
    if (((_34 = remote.groupChannel) === null || _34 === void 0 ? void 0 : _34.channel) &&
        isOneOf((_36 = (_35 = remote.groupChannel) === null || _35 === void 0 ? void 0 : _35.channel) === null || _36 === void 0 ? void 0 : _36.threadReplySelectType, ['thread', 'parent'])) {
        target.channel.threadReplySelectType = (_38 = (_37 = remote.groupChannel) === null || _37 === void 0 ? void 0 : _37.channel) === null || _38 === void 0 ? void 0 : _38.threadReplySelectType;
    }
    if (((_39 = local.groupChannel) === null || _39 === void 0 ? void 0 : _39.channel) &&
        isOneOf((_41 = (_40 = local.groupChannel) === null || _40 === void 0 ? void 0 : _40.channel) === null || _41 === void 0 ? void 0 : _41.threadReplySelectType, ['thread', 'parent'])) {
        target.channel.threadReplySelectType = (_43 = (_42 = local.groupChannel) === null || _42 === void 0 ? void 0 : _42.channel) === null || _43 === void 0 ? void 0 : _43.threadReplySelectType;
    }
    // enableVoiceMessage: boolean;
    if (((_44 = remote.groupChannel) === null || _44 === void 0 ? void 0 : _44.channel) && isBoolean((_46 = (_45 = remote.groupChannel) === null || _45 === void 0 ? void 0 : _45.channel) === null || _46 === void 0 ? void 0 : _46.enableVoiceMessage)) {
        target.channel.enableVoiceMessage = (_48 = (_47 = remote.groupChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.enableVoiceMessage;
    }
    if (((_49 = local.groupChannel) === null || _49 === void 0 ? void 0 : _49.channel) && isBoolean((_51 = (_50 = local.groupChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.enableVoiceMessage)) {
        target.channel.enableVoiceMessage = (_53 = (_52 = local.groupChannel) === null || _52 === void 0 ? void 0 : _52.channel) === null || _53 === void 0 ? void 0 : _53.enableVoiceMessage;
    }
    // typingIndicatorTypes: Set<TypingIndicatorType>;
    // NOTE: 2023.11.03 currently, no remote configuration for this
    // if (remote.groupChannel?.channel && isArray(remote.groupChannel?.channel?.typingIndicatorTypes)) {
    //   target.channel.typingIndicatorTypes = toSet(remote.groupChannel?.channel?.typingIndicatorTypes);
    // }
    if (((_54 = local.groupChannel) === null || _54 === void 0 ? void 0 : _54.channel) && isSet((_56 = (_55 = local.groupChannel) === null || _55 === void 0 ? void 0 : _55.channel) === null || _56 === void 0 ? void 0 : _56.typingIndicatorTypes)) {
        target.channel.typingIndicatorTypes = (_58 = (_57 = local.groupChannel) === null || _57 === void 0 ? void 0 : _57.channel) === null || _58 === void 0 ? void 0 : _58.typingIndicatorTypes;
    }
    // enableFeedback: boolean;
    // NOTE: 2024.01.12 currently, no remote configuration for this
    // if (remote.groupChannel?.channel && isBoolean(remote.groupChannel?.channel?.enableFeedback)) {
    //   target.channel.enableFeedback = remote.groupChannel?.channel?.enableFeedback;
    // }
    if (((_59 = local.groupChannel) === null || _59 === void 0 ? void 0 : _59.channel) && isBoolean((_61 = (_60 = local.groupChannel) === null || _60 === void 0 ? void 0 : _60.channel) === null || _61 === void 0 ? void 0 : _61.enableFeedback)) {
        target.channel.enableFeedback = (_63 = (_62 = local.groupChannel) === null || _62 === void 0 ? void 0 : _62.channel) === null || _63 === void 0 ? void 0 : _63.enableFeedback;
    }
    // enableSuggestedReplies: boolean;
    // NOTE: 2024.02.01 currently, no remote configuration for this
    // if (remote.groupChannel?.channel && isBoolean(remote.groupChannel?.channel?.enableSuggestedReplies)) {
    //   target.channel.enableSuggestedReplies = remote.groupChannel?.channel?.enableSuggestedReplies;
    // }
    if (((_64 = local.groupChannel) === null || _64 === void 0 ? void 0 : _64.channel) && isBoolean((_66 = (_65 = local.groupChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.enableSuggestedReplies)) {
        target.channel.enableSuggestedReplies = (_68 = (_67 = local.groupChannel) === null || _67 === void 0 ? void 0 : _67.channel) === null || _68 === void 0 ? void 0 : _68.enableSuggestedReplies;
    }
    // showSuggestedRepliesFor: 'all_messages' | 'last_message_only';
    // NOTE: 2024.02.25 currently, no remote configuration for this
    // if (
    //   remote.groupChannel?.channel &&
    //   isOneOf(remote.groupChannel?.channel?.showSuggestedRepliesFor, ['all_messages', 'last_message_only'])
    // ) {
    //   target.channel.showSuggestedRepliesFor = remote.groupChannel?.channel?.showSuggestedRepliesFor;
    // }
    if (((_69 = local.groupChannel) === null || _69 === void 0 ? void 0 : _69.channel) &&
        isOneOf((_71 = (_70 = local.groupChannel) === null || _70 === void 0 ? void 0 : _70.channel) === null || _71 === void 0 ? void 0 : _71.showSuggestedRepliesFor, ['all_messages', 'last_message_only'])) {
        target.channel.showSuggestedRepliesFor = (_73 = (_72 = local.groupChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.showSuggestedRepliesFor;
    }
    // suggestedRepliesDirection: 'vertical' | 'horizontal';
    // NOTE: 2024.04.22 currently, no remote configuration for this
    // if (
    //   remote.groupChannel?.channel &&
    //   isOneOf(remote.groupChannel?.channel?.suggestedRepliesDirection, ['vertical', 'horizontal'])
    // ) {
    //   target.channel.suggestedRepliesDirection = remote.groupChannel?.channel?.suggestedRepliesDirection;
    // }
    if (((_74 = local.groupChannel) === null || _74 === void 0 ? void 0 : _74.channel) &&
        isOneOf((_76 = (_75 = local.groupChannel) === null || _75 === void 0 ? void 0 : _75.channel) === null || _76 === void 0 ? void 0 : _76.suggestedRepliesDirection, ['vertical', 'horizontal'])) {
        target.channel.suggestedRepliesDirection = (_78 = (_77 = local.groupChannel) === null || _77 === void 0 ? void 0 : _77.channel) === null || _78 === void 0 ? void 0 : _78.suggestedRepliesDirection;
    }
}
function updateChannelInputConfig(target, local, remote) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79;
    // input.enableDocument: boolean;
    if (((_b = (_a = remote.groupChannel) === null || _a === void 0 ? void 0 : _a.channel) === null || _b === void 0 ? void 0 : _b.input) && isBoolean((_e = (_d = (_c = remote.groupChannel) === null || _c === void 0 ? void 0 : _c.channel) === null || _d === void 0 ? void 0 : _d.input) === null || _e === void 0 ? void 0 : _e.enableDocument)) {
        target.channel.input.enableDocument = (_h = (_g = (_f = remote.groupChannel) === null || _f === void 0 ? void 0 : _f.channel) === null || _g === void 0 ? void 0 : _g.input) === null || _h === void 0 ? void 0 : _h.enableDocument;
    }
    if (((_k = (_j = local.groupChannel) === null || _j === void 0 ? void 0 : _j.channel) === null || _k === void 0 ? void 0 : _k.input) && isBoolean((_o = (_m = (_l = local.groupChannel) === null || _l === void 0 ? void 0 : _l.channel) === null || _m === void 0 ? void 0 : _m.input) === null || _o === void 0 ? void 0 : _o.enableDocument)) {
        target.channel.input.enableDocument = (_r = (_q = (_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channel) === null || _q === void 0 ? void 0 : _q.input) === null || _r === void 0 ? void 0 : _r.enableDocument;
    }
    // input.camera.enablePhoto: boolean;
    if (((_u = (_t = (_s = remote.groupChannel) === null || _s === void 0 ? void 0 : _s.channel) === null || _t === void 0 ? void 0 : _t.input) === null || _u === void 0 ? void 0 : _u.camera) &&
        isBoolean((_y = (_x = (_w = (_v = remote.groupChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.input) === null || _x === void 0 ? void 0 : _x.camera) === null || _y === void 0 ? void 0 : _y.enablePhoto)) {
        target.channel.input.camera.enablePhoto = (_2 = (_1 = (_0 = (_z = remote.groupChannel) === null || _z === void 0 ? void 0 : _z.channel) === null || _0 === void 0 ? void 0 : _0.input) === null || _1 === void 0 ? void 0 : _1.camera) === null || _2 === void 0 ? void 0 : _2.enablePhoto;
    }
    if (((_5 = (_4 = (_3 = local.groupChannel) === null || _3 === void 0 ? void 0 : _3.channel) === null || _4 === void 0 ? void 0 : _4.input) === null || _5 === void 0 ? void 0 : _5.camera) &&
        isBoolean((_9 = (_8 = (_7 = (_6 = local.groupChannel) === null || _6 === void 0 ? void 0 : _6.channel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.camera) === null || _9 === void 0 ? void 0 : _9.enablePhoto)) {
        target.channel.input.camera.enablePhoto = (_13 = (_12 = (_11 = (_10 = local.groupChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.input) === null || _12 === void 0 ? void 0 : _12.camera) === null || _13 === void 0 ? void 0 : _13.enablePhoto;
    }
    // input.camera.enableVideo: boolean;
    if (((_16 = (_15 = (_14 = remote.groupChannel) === null || _14 === void 0 ? void 0 : _14.channel) === null || _15 === void 0 ? void 0 : _15.input) === null || _16 === void 0 ? void 0 : _16.camera) &&
        isBoolean((_20 = (_19 = (_18 = (_17 = remote.groupChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.input) === null || _19 === void 0 ? void 0 : _19.camera) === null || _20 === void 0 ? void 0 : _20.enableVideo)) {
        target.channel.input.camera.enableVideo = (_24 = (_23 = (_22 = (_21 = remote.groupChannel) === null || _21 === void 0 ? void 0 : _21.channel) === null || _22 === void 0 ? void 0 : _22.input) === null || _23 === void 0 ? void 0 : _23.camera) === null || _24 === void 0 ? void 0 : _24.enableVideo;
    }
    if (((_27 = (_26 = (_25 = local.groupChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.input) === null || _27 === void 0 ? void 0 : _27.camera) &&
        isBoolean((_31 = (_30 = (_29 = (_28 = local.groupChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.input) === null || _30 === void 0 ? void 0 : _30.camera) === null || _31 === void 0 ? void 0 : _31.enableVideo)) {
        target.channel.input.camera.enableVideo = (_35 = (_34 = (_33 = (_32 = local.groupChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.input) === null || _34 === void 0 ? void 0 : _34.camera) === null || _35 === void 0 ? void 0 : _35.enableVideo;
    }
    // input.gallery.enablePhoto: boolean;
    if (((_38 = (_37 = (_36 = remote.groupChannel) === null || _36 === void 0 ? void 0 : _36.channel) === null || _37 === void 0 ? void 0 : _37.input) === null || _38 === void 0 ? void 0 : _38.gallery) &&
        isBoolean((_42 = (_41 = (_40 = (_39 = remote.groupChannel) === null || _39 === void 0 ? void 0 : _39.channel) === null || _40 === void 0 ? void 0 : _40.input) === null || _41 === void 0 ? void 0 : _41.gallery) === null || _42 === void 0 ? void 0 : _42.enablePhoto)) {
        target.channel.input.gallery.enablePhoto = (_46 = (_45 = (_44 = (_43 = remote.groupChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.input) === null || _45 === void 0 ? void 0 : _45.gallery) === null || _46 === void 0 ? void 0 : _46.enablePhoto;
    }
    if (((_49 = (_48 = (_47 = local.groupChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.input) === null || _49 === void 0 ? void 0 : _49.gallery) &&
        isBoolean((_53 = (_52 = (_51 = (_50 = local.groupChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.input) === null || _52 === void 0 ? void 0 : _52.gallery) === null || _53 === void 0 ? void 0 : _53.enablePhoto)) {
        target.channel.input.gallery.enablePhoto = (_57 = (_56 = (_55 = (_54 = local.groupChannel) === null || _54 === void 0 ? void 0 : _54.channel) === null || _55 === void 0 ? void 0 : _55.input) === null || _56 === void 0 ? void 0 : _56.gallery) === null || _57 === void 0 ? void 0 : _57.enablePhoto;
    }
    // input.gallery.enableVideo: boolean;
    if (((_60 = (_59 = (_58 = remote.groupChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.input) === null || _60 === void 0 ? void 0 : _60.gallery) &&
        isBoolean((_64 = (_63 = (_62 = (_61 = remote.groupChannel) === null || _61 === void 0 ? void 0 : _61.channel) === null || _62 === void 0 ? void 0 : _62.input) === null || _63 === void 0 ? void 0 : _63.gallery) === null || _64 === void 0 ? void 0 : _64.enableVideo)) {
        target.channel.input.gallery.enableVideo = (_68 = (_67 = (_66 = (_65 = remote.groupChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.input) === null || _67 === void 0 ? void 0 : _67.gallery) === null || _68 === void 0 ? void 0 : _68.enableVideo;
    }
    if (((_71 = (_70 = (_69 = local.groupChannel) === null || _69 === void 0 ? void 0 : _69.channel) === null || _70 === void 0 ? void 0 : _70.input) === null || _71 === void 0 ? void 0 : _71.gallery) &&
        isBoolean((_75 = (_74 = (_73 = (_72 = local.groupChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.input) === null || _74 === void 0 ? void 0 : _74.gallery) === null || _75 === void 0 ? void 0 : _75.enableVideo)) {
        target.channel.input.gallery.enableVideo = (_79 = (_78 = (_77 = (_76 = local.groupChannel) === null || _76 === void 0 ? void 0 : _76.channel) === null || _77 === void 0 ? void 0 : _77.input) === null || _78 === void 0 ? void 0 : _78.gallery) === null || _79 === void 0 ? void 0 : _79.enableVideo;
    }
}
function updateChannelListConfig(target, local, remote) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;
    // enableTypingIndicator: boolean;
    if (((_a = remote.groupChannel) === null || _a === void 0 ? void 0 : _a.channelList) && isBoolean((_c = (_b = remote.groupChannel) === null || _b === void 0 ? void 0 : _b.channelList) === null || _c === void 0 ? void 0 : _c.enableTypingIndicator)) {
        target.channelList.enableTypingIndicator = remote.groupChannel.channelList.enableTypingIndicator;
    }
    if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.channelList) && isBoolean((_f = (_e = local.groupChannel) === null || _e === void 0 ? void 0 : _e.channelList) === null || _f === void 0 ? void 0 : _f.enableTypingIndicator)) {
        target.channelList.enableTypingIndicator = (_h = (_g = local.groupChannel) === null || _g === void 0 ? void 0 : _g.channelList) === null || _h === void 0 ? void 0 : _h.enableTypingIndicator;
    }
    // enableMessageReceiptStatus: boolean;
    if (((_j = remote.groupChannel) === null || _j === void 0 ? void 0 : _j.channelList) && isBoolean((_l = (_k = remote.groupChannel) === null || _k === void 0 ? void 0 : _k.channelList) === null || _l === void 0 ? void 0 : _l.enableMessageReceiptStatus)) {
        target.channelList.enableMessageReceiptStatus = (_o = (_m = remote.groupChannel) === null || _m === void 0 ? void 0 : _m.channelList) === null || _o === void 0 ? void 0 : _o.enableMessageReceiptStatus;
    }
    if (((_p = local.groupChannel) === null || _p === void 0 ? void 0 : _p.channelList) && isBoolean((_r = (_q = local.groupChannel) === null || _q === void 0 ? void 0 : _q.channelList) === null || _r === void 0 ? void 0 : _r.enableMessageReceiptStatus)) {
        target.channelList.enableMessageReceiptStatus = (_t = (_s = local.groupChannel) === null || _s === void 0 ? void 0 : _s.channelList) === null || _t === void 0 ? void 0 : _t.enableMessageReceiptStatus;
    }
}
function updateChannelSettingConfig(target, local, remote) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    // enableMessageSearch: boolean;
    if (((_a = remote.groupChannel) === null || _a === void 0 ? void 0 : _a.setting) && isBoolean((_c = (_b = remote.groupChannel) === null || _b === void 0 ? void 0 : _b.setting) === null || _c === void 0 ? void 0 : _c.enableMessageSearch)) {
        target.setting.enableMessageSearch = remote.groupChannel.setting.enableMessageSearch;
    }
    if (((_d = local.groupChannel) === null || _d === void 0 ? void 0 : _d.setting) && isBoolean((_f = (_e = local.groupChannel) === null || _e === void 0 ? void 0 : _e.setting) === null || _f === void 0 ? void 0 : _f.enableMessageSearch)) {
        target.setting.enableMessageSearch = (_h = (_g = local.groupChannel) === null || _g === void 0 ? void 0 : _g.setting) === null || _h === void 0 ? void 0 : _h.enableMessageSearch;
    }
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/updators/updateOpenChannelConfigs.js

function updateOpenChannelConfigs(target, local, remote) {
    // target.channel
    updateOpenChannelConfigs_updateChannelConfig(target, local, remote);
    // target.channel.input
    updateOpenChannelConfigs_updateChannelInputConfig(target, local, remote);
}
function updateOpenChannelConfigs_updateChannelConfig(target, local, remote) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    // enableOgtag: boolean;
    if (((_a = remote.openChannel) === null || _a === void 0 ? void 0 : _a.channel) && isBoolean((_c = (_b = remote.openChannel) === null || _b === void 0 ? void 0 : _b.channel) === null || _c === void 0 ? void 0 : _c.enableOgtag)) {
        target.channel.enableOgtag = remote.openChannel.channel.enableOgtag;
    }
    if (((_d = local.openChannel) === null || _d === void 0 ? void 0 : _d.channel) && isBoolean((_f = (_e = local.openChannel) === null || _e === void 0 ? void 0 : _e.channel) === null || _f === void 0 ? void 0 : _f.enableOgtag)) {
        target.channel.enableOgtag = (_h = (_g = local.openChannel) === null || _g === void 0 ? void 0 : _g.channel) === null || _h === void 0 ? void 0 : _h.enableOgtag;
    }
}
function updateOpenChannelConfigs_updateChannelInputConfig(target, local, remote) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, _60, _61, _62, _63, _64, _65, _66, _67, _68, _69, _70, _71, _72, _73, _74, _75, _76, _77, _78, _79;
    // input.enableDocument: boolean;
    if (((_b = (_a = remote.openChannel) === null || _a === void 0 ? void 0 : _a.channel) === null || _b === void 0 ? void 0 : _b.input) && isBoolean((_e = (_d = (_c = remote.openChannel) === null || _c === void 0 ? void 0 : _c.channel) === null || _d === void 0 ? void 0 : _d.input) === null || _e === void 0 ? void 0 : _e.enableDocument)) {
        target.channel.input.enableDocument = (_h = (_g = (_f = remote.openChannel) === null || _f === void 0 ? void 0 : _f.channel) === null || _g === void 0 ? void 0 : _g.input) === null || _h === void 0 ? void 0 : _h.enableDocument;
    }
    if (((_k = (_j = local.openChannel) === null || _j === void 0 ? void 0 : _j.channel) === null || _k === void 0 ? void 0 : _k.input) && isBoolean((_o = (_m = (_l = local.openChannel) === null || _l === void 0 ? void 0 : _l.channel) === null || _m === void 0 ? void 0 : _m.input) === null || _o === void 0 ? void 0 : _o.enableDocument)) {
        target.channel.input.enableDocument = (_r = (_q = (_p = local.openChannel) === null || _p === void 0 ? void 0 : _p.channel) === null || _q === void 0 ? void 0 : _q.input) === null || _r === void 0 ? void 0 : _r.enableDocument;
    }
    // input.camera.enablePhoto: boolean;
    if (((_u = (_t = (_s = remote.openChannel) === null || _s === void 0 ? void 0 : _s.channel) === null || _t === void 0 ? void 0 : _t.input) === null || _u === void 0 ? void 0 : _u.camera) &&
        isBoolean((_y = (_x = (_w = (_v = remote.openChannel) === null || _v === void 0 ? void 0 : _v.channel) === null || _w === void 0 ? void 0 : _w.input) === null || _x === void 0 ? void 0 : _x.camera) === null || _y === void 0 ? void 0 : _y.enablePhoto)) {
        target.channel.input.camera.enablePhoto = (_2 = (_1 = (_0 = (_z = remote.openChannel) === null || _z === void 0 ? void 0 : _z.channel) === null || _0 === void 0 ? void 0 : _0.input) === null || _1 === void 0 ? void 0 : _1.camera) === null || _2 === void 0 ? void 0 : _2.enablePhoto;
    }
    if (((_5 = (_4 = (_3 = local.openChannel) === null || _3 === void 0 ? void 0 : _3.channel) === null || _4 === void 0 ? void 0 : _4.input) === null || _5 === void 0 ? void 0 : _5.camera) && isBoolean((_9 = (_8 = (_7 = (_6 = local.openChannel) === null || _6 === void 0 ? void 0 : _6.channel) === null || _7 === void 0 ? void 0 : _7.input) === null || _8 === void 0 ? void 0 : _8.camera) === null || _9 === void 0 ? void 0 : _9.enablePhoto)) {
        target.channel.input.camera.enablePhoto = (_13 = (_12 = (_11 = (_10 = local.openChannel) === null || _10 === void 0 ? void 0 : _10.channel) === null || _11 === void 0 ? void 0 : _11.input) === null || _12 === void 0 ? void 0 : _12.camera) === null || _13 === void 0 ? void 0 : _13.enablePhoto;
    }
    // input.camera.enableVideo: boolean;
    if (((_16 = (_15 = (_14 = remote.openChannel) === null || _14 === void 0 ? void 0 : _14.channel) === null || _15 === void 0 ? void 0 : _15.input) === null || _16 === void 0 ? void 0 : _16.camera) &&
        isBoolean((_20 = (_19 = (_18 = (_17 = remote.openChannel) === null || _17 === void 0 ? void 0 : _17.channel) === null || _18 === void 0 ? void 0 : _18.input) === null || _19 === void 0 ? void 0 : _19.camera) === null || _20 === void 0 ? void 0 : _20.enableVideo)) {
        target.channel.input.camera.enableVideo = (_24 = (_23 = (_22 = (_21 = remote.openChannel) === null || _21 === void 0 ? void 0 : _21.channel) === null || _22 === void 0 ? void 0 : _22.input) === null || _23 === void 0 ? void 0 : _23.camera) === null || _24 === void 0 ? void 0 : _24.enableVideo;
    }
    if (((_27 = (_26 = (_25 = local.openChannel) === null || _25 === void 0 ? void 0 : _25.channel) === null || _26 === void 0 ? void 0 : _26.input) === null || _27 === void 0 ? void 0 : _27.camera) && isBoolean((_31 = (_30 = (_29 = (_28 = local.openChannel) === null || _28 === void 0 ? void 0 : _28.channel) === null || _29 === void 0 ? void 0 : _29.input) === null || _30 === void 0 ? void 0 : _30.camera) === null || _31 === void 0 ? void 0 : _31.enableVideo)) {
        target.channel.input.camera.enableVideo = (_35 = (_34 = (_33 = (_32 = local.openChannel) === null || _32 === void 0 ? void 0 : _32.channel) === null || _33 === void 0 ? void 0 : _33.input) === null || _34 === void 0 ? void 0 : _34.camera) === null || _35 === void 0 ? void 0 : _35.enableVideo;
    }
    // input.gallery.enablePhoto: boolean;
    if (((_38 = (_37 = (_36 = remote.openChannel) === null || _36 === void 0 ? void 0 : _36.channel) === null || _37 === void 0 ? void 0 : _37.input) === null || _38 === void 0 ? void 0 : _38.gallery) &&
        isBoolean((_42 = (_41 = (_40 = (_39 = remote.openChannel) === null || _39 === void 0 ? void 0 : _39.channel) === null || _40 === void 0 ? void 0 : _40.input) === null || _41 === void 0 ? void 0 : _41.gallery) === null || _42 === void 0 ? void 0 : _42.enablePhoto)) {
        target.channel.input.gallery.enablePhoto = (_46 = (_45 = (_44 = (_43 = remote.openChannel) === null || _43 === void 0 ? void 0 : _43.channel) === null || _44 === void 0 ? void 0 : _44.input) === null || _45 === void 0 ? void 0 : _45.gallery) === null || _46 === void 0 ? void 0 : _46.enablePhoto;
    }
    if (((_49 = (_48 = (_47 = local.openChannel) === null || _47 === void 0 ? void 0 : _47.channel) === null || _48 === void 0 ? void 0 : _48.input) === null || _49 === void 0 ? void 0 : _49.gallery) &&
        isBoolean((_53 = (_52 = (_51 = (_50 = local.openChannel) === null || _50 === void 0 ? void 0 : _50.channel) === null || _51 === void 0 ? void 0 : _51.input) === null || _52 === void 0 ? void 0 : _52.gallery) === null || _53 === void 0 ? void 0 : _53.enablePhoto)) {
        target.channel.input.gallery.enablePhoto = (_57 = (_56 = (_55 = (_54 = local.openChannel) === null || _54 === void 0 ? void 0 : _54.channel) === null || _55 === void 0 ? void 0 : _55.input) === null || _56 === void 0 ? void 0 : _56.gallery) === null || _57 === void 0 ? void 0 : _57.enablePhoto;
    }
    // input.gallery.enableVideo: boolean;
    if (((_60 = (_59 = (_58 = remote.openChannel) === null || _58 === void 0 ? void 0 : _58.channel) === null || _59 === void 0 ? void 0 : _59.input) === null || _60 === void 0 ? void 0 : _60.gallery) &&
        isBoolean((_64 = (_63 = (_62 = (_61 = remote.openChannel) === null || _61 === void 0 ? void 0 : _61.channel) === null || _62 === void 0 ? void 0 : _62.input) === null || _63 === void 0 ? void 0 : _63.gallery) === null || _64 === void 0 ? void 0 : _64.enableVideo)) {
        target.channel.input.gallery.enableVideo = (_68 = (_67 = (_66 = (_65 = remote.openChannel) === null || _65 === void 0 ? void 0 : _65.channel) === null || _66 === void 0 ? void 0 : _66.input) === null || _67 === void 0 ? void 0 : _67.gallery) === null || _68 === void 0 ? void 0 : _68.enableVideo;
    }
    if (((_71 = (_70 = (_69 = local.openChannel) === null || _69 === void 0 ? void 0 : _69.channel) === null || _70 === void 0 ? void 0 : _70.input) === null || _71 === void 0 ? void 0 : _71.gallery) &&
        isBoolean((_75 = (_74 = (_73 = (_72 = local.openChannel) === null || _72 === void 0 ? void 0 : _72.channel) === null || _73 === void 0 ? void 0 : _73.input) === null || _74 === void 0 ? void 0 : _74.gallery) === null || _75 === void 0 ? void 0 : _75.enableVideo)) {
        target.channel.input.gallery.enableVideo = (_79 = (_78 = (_77 = (_76 = local.openChannel) === null || _76 === void 0 ? void 0 : _76.channel) === null || _77 === void 0 ? void 0 : _77.input) === null || _78 === void 0 ? void 0 : _78.gallery) === null || _79 === void 0 ? void 0 : _79.enableVideo;
    }
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/utils.js




/**
 * @param localConfigs Set directly in code level. It has higher priority than remote ones
 * @param remoteConfigs Set by Feature Config setting in Dashboard
 * @returns SBUConfig
 */
function getConfigsByPriority(localConfigs, remoteConfigs) {
    const prioritizedConfigs = createInitialConfig();
    // configs.common
    updateCommonConfigs(prioritizedConfigs.common, localConfigs, remoteConfigs);
    // configs.groupChannel.channel
    updateGroupChannelConfigs(prioritizedConfigs.groupChannel, localConfigs, remoteConfigs);
    // configs.groupChannel.channelList
    // configs.openChannel
    updateOpenChannelConfigs(prioritizedConfigs.openChannel, localConfigs, remoteConfigs);
    return prioritizedConfigs;
}
/**
 * @param json UIKitConfiguration's json
 * @returns boolean
 * */
function isRawSBUConfigPayload(json) {
    return typeof json === 'object' && 'configuration' in json && 'updated_at' in json;
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/context.js
var context_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







function getApplicationAttributes(sdk) {
    var _a, _b;
    return (_b = (_a = sdk.appInfo) === null || _a === void 0 ? void 0 : _a.applicationAttributes) !== null && _b !== void 0 ? _b : [];
}
const UIKitConfigContext = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    initDashboardConfigs: () => Promise.resolve(),
    configs: initialConfig,
    configsWithAppAttr: () => initialConfig,
});
const UIKitConfigProvider = ({ storage, children, localConfigs = {} }) => {
    // Set by Feature Config setting in Dashboard
    const [remoteConfigs, setRemoteConfigs] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(createInitialRemoteConfig);
    const [manager] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(() => new configManager_UIKitConfigManager(storage));
    const initDashboardConfigs = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((sdk) => context_awaiter(void 0, void 0, void 0, function* () {
        // Compare the sdk uikitConfig's lastUpdatedAt <-> stored one
        const storedConfigPayload = yield manager.init(sdk.appId);
        if (sdk.appInfo && sdk.appInfo.uikitConfigInfo.lastUpdatedAt === storedConfigPayload.updatedAt) {
            setRemoteConfigs(storedConfigPayload.configuration);
        }
        else {
            try {
                const response = yield sdk.getUIKitConfiguration();
                if (isRawSBUConfigPayload(response.json)) {
                    const remoteConfigPayload = snakeToCamel(response.json);
                    const updatedConfigPayload = yield manager.update(remoteConfigPayload);
                    setRemoteConfigs(updatedConfigPayload.configuration);
                }
            }
            catch (_a) {
                setRemoteConfigs(storedConfigPayload.configuration);
            }
        }
    }), [manager]);
    const configs = getConfigsByPriority(localConfigs, remoteConfigs);
    const configsWithAppAttr = usePreservedCallback((sdk) => ({
        groupChannel: {
            channel: {
                get enableReactions() {
                    return (configs.groupChannel.channel.enableReactions &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.reactions));
                },
                get enableReactionsSupergroup() {
                    return (configs.groupChannel.channel.enableReactionsSupergroup &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.reactions));
                },
                get enableOgtag() {
                    return (configs.groupChannel.channel.enableOgtag &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag));
                },
            },
            setting: {
                get enableMessageSearch() {
                    return (configs.groupChannel.setting.enableMessageSearch &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.message_search_v3));
                },
            },
        },
        openChannel: {
            channel: {
                get enableOgtag() {
                    return (configs.openChannel.channel.enableOgtag &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag));
                },
            },
        },
    }));
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UIKitConfigContext.Provider, { value: { initDashboardConfigs, configs, configsWithAppAttr } }, children));
};
const useUIKitConfig = () => Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UIKitConfigContext);


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/exports.js



// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/types.js


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/index.js



// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/uikit-tools/dist/esm/index.js




// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/withSendbird.js



var SendbirdSdkContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
/**
 * @deprecated This function is deprecated. Use `useSendbirdStateContext` instead.
 * */
var withSendbirdContext = function (OriginalComponent, mapStoreToProps) {
    var ContextAwareComponent = function (props) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdSdkContext.Consumer, null, function (context) {
        if (mapStoreToProps && typeof mapStoreToProps !== 'function') {
            // eslint-disable-next-line no-console
            console.warn('Second parameter to withSendbirdContext must be a pure function');
        }
        var mergedProps = (mapStoreToProps && typeof mapStoreToProps === 'function')
            ? __assign(__assign({}, mapStoreToProps(context)), props) : __assign(__assign({}, context), props);
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OriginalComponent, __assign({}, mergedProps));
    })); };
    var componentName = OriginalComponent.displayName || OriginalComponent.name || 'Component';
    ContextAwareComponent.displayName = "SendbirdAware".concat(componentName);
    return ContextAwareComponent;
};


//# sourceMappingURL=withSendbird.js.map

// CONCATENATED MODULE: ./node_modules/css-vars-ponyfill/dist/css-vars-ponyfill.esm.js
/*!
 * css-vars-ponyfill
 * v2.4.8
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function _extends() {
    _extends = Object.assign ? Object.assign.bind() : function(target) {
        for (var i = 1; i < arguments.length; i++) {
            var source = arguments[i];
            for (var key in source) {
                if (Object.prototype.hasOwnProperty.call(source, key)) {
                    target[key] = source[key];
                }
            }
        }
        return target;
    };
    return _extends.apply(this, arguments);
}

/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */ function getUrls(urls) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var settings = {
        mimeType: options.mimeType || null,
        onBeforeSend: options.onBeforeSend || Function.prototype,
        onSuccess: options.onSuccess || Function.prototype,
        onError: options.onError || Function.prototype,
        onComplete: options.onComplete || Function.prototype
    };
    var urlArray = Array.isArray(urls) ? urls : [ urls ];
    var urlQueue = Array.apply(null, Array(urlArray.length)).map((function(x) {
        return null;
    }));
    function isValidCss(text) {
        var isString = typeof text === "string";
        var isHTML = isString && text.trim().charAt(0) === "<";
        return isString && !isHTML;
    }
    function onError(xhr, urlIndex) {
        settings.onError(xhr, urlArray[urlIndex], urlIndex);
    }
    function onSuccess(responseText, urlIndex) {
        var returnVal = settings.onSuccess(responseText, urlArray[urlIndex], urlIndex);
        responseText = returnVal === false ? "" : returnVal || responseText;
        urlQueue[urlIndex] = responseText;
        if (urlQueue.indexOf(null) === -1) {
            settings.onComplete(urlQueue);
        }
    }
    var parser = document.createElement("a");
    urlArray.forEach((function(url, i) {
        parser.setAttribute("href", url);
        parser.href = String(parser.href);
        var isIElte9 = Boolean(document.all && !window.atob);
        var isIElte9CORS = isIElte9 && parser.host.split(":")[0] !== location.host.split(":")[0];
        if (isIElte9CORS) {
            var isSameProtocol = parser.protocol === location.protocol;
            if (isSameProtocol) {
                var xdr = new XDomainRequest;
                xdr.open("GET", url);
                xdr.timeout = 0;
                xdr.onprogress = Function.prototype;
                xdr.ontimeout = Function.prototype;
                xdr.onload = function() {
                    var text = xdr.responseText;
                    if (isValidCss(text)) {
                        onSuccess(text, i);
                    } else {
                        onError(xdr, i);
                    }
                };
                xdr.onerror = function(err) {
                    onError(xdr, i);
                };
                setTimeout((function() {
                    xdr.send();
                }), 0);
            } else {
                console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(url, ")"));
                onError(null, i);
            }
        } else {
            var xhr = new XMLHttpRequest;
            xhr.open("GET", url);
            if (settings.mimeType && xhr.overrideMimeType) {
                xhr.overrideMimeType(settings.mimeType);
            }
            settings.onBeforeSend(xhr, url, i);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    var text = xhr.responseText;
                    if (xhr.status < 400 && isValidCss(text)) {
                        onSuccess(text, i);
                    } else if (xhr.status === 0 && isValidCss(text)) {
                        onSuccess(text, i);
                    } else {
                        onError(xhr, i);
                    }
                }
            };
            xhr.send();
        }
    }));
}

/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */ function getCssData(options) {
    var regex = {
        cssComments: /\/\*[\s\S]+?\*\//g,
        cssImports: /(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g
    };
    var settings = {
        rootElement: options.rootElement || document,
        include: options.include || 'style,link[rel="stylesheet"]',
        exclude: options.exclude || null,
        filter: options.filter || null,
        skipDisabled: options.skipDisabled !== false,
        useCSSOM: options.useCSSOM || false,
        onBeforeSend: options.onBeforeSend || Function.prototype,
        onSuccess: options.onSuccess || Function.prototype,
        onError: options.onError || Function.prototype,
        onComplete: options.onComplete || Function.prototype
    };
    var sourceNodes = Array.apply(null, settings.rootElement.querySelectorAll(settings.include)).filter((function(node) {
        return !matchesSelector(node, settings.exclude);
    }));
    var cssArray = Array.apply(null, Array(sourceNodes.length)).map((function(x) {
        return null;
    }));
    function handleComplete() {
        var isComplete = cssArray.indexOf(null) === -1;
        if (isComplete) {
            cssArray.reduce((function(skipIndices, value, i) {
                if (value === "") {
                    skipIndices.push(i);
                }
                return skipIndices;
            }), []).reverse().forEach((function(skipIndex) {
                return [ sourceNodes, cssArray ].forEach((function(arr) {
                    return arr.splice(skipIndex, 1);
                }));
            }));
            var cssText = cssArray.join("");
            settings.onComplete(cssText, cssArray, sourceNodes);
        }
    }
    function handleSuccess(cssText, cssIndex, node, sourceUrl) {
        var returnVal = settings.onSuccess(cssText, node, sourceUrl);
        cssText = returnVal !== undefined && Boolean(returnVal) === false ? "" : returnVal || cssText;
        resolveImports(cssText, node, sourceUrl, (function(resolvedCssText, errorData) {
            if (cssArray[cssIndex] === null) {
                errorData.forEach((function(data) {
                    return settings.onError(data.xhr, node, data.url);
                }));
                if (!settings.filter || settings.filter.test(resolvedCssText)) {
                    cssArray[cssIndex] = resolvedCssText;
                } else {
                    cssArray[cssIndex] = "";
                }
                handleComplete();
            }
        }));
    }
    function parseImportData(cssText, baseUrl) {
        var ignoreRules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
        var importData = {};
        importData.rules = (cssText.replace(regex.cssComments, "").match(regex.cssImports) || []).filter((function(rule) {
            return ignoreRules.indexOf(rule) === -1;
        }));
        importData.urls = importData.rules.map((function(rule) {
            return rule.replace(regex.cssImports, "$1");
        }));
        importData.absoluteUrls = importData.urls.map((function(url) {
            return getFullUrl$1(url, baseUrl);
        }));
        importData.absoluteRules = importData.rules.map((function(rule, i) {
            var oldUrl = importData.urls[i];
            var newUrl = getFullUrl$1(importData.absoluteUrls[i], baseUrl);
            return rule.replace(oldUrl, newUrl);
        }));
        return importData;
    }
    function resolveImports(cssText, node, baseUrl, callbackFn) {
        var __errorData = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];
        var __errorRules = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];
        var importData = parseImportData(cssText, baseUrl, __errorRules);
        if (importData.rules.length) {
            getUrls(importData.absoluteUrls, {
                onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {
                    settings.onBeforeSend(xhr, node, url);
                },
                onSuccess: function onSuccess(cssText, url, urlIndex) {
                    var returnVal = settings.onSuccess(cssText, node, url);
                    cssText = returnVal === false ? "" : returnVal || cssText;
                    var responseImportData = parseImportData(cssText, url, __errorRules);
                    responseImportData.rules.forEach((function(rule, i) {
                        cssText = cssText.replace(rule, responseImportData.absoluteRules[i]);
                    }));
                    return cssText;
                },
                onError: function onError(xhr, url, urlIndex) {
                    __errorData.push({
                        xhr: xhr,
                        url: url
                    });
                    __errorRules.push(importData.rules[urlIndex]);
                    resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
                },
                onComplete: function onComplete(responseArray) {
                    responseArray.forEach((function(importText, i) {
                        cssText = cssText.replace(importData.rules[i], importText);
                    }));
                    resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
                }
            });
        } else {
            callbackFn(cssText, __errorData);
        }
    }
    if (sourceNodes.length) {
        sourceNodes.forEach((function(node, i) {
            var linkHref = node.getAttribute("href");
            var linkRel = node.getAttribute("rel");
            var isLink = node.nodeName.toLowerCase() === "link" && linkHref && linkRel && linkRel.toLowerCase().indexOf("stylesheet") !== -1;
            var isSkip = settings.skipDisabled === false ? false : node.disabled;
            var isStyle = node.nodeName.toLowerCase() === "style";
            if (isLink && !isSkip) {
                var isURIScheme = linkHref.indexOf("data:text/css") !== -1;
                if (isURIScheme) {
                    var cssText = decodeURIComponent(linkHref.substring(linkHref.indexOf(",") + 1));
                    if (settings.useCSSOM) {
                        cssText = Array.apply(null, node.sheet.cssRules).map((function(rule) {
                            return rule.cssText;
                        })).join("");
                    }
                    handleSuccess(cssText, i, node, location.href);
                } else {
                    getUrls(linkHref, {
                        mimeType: "text/css",
                        onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {
                            settings.onBeforeSend(xhr, node, url);
                        },
                        onSuccess: function onSuccess(cssText, url, urlIndex) {
                            var sourceUrl = getFullUrl$1(linkHref);
                            handleSuccess(cssText, i, node, sourceUrl);
                        },
                        onError: function onError(xhr, url, urlIndex) {
                            cssArray[i] = "";
                            settings.onError(xhr, node, url);
                            handleComplete();
                        }
                    });
                }
            } else if (isStyle && !isSkip) {
                var _cssText = node.textContent;
                if (settings.useCSSOM) {
                    _cssText = Array.apply(null, node.sheet.cssRules).map((function(rule) {
                        return rule.cssText;
                    })).join("");
                }
                handleSuccess(_cssText, i, node, location.href);
            } else {
                cssArray[i] = "";
                handleComplete();
            }
        }));
    } else {
        settings.onComplete("", []);
    }
}

function getFullUrl$1(url, base) {
    var d = document.implementation.createHTMLDocument("");
    var b = d.createElement("base");
    var a = d.createElement("a");
    d.head.appendChild(b);
    d.body.appendChild(a);
    b.href = base || document.baseURI || (document.querySelector("base") || {}).href || location.href;
    a.href = url;
    return a.href;
}

function matchesSelector(elm, selector) {
    var matches = elm.matches || elm.matchesSelector || elm.webkitMatchesSelector || elm.mozMatchesSelector || elm.msMatchesSelector || elm.oMatchesSelector;
    return matches.call(elm, selector);
}

var balancedMatch = balanced;

function balanced(a, b, str) {
    if (a instanceof RegExp) a = maybeMatch(a, str);
    if (b instanceof RegExp) b = maybeMatch(b, str);
    var r = css_vars_ponyfill_esm_range(a, b, str);
    return r && {
        start: r[0],
        end: r[1],
        pre: str.slice(0, r[0]),
        body: str.slice(r[0] + a.length, r[1]),
        post: str.slice(r[1] + b.length)
    };
}

function maybeMatch(reg, str) {
    var m = str.match(reg);
    return m ? m[0] : null;
}

balanced.range = css_vars_ponyfill_esm_range;

function css_vars_ponyfill_esm_range(a, b, str) {
    var begs, beg, left, right, result;
    var ai = str.indexOf(a);
    var bi = str.indexOf(b, ai + 1);
    var i = ai;
    if (ai >= 0 && bi > 0) {
        if (a === b) {
            return [ ai, bi ];
        }
        begs = [];
        left = str.length;
        while (i >= 0 && !result) {
            if (i == ai) {
                begs.push(i);
                ai = str.indexOf(a, i + 1);
            } else if (begs.length == 1) {
                result = [ begs.pop(), bi ];
            } else {
                beg = begs.pop();
                if (beg < left) {
                    left = beg;
                    right = bi;
                }
                bi = str.indexOf(b, i + 1);
            }
            i = ai < bi && ai >= 0 ? ai : bi;
        }
        if (begs.length) {
            result = [ left, right ];
        }
    }
    return result;
}

function parseCss(css) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var defaults = {
        preserveStatic: true,
        removeComments: false
    };
    var settings = _extends({}, defaults, options);
    var errors = [];
    function error(msg) {
        throw new Error("CSS parse error: ".concat(msg));
    }
    function match(re) {
        var m = re.exec(css);
        if (m) {
            css = css.slice(m[0].length);
            return m;
        }
    }
    function open() {
        return match(/^{\s*/);
    }
    function close() {
        return match(/^}/);
    }
    function whitespace() {
        match(/^\s*/);
    }
    function comment() {
        whitespace();
        if (css[0] !== "/" || css[1] !== "*") {
            return;
        }
        var i = 2;
        while (css[i] && (css[i] !== "*" || css[i + 1] !== "/")) {
            i++;
        }
        if (!css[i]) {
            return error("end of comment is missing");
        }
        var str = css.slice(2, i);
        css = css.slice(i + 2);
        return {
            type: "comment",
            comment: str
        };
    }
    function comments() {
        var cmnts = [];
        var c;
        while (c = comment()) {
            cmnts.push(c);
        }
        return settings.removeComments ? [] : cmnts;
    }
    function selector() {
        whitespace();
        while (css[0] === "}") {
            error("extra closing bracket");
        }
        var m = match(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);
        if (m) {
            var _selector = m[0].trim();
            var selectorItems;
            var hasComment = /\/\*/.test(_selector);
            if (hasComment) {
                _selector = _selector.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, "");
            }
            var hasCommaInQuotes = /["']\w*,\w*["']/.test(_selector);
            if (hasCommaInQuotes) {
                _selector = _selector.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, (function(m) {
                    return m.replace(/,/g, "");
                }));
            }
            var hasMultipleSelectors = /,/.test(_selector);
            if (hasMultipleSelectors) {
                selectorItems = _selector.split(/\s*(?![^(]*\)),\s*/);
            } else {
                selectorItems = [ _selector ];
            }
            if (hasCommaInQuotes) {
                selectorItems = selectorItems.map((function(s) {
                    return s.replace(/\u200C/g, ",");
                }));
            }
            return selectorItems;
        }
    }
    function declaration() {
        if (css[0] === "@") {
            return at_rule();
        }
        match(/^([;\s]*)+/);
        var comment_regexp = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;
        var prop = match(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);
        if (!prop) {
            return;
        }
        prop = prop[0].trim();
        if (!match(/^:\s*/)) {
            return error("property missing ':'");
        }
        var val = match(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/);
        var ret = {
            type: "declaration",
            property: prop.replace(comment_regexp, ""),
            value: val ? val[0].replace(comment_regexp, "").trim() : ""
        };
        match(/^[;\s]*/);
        return ret;
    }
    function declarations() {
        if (!open()) {
            return error("missing '{'");
        }
        var d;
        var decls = comments();
        while (d = declaration()) {
            decls.push(d);
            decls = decls.concat(comments());
        }
        if (!close()) {
            return error("missing '}'");
        }
        return decls;
    }
    function keyframe() {
        whitespace();
        var vals = [];
        var m;
        while (m = match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/)) {
            vals.push(m[1]);
            match(/^,\s*/);
        }
        if (vals.length) {
            return {
                type: "keyframe",
                values: vals,
                declarations: declarations()
            };
        }
    }
    function at_keyframes() {
        var m = match(/^@([-\w]+)?keyframes\s*/);
        if (!m) {
            return;
        }
        var vendor = m[1];
        m = match(/^([-\w]+)\s*/);
        if (!m) {
            return error("@keyframes missing name");
        }
        var name = m[1];
        if (!open()) {
            return error("@keyframes missing '{'");
        }
        var frame;
        var frames = comments();
        while (frame = keyframe()) {
            frames.push(frame);
            frames = frames.concat(comments());
        }
        if (!close()) {
            return error("@keyframes missing '}'");
        }
        return {
            type: "keyframes",
            name: name,
            vendor: vendor,
            keyframes: frames
        };
    }
    function at_page() {
        var m = match(/^@page */);
        if (m) {
            var sel = selector() || [];
            return {
                type: "page",
                selectors: sel,
                declarations: declarations()
            };
        }
    }
    function at_page_margin_box() {
        var m = match(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);
        if (m) {
            var name = "".concat(m[1], "-").concat(m[2]) + (m[3] ? "-".concat(m[3]) : "");
            return {
                type: "page-margin-box",
                name: name,
                declarations: declarations()
            };
        }
    }
    function at_fontface() {
        var m = match(/^@font-face\s*/);
        if (m) {
            return {
                type: "font-face",
                declarations: declarations()
            };
        }
    }
    function at_supports() {
        var m = match(/^@supports *([^{]+)/);
        if (m) {
            return {
                type: "supports",
                supports: m[1].trim(),
                rules: rules()
            };
        }
    }
    function at_host() {
        var m = match(/^@host\s*/);
        if (m) {
            return {
                type: "host",
                rules: rules()
            };
        }
    }
    function at_media() {
        var m = match(/^@media([^{]+)*/);
        if (m) {
            return {
                type: "media",
                media: (m[1] || "").trim(),
                rules: rules()
            };
        }
    }
    function at_custom_m() {
        var m = match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);
        if (m) {
            return {
                type: "custom-media",
                name: m[1].trim(),
                media: m[2].trim()
            };
        }
    }
    function at_document() {
        var m = match(/^@([-\w]+)?document *([^{]+)/);
        if (m) {
            return {
                type: "document",
                document: m[2].trim(),
                vendor: m[1] ? m[1].trim() : null,
                rules: rules()
            };
        }
    }
    function at_x() {
        var m = match(/^@(import|charset|namespace)\s*([^;]+);/);
        if (m) {
            return {
                type: m[1],
                name: m[2].trim()
            };
        }
    }
    function at_rule() {
        whitespace();
        if (css[0] === "@") {
            var ret = at_x() || at_fontface() || at_media() || at_keyframes() || at_supports() || at_document() || at_custom_m() || at_host() || at_page() || at_page_margin_box();
            if (ret && !settings.preserveStatic) {
                var hasVarFunc = false;
                if (ret.declarations) {
                    hasVarFunc = ret.declarations.some((function(decl) {
                        return /var\(/.test(decl.value);
                    }));
                } else {
                    var arr = ret.keyframes || ret.rules || [];
                    hasVarFunc = arr.some((function(obj) {
                        return (obj.declarations || []).some((function(decl) {
                            return /var\(/.test(decl.value);
                        }));
                    }));
                }
                return hasVarFunc ? ret : {};
            }
            return ret;
        }
    }
    function rule() {
        if (!settings.preserveStatic) {
            var balancedMatch$1 = balancedMatch("{", "}", css);
            if (balancedMatch$1) {
                var hasVarDecl = /:(?:root|host)(?![.:#(])/.test(balancedMatch$1.pre) && /--\S*\s*:/.test(balancedMatch$1.body);
                var hasVarFunc = /var\(/.test(balancedMatch$1.body);
                if (!hasVarDecl && !hasVarFunc) {
                    css = css.slice(balancedMatch$1.end + 1);
                    return {};
                }
            }
        }
        var sel = selector() || [];
        var decls = settings.preserveStatic ? declarations() : declarations().filter((function(decl) {
            var hasVarDecl = sel.some((function(s) {
                return /:(?:root|host)(?![.:#(])/.test(s);
            })) && /^--\S/.test(decl.property);
            var hasVarFunc = /var\(/.test(decl.value);
            return hasVarDecl || hasVarFunc;
        }));
        if (!sel.length) {
            error("selector missing");
        }
        return {
            type: "rule",
            selectors: sel,
            declarations: decls
        };
    }
    function rules(core) {
        if (!core && !open()) {
            return error("missing '{'");
        }
        var node;
        var rules = comments();
        while (css.length && (core || css[0] !== "}") && (node = at_rule() || rule())) {
            if (node.type) {
                rules.push(node);
            }
            rules = rules.concat(comments());
        }
        if (!core && !close()) {
            return error("missing '}'");
        }
        return rules;
    }
    return {
        type: "stylesheet",
        stylesheet: {
            rules: rules(true),
            errors: errors
        }
    };
}

function parseVars(cssData) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var defaults = {
        parseHost: false,
        store: {},
        onWarning: function onWarning() {}
    };
    var settings = _extends({}, defaults, options);
    var reVarDeclSelectors = new RegExp(":".concat(settings.parseHost ? "host" : "root", "$"));
    if (typeof cssData === "string") {
        cssData = parseCss(cssData, settings);
    }
    cssData.stylesheet.rules.forEach((function(rule) {
        if (rule.type !== "rule" || !rule.selectors.some((function(s) {
            return reVarDeclSelectors.test(s);
        }))) {
            return;
        }
        rule.declarations.forEach((function(decl, i) {
            var prop = decl.property;
            var value = decl.value;
            if (prop && prop.indexOf("--") === 0) {
                settings.store[prop] = value;
            }
        }));
    }));
    return settings.store;
}

function stringifyCss(tree) {
    var delim = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
    var cb = arguments.length > 2 ? arguments[2] : undefined;
    var renderMethods = {
        charset: function charset(node) {
            return "@charset " + node.name + ";";
        },
        comment: function comment(node) {
            return node.comment.indexOf("__CSSVARSPONYFILL") === 0 ? "/*" + node.comment + "*/" : "";
        },
        "custom-media": function customMedia(node) {
            return "@custom-media " + node.name + " " + node.media + ";";
        },
        declaration: function declaration(node) {
            return node.property + ":" + node.value + ";";
        },
        document: function document(node) {
            return "@" + (node.vendor || "") + "document " + node.document + "{" + visit(node.rules) + "}";
        },
        "font-face": function fontFace(node) {
            return "@font-face" + "{" + visit(node.declarations) + "}";
        },
        host: function host(node) {
            return "@host" + "{" + visit(node.rules) + "}";
        },
        import: function _import(node) {
            return "@import " + node.name + ";";
        },
        keyframe: function keyframe(node) {
            return node.values.join(",") + "{" + visit(node.declarations) + "}";
        },
        keyframes: function keyframes(node) {
            return "@" + (node.vendor || "") + "keyframes " + node.name + "{" + visit(node.keyframes) + "}";
        },
        media: function media(node) {
            return "@media " + node.media + "{" + visit(node.rules) + "}";
        },
        namespace: function namespace(node) {
            return "@namespace " + node.name + ";";
        },
        page: function page(node) {
            return "@page " + (node.selectors.length ? node.selectors.join(", ") : "") + "{" + visit(node.declarations) + "}";
        },
        "page-margin-box": function pageMarginBox(node) {
            return "@" + node.name + "{" + visit(node.declarations) + "}";
        },
        rule: function rule(node) {
            var decls = node.declarations;
            if (decls.length) {
                return node.selectors.join(",") + "{" + visit(decls) + "}";
            }
        },
        supports: function supports(node) {
            return "@supports " + node.supports + "{" + visit(node.rules) + "}";
        }
    };
    function visit(nodes) {
        var buf = "";
        for (var i = 0; i < nodes.length; i++) {
            var n = nodes[i];
            if (cb) {
                cb(n);
            }
            var txt = renderMethods[n.type](n);
            if (txt) {
                buf += txt;
                if (txt.length && n.selectors) {
                    buf += delim;
                }
            }
        }
        return buf;
    }
    return visit(tree.stylesheet.rules);
}

function walkCss(node, fn) {
    node.rules.forEach((function(rule) {
        if (rule.rules) {
            walkCss(rule, fn);
            return;
        }
        if (rule.keyframes) {
            rule.keyframes.forEach((function(keyframe) {
                if (keyframe.type === "keyframe") {
                    fn(keyframe.declarations, rule);
                }
            }));
            return;
        }
        if (!rule.declarations) {
            return;
        }
        fn(rule.declarations, node);
    }));
}

var VAR_PROP_IDENTIFIER = "--";

var VAR_FUNC_IDENTIFIER = "var";

function transformCss(cssData) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var defaults = {
        preserveStatic: true,
        preserveVars: false,
        variables: {},
        onWarning: function onWarning() {}
    };
    var settings = _extends({}, defaults, options);
    if (typeof cssData === "string") {
        cssData = parseCss(cssData, settings);
    }
    walkCss(cssData.stylesheet, (function(declarations, node) {
        for (var i = 0; i < declarations.length; i++) {
            var decl = declarations[i];
            var type = decl.type;
            var prop = decl.property;
            var value = decl.value;
            if (type !== "declaration") {
                continue;
            }
            if (!settings.preserveVars && prop && prop.indexOf(VAR_PROP_IDENTIFIER) === 0) {
                declarations.splice(i, 1);
                i--;
                continue;
            }
            if (value.indexOf(VAR_FUNC_IDENTIFIER + "(") !== -1) {
                var resolvedValue = resolveValue(value, settings);
                if (resolvedValue !== decl.value) {
                    resolvedValue = fixNestedCalc(resolvedValue);
                    if (!settings.preserveVars) {
                        decl.value = resolvedValue;
                    } else {
                        declarations.splice(i, 0, {
                            type: type,
                            property: prop,
                            value: resolvedValue
                        });
                        i++;
                    }
                }
            }
        }
    }));
    return stringifyCss(cssData);
}

function fixNestedCalc(value) {
    var reCalcVal = /calc\(([^)]+)\)/g;
    (value.match(reCalcVal) || []).forEach((function(match) {
        var newVal = "calc".concat(match.split("calc").join(""));
        value = value.replace(match, newVal);
    }));
    return value;
}

function resolveValue(value) {
    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var __recursiveFallback = arguments.length > 2 ? arguments[2] : undefined;
    if (value.indexOf("var(") === -1) {
        return value;
    }
    var valueData = balancedMatch("(", ")", value);
    function resolveFunc(value) {
        var name = value.split(",")[0].replace(/[\s\n\t]/g, "");
        var fallback = (value.match(/(?:\s*,\s*){1}(.*)?/) || [])[1];
        var match = Object.prototype.hasOwnProperty.call(settings.variables, name) ? String(settings.variables[name]) : undefined;
        var replacement = match || (fallback ? String(fallback) : undefined);
        var unresolvedFallback = __recursiveFallback || value;
        if (!match) {
            settings.onWarning('variable "'.concat(name, '" is undefined'));
        }
        if (replacement && replacement !== "undefined" && replacement.length > 0) {
            return resolveValue(replacement, settings, unresolvedFallback);
        } else {
            return "var(".concat(unresolvedFallback, ")");
        }
    }
    if (!valueData) {
        if (value.indexOf("var(") !== -1) {
            settings.onWarning('missing closing ")" in the value "'.concat(value, '"'));
        }
        return value;
    } else if (valueData.pre.slice(-3) === "var") {
        var isEmptyVarFunc = valueData.body.trim().length === 0;
        if (isEmptyVarFunc) {
            settings.onWarning("var() must contain a non-whitespace string");
            return value;
        } else {
            return valueData.pre.slice(0, -3) + resolveFunc(valueData.body) + resolveValue(valueData.post, settings);
        }
    } else {
        return valueData.pre + "(".concat(resolveValue(valueData.body, settings), ")") + resolveValue(valueData.post, settings);
    }
}

var isBrowser = typeof window !== "undefined";

var isNativeSupport = isBrowser && window.CSS && window.CSS.supports && window.CSS.supports("(--a: 0)");

var counters = {
    group: 0,
    job: 0
};

var defaults = {
    rootElement: isBrowser ? document : null,
    shadowDOM: false,
    include: "style,link[rel=stylesheet]",
    exclude: "",
    variables: {},
    onlyLegacy: true,
    preserveStatic: true,
    preserveVars: false,
    silent: false,
    updateDOM: true,
    updateURLs: true,
    watch: null,
    onBeforeSend: function onBeforeSend() {},
    onError: function onError() {},
    onWarning: function onWarning() {},
    onSuccess: function onSuccess() {},
    onComplete: function onComplete() {},
    onFinally: function onFinally() {}
};

var css_vars_ponyfill_esm_regex = {
    cssComments: /\/\*[\s\S]+?\*\//g,
    cssKeyframes: /@(?:-\w*-)?keyframes/,
    cssMediaQueries: /@media[^{]+\{([\s\S]+?})\s*}/g,
    cssUrls: /url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,
    cssVarDeclRules: /(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,
    cssVarDecls: /(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,
    cssVarFunc: /var\(\s*--[\w-]/,
    cssVars: /(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/
};

var variableStore = {
    dom: {},
    job: {},
    user: {}
};

var cssVarsIsRunning = false;

var cssVarsObserver = null;

var cssVarsSrcNodeCount = 0;

var debounceTimer = null;

var isShadowDOMReady = false;

/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */ function cssVars() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var msgPrefix = "cssVars(): ";
    var settings = _extends({}, defaults, options);
    function handleError(message, sourceNode, xhr, url) {
        if (!settings.silent && window.console) {
            console.error("".concat(msgPrefix).concat(message, "\n"), sourceNode);
        }
        settings.onError(message, sourceNode, xhr, url);
    }
    function handleWarning(message) {
        if (!settings.silent && window.console) {
            console.warn("".concat(msgPrefix).concat(message));
        }
        settings.onWarning(message);
    }
    function handleFinally(hasChanged) {
        settings.onFinally(Boolean(hasChanged), isNativeSupport, getTimeStamp() - settings.__benchmark);
    }
    if (!isBrowser) {
        return;
    }
    if (settings.watch) {
        settings.watch = defaults.watch;
        addMutationObserver(settings);
        cssVars(settings);
        return;
    } else if (settings.watch === false && cssVarsObserver) {
        cssVarsObserver.disconnect();
        cssVarsObserver = null;
    }
    if (!settings.__benchmark) {
        if (cssVarsIsRunning === settings.rootElement) {
            cssVarsDebounced(options);
            return;
        }
        var srcNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));
        settings.__benchmark = getTimeStamp();
        settings.exclude = [ cssVarsObserver ? '[data-cssvars]:not([data-cssvars=""])' : '[data-cssvars="out"]', "link[disabled]:not([data-cssvars])", settings.exclude ].filter((function(selector) {
            return selector;
        })).join(",");
        settings.variables = fixVarNames(settings.variables);
        srcNodes.forEach((function(srcNode) {
            var hasStyleCache = srcNode.nodeName.toLowerCase() === "style" && srcNode.__cssVars.text;
            var hasStyleChanged = hasStyleCache && srcNode.textContent !== srcNode.__cssVars.text;
            if (hasStyleCache && hasStyleChanged) {
                srcNode.sheet && (srcNode.sheet.disabled = false);
                srcNode.setAttribute("data-cssvars", "");
            }
        }));
        if (!cssVarsObserver) {
            var outNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars="out"]'));
            outNodes.forEach((function(outNode) {
                var dataGroup = outNode.getAttribute("data-cssvars-group");
                var srcNode = dataGroup ? settings.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(dataGroup, '"]')) : null;
                if (!srcNode) {
                    outNode.parentNode.removeChild(outNode);
                }
            }));
            if (cssVarsSrcNodeCount && srcNodes.length < cssVarsSrcNodeCount) {
                cssVarsSrcNodeCount = srcNodes.length;
                variableStore.dom = {};
            }
        }
    }
    if (document.readyState !== "loading") {
        if (isNativeSupport && settings.onlyLegacy) {
            var hasVarChange = false;
            if (settings.updateDOM) {
                var targetElm = settings.rootElement.host || (settings.rootElement === document ? document.documentElement : settings.rootElement);
                Object.keys(settings.variables).forEach((function(key) {
                    var varValue = settings.variables[key];
                    hasVarChange = hasVarChange || varValue !== getComputedStyle(targetElm).getPropertyValue(key);
                    targetElm.style.setProperty(key, varValue);
                }));
            }
            handleFinally(hasVarChange);
        } else if (!isShadowDOMReady && (settings.shadowDOM || settings.rootElement.shadowRoot || settings.rootElement.host)) {
            getCssData({
                rootElement: defaults.rootElement,
                include: defaults.include,
                exclude: settings.exclude,
                skipDisabled: false,
                onSuccess: function onSuccess(cssText, node, url) {
                    var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;
                    if (isUserDisabled) {
                        return false;
                    }
                    cssText = cssText.replace(css_vars_ponyfill_esm_regex.cssComments, "").replace(css_vars_ponyfill_esm_regex.cssMediaQueries, "");
                    cssText = (cssText.match(css_vars_ponyfill_esm_regex.cssVarDeclRules) || []).join("");
                    return cssText || false;
                },
                onComplete: function onComplete(cssText, cssArray, nodeArray) {
                    parseVars(cssText, {
                        store: variableStore.dom,
                        onWarning: handleWarning
                    });
                    isShadowDOMReady = true;
                    cssVars(settings);
                }
            });
        } else {
            cssVarsIsRunning = settings.rootElement;
            getCssData({
                rootElement: settings.rootElement,
                include: settings.include,
                exclude: settings.exclude,
                skipDisabled: false,
                onBeforeSend: settings.onBeforeSend,
                onError: function onError(xhr, node, url) {
                    var responseUrl = xhr.responseURL || getFullUrl(url, location.href);
                    var statusText = xhr.statusText ? "(".concat(xhr.statusText, ")") : "Unspecified Error" + (xhr.status === 0 ? " (possibly CORS related)" : "");
                    var errorMsg = "CSS XHR Error: ".concat(responseUrl, " ").concat(xhr.status, " ").concat(statusText);
                    handleError(errorMsg, node, xhr, responseUrl);
                },
                onSuccess: function onSuccess(cssText, node, url) {
                    var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;
                    if (isUserDisabled) {
                        return false;
                    }
                    var isLink = node.nodeName.toLowerCase() === "link";
                    var isStyleImport = node.nodeName.toLowerCase() === "style" && cssText !== node.textContent;
                    var returnVal = settings.onSuccess(cssText, node, url);
                    cssText = returnVal !== undefined && Boolean(returnVal) === false ? "" : returnVal || cssText;
                    if (settings.updateURLs && (isLink || isStyleImport)) {
                        cssText = fixRelativeCssUrls(cssText, url);
                    }
                    return cssText;
                },
                onComplete: function onComplete(cssText, cssArray) {
                    var nodeArray = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
                    var currentVars = _extends({}, variableStore.dom, variableStore.user);
                    var hasVarChange = false;
                    variableStore.job = {};
                    nodeArray.forEach((function(node, i) {
                        var nodeCSS = cssArray[i];
                        node.__cssVars = node.__cssVars || {};
                        node.__cssVars.text = nodeCSS;
                        if (css_vars_ponyfill_esm_regex.cssVars.test(nodeCSS)) {
                            try {
                                var cssTree = parseCss(nodeCSS, {
                                    preserveStatic: settings.preserveStatic,
                                    removeComments: true
                                });
                                parseVars(cssTree, {
                                    parseHost: Boolean(settings.rootElement.host),
                                    store: variableStore.dom,
                                    onWarning: handleWarning
                                });
                                node.__cssVars.tree = cssTree;
                            } catch (err) {
                                handleError(err.message, node);
                            }
                        }
                    }));
                    _extends(variableStore.job, variableStore.dom);
                    if (settings.updateDOM) {
                        _extends(variableStore.user, settings.variables);
                        _extends(variableStore.job, variableStore.user);
                    } else {
                        _extends(variableStore.job, variableStore.user, settings.variables);
                        _extends(currentVars, settings.variables);
                    }
                    hasVarChange = counters.job > 0 && Boolean(Object.keys(variableStore.job).length > Object.keys(currentVars).length || Boolean(Object.keys(currentVars).length && Object.keys(variableStore.job).some((function(key) {
                        return variableStore.job[key] !== currentVars[key];
                    }))));
                    if (hasVarChange) {
                        resetCssNodes(settings.rootElement);
                        cssVars(settings);
                    } else {
                        var outCssArray = [];
                        var outNodeArray = [];
                        var hasKeyframesWithVars = false;
                        if (settings.updateDOM) {
                            counters.job++;
                        }
                        nodeArray.forEach((function(node, i) {
                            var isSkip = !node.__cssVars.tree;
                            if (node.__cssVars.tree) {
                                try {
                                    transformCss(node.__cssVars.tree, _extends({}, settings, {
                                        variables: variableStore.job,
                                        onWarning: handleWarning
                                    }));
                                    var outCss = stringifyCss(node.__cssVars.tree);
                                    if (settings.updateDOM) {
                                        var nodeCSS = cssArray[i];
                                        var hasCSSVarFunc = css_vars_ponyfill_esm_regex.cssVarFunc.test(nodeCSS);
                                        if (!node.getAttribute("data-cssvars")) {
                                            node.setAttribute("data-cssvars", "src");
                                        }
                                        if (outCss.length && hasCSSVarFunc) {
                                            var dataGroup = node.getAttribute("data-cssvars-group") || ++counters.group;
                                            var outCssNoSpaces = outCss.replace(/\s/g, "");
                                            var outNode = settings.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(dataGroup, '"]')) || document.createElement("style");
                                            hasKeyframesWithVars = hasKeyframesWithVars || css_vars_ponyfill_esm_regex.cssKeyframes.test(outCss);
                                            if (settings.preserveStatic) {
                                                node.sheet && (node.sheet.disabled = true);
                                            }
                                            if (!outNode.hasAttribute("data-cssvars")) {
                                                outNode.setAttribute("data-cssvars", "out");
                                            }
                                            if (outCssNoSpaces === node.textContent.replace(/\s/g, "")) {
                                                isSkip = true;
                                                if (outNode && outNode.parentNode) {
                                                    node.removeAttribute("data-cssvars-group");
                                                    outNode.parentNode.removeChild(outNode);
                                                }
                                            } else if (outCssNoSpaces !== outNode.textContent.replace(/\s/g, "")) {
                                                [ node, outNode ].forEach((function(n) {
                                                    n.setAttribute("data-cssvars-job", counters.job);
                                                    n.setAttribute("data-cssvars-group", dataGroup);
                                                }));
                                                outNode.textContent = outCss;
                                                outCssArray.push(outCss);
                                                outNodeArray.push(outNode);
                                                if (!outNode.parentNode) {
                                                    node.parentNode.insertBefore(outNode, node.nextSibling);
                                                }
                                            }
                                        }
                                    } else {
                                        if (node.textContent.replace(/\s/g, "") !== outCss) {
                                            outCssArray.push(outCss);
                                        }
                                    }
                                } catch (err) {
                                    handleError(err.message, node);
                                }
                            }
                            if (isSkip) {
                                node.setAttribute("data-cssvars", "skip");
                            }
                            if (!node.hasAttribute("data-cssvars-job")) {
                                node.setAttribute("data-cssvars-job", counters.job);
                            }
                        }));
                        cssVarsSrcNodeCount = settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length;
                        if (settings.shadowDOM) {
                            var elms = [].concat(settings.rootElement).concat([].slice.call(settings.rootElement.querySelectorAll("*")));
                            for (var i = 0, elm; elm = elms[i]; ++i) {
                                if (elm.shadowRoot && elm.shadowRoot.querySelector("style")) {
                                    var shadowSettings = _extends({}, settings, {
                                        rootElement: elm.shadowRoot
                                    });
                                    cssVars(shadowSettings);
                                }
                            }
                        }
                        if (settings.updateDOM && hasKeyframesWithVars) {
                            fixKeyframes(settings.rootElement);
                        }
                        cssVarsIsRunning = false;
                        settings.onComplete(outCssArray.join(""), outNodeArray, JSON.parse(JSON.stringify(variableStore.job)), getTimeStamp() - settings.__benchmark);
                        handleFinally(outNodeArray.length);
                    }
                }
            });
        }
    } else {
        document.addEventListener("DOMContentLoaded", (function init(evt) {
            cssVars(options);
            document.removeEventListener("DOMContentLoaded", init);
        }));
    }
}

cssVars.reset = function() {
    counters.job = 0;
    counters.group = 0;
    cssVarsIsRunning = false;
    if (cssVarsObserver) {
        cssVarsObserver.disconnect();
        cssVarsObserver = null;
    }
    cssVarsSrcNodeCount = 0;
    debounceTimer = null;
    isShadowDOMReady = false;
    for (var prop in variableStore) {
        variableStore[prop] = {};
    }
};

function addMutationObserver(settings) {
    function isDisabled(node) {
        var isDisabledAttr = isLink(node) && node.hasAttribute("disabled");
        var isDisabledSheet = (node.sheet || {}).disabled;
        return isDisabledAttr || isDisabledSheet;
    }
    function isLink(node) {
        var isStylesheet = node.nodeName.toLowerCase() === "link" && (node.getAttribute("rel") || "").indexOf("stylesheet") !== -1;
        return isStylesheet;
    }
    function isStyle(node) {
        return node.nodeName.toLowerCase() === "style";
    }
    function isValidAttributeMutation(mutation) {
        var isValid = false;
        if (mutation.type === "attributes" && isLink(mutation.target) && !isDisabled(mutation.target)) {
            var isEnabledMutation = mutation.attributeName === "disabled";
            var isHrefMutation = mutation.attributeName === "href";
            var isSkipNode = mutation.target.getAttribute("data-cssvars") === "skip";
            var isSrcNode = mutation.target.getAttribute("data-cssvars") === "src";
            if (isEnabledMutation) {
                isValid = !isSkipNode && !isSrcNode;
            } else if (isHrefMutation) {
                if (isSkipNode) {
                    mutation.target.setAttribute("data-cssvars", "");
                } else if (isSrcNode) {
                    resetCssNodes(settings.rootElement, true);
                }
                isValid = true;
            }
        }
        return isValid;
    }
    function isValidStyleTextMutation(mutation) {
        var isValid = false;
        if (mutation.type === "childList") {
            var isStyleElm = isStyle(mutation.target);
            var isOutNode = mutation.target.getAttribute("data-cssvars") === "out";
            isValid = isStyleElm && !isOutNode;
        }
        return isValid;
    }
    function isValidAddMutation(mutation) {
        var isValid = false;
        if (mutation.type === "childList") {
            isValid = [].slice.call(mutation.addedNodes).some((function(node) {
                var isElm = node.nodeType === 1;
                var hasAttr = isElm && node.hasAttribute("data-cssvars");
                var isStyleWithVars = isStyle(node) && css_vars_ponyfill_esm_regex.cssVars.test(node.textContent);
                var isValid = !hasAttr && (isLink(node) || isStyleWithVars);
                return isValid && !isDisabled(node);
            }));
        }
        return isValid;
    }
    function isValidRemoveMutation(mutation) {
        var isValid = false;
        if (mutation.type === "childList") {
            isValid = [].slice.call(mutation.removedNodes).some((function(node) {
                var isElm = node.nodeType === 1;
                var isOutNode = isElm && node.getAttribute("data-cssvars") === "out";
                var isSrcNode = isElm && node.getAttribute("data-cssvars") === "src";
                var isValid = isSrcNode;
                if (isSrcNode || isOutNode) {
                    var dataGroup = node.getAttribute("data-cssvars-group");
                    var orphanNode = settings.rootElement.querySelector('[data-cssvars-group="'.concat(dataGroup, '"]'));
                    if (isSrcNode) {
                        resetCssNodes(settings.rootElement, true);
                    }
                    if (orphanNode) {
                        orphanNode.parentNode.removeChild(orphanNode);
                    }
                }
                return isValid;
            }));
        }
        return isValid;
    }
    if (!window.MutationObserver) {
        return;
    }
    if (cssVarsObserver) {
        cssVarsObserver.disconnect();
        cssVarsObserver = null;
    }
    cssVarsObserver = new MutationObserver((function(mutations) {
        var hasValidMutation = mutations.some((function(mutation) {
            return isValidAttributeMutation(mutation) || isValidStyleTextMutation(mutation) || isValidAddMutation(mutation) || isValidRemoveMutation(mutation);
        }));
        if (hasValidMutation) {
            cssVars(settings);
        }
    }));
    cssVarsObserver.observe(document.documentElement, {
        attributes: true,
        attributeFilter: [ "disabled", "href" ],
        childList: true,
        subtree: true
    });
}

function cssVarsDebounced(settings) {
    var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout((function() {
        settings.__benchmark = null;
        cssVars(settings);
    }), delay);
}

function fixKeyframes(rootElement) {
    var animationNameProp = [ "animation-name", "-moz-animation-name", "-webkit-animation-name" ].filter((function(prop) {
        return getComputedStyle(document.body)[prop];
    }))[0];
    if (animationNameProp) {
        var allNodes = [].slice.call(rootElement.querySelectorAll("*"));
        var keyframeNodes = [];
        var nameMarker = "__CSSVARSPONYFILL-KEYFRAMES__";
        for (var i = 0, len = allNodes.length; i < len; i++) {
            var node = allNodes[i];
            var animationName = getComputedStyle(node)[animationNameProp];
            if (animationName !== "none") {
                node.style[animationNameProp] += nameMarker;
                keyframeNodes.push(node);
            }
        }
        void document.body.offsetHeight;
        for (var _i = 0, _len = keyframeNodes.length; _i < _len; _i++) {
            var nodeStyle = keyframeNodes[_i].style;
            nodeStyle[animationNameProp] = nodeStyle[animationNameProp].replace(nameMarker, "");
        }
    }
}

function fixRelativeCssUrls(cssText, baseUrl) {
    var cssUrls = cssText.replace(css_vars_ponyfill_esm_regex.cssComments, "").match(css_vars_ponyfill_esm_regex.cssUrls) || [];
    cssUrls.forEach((function(cssUrl) {
        var oldUrl = cssUrl.replace(css_vars_ponyfill_esm_regex.cssUrls, "$1");
        var newUrl = getFullUrl(oldUrl, baseUrl);
        cssText = cssText.replace(cssUrl, cssUrl.replace(oldUrl, newUrl));
    }));
    return cssText;
}

function fixVarNames() {
    var varObj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var reLeadingHyphens = /^-{2}/;
    return Object.keys(varObj).reduce((function(obj, value) {
        var key = reLeadingHyphens.test(value) ? value : "--".concat(value.replace(/^-+/, ""));
        obj[key] = varObj[value];
        return obj;
    }), {});
}

function getFullUrl(url) {
    var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : location.href;
    var d = document.implementation.createHTMLDocument("");
    var b = d.createElement("base");
    var a = d.createElement("a");
    d.head.appendChild(b);
    d.body.appendChild(a);
    b.href = base;
    a.href = url;
    return a.href;
}

function getTimeStamp() {
    return isBrowser && (window.performance || {}).now ? window.performance.now() : (new Date).getTime();
}

function resetCssNodes(rootElement) {
    var resetDOMVariableStore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var resetNodes = [].slice.call(rootElement.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));
    resetNodes.forEach((function(node) {
        return node.setAttribute("data-cssvars", "");
    }));
    if (resetDOMVariableStore) {
        variableStore.dom = {};
    }
}


//# sourceMappingURL=css-vars-ponyfill.esm.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils/message/getOutgoingMessageState.js
var OutgoingMessageStates;
(function (OutgoingMessageStates) {
    OutgoingMessageStates["NONE"] = "NONE";
    OutgoingMessageStates["PENDING"] = "PENDING";
    OutgoingMessageStates["SENT"] = "SENT";
    OutgoingMessageStates["FAILED"] = "FAILED";
    OutgoingMessageStates["DELIVERED"] = "DELIVERED";
    OutgoingMessageStates["READ"] = "READ";
})(OutgoingMessageStates || (OutgoingMessageStates = {}));
var getOutgoingMessageState = function (channel, message) {
    var _a, _b, _c, _d, _e;
    if (!message || !('sendingStatus' in message))
        return OutgoingMessageStates.NONE;
    if (message.sendingStatus === 'pending') {
        return OutgoingMessageStates.PENDING;
    }
    if (message.sendingStatus === 'failed') {
        return OutgoingMessageStates.FAILED;
    }
    if ((_a = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _a === void 0 ? void 0 : _a.call(channel)) {
        /* GroupChannel only */
        if (((_c = (_b = channel).getUnreadMemberCount) === null || _c === void 0 ? void 0 : _c.call(_b, message)) === 0) {
            return OutgoingMessageStates.READ;
        }
        else if (((_e = (_d = channel).getUndeliveredMemberCount) === null || _e === void 0 ? void 0 : _e.call(_d, message)) === 0) {
            return OutgoingMessageStates.DELIVERED;
        }
    }
    if (message.sendingStatus === 'succeeded') {
        return OutgoingMessageStates.SENT;
    }
    return OutgoingMessageStates.NONE;
};


//# sourceMappingURL=getOutgoingMessageState.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-janisM9b.js




var bundle_janisM9b_n=Symbol("@ts-pattern/matcher"),bundle_janisM9b_t="@ts-pattern/anonymous-select-key",bundle_janisM9b_e=function(n){return Boolean(n&&"object"==typeof n)},bundle_janisM9b_r=function(t){return t&&!!t[bundle_janisM9b_n]},bundle_janisM9b_u=function t(u,i,c){if(bundle_janisM9b_e(u)){if(bundle_janisM9b_r(u)){var o=u[bundle_janisM9b_n]().match(i),a=o.matched,f=o.selections;return a&&f&&Object.keys(f).forEach(function(n){return c(n,f[n])}),a}if(!bundle_janisM9b_e(i))return !1;if(Array.isArray(u))return !!Array.isArray(i)&&u.length===i.length&&u.every(function(n,e){return t(n,i[e],c)});if(u instanceof Map)return i instanceof Map&&Array.from(u.keys()).every(function(n){return t(u.get(n),i.get(n),c)});if(u instanceof Set){if(!(i instanceof Set))return !1;if(0===u.size)return 0===i.size;if(1===u.size){var s=Array.from(u.values())[0];return bundle_janisM9b_r(s)?Array.from(i.values()).every(function(n){return t(s,n,c)}):i.has(s)}return Array.from(u.values()).every(function(n){return i.has(n)})}return Object.keys(u).every(function(e){var o,a=u[e];return (e in i||bundle_janisM9b_r(o=a)&&"optional"===o[bundle_janisM9b_n]().matcherType)&&t(a,i[e],c)})}return Object.is(i,u)},bundle_janisM9b_i=function t(u){var i,o,a;return bundle_janisM9b_e(u)?bundle_janisM9b_r(u)?null!=(i=null==(o=(a=u[bundle_janisM9b_n]()).getSelectionKeys)?void 0:o.call(a))?i:[]:Array.isArray(u)?bundle_janisM9b_c(u,t):bundle_janisM9b_c(Object.values(u),t):[]},bundle_janisM9b_c=function(n,t){return n.reduce(function(n,e){return n.concat(t(e))},[])};function bundle_janisM9b_o(t){var e;return (e={})[bundle_janisM9b_n]=function(){return {match:function(n){var e={},r=function(n,t){e[n]=t;};return void 0===n?(bundle_janisM9b_i(t).forEach(function(n){return r(n,void 0)}),{matched:!0,selections:e}):{matched:bundle_janisM9b_u(t,n,r),selections:e}},getSelectionKeys:function(){return bundle_janisM9b_i(t)},matcherType:"optional"}},e}function bundle_janisM9b_a(t){var e;return (e={})[bundle_janisM9b_n]=function(){return {match:function(n){if(!Array.isArray(n))return {matched:!1};var e={};if(0===n.length)return bundle_janisM9b_i(t).forEach(function(n){e[n]=[];}),{matched:!0,selections:e};var r=function(n,t){e[n]=(e[n]||[]).concat([t]);};return {matched:n.every(function(n){return bundle_janisM9b_u(t,n,r)}),selections:e}},getSelectionKeys:function(){return bundle_janisM9b_i(t)}}},e}function bundle_janisM9b_f(){var t,e=[].slice.call(arguments);return (t={})[bundle_janisM9b_n]=function(){return {match:function(n){var t={},r=function(n,e){t[n]=e;};return {matched:e.every(function(t){return bundle_janisM9b_u(t,n,r)}),selections:t}},getSelectionKeys:function(){return bundle_janisM9b_c(e,bundle_janisM9b_i)},matcherType:"and"}},t}function bundle_janisM9b_s(){var t,e=[].slice.call(arguments);return (t={})[bundle_janisM9b_n]=function(){return {match:function(n){var t={},r=function(n,e){t[n]=e;};return bundle_janisM9b_c(e,bundle_janisM9b_i).forEach(function(n){return r(n,void 0)}),{matched:e.some(function(t){return bundle_janisM9b_u(t,n,r)}),selections:t}},getSelectionKeys:function(){return bundle_janisM9b_c(e,bundle_janisM9b_i)},matcherType:"or"}},t}function bundle_janisM9b_l(t){var e;return (e={})[bundle_janisM9b_n]=function(){return {match:function(n){return {matched:!bundle_janisM9b_u(t,n,function(){})}},getSelectionKeys:function(){return []},matcherType:"not"}},e}function bundle_janisM9b_h(t){var e;return (e={})[bundle_janisM9b_n]=function(){return {match:function(n){return {matched:Boolean(t(n))}}}},e}function bundle_janisM9b_v(){var e,r=[].slice.call(arguments),c="string"==typeof r[0]?r[0]:void 0,o=2===r.length?r[1]:"string"==typeof r[0]?void 0:r[0];return (e={})[bundle_janisM9b_n]=function(){return {match:function(n){var e,r=((e={})[null!=c?c:bundle_janisM9b_t]=n,e);return {matched:void 0===o||bundle_janisM9b_u(o,n,function(n,t){r[n]=t;}),selections:r}},getSelectionKeys:function(){return [null!=c?c:bundle_janisM9b_t].concat(void 0===o?[]:bundle_janisM9b_i(o))}}},e}var bundle_janisM9b_y=bundle_janisM9b_h(function(n){return !0}),bundle_janisM9b_m=bundle_janisM9b_y,bundle_janisM9b_d=bundle_janisM9b_h(function(n){return "string"==typeof n}),bundle_janisM9b_g=bundle_janisM9b_h(function(n){return "number"==typeof n}),bundle_janisM9b_p=bundle_janisM9b_h(function(n){return "boolean"==typeof n}),bundle_janisM9b_b=bundle_janisM9b_h(function(n){return "bigint"==typeof n}),bundle_janisM9b_w=bundle_janisM9b_h(function(n){return "symbol"==typeof n}),bundle_janisM9b_A=bundle_janisM9b_h(function(n){return null==n}),bundle_janisM9b_S={__proto__:null,optional:bundle_janisM9b_o,array:bundle_janisM9b_a,intersection:bundle_janisM9b_f,union:bundle_janisM9b_s,not:bundle_janisM9b_l,when:bundle_janisM9b_h,select:bundle_janisM9b_v,any:bundle_janisM9b_y,_:bundle_janisM9b_m,string:bundle_janisM9b_d,number:bundle_janisM9b_g,boolean:bundle_janisM9b_p,bigint:bundle_janisM9b_b,symbol:bundle_janisM9b_w,nullish:bundle_janisM9b_A,instanceOf:function(n){return bundle_janisM9b_h(function(n){return function(t){return t instanceof n}}(n))},typed:function(){return {array:bundle_janisM9b_a,optional:bundle_janisM9b_o,intersection:bundle_janisM9b_f,union:bundle_janisM9b_s,not:bundle_janisM9b_l,select:bundle_janisM9b_v,when:bundle_janisM9b_h}}};function K(n){return new bundle_janisM9b_O(n,[])}var bundle_janisM9b_O=/*#__PURE__*/function(){function n(n,t){this.value=void 0,this.cases=void 0,this.value=n,this.cases=t;}var e=n.prototype;return e.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],i=[e[0]],c=[];return 3===e.length&&"function"==typeof e[1]?(i.push(e[0]),c.push(e[1])):e.length>2&&i.push.apply(i,e.slice(1,e.length-1)),new n(this.value,this.cases.concat([{match:function(n){var e={},r=Boolean(i.some(function(t){return bundle_janisM9b_u(t,n,function(n,t){e[n]=t;})})&&c.every(function(t){return t(n)}));return {matched:r,value:r&&Object.keys(e).length?bundle_janisM9b_t in e?e[bundle_janisM9b_t]:e:n}},handler:r}]))},e.when=function(t,e){return new n(this.value,this.cases.concat([{match:function(n){return {matched:Boolean(t(n)),value:n}},handler:e}]))},e.otherwise=function(t){return new n(this.value,this.cases.concat([{match:function(n){return {matched:!0,value:n}},handler:t}])).run()},e.exhaustive=function(){return this.run()},e.run=function(){for(var n=this.value,t=void 0,e=0;e<this.cases.length;e++){var r=this.cases[e],u=r.match(this.value);if(u.matched){n=u.value,t=r.handler;break}}if(!t){var i;try{i=JSON.stringify(this.value);}catch(n){i=this.value;}throw new Error("Pattern matching error: no pattern matches value "+i)}return t(n,this.value)},n}();

var TypingIndicatorType;
(function (TypingIndicatorType) {
    TypingIndicatorType["Text"] = "text";
    TypingIndicatorType["Bubble"] = "bubble";
})(TypingIndicatorType || (TypingIndicatorType = {}));
var MessageContentMiddleContainerType;
(function (MessageContentMiddleContainerType) {
    MessageContentMiddleContainerType["DEFAULT"] = "default";
    MessageContentMiddleContainerType["WIDE"] = "wide";
})(MessageContentMiddleContainerType || (MessageContentMiddleContainerType = {}));

// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types
var SUPPORTED_MIMES = {
    IMAGE: [
        'image/jpeg',
        'image/jpg',
        'image/png',
        'image/gif',
        'image/svg+xml',
        'image/webp', // not supported in IE
    ],
    VIDEO: [
        'video/mpeg',
        'video/ogg',
        'video/webm',
        'video/mp4',
        // 'video/quicktime', // NOTE: Do not support ThumbnailMessage for the .mov video
    ],
    AUDIO: [
        'audio/aac',
        'audio/midi',
        'audio/x-midi',
        'audio/mpeg',
        'audio/ogg',
        'audio/opus',
        'audio/wav',
        'audio/webm',
        'audio/3gpp',
        'audio/3gpp2',
        'audio/mp3',
    ],
    DOCUMENT: [
        'text/plain',
        'text/css',
        'text/csv',
        'text/html',
        'text/calendar',
        'text/javascript',
        'text/xml',
        'video/quicktime', // NOTE: Assume this video is a normal file, not video
    ],
    APPLICATION: [
        'application/x-abiword',
        'application/x-freearc',
        'application/vnd.amazon.ebook',
        'application/octet-stream',
        'application/x-bzip',
        'application/x-bzip2',
        'application/x-cdf',
        'application/x-csh',
        'application/msword',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'application/vnd.ms-fontobject',
        'application/epub+zip',
        'application/gzip',
        'application/java-archive',
        'application/json',
        'application/ld+json',
        'application/vnd.apple.installer+xml',
        'application/vnd.oasis.opendocument.presentation',
        'application/vnd.oasis.opendocument.spreadsheet',
        'application/vnd.oasis.opendocument.text',
        'application/ogg',
        'application/pdf',
        'application/x-httpd-php',
        'application/vnd.ms-powerpoint',
        'application/vnd.openxmlformats-officedocument.presentationml.presentation',
        'application/vnd.rar',
        'application/rtf',
        'application/x-sh',
        'application/x-tar',
        'application/vnd.visio',
        'application/xhtml+xml',
        'application/vnd.ms-excel',
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
        'application/xml',
        'application/vnd.mozilla.xul+xml',
        'application/zip',
        'application/x-7z-compressed',
    ],
};
var getMimeTypesUIKitAccepts = function (acceptableMimeTypes) {
    if (Array.isArray(acceptableMimeTypes) && acceptableMimeTypes.length > 0) {
        return acceptableMimeTypes
            .reduce(function (prev, curr) {
            switch (curr) {
                case 'image': {
                    prev.push.apply(prev, SUPPORTED_MIMES.IMAGE);
                    break;
                }
                case 'video': {
                    prev.push.apply(prev, SUPPORTED_MIMES.VIDEO);
                    break;
                }
                case 'audio': {
                    prev.push.apply(prev, SUPPORTED_MIMES.AUDIO);
                    break;
                }
                default: {
                    prev.push(curr);
                    break;
                }
            }
            return prev;
        }, [])
            .join();
    }
    return Object.values(SUPPORTED_MIMES).reduce(function (prev, curr) { return (prev.concat(curr)); }, []).join();
};
var UIKitMessageTypes = {
    ADMIN: 'ADMIN',
    TEXT: 'TEXT',
    FILE: 'FILE',
    MULTIPLE_FILES: 'MULTIPLE_FILES',
    THUMBNAIL: 'THUMBNAIL',
    OG: 'OG',
    UNKNOWN: 'UNKNOWN',
};
var UIKitFileTypes = {
    IMAGE: 'IMAGE',
    AUDIO: 'AUDIO',
    VIDEO: 'VIDEO',
    GIF: 'GIF',
    VOICE: 'VOICE',
    OTHERS: 'OTHERS',
};
var isTextuallyNull = function (text) {
    if (text === '' || text === null) {
        return true;
    }
    return false;
};
var isImage = function (type) { return SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0; };
var isVideo = function (type) { return SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0; };
var isGif = function (type) { return type === 'image/gif'; };
var isSupportedFileView = function (type) { return isImage(type) || isVideo(type); };
var isAudio = function (type) { return SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0; };
var getUIKitFileTypes = function () { return (__assign({}, UIKitFileTypes)); };
var getUIKitFileType = function (type) {
    if (isGif(type))
        return UIKitFileTypes.GIF;
    if (isImage(type))
        return UIKitFileTypes.IMAGE;
    if (isVideo(type))
        return UIKitFileTypes.VIDEO;
    if (isAudio(type))
        return UIKitFileTypes.AUDIO;
    return UIKitFileTypes.OTHERS;
};
var isSentMessage = function (message) { return (message.sendingStatus === 'succeeded'); };
var isReadMessage = function (channel, message) { return (getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ); };
// TODO: Remove channel from the params, it seems unnecessary
var isFailedMessage = function (message) { return ((message === null || message === void 0 ? void 0 : message.sendingStatus) === 'failed'); };
var isPendingMessage = function (message) { return ((message === null || message === void 0 ? void 0 : message.sendingStatus) === 'pending'); };
var isSentStatus = function (state) { return (state === OutgoingMessageStates.SENT
    || state === OutgoingMessageStates.DELIVERED
    || state === OutgoingMessageStates.READ); };
var isAdminMessage = function (message) { return (message && (message['isAdminMessage'] && typeof message.isAdminMessage === 'function'
    ? message.isAdminMessage()
    : (message === null || message === void 0 ? void 0 : message.messageType) === 'admin')); };
var isUserMessage = function (message) { return (message && (message['isUserMessage'] && typeof message.isUserMessage === 'function'
    ? message.isUserMessage()
    : (message === null || message === void 0 ? void 0 : message.messageType) === 'user')); };
var isFileMessage = function (message) { return (!!message && (message['isFileMessage'] && typeof message.isFileMessage === 'function'
    ? message.isFileMessage()
    : (message === null || message === void 0 ? void 0 : message.messageType) === 'file')); };
var isMultipleFilesMessage = function (message) { return (message && (message['isMultipleFilesMessage'] && typeof message.isMultipleFilesMessage === 'function'
    ? message.isMultipleFilesMessage()
    : (message.messageType === 'file'
        && Object.prototype.hasOwnProperty.call(message, 'fileInfoList')))); };
var isThreadMessage = function (message) { return (!!message.parentMessageId && !!message.parentMessage); };
var isTemplateMessage = function (message) {
    var _a;
    return !!(message && ((_a = message.extendedMessagePayload) === null || _a === void 0 ? void 0 : _a['template']));
};
var UI_CONTAINER_TYPES;
(function (UI_CONTAINER_TYPES) {
    UI_CONTAINER_TYPES["DEFAULT"] = "";
    UI_CONTAINER_TYPES["WIDE"] = "ui_container_type__wide";
    UI_CONTAINER_TYPES["DEFAULT_CAROUSEL"] = "ui_container_type__default-carousel";
})(UI_CONTAINER_TYPES || (UI_CONTAINER_TYPES = {}));
var getMessageContentMiddleClassNameByContainerType = function (_a) {
    var _b, _c;
    var message = _a.message, isMobile = _a.isMobile;
    /**
     * FULL: template message only.
     * WIDE: all message types.
     */
    var containerType = (_c = (_b = message.extendedMessagePayload) === null || _b === void 0 ? void 0 : _b['ui']) === null || _c === void 0 ? void 0 : _c['container_type'];
    if (!isMobile)
        return UI_CONTAINER_TYPES.DEFAULT;
    if (containerType === MessageContentMiddleContainerType.WIDE) {
        return UI_CONTAINER_TYPES.WIDE;
    }
    return UI_CONTAINER_TYPES.DEFAULT;
};
var isOGMessage = function (message) {
    if (!message || !isUserMessage(message))
        return false;
    return (!!message.ogMetaData
        && !!(message.ogMetaData.url || message.ogMetaData.title || message.ogMetaData.description || message.ogMetaData.defaultImage));
};
var isTextMessage = function (message) {
    return isUserMessage(message);
};
var isThumbnailMessage = function (message) {
    if (!message || !isFileMessage(message))
        return false;
    return isSupportedFileView(message.type);
};
var isImageMessage = function (message) {
    if (!message || !isFileMessage(message))
        return false;
    return isThumbnailMessage(message) && isImage(message.type);
};
var isVideoMessage = function (message) {
    if (!message || !isFileMessage(message))
        return false;
    return isThumbnailMessage(message) && isVideo(message.type);
};
var isGifMessage = function (message) {
    if (!message || !isFileMessage(message))
        return false;
    return isThumbnailMessage(message) && isGif(message.type);
};
var isAudioMessage = function (message) {
    if (!message || !isFileMessage(message))
        return false;
    return isAudio(message.type);
};
var isImageFileInfo = function (fileInfo) {
    if (!fileInfo)
        return false;
    return !!fileInfo.mimeType && (isImage(fileInfo.mimeType) || isGif(fileInfo.mimeType));
};
var isAudioMessageMimeType = function (type) { return (/^audio\//.test(type)); };
var isVoiceMessageMimeType = function (type) { return (/^voice\//.test(type)); };
var isVoiceMessage = function (message) {
    var _a, _b, _c, _d;
    if (!message || !isFileMessage(message) || !message.type)
        return false;
    // ex) audio/m4a OR audio/m4a;sbu_type=voice
    var _e = message.type.split(';'), mimeType = _e[0], typeParameter = _e[1];
    if (!isAudioMessageMimeType(mimeType)) {
        return false;
    }
    if (typeParameter) {
        var _f = typeParameter.split('='), key = _f[0], value = _f[1];
        return key === 'sbu_type' && value === 'voice';
    }
    // ex) message.metaArrays = [{ key: 'KEY_INTERNAL_MESSAGE_TYPE', value: ['voice/m4a'] }]
    return isVoiceMessageMimeType((_d = (_c = (_b = (_a = message === null || message === void 0 ? void 0 : message.metaArrays) === null || _a === void 0 ? void 0 : _a.find(function (metaArray) { return metaArray.key === 'KEY_INTERNAL_MESSAGE_TYPE'; })) === null || _b === void 0 ? void 0 : _b.value) === null || _c === void 0 ? void 0 : _c[0]) !== null && _d !== void 0 ? _d : '');
};
var isEditedMessage = function (message) { return isUserMessage(message) && ((message === null || message === void 0 ? void 0 : message.updatedAt) > 0); };
var getUIKitMessageTypes = function () { return (__assign({}, UIKitMessageTypes)); };
/**
 * Do not use this for MultipleFilesMessage. Use isMultipleFilesMessage() instead.
 */
var getUIKitMessageType = function (message) {
    if (isAdminMessage(message))
        return UIKitMessageTypes.ADMIN;
    if (isUserMessage(message)) {
        return isOGMessage(message) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;
    }
    // This is only a safeguard to not return UNKNOWN for MFM.
    if (isMultipleFilesMessage(message)) {
        return UIKitMessageTypes.MULTIPLE_FILES;
    }
    if (isFileMessage(message)) {
        if (isThumbnailMessage(message)) {
            return UIKitMessageTypes.THUMBNAIL;
        }
        if (isVoiceMessage(message)) {
            return UIKitFileTypes.VOICE;
        }
        return UIKitMessageTypes.FILE;
    }
    return UIKitMessageTypes.UNKNOWN;
};
var reducer = function (accumulator, currentValue) {
    if (Array.isArray(currentValue)) {
        return __spreadArray(__spreadArray([], accumulator, true), currentValue, true);
    }
    else {
        accumulator.push(currentValue);
        return accumulator;
    }
};
var getClassName = function (classNames) { return (Array.isArray(classNames)
    ? classNames.reduce(reducer, []).join(' ')
    : classNames); };
var startsWithAtAndEndsWithBraces = function (str) {
    var regex = /^\{@.*\}$/;
    return regex.test(str);
};
var removeAtAndBraces = function (str) {
    return str.replace(/^\{@|}$/g, '');
};
var isReactedBy = function (userId, reaction) { return (reaction.userIds.some(function (reactorUserId) { return reactorUserId === userId; })); };
var getEmojiTooltipString = function (reaction, userId, memberNicknamesMap, stringSet) {
    var you = '';
    if (isReactedBy(userId, reaction)) {
        you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;
    }
    return ("".concat(reaction.userIds
        .filter(function (reactorUserId) { return reactorUserId !== userId; })
        .map(function (reactorUserId) { return (memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER); })
        .join(', ')).concat(you));
};
function getSuggestedReplies(message) {
    var _a;
    if ((message === null || message === void 0 ? void 0 : message.extendedMessagePayload) && Array.isArray((_a = message === null || message === void 0 ? void 0 : message.extendedMessagePayload) === null || _a === void 0 ? void 0 : _a.suggested_replies)) {
        return message.extendedMessagePayload.suggested_replies;
    }
    else {
        return [];
    }
}
var URL_REG = /^((http|https):\/\/)?([a-z\d-]+\.)+[a-z]{2,}(\:[0-9]{1,5})?(\/[-a-zA-Z\d%_.~+&=]*)*(\?[;&a-zA-Z\d%_.~+=-]*)?(#\S*)?$/;
/** @deprecated
 * URL detection in a message text will be handled in utils/tokens/tokenize.ts
 */
var isUrl = function (text) { return URL_REG.test(text); };
var truncateString = function (fullStr, strLen) {
    if (!strLen)
        strLen = 40;
    if (fullStr === null || fullStr === undefined)
        return '';
    if (fullStr.length <= strLen)
        return fullStr;
    var separator = '...';
    var sepLen = separator.length;
    var charsToShow = strLen - sepLen;
    var frontChars = Math.ceil(charsToShow / 2);
    var backChars = Math.floor(charsToShow / 2);
    return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
};
var bundle_janisM9b_copyToClipboard = function (text) {
    // @ts-ignore: Unreachable code error
    if (window.clipboardData && window.clipboardData.setData) {
        // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
        // @ts-ignore: Unreachable code error
        return window.clipboardData.setData('Text', text);
    }
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = text;
        textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.
        document.body.appendChild(textarea);
        textarea.select();
        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        }
        catch (ex) {
            return false;
        }
        finally {
            document.body.removeChild(textarea);
        }
    }
    return false;
};
var getEmojiListAll = function (emojiContainer) {
    var _a;
    return ((_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a === void 0 ? void 0 : _a.map(function (emojiCategory) { return emojiCategory.emojis; }).reduce(function (prevArr, currArr) { return prevArr.concat(currArr); }, []));
};
var getEmojiMapAll = function (emojiContainer) {
    var _a;
    var emojiMap = new Map();
    (_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a === void 0 ? void 0 : _a.forEach(function (category) {
        var _a;
        (_a = category === null || category === void 0 ? void 0 : category.emojis) === null || _a === void 0 ? void 0 : _a.forEach(function (emoji) {
            if (emoji && emoji.key) {
                emojiMap.set(emoji.key, emoji);
            }
        });
    });
    return emojiMap;
};
var findEmojiUrl = function (targetKey) { return function (_a) {
    var key = _a.key;
    return key === targetKey;
}; };
var getEmojiUrl = function (emojiContainer, emojiKey) {
    var _a, _b;
    var isFindingKey = findEmojiUrl(emojiKey !== null && emojiKey !== void 0 ? emojiKey : '');
    return ((_b = (_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories.find(function (category) { return category.emojis.some(isFindingKey); })) === null || _a === void 0 ? void 0 : _a.emojis.find(isFindingKey)) === null || _b === void 0 ? void 0 : _b.url) || '';
};
var getUserName = function (user) { return ((user === null || user === void 0 ? void 0 : user.friendName) || (user === null || user === void 0 ? void 0 : user.nickname) || (user === null || user === void 0 ? void 0 : user.userId)); };
var getSenderName = function (message) { return ((message === null || message === void 0 ? void 0 : message.sender) && getUserName(message === null || message === void 0 ? void 0 : message.sender)); };
var hasSameMembers = function (a, b) {
    if (a === b) {
        return true;
    }
    if (a == null || b == null) {
        return false;
    }
    if (a.length !== b.length) {
        return false;
    }
    var sortedA = __spreadArray([], a, true).sort();
    var sortedB = __spreadArray([], b, true).sort();
    for (var i = 0; i < sortedA.length; ++i) {
        if (sortedA[i] !== sortedB[i]) {
            return false;
        }
    }
    return true;
};
var isFriend = function (user) {
    if (!user)
        return false;
    return !!(user.friendDiscoveryKey || user.friendName);
};
var filterMessageListParams = function (params, message) {
    var _a, _b, _c, _d;
    var _e = params.customTypesFilter, customTypesFilter = _e === void 0 ? [] : _e;
    // @ts-ignore
    if ((params === null || params === void 0 ? void 0 : params.messageTypeFilter) && params.messageTypeFilter !== message.messageType) {
        return false;
    }
    if ((customTypesFilter === null || customTypesFilter === void 0 ? void 0 : customTypesFilter.length) > 0) {
        var customTypes = customTypesFilter.filter(function (item) { return item !== '*'; });
        // Because Chat SDK inserts '*' when customTypes is empty
        if (customTypes.length > 0 && !customTypes.includes(message.customType)) {
            return false;
        }
    }
    if ((params === null || params === void 0 ? void 0 : params.senderUserIdsFilter) && ((_a = params === null || params === void 0 ? void 0 : params.senderUserIdsFilter) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        if (((_b = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _b === void 0 ? void 0 : _b.call(message)) || ((_c = message === null || message === void 0 ? void 0 : message.isFileMessage) === null || _c === void 0 ? void 0 : _c.call(message))) {
            var messageSender = message.sender || message['_sender'];
            if (!((_d = params === null || params === void 0 ? void 0 : params.senderUserIdsFilter) === null || _d === void 0 ? void 0 : _d.includes(messageSender === null || messageSender === void 0 ? void 0 : messageSender.userId))) {
                return false;
            }
        }
        else {
            return false;
        }
    }
    if (!(params === null || params === void 0 ? void 0 : params.includeParentMessageInfo) && ((message === null || message === void 0 ? void 0 : message.parentMessageId) || (message === null || message === void 0 ? void 0 : message.parentMessage))) {
        return false;
    }
    return true;
};
var filterChannelListParams = function (params, channel, currentUserId) {
    var _a, _b, _c, _d, _e, _f, _g;
    var includeEmpty = params.includeEmpty, includeFrozen = params.includeFrozen, searchFilter = params.searchFilter, userIdsFilter = params.userIdsFilter, customTypesFilter = params.customTypesFilter, channelUrlsFilter = params.channelUrlsFilter, customTypeStartsWithFilter = params.customTypeStartsWithFilter, channelNameContainsFilter = params.channelNameContainsFilter, nicknameContainsFilter = params.nicknameContainsFilter, myMemberStateFilter = params.myMemberStateFilter, hiddenChannelFilter = params.hiddenChannelFilter, unreadChannelFilter = params.unreadChannelFilter, publicChannelFilter = params.publicChannelFilter, superChannelFilter = params.superChannelFilter, _h = params.metadataKey, metadataKey = _h === void 0 ? '' : _h, _j = params.metadataValues, metadataValues = _j === void 0 ? ['a', 'b'] : _j, metadataValueStartsWith = params.metadataValueStartsWith;
    if (!includeEmpty && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {
        return false;
    }
    if ((searchFilter === null || searchFilter === void 0 ? void 0 : searchFilter.query) && ((_b = (_a = searchFilter === null || searchFilter === void 0 ? void 0 : searchFilter.fields) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > 0) {
        var searchQuery_1 = searchFilter.query;
        var searchFields = searchFilter.fields;
        if (searchQuery_1 && searchFields && searchFields.length > 0) {
            if (!searchFields.some(function (searchField) {
                var _a, _b;
                switch (searchField) {
                    case 'channel_name': {
                        return (_a = channel === null || channel === void 0 ? void 0 : channel.name) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(searchQuery_1.toLowerCase());
                    }
                    case 'member_nickname': {
                        return (_b = channel === null || channel === void 0 ? void 0 : channel.members) === null || _b === void 0 ? void 0 : _b.some(function (member) { return member.nickname.toLowerCase().includes(searchQuery_1.toLowerCase()); });
                    }
                    default: {
                        return true;
                    }
                }
            })) {
                return false;
            }
        }
    }
    if (((_c = userIdsFilter === null || userIdsFilter === void 0 ? void 0 : userIdsFilter.userIds) === null || _c === void 0 ? void 0 : _c.length) > 0) {
        var includeMode = userIdsFilter.includeMode, queryType = userIdsFilter.queryType;
        var userIds = userIdsFilter.userIds;
        var memberIds_1 = (_d = channel === null || channel === void 0 ? void 0 : channel.members) === null || _d === void 0 ? void 0 : _d.map(function (member) { return member.userId; });
        if (!includeMode) { // exact match
            if (!userIds.includes(currentUserId)) {
                userIds.push(currentUserId); // add the caller's userId if not added already.
            }
            if (((_e = channel === null || channel === void 0 ? void 0 : channel.members) === null || _e === void 0 ? void 0 : _e.length) > userIds.length) {
                return false; // userIds may contain one or more non-member(s).
            }
            if (!hasSameMembers(userIds, memberIds_1)) {
                return false;
            }
        }
        else if (userIds.length > 0) { // inclusive
            switch (queryType) {
                case 'AND': {
                    if (userIds.some(function (userId) { return !memberIds_1.includes(userId); })) {
                        return false;
                    }
                    break;
                }
                case 'OR': {
                    if (userIds.every(function (userId) { return !memberIds_1.includes(userId); })) {
                        return false;
                    }
                    break;
                }
            }
        }
    }
    if (includeEmpty === false && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {
        return false;
    }
    if (includeFrozen === false && (channel === null || channel === void 0 ? void 0 : channel.isFrozen) === true) {
        return false;
    }
    if (customTypesFilter && !customTypesFilter.includes(channel === null || channel === void 0 ? void 0 : channel.customType)) {
        return false;
    }
    if (customTypeStartsWithFilter && !new RegExp("^".concat(customTypeStartsWithFilter)).test(channel === null || channel === void 0 ? void 0 : channel.customType)) {
        return false;
    }
    if (channelNameContainsFilter && !((_f = channel === null || channel === void 0 ? void 0 : channel.name) === null || _f === void 0 ? void 0 : _f.toLowerCase().includes(channelNameContainsFilter.toLowerCase()))) {
        return false;
    }
    if (nicknameContainsFilter) {
        var lowerCasedSubString_1 = nicknameContainsFilter.toLowerCase();
        if ((_g = channel === null || channel === void 0 ? void 0 : channel.members) === null || _g === void 0 ? void 0 : _g.every(function (member) { return !member.nickname.toLowerCase().includes(lowerCasedSubString_1); })) {
            return false;
        }
    }
    if (channelUrlsFilter && !channelUrlsFilter.includes(channel === null || channel === void 0 ? void 0 : channel.url)) {
        return false;
    }
    if (myMemberStateFilter) {
        switch (myMemberStateFilter) {
            case 'joined_only':
                if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'joined') {
                    return false;
                }
                break;
            case 'invited_only':
                if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited') {
                    return false;
                }
                break;
            case 'invited_by_friend':
                if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || !isFriend(channel === null || channel === void 0 ? void 0 : channel.inviter)) {
                    return false;
                }
                break;
            case 'invited_by_non_friend':
                if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || isFriend(channel === null || channel === void 0 ? void 0 : channel.inviter)) {
                    return false;
                }
                break;
        }
    }
    if (hiddenChannelFilter) {
        switch (hiddenChannelFilter) {
            case 'unhidden_only':
                if ((channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'unhidden') {
                    return false;
                }
                break;
            case 'hidden_only':
                if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden)) {
                    return false;
                }
                break;
            case 'hidden_allow_auto_unhide':
                if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_allow_auto_unhide') {
                    return false;
                }
                break;
            case 'hidden_prevent_auto_unhide':
                if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_prevent_auto_unhide') {
                    return false;
                }
                break;
        }
    }
    if (unreadChannelFilter) {
        switch (unreadChannelFilter) {
            case 'unread_message':
                if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) === 0) {
                    return false;
                }
                break;
        }
    }
    if (publicChannelFilter) {
        switch (publicChannelFilter) {
            case 'public':
                if (!(channel === null || channel === void 0 ? void 0 : channel.isPublic)) {
                    return false;
                }
                break;
            case 'private':
                if (channel === null || channel === void 0 ? void 0 : channel.isPublic) {
                    return false;
                }
                break;
        }
    }
    if (superChannelFilter) {
        switch (superChannelFilter) {
            case 'super':
                if (!(channel === null || channel === void 0 ? void 0 : channel.isSuper)) {
                    return false;
                }
                break;
            case 'nonsuper':
                if (channel === null || channel === void 0 ? void 0 : channel.isSuper) {
                    return false;
                }
                break;
        }
    }
    var _k = channel.cachedMetaData, cachedMetaData = _k === void 0 ? {} : _k;
    if (metadataKey && (metadataValues || metadataValueStartsWith)) {
        var metadataValue_1 = cachedMetaData[metadataKey];
        if (!metadataValue_1) {
            return false;
        }
        if (metadataValues && !metadataValues.every(function (value) { return metadataValue_1.includes(value); })) {
            return false;
        }
        if (metadataValueStartsWith && !metadataValue_1.startsWith(metadataValueStartsWith)) {
            return false;
        }
    }
    return true;
};
var bundle_janisM9b_sortChannelList = function (channels, order) {
    var compareFunc = K(order)
        .with(_bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL, function () { return (function (a, b) { return a.name.localeCompare(b.name); }); })
        .with(_bundle_7b94e16f_E.CHRONOLOGICAL, function () { return (function (a, b) { return b.createdAt - a.createdAt; }); })
        .otherwise(function () { return (function (a, b) { var _a, _b, _c, _d; return ((_b = (_a = b.lastMessage) === null || _a === void 0 ? void 0 : _a.createdAt) !== null && _b !== void 0 ? _b : Number.MIN_SAFE_INTEGER) - ((_d = (_c = a.lastMessage) === null || _c === void 0 ? void 0 : _c.createdAt) !== null && _d !== void 0 ? _d : Number.MIN_SAFE_INTEGER); }); });
    return channels.sort(compareFunc);
};
/**
 * Upserts given channel to the channel list and then returns the sorted channel list.
 */
var getChannelsWithUpsertedChannel = function (_channels, channel, order) {
    var channels = __spreadArray([], _channels, true);
    var findingIndex = channels.findIndex(function (ch) { return ch.url === channel.url; });
    if (findingIndex !== -1) {
        channels[findingIndex] = channel;
    }
    else {
        channels.push(channel);
    }
    return bundle_janisM9b_sortChannelList(channels, order !== null && order !== void 0 ? order : _bundle_7b94e16f_E.LATEST_LAST_MESSAGE);
};
var StringObjType;
(function (StringObjType) {
    StringObjType["normal"] = "normal";
    StringObjType["mention"] = "mention";
    StringObjType["url"] = "url";
})(StringObjType || (StringObjType = {}));
/**
 * @deprecated
 * use modules/message/utils/tokenize instead
 */
var convertWordToStringObj = function (word, _users, _template) {
    var users = _users || [];
    var template = _template || '@'; // Use global variable
    var resultArray = [];
    var regex = RegExp("".concat(template, "{(").concat(users.map(function (user) { return user === null || user === void 0 ? void 0 : user.userId; }).join('|'), ")}"), 'g');
    var excutionResult;
    var lastIndex = 0;
    var _loop_1 = function () {
        var template_1 = excutionResult[0], userId = excutionResult[1];
        var endIndex = regex.lastIndex;
        var startIndex = endIndex - template_1.length;
        // Normal text
        var normalText = word.slice(lastIndex, startIndex);
        resultArray.push({
            type: isUrl(normalText) ? StringObjType.url : StringObjType.normal,
            value: normalText,
        });
        // Mention template
        var mentionedUser = users.find(function (user) { return (user === null || user === void 0 ? void 0 : user.userId) === userId; });
        if (!mentionedUser) {
            resultArray.push({
                type: StringObjType.normal,
                value: template_1, // because template is the origin text
            });
        }
        else {
            resultArray.push({
                type: StringObjType.mention,
                value: (mentionedUser === null || mentionedUser === void 0 ? void 0 : mentionedUser.nickname) || '(No name)',
                userId: userId,
            });
        }
        lastIndex = endIndex;
    };
    while ((excutionResult = regex.exec(word)) !== null) {
        _loop_1();
    }
    if (lastIndex < word.length) {
        // Normal text
        var normalText = word.slice(lastIndex);
        resultArray.push({
            type: isUrl(normalText) ? StringObjType.url : StringObjType.normal,
            value: normalText,
        });
    }
    return resultArray;
};
var arrayEqual = function (array1, array2) {
    if (Array.isArray(array1) && Array.isArray(array2) && array1.length === array2.length) {
        for (var i = 0; i < array1.length; i++) {
            if (array1[i] !== array2[i]) {
                return false;
            }
        }
        return true;
    }
    return false;
};
var bundle_janisM9b_isSendableMessage = function (message) {
    return Boolean(message) && 'sender' in message;
};


//# sourceMappingURL=bundle-janisM9b.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CFgnDIJC.js
var USER_ACTIONS = {
    INIT_USER: 'INIT_USER',
    RESET_USER: 'RESET_USER',
    UPDATE_USER_INFO: 'UPDATE_USER_INFO',
};


//# sourceMappingURL=bundle-CFgnDIJC.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-uIqOEfCa.js
/* eslint-disable no-bitwise */
/* eslint-disable eqeqeq */
/* eslint-disable no-mixed-operators */
// https://stackoverflow.com/a/2117523
// used mainly for dom key generation
var uuidv4 = function () { return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
    var r = Math.random() * 16 | 0;
    var v = c === 'x' ? r : (r & 0x3 | 0x8);
    return v.toString(16);
}); };


//# sourceMappingURL=bundle-uIqOEfCa.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BjTYwue9.js





function useOnlineStatus(sdk, logger) {
    var _a, _b;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(
    // window is undefined in SSR env
    typeof window !== 'undefined'
        ? ((_b = (_a = window === null || window === void 0 ? void 0 : window.navigator) === null || _a === void 0 ? void 0 : _a.onLine) !== null && _b !== void 0 ? _b : true)
        : true), isOnline = _c[0], setIsOnline = _c[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var uniqueHandlerId = uuidv4();
        try {
            logger.warning('sdk changed', uniqueHandlerId);
            var handler = new oi({
                onDisconnected: function () {
                    setIsOnline(false);
                    logger.warning('onDisconnected', { isOnline: isOnline });
                },
                onReconnectStarted: function () {
                    setIsOnline(false);
                    logger.warning('onReconnectStarted', { isOnline: isOnline });
                },
                onReconnectSucceeded: function () {
                    setIsOnline(true);
                    logger.warning('onReconnectSucceeded', { isOnline: isOnline });
                },
                onReconnectFailed: function () {
                    sdk.reconnect();
                    logger.warning('onReconnectFailed');
                },
            });
            if (sdk === null || sdk === void 0 ? void 0 : sdk.addConnectionHandler) {
                // workaround -> addConnectionHandler invalidates session handler
                // provided through configureSession
                sdk.addConnectionHandler(uniqueHandlerId, handler);
                logger.info('Added ConnectionHandler', uniqueHandlerId);
            }
        }
        catch (_a) {
            //
        }
        return function () {
            try {
                sdk.removeConnectionHandler(uniqueHandlerId);
                logger.info('Removed ConnectionHandler', uniqueHandlerId);
            }
            catch (_a) {
                //
            }
        };
    }, [sdk]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var tryReconnect = function () {
            try {
                logger.warning('Try reconnecting SDK');
                if (sdk.connectionState !== 'OPEN') { // connection is not broken yet
                    sdk.reconnect();
                }
            }
            catch (_a) {
                //
            }
        };
        // addEventListener version
        window.addEventListener('online', tryReconnect);
        return function () {
            window.removeEventListener('online', tryReconnect);
        };
    }, [sdk]);
    // add offline-class to body
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var body = document.querySelector('body');
        if (!isOnline && !(sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled)) {
            try {
                body === null || body === void 0 ? void 0 : body.classList.add('sendbird__offline');
                logger.info('Added class sendbird__offline to body');
            }
            catch (e) {
                //
            }
        }
        else {
            try {
                body === null || body === void 0 ? void 0 : body.classList.remove('sendbird__offline');
                logger.info('Removed class sendbird__offline from body');
            }
            catch (e) {
                //
            }
        }
    }, [isOnline, sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled]);
    return isOnline;
}

var TIMEOUT = 2000;
/*
  * This is a factory function that returns a scheduler.
  * The scheduler is a queue that calls the callback function on intervals.
  * If interval is empty, the callback function is called immediately.
  * If interval is not empty, the callback function is called after the interval.
*/
function schedulerFactory(_a) {
    var logger = _a.logger, timeout = _a.timeout, cb = _a.cb;
    var queue = [];
    var interval = null;
    var push = function (channel) {
        var channelPresent = queue.find(function (c) { return c.url === channel.url; });
        if (!channelPresent) {
            queue.push(channel);
        }
        else {
            logger.info('Channel: Mark as read already in queue', { channel: channel });
        }
        // start the interval if it's not already running
        if (interval) {
            return;
        }
        var item = queue.shift();
        if (item) {
            cb(item);
        }
        interval = setInterval(function () {
            if (queue.length === 0 && interval) {
                clearInterval(interval);
                interval = null;
                return;
            }
            var item = queue.shift();
            if (item) {
                cb(item);
            }
        }, (timeout || TIMEOUT));
    };
    var clear = function () {
        queue = [];
        if (interval) {
            clearInterval(interval);
            interval = null;
        }
    };
    return {
        push: push,
        clear: clear,
        getQueue: function () { return queue; },
    };
}

// this hook accepts a callback to run component is unmounted
function useUnmount(callback, deps) {
    if (deps === void 0) { deps = []; }
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        return function () {
            callback();
        };
    }, deps);
}

function useMarkAsDeliveredScheduler(_a, _b) {
    var _this = this;
    var isConnected = _a.isConnected;
    var logger = _b.logger;
    var markAsDeliveredScheduler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return schedulerFactory({
        logger: logger,
        cb: function (channel) { return __awaiter(_this, void 0, void 0, function () {
            var error_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, channel.markAsDelivered()];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        error_1 = _a.sent();
                        logger.warning('Channel: Mark as delivered failed', { channel: channel, error: error_1 });
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        }); },
    }); }, []);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        // for simplicity, we clear the queue when the connection is lost
        if (!isConnected) {
            markAsDeliveredScheduler.clear();
        }
    }, [isConnected]);
    useUnmount(function () { markAsDeliveredScheduler.clear(); });
    return markAsDeliveredScheduler;
}


//# sourceMappingURL=bundle-BjTYwue9.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/poll.js
var poll_g=function(r){function g(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="poll",t}return Object(_bundle_0b1520ed["fc" /* c */])(g,r),g.prototype.init=function(t,a){var n=a.sdkState,o=a.dispatcher,i=a.sessionManager,s=a.requestQueue,l=a.logger,u=a.onlineDetector,c=a.cacheContext;r.prototype.init.call(this,t,{sdkState:n,dispatcher:o,sessionManager:i,requestQueue:s,logger:l,onlineDetector:u,cacheContext:c}),this._manager=new _bundle_0b1520ed["U" /* aL */](t,{sdkState:n,dispatcher:o,sessionManager:i,requestQueue:s,logger:l,onlineDetector:u,cacheContext:c})},g.prototype.create=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_0b1520ed["ib" /* a_ */]),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["D" /* a$ */])(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.create(e)]}))}))},g.prototype.get=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_0b1520ed["Jb" /* b0 */]),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["Kb" /* b1 */])(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.get(e)]}))}))},g.prototype.getOption=function(t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(a){return e=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},_bundle_0b1520ed["Lb" /* b2 */]),t),Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["Mb" /* b3 */])(e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),[2,this._manager.getOption(e)]}))}))},g.prototype.buildPollFromSerializedData=function(t){return this._manager.buildPollFromSerializedData(t)},g}(_bundle_0b1520ed["hb" /* aY */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/lib/__bundle-ebf6c127.js
var _bundle_ebf6c127_e=function(t){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},_bundle_ebf6c127_r=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Object(_bundle_0b1520ed["fc" /* c */])(e,n),e}(_bundle_0b1520ed["Nb" /* b6 */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/index.js
var chat_ht=function(e){this.key=e.key,this.url=e.url},chat_ft=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map((function(e){return new chat_ht(e)})):[]},chat_pt=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new chat_ft(e)})):[]},chat_vt={profileImage:void 0,profileUrl:void 0,nickname:void 0},chat_gt=function(e){return function(t,n){return Object(_bundle_0b1520ed["B" /* _ */])(void 0,void 0,void 0,(function(){var r,s,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(d){switch(d.label){case 0:switch(t){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4]}return[3,11];case 1:return n(),[3,12];case 2:return[4,e.store.clear()];case 3:return d.sent(),n(),[3,12];case 4:return d.trys.push([4,9,,10]),r=function(e){return{v2:function(){return Object(_bundle_0b1520ed["B" /* _ */])(void 0,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,e.commitSchema([{collectionName:zr,keyName:Br,index:[_bundle_7b94e16f_L(_bundle_7b94e16f_E.LATEST_LAST_MESSAGE),_bundle_7b94e16f_L(_bundle_7b94e16f_E.CHRONOLOGICAL),_bundle_7b94e16f_L(_bundle_7b94e16f_E.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:jr,keyName:Qr,index:[Es(_bundle_dc8db3c3_s.CHANNEL_LATEST),Es(_bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE)]},{collectionName:As,keyName:Ns,index:[Es(_bundle_dc8db3c3_s.CHANNEL_LATEST),Es(_bundle_dc8db3c3_s.NEWEST_CHILD_MESSAGE)]},{collectionName:Wr,keyName:Yr}])];case 1:return[2,t.sent()]}}))}))},v3:function(){return Object(_bundle_0b1520ed["B" /* _ */])(void 0,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,e.commitSchema([{collectionName:Xr,keyName:Zr,index:[_bundle_ebf6c127_e("latest_last_message")]}])];case 1:return[2,t.sent()]}}))}))},v4:function(){return Object(_bundle_0b1520ed["B" /* _ */])(void 0,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,e.commitSchema([{collectionName:Vr,keyName:Hr,index:[Ts()]}])];case 1:return[2,t.sent()]}}))}))}}}(e),s=r.v2,u=r.v3,c=r.v4,[4,s()];case 5:return d.sent(),[4,u()];case 6:return d.sent(),[4,c()];case 7:return d.sent(),[4,e.collection(jr).removeIf({where:{channelType:_bundle_0b1520ed["d" /* C */].OPEN}})];case 8:case 9:return d.sent(),[3,10];case 10:return n(),[3,12];case 11:n(),d.label=12;case 12:return[2]}}))}))}},chat_mt=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},chat_bt=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?chat_mt:n,i=t.initialState,s=void 0===i?"visible":i,o=t.isEnabled,a=void 0===o||o,u=t.pauseCheckDelay,c=void 0===u?3e4:u,d=e.call(this)||this;return d._pauseCheckDelay=3e4,d._currentState="visible",d._getVisibilityState=r,d._pauseCheckDelay=c,d._currentState=s,d._isEnabled=a,d._boundToggleState=d._toggleState.bind(d),d}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(_bundle_0b1520ed["f" /* E */]),chat_t=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:_bundle_0b1520ed["b" /* A */].GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),chat_yt=function(e){function t(t){var n=t.userId,r=t.nickname,i=t.profileUrl,s=t.profileImage,o=t.preferredLanguages,a=e.call(this)||this;return a.method=_bundle_0b1520ed["b" /* A */].PUT,a.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n)),a.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({nickname:r,profile_url:i,profile_file:s,preferred_languages:o})),a}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_wt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _bundle_0b1520ed["v" /* U */](t,Object(_bundle_0b1520ed["jc" /* g */])({},n)),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_kt=function(e){function t(t){var n=t.userId,r=t.token,i=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,a=e.call(this)||this;return a.method=_bundle_0b1520ed["b" /* A */].POST,a.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/apns"),a.params=Object(_bundle_0b1520ed["hc" /* e */])({apns_device_token:r,always_push:!0,device_os:i,device_manufacturer:s,system_push_enabled:o}),a}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?_bundle_0b1520ed["q" /* P */][n.type.toLowerCase()]:_bundle_0b1520ed["q" /* P */].UNKNOWN,r.user=new _bundle_0b1520ed["v" /* U */](t,n.user),r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_It=function(e){function t(t){var n=t.userId,r=t.token,i=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,a=e.call(this)||this;return a.method=_bundle_0b1520ed["b" /* A */].POST,a.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/gcm"),a.params=Object(_bundle_0b1520ed["hc" /* e */])({gcm_reg_token:r,always_push:!0,device_os:i,device_manufacturer:s,system_push_enabled:o}),a}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?_bundle_0b1520ed["q" /* P */][n.type.toLowerCase()]:_bundle_0b1520ed["q" /* P */].UNKNOWN,r.user=new _bundle_0b1520ed["v" /* U */](t,n.user),r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_St=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].DELETE,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _bundle_0b1520ed["v" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_Ct=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].DELETE,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _bundle_0b1520ed["v" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_Et=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].DELETE,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/apns"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?_bundle_0b1520ed["q" /* P */][n.type.toLowerCase()]:_bundle_0b1520ed["q" /* P */].UNKNOWN,r.user=new _bundle_0b1520ed["v" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_Tt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].DELETE,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/gcm"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?_bundle_0b1520ed["q" /* P */][n.type.toLowerCase()]:_bundle_0b1520ed["q" /* P */].UNKNOWN,r.user=new _bundle_0b1520ed["v" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_Pt=function(e){function t(t){var n=t.userId,r=t.type,i=t.token,s=t.ts,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].GET,o.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),o.params={created_ts:s,token:i},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Dt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?_bundle_0b1520ed["q" /* P */][n.type.toLowerCase()]:_bundle_0b1520ed["q" /* P */].UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Ut=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_At=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),i.params={auto_accept:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Nt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Mt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Lt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Rt=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,i=t.startHour,s=t.startMin,o=t.endHour,a=t.endMin,u=t.timezone,c=e.call(this)||this;return c.method=_bundle_0b1520ed["b" /* A */].PUT,c.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),c.params={do_not_disturb:r,start_hour:i,start_min:s,end_hour:o,end_min:a,timezone:u},c}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_zt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Qt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Ft=function(e){function t(t){var n=t.userId,r=t.snoozeOn,i=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=_bundle_0b1520ed["b" /* A */].PUT,o.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),o.params={snooze_enabled:r,snooze_start_ts:i,snooze_end_ts:s},o}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_qt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Ht=function(e){function t(t){var n=t.userId,r=t.blockedUserId,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].POST,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/block"),i.params={target_id:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _bundle_0b1520ed["v" /* U */](t,n),r}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_xt=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].DELETE,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_Kt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Gt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Wt=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),i.params={push_trigger_option:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Bt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Vt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/template"),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Yt=function(e){function t(t){var n=t.userId,r=t.templateName,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/push/template"),i.params={name:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_$t=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_Xt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].GET,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/friends/changelogs"),i.params={token:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_Zt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),updatedUsers:n.updated.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_en=function(e){function t(t){var n=t.userId,r=t.discoveries,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_tn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_nn=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].DELETE,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discovery_keys:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_rn=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].POST,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_sn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _bundle_0b1520ed["v" /* U */](t,e)})),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_on=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].DELETE,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_an=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(n,"/allow_friend_discovery"),r.params={},r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_un=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_cn=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,i=e.call(this)||this;return i.method=_bundle_0b1520ed["b" /* A */].PUT,i.path="".concat(_bundle_0b1520ed["gc" /* d */],"/").concat(n,"/allow_friend_discovery"),i.params={allow_friend_discovery:r},i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,e)}(_bundle_0b1520ed["kc" /* h */]);var chat_dn,chat_ln=function(e){function t(){var t=e.call(this)||this;return t.method=_bundle_0b1520ed["b" /* A */].GET,t.path=_bundle_0b1520ed["mc" /* j */],t}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_hn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new chat_pt(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_fn=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["mc" /* j */],"/").concat(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_pn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new chat_ft(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_vn=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=_bundle_0b1520ed["b" /* A */].GET,r.path="".concat(_bundle_0b1520ed["nc" /* k */],"/").concat(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_gn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new chat_ht(n),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]),chat_mn=function(e){function t(){var t=e.call(this)||this;return t.method=_bundle_0b1520ed["b" /* A */].GET,t.path="".concat(_bundle_0b1520ed["oc" /* l */]),t}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_bn=function(e){function t(t,n){var r,i=this,s=null!=n?n:{};return(i=e.call(this,t,n)||this).uikitConfiguration={string:JSON.stringify(s),json:s},i.updatedAt=null!==(r=null==n?void 0:n.updated_at)&&void 0!==r?r:0,i}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["kc" /* h */]);!function(e){e.DELIVERED="DELIVERED",e.CLICKED="CLICKED"}(chat_dn||(chat_dn={}));var chat_n,chat_yn=function(e){function t(t){var n=t.deviceToken,r=t.pushTrackingId,i=t.messageId,s=t.allowedPushNotification,o=t.channelKey,a=t.templateKey,u=t.eventType,c=t.notificationEventDeadline,l=e.call(this)||this;return l.method=_bundle_0b1520ed["b" /* A */].POST,l.path=_bundle_0b1520ed["pc" /* m */],l.params=Object(_bundle_0b1520ed["hc" /* e */])({device_token:n,push_tracking_id:r,message_id:i,allowed_push_notification:s,channel_key:o,template_key:a,event_type:u,notification_event_deadline:c}),l}return Object(_bundle_0b1520ed["fc" /* c */])(t,e),t}(_bundle_0b1520ed["ic" /* f */]),chat_wn=function(){function n(e,t,n){var r=this;this._storeInitialized=!1,this._iid=e,this.options=t;var s=_bundle_0b1520ed["w" /* V */].of(e),a=s.sdkState,u=s.cacheContext,c=s.dispatcher,d=s.sessionManager,l=s.requestQueue,h=s.logger,f=s.userEventHandlers,p=s.appStateToggleEnabled;this._onlineDetector=new chat_t({logger:h,connectionDelegate:{reconnect:function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(t=_bundle_0b1520ed["w" /* V */].of(e),n=t.sdkState,r=t.connectionManager,(i=t.sessionManager).session.hasSession)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.connect(i.session.authToken)];case 2:return o.sent(),[3,4];case 3:if(s=o.sent(),Object(_bundle_0b1520ed["p" /* O */])(s))throw s;return h.debug("connect failed by reconnect event = ",s),[3,4];case 4:return[3,9];case 5:if("foreground"!==n.appState)return[3,9];o.label=6;case 6:return o.trys.push([6,8,,9]),[4,r.resetAndReconnect()];case 7:return o.sent(),[3,9];case 8:if(a=o.sent(),Object(_bundle_0b1520ed["p" /* O */])(a))throw a;return h.debug("resetAndReconnect failed by reconnect event = ",a),[3,9];case 9:return c.dispatch(new _bundle_ebf6c127_r),[2]}}))}))},disconnect:function(){Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return[4,_bundle_0b1520ed["w" /* V */].of(e).connectionManager.disconnect()];case 1:return t.sent(),[2]}}))}))}))}}});var v=new _bundle_7b94e16f_S(e,{localCacheEnabled:u.localCacheEnabled,enableAutoResend:u.localCacheConfig.enableAutoResend,dispatcher:c,sdkState:a,logger:h});n.forEach((function(t){t.init(e,{sdkState:a,cacheContext:u,dispatcher:c,sessionManager:d,requestQueue:l,logger:h,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new chat_bt({isEnabled:p}),this._appStateChangeDetector.on("resume",(function(){h.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){h.debug("the page freezes"),r.setBackgroundState()})),c.on((function(t){var n;if(t instanceof _bundle_0b1520ed["e" /* D */]){if(t.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED)v.processNonAutoResendRegisteredPendingMessages()}else if(t instanceof _bundle_0b1520ed["x" /* W */]){if("USEV"===t.code){var s=t.as(_bundle_7b94e16f_T).event;if(s.category===_bundle_7b94e16f_C.FRIEND_DISCOVERED){var c=_bundle_7b94e16f_N.getDataAsFriendDiscoveredEvent(e,s).friendDiscoveries;Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,f.forEach((function(e){e.onFriendsDiscovered&&e.onFriendsDiscovered(c)}))]}))}))}))}}}else if(t instanceof _bundle_0b1520ed["i" /* H */]){var d=_bundle_0b1520ed["w" /* V */].of(r._iid).subscribedUnreadMessageCount,l=!1,p=t.ts;"number"==typeof p&&p>d.ts&&(d.all!==t.all&&(l=!0),d.all=t.all>=0?t.all:0,t.customTypes&&Object.keys(t.customTypes).forEach((function(e){d.customTypes[e]!==t.customTypes[e]&&(l=!0),d.customTypes[e]=t.customTypes[e]})),l=l&&d.ts>0,d.ts=p),l&&Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,f.forEach((function(e){e.onTotalUnreadMessageCountChanged&&e.onTotalUnreadMessageCountChanged({groupChannelCount:d.all,feedChannelCount:d.feed,customTypeUnreadCount:d.customTypes}),e.onTotalUnreadMessageCountUpdated&&e.onTotalUnreadMessageCountUpdated(d.all,d.customTypes)}))]}))}))}))}else t instanceof _bundle_0b1520ed["j" /* I */]?(u.preference.set(r._getUserProfileCacheKey(a.userId),_bundle_0b1520ed["k" /* J */].payloadify(t.userProfile)),(null===(n=t.userProfile.appInfo.notificationInfo)||void 0===n?void 0:n.isEnabled)&&u.preference.set(Object(_bundle_0b1520ed["l" /* K */])(r.appId),{value:!0})):t instanceof _bundle_0b1520ed["n" /* M */]&&t.error&&t.error.isSessionInvalidatedError&&(h.debug("session revoked."),r.disconnect())}))}return n.init=function(e){var t=e.appId,r=e.appVersion,i=e.modules,s=void 0===i?[]:i,o=e.options,a=void 0===o?new _bundle_0b1520ed["t" /* S */]:o,u=e.debugMode,c=void 0!==u&&u,d=e.customApiHost,l=e.customWebSocketHost,h=e.newInstance,f=void 0!==h&&h,p=e.logLevel,v=e.localCacheEnabled,g=void 0!==v&&v,m=e.localCacheConfig,b=void 0===m?new _bundle_0b1520ed["m" /* L */]:m,_=e.localCacheEncryption,y=e.useAsyncStorageStore,w=void 0===y?null:y,k=e.appStateToggleEnabled,I=void 0===k||k;if(!chat_n||f){var S="su-".concat(Object(_bundle_0b1520ed["qc" /* n */])()),C=null!=_?_:{encrypt:function(e){return e},decrypt:function(e){return e}},E=new fs({encryption:C});c||(E=Object(_bundle_0b1520ed["rc" /* o */])()?w?new vs({AsyncStorage:w,encryption:C}):new fs({encryption:C}):new ms({encryption:C})),new _bundle_0b1520ed["w" /* V */](S,{appId:t,appVersion:r,options:a,apiHost:null!=d?d:"https://api-".concat(t,".sendbird.com"),websocketHost:null!=l?l:"wss://ws-".concat(t,".sendbird.com"),store:E,encryption:C,logLevel:p,localCacheEnabled:g,localCacheConfig:b,debugMode:c,appStateToggleEnabled:I});var T=[new ea,new poll_g],P=new n(S,a,Object(_bundle_0b1520ed["sc" /* p */])(Object(_bundle_0b1520ed["sc" /* p */])([],Object(_bundle_0b1520ed["tc" /* q */])(s),!1),Object(_bundle_0b1520ed["tc" /* q */])(T),!1));return chat_n||(chat_n=P),P}return chat_n},Object.defineProperty(n,"instance",{get:function(){return chat_n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"version",{get:function(){return _bundle_0b1520ed["yc" /* v */]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appId",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appInfo",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).appInfo;return null!=e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appVersion",{get:function(){var e;return null!==(e=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"debugMode",{get:function(){return!!_bundle_0b1520ed["w" /* V */].of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"logLevel",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).logger.level},set:function(e){_bundle_0b1520ed["w" /* V */].of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isCacheEnabled",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheConfig",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ekey",{get:function(){return _bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentUser",{get:function(){var e;return null!==(e=_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid).connectionManager;return e.isConnected?_bundle_0b1520ed["uc" /* r */].OPEN:e.isConnecting?_bundle_0b1520ed["uc" /* r */].CONNECTING:_bundle_0b1520ed["uc" /* r */].CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastConnectedAt",{get:function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fcmPushToken",{get:function(){var e;return null!==(e=this._fcmPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"apnsPushToken",{get:function(){var e;return null!==(e=this._apnsPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),n.prototype._getNestDBVersion=function(){return 7},n.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},n.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},n.prototype.getMemoryStoreForDebugging=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof fs?n.store:null;throw _bundle_0b1520ed["vc" /* s */].debugModeRequired},n.prototype.addExtension=function(e,t){var n=_bundle_0b1520ed["w" /* V */].of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&n.extensions&&(n.extensions[e]=t)},n.prototype.addSendbirdExtensions=function(e,t,n){var r,i,s=_bundle_0b1520ed["w" /* V */].of(this._iid),o=s.logger,a=s.sdkState,u=new RegExp(_bundle_0b1520ed["o" /* N */]);if(0===e.length)return o.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(e.find((function(e){return!u.test(e.version)})))return o.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(n)try{for(var c=Object(_bundle_0b1520ed["wc" /* t */])(Object.entries(n)),d=c.next();!d.done;d=c.next()){var l=Object(_bundle_0b1520ed["tc" /* q */])(d.value,2),h=l[0],f=l[1];if(/&|=/.test(h)||/&|=/.test(f))return o.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a.sendbirdRuntimeEnvironment={sendbirdExtensions:e,deviceOS:t,customData:n},!0},n.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},n.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},n.prototype._safeInitializeStore=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:t=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.replaceStore(new fs),[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},n.prototype.initializeCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,d;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.dispatcher,s=t.logger,n.userId&&n.userId===e)return[3,9];if(a="sendbird@".concat(n.appId,"/").concat(e,".db"),!r.localCacheEnabled)return[3,7];o.label=1;case 1:return o.trys.push([1,4,,6]),r.nestdb&&r.nestdb.state!==ys.CLOSED&&r.nestdb.name===a?[3,3]:(u="sendbird@".concat(n.appId,"/").concat(e,".db"),(c=r.nestdb=new gs({name:u,version:this._getNestDBVersion(),store:r.store,config:new bi({dbname:u,itemSizeLimit:61440})})).on("upgrade",chat_gt(c)),c.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,c.on("upgrade",chat_gt(c))})),[4,c.open()]);case 2:o.sent(),this._storeInitialized=!0,i.dispatch(new _bundle_7b94e16f_v(this._iid,{userId:e})),o.label=3;case 3:return n.userId=e,[3,6];case 4:return d=o.sent(),s.warn("Nest DB Open Failed. ",d),r.store instanceof fs||(r.replaceStore(new fs),r.localCacheEnabled=!1),[4,this._safeInitializeStore(a)];case 5:throw o.sent(),n.userId=e,_bundle_0b1520ed["vc" /* s */].databaseError;case 6:return[3,9];case 7:return[4,this._safeInitializeStore(a)];case 8:o.sent(),n.userId=e,o.label=9;case 9:return[2]}}))}))},n.prototype.getCacheDataSize=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return(e=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},n.prototype.clearCachedData=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return(e=_bundle_0b1520ed["w" /* V */].of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},n.prototype.clearCachedMessages=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=Os.of(this._iid),n=Cs.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return Object(_bundle_0b1520ed["B" /* _ */])(r,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))},n.prototype._setupPreference=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.statManager,[4,r.preference.init(this._getPreferenceCacheKey(e),this._getNestDBVersion())];case 1:return o.sent(),[4,r.preference.get(this._getUserProfileCacheKey(e))];case 2:return(s=o.sent())&&new _bundle_0b1520ed["k" /* J */](this._iid,s).apply(),[4,i.init("sendbird@".concat(n.appId,"/").concat(e,".statlog"))];case 3:return o.sent(),[2]}}))}))},n.prototype._ready=function(e,n,r){return void 0===r&&(r={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,u,c,d;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Object(_bundle_0b1520ed["C" /* a */])("string",n,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid),s=i.sdkState,a=i.cacheContext,u=i.connectionManager,c=r.errorForOtherUser,s.userId&&s.userId!==e?c?[3,2]:[4,u.logout()]:[3,3];case 1:return o.sent(),[3,3];case 2:throw c;case 3:return o.trys.push([3,5,6,8]),[4,this.initializeCache(e)];case 4:return o.sent(),_bundle_0b1520ed["w" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_7b94e16f_D),[3,8];case 5:return o.sent(),d=_bundle_0b1520ed["w" /* V */].of(this._iid).logger,a.localCacheEnabled=!1,d.warn("Cache initialization failed - cache is not available."),[3,8];case 6:return[4,this._setupPreference(e)];case 7:return o.sent(),[7];case 8:return[2]}}))}))},n.prototype.authenticateFeed=function(e,t){var n;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return r=_bundle_0b1520ed["w" /* V */].of(this._iid),i=r.sessionManager,s=r.connectionManager,[4,this._ready(e,t,{errorForOtherUser:s.isConnected?_bundle_0b1520ed["vc" /* s */].alreadyConnectedAsAnotherUser:void 0})];case 1:return o.sent(),(null===(n=i.session.services)||void 0===n?void 0:n.includes(_bundle_0b1520ed["s" /* R */].CHAT))?[3,3]:(t||i.handler||(a=new ui,this.setSessionHandler(a)),[4,i.authenticateFeed(e,t)]);case 2:o.sent(),o.label=3;case 3:return[2,this.currentUser]}}))}))},n.prototype.connect=function(e,t){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._ready(e,t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,_bundle_0b1520ed["w" /* V */].of(this._iid).connectionManager.connect(t)];case 3:return n.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},n.prototype.reconnect=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.session.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},n.prototype.disconnect=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,t.logout()];case 1:return i.sent(),[4,this.clearCachedData()];case 2:return i.sent(),n.appState="foreground",[2]}}))}))},n.prototype.disconnectWebSocket=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket(!0)];case 1:return r.sent(),[2]}}))}))},n.prototype.setBackgroundState=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background().catch((function(e){r.debug("setBackgroundState error = ",e)})))},n.prototype.setForegroundState=function(){var e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.dispatcher,i=e.logger;"background"===n.appState&&(n.appState="foreground",i.debug("going foreground state"),t.resetAndReconnect().catch((function(e){i.debug("setForgroundState error = ",e)})),r.dispatch(new _bundle_ebf6c127_r))},n.prototype.setSessionHandler=function(e){Object(_bundle_0b1520ed["zc" /* w */])(e instanceof ui).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),_bundle_0b1520ed["w" /* V */].of(this._iid).sessionManager.handler=e},n.prototype.addUserEventHandler=function(e,n){Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&n instanceof ci).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),_bundle_0b1520ed["w" /* V */].of(this._iid).userEventHandlers.set(e,n)},n.prototype.removeUserEventHandler=function(e){_bundle_0b1520ed["w" /* V */].of(this._iid).userEventHandlers.delete(e)},n.prototype.removeAllUserEventHandler=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).userEventHandlers.clear()},n.prototype.addConnectionHandler=function(e,n){Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&n instanceof oi).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),_bundle_0b1520ed["w" /* V */].of(this._iid).connectionHandlers.set(e,n)},n.prototype.removeConnectionHandler=function(e){_bundle_0b1520ed["w" /* V */].of(this._iid).connectionHandlers.delete(e)},n.prototype.removeAllConnectionHandler=function(){_bundle_0b1520ed["w" /* V */].of(this._iid).connectionHandlers.clear()},n.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new hi(this._iid,e)},n.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new mi(this._iid,e)},n.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new _bundle_dc8db3c3_i(this._iid,e)},n.prototype.createMessageSearchQuery=function(e){return new Ws(this._iid,e)},n.prototype.createPollListQuery=function(e){return new _bundle_0b1520ed["Ac" /* x */](this._iid,Object(_bundle_0b1520ed["jc" /* g */])({},e))},n.prototype.createPollVoterListQuery=function(e){return new _bundle_0b1520ed["Bc" /* y */](this._iid,Object(_bundle_0b1520ed["jc" /* g */])({},e))},n.prototype.buildUserFromSerializedData=function(e){var t=Object(_bundle_0b1520ed["Cc" /* z */])(e);return new _bundle_0b1520ed["v" /* U */](this._iid,_bundle_0b1520ed["v" /* U */].payloadify(t))},n.prototype.updateCurrentUserInfo=function(n){return void 0===n&&(n={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a,u,c,d;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return r=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},chat_vt),n),Object(_bundle_0b1520ed["zc" /* w */])(function(n){return Object(_bundle_0b1520ed["lc" /* i */])(n.profileImage,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",n.profileUrl,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",n.nickname,!0)}(r)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this.currentUser?(i=_bundle_0b1520ed["w" /* V */].of(this._iid),s=i.sdkState,a=i.requestQueue,u=new chat_yt(Object(_bundle_0b1520ed["jc" /* g */])({userId:s.userId},r)),[4,a.send(u)]):[3,2];case 1:return c=o.sent(),d=c.as(chat_wt).user,this.currentUser&&(r.nickname&&(this.currentUser.nickname=d.nickname),(r.profileUrl||r.profileImage)&&(this.currentUser.plainProfileUrl=d.profileUrl)),[2,d];case 2:throw _bundle_0b1520ed["vc" /* s */].connectionRequired}}))}))},n.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),this.currentUser?(t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_yt({userId:n.userId,preferredLanguages:e}),[4,r.send(i)]):[3,2];case 1:return s=o.sent(),a=s.as(chat_wt).user,this.currentUser&&(this.currentUser.preferredLanguages=a.preferredLanguages),[2,a];case 2:throw _bundle_0b1520ed["vc" /* s */].connectionRequired}}))}))},n.prototype.registerFCMPushTokenForCurrentUser=function(e,n){var r,s;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var a,u,c,d,l,h,f=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(p){switch(p.label){case 0:if(Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Object(_bundle_0b1520ed["C" /* a */])("string",null==n?void 0:n.deviceManufacturer,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),(null==n?void 0:n.deviceOS)&&Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["z" /* Y */],n.deviceOS.platform,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",n.deviceOS.version,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat((null===(r=null==n?void 0:n.deviceOS)||void 0===r?void 0:r.platform)||_bundle_0b1520ed["z" /* Y */].ANDROID,"-").concat((null===(s=null==n?void 0:n.deviceOS)||void 0===s?void 0:s.version)||"unknown"),deviceManufacturer:null==n?void 0:n.deviceManufacturer,systemPushEnabled:null==n?void 0:n.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),u=_bundle_0b1520ed["w" /* V */].of(this._iid),c=u.sessionManager,d=u.sdkState,l=u.requestQueue,c.hasDeviceToken(_bundle_0b1520ed["q" /* P */].FCM,e)?[2,_bundle_0b1520ed["u" /* T */].SUCCESS]:(h=new chat_It({userId:d.userId,token:e,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,l.send(h)]);case 2:return p.sent(),[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(f,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return c.setDeviceToken(_bundle_0b1520ed["q" /* P */].FCM,e,a),[4,c.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return p.sent(),this._fcmPushToken="",[2,_bundle_0b1520ed["u" /* T */].SUCCESS];case 4:return p.sent(),[2,_bundle_0b1520ed["u" /* T */].ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,_bundle_0b1520ed["u" /* T */].PENDING];case 7:return[2]}}))}))},n.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,s,a,u,c,d=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:if(Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sessionManager,s=n.sdkState,a=n.requestQueue,u=new chat_Ct({userId:s.userId,token:e}),[4,a.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(d,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return r.unsetDeviceToken(_bundle_0b1520ed["q" /* P */].FCM,e),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._fcmPushToken="",[2,_bundle_0b1520ed["u" /* T */].SUCCESS];case 4:return l.sent(),[2,_bundle_0b1520ed["u" /* T */].ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,_bundle_0b1520ed["u" /* T */].PENDING];case 7:return[2]}}))}))},n.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,s,a,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,s=new chat_Tt({userId:n.userId}),[4,r.send(s)]):[3,3];case 1:return a=c.sent().lastDeletedAt,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(u,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(_bundle_0b1520ed["q" /* P */].FCM),t.setDeviceTokenDeletedAt(a),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},n.prototype.registerAPNSPushTokenForCurrentUser=function(e,n){var r,s;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var a,u,c,d,l,h,f=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(p){switch(p.label){case 0:if(Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Object(_bundle_0b1520ed["C" /* a */])("string",null==n?void 0:n.deviceManufacturer,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),(null==n?void 0:n.deviceOS)&&Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["z" /* Y */],n.deviceOS.platform,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",n.deviceOS.version,!0)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat((null===(r=null==n?void 0:n.deviceOS)||void 0===r?void 0:r.platform)||_bundle_0b1520ed["z" /* Y */].IOS,"-").concat((null===(s=null==n?void 0:n.deviceOS)||void 0===s?void 0:s.version)||"unknown"),deviceManufacturer:null==n?void 0:n.deviceManufacturer,systemPushEnabled:null==n?void 0:n.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),u=_bundle_0b1520ed["w" /* V */].of(this._iid),c=u.sessionManager,d=u.sdkState,l=u.requestQueue,c.hasDeviceToken(_bundle_0b1520ed["q" /* P */].APNS,e)?[2,_bundle_0b1520ed["u" /* T */].SUCCESS]:(h=new chat_kt({userId:d.userId,token:e,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,l.send(h)]);case 2:return p.sent(),[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(f,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return c.setDeviceToken(_bundle_0b1520ed["q" /* P */].APNS,e,a),[4,c.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return p.sent(),this._apnsPushToken="",[2,_bundle_0b1520ed["u" /* T */].SUCCESS];case 4:return p.sent(),[2,_bundle_0b1520ed["u" /* T */].ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,_bundle_0b1520ed["u" /* T */].PENDING];case 7:return[2]}}))}))},n.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,s,a,u,c,d=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(l){switch(l.label){case 0:if(Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sessionManager,s=n.sdkState,a=n.requestQueue,u=new chat_St({userId:s.userId,token:e}),[4,a.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(d,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return r.unsetDeviceToken(_bundle_0b1520ed["q" /* P */].APNS,e),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._apnsPushToken="",[2,_bundle_0b1520ed["u" /* T */].SUCCESS];case 4:return l.sent(),[2,_bundle_0b1520ed["u" /* T */].ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,_bundle_0b1520ed["u" /* T */].PENDING];case 7:return[2]}}))}))},n.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,s,a,u=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,s=new chat_Et({userId:n.userId}),[4,r.send(s)]):[3,3];case 1:return a=c.sent().lastDeletedAt,[4,Object(_bundle_0b1520ed["c" /* B */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(u,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(_bundle_0b1520ed["q" /* P */].APNS),t.setDeviceTokenDeletedAt(a),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},n.prototype.markPushNotificationAsDelivered=function(e,t){var n;return void 0===t&&(t=!0),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a,u,c,d,l,h,f,p,v,g,m,b,_,y,w,k;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(r=_bundle_0b1520ed["w" /* V */].of(this._iid),i=r.logger,s=r.sessionManager,a=r.requestQueue,u=r.pushNotificationAckManager,i.debug("markPushNotificationAsDelivered:",e),c=chat_dn.DELIVERED,d=u.parseData(e),l=d.pushTrackingId,h=d.sessionTopics,f=d.sessionKey,p=d.messageId,v=d.channelKey,g=d.templateKey,m=d.notificationEventDeadline,!f)throw i.info("Can't use markPushNotificationAsDelivered() feature."),_bundle_0b1520ed["vc" /* s */].malformedDataError;if(!h.includes(_bundle_0b1520ed["A" /* Z */].PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsDelivered() feature."),_bundle_0b1520ed["vc" /* s */].malformedDataError;if(u.isAcked(l,c))return i.info("already delivered push notification:",l),[2];b=Boolean(v),_=t&&b,y=null===(n=s.deviceTokens[0])||void 0===n?void 0:n.token,w=new chat_yn({deviceToken:null!=y?y:"",pushTrackingId:l,eventType:c,messageId:p,channelKey:v,templateKey:g,notificationEventDeadline:m,allowedPushNotification:_}),f&&(w.headers["Session-Key"]=f),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.send(w)];case 2:return o.sent(),u.markAsAcked(l,c),[3,4];case 3:throw k=o.sent(),i.debug("failed to mark push notification as delivered. push tracking id: ".concat(l,". error: ").concat(k)),k;case 4:return[2]}}))}))},n.prototype.markPushNotificationAsClicked=function(e){var t;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,d,l,h,f,p,v,g,m,b,_;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:if(n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.logger,i=n.sessionManager,s=n.requestQueue,a=n.pushNotificationAckManager,r.debug("markPushNotificationAsClicked:",e),u=chat_dn.CLICKED,c=a.parseData(e),d=c.pushTrackingId,l=c.sessionTopics,h=c.sessionKey,f=c.messageId,p=c.channelKey,v=c.templateKey,g=c.notificationEventDeadline,!h)throw r.info("Can't use markPushNotificationAsDelivered() feature."),_bundle_0b1520ed["vc" /* s */].malformedDataError;if(!l.includes(_bundle_0b1520ed["A" /* Z */].PUSH_ACKNOWLEDGEMENT))throw r.info("Can't use markPushNotificationAsDelivered() feature."),_bundle_0b1520ed["vc" /* s */].malformedDataError;if(a.isAcked(d,u))return r.info("already clicked push notification:",d),[2];m=null===(t=i.deviceTokens[0])||void 0===t?void 0:t.token,b=new chat_yn({deviceToken:null!=m?m:"",pushTrackingId:d,eventType:u,messageId:f,channelKey:p,templateKey:v,notificationEventDeadline:g}),h&&(b.headers["Session-Key"]=h),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.send(b)];case 2:return o.sent(),a.markAsAcked(d,u),[3,4];case 3:throw _=o.sent(),r.debug("failed to mark push notification as clicked. push tracking id: ".concat(d,". error: ").concat(_)),_;case 4:return[2]}}))}))},n.prototype.getChannelInvitationPreference=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Ut({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,{autoAccept:i.as(chat_Ot).autoAccept}]}}))}))},n.prototype.setChannelInvitationPreference=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("boolean",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,s=new chat_At({userId:r.userId,willAutoAccept:e}),[4,i.send(s)];case 1:return a=o.sent(),[2,{autoAccept:a.as(chat_Nt).autoAccept}]}}))}))},n.prototype.getDoNotDisturb=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Mt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(chat_Lt).preference]}}))}))},n.prototype.setDoNotDisturb=function(e,n,r,s,a,u){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=""),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,c,d,l,h;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("boolean",e)&&Object(_bundle_0b1520ed["C" /* a */])("number",n)&&Object(_bundle_0b1520ed["C" /* a */])("number",r)&&Object(_bundle_0b1520ed["C" /* a */])("number",s)&&Object(_bundle_0b1520ed["C" /* a */])("number",a)&&Object(_bundle_0b1520ed["C" /* a */])("string",u)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid),c=i.sdkState,d=i.requestQueue,l=new chat_Rt({userId:c.userId,doNotDisturbOn:e,startHour:n,startMin:r,endHour:s,endMin:a,timezone:u}),[4,d.send(l)];case 1:return h=o.sent(),[2,h.as(chat_zt).preference]}}))}))},n.prototype.getSnoozePeriod=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Qt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(chat_jt).snoozePeriod]}}))}))},n.prototype.setSnoozePeriod=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var i,s,a,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("boolean",e)&&Object(_bundle_0b1520ed["C" /* a */])("number",n)&&Object(_bundle_0b1520ed["C" /* a */])("number",r)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),i=_bundle_0b1520ed["w" /* V */].of(this._iid),s=i.sdkState,a=i.requestQueue,u=new chat_Ft({userId:s.userId,snoozeOn:e,startTs:n,endTs:r}),[4,a.send(u)];case 1:return c=o.sent(),[2,c.as(chat_qt).snoozePeriod]}}))}))},n.prototype.getMyPushTokensByToken=function(e,n){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,i,s,a,u,c,d,l,h,f,p,v;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)&&Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["q" /* P */],n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid),i=r.sdkState,s=r.requestQueue,a=r.sessionManager,u=new chat_Pt({userId:i.userId,type:n,token:e}),[4,s.send(u)];case 1:c=o.sent(),d=c.as(chat_Dt).pushTokens;try{for(l=Object(_bundle_0b1520ed["wc" /* t */])(d.deviceTokens),h=l.next();!h.done;h=l.next())f=h.value,a.setDeviceToken(d.type,f)}catch(e){p={error:e}}finally{try{h&&!h.done&&(v=l.return)&&v.call(l)}finally{if(p)throw p.error}}return[4,a.saveDeviceToken()];case 2:return o.sent(),[2,d]}}))}))},n.prototype.getPushTriggerOption=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Kt({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(chat_Gt).pushTriggerOption]}}))}))},n.prototype.setPushTriggerOption=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["a" /* $ */],e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Wt({userId:n.userId,pushTriggerOption:e}),[4,r.send(i)];case 1:return[2,s.sent().as(chat_Bt).pushTriggerOption]}}))}))},n.prototype.getPushTemplate=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Vt({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(chat_Jt).name]}}))}))},n.prototype.setPushTemplate=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["y" /* X */])(_bundle_0b1520ed["E" /* a0 */],e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Yt({userId:n.userId,templateName:e}),[4,r.send(i)];case 1:return[2,s.sent().as(chat_$t).name]}}))}))},n.prototype.blockUser=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_0b1520ed["v" /* U */]||Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,s=new chat_Ht({userId:r.userId,blockedUserId:e instanceof _bundle_0b1520ed["v" /* U */]?e.userId:e}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.blockUserWithUserId=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this.blockUser(e)]}))}))},n.prototype.unblockUser=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(e instanceof _bundle_0b1520ed["v" /* U */]||Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,s=new chat_xt({userId:r.userId,unblockedUserId:e instanceof _bundle_0b1520ed["v" /* U */]?e.userId:e}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.unblockUserWithUserId=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this.unblockUser(e)]}))}))},n.prototype.getFriendChangeLogsByToken=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s,a;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,s=new chat_Xt({userId:r.userId,token:e}),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(chat_Zt).changelogs]}}))}))},n.prototype.getAllowFriendDiscovery=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_an({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(chat_un).allowFriendDiscovery]}}))}))},n.prototype.setAllowFriendDiscovery=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("boolean",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=_bundle_0b1520ed["w" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,s=new chat_cn({userId:r.userId,allowFriendDiscovery:e}),[4,i.send(s)];case 1:return o.sent(),[2,e]}}))}))},n.prototype.uploadFriendDiscoveries=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_en({userId:n.userId,discoveries:e}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(chat_tn).friendDiscoveryRequestId]}}))}))},n.prototype.deleteFriendDiscovery=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},n.prototype.deleteFriendDiscoveries=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_nn({userId:n.userId,discoveryKeys:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.addFriends=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_rn({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(chat_sn).users]}}))}))},n.prototype.deleteFriend=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return[2,this.deleteFriends([e])]}))}))},n.prototype.deleteFriends=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["r" /* Q */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t=_bundle_0b1520ed["w" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_on({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.getAllEmoji=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(r){switch(r.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,t=new chat_ln,[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(chat_hn).emojiContainer]}}))}))},n.prototype.getEmojiCategory=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new chat_fn({categoryId:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(chat_pn).emojiCategory]}}))}))},n.prototype.getEmoji=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return t=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new chat_vn({key:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(chat_gn).emoji]}}))}))},n.prototype.getUIKitConfiguration=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(i){switch(i.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid),Object(_bundle_0b1520ed["zc" /* w */])(e.hasExtension("sb_uikit")).throw(_bundle_0b1520ed["vc" /* s */].notSupportedError),t=e.requestQueue,n=new chat_mn,[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(chat_bn).uikitConfiguration]}}))}))},n}();

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/node_modules/@sendbird/chat/openChannel.js
var openChannel_le=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e._channels=new Map,e._enteredChannelUrls=[],e}return Object(_bundle_0b1520ed["fc" /* c */])(a,r),Object.defineProperty(a.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(n){return e._channels.get(n)})).filter((function(e){return!!e}))},enumerable:!1,configurable:!0}),a.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},a.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},a.prototype.exit=function(e){var n=this._enteredChannelUrls.indexOf(e);n>=0&&this._enteredChannelUrls.splice(n,1)},a.prototype.exitAll=function(){this._enteredChannelUrls=[]},a.prototype.get=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return[2,this._channels.get(e)]}))}))},a.prototype.upsert=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return n=[],e.forEach((function(e){if(r._channels.has(e.url)){var t=r._channels.get(e.url);Object.assign(t,e),n.push(t)}else r._channels.set(e.url,e),n.push(e)})),[2,n]}))}))},a.prototype.remove=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return this._channels.delete(e),this.exit(e),[2]}))}))},a.prototype.clear=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},a}(_bundle_0b1520ed["mb" /* ae */]),openChannel_he={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},openChannel_de=function(n){function t(e){var t=e.channelUrl,r=e.isInternalCall,a=n.call(this)||this;return a.method=_bundle_0b1520ed["b" /* A */].GET,a.path="".concat(r?_bundle_0b1520ed["bc" /* bl */]:_bundle_0b1520ed["cc" /* bm */],"/").concat(encodeURIComponent(t)),a}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["ic" /* f */]),openChannel_pe=function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.channel=new openChannel_Pe(e,t),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["kc" /* h */]),openChannel_fe=function(n){function t(e){var t=this,r=e.channelUrl,a=e.coverUrlOrImage,u=e.name,l=e.data,h=e.customType,f=e.operatorUserIds,C=e.isEphemeral;return(t=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].POST,t.path=_bundle_0b1520ed["cc" /* bm */],t.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({channel_url:r,cover_url:Object(_bundle_0b1520ed["C" /* a */])("string",a)?a:null,cover_file:Object(_bundle_0b1520ed["lc" /* i */])(a)?a:null,name:u,data:l,custom_type:h,operators:f,is_ephemeral:C})),t}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["ic" /* f */]);!function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.channel=new openChannel_Pe(e,t),r}Object(_bundle_0b1520ed["fc" /* c */])(t,n)}(_bundle_0b1520ed["kc" /* h */]);var openChannel_Ce=function(n){function t(e){var t=e.channelUrl;return n.call(this,{code:"ENTR",payload:{channel_url:t},ackRequired:!0})||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["rb" /* aj */]),openChannel_ve=function(n){function t(e,t,r){var a,o,i=this;return i=n.call(this,e,"SYEV",r)||this,r.data&&(i.participantCount=null!==(a=r.data.participant_count)&&void 0!==a?a:0,i.user=new _bundle_0b1520ed["v" /* U */](e,r.data),i.ts=null!==(o=r.data.edge_ts)&&void 0!==o?o:0),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_168f8164_f),openChannel_e=function(n){function t(e){var t=e.channelUrl;return n.call(this,{code:"EXIT",payload:{channel_url:t},ackRequired:!0})||this}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["rb" /* aj */]),openChannel_ye=function(n){function t(e,t,r){var a,o,i=this;return i=n.call(this,e,"EXIT",r)||this,r.data&&(i.participantCount=null!==(a=r.data.participant_count)&&void 0!==a?a:0,i.user=new _bundle_0b1520ed["v" /* U */](e,r.data),i.ts=null!==(o=r.data.edge_ts)&&void 0!==o?o:0),i}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_168f8164_f),openChannel_me={},openChannel_ge=function(r){function s(e,a){var o=r.call(this,e,Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},a),{channelType:_bundle_0b1520ed["d" /* C */].OPEN}))||this;return o.subscribeChannelEvent=_bundle_0b1520ed["Gb" /* ay */],o.unsubscribeChannelEvent=_bundle_0b1520ed["Gb" /* ay */],o.refreshChannel=function(){return Object(_bundle_0b1520ed["B" /* _ */])(o,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return[2,Object(_bundle_0b1520ed["Gb" /* ay */])()]}))}))},o._openChannelCache=new openChannel_le(e),o._openChannelHandlers=new Map,o._dispatcher.on((function(e){var n,t;if(e instanceof _bundle_0b1520ed["x" /* W */])o._handleEvent(e).catch((function(e){if(Object(_bundle_0b1520ed["p" /* O */])(e)&&"foreground"===o._sdkState.appState)throw e}));else if(e instanceof _bundle_0b1520ed["e" /* D */]&&e.stateType===_bundle_0b1520ed["g" /* F */].CONNECTED){var r=o._openChannelCache.enteredChannels;try{for(var a=Object(_bundle_0b1520ed["wc" /* t */])(r),i=a.next();!i.done;i=a.next()){i.value.enter()}}catch(e){n={error:e}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}}})),openChannel_me[e]||(openChannel_me[e]=o),o}return Object(_bundle_0b1520ed["fc" /* c */])(s,r),s.of=function(e){return openChannel_me[e]},s.prototype.buildOpenChannelFromSerializedData=function(e){var n=Object(_bundle_0b1520ed["Cc" /* z */])(e);return new openChannel_Pe(this._iid,openChannel_Pe.payloadify(n))},s.prototype.getChannelFromCache=function(e){var r;return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,null!==(r=n.sent())&&void 0!==r?r:null]}}))}))},s.prototype.upsertChannelsToCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){switch(n.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,n.sent()]}}))}))},s.prototype.removeChannelsFromCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,a,o,i,s;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:t.trys.push([0,5,6,7]),n=Object(_bundle_0b1520ed["wc" /* t */])(e),r=n.next(),t.label=1;case 1:return r.done?[3,4]:(a=r.value,[4,this._openChannelCache.remove(a)]);case 2:t.sent(),t.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return o=t.sent(),i={error:o},[3,7];case 6:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},s.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},s.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},s.prototype._handleEvent=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var r,a,o,i,s,u,c,l,h,d,p,f,C,v,_,m,g,E,w,O,H,I,A,R,L,F,Y,Z,$,ee,ce,le,he,de,pe,fe,Ce,_e,me,ge,Ue,Ee,we,Me,Te,be,Ne,Pe,De,Oe,He,xe,Ie,Ae,Re,Le,Fe,Se,ke,ze,qe,Qe,Ke,Ve,je,Be,Ge,We,Xe=this;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(Ye){switch(Ye.label){case 0:switch(Ye.trys.push([0,57,,58]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,56];case 1:return i=null,"MESG"===e.code?i=e.as(hr):"FILE"===e.code?i=e.as(_bundle_dc8db3c3_At):"ADMM"!==e.code&&"BRDM"!=e.code||(i=e.as(_bundle_168f8164_H)),i?(r=i.message,a=i.isMentioned,r.channelType!==_bundle_0b1520ed["d" /* C */].OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:o=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,i,s,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())i=n.value,this._openChannelCache.isEnteredChannel(o.url)&&(i.onMessageReceived&&i.onMessageReceived(o,r),a&&i.onMentionReceived&&i.onMentionReceived(o,r))}catch(e){s={error:e}}finally{try{n&&!n.done&&(u=e.return)&&u.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Ye.label=3;case 3:return[3,56];case 4:return i=null,"MEDI"===e.code?i=e.as(pr):"FEDI"===e.code?i=e.as(vr):"AEDI"===e.code&&(i=e.as(_bundle_168f8164_T)),i?(s=i.message,u=i.mentionCountChange,s.channelType!==_bundle_0b1520ed["d" /* C */].OPEN?[3,6]:[4,this.getChannel(s.channelUrl,!0)]):[3,6];case 5:c=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(c.url)&&(r.onMessageUpdated&&r.onMessageUpdated(c,s),u>0&&r.onMentionReceived&&r.onMentionReceived(c,s))}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=6;case 6:return[3,56];case 7:return l=e.as(_bundle_0b1520ed["Vb" /* bf */]),ce=l.channelUrl,le=l.channelType,h=l.messageId,le!==_bundle_0b1520ed["d" /* C */].OPEN?[3,9]:[4,this.getChannel(ce,!0)];case 8:d=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(d.url)&&r.onMessageDeleted&&r.onMessageDeleted(d,h)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=9;case 9:return[3,56];case 10:return p=e.as(_bundle_168f8164_L),ce=p.channelUrl,le=p.channelType,f=p.event,le!==_bundle_0b1520ed["d" /* C */].OPEN?[3,12]:[4,this.getChannel(ce,!0)];case 11:C=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(C.url)&&r.onReactionUpdated&&r.onReactionUpdated(C,f)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=12;case 12:return[3,56];case 13:return(v=e.as(_bundle_168f8164_g).event).channelType!==_bundle_0b1520ed["d" /* C */].OPEN?[3,15]:[4,this.getChannel(v.channelUrl,!0)];case 14:_=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(_.url)&&r.onThreadInfoUpdated&&r.onThreadInfoUpdated(_,v)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=15;case 15:return[3,56];case 16:m=e.as(_bundle_168f8164_U).openChannelMemberCounts,g=[],Ye.label=17;case 17:Ye.trys.push([17,22,23,24]),E=Object(_bundle_0b1520ed["wc" /* t */])(m),w=E.next(),Ye.label=18;case 18:return w.done?[3,21]:(O=w.value,ce=O.channelUrl,Ue=O.participantCount,H=O.updatedAt,[4,this.getChannelFromCache(ce)]);case 19:(I=Ye.sent())&&I._updateParticipantCount(Ue,H)&&g.push(I),Ye.label=20;case 20:return w=E.next(),[3,18];case 21:return[3,24];case 22:return A=Ye.sent(),Ge={error:A},[3,24];case 23:try{w&&!w.done&&(We=E.return)&&We.call(E)}finally{if(Ge)throw Ge.error}return[7];case 24:return g.length>0?[4,this.upsertChannelsToCache(g)]:[3,26];case 25:R=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onChannelMemberCountChanged&&r.onChannelMemberCountChanged(R)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=26;case 26:return[3,56];case 27:return L=e.as(_bundle_168f8164_I),F=L.event,Y=L.status,ce=L.channelUrl,le=L.channelType,ce&&le===_bundle_0b1520ed["d" /* C */].OPEN?[4,this.getChannel(ce,!0)]:[3,29];case 28:Z=Ye.sent(),this._dispatcher.dispatch(new _bundle_0b1520ed["ab" /* aR */]({event:F,source:_bundle_0b1520ed["F" /* a2 */].EVENT_POLL_UPDATED})),Object(_bundle_0b1520ed["h" /* G */])(Y===_bundle_0b1520ed["Wb" /* bg */]?function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onPollDeleted&&r.onPollDeleted(Z,F.pollId)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))}:function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onPollUpdated&&r.onPollUpdated(Z,F)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))}),Ye.label=29;case 29:return[3,56];case 30:return $=e.as(Fr),ee=$.event,ce=$.channelUrl,le=$.channelType,ce&&le===_bundle_0b1520ed["d" /* C */].OPEN?[4,this.getChannel(ce,!0)]:[3,32];case 31:he=Ye.sent(),this._dispatcher.dispatch(new _bundle_0b1520ed["T" /* aK */]({event:ee,source:_bundle_0b1520ed["F" /* a2 */].EVENT_POLL_VOTED})),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){try{for(e=Object(_bundle_0b1520ed["wc" /* t */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onPollVoted&&r.onPollVoted(he,ee)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=32;case 32:return[3,56];case 33:if(!(de=e.as(_bundle_168f8164_f).event).isOpenChannelEvent)return[3,55];switch(de.category){case _bundle_168f8164_A.CHANNEL_ENTER:return[3,34];case _bundle_168f8164_A.CHANNEL_EXIT:return[3,36];case _bundle_168f8164_A.CHANNEL_OPERATOR_UPDATE:return[3,38];case _bundle_168f8164_A.USER_CHANNEL_MUTE:case _bundle_168f8164_A.USER_CHANNEL_UNMUTE:return[3,40];case _bundle_168f8164_A.USER_CHANNEL_BAN:case _bundle_168f8164_A.USER_CHANNEL_UNBAN:return[3,42];case _bundle_168f8164_A.CHANNEL_FREEZE:case _bundle_168f8164_A.CHANNEL_UNFREEZE:return[3,44];case _bundle_168f8164_A.CHANNEL_DELETED:return[3,46];case _bundle_168f8164_A.CHANNEL_PROP_CHANGED:return[3,49];case _bundle_168f8164_A.CHANNEL_META_DATA_CHANGED:return[3,51];case _bundle_168f8164_A.CHANNEL_META_COUNTERS_CHANGED:return[3,53]}return[3,55];case 34:return[4,this.getChannel(de.channelUrl,!0)];case 35:return pe=Ye.sent(),fe=e.as(openChannel_ve),Ue=fe.participantCount,Ce=fe.user,_e=pe._updateParticipantCount(Ue,de.ts),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserEntered&&e.onUserEntered(pe,Ce),_e&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(pe)})),[2]}))}))})),[3,55];case 36:return[4,this.getChannel(de.channelUrl,!0)];case 37:return me=Ye.sent(),ge=e.as(openChannel_ye),Ue=ge.participantCount,Ee=ge.user,we=me._updateParticipantCount(Ue,de.ts),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserExited&&e.onUserExited(me,Ee),we&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(me)})),[2]}))}))})),[3,55];case 38:return[4,this.getChannel(de.channelUrl,!0)];case 39:return Me=Ye.sent(),Te=e.as(_bundle_168f8164_m).operators,Me.operators=Te,this.upsertChannelsToCache([Me]),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(Me,Te)})),[2]}))}))})),[3,55];case 40:return[4,this.getChannel(de.channelUrl,!0)];case 41:return be=Ye.sent(),Ne=de.category===_bundle_168f8164_A.USER_CHANNEL_MUTE,Pe=e.as(Ne?$n:tr).user,Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Ne?e.onUserMuted&&e.onUserMuted(be,Pe):e.onUserUnmuted&&e.onUserUnmuted(be,Pe)})),[2]}))}))})),[3,55];case 42:return[4,this.getChannel(de.channelUrl,!0)];case 43:return De=Ye.sent(),Oe=de.category===_bundle_168f8164_A.USER_CHANNEL_BAN,He=e.as(Oe?rr:sr).user,Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Oe?e.onUserBanned&&e.onUserBanned(De,He):e.onUserUnbanned&&e.onUserUnbanned(De,He)})),[2]}))}))})),[3,55];case 44:return[4,this.getChannel(de.channelUrl,!0)];case 45:return xe=Ye.sent(),Ie=e.as(or).freeze,xe.isFrozen=Ie,this.upsertChannelsToCache([xe]),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Ie?e.onChannelFrozen&&e.onChannelFrozen(xe):e.onChannelUnfrozen&&e.onChannelUnfrozen(xe)})),[2]}))}))})),[3,55];case 46:return[4,this.getChannel(de.channelUrl,!0)];case 47:return Ae=Ye.sent(),[4,this.removeChannelsFromCache([Ae.url])];case 48:return Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(Ae.url,Ae.channelType)})),[2]}))}))})),[3,55];case 49:return[4,this.getChannelWithoutCache(de.channelUrl,!0)];case 50:return Re=Ye.sent(),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(Re)})),[2]}))}))})),[3,55];case 51:return[4,this.getChannel(de.channelUrl,!0)];case 52:return Le=Ye.sent(),Fe=e.as(Fn),Se=Fe.created,ke=Fe.updated,ze=Fe.deleted,Se&&Le._upsertCachedMetaData(Se,de.ts),ke&&Le._upsertCachedMetaData(ke,de.ts),ze&&Le._removeFromCachedMetaData(ze,de.ts),Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Se&&e.onMetaDataCreated&&e.onMetaDataCreated(Le,Se),ke&&e.onMetaDataUpdated&&e.onMetaDataUpdated(Le,ke),ze&&e.onMetaDataDeleted&&e.onMetaDataDeleted(Le,ze)})),[2]}))}))})),[3,55];case 53:return[4,this.getChannel(de.channelUrl,!0)];case 54:return qe=Ye.sent(),Qe=e.as(Yn),Ke=Qe.created,Ve=Qe.updated,je=Qe.deleted,Object(_bundle_0b1520ed["h" /* G */])((function(){return Object(_bundle_0b1520ed["B" /* _ */])(Xe,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Ke&&e.onMetaCounterCreated&&e.onMetaCounterCreated(qe,Ke),Ve&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(qe,Ve),je&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(qe,je)})),[2]}))}))})),[3,55];case 55:return[3,56];case 56:return[3,58];case 57:if(Be=Ye.sent(),Object(_bundle_0b1520ed["p" /* O */])(Be))throw Be;return[3,58];case 58:return[2]}}))}))},s.prototype.addHandler=function(e,n){this._openChannelHandlers.set(e,n)},s.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},s.prototype.clearHandler=function(){this._openChannelHandlers.clear()},s.prototype.getChannel=function(e,r){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(n=t.sent())?[2,n]:[3,4];case 3:return t.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e)];case 5:return[2,t.sent()]}}))}))},s.prototype.getChannelWithoutCache=function(e,r){return void 0===r&&(r=!1),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,a,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_0b1520ed["zc" /* w */])(Object(_bundle_0b1520ed["C" /* a */])("string",e)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),n=new openChannel_de({channelUrl:e,isInternalCall:r}),[4,this._requestQueue.send(n)];case 1:return a=t.sent(),i=a.as(openChannel_pe).channel,[4,this.upsertChannelsToCache([i])];case 2:return[2,t.sent()[0]]}}))}))},s.prototype.createChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,s,u;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},openChannel_he),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["r" /* Q */])("string",e.operatorUserIds,!0)&&(Object(_bundle_0b1520ed["C" /* a */])("string",e.coverUrlOrImage,!0)||Object(_bundle_0b1520ed["lc" /* i */])(e.coverUrlOrImage,!0))&&Object(_bundle_0b1520ed["C" /* a */])("string",e.name,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.data,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.customType,!0)&&(Object(_bundle_0b1520ed["C" /* a */])("string",e.channelUrl)&&/^\w+$/.test(e.channelUrl)||null===e.channelUrl||void 0===e.channelUrl)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",e.isEphemeral,!0)}(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=new openChannel_fe(n),[4,this._requestQueue.send(r)];case 1:return s=t.sent(),u=s.as(openChannel_pe).channel,this.upsertChannelsToCache([u]),[2,u]}}))}))},s}(_bundle_168f8164_v),openChannel_Ue={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},openChannel_Ee=function(n){function t(e){var t=this,r=e.channelUrl,a=e.token,o=e.limit;return(t=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,t.path="".concat(_bundle_0b1520ed["cc" /* bm */],"/").concat(encodeURIComponent(r),"/participants"),t.params={token:a,limit:o},t}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["ic" /* f */]),openChannel_we=function(n){function t(e,t){var r=n.call(this,e,t)||this;r.participants=[];var a=t.next,o=t.participants;return r.token=a,r.participants=o.map((function(n){return new _bundle_dc8db3c3_Wt(e,n)})),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["kc" /* h */]),openChannel_Me=function(r){function a(e,n,t){return r.call(this,e,n,_bundle_0b1520ed["d" /* C */].OPEN,t)||this}return Object(_bundle_0b1520ed["fc" /* c */])(a,r),a.prototype._validate=function(){return r.prototype._validate.call(this)},a.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new openChannel_Ee(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token})),[4,e.send(n)]):[3,2]:[3,5];case 1:return r=t.sent(),a=r.as(openChannel_we),o=a.participants,i=a.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 6:return[2]}}))}))},a}(_bundle_0b1520ed["Hb" /* az */]),openChannel_Te=function(n){function t(e){var t=this,r=e.channelUrl,a=e.coverUrlOrImage,u=e.name,l=e.data,h=e.customType,f=e.operatorUserIds;return(t=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].PUT,t.path="".concat(_bundle_0b1520ed["cc" /* bm */],"/").concat(encodeURIComponent(r)),t.params=Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])({cover_url:Object(_bundle_0b1520ed["C" /* a */])("string",a)?a:null,cover_file:Object(_bundle_0b1520ed["lc" /* i */])(a)?a:null,name:u,data:l,custom_type:h,operators:f})),t}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["ic" /* f */]),openChannel_be=function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.channel=new openChannel_Pe(e,t),r}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["kc" /* h */]),openChannel_Ne=function(n){function t(e){var t=this,r=e.channelUrl;return(t=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].DELETE,t.path="".concat(_bundle_0b1520ed["cc" /* bm */],"/").concat(encodeURIComponent(r)),t}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["ic" /* f */]);!function(n){function t(e,t){return n.call(this,e,t)||this}Object(_bundle_0b1520ed["fc" /* c */])(t,n)}(_bundle_0b1520ed["kc" /* h */]);var openChannel_Pe=function(r){function s(e,n){var t,a=this;return(a=r.call(this,e,n)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.channelType=_bundle_0b1520ed["d" /* C */].OPEN,a.participantCount=null!==(t=n.participant_count)&&void 0!==t?t:0,a.operators=Array.isArray(n.operators)?n.operators.map((function(n){return new _bundle_0b1520ed["v" /* U */](e,n)})):[],a}return Object(_bundle_0b1520ed["fc" /* c */])(s,r),s.payloadify=function(e){return Object(_bundle_0b1520ed["hc" /* e */])(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},ai.payloadify(e)),{participant_count:e.participantCount,operators:e.operators.map((function(e){return _bundle_0b1520ed["v" /* U */].payloadify(e)}))})))},s.prototype.serialize=function(){return Object(_bundle_0b1520ed["pb" /* ah */])(this)},s.prototype.isOperator=function(e){return e instanceof _bundle_0b1520ed["v" /* U */]?this.isOperator(e.userId):this.operators.some((function(n){return n.userId===e}))},s.prototype._updateParticipantCount=function(e,n){return n>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=n,!0)},s.prototype.createParticipantListQuery=function(e){return new openChannel_Me(this._iid,this.url,e)},s.prototype.refresh=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(e){switch(e.label){case 0:return[4,openChannel_ge.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},s.prototype.enter=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new openChannel_Ce({channelUrl:this.url}),[4,e.send(n)];case 1:return r=t.sent(),a=r.as(openChannel_ve),o=a.participantCount,i=a.ts,this._updateParticipantCount(o,i),openChannel_ge.of(this._iid).setEnteredToCache(this),[2]}}))}))},s.prototype.exit=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new openChannel_e({channelUrl:this.url}),[4,e.send(n)];case 1:return r=t.sent(),a=r.as(openChannel_ye),o=a.participantCount,i=a.ts,this._updateParticipantCount(o,i),openChannel_ge.of(this._iid).setExitedToCache(this),js.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},s.prototype.updateChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n,r,s,u,c;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},openChannel_Ue),e),Object(_bundle_0b1520ed["zc" /* w */])(function(e){return Object(_bundle_0b1520ed["r" /* Q */])("string",e.operatorUserIds,!0)&&(Object(_bundle_0b1520ed["C" /* a */])("string",e.coverUrlOrImage,!0)||Object(_bundle_0b1520ed["lc" /* i */])(e.coverUrlOrImage,!0))&&Object(_bundle_0b1520ed["C" /* a */])("string",e.name,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.data,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",e.customType,!0)}(n)).throw(_bundle_0b1520ed["vc" /* s */].invalidParameters),r=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,s=new openChannel_Te(Object(_bundle_0b1520ed["jc" /* g */])({channelUrl:this.url},n)),[4,r.send(s)];case 1:return u=t.sent(),c=u.as(openChannel_be).channel,this._update(c),[4,openChannel_ge.of(this._iid).upsertChannelsToCache([c])];case 2:return t.sent(),[2,this]}}))}))},s.prototype.updateChannelWithOperatorUserIds=function(e,r,a,o,i){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return n=Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},openChannel_Ue),{name:e,coverUrlOrImage:r,data:a,operatorUserIds:o,customType:i}),[2,this.updateChannel(n)]}))}))},s.prototype.delete=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new openChannel_Ne({channelUrl:this.url}),[4,e.send(n)];case 1:return t.sent(),[4,openChannel_ge.of(this._iid).removeChannelsFromCache([this.url])];case 2:return t.sent(),[2]}}))}))},s.prototype.sendUserMessage=function(e){return Object(_bundle_0b1520ed["zc" /* w */])(!e.isPinnedMessage).throw(_bundle_0b1520ed["vc" /* s */].notSupportedError),r.prototype.sendUserMessage.call(this,e)},s.prototype.sendFileMessage=function(e){return Object(_bundle_0b1520ed["zc" /* w */])(!e.isPinnedMessage).throw(_bundle_0b1520ed["vc" /* s */].notSupportedError),r.prototype.sendFileMessage.call(this,e)},s}(ai),openChannel_De=function(n){function t(e){void 0===e&&(e={});var t=n.call(this)||this;return Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&(t[n]=e[n])})),t}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.onUserEntered=_bundle_0b1520ed["Gb" /* ay */],e.onUserExited=_bundle_0b1520ed["Gb" /* ay */],e.onChannelParticipantCountChanged=_bundle_0b1520ed["Gb" /* ay */],e.onPollUpdated=_bundle_0b1520ed["Gb" /* ay */],e.onPollVoted=_bundle_0b1520ed["Gb" /* ay */],e.onPollDeleted=_bundle_0b1520ed["Gb" /* ay */],e}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_8b967450_t)),openChannel_Oe=function(n){function t(e){var t=this,r=e.token,a=e.limit,o=e.nameKeyword,i=e.urlKeyword,u=e.customTypes,l=e.includeFrozen,h=e.includeMetaData;return(t=n.call(this)||this).method=_bundle_0b1520ed["b" /* A */].GET,t.path=_bundle_0b1520ed["cc" /* bm */],t.params=Object(_bundle_0b1520ed["hc" /* e */])({token:r,limit:a,name_contains:o,url_contains:i,custom_types:u,show_frozen:l,show_metadata:h}),t}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["ic" /* f */]),openChannel_He=function(n){function t(e,t){var r=n.call(this,e,t)||this;r.channels=[];var a=t.next,o=t.channels,i=t.ts;return r.token=a,o&&o.length>0&&(r.channels=o.map((function(n){return new openChannel_Pe(e,n)}))),r.ts="number"==typeof i?i:null,r}return Object(_bundle_0b1520ed["fc" /* c */])(t,n),t}(_bundle_0b1520ed["kc" /* h */]),openChannel_xe=function(r){function i(e,n){var t,a,o,i,s,u=this;return(u=r.call(this,e,n)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=null===(t=n.includeFrozen)||void 0===t||t,u.includeMetaData=null===(a=n.includeMetaData)||void 0===a||a,u.nameKeyword=null!==(o=n.nameKeyword)&&void 0!==o?o:null,u.urlKeyword=null!==(i=n.urlKeyword)&&void 0!==i?i:null,u.customTypes=null!==(s=n.customTypes)&&void 0!==s?s:null,u}return Object(_bundle_0b1520ed["fc" /* c */])(i,r),i.prototype._validate=function(){return r.prototype._validate.call(this)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeFrozen)&&Object(_bundle_0b1520ed["C" /* a */])("boolean",this.includeMetaData)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.nameKeyword,!0)&&Object(_bundle_0b1520ed["C" /* a */])("string",this.urlKeyword,!0)&&Object(_bundle_0b1520ed["r" /* Q */])("string",this.customTypes,!0)},i.prototype.next=function(){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=_bundle_0b1520ed["w" /* V */].of(this._iid).requestQueue,n=new openChannel_Oe(Object(_bundle_0b1520ed["xc" /* u */])(Object(_bundle_0b1520ed["jc" /* g */])(Object(_bundle_0b1520ed["jc" /* g */])({},this),{token:this._token}))),[4,e.send(n)]):[3,3]:[3,6];case 1:return r=t.sent(),a=r.as(openChannel_He),o=a.channels,i=a.token,this._token=i,this._hasNext=!!i,[4,openChannel_ge.of(this._iid).upsertChannelsToCache(o)];case 2:return t.sent(),this._isLoading=!1,[2,o];case 3:return[2,[]];case 4:throw _bundle_0b1520ed["vc" /* s */].queryInProgress;case 5:return[3,7];case 6:throw _bundle_0b1520ed["vc" /* s */].invalidParameters;case 7:return[2]}}))}))},i}(_bundle_0b1520ed["V" /* aM */]),openChannel_Ie=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="openChannel",e}return Object(_bundle_0b1520ed["fc" /* c */])(a,r),a.prototype.init=function(e,n){var t=n.sdkState,a=n.dispatcher,o=n.sessionManager,i=n.requestQueue,s=n.logger,u=n.onlineDetector,c=n.cacheContext;r.prototype.init.call(this,e,{sdkState:t,dispatcher:a,sessionManager:o,requestQueue:i,logger:s,onlineDetector:u,cacheContext:c}),this._manager=new openChannel_ge(e,{sdkState:t,dispatcher:a,requestQueue:i,logger:s,cacheContext:c,sessionManager:o})},a.prototype.createOpenChannelListQuery=function(e){return void 0===e&&(e={}),new openChannel_xe(this._iid,e)},a.prototype.addOpenChannelHandler=function(e,n){this._manager.addHandler(e,n)},a.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},a.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},a.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},a.prototype.getChannel=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return[2,this._manager.getChannel(e)]}))}))},a.prototype.getChannelWithoutCache=function(e){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return[2,this._manager.getChannelWithoutCache(e)]}))}))},a.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(n){return[2,this._manager.createChannel(e)]}))}))},a.prototype.createChannelWithOperatorUserIds=function(e,r,a,o,i){return Object(_bundle_0b1520ed["B" /* _ */])(this,void 0,void 0,(function(){var n;return Object(_bundle_0b1520ed["Ib" /* b */])(this,(function(t){return(n=Object(_bundle_0b1520ed["jc" /* g */])({},openChannel_he)).name=e,n.coverUrlOrImage=r,n.data=a,n.operatorUserIds=o,n.customType=i,[2,this._manager.createChannel(n)]}))}))},a}(_bundle_0b1520ed["hb" /* aY */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Dw9nwO7e.js
var noop = function () {
    /** noop * */
};
var isMobileIOS = function (userAgent) {
    var isIOS = /iPhone|iPad|iPod/i.test(userAgent);
    var isWebkit = /WebKit/i.test(userAgent);
    var isSafari = /Safari/i.test(userAgent);
    return isIOS && (isWebkit || isSafari);
};
var deleteNullish = function (obj) {
    var cleaned = {};
    Object.entries(obj).forEach(function (_a) {
        var key = _a[0], value = _a[1];
        if (value !== undefined && value !== null) {
            cleaned[key] = value;
        }
    });
    return cleaned;
};
function openURL(url) {
    var safeURL = url;
    if (safeURL) {
        if (!safeURL.startsWith('http://') && !safeURL.startsWith('https://')) {
            safeURL = 'https://' + safeURL;
        }
        window.open(safeURL, '_blank', 'noopener,noreferrer');
    }
}
function classnames() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    return args.filter(Boolean).join(' ');
}


//# sourceMappingURL=bundle-Dw9nwO7e.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B65gr4tC.js
// we use pubsub to sync events between multiple components(example - ChannelList, Channel)
// for example, if customer sends a message from their custom component
// without pubsub,we would not be able to listen to it
// in our ChannelList or Conversation
var pubSubFactory = function () {
    var topics = {};
    return {
        __getTopics: function () { return topics; },
        subscribe: function (topic, listener) {
            var _a;
            (_a = topics[topic]) !== null && _a !== void 0 ? _a : (topics[topic] = new Set());
            topics[topic].add(listener);
            return {
                remove: function () {
                    topics[topic].delete(listener);
                },
            };
        },
        publish: function (topic, info) {
            if (topics[topic]) {
                topics[topic].forEach(function (fn) {
                    setTimeout(function () { return fn(info !== undefined ? info : {}); }, 0);
                });
            }
        },
    };
};


//# sourceMappingURL=bundle-B65gr4tC.js.map

// EXTERNAL MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DhBuJR0w.js
var bundle_DhBuJR0w = __webpack_require__(2);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/useSendbirdStateContext.js




/**
 * Example:
 * const MyComponent = () => {
 *  const context = useSendbirdStateContext();
 *  const sdk = sendbirdSelectors.getSdk(context);
 *  return (<div>...</div>);
 * }
 */
var NO_CONTEXT_ERROR = 'No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.';
function useSendbirdStateContext() {
    var context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(SendbirdSdkContext);
    if (!context)
        throw new Error(NO_CONTEXT_ERROR);
    return context;
}


//# sourceMappingURL=useSendbirdStateContext.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BMQLJ23N.js





var INITIALIZE_AUDIO_UNIT = 'INITIALIZE_AUDIO_UNIT';
var RESET_AUDIO_UNIT = 'RESET_AUDIO_UNIT';
var SET_CURRENT_PLAYER = 'SET_CURRENT_PLAYER';
var ON_VOICE_PLAYER_PLAY = 'ON_VOICE_PLAYER_PLAY';
var ON_VOICE_PLAYER_PAUSE = 'ON_VOICE_PLAYER_PAUSE';
var ON_CURRENT_TIME_UPDATE = 'ON_CURRENT_TIME_UPDATE';

var VOICE_PLAYER_STATUS = {
    IDLE: 'IDLE',
    PREPARING: 'PREPARING',
    PLAYING: 'PLAYING',
    PAUSED: 'PAUSED',
    COMPLETED: 'COMPLETED',
};
var AudioUnitDefaultValue = function () { return ({
    audioFile: null,
    playbackTime: 0,
    duration: 1000,
    playingStatus: VOICE_PLAYER_STATUS.IDLE,
}); };
var voicePlayerInitialState = {
    currentPlayer: null,
    currentGroupKey: '',
    audioStorage: {},
};

function voicePlayerReducer(state, action) {
    var _a, _b, _c, _d, _e;
    var _f, _g, _h, _j;
    switch (action.type) {
        case INITIALIZE_AUDIO_UNIT: {
            var groupKey = action.payload.groupKey;
            var audioUnit = (((_f = state.audioStorage) === null || _f === void 0 ? void 0 : _f[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue());
            audioUnit.playingStatus = VOICE_PLAYER_STATUS.PREPARING;
            return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_a = {}, _a[groupKey] = audioUnit, _a)) });
        }
        case RESET_AUDIO_UNIT: {
            var groupKey = action.payload.groupKey;
            return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_b = {}, _b[groupKey] = AudioUnitDefaultValue(), _b)) });
        }
        case SET_CURRENT_PLAYER: {
            var _k = action.payload, audioPlayer = _k.audioPlayer, groupKey = _k.groupKey;
            return __assign(__assign({}, state), { currentPlayer: audioPlayer, currentGroupKey: groupKey });
        }
        case ON_VOICE_PLAYER_PLAY: {
            var _l = action.payload, groupKey = _l.groupKey, audioFile = _l.audioFile;
            var audioUnit = (((_g = state.audioStorage) === null || _g === void 0 ? void 0 : _g[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue());
            audioUnit.audioFile = audioFile;
            audioUnit.playingStatus = VOICE_PLAYER_STATUS.PLAYING;
            return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_c = {}, _c[groupKey] = audioUnit, _c)) });
        }
        case ON_VOICE_PLAYER_PAUSE: {
            var _m = action.payload, groupKey = _m.groupKey, duration = _m.duration, currentTime = _m.currentTime;
            var audioUnit = (((_h = state.audioStorage) === null || _h === void 0 ? void 0 : _h[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue());
            audioUnit.playingStatus = VOICE_PLAYER_STATUS.PAUSED;
            if (duration === currentTime) {
                audioUnit.playbackTime = 0;
            }
            return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_d = {}, _d[groupKey] = audioUnit, _d)) });
        }
        case ON_CURRENT_TIME_UPDATE: {
            var groupKey = action.payload.groupKey;
            var _o = state.currentPlayer, currentTime = _o.currentTime, duration = _o.duration;
            var audioUnit = (((_j = state.audioStorage) === null || _j === void 0 ? void 0 : _j[groupKey]) ? state.audioStorage[groupKey] : AudioUnitDefaultValue());
            // sometimes the final time update is fired AFTER the pause event when audio is finished
            if (audioUnit.playbackTime === audioUnit.duration && audioUnit.playingStatus === VOICE_PLAYER_STATUS.PAUSED) {
                audioUnit.playbackTime = 0;
            }
            else if (currentTime > 0 && duration > 0) {
                audioUnit.playbackTime = currentTime;
                audioUnit.duration = duration;
            }
            return __assign(__assign({}, state), { audioStorage: __assign(__assign({}, state.audioStorage), (_e = {}, _e[groupKey] = audioUnit, _e)) });
        }
        default:
            return state;
    }
}

var ALL = 'ALL';
var bundle_BMQLJ23N_noop = function () { };
var VoicePlayerStoreDefaultValue = {
    currentGroupKey: '',
    currentPlayer: null,
    audioStorage: {},
};
var Context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    play: bundle_BMQLJ23N_noop,
    pause: bundle_BMQLJ23N_noop,
    stop: bundle_BMQLJ23N_noop,
    voicePlayerStore: VoicePlayerStoreDefaultValue,
});
var VoicePlayerProvider = function (_a) {
    var children = _a.children;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(voicePlayerReducer, voicePlayerInitialState), voicePlayerStore = _b[0], voicePlayerDispatcher = _b[1];
    var currentGroupKey = voicePlayerStore.currentGroupKey, currentPlayer = voicePlayerStore.currentPlayer, audioStorage = voicePlayerStore.audioStorage;
    var config = useSendbirdStateContext().config;
    var logger = config.logger;
    var stop = function (text) {
        if (text === void 0) { text = ''; }
        if (currentGroupKey.includes(text)) {
            logger.info('VoicePlayer: Pause playing(by text).');
            pause(currentGroupKey);
        }
    };
    var pause = function (groupKey) {
        if (currentPlayer) {
            if (groupKey === currentGroupKey) {
                logger.info('VoicePlayer: Pause playing(by group key).');
                currentPlayer.pause();
            }
            else if (groupKey === ALL) {
                logger.info('VoicePlayer: Pause playing(all).');
                currentPlayer.pause();
            }
        }
        else {
            logger.warning('VoicePlayer: No currentPlayer to pause.');
        }
    };
    var play = function (_a) {
        var groupKey = _a.groupKey, audioFile = _a.audioFile, _b = _a.audioFileUrl, audioFileUrl = _b === void 0 ? '' : _b;
        if (groupKey !== currentGroupKey) {
            pause(currentGroupKey);
        }
        // Clear the previous AudioPlayer element
        var voicePlayerRoot = document.getElementById(bundle_DhBuJR0w["m" /* f */]);
        var voicePlayerAudioElement = document.getElementById(bundle_DhBuJR0w["j" /* c */]);
        if (voicePlayerRoot && voicePlayerAudioElement) {
            voicePlayerRoot.removeChild(voicePlayerAudioElement);
        }
        logger.info('VoicePlayer: Start getting audio file.');
        new Promise(function (resolve, reject) {
            var _a;
            voicePlayerDispatcher({
                type: INITIALIZE_AUDIO_UNIT,
                payload: { groupKey: groupKey },
            });
            // audio file passed as a parameter
            if (audioFile) {
                logger.info('VoicePlayer: Use the audioFile instance.');
                resolve(audioFile);
                return;
            }
            // audio file from the audioStorage
            var cachedAudioFile = (_a = audioStorage === null || audioStorage === void 0 ? void 0 : audioStorage[groupKey]) === null || _a === void 0 ? void 0 : _a.audioFile;
            if (cachedAudioFile) {
                logger.info('VoicePlayer: Get from the audioStorage.');
                resolve(cachedAudioFile);
                return;
            }
            // fetch the audio file from URL
            fetch(audioFileUrl)
                .then(function (res) { return res.blob(); })
                .then(function (blob) {
                var audioFile = new File([blob], bundle_DhBuJR0w["n" /* g */], {
                    lastModified: new Date().getTime(),
                    type: bundle_DhBuJR0w["o" /* h */],
                });
                resolve(audioFile);
                logger.info('VoicePlayer: Get the audioFile from URL.');
            })
                .catch(reject);
        })
            .then(function (audioFile) {
            var _a;
            var voicePlayerRoot = document.getElementById(bundle_DhBuJR0w["m" /* f */]);
            logger.info('VoicePlayer: Succeeded getting audio file.', { audioFile: audioFile });
            var currentAudioUnit = audioStorage[groupKey] || AudioUnitDefaultValue();
            var audioPlayer = new Audio((_a = URL === null || URL === void 0 ? void 0 : URL.createObjectURL) === null || _a === void 0 ? void 0 : _a.call(URL, audioFile));
            audioPlayer.id = bundle_DhBuJR0w["j" /* c */];
            audioPlayer.currentTime = currentAudioUnit.playbackTime;
            audioPlayer.volume = 1;
            audioPlayer.loop = false;
            audioPlayer.onplaying = function () {
                logger.info('VoicePlayer: OnPlaying event is called from audioPlayer', { groupKey: groupKey, audioPlayer: audioPlayer });
                voicePlayerDispatcher({
                    type: ON_VOICE_PLAYER_PLAY,
                    payload: { groupKey: groupKey, audioFile: audioFile },
                });
            };
            audioPlayer.onpause = function () {
                logger.info('VoicePlayer: OnPause event is called from audioPlayer', { groupKey: groupKey, audioPlayer: audioPlayer });
                voicePlayerDispatcher({
                    type: ON_VOICE_PLAYER_PAUSE,
                    payload: { groupKey: groupKey, duration: audioPlayer.duration, currentTime: audioPlayer.currentTime },
                });
            };
            audioPlayer.ontimeupdate = function () {
                voicePlayerDispatcher({
                    type: ON_CURRENT_TIME_UPDATE,
                    payload: { groupKey: groupKey },
                });
            };
            audioPlayer.onerror = function (error) {
                logger.error('VoicePlayer: Failed to load the audioFile on the audio player.', error);
                voicePlayerDispatcher({
                    type: RESET_AUDIO_UNIT,
                    payload: { groupKey: groupKey },
                });
            };
            audioPlayer.dataset.sbGroupId = groupKey;
            // clean up the previous audio player
            try {
                voicePlayerRoot === null || voicePlayerRoot === void 0 ? void 0 : voicePlayerRoot.childNodes.forEach(function (node) {
                    var _a, _b;
                    var element = node;
                    var thisGroupKey = (_a = element.dataset) === null || _a === void 0 ? void 0 : _a.sbGroupKey;
                    if (thisGroupKey !== groupKey) {
                        (_b = element === null || element === void 0 ? void 0 : element.pause) === null || _b === void 0 ? void 0 : _b.call(element);
                        voicePlayerRoot.removeChild(element);
                        logger.info('VoicePlayer: Removed other player.', { element: element });
                    }
                });
            }
            finally {
                audioPlayer === null || audioPlayer === void 0 ? void 0 : audioPlayer.play();
                voicePlayerRoot === null || voicePlayerRoot === void 0 ? void 0 : voicePlayerRoot.appendChild(audioPlayer);
                voicePlayerDispatcher({
                    type: SET_CURRENT_PLAYER,
                    payload: { groupKey: groupKey, audioPlayer: audioPlayer },
                });
                logger.info('VoicePlayer: Succeeded playing audio player.', { groupKey: groupKey, audioPlayer: audioPlayer });
            }
        })
            .catch(function (error) {
            logger.warning('VoicePlayer: Failed loading audio file with URL.', error);
            voicePlayerDispatcher({
                type: RESET_AUDIO_UNIT,
                payload: { groupKey: groupKey },
            });
        });
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Context.Provider, { value: {
            play: play,
            pause: pause,
            stop: stop,
            voicePlayerStore: voicePlayerStore,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { id: bundle_DhBuJR0w["m" /* f */], style: { display: 'none' } }),
        children));
};
var useVoicePlayerContext = function () { return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(Context); };


//# sourceMappingURL=bundle-BMQLJ23N.js.map

// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(3);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Ce-B4ROs.js
/**
 * NOTE:
 * Do not forget to update the string set table on Docs
 * When you update this string set
 *
 * `%d` will be replaced by a proper number
 */
var bundle_Ce_B4ROs_stringSet = {
    en: {
        // Group Channel - Conversation
        MESSAGE_STATUS__YESTERDAY: 'Yesterday',
        CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE: 'new message(s) since',
        /** @deprecated Please use `DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE` instead * */
        CHANNEL__MESSAGE_LIST__NOTIFICATION__ON: 'on',
        // Channel List
        CHANNEL_PREVIEW_MOBILE_LEAVE: 'Leave channel',
        // Group Channel - Settings
        CHANNEL_SETTING__HEADER__TITLE: 'Channel information',
        CHANNEL_SETTING__PROFILE__EDIT: 'Edit',
        CHANNEL_SETTING__MEMBERS__TITLE: 'Members',
        CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS: 'All members',
        CHANNEL_SETTING__MEMBERS__INVITE_MEMBER: 'Invite users',
        CHANNEL_SETTING__MEMBERS__YOU: ' (You)',
        CHANNEL_SETTING__MEMBERS__SELECT_TITLE: 'Select members',
        CHANNEL_SETTING__MEMBERS__OPERATOR: 'Operator',
        CHANNEL_SETTING__LEAVE_CHANNEL__TITLE: 'Leave channel',
        CHANNEL_SETTING__OPERATORS__TITLE: 'Operators',
        CHANNEL_SETTING__OPERATORS__TITLE_ALL: 'All operators',
        CHANNEL_SETTING__OPERATORS__TITLE_ADD: 'Add operator',
        CHANNEL_SETTING__OPERATORS__ADD_BUTTON: 'Add',
        CHANNEL_SETTING__MUTED_MEMBERS__TITLE: 'Muted members',
        CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL: 'All muted members',
        CHANNEL_SETTING__NO_UNMUTED: 'No muted members yet',
        CHANNEL_SETTING__BANNED_MEMBERS__TITLE: 'Banned users',
        CHANNEL_SETTING__FREEZE_CHANNEL: 'Freeze Channel',
        CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: 'Register as operator',
        CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: 'Unregister operator',
        CHANNEL_SETTING__MODERATION__MUTE: 'Mute',
        CHANNEL_SETTING__MODERATION__UNMUTE: 'Unmute',
        CHANNEL_SETTING__MODERATION__BAN: 'Ban',
        CHANNEL_SETTING__MODERATION__UNBAN: 'Unban',
        CHANNEL_SETTING__MODERATION__EMPTY_BAN: 'No banned members yet',
        CHANNEL_SETTING__MODERATION__ALL_BAN: 'All banned members',
        // OpenChannel - Conversation
        OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS: 'participants',
        OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS: 'Select participants',
        // OpenChannelList
        OPEN_CHANNEL_LIST__TITLE: 'Channels',
        CREATE_OPEN_CHANNEL_LIST__TITLE: 'New channel profile',
        CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION: 'Channel image',
        CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD: 'Upload',
        CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION: 'Channel name',
        CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER: 'Enter channel name',
        CREATE_OPEN_CHANNEL_LIST__SUBMIT: 'Create',
        // OpenChannel - Settings
        OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE: 'Channel Information',
        OPEN_CHANNEL_SETTINGS__OPERATOR_URL: 'URL',
        OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE: 'Participants',
        OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL: 'Delete channel',
        OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE: 'Delete channel?',
        OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT: 'Once deleted, this channel can\'t be restored.',
        OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT: 'Delete',
        OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE: 'Operators',
        OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD: 'Add operator',
        OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL: 'All operators',
        OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE: 'Muted participants',
        OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL: 'All muted participants',
        OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE: 'No muted participants yet',
        OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE: 'Banned users',
        OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL: 'All banned users',
        OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE: 'No banned users yet',
        OPEN_CHANNEL_SETTINGS__MEMBERS__YOU: ' (You)',
        OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR: 'Operator',
        OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE: 'Participants',
        OPEN_CHANNEL_SETTINGS__EMPTY_LIST: 'No participants yet',
        OPEN_CHANNEL_SETTINGS__SEE_ALL: 'See all participants',
        OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE: 'All participants',
        OPEN_CHANNEL_SETTINGS__NO_TITLE: '(No title)',
        OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: 'Register as operator',
        OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: 'Unregister operator',
        OPEN_CHANNEL_SETTING__MODERATION__MUTE: 'Mute',
        OPEN_CHANNEL_SETTING__MODERATION__UNMUTE: 'Unmute',
        OPEN_CHANNEL_SETTING__MODERATION__BAN: 'Ban',
        OPEN_CHANNEL_SETTING__MODERATION__UNBAN: 'Unban',
        // Channel - Common
        TRYING_TO_CONNECT: 'Trying to connect',
        TYPING_INDICATOR__IS_TYPING: 'is typing...',
        TYPING_INDICATOR__AND: 'and',
        TYPING_INDICATOR__ARE_TYPING: 'are typing...',
        TYPING_INDICATOR__MULTIPLE_TYPING: 'Several people are typing...',
        CHANNEL_FROZEN: 'Channel frozen',
        PLACE_HOLDER__NO_CHANNEL: 'No channels',
        PLACE_HOLDER__WRONG: 'Something went wrong',
        PLACE_HOLDER__RETRY_TO_CONNECT: 'Retry',
        PLACE_HOLDER__NO_MESSAGES: 'No messages',
        TOOLTIP__AND_YOU: ', and you',
        TOOLTIP__YOU: 'you',
        TOOLTIP__UNKNOWN_USER: '(no name)',
        UNKNOWN__UNKNOWN_MESSAGE_TYPE: '(Unknown message type)',
        UNKNOWN__CANNOT_READ_MESSAGE: 'Cannot read this message.',
        UNKNOWN__TEMPLATE_ERROR: '(Template error)',
        UNKNOWN__CANNOT_READ_TEMPLATE: 'Cannot read this template.',
        MESSAGE_EDITED: '(edited)',
        // Channel - Modal
        MODAL__DELETE_MESSAGE__TITLE: 'Delete this message?',
        MODAL__CHANNEL_INFORMATION__TITLE: 'Edit channel information',
        MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE: 'Channel image',
        MODAL__CHANNEL_INFORMATION__UPLOAD: 'Upload',
        MODAL__CHANNEL_INFORMATION__CHANNEL_NAME: 'Channel name',
        MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER: 'Enter name',
        MODAL__INVITE_MEMBER__TITLE: 'Invite member',
        MODAL__INVITE_MEMBER__SELECTED: 'selected',
        MODAL__CHOOSE_CHANNEL_TYPE__TITLE: 'New channel',
        MODAL__CHOOSE_CHANNEL_TYPE__GROUP: 'Group',
        MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP: 'Super group',
        MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST: 'Broadcast',
        MODAL__CREATE_CHANNEL__TITLE: 'New channel',
        MODAL__CREATE_CHANNEL__GROUP: 'Group',
        MODAL__CREATE_CHANNEL__SUPER: 'Super group',
        MODAL__CREATE_CHANNEL__BROADCAST: 'Broadcast',
        MODAL__CREATE_CHANNEL__SELECTED: 'selected',
        MODAL__LEAVE_CHANNEL__TITLE: 'Leave this channel?',
        MODAL__LEAVE_CHANNEL__FOOTER: 'Leave',
        MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED: 'You\'re muted by the operator.',
        MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN: 'Channel is frozen.',
        // User Profile
        USER_PROFILE__MESSAGE: 'Message',
        USER_PROFILE__USER_ID: 'User ID',
        EDIT_PROFILE__TITLE: 'My profile',
        EDIT_PROFILE__IMAGE_LABEL: 'Profile image',
        EDIT_PROFILE__IMAGE_UPLOAD: 'Upload',
        EDIT_PROFILE__NICKNAME_LABEL: 'Nickname',
        EDIT_PROFILE__NICKNAME_PLACEHOLDER: 'Enter your nickname',
        EDIT_PROFILE__USERID_LABEL: 'User ID',
        EDIT_PROFILE__THEME_LABEL: 'Dark theme',
        // Message Input
        MESSAGE_INPUT__PLACE_HOLDER: 'Enter message',
        MESSAGE_INPUT__PLACE_HOLDER__DISABLED: 'Chat is unavailable in this channel',
        MESSAGE_INPUT__PLACE_HOLDER__MUTED: 'Chat is unavailable because you\'re muted',
        MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT: 'You\'re muted',
        MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER: 'Reply to message',
        // Common UI
        BUTTON__SUBMIT: 'Submit',
        BUTTON__CANCEL: 'Cancel',
        BUTTON__DELETE: 'Delete',
        BUTTON__SAVE: 'Save',
        BUTTON__CREATE: 'Create',
        BUTTON__INVITE: 'Invite',
        BUTTON__OK: 'OK',
        BADGE__OVER: '+',
        NO_TITLE: 'No title',
        NO_NAME: '(No name)',
        NO_MEMBERS: '(No members)',
        LABEL__OPERATOR: 'Operator',
        // Context Menu
        MESSAGE_MENU__COPY: 'Copy',
        MESSAGE_MENU__REPLY: 'Reply',
        MESSAGE_MENU__THREAD: 'Reply in thread',
        MESSAGE_MENU__OPEN_IN_CHANNEL: 'Open in channel',
        MESSAGE_MENU__EDIT: 'Edit',
        MESSAGE_MENU__RESEND: 'Resend',
        MESSAGE_MENU__DELETE: 'Delete',
        MESSAGE_MENU__SAVE: 'Save',
        //  * FIXME: get back legacy, remove after refactoring open channel messages *
        CONTEXT_MENU_DROPDOWN__COPY: 'Copy',
        CONTEXT_MENU_DROPDOWN__EDIT: 'Edit',
        CONTEXT_MENU_DROPDOWN__RESEND: 'Resend',
        CONTEXT_MENU_DROPDOWN__DELETE: 'Delete',
        CONTEXT_MENU_DROPDOWN__SAVE: 'Save',
        // Feature - Message Search
        SEARCH: 'Search',
        SEARCH_IN_CHANNEL: 'Search in channel',
        SEARCH_IN: 'Search in',
        SEARCHING: 'Searching for messages...',
        NO_SEARCHED_MESSAGE: 'No results found.',
        // Feature - Message Reply
        QUOTE_MESSAGE_INPUT__REPLY_TO: 'Reply to',
        QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE: 'Photo',
        QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF: 'GIF',
        QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO: 'Video',
        QUOTED_MESSAGE__REPLIED_TO: 'replied to',
        QUOTED_MESSAGE__CURRENT_USER: 'You',
        QUOTED_MESSAGE__UNAVAILABLE: 'Message unavailable',
        // Feature - Thread
        THREAD__HEADER_TITLE: 'Thread',
        CHANNEL__THREAD_REPLY: 'reply',
        CHANNEL__THREAD_REPLIES: 'replies',
        CHANNEL__THREAD_OVER_MAX: '99+',
        THREAD__THREAD_REPLY: 'reply',
        THREAD__THREAD_REPLIES: 'replies',
        THREAD__INPUT__REPLY_TO_THREAD: 'Reply to thread',
        THREAD__INPUT__REPLY_IN_THREAD: 'Reply in thread',
        // Feature - Mention
        MENTION_NAME__NO_NAME: '(No name)',
        MENTION_COUNT__OVER_LIMIT: 'You can mention up to %d times at a time.',
        UI__FILE_VIEWER__UNSUPPORT: 'Unsupported message',
        // Feature - Voice Message
        VOICE_RECORDING_PERMISSION_DENIED: "You cannot record the voice since\n        voice recording is not permitted in your device system setting",
        VOICE_MESSAGE: 'Voice Message',
        // Channel preview last message file type display strings
        CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF: 'GIF',
        CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO: 'Photo',
        CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO: 'Video',
        CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO: 'Audio',
        CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE: 'Voice message',
        CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL: 'File',
        CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE: 'Message',
        // Date format
        DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE: 'p \'on\' MMM dd',
        DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR: 'MMMM dd, yyyy',
        DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR: 'MMM dd, yyyy',
        // File upload
        FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT: 'Up to %d files can be attached.',
        FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT: 'The maximum size per file is %d MB.',
        // Feedback button text
        FEEDBACK_LIKE: 'Like',
        FEEDBACK_DISLIKE: 'Dislike',
        // Mobile feedback options menu items
        EDIT_COMMENT: 'Edit comment',
        REMOVE_FEEDBACK: 'Remove Feedback',
        // Feedback modal title
        FEEDBACK_MODAL_TITLE: 'Provide additional feedback (optional)',
        FEEDBACK_CONTENT_PLACEHOLDER: 'Leave a comment',
        BUTTON__REMOVE_FEEDBACK: 'Remove feedback',
        // Feedback failed modal title
        FEEDBACK_FAILED_SUBMIT: 'Couldnt submit. Try again.',
        FEEDBACK_FAILED_SAVE: 'Couldnt save. Try again.',
        FEEDBACK_FAILED_DELETE: 'Couldnt delete. Try again.',
    },
};
var getStringSet = function (lang) {
    if (lang === void 0) { lang = 'en'; }
    return bundle_Ce_B4ROs_stringSet[lang];
};


//# sourceMappingURL=bundle-Ce-B4ROs.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DprHnWfH.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};
var formatDistance = function formatDistance(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === 'string') {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace('{{count}}', count.toString());
  }
  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }
  return result;
};
var formatDistance$1 = formatDistance;

function buildFormatLongFn(args) {
  return function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    // TODO: Remove String()
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

var dateFormats = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: 'full'
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: 'full'
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: 'full'
  })
};
var formatLong$1 = formatLong;

var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};
var formatRelative = function formatRelative(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};
var formatRelative$1 = formatRelative;

function buildLocalizeFn(args) {
  return function (dirtyIndex, options) {
    var context = options !== null && options !== void 0 && options.context ? String(options.context) : 'standalone';
    var valuesArray;
    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;
      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }
    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;
    // @ts-ignore: For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!
    return valuesArray[index];
  };
}

var eraValues = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']
};

// Note: in English, the names of days of the week and months are capitalized.
// If you are making a new locale based on this one, check if the same is true for the language you're working on.
// Generally, formatted dates should look like they are in the middle of a sentence,
// e.g. in Spanish language the weekdays and months should be in the lowercase.
var monthValues = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};
var ordinalNumber = function ordinalNumber(dirtyNumber, _options) {
  var number = Number(dirtyNumber);

  // If ordinal numbers depend on context, for example,
  // if they are different for different grammatical genders,
  // use `options.unit`.
  //
  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',
  // 'day', 'hour', 'minute', 'second'.

  var rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';
      case 2:
        return number + 'nd';
      case 3:
        return number + 'rd';
    }
  }
  return number + 'th';
};
var localize = {
  ordinalNumber: ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: 'wide'
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: 'wide',
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: 'wide'
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: 'wide'
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: 'wide'
  })
};
var localize$1 = localize;

function buildMatchFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}
function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
  return undefined;
}
function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return undefined;
}

function buildMatchPatternFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns,
    defaultParseWidth: 'any'
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: 'any',
    valueCallback: function valueCallback(index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: 'any'
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns,
    defaultParseWidth: 'any'
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: 'any'
  })
};
var match$1 = match;

/**
 * @type {Locale}
 * @category Locales
 * @summary English locale (United States).
 * @language English
 * @iso-639-2 eng
 * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}
 * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}
 */
var bundle_DprHnWfH_locale = {
  code: 'en-US',
  formatDistance: formatDistance$1,
  formatLong: formatLong$1,
  formatRelative: formatRelative$1,
  localize: localize$1,
  match: match$1,
  options: {
    weekStartsOn: 0 /* Sunday */,
    firstWeekContainsDate: 1
  }
};
var defaultLocale = bundle_DprHnWfH_locale;


//# sourceMappingURL=bundle-DprHnWfH.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-nfJ9J5Md.js





var LocalizationContextDefault = {
    stringSet: getStringSet('en'),
    dateLocale: defaultLocale,
};
var LocalizationContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(LocalizationContextDefault);
var LocalizationProvider = function (props) {
    var children = props.children;
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LocalizationContext.Provider, { value: __assign(__assign({}, LocalizationContextDefault), props) }, children);
};
var useLocalization = function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(LocalizationContext); };


//# sourceMappingURL=bundle-nfJ9J5Md.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-3Mubyujl.js


var DEFAULT_MOBILE = false;
// const DEFAULT_MOBILE = '768px';
var MOBILE_CLASSNAME = 'sendbird--mobile-mode';
var MediaQueryContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
    breakpoint: DEFAULT_MOBILE,
    isMobile: false,
});
var addClassNameToBody = function () {
    try {
        var body = document.querySelector('body');
        body === null || body === void 0 ? void 0 : body.classList.add(MOBILE_CLASSNAME);
    }
    catch (_a) {
        // noop
    }
};
var removeClassNameFromBody = function () {
    try {
        var body = document.querySelector('body');
        body === null || body === void 0 ? void 0 : body.classList.remove(MOBILE_CLASSNAME);
    }
    catch (_a) {
        // noop
    }
};
var MediaQueryProvider = function (props) {
    var children = props.children, logger = props.logger;
    var breakpoint = (props === null || props === void 0 ? void 0 : props.breakpoint) || false;
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isMobile = _a[0], setIsMobile = _a[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        var updateSize = function () {
            var _a, _b, _c, _d, _e;
            if (typeof breakpoint === 'boolean') {
                setIsMobile(breakpoint);
                if (breakpoint) {
                    (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'MediaQueryProvider: isMobile: true');
                    addClassNameToBody();
                }
                else {
                    (_b = logger === null || logger === void 0 ? void 0 : logger.info) === null || _b === void 0 ? void 0 : _b.call(logger, 'MediaQueryProvider: isMobile: false');
                    removeClassNameFromBody();
                }
            }
            else {
                var mq = window.matchMedia("(max-width: ".concat(breakpoint, ")"));
                (_c = logger === null || logger === void 0 ? void 0 : logger.info) === null || _c === void 0 ? void 0 : _c.call(logger, "MediaQueryProvider: Screensize updated to ".concat(breakpoint));
                if (mq.matches) {
                    setIsMobile(true);
                    addClassNameToBody();
                    (_d = logger === null || logger === void 0 ? void 0 : logger.info) === null || _d === void 0 ? void 0 : _d.call(logger, 'MediaQueryProvider: isMobile: true');
                }
                else {
                    setIsMobile(false);
                    removeClassNameFromBody();
                    (_e = logger === null || logger === void 0 ? void 0 : logger.info) === null || _e === void 0 ? void 0 : _e.call(logger, 'MediaQueryProvider: isMobile: false');
                }
            }
        };
        updateSize();
        window.addEventListener('resize', updateSize);
        (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'MediaQueryProvider: addEventListener', { updateSize: updateSize });
        return function () {
            var _a;
            window.removeEventListener('resize', updateSize);
            (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'MediaQueryProvider: removeEventListener', { updateSize: updateSize });
        };
    }, [breakpoint]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MediaQueryContext.Provider, { value: { breakpoint: breakpoint, isMobile: isMobile } }, children));
};
var useMediaQueryContext = function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(MediaQueryContext); };


//# sourceMappingURL=bundle-3Mubyujl.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/IconButton.js



var IconButton = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var _a = props.className, className = _a === void 0 ? '' : _a, children = props.children, _b = props.disabled, disabled = _b === void 0 ? false : _b, _c = props.width, width = _c === void 0 ? '56px' : _c, _d = props.height, height = _d === void 0 ? '56px' : _d, _e = props.type, type = _e === void 0 ? 'button' : _e, _f = props.style, style = _f === void 0 ? {} : _f, _g = props.onBlur, onBlur = _g === void 0 ? function () { } : _g, _h = props.onClick, onClick = _h === void 0 ? function () { } : _h;
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isPressed = _j[0], setIsPressed = _j[1];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("button", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-iconbutton',
            isPressed ? 'sendbird-iconbutton--pressed' : '',
        ], false).join(' '), disabled: disabled, ref: ref, type: type, style: __assign(__assign({}, style), { height: height, width: width }), onClick: function (e) {
            if (disabled) {
                return;
            }
            setIsPressed(true);
            onClick === null || onClick === void 0 ? void 0 : onClick(e);
        }, onBlur: function (e) {
            setIsPressed(false);
            onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: "sendbird-iconbutton__inner" }, children)));
});


//# sourceMappingURL=IconButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-prXB4t_m.js




var Typography = {
    H_1: 'H_1',
    H_2: 'H_2',
    SUBTITLE_1: 'SUBTITLE_1',
    SUBTITLE_2: 'SUBTITLE_2',
    BODY_1: 'BODY_1',
    BODY_2: 'BODY_2',
    BUTTON_1: 'BUTTON_1',
    BUTTON_2: 'BUTTON_2',
    BUTTON_3: 'BUTTON_3',
    CAPTION_1: 'CAPTION_1',
    CAPTION_2: 'CAPTION_2',
    CAPTION_3: 'CAPTION_3',
};
var Colors = {
    ONBACKGROUND_1: 'ONBACKGROUND_1',
    ONBACKGROUND_2: 'ONBACKGROUND_2',
    ONBACKGROUND_3: 'ONBACKGROUND_3',
    ONBACKGROUND_4: 'ONBACKGROUND_4',
    ONCONTENT_1: 'ONCONTENT_1',
    ONCONTENT_2: 'ONCONTENT_2',
    ONCONTENT_INVERSE_1: 'ONCONTENT_INVERSE_1',
    ONCONTENT_INVERSE_5: 'ONCONTENT_INVERSE_5',
    PRIMARY: 'PRIMARY',
    ERROR: 'ERROR',
    SECONDARY_3: 'SECONDARY_3',
};

function changeTypographyToClassName(type) {
    switch (type) {
        case Typography.H_1: return 'sendbird-label--h-1';
        case Typography.H_2: return 'sendbird-label--h-2';
        case Typography.SUBTITLE_1: return 'sendbird-label--subtitle-1';
        case Typography.SUBTITLE_2: return 'sendbird-label--subtitle-2';
        case Typography.BODY_1: return 'sendbird-label--body-1';
        case Typography.BODY_2: return 'sendbird-label--body-2';
        case Typography.BUTTON_1: return 'sendbird-label--button-1';
        case Typography.BUTTON_2: return 'sendbird-label--button-2';
        case Typography.BUTTON_3: return 'sendbird-label--button-3';
        case Typography.CAPTION_1: return 'sendbird-label--caption-1';
        case Typography.CAPTION_2: return 'sendbird-label--caption-2';
        case Typography.CAPTION_3: return 'sendbird-label--caption-3';
        default: return '';
    }
}
function changeColorToClassName(color) {
    switch (color) {
        case Colors.ONBACKGROUND_1: return 'sendbird-label--color-onbackground-1';
        case Colors.ONBACKGROUND_2: return 'sendbird-label--color-onbackground-2';
        case Colors.ONBACKGROUND_3: return 'sendbird-label--color-onbackground-3';
        case Colors.ONBACKGROUND_4: return 'sendbird-label--color-onbackground-4';
        case Colors.ONCONTENT_1: return 'sendbird-label--color-oncontent-1';
        case Colors.ONCONTENT_2: return 'sendbird-label--color-oncontent-2';
        case Colors.ONCONTENT_INVERSE_1: return 'sendbird-label--color-oncontent-inverse-1';
        case Colors.ONCONTENT_INVERSE_5: return 'sendbird-label--color-oncontent-inverse-5';
        case Colors.PRIMARY: return 'sendbird-label--color-primary'; // should be Primary-3 fix me
        case Colors.ERROR: return 'sendbird-label--color-error';
        case Colors.SECONDARY_3: return 'sendbird-label--color-secondary-3';
        default: return '';
    }
}

var Label = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["forwardRef"])(function (_a, ref) {
    var _b = _a.className, className = _b === void 0 ? [] : _b, type = _a.type, color = _a.color, _c = _a.children, children = _c === void 0 ? null : _c;
    return (
    // Donot make this into div
    // Mention uses Label. If we use div, it would break the mention detection on Paste
    // https://github.com/sendbird/sendbird-uikit-react/pull/479
    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-label',
            changeTypographyToClassName(type),
            changeColorToClassName(color),
        ], false).join(' '), ref: ref }, children));
});
var LabelTypography = Typography;
var LabelColors = Colors;
var LabelStringSet = getStringSet('en');


//# sourceMappingURL=bundle-prXB4t_m.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Button.js





var ButtonTypes;
(function (ButtonTypes) {
    ButtonTypes["PRIMARY"] = "PRIMARY";
    ButtonTypes["SECONDARY"] = "SECONDARY";
    ButtonTypes["DANGER"] = "DANGER";
    ButtonTypes["DISABLED"] = "DISABLED";
    ButtonTypes["WARNING"] = "WARNING";
})(ButtonTypes || (ButtonTypes = {}));
var ButtonSizes;
(function (ButtonSizes) {
    ButtonSizes["BIG"] = "BIG";
    ButtonSizes["SMALL"] = "SMALL";
})(ButtonSizes || (ButtonSizes = {}));

function changeTypeToClassName(type) {
    switch (type) {
        case ButtonTypes.PRIMARY: return 'sendbird-button--primary';
        case ButtonTypes.SECONDARY: return 'sendbird-button--secondary';
        case ButtonTypes.DANGER: return 'sendbird-button--danger';
        case ButtonTypes.DISABLED: return 'sendbird-button--disabled';
        case ButtonTypes.WARNING: return 'sendbird-button--warning';
        default: return '';
    }
}
function changeSizeToClassName(size) {
    switch (size) {
        case ButtonSizes.BIG: return 'sendbird-button--big';
        case ButtonSizes.SMALL: return 'sendbird-button--small';
        default: return '';
    }
}

function Button(_a) {
    var className = _a.className, _b = _a.type, type = _b === void 0 ? ButtonTypes.PRIMARY : _b, _c = _a.size, size = _c === void 0 ? ButtonSizes.BIG : _c, _d = _a.children, children = _d === void 0 ? 'Button' : _d, _e = _a.disabled, disabled = _e === void 0 ? false : _e, _f = _a.onClick, onClick = _f === void 0 ? function () { } : _f, _g = _a.labelType, labelType = _g === void 0 ? LabelTypography.BUTTON_1 : _g, _h = _a.labelColor, labelColor = _h === void 0 ? LabelColors.ONCONTENT_1 : _h;
    var injectingClassNames = __spreadArray(__spreadArray([], ((Array.isArray(className)) ? className : [className]), true), [
        'sendbird-button',
        (disabled ? 'sendbird-button__disabled' : ''),
        changeTypeToClassName(type),
        changeSizeToClassName(size),
    ], false).join(' ');
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("button", { className: injectingClassNames, type: "button", onClick: onClick, disabled: disabled },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-button__text", type: labelType, color: labelColor }, children)));
}


//# sourceMappingURL=Button.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Icon.js





/* eslint-disable no-redeclare */
var Types = {
    ADD: 'ADD',
    ARROW_LEFT: 'ARROW_LEFT',
    ATTACH: 'ATTACH',
    AUDIO_ON_LINED: 'AUDIO_ON_LINED',
    BAN: 'BAN',
    BROADCAST: 'BROADCAST',
    CAMERA: 'CAMERA',
    CHANNELS: 'CHANNELS',
    CHAT: 'CHAT',
    CHAT_FILLED: 'CHAT_FILLED',
    CHEVRON_DOWN: 'CHEVRON_DOWN',
    CHEVRON_RIGHT: 'CHEVRON_RIGHT',
    CLOSE: 'CLOSE',
    COLLAPSE: 'COLLAPSE',
    COPY: 'COPY',
    CREATE: 'CREATE',
    DELETE: 'DELETE',
    DISCONNECTED: 'DISCONNECTED',
    DOCUMENT: 'DOCUMENT',
    DONE: 'DONE',
    DONE_ALL: 'DONE_ALL',
    DOWNLOAD: 'DOWNLOAD',
    EDIT: 'EDIT',
    EMOJI_MORE: 'EMOJI_MORE',
    ERROR: 'ERROR',
    EXPAND: 'EXPAND',
    FILE_AUDIO: 'FILE_AUDIO',
    FILE_DOCUMENT: 'FILE_DOCUMENT',
    FREEZE: 'FREEZE',
    GIF: 'GIF',
    INFO: 'INFO',
    LEAVE: 'LEAVE',
    MEMBERS: 'MEMBERS',
    MESSAGE: 'MESSAGE',
    MODERATIONS: 'MODERATIONS',
    MORE: 'MORE',
    MUTE: 'MUTE',
    NOTIFICATIONS: 'NOTIFICATIONS',
    NOTIFICATIONS_OFF_FILLED: 'NOTIFICATIONS_OFF_FILLED',
    OPERATOR: 'OPERATOR',
    PHOTO: 'PHOTO',
    PLAY: 'PLAY',
    PLUS: 'PLUS',
    QUESTION: 'QUESTION',
    REFRESH: 'REFRESH',
    REPLY: 'REPLY',
    REMOVE: 'REMOVE',
    SEARCH: 'SEARCH',
    SEND: 'SEND',
    SETTINGS_FILLED: 'SETTINGS_FILLED',
    SLIDE_LEFT: 'SLIDE_LEFT',
    SPINNER: 'SPINNER',
    SUPERGROUP: 'SUPERGROUP',
    THREAD: 'THREAD',
    THUMBNAIL_NONE: 'THUMBNAIL_NONE',
    TOGGLE_OFF: 'TOGGLE_OFF',
    TOGGLE_ON: 'TOGGLE_ON',
    USER: 'USER',
    FEEDBACK_LIKE: 'FEEDBACK_LIKE',
    FEEDBACK_DISLIKE: 'FEEDBACK_DISLIKE',
};

/* eslint-disable no-redeclare */
var Icon_Colors = {
    DEFAULT: 'DEFAULT',
    PRIMARY: 'PRIMARY',
    PRIMARY_2: 'PRIMARY_2',
    SECONDARY: 'SECONDARY',
    CONTENT: 'CONTENT',
    CONTENT_INVERSE: 'CONTENT_INVERSE',
    CONTENT_INVERSE_5: 'CONTENT_INVERSE_5',
    WHITE: 'WHITE',
    GRAY: 'GRAY',
    THUMBNAIL_ICON: 'THUMBNAIL_ICON',
    SENT: 'SENT',
    READ: 'READ',
    ON_BACKGROUND_1: 'ON_BACKGROUND_1',
    ON_BACKGROUND_2: 'ON_BACKGROUND_2',
    ON_BACKGROUND_3: 'ON_BACKGROUND_3',
    ON_BACKGROUND_4: 'ON_BACKGROUND_4',
    BACKGROUND_3: 'BACKGROUND_3',
    ERROR: 'ERROR',
};

function Icon_changeColorToClassName(color) {
    switch (color) {
        case Icon_Colors.PRIMARY: return 'sendbird-icon-color--primary';
        case Icon_Colors.PRIMARY_2: return 'sendbird-icon-color--primary-2';
        case Icon_Colors.SECONDARY: return 'sendbird-icon-color--secondary';
        case Icon_Colors.CONTENT: return 'sendbird-icon-color--content';
        case Icon_Colors.CONTENT_INVERSE: return 'sendbird-icon-color--content-inverse';
        case Icon_Colors.CONTENT_INVERSE_5: return 'sendbird-icon-color--content-inverse-5';
        case Icon_Colors.WHITE: return 'sendbird-icon-color--white';
        case Icon_Colors.GRAY: return 'sendbird-icon-color--gray';
        case Icon_Colors.THUMBNAIL_ICON: return 'sendbird-icon-color--thumbnail-icon';
        case Icon_Colors.SENT: return 'sendbird-icon-color--sent';
        case Icon_Colors.READ: return 'sendbird-icon-color--read';
        case Icon_Colors.ON_BACKGROUND_1: return 'sendbird-icon-color--on-background-1';
        case Icon_Colors.ON_BACKGROUND_2: return 'sendbird-icon-color--on-background-2';
        case Icon_Colors.ON_BACKGROUND_3: return 'sendbird-icon-color--on-background-3';
        case Icon_Colors.ON_BACKGROUND_4: return 'sendbird-icon-color--on-background-4';
        case Icon_Colors.BACKGROUND_3: return 'sendbird-icon-color--background-3';
        case Icon_Colors.ERROR: return 'sendbird-icon-color--error';
        default: return '';
    }
}
function changeTypeToIconClassName(type) {
    switch (type) {
        case Types.ADD: return 'sendbird-icon-add';
        case Types.ARROW_LEFT: return 'sendbird-icon-arrow-left';
        case Types.ATTACH: return 'sendbird-icon-attach';
        case Types.AUDIO_ON_LINED: return 'sendbird-icon-audio-on-lined';
        case Types.BAN: return 'sendbird-icon-ban';
        case Types.BROADCAST: return 'sendbird-icon-broadcast';
        case Types.CAMERA: return 'sendbird-icon-camera';
        case Types.CHANNELS: return 'sendbird-icon-channels';
        case Types.CHAT: return 'sendbird-icon-chat';
        case Types.CHAT_FILLED: return 'sendbird-icon-chat-filled';
        case Types.CHEVRON_DOWN: return 'sendbird-icon-chevron-down';
        case Types.CHEVRON_RIGHT: return 'sendbird-icon-chevron-right';
        case Types.CLOSE: return 'sendbird-icon-close';
        case Types.COLLAPSE: return 'sendbird-icon-collapse';
        case Types.COPY: return 'sendbird-icon-copy';
        case Types.CREATE: return 'sendbird-icon-create';
        case Types.DELETE: return 'sendbird-icon-delete';
        case Types.DISCONNECTED: return 'sendbird-icon-disconnected';
        case Types.DOCUMENT: return 'sendbird-icon-document';
        case Types.DONE: return 'sendbird-icon-done';
        case Types.DONE_ALL: return 'sendbird-icon-done-all';
        case Types.DOWNLOAD: return 'sendbird-icon-down-load';
        case Types.EDIT: return 'sendbird-icon-edit';
        case Types.EMOJI_MORE: return 'sendbird-icon-emoji-more';
        case Types.ERROR: return 'sendbird-icon-error';
        case Types.EXPAND: return 'sendbird-icon-expand';
        case Types.FILE_AUDIO: return 'sendbird-icon-file-audio';
        case Types.FILE_DOCUMENT: return 'sendbird-icon-file-document';
        case Types.FREEZE: return 'sendbird-icon-freeze';
        case Types.GIF: return 'sendbird-icon-gif';
        case Types.INFO: return 'sendbird-icon-info';
        case Types.LEAVE: return 'sendbird-icon-leave';
        case Types.MEMBERS: return 'sendbird-icon-members';
        case Types.MESSAGE: return 'sendbird-icon-message';
        case Types.MODERATIONS: return 'sendbird-icon-moderations';
        case Types.MORE: return 'sendbird-icon-more';
        case Types.MUTE: return 'sendbird-icon-mute';
        case Types.NOTIFICATIONS: return 'sendbird-icon-notifications';
        case Types.NOTIFICATIONS_OFF_FILLED: return 'sendbird-icon-notifications-off-filled';
        case Types.OPERATOR: return 'sendbird-icon-operator';
        case Types.PHOTO: return 'sendbird-icon-photo';
        case Types.PLAY: return 'sendbird-icon-play';
        case Types.PLUS: return 'sendbird-iconn-plus';
        case Types.QUESTION: return 'sendbird-icon-question';
        case Types.REFRESH: return 'sendbird-icon-refresh';
        case Types.REMOVE: return 'sendbird-icon-remove';
        case Types.REPLY: return 'sendbird-icon-reply';
        case Types.SEARCH: return 'sendbird-icon-search';
        case Types.SEND: return 'sendbird-icon-send';
        case Types.SETTINGS_FILLED: return 'sendbird-icon-settings-filled';
        case Types.SPINNER: return 'sendbird-icon-spinner';
        case Types.SUPERGROUP: return 'sendbird-icon-supergroup';
        case Types.THREAD: return 'sendbird-icon-thread';
        case Types.THUMBNAIL_NONE: return 'sendbird-icon-thumbnail-none';
        case Types.TOGGLE_OFF: return 'sendbird-icon-toggle-off';
        case Types.TOGGLE_ON: return 'sendbird-icon-toggle-on';
        case Types.USER: return 'sendbird-icon-user';
        case Types.FEEDBACK_LIKE: return 'sendbird-icon-feedback-like';
        case Types.FEEDBACK_DISLIKE: return 'sendbird-icon-feedback-dislike';
        default: return 'sendbird-icon-unknown'; // If you see this text 'icon' replace icon for it
    }
}

var _path$U;
function _extends$X() { _extends$X = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$X.apply(this, arguments); }
const SvgIconAdd = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$X({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$U || (_path$U = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",
  className: "icon-add_svg__fill"
})));

var _path$T;
function _extends$W() { _extends$W = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$W.apply(this, arguments); }
const SvgIconArrowLeft = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$W({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$T || (_path$T = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",
  className: "icon-arrow-left_svg__fill"
})));

var _path$S;
function _extends$V() { _extends$V = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$V.apply(this, arguments); }
const SvgIconAttach = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$V({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$S || (_path$S = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",
  className: "icon-attach_svg__fill"
})));

var _g$2, _defs;
function _extends$U() { _extends$U = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$U.apply(this, arguments); }
const SvgIconAudioOnLined = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$U({
  xmlns: "http://www.w3.org/2000/svg",
  fill: "none",
  viewBox: "0 0 64 64"
}, props), _g$2 || (_g$2 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("g", {
  clipPath: "url(#icon-audio-on-lined_svg__a)"
}, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  d: "M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",
  className: "icon-audio-on-lined_svg__fill",
  clipRule: "evenodd"
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  d: "M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",
  className: "icon-audio-on-lined_svg__fill"
}))), _defs || (_defs = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("defs", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("clipPath", {
  id: "icon-audio-on-lined_svg__a"
}, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#fff",
  d: "M0 0h64v64H0z"
})))));

var _path$R;
function _extends$T() { _extends$T = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$T.apply(this, arguments); }
const SvgIconBan = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$T({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$R || (_path$R = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",
  className: "icon-ban_svg__fill"
})));

var _path$Q;
function _extends$S() { _extends$S = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$S.apply(this, arguments); }
const SvgIconBroadcast = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$S({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$Q || (_path$Q = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",
  className: "icon-broadcast_svg__fill"
})));

var _path$P;
function _extends$R() { _extends$R = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$R.apply(this, arguments); }
const SvgIconCamera = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$R({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$P || (_path$P = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-camera_svg__fill"
})));

var _path$O;
function _extends$Q() { _extends$Q = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$Q.apply(this, arguments); }
const SvgIconChannels = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$Q({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$O || (_path$O = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",
  className: "icon-channels_svg__fill"
})));

var _path$N;
function _extends$P() { _extends$P = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$P.apply(this, arguments); }
const SvgIconChat = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$P({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$N || (_path$N = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",
  className: "icon-chat_svg__fill"
})));

var _path$M;
function _extends$O() { _extends$O = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$O.apply(this, arguments); }
const SvgIconChatFilled = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$O({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$M || (_path$M = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",
  className: "icon-chat-filled_svg__fill"
})));

var _path$L;
function _extends$N() { _extends$N = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$N.apply(this, arguments); }
const SvgIconChevronDown = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$N({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$L || (_path$L = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",
  className: "icon-chevron-down_svg__fill"
})));

var _path$K;
function _extends$M() { _extends$M = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$M.apply(this, arguments); }
const SvgIconChevronRight = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$M({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$K || (_path$K = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",
  className: "icon-chevron-right_svg__fill"
})));

var _path$J;
function _extends$L() { _extends$L = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$L.apply(this, arguments); }
const SvgIconClose = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$L({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$J || (_path$J = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",
  className: "icon-close_svg__fill"
})));

var _path$I;
function _extends$K() { _extends$K = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$K.apply(this, arguments); }
const SvgIconCollapse = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$K({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$I || (_path$I = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",
  className: "icon-collapse_svg__fill"
})));

var _path$H;
function _extends$J() { _extends$J = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$J.apply(this, arguments); }
const SvgIconCopy = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$J({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$H || (_path$H = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",
  className: "icon-copy_svg__fill"
})));

var _path$G;
function _extends$I() { _extends$I = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$I.apply(this, arguments); }
const SvgIconCreate = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$I({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$G || (_path$G = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",
  className: "icon-create_svg__fill"
})));

var _path$F;
function _extends$H() { _extends$H = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$H.apply(this, arguments); }
const SvgIconDelete = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$H({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$F || (_path$F = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",
  className: "icon-delete_svg__fill"
})));

var _path$E;
function _extends$G() { _extends$G = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$G.apply(this, arguments); }
const SvgIconDisconnected = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$G({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$E || (_path$E = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",
  className: "icon-disconnected_svg__fill"
})));

var _path$D;
function _extends$F() { _extends$F = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$F.apply(this, arguments); }
const SvgIconDocument = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$F({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$D || (_path$D = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",
  className: "icon-document_svg__fill"
})));

var _path$C;
function _extends$E() { _extends$E = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$E.apply(this, arguments); }
const SvgIconDone = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$E({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$C || (_path$C = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",
  className: "icon-done_svg__fill"
})));

var _path$B;
function _extends$D() { _extends$D = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$D.apply(this, arguments); }
const SvgIconDoneAll = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$D({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$B || (_path$B = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",
  className: "icon-done-all_svg__fill"
})));

var _path$A;
function _extends$C() { _extends$C = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$C.apply(this, arguments); }
const SvgIconDownload = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$C({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$A || (_path$A = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",
  className: "icon-download_svg__fill"
})));

var _path$z;
function _extends$B() { _extends$B = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$B.apply(this, arguments); }
const SvgIconEdit = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$B({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 65 65"
}, props), _path$z || (_path$z = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",
  className: "icon-edit_svg__fill"
})));

var _path$y;
function _extends$A() { _extends$A = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$A.apply(this, arguments); }
const SvgIconEmojiMore = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$A({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$y || (_path$y = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",
  className: "icon-emoji-more_svg__fill"
})));

var _path$x;
function _extends$z() { _extends$z = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$z.apply(this, arguments); }
const SvgIconError = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$z({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$x || (_path$x = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",
  className: "icon-error_svg__fill"
})));

var _path$w;
function _extends$y() { _extends$y = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$y.apply(this, arguments); }
const SvgIconExpand = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$y({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$w || (_path$w = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",
  className: "icon-expand_svg__fill"
})));

var _path$v;
function _extends$x() { _extends$x = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$x.apply(this, arguments); }
const SvgIconFileAudio = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$x({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$v || (_path$v = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",
  className: "icon-file-audio_svg__fill"
})));

var _path$u;
function _extends$w() { _extends$w = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$w.apply(this, arguments); }
const SvgIconFileDocument = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$w({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$u || (_path$u = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",
  className: "icon-file-document_svg__fill"
})));

var _path$t;
function _extends$v() { _extends$v = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$v.apply(this, arguments); }
const SvgIconFreeze = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$v({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$t || (_path$t = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",
  className: "icon-freeze_svg__fill"
})));

var _path$s;
function _extends$u() { _extends$u = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$u.apply(this, arguments); }
const SvgIconGif = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$u({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$s || (_path$s = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",
  className: "icon-gif_svg__fill"
})));

var _path$r;
function _extends$t() { _extends$t = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$t.apply(this, arguments); }
const SvgIconInfo = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$t({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$r || (_path$r = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",
  className: "icon-info_svg__fill"
})));

var _path$q;
function _extends$s() { _extends$s = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$s.apply(this, arguments); }
const SvgIconLeave = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$s({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$q || (_path$q = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",
  className: "icon-leave_svg__fill"
})));

var _path$p;
function _extends$r() { _extends$r = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$r.apply(this, arguments); }
const SvgIconMembers = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$r({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$p || (_path$p = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-members_svg__fill"
})));

var _path$o;
function _extends$q() { _extends$q = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$q.apply(this, arguments); }
const SvgIconMessage = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$q({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$o || (_path$o = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",
  className: "icon-message_svg__fill"
})));

var _path$n;
function _extends$p() { _extends$p = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$p.apply(this, arguments); }
const SvgIconModerations = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$p({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$n || (_path$n = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",
  className: "icon-moderations_svg__fill"
})));

var _path$m;
function _extends$o() { _extends$o = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$o.apply(this, arguments); }
const SvgIconMore = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$o({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$m || (_path$m = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",
  className: "icon-more_svg__fill"
})));

var _path$l;
function _extends$n() { _extends$n = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$n.apply(this, arguments); }
const SvgIconMute = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$n({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$l || (_path$l = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",
  className: "icon-mute_svg__fill"
})));

var _path$k;
function _extends$m() { _extends$m = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$m.apply(this, arguments); }
const SvgIconNotifications = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$m({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$k || (_path$k = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",
  className: "icon-notifications_svg__fill"
})));

var _path$j;
function _extends$l() { _extends$l = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$l.apply(this, arguments); }
const SvgIconNotificationsOffFilled = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$l({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$j || (_path$j = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",
  className: "icon-notifications-off-filled_svg__fill"
})));

var _path$i;
function _extends$k() { _extends$k = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$k.apply(this, arguments); }
const SvgIconOperator = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$k({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$i || (_path$i = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",
  className: "icon-operator_svg__fill"
})));

var _path$h;
function _extends$j() { _extends$j = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$j.apply(this, arguments); }
const SvgIconPhoto = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$j({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$h || (_path$h = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",
  className: "icon-photo_svg__fill"
})));

var _path$g;
function _extends$i() { _extends$i = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$i.apply(this, arguments); }
const SvgIconPlay = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$i({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$g || (_path$g = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",
  className: "icon-play_svg__fill"
})));

var _path$f;
function _extends$h() { _extends$h = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$h.apply(this, arguments); }
const SvgIconPlus = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$h({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$f || (_path$f = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",
  className: "icon-plus_svg__fill"
})));

var _path$e;
function _extends$g() { _extends$g = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$g.apply(this, arguments); }
const SvgIconQuestion = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$g({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$e || (_path$e = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",
  className: "icon-question_svg__fill"
})));

var _path$d;
function _extends$f() { _extends$f = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$f.apply(this, arguments); }
const SvgIconRefresh = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$f({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$d || (_path$d = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",
  className: "icon-refresh_svg__fill"
})));

var _path$c;
function _extends$e() { _extends$e = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$e.apply(this, arguments); }
const SvgIconRemove = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$e({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$c || (_path$c = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",
  className: "icon-remove_svg__fill"
})));

var _path$b;
function _extends$d() { _extends$d = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$d.apply(this, arguments); }
const SvgIconReplyFilled = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$d({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 12 12"
}, props), _path$b || (_path$b = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",
  className: "icon-reply-filled_svg__fill"
})));

var _path$a;
function _extends$c() { _extends$c = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$c.apply(this, arguments); }
const SvgIconSearch = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$c({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$a || (_path$a = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",
  className: "icon-search_svg__fill"
})));

var _path$9;
function _extends$b() { _extends$b = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$b.apply(this, arguments); }
const SvgIconSend = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$b({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$9 || (_path$9 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",
  className: "icon-send_svg__fill"
})));

var _path$8;
function _extends$a() { _extends$a = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$a.apply(this, arguments); }
const SvgIconSettingsFilled = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$a({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$8 || (_path$8 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-settings-filled_svg__fill"
})));

var _path$7;
function _extends$9() { _extends$9 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$9.apply(this, arguments); }
const SvgIconSlideLeft = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$9({
  xmlns: "http://www.w3.org/2000/svg",
  fill: "none",
  viewBox: "0 0 32 32"
}, props), _path$7 || (_path$7 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  d: "M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",
  className: "icon-slide-left_svg__fill",
  clipRule: "evenodd"
})));

var _path$6;
function _extends$8() { _extends$8 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$8.apply(this, arguments); }
const SvgIconSpinner = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$8({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$6 || (_path$6 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",
  className: "icon-spinner_svg__fill"
})));

var _path$5;
function _extends$7() { _extends$7 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$7.apply(this, arguments); }
const SvgIconSupergroup = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$7({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$5 || (_path$5 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",
  className: "icon-supergroup_svg__fill"
})));

var _path$4, _path2;
function _extends$6() { _extends$6 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$6.apply(this, arguments); }
const SvgIconThread = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$6({
  xmlns: "http://www.w3.org/2000/svg",
  fill: "none",
  viewBox: "0 0 64 64"
}, props), _path$4 || (_path$4 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  d: "M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",
  className: "icon-thread_svg__fill",
  clipRule: "evenodd"
})), _path2 || (_path2 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  d: "M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",
  className: "icon-thread_svg__fill",
  clipRule: "evenodd"
})));

var _path$3;
function _extends$5() { _extends$5 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$5.apply(this, arguments); }
const SvgIconThumbnailNone = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$5({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$3 || (_path$3 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",
  className: "icon-thumbnail-none_svg__fill"
})));

var _g$1;
function _extends$4() { _extends$4 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$4.apply(this, arguments); }
const SvgIconToggleoff = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$4({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 88 48"
}, props), _g$1 || (_g$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("g", {
  fill: "none",
  fillRule: "evenodd"
}, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("rect", {
  width: 80,
  height: 40,
  x: 4,
  y: 4,
  fill: "#000",
  className: "icon-toggleoff_svg__fill",
  rx: 20
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("circle", {
  cx: 24,
  cy: 24,
  r: 12,
  fill: "#FFF"
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#FFF",
  d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",
  className: "icon-toggleoff_svg__fill"
}))));

var Icon_g;
function _extends$3() { _extends$3 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$3.apply(this, arguments); }
const SvgIconToggleon = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$3({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 88 48"
}, props), Icon_g || (Icon_g = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("g", {
  fill: "none",
  fillRule: "evenodd"
}, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("rect", {
  width: 80,
  height: 40,
  x: 4,
  y: 4,
  fill: "#000",
  className: "icon-toggleon_svg__fill",
  rx: 20
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("circle", {
  cx: 64,
  cy: 24,
  r: 12,
  fill: "#FFF"
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#FFF",
  d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"
}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",
  className: "icon-toggleon_svg__fill"
}))));

var _path$2;
function _extends$2() { _extends$2 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$2.apply(this, arguments); }
const SvgIconUser = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$2({
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 64 64"
}, props), _path$2 || (_path$2 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",
  className: "icon-user_svg__fill"
})));

var _path$1;
function _extends$1() { _extends$1 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$1.apply(this, arguments); }
const SvgIconFeedbackLike = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$1({
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  fill: "none"
}, props), _path$1 || (_path$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",
  clipRule: "evenodd"
})));

var _path;
function Icon_extends() { Icon_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return Icon_extends.apply(this, arguments); }
const SvgIconFeedbackDislike = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", Icon_extends({
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  fill: "none"
}, props), _path || (_path = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
  fill: "#000",
  fillRule: "evenodd",
  d: "M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",
  clipRule: "evenodd"
})));

function changeTypeToIconComponent(type) {
    switch (type) {
        case Types.ADD: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconAdd, null);
        case Types.ARROW_LEFT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconArrowLeft, null);
        case Types.ATTACH: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconAttach, null);
        case Types.AUDIO_ON_LINED: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconAudioOnLined, null);
        case Types.BAN: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconBan, null);
        case Types.BROADCAST: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconBroadcast, null);
        case Types.CAMERA: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCamera, null);
        case Types.CHANNELS: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChannels, null);
        case Types.CHAT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChat, null);
        case Types.CHAT_FILLED: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChatFilled, null);
        case Types.CHEVRON_DOWN: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChevronDown, null);
        case Types.CHEVRON_RIGHT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChevronRight, null);
        case Types.CLOSE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconClose, null);
        case Types.COLLAPSE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCollapse, null);
        case Types.COPY: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCopy, null);
        case Types.CREATE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCreate, null);
        case Types.DELETE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDelete, null);
        case Types.DISCONNECTED: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDisconnected, null);
        case Types.DOCUMENT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDocument, null);
        case Types.DONE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDone, null);
        case Types.DONE_ALL: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDoneAll, null);
        case Types.DOWNLOAD: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDownload, null);
        case Types.EDIT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconEdit, null);
        case Types.EMOJI_MORE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconEmojiMore, null);
        case Types.ERROR: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconError, null);
        case Types.EXPAND: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconExpand, null);
        case Types.FILE_AUDIO: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFileAudio, null);
        case Types.FILE_DOCUMENT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFileDocument, null);
        case Types.FREEZE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFreeze, null);
        case Types.GIF: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconGif, null);
        case Types.INFO: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconInfo, null);
        case Types.LEAVE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconLeave, null);
        case Types.MEMBERS: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMembers, null);
        case Types.MESSAGE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMessage, null);
        case Types.MODERATIONS: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconModerations, null);
        case Types.MORE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMore, null);
        case Types.MUTE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMute, null);
        case Types.NOTIFICATIONS: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconNotifications, null);
        case Types.NOTIFICATIONS_OFF_FILLED: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconNotificationsOffFilled, null);
        case Types.OPERATOR: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconOperator, null);
        case Types.PHOTO: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconPhoto, null);
        case Types.PLAY: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconPlay, null);
        case Types.PLUS: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconPlus, null);
        case Types.QUESTION: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconQuestion, null);
        case Types.REFRESH: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconRefresh, null);
        case Types.REMOVE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconRemove, null);
        case Types.REPLY: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconReplyFilled, null);
        case Types.SEARCH: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSearch, null);
        case Types.SEND: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSend, null);
        case Types.SETTINGS_FILLED: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSettingsFilled, null);
        case Types.SLIDE_LEFT: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSlideLeft, null);
        case Types.SPINNER: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSpinner, null);
        case Types.SUPERGROUP: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSupergroup, null);
        case Types.THREAD: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconThread, null);
        case Types.THUMBNAIL_NONE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconThumbnailNone, null);
        case Types.TOGGLE_OFF: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconToggleoff, null);
        case Types.TOGGLE_ON: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconToggleon, null);
        case Types.USER: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconUser, null);
        case Types.FEEDBACK_LIKE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFeedbackLike, null);
        case Types.FEEDBACK_DISLIKE: return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFeedbackDislike, null);
        default: return 'icon'; // If you see this text 'icon' replace icon for it
    }
}
function Icon(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, type = _a.type, _c = _a.fillColor, fillColor = _c === void 0 ? Icon_Colors.DEFAULT : _c, _d = _a.width, width = _d === void 0 ? 26 : _d, _e = _a.height, height = _e === void 0 ? 26 : _e, _f = _a.onClick, onClick = _f === void 0 ? noop : _f, _g = _a.children, children = _g === void 0 ? null : _g;
    var iconStyle = {
        width: typeof width === 'string' ? width : "".concat(width, "px"),
        minWidth: typeof width === 'string' ? width : "".concat(width, "px"),
        height: typeof height === 'string' ? height : "".concat(height, "px"),
        minHeight: typeof height === 'string' ? height : "".concat(height, "px"),
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-icon',
            changeTypeToIconClassName(type),
            Icon_changeColorToClassName(fillColor),
        ], false).join(' '), role: 'button', onClick: onClick, onKeyDown: onClick, tabIndex: 0, style: iconStyle }, children || changeTypeToIconComponent(type)));
}
var IconTypes = Types;
var IconColors = Icon_Colors;


//# sourceMappingURL=Icon.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DwJ8HgZK.js




// padding to handle height of last item in message-list
var HEIGHT_PADDING = 60;
var bundle_DwJ8HgZK_MenuItems = /** @class */ (function (_super) {
    __extends(MenuItems, _super);
    function MenuItems(props) {
        var _this = _super.call(this, props) || this;
        _this.menuRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createRef();
        _this.setupEvents = function () {
            var closeDropdown = _this.props.closeDropdown;
            var menuRef = _this.menuRef;
            var handleClickOutside = function (event) {
                var _a, _b;
                if ((menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) && !((_b = (_a = menuRef === null || menuRef === void 0 ? void 0 : menuRef.current) === null || _a === void 0 ? void 0 : _a.contains) === null || _b === void 0 ? void 0 : _b.call(_a, event.target))) {
                    closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();
                }
            };
            _this.setState({
                handleClickOutside: handleClickOutside,
            });
            document.addEventListener('mousedown', handleClickOutside);
        };
        _this.cleanUpEvents = function () {
            var handleClickOutside = _this.state.handleClickOutside;
            document.removeEventListener('mousedown', handleClickOutside);
        };
        _this.getMenuPosition = function () {
            var _a, _b;
            var _c = _this.props, parentRef = _c.parentRef, openLeft = _c.openLeft;
            var parentRect = (_b = (_a = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect) === null || _b === void 0 ? void 0 : _b.call(_a);
            var x = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0;
            var y = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0;
            var menuStyle = {
                top: y,
                left: x,
            };
            if (!_this.menuRef.current)
                return menuStyle;
            var innerWidth = window.innerWidth, innerHeight = window.innerHeight;
            var rect = _this.menuRef.current.getBoundingClientRect();
            if (y + rect.height + HEIGHT_PADDING > innerHeight) {
                menuStyle.top -= rect.height;
            }
            if (x + rect.width > innerWidth && !openLeft) {
                menuStyle.left -= rect.width;
            }
            if (menuStyle.top < 0) {
                menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;
            }
            menuStyle.top += 32;
            if (openLeft) {
                var padding = Number.isNaN(rect.width - 30)
                    ? 108 // default
                    : rect.width - 30;
                menuStyle.left -= padding;
            }
            // warning: this section has to be executed after the openLeft is calculated
            // menu is outside viewport
            if (menuStyle.left < 0) {
                menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;
            }
            _this.setState({ menuStyle: menuStyle });
            return menuStyle;
        };
        _this.state = {
            menuStyle: { top: 0, left: 0 },
            handleClickOutside: function () { },
        };
        return _this;
    }
    MenuItems.prototype.componentDidMount = function () {
        this.setupEvents();
        this.getMenuPosition();
    };
    MenuItems.prototype.componentWillUnmount = function () {
        this.cleanUpEvents();
    };
    MenuItems.prototype.render = function () {
        var _a;
        var portalElement = document.getElementById('sendbird-dropdown-portal');
        if (!portalElement)
            return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
        var menuStyle = this.state.menuStyle;
        var _b = this.props, children = _b.children, style = _b.style, _c = _b.className, className = _c === void 0 ? '' : _c;
        return (Object(react_dom["createPortal"])((external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: (_a = this.props) === null || _a === void 0 ? void 0 : _a.className },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-dropdown__menu-backdrop" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("ul", { className: "".concat(className, " sendbird-dropdown__menu"), ref: this.menuRef, style: __assign({ display: 'inline-block', position: 'fixed', left: "".concat(Math.round(menuStyle.left), "px"), top: "".concat(Math.round(menuStyle.top), "px") }, style) }, children))), portalElement));
    };
    return MenuItems;
}(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Component));


//# sourceMappingURL=bundle-DwJ8HgZK.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CGmq3qGM.js























// simple component to be used as modal root
var MODAL_ROOT = 'sendbird-modal-root';
var ModalRoot = function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { id: MODAL_ROOT, className: MODAL_ROOT })); };

var ModalHeader = function (_a) {
    var titleText = _a.titleText, onCloseClick = _a.onCloseClick;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-modal__header" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, titleText),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-modal__close" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { width: "32px", height: "32px", onClick: onCloseClick },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CLOSE, fillColor: IconColors.DEFAULT, width: "24px", height: "24px" })))));
};
var ModalBody = function (_a) {
    var children = _a.children;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-modal__body" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_2 }, children)));
};
var ModalFooter = function (_a) {
    var submitText = _a.submitText, _b = _a.disabled, disabled = _b === void 0 ? false : _b, _c = _a.hideCancelButton, hideCancelButton = _c === void 0 ? false : _c, _d = _a.type, type = _d === void 0 ? ButtonTypes.DANGER : _d, onSubmit = _a.onSubmit, onCancel = _a.onCancel;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-modal__footer" },
        !hideCancelButton && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, onClick: onCancel },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.BUTTON__CANCEL))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: type, disabled: disabled, onClick: onSubmit }, submitText)));
};
function Modal(props) {
    var _a;
    var _b = props.children, children = _b === void 0 ? null : _b, _c = props.className, className = _c === void 0 ? '' : _c, _d = props.contentClassName, contentClassName = _d === void 0 ? '' : _d, _e = props.isCloseOnClickOutside, isCloseOnClickOutside = _e === void 0 ? false : _e, _f = props.isFullScreenOnMobile, isFullScreenOnMobile = _f === void 0 ? false : _f, titleText = props.titleText, submitText = props.submitText, _g = props.disabled, disabled = _g === void 0 ? false : _g, _h = props.hideFooter, hideFooter = _h === void 0 ? false : _h, _j = props.type, type = _j === void 0 ? ButtonTypes.DANGER : _j, renderHeader = props.renderHeader, _k = props.onSubmit, onSubmit = _k === void 0 ? noop : _k, onClose = props.onClose, onCancel = props.onCancel, customFooter = props.customFooter;
    var handleClose = (_a = onClose !== null && onClose !== void 0 ? onClose : onCancel) !== null && _a !== void 0 ? _a : noop;
    var eventHandlers = useSendbirdStateContext().eventHandlers;
    var id = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(function () { return "sbu-modal-".concat(uuidv4()); })[0];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        return (_b = (_a = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.modal) === null || _a === void 0 ? void 0 : _a.onMounted) === null || _b === void 0 ? void 0 : _b.call(_a, { close: handleClose, id: id });
    }, []);
    var isMobile = useMediaQueryContext().isMobile;
    return Object(react_dom["createPortal"])(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-modal', className, isFullScreenOnMobile && isMobile && 'sendbird-modal--full-mobile') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames.apply(void 0, __spreadArray(['sendbird-modal__content'], (Array.isArray(contentClassName) ? contentClassName : [contentClassName]), false)) },
            (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalHeader, { titleText: titleText !== null && titleText !== void 0 ? titleText : '', onCloseClick: handleClose }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalBody, null, children),
            !hideFooter
                && (customFooter !== null && customFooter !== void 0 ? customFooter : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, { disabled: disabled, onCancel: handleClose, onSubmit: onSubmit, submitText: submitText !== null && submitText !== void 0 ? submitText : '', type: type })))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-modal__backdrop', isCloseOnClickOutside && 'sendbird-modal__backdrop--clickoutside'), onClick: function (e) {
                e === null || e === void 0 ? void 0 : e.stopPropagation();
                if (isCloseOnClickOutside) {
                    handleClose();
                }
            } })), document.getElementById(MODAL_ROOT));
}

var bundle_CGmq3qGM_Context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    start: noop,
    stop: noop,
    isRecordable: false,
});
var VoiceRecorderProvider = function (props) {
    var _a;
    var children = props.children;
    var config = useSendbirdStateContext().config;
    var logger = config.logger, groupChannel = config.groupChannel;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), mediaRecorder = _b[0], setMediaRecorder = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isRecordable = _c[0], setIsRecordable = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), permissionWarning = _d[0], setPermissionWarning = _d[1];
    var stringSet = useLocalization().stringSet;
    var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), webAudioUtils = _e[0], setWebAudioUtils = _e[1];
    var browserSupportMimeType = (_a = bundle_DhBuJR0w["a" /* B */].find(function (mimeType) { return MediaRecorder.isTypeSupported(mimeType); })) !== null && _a !== void 0 ? _a : '';
    if (isVoiceMessageEnabled && !browserSupportMimeType) {
        logger.error('VoiceRecorder: Browser does not support mimeType', { mimmeTypes: bundle_DhBuJR0w["a" /* B */] });
    }
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (isVoiceMessageEnabled && !webAudioUtils) {
            __webpack_require__.e(/* import() */ 1).then(__webpack_require__.bind(null, 20)).then(function (module) { return setWebAudioUtils(module); });
        }
    }, [isVoiceMessageEnabled, webAudioUtils]);
    var start = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (eventHandler) {
        var _a, _b;
        if (isVoiceMessageEnabled && !webAudioUtils) {
            logger.error('VoiceRecorder: Recording audio processor is being loaded.');
            return;
        }
        var checkPermission = function () {
            try {
                // Type '"microphone"' is not assignable to type 'PermissionName'.ts(2322)
                // this is typescript issue
                // https://github.com/microsoft/TypeScript/issues/33923
                // @ts-expect-error
                navigator.permissions.query({ name: 'microphone' }).then(function (result) {
                    if (result.state === 'denied') {
                        logger.warning('VoiceRecorder: Permission denied.');
                        setPermissionWarning(true);
                    }
                });
            }
            catch (error) {
                logger.warning('VoiceRecorder: Failed to check permission.', error);
            }
        };
        logger.info('VoiceRecorder: Start recording.');
        if (mediaRecorder) {
            stop();
            logger.info('VoiceRecorder: Previous mediaRecorder is stopped.');
        }
        checkPermission();
        (_b = (_a = navigator === null || navigator === void 0 ? void 0 : navigator.mediaDevices) === null || _a === void 0 ? void 0 : _a.getUserMedia) === null || _b === void 0 ? void 0 : _b.call(_a, { audio: true }).then(function (stream) {
            var _a;
            logger.info('VoiceRecorder: Succeeded getting media stream.', stream);
            setIsRecordable(true);
            var mediaRecorder = new MediaRecorder(stream, {
                mimeType: browserSupportMimeType,
                audioBitsPerSecond: bundle_DhBuJR0w["r" /* k */],
            });
            // when recording stops
            mediaRecorder.ondataavailable = function (e) {
                logger.info('VoiceRecorder: Succeeded getting an available data.', e.data);
                var audioFile = new File([e.data], bundle_DhBuJR0w["n" /* g */], {
                    lastModified: new Date().getTime(),
                    type: bundle_DhBuJR0w["o" /* h */],
                });
                webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.downsampleToWav(audioFile, function (buffer) {
                    var _a;
                    var mp3Buffer = webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.encodeMp3(buffer);
                    var mp3blob = new Blob(mp3Buffer, { type: bundle_DhBuJR0w["o" /* h */] });
                    var convertedAudioFile = new File([mp3blob], bundle_DhBuJR0w["n" /* g */], {
                        lastModified: new Date().getTime(),
                        type: bundle_DhBuJR0w["o" /* h */],
                    });
                    (_a = eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingEnded) === null || _a === void 0 ? void 0 : _a.call(eventHandler, convertedAudioFile);
                    logger.info('VoiceRecorder: Succeeded converting audio file.', convertedAudioFile);
                });
                var tracks = stream.getAudioTracks();
                tracks.forEach(function (track) { return track.stop(); });
                setIsRecordable(false);
            };
            mediaRecorder.onstart = (_a = eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingStarted) !== null && _a !== void 0 ? _a : noop;
            mediaRecorder === null || mediaRecorder === void 0 ? void 0 : mediaRecorder.start();
            setMediaRecorder(mediaRecorder);
        }).catch(function (err) {
            logger.error('VoiceRecorder: Failed getting media stream.', err);
            setMediaRecorder(null);
        });
    }, [mediaRecorder, webAudioUtils]);
    var stop = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        // Stop recording
        mediaRecorder === null || mediaRecorder === void 0 ? void 0 : mediaRecorder.stop();
        setMediaRecorder(null);
        setIsRecordable(false);
        logger.info('VoiceRecorder: Stop recording.');
    }, [mediaRecorder]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_CGmq3qGM_Context.Provider, { value: { start: start, stop: stop, isRecordable: isRecordable } },
        children,
        permissionWarning && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { hideFooter: true, onClose: function () { return setPermissionWarning(false); } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.VOICE_RECORDING_PERMISSION_DENIED)))));
};
var useVoiceRecorderContext = function () { return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(bundle_CGmq3qGM_Context); };
var bundle_CGmq3qGM_index = {
    VoiceRecorderProvider: VoiceRecorderProvider,
    useVoiceRecorderContext: useVoiceRecorderContext,
};

var GlobalModalContext = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    openModal: noop,
});
var GlobalModalProvider = function (_a) {
    var children = _a.children;
    // Idea from https://dev.to/nurislamov/simple-modals-queue-in-react-4g6c
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), globalModalQueue = _b[0], setGlobalModalQueue = _b[1];
    var openModal = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (props) {
        setGlobalModalQueue(function (currentQue) { return __spreadArray(__spreadArray([], currentQue, true), [props], false); });
    }, []);
    var closeModal = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        setGlobalModalQueue(function (currentQue) { return currentQue.slice(1); });
    }, []);
    var ModalComponent = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return function () {
        return K(globalModalQueue)
            .when(function (q) { return q.length === 0; }, function () {
            return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
        })
            .otherwise(function () {
            var _a = globalModalQueue[0], modalProps = _a.modalProps, childElement = _a.childElement;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, __assign({}, modalProps, { className: classnames('sendbird-global-modal', modalProps === null || modalProps === void 0 ? void 0 : modalProps.className), onClose: function () {
                    var _a;
                    (_a = modalProps === null || modalProps === void 0 ? void 0 : modalProps.onClose) === null || _a === void 0 ? void 0 : _a.call(modalProps);
                    closeModal();
                } }), childElement({
                closeModal: closeModal,
            })));
        });
    }; }, [globalModalQueue]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GlobalModalContext.Provider, { value: {
            openModal: openModal,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalComponent, null),
        children));
};
var useGlobalModalContext = function () { return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(GlobalModalContext); };

var bundle_CGmq3qGM_EmojiManager = /** @class */ (function () {
    function EmojiManager(props) {
        var _this = this;
        var _a;
        var sdk = props.sdk, logger = props.logger;
        (_a = sdk === null || sdk === void 0 ? void 0 : sdk.getAllEmoji) === null || _a === void 0 ? void 0 : _a.call(sdk).then(function (emojiContainer) {
            _this._emojiContainer = emojiContainer;
            logger === null || logger === void 0 ? void 0 : logger.info('EmojiManager | Succeeded getting all emojis. ', emojiContainer);
        }).catch(function () {
            logger === null || logger === void 0 ? void 0 : logger.warning('EmojiManager | Failed getting all emojis.');
        });
    }
    Object.defineProperty(EmojiManager.prototype, "AllEmojisAsArray", {
        get: function () {
            return this._emojiContainer.emojiCategories.flatMap(function (category) { return category.emojis; });
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(EmojiManager.prototype, "AllEmojisAsMap", {
        get: function () {
            return this._emojiContainer.emojiCategories
                .flatMap(function (category) { return category.emojis; })
                .reduce(function (map, emoji) {
                map.set(emoji.key, emoji.url);
                return map;
            }, new Map());
        },
        enumerable: false,
        configurable: true
    });
    EmojiManager.prototype.getAllEmojis = function (type) {
        var _this = this;
        return K(type)
            .when(function (type) { return ['array', 'arr'].includes(type); }, function () { return _this.AllEmojisAsArray; })
            .when(function (type) { return ['map'].includes(type); }, function () { return _this.AllEmojisAsMap; })
            .otherwise(function () { return _this.AllEmojisAsArray; });
    };
    EmojiManager.prototype.getEmojiUrl = function (reactionKey) {
        var _a, _b;
        return (_b = (_a = this.AllEmojisAsArray.find(function (emoji) { return emoji.key === reactionKey; })) === null || _a === void 0 ? void 0 : _a.url) !== null && _b !== void 0 ? _b : '';
    };
    Object.defineProperty(EmojiManager.prototype, "emojiContainer", {
        get: function () {
            return this._emojiContainer;
        },
        enumerable: false,
        configurable: true
    });
    return EmojiManager;
}());


//# sourceMappingURL=bundle-CGmq3qGM.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BiK_ngKm.js
/**
 * Dashboard UIKitConfig's replyType is consisted of all lowercases,
 * we need to convert it into uppercase ones(or vice versa)
 * when we pass the value to internal components
 *  - 'thread' <-> 'THREAD'
 *  - 'quote_reply' <-> 'QUOTE_REPLY'
 */
function getCaseResolvedReplyType(replyType) {
    return {
        lowerCase: replyType.toLowerCase(),
        upperCase: replyType.toUpperCase(),
    };
}
/**
 * Dashboard UIKitConfig's threadReplySelectType is consisted of all lowercase letters,
 * we need to convert it into uppercase ones(or vice versa)
 * when we pass the value to internal components
 *  - 'thread' <-> 'THREAD'
 *  - 'parent' <-> 'PARENT'
 */
function getCaseResolvedThreadReplySelectType(threadReplySelectType) {
    return {
        lowerCase: threadReplySelectType.toLowerCase(),
        upperCase: threadReplySelectType.toUpperCase(),
    };
}


//# sourceMappingURL=bundle-BiK_ngKm.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/SortByRow.js




var componentClassName = 'sendbird-sort-by-row';
function SortByRow(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, maxItemCount = _a.maxItemCount, itemWidth = _a.itemWidth, itemHeight = _a.itemHeight, children = _a.children;
    if (Array.isArray(children) && children.length > maxItemCount) {
        var result = [];
        for (var i = 0; i < children.length; i += maxItemCount) {
            result.push(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
                    componentClassName,
                ], false).join(' '), key: uuidv4(), style: {
                    width: itemWidth * maxItemCount,
                    height: itemHeight,
                } }, children.slice(i, i + maxItemCount)));
        }
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, result);
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            componentClassName,
        ], false).join(' '), style: {
            width: itemWidth * (Array.isArray(children) ? children.length : 1),
            height: itemHeight,
        } }, children));
}


//# sourceMappingURL=SortByRow.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ContextMenu.js














var MuteMenuItem = function (_a) {
    var channel = _a.channel, user = _a.user, _b = _a.className, className = _b === void 0 ? '' : _b, children = _a.children, _c = _a.disable, disable = _c === void 0 ? false : _c, _d = _a.dataSbId, dataSbId = _d === void 0 ? '' : _d, _e = _a.onChange, onChange = _e === void 0 ? function () { } : _e, _f = _a.onError, onError = _f === void 0 ? function () { } : _f;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(user.isMuted), isMuted = _g[0], setIsMuted = _g[1];
    var isProcessing = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(false);
    var onClickHandler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!isProcessing.current) {
            isProcessing.current = true;
            if (isMuted) {
                channel.unmuteUser(user)
                    .then(function () {
                    setIsMuted(false);
                    onChange(channel, user, false);
                    isProcessing.current = false;
                })
                    .catch(function (err) {
                    onError(err);
                    isProcessing.current = false;
                });
            }
            else {
                channel.muteUser(user)
                    .then(function () {
                    setIsMuted(true);
                    onChange(channel, user, true);
                    isProcessing.current = false;
                })
                    .catch(function (err) {
                    onError(err);
                    isProcessing.current = false;
                });
            }
        }
    }, [isProcessing, isMuted]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: className, disable: disable, dataSbId: dataSbId, onClick: onClickHandler }, children));
};

var OperatorMenuItem = function (_a) {
    var channel = _a.channel, user = _a.user, _b = _a.className, className = _b === void 0 ? '' : _b, children = _a.children, _c = _a.disable, disable = _c === void 0 ? false : _c, _d = _a.dataSbId, dataSbId = _d === void 0 ? '' : _d, _e = _a.onChange, onChange = _e === void 0 ? function () { } : _e, _f = _a.onError, onError = _f === void 0 ? function () { } : _f;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(channel instanceof openChannel_Pe
        ? channel.isOperator(user)
        : user.role === _bundle_0b1520ed["H" /* a7 */].OPERATOR), isOperator = _g[0], setIsOperator = _g[1];
    var isProcessing = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(false);
    var onClickHandler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!isProcessing.current) {
            isProcessing.current = true;
            if (isOperator) {
                channel.removeOperators([user.userId])
                    .then(function () {
                    setIsOperator(false);
                    onChange(channel, user, false);
                    isProcessing.current = false;
                })
                    .catch(function (err) {
                    onError(err);
                    isProcessing.current = false;
                });
            }
            else {
                channel.addOperators([user.userId])
                    .then(function () {
                    setIsOperator(true);
                    onChange(channel, user, true);
                    isProcessing.current = false;
                })
                    .catch(function (err) {
                    onError(err);
                    isProcessing.current = false;
                });
            }
        }
    }, [isProcessing, isOperator]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: className, disable: disable, dataSbId: dataSbId, onClick: onClickHandler }, children));
};

var defaultParentRect = { x: 0, y: 0, left: 0, top: 0, height: 0 };
var EmojiListItems$1 = function (_a) {
    var children = _a.children, parentRef = _a.parentRef, parentContainRef = _a.parentContainRef, _b = _a.spaceFromTrigger, spaceFromTrigger = _b === void 0 ? { x: 0, y: 0 } : _b, closeDropdown = _a.closeDropdown;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({ left: 0, top: 0 }), reactionStyle = _c[0], setReactionStyle = _c[1];
    var reactionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    /* showParent & hideParent */
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (parentContainRef && (parentContainRef === null || parentContainRef === void 0 ? void 0 : parentContainRef.current)) {
            parentContainRef.current.classList.add('sendbird-reactions--pressed');
        }
        return function () {
            if (parentContainRef && (parentContainRef === null || parentContainRef === void 0 ? void 0 : parentContainRef.current)) {
                parentContainRef.current.classList.remove('sendbird-reactions--pressed');
            }
        };
    }, []);
    /* setupEvents & cleanupEvents */
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var handleClickOutSide = function (event) {
            var _a, _b;
            if ((reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) && !((_b = (_a = reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) === null || _a === void 0 ? void 0 : _a.contains) === null || _b === void 0 ? void 0 : _b.call(_a, event.target))) {
                closeDropdown();
            }
        };
        document.addEventListener('mousedown', handleClickOutSide);
        return function () {
            document.removeEventListener('mousedown', handleClickOutSide);
        };
    }, []);
    /* getBarPosition */
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b, _c;
        var spaceFromTriggerX = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.x) || 0;
        var spaceFromTriggerY = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.y) || 0;
        var parentRect = (_b = (_a = parentRef === null || parentRef === void 0 ? void 0 : parentRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect()) !== null && _b !== void 0 ? _b : defaultParentRect;
        var x = parentRect.x || parentRect.left;
        var y = parentRect.y || parentRect.top;
        var reactionStyle = {
            top: y,
            left: x,
        };
        if (!(reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current)) {
            setReactionStyle(reactionStyle);
        }
        else {
            var rect = (_c = reactionRef === null || reactionRef === void 0 ? void 0 : reactionRef.current) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect();
            if (reactionStyle.top < rect.height) {
                reactionStyle.top += parentRect.height;
                reactionStyle.top += spaceFromTriggerY;
            }
            else {
                reactionStyle.top -= rect.height;
                reactionStyle.top -= spaceFromTriggerY;
            }
            reactionStyle.left -= rect.width / 2;
            reactionStyle.left += (parentRect.height / 2) - 2;
            reactionStyle.left += spaceFromTriggerX;
            var maximumLeft = window.innerWidth - rect.width;
            if (maximumLeft < reactionStyle.left) {
                reactionStyle.left = maximumLeft;
            }
            if (reactionStyle.left < 0) {
                reactionStyle.left = 0;
            }
            setReactionStyle(reactionStyle);
        }
    }, []);
    var rootElement = document.getElementById('sendbird-emoji-list-portal');
    if (rootElement) {
        return (Object(react_dom["createPortal"])(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-dropdown__menu-backdrop" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("ul", { className: "sendbird-dropdown__reaction-bar", ref: reactionRef, style: {
                    display: 'inline-block',
                    position: 'fixed',
                    left: "".concat(Math.round(reactionStyle.left), "px"),
                    top: "".concat(Math.round(reactionStyle.top), "px"),
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SortByRow, { className: "sendbird-dropdown__reaction-bar__row", maxItemCount: 8, itemWidth: 44, itemHeight: 40 }, children))), rootElement));
    }
    return null;
};

var ENTER_KEY = 13;
var ContextMenu_MenuItems = bundle_DwJ8HgZK_MenuItems;
var EmojiListItems = EmojiListItems$1;
var MenuItem = function (_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, children = _a.children, onClick = _a.onClick, _c = _a.disable, disable = _c === void 0 ? false : _c, _d = _a.dataSbId, dataSbId = _d === void 0 ? '' : _d;
    var handleClickEvent = function (e) {
        if (!disable && onClick) {
            onClick === null || onClick === void 0 ? void 0 : onClick(e);
        }
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("li", { className: getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : '']), role: "menuitem", "aria-disabled": disable ? true : false, onClick: handleClickEvent, onKeyPress: function (e) { if (e.keyCode === ENTER_KEY)
            handleClickEvent(e); }, tabIndex: 0, "data-sb-id": dataSbId },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-dropdown__menu-item__text", type: LabelTypography.SUBTITLE_2, color: disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, children)));
};
var MenuRoot = function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { id: "sendbird-dropdown-portal", className: "sendbird-dropdown-portal" })); };
// For the test environment
var EmojiReactionListRoot = function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { id: "sendbird-emoji-list-portal" }); };
function ContextMenu(_a) {
    var menuTrigger = _a.menuTrigger, menuItems = _a.menuItems, isOpen = _a.isOpen, onClick = _a.onClick;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMenu = _b[0], setShowMenu = _b[1];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-context-menu", style: { display: 'inline' }, onClick: onClick }, menuTrigger === null || menuTrigger === void 0 ? void 0 :
        menuTrigger(function () { return setShowMenu(!showMenu); }),
        (showMenu || isOpen) && menuItems(function () { return setShowMenu(false); })));
}


//# sourceMappingURL=ContextMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/SendbirdProvider.js

































var isEmpty = function (obj) {
    if (obj === null || obj === undefined) {
        return true;
    }
    for (var prop in obj) {
        if (obj.hasOwnProperty(prop)) {
            return false;
        }
    }
    return JSON.stringify(obj) === JSON.stringify({});
};
var useTheme = function (overrides) {
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        if (!isEmpty(overrides)) {
            cssVars({
                variables: __assign({
                    '--sendbird-dark-primary-500': '#4d2aa6',
                    '--sendbird-dark-primary-400': '#6440C4',
                    '--sendbird-dark-primary-300': '#7B53EF',
                    '--sendbird-dark-primary-200': '#9E8CF5',
                    '--sendbird-dark-primary-100': '#E2DFFF',
                    '--sendbird-dark-secondary-500': '#007A7A',
                    '--sendbird-dark-secondary-400': '#189A8D',
                    '--sendbird-dark-secondary-300': '#2EBA9F',
                    '--sendbird-dark-secondary-200': '#6FD6BE',
                    '--sendbird-dark-secondary-100': '#AEF2DC',
                    '--sendbird-dark-information-100': '#b2d9ff',
                    '--sendbird-dark-error-500': '#A30E2D',
                    '--sendbird-dark-error-400': '#C11F41',
                    '--sendbird-dark-error-300': '#E53157',
                    '--sendbird-dark-error-200': '#FF6183',
                    '--sendbird-dark-error-100': '#FFABBD',
                    '--sendbird-dark-background-700': '#000000',
                    '--sendbird-dark-background-600': '#161616',
                    '--sendbird-dark-background-500': '#2C2C2C',
                    '--sendbird-dark-background-400': '#393939',
                    '--sendbird-dark-background-300': '#A8A8A8',
                    '--sendbird-dark-background-200': '#D9D9D9',
                    '--sendbird-dark-background-100': '#F0F0F0',
                    '--sendbird-dark-background-50': '#FFFFFF',
                    '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',
                    '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',
                    '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',
                    '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',
                    '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',
                    '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',
                    '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',
                    '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',
                    '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',
                    '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',
                    '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',
                    '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',
                    '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',
                    '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',
                    '--sendbird-light-primary-500': '#4d2aa6',
                    '--sendbird-light-primary-400': '#6440C4',
                    '--sendbird-light-primary-300': '#7B53EF',
                    '--sendbird-light-primary-200': '#9E8CF5',
                    '--sendbird-light-primary-100': '#E2DFFF',
                    '--sendbird-light-secondary-500': '#007A7A',
                    '--sendbird-light-secondary-400': '#189A8D',
                    '--sendbird-light-secondary-300': '#2EBA9F',
                    '--sendbird-light-secondary-200': '#6FD6BE',
                    '--sendbird-light-secondary-100': '#AEF2DC',
                    '--sendbird-light-information-100': '#b2d9ff',
                    '--sendbird-light-error-500': '#A30E2D',
                    '--sendbird-light-error-400': '#C11F41',
                    '--sendbird-light-error-300': '#E53157',
                    '--sendbird-light-error-200': '#FF6183',
                    '--sendbird-light-error-100': '#FFABBD',
                    '--sendbird-light-background-700': '#000000',
                    '--sendbird-light-background-600': '#161616',
                    '--sendbird-light-background-500': '#2C2C2C',
                    '--sendbird-light-background-400': '#393939',
                    '--sendbird-light-background-300': '#A8A8A8',
                    '--sendbird-light-background-200': '#D9D9D9',
                    '--sendbird-light-background-100': '#F0F0F0',
                    '--sendbird-light-background-50': ' #FFFFFF',
                    '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',
                    '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',
                    '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',
                    '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',
                    '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',
                    '--sendbird-light-onlight-05': 'rgba(0, 0, 0, 0.44)',
                    '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',
                    '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',
                    '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',
                    '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',
                    '--sendbird-light-ondark-05': 'rgba(255, 255, 255, 0.44)',
                    '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',
                    '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',
                    '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',
                    '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',
                    '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',
                }, overrides),
            });
        }
    }, [overrides]);
};

var SDK_ACTIONS = {
    INIT_SDK: 'INIT_SDK',
    SET_SDK_LOADING: 'SET_SDK_LOADING',
    RESET_SDK: 'RESET_SDK',
    SDK_ERROR: 'SDK_ERROR',
};

var initialState$2 = {
    initialized: false,
    loading: false,
    sdk: {},
    error: false,
};

function reducer$2(state, action) {
    return K(action)
        .with({ type: SDK_ACTIONS.SET_SDK_LOADING }, function (_a) {
        var payload = _a.payload;
        return __assign(__assign({}, state), { initialized: false, loading: payload });
    })
        .with({ type: SDK_ACTIONS.SDK_ERROR }, function () {
        return __assign(__assign({}, state), { initialized: false, loading: false, error: true });
    })
        .with({ type: SDK_ACTIONS.INIT_SDK }, function (_a) {
        var payload = _a.payload;
        return {
            sdk: payload,
            initialized: true,
            loading: false,
            error: false,
        };
    })
        .with({ type: SDK_ACTIONS.RESET_SDK }, function () {
        return initialState$2;
    })
        .otherwise(function () {
        return state;
    });
}

var initialState$1 = {
    initialized: false,
    loading: false,
    user: {},
};

function reducer$1(state, action) {
    return K(action)
        .with({ type: USER_ACTIONS.INIT_USER }, function (_a) {
        var payload = _a.payload;
        return {
            initialized: true,
            loading: false,
            user: payload,
        };
    })
        .with({ type: USER_ACTIONS.RESET_USER }, function () {
        return initialState$1;
    })
        .with({ type: USER_ACTIONS.UPDATE_USER_INFO }, function (_a) {
        var payload = _a.payload;
        return __assign(__assign({}, state), { user: payload });
    })
        .otherwise(function () {
        return state;
    });
}

var APP_INFO_ACTIONS = {
    INITIALIZE_MESSAGE_TEMPLATES_INFO: 'INITIALIZE_MESSAGE_TEMPLATES_INFO',
    UPSERT_MESSAGE_TEMPLATES: 'UPSERT_MESSAGE_TEMPLATES',
    UPSERT_WAITING_TEMPLATE_KEYS: 'UPSERT_WAITING_TEMPLATE_KEYS',
    MARK_ERROR_WAITING_TEMPLATE_KEYS: 'MARK_ERROR_WAITING_TEMPLATE_KEYS',
};

function SendbirdProvider_reducer(state, action) {
    return K(action)
        .with({ type: APP_INFO_ACTIONS.INITIALIZE_MESSAGE_TEMPLATES_INFO }, function (_a) {
        var payload = _a.payload;
        return {
            messageTemplatesInfo: payload,
            waitingTemplateKeysMap: {},
        };
    })
        .with({ type: APP_INFO_ACTIONS.UPSERT_MESSAGE_TEMPLATES }, function (_a) {
        var payload = _a.payload;
        var templatesInfo = state.messageTemplatesInfo;
        if (!templatesInfo)
            return state; // Not initialized. Ignore.
        var waitingTemplateKeysMap = __assign({}, state.waitingTemplateKeysMap);
        payload.forEach(function (templatesMapData) {
            var key = templatesMapData.key, template = templatesMapData.template;
            templatesInfo.templatesMap[key] = template;
            delete waitingTemplateKeysMap[key];
        });
        return __assign(__assign({}, state), { waitingTemplateKeysMap: waitingTemplateKeysMap, messageTemplatesInfo: templatesInfo });
    })
        .with({ type: APP_INFO_ACTIONS.UPSERT_WAITING_TEMPLATE_KEYS }, function (_a) {
        var payload = _a.payload;
        var keys = payload.keys, requestedAt = payload.requestedAt;
        var waitingTemplateKeysMap = __assign({}, state.waitingTemplateKeysMap);
        keys.forEach(function (key) {
            var _a, _b;
            waitingTemplateKeysMap[key] = {
                erroredMessageIds: (_b = (_a = waitingTemplateKeysMap[key]) === null || _a === void 0 ? void 0 : _a.erroredMessageIds) !== null && _b !== void 0 ? _b : [],
                requestedAt: requestedAt,
            };
        });
        return __assign(__assign({}, state), { waitingTemplateKeysMap: waitingTemplateKeysMap });
    })
        .with({ type: APP_INFO_ACTIONS.MARK_ERROR_WAITING_TEMPLATE_KEYS }, function (_a) {
        var payload = _a.payload;
        var keys = payload.keys, messageId = payload.messageId;
        var waitingTemplateKeysMap = __assign({}, state.waitingTemplateKeysMap);
        keys.forEach(function (key) {
            var waitingTemplateKeyData = waitingTemplateKeysMap[key];
            if (waitingTemplateKeyData && waitingTemplateKeyData.erroredMessageIds.indexOf(messageId) === -1) {
                waitingTemplateKeyData.erroredMessageIds.push(messageId);
            }
        });
        return __assign(__assign({}, state), { waitingTemplateKeysMap: waitingTemplateKeysMap });
    })
        .otherwise(function () {
        return state;
    });
}

var initialState = {
    waitingTemplateKeysMap: {},
};

function disconnectSdk(_a) {
    return __awaiter(this, arguments, void 0, function (_b) {
        var sdkDispatcher = _b.sdkDispatcher, userDispatcher = _b.userDispatcher, sdk = _b.sdk;
        return __generator(this, function (_c) {
            return [2 /*return*/, new Promise(function (resolve) {
                    sdkDispatcher({ type: SDK_ACTIONS.SET_SDK_LOADING, payload: true });
                    if (sdk === null || sdk === void 0 ? void 0 : sdk.disconnect) {
                        sdk.disconnect()
                            .then(function () {
                            sdkDispatcher({ type: SDK_ACTIONS.RESET_SDK });
                            userDispatcher({ type: USER_ACTIONS.RESET_USER });
                        })
                            .finally(function () {
                            resolve(true);
                        });
                    }
                    else {
                        resolve(true);
                    }
                })];
        });
    });
}

var APP_VERSION_STRING = '3.14.6';
var INIT_SDK = SDK_ACTIONS.INIT_SDK, SET_SDK_LOADING = SDK_ACTIONS.SET_SDK_LOADING, RESET_SDK = SDK_ACTIONS.RESET_SDK, SDK_ERROR = SDK_ACTIONS.SDK_ERROR;
var INIT_USER = USER_ACTIONS.INIT_USER, UPDATE_USER_INFO = USER_ACTIONS.UPDATE_USER_INFO, RESET_USER = USER_ACTIONS.RESET_USER;
function getMissingParamError(_a) {
    var userId = _a.userId, appId = _a.appId;
    return "SendbirdProvider | useConnect/setupConnection/Connection failed UserId: ".concat(userId, " or appId: ").concat(appId, " missing");
}
function getConnectSbError(error) {
    return "SendbirdProvider | useConnect/setupConnection/Connection failed. ".concat((error === null || error === void 0 ? void 0 : error.code) || '', " ").concat((error === null || error === void 0 ? void 0 : error.message) || '');
}
function setUpParams(_a) {
    var appId = _a.appId, _b = _a.isNewApp, isNewApp = _b === void 0 ? false : _b, customApiHost = _a.customApiHost, customWebSocketHost = _a.customWebSocketHost, _c = _a.sdkInitParams, sdkInitParams = _c === void 0 ? {} : _c;
    var params = Object.assign(sdkInitParams, {
        appId: appId,
        modules: [new groupChannel_Ye(), new openChannel_Ie()],
        newInstance: isNewApp,
        localCacheEnabled: true,
    });
    if (customApiHost)
        params.customApiHost = customApiHost;
    if (customWebSocketHost)
        params.customWebSocketHost = customWebSocketHost;
    return chat_wn.init(params);
}
// Steps
// 1. Check if minimum userID/appID is provided
//  1.a. If not, throw error > !reject
//  1.b. If yes, continue
// 2. Set up params with custom host if provided
// 3. Set up session handler if provided
// 4. Set up version
// 5. Connect to Sendbird -> either using user ID or (user ID + access token)
// 6. If connected, connectCbSucess
//  6.a check if nickname is to be updated -> no > !resolve immediately
//  6.b check if nickname is to be updated -> yes > update nickname > !resolve
// 7. If not connected, connectCbError > !reject
function setUpConnection(_a) {
    return __awaiter(this, arguments, void 0, function (_b) {
        var _this = this;
        var logger = _b.logger, sdkDispatcher = _b.sdkDispatcher, userDispatcher = _b.userDispatcher, initDashboardConfigs = _b.initDashboardConfigs, userId = _b.userId, appId = _b.appId, isNewApp = _b.isNewApp, customApiHost = _b.customApiHost, customWebSocketHost = _b.customWebSocketHost, configureSession = _b.configureSession, nickname = _b.nickname, profileUrl = _b.profileUrl, accessToken = _b.accessToken, isUserIdUsedForNickname = _b.isUserIdUsedForNickname, sdkInitParams = _b.sdkInitParams, customExtensionParams = _b.customExtensionParams, _c = _b.isMobile, isMobile = _c === void 0 ? false : _c, eventHandlers = _b.eventHandlers, initializeMessageTemplatesInfo = _b.initializeMessageTemplatesInfo;
        return __generator(this, function (_d) {
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
                    (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/setupConnection/init', { userId: userId, appId: appId });
                    var onConnectionFailed = (_b = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.connection) === null || _b === void 0 ? void 0 : _b.onFailed;
                    sdkDispatcher({ type: SET_SDK_LOADING, payload: true });
                    if (userId && appId) {
                        var newSdk_1 = setUpParams({
                            appId: appId,
                            customApiHost: customApiHost,
                            customWebSocketHost: customWebSocketHost,
                            isNewApp: isNewApp,
                            sdkInitParams: sdkInitParams,
                        });
                        if (configureSession && typeof configureSession === 'function') {
                            var sessionHandler = configureSession(newSdk_1);
                            (_c = logger === null || logger === void 0 ? void 0 : logger.info) === null || _c === void 0 ? void 0 : _c.call(logger, 'SendbirdProvider | useConnect/setupConnection/configureSession', sessionHandler);
                            newSdk_1.setSessionHandler(sessionHandler);
                        }
                        (_d = logger === null || logger === void 0 ? void 0 : logger.info) === null || _d === void 0 ? void 0 : _d.call(logger, 'SendbirdProvider | useConnect/setupConnection/setVersion', { version: APP_VERSION_STRING });
                        /**
                         * Keep optional chaining to the addSendbirdExtensions
                         * for supporting the ChatSDK v4.9.5 or less
                         */
                        (_e = newSdk_1 === null || newSdk_1 === void 0 ? void 0 : newSdk_1.addSendbirdExtensions) === null || _e === void 0 ? void 0 : _e.call(newSdk_1, [
                            {
                                product: (_f = _bundle_0b1520ed["jb" /* ab */] === null || _bundle_0b1520ed["jb" /* ab */] === void 0 ? void 0 : _bundle_0b1520ed["jb" /* ab */].UIKIT_CHAT) !== null && _f !== void 0 ? _f : 'uikit-chat',
                                version: APP_VERSION_STRING,
                                platform: (_g = _bundle_0b1520ed["kb" /* ac */] === null || _bundle_0b1520ed["kb" /* ac */] === void 0 ? void 0 : _bundle_0b1520ed["kb" /* ac */].JS) !== null && _g !== void 0 ? _g : 'js',
                            },
                        ], {
                            platform: (isMobile
                                ? (_h = _bundle_0b1520ed["z" /* Y */] === null || _bundle_0b1520ed["z" /* Y */] === void 0 ? void 0 : _bundle_0b1520ed["z" /* Y */].MOBILE_WEB) !== null && _h !== void 0 ? _h : 'mobile_web'
                                : (_j = _bundle_0b1520ed["z" /* Y */] === null || _bundle_0b1520ed["z" /* Y */] === void 0 ? void 0 : _bundle_0b1520ed["z" /* Y */].WEB) !== null && _j !== void 0 ? _j : 'web'),
                        }, customExtensionParams);
                        newSdk_1.addExtension('sb_uikit', APP_VERSION_STRING);
                        var connectCbSuccess_1 = function (user) { return __awaiter(_this, void 0, void 0, function () {
                            var error_1;
                            var _a, _b, _c;
                            return __generator(this, function (_d) {
                                switch (_d.label) {
                                    case 0:
                                        (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/setupConnection/connectCbSuccess', user);
                                        sdkDispatcher({ type: INIT_SDK, payload: newSdk_1 });
                                        userDispatcher({ type: INIT_USER, payload: user });
                                        _d.label = 1;
                                    case 1:
                                        _d.trys.push([1, 3, , 4]);
                                        return [4 /*yield*/, initializeMessageTemplatesInfo(newSdk_1)];
                                    case 2:
                                        _d.sent();
                                        return [3 /*break*/, 4];
                                    case 3:
                                        error_1 = _d.sent();
                                        (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'SendbirdProvider | useConnect/setupConnection/upsertMessageTemplateListInLocalStorage failed', {
                                            error: error_1,
                                        });
                                        return [3 /*break*/, 4];
                                    case 4:
                                        initDashboardConfigs(newSdk_1)
                                            .then(function (config) {
                                            var _a;
                                            (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration success', {
                                                config: config,
                                            });
                                        })
                                            .catch(function (error) {
                                            var _a;
                                            (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration failed', {
                                                error: error,
                                            });
                                        });
                                        // use nickname/profileUrl if provided
                                        // or set userID as nickname
                                        if ((nickname !== user.nickname || profileUrl !== user.profileUrl)
                                            && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))) {
                                            (_c = logger === null || logger === void 0 ? void 0 : logger.info) === null || _c === void 0 ? void 0 : _c.call(logger, 'SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo', {
                                                nickname: nickname,
                                                profileUrl: profileUrl,
                                            });
                                            newSdk_1.updateCurrentUserInfo({
                                                nickname: nickname || user.nickname || (isUserIdUsedForNickname ? user.userId : ''),
                                                profileUrl: profileUrl || user.profileUrl,
                                            }).then(function (namedUser) {
                                                var _a;
                                                (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo success', {
                                                    nickname: nickname,
                                                    profileUrl: profileUrl,
                                                });
                                                userDispatcher({ type: UPDATE_USER_INFO, payload: namedUser });
                                            }).finally(function () {
                                                resolve();
                                            });
                                        }
                                        else {
                                            resolve();
                                        }
                                        return [2 /*return*/];
                                }
                            });
                        }); };
                        var connectCbError_1 = function (e) {
                            var _a;
                            var errorMessage = getConnectSbError(e);
                            (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, errorMessage, {
                                e: e,
                                appId: appId,
                                userId: userId,
                            });
                            sdkDispatcher({ type: RESET_SDK });
                            userDispatcher({ type: RESET_USER });
                            sdkDispatcher({ type: SDK_ERROR });
                            onConnectionFailed === null || onConnectionFailed === void 0 ? void 0 : onConnectionFailed(e);
                            // exit promise with error
                            reject(errorMessage);
                        };
                        (_k = logger === null || logger === void 0 ? void 0 : logger.info) === null || _k === void 0 ? void 0 : _k.call(logger, "SendbirdProvider | useConnect/setupConnection/connect connecting using ".concat(accessToken !== null && accessToken !== void 0 ? accessToken : userId));
                        newSdk_1.connect(userId, accessToken)
                            .then(function (res) { return connectCbSuccess_1(res); })
                            .catch(function (err) { return connectCbError_1(err); });
                    }
                    else {
                        var errorMessage = getMissingParamError({ userId: userId, appId: appId });
                        sdkDispatcher({ type: SDK_ERROR });
                        onConnectionFailed === null || onConnectionFailed === void 0 ? void 0 : onConnectionFailed({ message: errorMessage });
                        (_l = logger === null || logger === void 0 ? void 0 : logger.error) === null || _l === void 0 ? void 0 : _l.call(logger, errorMessage);
                        // exit promise with error
                        reject(errorMessage);
                    }
                })];
        });
    });
}

function connect(_a) {
    return __awaiter(this, arguments, void 0, function (_b) {
        var logger = _b.logger, sdkDispatcher = _b.sdkDispatcher, userDispatcher = _b.userDispatcher, appInfoDispatcher = _b.appInfoDispatcher, initDashboardConfigs = _b.initDashboardConfigs, userId = _b.userId, appId = _b.appId, _c = _b.isNewApp, isNewApp = _c === void 0 ? false : _c, customApiHost = _b.customApiHost, customWebSocketHost = _b.customWebSocketHost, configureSession = _b.configureSession, nickname = _b.nickname, profileUrl = _b.profileUrl, accessToken = _b.accessToken, sdk = _b.sdk, sdkInitParams = _b.sdkInitParams, customExtensionParams = _b.customExtensionParams, isMobile = _b.isMobile, eventHandlers = _b.eventHandlers, isUserIdUsedForNickname = _b.isUserIdUsedForNickname, initializeMessageTemplatesInfo = _b.initializeMessageTemplatesInfo;
        return __generator(this, function (_d) {
            switch (_d.label) {
                case 0: return [4 /*yield*/, disconnectSdk({
                        logger: logger,
                        sdkDispatcher: sdkDispatcher,
                        userDispatcher: userDispatcher,
                        sdk: sdk,
                    })];
                case 1:
                    _d.sent();
                    return [4 /*yield*/, setUpConnection({
                            logger: logger,
                            sdkDispatcher: sdkDispatcher,
                            userDispatcher: userDispatcher,
                            appInfoDispatcher: appInfoDispatcher,
                            initDashboardConfigs: initDashboardConfigs,
                            userId: userId,
                            appId: appId,
                            isNewApp: isNewApp,
                            customApiHost: customApiHost,
                            customWebSocketHost: customWebSocketHost,
                            configureSession: configureSession,
                            nickname: nickname,
                            profileUrl: profileUrl,
                            accessToken: accessToken,
                            sdkInitParams: sdkInitParams,
                            customExtensionParams: customExtensionParams,
                            isMobile: isMobile,
                            eventHandlers: eventHandlers,
                            isUserIdUsedForNickname: isUserIdUsedForNickname,
                            initializeMessageTemplatesInfo: initializeMessageTemplatesInfo,
                        })];
                case 2:
                    _d.sent();
                    return [2 /*return*/];
            }
        });
    });
}

function useConnect(triggerTypes, staticTypes) {
    var _this = this;
    var _a;
    var userId = triggerTypes.userId, appId = triggerTypes.appId, accessToken = triggerTypes.accessToken, isMobile = triggerTypes.isMobile, isUserIdUsedForNickname = triggerTypes.isUserIdUsedForNickname;
    var logger = staticTypes.logger, nickname = staticTypes.nickname, profileUrl = staticTypes.profileUrl, configureSession = staticTypes.configureSession, customApiHost = staticTypes.customApiHost, customWebSocketHost = staticTypes.customWebSocketHost, sdk = staticTypes.sdk, sdkDispatcher = staticTypes.sdkDispatcher, userDispatcher = staticTypes.userDispatcher, appInfoDispatcher = staticTypes.appInfoDispatcher, initDashboardConfigs = staticTypes.initDashboardConfigs, sdkInitParams = staticTypes.sdkInitParams, customExtensionParams = staticTypes.customExtensionParams, eventHandlers = staticTypes.eventHandlers, initializeMessageTemplatesInfo = staticTypes.initializeMessageTemplatesInfo;
    (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect', __assign(__assign({}, triggerTypes), staticTypes));
    // Note: This is a workaround to prevent the creation of multiple SDK instances when React strict mode is enabled.
    var connectDeps = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])({
        appId: '',
        userId: '',
    });
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/useEffect', { userId: userId, appId: appId, accessToken: accessToken });
        var isNewApp = connectDeps.current.appId !== appId;
        if (connectDeps.current.appId === appId && connectDeps.current.userId === userId) {
            return;
        }
        else {
            connectDeps.current = { appId: appId, userId: userId };
        }
        connect({
            userId: userId,
            appId: appId,
            isNewApp: isNewApp,
            accessToken: accessToken,
            logger: logger,
            nickname: nickname,
            profileUrl: profileUrl,
            configureSession: configureSession,
            customApiHost: customApiHost,
            customWebSocketHost: customWebSocketHost,
            sdk: sdk,
            sdkDispatcher: sdkDispatcher,
            userDispatcher: userDispatcher,
            appInfoDispatcher: appInfoDispatcher,
            initDashboardConfigs: initDashboardConfigs,
            isUserIdUsedForNickname: isUserIdUsedForNickname,
            sdkInitParams: sdkInitParams,
            customExtensionParams: customExtensionParams,
            isMobile: isMobile,
            eventHandlers: eventHandlers,
            initializeMessageTemplatesInfo: initializeMessageTemplatesInfo,
        }).catch(function (error) {
            var _a;
            (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/useEffect', error);
        });
    }, [userId, appId]);
    var reconnect = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () { return __awaiter(_this, void 0, void 0, function () {
        var error_1;
        var _a, _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'SendbirdProvider | useConnect/reconnect/useCallback', { sdk: sdk });
                    _c.label = 1;
                case 1:
                    _c.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, connect({
                            userId: userId,
                            appId: appId,
                            accessToken: accessToken,
                            logger: logger,
                            nickname: nickname,
                            profileUrl: profileUrl,
                            configureSession: configureSession,
                            customApiHost: customApiHost,
                            customWebSocketHost: customWebSocketHost,
                            sdk: sdk,
                            sdkDispatcher: sdkDispatcher,
                            userDispatcher: userDispatcher,
                            appInfoDispatcher: appInfoDispatcher,
                            initDashboardConfigs: initDashboardConfigs,
                            isUserIdUsedForNickname: isUserIdUsedForNickname,
                            sdkInitParams: sdkInitParams,
                            customExtensionParams: customExtensionParams,
                            isMobile: isMobile,
                            eventHandlers: eventHandlers,
                            initializeMessageTemplatesInfo: initializeMessageTemplatesInfo,
                        })];
                case 2:
                    _c.sent();
                    return [3 /*break*/, 4];
                case 3:
                    error_1 = _c.sent();
                    (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'SendbirdProvider | useConnect/reconnect/useCallback', error_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); }, [sdk]);
    return reconnect;
}

// Logger, pretty much explains it
// in SendbirdProvider
// const [logger, setLogger] = useState(LoggerFactory(logLevel));
var LOG_LEVELS = {
    DEBUG: 'debug',
    WARNING: 'warning',
    ERROR: 'error',
    INFO: 'info',
    ALL: 'all',
};
var colorLog = function (level) {
    switch (level) {
        case LOG_LEVELS.WARNING:
            return ('color: Orange');
        case LOG_LEVELS.ERROR:
            return ('color: Red');
        default:
            return ('color: Gray');
    }
};
var printLog = function (_a) {
    var level = _a.level, title = _a.title, _b = _a.description, description = _b === void 0 ? '' : _b, _c = _a.payload, payload = _c === void 0 ? [] : _c;
    // eslint-disable-next-line no-console
    console.log.apply(console, __spreadArray(["%c SendbirdUIKit | ".concat(level, " | ").concat(new Date().toISOString(), " | ").concat(title, " ").concat(description && '|'), colorLog(level), description], payload, false));
};
var getDefaultLogger = function () { return ({
    info: noop,
    error: noop,
    warning: noop,
}); };
var LoggerFactory = function (lvl, customInterface) {
    var logInterface = customInterface || printLog;
    var lvlArray = Array.isArray(lvl) ? lvl : [lvl];
    var applyLog = function (lgLvl) { return function (title, description) {
        var payload = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            payload[_i - 2] = arguments[_i];
        }
        return logInterface({
            level: lgLvl,
            title: title,
            description: description,
            payload: payload,
        });
    }; };
    return lvlArray.reduce(function (accumulator, currentLvl) {
        if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {
            return (__assign(__assign({}, accumulator), { info: applyLog(LOG_LEVELS.INFO), error: applyLog(LOG_LEVELS.ERROR), warning: applyLog(LOG_LEVELS.WARNING) }));
        }
        if (currentLvl === LOG_LEVELS.INFO) {
            return (__assign(__assign({}, accumulator), { info: applyLog(LOG_LEVELS.INFO) }));
        }
        if (currentLvl === LOG_LEVELS.ERROR) {
            return (__assign(__assign({}, accumulator), { error: applyLog(LOG_LEVELS.ERROR) }));
        }
        if (currentLvl === LOG_LEVELS.WARNING) {
            return (__assign(__assign({}, accumulator), { warning: applyLog(LOG_LEVELS.WARNING) }));
        }
        return __assign({}, accumulator);
    }, getDefaultLogger());
};
// TODO: Make this to hook, useLogger

var VoiceMessageProvider = function (_a) {
    var children = _a.children;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoicePlayerProvider, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceRecorderProvider, null, children)));
};

function uikitConfigMapper(_a) {
    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6;
    var legacyConfig = _a.legacyConfig, _7 = _a.uikitOptions, uikitOptions = _7 === void 0 ? {} : _7;
    var replyType = legacyConfig.replyType, isMentionEnabled = legacyConfig.isMentionEnabled, isReactionEnabled = legacyConfig.isReactionEnabled, disableUserProfile = legacyConfig.disableUserProfile, isVoiceMessageEnabled = legacyConfig.isVoiceMessageEnabled, isTypingIndicatorEnabledOnChannelList = legacyConfig.isTypingIndicatorEnabledOnChannelList, isMessageReceiptStatusEnabledOnChannelList = legacyConfig.isMessageReceiptStatusEnabledOnChannelList, showSearchIcon = legacyConfig.showSearchIcon;
    return {
        common: {
            enableUsingDefaultUserProfile: (_c = (_b = uikitOptions.common) === null || _b === void 0 ? void 0 : _b.enableUsingDefaultUserProfile) !== null && _c !== void 0 ? _c : (typeof disableUserProfile === 'boolean' ? !disableUserProfile : undefined),
        },
        groupChannel: {
            enableOgtag: (_d = uikitOptions.groupChannel) === null || _d === void 0 ? void 0 : _d.enableOgtag,
            enableMention: (_f = (_e = uikitOptions.groupChannel) === null || _e === void 0 ? void 0 : _e.enableMention) !== null && _f !== void 0 ? _f : isMentionEnabled,
            enableReactions: (_h = (_g = uikitOptions.groupChannel) === null || _g === void 0 ? void 0 : _g.enableReactions) !== null && _h !== void 0 ? _h : isReactionEnabled,
            enableReactionsSupergroup: (_j = uikitOptions.groupChannel) === null || _j === void 0 ? void 0 : _j.enableReactionsSupergroup,
            enableTypingIndicator: (_k = uikitOptions.groupChannel) === null || _k === void 0 ? void 0 : _k.enableTypingIndicator,
            enableVoiceMessage: (_m = (_l = uikitOptions.groupChannel) === null || _l === void 0 ? void 0 : _l.enableVoiceMessage) !== null && _m !== void 0 ? _m : isVoiceMessageEnabled,
            replyType: (_p = (_o = uikitOptions.groupChannel) === null || _o === void 0 ? void 0 : _o.replyType) !== null && _p !== void 0 ? _p : (replyType != null ? getCaseResolvedReplyType(replyType).lowerCase : undefined),
            threadReplySelectType: (_q = uikitOptions.groupChannel) === null || _q === void 0 ? void 0 : _q.threadReplySelectType,
            input: {
                enableDocument: (_s = (_r = uikitOptions.groupChannel) === null || _r === void 0 ? void 0 : _r.input) === null || _s === void 0 ? void 0 : _s.enableDocument,
            },
            typingIndicatorTypes: (_t = uikitOptions.groupChannel) === null || _t === void 0 ? void 0 : _t.typingIndicatorTypes,
            enableFeedback: (_u = uikitOptions.groupChannel) === null || _u === void 0 ? void 0 : _u.enableFeedback,
            enableSuggestedReplies: (_v = uikitOptions.groupChannel) === null || _v === void 0 ? void 0 : _v.enableSuggestedReplies,
            showSuggestedRepliesFor: (_w = uikitOptions.groupChannel) === null || _w === void 0 ? void 0 : _w.showSuggestedRepliesFor,
            suggestedRepliesDirection: (_x = uikitOptions.groupChannel) === null || _x === void 0 ? void 0 : _x.suggestedRepliesDirection,
        },
        groupChannelList: {
            enableTypingIndicator: (_z = (_y = uikitOptions.groupChannelList) === null || _y === void 0 ? void 0 : _y.enableTypingIndicator) !== null && _z !== void 0 ? _z : isTypingIndicatorEnabledOnChannelList,
            enableMessageReceiptStatus: (_1 = (_0 = uikitOptions.groupChannelList) === null || _0 === void 0 ? void 0 : _0.enableMessageReceiptStatus) !== null && _1 !== void 0 ? _1 : isMessageReceiptStatusEnabledOnChannelList,
        },
        groupChannelSettings: {
            enableMessageSearch: (_3 = (_2 = uikitOptions.groupChannelSettings) === null || _2 === void 0 ? void 0 : _2.enableMessageSearch) !== null && _3 !== void 0 ? _3 : showSearchIcon,
        },
        openChannel: {
            enableOgtag: (_4 = uikitOptions.openChannel) === null || _4 === void 0 ? void 0 : _4.enableOgtag,
            input: {
                enableDocument: (_6 = (_5 = uikitOptions.openChannel) === null || _5 === void 0 ? void 0 : _5.input) === null || _6 === void 0 ? void 0 : _6.enableDocument,
            },
        },
    };
}

function useMarkAsReadScheduler(_a, _b) {
    var isConnected = _a.isConnected;
    var logger = _b.logger;
    var markAsReadScheduler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return schedulerFactory({
        logger: logger,
        cb: function (channel) {
            try {
                channel.markAsRead();
            }
            catch (error) {
                logger.warning('Channel: Mark as delivered failed', { channel: channel, error: error });
            }
        },
    }); }, []);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        // for simplicity, we clear the queue when the connection is lost
        if (!isConnected) {
            markAsReadScheduler.clear();
        }
    }, [isConnected]);
    useUnmount(function () { markAsReadScheduler.clear(); });
    return markAsReadScheduler;
}

var uikitConfigStorage = {
    getItem: function (key) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                return [2 /*return*/, (_a = localStorage.getItem(key)) !== null && _a !== void 0 ? _a : null];
            });
        });
    },
    setItem: function (key, value) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/, localStorage.setItem(key, value)];
            });
        });
    },
};

/**
 * Takes JSON parsed template and then returns processed message template for storing it in global state.
 */
var getProcessedTemplate = function (parsedTemplate) {
    return {
        version: Number(parsedTemplate.ui_template.version),
        uiTemplate: JSON.stringify(parsedTemplate.ui_template.body.items),
        colorVariables: parsedTemplate.color_variables,
    };
};
var getProcessedTemplatesMap = function (parsedTemplates) {
    var processedTemplates = {};
    parsedTemplates.forEach(function (template) {
        processedTemplates[template.key] = getProcessedTemplate(template);
    });
    return processedTemplates;
};

var MESSAGE_TEMPLATES_FETCH_LIMIT = 20;
var INITIALIZE_MESSAGE_TEMPLATES_INFO = APP_INFO_ACTIONS.INITIALIZE_MESSAGE_TEMPLATES_INFO, UPSERT_MESSAGE_TEMPLATES = APP_INFO_ACTIONS.UPSERT_MESSAGE_TEMPLATES, UPSERT_WAITING_TEMPLATE_KEYS = APP_INFO_ACTIONS.UPSERT_WAITING_TEMPLATE_KEYS, MARK_ERROR_WAITING_TEMPLATE_KEYS = APP_INFO_ACTIONS.MARK_ERROR_WAITING_TEMPLATE_KEYS;
function useMessageTemplateUtils(_a) {
    var _this = this;
    var sdk = _a.sdk, logger = _a.logger, appInfoStore = _a.appInfoStore, appInfoDispatcher = _a.appInfoDispatcher;
    var messageTemplatesInfo = appInfoStore === null || appInfoStore === void 0 ? void 0 : appInfoStore.messageTemplatesInfo;
    var getCachedTemplate = function (key) {
        var _a, _b;
        if (!messageTemplatesInfo)
            return null;
        var cachedTemplate = null;
        var cachedMessageTemplates = (_a = messageTemplatesInfo === null || messageTemplatesInfo === void 0 ? void 0 : messageTemplatesInfo.templatesMap) !== null && _a !== void 0 ? _a : null;
        if (cachedMessageTemplates) {
            cachedTemplate = (_b = cachedMessageTemplates[key]) !== null && _b !== void 0 ? _b : null;
        }
        return cachedTemplate;
    };
    /**
     * Fetches a single message template by given key and then
     * returns processed template for updating templates info in global state.
     * If no such templates exists (error) or any error occurs in response, return null.
     */
    var fetchAllMessageTemplates = function (readySdk) { return __awaiter(_this, void 0, void 0, function () {
        var hasMore, paginationToken, fetchedTemplates, res;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    hasMore = true;
                    paginationToken = null;
                    fetchedTemplates = [];
                    _a.label = 1;
                case 1:
                    if (!hasMore) return [3 /*break*/, 3];
                    return [4 /*yield*/, readySdk.message.getMessageTemplatesByToken(paginationToken, { limit: MESSAGE_TEMPLATES_FETCH_LIMIT })];
                case 2:
                    res = _a.sent();
                    hasMore = res.hasMore;
                    paginationToken = res.token;
                    res.templates.forEach(function (messageTemplate) {
                        fetchedTemplates.push(JSON.parse(messageTemplate.template));
                    });
                    return [3 /*break*/, 1];
                case 3: return [2 /*return*/, fetchedTemplates];
            }
        });
    }); };
    var initializeMessageTemplatesInfo = function (readySdk) { return __awaiter(_this, void 0, void 0, function () {
        var sdkMessageTemplateToken, cachedMessageTemplatesToken, cachedMessageTemplates, parsedTemplates, newMessageTemplatesInfo, parsedTemplates, newMessageTemplatesInfo;
        var _a;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    sdkMessageTemplateToken = (_a = readySdk.appInfo) === null || _a === void 0 ? void 0 : _a.messageTemplateInfo.token;
                    /**
                     * no sdkMessageTemplateToken => no templates => clear cached
                     */
                    if (!sdkMessageTemplateToken) {
                        localStorage.removeItem(bundle_DhBuJR0w["b" /* C */]);
                        localStorage.removeItem(bundle_DhBuJR0w["t" /* m */]);
                        return [2 /*return*/];
                    }
                    cachedMessageTemplatesToken = localStorage.getItem(bundle_DhBuJR0w["b" /* C */]);
                    cachedMessageTemplates = localStorage.getItem(bundle_DhBuJR0w["t" /* m */]);
                    if (!(!cachedMessageTemplatesToken
                        || cachedMessageTemplatesToken !== sdkMessageTemplateToken)) return [3 /*break*/, 2];
                    return [4 /*yield*/, fetchAllMessageTemplates(readySdk)];
                case 1:
                    parsedTemplates = _b.sent();
                    newMessageTemplatesInfo = {
                        token: sdkMessageTemplateToken,
                        templatesMap: getProcessedTemplatesMap(parsedTemplates),
                    };
                    appInfoDispatcher({ type: INITIALIZE_MESSAGE_TEMPLATES_INFO, payload: newMessageTemplatesInfo });
                    localStorage.setItem(bundle_DhBuJR0w["b" /* C */], sdkMessageTemplateToken);
                    localStorage.setItem(bundle_DhBuJR0w["t" /* m */], JSON.stringify(parsedTemplates));
                    return [3 /*break*/, 3];
                case 2:
                    if (cachedMessageTemplatesToken
                        && cachedMessageTemplatesToken === sdkMessageTemplateToken
                        && cachedMessageTemplates) {
                        parsedTemplates = JSON.parse(cachedMessageTemplates);
                        newMessageTemplatesInfo = {
                            token: sdkMessageTemplateToken,
                            templatesMap: getProcessedTemplatesMap(parsedTemplates),
                        };
                        appInfoDispatcher({ type: INITIALIZE_MESSAGE_TEMPLATES_INFO, payload: newMessageTemplatesInfo });
                    }
                    _b.label = 3;
                case 3: return [2 /*return*/];
            }
        });
    }); };
    /**
     * If given message is a template message with template key and if the key does not exist in the cache,
     * update the cache by fetching the template.
     */
    var updateMessageTemplatesInfo = function (templateKeys, messageId, requestedAt) { return __awaiter(_this, void 0, void 0, function () {
        var newParsedTemplates_1, hasMore, token, result, e_1, cachedMessageTemplates, parsedTemplates_1, existingKeys_1;
        var _a;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (!appInfoDispatcher) return [3 /*break*/, 7];
                    appInfoDispatcher({
                        type: UPSERT_WAITING_TEMPLATE_KEYS,
                        payload: {
                            keys: templateKeys,
                            requestedAt: requestedAt,
                        },
                    });
                    newParsedTemplates_1 = [];
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, 5, , 6]);
                    hasMore = true;
                    token = null;
                    _b.label = 2;
                case 2:
                    if (!hasMore) return [3 /*break*/, 4];
                    return [4 /*yield*/, sdk.message.getMessageTemplatesByToken(token, {
                            keys: templateKeys,
                        })];
                case 3:
                    result = _b.sent();
                    result.templates.forEach(function (newTemplate) {
                        newParsedTemplates_1.push(JSON.parse(newTemplate.template));
                    });
                    hasMore = result.hasMore;
                    token = result.token;
                    return [3 /*break*/, 2];
                case 4: return [3 /*break*/, 6];
                case 5:
                    e_1 = _b.sent();
                    (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, 'Sendbird | fetchProcessedMessageTemplates failed', e_1, templateKeys);
                    return [3 /*break*/, 6];
                case 6:
                    if (newParsedTemplates_1.length > 0) {
                        cachedMessageTemplates = localStorage.getItem(bundle_DhBuJR0w["t" /* m */]);
                        if (cachedMessageTemplates) {
                            parsedTemplates_1 = JSON.parse(cachedMessageTemplates);
                            existingKeys_1 = parsedTemplates_1.map(function (parsedTemplate) { return parsedTemplate.key; });
                            newParsedTemplates_1.forEach(function (newParsedTemplate) {
                                if (!existingKeys_1.includes(newParsedTemplate.key)) {
                                    parsedTemplates_1.push(newParsedTemplate);
                                }
                            });
                            localStorage.setItem(bundle_DhBuJR0w["t" /* m */], JSON.stringify(parsedTemplates_1));
                        }
                        else {
                            localStorage.setItem(bundle_DhBuJR0w["t" /* m */], JSON.stringify([newParsedTemplates_1]));
                        }
                        // Update memory
                        appInfoDispatcher({
                            type: UPSERT_MESSAGE_TEMPLATES,
                            payload: newParsedTemplates_1.map(function (newParsedTemplate) {
                                return {
                                    key: newParsedTemplate.key,
                                    template: getProcessedTemplate(newParsedTemplate),
                                };
                            }),
                        });
                    }
                    else {
                        appInfoDispatcher({
                            type: MARK_ERROR_WAITING_TEMPLATE_KEYS,
                            payload: {
                                keys: templateKeys,
                                messageId: messageId,
                            },
                        });
                    }
                    _b.label = 7;
                case 7: return [2 /*return*/];
            }
        });
    }); };
    return {
        getCachedTemplate: getCachedTemplate,
        updateMessageTemplatesInfo: updateMessageTemplatesInfo,
        initializeMessageTemplatesInfo: initializeMessageTemplatesInfo,
    };
}

function SendbirdProvider(props) {
    var localConfigs = uikitConfigMapper({
        legacyConfig: {
            replyType: props.replyType,
            isMentionEnabled: props.isMentionEnabled,
            isReactionEnabled: props.isReactionEnabled,
            disableUserProfile: props.disableUserProfile,
            isVoiceMessageEnabled: props.isVoiceMessageEnabled,
            isTypingIndicatorEnabledOnChannelList: props.isTypingIndicatorEnabledOnChannelList,
            isMessageReceiptStatusEnabledOnChannelList: props.isMessageReceiptStatusEnabledOnChannelList,
            showSearchIcon: props.showSearchIcon,
        },
        uikitOptions: props.uikitOptions,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UIKitConfigProvider, { storage: uikitConfigStorage, localConfigs: {
            common: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.common,
            groupChannel: {
                channel: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannel,
                channelList: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannelList,
                setting: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannelSettings,
            },
            openChannel: {
                channel: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.openChannel,
            },
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdSDK, __assign({}, props))));
}
var SendbirdSDK = function (_a) {
    var _b, _c, _d;
    var appId = _a.appId, userId = _a.userId, children = _a.children, accessToken = _a.accessToken, customApiHost = _a.customApiHost, customWebSocketHost = _a.customWebSocketHost, configureSession = _a.configureSession, _e = _a.theme, theme = _e === void 0 ? 'light' : _e, _f = _a.config, config = _f === void 0 ? {} : _f, _g = _a.nickname, nickname = _g === void 0 ? '' : _g, colorSet = _a.colorSet, stringSet = _a.stringSet, dateLocale = _a.dateLocale, _h = _a.profileUrl, profileUrl = _h === void 0 ? '' : _h, voiceRecord = _a.voiceRecord, userListQuery = _a.userListQuery, _j = _a.imageCompression, imageCompression = _j === void 0 ? {} : _j, _k = _a.allowProfileEdit, allowProfileEdit = _k === void 0 ? false : _k, _l = _a.disableMarkAsDelivered, disableMarkAsDelivered = _l === void 0 ? false : _l, renderUserProfile = _a.renderUserProfile, onUserProfileMessage = _a.onUserProfileMessage, _m = _a.breakpoint, breakpoint = _m === void 0 ? false : _m, _o = _a.isUserIdUsedForNickname, isUserIdUsedForNickname = _o === void 0 ? true : _o, sdkInitParams = _a.sdkInitParams, customExtensionParams = _a.customExtensionParams, _p = _a.isMultipleFilesMessageEnabled, isMultipleFilesMessageEnabled = _p === void 0 ? false : _p, eventHandlers = _a.eventHandlers;
    var _q = config.logLevel, logLevel = _q === void 0 ? '' : _q, _r = config.userMention, userMention = _r === void 0 ? {} : _r, _s = config.isREMUnitEnabled, isREMUnitEnabled = _s === void 0 ? false : _s, customPubSub = config.pubSub;
    var isMobile = useMediaQueryContext().isMobile;
    var _t = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(LoggerFactory(logLevel)), logger = _t[0], setLogger = _t[1];
    var pubSub = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(function () { return customPubSub !== null && customPubSub !== void 0 ? customPubSub : pubSubFactory(); })[0];
    var _u = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(reducer$2, initialState$2), sdkStore = _u[0], sdkDispatcher = _u[1];
    var _v = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(reducer$1, initialState$1), userStore = _v[0], userDispatcher = _v[1];
    var _w = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(SendbirdProvider_reducer, initialState), appInfoStore = _w[0], appInfoDispatcher = _w[1];
    var _x = useUIKitConfig(), configs = _x.configs, configsWithAppAttr = _x.configsWithAppAttr, initDashboardConfigs = _x.initDashboardConfigs;
    var sdkInitialized = sdkStore.initialized;
    var sdk = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.sdk;
    var _y = (_b = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) !== null && _b !== void 0 ? _b : {}, uploadSizeLimit = _y.uploadSizeLimit, multipleFilesMessageFileCountLimit = _y.multipleFilesMessageFileCountLimit;
    useTheme(colorSet);
    var _z = useMessageTemplateUtils({
        sdk: sdk,
        logger: logger,
        appInfoStore: appInfoStore,
        appInfoDispatcher: appInfoDispatcher,
    }), getCachedTemplate = _z.getCachedTemplate, updateMessageTemplatesInfo = _z.updateMessageTemplatesInfo, initializeMessageTemplatesInfo = _z.initializeMessageTemplatesInfo;
    var utils = {
        updateMessageTemplatesInfo: updateMessageTemplatesInfo,
        getCachedTemplate: getCachedTemplate,
    };
    var reconnect = useConnect({
        appId: appId,
        userId: userId,
        accessToken: accessToken,
        isUserIdUsedForNickname: isUserIdUsedForNickname,
        isMobile: isMobile,
    }, {
        logger: logger,
        nickname: nickname,
        profileUrl: profileUrl,
        configureSession: configureSession,
        customApiHost: customApiHost,
        customWebSocketHost: customWebSocketHost,
        sdkInitParams: sdkInitParams,
        customExtensionParams: customExtensionParams,
        sdk: sdk,
        sdkDispatcher: sdkDispatcher,
        userDispatcher: userDispatcher,
        appInfoDispatcher: appInfoDispatcher,
        initDashboardConfigs: initDashboardConfigs,
        eventHandlers: eventHandlers,
        initializeMessageTemplatesInfo: initializeMessageTemplatesInfo,
    });
    useUnmount(function () {
        if (typeof sdk.disconnect === 'function') {
            disconnectSdk({
                logger: logger,
                sdkDispatcher: sdkDispatcher,
                userDispatcher: userDispatcher,
                sdk: sdk,
            });
        }
    }, [sdk.disconnect]);
    // to create a pubsub to communicate between parent and child
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setLogger(LoggerFactory(logLevel));
    }, [logLevel]);
    // should move to reducer
    var _0 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(theme), currentTheme = _0[0], setCurrentTheme = _0[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setCurrentTheme(theme);
    }, [theme]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var body = document.querySelector('body');
        body === null || body === void 0 ? void 0 : body.classList.remove('sendbird-experimental__rem__units');
        if (isREMUnitEnabled) {
            body === null || body === void 0 ? void 0 : body.classList.add('sendbird-experimental__rem__units');
        }
    }, [isREMUnitEnabled]);
    // add-remove theme from body
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        logger.info('Setup theme', "Theme: ".concat(currentTheme));
        try {
            var body = document.querySelector('body');
            body === null || body === void 0 ? void 0 : body.classList.remove('sendbird-theme--light');
            body === null || body === void 0 ? void 0 : body.classList.remove('sendbird-theme--dark');
            body === null || body === void 0 ? void 0 : body.classList.add("sendbird-theme--".concat(currentTheme || 'light'));
            logger.info('Finish setup theme');
            // eslint-disable-next-line no-empty
        }
        catch (e) {
            logger.warning('Setup theme failed', "".concat(e));
        }
        return function () {
            try {
                var body = document.querySelector('body');
                body === null || body === void 0 ? void 0 : body.classList.remove('sendbird-theme--light');
                body === null || body === void 0 ? void 0 : body.classList.remove('sendbird-theme--dark');
                // eslint-disable-next-line no-empty
            }
            catch (_a) { }
        };
    }, [currentTheme]);
    var isOnline = useOnlineStatus(sdkStore.sdk, logger);
    var markAsReadScheduler = useMarkAsReadScheduler({ isConnected: isOnline }, { logger: logger });
    var markAsDeliveredScheduler = useMarkAsDeliveredScheduler({ isConnected: isOnline }, { logger: logger });
    var localeStringSet = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useMemo(function () {
        return __assign(__assign({}, getStringSet('en')), stringSet);
    }, [stringSet]);
    /**
     * Feature Configuration - TODO
     * This will be moved into the UIKitConfigProvider, aftering Dashboard applies
     */
    var uikitMultipleFilesMessageLimit = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return Math.min(bundle_DhBuJR0w["u" /* n */], multipleFilesMessageFileCountLimit !== null && multipleFilesMessageFileCountLimit !== void 0 ? multipleFilesMessageFileCountLimit : Number.MAX_SAFE_INTEGER);
    }, [multipleFilesMessageFileCountLimit]);
    // Emoji Manager
    var emojiManager = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return new bundle_CGmq3qGM_EmojiManager({
            sdk: sdk,
            logger: logger,
        });
    }, [sdkStore.initialized]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdSdkContext.Provider, { value: {
            stores: {
                sdkStore: sdkStore,
                userStore: userStore,
                appInfoStore: appInfoStore,
            },
            dispatchers: {
                sdkDispatcher: sdkDispatcher,
                userDispatcher: userDispatcher,
                appInfoDispatcher: appInfoDispatcher,
                reconnect: reconnect,
            },
            config: {
                disableMarkAsDelivered: disableMarkAsDelivered,
                renderUserProfile: renderUserProfile,
                onUserProfileMessage: onUserProfileMessage,
                allowProfileEdit: allowProfileEdit,
                isOnline: isOnline,
                userId: userId,
                appId: appId,
                accessToken: accessToken,
                theme: currentTheme,
                setCurrentTheme: setCurrentTheme,
                setCurrenttheme: setCurrentTheme, // deprecated: typo
                isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled,
                uikitUploadSizeLimit: uploadSizeLimit !== null && uploadSizeLimit !== void 0 ? uploadSizeLimit : bundle_DhBuJR0w["v" /* o */],
                uikitMultipleFilesMessageLimit: uikitMultipleFilesMessageLimit,
                userListQuery: userListQuery,
                logger: logger,
                pubSub: pubSub,
                imageCompression: __assign({ compressionRate: 0.7, outputFormat: 'preserve' }, imageCompression),
                voiceRecord: {
                    maxRecordingTime: (_c = voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.maxRecordingTime) !== null && _c !== void 0 ? _c : bundle_DhBuJR0w["w" /* p */],
                    minRecordingTime: (_d = voiceRecord === null || voiceRecord === void 0 ? void 0 : voiceRecord.minRecordingTime) !== null && _d !== void 0 ? _d : bundle_DhBuJR0w["l" /* e */],
                },
                userMention: {
                    maxMentionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || 10,
                    maxSuggestionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || 15,
                },
                markAsReadScheduler: markAsReadScheduler,
                markAsDeliveredScheduler: markAsDeliveredScheduler,
                // Remote configs set from dashboard by UIKit feature configuration
                common: configs.common,
                groupChannel: {
                    enableOgtag: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableOgtag,
                    enableTypingIndicator: configs.groupChannel.channel.enableTypingIndicator,
                    enableReactions: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactions,
                    enableReactionsSupergroup: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactionsSupergroup,
                    enableMention: configs.groupChannel.channel.enableMention,
                    replyType: configs.groupChannel.channel.replyType,
                    threadReplySelectType: configs.groupChannel.channel.threadReplySelectType,
                    enableVoiceMessage: configs.groupChannel.channel.enableVoiceMessage,
                    enableDocument: configs.groupChannel.channel.input.enableDocument,
                    typingIndicatorTypes: configs.groupChannel.channel.typingIndicatorTypes,
                    enableFeedback: configs.groupChannel.channel.enableFeedback,
                    enableSuggestedReplies: configs.groupChannel.channel.enableSuggestedReplies,
                    showSuggestedRepliesFor: configs.groupChannel.channel.showSuggestedRepliesFor,
                    suggestedRepliesDirection: configs.groupChannel.channel.suggestedRepliesDirection,
                },
                groupChannelList: {
                    enableTypingIndicator: configs.groupChannel.channelList.enableTypingIndicator,
                    enableMessageReceiptStatus: configs.groupChannel.channelList.enableMessageReceiptStatus,
                },
                groupChannelSettings: {
                    enableMessageSearch: sdkInitialized && configsWithAppAttr(sdk).groupChannel.setting.enableMessageSearch,
                },
                openChannel: {
                    enableOgtag: sdkInitialized && configsWithAppAttr(sdk).openChannel.channel.enableOgtag,
                    enableDocument: configs.openChannel.channel.input.enableDocument,
                },
                // deprecated configs
                disableUserProfile: !configs.common.enableUsingDefaultUserProfile,
                isReactionEnabled: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactions,
                isMentionEnabled: configs.groupChannel.channel.enableMention,
                isVoiceMessageEnabled: configs.groupChannel.channel.enableVoiceMessage,
                replyType: getCaseResolvedReplyType(configs.groupChannel.channel.replyType).upperCase,
                isTypingIndicatorEnabledOnChannelList: configs.groupChannel.channelList.enableTypingIndicator,
                isMessageReceiptStatusEnabledOnChannelList: configs.groupChannel.channelList.enableMessageReceiptStatus,
                showSearchIcon: sdkInitialized && configsWithAppAttr(sdk).groupChannel.setting.enableMessageSearch,
            },
            eventHandlers: eventHandlers,
            emojiManager: emojiManager,
            utils: utils,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MediaQueryProvider, { logger: logger, breakpoint: breakpoint },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LocalizationProvider, { stringSet: localeStringSet, dateLocale: dateLocale },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageProvider, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GlobalModalProvider, null, children)))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactionListRoot, null),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalRoot, null),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuRoot, null)));
};


//# sourceMappingURL=SendbirdProvider.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-C_dNvBEo.js


/**
 * user profile goes deep inside the component tree
 * use this context as a short circuit to send in values
 */
var UserProfileContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
    disableUserProfile: true,
    isOpenChannel: false,
});
var UserProfileProvider = function (_a) {
    var _b = _a.isOpenChannel, isOpenChannel = _b === void 0 ? false : _b, _c = _a.disableUserProfile, disableUserProfile = _c === void 0 ? false : _c, renderUserProfile = _a.renderUserProfile, onUserProfileMessage = _a.onUserProfileMessage, children = _a.children;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileContext.Provider, { value: {
            isOpenChannel: isOpenChannel,
            disableUserProfile: disableUserProfile,
            renderUserProfile: renderUserProfile,
            onUserProfileMessage: onUserProfileMessage,
        } }, children));
};


//# sourceMappingURL=bundle-C_dNvBEo.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DQZG-uS3.js


var LOG_PRESET = 'useToggleReactionCallback:';
function useToggleReactionCallback(currentChannel, logger) {
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (message, key, isReacted) {
        if (!currentChannel) {
            logger === null || logger === void 0 ? void 0 : logger.warning("".concat(LOG_PRESET, " currentChannel doesn't exist"), currentChannel);
            return;
        }
        if (isReacted) {
            currentChannel
                .deleteReaction(message, key)
                .then(function (res) {
                logger === null || logger === void 0 ? void 0 : logger.info("".concat(LOG_PRESET, " Delete reaction success"), res);
            })
                .catch(function (err) {
                logger === null || logger === void 0 ? void 0 : logger.warning("".concat(LOG_PRESET, " Delete reaction failed"), err);
            });
        }
        else {
            currentChannel
                .addReaction(message, key)
                .then(function (res) {
                logger === null || logger === void 0 ? void 0 : logger.info("".concat(LOG_PRESET, " Add reaction success"), res);
            })
                .catch(function (err) {
                logger === null || logger === void 0 ? void 0 : logger.warning("".concat(LOG_PRESET, " Add reaction failed"), err);
            });
        }
    }, [currentChannel]);
}


//# sourceMappingURL=bundle-DQZG-uS3.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-EgWLYRXK.js
function getComponentKeyFromMessage(message) {
    if ('sendingStatus' in message) {
        if (message.sendingStatus === 'succeeded')
            return String(message.messageId);
        return message.reqId;
    }
    return String(message.messageId);
}
function isContextMenuClosed() {
    var _a, _b;
    return (((_a = document.getElementById('sendbird-dropdown-portal')) === null || _a === void 0 ? void 0 : _a.childElementCount) === 0
        && ((_b = document.getElementById('sendbird-emoji-list-portal')) === null || _b === void 0 ? void 0 : _b.childElementCount) === 0);
}
function getMessageTopOffset(messageCreatedAt) {
    var _a;
    var element = (_a = document.querySelectorAll("[data-sb-created-at=\"".concat(messageCreatedAt, "\"]"))) === null || _a === void 0 ? void 0 : _a[0];
    if (element instanceof HTMLElement) {
        return element.offsetTop;
    }
    return null;
}
var isDisabledBecauseFrozen = function (groupChannel) {
    if (!groupChannel)
        return false;
    return groupChannel.isFrozen && groupChannel.myRole !== 'operator';
};
var isDisabledBecauseMuted = function (groupChannel) {
    if (!groupChannel)
        return false;
    return groupChannel.myMutedState === 'muted';
};


//# sourceMappingURL=bundle-EgWLYRXK.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B9ue8vfn.js



var scrollToRenderedMessage = function (scrollRef, initialTimeStamp, setIsScrolled) {
    var _a;
    try {
        var container = scrollRef.current;
        // scroll into the message with initialTimeStamp
        var element = (_a = container === null || container === void 0 ? void 0 : container.querySelectorAll("[data-sb-created-at=\"".concat(initialTimeStamp, "\"]"))) === null || _a === void 0 ? void 0 : _a[0];
        if (container && element instanceof HTMLElement) {
            // Set the scroll position of the container to bring the element to the top
            container.scrollTop = element.offsetTop;
        }
    }
    catch (_b) {
        // do nothing
    }
    finally {
        setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);
    }
};
/* eslint-disable default-param-last */
var scrollIntoLast = function (initialTry, scrollRef, setIsScrolled) {
    if (initialTry === void 0) { initialTry = 0; }
    var MAX_TRIES = 10;
    var currentTry = initialTry;
    if (currentTry > MAX_TRIES) {
        setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);
        return;
    }
    try {
        var scrollDOM = (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) || document.querySelector('.sendbird-conversation__messages-padding');
        if (scrollDOM)
            scrollDOM.scrollTop = scrollDOM.scrollHeight;
        setIsScrolled === null || setIsScrolled === void 0 ? void 0 : setIsScrolled(true);
    }
    catch (error) {
        setTimeout(function () {
            scrollIntoLast(currentTry + 1, scrollRef, setIsScrolled);
        }, 500 * currentTry);
    }
};
var bundle_B9ue8vfn_isOperator = function (groupChannel) {
    var myRole = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myRole;
    return myRole === 'operator';
};
var bundle_B9ue8vfn_isDisabledBecauseFrozen = function (groupChannel) {
    var isFrozen = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen;
    return isFrozen && !bundle_B9ue8vfn_isOperator(groupChannel);
};
var bundle_B9ue8vfn_isDisabledBecauseMuted = function (groupChannel) {
    var myMutedState = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myMutedState;
    return myMutedState === 'muted';
};
var getAllEmojisMapFromEmojiContainer = function (emojiContainer) {
    var _a = emojiContainer.emojiCategories, emojiCategories = _a === void 0 ? [] : _a;
    var allEmojisMap = new Map();
    for (var categoryIndex = 0; categoryIndex < emojiCategories.length; categoryIndex += 1) {
        var emojis = emojiCategories[categoryIndex].emojis;
        for (var emojiIndex = 0; emojiIndex < emojis.length; emojiIndex += 1) {
            var _b = emojis[emojiIndex], key = _b.key, url = _b.url;
            allEmojisMap.set(key, url);
        }
    }
    return allEmojisMap;
};
var getNicknamesMapFromMembers = function (members) {
    if (members === void 0) { members = []; }
    var nicknamesMap = new Map();
    for (var memberIndex = 0; memberIndex < members.length; memberIndex += 1) {
        var _a = members[memberIndex], userId = _a.userId, nickname = _a.nickname;
        nicknamesMap.set(userId, nickname);
    }
    return nicknamesMap;
};
var getUniqueListBy = function (arr, key) {
    var entries = arr.map(function (item) { return [item[key], item]; });
    return Array.from(new Map(entries).values());
};
var getUniqueListByMessageId = function (arr) {
    return getUniqueListBy(arr, 'messageId');
};
var sortByCreatedAt = function (messages) {
    return messages.sort(function (a, b) { return a.createdAt - b.createdAt; });
};
var mergeAndSortMessages = function (oldMessages, newMessages) {
    var lastOldMessage = oldMessages[oldMessages.length - 1];
    var firstNewMessage = newMessages[0];
    // If the last message of oldMessages is older than the first message of newMessages,
    // then we can safely append newMessages to oldMessages.
    if ((lastOldMessage === null || lastOldMessage === void 0 ? void 0 : lastOldMessage.createdAt) < (firstNewMessage === null || firstNewMessage === void 0 ? void 0 : firstNewMessage.createdAt)) {
        return __spreadArray(__spreadArray([], oldMessages, true), newMessages, true);
    }
    // todo: optimize this
    // If the last message of oldMessages is newer than the first message of newMessages,
    // then we need to merge the two arrays and sort them by createdAt.
    var mergedMessages = __spreadArray(__spreadArray([], oldMessages, true), newMessages, true);
    var unique = getUniqueListByMessageId(mergedMessages);
    return sortByCreatedAt(unique);
};
var passUnsuccessfullMessages = function (allMessages, newMessage) {
    if ('sendingStatus' in newMessage
        && (newMessage.sendingStatus === _bundle_0b1520ed["vb" /* an */].SUCCEEDED || newMessage.sendingStatus === _bundle_0b1520ed["vb" /* an */].PENDING)) {
        var lastIndexOfSucceededMessage = allMessages
            .map(function (message) {
            if ('sendingStatus' in message && message.sendingStatus)
                return message.sendingStatus;
            return message.isAdminMessage() ? _bundle_0b1520ed["vb" /* an */].SUCCEEDED : null;
        })
            .lastIndexOf(_bundle_0b1520ed["vb" /* an */].SUCCEEDED);
        if (lastIndexOfSucceededMessage + 1 < allMessages.length) {
            var messages = __spreadArray([], allMessages, true);
            messages.splice(lastIndexOfSucceededMessage + 1, 0, newMessage);
            return messages;
        }
    }
    return __spreadArray(__spreadArray([], allMessages, true), [newMessage], false);
};
var isAboutSame = function (a, b, px) {
    return Math.abs(a - b) <= px;
};


//# sourceMappingURL=bundle-B9ue8vfn.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Bd6fN8eX.js



/**
 * Note: `leading` has higher priority rather than `trailing`
 * */
function useThrottleCallback(callback, delay, options) {
    if (options === void 0) { options = {
        leading: true,
        trailing: false,
    }; }
    var timer = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var trailingArgs = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        return function () {
            if (timer.current)
                clearTimeout(timer.current);
        };
    }, []);
    return usePreservedCallback(function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (timer.current) {
            trailingArgs.current = args;
            return;
        }
        if (options.leading) {
            callback.apply(void 0, args);
        }
        else {
            trailingArgs.current = args;
        }
        var invoke = function () {
            if (options.trailing && trailingArgs.current) {
                callback.apply(void 0, trailingArgs.current);
                trailingArgs.current = null;
                timer.current = setTimeout(invoke, delay);
            }
            else {
                timer.current = null;
            }
        };
        timer.current = setTimeout(invoke, delay);
    });
}
/**
 * Note: `leading` has higher priority rather than `trailing`
 * */
function throttle(callback, delay, options) {
    if (options === void 0) { options = {
        leading: true,
        trailing: false,
    }; }
    var timer = null;
    var trailingArgs = null;
    return (function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (timer) {
            trailingArgs = args;
            return;
        }
        if (options.leading) {
            callback.apply(void 0, args);
        }
        else {
            trailingArgs = args;
        }
        var invoke = function () {
            if (options.trailing && trailingArgs) {
                callback.apply(void 0, trailingArgs);
                trailingArgs = null;
                timer = setTimeout(invoke, delay);
            }
            else {
                timer = null;
            }
        };
        timer = setTimeout(invoke, delay);
    });
}


//# sourceMappingURL=bundle-Bd6fN8eX.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Ck_ke5Gq.js






var BUFFER_DELAY = 100;
function useOnScrollPositionChangeDetector(params) {
    var onReachedTop = params.onReachedTop, onReachedBottom = params.onReachedBottom, onInBetween = params.onInBetween;
    var cb = usePreservedCallback(function (event) {
        if (event === null || event === void 0 ? void 0 : event.target) {
            var _a = event.target, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;
            var positionEvent = {
                distanceFromBottom: scrollHeight - scrollTop - clientHeight,
            };
            if (onReachedTop && isAboutSame(scrollTop, 0, bundle_DhBuJR0w["f" /* S */])) {
                onReachedTop(positionEvent);
            }
            else if (onReachedBottom && isAboutSame(scrollHeight, clientHeight + scrollTop, bundle_DhBuJR0w["f" /* S */])) {
                onReachedBottom(positionEvent);
            }
            else if (onInBetween) {
                onInBetween(positionEvent);
            }
        }
    });
    return useThrottleCallback(cb, BUFFER_DELAY, { trailing: true });
}
function useOnScrollPositionChangeDetectorWithRef(scrollRef, params) {
    var _params = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(params);
    _params.current = params;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        var elem = scrollRef.current;
        if (elem) {
            var callback_1 = throttle(function () {
                var scrollTop = elem.scrollTop, scrollHeight = elem.scrollHeight, clientHeight = elem.clientHeight;
                var event = {
                    distanceFromBottom: scrollHeight - scrollTop - clientHeight,
                };
                if (_params.current.onReachedTop && isAboutSame(scrollTop, 0, bundle_DhBuJR0w["f" /* S */])) {
                    _params.current.onReachedTop(event);
                }
                else if (_params.current.onReachedBottom && isAboutSame(scrollHeight, clientHeight + scrollTop, bundle_DhBuJR0w["f" /* S */])) {
                    _params.current.onReachedBottom(event);
                }
                else if (_params.current.onInBetween) {
                    _params.current.onInBetween(event);
                }
            }, BUFFER_DELAY, { trailing: true });
            elem.addEventListener('scroll', callback_1);
            return function () { return elem.removeEventListener('scroll', callback_1); };
        }
    }, [scrollRef.current]);
}


//# sourceMappingURL=bundle-Ck_ke5Gq.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CriEArZn.js
var PublishingModuleType;
(function (PublishingModuleType) {
    PublishingModuleType["CHANNEL"] = "CHANNEL";
    PublishingModuleType["THREAD"] = "THREAD";
})(PublishingModuleType || (PublishingModuleType = {}));
// NOTE: To maintain compatibility with the sendbirdSelector provided to customers
//  this utility function ensures that if publishingModules is not provided or its length is zero
//  it will maintain the same behavior as before.
var isTargetIncludedInModules = function (target, modules) {
    if (!modules || modules.length === 0)
        return true;
    else
        return modules.includes(target);
};
function shouldPubSubPublishToChannel(modules) {
    return isTargetIncludedInModules(PublishingModuleType.CHANNEL, modules);
}
function shouldPubSubPublishToThread(modules) {
    return isTargetIncludedInModules(PublishingModuleType.THREAD, modules);
}

// NOTE: It seems not distinguish topics by channel type.
var PUBSUB_TOPICS;
(function (PUBSUB_TOPICS) {
    // Group Channel
    PUBSUB_TOPICS["USER_UPDATED"] = "USER_UPDATED";
    PUBSUB_TOPICS["SEND_MESSAGE_START"] = "SEND_MESSAGE_START";
    PUBSUB_TOPICS["SEND_MESSAGE_FAILED"] = "SEND_MESSAGE_FAILED";
    PUBSUB_TOPICS["SEND_USER_MESSAGE"] = "SEND_USER_MESSAGE";
    PUBSUB_TOPICS["SEND_FILE_MESSAGE"] = "SEND_FILE_MESSAGE";
    PUBSUB_TOPICS["ON_FILE_INFO_UPLOADED"] = "ON_FILE_INFO_UPLOADED";
    PUBSUB_TOPICS["UPDATE_USER_MESSAGE"] = "UPDATE_USER_MESSAGE";
    PUBSUB_TOPICS["DELETE_MESSAGE"] = "DELETE_MESSAGE";
    PUBSUB_TOPICS["LEAVE_CHANNEL"] = "LEAVE_CHANNEL";
    PUBSUB_TOPICS["CREATE_CHANNEL"] = "CREATE_CHANNEL";
    // Open Channel
    PUBSUB_TOPICS["UPDATE_OPEN_CHANNEL"] = "UPDATE_OPEN_CHANNEL";
})(PUBSUB_TOPICS || (PUBSUB_TOPICS = {}));
var pubSubTopics = PUBSUB_TOPICS;


//# sourceMappingURL=bundle-CriEArZn.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BFa8UJ8b.js
/**
 * This function helps consider the every condition
 * related to enabling emoji reaction feature.
 */
function getIsReactionEnabled(_a) {
    var channel = _a.channel, config = _a.config, moduleLevel = _a.moduleLevel;
    if (!channel || channel.isBroadcast || channel.isEphemeral) {
        return false;
    }
    if (channel.isSuper)
        return moduleLevel !== null && moduleLevel !== void 0 ? moduleLevel : config.groupChannel.enableReactionsSupergroup;
    return moduleLevel !== null && moduleLevel !== void 0 ? moduleLevel : config.groupChannel.enableReactions;
}


//# sourceMappingURL=bundle-BFa8UJ8b.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/context.js



















function runCallback(callback, lazy) {
    if (lazy === void 0) { lazy = true; }
    if (lazy) {
        setTimeout(function () {
            callback();
        });
    }
    else {
        callback();
    }
}
function getScrollBehavior(behavior, animated) {
    if (typeof animated === 'boolean')
        return animated ? 'smooth' : 'auto';
    return behavior;
}
function useMessageListScroll(behavior) {
    var scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var scrollDistanceFromBottomRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(0);
    var scrollPubSub = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(function () { return pubSubFactory(); })[0];
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isScrollBottomReached = _a[0], setIsScrollBottomReached = _a[1];
    // If there is no area to scroll, it is considered as scroll bottom reached.
    if (isScrollBottomReached === false && scrollRef.current && scrollRef.current.scrollHeight <= scrollRef.current.clientHeight) {
        scrollDistanceFromBottomRef.current = 0;
        setIsScrollBottomReached(true);
    }
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        var unsubscribes = [];
        unsubscribes.push(scrollPubSub.subscribe('scrollToBottom', function (_a) {
            var resolve = _a.resolve, animated = _a.animated;
            runCallback(function () {
                if (!scrollRef.current)
                    return;
                if (scrollRef.current.scroll) {
                    scrollRef.current.scroll({ top: scrollRef.current.scrollHeight, behavior: getScrollBehavior(behavior, animated) });
                }
                else {
                    scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
                }
                // Update data by manual update
                scrollDistanceFromBottomRef.current = 0;
                setIsScrollBottomReached(true);
                if (resolve)
                    resolve();
            });
        }));
        unsubscribes.push(scrollPubSub.subscribe('scroll', function (_a) {
            var top = _a.top, animated = _a.animated, lazy = _a.lazy, resolve = _a.resolve;
            runCallback(function () {
                if (!scrollRef.current)
                    return;
                var _a = scrollRef.current, scrollTop = _a.scrollTop, scrollHeight = _a.scrollHeight, clientHeight = _a.clientHeight;
                if (scrollRef.current.scroll) {
                    scrollRef.current.scroll({ top: top, behavior: getScrollBehavior(behavior, animated) });
                }
                else if (typeof top === 'number') {
                    scrollRef.current.scrollTop = top;
                }
                // Update data by manual update
                scrollDistanceFromBottomRef.current = Math.max(0, scrollHeight - scrollTop - clientHeight);
                setIsScrollBottomReached(scrollDistanceFromBottomRef.current === 0);
                if (resolve)
                    resolve();
            }, lazy);
        }));
        return function () {
            unsubscribes.forEach(function (_a) {
                var remove = _a.remove;
                return remove();
            });
        };
    }, [behavior]);
    // Update data by scroll events
    useOnScrollPositionChangeDetectorWithRef(scrollRef, {
        onReachedTop: function (_a) {
            var distanceFromBottom = _a.distanceFromBottom;
            setIsScrollBottomReached(false);
            scrollDistanceFromBottomRef.current = distanceFromBottom;
        },
        onInBetween: function (_a) {
            var distanceFromBottom = _a.distanceFromBottom;
            setIsScrollBottomReached(false);
            scrollDistanceFromBottomRef.current = distanceFromBottom;
        },
        onReachedBottom: function (_a) {
            var distanceFromBottom = _a.distanceFromBottom;
            setIsScrollBottomReached(true);
            scrollDistanceFromBottomRef.current = distanceFromBottom;
        },
    });
    return {
        scrollRef: scrollRef,
        scrollPubSub: scrollPubSub,
        isScrollBottomReached: isScrollBottomReached,
        setIsScrollBottomReached: setIsScrollBottomReached,
        scrollDistanceFromBottomRef: scrollDistanceFromBottomRef,
    };
}

var pass = function (value) { return value; };
/**
 * @description This hook controls common processes related to message sending, updating.
 * */
function useMessageActions(params) {
    var _this = this;
    var _a = params.onBeforeSendUserMessage, onBeforeSendUserMessage = _a === void 0 ? pass : _a, _b = params.onBeforeSendFileMessage, onBeforeSendFileMessage = _b === void 0 ? pass : _b, _c = params.onBeforeUpdateUserMessage, onBeforeUpdateUserMessage = _c === void 0 ? pass : _c, _d = params.onBeforeSendVoiceMessage, onBeforeSendVoiceMessage = _d === void 0 ? pass : _d, _e = params.onBeforeSendMultipleFilesMessage, onBeforeSendMultipleFilesMessage = _e === void 0 ? pass : _e, sendFileMessage = params.sendFileMessage, sendMultipleFilesMessage = params.sendMultipleFilesMessage, sendUserMessage = params.sendUserMessage, updateUserMessage = params.updateUserMessage, scrollToBottom = params.scrollToBottom, quoteMessage = params.quoteMessage, replyType = params.replyType;
    var buildInternalMessageParams = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (basicParams) {
        var messageParams = __assign({}, basicParams);
        if (params.quoteMessage && replyType !== 'NONE') {
            messageParams.isReplyToChannel = true;
            messageParams.parentMessageId = quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId;
        }
        return messageParams;
    }, [replyType, quoteMessage]);
    return {
        sendUserMessage: Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (params) { return __awaiter(_this, void 0, void 0, function () {
            var internalParams, processedParams;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        internalParams = buildInternalMessageParams(params);
                        return [4 /*yield*/, onBeforeSendUserMessage(internalParams)];
                    case 1:
                        processedParams = _a.sent();
                        return [2 /*return*/, sendUserMessage(processedParams, function () { return scrollToBottom(); })];
                }
            });
        }); }, [buildInternalMessageParams, sendUserMessage, scrollToBottom]),
        sendFileMessage: Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (params) { return __awaiter(_this, void 0, void 0, function () {
            var internalParams, processedParams;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        internalParams = buildInternalMessageParams(params);
                        return [4 /*yield*/, onBeforeSendFileMessage(internalParams)];
                    case 1:
                        processedParams = _a.sent();
                        return [2 /*return*/, sendFileMessage(processedParams, function () { return scrollToBottom(); })];
                }
            });
        }); }, [buildInternalMessageParams, sendFileMessage, scrollToBottom]),
        sendMultipleFilesMessage: Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (params) { return __awaiter(_this, void 0, void 0, function () {
            var internalParams, processedParams;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        internalParams = buildInternalMessageParams(params);
                        return [4 /*yield*/, onBeforeSendMultipleFilesMessage(internalParams)];
                    case 1:
                        processedParams = _a.sent();
                        return [2 /*return*/, sendMultipleFilesMessage(processedParams, function () { return scrollToBottom(); })];
                }
            });
        }); }, [buildInternalMessageParams, sendMultipleFilesMessage, scrollToBottom]),
        sendVoiceMessage: Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (params, duration) { return __awaiter(_this, void 0, void 0, function () {
            var internalParams, processedParams;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        internalParams = buildInternalMessageParams(__assign(__assign({}, params), { fileName: bundle_DhBuJR0w["n" /* g */], mimeType: bundle_DhBuJR0w["o" /* h */], metaArrays: [
                                new _bundle_dc8db3c3_je({
                                    key: bundle_DhBuJR0w["d" /* M */],
                                    value: ["".concat(duration)],
                                }),
                                new _bundle_dc8db3c3_je({
                                    key: bundle_DhBuJR0w["p" /* i */],
                                    value: [bundle_DhBuJR0w["q" /* j */]],
                                }),
                            ] }));
                        return [4 /*yield*/, onBeforeSendVoiceMessage(internalParams)];
                    case 1:
                        processedParams = _a.sent();
                        return [2 /*return*/, sendFileMessage(processedParams, function () { return scrollToBottom(); })];
                }
            });
        }); }, [buildInternalMessageParams, sendFileMessage, scrollToBottom]),
        updateUserMessage: Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (messageId, params) { return __awaiter(_this, void 0, void 0, function () {
            var internalParams, processedParams;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        internalParams = buildInternalMessageParams(params);
                        return [4 /*yield*/, onBeforeUpdateUserMessage(internalParams)];
                    case 1:
                        processedParams = _a.sent();
                        return [2 /*return*/, updateUserMessage(messageId, processedParams)];
                }
            });
        }); }, [buildInternalMessageParams, updateUserMessage]),
    };
}

/**
 * @description This hook is designed to prevent scroll flickering caused by duplicate calls of onEndReached and onTopReached.
 * It controls the loading of messages to ensure a single request for message retrieval.
 * */
var usePreventDuplicateRequest = function () {
    var context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])({ locked: false, count: 0 }).current;
    return {
        lock: function () {
            context.locked = true;
        },
        run: function (callback) {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            if (context.locked && context.count > 0)
                                return [2 /*return*/];
                            _b.label = 1;
                        case 1:
                            _b.trys.push([1, 3, , 4]);
                            context.count++;
                            return [4 /*yield*/, callback()];
                        case 2:
                            _b.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            _b.sent();
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            });
        },
        release: function () {
            context.locked = false;
            context.count = 0;
        },
    };
};

var GroupChannelContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var GroupChannelProvider = function (props) {
    var _a, _b, _c;
    var channelUrl = props.channelUrl, children = props.children, moduleReactionEnabled = props.isReactionEnabled, moduleReplyType = props.replyType, moduleThreadReplySelectType = props.threadReplySelectType, _d = props.isMessageGroupingEnabled, isMessageGroupingEnabled = _d === void 0 ? true : _d, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, showSearchIcon = props.showSearchIcon, _e = props.disableMarkAsRead, disableMarkAsRead = _e === void 0 ? false : _e, _f = props.scrollBehavior, scrollBehavior = _f === void 0 ? 'auto' : _f, startingPoint = props.startingPoint, _animatedMessageId = props.animatedMessageId, messageListQueryParams = props.messageListQueryParams, onBeforeSendUserMessage = props.onBeforeSendUserMessage, onBeforeSendFileMessage = props.onBeforeSendFileMessage, onBeforeSendVoiceMessage = props.onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage = props.onBeforeSendMultipleFilesMessage, onBeforeUpdateUserMessage = props.onBeforeUpdateUserMessage, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, onMessageAnimated = props.onMessageAnimated, onBackClick = props.onBackClick, onChatHeaderActionClick = props.onChatHeaderActionClick, onReplyInThreadClick = props.onReplyInThreadClick, onSearchClick = props.onSearchClick, onQuoteMessageClick = props.onQuoteMessageClick, renderUserMentionItem = props.renderUserMentionItem;
    // Global context
    var _g = useSendbirdStateContext(), config = _g.config, stores = _g.stores;
    var sdkStore = stores.sdkStore;
    var markAsReadScheduler = config.markAsReadScheduler, logger = config.logger;
    // State
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), quoteMessage = _h[0], setQuoteMessage = _h[1];
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), animatedMessageId = _j[0], setAnimatedMessageId = _j[1];
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), currentChannel = _k[0], setCurrentChannel = _k[1];
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), fetchChannelError = _l[0], setFetchChannelError = _l[1];
    // Ref
    var _m = useMessageListScroll(scrollBehavior), scrollRef = _m.scrollRef, scrollPubSub = _m.scrollPubSub, scrollDistanceFromBottomRef = _m.scrollDistanceFromBottomRef, isScrollBottomReached = _m.isScrollBottomReached, setIsScrollBottomReached = _m.setIsScrollBottomReached;
    var messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var toggleReaction = useToggleReactionCallback(currentChannel, logger);
    var replyType = getCaseResolvedReplyType(moduleReplyType !== null && moduleReplyType !== void 0 ? moduleReplyType : config.groupChannel.replyType).upperCase;
    var threadReplySelectType = getCaseResolvedThreadReplySelectType(moduleThreadReplySelectType !== null && moduleThreadReplySelectType !== void 0 ? moduleThreadReplySelectType : config.groupChannel.threadReplySelectType).upperCase;
    var chatReplyType = useIIFE(function () {
        if (replyType === 'NONE')
            return _bundle_0b1520ed["Fb" /* ax */].NONE;
        return _bundle_0b1520ed["Fb" /* ax */].ONLY_REPLY_TO_CHANNEL;
    });
    var isReactionEnabled = getIsReactionEnabled({
        channel: currentChannel,
        config: config,
        moduleLevel: moduleReactionEnabled,
    });
    var nicknamesMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { var _a; return new Map(((_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members) !== null && _a !== void 0 ? _a : []).map(function (_a) {
        var userId = _a.userId, nickname = _a.nickname;
        return [userId, nickname];
    })); }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members]);
    var preventDuplicateRequest = usePreventDuplicateRequest();
    var messageDataSource = useGroupChannelMessages(sdkStore.sdk, currentChannel, {
        startingPoint: startingPoint,
        replyType: chatReplyType,
        collectionCreator: getCollectionCreator(currentChannel, messageListQueryParams),
        shouldCountNewMessages: function () { return !isScrollBottomReached; },
        markAsRead: function (channels) {
            // isScrollBottomReached is a state that is updated after the render is completed.
            // So, we use scrollDistanceFromBottomRef to check quickly if the scroll is at the bottom.
            if (!disableMarkAsRead && scrollDistanceFromBottomRef.current <= bundle_DhBuJR0w["f" /* S */]) {
                channels.forEach(function (it) { return markAsReadScheduler.push(it); });
            }
        },
        onMessagesReceived: function () {
            if (isScrollBottomReached && isContextMenuClosed()) {
                scrollPubSub.publish('scrollToBottom', {});
            }
        },
        onChannelDeleted: function () {
            setCurrentChannel(null);
            setFetchChannelError(null);
        },
        onCurrentUserBanned: function () {
            setCurrentChannel(null);
            setFetchChannelError(null);
        },
        onChannelUpdated: function (channel) { return setCurrentChannel(channel); },
        logger: logger,
    });
    useOnScrollPositionChangeDetectorWithRef(scrollRef, {
        onReachedTop: function () {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            preventDuplicateRequest.lock();
                            return [4 /*yield*/, preventDuplicateRequest.run(function () { return __awaiter(_this, void 0, void 0, function () {
                                    var prevViewInfo;
                                    var _a, _b;
                                    return __generator(this, function (_c) {
                                        switch (_c.label) {
                                            case 0:
                                                if (!messageDataSource.hasPrevious())
                                                    return [2 /*return*/];
                                                prevViewInfo = { scrollTop: (_a = scrollRef.current) === null || _a === void 0 ? void 0 : _a.scrollTop, scrollHeight: (_b = scrollRef.current) === null || _b === void 0 ? void 0 : _b.scrollHeight };
                                                return [4 /*yield*/, messageDataSource.loadPrevious()];
                                            case 1:
                                                _c.sent();
                                                // FIXME: We need a good way to detect right after the rendering of the screen instead of using setTimeout.
                                                setTimeout(function () {
                                                    var _a, _b;
                                                    var nextViewInfo = { scrollHeight: (_a = scrollRef.current) === null || _a === void 0 ? void 0 : _a.scrollHeight };
                                                    if (prevViewInfo.scrollHeight && nextViewInfo.scrollHeight) {
                                                        var viewUpdated = prevViewInfo.scrollHeight < nextViewInfo.scrollHeight;
                                                        if (viewUpdated) {
                                                            var bottomOffset = prevViewInfo.scrollHeight - ((_b = prevViewInfo.scrollTop) !== null && _b !== void 0 ? _b : 0);
                                                            scrollPubSub.publish('scroll', { top: nextViewInfo.scrollHeight - bottomOffset, lazy: false, animated: false });
                                                        }
                                                    }
                                                });
                                                return [2 /*return*/];
                                        }
                                    });
                                }); })];
                        case 1:
                            _a.sent();
                            preventDuplicateRequest.release();
                            return [2 /*return*/];
                    }
                });
            });
        },
        onReachedBottom: function () {
            return __awaiter(this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            preventDuplicateRequest.lock();
                            return [4 /*yield*/, preventDuplicateRequest.run(function () { return __awaiter(_this, void 0, void 0, function () {
                                    var prevViewInfo;
                                    var _a, _b;
                                    return __generator(this, function (_c) {
                                        switch (_c.label) {
                                            case 0:
                                                if (!messageDataSource.hasNext())
                                                    return [2 /*return*/];
                                                prevViewInfo = { scrollTop: (_a = scrollRef.current) === null || _a === void 0 ? void 0 : _a.scrollTop, scrollHeight: (_b = scrollRef.current) === null || _b === void 0 ? void 0 : _b.scrollHeight };
                                                return [4 /*yield*/, messageDataSource.loadNext()];
                                            case 1:
                                                _c.sent();
                                                setTimeout(function () {
                                                    var _a;
                                                    var nextViewInfo = { scrollHeight: (_a = scrollRef.current) === null || _a === void 0 ? void 0 : _a.scrollHeight };
                                                    if (prevViewInfo.scrollHeight && nextViewInfo.scrollHeight) {
                                                        var viewUpdated = prevViewInfo.scrollHeight < nextViewInfo.scrollHeight;
                                                        if (viewUpdated) {
                                                            scrollPubSub.publish('scroll', { top: prevViewInfo.scrollTop, lazy: false, animated: false });
                                                        }
                                                    }
                                                });
                                                return [2 /*return*/];
                                        }
                                    });
                                }); })];
                        case 1:
                            _a.sent();
                            preventDuplicateRequest.release();
                            if (currentChannel && !messageDataSource.hasNext()) {
                                messageDataSource.resetNewMessages();
                                if (!disableMarkAsRead)
                                    markAsReadScheduler.push(currentChannel);
                            }
                            return [2 /*return*/];
                    }
                });
            });
        },
    });
    // SideEffect: Fetch and set to current channel by channelUrl prop.
    useAsyncEffect(function () { return __awaiter(void 0, void 0, void 0, function () {
        var channel, error_1;
        var _a;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (!(sdkStore.initialized && channelUrl)) return [3 /*break*/, 5];
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, 3, 4, 5]);
                    return [4 /*yield*/, sdkStore.sdk.groupChannel.getChannel(channelUrl)];
                case 2:
                    channel = _b.sent();
                    setCurrentChannel(channel);
                    setFetchChannelError(null);
                    return [3 /*break*/, 5];
                case 3:
                    error_1 = _b.sent();
                    setCurrentChannel(null);
                    setFetchChannelError(error_1);
                    (_a = logger === null || logger === void 0 ? void 0 : logger.error) === null || _a === void 0 ? void 0 : _a.call(logger, 'GroupChannelProvider: error when fetching channel', error_1);
                    return [3 /*break*/, 5];
                case 4:
                    // Reset states when channel changes
                    setQuoteMessage(null);
                    setAnimatedMessageId(null);
                    return [7 /*endfinally*/];
                case 5: return [2 /*return*/];
            }
        });
    }); }, [sdkStore.initialized, sdkStore.sdk, channelUrl]);
    // SideEffect: Scroll to the bottom
    //  - On the initialized message list
    //  - On messages sent from the thread
    useAsyncLayoutEffect(function () { return __awaiter(void 0, void 0, void 0, function () {
        var onSentMessageFromOtherModule, subscribes;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!messageDataSource.initialized) return [3 /*break*/, 2];
                    // it prevents message load from previous/next before scroll to bottom finished.
                    preventDuplicateRequest.lock();
                    return [4 /*yield*/, preventDuplicateRequest.run(function () {
                            return new Promise(function (resolve) {
                                scrollPubSub.publish('scrollToBottom', { resolve: resolve, animated: false });
                            });
                        })];
                case 1:
                    _a.sent();
                    preventDuplicateRequest.release();
                    _a.label = 2;
                case 2:
                    onSentMessageFromOtherModule = function (data) {
                        if (data.channel.url === channelUrl)
                            scrollPubSub.publish('scrollToBottom', {});
                    };
                    subscribes = [
                        config.pubSub.subscribe(pubSubTopics.SEND_USER_MESSAGE, onSentMessageFromOtherModule),
                        config.pubSub.subscribe(pubSubTopics.SEND_FILE_MESSAGE, onSentMessageFromOtherModule),
                    ];
                    return [2 /*return*/, function () {
                            subscribes.forEach(function (subscribe) { return subscribe.remove(); });
                            scrollPubSub.publish('scrollToBottom', { animated: false });
                        }];
            }
        });
    }); }, [messageDataSource.initialized, channelUrl]);
    // SideEffect: Reset MessageCollection with startingPoint prop.
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (typeof startingPoint === 'number') {
            // We do not handle animation for message search here.
            // Please update the animatedMessageId prop to trigger the animation.
            scrollToMessage(startingPoint, 0, false, false);
        }
    }, [startingPoint]);
    // SideEffect: Update animatedMessageId prop to state.
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (_animatedMessageId)
            setAnimatedMessageId(_animatedMessageId);
    }, [_animatedMessageId]);
    var scrollToBottom = usePreservedCallback(function (animated) { return __awaiter(void 0, void 0, void 0, function () {
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!scrollRef.current)
                        return [2 /*return*/];
                    setAnimatedMessageId(null);
                    setIsScrollBottomReached(true);
                    if (!(config.isOnline && messageDataSource.hasNext())) return [3 /*break*/, 2];
                    return [4 /*yield*/, messageDataSource.resetWithStartingPoint(Number.MAX_SAFE_INTEGER)];
                case 1:
                    _a.sent();
                    scrollPubSub.publish('scrollToBottom', { animated: animated });
                    return [3 /*break*/, 3];
                case 2:
                    scrollPubSub.publish('scrollToBottom', { animated: animated });
                    _a.label = 3;
                case 3:
                    if (currentChannel && !messageDataSource.hasNext()) {
                        messageDataSource.resetNewMessages();
                        if (!disableMarkAsRead)
                            markAsReadScheduler.push(currentChannel);
                    }
                    return [2 /*return*/];
            }
        });
    }); });
    var scrollToMessage = usePreservedCallback(function (createdAt, messageId, messageFocusAnimated, scrollAnimated) { return __awaiter(void 0, void 0, void 0, function () {
        var element, parentNode, clickHandler, message, topOffset;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    element = scrollRef.current;
                    parentNode = element === null || element === void 0 ? void 0 : element.parentNode;
                    clickHandler = {
                        activate: function () {
                            if (!element || !parentNode)
                                return;
                            element.style.pointerEvents = 'auto';
                            parentNode.style.cursor = 'auto';
                        },
                        deactivate: function () {
                            if (!element || !parentNode)
                                return;
                            element.style.pointerEvents = 'none';
                            parentNode.style.cursor = 'wait';
                        },
                    };
                    clickHandler.deactivate();
                    setAnimatedMessageId(null);
                    message = messageDataSource.messages.find(function (it) { return it.messageId === messageId || it.createdAt === createdAt; });
                    if (!message) return [3 /*break*/, 1];
                    topOffset = getMessageTopOffset(message.createdAt);
                    if (topOffset)
                        scrollPubSub.publish('scroll', { top: topOffset, animated: scrollAnimated });
                    if (messageFocusAnimated !== null && messageFocusAnimated !== void 0 ? messageFocusAnimated : true)
                        setAnimatedMessageId(messageId);
                    return [3 /*break*/, 3];
                case 1: return [4 /*yield*/, messageDataSource.resetWithStartingPoint(createdAt)];
                case 2:
                    _a.sent();
                    setTimeout(function () {
                        var topOffset = getMessageTopOffset(createdAt);
                        if (topOffset)
                            scrollPubSub.publish('scroll', { top: topOffset, lazy: false, animated: scrollAnimated });
                        if (messageFocusAnimated !== null && messageFocusAnimated !== void 0 ? messageFocusAnimated : true)
                            setAnimatedMessageId(messageId);
                    });
                    _a.label = 3;
                case 3:
                    clickHandler.activate();
                    return [2 /*return*/];
            }
        });
    }); });
    var messageActions = useMessageActions(__assign(__assign(__assign({}, props), messageDataSource), { scrollToBottom: scrollToBottom, quoteMessage: quoteMessage, replyType: replyType }));
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelContext.Provider, { value: __assign(__assign({ 
            // # Props
            channelUrl: channelUrl, isReactionEnabled: isReactionEnabled, isMessageGroupingEnabled: isMessageGroupingEnabled, isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled, showSearchIcon: showSearchIcon !== null && showSearchIcon !== void 0 ? showSearchIcon : config.groupChannelSettings.enableMessageSearch, replyType: replyType, threadReplySelectType: threadReplySelectType, disableMarkAsRead: disableMarkAsRead, scrollBehavior: scrollBehavior, 
            // # Custom Props
            messageListQueryParams: messageListQueryParams, 
            // ## Message
            onBeforeSendUserMessage: onBeforeSendUserMessage, onBeforeSendFileMessage: onBeforeSendFileMessage, onBeforeSendVoiceMessage: onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage: onBeforeSendMultipleFilesMessage, onBeforeUpdateUserMessage: onBeforeUpdateUserMessage, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage, 
            // ## Focusing
            onMessageAnimated: onMessageAnimated, 
            // ## Click
            onBackClick: onBackClick, onChatHeaderActionClick: onChatHeaderActionClick, onReplyInThreadClick: onReplyInThreadClick, onSearchClick: onSearchClick, onQuoteMessageClick: onQuoteMessageClick, 
            // ## Custom render
            renderUserMentionItem: renderUserMentionItem, 
            // Internal Interface
            currentChannel: currentChannel, fetchChannelError: fetchChannelError, nicknamesMap: nicknamesMap, scrollRef: scrollRef, scrollDistanceFromBottomRef: scrollDistanceFromBottomRef, scrollPubSub: scrollPubSub, messageInputRef: messageInputRef, quoteMessage: quoteMessage, setQuoteMessage: setQuoteMessage, animatedMessageId: animatedMessageId, setAnimatedMessageId: setAnimatedMessageId, isScrollBottomReached: isScrollBottomReached, setIsScrollBottomReached: setIsScrollBottomReached, scrollToBottom: scrollToBottom, scrollToMessage: scrollToMessage, toggleReaction: toggleReaction }, messageDataSource), messageActions) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { disableUserProfile: (_a = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _a !== void 0 ? _a : config === null || config === void 0 ? void 0 : config.disableUserProfile, renderUserProfile: (_b = props === null || props === void 0 ? void 0 : props.renderUserProfile) !== null && _b !== void 0 ? _b : config === null || config === void 0 ? void 0 : config.renderUserProfile, onUserProfileMessage: (_c = props === null || props === void 0 ? void 0 : props.onUserProfileMessage) !== null && _c !== void 0 ? _c : config === null || config === void 0 ? void 0 : config.onUserProfileMessage }, children)));
};
var useGroupChannelContext = function () {
    var context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(GroupChannelContext);
    if (!context)
        throw new Error('GroupChannelContext not found. Use within the GroupChannel module.');
    return context;
};
function getCollectionCreator(groupChannel, messageListQueryParams) {
    return function (defaultParams) {
        var params = __assign(__assign(__assign({}, defaultParams), { prevResultLimit: 30, nextResultLimit: 30 }), messageListQueryParams);
        return groupChannel.createMessageCollection(__assign(__assign({}, params), { filter: new bs(params) }));
    };
}


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/TypingIndicator.js











var TypingIndicatorText = function (_a) {
    var members = _a.members;
    function getText() {
        var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
        if (!members || members.length === 0) {
            return '';
        }
        if (members && members.length === 1) {
            return "".concat(members[0].nickname, " ").concat(stringSet.TYPING_INDICATOR__IS_TYPING);
        }
        if (members && members.length === 2) {
            return "".concat(members[0].nickname, " ").concat(stringSet.TYPING_INDICATOR__AND, " ").concat(members[1].nickname, " ").concat(stringSet.TYPING_INDICATOR__ARE_TYPING);
        }
        return stringSet.TYPING_INDICATOR__MULTIPLE_TYPING;
    }
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, getText());
};
var TypingIndicator = function (_a) {
    var _b, _c, _d;
    var channelUrl = _a.channelUrl;
    var globalStore = useSendbirdStateContext();
    var sb = (_c = (_b = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _b === void 0 ? void 0 : _b.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;
    var logger = (_d = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config) === null || _d === void 0 ? void 0 : _d.logger;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(uuidv4()), handlerId = _e[0], setHandlerId = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), typingMembers = _f[0], setTypingMembers = _f[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        if ((_a = sb === null || sb === void 0 ? void 0 : sb.groupChannel) === null || _a === void 0 ? void 0 : _a.addGroupChannelHandler) {
            sb.groupChannel.removeGroupChannelHandler(handlerId);
            var newHandlerId = uuidv4();
            var handler = new groupChannel_We({
                onTypingStatusUpdated: function (groupChannel) {
                    // there is a possible warning in here - setState called after unmount
                    logger.info('Channel > Typing Indicator: onTypingStatusUpdated', groupChannel);
                    if (groupChannel.url === channelUrl) {
                        var members = groupChannel.getTypingUsers();
                        setTypingMembers(members);
                    }
                },
            });
            sb.groupChannel.addGroupChannelHandler(newHandlerId, handler);
            setHandlerId(newHandlerId);
        }
        return function () {
            var _a;
            setTypingMembers([]);
            if ((_a = sb === null || sb === void 0 ? void 0 : sb.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler) {
                sb.groupChannel.removeGroupChannelHandler(handlerId);
            }
        };
    }, [channelUrl]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-conversation__footer__typing-indicator__text", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorText, { members: typingMembers })));
};


//# sourceMappingURL=TypingIndicator.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ConnectionStatus.js









function ConnectionStatus() {
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-connection-status" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.TRYING_TO_CONNECT),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DISCONNECTED, fillColor: IconColors.SENT, width: "14px", height: "14px" })));
}


//# sourceMappingURL=ConnectionStatus.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Loader.js





function Loader(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, _c = _a.width, width = _c === void 0 ? '26px' : _c, _d = _a.height, height = _d === void 0 ? '26px' : _d, children = _a.children;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-loader',
        ], false).join(' '), style: {
            width: typeof width === 'string' ? width : "".concat(width, "px"),
            height: typeof height === 'string' ? height : "".concat(height, "px"),
        } }, children
        || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SPINNER, width: "26px", height: "26px" }))));
}


//# sourceMappingURL=Loader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/PlaceHolder.js










var PlaceHolderTypes = {
    LOADING: 'LOADING',
    NO_CHANNELS: 'NO_CHANNELS',
    NO_MESSAGES: 'NO_MESSAGES',
    WRONG: 'WRONG',
    SEARCH_IN: 'SEARCH_IN',
    SEARCHING: 'SEARCHING',
    NO_RESULTS: 'NO_RESULTS',
};
function PlaceHolder(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, type = _a.type, iconSize = _a.iconSize, _c = _a.searchInString, searchInString = _c === void 0 ? '' : _c, retryToConnect = _a.retryToConnect;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-place-holder',
        ], false).join(' ') },
        type === PlaceHolderTypes.LOADING && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { width: iconSize || '48px', height: iconSize || '48px' },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: iconSize || '48px', height: iconSize || '48px' }))),
        (type === PlaceHolderTypes.NO_CHANNELS
            || type === PlaceHolderTypes.NO_MESSAGES
            || type === PlaceHolderTypes.WRONG) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-place-holder__body" },
            type === PlaceHolderTypes.NO_CHANNELS && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-place-holder__body__icon", type: IconTypes.CHAT, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || '64px', height: iconSize || '64px' })),
            type === PlaceHolderTypes.WRONG && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-place-holder__body__icon", type: IconTypes.ERROR, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || '64px', height: iconSize || '64px' })),
            type === PlaceHolderTypes.NO_MESSAGES && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-place-holder__body__icon", type: IconTypes.MESSAGE, fillColor: IconColors.ON_BACKGROUND_3, width: iconSize || '64px', height: iconSize || '64px' })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-holder__body__text", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 },
                type === PlaceHolderTypes.NO_CHANNELS && (stringSet.PLACE_HOLDER__NO_CHANNEL),
                type === PlaceHolderTypes.WRONG && (stringSet.PLACE_HOLDER__WRONG),
                type === PlaceHolderTypes.NO_MESSAGES && (stringSet.PLACE_HOLDER__NO_MESSAGES)),
            retryToConnect && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-place-holder__body__reconnect", role: "button", onClick: retryToConnect, onKeyPress: retryToConnect, tabIndex: 0 },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-place-holder__body__reconnect__icon", type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: "20px", height: "20px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-holder__body__reconnect__text", type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet.PLACE_HOLDER__RETRY_TO_CONNECT))))),
        (type === PlaceHolderTypes.NO_RESULTS
            || type === PlaceHolderTypes.SEARCH_IN
            || type === PlaceHolderTypes.SEARCHING) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-place-holder__body--align-top" },
            type === PlaceHolderTypes.SEARCH_IN && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-place-holder__body--align-top__text" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-holder__body--align-top__text__search-in", type: LabelTypography.BUTTON_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.SEARCH_IN),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-holder__body--align-top__text__channel-name", type: LabelTypography.BUTTON_2, color: LabelColors.PRIMARY }, "'".concat(searchInString)),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-holder__body--align-top__text__quote", type: LabelTypography.BUTTON_2, color: LabelColors.PRIMARY }, '\''))),
            type === PlaceHolderTypes.SEARCHING && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-hlder__body--align-top__searching", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet.SEARCHING)),
            type === PlaceHolderTypes.NO_RESULTS && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-place-hlder__body--align-top__no-result", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet.NO_SEARCHED_MESSAGE))))));
}


//# sourceMappingURL=PlaceHolder.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BRZDoZIQ.js








var GroupChannelUIView = function (props) {
    var _a, _b, _c, _d;
    var isLoading = props.isLoading, isInvalid = props.isInvalid, channelUrl = props.channelUrl;
    var _e = deleteNullish(props), renderChannelHeader = _e.renderChannelHeader, renderMessageList = _e.renderMessageList, renderMessageInput = _e.renderMessageInput, renderTypingIndicator = _e.renderTypingIndicator, renderPlaceholderLoader = _e.renderPlaceholderLoader, renderPlaceholderInvalid = _e.renderPlaceholderInvalid;
    var _f = useSendbirdStateContext(), stores = _f.stores, config = _f.config;
    var sdkError = (_a = stores === null || stores === void 0 ? void 0 : stores.sdkStore) === null || _a === void 0 ? void 0 : _a.error;
    var logger = config.logger, isOnline = config.isOnline;
    // Note: This is not a loading status of the message list.
    //  It is just for custom props from the Channel module and is not used in the GroupChannel module. (We should remove this in v4)
    if (isLoading) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation" }, (renderPlaceholderLoader === null || renderPlaceholderLoader === void 0 ? void 0 : renderPlaceholderLoader()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING }));
    }
    if (!channelUrl) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation" }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.NO_CHANNELS })));
    }
    if (isInvalid) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation" }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG }));
    }
    if (sdkError) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation" }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG, retryToConnect: function () {
                logger.info('Channel: reconnecting');
                // reconnect();
            } }))));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation" }, renderChannelHeader === null || renderChannelHeader === void 0 ? void 0 :
        renderChannelHeader({ className: 'sendbird-conversation__channel-header' }), renderMessageList === null || renderMessageList === void 0 ? void 0 :
        renderMessageList(props),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__footer" }, renderMessageInput === null || renderMessageInput === void 0 ? void 0 :
            renderMessageInput(),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__footer__typing-indicator" },
                (renderTypingIndicator === null || renderTypingIndicator === void 0 ? void 0 : renderTypingIndicator())
                    || (((_b = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _b === void 0 ? void 0 : _b.enableTypingIndicator) && ((_d = (_c = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _c === void 0 ? void 0 : _c.typingIndicatorTypes) === null || _d === void 0 ? void 0 : _d.has(TypingIndicatorType.Text)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicator, { channelUrl: channelUrl }))),
                !isOnline && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ConnectionStatus, null)))));
};


//# sourceMappingURL=bundle-BRZDoZIQ.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ImageRenderer.js




var numberToPx = (function (value) {
    if (value === null)
        return undefined;
    return typeof value === 'number' ? "".concat(value, "px") : value;
});

function getDynamicMinLengthInPx(sideLength, maxSideLength, defaultMinLength) {
    var _a;
    return "min(".concat(maxSideLength !== null && maxSideLength !== void 0 ? maxSideLength : defaultMinLength, ", ").concat((_a = numberToPx(sideLength)) !== null && _a !== void 0 ? _a : defaultMinLength, ")");
}

function useDynamicSideLength(_a) {
    var width = _a.width, height = _a.height, maxSideLength = _a.maxSideLength, defaultMinLength = _a.defaultMinLength;
    var dynamicMinWidth = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return getDynamicMinLengthInPx(width, maxSideLength, defaultMinLength);
    }, [width]);
    var dynamicMinHeight = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return getDynamicMinLengthInPx(height, maxSideLength, defaultMinLength);
    }, [height]);
    return [dynamicMinWidth, dynamicMinHeight];
}

var useIsElementInViewport = function (elementRef) {
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isVisible = _a[0], setIsVisible = _a[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        var observer = new IntersectionObserver(function (entries) {
            var entry = entries[0];
            if (entry)
                setIsVisible(entry.isIntersecting);
        });
        if (elementRef.current)
            observer.observe(elementRef.current);
        return function () { return observer.disconnect(); };
    }, [elementRef.current]);
    return isVisible;
};

var useLazyImageLoader = function (elementRef) {
    var isLoaded = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(false);
    var isVisible = useIsElementInViewport(elementRef);
    if (isVisible)
        isLoaded.current = true;
    return isLoaded.current;
};

function getBorderRadiusForImageRenderer(circle, borderRadius) {
    if (circle === void 0) { circle = false; }
    if (borderRadius === void 0) { borderRadius = null; }
    return circle ? '50%' : numberToPx(borderRadius);
}
function getBorderRadiusForMultipleImageRenderer(borderRadius, index, totalCount) {
    var value = typeof borderRadius === 'string' ? parseInt(borderRadius, 10) : borderRadius;
    var lastIndex = totalCount - 1;
    var topLeft = index === 0 ? value * 2 : value;
    var topRight = index === 1 ? value * 2 : value;
    var bottomRight = index === lastIndex ? value * 2 : value;
    var bottomLeft = index === lastIndex - 1 ? value * 2 : value;
    return "".concat(topLeft, "px ").concat(topRight, "px ").concat(bottomRight, "px ").concat(bottomLeft, "px");
}
/*
  ImageRenderer displays image with url or source
  it checks if the source exist with img tag first
  if it exists onLoad is called, if not onError is called
  and those properties switch img tag to real purposing element
*/
var ImageRenderer = function (_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, url = _a.url, _c = _a.alt, alt = _c === void 0 ? '' : _c, _d = _a.width, width = _d === void 0 ? null : _d, _e = _a.maxSideLength, maxSideLength = _e === void 0 ? null : _e, _f = _a.height, height = _f === void 0 ? null : _f, _g = _a.circle, circle = _g === void 0 ? false : _g, _h = _a.fixedSize, fixedSize = _h === void 0 ? false : _h, _j = _a.placeHolder, placeHolder = _j === void 0 ? null : _j, _k = _a.defaultComponent, defaultComponent = _k === void 0 ? null : _k, _l = _a.borderRadius, borderRadius = _l === void 0 ? null : _l, _m = _a.onLoad, onLoad = _m === void 0 ? noop : _m, _o = _a.onError, onError = _o === void 0 ? noop : _o, shadeOnHover = _a.shadeOnHover, _p = _a.isUploaded, isUploaded = _p === void 0 ? true : _p;
    var ref = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var isLoaded = useLazyImageLoader(ref);
    var internalUrl = isLoaded ? url : null;
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), defaultComponentVisible = _q[0], setDefaultComponentVisible = _q[1];
    var _r = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(true), placeholderVisible = _r[0], setPlaceholderVisible = _r[1];
    var _s = useDynamicSideLength({
        width: width,
        height: height,
        maxSideLength: maxSideLength,
        defaultMinLength: '400px',
    }), dynamicMinWidth = _s[0], dynamicMinHeight = _s[1];
    var renderPlaceholder = function () {
        if (typeof placeHolder === 'function') {
            return placeHolder({
                style: {
                    width: '100%',
                    minWidth: dynamicMinWidth,
                    maxWidth: fixedSize ? dynamicMinWidth : '400px',
                    height: dynamicMinHeight,
                    position: 'absolute',
                    display: 'flex',
                    justifyContent: 'center',
                    alignItems: 'center',
                },
            });
        }
        return placeHolder;
    };
    var renderDefault = function () {
        if (typeof defaultComponent === 'function')
            return defaultComponent();
        return defaultComponent;
    };
    var renderImage = function () {
        var backgroundStyle = internalUrl ? {
            backgroundRepeat: 'no-repeat',
            backgroundPosition: 'center',
            backgroundSize: 'cover',
            backgroundImage: "url(".concat(internalUrl, ")"),
        } : {};
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-image-renderer__image", style: __assign({ width: '100%', minWidth: dynamicMinWidth, maxWidth: fixedSize ? dynamicMinWidth : '400px', height: dynamicMinHeight, position: 'absolute', borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) }, backgroundStyle) }));
    };
    return (dynamicMinWidth
        && dynamicMinHeight && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: ref, className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), ['sendbird-image-renderer'], false).join(' '), style: {
            width: '100%',
            minWidth: dynamicMinWidth,
            maxWidth: fixedSize ? dynamicMinWidth : '400px',
            height: dynamicMinHeight,
        } },
        placeholderVisible && renderPlaceholder(),
        (!internalUrl || defaultComponentVisible) ? renderDefault() : renderImage(),
        shadeOnHover && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-multiple-files-image-renderer__image-cover", style: __assign({ borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) }, (isUploaded ? {} : { display: 'inline-flex' })) })),
        internalUrl && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(HiddenImageLoader, { src: internalUrl, alt: alt, onLoadStart: function () {
                setPlaceholderVisible(true);
                setDefaultComponentVisible(false);
            }, onLoad: function () {
                setPlaceholderVisible(false);
                setDefaultComponentVisible(false);
                onLoad();
            }, onError: function () {
                setPlaceholderVisible(false);
                setDefaultComponentVisible(true);
                onError();
            } }))));
};
// Image is loaded as a background-image, but this component serves as a hidden component to receive events indicating whether the image has actually been loaded.
var HiddenImageLoader = function (props) {
    var src = props.src, alt = props.alt, _a = props.onLoadStart, onLoadStart = _a === void 0 ? noop : _a, _b = props.onLoad, onLoad = _b === void 0 ? noop : _b, _c = props.onError, onError = _c === void 0 ? noop : _c;
    var reloadCtx = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])({
        currSrc: src,
        prevSrc: src,
        loadFailure: false,
    });
    if (reloadCtx.current.currSrc !== src) {
        reloadCtx.current.prevSrc = reloadCtx.current.currSrc;
        reloadCtx.current.currSrc = src;
    }
    // SideEffect: If the image URL has changed or loading has failed, please try again
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        if (src) {
            var sourceChanged = reloadCtx.current.prevSrc !== reloadCtx.current.currSrc;
            var loadFailure = reloadCtx.current.loadFailure;
            if (sourceChanged || loadFailure) {
                onLoadStart();
            }
        }
    }, [src, navigator.onLine]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", { className: "sendbird-image-renderer__hidden-image-loader", src: src, alt: alt, onLoad: function () {
            reloadCtx.current.loadFailure = false;
            onLoad();
        }, onError: function () {
            reloadCtx.current.loadFailure = true;
            onError();
        } }));
};


//# sourceMappingURL=ImageRenderer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Bmk2FVdj.js
var pxToNumber = function (px) {
    if (typeof px === 'number') {
        return px;
    }
    if (typeof px === 'string') {
        var parsed = Number.parseFloat(px);
        if (!Number.isNaN(parsed)) {
            return parsed;
        }
    }
    return NaN;
};


//# sourceMappingURL=bundle-Bmk2FVdj.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BgL9QnGd.js







var AvatarDefault = function (props) {
    var width = props.width, height = props.height, text = props.text;
    var iconWidth = pxToNumber(width);
    var iconHeight = pxToNumber(height);
    if (typeof iconWidth === 'number' && !Number.isNaN(iconWidth)) {
        iconWidth *= 0.575;
    }
    if (typeof iconHeight === 'number' && !Number.isNaN(iconHeight)) {
        iconHeight *= 0.575;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-avatar-img--default', text && 'text'), style: { width: width, height: height } }, text
        ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-avatar-text' }, text)
        : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.USER, fillColor: IconColors.CONTENT, width: iconWidth, height: iconHeight })));
};

var imageRendererClassName = 'sendbird-avatar-img';
var AvatarInner = function (_a) {
    var _b = _a.src, src = _b === void 0 ? '' : _b, _c = _a.alt, alt = _c === void 0 ? '' : _c, height = _a.height, width = _a.width, customDefaultComponent = _a.customDefaultComponent;
    var defaultComponent = function () { return customDefaultComponent
        ? customDefaultComponent({ width: width, height: height })
        : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AvatarDefault, { width: width, height: height }); };
    if (typeof src === 'string') {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src, height: height, width: width, alt: alt, defaultComponent: defaultComponent }));
    }
    if (src && src.length) {
        if (src.length === 1) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height: height, width: width, alt: alt, defaultComponent: defaultComponent }));
        }
        if (src.length === 2) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-avatar--inner__two-child" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height: height, width: width, alt: alt, defaultComponent: defaultComponent }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[1], height: height, width: width, alt: alt, defaultComponent: defaultComponent })));
        }
        if (src.length === 3) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-avatar--inner__three-child--upper" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[0], height: height, width: width, alt: alt, defaultComponent: defaultComponent })),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-avatar--inner__three-child--lower" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[1], height: height, width: width, alt: alt, defaultComponent: defaultComponent }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: src[2], height: height, width: width, alt: alt, defaultComponent: defaultComponent }))));
        }
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-avatar--inner__four-child" }, src.slice(0, 4)
            .map(function (url, index) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: url, height: height, width: width, alt: alt, key: "".concat(url, "-").concat(index), defaultComponent: defaultComponent })); })));
    }
    // default img
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: imageRendererClassName, url: "", height: height, width: width, alt: alt, defaultComponent: defaultComponent }));
};
function Avatar(_a, ref) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, _c = _a.src, src = _c === void 0 ? '' : _c, _d = _a.alt, alt = _d === void 0 ? '' : _d, _e = _a.width, width = _e === void 0 ? '56px' : _e, _f = _a.height, height = _f === void 0 ? '56px' : _f, _g = _a.zIndex, zIndex = _g === void 0 ? 0 : _g, _h = _a.left, left = _h === void 0 ? '' : _h, _j = _a.bottom, bottom = _j === void 0 ? '' : _j, onClick = _a.onClick, customDefaultComponent = _a.customDefaultComponent;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-avatar',
        ], false).join(' '), role: "button", ref: ref, style: {
            height: height,
            width: width,
            zIndex: zIndex,
            left: left,
            bottom: bottom,
        }, onClick: onClick, onKeyDown: onClick, tabIndex: 0 },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AvatarInner, { src: src, width: width, height: height, alt: alt, customDefaultComponent: customDefaultComponent })));
}
var Avatar$1 = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(Avatar);


//# sourceMappingURL=bundle-BgL9QnGd.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-COoyrRF6.js
var DEFAULT_URL_PREFIX = 'https://static.sendbird.com/sample/cover/cover_';
var getOpenChannelAvatar = function (channel) {
    if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {
        return channel.coverUrl;
    }
    return undefined;
};
var getChannelAvatarSource = function (channel, currentUserId) {
    if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {
        if (!(new RegExp("^".concat(DEFAULT_URL_PREFIX)).test(channel.coverUrl))) {
            return channel.coverUrl;
        }
    }
    return ((channel === null || channel === void 0 ? void 0 : channel.members) || [])
        .filter(function (member) { return member.userId !== currentUserId; })
        .map(function (_a) {
        var profileUrl = _a.profileUrl;
        return profileUrl;
    });
};
var generateDefaultAvatar = function (channel) {
    if (channel === null || channel === void 0 ? void 0 : channel.coverUrl) {
        if (new RegExp("^".concat(DEFAULT_URL_PREFIX)).test(channel.coverUrl)) {
            return true;
        }
        return false;
    }
    return true;
};


//# sourceMappingURL=bundle-COoyrRF6.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ChannelAvatar.js









function ChannelAvatar(_a) {
    var channel = _a.channel, userId = _a.userId, theme = _a.theme, _b = _a.width, width = _b === void 0 ? 56 : _b, _c = _a.height, height = _c === void 0 ? 56 : _c;
    var isBroadcast = channel === null || channel === void 0 ? void 0 : channel.isBroadcast;
    var memoizedAvatar = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return (isBroadcast
        ? (generateDefaultAvatar(channel)
            ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-chat-header--default-avatar", style: {
                    width: width,
                    height: height,
                    display: 'flex',
                    justifyContent: 'center',
                    alignItems: 'center',
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.BROADCAST, fillColor: IconColors.CONTENT, width: width * 0.575, height: height * 0.575 })))
            : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-chat-header--avatar--broadcast-channel", src: getChannelAvatarSource(channel, userId), width: width, height: height, alt: channel === null || channel === void 0 ? void 0 : channel.name })))
        : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-chat-header--avatar--group-channel", src: getChannelAvatarSource(channel, userId), width: "".concat(width, "px"), height: "".concat(height, "px"), alt: channel === null || channel === void 0 ? void 0 : channel.name }))); }, [getChannelAvatarSource(channel, userId), theme]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, memoizedAvatar));
}


//# sourceMappingURL=ChannelAvatar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DuBg9tG9.js


var getChannelTitle = function (channel, currentUserId, stringSet) {
    var _a;
    var LABEL_STRING_SET = stringSet || LabelStringSet;
    if (!(channel === null || channel === void 0 ? void 0 : channel.name) && !(channel === null || channel === void 0 ? void 0 : channel.members)) {
        return LABEL_STRING_SET.NO_TITLE;
    }
    if ((channel === null || channel === void 0 ? void 0 : channel.name) && channel.name !== 'Group Channel') {
        return channel.name;
    }
    if (((_a = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a === void 0 ? void 0 : _a.length) === 1) {
        return LABEL_STRING_SET.NO_MEMBERS;
    }
    return channel === null || channel === void 0 ? void 0 : channel.members.filter(function (_a) {
        var userId = _a.userId;
        return userId !== currentUserId;
    }).map(function (_a) {
        var nickname = _a.nickname;
        return (nickname || LABEL_STRING_SET.NO_NAME);
    }).join(', ');
};


//# sourceMappingURL=bundle-DuBg9tG9.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-h8I0AuUK.js
var bundle_h8I0AuUK_Colors;
(function (Colors) {
    Colors["ONBACKGROUND_1"] = "ONBACKGROUND_1";
    Colors["ONBACKGROUND_2"] = "ONBACKGROUND_2";
    Colors["ONBACKGROUND_3"] = "ONBACKGROUND_3";
    Colors["ONBACKGROUND_4"] = "ONBACKGROUND_4";
    Colors["ONCONTENT_1"] = "ONCONTENT_1";
    Colors["ONCONTENT_2"] = "ONCONTENT_2";
    Colors["PRIMARY"] = "PRIMARY";
    Colors["ERROR"] = "ERROR";
})(bundle_h8I0AuUK_Colors || (bundle_h8I0AuUK_Colors = {}));
var bundle_h8I0AuUK_changeColorToClassName = function (color) {
    switch (color) {
        case bundle_h8I0AuUK_Colors.ONBACKGROUND_1: return 'sendbird-color--onbackground-1';
        case bundle_h8I0AuUK_Colors.ONBACKGROUND_2: return 'sendbird-color--onbackground-2';
        case bundle_h8I0AuUK_Colors.ONBACKGROUND_3: return 'sendbird-color--onbackground-3';
        case bundle_h8I0AuUK_Colors.ONBACKGROUND_4: return 'sendbird-color--onbackground-4';
        case bundle_h8I0AuUK_Colors.ONCONTENT_1: return 'sendbird-color--oncontent-1';
        case bundle_h8I0AuUK_Colors.PRIMARY: return 'sendbird-color--primary';
        case bundle_h8I0AuUK_Colors.ERROR: return 'sendbird-color--error';
        default: return '';
    }
};


//# sourceMappingURL=bundle-h8I0AuUK.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TextButton.js




var TextButton = function (_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, _c = _a.color, color = _c === void 0 ? bundle_h8I0AuUK_Colors.ONBACKGROUND_1 : _c, _d = _a.disabled, disabled = _d === void 0 ? false : _d, _e = _a.disableUnderline, disableUnderline = _e === void 0 ? false : _e, _f = _a.onClick, onClick = _f === void 0 ? function () { } : _f, children = _a.children;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            bundle_h8I0AuUK_changeColorToClassName(color),
            disableUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton',
            disabled ? 'sendbird-textbutton--disabled' : '',
        ], false).join(' '), role: "button", tabIndex: 0, onClick: function (e) { return onClick(e); }, onKeyPress: function (e) { return onClick(e); } }, children));
};


//# sourceMappingURL=TextButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Header.js











var Header = function (_a) {
    var _b;
    var className = _a.className, renderLeft = _a.renderLeft, renderRight = _a.renderRight, renderMiddle = _a.renderMiddle;
    var isMobile = false;
    try {
        isMobile = (_b = useMediaQueryContext === null || useMediaQueryContext === void 0 ? void 0 : useMediaQueryContext()) === null || _b === void 0 ? void 0 : _b.isMobile;
    }
    catch (err) {
        // TODO: handle it
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-header ".concat(className) },
        renderLeft ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-ui-header__left', isMobile ? 'sendbird-ui-header--is-mobile' : 'sendbird-ui-header--is-desktop') }, renderLeft === null || renderLeft === void 0 ? void 0 : renderLeft())) : null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-header__middle" }, renderMiddle === null || renderMiddle === void 0 ? void 0 : renderMiddle()),
        renderRight ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-ui-header__right', isMobile ? 'sendbird-ui-header--is-mobile' : 'sendbird-ui-header--is-desktop') }, renderRight === null || renderRight === void 0 ? void 0 : renderRight())) : null));
};
var Title = function (_a) {
    var title = _a.title, subtitle = _a.subtitle, onClickSubtitle = _a.onClickSubtitle;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-header__middle" },
        title && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-ui-header__middle__title", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, title)),
        subtitle && (onClickSubtitle ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "sendbird-ui-header__middle__subtitle__container", onClick: onClickSubtitle, disableUnderline: true },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-ui-header__middle__subtitle", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, subtitle))) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-ui-header__middle__subtitle", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, subtitle)))));
};
var Header_IconButton = function (_a) {
    var className = _a.className, onClick = _a.onClick, type = _a.type, color = _a.color, _b = _a.width, width = _b === void 0 ? '32px' : _b, _c = _a.height, height = _c === void 0 ? '32px' : _c, _d = _a.renderIcon, renderIcon = _d === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header_Icon, __assign({}, props)); } : _d;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: className, width: width, height: height, onClick: onClick }, renderIcon({ type: type, color: color })));
};
var Header_Icon = function (_a) {
    var className = _a.className, type = _a.type, color = _a.color, _b = _a.width, width = _b === void 0 ? '22px' : _b, _c = _a.height, height = _c === void 0 ? '22px' : _c, _d = _a.onClick, onClick = _d === void 0 ? noop : _d;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: className, type: type, fillColor: color, width: width, height: height, onClick: function (e) { return onClick === null || onClick === void 0 ? void 0 : onClick(e); } }));
};
var Header$1 = Object.assign(Header, { Title: Title, IconButton: Header_IconButton, Icon: Header_Icon });


//# sourceMappingURL=Header.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-EYdnditu.js










var GroupChannelHeaderView = function (_a) {
    var className = _a.className, currentChannel = _a.currentChannel, showSearchIcon = _a.showSearchIcon, onBackClick = _a.onBackClick, onSearchClick = _a.onSearchClick, onChatHeaderActionClick = _a.onChatHeaderActionClick, 
    // Header custom props
    renderLeft = _a.renderLeft, renderMiddle = _a.renderMiddle, renderRight = _a.renderRight;
    var config = useSendbirdStateContext().config;
    var userId = config.userId, theme = config.theme;
    var isMobile = useMediaQueryContext().isMobile;
    var stringSet = useLocalization().stringSet;
    var isMuted = (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myMutedState) === 'muted';
    var channelTitle = getChannelTitle(currentChannel, userId, stringSet);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1, { className: "sendbird-chat-header ".concat(className), renderLeft: renderLeft !== null && renderLeft !== void 0 ? renderLeft : (function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Icon, { className: "sendbird-chat-header__icon_back", onClick: onBackClick, type: IconTypes.ARROW_LEFT, color: IconColors.PRIMARY, width: "24px", height: "24px" })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, { theme: theme, channel: currentChannel, userId: userId, height: 32, width: 32 }))); }), renderMiddle: renderMiddle !== null && renderMiddle !== void 0 ? renderMiddle : (function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Title, { title: channelTitle })); }), renderRight: renderRight !== null && renderRight !== void 0 ? renderRight : (function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            isMuted && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Icon, { className: "sendbird-chat-header__right__mute", type: IconTypes.NOTIFICATIONS_OFF_FILLED, color: IconColors.ON_BACKGROUND_2, width: "24px", height: "24px" })),
            (showSearchIcon && !(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isEphemeral)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.IconButton, { className: "sendbird-chat-header__right__search", onClick: onSearchClick, type: IconTypes.SEARCH, color: IconColors.PRIMARY, renderIcon: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Icon, __assign({}, props, { width: "24px", height: "24px" })); } })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.IconButton, { className: "sendbird-chat-header__right__info", onClick: onChatHeaderActionClick, type: IconTypes.INFO, color: IconColors.PRIMARY, renderIcon: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Icon, __assign({}, props, { width: "24px", height: "24px" })); } }))); }) }));
};


//# sourceMappingURL=bundle-EYdnditu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/GroupChannelHeader.js






































var GroupChannelHeader = function (props) {
    var context = useGroupChannelContext();
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelHeaderView, __assign({}, props, context, { currentChannel: context.currentChannel })));
};


//# sourceMappingURL=GroupChannelHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-t4qeDosj.js


function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}

function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}

/**
 * @name isDate
 * @category Common Helpers
 * @summary Is the given value a date?
 *
 * @description
 * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.
 *
 * @param {*} value - the value to check
 * @returns {boolean} true if the given value is a date
 * @throws {TypeError} 1 arguments required
 *
 * @example
 * // For a valid date:
 * const result = isDate(new Date())
 * //=> true
 *
 * @example
 * // For an invalid date:
 * const result = isDate(new Date(NaN))
 * //=> true
 *
 * @example
 * // For some value:
 * const result = isDate('2014-02-31')
 * //=> false
 *
 * @example
 * // For an object:
 * const result = isDate({})
 * //=> false
 */
function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || _typeof(value) === 'object' && Object.prototype.toString.call(value) === '[object Date]';
}

/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */
function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);

  // Clone the date
  if (argument instanceof Date || _typeof(argument) === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");
      // eslint-disable-next-line no-console
      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}

/**
 * @name isValid
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {*} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // For the valid date:
 * const result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the value, convertable into a date:
 * const result = isValid(1393804800000)
 * //=> true
 *
 * @example
 * // For the invalid date:
 * const result = isValid(new Date(''))
 * //=> false
 */
function isValid(dirtyDate) {
  requiredArgs(1, arguments);
  if (!isDate(dirtyDate) && typeof dirtyDate !== 'number') {
    return false;
  }
  var date = toDate(dirtyDate);
  return !isNaN(Number(date));
}

function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }
  var number = Number(dirtyNumber);
  if (isNaN(number)) {
    return number;
  }
  return number < 0 ? Math.ceil(number) : Math.floor(number);
}

/**
 * @name addMilliseconds
 * @category Millisecond Helpers
 * @summary Add the specified number of milliseconds to the given date.
 *
 * @description
 * Add the specified number of milliseconds to the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds added
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Add 750 milliseconds to 10 July 2014 12:45:30.000:
 * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:30.750
 */
function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}

/**
 * @name subMilliseconds
 * @category Millisecond Helpers
 * @summary Subtract the specified number of milliseconds from the given date.
 *
 * @description
 * Subtract the specified number of milliseconds from the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:
 * const result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:29.250
 */
function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}

var MILLISECONDS_IN_DAY = 86400000;
function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}

function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek(fourthOfJanuary);
  return date;
}

var MILLISECONDS_IN_WEEK$1 = 604800000;
function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime();

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}

var bundle_t4qeDosj_defaultOptions = {};
function getDefaultOptions() {
  return bundle_t4qeDosj_defaultOptions;
}

function startOfUTCWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var defaultOptions = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);

  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;
  requiredArgs(1, arguments);
  var defaultOptions = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = getUTCWeekYear(dirtyDate, options);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek(firstWeek, options);
  return date;
}

var MILLISECONDS_IN_WEEK = 604800000;
function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime();

  // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)
  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();
  while (output.length < targetLength) {
    output = '0' + output;
  }
  return sign + output;
}

/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* |                                |
 * |  d  | Day of month                   |  D  |                                |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  m  | Minute                         |  M  | Month                          |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  y  | Year (abs)                     |  Y  |                                |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 */
var formatters$1 = {
  // Year
  y: function y(date, token) {
    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens
    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |
    // |----------|-------|----|-------|-------|-------|
    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |

    var signedYear = date.getUTCFullYear();
    // Returns 1 for 1 BC (which is year 0 in JavaScript)
    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);
  },
  // Month
  M: function M(date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d: function d(date, token) {
    return addLeadingZeros(date.getUTCDate(), token.length);
  },
  // AM or PM
  a: function a(date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();
      case 'aaa':
        return dayPeriodEnumValue;
      case 'aaaaa':
        return dayPeriodEnumValue[0];
      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  // Hour [1-12]
  h: function h(date, token) {
    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H: function H(date, token) {
    return addLeadingZeros(date.getUTCHours(), token.length);
  },
  // Minute
  m: function m(date, token) {
    return addLeadingZeros(date.getUTCMinutes(), token.length);
  },
  // Second
  s: function s(date, token) {
    return addLeadingZeros(date.getUTCSeconds(), token.length);
  },
  // Fraction of second
  S: function S(date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};
var lightFormatters = formatters$1;

var dayPeriodEnum = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
};
/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* | Milliseconds in day            |
 * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |
 * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |
 * |  d  | Day of month                   |  D  | Day of year                    |
 * |  e  | Local day of week              |  E  | Day of week                    |
 * |  f  |                                |  F* | Day of week in month           |
 * |  g* | Modified Julian day            |  G  | Era                            |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  i! | ISO day of week                |  I! | ISO week of year               |
 * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |
 * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |
 * |  l* | (deprecated)                   |  L  | Stand-alone month              |
 * |  m  | Minute                         |  M  | Month                          |
 * |  n  |                                |  N  |                                |
 * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |
 * |  p! | Long localized time            |  P! | Long localized date            |
 * |  q  | Stand-alone quarter            |  Q  | Quarter                        |
 * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |
 * |  u  | Extended year                  |  U* | Cyclic year                    |
 * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |
 * |  w  | Local week of year             |  W* | Week of month                  |
 * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |
 * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |
 * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 *
 * Letters marked by ! are non-standard, but implemented by date-fns:
 * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)
 * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,
 *   i.e. 7 for Sunday, 1 for Monday, etc.
 * - `I` is ISO week of year, as opposed to `w` which is local week of year.
 * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.
 *   `R` is supposed to be used in conjunction with `I` and `i`
 *   for universal ISO week-numbering date, whereas
 *   `Y` is supposed to be used in conjunction with `w` and `e`
 *   for week-numbering date specific to the locale.
 * - `P` is long localized date format
 * - `p` is long localized time format
 */

var formatters = {
  // Era
  G: function G(date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;
    switch (token) {
      // AD, BC
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });
      // A, B
      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });
      // Anno Domini, Before Christ
      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  // Year
  y: function y(date, token, localize) {
    // Ordinal number
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear();
      // Returns 1 for 1 BC (which is year 0 in JavaScript)
      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }
    return lightFormatters.y(date, token);
  },
  // Local week-numbering year
  Y: function Y(date, token, localize, options) {
    var signedWeekYear = getUTCWeekYear(date, options);
    // Returns 1 for 1 BC (which is year 0 in JavaScript)
    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;

    // Two digit year
    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }

    // Ordinal number
    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    }

    // Padding
    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function R(date, token) {
    var isoWeekYear = getUTCISOWeekYear(date);

    // Padding
    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function u(date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function Q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case 'Q':
        return String(quarter);
      // 01, 02, 03, 04
      case 'QQ':
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4
      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });
      // 1st quarter, 2nd quarter, ...
      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone quarter
  q: function q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      // 1, 2, 3, 4
      case 'q':
        return String(quarter);
      // 01, 02, 03, 04
      case 'qq':
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th
      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4
      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)
      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });
      // 1st quarter, 2nd quarter, ...
      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Month
  M: function M(date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      case 'M':
      case 'MM':
        return lightFormatters.M(date, token);
      // 1st, 2nd, ..., 12th
      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec
      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // J, F, ..., D
      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });
      // January, February, ..., December
      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone month
  L: function L(date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      // 1, 2, ..., 12
      case 'L':
        return String(month + 1);
      // 01, 02, ..., 12
      case 'LL':
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th
      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec
      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // J, F, ..., D
      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });
      // January, February, ..., December
      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Local week of year
  w: function w(date, token, localize, options) {
    var week = getUTCWeek(date, options);
    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }
    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function I(date, token, localize) {
    var isoWeek = getUTCISOWeek(date);
    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function d(date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }
    return lightFormatters.d(date, token);
  },
  // Day of year
  D: function D(date, token, localize) {
    var dayOfYear = getUTCDayOfYear(date);
    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function E(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    switch (token) {
      // Tue
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T
      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu
      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday
      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Local day of week
  e: function e(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case 'e':
        return String(localDayOfWeek);
      // Padded numerical value
      case 'ee':
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th
      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T
      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu
      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday
      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone local day of week
  c: function c(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      // Numerical value (same as in `e`)
      case 'c':
        return String(localDayOfWeek);
      // Padded numerical value
      case 'cc':
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th
      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // T
      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });
      // Tu
      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });
      // Tuesday
      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // ISO day of week
  i: function i(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      // 2
      case 'i':
        return String(isoDayOfWeek);
      // 02
      case 'ii':
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd
      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });
      // Tue
      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T
      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu
      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday
      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM or PM
  a: function a(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM, PM, midnight, noon
  b: function b(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }
    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function B(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Hour [1-12]
  h: function h(date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return lightFormatters.h(date, token);
  },
  // Hour [0-23]
  H: function H(date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }
    return lightFormatters.H(date, token);
  },
  // Hour [0-11]
  K: function K(date, token, localize) {
    var hours = date.getUTCHours() % 12;
    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function k(date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;
    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function m(date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }
    return lightFormatters.m(date, token);
  },
  // Second
  s: function s(date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }
    return lightFormatters.s(date, token);
  },
  // Fraction of second
  S: function S(date, token) {
    return lightFormatters.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function X(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return 'Z';
    }
    switch (token) {
      // Hours and optional minutes
      case 'X':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);

      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`
      case 'XXXX':
      case 'XX':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);

      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`
      case 'XXXXX':
      case 'XXX': // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function x(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      // Hours and optional minutes
      case 'x':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);

      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`
      case 'xxxx':
      case 'xx':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);

      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`
      case 'xxxxx':
      case 'xxx': // Hours and minutes with `:` delimiter
      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (GMT)
  O: function O(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      // Short
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long
      case 'OOOO':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (specific non-location)
  z: function z(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      // Short
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long
      case 'zzzz':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Seconds timestamp
  t: function t(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function T(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};
function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, dirtyDelimiter);
}
function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

var dateLongFormatter = function dateLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });
    case 'PP':
      return formatLong.date({
        width: 'medium'
      });
    case 'PPP':
      return formatLong.date({
        width: 'long'
      });
    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
};
var timeLongFormatter = function timeLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });
    case 'pp':
      return formatLong.time({
        width: 'medium'
      });
    case 'ppp':
      return formatLong.time({
        width: 'long'
      });
    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
};
var dateTimeLongFormatter = function dateTimeLongFormatter(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong);
  }
  var dateTimeFormat;
  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;
    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;
    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;
    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }
  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));
};
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */
function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

var protectedDayOfYearTokens = ['D', 'DD'];
var protectedWeekYearTokens = ['YY', 'YYYY'];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  }
}

// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token
//   (one of the certain letters followed by `o`)
// - (\w)\1* matches any sequences of the same letter
// - '' matches two quote characters in a row
// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),
//   except a single quote symbol, which ends the sequence.
//   Two quote characters do not end the sequence.
//   If there is no matching single quote
//   then the sequence will continue until the end of the string.
// - . matches any single character unmatched by previous parts of the RegExps
var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;

// This RegExp catches symbols escaped by quotes, and also
// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`
var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;

/**
 * @name format
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format. The result may vary by locale.
 *
 * >  Please note that the `format` tokens differ from Moment.js and other libraries.
 * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * The characters wrapped between two single quotes characters (') are escaped.
 * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.
 * (see the last example)
 *
 * Format of the string is based on Unicode Technical Standard #35:
 * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table
 * with a few additions (see note 7 below the table).
 *
 * Accepted patterns:
 * | Unit                            | Pattern | Result examples                   | Notes |
 * |---------------------------------|---------|-----------------------------------|-------|
 * | Era                             | G..GGG  | AD, BC                            |       |
 * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |
 * |                                 | GGGGG   | A, B                              |       |
 * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |
 * |                                 | yy      | 44, 01, 00, 17                    | 5     |
 * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |
 * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |
 * |                                 | yyyyy   | ...                               | 3,5   |
 * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |
 * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |
 * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |
 * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |
 * |                                 | YYYYY   | ...                               | 3,5   |
 * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |
 * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |
 * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |
 * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |
 * |                                 | RRRRR   | ...                               | 3,5,7 |
 * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |
 * |                                 | uu      | -43, 01, 1900, 2017               | 5     |
 * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |
 * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |
 * |                                 | uuuuu   | ...                               | 3,5   |
 * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |
 * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | QQ      | 01, 02, 03, 04                    |       |
 * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |
 * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |
 * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | qq      | 01, 02, 03, 04                    |       |
 * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |
 * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |
 * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | MM      | 01, 02, ..., 12                   |       |
 * |                                 | MMM     | Jan, Feb, ..., Dec                |       |
 * |                                 | MMMM    | January, February, ..., December  | 2     |
 * |                                 | MMMMM   | J, F, ..., D                      |       |
 * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |
 * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | LL      | 01, 02, ..., 12                   |       |
 * |                                 | LLL     | Jan, Feb, ..., Dec                |       |
 * |                                 | LLLL    | January, February, ..., December  | 2     |
 * |                                 | LLLLL   | J, F, ..., D                      |       |
 * | Local week of year              | w       | 1, 2, ..., 53                     |       |
 * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | ww      | 01, 02, ..., 53                   |       |
 * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |
 * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | II      | 01, 02, ..., 53                   | 7     |
 * | Day of month                    | d       | 1, 2, ..., 31                     |       |
 * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |
 * |                                 | dd      | 01, 02, ..., 31                   |       |
 * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |
 * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |
 * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |
 * |                                 | DDD     | 001, 002, ..., 365, 366           |       |
 * |                                 | DDDD    | ...                               | 3     |
 * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |
 * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |
 * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |
 * |                                 | ii      | 01, 02, ..., 07                   | 7     |
 * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |
 * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |
 * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |
 * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |
 * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |
 * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | ee      | 02, 03, ..., 01                   |       |
 * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | eeeee   | M, T, W, T, F, S, S               |       |
 * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |
 * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | cc      | 02, 03, ..., 01                   |       |
 * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | ccccc   | M, T, W, T, F, S, S               |       |
 * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | AM, PM                          | a..aa   | AM, PM                            |       |
 * |                                 | aaa     | am, pm                            |       |
 * |                                 | aaaa    | a.m., p.m.                        | 2     |
 * |                                 | aaaaa   | a, p                              |       |
 * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |
 * |                                 | bbb     | am, pm, noon, midnight            |       |
 * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |
 * |                                 | bbbbb   | a, p, n, mi                       |       |
 * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |
 * |                                 | BBBB    | at night, in the morning, ...     | 2     |
 * |                                 | BBBBB   | at night, in the morning, ...     |       |
 * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |
 * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |
 * |                                 | hh      | 01, 02, ..., 11, 12               |       |
 * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |
 * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |
 * |                                 | HH      | 00, 01, 02, ..., 23               |       |
 * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |
 * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |
 * |                                 | KK      | 01, 02, ..., 11, 00               |       |
 * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |
 * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |
 * |                                 | kk      | 24, 01, 02, ..., 23               |       |
 * | Minute                          | m       | 0, 1, ..., 59                     |       |
 * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | mm      | 00, 01, ..., 59                   |       |
 * | Second                          | s       | 0, 1, ..., 59                     |       |
 * |                                 | so      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | ss      | 00, 01, ..., 59                   |       |
 * | Fraction of second              | S       | 0, 1, ..., 9                      |       |
 * |                                 | SS      | 00, 01, ..., 99                   |       |
 * |                                 | SSS     | 000, 001, ..., 999                |       |
 * |                                 | SSSS    | ...                               | 3     |
 * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |
 * |                                 | XX      | -0800, +0530, Z                   |       |
 * |                                 | XXX     | -08:00, +05:30, Z                 |       |
 * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |
 * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |
 * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |
 * |                                 | xx      | -0800, +0530, +0000               |       |
 * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |
 * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |
 * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |
 * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |
 * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |
 * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |
 * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |
 * | Seconds timestamp               | t       | 512969520                         | 7     |
 * |                                 | tt      | ...                               | 3,7   |
 * | Milliseconds timestamp          | T       | 512969520900                      | 7     |
 * |                                 | TT      | ...                               | 3,7   |
 * | Long localized date             | P       | 04/29/1453                        | 7     |
 * |                                 | PP      | Apr 29, 1453                      | 7     |
 * |                                 | PPP     | April 29th, 1453                  | 7     |
 * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |
 * | Long localized time             | p       | 12:00 AM                          | 7     |
 * |                                 | pp      | 12:00:00 AM                       | 7     |
 * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |
 * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |
 * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |
 * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |
 * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |
 * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |
 * Notes:
 * 1. "Formatting" units (e.g. formatting quarter) in the default en-US locale
 *    are the same as "stand-alone" units, but are different in some languages.
 *    "Formatting" units are declined according to the rules of the language
 *    in the context of a date. "Stand-alone" units are always nominative singular:
 *
 *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`
 *
 *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`
 *
 * 2. Any sequence of the identical letters is a pattern, unless it is escaped by
 *    the single quote characters (see below).
 *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)
 *    the output will be the same as default pattern for this unit, usually
 *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units
 *    are marked with "2" in the last column of the table.
 *
 *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`
 *
 * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).
 *    The output will be padded with zeros to match the length of the pattern.
 *
 *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`
 *
 * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.
 *    These tokens represent the shortest form of the quarter.
 *
 * 5. The main difference between `y` and `u` patterns are B.C. years:
 *
 *    | Year | `y` | `u` |
 *    |------|-----|-----|
 *    | AC 1 |   1 |   1 |
 *    | BC 1 |   1 |   0 |
 *    | BC 2 |   2 |  -1 |
 *
 *    Also `yy` always returns the last two digits of a year,
 *    while `uu` pads single digit years to 2 characters and returns other years unchanged:
 *
 *    | Year | `yy` | `uu` |
 *    |------|------|------|
 *    | 1    |   01 |   01 |
 *    | 14   |   14 |   14 |
 *    | 376  |   76 |  376 |
 *    | 1453 |   53 | 1453 |
 *
 *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),
 *    except local week-numbering years are dependent on `options.weekStartsOn`
 *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}
 *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).
 *
 * 6. Specific non-location timezones are currently unavailable in `date-fns`,
 *    so right now these tokens fall back to GMT timezones.
 *
 * 7. These patterns are not in the Unicode Technical Standard #35:
 *    - `i`: ISO day of week
 *    - `I`: ISO week of year
 *    - `R`: ISO week-numbering year
 *    - `t`: seconds timestamp
 *    - `T`: milliseconds timestamp
 *    - `o`: ordinal number modifier
 *    - `P`: long localized date
 *    - `p`: long localized time
 *
 * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.
 *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.
 *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * @param {Date|Number} date - the original date
 * @param {String} format - the string of tokens
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is
 * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @returns {String} the formatted date string
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `date` must not be Invalid Date
 * @throws {RangeError} `options.locale` must contain `localize` property
 * @throws {RangeError} `options.locale` must contain `formatLong` property
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7
 * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} format string contains an unescaped latin alphabet character
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * import { eoLocale } from 'date-fns/locale/eo'
 * const result = format(new Date(2014, 6, 2), "do 'de' MMMM yyyy", {
 *   locale: eoLocale
 * })
 * //=> '2-a de julio 2014'
 *
 * @example
 * // Escape string by single quote characters:
 * const result = format(new Date(2014, 6, 2, 15), "h 'o''clock'")
 * //=> "3 o'clock"
 */

function format(dirtyDate, dirtyFormatStr, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;
  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var defaultOptions = getDefaultOptions();
  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;
  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1);

  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN
  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0);

  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN
  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  if (!locale.localize) {
    throw new RangeError('locale must contain localize property');
  }
  if (!locale.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }
  var originalDate = toDate(dirtyDate);
  if (!isValid(originalDate)) {
    throw new RangeError('Invalid time value');
  }

  // Convert the date in system timezone to the same date in UTC+00:00 timezone.
  // This ensures that when UTC functions will be implemented, locales will be compatible with them.
  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376
  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];
    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }
    return substring;
  }).join('').match(formattingTokensRegExp).map(function (substring) {
    // Replace two single quote characters with one single quote character
    if (substring === "''") {
      return "'";
    }
    var firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }
    var formatter = formatters[firstCharacter];
    if (formatter) {
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }
      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }
      return formatter(utcDate, substring, locale.localize, formatterOptions);
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }
    return substring;
  }).join('');
  return result;
}
function cleanEscapedString(input) {
  var matched = input.match(escapedStringRegExp);
  if (!matched) {
    return input;
  }
  return matched[1].replace(doubleQuoteRegExp, "'");
}


//# sourceMappingURL=bundle-t4qeDosj.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-COYqO05C.js
var MAX_USER_MENTION_COUNT = 10;
var MAX_USER_SUGGESTION_COUNT = 15;
var USER_MENTION_TEMP_CHAR = '@';
var ThreadReplySelectType;
(function (ThreadReplySelectType) {
    ThreadReplySelectType["PARENT"] = "PARENT";
    ThreadReplySelectType["THREAD"] = "THREAD";
})(ThreadReplySelectType || (ThreadReplySelectType = {}));


//# sourceMappingURL=bundle-COYqO05C.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Message/hooks/useDirtyGetMentions.js


function getMentionNodes(root) {
    if (root) {
        var mentions = root.querySelectorAll('[data-sb-mention=\'true\']');
        var mentionsArray = Array.from(mentions);
        return mentionsArray;
    }
    return [];
}

/**
 * exported, should be backwords compatible
 * This is a dirty way to get the mentions given DOM node
 */
function useDirtyGetMentions(_a, _b) {
    var ref = _a.ref;
    var logger = _b.logger;
    // Select the node that will be observed for mutations
    var targetNode = ref.current;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionNodes = _c[0], setMentionNodes = _c[1];
    // to get the initial mentions
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        if (targetNode) {
            var mentions = getMentionNodes(targetNode);
            setMentionNodes(mentions);
        }
    }, [targetNode]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        // Options for the observer (which mutations to observe)
        var config = { childList: true, subtree: true };
        // Callback function to execute when mutations are observed
        var callback = function (mutationList) {
            var hasMutation = mutationList.length > 0;
            if (hasMutation) {
                setMentionNodes(getMentionNodes(targetNode));
            }
        };
        // Create an observer instance linked to the callback function
        var observer = new MutationObserver(callback);
        if (targetNode) {
            // Start observing the target node for configured mutations
            observer.observe(targetNode, config);
            // logger.info('useDirtyGetMentions: observer started', { observer, config });
        }
        return function () {
            try {
                observer.disconnect();
                // logger.info('useDirtyGetMentions: observer disconnected', { observer });
            }
            catch (error) {
                logger.error('useDirtyGetMentions: observer disconnect failed', { observer: observer });
            }
        };
    }, [targetNode]);
    return mentionNodes;
}


//# sourceMappingURL=useDirtyGetMentions.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/DateSeparator.js






var DateSeparator = function (_a) {
    var _b = _a.children, children = _b === void 0 ? undefined : _b, _c = _a.className, className = _c === void 0 ? '' : _c, _d = _a.separatorColor, separatorColor = _d === void 0 ? bundle_h8I0AuUK_Colors.ONBACKGROUND_4 : _d;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-separator',
        ], false).join(' ') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: ['sendbird-separator__left', "".concat(bundle_h8I0AuUK_changeColorToClassName(separatorColor), "--background-color")].join(' ') }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-separator__text" }, children
            || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, "Date Separator"))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: ['sendbird-separator__right', "".concat(bundle_h8I0AuUK_changeColorToClassName(separatorColor), "--background-color")].join(' ') })));
};


//# sourceMappingURL=DateSeparator.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CWXSCBTE.js
var MessageInputKeys = {
    Enter: 'Enter',
    ArrowUp: 'ArrowUp',
    ArrowDown: 'ArrowDown',
    Backspace: 'Backspace',
};
var NodeTypes = {
    ElementNode: 1,
    TextNode: 3,
};
var NodeNames = {
    Span: 'SPAN',
    Br: 'BR',
    Div: 'DIV',
};


//# sourceMappingURL=bundle-CWXSCBTE.js.map

// EXTERNAL MODULE: ./node_modules/dompurify/dist/purify.js
var purify = __webpack_require__(5);
var purify_default = /*#__PURE__*/__webpack_require__.n(purify);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B3nNazhn.js
var MENTION_USER_LABEL_CLASSNAME = 'sendbird-mention-user-label';


//# sourceMappingURL=bundle-B3nNazhn.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-QPuxH0uW.js
var TEXT_MESSAGE_BODY_CLASSNAME = 'sendbird-text-message-item-body';


//# sourceMappingURL=bundle-QPuxH0uW.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-C8jE79mn.js
var OG_MESSAGE_BODY_CLASSNAME = 'sendbird-og-message-item-body__text-bubble';


//# sourceMappingURL=bundle-C8jE79mn.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-YUF6WfTL.js









function renderToString(_a) {
    var userId = _a.userId, nickname = _a.nickname;
    // donot change this template, it wont work
    var el = "<span data-userid=\"".concat(userId, "\" data-sb-mention=\"true\" class=\"").concat(MENTION_USER_LABEL_CLASSNAME, "\">").concat(nickname, "</span>");
    var purifier = purify_default()(window);
    var sanitized_ = purifier.sanitize(el);
    var token = sanitized_.split(' ');
    var spanTag = token[0], rest = token.slice(1);
    // we do this because DOMPurify removes the contenteditable attribute
    var sanitized = __spreadArray([spanTag, 'contenteditable="false"'], rest, true).join(' ');
    return sanitized;
}

var sanitizeString = function (str) {
    return str === null || str === void 0 ? void 0 : str.replace(/[\u00A0-\u9999<>]/gim, function (i) { return ''.concat('&#', String(i.charCodeAt(0)), ';'); });
};
/**
 * NodeList cannot be used with Array methods
 * @param {NodeListOf<ChildNode>} childNodes
 * @returns Array of child nodes
 */
var nodeListToArray = function (childNodes) {
    return childNodes ? Array.from(childNodes) : [];
};
function isChannelTypeSupportsMultipleFilesMessage(channel) {
    var _a;
    return channel && ((_a = channel.isGroupChannel) === null || _a === void 0 ? void 0 : _a.call(channel)) && !channel.isBroadcast && !channel.isSuper;
}
// Type guard: This function ensures that the node contains `innerText` and `dataset` properties
function isHTMLElement(node) {
    return node.nodeType === NodeTypes.ElementNode;
}
// eslint-disable-next-line no-undef
function extractTextAndMentions(childNodes) {
    var messageText = '';
    var mentionTemplate = '';
    childNodes.forEach(function (node) {
        if (isHTMLElement(node) && node.nodeName === NodeNames.Span) {
            var innerText = node.innerText, _a = node.dataset, dataset = _a === void 0 ? {} : _a;
            var _b = dataset.userid, userid = _b === void 0 ? '' : _b;
            messageText += innerText;
            mentionTemplate += "".concat(USER_MENTION_TEMP_CHAR, "{").concat(userid, "}");
        }
        else if (isHTMLElement(node) && node.nodeName === NodeNames.Br) {
            messageText += '\n';
            mentionTemplate += '\n';
        }
        else if (isHTMLElement(node) && node.nodeName === NodeNames.Div) {
            var _c = node.textContent, textContent = _c === void 0 ? '' : _c;
            messageText += "\n".concat(textContent);
            mentionTemplate += "\n".concat(textContent);
        }
        else {
            var _d = node.textContent, textContent = _d === void 0 ? '' : _d;
            messageText += textContent;
            mentionTemplate += textContent;
        }
    });
    return { messageText: messageText, mentionTemplate: mentionTemplate };
}

function inserTemplateToDOM(templateList) {
    var nodes = templateList.map(function (template) {
        var text = template.text, userId = template.userId;
        if (userId) {
            return renderToString({ userId: userId, nickname: text });
        }
        return sanitizeString(text);
    })
        .join(' ')
        // add a space at the end of the mention, else cursor/caret wont work
        .concat(' ');
    document.execCommand('insertHTML', false, nodes);
}

var PASTE_NODE = 'sendbird-uikit__paste-node';
var TEXT_MESSAGE_CLASS = 'sendbird-word';
var MENTION_CLASS = 'sendbird-word__mention';
var MENTION_CLASS_IN_INPUT = 'sendbird-mention-user-label';
var MENTION_CLASS_COMBINED_QUERY = ".".concat(MENTION_CLASS, ", .").concat(MENTION_CLASS_IN_INPUT);

function querySelectorIncludingSelf(master, selector) {
    var result = __spreadArray([
        master
    ], Array.from(master.querySelectorAll(selector)), true).find(function (el) { return el.matches(selector); });
    return result;
}
// Pasted dom node can be OG_MESSAGE or partial message or full message
// full messsage would have TEXT_MESSAGE_BODY_CLASSNAME and have childNodes
// partial message would not have TEXT_MESSAGE_BODY_CLASSNAME
function getLeafNodes(master) {
    // og message
    var ogMessage = querySelectorIncludingSelf(master, ".".concat(OG_MESSAGE_BODY_CLASSNAME));
    if (ogMessage) {
        return nodeListToArray(ogMessage.childNodes);
    }
    var textMessageBody = querySelectorIncludingSelf(master, ".".concat(TEXT_MESSAGE_BODY_CLASSNAME));
    if (textMessageBody) {
        return nodeListToArray(textMessageBody.childNodes);
    }
    return nodeListToArray(master.childNodes);
}
function createPasteNode() {
    var pasteNode = document.body.querySelector("#".concat(PASTE_NODE));
    // remove existing paste node
    if (pasteNode) {
        pasteNode === null || pasteNode === void 0 ? void 0 : pasteNode.remove();
    }
    // create new paste node and return
    var node = document.createElement('div');
    node.id = PASTE_NODE;
    node.style.display = 'none';
    return node;
}
function hasMention(parent) {
    return (parent === null || parent === void 0 ? void 0 : parent.querySelector(MENTION_CLASS_COMBINED_QUERY)) ? true : false;
}
var extractTextFromNodes = function (nodes) {
    var text = '';
    nodes.forEach(function (node) {
        // to preserve space between words
        var textNodes = node.querySelectorAll(".".concat(TEXT_MESSAGE_CLASS));
        if (textNodes.length > 0) {
            text += ((extractTextFromNodes(Array.from(textNodes))) + ' ');
        }
        text += (node.innerText + ' ');
    });
    return text;
};
function domToMessageTemplate(nodeArray) {
    var templates = nodeArray === null || nodeArray === void 0 ? void 0 : nodeArray.reduce(function (accumulator, currentValue) {
        var _a, _b;
        // currentValue can be node(from messageBody or messageInput) or text
        var mentionNode;
        // this looks awkward, but it is a fallback to set default text
        var text = currentValue === null || currentValue === void 0 ? void 0 : currentValue.innerText;
        // if text node, set text
        if (currentValue instanceof Text) {
            mentionNode = false;
            text = (_a = currentValue.textContent) !== null && _a !== void 0 ? _a : '';
        }
        if (currentValue instanceof HTMLElement) {
            mentionNode = (currentValue.classList.contains(MENTION_CLASS) || currentValue.classList.contains(MENTION_CLASS_IN_INPUT))
                ? currentValue
                : currentValue.querySelector(MENTION_CLASS_COMBINED_QUERY);
        }
        // if mentionNode is not null, it is a mention
        if (mentionNode) {
            var text_1 = currentValue === null || currentValue === void 0 ? void 0 : currentValue.innerText;
            var userId = (_b = mentionNode.dataset) === null || _b === void 0 ? void 0 : _b.userid;
            return __spreadArray(__spreadArray([], accumulator, true), [
                {
                    text: text_1,
                    userId: userId,
                },
            ], false);
        }
        return __spreadArray(__spreadArray([], accumulator, true), [
            {
                text: text,
            },
        ], false);
    }, []);
    return templates;
}
function getUsersFromWords(templates, channel) {
    var userMap = {};
    var users = channel.members;
    templates.forEach(function (template) {
        if (template.userId) {
            var mentionedMember = users.find(function (user) { return user.userId === template.userId; });
            // Object.values would return array-> [undefined] if the user is not in the channel
            if (mentionedMember) {
                userMap[template.userId] = mentionedMember;
            }
        }
    });
    return Object.values(userMap);
}

// exported, should be backward compatible
// conditions to test:
// 1. paste simple text
// 2. paste text with mention
// 3. paste text with mention and text
// 4. paste text with mention and text and paste again before and after
// 5. copy message with mention(only one mention, no other text) and paste
// 6. copy message with mention from input and paste(before and after)
function usePaste(_a) {
    var ref = _a.ref, setIsInput = _a.setIsInput, setHeight = _a.setHeight, channel = _a.channel, setMentionedUsers = _a.setMentionedUsers;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (e) {
        e.preventDefault();
        var html = e.clipboardData.getData('text/html');
        // simple text, continue as normal
        if (!html) {
            var text = e.clipboardData.getData('text') || getURIListText(e);
            document.execCommand('insertHTML', false, sanitizeString(text));
            setIsInput(true);
            setHeight();
            return;
        }
        // has html, check if there are mentions, sanitize and insert
        var purifier = purify_default()(window);
        var clean = purifier.sanitize(html);
        var pasteNode = createPasteNode();
        if (pasteNode) {
            pasteNode.innerHTML = clean;
            // does not have mention, continue as normal
            if (!hasMention(pasteNode)) {
                // to preserve space between words
                var text = extractTextFromNodes(Array.from(pasteNode.children));
                document.execCommand('insertHTML', false, sanitizeString(text));
                pasteNode.remove();
                setIsInput(true);
                setHeight();
                return;
            }
            // has mention, collect leaf nodes and parse words
            var leafNodes = getLeafNodes(pasteNode);
            var words = domToMessageTemplate(leafNodes);
            var mentionedUsers = channel.isGroupChannel() ? getUsersFromWords(words, channel) : [];
            // side effects
            setMentionedUsers(mentionedUsers);
            inserTemplateToDOM(words);
            pasteNode.remove();
        }
        setIsInput(true);
        setHeight();
    }, [ref, setIsInput, setHeight, channel, setMentionedUsers]);
}
// https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#dragging_links
function getURIListText(e) {
    var pasteData = e.clipboardData.getData('text/uri-list');
    if (pasteData.length === 0)
        return '';
    return pasteData
        .split('\n')
        .reduce(function (accumulator, line) {
        var txt = line.trim();
        if (txt !== '' && !txt.startsWith('#')) {
            accumulator += txt + '\n';
        }
        return accumulator;
    }, '');
}


//# sourceMappingURL=bundle-YUF6WfTL.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-ZBhGb8Lc.js


var USER_MENTION_PREFIX = '@';

var TOKEN_TYPES = {
    string: 'string',
    mention: 'mention',
    url: 'url',
    undetermined: 'undetermined',
};

function getUserMentionRegex(mentionedUsers, templatePrefix_) {
    var templatePrefix = templatePrefix_ || USER_MENTION_PREFIX;
    return RegExp("(".concat(mentionedUsers.map(function (u) {
        var userId = u.userId.replace(
        // If user.id includes these patterns, need to convert it into an escaped one
        /([.*+?^${}()|[\]\\])/g, '\\$1');
        /**
         * //{ And //} are also for escaping
         * because curly braces `{}` are metacharacters in regular expressions used to specify repetition
         */
        return "".concat(templatePrefix, "\\{").concat(userId, "\\}");
    }).join('|'), ")"), 'g');
}
function identifyMentions(_a) {
    var tokens = _a.tokens, _b = _a.mentionedUsers, mentionedUsers = _b === void 0 ? [] : _b, _c = _a.templatePrefix, templatePrefix = _c === void 0 ? USER_MENTION_PREFIX : _c;
    if (!(mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length)) {
        return tokens;
    }
    var userMentionRegex = getUserMentionRegex(mentionedUsers, templatePrefix);
    var results = tokens.map(function (token) {
        // if the token is not undetermined, return it as is
        // is kinda unnecessary with TS, but just in case
        if (token.type !== TOKEN_TYPES.undetermined) {
            return token;
        }
        var value = token.value;
        var parts = value.split(userMentionRegex);
        var tokens = parts.map(function (part) {
            if (part.match(userMentionRegex)) {
                var matchedUser = mentionedUsers.find(function (user) { return "@{".concat(user === null || user === void 0 ? void 0 : user.userId, "}") === part; });
                var nickname = (matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.nickname) || '(No name)';
                return { value: nickname, type: TOKEN_TYPES.mention, userId: matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.userId };
            }
            else {
                return { value: part, type: TOKEN_TYPES.undetermined };
            }
        });
        return tokens;
    }).flat();
    return results;
}
function identifyUrlsAndStrings(token) {
    var URL_REG = /(?:https?:\/\/|www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.(xn--)?[a-z]{2,20}\b([-a-zA-Z0-9@:%_+[\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g;
    var results = token.map(function (token) {
        if (token.type !== TOKEN_TYPES.undetermined) {
            return token;
        }
        var _a = token.value, value = _a === void 0 ? '' : _a;
        var matches = Array.from(value.matchAll(URL_REG));
        var founds = matches.map(function (value) {
            var _a;
            var text = value[0];
            var start = (_a = value.index) !== null && _a !== void 0 ? _a : 0;
            var end = start + text.length;
            return { text: text, start: start, end: end };
        });
        var items = [{ value: value, type: TOKEN_TYPES.string }];
        var cursor = 0;
        founds.forEach(function (_a) {
            var text = _a.text, start = _a.start, end = _a.end;
            var restText = items.pop().value;
            var head = restText.slice(0, start - cursor);
            var mid = text;
            var tail = restText.slice(end - cursor);
            if (head.length > 0)
                items.push({ value: head, type: TOKEN_TYPES.string });
            items.push({ value: mid, type: TOKEN_TYPES.url });
            if (tail.length > 0)
                items.push({ value: tail, type: TOKEN_TYPES.string });
            cursor = end;
        });
        return items;
    }).flat();
    return results;
}
function combineNearbyStrings(tokens) {
    var results = tokens.reduce(function (acc, token) {
        var lastToken = acc[acc.length - 1];
        if ((lastToken === null || lastToken === void 0 ? void 0 : lastToken.type) === TOKEN_TYPES.string && token.type === TOKEN_TYPES.string) {
            lastToken.value = "".concat(lastToken.value).concat(token.value);
            return acc;
        }
        return __spreadArray(__spreadArray([], acc, true), [token], false);
    }, []);
    return results;
}
/**
 * Converts text into set of rich tokens
 */
function tokenizeMessage(_a) {
    var messageText = _a.messageText, _b = _a.mentionedUsers, mentionedUsers = _b === void 0 ? [] : _b, _c = _a.templatePrefix, templatePrefix = _c === void 0 ? USER_MENTION_PREFIX : _c;
    // mention can be squeezed-in(no-space-between) with other mentions and urls
    // if no users are mentioned, return the messageText as a single token
    var partialResult = [{
            type: TOKEN_TYPES.undetermined,
            value: messageText,
        }];
    // order is important because we want to identify mentions first
    // identifyMentions will return a token with type mention or undetermined
    var partialWithMentions = identifyMentions({
        tokens: partialResult,
        mentionedUsers: mentionedUsers,
        templatePrefix: templatePrefix,
    });
    var partialsWithUrlsAndMentions = identifyUrlsAndStrings(partialWithMentions);
    var result = combineNearbyStrings(partialsWithUrlsAndMentions);
    return result;
}
/**
 * Don't need to use this util in DOM element since the white spaces will be kept as is,
 * but will need if the text is wrapped \w React.Fragement or </>
 * @link https://sendbird.slack.com/archives/GPGHESTL3/p1681180484341369
 * Or!!! -> convert any space or tab in leading/trailing to nbsp
 * to preserve the leading & trailing white spaces
 */
function getWhiteSpacePreservedText(text) {
    var NON_BREAKING_SPACE = '\u00A0';
    // Split the input string into lines
    var lines = text.split('\n');
    // Process each line and convert leading and trailing white spaces to "\u00A0"
    var processedLines = lines.map(function (line) {
        var _a, _b;
        var leadingWhitespace = ((_a = line.match(/^\s*/)) === null || _a === void 0 ? void 0 : _a[0]) || '';
        var trailingWhitespace = ((_b = line.match(/\s*$/)) === null || _b === void 0 ? void 0 : _b[0]) || '';
        var convertedLeadingWhitespace = leadingWhitespace.replace(/ /g, NON_BREAKING_SPACE);
        var convertedTrailingWhitespace = trailingWhitespace.replace(/ /g, NON_BREAKING_SPACE);
        return convertedLeadingWhitespace + line.trim() + convertedTrailingWhitespace;
    });
    // Combine the processed lines into a new string with "\n"
    var result = processedLines.join('\n');
    return result;
}


//# sourceMappingURL=bundle-ZBhGb8Lc.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageInput.js
























/**
 * FIXME:
 * Import this ChannelType enum from @sendbird/chat
 * once MessageInput.spec unit tests can be run \wo jest <-> ESM issue
 */
var ChannelType;
(function (ChannelType) {
    ChannelType["BASE"] = "base";
    ChannelType["GROUP"] = "group";
    ChannelType["OPEN"] = "open";
})(ChannelType || (ChannelType = {}));
/**
 * FIXME: Simplify this in UIKit@v4
 * If customer is using MessageInput inside our modules(ie: Channel, Thread, etc),
 * we should use the config from the module.
 * If customer is using MessageInput outside our modules(ie: custom UI),
 * we expect Channel to be undefined and customer gets control to show/hide file-upload.
 * @param {*} channel GroupChannel | OpenChannel
 * @param {*} config SendBirdStateConfig
 * @returns boolean
 */
var checkIfFileUploadEnabled = function (_a) {
    var channel = _a.channel, config = _a.config;
    var isEnabled = K(channel === null || channel === void 0 ? void 0 : channel.channelType)
        .with(ChannelType.GROUP, function () { var _a; return (_a = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _a === void 0 ? void 0 : _a.enableDocument; })
        .with(ChannelType.OPEN, function () { var _a; return (_a = config === null || config === void 0 ? void 0 : config.openChannel) === null || _a === void 0 ? void 0 : _a.enableDocument; })
        .otherwise(function () { return true; });
    return isEnabled;
};

var TEXT_FIELD_ID = 'sendbird-message-input-text-field';
var LINE_HEIGHT = 76;
var DEFAULT_CHAT_VIEW_HEIGHT = 600;
var MessageInput_noop = function () {
    return null;
};
var displayCaret = function (element, position) {
    var range = document.createRange();
    var sel = window.getSelection();
    range.setStart(element.childNodes[0], position);
    range.collapse(true);
    sel === null || sel === void 0 ? void 0 : sel.removeAllRanges();
    sel === null || sel === void 0 ? void 0 : sel.addRange(range);
    element.focus();
};
var resetInput = function (ref) {
    if (ref && ref.current) {
        ref.current.innerHTML = '';
    }
};
var initialTargetStringInfo = {
    targetString: '',
    startNodeIndex: null,
    startOffsetIndex: null,
    endNodeIndex: null,
    endOffsetIndex: null,
};
var MessageInput = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, externalRef) {
    var _a, _b, _c, _d, _e;
    var channel = props.channel, _f = props.className, className = _f === void 0 ? '' : _f, _g = props.messageFieldId, messageFieldId = _g === void 0 ? '' : _g, _h = props.isEdit, isEdit = _h === void 0 ? false : _h, _j = props.isMobile, isMobile = _j === void 0 ? false : _j, _k = props.isMentionEnabled, isMentionEnabled = _k === void 0 ? false : _k, _l = props.isVoiceMessageEnabled, isVoiceMessageEnabled = _l === void 0 ? true : _l, _m = props.isSelectingMultipleFilesEnabled, isSelectingMultipleFilesEnabled = _m === void 0 ? false : _m, _o = props.disabled, disabled = _o === void 0 ? false : _o, _p = props.message, message = _p === void 0 ? null : _p, _q = props.placeholder, placeholder = _q === void 0 ? '' : _q, _r = props.maxLength, maxLength = _r === void 0 ? 5000 : _r, _s = props.onFileUpload, onFileUpload = _s === void 0 ? MessageInput_noop : _s, _t = props.onSendMessage, onSendMessage = _t === void 0 ? MessageInput_noop : _t, _u = props.onUpdateMessage, onUpdateMessage = _u === void 0 ? MessageInput_noop : _u, _v = props.onCancelEdit, onCancelEdit = _v === void 0 ? MessageInput_noop : _v, _w = props.onStartTyping, onStartTyping = _w === void 0 ? MessageInput_noop : _w, _x = props.channelUrl, channelUrl = _x === void 0 ? '' : _x, _y = props.mentionSelectedUser, mentionSelectedUser = _y === void 0 ? null : _y, _z = props.onUserMentioned, onUserMentioned = _z === void 0 ? MessageInput_noop : _z, _0 = props.onMentionStringChange, onMentionStringChange = _0 === void 0 ? MessageInput_noop : _0, _1 = props.onMentionedUserIdsUpdated, onMentionedUserIdsUpdated = _1 === void 0 ? MessageInput_noop : _1, _2 = props.onVoiceMessageIconClick, onVoiceMessageIconClick = _2 === void 0 ? MessageInput_noop : _2, _3 = props.onKeyUp, onKeyUp = _3 === void 0 ? MessageInput_noop : _3, _4 = props.onKeyDown, onKeyDown = _4 === void 0 ? MessageInput_noop : _4, _5 = props.renderFileUploadIcon, renderFileUploadIcon = _5 === void 0 ? MessageInput_noop : _5, _6 = props.renderVoiceMessageIcon, renderVoiceMessageIcon = _6 === void 0 ? MessageInput_noop : _6, _7 = props.renderSendMessageIcon, renderSendMessageIcon = _7 === void 0 ? MessageInput_noop : _7, _8 = props.setMentionedUsers, setMentionedUsers = _8 === void 0 ? MessageInput_noop : _8, acceptableMimeTypes = props.acceptableMimeTypes;
    var internalRef = (externalRef && 'current' in externalRef) ? externalRef : null;
    var textFieldId = messageFieldId || TEXT_FIELD_ID;
    var stringSet = useLocalization().stringSet;
    var config = useSendbirdStateContext().config;
    var isFileUploadEnabled = checkIfFileUploadEnabled({
        channel: channel,
        config: config,
    });
    var fileInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var _9 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isInput = _9[0], setIsInput = _9[1];
    var _10 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUserIds = _10[0], setMentionedUserIds = _10[1];
    var _11 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(__assign({}, initialTargetStringInfo)), targetStringInfo = _11[0], setTargetStringInfo = _11[1];
    var setHeight = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        var elem = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
        if (!elem)
            return;
        try {
            var estimatedChatViewHeight = window.document.body.offsetHeight || DEFAULT_CHAT_VIEW_HEIGHT;
            var MAX_HEIGHT = estimatedChatViewHeight * 0.6;
            if (elem.scrollHeight >= LINE_HEIGHT) {
                if (MAX_HEIGHT < elem.scrollHeight) {
                    elem.style.height = 'auto';
                    elem.style.height = "".concat(MAX_HEIGHT, "px");
                }
                else {
                    elem.style.height = '';
                }
            }
        }
        catch (error) {
            // error
        }
    }, []);
    // #Edit mode
    // for easilly initialize input value from outside, but
    // useEffect(_, [channelUrl]) erase it
    var initialValue = props === null || props === void 0 ? void 0 : props.value;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
        try {
            if (textField && initialValue) {
                textField.innerHTML = initialValue;
                displayCaret(textField, initialValue === null || initialValue === void 0 ? void 0 : initialValue.length);
            }
        }
        catch (_a) {
            //
        }
        setMentionedUserIds([]);
        setIsInput((textField === null || textField === void 0 ? void 0 : textField.textContent) ? textField.textContent.trim().length > 0 : false);
        setHeight();
    }, [initialValue]);
    // #Mention | Clear input value when channel changes
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!isEdit) {
            setIsInput(false);
            resetInput(internalRef);
        }
    }, [channelUrl]);
    // #Mention & #Edit | Fill message input values
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        if (isEdit && (message === null || message === void 0 ? void 0 : message.messageId)) {
            // const textField = document.getElementById(textFieldId);
            var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
            if (isMentionEnabled
                && (message === null || message === void 0 ? void 0 : message.mentionedUsers)
                && message.mentionedUsers.length > 0
                && (message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate)
                && message.mentionedMessageTemplate.length > 0) {
                /* mention enabled */
                var _c = message.mentionedUsers, mentionedUsers_1 = _c === void 0 ? [] : _c;
                var tokens = tokenizeMessage({
                    messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,
                    mentionedUsers: mentionedUsers_1,
                });
                if (textField) {
                    textField.innerHTML = tokens
                        .map(function (token) {
                        if (token.type === TOKEN_TYPES.mention) {
                            var mentionedUser = mentionedUsers_1.find(function (user) { return user.userId === token.userId; });
                            var nickname = "".concat(USER_MENTION_PREFIX).concat((mentionedUser === null || mentionedUser === void 0 ? void 0 : mentionedUser.nickname) || token.value || stringSet.MENTION_NAME__NO_NAME);
                            return renderToString({
                                userId: token.userId,
                                nickname: nickname,
                            });
                        }
                        return sanitizeString(token.value);
                    })
                        .join(' ');
                }
            }
            else {
                /* mention disabled */
                try {
                    if (textField) {
                        textField.innerHTML = (_a = sanitizeString(message === null || message === void 0 ? void 0 : message.message)) !== null && _a !== void 0 ? _a : '';
                    }
                }
                catch (_d) {
                    //
                }
                setMentionedUserIds([]);
            }
            setIsInput((textField === null || textField === void 0 ? void 0 : textField.textContent) ? ((_b = textField === null || textField === void 0 ? void 0 : textField.textContent) === null || _b === void 0 ? void 0 : _b.trim().length) > 0 : false);
            setHeight();
        }
    }, [isEdit, message]);
    // #Mention | Detect MentionedLabel modified
    var useMentionedLabelDetection = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        var _a;
        var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
        if (isMentionEnabled && textField) {
            var newMentionedUserIds = Array.from(textField.getElementsByClassName('sendbird-mention-user-label')).map(
            // @ts-ignore
            function (node) { var _a; return (_a = node === null || node === void 0 ? void 0 : node.dataset) === null || _a === void 0 ? void 0 : _a.userid; });
            if (!arrayEqual(mentionedUserIds, newMentionedUserIds) || newMentionedUserIds.length === 0) {
                onMentionedUserIdsUpdated(newMentionedUserIds);
                setMentionedUserIds(newMentionedUserIds);
            }
        }
        setIsInput((textField === null || textField === void 0 ? void 0 : textField.textContent) ? ((_a = textField.textContent) === null || _a === void 0 ? void 0 : _a.trim().length) > 0 : false);
    }, [targetStringInfo, isMentionEnabled]);
    // #Mention | Replace selected user nickname to the MentionedUserLabel
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b, _c, _d;
        if (isMentionEnabled && mentionSelectedUser) {
            var targetString = targetStringInfo.targetString, startNodeIndex = targetStringInfo.startNodeIndex, startOffsetIndex = targetStringInfo.startOffsetIndex, endNodeIndex = targetStringInfo.endNodeIndex, endOffsetIndex = targetStringInfo.endOffsetIndex;
            var textField_1 = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
            if (targetString && startNodeIndex && startOffsetIndex && textField_1 && endNodeIndex) {
                // const textField = document.getElementById(textFieldId);
                var childNodes = nodeListToArray(textField_1 === null || textField_1 === void 0 ? void 0 : textField_1.childNodes);
                var startNodeTextContent = (_b = (_a = childNodes[startNodeIndex]) === null || _a === void 0 ? void 0 : _a.textContent) !== null && _b !== void 0 ? _b : '';
                var frontTextNode = document === null || document === void 0 ? void 0 : document.createTextNode(startNodeTextContent.slice(0, startOffsetIndex));
                var endNodeTextContent = (_d = (_c = childNodes[endNodeIndex]) === null || _c === void 0 ? void 0 : _c.textContent) !== null && _d !== void 0 ? _d : '';
                var backTextNode = endOffsetIndex && (document === null || document === void 0 ? void 0 : document.createTextNode("\u00A0".concat(endNodeTextContent.slice(endOffsetIndex))));
                var mentionLabel = renderToString({
                    userId: mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.userId,
                    nickname: "".concat(USER_MENTION_TEMP_CHAR).concat((mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.nickname) || stringSet.MENTION_NAME__NO_NAME),
                });
                var div = document.createElement('div');
                div.innerHTML = mentionLabel;
                var newNodes = __spreadArray(__spreadArray(__spreadArray([], childNodes.slice(0, startNodeIndex), true), [
                    frontTextNode,
                    div.childNodes[0],
                    backTextNode
                ], false), childNodes.slice(endNodeIndex + 1), true);
                if (textField_1) {
                    textField_1.innerHTML = '';
                    newNodes.forEach(function (newNode) {
                        if (newNode) {
                            textField_1.appendChild(newNode);
                        }
                    });
                }
                onUserMentioned(mentionSelectedUser);
                if (window.getSelection || document.getSelection) {
                    // set caret postion
                    var selection = window.getSelection() || document.getSelection();
                    selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();
                    var range = new Range();
                    range.selectNodeContents(textField_1);
                    range.setStart(textField_1.childNodes[startNodeIndex + 2], 1);
                    range.setEnd(textField_1.childNodes[startNodeIndex + 2], 1);
                    range.collapse(false);
                    selection === null || selection === void 0 ? void 0 : selection.addRange(range);
                    textField_1.focus();
                }
                setTargetStringInfo(__assign({}, initialTargetStringInfo));
                setHeight();
                useMentionedLabelDetection();
            }
        }
    }, [mentionSelectedUser, isMentionEnabled]);
    // #Mention | Detect mentioning user nickname
    var useMentionInputDetection = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        var _a, _b;
        var selection = ((_a = window === null || window === void 0 ? void 0 : window.getSelection) === null || _a === void 0 ? void 0 : _a.call(window)) || ((_b = document === null || document === void 0 ? void 0 : document.getSelection) === null || _b === void 0 ? void 0 : _b.call(document));
        var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
        if ((selection === null || selection === void 0 ? void 0 : selection.anchorNode) === textField) {
            onMentionStringChange('');
        }
        if (isMentionEnabled
            && textField
            && selection
            && selection.anchorNode === selection.focusNode
            && selection.anchorOffset === selection.focusOffset) {
            var textStack = '';
            var startNodeIndex = null;
            var startOffsetIndex = null;
            var _loop_1 = function (index) {
                var currentNode = textField.childNodes[index];
                if (currentNode.nodeType === NodeTypes.TextNode) {
                    /* text node */
                    var textContent = (function () {
                        var _a;
                        if (currentNode === selection.anchorNode) {
                            return (currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent) ? currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent.slice(0, selection.anchorOffset) : '';
                        }
                        return (_a = currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent) !== null && _a !== void 0 ? _a : '';
                    })();
                    if (textStack.length > 0) {
                        textStack += textContent;
                    }
                    else {
                        var charLastIndex = textContent.lastIndexOf(USER_MENTION_TEMP_CHAR);
                        for (var i = charLastIndex - 1; i > -1; i -= 1) {
                            if (textContent[i] === USER_MENTION_TEMP_CHAR) {
                                charLastIndex = i;
                            }
                            else {
                                break;
                            }
                        }
                        if (charLastIndex > -1) {
                            textStack = textContent;
                            startNodeIndex = index;
                            startOffsetIndex = charLastIndex;
                        }
                    }
                }
                else {
                    /* other nodes */
                    textStack = '';
                    startNodeIndex = null;
                    startOffsetIndex = null;
                }
                if (currentNode === selection.anchorNode) {
                    /**
                     * targetString could be ''
                     * startNodeIndex and startOffsetIndex could be null
                     */
                    var targetString = textStack && startOffsetIndex ? textStack.slice(startOffsetIndex) : ''; // include template character
                    setTargetStringInfo({
                        targetString: targetString,
                        startNodeIndex: startNodeIndex,
                        startOffsetIndex: startOffsetIndex,
                        endNodeIndex: index,
                        endOffsetIndex: selection.anchorOffset,
                    });
                    onMentionStringChange(targetString);
                    return { value: void 0 };
                }
            };
            for (var index = 0; index < textField.childNodes.length; index += 1) {
                var state_1 = _loop_1(index);
                if (typeof state_1 === "object")
                    return state_1.value;
            }
        }
    }, [isMentionEnabled]);
    var sendMessage = function () {
        var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
        if (!isEdit && (textField === null || textField === void 0 ? void 0 : textField.textContent)) {
            var _a = extractTextAndMentions(textField.childNodes), messageText = _a.messageText, mentionTemplate = _a.mentionTemplate;
            var params = { message: messageText, mentionTemplate: mentionTemplate };
            onSendMessage(params);
            resetInput(internalRef);
            // important: keeps the keyboard open -> must add test on refactor
            textField.focus();
            setIsInput(false);
            setHeight();
        }
    };
    var isEditDisabled = !((_b = (_a = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _a === void 0 ? void 0 : _a.textContent) === null || _b === void 0 ? void 0 : _b.trim());
    var editMessage = function () {
        var textField = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current;
        var messageId = message === null || message === void 0 ? void 0 : message.messageId;
        if (isEdit && messageId && textField) {
            var _a = extractTextAndMentions(textField.childNodes), messageText = _a.messageText, mentionTemplate = _a.mentionTemplate;
            var params = { messageId: messageId, message: messageText, mentionTemplate: mentionTemplate };
            onUpdateMessage(params);
            resetInput(internalRef);
        }
    };
    var onPaste = usePaste({
        ref: internalRef,
        setMentionedUsers: setMentionedUsers,
        channel: channel,
        setIsInput: setIsInput,
        setHeight: setHeight,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", { className: getClassName([
            className,
            isEdit ? 'sendbird-message-input__edit' : '',
            disabled ? 'sendbird-message-input-form__disabled' : '',
        ]) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-message-input', disabled ? 'sendbird-message-input__disabled' : '']) },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { id: "".concat(textFieldId).concat(isEdit ? message === null || message === void 0 ? void 0 : message.messageId : ''), className: "sendbird-message-input--textarea ".concat(textFieldId), contentEditable: !disabled, role: "textbox", "aria-label": "Text Input", ref: externalRef, 
                // @ts-ignore
                disabled: disabled, maxLength: maxLength, onKeyDown: function (e) {
                    var _a, _b, _c, _d;
                    var preventEvent = onKeyDown(e);
                    if (preventEvent) {
                        e.preventDefault();
                    }
                    else {
                        if (!e.shiftKey
                            && e.key === MessageInputKeys.Enter
                            && !isMobile
                            && ((_a = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _a === void 0 ? void 0 : _a.textContent)
                            && internalRef.current.textContent.trim().length > 0
                            && ((_b = e === null || e === void 0 ? void 0 : e.nativeEvent) === null || _b === void 0 ? void 0 : _b.isComposing) !== true
                        /**
                         * NOTE: What isComposing does?
                         * Check if the user has finished composing characters
                         * (e.g., for languages like Korean, Japanese, where characters are composed from multiple keystrokes)
                         * Prevents executing the code while the user is still composing characters.
                         */
                        ) {
                            /**
                             * NOTE: contentEditable does not work as expected in mobile WebKit(Safari).
                             * Events and properties related to composing, necessary for combining characters like Hangul, also seem to be not handled properly.
                             * When calling e.preventDefault(), it appears that string composition-related behaviors, in addition to the default actions, are also prevented. (maybe)
                             *
                             * Due to this issue, even though reset the input with innerHTML, incomplete text compositions from the previous input are displayed in the next input.
                             * */
                            if (!isMobileIOS(navigator.userAgent)) {
                                e.preventDefault();
                            }
                            sendMessage();
                        }
                        if (e.key === MessageInputKeys.Backspace
                            && ((_d = (_c = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _c === void 0 ? void 0 : _c.childNodes) === null || _d === void 0 ? void 0 : _d.length) === 2
                            && !internalRef.current.childNodes[0].textContent
                            && internalRef.current.childNodes[1].nodeType === NodeTypes.ElementNode) {
                            internalRef.current.removeChild(internalRef.current.childNodes[1]);
                        }
                    }
                }, onKeyUp: function (e) {
                    var preventEvent = onKeyUp(e);
                    if (preventEvent) {
                        e.preventDefault();
                    }
                    else {
                        useMentionInputDetection();
                    }
                }, onClick: function () {
                    useMentionInputDetection();
                }, onInput: function () {
                    var _a;
                    setHeight();
                    onStartTyping();
                    setIsInput(((_a = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _a === void 0 ? void 0 : _a.textContent) ? internalRef.current.textContent.trim().length > 0 : false);
                    useMentionedLabelDetection();
                }, onPaste: onPaste }),
            ((_e = (_d = (_c = internalRef === null || internalRef === void 0 ? void 0 : internalRef.current) === null || _c === void 0 ? void 0 : _c.textContent) === null || _d === void 0 ? void 0 : _d.length) !== null && _e !== void 0 ? _e : 0) === 0 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-input--placeholder", type: LabelTypography.BODY_1, color: disabled ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_3 }, placeholder || stringSet.MESSAGE_INPUT__PLACE_HOLDER)),
            !isEdit && isInput && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-message-input--send", height: "32px", width: "32px", onClick: function () { return sendMessage(); } }, (renderSendMessageIcon === null || renderSendMessageIcon === void 0 ? void 0 : renderSendMessageIcon()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SEND, fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY, width: "20px", height: "20px" })))),
            !isEdit
                && !isInput
                && ((renderFileUploadIcon === null || renderFileUploadIcon === void 0 ? void 0 : renderFileUploadIcon())
                    // UIKit Dashboard configuration should have lower priority than
                    // renderFileUploadIcon which is set in code level
                    || (isFileUploadEnabled && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: classnames('sendbird-message-input--attach', isVoiceMessageEnabled && 'is-voice-message-enabled'), height: "32px", width: "32px", onClick: function () {
                            var _a, _b;
                            // todo: clear previous input
                            (_b = (_a = fileInputRef === null || fileInputRef === void 0 ? void 0 : fileInputRef.current) === null || _a === void 0 ? void 0 : _a.click) === null || _b === void 0 ? void 0 : _b.call(_a);
                        } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.ATTACH, fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT_INVERSE, width: "20px", height: "20px" }),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { className: "sendbird-message-input--attach-input", type: "file", ref: fileInputRef, 
                            // It will affect to <Channel /> and <Thread />
                            onChange: function (event) {
                                var files = event.currentTarget.files;
                                if (files) {
                                    onFileUpload(files && files.length === 1 ? [files[0]] : Array.from(files));
                                }
                                event.target.value = '';
                            }, accept: getMimeTypesUIKitAccepts(acceptableMimeTypes), multiple: isSelectingMultipleFilesEnabled && isChannelTypeSupportsMultipleFilesMessage(channel) }))))),
            isVoiceMessageEnabled && !isEdit && !isInput && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-message-input--voice-message", width: "32px", height: "32px", onClick: onVoiceMessageIconClick }, (renderVoiceMessageIcon === null || renderVoiceMessageIcon === void 0 ? void 0 : renderVoiceMessageIcon()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.AUDIO_ON_LINED, fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT_INVERSE, width: "20px", height: "20px" }))))),
        isEdit && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-input--edit-action" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { className: "sendbird-message-input--edit-action__cancel", type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: onCancelEdit }, stringSet.BUTTON__CANCEL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { className: "sendbird-message-input--edit-action__save", type: ButtonTypes.PRIMARY, size: ButtonSizes.SMALL, disabled: isEditDisabled, onClick: function () { return editMessage(); } }, stringSet.BUTTON__SAVE)))));
});


//# sourceMappingURL=MessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-D1rcEkoi.js


/**
 * @name startOfDay
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|Number} date - the original date
 * @returns {Date} the start of a day
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */
function startOfDay(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}

/**
 * @name isSameDay
 * @category Day Helpers
 * @summary Are the given dates in the same day (and year and month)?
 *
 * @description
 * Are the given dates in the same day (and year and month)?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day (and year and month)
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))
 * //=> true
 *
 * @example
 * // Are 4 September and 4 October in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))
 * //=> false
 *
 * @example
 * // Are 4 September, 2014 and 4 September, 2015 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))
 * //=> false
 */
function isSameDay(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);
  var dateRightStartOfDay = startOfDay(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}


//# sourceMappingURL=bundle-D1rcEkoi.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BWiA6-mB.js



/**
 * @name isToday
 * @category Day Helpers
 * @summary Is the given date today?
 * @pure false
 *
 * @description
 * Is the given date today?
 *
 * >  Please note that this function is not present in the FP submodule as
 * > it uses `Date.now()` internally hence impure and can't be safely curried.
 *
 * @param {Date|Number} date - the date to check
 * @returns {Boolean} the date is today
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // If today is 6 October 2014, is 6 October 14:00:00 today?
 * const result = isToday(new Date(2014, 9, 6, 14, 0))
 * //=> true
 */
function isToday(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameDay(dirtyDate, Date.now());
}

/**
 * @name isSameYear
 * @category Year Helpers
 * @summary Are the given dates in the same year?
 *
 * @description
 * Are the given dates in the same year?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same year
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 2 September 2014 and 25 September 2014 in the same year?
 * const result = isSameYear(new Date(2014, 8, 2), new Date(2014, 8, 25))
 * //=> true
 */
function isSameYear(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeft = toDate(dirtyDateLeft);
  var dateRight = toDate(dirtyDateRight);
  return dateLeft.getFullYear() === dateRight.getFullYear();
}

/**
 * @name isThisYear
 * @category Year Helpers
 * @summary Is the given date in the same year as the current date?
 * @pure false
 *
 * @description
 * Is the given date in the same year as the current date?
 *
 * >  Please note that this function is not present in the FP submodule as
 * > it uses `Date.now()` internally hence impure and can't be safely curried.
 *
 * @param {Date|Number} date - the date to check
 * @returns {Boolean} the date is in this year
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // If today is 25 September 2014, is 2 July 2014 in this year?
 * const result = isThisYear(new Date(2014, 6, 2))
 * //=> true
 */
function isThisYear(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameYear(dirtyDate, Date.now());
}

/**
 * @name addDays
 * @category Day Helpers
 * @summary Add the specified number of days to the given date.
 *
 * @description
 * Add the specified number of days to the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} - the new date with the days added
 * @throws {TypeError} - 2 arguments required
 *
 * @example
 * // Add 10 days to 1 September 2014:
 * const result = addDays(new Date(2014, 8, 1), 10)
 * //=> Thu Sep 11 2014 00:00:00
 */
function addDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var date = toDate(dirtyDate);
  var amount = toInteger(dirtyAmount);
  if (isNaN(amount)) {
    return new Date(NaN);
  }
  if (!amount) {
    // If 0 days, no-op to avoid changing times in the hour before end of DST
    return date;
  }
  date.setDate(date.getDate() + amount);
  return date;
}

/**
 * @name subDays
 * @category Day Helpers
 * @summary Subtract the specified number of days from the given date.
 *
 * @description
 * Subtract the specified number of days from the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of days to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the days subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 10 days from 1 September 2014:
 * const result = subDays(new Date(2014, 8, 1), 10)
 * //=> Fri Aug 22 2014 00:00:00
 */
function subDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addDays(dirtyDate, -amount);
}

/**
 * @name isYesterday
 * @category Day Helpers
 * @summary Is the given date yesterday?
 * @pure false
 *
 * @description
 * Is the given date yesterday?
 *
 * >  Please note that this function is not present in the FP submodule as
 * > it uses `Date.now()` internally hence impure and can't be safely curried.
 *
 * @param {Date|Number} date - the date to check
 * @returns {Boolean} the date is yesterday
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // If today is 6 October 2014, is 5 October 14:00:00 yesterday?
 * const result = isYesterday(new Date(2014, 9, 5, 14, 0))
 * //=> true
 */
function isYesterday(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameDay(dirtyDate, subDays(Date.now(), 1));
}


//# sourceMappingURL=bundle-BWiA6-mB.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-C3gISq8S.js












var bundle_C3gISq8S_getChannelTitle = function (channel, currentUserId, stringSet) {
    var _a;
    if (stringSet === void 0) { stringSet = LabelStringSet; }
    if (!(channel === null || channel === void 0 ? void 0 : channel.name) && !(channel === null || channel === void 0 ? void 0 : channel.members)) {
        return stringSet.NO_TITLE;
    }
    if ((channel === null || channel === void 0 ? void 0 : channel.name) && channel.name !== 'Group Channel') {
        return channel.name;
    }
    if (((_a = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a === void 0 ? void 0 : _a.length) === 1) {
        return stringSet.NO_MEMBERS;
    }
    return ((channel === null || channel === void 0 ? void 0 : channel.members) || [])
        .filter(function (_a) {
        var userId = _a.userId;
        return userId !== currentUserId;
    })
        .map(function (_a) {
        var nickname = _a.nickname;
        return nickname || stringSet.NO_NAME;
    })
        .join(', ');
};
var getLastMessageCreatedAt = function (_a) {
    var _b;
    var channel = _a.channel, locale = _a.locale, _c = _a.stringSet, stringSet = _c === void 0 ? LabelStringSet : _c;
    var createdAt = (_b = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _b === void 0 ? void 0 : _b.createdAt;
    var optionalParam = locale ? { locale: locale } : null;
    if (!createdAt) {
        return '';
    }
    if (isToday(createdAt)) {
        return format(createdAt, 'p', optionalParam);
    }
    if (isYesterday(createdAt)) {
        return stringSet.MESSAGE_STATUS__YESTERDAY || 'Yesterday';
    }
    if (isThisYear(createdAt)) {
        return format(createdAt, 'MMM d', optionalParam);
    }
    return format(createdAt, 'yyyy/M/d', optionalParam);
};
var getTotalMembers = function (channel) { return ((channel === null || channel === void 0 ? void 0 : channel.memberCount) ? channel.memberCount : 0); };
var getChannelPreviewFileDisplayString = function (mimeType, stringSet) {
    var _a, _b, _c, _d, _e, _f;
    if (stringSet === void 0) { stringSet = LabelStringSet; }
    if (isGif(mimeType)) {
        return (_a = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF) !== null && _a !== void 0 ? _a : '';
    }
    if (isImage(mimeType)) {
        return (_b = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO) !== null && _b !== void 0 ? _b : '';
    }
    if (isVideo(mimeType)) {
        return (_c = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO) !== null && _c !== void 0 ? _c : '';
    }
    if (isAudio(mimeType)) {
        return (_d = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO) !== null && _d !== void 0 ? _d : '';
    }
    if (isVoiceMessageMimeType(mimeType)) {
        return (_e = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE) !== null && _e !== void 0 ? _e : '';
    }
    return (_f = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL) !== null && _f !== void 0 ? _f : '';
};
var getPrettyLastMessage = function (message, stringSet) {
    var _a, _b, _c, _d;
    if (message === void 0) { message = null; }
    if (stringSet === void 0) { stringSet = LabelStringSet; }
    if (!message)
        return '';
    if (isTemplateMessage(message)) {
        return stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE;
    }
    if (message.isFileMessage()) {
        return getChannelPreviewFileDisplayString(message.type, stringSet);
    }
    if (message.isMultipleFilesMessage()) {
        var mimeType = (_b = (_a = message.fileInfoList) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.mimeType;
        if (isImage(mimeType) || isGif(mimeType)) {
            return (_c = stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO) !== null && _c !== void 0 ? _c : '';
        }
        return getChannelPreviewFileDisplayString(mimeType, stringSet);
    }
    return (_d = message.message) !== null && _d !== void 0 ? _d : '';
};
var getLastMessage = function (channel, stringSet) {
    if (stringSet === void 0) { stringSet = LabelStringSet; }
    return (channel === null || channel === void 0 ? void 0 : channel.lastMessage) ? getPrettyLastMessage(channel === null || channel === void 0 ? void 0 : channel.lastMessage, stringSet) : '';
};
var getChannelUnreadMessageCount = function (channel) { return (channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) ? channel.unreadMessageCount : 0; };

var bundle_C3gISq8S_a, bundle_C3gISq8S_b;
var MessageStatusTypes = OutgoingMessageStates;
var iconType = (bundle_C3gISq8S_a = {},
    bundle_C3gISq8S_a[OutgoingMessageStates.SENT] = IconTypes.DONE,
    bundle_C3gISq8S_a[OutgoingMessageStates.DELIVERED] = IconTypes.DONE_ALL,
    bundle_C3gISq8S_a[OutgoingMessageStates.READ] = IconTypes.DONE_ALL,
    bundle_C3gISq8S_a[OutgoingMessageStates.FAILED] = IconTypes.ERROR,
    bundle_C3gISq8S_a[OutgoingMessageStates.PENDING] = undefined,
    bundle_C3gISq8S_a[OutgoingMessageStates.NONE] = undefined,
    bundle_C3gISq8S_a);
var iconColor = (bundle_C3gISq8S_b = {},
    bundle_C3gISq8S_b[OutgoingMessageStates.SENT] = IconColors.SENT,
    bundle_C3gISq8S_b[OutgoingMessageStates.DELIVERED] = IconColors.SENT,
    bundle_C3gISq8S_b[OutgoingMessageStates.READ] = IconColors.READ,
    bundle_C3gISq8S_b[OutgoingMessageStates.FAILED] = IconColors.ERROR,
    bundle_C3gISq8S_b[OutgoingMessageStates.PENDING] = undefined,
    bundle_C3gISq8S_b[OutgoingMessageStates.NONE] = undefined,
    bundle_C3gISq8S_b);
function MessageStatus(_a) {
    var _b;
    var className = _a.className, message = _a.message, channel = _a.channel, _c = _a.isDateSeparatorConsidered, isDateSeparatorConsidered = _c === void 0 ? true : _c;
    var _d = useLocalization(), stringSet = _d.stringSet, dateLocale = _d.dateLocale;
    var status = getOutgoingMessageState(channel, message);
    var hideMessageStatusIcon = ((_b = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _b === void 0 ? void 0 : _b.call(channel)) && ((channel.isSuper || channel.isPublic || channel.isBroadcast)
        && !(status === OutgoingMessageStates.PENDING || status === OutgoingMessageStates.FAILED));
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-message-status',
        ], false).join(' ') },
        (status === OutgoingMessageStates.PENDING) ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { className: "sendbird-message-status__icon", width: "16px", height: "16px" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" }))) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: classnames('sendbird-message-status__icon', hideMessageStatusIcon && 'hide-icon', status !== OutgoingMessageStates.FAILED && 'sendbird-message-status--sent'), type: iconType[status] || IconTypes.ERROR, fillColor: iconColor[status], width: "16px", height: "16px" })),
        isSentStatus(status) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-status__text", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, isDateSeparatorConsidered
            ? format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, 'p', { locale: dateLocale })
            : getLastMessageCreatedAt({ channel: channel, locale: dateLocale, stringSet: stringSet })))));
}


//# sourceMappingURL=bundle-C3gISq8S.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Boh0Ffwo.js
// note to SDK team:
// using enum inside .d.ts wont work for jest, but const enum will work.
var Role = {
    OPERATOR: 'operator',
    NONE: 'none',
};


//# sourceMappingURL=bundle-Boh0Ffwo.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageItemMenu.js





















function MessageMenu(props) {
    var _a;
    var className = props.className, message = props.message, channel = props.channel, _b = props.isByMe, isByMe = _b === void 0 ? false : _b, _c = props.disabled, disabled = _c === void 0 ? false : _c, replyType = props.replyType, _d = props.disableDeleteMessage, disableDeleteMessage = _d === void 0 ? null : _d, showEdit = props.showEdit, showRemove = props.showRemove, deleteMessage = props.deleteMessage, resendMessage = props.resendMessage, setQuoteMessage = props.setQuoteMessage, setSupposedHover = props.setSupposedHover, onReplyInThread = props.onReplyInThread, _e = props.onMoveToParentMessage, onMoveToParentMessage = _e === void 0 ? null : _e;
    var _f = deleteNullish(props).renderMenuItem, renderMenuItem = _f === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, __assign({}, props), props.text); } : _f;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var triggerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var containerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var showMenuItemCopy = isUserMessage(message);
    var showMenuItemEdit = (!(channel === null || channel === void 0 ? void 0 : channel.isEphemeral) && isUserMessage(message) && isSentMessage(message) && isByMe);
    var showMenuItemResend = (isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe);
    var showMenuItemDelete = !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral) && !isPendingMessage(message) && isByMe;
    var showMenuItemOpenInChannel = onMoveToParentMessage !== null;
    /**
     * TODO: Manage timing issue
     * User delete pending message -> Sending message success
     */
    var isReplyTypeEnabled = !isFailedMessage(message)
        && !isPendingMessage(message)
        && (((_a = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _a === void 0 ? void 0 : _a.call(channel))
            && !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral)
            && (((channel === null || channel === void 0 ? void 0 : channel.isBroadcast) && (channel === null || channel === void 0 ? void 0 : channel.myRole) === Role.OPERATOR)
                || !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast)));
    var showMenuItemReply = isReplyTypeEnabled && replyType === 'QUOTE_REPLY';
    var showMenuItemThread = isReplyTypeEnabled && replyType === 'THREAD' && !(message === null || message === void 0 ? void 0 : message.parentMessageId) && onReplyInThread;
    if (!(showMenuItemCopy
        || showMenuItemReply
        || showMenuItemThread
        || showMenuItemOpenInChannel
        || showMenuItemEdit
        || showMenuItemResend
        || showMenuItemDelete)) {
        return null;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([className !== null && className !== void 0 ? className : '', 'sendbird-message-item-menu']), ref: containerRef },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-message-item-menu__trigger", ref: triggerRef, width: "32px", height: "32px", onClick: function () {
                    toggleDropdown();
                    setSupposedHover === null || setSupposedHover === void 0 ? void 0 : setSupposedHover(true);
                }, onBlur: function () {
                    setSupposedHover === null || setSupposedHover === void 0 ? void 0 : setSupposedHover(false);
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-message-item-menu__trigger__icon", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: "24px", height: "24px" }))); }, menuItems: function (close) {
                var _a, _b;
                var closeDropdown = function () {
                    close();
                    setSupposedHover === null || setSupposedHover === void 0 ? void 0 : setSupposedHover(false);
                };
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { className: "sendbird-message-item-menu__list", parentRef: triggerRef, parentContainRef: containerRef, closeDropdown: closeDropdown, openLeft: isByMe },
                    showMenuItemCopy && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-copy',
                        onClick: function () {
                            bundle_janisM9b_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
                            closeDropdown();
                        },
                        dataSbId: 'ui_message_item_menu_copy',
                        text: stringSet.MESSAGE_MENU__COPY,
                    })),
                    showMenuItemReply && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-reply',
                        onClick: function () {
                            setQuoteMessage === null || setQuoteMessage === void 0 ? void 0 : setQuoteMessage(message);
                            closeDropdown();
                        },
                        disable: (message === null || message === void 0 ? void 0 : message.parentMessageId) > 0,
                        dataSbId: 'ui_message_item_menu_reply',
                        text: stringSet.MESSAGE_MENU__REPLY,
                    })),
                    showMenuItemThread && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-thread',
                        onClick: function () {
                            onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message });
                            closeDropdown();
                        },
                        dataSbId: 'ui_message_item_menu_thread',
                        text: stringSet.MESSAGE_MENU__THREAD,
                    })),
                    showMenuItemOpenInChannel && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-open-channel',
                        onClick: function () {
                            onMoveToParentMessage === null || onMoveToParentMessage === void 0 ? void 0 : onMoveToParentMessage();
                            closeDropdown();
                        },
                        dataSbId: 'ui_message_item_menu_open_in_channel',
                        text: stringSet.MESSAGE_MENU__OPEN_IN_CHANNEL,
                    })),
                    showMenuItemEdit && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-edit',
                        onClick: function () {
                            if (!disabled) {
                                showEdit === null || showEdit === void 0 ? void 0 : showEdit(true);
                                closeDropdown();
                            }
                        },
                        dataSbId: 'ui_message_item_menu_edit',
                        text: stringSet.MESSAGE_MENU__EDIT,
                    })),
                    showMenuItemResend && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-resend',
                        onClick: function () {
                            if (!disabled) {
                                resendMessage === null || resendMessage === void 0 ? void 0 : resendMessage(message);
                                closeDropdown();
                            }
                        },
                        dataSbId: 'ui_message_item_menu_resend',
                        text: stringSet.MESSAGE_MENU__RESEND,
                    })),
                    showMenuItemDelete && (renderMenuItem({
                        className: 'sendbird-message-item-menu__list__menu-item menu-item-delete',
                        onClick: function () {
                            if (isFailedMessage(message)) {
                                deleteMessage === null || deleteMessage === void 0 ? void 0 : deleteMessage(message);
                            }
                            else if (!disabled) {
                                showRemove === null || showRemove === void 0 ? void 0 : showRemove(true);
                                closeDropdown();
                            }
                        },
                        disable: (typeof disableDeleteMessage === 'boolean'
                            ? disableDeleteMessage
                            : ((_b = (_a = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _a === void 0 ? void 0 : _a.replyCount) !== null && _b !== void 0 ? _b : 0) > 0),
                        dataSbId: 'ui_message_item_menu_delete',
                        text: stringSet.MESSAGE_MENU__DELETE,
                    }))));
            } })));
}


//# sourceMappingURL=MessageItemMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-RoB3xpYU.js




var DEFAULT_DURATION = 300;
function preventDefault(e) {
    if (!isTouchEvent(e)) {
        return;
    }
    if (e.touches.length < 2 && e.preventDefault) {
        e.preventDefault();
    }
}
function isTouchEvent(e) {
    return e && 'touches' in e;
}
function useLongPress(_a, _b) {
    var onLongPress = _a.onLongPress, onClick = _a.onClick;
    var _c = _b === void 0 ? {} : _b, _d = _c.delay, delay = _d === void 0 ? DEFAULT_DURATION : _d, _e = _c.shouldPreventDefault, shouldPreventDefault = _e === void 0 ? true : _e, _f = _c.shouldStopPropagation, shouldStopPropagation = _f === void 0 ? false : _f;
    var isMobile = useMediaQueryContext().isMobile;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), longPressTriggered = _g[0], setLongPressTriggered = _g[1];
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), dragTriggered = _h[0], setDragTriggered = _h[1];
    // https://www.typescriptlang.org/docs/handbook/utility-types.html#returntypetype
    var timeout = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var target = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var start = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (e) {
        e.persist();
        var clonedEvent = __assign({}, e);
        setDragTriggered(false);
        if (shouldStopPropagation) {
            e.stopPropagation();
        }
        if (shouldPreventDefault && e.target) {
            e.target.addEventListener('touchend', preventDefault, {
                passive: false,
            });
            target.current = e.target;
        }
        timeout.current = setTimeout(function () {
            onLongPress(clonedEvent);
            setLongPressTriggered(true);
        }, delay);
    }, [onLongPress, delay, shouldPreventDefault, shouldStopPropagation, isMobile]);
    var clear = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (e, shouldTriggerClick, onDrag) {
        if (shouldTriggerClick === void 0) { shouldTriggerClick = true; }
        if (onDrag === void 0) { onDrag = false; }
        if (onDrag) {
            setDragTriggered(true);
        }
        else {
            setDragTriggered(false);
        }
        if (timeout === null || timeout === void 0 ? void 0 : timeout.current) {
            clearTimeout(timeout.current);
        }
        if (shouldTriggerClick && !longPressTriggered && !dragTriggered) {
            onClick === null || onClick === void 0 ? void 0 : onClick(e);
        }
        setLongPressTriggered(false);
        if (shouldPreventDefault && target.current) {
            target.current.removeEventListener('touchend', preventDefault);
        }
    }, [shouldPreventDefault, onClick, longPressTriggered, dragTriggered]);
    return {
        onMouseDown: function (e) { return start(e); },
        onMouseUp: function (e) { return clear(e); },
        onMouseLeave: function (e) { return clear(e, false); },
        onTouchStart: function (e) { return start(e); },
        // setDragTriggered as true on touchmove, so that next onTouchEnd is ignored
        // if we dont do it, onClick?.(e) will be triggred, see inside clear()
        onTouchMove: function (e) { return clear(e, false, true); },
        onTouchEnd: function (e) { return clear(e); },
    };
}


//# sourceMappingURL=bundle-RoB3xpYU.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ReactionButton.js






var ReactionButton = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var className = props.className, width = props.width, height = props.height, selected = props.selected, _a = props.dataSbId, dataSbId = _a === void 0 ? '' : _a, onClick = props.onClick, children = props.children;
    var onClickHandler = useLongPress({
        onLongPress: noop,
        onClick: onClick,
    }, {
        shouldPreventDefault: true,
        shouldStopPropagation: true,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            "sendbird-reaction-button".concat(selected ? '--selected' : ''),
        ], false).join(' '), ref: ref, role: "button", style: { width: width, height: height } }, onClickHandler, { tabIndex: 0, "data-sb-id": dataSbId }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-reaction-button__inner" }, children)));
});


//# sourceMappingURL=ReactionButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageItemReactionMenu.js






















function MessageEmojiMenu(_a) {
    var className = _a.className, message = _a.message, userId = _a.userId, _b = _a.spaceFromTrigger, spaceFromTrigger = _b === void 0 ? { x: 0, y: 0 } : _b, emojiContainer = _a.emojiContainer, toggleReaction = _a.toggleReaction, setSupposedHover = _a.setSupposedHover;
    var triggerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var containerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    if (isPendingMessage(message) || isFailedMessage(message)) {
        return null;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([className !== null && className !== void 0 ? className : '', 'sendbird-message-item-reaction-menu']), ref: containerRef },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-message-item-reaction-menu__trigger", ref: triggerRef, width: "32px", height: "32px", onClick: function () {
                    toggleDropdown();
                    setSupposedHover === null || setSupposedHover === void 0 ? void 0 : setSupposedHover(true);
                }, onBlur: function () {
                    setSupposedHover === null || setSupposedHover === void 0 ? void 0 : setSupposedHover(false);
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-message-item-reaction-menu__trigger__icon", type: IconTypes.EMOJI_MORE, fillColor: IconColors.CONTENT_INVERSE, width: "24px", height: "24px" }))); }, menuItems: function (close) {
                var closeDropdown = function () {
                    close();
                    setSupposedHover === null || setSupposedHover === void 0 ? void 0 : setSupposedHover(false);
                };
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiListItems, { parentRef: triggerRef, parentContainRef: containerRef, closeDropdown: closeDropdown, spaceFromTrigger: spaceFromTrigger }, emojiContainer && getEmojiListAll(emojiContainer).map(function (emoji) {
                    var _a, _b, _c;
                    var isReacted = ((_c = (_b = (_a = message === null || message === void 0 ? void 0 : message.reactions) === null || _a === void 0 ? void 0 : _a.find(function (reaction) { return reaction.key === emoji.key; })) === null || _b === void 0 ? void 0 : _b.userIds) === null || _c === void 0 ? void 0 : _c.some(function (reactorId) { return reactorId === userId; })) || false;
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, { key: emoji.key, width: "36px", height: "36px", selected: isReacted, onClick: function () {
                            closeDropdown();
                            toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);
                        }, dataSbId: "ui_emoji_reactions_menu_".concat(emoji.key) },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: emoji.url, width: "28px", height: "28px", placeHolder: function (_a) {
                                var style = _a.style;
                                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: "28px", height: "28px" })));
                            } })));
                })));
            } })));
}


//# sourceMappingURL=MessageItemReactionMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ReactionBadge.js





var ReactionBadge = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var _a = props.className, className = _a === void 0 ? '' : _a, children = props.children, _b = props.count, count = _b === void 0 ? '' : _b, _c = props.isAdd, isAdd = _c === void 0 ? false : _c, _d = props.selected, selected = _d === void 0 ? false : _d, _e = props.onClick, onClick = _e === void 0 ? function () { } : _e;
    var getClassNameTail = function () {
        if (selected && !isAdd) {
            return '--selected';
        }
        if (isAdd) {
            return '--is-add';
        }
        return '';
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            "sendbird-reaction-badge".concat(getClassNameTail()),
        ], false).join(' '), role: "button", ref: ref, onClick: onClick, onKeyDown: onClick, onTouchEnd: onClick, tabIndex: 0 },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-reaction-badge__inner" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-reaction-badge__inner__icon" }, children),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: (children && count) ? 'sendbird-reaction-badge__inner__count' : '', type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_1 }, count))));
});


//# sourceMappingURL=ReactionBadge.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/BottomSheet.js



























var BottomSheet = function (props) {
    var _a, _b, _c;
    var _d = props.className, className = _d === void 0 ? '' : _d, children = props.children, onBackdropClick = props.onBackdropClick;
    var logger = (_b = (_a = useSendbirdStateContext()) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.logger;
    // https://github.com/testing-library/react-testing-library/issues/62#issuecomment-438653348
    var portalRoot = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    portalRoot.current = document.getElementById(MODAL_ROOT);
    if (!portalRoot.current) {
        portalRoot.current = document.createElement('div');
        portalRoot.current.setAttribute('id', MODAL_ROOT);
        document.body.appendChild(portalRoot.current);
        (_c = logger === null || logger === void 0 ? void 0 : logger.warning) === null || _c === void 0 ? void 0 : _c.call(logger, '@sendbird/uikit-react/ui/BottomSheet | Should put a ModalRoot to use the BottomSheet.');
    }
    return Object(react_dom["createPortal"])(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "".concat(className, " sendbird-bottomsheet") },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-bottomsheet__content", role: 'dialog', "aria-modal": 'true', "aria-expanded": 'true' }, children),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-bottomsheet__backdrop", onClick: function (e) {
                e === null || e === void 0 ? void 0 : e.stopPropagation();
                onBackdropClick === null || onBackdropClick === void 0 ? void 0 : onBackdropClick();
            } })), portalRoot.current);
};


//# sourceMappingURL=BottomSheet.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MutedAvatarOverlay.js





function MutedAvatarOverlay(props) {
    var _a = props.height, height = _a === void 0 ? 24 : _a, _b = props.width, width = _b === void 0 ? 24 : _b;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-muted-avatar", style: {
            height: "".concat(height, "px"),
            width: "".concat(width, "px"),
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-muted-avatar__icon" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-muted-avatar__bg", style: {
                    height: "".concat(height, "px"),
                    width: "".concat(width, "px"),
                } }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MUTE, fillColor: IconColors.WHITE, width: "".concat(height - 8, "px"), height: "".concat(width - 8, "px") }))));
}


//# sourceMappingURL=MutedAvatarOverlay.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Checkbox.js


function Checkbox(_a) {
    var id = _a.id, _b = _a.checked, checked = _b === void 0 ? false : _b, disabled = _a.disabled, onChange = _a.onChange;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(checked), isChecked = _c[0], setIsCheck = _c[1];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("label", { className: [
            'sendbird-checkbox',
            disabled ? 'disabled' : '',
        ].join(' '), htmlFor: id },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { disabled: disabled, id: id, type: "checkbox", checked: isChecked, onClick: function () {
                if (!disabled)
                    setIsCheck(!isChecked);
            }, onChange: onChange }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: [
                'sendbird-checkbox--checkmark',
                disabled ? 'disabled' : '',
            ].join(' ') })));
}


//# sourceMappingURL=Checkbox.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/sendbirdSelectors.js



/**
 * 1. UIKit Instances
 *    a. getSdk
 *    b. getPubSub
 * 2. Chat & Connection
 *    a. getConnect
 *    b. getDisconnect
 *    c. getUpdateUserInfo
 * 3. Channel
 *    a. getCreateGroupChannel
 *    b. getCreateOpenChannel
 *    c. getGetGroupChannel
 *    d. getGetOpenChannel
 *    e. getLeaveGroupChannel
 *    f. getEnterOpenChannel
 *    g. getExitOpenChannel
 *    h. getFreezeChannel
 *    i. getUnfreezeChannel
 * 4. Message
 *    a. getSendUserMessage
 *    b. getSendFileMessage
 *    c. getUpdateUserMessage
 *    d. x - getUpdateFileMessage
 *    e. getDeleteMessage
 *    f. getResendUserMessage
 *    g. getResendFileMessage
 */
/**
 * import useSendbirdStateContext from '@sendbird-uikit/useSendbirdStateContext'
 * import selectors from '@sendbird-uikit/send'
 * const state = useSendbirdStateContext();
 */
// 1. UIKit Instances
/**
 * const sdk = selectors.getSdk(state);
 */
var getSdk = function (state) {
    var _a = state.stores, stores = _a === void 0 ? {} : _a;
    var _b = stores.sdkStore, sdkStore = _b === void 0 ? {} : _b;
    var sdk = sdkStore.sdk;
    return sdk;
};
/**
 * const pubSub = selectors.getPubSub(state);
 */
var getPubSub = function (state) {
    var _a = state.config, config = _a === void 0 ? {} : _a;
    var pubSub = config.pubSub;
    return pubSub;
};
// 2. Chat & Connection
/**
 * const connect = selectors.getConnect(state);
 * connect('user-id-sendbirdian', 'access-token-0000')
 *  .then((user) => {})
 *  .catch((error) => {})
 */
var getConnect = function (state) { return (function (userId, accessToken) { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!((sdk === null || sdk === void 0 ? void 0 : sdk.connect) && typeof sdk.connect === 'function')) {
        reject(new Error('Not found the function "connect'));
    }
    if (!accessToken) {
        sdk.connect(userId)
            .then(function (res) { return resolve(res); })
            .catch(function (err) { return reject(err); });
    }
    else {
        sdk.connect(userId, accessToken)
            .then(function (res) { return resolve(res); })
            .catch(function (err) { return reject(err); });
    }
})); }); };
/**
 * const disconnect = selectors.getDisconnect(state);
 * disconnect()
 *  .then(() => {})
 *  .catch((error) => {})
 */
var getDisconnect = function (state) { return (function () { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!(sdk.disconnect && typeof sdk.disconnect === 'function')) {
        reject(new Error('Not found the function "disconnect'));
    }
    sdk.disconnect()
        .then(function (res) { return resolve(res); })
        .catch(function (err) { return reject(err); });
})); }); };
/**
 * const updateUserInfo = selectors.getUpdateUserInfo(state);
 * updateUserInfo('new-nickname', 'new-profile-url')
 *  .then((user) => {})
 *  .catch((error) => {})
 */
var getUpdateUserInfo = function (state) { return (function (nickname, profileUrl) { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!(sdk.updateCurrentUserInfo && typeof sdk.updateCurrentUserInfo === 'function')) {
        reject(new Error('Not found the function "updateCurrentUserInfo"'));
    }
    var userParams = { nickname: nickname };
    if (profileUrl) {
        userParams.profileUrl = profileUrl;
    }
    sdk.updateCurrentUserInfo(userParams)
        .then(function (res) { return resolve(res); })
        .catch(function (err) { return reject(err); });
})); }); };
// 3. Channel
/**
 * const createGroupChannel = selectors.getCreateGroupChannel(state);
 * createGroupChannel(channelParams: GroupChannelCreateParams)
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
var getCreateGroupChannel = function (state) { return (function (params) { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    var pubSub = getPubSub(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!sdk.groupChannel) {
        reject(new Error('Not found GroupChannelModule'));
    }
    if (!(sdk.groupChannel.createChannel && typeof sdk.groupChannel.createChannel === 'function')) {
        reject(new Error('Not found the function "createChannel"'));
    }
    sdk.groupChannel.createChannel(params)
        .then(function (channel) {
        resolve(channel);
        pubSub.publish(pubSubTopics.CREATE_CHANNEL, { channel: channel });
    })
        .catch(reject);
})); }); };
/**
 * const createOpenChannel = selectors.getCreateOpenChannel(state);
 * createOpenChannel(channelParams: OpenChannelCreateParams)
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
var getCreateOpenChannel = function (state) { return (function (params) { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    // const pubSub = getPubSub(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!sdk.openChannel) {
        reject(new Error('Not found OpenChannelModule'));
    }
    if (!(sdk.openChannel.createChannel && typeof sdk.openChannel.createChannel === 'function')) {
        reject(new Error('Not found the function "createChannel"'));
    }
    sdk.openChannel.createChannel(params)
        .then(function (channel) {
        resolve(channel);
        // Consider pubSub process
    })
        .catch(reject);
})); }); };
/**
 * const getGroupChannel = selectors.getGetGroupChannel(state);
 * getGroupChannel('channel-url-1234', isSelected)
 *  .then((channel) => {
 *    // groupChannel = channel;
 *    // or
 *    // setCurrentChannel(channel);
 *  })
 *  .catch((error) => {})
 */
var getGetGroupChannel = function (state) { return (function (channelUrl) { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    // const pubSub = getPubSub(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!sdk.groupChannel) {
        reject(new Error('Not found GroupChannelModule'));
    }
    if (!(sdk.groupChannel.getChannel && typeof sdk.groupChannel.getChannel === 'function')) {
        reject(new Error('Not found the function "getChannel"'));
    }
    sdk.groupChannel.getChannel(channelUrl)
        .then(function (channel) {
        resolve(channel);
        // Add pubSub with isSelected
    })
        .catch(reject);
})); }); };
/**
 * const getOpenChannel = selectors.getGetOpenChannel(state);
 * getOpenChannel('channel-url-12345')
 *  .then((channel) => {
 *    // openChannel = channel;
 *    // or
 *    // setCurrentChannel(channel);
 *  })
 *  .catch((error) => {})
 */
var getGetOpenChannel = function (state) { return (function (channelUrl) { return (new Promise(function (resolve, reject) {
    var sdk = getSdk(state);
    // const pubSub = getPubSub(state);
    if (!sdk) {
        reject(new Error('Sdk not found'));
    }
    if (!sdk.openChannel) {
        reject(new Error('Not found OpenChannelModule'));
    }
    if (!(sdk.openChannel.getChannel && typeof sdk.openChannel.getChannel === 'function')) {
        reject(new Error('Not found the function "getChannel"'));
    }
    sdk.openChannel.getChannel(channelUrl)
        .then(function (channel) {
        resolve(channel);
        // Add pubSub with isSelected
    })
        .catch(reject);
})); }); };
/**
 * const leaveChannel = selectors.getLeaveGroupChannel(state);
 * leaveChannel('group-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
var getLeaveGroupChannel = function (state) { return (function (channelUrl) { return (new Promise(function (resolve, reject) {
    var _a;
    (_a = getGetGroupChannel(state)) === null || _a === void 0 ? void 0 : _a(channelUrl).then(function (channel) {
        channel.leave()
            .then(function () {
            resolve();
            // Add pubSub process
        })
            .catch(reject);
    }).catch(reject);
})); }); };
/**
 * const enterChannel = selectors.getEnterOpenChannel(state);
 * enterChannel('open-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
var getEnterOpenChannel = function (state) { return (function (channelUrl) { return (new Promise(function (resolve, reject) {
    var _a;
    (_a = getGetOpenChannel(state)) === null || _a === void 0 ? void 0 : _a(channelUrl).then(function (channel) {
        channel.enter()
            .then(function () {
            resolve(channel);
            // Add pubSub process
        })
            .catch(reject);
    }).catch(reject);
})); }); };
/**
 * const exitChannel = selectors.getExitOpenChannel(state);
 * exitChannel('open-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
var getExitOpenChannel = function (state) { return (function (channelUrl) { return (new Promise(function (resolve, reject) {
    var _a;
    (_a = getGetOpenChannel(state)) === null || _a === void 0 ? void 0 : _a(channelUrl).then(function (channel) {
        channel.exit()
            .then(function () {
            resolve(channel);
            // Add pubSub process
        })
            .catch(reject);
    }).catch(reject);
})); }); };
/**
 * const freezeChannel = selectors.getFreezeChannel(currentChannel);
 * freezeChannel()
 *  .then(() => {})
 *  .catch((error) => {})
 */
var getFreezeChannel = function () { return (function (channel) { return (new Promise(function (resolve, reject) {
    if (!(channel.freeze && typeof (channel === null || channel === void 0 ? void 0 : channel.freeze) === 'function')) {
        reject(new Error('Not found the function "freeze"'));
    }
    channel.freeze()
        .then(function () {
        resolve();
        // Add pubSub process
        /**
         * consider divide the logic to
         * _freezeGroupChannel and _freezeOpenChannel
         */
    })
        .catch(reject);
})); }); };
/**
 * const unfreezeChannel = selectors.getUnfreezeChannel(currentChannel);
 * unfreezeChannel()
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
var getUnfreezeChannel = function () { return (function (channel) { return (new Promise(function (resolve, reject) {
    if (!(channel.unfreeze && typeof (channel === null || channel === void 0 ? void 0 : channel.unfreeze) === 'function')) {
        reject(new Error('Not found the function "unfreeze"'));
    }
    channel.unfreeze()
        .then(function () {
        resolve();
        // Add pubSub process
        /**
         * consider divide the logic to
         * _unfreezeGroupChannel and _unfreezeOpenChannel
         */
    })
        .catch(reject);
})); }); };
// 4. Message
var sendbirdSelectors_UikitMessageHandler = /** @class */ (function () {
    function UikitMessageHandler() {
        this._onPending = noop;
        this._onFailed = noop;
        this._onSucceeded = noop;
    }
    UikitMessageHandler.prototype.triggerPending = function (message) {
        this._onPending(message);
    };
    UikitMessageHandler.prototype.triggerFailed = function (error, message) {
        this._onFailed(error, (message === null || message === void 0 ? void 0 : message.isResendable) ? message : null);
    };
    UikitMessageHandler.prototype.triggerSucceeded = function (message) {
        this._onSucceeded(message);
    };
    UikitMessageHandler.prototype.onPending = function (handler) {
        if (typeof handler === 'function') {
            this._onPending = handler;
        }
        return this;
    };
    UikitMessageHandler.prototype.onFailed = function (handler) {
        if (typeof handler === 'function') {
            this._onFailed = handler;
        }
        return this;
    };
    UikitMessageHandler.prototype.onSucceeded = function (handler) {
        if (typeof handler === 'function') {
            this._onSucceeded = handler;
        }
        return this;
    };
    return UikitMessageHandler;
}());
/**
 * const sendUserMessage = selectors.getSendUserMessage(state);
 * sendUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  params: UserMessageCreateParams,
 * )
 *  .onPending((message) => {})
 *  .onFailed((error, message) => {})
 *  .onSucceeded((message) => {})
 */
var getSendUserMessage = function (state, publishingModules) {
    if (publishingModules === void 0) { publishingModules = []; }
    return (function (channel, params) {
        var handler = new sendbirdSelectors_UikitMessageHandler();
        var pubSub = getPubSub(state);
        channel.sendUserMessage(params)
            .onFailed(function (error, message) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_FAILED, { error: error, message: message, channel: channel, publishingModules: publishingModules });
            handler.triggerFailed(error, message);
        })
            .onPending(function (message) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_START, { message: message, channel: channel, publishingModules: publishingModules });
            handler.triggerPending(message);
        })
            .onSucceeded(function (message) {
            pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, { message: message, channel: channel, publishingModules: publishingModules });
            handler.triggerSucceeded(message);
        });
        return handler;
    });
};
/**
 * const sendFileMessage = selectors.getSendFileMessage(state);
 * sendFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  params: FileMessageCreateParams,
 * )
 *  .onPending((message) => {})
 *  .onFailed((error, message) => {})
 *  .onSucceeded((message) => {})
 */
var getSendFileMessage = function (state, publishingModules) {
    if (publishingModules === void 0) { publishingModules = []; }
    return (function (channel, params) {
        var handler = new sendbirdSelectors_UikitMessageHandler();
        var pubSub = getPubSub(state);
        channel.sendFileMessage(params)
            .onFailed(function (error, message) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_FAILED, { error: error, message: message, channel: channel, publishingModules: publishingModules });
            handler.triggerFailed(error, message);
        })
            .onPending(function (message) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_START, { message: message, channel: channel, publishingModules: publishingModules });
            handler.triggerPending(message);
        })
            .onSucceeded(function (message) {
            pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, { message: message, channel: channel, publishingModules: publishingModules });
            handler.triggerSucceeded(message);
        });
        return handler;
    });
};
/**
 * const updateUserMessage = selectors.getUpdateUserMessage(state);
 * updateUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  messageId: number,
 *  messageParams: UserMessageUpdateParams,
 * )
 *  .then((message) => {})
 *  .catch((error) => {})
 */
var getUpdateUserMessage = function (state, publishingModules) {
    if (publishingModules === void 0) { publishingModules = []; }
    return (function (channel, messageId, params) { return (new Promise(function (resolve, reject) {
        var pubSub = getPubSub(state);
        channel.updateUserMessage(messageId, params)
            .then(function (message) {
            pubSub.publish(pubSubTopics.UPDATE_USER_MESSAGE, { message: message, channel: channel, fromSelector: true, publishingModules: publishingModules });
            resolve(message);
        })
            .catch(reject);
    })); });
};
// TODO: We will provie this function in the future
/**
 * const updateFileMessage = selectors.getUpdateFileMessage(state);
 * updateFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  messageId: number,
 *  params: FileMessageUpdateParams,
 * )
 *  .then((message) => {})
 *  .catch((error) => {})
 */
// const getUpdateFileMessage = (state: SendBirdState) => (
//   (channel: GroupChannel | OpenChannel, messageId: number, params: FileMessageUpdateParams) => (
//     new Promise((resolve, reject) => {
//       const pubSub = getPubSub(state);
//       channel.updateFileMessage(messageId, params)
//         .then((message) => {
//           pubSub.publish(
//             topics.UPDATE_USER_MESSAGE,
//             { message, channel, fromSelector: true },
//           );
//           resolve(message);
//         })
//         .catch(reject);
//     })
//   )
// );
/**
 * const deleteMessage = selectors.getDeleteMessage(state);
 * deleteMessage(
 *  channel: GroupChannel | OpenChannel,
 *  message: SendableMessage,
 * )
 *  .then((deletedMessage) => {})
 *  .catch((error) => {})
 */
var getDeleteMessage = function (state) { return (function (channel, message) { return (new Promise(function (resolve, reject) {
    var pubSub = getPubSub(state);
    var messageId = message.messageId;
    channel.deleteMessage(message)
        .then(function () {
        pubSub.publish(pubSubTopics.DELETE_MESSAGE, { messageId: messageId, channel: channel });
        resolve(message);
    })
        .catch(reject);
})); }); };
/**
 * const resendUserMessage = selectors.getResendUserMessage(state);
 * resendUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  failedMessage: UserMessage,
 * )
 *  .then(() => {})
 *  .catch((error) => {})
 */
var getResendUserMessage = function (state, publishingModules) {
    if (publishingModules === void 0) { publishingModules = []; }
    return (function (channel, failedMessage) { return (new Promise(function (resolve, reject) {
        var pubSub = getPubSub(state);
        channel.resendUserMessage(failedMessage)
            .then(function (message) {
            pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, { message: message, channel: channel, publishingModules: publishingModules });
            resolve(message);
        })
            .catch(reject);
    })); });
};
/**
 * const resendFileMessage = selectors.getResendFileMessage(state);
 * resendFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  failedMessage: FileMessage,
 *  blob: Blob,
 * )
 *  .then(() => {})
 *  .catch((error) => {})
 */
var getResendFileMessage = function (state, publishingModules) {
    if (publishingModules === void 0) { publishingModules = []; }
    return (function (channel, failedMessage, blob) { return (new Promise(function (resolve, reject) {
        var pubSub = getPubSub(state);
        channel.resendFileMessage(failedMessage, blob)
            .then(function (message) {
            pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, { message: message, channel: channel, publishingModules: publishingModules });
            resolve(message);
        })
            .catch(reject);
    })); });
};
var sendbirdSelectors = {
    getSdk: getSdk,
    getPubSub: getPubSub,
    getConnect: getConnect,
    getDisconnect: getDisconnect,
    getUpdateUserInfo: getUpdateUserInfo,
    getCreateGroupChannel: getCreateGroupChannel,
    getCreateOpenChannel: getCreateOpenChannel,
    getGetGroupChannel: getGetGroupChannel,
    getGetOpenChannel: getGetOpenChannel,
    getLeaveGroupChannel: getLeaveGroupChannel,
    getEnterOpenChannel: getEnterOpenChannel,
    getExitOpenChannel: getExitOpenChannel,
    getFreezeChannel: getFreezeChannel,
    getUnfreezeChannel: getUnfreezeChannel,
    getSendUserMessage: getSendUserMessage,
    getSendFileMessage: getSendFileMessage,
    getUpdateUserMessage: getUpdateUserMessage,
    getDeleteMessage: getDeleteMessage,
    getResendUserMessage: getResendUserMessage,
    getResendFileMessage: getResendFileMessage,
};


//# sourceMappingURL=sendbirdSelectors.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/UserProfile.js


















function UserProfile(_a) {
    var _b, _c;
    var user = _a.user, currentUserId = _a.currentUserId, _d = _a.disableMessaging, disableMessaging = _d === void 0 ? false : _d, onSuccess = _a.onSuccess;
    var store = useSendbirdStateContext();
    var createChannel = getCreateGroupChannel(store);
    var logger = (_b = store === null || store === void 0 ? void 0 : store.config) === null || _b === void 0 ? void 0 : _b.logger;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var currentUserId_ = currentUserId || ((_c = store === null || store === void 0 ? void 0 : store.config) === null || _c === void 0 ? void 0 : _c.userId);
    var onUserProfileMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext).onUserProfileMessage;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird__user-profile" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird__user-profile-avatar" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { height: "80px", width: "80px", src: user === null || user === void 0 ? void 0 : user.profileUrl })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird__user-profile-name" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, (user === null || user === void 0 ? void 0 : user.nickname) || stringSet.NO_NAME)),
        ((user === null || user === void 0 ? void 0 : user.userId) !== currentUserId_) && !disableMessaging && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird__user-profile-message" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, onClick: function () {
                    // Create 1:1 channel
                    var params = {
                        isDistinct: false,
                        invitedUserIds: (user === null || user === void 0 ? void 0 : user.userId) ? [user === null || user === void 0 ? void 0 : user.userId] : [],
                        operatorUserIds: [currentUserId_],
                    };
                    onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();
                    createChannel(params)
                        .then(function (groupChannel) {
                        logger.info('UserProfile, channel create', groupChannel);
                        if (typeof onUserProfileMessage === 'function') {
                            onUserProfileMessage === null || onUserProfileMessage === void 0 ? void 0 : onUserProfileMessage(groupChannel);
                        }
                    });
                } }, stringSet.USER_PROFILE__MESSAGE))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird__user-profile-separator" }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird__user-profile-userId" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird__user-profile-userId--label", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.USER_PROFILE__USER_ID),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird__user-profile-userId--value", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, user === null || user === void 0 ? void 0 : user.userId))));
}


//# sourceMappingURL=UserProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/UserListItem.js































function UserListItem(_a) {
    var user = _a.user, className = _a.className, checked = _a.checked, checkBox = _a.checkBox, isOperator = _a.isOperator, disabled = _a.disabled, disableMessaging = _a.disableMessaging, currentUser = _a.currentUser, action = _a.action, onChange = _a.onChange, _b = _a.avatarSize, avatarSize = _b === void 0 ? '40px' : _b, onClick = _a.onClick, onUserAvatarClick = _a.onUserAvatarClick;
    var operator = isOperator !== null && isOperator !== void 0 ? isOperator : (user === null || user === void 0 ? void 0 : user.role) === 'operator';
    var uniqueKey = user.userId;
    var actionRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useRef(null);
    var parentRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useRef(null);
    var avatarRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useRef(null);
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _c.disableUserProfile, renderUserProfile = _c.renderUserProfile;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-user-list-item',
        ], false).join(' '), ref: parentRef },
        (user === null || user === void 0 ? void 0 : user.isMuted) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedAvatarOverlay, { height: 40, width: 40 })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-user-list-item__avatar", ref: avatarRef, src: (user === null || user === void 0 ? void 0 : user.profileUrl) || (user === null || user === void 0 ? void 0 : user.plainProfileUrl) || '', width: avatarSize, height: avatarSize, onClick: function () {
                    var _a;
                    if (!disableUserProfile) {
                        toggleDropdown();
                        (_a = (onUserAvatarClick !== null && onUserAvatarClick !== void 0 ? onUserAvatarClick : onClick)) === null || _a === void 0 ? void 0 : _a();
                    }
                } })); }, menuItems: function (closeDropdown) { return (renderUserProfile
                ? renderUserProfile({
                    user: user,
                    currentUserId: currentUser !== null && currentUser !== void 0 ? currentUser : '',
                    close: closeDropdown,
                    avatarRef: avatarRef,
                })
                : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { openLeft: true, parentRef: avatarRef, 
                    // for catching location(x, y) of MenuItems
                    parentContainRef: avatarRef, 
                    // for toggling more options(menus & reactions)
                    closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { disableMessaging: disableMessaging, user: user, currentUserId: currentUser, onSuccess: closeDropdown })))); } }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-user-list-item__title", type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 },
            user.nickname || stringSet.NO_NAME,
            (currentUser === user.userId) && (stringSet.CHANNEL_SETTING__MEMBERS__YOU)), // if there is now nickname, display userId
        !user.nickname && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-user-list-item__subtitle", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, user.userId)),
        checkBox && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("label", { className: "sendbird-user-list-item__checkbox", htmlFor: uniqueKey },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Checkbox, { id: uniqueKey, checked: checked, disabled: disabled, onChange: function (event) { return onChange === null || onChange === void 0 ? void 0 : onChange(event); } }))),
        operator && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: [
                'sendbird-user-list-item__operator',
                checkBox ? 'checkbox' : '',
            ].join(' '), type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.LABEL__OPERATOR)),
        action && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-user-list-item__action", ref: actionRef }, action({ actionRef: actionRef, parentRef: parentRef })))));
}


//# sourceMappingURL=UserListItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Tooltip.js





function Tooltip(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, _c = _a.children, children = _c === void 0 ? '' : _c;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-tooltip',
        ], false).join(' ') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-tooltip__text", type: LabelTypography.CAPTION_2, color: LabelColors.ONCONTENT_1 }, children)));
}


//# sourceMappingURL=Tooltip.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TooltipWrapper.js



var SPACE_FROM_TRIGGER = 8;
function TooltipWrapper(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, children = _a.children, hoverTooltip = _a.hoverTooltip;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showHoverTooltip = _c[0], setShowHoverTooltip = _c[1];
    var childrenRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-tooltip-wrapper',
        ], false).join(' '), onMouseOver: function () { setShowHoverTooltip(true); }, onFocus: function () { setShowHoverTooltip(true); }, onMouseOut: function () { setShowHoverTooltip(false); }, onBlur: function () { setShowHoverTooltip(false); } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-tooltip-wrapper__children", ref: childrenRef }, children),
        showHoverTooltip && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-tooltip-wrapper__hover-tooltip", style: { bottom: "calc(100% + ".concat(SPACE_FROM_TRIGGER, "px)") } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-tooltip-wrapper__hover-tooltip__inner" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container", style: { left: childrenRef.current ? "calc(".concat(childrenRef.current.offsetWidth / 2, "px - 50%)") : undefined } }, hoverTooltip))))));
}


//# sourceMappingURL=TooltipWrapper.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Message/context.js


// todo@v4.0.0: combine with the provider in core-ts, see:
// https://github.com/sendbird/sendbird-uikit-core-ts
// packages/react-uikit-message-template-view/src/context/MessageContextProvider.tsx
var defaultValue = {
    message: {},
    isByMe: false,
};
var MessageContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(defaultValue);
var MessageProvider = function (props) {
    var children = props.children, message = props.message, _a = props.isByMe, isByMe = _a === void 0 ? false : _a;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageContext.Provider, { value: {
            message: message,
            isByMe: isByMe,
        } }, children));
};
var useMessageContext = function () {
    var value = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(MessageContext);
    if (value === undefined) {
        throw new Error('useMessageContext must be used within a MessageProvider');
    }
    return value;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/EmojiReactions.js















































var ReactedMembersBottomSheet = function (_a) {
    var _b, _c, _d;
    var message = _a.message, channel = _a.channel, _e = _a.emojiKey, emojiKey = _e === void 0 ? '' : _e, hideMenu = _a.hideMenu, emojiContainer = _a.emojiContainer, onPressUserProfileHandler = _a.onPressUserProfileHandler;
    var _f = channel.members, members = _f === void 0 ? [] : _f;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(emojiKey), selectedEmoji = _g[0], setSelectedEmoji = _g[1];
    function onPressUserProfileCallBack() {
        if (onPressUserProfileHandler && message) {
            var sender = message === null || message === void 0 ? void 0 : message.sender;
            onPressUserProfileHandler(sender);
        }
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, { onBackdropClick: hideMenu },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message__bottomsheet" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message__bottomsheet__reacted-members" }, (_b = message.reactions) === null || _b === void 0 ? void 0 : _b.map(function (reaction) {
                var emojiUrl = getEmojiUrl(emojiContainer, reaction.key);
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { key: reaction.key, className: classnames('sendbird-message__bottomsheet__reacted-members__item', selectedEmoji === reaction.key && 'sendbird-message__bottomsheet__reacted-members__item__selected'), onClick: function () {
                        setSelectedEmoji(reaction.key);
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: emojiUrl, width: "28px", height: "28px", placeHolder: function (_a) {
                            var style = _a.style;
                            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: "28px", height: "28px" })));
                        } }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_2, color: selectedEmoji === reaction.key ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3 }, reaction.userIds.length)));
            })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message__bottomsheet__reactor-list" }, // making a member list who reacted to the message with the `selectedEmoji`
            ((_d = (_c = message.reactions) === null || _c === void 0 ? void 0 : _c.find(function (reaction) { return reaction.key === selectedEmoji; })) === null || _d === void 0 ? void 0 : _d.userIds.map(function (userId) { return members.find(function (member) { return member.userId === userId; }); }).filter(function (member) { return member !== undefined; }))
                .map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { key: member.userId, className: "sendbird-message__bottomsheet__reactor-list__item", user: member, avatarSize: "36px", onUserAvatarClick: onPressUserProfileCallBack })); })))));
};

function ReactionItem(_a) {
    var _b;
    var reaction = _a.reaction, memberNicknamesMap = _a.memberNicknamesMap, setEmojiKey = _a.setEmojiKey, toggleReaction = _a.toggleReaction, emojisMap = _a.emojisMap, channel = _a.channel, message = _a.message;
    var store = useSendbirdStateContext();
    var isMobile = useMediaQueryContext().isMobile;
    var messageStore = useMessageContext();
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var userId = store.config.userId;
    var reactedByMe = isReactedBy(userId, reaction);
    var showHoverTooltip = (reaction.userIds.length > 0)
        && ((channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !channel.isSuper);
    var handleOnClick = function () {
        setEmojiKey('');
        toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction((message !== null && message !== void 0 ? message : messageStore === null || messageStore === void 0 ? void 0 : messageStore.message), reaction.key, reactedByMe);
    };
    var longPress = useLongPress({
        onLongPress: function () {
            setEmojiKey(reaction.key);
        },
        onClick: handleOnClick,
    }, {
        shouldPreventDefault: true,
        shouldStopPropagation: true,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TooltipWrapper, { className: "sendbird-emoji-reactions__reaction-badge", hoverTooltip: showHoverTooltip ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Tooltip, null, getEmojiTooltipString(reaction, userId, memberNicknamesMap, stringSet))) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({}, (isMobile
            ? longPress
            : { onClick: handleOnClick })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionBadge, { count: reaction.userIds.length, selected: reactedByMe },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { circle: true, url: ((_b = emojisMap.get(reaction === null || reaction === void 0 ? void 0 : reaction.key)) === null || _b === void 0 ? void 0 : _b.url) || '', width: "20px", height: "20px", defaultComponent: (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "20px", height: "20px", type: IconTypes.QUESTION })) })))));
}

var AddReactionBadgeItem = function (_a) {
    var onClick = _a.onClick;
    var onlyClick = useLongPress({
        onLongPress: function () { },
        onClick: onClick,
    }, {
        shouldPreventDefault: true,
        shouldStopPropagation: true,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: "sendbird-emoji-reactions__add-reaction-badge" }, onlyClick),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionBadge, { isAdd: true },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.EMOJI_MORE, fillColor: IconColors.ON_BACKGROUND_3, width: "20px", height: "20px" }))));
};

var MobileEmojisBottomSheet = function (_a) {
    var userId = _a.userId, message = _a.message, emojiContainer = _a.emojiContainer, hideMenu = _a.hideMenu, toggleReaction = _a.toggleReaction;
    var emojiAllList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return getEmojiListAll(emojiContainer);
    }, [emojiContainer]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, { onBackdropClick: hideMenu },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet" }, emojiAllList.map(function (emoji) {
            var _a, _b, _c, _d;
            var isReacted = (_d = ((_c = (_b = (_a = message === null || message === void 0 ? void 0 : message.reactions) === null || _a === void 0 ? void 0 : _a.find(function (reaction) { return reaction.key === emoji.key; })) === null || _b === void 0 ? void 0 : _b.userIds) === null || _c === void 0 ? void 0 : _c.some(function (reactorId) { return reactorId === userId; }))) !== null && _d !== void 0 ? _d : false;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, { key: emoji.key, width: "44px", height: "44px", selected: isReacted, onClick: function (e) {
                    e === null || e === void 0 ? void 0 : e.stopPropagation();
                    toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);
                    hideMenu();
                }, dataSbId: "ui_mobile_emoji_reactions_menu_".concat(emoji.key) },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: emoji.url, width: "38px", height: "38px", placeHolder: function (_a) {
                        var style = _a.style;
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: "28px", height: "28px" })));
                    } })));
        }))));
};

var EmojiReactions = function (_a) {
    var _b, _c, _d, _e, _f;
    var _g = _a.className, className = _g === void 0 ? '' : _g, userId = _a.userId, message = _a.message, channel = _a.channel, emojiContainer = _a.emojiContainer, memberNicknamesMap = _a.memberNicknamesMap, _h = _a.spaceFromTrigger, spaceFromTrigger = _h === void 0 ? { x: 0, y: 0 } : _h, _j = _a.isByMe, isByMe = _j === void 0 ? false : _j, toggleReaction = _a.toggleReaction, onPressUserProfile = _a.onPressUserProfile;
    var showTheReactedMembers = false;
    try {
        var config = useSendbirdStateContext().config;
        showTheReactedMembers = channel ? getIsReactionEnabled({
            channel: channel,
            config: config,
        }) : false;
    }
    catch (err) {
        // TODO: Handle error
    }
    var isMobile = useMediaQueryContext().isMobile;
    var addReactionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showEmojiList = _k[0], setShowEmojiList = _k[1];
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), selectedEmojiKey = _l[0], setSelectedEmojiKey = _l[1];
    var emojisMap = getEmojiMapAll(emojiContainer);
    var showAddReactionBadge = ((_c = (_b = message.reactions) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) < emojisMap.size;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className, 'sendbird-emoji-reactions',
            isByMe ? 'outgoing' : 'incoming',
        ]) },
        (((_e = (_d = message.reactions) === null || _d === void 0 ? void 0 : _d.length) !== null && _e !== void 0 ? _e : 0) > 0) && ((_f = message.reactions) === null || _f === void 0 ? void 0 : _f.map(function (reaction) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionItem, { key: reaction === null || reaction === void 0 ? void 0 : reaction.key, reaction: reaction, memberNicknamesMap: memberNicknamesMap, setEmojiKey: setSelectedEmojiKey, toggleReaction: toggleReaction, emojisMap: emojisMap, channel: channel, message: message }));
        })),
        (!isMobile && showAddReactionBadge) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionBadge, { className: "sendbird-emoji-reactions__add-reaction-badge", ref: addReactionRef, isAdd: true, onClick: function (e) {
                    var _a;
                    toggleDropdown();
                    (_a = e === null || e === void 0 ? void 0 : e.stopPropagation) === null || _a === void 0 ? void 0 : _a.call(e);
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.EMOJI_MORE, fillColor: IconColors.ON_BACKGROUND_3, width: "20px", height: "20px" }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiListItems, { parentRef: addReactionRef, parentContainRef: addReactionRef, closeDropdown: closeDropdown, spaceFromTrigger: spaceFromTrigger }, getEmojiListAll(emojiContainer).map(function (emoji) {
                var _a, _b, _c;
                var isReacted = ((_c = (_b = (_a = message === null || message === void 0 ? void 0 : message.reactions) === null || _a === void 0 ? void 0 : _a.find(function (reaction) { return reaction.key === emoji.key; })) === null || _b === void 0 ? void 0 : _b.userIds) === null || _c === void 0 ? void 0 : _c.some(function (reactorId) { return reactorId === userId; })) || false;
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, { key: emoji.key, width: "36px", height: "36px", selected: isReacted, onClick: function (e) {
                        closeDropdown();
                        toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);
                        e === null || e === void 0 ? void 0 : e.stopPropagation();
                    }, dataSbId: "ui_emoji_reactions_menu_".concat(emoji.key) },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: (emoji === null || emoji === void 0 ? void 0 : emoji.url) || '', width: "28px", height: "28px", placeHolder: function (_a) {
                            var style = _a.style;
                            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: "28px", height: "28px" })));
                        } })));
            }))); } })),
        (isMobile && showAddReactionBadge) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddReactionBadgeItem, { onClick: function () {
                setShowEmojiList(true);
            } })),
        (isMobile && showEmojiList) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileEmojisBottomSheet, { userId: userId, message: message, emojiContainer: emojiContainer, hideMenu: function () {
                setShowEmojiList(false);
            }, toggleReaction: toggleReaction })),
        (isMobile && selectedEmojiKey && channel !== null && showTheReactedMembers) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactedMembersBottomSheet, { message: message, channel: channel, emojiKey: selectedEmojiKey, hideMenu: function () {
                setSelectedEmojiKey('');
            }, emojiContainer: emojiContainer, onPressUserProfileHandler: onPressUserProfile }))));
};


//# sourceMappingURL=EmojiReactions.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/AdminMessage.js





function AdminMessage(_a) {
    var _b;
    var _c = _a.className, className = _c === void 0 ? '' : _c, message = _a.message;
    if (!((message === null || message === void 0 ? void 0 : message.isAdminMessage) || (message === null || message === void 0 ? void 0 : message.messageType)) || !((_b = message === null || message === void 0 ? void 0 : message.isAdminMessage) === null || _b === void 0 ? void 0 : _b.call(message)) || (message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
        return null;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-admin-message',
        ], false).join(' ') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-admin-message__text", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, message === null || message === void 0 ? void 0 : message.message)));
}


//# sourceMappingURL=AdminMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DYErcqMl.js


function getMessageFirstFileType(message) {
    return K(message)
        .when(isFileMessage, function () {
        var _a;
        return (_a = message === null || message === void 0 ? void 0 : message.type) !== null && _a !== void 0 ? _a : '';
    })
        .when(isMultipleFilesMessage, function () {
        var _a, _b;
        return (_b = (_a = getFirstFileInfo(message)) === null || _a === void 0 ? void 0 : _a.mimeType) !== null && _b !== void 0 ? _b : '';
    })
        .otherwise(function () {
        return '';
    });
}
function getFirstFileInfo(message) {
    var fileInfoList = message.fileInfoList;
    return fileInfoList.length > 0 ? fileInfoList[0] : null;
}
function getMessageFirstFileName(message) {
    return K(message)
        .when(isFileMessage, function () {
        var _a;
        return (_a = message === null || message === void 0 ? void 0 : message.name) !== null && _a !== void 0 ? _a : '';
    })
        .when(isMultipleFilesMessage, function () {
        var _a, _b;
        return (_b = (_a = getFirstFileInfo(message)) === null || _a === void 0 ? void 0 : _a.fileName) !== null && _b !== void 0 ? _b : '';
    })
        .otherwise(function () {
        return '';
    });
}
function getMessageFirstFileUrl(message) {
    return K(message)
        .when(isFileMessage, function () {
        var _a;
        return (_a = message === null || message === void 0 ? void 0 : message.url) !== null && _a !== void 0 ? _a : '';
    })
        .when(isMultipleFilesMessage, function () {
        var _a, _b;
        return (_b = (_a = getFirstFileInfo(message)) === null || _a === void 0 ? void 0 : _a.url) !== null && _b !== void 0 ? _b : '';
    })
        .otherwise(function () {
        return '';
    });
}
function getMessageFirstFileThumbnails(message) {
    return K(message)
        .when(isFileMessage, function () {
        return message.thumbnails;
    })
        .when(isMultipleFilesMessage, function () {
        var _a, _b;
        return (_b = (_a = getFirstFileInfo(message)) === null || _a === void 0 ? void 0 : _a.thumbnails) !== null && _b !== void 0 ? _b : [];
    })
        .otherwise(function () {
        return [];
    });
}
function getMessageFirstFileThumbnailUrl(message) {
    var thumbnails = getMessageFirstFileThumbnails(message);
    return (thumbnails && thumbnails.length > 0) ? thumbnails[0].url : '';
}


//# sourceMappingURL=bundle-DYErcqMl.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/QuoteMessage.js














function QuoteMessage(_a) {
    var _b;
    var _c, _d, _e, _f, _g, _h;
    var message = _a.message, _j = _a.userId, userId = _j === void 0 ? '' : _j, _k = _a.isByMe, isByMe = _k === void 0 ? false : _k, _l = _a.className, className = _l === void 0 ? '' : _l, _m = _a.isUnavailable, isUnavailable = _m === void 0 ? false : _m, onClick = _a.onClick;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var parentMessage = message.parentMessage;
    var parentMessageSender = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender;
    var parentMessageSenderNickname = (userId === (parentMessageSender === null || parentMessageSender === void 0 ? void 0 : parentMessageSender.userId)) ? stringSet.QUOTED_MESSAGE__CURRENT_USER : parentMessageSender === null || parentMessageSender === void 0 ? void 0 : parentMessageSender.nickname;
    var parentMessageUrl = getMessageFirstFileUrl(parentMessage);
    var parentMessageType = getMessageFirstFileType(parentMessage);
    var currentMessageSenderNickname = (userId === ((_c = message === null || message === void 0 ? void 0 : message.sender) === null || _c === void 0 ? void 0 : _c.userId)) ? stringSet.QUOTED_MESSAGE__CURRENT_USER : (_d = message === null || message === void 0 ? void 0 : message.sender) === null || _d === void 0 ? void 0 : _d.nickname;
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isThumbnailLoaded = _o[0], setThumbnailLoaded = _o[1];
    var uikitFileTypes = getUIKitFileTypes();
    var splitFileName = (_f = (_e = getMessageFirstFileName(parentMessage)) === null || _e === void 0 ? void 0 : _e.split('/')) !== null && _f !== void 0 ? _f : parentMessageUrl.split('/');
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([className, 'sendbird-quote-message', isByMe ? 'outgoing' : 'incoming', isUnavailable ? 'unavailable' : '']), key: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId, onClick: function () {
            if (!isUnavailable && onClick) {
                onClick();
            }
        }, onTouchEnd: function () {
            if (!isUnavailable && onClick) {
                onClick();
            }
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-to" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-quote-message__replied-to__icon", type: IconTypes.REPLY, fillColor: IconColors.ON_BACKGROUND_3, width: "12px", height: "12px" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote-message__replied-to__text", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_3 },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: "sendbird-quote-message__replied-to__text__nickname" }, currentMessageSenderNickname),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: "sendbird-quote-message__replied-to__text__text" }, stringSet.QUOTED_MESSAGE__REPLIED_TO),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: "sendbird-quote-message__replied-to__text__nickname" }, parentMessageSenderNickname))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message" },
            isUnavailable && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__text-message" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote-message__replied-message__text-message__word", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, stringSet.QUOTED_MESSAGE__UNAVAILABLE))),
            ((isUserMessage(parentMessage) && ((_g = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.message) === null || _g === void 0 ? void 0 : _g.length) > 0) && !isUnavailable) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__text-message" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote-message__replied-message__text-message__word", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.message))),
            (isVoiceMessage(parentMessage) && parentMessageUrl && !isUnavailable) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__text-message" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote-message__replied-message__text-message__word", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, stringSet.VOICE_MESSAGE))),
            ((isThumbnailMessage(parentMessage)
                || isMultipleFilesMessage(parentMessage))
                && parentMessageUrl
                && !isUnavailable) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-quote-message__replied-message__thumbnail-message__image", url: parentMessageUrl, alt: parentMessageType, width: "144px", height: "108px", onLoad: function () { return setThumbnailLoaded(true); }, defaultComponent: (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message__placeholder" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: isVideo(parentMessageType) ? IconTypes.PLAY : IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: "22px", height: "22px" })))) }),
                (isVideo(parentMessageType) && !(((_h = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.thumbnails) === null || _h === void 0 ? void 0 : _h.length) > 0)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { className: "sendbird-quote-message__replied-message__thumbnail-message__video" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", { src: parentMessageUrl, type: parentMessageType })),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message__cover" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message__cover__icon" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.PLAY, fillColor: IconColors.ON_BACKGROUND_2, width: "14px", height: "14px" }))))),
                (isThumbnailLoaded && isGif(parentMessageType)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message__cover" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__thumbnail-message__cover__icon" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.GIF, fillColor: IconColors.THUMBNAIL_ICON, width: "14px", height: "14px" })))))),
            (getUIKitMessageType(parentMessage) === UIKitMessageTypes.FILE && parentMessageUrl && !isUnavailable) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote-message__replied-message__file-message" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-quote-message__replied-message__file-message__type-icon", type: (_b = {},
                        _b[uikitFileTypes.IMAGE] = IconTypes.PHOTO,
                        _b[uikitFileTypes.VIDEO] = IconTypes.PLAY,
                        _b[uikitFileTypes.AUDIO] = IconTypes.FILE_AUDIO,
                        _b[uikitFileTypes.GIF] = IconTypes.GIF,
                        _b[uikitFileTypes.OTHERS] = IconTypes.FILE_DOCUMENT,
                        _b)[getUIKitFileType(parentMessageType)], fillColor: IconColors.ON_BACKGROUND_3, width: "16px", height: "16px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote-message__replied-message__file-message__file-name", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 }, truncateString(splitFileName[splitFileName.length - 1])))))));
}


//# sourceMappingURL=QuoteMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Cp2PKGXI.js












var MobileContextMenu = function (props) {
    var _a, _b, _c;
    var hideMenu = props.hideMenu, channel = props.channel, message = props.message, replyType = props.replyType, userId = props.userId, resendMessage = props.resendMessage, showEdit = props.showEdit, showRemove = props.showRemove, deleteMenuState = props.deleteMenuState, deleteMessage = props.deleteMessage, setQuoteMessage = props.setQuoteMessage, parentRef = props.parentRef, onReplyInThread = props.onReplyInThread, _d = props.isOpenedFromThread, isOpenedFromThread = _d === void 0 ? false : _d, _e = props.onDownloadClick, onDownloadClick = _e === void 0 ? null : _e;
    var isByMe = ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) === userId;
    var stringSet = useLocalization().stringSet;
    var showMenuItemCopy = isUserMessage(message);
    var showMenuItemEdit = (isUserMessage(message) && isSentMessage(message) && isByMe);
    var showMenuItemResend = (isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe);
    var showMenuItemDelete = !isPendingMessage(message) && isByMe;
    var showMenuItemDeleteByState = isByMe && (deleteMenuState === undefined || deleteMenuState !== 'HIDE');
    var showMenuItemDeleteFinal = showMenuItemDeleteByState && showMenuItemDelete;
    var disableDelete = ((deleteMenuState !== undefined && deleteMenuState === 'DISABLE')
        || ((_c = (_b = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _b === void 0 ? void 0 : _b.replyCount) !== null && _c !== void 0 ? _c : 0) > 0);
    var showMenuItemDownload = !isPendingMessage(message) && isFileMessage(message)
        && !(isVoiceMessage(message) && ((channel === null || channel === void 0 ? void 0 : channel.isSuper) || (channel === null || channel === void 0 ? void 0 : channel.isBroadcast)));
    var showMenuItemReply = (replyType === 'QUOTE_REPLY')
        && !isFailedMessage(message)
        && !isPendingMessage(message)
        && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel());
    var showMenuItemThread = (replyType === 'THREAD') && !isOpenedFromThread
        && !isFailedMessage(message)
        && !isPendingMessage(message)
        && !isThreadMessage(message)
        && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel());
    var fileMessage = message;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { isOpen: true, menuItems: function () {
            var _a, _b, _c;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { className: "sendbird-message__mobile-context-menu", parentRef: parentRef, parentContainRef: parentRef, closeDropdown: hideMenu },
                showMenuItemCopy && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-copy", onClick: function () {
                        hideMenu();
                        bundle_janisM9b_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
                    }, dataSbId: "ui_mobile_message_item_menu_copy" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__COPY),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.COPY, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }))),
                showMenuItemReply && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-reply", onClick: function () {
                        hideMenu();
                        setQuoteMessage === null || setQuoteMessage === void 0 ? void 0 : setQuoteMessage(message);
                    }, disable: ((_a = message === null || message === void 0 ? void 0 : message.parentMessageId) !== null && _a !== void 0 ? _a : 0) > 0, dataSbId: "ui_mobile_message_item_menu_reply" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: ((_b = message === null || message === void 0 ? void 0 : message.parentMessageId) !== null && _b !== void 0 ? _b : 0) > 0
                            ? LabelColors.ONBACKGROUND_4
                            : LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__REPLY),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.REPLY, fillColor: ((_c = message === null || message === void 0 ? void 0 : message.parentMessageId) !== null && _c !== void 0 ? _c : 0) > 0
                            ? IconColors.ON_BACKGROUND_4
                            : IconColors.PRIMARY, width: "24px", height: "24px" }))),
                showMenuItemThread && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-reply", onClick: function () {
                        hideMenu();
                        onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message });
                    }, dataSbId: "ui_mobile_message_item_menu_thread" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__THREAD),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.THREAD, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }))),
                showMenuItemEdit && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-edit", onClick: function () {
                        hideMenu();
                        showEdit === null || showEdit === void 0 ? void 0 : showEdit(true);
                    }, dataSbId: "ui_mobile_message_item_menu_edit" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__EDIT),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.EDIT, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }))),
                showMenuItemResend && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-resend", onClick: function () {
                        hideMenu();
                        resendMessage === null || resendMessage === void 0 ? void 0 : resendMessage(message);
                    }, dataSbId: "ui_mobile_message_item_menu_resend" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__RESEND),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }))),
                showMenuItemDeleteFinal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-delete", onClick: function () {
                        if (isFailedMessage(message)) {
                            hideMenu();
                            deleteMessage === null || deleteMessage === void 0 ? void 0 : deleteMessage(message);
                        }
                        else if (!disableDelete) {
                            hideMenu();
                            showRemove === null || showRemove === void 0 ? void 0 : showRemove(true);
                        }
                    }, disable: disableDelete, dataSbId: "ui_mobile_message_item_menu_delete" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: disableDelete
                            ? LabelColors.ONBACKGROUND_4
                            : LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__DELETE),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DELETE, fillColor: disableDelete
                            ? IconColors.ON_BACKGROUND_4
                            : IconColors.PRIMARY, width: "24px", height: "24px" }))),
                showMenuItemDownload && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-message__mobile-context-menu-item menu-item-save", onClick: function () {
                        hideMenu();
                    }, dataSbId: "ui_mobile_message_item_menu_download_file" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: "sendbird-message__contextmenu--hyperlink", rel: "noopener noreferrer", href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url, target: "_blank", onClick: onDownloadClick },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__SAVE),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DOWNLOAD, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }))))));
        } }));
};

var EMOJI_SIZE = 38;
var MobileBottomSheet = function (props) {
    var _a, _b, _c;
    var hideMenu = props.hideMenu, channel = props.channel, emojiContainer = props.emojiContainer, message = props.message, replyType = props.replyType, userId = props.userId, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, toggleReaction = props.toggleReaction, _d = props.isReactionEnabled, isReactionEnabled = _d === void 0 ? false : _d, showEdit = props.showEdit, showRemove = props.showRemove, deleteMenuState = props.deleteMenuState, setQuoteMessage = props.setQuoteMessage, onReplyInThread = props.onReplyInThread, _e = props.isOpenedFromThread, isOpenedFromThread = _e === void 0 ? false : _e, onDownloadClick = props.onDownloadClick;
    var isByMe = ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) === userId;
    var stringSet = useLocalization().stringSet;
    var globalStore = useSendbirdStateContext();
    var isOnline = globalStore.config.isOnline;
    var showMenuItemCopy = isUserMessage(message);
    var showMenuItemEdit = (isUserMessage(message) && isSentMessage(message) && isByMe);
    var showMenuItemResend = (isOnline && isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe);
    var showMenuItemDelete = !isPendingMessage(message) && isByMe;
    var showMenuItemDeleteByState = isByMe && (deleteMenuState === undefined || deleteMenuState !== 'HIDE');
    var showMenuItemDeleteFinal = showMenuItemDeleteByState && showMenuItemDelete;
    var disableDelete = ((deleteMenuState !== undefined && deleteMenuState === 'DISABLE')
        || ((_c = (_b = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _b === void 0 ? void 0 : _b.replyCount) !== null && _c !== void 0 ? _c : 0) > 0);
    var showMenuItemDownload = isSentMessage(message) && isFileMessage(message) && !isVoiceMessage(message);
    var showReaction = !isFailedMessage(message) && !isPendingMessage(message) && isReactionEnabled;
    var showMenuItemReply = (replyType === 'QUOTE_REPLY')
        && !isFailedMessage(message)
        && !isPendingMessage(message)
        && ((channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast));
    var showMenuItemThread = (replyType === 'THREAD') && !isOpenedFromThread
        && !isFailedMessage(message)
        && !isPendingMessage(message)
        && !isThreadMessage(message)
        && ((channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast));
    var disableReaction = (message === null || message === void 0 ? void 0 : message.parentMessageId) > 0;
    var fileMessage = message;
    var maxEmojisPerRow = Math.floor(window.innerWidth / EMOJI_SIZE) - 1;
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showEmojisOnly = _f[0], setShowEmojisOnly = _f[1];
    var emojis = emojiContainer && getEmojiListAll(emojiContainer);
    // calculate max emojis that can be shown in screen
    var visibleEmojis = showEmojisOnly
        ? emojis
        : emojis === null || emojis === void 0 ? void 0 : emojis.slice(0, maxEmojisPerRow);
    var canShowMoreEmojis = emojis && emojis.length > maxEmojisPerRow;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, { onBackdropClick: hideMenu },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet' },
            showReaction && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet-reactions' },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("ul", { className: "sendbird-message__bottomsheet-reaction-bar" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-message__bottomsheet-reaction-bar__row', showEmojisOnly && 'sendbird-message__bottomsheet-reaction-bar__all') },
                        visibleEmojis.map(function (emoji) {
                            var _a, _b, _c;
                            var isReacted = (_c = (_b = (_a = message === null || message === void 0 ? void 0 : message.reactions) === null || _a === void 0 ? void 0 : _a.filter(function (reaction) { return reaction.key === emoji.key; })[0]) === null || _b === void 0 ? void 0 : _b.userIds) === null || _c === void 0 ? void 0 : _c.some(function (reactorId) { return reactorId === userId; });
                            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, { key: emoji.key, width: "".concat(EMOJI_SIZE, "px"), height: "".concat(EMOJI_SIZE, "px"), selected: isReacted, onClick: function () {
                                    hideMenu();
                                    toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);
                                }, dataSbId: "ui_mobile_emoji_reactions_menu_".concat(emoji.key) },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: (emoji === null || emoji === void 0 ? void 0 : emoji.url) || '', width: "28px", height: "28px", placeHolder: function (_a) {
                                        var style = _a.style;
                                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
                                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.QUESTION, fillColor: IconColors.ON_BACKGROUND_3, width: "28px", height: "28px" })));
                                    } })));
                        }),
                        canShowMoreEmojis && !showEmojisOnly && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, { key: "emoji_more", width: "38px", height: "38px", onClick: function () {
                                setShowEmojisOnly(true);
                            }, dataSbId: "ui_mobile_emoji_reactions_menu_emojiadd" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: '', width: "28px", height: "28px", placeHolder: function (_a) {
                                    var style = _a.style;
                                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
                                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.EMOJI_MORE, fillColor: IconColors.ON_BACKGROUND_3, width: "28px", height: "28px" })));
                                } }))))))),
            !showEmojisOnly && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--actions' },
                showMenuItemCopy && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--action', onClick: function () {
                        hideMenu();
                        bundle_janisM9b_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.COPY, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__COPY))),
                showMenuItemEdit && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--action', onClick: function () {
                        hideMenu();
                        showEdit === null || showEdit === void 0 ? void 0 : showEdit(true);
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.EDIT, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__EDIT))),
                showMenuItemResend && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--action', onClick: function () {
                        hideMenu();
                        resendMessage === null || resendMessage === void 0 ? void 0 : resendMessage(message);
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.REFRESH, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__RESEND))),
                showMenuItemReply && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-message__bottomsheet--action', disableReaction && 'sendbird-message__bottomsheet--action-disabled'), role: "menuitem", "aria-disabled": disableReaction ? true : false, onClick: function () {
                        if (!disableReaction) {
                            hideMenu();
                            setQuoteMessage === null || setQuoteMessage === void 0 ? void 0 : setQuoteMessage(message);
                        }
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.REPLY, fillColor: disableReaction
                            ? IconColors.ON_BACKGROUND_3
                            : IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: disableReaction ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__REPLY))),
                showMenuItemThread && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--action', onClick: function () {
                        hideMenu();
                        onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message });
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.THREAD, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MESSAGE_MENU__THREAD))),
                showMenuItemDeleteFinal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--action', onClick: function () {
                        if (isFailedMessage(message)) {
                            hideMenu();
                            deleteMessage === null || deleteMessage === void 0 ? void 0 : deleteMessage(message);
                        }
                        else if (!disableDelete) {
                            hideMenu();
                            showRemove === null || showRemove === void 0 ? void 0 : showRemove(true);
                        }
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DELETE, fillColor: disableDelete
                            ? IconColors.ON_BACKGROUND_4
                            : IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: disableDelete
                            ? LabelColors.ONBACKGROUND_4
                            : LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__DELETE))),
                showMenuItemDownload && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--action', onClick: function () {
                        hideMenu();
                    } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: "sendbird-message__bottomsheet--hyperlink", rel: "noopener noreferrer", href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url, target: "_blank", onClick: onDownloadClick },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DOWNLOAD, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__SAVE)))))))));
};

var MobileMenu = function (props) {
    var message = props.message, hideMenu = props.hideMenu, userId = props.userId, channel = props.channel, _a = props.isReactionEnabled, isReactionEnabled = _a === void 0 ? false : _a, isByMe = props.isByMe, replyType = props.replyType, disabled = props.disabled, deleteMenuState = props.deleteMenuState, showRemove = props.showRemove, showEdit = props.showEdit, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, setQuoteMessage = props.setQuoteMessage, emojiContainer = props.emojiContainer, toggleReaction = props.toggleReaction, parentRef = props.parentRef, onReplyInThread = props.onReplyInThread, isOpenedFromThread = props.isOpenedFromThread, onDownloadClick = props.onDownloadClick;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, isReactionEnabled
        ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileBottomSheet, { channel: channel, message: message, hideMenu: hideMenu, isByMe: isByMe, userId: userId, replyType: replyType, disabled: disabled, showRemove: showRemove, showEdit: showEdit, deleteMenuState: deleteMenuState, resendMessage: resendMessage, deleteMessage: deleteMessage, setQuoteMessage: setQuoteMessage, emojiContainer: emojiContainer, toggleReaction: toggleReaction, isReactionEnabled: isReactionEnabled, onReplyInThread: onReplyInThread, isOpenedFromThread: isOpenedFromThread, onDownloadClick: onDownloadClick })) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileContextMenu, { channel: channel, userId: userId, message: message, hideMenu: hideMenu, isByMe: isByMe, showEdit: showEdit, replyType: replyType, disabled: disabled, deleteMenuState: deleteMenuState, showRemove: showRemove, resendMessage: resendMessage, deleteMessage: deleteMessage, setQuoteMessage: setQuoteMessage, parentRef: parentRef, onReplyInThread: onReplyInThread, isOpenedFromThread: isOpenedFromThread, onDownloadClick: onDownloadClick }))));
};


//# sourceMappingURL=bundle-Cp2PKGXI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ThreadReplies.js












function ThreadReplies(_a, ref) {
    var _b;
    var className = _a.className, threadInfo = _a.threadInfo, onClick = _a.onClick;
    var _c = threadInfo.mostRepliedUsers, mostRepliedUsers = _c === void 0 ? [] : _c, replyCount = threadInfo.replyCount;
    var stringSet = useLocalization().stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-thread-replies ".concat(className), role: "button", onClick: function (e) {
            onClick === null || onClick === void 0 ? void 0 : onClick(e);
            e === null || e === void 0 ? void 0 : e.stopPropagation();
        }, onKeyDown: function (e) {
            onClick === null || onClick === void 0 ? void 0 : onClick(e);
            e === null || e === void 0 ? void 0 : e.stopPropagation();
        }, ref: ref },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-thread-replies__user-profiles" },
            mostRepliedUsers.slice(0, 4).map(function (user) {
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { key: user.userId, className: "sendbird-ui-thread-replies__user-profiles__avatar", src: user === null || user === void 0 ? void 0 : user.profileUrl, alt: "user profile", width: "20px", height: "20px" }));
            }),
            (mostRepliedUsers === null || mostRepliedUsers === void 0 ? void 0 : mostRepliedUsers.length) >= 5 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-thread-replies__user-profiles__avatar" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-ui-thread-replies__user-profiles__avatar__image", src: (_b = mostRepliedUsers === null || mostRepliedUsers === void 0 ? void 0 : mostRepliedUsers[4]) === null || _b === void 0 ? void 0 : _b.profileUrl, alt: "user profile", width: "20px", height: "20px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-thread-replies__user-profiles__avatar__cover" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-thread-replies__user-profiles__avatar__plus" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.PLUS, fillColor: IconColors.WHITE, width: "16px", height: "16px" }))))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-ui-thread-replies__reply-counts", type: LabelTypography.CAPTION_2, color: LabelColors.PRIMARY }, replyCount === 1
            ? "".concat(replyCount, " ").concat(stringSet.CHANNEL__THREAD_REPLY)
            : "".concat(replyCount > 99 ? stringSet.CHANNEL__THREAD_OVER_MAX : replyCount, " ").concat(stringSet.CHANNEL__THREAD_REPLIES)),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-ui-thread-replies__icon", type: IconTypes.CHEVRON_RIGHT, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" })));
}
var ThreadReplies$1 = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(ThreadReplies);


//# sourceMappingURL=ThreadReplies.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MentionLabel.js





























function MentionLabel(props) {
    var _a, _b, _c;
    var mentionTemplate = props.mentionTemplate, mentionedUserId = props.mentionedUserId, mentionedUserNickname = props.mentionedUserNickname, isByMe = props.isByMe;
    var mentionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var sendbirdState = useSendbirdStateContext();
    var userId = (_a = sendbirdState === null || sendbirdState === void 0 ? void 0 : sendbirdState.config) === null || _a === void 0 ? void 0 : _a.userId;
    var sdk = (_c = (_b = sendbirdState === null || sendbirdState === void 0 ? void 0 : sendbirdState.stores) === null || _b === void 0 ? void 0 : _b.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;
    var amIBeingMentioned = userId === mentionedUserId;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(), user = _d[0], setUser = _d[1];
    var fetchUser = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (toggleDropdown) {
        if (user || !(sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery)) {
            toggleDropdown();
            return;
        }
        var query = sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery({
            userIdsFilter: [mentionedUserId],
        });
        query.next().then(function (members) {
            if ((members === null || members === void 0 ? void 0 : members.length) > 0) {
                setUser(members[0]);
            }
            toggleDropdown();
        });
    }, [sdk, mentionedUserId]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: classnames('sendbird-word__mention', amIBeingMentioned && 'sendbird-word__mention--me'), onClick: function () { return fetchUser(toggleDropdown); }, ref: mentionRef, "data-userid": mentionedUserId, "data-nickname": mentionedUserNickname, "data-sb-mention": true },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.CAPTION_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, "".concat(mentionTemplate).concat(mentionedUserNickname)))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems
        /**
        * parentRef: For catching location(x, y) of MenuItems
        * parentContainRef: For toggling more options(menus & reactions)
        */
        , { 
            /**
            * parentRef: For catching location(x, y) of MenuItems
            * parentContainRef: For toggling more options(menus & reactions)
            */
            parentRef: mentionRef, parentContainRef: mentionRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: user, onSuccess: closeDropdown, currentUserId: userId }))); } }));
}


//# sourceMappingURL=MentionLabel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/LinkLabel.js






var http = /https?:\/\//;
function LinkLabel(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, src = _a.src, type = _a.type, color = _a.color, children = _a.children;
    var url = http.test(src) ? src : "http://".concat(src);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-link-label',
            changeColorToClassName(color),
        ], false).join(' '), href: url, target: "_blank", rel: "noopener noreferrer", 
        // for mobile
        onTouchEnd: function (e) {
            e.preventDefault();
            e.nativeEvent.stopImmediatePropagation();
            openURL(url);
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-link-label__label", type: type, color: color }, children)));
}
var LinkLabelTypography = LabelTypography;
var LinkLabelColors = LabelColors;


//# sourceMappingURL=LinkLabel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B-DnYw4p.js








// this function is used to generate a unique key for token in message
// it changes with updated time and index
// messageUpdatedAt is the key part of this key generator
function keyGenerator(createdAt, messageUpdatedAt, index) {
    return "sb-msg_".concat(createdAt, "_").concat(messageUpdatedAt, "_").concat(index);
}

function TextFragment(_a) {
    var tokens = _a.tokens;
    var messageStore = useMessageContext();
    var message = messageStore === null || messageStore === void 0 ? void 0 : messageStore.message;
    var isByMe = messageStore === null || messageStore === void 0 ? void 0 : messageStore.isByMe;
    var updatedAt = message.updatedAt, createdAt = message.createdAt;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, tokens === null || tokens === void 0 ? void 0 : tokens.map(function (token, idx) {
        var key = keyGenerator(createdAt, updatedAt, idx);
        return K(token.type)
            .with(TOKEN_TYPES.mention, function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: "sendbird-word", key: key },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MentionLabel, { mentionTemplate: USER_MENTION_PREFIX, 
                // @ts-ignore
                mentionedUserId: token.userId, mentionedUserNickname: token.value, isByMe: isByMe }))); })
            .with(TOKEN_TYPES.url, function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: "sendbird-word", key: key },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LinkLabel, { className: "sendbird-word__url", src: token.value, type: LabelTypography.BODY_1 }, token.value))); })
            .otherwise(function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, { key: key }, getWhiteSpacePreservedText(token.value)); });
    })));
}


//# sourceMappingURL=bundle-B-DnYw4p.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OGMessageItemBody.js




































function OGMessageItemBody(_a) {
    var _b, _c, _d, _e;
    var className = _a.className, message = _a.message, _f = _a.isByMe, isByMe = _f === void 0 ? false : _f, _g = _a.mouseHover, mouseHover = _g === void 0 ? false : _g, _h = _a.isMentionEnabled, isMentionEnabled = _h === void 0 ? false : _h, _j = _a.isReactionEnabled, isReactionEnabled = _j === void 0 ? false : _j, _k = _a.onMessageHeightChange, onMessageHeightChange = _k === void 0 ? function () {
        /* noop */
    } : _k;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var isMessageMentioned = isMentionEnabled && ((_b = message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate) === null || _b === void 0 ? void 0 : _b.length) > 0 && (message === null || message === void 0 ? void 0 : message.mentionedUsers) && ((_c = message === null || message === void 0 ? void 0 : message.mentionedUsers) === null || _c === void 0 ? void 0 : _c.length) > 0;
    var tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a;
        if (isMessageMentioned) {
            return tokenizeMessage({
                mentionedUsers: (_a = message === null || message === void 0 ? void 0 : message.mentionedUsers) !== null && _a !== void 0 ? _a : undefined,
                messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,
            });
        }
        return tokenizeMessage({
            messageText: message === null || message === void 0 ? void 0 : message.message,
        });
    }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);
    var openOpenGraphURL = function () { var _a; return openURL((_a = message === null || message === void 0 ? void 0 : message.ogMetaData) === null || _a === void 0 ? void 0 : _a.url); };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className !== null && className !== void 0 ? className : '',
            'sendbird-og-message-item-body',
            isByMe ? 'outgoing' : 'incoming',
            mouseHover ? 'mouse-hover' : '',
            isReactionEnabled && ((_d = message === null || message === void 0 ? void 0 : message.reactions) === null || _d === void 0 ? void 0 : _d.length) > 0 ? 'reactions' : '',
        ]) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: OG_MESSAGE_BODY_CLASSNAME },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, { tokens: tokens }),
                isEditedMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-og-message-item-body__text-bubble__message", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2 }, " ".concat(stringSet.MESSAGE_EDITED, " "))))),
        ((_e = message.ogMetaData) === null || _e === void 0 ? void 0 : _e.defaultImage) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OGImageSection, { onClick: openOpenGraphURL, ogImage: message.ogMetaData.defaultImage, onMessageHeightChange: onMessageHeightChange })),
        message.ogMetaData && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OGDescriptionSection, { onClick: openOpenGraphURL, ogMetaData: message.ogMetaData, onMessageHeightChange: onMessageHeightChange })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-og-message-item-body__cover" })));
}
var OGImageSection = function (props) {
    var onClick = props.onClick, ogImage = props.ogImage, onMessageHeightChange = props.onMessageHeightChange;
    var imageRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var isMobile = useMediaQueryContext().isMobile;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: imageRef, className: classnames('sendbird-og-message-item-body__og-thumbnail', !ogImage.url && 'sendbird-og-message-item-body__og-thumbnail__empty'), onClick: function () { return onClick(); } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-og-message-item-body__og-thumbnail__image", url: ogImage.url || '', alt: ogImage.alt || '', width: "100%", height: isMobile ? '136px' : '240px', onLoad: onMessageHeightChange, onError: function () {
                var _a, _b;
                try {
                    (_b = (_a = imageRef === null || imageRef === void 0 ? void 0 : imageRef.current) === null || _a === void 0 ? void 0 : _a.classList) === null || _b === void 0 ? void 0 : _b.add('sendbird-og-message-item-body__og-thumbnail__empty');
                }
                catch (error) {
                    // do nothing
                }
            }, defaultComponent: external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-og-message-item-body__og-thumbnail__place-holder" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-og-message-item-body__og-thumbnail__place-holder__icon", type: IconTypes.THUMBNAIL_NONE, width: "56px", height: "56px" })) })));
};
var OGDescriptionSection = function (props) {
    var onClick = props.onClick, ogMetaData = props.ogMetaData, onMessageHeightChange = props.onMessageHeightChange;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        onMessageHeightChange();
    }, [ogMetaData.title, ogMetaData.description, ogMetaData.url]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-og-message-item-body__description", onClick: function () { return onClick(); } },
        ogMetaData.title && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-og-message-item-body__description__title", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, ogMetaData.title)),
        ogMetaData.description && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-og-message-item-body__description__description", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, ogMetaData.description)),
        ogMetaData.url && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-og-message-item-body__description__url", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, ogMetaData.url))));
};


//# sourceMappingURL=OGMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TextMessageItemBody.js



































function TextMessageItemBody(_a) {
    var _b;
    var _c = _a.className, className = _c === void 0 ? '' : _c, message = _a.message, _d = _a.isByMe, isByMe = _d === void 0 ? false : _d, _e = _a.mouseHover, mouseHover = _e === void 0 ? false : _e, _f = _a.isMentionEnabled, isMentionEnabled = _f === void 0 ? false : _f, _g = _a.isReactionEnabled, isReactionEnabled = _g === void 0 ? false : _g;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var isMessageMentioned = isMentionEnabled
        && (message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate)
        && message.mentionedMessageTemplate.length > 0
        && (message === null || message === void 0 ? void 0 : message.mentionedUsers)
        && message.mentionedUsers.length > 0;
    var tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a;
        if (isMessageMentioned) {
            return tokenizeMessage({
                mentionedUsers: (_a = message === null || message === void 0 ? void 0 : message.mentionedUsers) !== null && _a !== void 0 ? _a : undefined,
                messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,
            });
        }
        return tokenizeMessage({
            messageText: message === null || message === void 0 ? void 0 : message.message,
        });
    }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
                className,
                TEXT_MESSAGE_BODY_CLASSNAME,
                isByMe ? 'outgoing' : 'incoming',
                mouseHover ? 'mouse-hover' : '',
                (isReactionEnabled && ((_b = message === null || message === void 0 ? void 0 : message.reactions) === null || _b === void 0 ? void 0 : _b.length) > 0) ? 'reactions' : '',
            ]) },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, { tokens: tokens }),
            isEditedMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-text-message-item-body__message edited", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2 }, " ".concat(stringSet.MESSAGE_EDITED, " "))))));
}


//# sourceMappingURL=TextMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/FileMessageItemBody.js















function FileMessageItemBody(_a) {
    var _this = this;
    var _b, _c, _d;
    var _e = _a.className, className = _e === void 0 ? '' : _e, message = _a.message, _f = _a.isByMe, isByMe = _f === void 0 ? false : _f, _g = _a.mouseHover, mouseHover = _g === void 0 ? false : _g, _h = _a.isReactionEnabled, isReactionEnabled = _h === void 0 ? false : _h, truncateLimit = _a.truncateLimit, onBeforeDownloadFileMessage = _a.onBeforeDownloadFileMessage;
    var logger = null;
    try {
        logger = (_c = (_b = useSendbirdStateContext()) === null || _b === void 0 ? void 0 : _b.config) === null || _c === void 0 ? void 0 : _c.logger;
    }
    catch (err) {
        // TODO: Handle error
    }
    var isMobile = useMediaQueryContext().isMobile;
    var truncateMaxNum = truncateLimit !== null && truncateLimit !== void 0 ? truncateLimit : (isMobile ? 20 : undefined);
    var downloadFileWithUrl = function () { return openURL(message === null || message === void 0 ? void 0 : message.url); };
    var handleOnClickTextButton = onBeforeDownloadFileMessage
        ? function () { return __awaiter(_this, void 0, void 0, function () {
            var allowDownload, err_1;
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, onBeforeDownloadFileMessage({ message: message })];
                    case 1:
                        allowDownload = _c.sent();
                        if (allowDownload) {
                            downloadFileWithUrl();
                        }
                        else {
                            (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'FileMessageItemBody: Not allowed to download.');
                        }
                        return [3 /*break*/, 3];
                    case 2:
                        err_1 = _c.sent();
                        (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'FileMessageItemBody: Error occurred while determining download continuation:', err_1);
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        }); }
        : downloadFileWithUrl;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className,
            'sendbird-file-message-item-body',
            isByMe ? 'outgoing' : 'incoming',
            mouseHover ? 'mouse-hover' : '',
            (isReactionEnabled && ((_d = message === null || message === void 0 ? void 0 : message.reactions) === null || _d === void 0 ? void 0 : _d.length) > 0) ? 'reactions' : '',
        ]) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-file-message-item-body__file-icon" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-file-message-item-body__file-icon__icon", type: {
                    IMAGE: IconTypes.PHOTO,
                    VIDEO: IconTypes.PLAY,
                    AUDIO: IconTypes.FILE_AUDIO,
                    GIF: IconTypes.GIF,
                    OTHERS: IconTypes.FILE_DOCUMENT,
                }[getUIKitFileType(message === null || message === void 0 ? void 0 : message.type)], fillColor: IconColors.PRIMARY, width: "24px", height: "24px" })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "sendbird-file-message-item-body__file-name", onClick: handleOnClickTextButton, color: isByMe ? bundle_h8I0AuUK_Colors.ONCONTENT_1 : bundle_h8I0AuUK_Colors.ONBACKGROUND_1 },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-file-message-item-body__file-name__text", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, truncateString((message === null || message === void 0 ? void 0 : message.name) || (message === null || message === void 0 ? void 0 : message.url), truncateMaxNum)))));
}


//# sourceMappingURL=FileMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B4izwMfD.js



function useKeyDown(ref, keyDownCallbackMap) {
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        var _a;
        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.focus();
    }, [ref.current]);
    var onKeyDown = usePreservedCallback(function (event) {
        var callback = keyDownCallbackMap[event.key];
        callback === null || callback === void 0 ? void 0 : callback(event);
        event.stopPropagation();
    });
    return onKeyDown;
}


//# sourceMappingURL=bundle-B4izwMfD.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Cn6S1UKt.js













// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types
var bundle_Cn6S1UKt_SUPPORTED_MIMES = {
    IMAGE: [
        'image/jpeg',
        'image/jpg',
        'image/png',
        'image/gif',
        'image/svg+xml',
        'image/webp',
    ],
    VIDEO: [
        'video/mpeg',
        'video/ogg',
        'video/webm',
        'video/mp4',
    ],
};
var bundle_Cn6S1UKt_isImage = function (type) { return bundle_Cn6S1UKt_SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0; };
var bundle_Cn6S1UKt_isVideo = function (type) { return bundle_Cn6S1UKt_SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0; };
__assign({}, bundle_Cn6S1UKt_SUPPORTED_MIMES);
var ViewerTypes = {
    SINGLE: 'SINGLE',
    MULTI: 'MULTI',
};

function mapFileViewerComponentProps(_a) {
    var props = _a.props;
    if (props.viewerType === ViewerTypes.MULTI) {
        var _b = props, fileInfoList = _b.fileInfoList, currentIndex = _b.currentIndex;
        return fileInfoList[currentIndex];
    }
    var fileInfo = props;
    return {
        name: fileInfo.name,
        type: fileInfo.type,
        url: fileInfo.url,
    };
}

function DeleteButton(props) {
    if (props.viewerType !== ViewerTypes.MULTI) {
        var onDelete_1 = props.onDelete, isByMe = props.isByMe, disableDelete_1 = props.disableDelete, className = props.className;
        return (isByMe)
            ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right__actions__delete ".concat(className) },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: disableDelete_1 ? 'disabled' : '', type: IconTypes.DELETE, fillColor: disableDelete_1 ? IconColors.GRAY : IconColors.ON_BACKGROUND_1, height: "24px", width: "24px", onClick: function (e) { if (!disableDelete_1) {
                        onDelete_1 === null || onDelete_1 === void 0 ? void 0 : onDelete_1(e);
                    } } })))
            : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
    }
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
}

// this is a slider component that is used to navigate between images
function Slider(props) {
    if (props.viewerType === ViewerTypes.MULTI) {
        var onClickLeft_1 = props.onClickLeft, onClickRight_1 = props.onClickRight;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-file-viewer-slider" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-file-viewer-arrow--left" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SLIDE_LEFT, fillColor: IconColors.ON_BACKGROUND_1, height: bundle_DhBuJR0w["s" /* l */], width: bundle_DhBuJR0w["s" /* l */], onClick: function (e) {
                        onClickLeft_1 === null || onClickLeft_1 === void 0 ? void 0 : onClickLeft_1();
                        e.stopPropagation();
                    } })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-file-viewer-arrow--right" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SLIDE_LEFT, fillColor: IconColors.ON_BACKGROUND_1, height: bundle_DhBuJR0w["s" /* l */], width: bundle_DhBuJR0w["s" /* l */], onClick: function (e) {
                        e.stopPropagation();
                        onClickRight_1 === null || onClickRight_1 === void 0 ? void 0 : onClickRight_1();
                    } }))));
    }
    // return empty fragment if viewerType is not ViewerTypes.MULTI
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
}

var FileViewerComponent = function (props) {
    var profileUrl = props.profileUrl, nickname = props.nickname, onClose = props.onClose, onDownloadClick = props.onDownloadClick;
    var _a = props, onClickLeft = _a.onClickLeft, onClickRight = _a.onClickRight;
    var ref = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var onKeyDown = useKeyDown(ref, {
        Escape: function (e) { return onClose === null || onClose === void 0 ? void 0 : onClose(e); },
        ArrowLeft: function () { return onClickLeft === null || onClickLeft === void 0 ? void 0 : onClickLeft(); },
        ArrowRight: function () { return onClickRight === null || onClickRight === void 0 ? void 0 : onClickRight(); },
    });
    var _b = mapFileViewerComponentProps({ props: props }), name = _b.name, type = _b.type, url = _b.url;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer", onKeyDown: onKeyDown, 
        // to focus
        tabIndex: 1, ref: ref },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__left" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__left__avatar" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { height: "32px", width: "32px", src: profileUrl })),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-fileviewer__header__left__filename", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, name),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-fileviewer__header__left__sender-name", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, nickname)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right" },
                isSupportedFileView(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right__actions" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: "sendbird-fileviewer__header__right__actions__download", rel: "noopener noreferrer", href: url, target: "_blank", onClick: onDownloadClick },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DOWNLOAD, fillColor: IconColors.ON_BACKGROUND_1, height: "24px", width: "24px" })),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DeleteButton, __assign({ className: 'sendbird-fileviewer__header__right__actions__delete' }, props)))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right__actions__close" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CLOSE, fillColor: IconColors.ON_BACKGROUND_1, height: "24px", width: "24px", onClick: function (e) { return onClose === null || onClose === void 0 ? void 0 : onClose(e); } })))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__content" },
            isVideo(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { controls: true, className: "sendbird-fileviewer__content__video" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", { src: url, type: type }))),
            isImage(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", { src: url, alt: name, className: props.viewerType === ViewerTypes.MULTI
                    ? 'sendbird-fileviewer__content__img__multi'
                    : 'sendbird-fileviewer__content__img' })),
            !isSupportedFileView(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__content__unsupported" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, (stringSet === null || stringSet === void 0 ? void 0 : stringSet.UI__FILE_VIEWER__UNSUPPORT) || 'Unsupported message'))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Slider, __assign({}, props)))));
};
function FileViewer(_a) {
    var _b, _c, _d;
    var message = _a.message, _e = _a.statefulFileInfoList, statefulFileInfoList = _e === void 0 ? [] : _e, onClose = _a.onClose, _f = _a.isByMe, isByMe = _f === void 0 ? false : _f, onDelete = _a.onDelete, currentIndex = _a.currentIndex, onClickLeft = _a.onClickLeft, onClickRight = _a.onClickRight, onDownloadClick = _a.onDownloadClick;
    if (isMultipleFilesMessage(message)) {
        var castedMessage = message;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewerComponent, { profileUrl: castedMessage.sender.profileUrl, nickname: castedMessage.sender.nickname, viewerType: ViewerTypes.MULTI, fileInfoList: statefulFileInfoList.filter(function (fileInfo) {
                return fileInfo.url; // Caution: This assumes that defined url means file upload has completed.
            }).map(function (fileInfo) {
                return {
                    name: fileInfo.fileName || '',
                    type: fileInfo.mimeType || '',
                    url: fileInfo.url || '',
                };
            }), currentIndex: currentIndex || 0, onClickLeft: onClickLeft || noop, onClickRight: onClickRight || noop, onClose: onClose, onDownloadClick: onDownloadClick }));
    }
    else if (isFileMessage(message)) {
        var castedMessage = message;
        return Object(react_dom["createPortal"])((external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewerComponent, { profileUrl: (_b = castedMessage.sender) === null || _b === void 0 ? void 0 : _b.profileUrl, nickname: (_c = castedMessage.sender) === null || _c === void 0 ? void 0 : _c.nickname, name: castedMessage.name, type: castedMessage.type, url: castedMessage === null || castedMessage === void 0 ? void 0 : castedMessage.url, isByMe: isByMe, disableDelete: (((_d = castedMessage.threadInfo) === null || _d === void 0 ? void 0 : _d.replyCount) || 0) > 0, onClose: onClose, onDelete: onDelete || noop, onDownloadClick: onDownloadClick })), document.getElementById(MODAL_ROOT));
    }
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
}


//# sourceMappingURL=bundle-Cn6S1UKt.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-zwvszN0Y.js









function ImageGrid(_a) {
    var _b;
    var children = _a.children, className = _a.className, message = _a.message, isReactionEnabled = _a.isReactionEnabled;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-image-grid-wrap' },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
                className !== null && className !== void 0 ? className : '',
                'sendbird-image-grid',
                (isReactionEnabled && ((_b = message === null || message === void 0 ? void 0 : message.reactions) === null || _b === void 0 ? void 0 : _b.length) > 0) ? 'reactions' : '',
            ]) }, children)));
}

var GRID_WIDTH_CHAT_WEB = 400;
var GRID_SIDE_PADDING = 8;
var GRID_GAP = 4;
var TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN = 54;
var PROFILE_IMAGE_WIDTH = 40;
var CHAT_MOBILE_SIDE_PADDING = 48;
var THREAD_PARENT_WIDTH = 320;
var THREAD_PARENT_SIDE_PADDING = 28;
var THREAD_PARENT_GRID_MARGIN_LEFT = 12;
var THREAD_CHILD_WIDTH = 200;
var THREAD_CHILD_SIDE_PADDING = 8;
var THREAD_CHILD_MOBILE_SIDE_PADDING = 32;
var THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN = 60;
var MULTIPLE_FILES_IMAGE_SIDE_LENGTH = {
    CHAT_WEB: "calc(".concat(GRID_WIDTH_CHAT_WEB / 2, "px - ").concat((GRID_SIDE_PADDING + GRID_GAP) / 2, "px)"),
    CHAT_MOBILE: "calc(50vw - ".concat((CHAT_MOBILE_SIDE_PADDING + PROFILE_IMAGE_WIDTH + TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN + GRID_SIDE_PADDING + GRID_GAP) / 2, "px)"),
    THREAD_PARENT_WEB: "calc(".concat((THREAD_PARENT_WIDTH - (THREAD_PARENT_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_PARENT_GRID_MARGIN_LEFT + GRID_GAP)) / 2, "px)"),
    THREAD_PARENT_MOBILE: "calc(50vw - ".concat((THREAD_PARENT_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_PARENT_GRID_MARGIN_LEFT + GRID_GAP) / 2, "px)"),
    THREAD_CHILD_WEB: "calc(".concat((THREAD_CHILD_WIDTH - THREAD_CHILD_SIDE_PADDING - GRID_GAP) / 2, "px)"),
    THREAD_CHILD_MOBILE: "calc(50vw - ".concat((THREAD_CHILD_MOBILE_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN + GRID_SIDE_PADDING + GRID_GAP) / 2, "px)"),
};
var MULTIPLE_FILES_IMAGE_BORDER_RADIUS = {
    CHAT_WEB: '6px',
    CHAT_MOBILE: '6px',
    THREAD_PARENT_WEB: '6px',
    THREAD_PARENT_MOBILE: '6px',
    THREAD_CHILD_WEB: '6px',
    THREAD_CHILD_MOBILE: '6px',
};
var MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH = '34px';

var ThreadMessageKind = {
    PARENT: 'parent',
    CHILD: 'child',
};
function MultipleFilesMessageItemBody(_a) {
    var _this = this;
    var _b, _c;
    var className = _a.className, message = _a.message, _d = _a.isReactionEnabled, isReactionEnabled = _d === void 0 ? false : _d, threadMessageKindKey = _a.threadMessageKindKey, _e = _a.statefulFileInfoList, statefulFileInfoList = _e === void 0 ? [] : _e, _f = _a.onBeforeDownloadFileMessage, onBeforeDownloadFileMessage = _f === void 0 ? null : _f;
    var logger = (_c = (_b = useSendbirdStateContext === null || useSendbirdStateContext === void 0 ? void 0 : useSendbirdStateContext()) === null || _b === void 0 ? void 0 : _b.config) === null || _c === void 0 ? void 0 : _c.logger;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1), currentFileViewerIndex = _g[0], setCurrentFileViewerIndex = _g[1];
    function onClose() {
        setCurrentFileViewerIndex(-1);
    }
    function onClickLeft() {
        setCurrentFileViewerIndex(currentFileViewerIndex === 0 ? statefulFileInfoList.length - 1 : currentFileViewerIndex - 1);
    }
    function onClickRight() {
        setCurrentFileViewerIndex(currentFileViewerIndex === statefulFileInfoList.length - 1 ? 0 : currentFileViewerIndex + 1);
    }
    return (threadMessageKindKey ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        currentFileViewerIndex > -1 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewer, { message: message, statefulFileInfoList: statefulFileInfoList, currentIndex: currentFileViewerIndex, onClickLeft: onClickLeft, onClickRight: onClickRight, onClose: onClose, onDownloadClick: function (e) { return __awaiter(_this, void 0, void 0, function () {
                var allowDownload, err_1;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!onBeforeDownloadFileMessage)
                                return [2 /*return*/];
                            _c.label = 1;
                        case 1:
                            _c.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, onBeforeDownloadFileMessage({ message: message, index: currentFileViewerIndex })];
                        case 2:
                            allowDownload = _c.sent();
                            if (!allowDownload) {
                                e.preventDefault();
                                (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'MultipleFilesMessageItemBody: Not allowed to download.');
                            }
                            return [3 /*break*/, 4];
                        case 3:
                            err_1 = _c.sent();
                            (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'MultipleFilesMessageItemBody: Error occurred while determining download continuation:', err_1);
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            }); } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageGrid, { className: className, message: message, isReactionEnabled: isReactionEnabled }, statefulFileInfoList.map(function (fileInfo, index) {
            var _a, _b, _c, _d;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-multiple-files-image-renderer-wrapper", onClick: message.sendingStatus === _bundle_0b1520ed["vb" /* an */].SUCCEEDED ? function () { return setCurrentFileViewerIndex(index); } : undefined, key: "sendbird-multiple-files-image-renderer-".concat(index, "-").concat(fileInfo.url) },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { url: (_d = (_c = (_b = (_a = fileInfo.thumbnails) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.url) !== null && _c !== void 0 ? _c : fileInfo.url) !== null && _d !== void 0 ? _d : '', fixedSize: false, width: MULTIPLE_FILES_IMAGE_SIDE_LENGTH[threadMessageKindKey], maxSideLength: MULTIPLE_FILES_IMAGE_SIDE_LENGTH.CHAT_WEB, height: MULTIPLE_FILES_IMAGE_SIDE_LENGTH[threadMessageKindKey], borderRadius: getBorderRadiusForMultipleImageRenderer(MULTIPLE_FILES_IMAGE_BORDER_RADIUS[threadMessageKindKey], index, statefulFileInfoList.length), shadeOnHover: true, isUploaded: !!fileInfo.isUploaded, placeHolder: function (_a) {
                        var style = _a.style;
                        if (fileInfo.mimeType && isGif(fileInfo.mimeType))
                            return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImagePlaceholder.GIF, { style: style });
                        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImagePlaceholder.Default, { style: style });
                    }, defaultComponent: external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImagePlaceholder.LoadError, null) })));
        })))) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
}
var ImagePlaceholder = {
    Default: function (_a) {
        var style = _a.style;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-multiple-files-image-renderer__thumbnail__placeholder", style: style },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH, height: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH })));
    },
    GIF: function (_a) {
        var style = _a.style;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-multiple-files-image-renderer__thumbnail__placeholder", style: style },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.GIF, fillColor: IconColors.THUMBNAIL_ICON, width: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH, height: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH }))));
    },
    LoadError: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-multiple-files-image-renderer__thumbnail__placeholder" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.THUMBNAIL_NONE, fillColor: IconColors.ON_BACKGROUND_2, width: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH, height: MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH }))); },
};

function useThreadMessageKindKeySelector(_a) {
    var threadMessageKind = _a.threadMessageKind, isMobile = _a.isMobile;
    var threadMessageKindKey = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return K(threadMessageKind)
            .with(ThreadMessageKind.PARENT, function () { return (isMobile
            ? 'THREAD_PARENT_MOBILE'
            : 'THREAD_PARENT_WEB'); })
            .with(ThreadMessageKind.CHILD, function () { return (isMobile
            ? 'THREAD_CHILD_MOBILE'
            : 'THREAD_CHILD_WEB'); })
            .otherwise(function () { return (isMobile
            ? 'CHAT_MOBILE'
            : 'CHAT_WEB'); });
    }, [isMobile, threadMessageKind]);
    return threadMessageKindKey;
}

// SendingStatus.SCHEDULED is currently not covered in UIKit
//  So we can ignore for now, but for future, it is better to explicitly use PENDING, FAILED, or CANCELED.
var useFileInfoListWithUploaded = function (message) {
    var _a, _b;
    var blobHandler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(new Map());
    var getObjectURL = function (index, blob) {
        if (!blobHandler.current.has(index) && blob)
            blobHandler.current.set(index, URL.createObjectURL(blob));
        return blobHandler.current.get(index);
    };
    var revokeURLs = function () {
        if (blobHandler.current.size > 0) {
            blobHandler.current.forEach(function (url) { return URL.revokeObjectURL(url); });
            blobHandler.current.clear();
        }
    };
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        return function () { return revokeURLs(); };
    }, []);
    if (!message || !message.isMultipleFilesMessage || !message.isMultipleFilesMessage()) {
        return [];
    }
    else if (message.sendingStatus === _bundle_0b1520ed["vb" /* an */].SUCCEEDED) {
        revokeURLs();
        return message.fileInfoList.map(function (it) {
            var _a, _b;
            return (__assign(__assign({}, it), { url: it.url, isUploaded: true, mimeType: (_a = it.mimeType) !== null && _a !== void 0 ? _a : undefined, fileName: (_b = it.fileName) !== null && _b !== void 0 ? _b : undefined }));
        });
    }
    else {
        return (_b = (_a = message === null || message === void 0 ? void 0 : message.messageParams) === null || _a === void 0 ? void 0 : _a.fileInfoList.map(function (it, index) {
            var _a, _b;
            return (__assign(__assign({}, it), { url: (_b = (_a = getObjectURL(index)) !== null && _a !== void 0 ? _a : it.fileUrl) !== null && _b !== void 0 ? _b : (it.file instanceof Blob ? getObjectURL(index, it.file) : undefined), isUploaded: !it.file && typeof it.fileUrl === 'string' && it.fileUrl.length > 0 }));
        })) !== null && _b !== void 0 ? _b : [];
    }
};


//# sourceMappingURL=bundle-zwvszN0Y.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ProgressBar.js



/* eslint-disable no-redeclare */
var ProgressBarColorTypes = {
    PRIMARY: 'progress-bar-color--primary',
    GRAY: 'progress-bar-color--gray',
};
var ProgressBar = function (_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, _c = _a.disabled, disabled = _c === void 0 ? false : _c, maxSize = _a.maxSize, _d = _a.currentSize, currentSize = _d === void 0 ? 0 : _d, _e = _a.colorType, colorType = _e === void 0 ? ProgressBarColorTypes.PRIMARY : _e;
    var width = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return "".concat(currentSize / maxSize * 100, "%");
    }, [currentSize, maxSize]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-progress-bar', className, colorType, disabled && 'progress-bar--disabled') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-progress-bar__fill", style: { width: width } })));
};


//# sourceMappingURL=ProgressBar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/VoicePlayer/useVoicePlayer.js



























var generateGroupKey = function (channelUrl, key) {
    if (channelUrl === void 0) { channelUrl = ''; }
    if (key === void 0) { key = ''; }
    return ("".concat(channelUrl, "-").concat(key));
};

var useVoicePlayer = function (_a) {
    var _b;
    var _c = _a.key, key = _c === void 0 ? '' : _c, _d = _a.channelUrl, channelUrl = _d === void 0 ? '' : _d, audioFile = _a.audioFile, _e = _a.audioFileUrl, audioFileUrl = _e === void 0 ? '' : _e;
    var groupKey = generateGroupKey(channelUrl, key);
    var _f = useVoicePlayerContext(), play = _f.play, pause = _f.pause, stop = _f.stop, voicePlayerStore = _f.voicePlayerStore;
    var isRecordable = useVoiceRecorderContext().isRecordable;
    var currentAudioUnit = ((_b = voicePlayerStore === null || voicePlayerStore === void 0 ? void 0 : voicePlayerStore.audioStorage) === null || _b === void 0 ? void 0 : _b[groupKey]) || AudioUnitDefaultValue();
    var playVoicePlayer = function () {
        if (!isRecordable) {
            play === null || play === void 0 ? void 0 : play({
                groupKey: groupKey,
                audioFile: audioFile,
                audioFileUrl: audioFileUrl,
            });
        }
    };
    var pauseVoicePlayer = function () {
        pause === null || pause === void 0 ? void 0 : pause(groupKey);
    };
    var stopVoicePlayer = function (text) {
        if (text === void 0) { text = ''; }
        stop === null || stop === void 0 ? void 0 : stop(text);
    };
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        return function () {
            var _a;
            if (audioFile || audioFileUrl) {
                // Can't get the current AudioPlayer through the React hooks(useReducer or useState) in this scope
                var voiceAudioPlayerElement = document.getElementById(bundle_DhBuJR0w["j" /* c */]);
                (_a = voiceAudioPlayerElement === null || voiceAudioPlayerElement === void 0 ? void 0 : voiceAudioPlayerElement.pause) === null || _a === void 0 ? void 0 : _a.call(voiceAudioPlayerElement);
            }
        };
    }, []);
    return ({
        play: playVoicePlayer,
        pause: pauseVoicePlayer,
        stop: stopVoicePlayer,
        /**
         * The reason why we multiply this by *1000 is,
         * The unit of playbackTime and duration should be millisecond
         */
        playbackTime: ((currentAudioUnit === null || currentAudioUnit === void 0 ? void 0 : currentAudioUnit.playbackTime) || 0) * 1000,
        duration: ((currentAudioUnit === null || currentAudioUnit === void 0 ? void 0 : currentAudioUnit.duration) || 0) * 1000,
        playingStatus: currentAudioUnit.playingStatus,
    });
};


//# sourceMappingURL=useVoicePlayer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/PlaybackTime.js





var PlaybackTime = function (_a) {
    var className = _a.className, _b = _a.time, time = _b === void 0 ? 0 : _b, _c = _a.labelType, labelType = _c === void 0 ? LabelTypography.CAPTION_2 : _c, _d = _a.labelColor, labelColor = _d === void 0 ? LabelColors.ONCONTENT_1 : _d;
    var naturalTime = time < 0 ? 0 : time;
    var hour = Math.floor(naturalTime / 3600000);
    var min = Math.floor(naturalTime % 3600000 / 60000);
    var sec = Math.floor((naturalTime % 3600000 % 60000) / 1000);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-play-time ".concat(className) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: labelType, color: labelColor }, "".concat(hour ? hour + ':' : '').concat(min < 10 ? '0' : '').concat(min ? min : '0', ":").concat(sec < 10 ? '0' : '').concat(sec))));
};


//# sourceMappingURL=PlaybackTime.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/VoiceMessageItemBody.js































var VoiceMessageItemBody = function (_a) {
    var _b;
    var className = _a.className, message = _a.message, channelUrl = _a.channelUrl, _c = _a.isByMe, isByMe = _c === void 0 ? false : _c, _d = _a.isReactionEnabled, isReactionEnabled = _d === void 0 ? false : _d;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), usingReaction = _e[0], setUsingReaction = _e[1];
    var _f = useVoicePlayer({
        channelUrl: channelUrl,
        key: "".concat(message === null || message === void 0 ? void 0 : message.messageId),
        audioFileUrl: message === null || message === void 0 ? void 0 : message.url,
    }), play = _f.play, 
    // do not pause on unmount, because on desktop layout
    // the component can be paused when it is played from
    // channel and same message is unmounted from the thread
    pause = _f.pause, _g = _f.playbackTime, playbackTime = _g === void 0 ? 0 : _g, duration = _f.duration, _h = _f.playingStatus, playingStatus = _h === void 0 ? VOICE_PLAYER_STATUS.IDLE : _h;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        if (isReactionEnabled && ((_a = message === null || message === void 0 ? void 0 : message.reactions) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            setUsingReaction(true);
        }
        else {
            setUsingReaction(false);
        }
    }, [isReactionEnabled, (_b = message === null || message === void 0 ? void 0 : message.reactions) === null || _b === void 0 ? void 0 : _b.length]);
    var progressBarMaxSize = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a;
        var DEFAULT_MAX_SIZE = 1;
        if (message === null || message === void 0 ? void 0 : message.metaArrays) {
            var duration_1 = (_a = message === null || message === void 0 ? void 0 : message.metaArrays.find(function (metaArray) { return metaArray.key === 'KEY_VOICE_MESSAGE_DURATION'; })) === null || _a === void 0 ? void 0 : _a.value[0];
            return duration_1 ? parseInt(duration_1) : DEFAULT_MAX_SIZE;
        }
        return DEFAULT_MAX_SIZE;
    }, [message === null || message === void 0 ? void 0 : message.metaArrays]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-voice-message-item-body', className, usingReaction && 'is-reactions-contained') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ProgressBar, { className: "sendbird-voice-message-item-body__progress-bar", maxSize: duration || progressBarMaxSize, currentSize: playbackTime, colorType: isByMe ? ProgressBarColorTypes.PRIMARY : ProgressBarColorTypes.GRAY }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-item-body__status-button" },
            (playingStatus === VOICE_PLAYER_STATUS.IDLE || playingStatus === VOICE_PLAYER_STATUS.PAUSED) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-item-body__status-button__button", onClick: play },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "18px", height: "18px", type: IconTypes.PLAY, fillColor: IconColors.PRIMARY }))),
            playingStatus === VOICE_PLAYER_STATUS.PREPARING && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { width: "22.2px", height: "22.2px" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "22.2px", height: "22.2px", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY_2 }))),
            playingStatus === VOICE_PLAYER_STATUS.PLAYING && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-item-body__status-button__button", onClick: function () { pause(); } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-item-body__status-button__button__pause" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-item-body__status-button__button__pause__inner" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-item-body__status-button__button__pause__inner" }))))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaybackTime, { className: "sendbird-voice-message-item-body__playback-time", time: progressBarMaxSize - playbackTime, labelType: LabelTypography.BODY_1, labelColor: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 })));
};


//# sourceMappingURL=VoiceMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ThumbnailMessageItemBody.js












function ThumbnailMessageItemBody(_a) {
    var _b, _c;
    var _d = _a.className, className = _d === void 0 ? '' : _d, message = _a.message, _e = _a.isByMe, isByMe = _e === void 0 ? false : _e, _f = _a.mouseHover, mouseHover = _f === void 0 ? false : _f, _g = _a.isReactionEnabled, isReactionEnabled = _g === void 0 ? false : _g, _h = _a.showFileViewer, showFileViewer = _h === void 0 ? noop : _h, _j = _a.style, style = _j === void 0 ? {} : _j;
    var thumbnailUrl = getMessageFirstFileThumbnailUrl(message);
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), imageRendered = _k[0], setImageRendered = _k[1];
    var onClickHandler = useLongPress({
        onLongPress: noop,
        onClick: function () {
            if (isSentMessage(message)) {
                showFileViewer === null || showFileViewer === void 0 ? void 0 : showFileViewer(true);
            }
        },
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: getClassName([
            className,
            'sendbird-thumbnail-message-item-body',
            isByMe ? 'outgoing' : 'incoming',
            mouseHover ? 'mouse-hover' : '',
            (isReactionEnabled && ((_c = (_b = message.reactions) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 0) ? 'reactions' : '',
        ]) }, onClickHandler),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-thumbnail-message-item-body__thumbnail", url: thumbnailUrl || getMessageFirstFileUrl(message), alt: getMessageFirstFileType(message), width: (style === null || style === void 0 ? void 0 : style.width) || '360px', height: (style === null || style === void 0 ? void 0 : style.height) || '270px', onLoad: function () { setImageRendered(true); }, placeHolder: function (_a) {
                var style = _a.style;
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thumbnail-message-item-body__placeholder", style: style }));
            } }),
        (isVideoMessage(message) && !thumbnailUrl) && !imageRendered && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { className: "sendbird-thumbnail-message-item-body__video" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", { src: getMessageFirstFileUrl(message), type: getMessageFirstFileType(message) }))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thumbnail-message-item-body__image-cover" }),
        (isVideoMessage(message) || isGifMessage(message)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thumbnail-message-item-body__icon-wrapper" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thumbnail-message-item-body__icon-wrapper__icon" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.GIF, fillColor: IconColors.THUMBNAIL_ICON, width: "34px", height: "34px" }))))));
}


//# sourceMappingURL=ThumbnailMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/UnknownMessageItemBody.js










function UnknownMessageItemBody(_a) {
    var _b;
    var className = _a.className, message = _a.message, _c = _a.isByMe, isByMe = _c === void 0 ? false : _c, _d = _a.mouseHover, mouseHover = _d === void 0 ? false : _d, _e = _a.isReactionEnabled, isReactionEnabled = _e === void 0 ? false : _e;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className !== null && className !== void 0 ? className : '',
            'sendbird-unknown-message-item-body',
            isByMe ? 'outgoing' : 'incoming',
            mouseHover ? 'mouse-hover' : '',
            (isReactionEnabled && ((_b = message === null || message === void 0 ? void 0 : message.reactions) === null || _b === void 0 ? void 0 : _b.length) > 0) ? 'reactions' : '',
        ]) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-unknown-message-item-body__header", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1 }, stringSet.UNKNOWN__UNKNOWN_MESSAGE_TYPE),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-unknown-message-item-body__description", type: LabelTypography.BODY_1, color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2 }, stringSet.UNKNOWN__CANNOT_READ_MESSAGE)));
}


//# sourceMappingURL=UnknownMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-C7Vw36CA.js


var ComponentType;
(function (ComponentType) {
    ComponentType["Box"] = "box";
    ComponentType["Text"] = "text";
    ComponentType["Image"] = "image";
    ComponentType["TextButton"] = "textButton";
    ComponentType["ImageButton"] = "imageButton";
})(ComponentType || (ComponentType = {}));
var CompositeComponentType;
(function (CompositeComponentType) {
    CompositeComponentType["Carousel"] = "carouselView";
})(CompositeComponentType || (CompositeComponentType = {}));

// -------- Set property mapper
const MAPPER = () => undefined;
const createParser = (params) => {
    const defaultMapper = (params === null || params === void 0 ? void 0 : params.defaultMapper) || MAPPER;
    const mapper = {
        defaultMapper,
        mapBoxProps: (params === null || params === void 0 ? void 0 : params.mapBoxProps) || defaultMapper,
        mapTextProps: (params === null || params === void 0 ? void 0 : params.mapTextProps) || defaultMapper,
        mapImageProps: (params === null || params === void 0 ? void 0 : params.mapImageProps) || defaultMapper,
        mapTextButtonProps: (params === null || params === void 0 ? void 0 : params.mapTextButtonProps) || defaultMapper,
        mapImageButtonProps: (params === null || params === void 0 ? void 0 : params.mapImageButtonProps) || defaultMapper,
        mapCarouselProps: (params === null || params === void 0 ? void 0 : params.mapCarouselProps) || defaultMapper,
    };
    return {
        parse(item, options) {
            switch (item.type) {
                case ComponentType.Box: {
                    return { properties: mapper.mapBoxProps(item, options) };
                }
                case ComponentType.Text: {
                    return { properties: mapper.mapTextProps(item, options) };
                }
                case ComponentType.Image: {
                    return { properties: mapper.mapImageProps(item, options) };
                }
                case ComponentType.TextButton: {
                    return { properties: mapper.mapTextButtonProps(item, options) };
                }
                case ComponentType.ImageButton: {
                    return { properties: mapper.mapImageButtonProps(item, options) };
                }
                case CompositeComponentType.Carousel: {
                    return { properties: mapper.mapCarouselProps(item, options) };
                }
                default:
                    return { properties: undefined };
            }
        },
    };
};

const FRAGMENT = ({ children }) => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, children);
function createRenderer(params) {
    var _a, _b, _c, _d, _e, _f;
    return {
        box: ((_a = params === null || params === void 0 ? void 0 : params.views) === null || _a === void 0 ? void 0 : _a.box) || FRAGMENT,
        text: ((_b = params === null || params === void 0 ? void 0 : params.views) === null || _b === void 0 ? void 0 : _b.text) || FRAGMENT,
        image: ((_c = params === null || params === void 0 ? void 0 : params.views) === null || _c === void 0 ? void 0 : _c.image) || FRAGMENT,
        imageButton: ((_d = params === null || params === void 0 ? void 0 : params.views) === null || _d === void 0 ? void 0 : _d.imageButton) || FRAGMENT,
        textButton: ((_e = params === null || params === void 0 ? void 0 : params.views) === null || _e === void 0 ? void 0 : _e.textButton) || FRAGMENT,
        carouselView: ((_f = params === null || params === void 0 ? void 0 : params.views) === null || _f === void 0 ? void 0 : _f.carouselView) || FRAGMENT,
    };
}

var __rest$4 = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
const SizeContext = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    sizes: {},
    updateSize: () => { },
});
const SizeContextProvider = ({ children }) => {
    const [sizes, setSizes] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
    const updateSize = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((_a) => {
        var { id } = _a, rest = __rest$4(_a, ["id"]);
        if (id) {
            setSizes((prevSizes) => (Object.assign(Object.assign({}, prevSizes), { [id]: rest })));
        }
    }, []);
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SizeContext.Provider, { value: { sizes, updateSize } }, children);
};
const useSizeContext = () => Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(SizeContext);

var Layout;
(function (Layout) {
    Layout["Row"] = "row";
    Layout["Column"] = "column";
})(Layout || (Layout = {}));
var AlignValue;
(function (AlignValue) {
    AlignValue["Center"] = "center";
    AlignValue["Left"] = "left";
    AlignValue["Right"] = "right";
    AlignValue["Top"] = "top";
    AlignValue["Bottom"] = "bottom";
})(AlignValue || (AlignValue = {}));
/**
 * @description
 * Caution: Numbers are passed as string types in the message template builder.
 * Use `==` comparison instead of `===` comparison when using a regular enum instead of a string enum.
 */
var FlexSizeSpecValue;
(function (FlexSizeSpecValue) {
    FlexSizeSpecValue[FlexSizeSpecValue["FillParent"] = 0] = "FillParent";
    FlexSizeSpecValue[FlexSizeSpecValue["WrapContent"] = 1] = "WrapContent";
})(FlexSizeSpecValue || (FlexSizeSpecValue = {}));
var FontWeight;
(function (FontWeight) {
    FontWeight["Normal"] = "normal";
    FontWeight["Bold"] = "bold";
})(FontWeight || (FontWeight = {}));
var MediaContentMode;
(function (MediaContentMode) {
    MediaContentMode["AspectFit"] = "aspectFit";
    MediaContentMode["AspectFill"] = "aspectFill";
    MediaContentMode["ScalesToFill"] = "scalesToFill";
})(MediaContentMode || (MediaContentMode = {}));

const SUPPORTED_TEMPLATE_VERSIONS = [
    1,
    2, // Composite templates: Carousel
];
const alignInFlex = (align) => {
    switch (align) {
        case AlignValue.Right:
        case AlignValue.Bottom:
            return 'flex-end';
        case AlignValue.Center:
            return 'center';
        case AlignValue.Left:
        case AlignValue.Top:
        default:
            return 'flex-start';
    }
};
const isTemplateVersionSupported = (templateVersion) => {
    if (!templateVersion)
        return true;
    return SUPPORTED_TEMPLATE_VERSIONS.includes(templateVersion);
};

const memoize = (fn) => {
    const cache = new Map();
    const cached = function (val) {
        return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) && cache.get(val);
    };
    cached.cache = cache;
    return cached;
};
/**
 * Generate each item's id by each item's array depth
 */
const setTemplateItemId = memoize((data) => {
    const addIdRecursively = (item, id) => {
        if ('items' in item && (item === null || item === void 0 ? void 0 : item.items) != null) {
            item.items.forEach((subItem, subIdx) => {
                const subId = `${id}-${subIdx}`;
                subItem.id = subId;
                addIdRecursively(subItem, subId);
            });
        }
    };
    data.forEach((item, idx) => {
        const id = `${idx}`;
        item.id = id;
        addIdRecursively(item, id);
    });
    return data;
});

const defaultProperties = {
    rootLayout: Layout.Column,
    view: {
        size: {
            width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
            height: { type: 'flex', value: FlexSizeSpecValue.WrapContent },
        },
    },
    box: {
        layout: Layout.Row,
        align: { vertical: AlignValue.Top, horizontal: AlignValue.Left },
    },
};

const createMessageTemplate = (opts) => {
    const Container = opts.Container || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment;
    const UnknownMessage = opts.UnknownMessage || (() => null);
    const parser = opts.parser || createParser();
    const renderer = opts.renderer || createRenderer();
    const MessageTemplateBase = ({ templateItems, parentLayout = defaultProperties.box.layout, isRoot = false, }) => {
        const renderItems = templateItems;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, renderItems.map((item, index, siblings) => {
            const { properties } = parser.parse(item, { parentLayout, elemIdx: index, siblings });
            const props = {
                key: index,
                parentLayout,
                parsedProperties: properties,
                siblings,
            };
            switch (item.type) {
                // CompositeComponent should be top level component
                case CompositeComponentType.Carousel: {
                    if (!isRoot) {
                        throw new Error('Cannot parse template item as Carousel if the template item is not the root.');
                    }
                    if (!item.items || !Array.isArray(item.items) || item.items.length === 0) {
                        throw new Error('Cannot parse template item as Carousel if carousel has no items.');
                    }
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(renderer.carouselView, Object.assign({}, item, props), item.items.map((items, index) => (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageTemplateBase, { key: index, templateItems: items || [], parentLayout: parentLayout })))));
                }
                case ComponentType.Box: {
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(renderer.box, Object.assign({}, item, props),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageTemplateBase, { templateItems: item.items || [], parentLayout: item.layout })));
                }
                case ComponentType.Text: {
                    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(renderer.text, Object.assign({}, item, props));
                }
                case ComponentType.Image: {
                    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(renderer.image, Object.assign({}, item, props));
                }
                case ComponentType.TextButton: {
                    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(renderer.textButton, Object.assign({}, item, props));
                }
                case ComponentType.ImageButton: {
                    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(renderer.imageButton, Object.assign({}, item, props));
                }
                default: {
                    // or throw new Error('Cannot parse template item')
                    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnknownMessage, { item: item });
                }
            }
        })));
    };
    return {
        MessageTemplate: ({ parentLayout = defaultProperties.rootLayout, templateVersion, templateItems, }) => {
            const items = setTemplateItemId(templateItems);
            if (!isTemplateVersionSupported(templateVersion)) {
                /**
                 * I choose to throw instead of returning UnknownMessage because UnknownMessage syntax (required prop: item) is not what UIKit wants.
                 */
                throw new Error(`Cannot parse template item due to unsupported template version: ${templateVersion}, ${SUPPORTED_TEMPLATE_VERSIONS}`);
            }
            let isCarousel = false;
            if (Array.isArray(items) && items.length > 0) {
                isCarousel = items[0].type === CompositeComponentType.Carousel;
            }
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SizeContextProvider, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Container, { className: isCarousel ? 'sb-message-template__parent_for_carousel' : '' },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageTemplateBase, { parentLayout: parentLayout, templateItems: items, isRoot: true }))));
        },
        MessageTemplateBase,
    };
};

var ActionType;
(function (ActionType) {
    ActionType["Web"] = "web";
    ActionType["Custom"] = "custom";
    ActionType["UIKit"] = "uikit";
})(ActionType || (ActionType = {}));

({
    version: 1,
    body: {
        items: [
            {
                type: ComponentType.Image,
                action: { type: ActionType.Web, data: 'https://docs.sendbird.com' },
                height: { type: 'fixed', value: 236 },
                viewStyle: {
                    padding: {
                        left: 4,
                        right: 4,
                        top: 4,
                        bottom: 4,
                    },
                },
                imageUrl: 'https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg',
                imageStyle: { contentMode: MediaContentMode.AspectFill },
            },
            {
                type: ComponentType.Box,
                layout: Layout.Column,
                width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                height: { type: 'fixed', value: 200 },
                items: [
                    {
                        type: ComponentType.Box,
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        height: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        viewStyle: { backgroundColor: '#fa6464' },
                    },
                    {
                        type: ComponentType.Box,
                        layout: Layout.Column,
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        height: { type: 'flex', value: FlexSizeSpecValue.WrapContent },
                        viewStyle: { backgroundColor: '#ffaf5c' },
                        items: [
                            {
                                type: ComponentType.Text,
                                text: 'Message',
                                align: { horizontal: AlignValue.Center, vertical: AlignValue.Center },
                                width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                                height: { type: 'fixed', value: 50 },
                            },
                            {
                                type: ComponentType.Image,
                                action: { type: ActionType.Web, data: 'https://docs.sendbird.com' },
                                width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                                height: { type: 'fixed', value: 50 },
                                imageUrl: 'https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg',
                                imageStyle: { contentMode: MediaContentMode.AspectFill },
                            },
                        ],
                    },
                    {
                        type: ComponentType.Box,
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        height: { type: 'fixed', value: 20 },
                        viewStyle: { backgroundColor: '#ffe450' },
                    },
                    {
                        type: ComponentType.Box,
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        height: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        viewStyle: { backgroundColor: '#329a1b' },
                    },
                ],
            },
            {
                type: ComponentType.Box,
                viewStyle: { padding: { top: 12, bottom: 12, left: 12, right: 12 } },
                layout: Layout.Column,
                items: [
                    {
                        type: ComponentType.Box,
                        align: { horizontal: AlignValue.Left, vertical: AlignValue.Center },
                        layout: Layout.Row,
                        viewStyle: {
                            borderWidth: 1,
                            borderColor: '#72723f',
                        },
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        height: { type: 'fixed', value: 150 },
                        items: [
                            {
                                type: ComponentType.Text,
                                width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                                height: { type: 'fixed', value: 50 },
                                text: 'Sample1 text',
                                maxTextLines: 1,
                                align: { vertical: AlignValue.Center, horizontal: AlignValue.Left },
                                viewStyle: {
                                    backgroundColor: '#cc4400',
                                },
                                textStyle: {
                                    size: 16,
                                    color: '#f8f8f8',
                                    weight: FontWeight.Bold,
                                },
                            },
                            {
                                type: ComponentType.ImageButton,
                                action: { type: ActionType.UIKit, data: 'uikit://delete' },
                                width: { type: 'fixed', value: 20 },
                                height: { type: 'fixed', value: 20 },
                                imageUrl: 'https://file-ap-1.sendbird.com/5b5379aa73fd460da22ffaf9a61d0d7f.png',
                                imageStyle: { contentMode: MediaContentMode.AspectFit },
                            },
                        ],
                    },
                    {
                        type: ComponentType.Text,
                        viewStyle: { padding: { top: 6, bottom: 12, left: 0, right: 0 } },
                        text: 'Esse eu esse duis ipsum et dolor eu ut sit amet consectetur cillum velit officia. Ex adipisicing elit quis ea sit. Occaecat in eu aliqua nulla magna id ut excepteur minim.',
                        maxTextLines: 2,
                        textStyle: { size: 14, color: '#e10000' },
                        width: { type: 'fixed', value: 200 },
                        height: { type: 'fixed', value: 50 },
                    },
                    {
                        type: ComponentType.TextButton,
                        action: { type: ActionType.Web, data: 'https://www.daum.net' },
                        text: 'Button 3',
                        textStyle: { size: 14, color: '#742ddd', weight: FontWeight.Bold },
                    },
                ],
            },
        ],
    },
});
({
    'version': 1,
    'body': {
        'items': [
            {
                'type': ComponentType.Image,
                'action': { 'type': ActionType.Web, 'data': 'https://www.naver.com/' },
                'height': { 'type': 'fixed', 'value': 136 },
                'imageUrl': 'https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg',
                'imageStyle': { 'contentMode': MediaContentMode.AspectFill },
            },
            {
                'type': ComponentType.Box,
                'viewStyle': { 'padding': { 'top': 12, 'bottom': 12, 'left': 12, 'right': 12 }, backgroundColor: '#cccccc' },
                'layout': Layout.Column,
                width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                'items': [
                    {
                        'type': ComponentType.Box,
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        'layout': Layout.Row,
                        'items': [
                            {
                                'type': ComponentType.TextButton,
                                'action': { 'type': ActionType.Web, 'data': 'https://www.daum.net' },
                                width: { type: 'fixed', value: 150 },
                                'viewStyle': { 'margin': { 'top': 0, 'bottom': 0, 'left': 0, 'right': 4 } },
                                'text': 'Button 2',
                                'textStyle': { 'size': 14, 'weight': FontWeight.Bold },
                            },
                            {
                                'type': ComponentType.TextButton,
                                'action': { 'type': ActionType.Web, 'data': 'https://www.daum.net' },
                                width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                                'viewStyle': { 'margin': { 'top': 0, 'bottom': 0, 'left': 4, 'right': 0 } },
                                'text': 'Button 3',
                                'textStyle': { 'size': 14, 'weight': FontWeight.Bold },
                            },
                        ],
                    },
                    {
                        'type': ComponentType.Box,
                        width: { type: 'flex', value: FlexSizeSpecValue.FillParent },
                        'layout': Layout.Row,
                        'items': [
                            {
                                'type': ComponentType.Text,
                                'text': 'Sample2 text',
                                'width': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                                'maxTextLines': 1,
                                'textStyle': { 'size': 16, 'weight': FontWeight.Bold },
                            },
                            {
                                'type': ComponentType.ImageButton,
                                'action': { 'type': ActionType.UIKit, 'data': 'uikit://delete' },
                                'width': { 'type': 'fixed', 'value': 20 },
                                'height': { 'type': 'fixed', 'value': 20 },
                                'imageUrl': 'https://file-ap-1.sendbird.com/5b5379aa73fd460da22ffaf9a61d0d7f.png',
                                'imageStyle': { 'contentMode': MediaContentMode.AspectFit },
                            },
                        ],
                    },
                    {
                        'type': ComponentType.Text,
                        'viewStyle': { 'padding': { 'top': 6, 'bottom': 12, 'left': 0, 'right': 0 } },
                        'text': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aui',
                        'textStyle': { 'size': 14 },
                    },
                ],
            },
        ],
    },
});
({
    'version': 1,
    'body': {
        'items': [
            {
                'type': ComponentType.Box,
                'viewStyle': { 'backgroundColor': '#ffffff', 'borderWidth': 1, 'borderColor': '#eeeeee', 'radius': 16 },
                'layout': Layout.Column,
                'items': [
                    {
                        'type': ComponentType.Image,
                        'height': { 'type': 'fixed', 'value': 200 },
                        'imageUrl': 'https://img.freepik.com/free-vector/cartoon-happy-hours-background_52683-81243.jpg?w=2000&t=st=1666689198~exp=1666689798~hmac=23109d44ba03deee7aee069cbeebfcb48fa27f85e53c1cafc5d5d7345f1a2041',
                        'imageStyle': { 'contentMode': MediaContentMode.AspectFill },
                    },
                    {
                        'type': ComponentType.Box,
                        'viewStyle': { 'padding': { 'top': 15, 'bottom': 15, 'left': 15, 'right': 15 } },
                        'layout': Layout.Column,
                        'items': [
                            {
                                'type': ComponentType.Text,
                                'text': "Don't miss these deals today",
                                'maxTextLines': 1,
                                'textStyle': { 'size': 20, 'color': '#e10000', 'weight': FontWeight.Bold },
                            },
                            {
                                'type': ComponentType.Text,
                                'viewStyle': { 'margin': { 'top': 5, 'bottom': 0, 'left': 0, 'right': 0 } },
                                'text': 'Pay with Maya and get cashback!',
                                'maxTextLines': 1,
                                'textStyle': { 'size': 14, 'color': '#e10000' },
                            },
                            {
                                'type': ComponentType.Box,
                                'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                'viewStyle': { 'margin': { 'top': 10, 'bottom': 0, 'left': 0, 'right': 0 } },
                                'layout': Layout.Row,
                                'items': [
                                    {
                                        'type': ComponentType.Image,
                                        'width': { 'type': 'fixed', 'value': 50 },
                                        'height': { 'type': 'fixed', 'value': 50 },
                                        'viewStyle': {
                                            'backgroundColor': '#ffffff',
                                            'borderWidth': 1,
                                            'borderColor': '#eeeeee',
                                            'radius': 25,
                                        },
                                        'imageUrl': 'https://yt3.ggpht.com/ytc/AMLnZu8Kg89ymE7qt5bsS9vMqi9h2aHiN6m9ID-IgxR6-Q=s900-c-k-c0x00ffffff-no-rj',
                                        'imageStyle': { 'contentMode': MediaContentMode.AspectFill },
                                    },
                                    {
                                        'type': ComponentType.Box,
                                        'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                        'viewStyle': { 'margin': { 'top': 0, 'bottom': 0, 'left': 15, 'right': 0 } },
                                        'layout': Layout.Column,
                                        'items': [
                                            {
                                                'type': ComponentType.Text,
                                                'text': 'Meralco',
                                                'maxTextLines': 1,
                                                'textStyle': { 'size': 16, 'color': '#e10000', 'weight': FontWeight.Bold },
                                            },
                                            {
                                                'type': ComponentType.Text,
                                                'viewStyle': { 'margin': { 'top': 3, 'bottom': 0, 'left': 0, 'right': 0 } },
                                                'text': '30% cashback, P300 min spend',
                                                'maxTextLines': 1,
                                                'textStyle': { 'size': 12, 'color': '#610000', 'weight': FontWeight.Bold },
                                            },
                                        ],
                                    },
                                ],
                            },
                            {
                                'type': ComponentType.Box,
                                'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                'viewStyle': { 'margin': { 'top': 10, 'bottom': 0, 'left': 0, 'right': 0 } },
                                'layout': Layout.Row,
                                'items': [
                                    {
                                        'type': ComponentType.Image,
                                        'width': { 'type': 'fixed', 'value': 50 },
                                        'height': { 'type': 'fixed', 'value': 50 },
                                        'viewStyle': {
                                            'backgroundColor': '#ffffff',
                                            'borderWidth': 1,
                                            'borderColor': '#eeeeee',
                                            'radius': 25,
                                        },
                                        'imageUrl': 'https://1000logos.net/wp-content/uploads/2021/12/Globe-Telecom-logo.png',
                                        'imageStyle': { 'contentMode': MediaContentMode.AspectFill, tintColor: '#a49a9a' },
                                    },
                                    {
                                        'type': ComponentType.Box,
                                        'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                        'viewStyle': { 'margin': { 'top': 0, 'bottom': 0, 'left': 15, 'right': 0 } },
                                        'layout': Layout.Column,
                                        'items': [
                                            {
                                                'type': ComponentType.Text,
                                                'text': 'Globe',
                                                'maxTextLines': 1,
                                                'textStyle': { 'size': 16, 'color': '#e10000', 'weight': FontWeight.Bold },
                                            },
                                            {
                                                'type': ComponentType.Text,
                                                'viewStyle': { 'margin': { 'top': 3, 'bottom': 0, 'left': 0, 'right': 0 } },
                                                'text': '30% cashback, P300 min spend',
                                                'maxTextLines': 1,
                                                'textStyle': { 'size': 12, 'color': '#610000', 'weight': FontWeight.Bold },
                                            },
                                        ],
                                    },
                                ],
                            },
                            {
                                'type': ComponentType.Box,
                                'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                'viewStyle': { 'margin': { 'top': 10, 'bottom': 0, 'left': 0, 'right': 0 } },
                                'layout': Layout.Row,
                                'items': [
                                    {
                                        'type': ComponentType.Image,
                                        'width': { 'type': 'fixed', 'value': 50 },
                                        'height': { 'type': 'fixed', 'value': 50 },
                                        'viewStyle': {
                                            'backgroundColor': '#ffffff',
                                            'borderWidth': 1,
                                            'borderColor': '#eeeeee',
                                            'radius': 25,
                                        },
                                        'imageUrl': 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Cignal.svg/640px-Cignal.svg.png',
                                        'imageStyle': { 'contentMode': MediaContentMode.AspectFill },
                                    },
                                    {
                                        'type': ComponentType.Box,
                                        'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                        'viewStyle': { 'margin': { 'top': 0, 'bottom': 0, 'left': 15, 'right': 0 } },
                                        'layout': Layout.Column,
                                        'items': [
                                            {
                                                'type': ComponentType.Text,
                                                'text': 'Cignal',
                                                'maxTextLines': 1,
                                                'textStyle': { 'size': 16, 'color': '#e10000', 'weight': FontWeight.Bold },
                                            },
                                            {
                                                'type': ComponentType.Text,
                                                'viewStyle': { 'margin': { 'top': 3, 'bottom': 0, 'left': 0, 'right': 0 } },
                                                'text': '30% cashback, P300 min spend',
                                                'maxTextLines': 1,
                                                'textStyle': { 'size': 12, 'color': '#610000', 'weight': FontWeight.Bold },
                                            },
                                        ],
                                    },
                                ],
                            },
                            {
                                'type': ComponentType.Box,
                                'align': { 'horizontal': AlignValue.Left, 'vertical': AlignValue.Center },
                                'viewStyle': { 'margin': { 'top': 10, 'bottom': 0, 'left': 0, 'right': 0 } },
                                'layout': Layout.Row,
                                'items': [
                                    {
                                        'type': ComponentType.TextButton,
                                        'action': { 'type': ActionType.Web, 'data': 'https://www.daum.net' },
                                        'viewStyle': {
                                            'backgroundColor': '#e0e0e0',
                                            'radius': 16,
                                            'margin': { 'top': 0, 'bottom': 0, 'left': 0, 'right': 4 },
                                            'padding': { 'top': 12, 'bottom': 12, 'left': 12, 'right': 12 },
                                        },
                                        'text': 'Learn more',
                                        'textStyle': { 'size': 15, 'color': '#e10000', 'weight': FontWeight.Bold },
                                    },
                                    {
                                        'type': ComponentType.TextButton,
                                        'action': { 'type': ActionType.Web, 'data': 'https://www.daum.net' },
                                        'viewStyle': {
                                            'backgroundColor': '#e10000',
                                            'radius': 16,
                                            'margin': { 'top': 0, 'bottom': 0, 'left': 4, 'right': 0 },
                                            'padding': { 'top': 12, 'bottom': 12, 'left': 12, 'right': 12 },
                                        },
                                        'text': 'Pay now',
                                        'textStyle': { 'size': 15, 'color': '#ffffff', 'weight': FontWeight.Bold },
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
        ],
    },
});
({
    'version': 1,
    'body': {
        'items': [
            {
                'type': ComponentType.Box,
                'layout': Layout.Column,
                'items': [
                    {
                        'type': ComponentType.Image,
                        'imageUrl': 'https://static.sendbird.com/sample/profiles/profile_40_512px.png',
                        'metaData': {
                            'pixelWidth': 512,
                            'pixelHeight': 512,
                        },
                        'imageStyle': {
                            'tintColor': '#44ff1188',
                        },
                        viewStyle: {
                            'padding': {
                                'top': 12,
                                'right': 12,
                                'bottom': 12,
                                'left': 12,
                            },
                        },
                    },
                    {
                        'type': ComponentType.Box,
                        'viewStyle': {
                            'padding': {
                                'top': 12,
                                'right': 12,
                                'bottom': 12,
                                'left': 12,
                            },
                        },
                        'layout': Layout.Column,
                        'items': [
                            {
                                'type': ComponentType.Box,
                                'layout': Layout.Row,
                                'items': [
                                    {
                                        'type': ComponentType.Box,
                                        'layout': Layout.Column,
                                        'items': [
                                            {
                                                'type': ComponentType.Text,
                                                'text': 'hi',
                                                'maxTextLines': 3,
                                                'viewStyle': {
                                                    'padding': {
                                                        'top': 0,
                                                        'bottom': 6,
                                                        'left': 0,
                                                        'right': 0,
                                                    },
                                                },
                                                'textStyle': {
                                                    'size': 16,
                                                    'weight': FontWeight.Bold,
                                                },
                                            },
                                            {
                                                'type': ComponentType.Text,
                                                'text': 'bye',
                                                'maxTextLines': 10,
                                                'textStyle': {
                                                    'size': 14,
                                                },
                                            },
                                        ],
                                    },
                                    {
                                        'type': ComponentType.ImageButton,
                                        'action': {
                                            'type': ActionType.UIKit,
                                            'data': 'sendbirduikit://delete',
                                        },
                                        'width': {
                                            'type': 'fixed',
                                            'value': 20,
                                        },
                                        'height': {
                                            'type': 'fixed',
                                            'value': 20,
                                        },
                                        'metaData': {
                                            'pixelWidth': 60,
                                            'pixelHeight': 60,
                                        },
                                        'imageUrl': 'https://dxstmhyqfqr1o.cloudfront.net/sendbird-message-builder/icon-more.png',
                                        'imageStyle': {
                                            'tintColor': '#ff8d5a',
                                        },
                                    },
                                ],
                            },
                            {
                                'type': ComponentType.Box,
                                'layout': Layout.Column,
                                'items': [
                                    {
                                        'type': ComponentType.Box,
                                        'viewStyle': {
                                            'margin': {
                                                'top': 16,
                                                'bottom': 0,
                                                'left': 0,
                                                'right': 0,
                                            },
                                        },
                                        'align': {
                                            'horizontal': AlignValue.Left,
                                            'vertical': AlignValue.Center,
                                        },
                                        'layout': Layout.Row,
                                        'items': [
                                            {
                                                'type': ComponentType.Image,
                                                'imageUrl': 'https://ca.slack-edge.com/T0ADCTNEL-ULE240VNV-83fd5776e78e-512',
                                                'width': {
                                                    'type': 'fixed',
                                                    'value': 40,
                                                },
                                                'height': {
                                                    'type': 'fixed',
                                                    'value': 40,
                                                },
                                                'metaData': {
                                                    'pixelWidth': 512,
                                                    'pixelHeight': 512,
                                                },
                                                'viewStyle': {
                                                    'backgroundColor': '#BDBDBD',
                                                    'radius': 20,
                                                },
                                                'imageStyle': {
                                                    'contentMode': MediaContentMode.AspectFill,
                                                },
                                            },
                                            {
                                                'type': ComponentType.Box,
                                                'viewStyle': {
                                                    'margin': {
                                                        'top': 0,
                                                        'bottom': 0,
                                                        'left': 12,
                                                        'right': 0,
                                                    },
                                                },
                                                'layout': Layout.Column,
                                                'items': [
                                                    {
                                                        'type': ComponentType.Text,
                                                        'text': 'Chongbu',
                                                        'maxTextLines': 1,
                                                        'textStyle': {
                                                            'size': 16,
                                                            'weight': FontWeight.Bold,
                                                        },
                                                    },
                                                    {
                                                        'type': ComponentType.Text,
                                                        'viewStyle': {
                                                            'margin': {
                                                                'top': 4,
                                                                'bottom': 0,
                                                                'left': 0,
                                                                'right': 0,
                                                            },
                                                        },
                                                        'text': ' ',
                                                        'maxTextLines': 1,
                                                        'textStyle': {
                                                            'size': 14,
                                                        },
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                    {
                                        'type': ComponentType.Box,
                                        'viewStyle': {
                                            'margin': {
                                                'top': 16,
                                                'bottom': 0,
                                                'left': 0,
                                                'right': 0,
                                            },
                                        },
                                        'align': {
                                            'horizontal': AlignValue.Left,
                                            'vertical': AlignValue.Center,
                                        },
                                        'layout': Layout.Row,
                                        'items': [
                                            {
                                                'type': ComponentType.Image,
                                                'imageUrl': 'https://ca.slack-edge.com/T0ADCTNEL-U02LA25KY8J-d41a3e8c7554-512',
                                                'width': {
                                                    'type': 'fixed',
                                                    'value': 40,
                                                },
                                                'height': {
                                                    'type': 'fixed',
                                                    'value': 40,
                                                },
                                                'metaData': {
                                                    'pixelWidth': 512,
                                                    'pixelHeight': 512,
                                                },
                                                'viewStyle': {
                                                    'backgroundColor': '#BDBDBD',
                                                    'radius': 20,
                                                },
                                                'imageStyle': {
                                                    'contentMode': MediaContentMode.AspectFill,
                                                },
                                            },
                                            {
                                                'type': ComponentType.Box,
                                                'viewStyle': {
                                                    'margin': {
                                                        'top': 0,
                                                        'bottom': 0,
                                                        'left': 12,
                                                        'right': 0,
                                                    },
                                                },
                                                'layout': Layout.Column,
                                                'items': [
                                                    {
                                                        'type': ComponentType.Text,
                                                        'text': 'Amanda',
                                                        'maxTextLines': 1,
                                                        'textStyle': {
                                                            'size': 16,
                                                            'weight': FontWeight.Bold,
                                                        },
                                                    },
                                                    {
                                                        'type': ComponentType.Text,
                                                        'viewStyle': {
                                                            'margin': {
                                                                'top': 4,
                                                                'bottom': 0,
                                                                'left': 0,
                                                                'right': 0,
                                                            },
                                                        },
                                                        'text': 'This is title message',
                                                        'maxTextLines': 1,
                                                        'textStyle': {
                                                            'size': 14,
                                                        },
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
        ],
    },
});
({
    'version': '1',
    'body': {
        'items': [
            {
                'type': 'box',
                'layout': 'column',
                height: { type: 'fixed', value: 600 },
                'items': [
                    {
                        'type': 'box',
                        'layout': 'column',
                        'viewStyle': { 'radius': '8', 'padding': { 'top': '12', 'bottom': '12', 'left': '12', 'right': '12' } },
                        'items': [
                            {
                                'type': 'text',
                                'text': 'Title text',
                                'textStyle': { 'color': '#E0000000', 'size': '16', 'weight': 'bold' },
                                'maxTextLines': '5',
                                'viewStyle': {},
                                'action': { 'data': 'www.naver.com' },
                            },
                            {
                                'type': 'text',
                                'viewStyle': { 'margin': { 'top': '8', 'right': '0', 'bottom': '0', 'left': '0' } },
                                'text': 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aui',
                                'textStyle': { 'color': '#E0000000', 'size': '14', 'weight': 'normal' },
                                'maxTextLines': '5',
                                'action': { 'data': 'https://www.naver.com' },
                            },
                            {
                                'type': 'box',
                                'layout': 'row',
                                'viewStyle': { 'margin': { 'top': '12', 'right': '0', 'bottom': '0', 'left': '0' } },
                                'items': [
                                    {
                                        'type': 'textButton',
                                        'viewStyle': {
                                            'backgroundColor': '#E0E0E0',
                                            'padding': { 'top': '10', 'bottom': '10', 'left': '20', 'right': '20' },
                                        },
                                        'text': 'Button 1',
                                        'textStyle': { 'color': '#742DDD', 'size': '14', 'weight': 'bold' },
                                        'maxTextLines': '5',
                                        'action': { 'data': 'www.naver.com' },
                                    },
                                    {
                                        'type': 'textButton',
                                        'viewStyle': {
                                            'backgroundColor': '#E0E0E0',
                                            'padding': { 'top': '10', 'bottom': '10', 'left': '20', 'right': '20' },
                                            'margin': { 'left': '8', 'right': '0', 'top': '0', 'bottom': '0' },
                                        },
                                        'text': 'Button 2',
                                        'textStyle': { 'color': '#742DDD', 'size': '14', 'weight': 'bold' },
                                        'maxTextLines': '5',
                                        'action': { 'data': 'https://www.naver.com' },
                                    },
                                ],
                            },
                        ],
                        'action': { 'data': 'https://www.naver.com' },
                    },
                    {
                        'type': 'image',
                        'viewStyle': {},
                        'width': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'height': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'imageStyle': { 'contentMode': 'aspectFill' },
                        'imageUrl': 'https://file-preprod.sendbird.com/d03c08bb3f9041a88c1207b6bbf15ab8.png',
                        'metaData': { 'pixelWidth': '1062', 'pixelHeight': '1070' },
                    },
                    {
                        'type': 'textButton',
                        'viewStyle': {
                            'backgroundColor': '#E0E0E0',
                            'padding': { 'top': '10', 'bottom': '10', 'left': '20', 'right': '20' },
                        },
                        'width': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'height': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'text': 'Button',
                        'textStyle': { 'color': '#742DDD', 'size': '16', 'weight': 'normal' },
                        'maxTextLines': '5',
                        'action': { 'data': 'www.naver.com' },
                    },
                    {
                        'type': 'imageButton',
                        'viewStyle': {},
                        'width': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'height': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'imageUrl': 'https://file-preprod.sendbird.com/38fdf5c1056f42b89a44b38155cc4b49.jpg',
                        'imageStyle': { 'contentMode': 'aspectFill' },
                        'metaData': { 'pixelWidth': '1080', 'pixelHeight': '2640' },
                        'action': { 'data': 'www.naver.com' },
                    },
                ],
                'viewStyle': {},
            },
        ],
    },
});
({
    'version': 1,
    'body': {
        'items': [
            {
                'elementId': 'root',
                'type': 'box',
                'layout': 'column',
                'width': {
                    'type': 'flex',
                    'value': FlexSizeSpecValue.FillParent,
                },
                'height': {
                    'type': 'flex',
                    'value': FlexSizeSpecValue.WrapContent,
                },
                'items': [
                    {
                        'type': 'text',
                        'viewStyle': {
                            'backgroundColor': '#a0c0ffff',
                            'margin': {
                                'top': 16,
                                'bottom': 16,
                                'left': 16,
                                'right': 16,
                            },
                            'padding': {
                                'top': 16,
                                'bottom': 16,
                                'left': 16,
                                'right': 16,
                            },
                        },
                        'text': 'Wrap Wrap Wrap Wrap Wrap Wrap Wrap Wrap Wrap Wrap ',
                        'textStyle': {
                            'size': 14,
                            'color': '#222121e0',
                            'weight': 'normal',
                        },
                        'maxTextLines': 5,
                        'width': {
                            'type': 'flex',
                            'value': FlexSizeSpecValue.FillParent,
                        },
                        'height': {
                            'type': 'flex',
                            'value': 1,
                        },
                        'align': {
                            'horizontal': 'left',
                            'vertical': 'top',
                        },
                        'elementId': 'c0e15878-4984-408d-abaa-4b495c2e3872',
                    },
                    {
                        'type': 'imageButton',
                        'viewStyle': {
                            margin: {
                                left: 24,
                                right: 12,
                            },
                        },
                        'width': { 'type': 'flex', 'value': FlexSizeSpecValue.FillParent },
                        'height': { 'type': 'fixed', 'value': 250 },
                        'imageUrl': 'https://cdn.pixabay.com/photo/2022/10/12/10/45/bird-7516219_1280.jpg',
                        'imageStyle': { 'contentMode': 'aspectFill' },
                        'metaData': { 'pixelWidth': '1080', 'pixelHeight': '2640' },
                        'action': { 'data': 'www.naver.com' },
                    },
                ],
            },
        ],
    },
});

const PADDING_WIDTH = 24;
const CONTENT_LEFT_WIDTH = 40;
const SWIPE_THRESHOLD = 15;
const GAP_DEFAULT = 8;
/**
 * fixed sized template items should use its child width.
 * Whereas flex sized template items should use its parent's width.
 * @param item
 */
function shouldRenderAsFixed(item) {
    var _a;
    return ((_a = item.props.templateItems[0].width) === null || _a === void 0 ? void 0 : _a.type) === 'fixed';
}
function CarouselItem({ item, defaultWidth, marginRight }) {
    const style = shouldRenderAsFixed(item)
        ? { width: 'fit-content' }
        : { minWidth: defaultWidth, width: '100%' };
    if (marginRight) {
        style['marginRight'] = marginRight;
    }
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style }, item);
}
const Carousel = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.memo(({ children, gap = GAP_DEFAULT }) => {
    var _a, _b;
    const carouselRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    const screenWidth = window.innerWidth;
    const defaultItemWidth = (_b = (_a = carouselRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth) !== null && _b !== void 0 ? _b : 0;
    const itemWidths = children.map((item) => {
        var _a;
        if (shouldRenderAsFixed(item)) {
            return Number((_a = item.props.templateItems[0].width) === null || _a === void 0 ? void 0 : _a.value);
        }
        return defaultItemWidth;
    });
    const itemPositions = getEachItemPositions();
    const [draggingInfo, setDraggingInfo] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({
        scrolling: false,
        dragging: false,
        startPos: null,
        offset: 0,
        translateX: 0,
        currentIndex: 0,
    });
    const handleMouseDown = (event) => {
        setDraggingInfo((props) => (Object.assign(Object.assign({}, props), { scrolling: false, dragging: true, startPos: {
                x: event.clientX,
                y: event.clientY,
            }, offset: 0 })));
    };
    const handleMouseMove = (event) => {
        if (!draggingInfo.dragging || !draggingInfo.startPos)
            return;
        const currentX = event.clientX;
        const newOffset = currentX - draggingInfo.startPos.x;
        setDraggingInfo(Object.assign(Object.assign({}, draggingInfo), { offset: newOffset }));
    };
    const handleMouseUp = () => {
        if (!draggingInfo.dragging)
            return;
        handleDragEnd();
        unblockScroll();
    };
    const blockScroll = () => {
        if (carouselRef.current) {
            carouselRef.current.style.touchAction = 'pan-x';
        }
    };
    const unblockScroll = () => {
        if (carouselRef.current) {
            carouselRef.current.style.touchAction = 'pan-y';
        }
    };
    const handleTouchStart = (event) => {
        setDraggingInfo((props) => (Object.assign(Object.assign({}, props), { scrolling: false, dragging: false, startPos: {
                x: event.touches[0].clientX,
                y: event.touches[0].clientY,
            }, offset: 0 })));
    };
    const handleTouchMove = (event) => {
        if (!draggingInfo.startPos || draggingInfo.scrolling)
            return;
        const startPos = draggingInfo.startPos;
        const [touchMoveX, touchMoveY] = [event.touches[0].clientX, event.touches[0].clientY];
        const [deltaX, deltaY] = [Math.abs(touchMoveX - startPos.x), Math.abs(touchMoveY - startPos.y)];
        const newOffset = touchMoveX - startPos.x;
        if (draggingInfo.dragging) {
            if (newOffset === draggingInfo.offset)
                return;
            setDraggingInfo((props) => (Object.assign(Object.assign({}, props), { offset: newOffset })));
            return;
        }
        if (deltaY > deltaX) {
            setDraggingInfo((props) => (Object.assign(Object.assign({}, props), { scrolling: true })));
        }
        else {
            blockScroll();
            setDraggingInfo((props) => (Object.assign(Object.assign({}, props), { dragging: true, offset: newOffset })));
        }
    };
    const handleTouchEnd = () => {
        if (!draggingInfo.dragging)
            return;
        handleDragEnd();
        unblockScroll();
    };
    const getNewDraggingInfo = ({ translateX, currentIndex, newTranslateX, nextIndex, }) => {
        return {
            scrolling: false,
            dragging: false,
            startPos: null,
            offset: 0,
            translateX: newTranslateX !== null && newTranslateX !== void 0 ? newTranslateX : translateX,
            currentIndex: nextIndex !== null && nextIndex !== void 0 ? nextIndex : currentIndex,
        };
    };
    const handleDragEnd = () => {
        const { offset, currentIndex } = draggingInfo;
        const absOffset = Math.abs(offset);
        if (absOffset < SWIPE_THRESHOLD) {
            setDraggingInfo((props) => getNewDraggingInfo(props));
            return;
        }
        // If dragged to left, next index should be to the right
        if (offset < 0 && currentIndex < children.length - 1) {
            if (isLastItemFitsScreen(currentIndex)) {
                setDraggingInfo((props) => getNewDraggingInfo(props));
                return;
            }
            const nextIndex = currentIndex + 1;
            /**
             * This is special logic for " " button for Socar use-case.
             * The button will have a small width (less than 50px).
             * We want to include this button in the view and snap to right padding wall IFF !isLastTwoItemsFitScreen.
             */
            if (nextIndex === children.length - 1 || isLastItemFitsScreen(nextIndex)) {
                setDraggingInfo((props) => getNewDraggingInfo(Object.assign(Object.assign({}, props), { newTranslateX: itemPositions[children.length - 1].end - PADDING_WIDTH - CONTENT_LEFT_WIDTH + screenWidth, nextIndex: children.length - 1 })));
            }
            else {
                setDraggingInfo((props) => getNewDraggingInfo(Object.assign(Object.assign({}, props), { newTranslateX: itemPositions[nextIndex].start, nextIndex })));
            }
            // If dragged to right, next index should be to the left
        }
        else if (offset > 0 && currentIndex > 0) {
            let nextIndex = currentIndex - 1;
            while (draggingInfo.translateX >= itemPositions[nextIndex].start) {
                nextIndex--;
            }
            setDraggingInfo((props) => getNewDraggingInfo(Object.assign(Object.assign({}, props), { newTranslateX: itemPositions[nextIndex].start, nextIndex })));
        }
        else {
            setDraggingInfo((props) => getNewDraggingInfo(props));
        }
    };
    function getCurrentTranslateX() {
        return draggingInfo.translateX + draggingInfo.offset;
    }
    function isLastItemFitsScreen(nextIndex) {
        const restItemsWidth = itemWidths.slice(nextIndex).reduce((prev, curr) => prev + gap + curr);
        const restTotalWidth = PADDING_WIDTH + CONTENT_LEFT_WIDTH + restItemsWidth;
        return restTotalWidth <= screenWidth;
    }
    function getEachItemPositions() {
        let accumulator = 0;
        return itemWidths.map((itemWidth, i) => {
            if (i > 0) {
                accumulator -= gap;
            }
            const itemPosition = {
                start: accumulator,
                end: accumulator - itemWidth,
            };
            accumulator -= itemWidth;
            return itemPosition;
        });
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: carouselRef, onMouseDown: handleMouseDown, onMouseMove: handleMouseMove, onMouseUp: handleMouseUp, onMouseLeave: handleMouseUp, onTouchStart: handleTouchStart, onTouchMove: handleTouchMove, onTouchEnd: handleTouchEnd, className: "sb-message-template__carousel", style: {
            cursor: draggingInfo.dragging ? 'grabbing' : 'grab',
            transition: draggingInfo.dragging ? 'none' : 'transform 0.5s ease',
            transform: `translateX(${getCurrentTranslateX()}px)`,
        } }, children.map((item, index) => (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CarouselItem, { key: index + '', item: item, defaultWidth: defaultItemWidth + 'px', marginRight: index < children.length - 1 ? gap : undefined })))));
});

function isWrappedText(view) {
    var _a;
    return view.type === ComponentType.Text && ((_a = view.width) === null || _a === void 0 ? void 0 : _a.value) == FlexSizeSpecValue.WrapContent;
}
// Compares the size spec to the option and returns whether they are equal or not.
const isSizeCompatibleWithOption = ({ size, option, }) => {
    if (option === 'wrap') {
        return size.type === 'flex' && size.value == FlexSizeSpecValue.WrapContent;
    }
    if (option === 'fill') {
        return size.type === 'flex' && size.value == FlexSizeSpecValue.FillParent;
    }
    return size.type === 'fixed';
};
const bundle_C7Vw36CA_isGif = (url) => {
    var _a;
    if (typeof url !== 'string')
        return false;
    const extension = (_a = url.split('.').pop()) === null || _a === void 0 ? void 0 : _a.toLowerCase();
    return extension === 'gif';
};

var __rest$3 = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
const CanvasReactMessageTemplateImage = (props) => {
    const { imageSize, canvasRef, canvasProps } = useCanvasMessageTemplateImage(props);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("canvas", Object.assign({}, canvasProps, { ref: canvasRef, width: imageSize === null || imageSize === void 0 ? void 0 : imageSize.width, height: imageSize === null || imageSize === void 0 ? void 0 : imageSize.height, onError: props.onError })));
};
const useCanvasMessageTemplateImage = (_a) => {
    var { metaData, tintColor } = _a, props = __rest$3(_a, ["metaData", "tintColor"]);
    const canvasRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    const [fallbackImageSize, setFallbackImageSize] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])();
    const imageSize = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
        if ((metaData === null || metaData === void 0 ? void 0 : metaData.pixelHeight) && (metaData === null || metaData === void 0 ? void 0 : metaData.pixelWidth)) {
            return { width: metaData.pixelWidth, height: metaData.pixelHeight };
        }
        return fallbackImageSize;
    }, [fallbackImageSize, metaData === null || metaData === void 0 ? void 0 : metaData.pixelHeight, metaData === null || metaData === void 0 ? void 0 : metaData.pixelWidth]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        if (imageSize == null) {
            console.log('Canvas_ReactMessageTemplateImage: no metaData, render fit to container');
            if (canvasRef.current) {
                canvasRef.current.style.width = '100%';
                canvasRef.current.style.height = '100%';
                const containerSize = canvasRef.current.getBoundingClientRect();
                setFallbackImageSize(containerSize);
            }
        }
    }, [imageSize]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        if (props.src) {
            const img = new Image();
            const onImageLoad = () => {
                if (canvasRef.current && tintColor && imageSize) {
                    const ctx = canvasRef.current.getContext('2d');
                    if (ctx) {
                        const { width: imageWidth, height: imageHeight } = imageSize;
                        // reset context before draw, consider `.save()` and `.restore()` api
                        ctx.clearRect(0, 0, imageWidth, imageHeight);
                        ctx.beginPath();
                        ctx.globalCompositeOperation = 'source-over';
                        ctx.fillStyle = '#000';
                        // draw
                        ctx.drawImage(img, 0, 0, imageWidth, imageHeight);
                        ctx.globalCompositeOperation = 'source-atop';
                        ctx.fillStyle = tintColor;
                        ctx.fillRect(0, 0, imageWidth, imageHeight);
                    }
                }
            };
            const onImageError = (event) => {
                var _a;
                // @ts-ignore
                (_a = props.onError) === null || _a === void 0 ? void 0 : _a.call(props, event);
            };
            img.addEventListener('load', onImageLoad);
            img.addEventListener('error', onImageError);
            img.src = props.src;
            return () => {
                img.removeEventListener('load', onImageLoad);
                img.removeEventListener('error', onImageError);
            };
        }
        return;
    }, [props.src, imageSize, tintColor]);
    return {
        canvasRef,
        canvasProps: props,
        imageSize,
    };
};

const ImgReactMessageTemplateImage = (props) => {
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", Object.assign({}, props, { onError: props.onError, referrerPolicy: "no-referrer" }));
};

const PlaceholderReactMessageTemplateImage = (props) => {
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: Object.assign(Object.assign({}, props.style), { backgroundColor: 'transparent' }) });
};

var __rest$2 = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
const ReactMessageTemplateImage = (_a) => {
    var { tintColor, metaData } = _a, props = __rest$2(_a, ["tintColor", "metaData"]);
    const { hasError, onError } = useImageLoadError(props.src);
    if (props.onError)
        console.warn('`onError` is intercepted and not executed in the ReactMessageTemplateImage.');
    if (hasError) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceholderReactMessageTemplateImage, Object.assign({}, props));
    }
    else if (tintColor && !bundle_C7Vw36CA_isGif(props.src)) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CanvasReactMessageTemplateImage, Object.assign({}, props, { onError: onError, tintColor: tintColor, metaData: metaData }));
    }
    else {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImgReactMessageTemplateImage, Object.assign({}, props, { onError: onError }));
    }
};
const useImageLoadError = (source) => {
    const [hasError, setHasError] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => setHasError(false), [source]);
    return {
        hasError,
        onError: Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => setHasError(true), []),
    };
};

// create a context provider for MessageComponent
//  - this is a wrapper for MessageComponent
const bundle_C7Vw36CA_MessageContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
const bundle_C7Vw36CA_MessageProvider = (props) => {
    const { message, handleWebAction, handleCustomAction, handlePredefinedAction, children } = props;
    const value = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useMemo(() => ({
        message,
        handleWebAction,
        handleCustomAction,
        handlePredefinedAction,
    }), [message === null || message === void 0 ? void 0 : message.updatedAt]);
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_C7Vw36CA_MessageContext.Provider, { value: value }, children);
};
const bundle_C7Vw36CA_useMessageContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(bundle_C7Vw36CA_MessageContext);

/**
 * Preserves a reference to the given callback function as an argument while the component is mounted.
 * Wraps the given callback in React's Ref to preserve the reference.
 * @param callback want to be preserved
 */
function bundle_C7Vw36CA_usePreservedCallback(callback) {
    const callbackRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(callback);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        callbackRef.current = callback;
    }, [callback]);
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((...args) => {
        return callbackRef.current(...args);
    }, [callbackRef]);
}

/**
 * This hook can be used when you want to safely effect the value stored in useRef
 * Got this idea from https://github.com/facebook/react/issues/15176
 * @param callback
 * @param deps
 * @returns effect callback
 */
function useRefEffect(callback, deps) {
    const preservedCallback = bundle_C7Vw36CA_usePreservedCallback(callback);
    const disposeRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(bundle_C7Vw36CA_noop);
    const effect = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((element) => {
        disposeRef.current();
        disposeRef.current = bundle_C7Vw36CA_noop;
        if (element != null) {
            const cleanup = callback(element);
            if (typeof cleanup === 'function') {
                disposeRef.current = cleanup;
            }
        }
    }, [preservedCallback, ...deps]);
    return effect;
}
function bundle_C7Vw36CA_noop() { }

/**
 * Subscribes to ResizeObserver on the component exposing the Ref,
 * to detect changes in the size of DOM elements.
 * The ResizeObserver API is required.
 * If you are targeting browsers that do not support that API, probably need to add appropriate polyfill too.
 * @param onResize
 * @returns ref
 */
function useResizeObserver(onResize) {
    const resizeCallback = bundle_C7Vw36CA_usePreservedCallback(onResize);
    const ref = useRefEffect((elem) => {
        const observer = new ResizeObserver((entries) => {
            if (entries[0] != null) {
                resizeCallback(entries[0]);
            }
        });
        observer.observe(elem);
        return () => {
            observer.unobserve(elem);
        };
    }, [resizeCallback]);
    return ref;
}

/**
 * @returns an element's width / height observed by IntersectionObserver,
 * and ref to detect its resize event
 */
function useElementSize() {
    const [width, setWidth] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1);
    const [height, setHeight] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1);
    const [contentWidth, setContentWidth] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1);
    const [contentHeight, setContentHeight] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1);
    const [paddingWidth, setPaddingWidth] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1);
    const [paddingHeight, setPaddingHeight] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(-1);
    const ref = useResizeObserver((entry) => {
        // contentRect: content size only
        const { width: contentWidth, height: contentHeight } = entry.contentRect;
        // target: content + padding + border size
        const target = entry.target;
        const { width, height } = target.getBoundingClientRect();
        setWidth(width);
        setHeight(height);
        setContentWidth(contentWidth);
        setContentHeight(contentHeight);
        setPaddingWidth(width - contentWidth);
        setPaddingHeight(height - contentHeight);
    });
    return { ref, width, height, contentWidth, contentHeight, paddingWidth, paddingHeight };
}

var __rest$1 = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
function isViewCompatibleWithSizeOption({ width = defaultProperties.view.size.width, height = defaultProperties.view.size.height, parentLayout = defaultProperties.box.layout, option, }) {
    if (parentLayout === Layout.Row) {
        return isSizeCompatibleWithOption({
            size: width,
            option,
        });
    }
    return isSizeCompatibleWithOption({
        size: height,
        option,
    });
}
function useRecalculateWidth(params) {
    const { style, props } = params;
    const _a = useElementSize(), { ref: elemRef } = _a, size = __rest$1(_a, ["ref"]);
    const { updateSize, sizes } = useSizeContext();
    const { id, siblings, parentLayout } = props;
    const { width, height, paddingWidth, paddingHeight, contentWidth, contentHeight } = size;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        updateSize({
            id: props.id,
            width,
            height,
            paddingWidth,
            paddingHeight,
            contentWidth,
            contentHeight,
        });
    }, [props.id, width, height, paddingWidth, paddingHeight, contentWidth, contentHeight, updateSize]);
    const currentStyle = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
        const sumViewSize = (acc = 0, view) => {
            var _a, _b, _c, _d;
            if (parentLayout === Layout.Row) {
                return acc + ((_b = (_a = sizes[view.id]) === null || _a === void 0 ? void 0 : _a.contentWidth) !== null && _b !== void 0 ? _b : 0);
            }
            return acc + ((_d = (_c = sizes[view.id]) === null || _c === void 0 ? void 0 : _c.contentHeight) !== null && _d !== void 0 ? _d : 0);
        };
        const hasFillOption = isViewCompatibleWithSizeOption({
            width: props.width,
            height: props.height,
            parentLayout,
            option: 'fill',
        });
        if (hasFillOption) {
            const wrapSiblingsSize = siblings
                .filter(({ width, height }) => !isViewCompatibleWithSizeOption({
                width: width,
                height: height,
                parentLayout,
                option: 'fill',
            }))
                .reduce(sumViewSize, 0);
            const fillSiblingCount = siblings.filter(({ width, height }) => isViewCompatibleWithSizeOption({
                width: width,
                height: height,
                parentLayout,
                option: 'fill',
            })).length;
            const maxSizeOption = (() => {
                if (parentLayout === Layout.Row) {
                    return {
                        maxWidth: `calc((100% - ${wrapSiblingsSize}px) / ${fillSiblingCount})`,
                    };
                }
                return {
                    maxHeight: `calc((100% - ${wrapSiblingsSize}px) / ${fillSiblingCount})`,
                };
            })();
            return Object.assign(Object.assign(Object.assign({}, style), maxSizeOption), (width == 0 && { height: 0 }));
        }
        else {
            const currentElemIdx = siblings.findIndex((sibling) => sibling.id === id);
            const forwardSiblingsSize = siblings
                .slice(0, currentElemIdx)
                .filter(({ width, height }) => isViewCompatibleWithSizeOption({
                width: width,
                height: height,
                parentLayout,
                option: 'wrap',
            }))
                .reduce(sumViewSize, 0);
            return Object.assign(Object.assign(Object.assign({}, style), (width === 0 && { height: 0 })), (parentLayout === Layout.Row
                ? {
                    maxWidth: `calc(100% - ${forwardSiblingsSize}px)`,
                }
                : {
                    maxHeight: `calc(100% - ${forwardSiblingsSize}px)`,
                }));
        }
    }, [props.width, props.height, parentLayout, sizes, siblings, style, width, id]);
    return { recalculatedStyle: currentStyle, elemRef };
}

function getDefaultStyles(overrides) {
    return Object.assign({ display: 'flex', overflow: 'hidden', boxSizing: 'border-box' }, overrides);
}
function setViewProps(styles, props, options) {
    setViewSize(styles, props, options);
    setViewStyle(styles, props);
}
function setBorderStyle(styles, borderWidth, borderColor, radius) {
    if (borderWidth) {
        styles['--border-width'] = `${borderWidth}px`;
        styles['--border-color'] = borderColor || 'transparent';
    }
    if (radius) {
        styles['borderRadius'] = Number(radius);
        styles['--border-radius'] = `${radius}px`;
    }
}
function setViewStyle(styles, props) {
    var _a, _b, _c, _d, _e, _f;
    const { viewStyle } = props;
    if ((_a = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _a === void 0 ? void 0 : _a.top)
        styles['marginTop'] = Number(viewStyle.margin.top);
    if ((_b = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _b === void 0 ? void 0 : _b.bottom)
        styles['marginBottom'] = Number(viewStyle.margin.bottom);
    if ((_c = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _c === void 0 ? void 0 : _c.left)
        styles['marginLeft'] = Number(viewStyle.margin.left);
    if ((_d = viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.margin) === null || _d === void 0 ? void 0 : _d.right)
        styles['marginRight'] = Number(viewStyle.margin.right);
    const marginHorizontal = Number((_e = styles.marginLeft) !== null && _e !== void 0 ? _e : '0') + Number((_f = styles.marginRight) !== null && _f !== void 0 ? _f : '0');
    if (marginHorizontal > 0 && styles.width === '100%')
        styles.width = `calc(100% - ${marginHorizontal}px)`;
    if (viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.backgroundColor)
        styles['backgroundColor'] = viewStyle.backgroundColor;
    // use JSON.stringify to escape special characters in image URL
    if (viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.backgroundImageUrl)
        styles['backgroundImage'] = `url(${JSON.stringify(viewStyle.backgroundImageUrl)})`;
    setBorderStyle(styles, viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.borderWidth, viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.borderColor, viewStyle === null || viewStyle === void 0 ? void 0 : viewStyle.radius);
}
function getViewSizeStyle(width, height, parentLayout) {
    const style = {};
    if (width.type === 'flex' && width.value == FlexSizeSpecValue.FillParent) {
        style['width'] = '100%';
        if (parentLayout === Layout.Row) {
            style['flex'] = 1;
        }
    }
    else if (width.type === 'fixed' && width.value >= 0) {
        style['width'] = Number(width.value);
    }
    if (height.type === 'flex' && height.value == FlexSizeSpecValue.FillParent) {
        style['height'] = '100%';
        if (parentLayout === Layout.Column) {
            style['flex'] = 1;
        }
    }
    else if (height.type === 'fixed' && height.value >= 0) {
        style['height'] = Number(height.value);
    }
    return style;
}
function setViewSize(styles, props, options) {
    var _a, _b;
    const { width: defaultWidth, height: defaultHeight } = defaultProperties.view.size;
    const { parentLayout } = options;
    const sizeStyle = getViewSizeStyle((_a = props.width) !== null && _a !== void 0 ? _a : defaultWidth, (_b = props.height) !== null && _b !== void 0 ? _b : defaultHeight, parentLayout);
    Object.assign(styles, sizeStyle);
}
function setAlign(styles, layout = defaultProperties.box.layout, align = defaultProperties.box.align) {
    if (layout === Layout.Row) {
        styles['flexDirection'] = 'row';
        styles['alignItems'] = alignInFlex(align.vertical);
        styles['justifyContent'] = alignInFlex(align.horizontal);
    }
    if (layout === Layout.Column) {
        styles['flexDirection'] = 'column';
        styles['alignItems'] = alignInFlex(align.horizontal);
        styles['justifyContent'] = alignInFlex(align.vertical);
    }
}
function setTextAlign(styles, align = defaultProperties.box.align.horizontal) {
    styles.textAlign = align;
}
function setImageStyle(styles, imageStyle) {
    const { contentMode = MediaContentMode.AspectFit } = imageStyle || {};
    if (contentMode) {
        switch (contentMode) {
            case MediaContentMode.AspectFill:
                styles['objectFit'] = 'cover';
                break;
            case MediaContentMode.AspectFit:
                styles['objectFit'] = 'contain';
                break;
            case MediaContentMode.ScalesToFill:
                styles['objectFit'] = 'fill';
                break;
        }
    }
}
// uses image meta-data to render images that doesn't break the UI
// https://sendbird.atlassian.net/wiki/spaces/UK/pages/2008220608/Message+template+-+Image+policy
function setImageAspectRatio(styles, props) {
    var _a, _b, _c, _d;
    const imageMetaData = props === null || props === void 0 ? void 0 : props.metaData;
    if (!(imageMetaData === null || imageMetaData === void 0 ? void 0 : imageMetaData.pixelHeight) || !(imageMetaData === null || imageMetaData === void 0 ? void 0 : imageMetaData.pixelWidth)) {
        return;
    }
    if (((_a = props === null || props === void 0 ? void 0 : props.width) === null || _a === void 0 ? void 0 : _a.type) === 'fixed' || ((_b = props === null || props === void 0 ? void 0 : props.height) === null || _b === void 0 ? void 0 : _b.type) === 'fixed') {
        return;
    }
    styles['aspectRatio'] = `${(_c = props === null || props === void 0 ? void 0 : props.metaData) === null || _c === void 0 ? void 0 : _c.pixelWidth} / ${(_d = props === null || props === void 0 ? void 0 : props.metaData) === null || _d === void 0 ? void 0 : _d.pixelHeight}`;
}
function webkitLineClampStyles(numberOfLines) {
    return {
        WebkitLineClamp: numberOfLines,
        WebkitBoxOrient: 'vertical',
        display: '-webkit-box',
        overflow: 'hidden',
        overflowWrap: 'anywhere',
        flex: 1,
    };
}
function setTextStyle(styles, props, options) {
    const { textStyle, width } = props;
    // TODO: Change default as design
    const { size, color, weight = 'normal' } = textStyle || {};
    if (size)
        styles['fontSize'] = Number(size);
    if (color)
        styles['color'] = color;
    if (weight)
        styles['fontWeight'] = weight;
    if ((width === null || width === void 0 ? void 0 : width.value) == FlexSizeSpecValue.WrapContent) {
        styles['maxWidth'] = '100%';
    }
    if (props.type === ComponentType.Text) {
        const { siblings, elemIdx } = options;
        // To push out any subsequent components from the container,
        // if a prior one is long enough to occupy an entire line
        // @link https://sendbird.atlassian.net/browse/NOTI-709
        if (siblings != null && siblings.length >= 2 && siblings.every(isWrappedText)) {
            styles.flexShrink = siblings.length - 1 === elemIdx ? 1 : 0;
        }
    }
}

var bundle_C7Vw36CA_rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
const hasValidUrlProtocol = (url = '') => ['http://', 'https://', 'ftp://'].some((protocol) => url.startsWith(protocol));
/**
 * @param url - url to be checked
 * @returns url with http:// protocol if it doesn't have any protocol
 * @example
 * returnUrl('www.sendbird.com') // returns 'http://www.sendbird.com'
 * returnUrl('https://www.sendbird.com') // returns 'https://www.sendbird.com'
 * returnUrl('ftp://www.sendbird.com') // returns 'ftp://www.sendbird.com'
 * returnUrl('sendbird.com') // returns 'https://sendbird.com'
 **/
const returnUrl = (url = '') => {
    if (hasValidUrlProtocol(url)) {
        return url;
    }
    return `https://${url}`;
};
// todo: semantic html here is not perfect, need to revisit. Same for Button
const ActionHandler = ({ className = '', style, children, props }) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
    const { recalculatedStyle, elemRef } = useRecalculateWidth({ style, props });
    const { message, handleWebAction, handleCustomAction, handlePredefinedAction } = bundle_C7Vw36CA_useMessageContext();
    const onClick = (e) => {
        var _a, _b, _c, _d, _e, _f, _g;
        if (((_a = props === null || props === void 0 ? void 0 : props.action) === null || _a === void 0 ? void 0 : _a.type) === 'web') {
            if (handleWebAction) {
                handleWebAction(e, props.action, message);
            }
            else {
                (_c = window === null || window === void 0 ? void 0 : window.open(returnUrl((_b = props === null || props === void 0 ? void 0 : props.action) === null || _b === void 0 ? void 0 : _b.data), '_blank', 'noopener noreferrer')) === null || _c === void 0 ? void 0 : _c.focus();
            }
        }
        if (((_d = props === null || props === void 0 ? void 0 : props.action) === null || _d === void 0 ? void 0 : _d.type) === 'custom') {
            if (handleCustomAction) {
                handleCustomAction(e, props.action, message);
            }
            else {
                (_f = window === null || window === void 0 ? void 0 : window.open(returnUrl((_e = props === null || props === void 0 ? void 0 : props.action) === null || _e === void 0 ? void 0 : _e.data), '_blank', 'noopener noreferrer')) === null || _f === void 0 ? void 0 : _f.focus();
            }
        }
        if (((_g = props === null || props === void 0 ? void 0 : props.action) === null || _g === void 0 ? void 0 : _g.type) === 'uikit') {
            handlePredefinedAction === null || handlePredefinedAction === void 0 ? void 0 : handlePredefinedAction(e, props.action, message);
        }
    };
    const borderClass = ((_a = props.viewStyle) === null || _a === void 0 ? void 0 : _a.borderWidth) ? ' sb-message-template__border' : '';
    if (className === 'sb-message-template__text-button') {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("button", { className: `${className}${borderClass}`, "data-sb-template-id": props.elementId, style: Object.assign(Object.assign({}, style), { paddingTop: (_c = (_b = props.viewStyle) === null || _b === void 0 ? void 0 : _b.padding) === null || _c === void 0 ? void 0 : _c.top, paddingRight: (_e = (_d = props.viewStyle) === null || _d === void 0 ? void 0 : _d.padding) === null || _e === void 0 ? void 0 : _e.right, paddingBottom: (_g = (_f = props.viewStyle) === null || _f === void 0 ? void 0 : _f.padding) === null || _g === void 0 ? void 0 : _g.bottom, paddingLeft: (_j = (_h = props.viewStyle) === null || _h === void 0 ? void 0 : _h.padding) === null || _j === void 0 ? void 0 : _j.left }), onClick: onClick }, children));
    }
    const { display, flexDirection, justifyContent, alignItems, objectFit } = recalculatedStyle, wrapperStyles = bundle_C7Vw36CA_rest(recalculatedStyle, ["display", "flexDirection", "justifyContent", "alignItems", "objectFit"]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: elemRef, className: `${className}${borderClass} ${(props === null || props === void 0 ? void 0 : props.action) ? 'sb-message-template__action' : ''}`, "data-sb-template-id": props.elementId, style: wrapperStyles, onClick: onClick },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: {
                display,
                flexDirection,
                justifyContent,
                alignItems,
                objectFit,
                width: '100%',
                height: '100%',
                paddingTop: (_l = (_k = props.viewStyle) === null || _k === void 0 ? void 0 : _k.padding) === null || _l === void 0 ? void 0 : _l.top,
                paddingRight: (_o = (_m = props.viewStyle) === null || _m === void 0 ? void 0 : _m.padding) === null || _o === void 0 ? void 0 : _o.right,
                paddingBottom: (_q = (_p = props.viewStyle) === null || _p === void 0 ? void 0 : _p.padding) === null || _q === void 0 ? void 0 : _q.bottom,
                paddingLeft: (_s = (_r = props.viewStyle) === null || _r === void 0 ? void 0 : _r.padding) === null || _s === void 0 ? void 0 : _s.left,
            } }, children)));
};
/**
 * Text that is fixed or fill parent should be wrapped in a div with max-width: 100% and max-height: 100%
 * This is to prevent text from overflowing the padding of the container
 */
function isFixedOrFill(view) {
    var _a, _b, _c, _d;
    const heightType = (_a = view === null || view === void 0 ? void 0 : view.height) === null || _a === void 0 ? void 0 : _a.type;
    const widthType = (_b = view === null || view === void 0 ? void 0 : view.width) === null || _b === void 0 ? void 0 : _b.type;
    const isFixedDiamension = heightType === 'fixed' || widthType === 'fixed';
    const isFill = (heightType === 'flex' && ((_c = view === null || view === void 0 ? void 0 : view.height) === null || _c === void 0 ? void 0 : _c.value) === FlexSizeSpecValue.FillParent) ||
        (widthType === 'flex' && ((_d = view === null || view === void 0 ? void 0 : view.width) === null || _d === void 0 ? void 0 : _d.value) === FlexSizeSpecValue.FillParent);
    return isFixedDiamension || isFill;
}
function convertNewlinesToBr(text) {
    return text.split('\n').map((line, index) => (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, { key: index },
        line,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("br", null))));
}
function renderText(view) {
    const { text, maxTextLines } = view;
    const isToBeWrapped = isFixedOrFill(view);
    const isMultiLine = maxTextLines != null && maxTextLines > 0;
    const convertedText = convertNewlinesToBr(text);
    if (isMultiLine || isToBeWrapped) {
        const wrapperStyling = Object.assign(Object.assign({}, ((isMultiLine || isToBeWrapped) && { maxWidth: '100%' })), (isToBeWrapped && { maxHeight: '100%', overflow: 'hidden' }));
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: wrapperStyling }, isMultiLine ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: webkitLineClampStyles(maxTextLines) }, convertedText) : convertedText));
    }
    return isMultiLine ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: webkitLineClampStyles(maxTextLines) }, convertedText) : convertedText;
}
const bundle_C7Vw36CA_renderer = createRenderer({
    views: {
        box(props) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ActionHandler, { className: "sb-message-template__box", elementId: props.elementId, style: props.parsedProperties, props: props }, props.children));
        },
        text(props) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ActionHandler, { className: "sb-message-template__text", elementId: props.elementId, style: props.parsedProperties, props: props }, renderText(props)));
        },
        image(props) {
            var _a;
            // todo: add image backup
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ActionHandler, { className: "sb-message-template__image-container", elementId: props.elementId, style: props.parsedProperties, props: props },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactMessageTemplateImage, { className: "sb-message-template__image", alt: "image", src: props.imageUrl, style: { width: '100%', height: '100%', aspectRatio: 'inherit', objectFit: 'inherit' }, tintColor: (_a = props.imageStyle) === null || _a === void 0 ? void 0 : _a.tintColor, metaData: props.metaData })));
        },
        textButton(props) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ActionHandler, { className: "sb-message-template__text-button", elementId: props.elementId, style: props.parsedProperties, props: props }, renderText(Object.assign({ maxTextLines: 1 }, props))));
        },
        imageButton(props) {
            var _a;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ActionHandler, { className: "sb-message-template__image-container sb-message-template__image-button", elementId: props.elementId, style: props.parsedProperties, props: props },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactMessageTemplateImage, { className: "sb-message-template__image", alt: "image-button", src: props.imageUrl, style: { width: '100%', height: '100%', aspectRatio: 'inherit', objectFit: 'inherit' }, tintColor: (_a = props.imageStyle) === null || _a === void 0 ? void 0 : _a.tintColor, metaData: props.metaData })));
        },
        carouselView(props) {
            return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Carousel, { gap: props.spacing }, props.children);
        },
    },
});
const bundle_C7Vw36CA_parser = createParser({
    mapBoxProps(props, options) {
        const styles = getDefaultStyles();
        setViewProps(styles, props, options);
        setAlign(styles, props.layout, props.align);
        return styles;
    },
    mapTextProps(props, options) {
        var _a;
        const styles = getDefaultStyles({ whiteSpace: 'pre-line' });
        // Better not set flex 1 to text
        setViewProps(styles, props, options);
        setTextStyle(styles, props, options);
        setAlign(styles, Layout.Row, props.align);
        setTextAlign(styles, (_a = props.align) === null || _a === void 0 ? void 0 : _a.horizontal);
        return styles;
    },
    mapImageProps(props, options) {
        const styles = getDefaultStyles();
        setViewProps(styles, props, options);
        setImageStyle(styles, props.imageStyle);
        setImageAspectRatio(styles, props);
        return styles;
    },
    mapTextButtonProps(props, options) {
        const styles = getDefaultStyles({ whiteSpace: 'pre-line', alignItems: 'center', justifyContent: 'center' });
        setViewProps(styles, props, options);
        setTextStyle(styles, Object.assign(Object.assign({}, props), { textStyle: Object.assign({ weight: 500 }, props.textStyle) }), options);
        return styles;
    },
    mapImageButtonProps(props, options) {
        const styles = getDefaultStyles();
        setViewProps(styles, props, options);
        setImageStyle(styles, props.imageStyle);
        setImageAspectRatio(styles, props);
        return styles;
    },
    mapCarouselProps(props, options) {
        const styles = getDefaultStyles();
        setViewProps(styles, props, options);
        return styles;
    },
});
createMessageTemplate({
    renderer: bundle_C7Vw36CA_renderer,
    parser: bundle_C7Vw36CA_parser,
    Container: ({ children, className }) => {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: `sb-message-template__parent ${className}`, style: {
                display: 'flex',
                flexDirection: 'column',
                maxWidth: 400,
                marginBottom: 24,
            } }, children));
    },
});

var CustomTemplate = createMessageTemplate({
    parser: bundle_C7Vw36CA_parser,
    renderer: bundle_C7Vw36CA_renderer,
    Container: function (_a) {
        var children = _a.children, className = _a.className;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: [
                "sb-message-template__parent ".concat(className),
                'sendbird-message-template__root',
            ].join(' ') }, children));
    },
}).MessageTemplate;
function MessageTemplate(_a) {
    var templateItems = _a.templateItems, templateVersion = _a.templateVersion;
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CustomTemplate, { templateItems: templateItems, templateVersion: templateVersion });
}


//# sourceMappingURL=bundle-C7Vw36CA.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/FallbackTemplateMessageItemBody.tsx.js










function FallbackTemplateMessageItemBody(_a) {
    var className = _a.className, message = _a.message, isByMe = _a.isByMe;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var text = message['message'];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className !== null && className !== void 0 ? className : '',
            isByMe ? 'outgoing' : 'incoming',
            'sendbird-template-message-item-body__fallback_message',
        ]) }, text
        ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ONCONTENT_INVERSE_1 }, text))
        : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: 'sendbird-template-message-item-body__fallback_message__header', type: LabelTypography.BODY_1, color: LabelColors.ONCONTENT_INVERSE_1 }, stringSet.UNKNOWN__TEMPLATE_ERROR),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: 'sendbird-template-message-item-body__fallback_message__description', type: LabelTypography.BODY_1, color: LabelColors.ONCONTENT_INVERSE_5 }, stringSet.UNKNOWN__CANNOT_READ_TEMPLATE))));
}


//# sourceMappingURL=FallbackTemplateMessageItemBody.tsx.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/LoadingTemplateMessageItemBody.tsx.js









var TEMPLATE_LOADING_SPINNER_SIZE = '40px';
function LoadingTemplateMessageItemBody(_a) {
    var className = _a.className, isByMe = _a.isByMe;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className !== null && className !== void 0 ? className : '',
            isByMe ? 'outgoing' : 'incoming',
            'sendbird-template-loading-message-item-body',
        ]) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { className: "sendbird-message-status__icon", width: TEMPLATE_LOADING_SPINNER_SIZE, height: TEMPLATE_LOADING_SPINNER_SIZE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SPINNER, fillColor: IconColors.CONTENT_INVERSE_5, width: TEMPLATE_LOADING_SPINNER_SIZE, height: TEMPLATE_LOADING_SPINNER_SIZE }))));
}


//# sourceMappingURL=LoadingTemplateMessageItemBody.tsx.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TemplateMessageItemBody.js


















var MessageTemplateWrapper = function (_a) {
    var message = _a.message, templateVersion = _a.templateVersion, templateItems = _a.templateItems;
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_C7Vw36CA_MessageProvider, { message: message },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageTemplate, { templateVersion: templateVersion, templateItems: templateItems }));
};

var NumberValueKeys = [
    'version',
    'size',
    'top',
    'left',
    'right',
    'bottom',
    'maxTextLines',
    'value',
    'pixelWidth',
    'pixelHeight',
    'radius',
];
function restoreNumbersFromMessageTemplateObject(value, key) {
    if (Array.isArray(value)) {
        return value.map(function (item) { return restoreNumbersFromMessageTemplateObject(item); });
    }
    if (value && typeof value === 'object') {
        return Object.keys(value).reduce(function (acc, key) {
            acc[key] = restoreNumbersFromMessageTemplateObject(value[key], key);
            return acc;
        }, {});
    }
    if (key != null && NumberValueKeys.includes(key)) {
        var numberValue = Number(value);
        return Number.isNaN(numberValue) ? value : numberValue;
    }
    return value;
}

var flattenObjectHelper = function (currentObject, flattenObject, parentKeyPath) {
    if (parentKeyPath === void 0) { parentKeyPath = ''; }
    for (var _i = 0, _a = Object.entries(currentObject); _i < _a.length; _i++) {
        var _b = _a[_i], key = _b[0], value = _b[1];
        var currentKeyPath = parentKeyPath ? "".concat(parentKeyPath, ".").concat(key) : key;
        if (value && typeof value === 'object') {
            flattenObjectHelper(value, flattenObject, currentKeyPath);
        }
        else {
            flattenObject[currentKeyPath] = value;
        }
    }
};
/**
 * Returns flattened object.
 * ex.
 * given { key-1: { key-1.1: 'value-1.1' }, key-2: 'value-2' }
 * returns { key-1.key-1.1: 'value-1.1', key-2: 'value-2' }
 */
function flattenObject(object) {
    var result = {};
    flattenObjectHelper(object, result);
    return result;
}

function convertArgbToRgba(string) {
    if (!string.startsWith('#')) {
        return string;
    }
    if (string.length === 9) {
        return "#".concat(string.slice(3)).concat(string[1]).concat(string[2]);
    }
    if (string.length === 5) {
        return "#".concat(string.slice(2)).concat(string[1]);
    }
    return string;
}
var splitColorVariables = function (colorVariables) {
    var light = {};
    var dark = {};
    for (var key in colorVariables) {
        if (Object.prototype.hasOwnProperty.call(colorVariables, key)) {
            var value = colorVariables[key];
            if (typeof value === 'object' && value !== null) {
                var _a = splitColorVariables(value), nestedLight = _a[0], nestedDark = _a[1];
                light[key] = nestedLight;
                dark[key] = nestedDark;
            }
            else if (typeof value === 'string') {
                var _b = value.split(','), lightColor = _b[0], darkColor = _b[1];
                light[key] = lightColor;
                dark[key] = darkColor || lightColor; // when dark color is not provided, use light color
            }
            else {
                light[key] = value;
                dark[key] = value;
            }
        }
    }
    return [light, dark];
};
function selectColorVariablesByTheme(_a) {
    var colorVariables = _a.colorVariables, theme = _a.theme;
    var _b = splitColorVariables(colorVariables), light = _b[0], dark = _b[1];
    return theme === 'light' ? light : dark;
}

var COLOR_KEYS = {
    color: true,
    tintColor: true,
    backgroundColor: true,
    borderColor: true,
};
function mapData(_a) {
    var template = _a.template, source = _a.source;
    if (!['object', 'string'].includes(typeof template) || !template)
        return template;
    var regex = /\{([^}]+)\}/g;
    var flattenedSource = flattenObject(source);
    function replaceVariablePlaceholder(value) {
        return typeof value === 'string'
            ? value.replace(regex, function (_, placeholder) {
                var value = flattenedSource[placeholder];
                return value || "{".concat(placeholder, "}");
            })
            : mapData({ template: value, source: source });
    }
    if (typeof template === 'string') {
        return replaceVariablePlaceholder(template);
    }
    if (Array.isArray(template)) {
        return template.map(replaceVariablePlaceholder);
    }
    var result = {};
    for (var key in template) {
        if (Object.prototype.hasOwnProperty.call(template, key)) {
            var value = template[key];
            var replacedVal = replaceVariablePlaceholder(value);
            if (COLOR_KEYS[key] && typeof replacedVal === 'string') {
                replacedVal = convertArgbToRgba(replacedVal);
            }
            result[key] = replacedVal;
        }
    }
    return result;
}

var TemplateMessageItemBody_MessageTemplateErrorBoundary = /** @class */ (function (_super) {
    __extends(MessageTemplateErrorBoundary, _super);
    function MessageTemplateErrorBoundary(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { hasError: false };
        return _this;
    }
    MessageTemplateErrorBoundary.getDerivedStateFromError = function () {
        return { hasError: true };
    };
    MessageTemplateErrorBoundary.prototype.componentDidCatch = function (error, errorInfo) {
        var _a;
        (_a = this.props.logger) === null || _a === void 0 ? void 0 : _a.error('Error caught by ErrorBoundary:', error, errorInfo);
    };
    MessageTemplateErrorBoundary.prototype.render = function () {
        if (this.state.hasError) {
            this.props.onTemplateMessageRenderedCallback('failed');
            return this.props.fallbackMessage;
        }
        this.props.onTemplateMessageRenderedCallback(this.props.isComposite ? 'composite' : 'simple');
        return this.props.children;
    };
    return MessageTemplateErrorBoundary;
}(external_root_React_commonjs2_react_commonjs_react_amd_react_["Component"]));

var TEMPLATE_FETCH_RETRY_BUFFER_TIME_IN_MILLIES = 500; // It takes about 450ms for isError update
/**
 * Returns copied message template object filled with given template data and color variables.
 */
var getFilledMessageTemplateWithData = function (_a) {
    var template = _a.template, _b = _a.templateData, templateData = _b === void 0 ? {} : _b, colorVariables = _a.colorVariables, theme = _a.theme;
    var selectedThemeColorVariables = {};
    if (colorVariables && theme) {
        selectedThemeColorVariables = selectColorVariablesByTheme({
            colorVariables: colorVariables,
            theme: theme,
        });
    }
    var source = __assign(__assign({}, templateData), selectedThemeColorVariables);
    var parsedTemplate = mapData({
        template: restoreNumbersFromMessageTemplateObject(template),
        source: source,
    });
    return parsedTemplate;
};
function TemplateMessageItemBody(_a) {
    var _b, _c;
    var _d = _a.className, className = _d === void 0 ? '' : _d, message = _a.message, _e = _a.isByMe, isByMe = _e === void 0 ? false : _e, _f = _a.theme, theme = _f === void 0 ? 'light' : _f, _g = _a.onTemplateMessageRenderedCallback, onTemplateMessageRenderedCallback = _g === void 0 ? function () { } : _g;
    var templateData = (_b = message.extendedMessagePayload) === null || _b === void 0 ? void 0 : _b['template'];
    var getFailedBody = function () {
        onTemplateMessageRenderedCallback('failed');
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FallbackTemplateMessageItemBody, { className: className, message: message, isByMe: isByMe });
    };
    if (!(templateData === null || templateData === void 0 ? void 0 : templateData.key)) {
        return getFailedBody();
    }
    var templateKey = templateData.key;
    var globalState = useSendbirdStateContext();
    if (!globalState) {
        return getFailedBody();
    }
    var _h = globalState.utils, getCachedTemplate = _h.getCachedTemplate, updateMessageTemplatesInfo = _h.updateMessageTemplatesInfo;
    var logger = globalState.config.logger;
    var waitingTemplateKeysMap = globalState.stores.appInfoStore.waitingTemplateKeysMap;
    var waitingTemplateKeysMapString = Object.entries(waitingTemplateKeysMap)
        .map(function (_a) {
        var key = _a[0], value = _a[1];
        return [key, value.requestedAt, value.erroredMessageIds.join(',')].join('-');
    }).join('_');
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(getFilledMessageTemplateItems()), renderData = _j[0], setRenderData = _j[1];
    function getFilledMessageTemplateItemsForCarouselTemplateByMessagePayload(simpleTemplateDataList) {
        var cachedSimpleTemplates = [];
        var simpleTemplatesVariables = [];
        var maxVersion = 0;
        simpleTemplateDataList.forEach(function (simpleTemplateData) {
            var simpleTemplateKey = simpleTemplateData.key;
            if (!simpleTemplateKey) {
                logger.error('TemplateMessageItemBody | simple template keys are not found in view_variables: ', simpleTemplateDataList);
                throw new Error('TemplateMessageItemBody | simple template keys are not found in view_variables.');
            }
            var simpleCachedTemplate = getCachedTemplate(simpleTemplateKey);
            if (simpleCachedTemplate) {
                cachedSimpleTemplates.push(simpleCachedTemplate);
                simpleTemplatesVariables.push(simpleTemplateData.variables);
                maxVersion = Math.max(maxVersion, simpleCachedTemplate.version);
            }
        });
        var filledMessageTemplateItemsList = cachedSimpleTemplates
            .map(function (cachedSimpleTemplate, index) {
            var templateItems = JSON.parse(cachedSimpleTemplate.uiTemplate);
            var filledMessageTemplateItems = getFilledMessageTemplateWithData({
                template: templateItems,
                templateData: simpleTemplatesVariables[index],
                colorVariables: cachedSimpleTemplate.colorVariables,
                theme: theme,
            });
            return filledMessageTemplateItems;
        });
        return {
            maxVersion: maxVersion,
            filledTemplates: filledMessageTemplateItemsList,
        };
    }
    function getFilledMessageTemplateItemsForCarouselTemplate(uiTemplates) {
        var maxVersion = 0;
        var filledTemplates = [];
        uiTemplates.forEach(function (uiTemplate) {
            maxVersion = Math.max(maxVersion, uiTemplate.version);
            var filledMessageTemplateItems = getFilledMessageTemplateWithData({
                template: uiTemplate.body.items,
            });
            filledTemplates.push(filledMessageTemplateItems);
        });
        return {
            maxVersion: maxVersion,
            filledTemplates: filledTemplates,
        };
    }
    function getFilledMessageTemplateItemsForSimpleTemplate(templateItems, colorVariables) {
        var _a;
        var filledMessageTemplateItems = getFilledMessageTemplateWithData({
            template: templateItems,
            templateData: (_a = templateData === null || templateData === void 0 ? void 0 : templateData.variables) !== null && _a !== void 0 ? _a : {},
            colorVariables: colorVariables,
            theme: theme,
        });
        return filledMessageTemplateItems;
    }
    function getFilledMessageTemplateItems() {
        var result = {
            filledMessageTemplateItemsList: [],
            isErrored: false,
        };
        var nonCachedTemplateKeys = [];
        var cachedTemplate = getCachedTemplate(templateKey);
        if (!cachedTemplate) {
            nonCachedTemplateKeys.push(templateKey);
        }
        if (templateData === null || templateData === void 0 ? void 0 : templateData.view_variables) {
            try {
                // eslint-disable-next-line @typescript-eslint/no-unused-vars
                Object.entries(templateData.view_variables).forEach(function (_a) {
                    var _ = _a[0], simpleTemplateDataList = _a[1];
                    simpleTemplateDataList.forEach(function (simpleTemplateData) {
                        var simpleTemplateKey = simpleTemplateData === null || simpleTemplateData === void 0 ? void 0 : simpleTemplateData.key;
                        if (simpleTemplateKey
                            && !getCachedTemplate(simpleTemplateKey)
                            && !nonCachedTemplateKeys.includes(simpleTemplateKey)) {
                            nonCachedTemplateKeys.push(simpleTemplateKey);
                        }
                    });
                });
            }
            catch (e) {
                logger.error('TemplateMessageItemBody | received view_variables is malformed: ', templateData);
                result.isErrored = true;
                return result;
            }
        }
        try {
            if (nonCachedTemplateKeys.length > 0) {
                tryFetchTemplateByKey(nonCachedTemplateKeys);
            }
            else if (cachedTemplate) {
                var parsedUiTemplate = JSON.parse(cachedTemplate.uiTemplate);
                if (!Array.isArray(parsedUiTemplate) || parsedUiTemplate.length === 0) {
                    logger.error('TemplateMessageItemBody | parsed template is missing ui_template: ', parsedUiTemplate);
                    throw new Error('TemplateMessageItemBody | parsed template is missing ui_template. See error log in console for details');
                }
                /**
                 * Composite template validation
                 */
                if (parsedUiTemplate[0].type === CompositeComponentType.Carousel) {
                    var carouselItem = parsedUiTemplate[0];
                    if (parsedUiTemplate.length > 1) { // TODO: in future, support multiple templates
                        logger.error('TemplateMessageItemBody | composite template currently does not support multiple items: ', parsedUiTemplate);
                        throw new Error('TemplateMessageItemBody | composite template currently does not support multiple items. See error log in console for details');
                    }
                    if (typeof carouselItem.items === 'string') {
                        if (!startsWithAtAndEndsWithBraces(carouselItem.items)) {
                            logger.error('TemplateMessageItemBody | composite template with reservation key must follow the following string format "{@your-reservation-key}": ', templateKey, carouselItem);
                            throw new Error('TemplateMessageItemBody | composite template with reservation key must follow the following string format "{@your-reservation-key}". See error log in console for details');
                        }
                        if (!(templateData === null || templateData === void 0 ? void 0 : templateData.view_variables)) {
                            logger.error('TemplateMessageItemBody | template key suggests composite template but template data is missing view_variables: ', templateKey, templateData);
                            throw new Error('TemplateMessageItemBody | template key suggests composite template but template data is missing view_variables. See error log in console for details');
                        }
                        var reservationKey = removeAtAndBraces(carouselItem.items);
                        var simpleTemplateDataList = templateData.view_variables[reservationKey];
                        if (!simpleTemplateDataList) {
                            logger.error('TemplateMessageItemBody | no reservation key found in view_variables: ', reservationKey, templateData.view_variables);
                            throw new Error('TemplateMessageItemBody | no reservation key found in view_variables. See error log in console for details');
                        }
                        if (simpleTemplateDataList.length > 10) {
                            logger.warning('TemplateMessageItemBody | composite template with more than 10 simple templates will only render the first 10 items: ', reservationKey, templateData.view_variables);
                            simpleTemplateDataList = simpleTemplateDataList.slice(0, 10);
                        }
                        var _a = getFilledMessageTemplateItemsForCarouselTemplateByMessagePayload(simpleTemplateDataList), maxVersion = _a.maxVersion, filledTemplates = _a.filledTemplates;
                        result.isComposite = true;
                        result.templateVersion = Math.max(cachedTemplate.version, maxVersion);
                        result.filledMessageTemplateItemsList = [{
                                type: carouselItem.type,
                                spacing: carouselItem.spacing,
                                items: filledTemplates,
                            }];
                    }
                    else if (Array.isArray(carouselItem.items)) {
                        var simpleTemplates = carouselItem.items;
                        if (carouselItem.items.length > 10) {
                            logger.warning('TemplateMessageItemBody | composite template with more than 10 simple templates will only render the first 10 items: ', carouselItem);
                            simpleTemplates = carouselItem.items.slice(0, 10);
                        }
                        var _b = getFilledMessageTemplateItemsForCarouselTemplate(simpleTemplates), maxVersion = _b.maxVersion, filledTemplates = _b.filledTemplates;
                        result.isComposite = true;
                        result.templateVersion = Math.max(cachedTemplate.version, maxVersion);
                        result.filledMessageTemplateItemsList = [{
                                type: carouselItem.type,
                                spacing: carouselItem.spacing,
                                items: filledTemplates,
                            }];
                    }
                    else {
                        logger.error('TemplateMessageItemBody | composite template is malformed: ', templateKey, carouselItem);
                        throw new Error('TemplateMessageItemBody | composite template is malformed. See error log in console for details');
                    }
                }
                else {
                    result.templateVersion = cachedTemplate.version;
                    result.filledMessageTemplateItemsList = getFilledMessageTemplateItemsForSimpleTemplate(parsedUiTemplate, cachedTemplate.colorVariables);
                }
            }
        }
        catch (e) {
            result.isErrored = true;
        }
        return result;
    }
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!renderData.isErrored && renderData.filledMessageTemplateItemsList.length === 0) {
            var newRenderData = getFilledMessageTemplateItems();
            setRenderData(newRenderData);
        }
    }, [templateData.key, waitingTemplateKeysMapString]);
    /**
     * Attempt GET template by key IFF one of below cases is met:
     * 1. This is the first GET call for the template key.
     * 2. Minimum buffer time has passed since the previous GET error.
     */
    function tryFetchTemplateByKey(templateKeys) {
        if (templateKeys.length > 0) {
            var waitingTemplateKeyDataList_1 = [];
            templateKeys.forEach(function (templateKey) {
                var waitingTemplateKeyData = waitingTemplateKeysMap[templateKey];
                waitingTemplateKeyDataList_1.push([templateKey, waitingTemplateKeyData]);
            });
            var requestedAt_1 = Date.now();
            var keysToUpdate_1 = [];
            waitingTemplateKeyDataList_1.forEach(function (_a) {
                var templateKey = _a[0], waitingTemplateKeyData = _a[1];
                if (!waitingTemplateKeyData
                    || (waitingTemplateKeyData.erroredMessageIds.indexOf(message.messageId) === -1
                        && requestedAt_1 > waitingTemplateKeyData.requestedAt + TEMPLATE_FETCH_RETRY_BUFFER_TIME_IN_MILLIES)) {
                    keysToUpdate_1.push(templateKey);
                }
                else if (waitingTemplateKeyData.erroredMessageIds.indexOf(message.messageId) > -1) {
                    throw new Error("TemplateMessageItemBody | fetching template key ".concat(templateKey, " for messageId: ").concat(message.messageId, " has failed."));
                }
            });
            if (keysToUpdate_1.length > 0) {
                updateMessageTemplatesInfo(keysToUpdate_1, message.messageId, requestedAt_1);
            }
        }
    }
    if (renderData.isErrored) {
        return getFailedBody();
    }
    if (renderData.filledMessageTemplateItemsList.length === 0) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LoadingTemplateMessageItemBody, { className: className, isByMe: isByMe });
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className,
            isByMe ? 'outgoing' : 'incoming',
            'sendbird-template-message-item-body',
        ]) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TemplateMessageItemBody_MessageTemplateErrorBoundary, { fallbackMessage: external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FallbackTemplateMessageItemBody, { className: className, message: message, isByMe: isByMe }), onTemplateMessageRenderedCallback: onTemplateMessageRenderedCallback, isComposite: renderData.isComposite, logger: logger },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageTemplateWrapper, { message: message, templateVersion: (_c = renderData.templateVersion) !== null && _c !== void 0 ? _c : 0, templateItems: renderData.filledMessageTemplateItemsList }))));
}


//# sourceMappingURL=TemplateMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/FeedbackIconButton.js


var FeedbackIconButton = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var children = props.children, isSelected = props.isSelected, _a = props.onClick, onClick = _a === void 0 ? function () { } : _a, _b = props.disabled, disabled = _b === void 0 ? false : _b;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("button", { className: [
            'sendbird-iconbutton__feedback',
            isSelected ? 'sendbird-iconbutton__feedback__pressed' : '',
            disabled ? 'sendbird-iconbutton__feedback__disabled' : '',
        ].join(' '), ref: ref, type: 'button', onClick: function (e) {
            onClick === null || onClick === void 0 ? void 0 : onClick(e);
        }, disabled: disabled },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: [
                'sendbird-iconbutton__feedback__inner',
                isSelected ? 'sendbird-iconbutton__feedback__inner__pressed' : '',
                disabled ? 'sendbird-iconbutton__feedback__inner__disabled' : '',
            ].join(' ') }, children)));
});


//# sourceMappingURL=FeedbackIconButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MobileFeedbackMenu.js




























function MobileFeedbackMenu(props) {
    var hideMenu = props.hideMenu, onEditFeedback = props.onEditFeedback, onRemoveFeedback = props.onRemoveFeedback;
    var stringSet = useLocalization().stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, { onBackdropClick: hideMenu },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--feedback-options-menu' },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--feedback-option', onClick: function () {
                    hideMenu();
                    onEditFeedback();
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.EDIT_COMMENT)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message__bottomsheet--feedback-option', onClick: function () {
                    hideMenu();
                    onRemoveFeedback();
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ERROR }, stringSet.REMOVE_FEEDBACK)))));
}


//# sourceMappingURL=MobileFeedbackMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Input.js





var InputLabel = function (_a) {
    var children = _a.children;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-input-label", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_1 }, children));
};
var Input = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var name = props.name, required = props.required, disabled = props.disabled, value = props.value, placeHolder = props.placeHolder, _a = props.autoFocus, autoFocus = _a === void 0 ? false : _a;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(value), inputValue = _b[0], setInputValue = _b[1];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-input" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { className: "sendbird-input__input", ref: ref, name: name, required: required, disabled: disabled, value: inputValue, onChange: function (e) {
                setInputValue(e.target.value);
            }, autoFocus: autoFocus }),
        (placeHolder && !inputValue) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-input__placeholder", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, placeHolder))));
});


//# sourceMappingURL=Input.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageFeedbackModal.js





























function MessageFeedbackModal(props) {
    var _a, _b;
    var selectedFeedback = props.selectedFeedback, message = props.message, onClose = props.onClose, onSubmit = props.onSubmit, onUpdate = props.onUpdate, onRemove = props.onRemove;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var isMobile = useMediaQueryContext().isMobile;
    var isEdit = (message === null || message === void 0 ? void 0 : message.myFeedback) && selectedFeedback === message.myFeedback.rating;
    var hasComment = (_a = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _a === void 0 ? void 0 : _a.comment;
    var onSubmitWrapper = function () {
        var _a, _b, _c;
        if (!selectedFeedback)
            return;
        var comment = (_b = (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : '';
        if (isEdit) {
            if (comment !== ((_c = message.myFeedback) === null || _c === void 0 ? void 0 : _c.comment)) {
                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(selectedFeedback, comment);
            }
            else {
                onClose === null || onClose === void 0 ? void 0 : onClose();
            }
        }
        else if (!message.myFeedback) {
            onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit(selectedFeedback, comment);
        }
    };
    var modalRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var onKeyDown = useKeyDown(modalRef, {
        Enter: function () { return onSubmitWrapper(); },
        Escape: function () { return onClose === null || onClose === void 0 ? void 0 : onClose(); },
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { onKeyDown: onKeyDown },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { contentClassName: 'sendbird-message-feedback-modal-content__mobile', type: ButtonTypes.PRIMARY, onCancel: onClose, onSubmit: function () {
                onSubmitWrapper();
            }, submitText: stringSet.BUTTON__SUBMIT, renderHeader: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-modal__header' },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1, className: 'sendbird-message-feedback-modal-header' }, stringSet.FEEDBACK_MODAL_TITLE))); }, customFooter: external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-feedback-modal-footer__root' },
                !isMobile && (message === null || message === void 0 ? void 0 : message.myFeedback) && selectedFeedback === message.myFeedback.rating
                    ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.WARNING, onClick: onRemove, labelType: LabelTypography.BUTTON_3 }, stringSet.BUTTON__REMOVE_FEEDBACK)
                    : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-feedback-modal-footer__right-content' },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, onClick: onClose },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_3, color: LabelColors.ONBACKGROUND_1 }, stringSet.BUTTON__CANCEL)),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { onClick: function () { return onSubmitWrapper(); } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_3, color: LabelColors.ONCONTENT_1 }, hasComment ? stringSet.BUTTON__SAVE : stringSet.BUTTON__SUBMIT)))) },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-feedback-modal-body__root' },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, { name: 'sendbird-message-feedback-modal-body__root', ref: inputRef, value: isEdit ? (_b = message.myFeedback) === null || _b === void 0 ? void 0 : _b.comment : undefined, placeHolder: stringSet.FEEDBACK_CONTENT_PLACEHOLDER, autoFocus: true })))));
}


//# sourceMappingURL=MessageFeedbackModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageFeedbackFailedModal.js




























function MessageFeedbackFailedModal(props) {
    var text = props.text, onCancel = props.onCancel;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var modalRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var onKeyDown = useKeyDown(modalRef, {
        Enter: function () { return onCancel === null || onCancel === void 0 ? void 0 : onCancel(); },
        Escape: function () { return onCancel === null || onCancel === void 0 ? void 0 : onCancel(); },
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { onKeyDown: onKeyDown },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { contentClassName: 'sendbird-message-feedback-modal-content__mobile', type: ButtonTypes.PRIMARY, onSubmit: onCancel, onClose: onCancel, submitText: stringSet.BUTTON__OK, renderHeader: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-modal__header' },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1, className: 'sendbird-message-feedback-modal-header' }, text))); }, customFooter: external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-feedback-modal-footer__root_failed' },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { onClick: onCancel },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_3, color: LabelColors.ONCONTENT_1 }, stringSet.BUTTON__OK))) })));
}


//# sourceMappingURL=MessageFeedbackFailedModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageContent.js




























































































function MessageProfile(props) {
    var message = props.message, channel = props.channel, userId = props.userId, _a = props.chainBottom, chainBottom = _a === void 0 ? false : _a, isByMe = props.isByMe, displayThreadReplies = props.displayThreadReplies, bottom = props.bottom;
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _b.disableUserProfile, renderUserProfile = _b.renderUserProfile;
    if (isByMe || chainBottom || !bundle_janisM9b_isSendableMessage(message)) {
        return null;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) {
            var _a, _b;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: classnames('sendbird-message-content__left__avatar', displayThreadReplies && 'use-thread-replies'), src: ((_b = (_a = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a === void 0 ? void 0 : _a.find(function (member) { return (member === null || member === void 0 ? void 0 : member.userId) === message.sender.userId; })) === null || _b === void 0 ? void 0 : _b.profileUrl)
                    || message.sender.profileUrl
                    || '', 
                // TODO: Divide getting profileUrl logic to utils
                ref: avatarRef, width: "28px", height: "28px", bottom: bottom, onClick: function () {
                    if (!disableUserProfile)
                        toggleDropdown();
                } }));
        }, menuItems: function (closeDropdown) { return (renderUserProfile ? (renderUserProfile({
            user: message.sender,
            close: closeDropdown,
            currentUserId: userId,
            avatarRef: avatarRef,
        })) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems
        /**
         * parentRef: For catching location(x, y) of MenuItems
         * parentContainRef: For toggling more options(menus & reactions)
        */
        , { 
            /**
             * parentRef: For catching location(x, y) of MenuItems
             * parentContainRef: For toggling more options(menus & reactions)
            */
            parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: message.sender, onSuccess: closeDropdown })))); } }));
}

var MESSAGE_ITEM_BODY_CLASSNAME = 'sendbird-message-content__middle__message-item-body';
function MessageBody(props) {
    var message = props.message, channel = props.channel, showFileViewer = props.showFileViewer, onMessageHeightChange = props.onMessageHeightChange, onTemplateMessageRenderedCallback = props.onTemplateMessageRenderedCallback, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, mouseHover = props.mouseHover, isMobile = props.isMobile, config = props.config, isReactionEnabledInChannel = props.isReactionEnabledInChannel, isByMe = props.isByMe;
    var threadMessageKindKey = useThreadMessageKindKeySelector({
        isMobile: isMobile,
    });
    var statefulFileInfoList = useFileInfoListWithUploaded(message); // For MultipleFilesMessage.
    var messageTypes = getUIKitMessageTypes();
    var isOgMessageEnabledInGroupChannel = (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && config.groupChannel.enableOgtag;
    return K(message)
        .when(isTemplateMessage, function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TemplateMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, theme: config === null || config === void 0 ? void 0 : config.theme, onTemplateMessageRenderedCallback: onTemplateMessageRenderedCallback })); })
        .when(function (message) { return isOgMessageEnabledInGroupChannel
        && bundle_janisM9b_isSendableMessage(message)
        && isOGMessage(message); }, function () {
        var _a;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OGMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, mouseHover: mouseHover, isMentionEnabled: (_a = config.groupChannel.enableMention) !== null && _a !== void 0 ? _a : false, isReactionEnabled: isReactionEnabledInChannel, onMessageHeightChange: onMessageHeightChange }));
    })
        .when(isTextMessage, function () {
        var _a;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, mouseHover: mouseHover, isMentionEnabled: (_a = config.groupChannel.enableMention) !== null && _a !== void 0 ? _a : false, isReactionEnabled: isReactionEnabledInChannel }));
    })
        .when(function (message) { return getUIKitMessageType(message) === messageTypes.FILE; }, function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, mouseHover: mouseHover, isReactionEnabled: isReactionEnabledInChannel, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage })); })
        .when(isMultipleFilesMessage, function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MultipleFilesMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, mouseHover: mouseHover, isReactionEnabled: isReactionEnabledInChannel, threadMessageKindKey: threadMessageKindKey, statefulFileInfoList: statefulFileInfoList, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage })); })
        .when(isVoiceMessage, function () {
        var _a;
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, channelUrl: (_a = channel === null || channel === void 0 ? void 0 : channel.url) !== null && _a !== void 0 ? _a : '', isByMe: isByMe, isReactionEnabled: isReactionEnabledInChannel }));
    })
        .when(isThumbnailMessage, function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThumbnailMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, mouseHover: mouseHover, isReactionEnabled: isReactionEnabledInChannel, showFileViewer: showFileViewer, style: isMobile ? { width: '100%' } : {} })); })
        .otherwise(function (message) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnknownMessageItemBody, { className: MESSAGE_ITEM_BODY_CLASSNAME, message: message, isByMe: isByMe, mouseHover: mouseHover, isReactionEnabled: isReactionEnabledInChannel })); });
}

function MessageHeader(props) {
    var _a, _b;
    var channel = props.channel, message = props.message;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-content__middle__sender-name", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, 
    /**
     * To use the latest member profile information, message.sender might be outdated
     */
    ((_b = (_a = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a === void 0 ? void 0 : _a.find(function (member) {
        var _a;
        // @ts-ignore
        return (member === null || member === void 0 ? void 0 : member.userId) === ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId);
    })) === null || _b === void 0 ? void 0 : _b.nickname) || getSenderName(message)
    // TODO: Divide getting profileUrl logic to utils
    ));
}

var SbFeedbackStatus;
(function (SbFeedbackStatus) {
    /** Feedback is unavailable for this message. This is the default value for base message. */
    SbFeedbackStatus["NOT_APPLICABLE"] = "NOT_APPLICABLE";
    /** Feedback can be set for this message, but nothing has been submitted yet. */
    SbFeedbackStatus["NO_FEEDBACK"] = "NO_FEEDBACK";
    /** Feedback can be set for this message, and something has been submitted. */
    SbFeedbackStatus["SUBMITTED"] = "SUBMITTED";
})(SbFeedbackStatus || (SbFeedbackStatus = {}));

function MessageContent(props) {
    var _this = this;
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
    var 
    // Internal props
    className = props.className, userId = props.userId, channel = props.channel, message = props.message, _q = props.disabled, disabled = _q === void 0 ? false : _q, _r = props.chainTop, chainTop = _r === void 0 ? false : _r, _s = props.chainBottom, chainBottom = _s === void 0 ? false : _s, _t = props.isReactionEnabled, isReactionEnabled = _t === void 0 ? false : _t, _u = props.disableQuoteMessage, disableQuoteMessage = _u === void 0 ? false : _u, replyType = props.replyType, threadReplySelectType = props.threadReplySelectType, nicknamesMap = props.nicknamesMap, emojiContainer = props.emojiContainer, scrollToMessage = props.scrollToMessage, showEdit = props.showEdit, showRemove = props.showRemove, showFileViewer = props.showFileViewer, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, toggleReaction = props.toggleReaction, setQuoteMessage = props.setQuoteMessage, onReplyInThread = props.onReplyInThread, onQuoteMessageClick = props.onQuoteMessageClick, onMessageHeightChange = props.onMessageHeightChange, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage;
    // Public props for customization
    var _v = deleteNullish(props), _w = _v.renderSenderProfile, renderSenderProfile = _w === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProfile, __assign({}, props)); } : _w, _x = _v.renderMessageBody, renderMessageBody = _x === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageBody, __assign({}, props)); } : _x, _y = _v.renderMessageHeader, renderMessageHeader = _y === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageHeader, __assign({}, props)); } : _y, _z = _v.renderMessageMenu, renderMessageMenu = _z === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageMenu, __assign({}, props)); } : _z, _0 = _v.renderEmojiMenu, renderEmojiMenu = _0 === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageEmojiMenu, __assign({}, props)); } : _0, _1 = _v.renderEmojiReactions, renderEmojiReactions = _1 === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactions, __assign({}, props)); } : _1, _2 = _v.renderMobileMenuOnLongPress, renderMobileMenuOnLongPress = _2 === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileMenu, __assign({}, props)); } : _2;
    var dateLocale = useLocalization().dateLocale;
    var _3 = useSendbirdStateContext(), config = _3.config, eventHandlers = _3.eventHandlers;
    var logger = config.logger;
    var onPressUserProfileHandler = (_a = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.reaction) === null || _a === void 0 ? void 0 : _a.onPressUserProfile;
    var contentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var timestampRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var threadRepliesRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var feedbackButtonsRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var isMobile = useMediaQueryContext().isMobile;
    var _4 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMenu = _4[0], setShowMenu = _4[1];
    var _5 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), mouseHover = _5[0], setMouseHover = _5[1];
    var _6 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), supposedHover = _6[0], setSupposedHover = _6[1];
    // Feedback states
    var _7 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showFeedbackOptionsMenu = _7[0], setShowFeedbackOptionsMenu = _7[1];
    var _8 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showFeedbackModal = _8[0], setShowFeedbackModal = _8[1];
    var _9 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), feedbackFailedText = _9[0], setFeedbackFailedText = _9[1];
    var _10 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(getMessageContentMiddleClassNameByContainerType({
        message: message,
        isMobile: isMobile,
    })), uiContainerType = _10[0], setUiContainerType = _10[1];
    var onTemplateMessageRenderedCallback = function (renderedTemplateType) {
        if (renderedTemplateType === 'failed') {
            setUiContainerType(UI_CONTAINER_TYPES.DEFAULT);
        }
        else if (renderedTemplateType === 'composite') {
            /**
             * Composite templates must have default carousel view irregardless of given containerType.
             */
            setUiContainerType(UI_CONTAINER_TYPES.DEFAULT_CAROUSEL);
        }
    };
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var isByMe = (userId === ((_b = message === null || message === void 0 ? void 0 : message.sender) === null || _b === void 0 ? void 0 : _b.userId))
        || ((message === null || message === void 0 ? void 0 : message.sendingStatus) === 'pending')
        || ((message === null || message === void 0 ? void 0 : message.sendingStatus) === 'failed');
    var isByMeClassName = isByMe ? 'outgoing' : 'incoming';
    var chainTopClassName = chainTop ? 'chain-top' : '';
    var isReactionEnabledInChannel = isReactionEnabled && !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral);
    var isReactionEnabledClassName = isReactionEnabledInChannel ? 'use-reactions' : '';
    var supposedHoverClassName = supposedHover ? 'sendbird-mouse-hover' : '';
    var useReplying = !!((replyType === 'QUOTE_REPLY' || replyType === 'THREAD')
        && (message === null || message === void 0 ? void 0 : message.parentMessageId) && (message === null || message === void 0 ? void 0 : message.parentMessage)
        && !disableQuoteMessage);
    var useReplyingClassName = useReplying ? 'use-quote' : '';
    // Thread replies
    var displayThreadReplies = ((_c = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _c === void 0 ? void 0 : _c.replyCount)
        && message.threadInfo.replyCount > 0
        && replyType === 'THREAD';
    // Feedback buttons
    var isFeedbackMessage = !isByMe
        && !!(message === null || message === void 0 ? void 0 : message.myFeedbackStatus)
        && message.myFeedbackStatus !== SbFeedbackStatus.NOT_APPLICABLE;
    var isFeedbackEnabled = !!((_d = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _d === void 0 ? void 0 : _d.enableFeedback) && isFeedbackMessage;
    /**
     * For TemplateMessage, do not display:
     *   - in web view:
     *     - message menu
     *     - reaction menu
     *     - reply in thread
     *   - in mobile view:
     *     - bottom sheet on long click
     */
    var isNotTemplateMessage = !isTemplateMessage(message);
    var showLongPressMenu = isNotTemplateMessage && isMobile;
    var showOutgoingMenu = isNotTemplateMessage && isByMe && !isMobile;
    var showThreadReplies = isNotTemplateMessage && displayThreadReplies;
    var showRightContent = isNotTemplateMessage && !isByMe && !isMobile;
    var isTimestampBottom = !!uiContainerType;
    var getTotalBottom = function () {
        var sum = 2;
        if (timestampRef.current && isTimestampBottom) {
            sum += 4 + timestampRef.current.clientHeight;
        }
        if (threadRepliesRef.current) {
            sum += 4 + threadRepliesRef.current.clientHeight;
        }
        if (feedbackButtonsRef.current) {
            sum += 4 + feedbackButtonsRef.current.clientHeight;
        }
        return sum;
    };
    var totalBottom = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return getTotalBottom(); }, [isTimestampBottom]);
    var onCloseFeedbackForm = function () {
        setShowFeedbackModal(false);
    };
    var openFeedbackFormOrMenu = function () {
        if (isMobile) {
            setShowFeedbackOptionsMenu(true);
        }
        else {
            setShowFeedbackModal(true);
        }
    };
    // onMouseDown: (e: React.MouseEvent<T>) => void;
    // onTouchStart: (e: React.TouchEvent<T>) => void;
    // onMouseUp: (e: React.MouseEvent<T>) => void;
    // onMouseLeave: (e: React.MouseEvent<T>) => void;
    // onTouchEnd: (e: React.TouchEvent<T>) => void;
    var longPress = useLongPress({
        onLongPress: function () {
            if (showLongPressMenu) {
                setShowMenu(true);
            }
        },
        onClick: noop,
    }, {
        delay: 300,
        shouldPreventDefault: false,
    });
    if (isAdminMessage(message)) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AdminMessage, { message: message }));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            className !== null && className !== void 0 ? className : '',
            'sendbird-message-content',
            isByMeClassName,
            uiContainerType,
        ]), onMouseOver: function () { return setMouseHover(true); }, onMouseLeave: function () { return setMouseHover(false); } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-message-content__left', isReactionEnabledClassName, isByMeClassName, useReplyingClassName]) },
            renderSenderProfile(__assign(__assign({}, props), { isByMe: isByMe, displayThreadReplies: displayThreadReplies, bottom: totalBottom > 0 ? totalBottom + 'px' : '' })),
            showOutgoingMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-message-content-menu', isReactionEnabledClassName, supposedHoverClassName, isByMeClassName]) },
                renderMessageMenu({
                    channel: channel,
                    message: message,
                    isByMe: isByMe,
                    replyType: replyType,
                    disabled: disabled,
                    showEdit: showEdit,
                    showRemove: showRemove,
                    resendMessage: resendMessage,
                    setQuoteMessage: setQuoteMessage,
                    setSupposedHover: setSupposedHover,
                    onReplyInThread: function (_a) {
                        var _b, _c;
                        var message = _a.message;
                        if (threadReplySelectType === ThreadReplySelectType.THREAD) {
                            onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message });
                        }
                        else if (threadReplySelectType === ThreadReplySelectType.PARENT) {
                            scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage((_c = (_b = message.parentMessage) === null || _b === void 0 ? void 0 : _b.createdAt) !== null && _c !== void 0 ? _c : 0, message.parentMessageId);
                        }
                    },
                    deleteMessage: deleteMessage,
                }),
                isReactionEnabledInChannel && (renderEmojiMenu({
                    message: message,
                    userId: userId,
                    emojiContainer: emojiContainer,
                    toggleReaction: toggleReaction,
                    setSupposedHover: setSupposedHover,
                }))))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: getClassName([
                'sendbird-message-content__middle',
                isTemplateMessage(message) ? 'sendbird-message-content__middle__for_template_message' : '',
                uiContainerType,
            ]) }, (isMobile ? __assign({}, longPress) : {}), { ref: contentRef }),
            !isByMe && !chainTop && !useReplying && renderMessageHeader(props),
            (useReplying) ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-message-content__middle__quote-message', isByMe ? 'outgoing' : 'incoming', useReplyingClassName]) },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(QuoteMessage, { className: "sendbird-message-content__middle__quote-message__quote", message: message, userId: userId, isByMe: isByMe, isUnavailable: ((_e = channel === null || channel === void 0 ? void 0 : channel.messageOffsetTimestamp) !== null && _e !== void 0 ? _e : 0) > ((_g = (_f = message.parentMessage) === null || _f === void 0 ? void 0 : _f.createdAt) !== null && _g !== void 0 ? _g : 0), onClick: function () {
                        var _a;
                        if (replyType === 'THREAD' && threadReplySelectType === ThreadReplySelectType.THREAD) {
                            onQuoteMessageClick === null || onQuoteMessageClick === void 0 ? void 0 : onQuoteMessageClick({ message: message });
                        }
                        if ((replyType === 'QUOTE_REPLY' || (replyType === 'THREAD' && threadReplySelectType === ThreadReplySelectType.PARENT))
                            && ((_a = message === null || message === void 0 ? void 0 : message.parentMessage) === null || _a === void 0 ? void 0 : _a.createdAt) && (message === null || message === void 0 ? void 0 : message.parentMessageId)) {
                            scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage(message.parentMessage.createdAt, message.parentMessageId);
                        }
                    } }))) : null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
                    'sendbird-message-content__middle__body-container',
                    isTemplateMessage(message) ? 'sendbird-message-content__middle__for_template_message' : '',
                ]) },
                (isByMe && !chainBottom) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
                        'sendbird-message-content__middle__body-container__created-at',
                        'left',
                        supposedHoverClassName,
                        uiContainerType,
                    ]), ref: timestampRef },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-content__middle__body-container__created-at__component-container" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageStatus, { message: message, channel: channel })))),
                renderMessageBody({
                    message: message,
                    channel: channel,
                    showFileViewer: showFileViewer,
                    onMessageHeightChange: onMessageHeightChange,
                    mouseHover: mouseHover,
                    isMobile: isMobile,
                    config: config,
                    isReactionEnabledInChannel: isReactionEnabledInChannel,
                    isByMe: isByMe,
                    onTemplateMessageRenderedCallback: onTemplateMessageRenderedCallback,
                    onBeforeDownloadFileMessage: onBeforeDownloadFileMessage,
                }),
                (isReactionEnabledInChannel && ((_h = message === null || message === void 0 ? void 0 : message.reactions) === null || _h === void 0 ? void 0 : _h.length) > 0) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
                        'sendbird-message-content-reactions',
                        isMultipleFilesMessage(message)
                            ? 'image-grid'
                            : (!isByMe || isThumbnailMessage(message) || isOGMessage(message))
                                ? '' : 'primary',
                        mouseHover ? 'mouse-hover' : '',
                    ]) }, renderEmojiReactions({
                    userId: userId,
                    message: message,
                    channel: channel,
                    isByMe: isByMe,
                    emojiContainer: emojiContainer !== null && emojiContainer !== void 0 ? emojiContainer : new chat_pt(),
                    memberNicknamesMap: nicknamesMap !== null && nicknamesMap !== void 0 ? nicknamesMap : new Map(),
                    toggleReaction: toggleReaction,
                    onPressUserProfile: onPressUserProfileHandler,
                }))),
                (!isByMe && !chainBottom) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: getClassName([
                        'sendbird-message-content__middle__body-container__created-at',
                        'right',
                        supposedHoverClassName,
                        uiContainerType,
                    ]), type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2, ref: timestampRef }, format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, 'p', {
                    locale: dateLocale,
                })))),
            isTimestampBottom && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: {
                    width: '100%',
                    height: ((_k = (_j = timestampRef.current) === null || _j === void 0 ? void 0 : _j.clientHeight) !== null && _k !== void 0 ? _k : 0) + 'px',
                    marginTop: '4px',
                } }),
            showThreadReplies && (message === null || message === void 0 ? void 0 : message.threadInfo) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadReplies$1, { className: "sendbird-message-content__middle__thread-replies", threadInfo: message === null || message === void 0 ? void 0 : message.threadInfo, onClick: function () { return onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message }); }, ref: threadRepliesRef })),
            isFeedbackEnabled && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-content__middle__body-container__feedback-buttons-container", ref: feedbackButtonsRef },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FeedbackIconButton, { isSelected: ((_l = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _l === void 0 ? void 0 : _l.rating) === _bundle_dc8db3c3_Re.GOOD, onClick: function () { return __awaiter(_this, void 0, void 0, function () {
                        var error_1;
                        var _a, _b, _c;
                        return __generator(this, function (_d) {
                            switch (_d.label) {
                                case 0:
                                    if (!!((_a = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _a === void 0 ? void 0 : _a.rating)) return [3 /*break*/, 5];
                                    _d.label = 1;
                                case 1:
                                    _d.trys.push([1, 3, , 4]);
                                    return [4 /*yield*/, message.submitFeedback({
                                            rating: _bundle_dc8db3c3_Re.GOOD,
                                        })];
                                case 2:
                                    _d.sent();
                                    openFeedbackFormOrMenu();
                                    return [3 /*break*/, 4];
                                case 3:
                                    error_1 = _d.sent();
                                    (_c = (_b = config === null || config === void 0 ? void 0 : config.logger) === null || _b === void 0 ? void 0 : _b.error) === null || _c === void 0 ? void 0 : _c.call(_b, 'Channel: Submit feedback failed.', error_1);
                                    setFeedbackFailedText(stringSet.FEEDBACK_FAILED_SUBMIT);
                                    return [3 /*break*/, 4];
                                case 4: return [3 /*break*/, 6];
                                case 5:
                                    openFeedbackFormOrMenu();
                                    _d.label = 6;
                                case 6: return [2 /*return*/];
                            }
                        });
                    }); }, disabled: !!(message === null || message === void 0 ? void 0 : message.myFeedback) && message.myFeedback.rating !== _bundle_dc8db3c3_Re.GOOD },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.FEEDBACK_LIKE, width: '24px', height: '24px' })),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FeedbackIconButton, { isSelected: ((_m = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _m === void 0 ? void 0 : _m.rating) === _bundle_dc8db3c3_Re.BAD, onClick: function () { return __awaiter(_this, void 0, void 0, function () {
                        var error_2;
                        var _a, _b, _c;
                        return __generator(this, function (_d) {
                            switch (_d.label) {
                                case 0:
                                    if (!!((_a = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _a === void 0 ? void 0 : _a.rating)) return [3 /*break*/, 5];
                                    _d.label = 1;
                                case 1:
                                    _d.trys.push([1, 3, , 4]);
                                    return [4 /*yield*/, message.submitFeedback({
                                            rating: _bundle_dc8db3c3_Re.BAD,
                                        })];
                                case 2:
                                    _d.sent();
                                    openFeedbackFormOrMenu();
                                    return [3 /*break*/, 4];
                                case 3:
                                    error_2 = _d.sent();
                                    (_c = (_b = config === null || config === void 0 ? void 0 : config.logger) === null || _b === void 0 ? void 0 : _b.error) === null || _c === void 0 ? void 0 : _c.call(_b, 'Channel: Submit feedback failed.', error_2);
                                    setFeedbackFailedText(stringSet.FEEDBACK_FAILED_SUBMIT);
                                    return [3 /*break*/, 4];
                                case 4: return [3 /*break*/, 6];
                                case 5:
                                    openFeedbackFormOrMenu();
                                    _d.label = 6;
                                case 6: return [2 /*return*/];
                            }
                        });
                    }); }, disabled: !!(message === null || message === void 0 ? void 0 : message.myFeedback) && message.myFeedback.rating !== _bundle_dc8db3c3_Re.BAD },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.FEEDBACK_DISLIKE, width: '24px', height: '24px' })))),
        showRightContent && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-message-content__right', chainTopClassName, isReactionEnabledClassName, useReplyingClassName]) },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-message-content-menu', chainTopClassName, supposedHoverClassName, isByMeClassName]) },
                isReactionEnabledInChannel && (renderEmojiMenu({
                    className: 'sendbird-message-content-menu__reaction-menu',
                    message: message,
                    userId: userId,
                    emojiContainer: emojiContainer,
                    toggleReaction: toggleReaction,
                    setSupposedHover: setSupposedHover,
                })),
                renderMessageMenu({
                    className: 'sendbird-message-content-menu__normal-menu',
                    channel: channel,
                    message: message,
                    isByMe: isByMe,
                    replyType: replyType,
                    disabled: disabled,
                    showRemove: showRemove,
                    resendMessage: resendMessage,
                    setQuoteMessage: setQuoteMessage,
                    setSupposedHover: setSupposedHover,
                    onReplyInThread: function (_a) {
                        var _b, _c;
                        var message = _a.message;
                        if (threadReplySelectType === ThreadReplySelectType.THREAD) {
                            onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message });
                        }
                        else if (threadReplySelectType === ThreadReplySelectType.PARENT) {
                            scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage((_c = (_b = message.parentMessage) === null || _b === void 0 ? void 0 : _b.createdAt) !== null && _c !== void 0 ? _c : 0, message.parentMessageId);
                        }
                    },
                    deleteMessage: deleteMessage,
                })))),
        showMenu && bundle_janisM9b_isSendableMessage(message) && channel && renderMobileMenuOnLongPress({
            parentRef: contentRef,
            channel: channel,
            hideMenu: function () { setShowMenu(false); },
            message: message,
            isReactionEnabled: isReactionEnabledInChannel,
            isByMe: isByMe,
            userId: userId,
            replyType: replyType,
            disabled: disabled,
            showRemove: showRemove,
            emojiContainer: emojiContainer,
            resendMessage: resendMessage,
            deleteMessage: deleteMessage,
            setQuoteMessage: setQuoteMessage,
            toggleReaction: toggleReaction,
            showEdit: showEdit,
            onReplyInThread: function (_a) {
                var _b;
                var message = _a.message;
                if (threadReplySelectType === ThreadReplySelectType.THREAD) {
                    onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({ message: message });
                }
                else if (threadReplySelectType === ThreadReplySelectType.PARENT) {
                    scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage(((_b = message === null || message === void 0 ? void 0 : message.parentMessage) === null || _b === void 0 ? void 0 : _b.createdAt) || 0, (message === null || message === void 0 ? void 0 : message.parentMessageId) || 0);
                }
            },
            onDownloadClick: function (e) { return __awaiter(_this, void 0, void 0, function () {
                var allowDownload, err_1;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!onBeforeDownloadFileMessage) {
                                return [2 /*return*/];
                            }
                            _c.label = 1;
                        case 1:
                            _c.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, onBeforeDownloadFileMessage({ message: message })];
                        case 2:
                            allowDownload = _c.sent();
                            if (!allowDownload) {
                                e.preventDefault();
                                (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'MessageContent: Not allowed to download.');
                            }
                            return [3 /*break*/, 4];
                        case 3:
                            err_1 = _c.sent();
                            (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'MessageContent: Error occurred while determining download continuation:', err_1);
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            }); },
        }),
        ((_o = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _o === void 0 ? void 0 : _o.rating) && showFeedbackOptionsMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileFeedbackMenu, { hideMenu: function () {
                setShowFeedbackOptionsMenu(false);
            }, onEditFeedback: function () {
                setShowFeedbackOptionsMenu(false);
                setShowFeedbackModal(true);
            }, onRemoveFeedback: function () { return __awaiter(_this, void 0, void 0, function () {
                var error_3;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            _c.trys.push([0, 3, , 4]);
                            if (!(message.myFeedback !== null)) return [3 /*break*/, 2];
                            return [4 /*yield*/, message.deleteFeedback(message.myFeedback.id)];
                        case 1:
                            _c.sent();
                            _c.label = 2;
                        case 2: return [3 /*break*/, 4];
                        case 3:
                            error_3 = _c.sent();
                            (_b = (_a = config === null || config === void 0 ? void 0 : config.logger) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, 'Channel: Delete feedback failed.', error_3);
                            setFeedbackFailedText(stringSet.FEEDBACK_FAILED_DELETE);
                            return [3 /*break*/, 4];
                        case 4:
                            setShowFeedbackOptionsMenu(false);
                            return [2 /*return*/];
                    }
                });
            }); } })),
        ((_p = message === null || message === void 0 ? void 0 : message.myFeedback) === null || _p === void 0 ? void 0 : _p.rating) && showFeedbackModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageFeedbackModal, { selectedFeedback: message.myFeedback.rating, message: message, onUpdate: function (selectedFeedback, comment) { return __awaiter(_this, void 0, void 0, function () {
                var newFeedback, error_4;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!(message.myFeedback !== null)) return [3 /*break*/, 4];
                            newFeedback = new _bundle_dc8db3c3_Be({
                                id: message.myFeedback.id,
                                rating: selectedFeedback,
                                comment: comment,
                            });
                            _c.label = 1;
                        case 1:
                            _c.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, message.updateFeedback(newFeedback)];
                        case 2:
                            _c.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            error_4 = _c.sent();
                            (_b = (_a = config === null || config === void 0 ? void 0 : config.logger) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, 'Channel: Update feedback failed.', error_4);
                            setFeedbackFailedText(stringSet.FEEDBACK_FAILED_SAVE);
                            return [3 /*break*/, 4];
                        case 4:
                            onCloseFeedbackForm();
                            return [2 /*return*/];
                    }
                });
            }); }, onClose: onCloseFeedbackForm, onRemove: function () { return __awaiter(_this, void 0, void 0, function () {
                var error_5;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            _c.trys.push([0, 3, , 4]);
                            if (!(message.myFeedback !== null)) return [3 /*break*/, 2];
                            return [4 /*yield*/, message.deleteFeedback(message.myFeedback.id)];
                        case 1:
                            _c.sent();
                            _c.label = 2;
                        case 2: return [3 /*break*/, 4];
                        case 3:
                            error_5 = _c.sent();
                            (_b = (_a = config === null || config === void 0 ? void 0 : config.logger) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, 'Channel: Delete feedback failed.', error_5);
                            setFeedbackFailedText(stringSet.FEEDBACK_FAILED_DELETE);
                            return [3 /*break*/, 4];
                        case 4:
                            onCloseFeedbackForm();
                            return [2 /*return*/];
                    }
                });
            }); } })),
        feedbackFailedText && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageFeedbackFailedModal, { text: feedbackFailedText, onCancel: function () {
                setFeedbackFailedText('');
            } }))));
}


//# sourceMappingURL=MessageContent.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/SuggestedReplies.js


var SuggestedReplies = function (_a) {
    var replyOptions = _a.replyOptions, onSendMessage = _a.onSendMessage, _b = _a.type, type = _b === void 0 ? 'vertical' : _b;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), replied = _c[0], setReplied = _c[1];
    var onClickReply = function (event, option) {
        event.preventDefault();
        onSendMessage({ message: option });
        setReplied(true);
    };
    if (replied) {
        return null;
    }
    var children = replyOptions.map(function (option, index) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-suggested-replies__option", id: option, key: index + option, onClick: function (e) { return onClickReply(e, option); } }, option));
    });
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-suggested-replies ".concat(type) }, children);
};


//# sourceMappingURL=SuggestedReplies.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-gH-X0MYD.js












function SuggestedUserMentionItem(props) {
    var member = props.member, _a = props.isFocused, isFocused = _a === void 0 ? false : _a, parentScrollRef = props.parentScrollRef, onClick = props.onClick, onMouseOver = props.onMouseOver, onMouseMove = props.onMouseMove, renderUserMentionItem = props.renderUserMentionItem;
    var scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (isFocused && (parentScrollRef === null || parentScrollRef === void 0 ? void 0 : parentScrollRef.current) != null && (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) != null
            && (parentScrollRef.current.scrollTop >= scrollRef.current.offsetTop
                || parentScrollRef.current.scrollTop + parentScrollRef.current.clientHeight <= scrollRef.current.offsetTop)) {
            scrollRef.current.scrollIntoView({ block: 'nearest', inline: 'nearest' });
        }
    }, [isFocused]);
    var customMentionItem = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (renderUserMentionItem) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-mention-suggest-list__user-item", onClick: function (event) { return onClick === null || onClick === void 0 ? void 0 : onClick({ event: event, member: member, itemRef: scrollRef }); }, onMouseOver: function (event) { return onMouseOver === null || onMouseOver === void 0 ? void 0 : onMouseOver({ event: event, member: member, itemRef: scrollRef }); }, onMouseMove: function (event) { return onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove({ event: event, member: member, itemRef: scrollRef }); }, key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(), ref: scrollRef }, renderUserMentionItem({ user: member })));
        }
    }, [renderUserMentionItem]);
    if (customMentionItem) {
        return customMentionItem;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-mention-suggest-list__user-item', isFocused && 'focused'), onClick: function (event) { return onClick === null || onClick === void 0 ? void 0 : onClick({ event: event, member: member, itemRef: scrollRef }); }, onMouseOver: function (event) { return onMouseOver === null || onMouseOver === void 0 ? void 0 : onMouseOver({ event: event, member: member, itemRef: scrollRef }); }, onMouseMove: function (event) { return onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove({ event: event, member: member, itemRef: scrollRef }); }, key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(), ref: scrollRef },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-mention-suggest-list__user-item__avatar", src: member === null || member === void 0 ? void 0 : member.profileUrl, alt: "user-profile", width: "24px", height: "24px" }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-mention-suggest-list__user-item__nickname", type: LabelTypography.SUBTITLE_2, color: (member === null || member === void 0 ? void 0 : member.nickname) ? LabelColors.ONBACKGROUND_1 : LabelColors.ONBACKGROUND_3 }, (member === null || member === void 0 ? void 0 : member.nickname) || (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MENTION_NAME__NO_NAME)),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-mention-suggest-list__user-item__user-id", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, member === null || member === void 0 ? void 0 : member.userId)));
}

function fetchMembersFromChannel(currentUserId, channel, maxSuggestionCount, searchString) {
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            return [2 /*return*/, channel.members
                    .sort(function (a, b) { var _a; return (_a = a.nickname) === null || _a === void 0 ? void 0 : _a.localeCompare(b.nickname); })
                    .filter(function (member) {
                    var _a;
                    return ((_a = member.nickname) === null || _a === void 0 ? void 0 : _a.toLowerCase().startsWith(searchString.toLowerCase()))
                        && member.userId !== currentUserId
                        && member.isActive;
                }).slice(0, maxSuggestionCount)];
        });
    });
}
function fetchMembersFromQuery(currentUserId, channel, maxSuggestionCount, searchString) {
    return __awaiter(this, void 0, void 0, function () {
        var query;
        return __generator(this, function (_a) {
            query = channel.createMemberListQuery({
                limit: maxSuggestionCount + 1, // because current user could be included
                nicknameStartsWithFilter: searchString,
            });
            return [2 /*return*/, query.next()
                    .then(function (memberList) {
                    return memberList
                        .filter(function (member) { return currentUserId !== (member === null || member === void 0 ? void 0 : member.userId); })
                        .slice(0, maxSuggestionCount);
                })];
        });
    });
}

var DEBOUNCING_TIME = 300;
var SuggestedMentionListView = function (props) {
    var _a, _b, _c;
    var className = props.className, currentChannel = props.currentChannel, _d = props.targetNickname, targetNickname = _d === void 0 ? '' : _d, 
    // memberListQuery,
    onUserItemClick = props.onUserItemClick, onFocusItemChange = props.onFocusItemChange, onFetchUsers = props.onFetchUsers, renderUserMentionItem = props.renderUserMentionItem, inputEvent = props.inputEvent, _e = props.ableAddMention, ableAddMention = _e === void 0 ? true : _e, _f = props.maxMentionCount, maxMentionCount = _f === void 0 ? MAX_USER_MENTION_COUNT : _f, _g = props.maxSuggestionCount, maxSuggestionCount = _g === void 0 ? MAX_USER_SUGGESTION_COUNT : _g;
    var _h = useSendbirdStateContext(), config = _h.config, stores = _h.stores;
    var logger = config.logger;
    var currentUserId = ((_c = (_b = (_a = stores === null || stores === void 0 ? void 0 : stores.sdkStore) === null || _a === void 0 ? void 0 : _a.sdk) === null || _b === void 0 ? void 0 : _b.currentUser) === null || _c === void 0 ? void 0 : _c.userId) || '';
    var scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var stringSet = useLocalization().stringSet;
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), timer = _j[0], setTimer = _j[1];
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), searchString = _k[0], setSearchString = _k[1];
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), lastSearchString = _l[0], setLastSearchString = _l[1];
    var _m = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), currentFocusedMember = _m[0], setCurrentFocusedMember = _m[1];
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), currentMemberList = _o[0], setCurrentMemberList = _o[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        clearTimeout(timer !== null && timer !== void 0 ? timer : undefined);
        setTimer(setTimeout(function () {
            setSearchString(targetNickname);
        }, DEBOUNCING_TIME));
    }, [targetNickname]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.Enter) {
            if (currentFocusedMember && currentMemberList.length > 0) {
                onUserItemClick === null || onUserItemClick === void 0 ? void 0 : onUserItemClick(currentFocusedMember);
            }
        }
        if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.ArrowUp) {
            var currentUserIndex = currentMemberList.findIndex(function (member) { return (member === null || member === void 0 ? void 0 : member.userId) === (currentFocusedMember === null || currentFocusedMember === void 0 ? void 0 : currentFocusedMember.userId); });
            if (0 < currentUserIndex) {
                setCurrentFocusedMember(currentMemberList[currentUserIndex - 1]);
                onFocusItemChange === null || onFocusItemChange === void 0 ? void 0 : onFocusItemChange(currentMemberList[currentUserIndex - 1]);
            }
        }
        if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.ArrowDown) {
            var currentUserIndex = currentMemberList.findIndex(function (member) { return (member === null || member === void 0 ? void 0 : member.userId) === (currentFocusedMember === null || currentFocusedMember === void 0 ? void 0 : currentFocusedMember.userId); });
            if (currentUserIndex < currentMemberList.length - 1) {
                setCurrentFocusedMember(currentMemberList[currentUserIndex + 1]);
                onFocusItemChange === null || onFocusItemChange === void 0 ? void 0 : onFocusItemChange(currentMemberList[currentUserIndex + 1]);
            }
        }
    }, [inputEvent]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (lastSearchString && searchString.indexOf(lastSearchString) === 0 && currentMemberList.length === 0) {
            // Don't need to request query again
            return;
        }
        if (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isSuper) {
            if (!(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.createMemberListQuery)) {
                logger.warning('SuggestedMentionList: Creating member list query failed');
                return;
            }
        }
        var fetcher = (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isSuper) ? fetchMembersFromQuery : fetchMembersFromChannel;
        fetcher(currentUserId, currentChannel, maxSuggestionCount, searchString.slice(USER_MENTION_TEMP_CHAR.length))
            .then(function (suggestingMembers) {
            if (suggestingMembers.length < 1) {
                logger.info('SuggestedMentionList: Fetched member list is empty');
            }
            else {
                logger.info('SuggestedMentionList: Fetching member list succeeded', { memberList: suggestingMembers });
                setCurrentFocusedMember(suggestingMembers[0]);
            }
            setLastSearchString(searchString);
            onFetchUsers === null || onFetchUsers === void 0 ? void 0 : onFetchUsers(suggestingMembers);
            setCurrentMemberList(suggestingMembers);
        })
            .catch(function (error) {
            if (error) {
                logger.error('SuggestedMentionList: Fetching member list failed', error);
            }
        });
    }, [
        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
        // We have to be specific like this or React would not recognize the changes in instances.
        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members.map(function (member) { return member.nickname; }).join(),
        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members.map(function (member) { return member.isActive; }).join(),
        searchString,
        maxSuggestionCount,
        currentUserId,
        currentMemberList.length,
        lastSearchString,
    ]);
    if (!ableAddMention && currentMemberList.length === 0) {
        return null;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-mention-suggest-list ".concat(className), key: "sendbird-mention-suggest-list", ref: scrollRef },
        ableAddMention
            && (currentMemberList === null || currentMemberList === void 0 ? void 0 : currentMemberList.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedUserMentionItem, { key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(), member: member, isFocused: (member === null || member === void 0 ? void 0 : member.userId) === (currentFocusedMember === null || currentFocusedMember === void 0 ? void 0 : currentFocusedMember.userId), parentScrollRef: scrollRef, onClick: function (_a) {
                    var member = _a.member;
                    onUserItemClick === null || onUserItemClick === void 0 ? void 0 : onUserItemClick(member);
                }, onMouseOver: function (_a) {
                    var member = _a.member;
                    setCurrentFocusedMember(member);
                }, renderUserMentionItem: renderUserMentionItem })); })),
        !ableAddMention && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-mention-suggest-list__notice-item" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-mention-suggest-list__notice-item__icon", type: IconTypes.INFO, fillColor: IconColors.ON_BACKGROUND_2, width: "20px", height: "20px" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-mention-suggest-list__notice-item__text", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.MENTION_COUNT__OVER_LIMIT.replace('%d', String(maxMentionCount)))))));
};


//# sourceMappingURL=bundle-gH-X0MYD.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-RuTR5KRM.js


















var useDidMountEffect = function (func, deps) {
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), didMount = _a[0], setDidmount = _a[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (didMount) {
            func();
        }
        else {
            setDidmount(true);
        }
    }, deps);
};

// TODO: Refactor this component, is too complex now
var MessageView = function (props) {
    var _a, _b;
    var 
    // MessageProps
    message = props.message, children = props.children, hasSeparator = props.hasSeparator, chainTop = props.chainTop, chainBottom = props.chainBottom, handleScroll = props.handleScroll, 
    // MessageViewProps
    channel = props.channel, emojiContainer = props.emojiContainer, editInputDisabled = props.editInputDisabled, shouldRenderSuggestedReplies = props.shouldRenderSuggestedReplies, isReactionEnabled = props.isReactionEnabled, replyType = props.replyType, threadReplySelectType = props.threadReplySelectType, nicknamesMap = props.nicknamesMap, scrollToMessage = props.scrollToMessage, toggleReaction = props.toggleReaction, setQuoteMessage = props.setQuoteMessage, onQuoteMessageClick = props.onQuoteMessageClick, onReplyInThreadClick = props.onReplyInThreadClick, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, sendUserMessage = props.sendUserMessage, updateUserMessage = props.updateUserMessage, resendMessage = props.resendMessage, deleteMessage = props.deleteMessage, setAnimatedMessageId = props.setAnimatedMessageId, animatedMessageId = props.animatedMessageId, onMessageAnimated = props.onMessageAnimated, _c = props.usedInLegacy, usedInLegacy = _c === void 0 ? true : _c;
    var _d = deleteNullish(props), renderUserMentionItem = _d.renderUserMentionItem, renderMessage = _d.renderMessage, _e = _d.renderMessageContent, renderMessageContent = _e === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageContent, __assign({}, props)); } : _e, _f = _d.renderSuggestedReplies, renderSuggestedReplies = _f === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedReplies, __assign({}, props)); } : _f, renderCustomSeparator = _d.renderCustomSeparator, renderEditInput = _d.renderEditInput, renderFileViewer = _d.renderFileViewer, renderRemoveMessageModal = _d.renderRemoveMessageModal;
    var _g = useLocalization(), dateLocale = _g.dateLocale, stringSet = _g.stringSet;
    var globalStore = useSendbirdStateContext();
    var _h = globalStore.config, userId = _h.userId, isOnline = _h.isOnline, userMention = _h.userMention, logger = _h.logger, groupChannel = _h.groupChannel;
    var maxUserMentionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || MAX_USER_MENTION_COUNT;
    var maxUserSuggestionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || MAX_USER_SUGGESTION_COUNT;
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showEdit = _j[0], setShowEdit = _j[1];
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showRemove = _k[0], setShowRemove = _k[1];
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showFileViewer = _l[0], setShowFileViewer = _l[1];
    var _m = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isAnimated = _m[0], setIsAnimated = _m[1];
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), mentionNickname = _o[0], setMentionNickname = _o[1];
    var _p = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUsers = _p[0], setMentionedUsers = _p[1];
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUserIds = _q[0], setMentionedUserIds = _q[1];
    var _r = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), messageInputEvent = _r[0], setMessageInputEvent = _r[1];
    var _s = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), selectedUser = _s[0], setSelectedUser = _s[1];
    var _t = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionSuggestedUsers = _t[0], setMentionSuggestedUsers = _t[1];
    var editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var messageScrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var displaySuggestedMentionList = isOnline
        && groupChannel.enableMention && mentionNickname.length > 0
        && !isDisabledBecauseFrozen(channel)
        && !isDisabledBecauseMuted(channel);
    var mentionNodes = useDirtyGetMentions({ ref: editMessageInputRef }, { logger: logger });
    var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < maxUserMentionCount;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setMentionedUsers(mentionedUsers.filter(function (_a) {
            var userId = _a.userId;
            var i = mentionedUserIds.indexOf(userId);
            if (i < 0) {
                return false;
            }
            else {
                mentionedUserIds.splice(i, 1);
                return true;
            }
        }));
    }, [mentionedUserIds]);
    // Side effect: scroll position update when showEdit is toggled or reactions updated
    useDidMountEffect(function () {
        handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();
    }, [showEdit, (_a = message === null || message === void 0 ? void 0 : message.reactions) === null || _a === void 0 ? void 0 : _a.length]);
    // Side effect: scroll position update when message updated
    useDidMountEffect(function () {
        handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);
    }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);
    // Side effect: scroll position update when suggested replies are rendered or hidden
    var prevShouldRenderSuggestedReplies = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(shouldRenderSuggestedReplies);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (prevShouldRenderSuggestedReplies.current !== shouldRenderSuggestedReplies) {
            handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();
        }
        else {
            prevShouldRenderSuggestedReplies.current = shouldRenderSuggestedReplies;
        }
    }, [shouldRenderSuggestedReplies]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        // Keep the scrollBottom value after fetching new message list (but GroupChannel module is not needed.)
        if (usedInLegacy)
            handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);
    }, []);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        var timeouts = [];
        if (animatedMessageId === message.messageId && (messageScrollRef === null || messageScrollRef === void 0 ? void 0 : messageScrollRef.current)) {
            timeouts.push(setTimeout(function () {
                setIsAnimated(true);
            }, 500));
            timeouts.push(setTimeout(function () {
                setAnimatedMessageId(null);
                onMessageAnimated === null || onMessageAnimated === void 0 ? void 0 : onMessageAnimated();
            }, 1600));
        }
        else {
            setIsAnimated(false);
        }
        return function () {
            timeouts.forEach(function (it) { return clearTimeout(it); });
        };
    }, [animatedMessageId, messageScrollRef.current, message.messageId]);
    var renderedCustomSeparator = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { var _a; return (_a = renderCustomSeparator === null || renderCustomSeparator === void 0 ? void 0 : renderCustomSeparator({ message: message })) !== null && _a !== void 0 ? _a : null; }, [message, renderCustomSeparator]);
    var renderChildren = function () {
        if (children) {
            return children;
        }
        if (renderMessage) {
            var messageProps = __assign(__assign({}, props), { renderMessage: undefined });
            return renderMessage(messageProps);
        }
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            renderMessageContent({
                className: 'sendbird-message-hoc__message-content',
                userId: userId,
                scrollToMessage: scrollToMessage,
                channel: channel,
                message: message,
                disabled: !isOnline,
                chainTop: chainTop,
                chainBottom: chainBottom,
                isReactionEnabled: isReactionEnabled,
                replyType: replyType,
                threadReplySelectType: threadReplySelectType,
                nicknamesMap: nicknamesMap,
                emojiContainer: emojiContainer,
                showEdit: setShowEdit,
                showRemove: setShowRemove,
                showFileViewer: setShowFileViewer,
                resendMessage: resendMessage,
                deleteMessage: deleteMessage,
                toggleReaction: toggleReaction,
                setQuoteMessage: setQuoteMessage,
                onReplyInThread: onReplyInThreadClick,
                onQuoteMessageClick: onQuoteMessageClick,
                onMessageHeightChange: handleScroll,
                onBeforeDownloadFileMessage: onBeforeDownloadFileMessage,
            }),
            shouldRenderSuggestedReplies && renderSuggestedReplies({
                replyOptions: getSuggestedReplies(message),
                onSendMessage: sendUserMessage,
                message: message,
                type: groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.suggestedRepliesDirection,
            }),
            showRemove && (renderRemoveMessageModal === null || renderRemoveMessageModal === void 0 ? void 0 : renderRemoveMessageModal({ message: message, onCancel: function () { return setShowRemove(false); } })),
            showFileViewer && renderFileViewer({ message: message, onCancel: function () { return setShowFileViewer(false); } })));
    };
    if (showEdit && ((_b = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _b === void 0 ? void 0 : _b.call(message))) {
        return ((renderEditInput === null || renderEditInput === void 0 ? void 0 : renderEditInput()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            displaySuggestedMentionList && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionListView, { currentChannel: channel, targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : undefined, renderUserMentionItem: renderUserMentionItem, onUserItemClick: function (user) {
                    if (user) {
                        setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));
                    }
                    setMentionNickname('');
                    setSelectedUser(user);
                    setMessageInputEvent(null);
                }, onFocusItemChange: function () {
                    setMessageInputEvent(null);
                }, onFetchUsers: function (users) {
                    setMentionSuggestedUsers(users);
                }, ableAddMention: ableMention, maxMentionCount: maxUserMentionCount, maxSuggestionCount: maxUserSuggestionCount })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { isEdit: true, channel: channel, disabled: editInputDisabled, ref: editMessageInputRef, mentionSelectedUser: selectedUser, isMentionEnabled: groupChannel.enableMention, message: message, onStartTyping: function () {
                    var _a;
                    (_a = channel === null || channel === void 0 ? void 0 : channel.startTyping) === null || _a === void 0 ? void 0 : _a.call(channel);
                }, onUpdateMessage: function (_a) {
                    var _b;
                    var messageId = _a.messageId, message = _a.message, mentionTemplate = _a.mentionTemplate;
                    updateUserMessage(messageId, {
                        message: message,
                        mentionedUsers: mentionedUsers,
                        mentionedMessageTemplate: mentionTemplate,
                    });
                    setShowEdit(false);
                    (_b = channel === null || channel === void 0 ? void 0 : channel.endTyping) === null || _b === void 0 ? void 0 : _b.call(channel);
                }, onCancelEdit: function () {
                    var _a;
                    setMentionNickname('');
                    setMentionedUsers([]);
                    setMentionedUserIds([]);
                    setMentionSuggestedUsers([]);
                    setShowEdit(false);
                    (_a = channel === null || channel === void 0 ? void 0 : channel.endTyping) === null || _a === void 0 ? void 0 : _a.call(channel);
                }, onUserMentioned: function (user) {
                    if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
                        setSelectedUser(null);
                        setMentionNickname('');
                    }
                }, onMentionStringChange: function (mentionText) {
                    setMentionNickname(mentionText);
                }, onMentionedUserIdsUpdated: function (userIds) {
                    setMentionedUserIds(userIds);
                }, onKeyDown: function (e) {
                    if (displaySuggestedMentionList
                        && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0
                        && ((e.key === MessageInputKeys.Enter && ableMention)
                            || e.key === MessageInputKeys.ArrowUp
                            || e.key === MessageInputKeys.ArrowDown)) {
                        setMessageInputEvent(e);
                        return true;
                    }
                    return false;
                } }))));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
            'sendbird-msg-hoc sendbird-msg--scroll-ref',
            isAnimated ? 'sendbird-msg-hoc__animated' : '',
        ]), style: children || renderMessage ? undefined : { marginBottom: '2px' }, "data-sb-message-id": message.messageId, "data-sb-created-at": message.createdAt, ref: messageScrollRef },
        hasSeparator
            && (renderedCustomSeparator || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, format(message.createdAt, stringSet.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR, {
                    locale: dateLocale,
                }))))),
        renderChildren()));
};


//# sourceMappingURL=bundle-RuTR5KRM.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CbFt9rKR.js









var FileViewerView = function (_a) {
    var message = _a.message, onCancel = _a.onCancel, deleteMessage = _a.deleteMessage, onDownloadClick = _a.onDownloadClick;
    var sender = message.sender, type = message.type, url = message.url, _b = message.name, name = _b === void 0 ? '' : _b, threadInfo = message.threadInfo;
    var profileUrl = sender.profileUrl, nickname = sender.nickname, userId = sender.userId;
    var config = useSendbirdStateContext().config;
    return Object(react_dom["createPortal"])(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_CbFt9rKR_FileViewerComponent, { profileUrl: profileUrl, nickname: nickname, type: type, url: url, name: name, onCancel: onCancel, onDelete: function () { return deleteMessage(message).then(function () { return onCancel(); }); }, isByMe: config.userId === userId, disableDelete: (threadInfo === null || threadInfo === void 0 ? void 0 : threadInfo.replyCount) ? threadInfo.replyCount > 0 : false, onDownloadClick: onDownloadClick }), document.getElementById(MODAL_ROOT));
};
var bundle_CbFt9rKR_FileViewerComponent = function (_a) {
    var 
    // sender
    profileUrl = _a.profileUrl, nickname = _a.nickname, 
    // file
    name = _a.name, type = _a.type, url = _a.url, 
    // others
    isByMe = _a.isByMe, onCancel = _a.onCancel, onDelete = _a.onDelete, disableDelete = _a.disableDelete, onDownloadClick = _a.onDownloadClick;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__left" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__left__avatar" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { height: "32px", width: "32px", src: profileUrl })),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-fileviewer__header__left__filename", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, name),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-fileviewer__header__left__sender-name", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, nickname)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right" },
                isSupportedFileView(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right__actions" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: "sendbird-fileviewer__header__right__actions__download", rel: "noopener noreferrer", href: url, target: "_blank", onClick: onDownloadClick },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DOWNLOAD, fillColor: IconColors.ON_BACKGROUND_1, height: "24px", width: "24px" })),
                    onDelete && isByMe && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right__actions__delete" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: disableDelete ? 'disabled' : '', type: IconTypes.DELETE, fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1, height: "24px", width: "24px", onClick: function () {
                                if (!disableDelete) {
                                    onDelete();
                                }
                            } }))))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__header__right__actions__close" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CLOSE, fillColor: IconColors.ON_BACKGROUND_1, height: "24px", width: "24px", onClick: onCancel })))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__content" },
            isVideo(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { controls: true, className: "sendbird-fileviewer__content__video" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", { src: url, type: type }))),
            isImage(type) && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", { src: url, alt: name, className: "sendbird-fileviewer__content__img" }),
            !isSupportedFileView(type) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-fileviewer__content__unsupported" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_1, color: LabelColors.ONBACKGROUND_1 }, "Unsupoprted message"))))));
};


//# sourceMappingURL=bundle-CbFt9rKR.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/FileViewer.js











































var FileViewer_FileViewer = function (props) {
    var _a = useGroupChannelContext(), deleteMessage = _a.deleteMessage, onBeforeDownloadFileMessage = _a.onBeforeDownloadFileMessage;
    var config = useSendbirdStateContext().config;
    var logger = config.logger;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewerView, __assign({}, props, { deleteMessage: deleteMessage, onDownloadClick: function (e) { return __awaiter(void 0, void 0, void 0, function () {
            var allowDownload, err_1;
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!onBeforeDownloadFileMessage)
                            return [2 /*return*/];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, onBeforeDownloadFileMessage({ message: props.message })];
                    case 2:
                        allowDownload = _c.sent();
                        if (!allowDownload) {
                            e.preventDefault();
                            (_a = logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'FileViewer: Not allowed to download.');
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _c.sent();
                        (_b = logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'FileViewer: Error occurred while determining download continuation:', err_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        }); } })));
};


//# sourceMappingURL=FileViewer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DvNDJy8Z.js


function getModalDeleteMessageTitle(stringSet, message) {
    return K(message)
        .when(isMultipleFilesMessage, function () {
        var filesCount = message.fileInfoList.length;
        return "Do you want to delete all ".concat(filesCount, " photos?");
    })
        .otherwise(function () {
        return stringSet.MODAL__DELETE_MESSAGE__TITLE;
    });
}


//# sourceMappingURL=bundle-DvNDJy8Z.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Dv6nIlPZ.js








var RemoveMessageModalView = function (props) {
    var _a;
    var _b = props.onSubmit, onSubmit = _b === void 0 ? function () {
        /* noop */
    } : _b, onCancel = props.onCancel, message = props.message, deleteMessage = props.deleteMessage;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { type: ButtonTypes.DANGER, disabled: ((_a = message === null || message === void 0 ? void 0 : message.threadInfo) === null || _a === void 0 ? void 0 : _a.replyCount) ? message.threadInfo.replyCount > 0 : undefined, onCancel: onCancel, onSubmit: function () {
            if (message.isUserMessage() || message.isFileMessage() || message.isMultipleFilesMessage()) {
                deleteMessage(message).then(function () {
                    // For other status such as PENDING, SCHEDULED, and CANCELED,
                    // invalid parameters error is thrown so nothing happens.
                    onSubmit();
                    onCancel();
                });
            }
        }, submitText: stringSet.MESSAGE_MENU__DELETE, titleText: getModalDeleteMessageTitle(stringSet, message) }));
};


//# sourceMappingURL=bundle-Dv6nIlPZ.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/RemoveMessageModal.js









































var RemoveMessageModal = function (props) {
    var deleteMessage = useGroupChannelContext().deleteMessage;
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModalView, __assign({}, props, { deleteMessage: deleteMessage }));
};


//# sourceMappingURL=RemoveMessageModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/Message.js




















































































































var Message = function (props) {
    var _a = useSendbirdStateContext(), config = _a.config, emojiManager = _a.emojiManager;
    var _b = useGroupChannelContext(), loading = _b.loading, currentChannel = _b.currentChannel, animatedMessageId = _b.animatedMessageId, setAnimatedMessageId = _b.setAnimatedMessageId, scrollToMessage = _b.scrollToMessage, replyType = _b.replyType, threadReplySelectType = _b.threadReplySelectType, isReactionEnabled = _b.isReactionEnabled, toggleReaction = _b.toggleReaction, nicknamesMap = _b.nicknamesMap, setQuoteMessage = _b.setQuoteMessage, renderUserMentionItem = _b.renderUserMentionItem, onQuoteMessageClick = _b.onQuoteMessageClick, onReplyInThreadClick = _b.onReplyInThreadClick, onMessageAnimated = _b.onMessageAnimated, onBeforeDownloadFileMessage = _b.onBeforeDownloadFileMessage, messages = _b.messages, updateUserMessage = _b.updateUserMessage, sendUserMessage = _b.sendUserMessage, resendMessage = _b.resendMessage, deleteMessage = _b.deleteMessage;
    var message = props.message;
    var initialized = !loading && Boolean(currentChannel);
    var shouldRenderSuggestedReplies = useIIFE(function () {
        var _a;
        var _b = config.groupChannel, enableSuggestedReplies = _b.enableSuggestedReplies, showSuggestedRepliesFor = _b.showSuggestedRepliesFor;
        var lastMessageInView = messages[messages.length - 1];
        var hasUnsentMessage = bundle_janisM9b_isSendableMessage(lastMessageInView) && lastMessageInView.sendingStatus !== 'succeeded';
        var showSuggestedReplies = showSuggestedRepliesFor === 'all_messages' ? true : message.messageId === ((_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.lastMessage) === null || _a === void 0 ? void 0 : _a.messageId);
        return enableSuggestedReplies && getSuggestedReplies(message).length > 0 && !hasUnsentMessage && showSuggestedReplies;
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageView, __assign({}, props, { channel: currentChannel, emojiContainer: emojiManager.emojiContainer, editInputDisabled: !initialized
            || isDisabledBecauseFrozen(currentChannel !== null && currentChannel !== void 0 ? currentChannel : undefined)
            || isDisabledBecauseMuted(currentChannel !== null && currentChannel !== void 0 ? currentChannel : undefined)
            || !config.isOnline, shouldRenderSuggestedReplies: shouldRenderSuggestedReplies, isReactionEnabled: isReactionEnabled !== null && isReactionEnabled !== void 0 ? isReactionEnabled : false, replyType: replyType !== null && replyType !== void 0 ? replyType : 'NONE', threadReplySelectType: threadReplySelectType !== null && threadReplySelectType !== void 0 ? threadReplySelectType : ThreadReplySelectType.PARENT, nicknamesMap: nicknamesMap, renderUserMentionItem: renderUserMentionItem, scrollToMessage: scrollToMessage, toggleReaction: toggleReaction, setQuoteMessage: setQuoteMessage, onQuoteMessageClick: onQuoteMessageClick, onReplyInThreadClick: onReplyInThreadClick, sendUserMessage: sendUserMessage, updateUserMessage: updateUserMessage, resendMessage: resendMessage, deleteMessage: deleteMessage, animatedMessageId: animatedMessageId, setAnimatedMessageId: setAnimatedMessageId, onMessageAnimated: onMessageAnimated, renderFileViewer: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewer_FileViewer, __assign({}, props)); }, renderRemoveMessageModal: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModal, __assign({}, props)); }, usedInLegacy: false, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage })));
};


//# sourceMappingURL=Message.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/utils/compareMessagesForGrouping.js







/**
 * exported, should be backward compatible
 * @returns [chainTop: `boolean`, chainBottom: `boolean`]
 */
var compareMessagesForGrouping = function (prevMessage, currMessage, nextMessage, currentChannel, replyType) {
    if (!currentChannel || currentChannel.channelType !== 'group') {
        return [
            isSameGroup(prevMessage, currMessage),
            isSameGroup(currMessage, nextMessage),
        ];
    }
    if (replyType === 'THREAD' && (currMessage === null || currMessage === void 0 ? void 0 : currMessage.threadInfo)) {
        return [false, false];
    }
    var sendingStatus = (currMessage === null || currMessage === void 0 ? void 0 : currMessage.sendingStatus) || '';
    var isAcceptable = sendingStatus !== 'pending' && sendingStatus !== 'failed';
    return [
        isSameGroup(prevMessage, currMessage, currentChannel) && isAcceptable,
        isSameGroup(currMessage, nextMessage, currentChannel) && isAcceptable,
    ];
};
var getMessageCreatedAt = function (message) { return format(message.createdAt, 'p'); };
var isSameGroup = function (message, comparingMessage, currentChannel) {
    var _a, _b;
    if (!(message
        && comparingMessage
        && message.messageType
        && message.messageType !== 'admin'
        && comparingMessage.messageType
        && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.messageType) !== 'admin'
        && 'sender' in message
        && 'sender' in comparingMessage
        && message.createdAt
        && comparingMessage.createdAt
        && message.sender.userId
        && comparingMessage.sender.userId)) {
        return false;
    }
    return ((message === null || message === void 0 ? void 0 : message.sendingStatus) === (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sendingStatus)
        && ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) === ((_b = comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sender) === null || _b === void 0 ? void 0 : _b.userId)
        && getMessageCreatedAt(message) === getMessageCreatedAt(comparingMessage)) && (currentChannel ? isReadMessage(currentChannel, message) === isReadMessage(currentChannel, comparingMessage) : true);
};
var compareMessagesForGrouping_messages = {
    compareMessagesForGrouping: compareMessagesForGrouping,
    getMessageCreatedAt: getMessageCreatedAt,
    isSameGroup: isSameGroup,
};


//# sourceMappingURL=compareMessagesForGrouping.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/utils/getMessagePartsInfo.js









/**
 * exported, should be backward compatible
 */
var getMessagePartsInfo = function (_a) {
    var _b = _a.allMessages, allMessages = _b === void 0 ? [] : _b, _c = _a.isMessageGroupingEnabled, isMessageGroupingEnabled = _c === void 0 ? true : _c, _d = _a.currentIndex, currentIndex = _d === void 0 ? 0 : _d, currentMessage = _a.currentMessage, _e = _a.currentChannel, currentChannel = _e === void 0 ? null : _e, _f = _a.replyType, replyType = _f === void 0 ? '' : _f;
    var previousMessage = allMessages[currentIndex - 1];
    var nextMessage = allMessages[currentIndex + 1];
    var _g = isMessageGroupingEnabled
        ? compareMessagesForGrouping(previousMessage, currentMessage, nextMessage, currentChannel, replyType)
        : [false, false], chainTop = _g[0], chainBottom = _g[1];
    var previousMessageCreatedAt = previousMessage === null || previousMessage === void 0 ? void 0 : previousMessage.createdAt;
    var currentCreatedAt = currentMessage.createdAt;
    // NOTE: for pending/failed messages
    var isLocalMessage = 'sendingStatus' in currentMessage && (currentMessage.sendingStatus !== 'succeeded');
    // https://stackoverflow.com/a/41855608
    var hasSeparator = isLocalMessage ? false : !(previousMessageCreatedAt && (isSameDay(currentCreatedAt, previousMessageCreatedAt)));
    return {
        chainTop: chainTop,
        chainBottom: chainBottom,
        hasSeparator: hasSeparator,
    };
};


//# sourceMappingURL=getMessagePartsInfo.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/UnreadCount.js










var UnreadCount = function (_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, _c = _a.count, count = _c === void 0 ? 0 : _c, _d = _a.time, time = _d === void 0 ? '' : _d, onClick = _a.onClick, lastReadAt = _a.lastReadAt;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext), stringSet = _e.stringSet, dateLocale = _e.dateLocale;
    var unreadSince = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a, _b;
        // TODO: Remove this on v4
        if (stringSet.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON !== 'on') {
            var timeArray = ((_b = (_a = time === null || time === void 0 ? void 0 : time.toString) === null || _a === void 0 ? void 0 : _a.call(time)) === null || _b === void 0 ? void 0 : _b.split(' ')) || [];
            timeArray === null || timeArray === void 0 ? void 0 : timeArray.splice(-2, 0, stringSet.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON);
            return timeArray.join(' ');
        }
        else if (lastReadAt) {
            return format(lastReadAt, stringSet.DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE, { locale: dateLocale });
        }
    }, [time, lastReadAt]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames(count < 1 ? 'sendbird-notification--hide' : 'sendbird-notification', className), onClick: onClick },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-notification__text", color: LabelColors.ONCONTENT_1, type: LabelTypography.CAPTION_2 }, "".concat(count, " "),
            stringSet.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE, " ".concat(unreadSince)),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.CONTENT })));
};


//# sourceMappingURL=UnreadCount.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/FrozenNotification.js








var FrozenNotification = function (_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-notification', 'sendbird-notification--frozen', className) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-notification__text", type: LabelTypography.CAPTION_2 }, stringSet.CHANNEL_FROZEN)));
};


//# sourceMappingURL=FrozenNotification.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TypingIndicatorBubble.js








var TypingDots = function () {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'typing-dots-container' },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", null),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", null),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", null)));
};

var AVATAR_BORDER_SIZE = 2;
var AVATAR_DIAMETER_WITHOUT_BORDER = 28;
var AVATAR_DIAMETER = AVATAR_DIAMETER_WITHOUT_BORDER + (AVATAR_BORDER_SIZE * 2);
var LEFT_GAP = 24;
var MAX_PROFILES_COUNT = 3;
var LEFT_FOR_BORDER = AVATAR_BORDER_SIZE;
var AvatarStack = function (props) {
    var sources = props.sources, max = props.max;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        " ",
        sources.slice(0, max).map(function (src, index) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: 'sendbird-message-content__left__avatar multiple', src: src || '', key: "avatar_stack_item_".concat(src), 
            // TODO: Divide getting profileUrl logic to utils
            width: "".concat(AVATAR_DIAMETER_WITHOUT_BORDER, "px"), height: "".concat(AVATAR_DIAMETER_WITHOUT_BORDER, "px"), zIndex: index, left: "".concat(index * LEFT_GAP - LEFT_FOR_BORDER, "px") })); }),
        " "));
};
var TypingIndicatorBubbleAvatar = function (props) {
    var typingMembers = props.typingMembers;
    var membersCount = typingMembers.length;
    var displayCount = Math.min(membersCount, 4);
    var hiddenCount = membersCount - MAX_PROFILES_COUNT;
    var superImposedWidth = ((displayCount - 1) * (AVATAR_DIAMETER - LEFT_GAP));
    var rightPaddingSize = 12;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-content__left incoming', style: {
            minWidth: (displayCount * AVATAR_DIAMETER) - superImposedWidth + rightPaddingSize,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AvatarStack, { sources: typingMembers.map(function (member) { return member.profileUrl; }), max: MAX_PROFILES_COUNT }),
        hiddenCount > 0
            ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: 'sendbird-message-content__left__avatar multiple', 
                // TODO: Divide getting profileUrl logic to utils
                width: "".concat(AVATAR_DIAMETER_WITHOUT_BORDER, "px"), height: "".concat(AVATAR_DIAMETER_WITHOUT_BORDER, "px"), zIndex: MAX_PROFILES_COUNT, left: "".concat(MAX_PROFILES_COUNT * LEFT_GAP, "px"), customDefaultComponent: function (_a) {
                    var width = _a.width, height = _a.height;
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AvatarDefault, { width: width, height: height, text: "+".concat(hiddenCount) }));
                } })
            : null));
};
var TypingIndicatorBubble = function (props) {
    var typingMembers = props.typingMembers, handleScroll = props.handleScroll;
    if (typingMembers.length === 0)
        return null;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        // Keep the scrollBottom value after fetching new message list
        handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);
    }, []);
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-content incoming', style: { marginBottom: '2px' } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorBubbleAvatar, { typingMembers: typingMembers }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-content__middle' },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingDots, null)));
};


//# sourceMappingURL=TypingIndicatorBubble.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/MessageList.js



























































































































var MessageList = function (props) {
    var _a, _b, _c, _d, _e;
    var _f = props.className, className = _f === void 0 ? '' : _f;
    var _g = deleteNullish(props), _h = _g.renderMessage, renderMessage = _h === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Message, __assign({}, props)); } : _h, renderMessageContent = _g.renderMessageContent, renderSuggestedReplies = _g.renderSuggestedReplies, renderCustomSeparator = _g.renderCustomSeparator, _j = _g.renderPlaceholderLoader, renderPlaceholderLoader = _j === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING }); } : _j, _k = _g.renderPlaceholderEmpty, renderPlaceholderEmpty = _k === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-conversation__no-messages", type: PlaceHolderTypes.NO_MESSAGES }); } : _k, _l = _g.renderFrozenNotification, renderFrozenNotification = _l === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FrozenNotification, { className: "sendbird-conversation__messages__notification" }); } : _l;
    var _m = useGroupChannelContext(), channelUrl = _m.channelUrl, hasNext = _m.hasNext, loading = _m.loading, messages = _m.messages, newMessages = _m.newMessages, scrollToBottom = _m.scrollToBottom, isScrollBottomReached = _m.isScrollBottomReached, isMessageGroupingEnabled = _m.isMessageGroupingEnabled, scrollRef = _m.scrollRef, scrollDistanceFromBottomRef = _m.scrollDistanceFromBottomRef, currentChannel = _m.currentChannel, replyType = _m.replyType, scrollPubSub = _m.scrollPubSub;
    var store = useSendbirdStateContext();
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(), unreadSinceDate = _o[0], setUnreadSinceDate = _o[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (isScrollBottomReached) {
            setUnreadSinceDate(undefined);
        }
        else {
            setUnreadSinceDate(new Date());
        }
    }, [isScrollBottomReached]);
    /**
     * 1. Move the message list scroll
     *    when each message's height is changed by `reactions` OR `showEdit`
     * 2. Keep the scrollBottom value after fetching new message list
     */
    var onMessageContentSizeChanged = function (isBottomMessageAffected) {
        if (isBottomMessageAffected === void 0) { isBottomMessageAffected = false; }
        var elem = scrollRef.current;
        if (elem) {
            var latestDistance = scrollDistanceFromBottomRef.current;
            var currentDistance = elem.scrollHeight - elem.scrollTop - elem.offsetHeight;
            if (latestDistance < currentDistance && (!isBottomMessageAffected || latestDistance < bundle_DhBuJR0w["f" /* S */])) {
                var diff = currentDistance - latestDistance;
                // Move the scroll as much as the height of the message has changed
                scrollPubSub.publish('scroll', { top: elem.scrollTop + diff, lazy: false, animated: false });
            }
        }
    };
    var renderer = {
        frozenNotification: function () {
            if (!currentChannel || !currentChannel.isFrozen)
                return null;
            return renderFrozenNotification();
        },
        unreadMessagesNotification: function () {
            if (isScrollBottomReached || !unreadSinceDate)
                return null;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnreadCount, { className: "sendbird-conversation__messages__notification", count: newMessages.length, lastReadAt: unreadSinceDate, onClick: function () { return scrollToBottom(); } }));
        },
        scrollToBottomButton: function () {
            if (!hasNext() && isScrollBottomReached)
                return null;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__scroll-bottom-button", onClick: function () { return scrollToBottom(); }, onKeyDown: function () { return scrollToBottom(); }, tabIndex: 0, role: "button" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.PRIMARY })));
        },
    };
    if (loading) {
        return renderPlaceholderLoader();
    }
    if (messages.length === 0) {
        return renderPlaceholderEmpty();
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__messages ".concat(className) },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__scroll-container" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__padding" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: scrollRef, className: "sendbird-conversation__messages-padding" },
                    messages.map(function (message, idx) {
                        var _a = getMessagePartsInfo({
                            allMessages: messages,
                            replyType: replyType !== null && replyType !== void 0 ? replyType : 'NONE',
                            isMessageGroupingEnabled: isMessageGroupingEnabled !== null && isMessageGroupingEnabled !== void 0 ? isMessageGroupingEnabled : false,
                            currentIndex: idx,
                            currentMessage: message,
                            currentChannel: currentChannel,
                        }), chainTop = _a.chainTop, chainBottom = _a.chainBottom, hasSeparator = _a.hasSeparator;
                        var isOutgoingMessage = bundle_janisM9b_isSendableMessage(message) && message.sender.userId === store.config.userId;
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: message, key: getComponentKeyFromMessage(message), isByMe: isOutgoingMessage }, renderMessage({
                            handleScroll: onMessageContentSizeChanged,
                            message: message,
                            hasSeparator: hasSeparator,
                            chainTop: chainTop,
                            chainBottom: chainBottom,
                            renderMessageContent: renderMessageContent,
                            renderSuggestedReplies: renderSuggestedReplies,
                            renderCustomSeparator: renderCustomSeparator,
                        })));
                    }),
                    !hasNext()
                        && ((_b = (_a = store === null || store === void 0 ? void 0 : store.config) === null || _a === void 0 ? void 0 : _a.groupChannel) === null || _b === void 0 ? void 0 : _b.enableTypingIndicator)
                        && ((_e = (_d = (_c = store === null || store === void 0 ? void 0 : store.config) === null || _c === void 0 ? void 0 : _c.groupChannel) === null || _d === void 0 ? void 0 : _d.typingIndicatorTypes) === null || _e === void 0 ? void 0 : _e.has(TypingIndicatorType.Bubble)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorBubbleWrapper, { channelUrl: channelUrl, handleScroll: onMessageContentSizeChanged })))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, renderer.frozenNotification()),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, renderer.unreadMessagesNotification()),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, renderer.scrollToBottomButton()))));
};
var TypingIndicatorBubbleWrapper = function (props) {
    var stores = useSendbirdStateContext().stores;
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), typingMembers = _a[0], setTypingMembers = _a[1];
    useGroupChannelHandler(stores.sdkStore.sdk, {
        onTypingStatusUpdated: function (channel) {
            if (channel.url === props.channelUrl) {
                setTypingMembers(channel.getTypingUsers());
            }
        },
    });
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorBubble, { typingMembers: typingMembers, handleScroll: props.handleScroll });
};


//# sourceMappingURL=MessageList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/SuggestedMentionList.js


















var SuggestedMentionList = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionListView, __assign({}, props)));
};


//# sourceMappingURL=SuggestedMentionList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/QuoteMessageInput.js














var componentClassname = 'sendbird-quote_message_input__avatar';
function QuoteMessageThumbnail(_a) {
    var _b;
    var message = _a.message;
    if (!isFileMessage(message) && !isMultipleFilesMessage(message) || isVoiceMessage(message)) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
    }
    var thumbnailUrl = getMessageFirstFileThumbnailUrl(message);
    if (!thumbnailUrl) {
        if (isImageMessage(message) || isVideoMessage(message)) {
            thumbnailUrl = getMessageFirstFileUrl(message);
        }
        else if (isMultipleFilesMessage(message) && isImageFileInfo((_b = message.fileInfoList) === null || _b === void 0 ? void 0 : _b[0])) {
            thumbnailUrl = message.fileInfoList[0].url;
        }
    }
    if (isVideoMessage(message) && thumbnailUrl) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: componentClassname },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { style: {
                    width: '44px',
                    height: '44px',
                }, src: thumbnailUrl })));
    }
    else if ((isThumbnailMessage(message) || isMultipleFilesMessage(message)) && thumbnailUrl) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: componentClassname, url: thumbnailUrl, alt: getMessageFirstFileType(message), width: "44px", height: "44px", fixedSize: true }));
    }
    else if (isAudioMessage(message)) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: componentClassname },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.FILE_AUDIO, fillColor: IconColors.ON_BACKGROUND_2, width: "24px", height: "24px" })));
    }
    else {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: componentClassname },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.FILE_DOCUMENT, fillColor: IconColors.ON_BACKGROUND_2, width: "24px", height: "24px" })));
    }
}

function QuoteMessageInput(_a) {
    var className = _a.className, replyingMessage = _a.replyingMessage, onClose = _a.onClose;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var fileMessage = replyingMessage;
    var sender = replyingMessage === null || replyingMessage === void 0 ? void 0 : replyingMessage.sender;
    var displayFileIcon = (isFileMessage(replyingMessage) || isMultipleFilesMessage(replyingMessage))
        && !isVoiceMessage(replyingMessage);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-quote_message_input', className !== null && className !== void 0 ? className : '']) },
        displayFileIcon && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(QuoteMessageThumbnail, { message: fileMessage })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-quote_message_input__body", style: {
                width: "calc(100% - ".concat(displayFileIcon ? '164px' : '120px', ")"),
                left: displayFileIcon ? '92px' : '40px',
            } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote_message_input__body__sender-name", type: LabelTypography.CAPTION_1, color: LabelColors.ONBACKGROUND_1 }, "".concat(stringSet.QUOTE_MESSAGE_INPUT__REPLY_TO, " ").concat((sender && sender.nickname) ? sender.nickname : stringSet.NO_NAME)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-quote_message_input__body__message-content", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 },
                isImageMessage(fileMessage) && !isGifMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,
                isVideoMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,
                isGifMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,
                isUserMessage(replyingMessage) && replyingMessage.message,
                getUIKitMessageType(replyingMessage) === UIKitMessageTypes.FILE && getMessageFirstFileName(fileMessage),
                isMultipleFilesMessage(replyingMessage)
                    && "".concat(fileMessage.fileInfoList.length, " Photos"),
                isVoiceMessage(replyingMessage) && stringSet.VOICE_MESSAGE)),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-quote_message_input__close-button", type: IconTypes.CLOSE, fillColor: IconColors.ON_BACKGROUND_2, width: "24px", height: "24px", onClick: function () { return onClose === null || onClose === void 0 ? void 0 : onClose(replyingMessage); } })));
}


//# sourceMappingURL=QuoteMessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/VoiceRecorder/useVoiceRecorder.js



























// export interface UseVoiceRecorderProps extends VoiceRecorderEventHandler {
//   /**
//    * onRecordingStarted
//    * onRecordingEnded
//    */
// }
/* eslint-disable no-redeclare */
var VoiceRecorderStatus = {
    PREPARING: 'PREPARING',
    READY_TO_RECORD: 'READY_TO_RECORD',
    RECORDING: 'RECORDING',
    COMPLETED: 'COMPLETED',
};
var useVoiceRecorder = function (_a) {
    var _b = _a.onRecordingStarted, onRecordingStarted = _b === void 0 ? noop : _b, _c = _a.onRecordingEnded, onRecordingEnded = _c === void 0 ? noop : _c;
    var config = useSendbirdStateContext().config;
    var voiceRecord = config.voiceRecord;
    var maxRecordingTime = voiceRecord.maxRecordingTime;
    var voiceRecorder = useVoiceRecorderContext();
    var isRecordable = voiceRecorder.isRecordable;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), recordedFile = _d[0], setRecordedFile = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(VoiceRecorderStatus.PREPARING), recordingStatus = _e[0], setRecordingStatus = _e[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (isRecordable && recordingStatus === VoiceRecorderStatus.PREPARING) {
            setRecordingStatus(VoiceRecorderStatus.READY_TO_RECORD);
        }
    }, [isRecordable]);
    var start = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        voiceRecorder === null || voiceRecorder === void 0 ? void 0 : voiceRecorder.start({
            onRecordingStarted: function () {
                setRecordingStatus(VoiceRecorderStatus.RECORDING);
                onRecordingStarted();
                startTimer();
            },
            onRecordingEnded: function (audioFile) {
                setRecordingStatus(VoiceRecorderStatus.COMPLETED);
                onRecordingEnded(audioFile);
                setRecordedFile(audioFile);
                stopTimer();
            },
        });
    }, [onRecordingStarted, onRecordingEnded]);
    var stop = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        voiceRecorder === null || voiceRecorder === void 0 ? void 0 : voiceRecorder.stop();
        stopTimer();
    }, [voiceRecorder]);
    var cancel = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        stop();
        setRecordedFile(null);
    }, [voiceRecorder]);
    // Timer
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), recordingTime = _f[0], setRecordingTime = _f[1];
    var timer = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    function startTimer() {
        stopTimer();
        setRecordingTime(0);
        timer.current = setInterval(function () {
            setRecordingTime(function (prevTime) {
                var newTime = prevTime + 100;
                if (newTime > maxRecordingTime) {
                    stopTimer();
                }
                return newTime;
            });
        }, 100);
    }
    function stopTimer() {
        if (timer.current) {
            clearInterval(timer.current);
            timer.current = null;
        }
    }
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (recordingTime > maxRecordingTime) {
            stop();
        }
    }, [recordingTime, maxRecordingTime, stop]);
    return ({
        start: start,
        stop: stop,
        cancel: cancel,
        recordingStatus: recordingStatus,
        recordingTime: recordingTime,
        recordedFile: recordedFile,
        recordingLimit: maxRecordingTime,
    });
};


//# sourceMappingURL=useVoiceRecorder.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-C093wLqR.js










/* eslint-disable no-redeclare */
var VoiceMessageInputStatus = {
    READY_TO_RECORD: 'READY_TO_RECORD',
    RECORDING: 'RECORDING',
    READY_TO_PLAY: 'READY_TO_PLAY',
    PLAYING: 'PLAYING',
};

var ControlerIcon = function (_a) {
    var inputState = _a.inputState;
    switch (inputState) {
        case VoiceMessageInputStatus.READY_TO_RECORD: {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-controler-icon record-icon" }));
        }
        case VoiceMessageInputStatus.RECORDING: {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-controler-icon stop-icon" }));
        }
        case VoiceMessageInputStatus.READY_TO_PLAY: {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-controler-icon play-icon", width: "20px", height: "20px", type: IconTypes.PLAY, fillColor: IconColors.ON_BACKGROUND_1 }));
        }
        case VoiceMessageInputStatus.PLAYING: {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-controler-icon pause-icon" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-controler-icon pause-icon-inner" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-controler-icon pause-icon-inner" })));
        }
        default:
            return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
    }
};

var VoiceMessageInput = function (_a) {
    var _b = _a.minRecordTime, minRecordTime = _b === void 0 ? bundle_DhBuJR0w["l" /* e */] : _b, maximumValue = _a.maximumValue, _c = _a.currentValue, currentValue = _c === void 0 ? 0 : _c, currentType = _a.currentType, onCancelClick = _a.onCancelClick, onControlClick = _a.onControlClick, onSubmitClick = _a.onSubmitClick, renderCancelButton = _a.renderCancelButton, renderControlButton = _a.renderControlButton, renderSubmitButton = _a.renderSubmitButton;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), lastClickTime = _d[0], setLastClickTime = _d[1];
    var isReadyToRecord = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return currentType === VoiceMessageInputStatus.READY_TO_RECORD; }, [currentType]);
    var isRecording = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return currentType === VoiceMessageInputStatus.RECORDING; }, [currentType]);
    var isSendButtonDisabled = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (currentType === VoiceMessageInputStatus.READY_TO_RECORD
            || currentType === VoiceMessageInputStatus.RECORDING) {
            return minRecordTime > currentValue;
        }
        return false;
    }, [currentType, minRecordTime, currentValue]);
    var isPlayMode = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return (currentType === VoiceMessageInputStatus.READY_TO_PLAY
            || currentType === VoiceMessageInputStatus.PLAYING);
    }, [currentType]);
    var stringSet = useLocalization().stringSet;
    var handleOnCancelClick = function () {
        var currentTime = Date.now();
        if (currentTime - lastClickTime > bundle_DhBuJR0w["k" /* d */]) {
            onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();
            setLastClickTime(currentTime);
        }
    };
    var handleOnControlClick = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        var currentTime = Date.now();
        if (currentTime - lastClickTime > bundle_DhBuJR0w["k" /* d */]) {
            onControlClick === null || onControlClick === void 0 ? void 0 : onControlClick(currentType);
            setLastClickTime(currentTime);
        }
    }, [currentType]);
    var handleOnSubmitClick = function () {
        var currentTime = Date.now();
        if (currentTime - lastClickTime > bundle_DhBuJR0w["k" /* d */]) {
            if (!isSendButtonDisabled) {
                onSubmitClick === null || onSubmitClick === void 0 ? void 0 : onSubmitClick();
            }
            setLastClickTime(currentTime);
        }
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input__indicator" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input__indicator__progress-bar" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ProgressBar, { className: "sendbird-voice-message-input__indicator__progress-bar__bar", disabled: isReadyToRecord, maxSize: maximumValue, currentSize: currentValue })),
            (isRecording) ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input__indicator__on-rec" })) : null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaybackTime, { className: "sendbird-voice-message-input__indicator__playback-time", time: isPlayMode ? maximumValue - currentValue : currentValue, labelColor: isReadyToRecord ? LabelColors.ONBACKGROUND_4 : LabelColors.ONCONTENT_1 })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input__controler" },
            (renderCancelButton === null || renderCancelButton === void 0 ? void 0 : renderCancelButton()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "sendbird-voice-message-input__controler__cancel", onClick: handleOnCancelClick, disableUnderline: true },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet.BUTTON__CANCEL))),
            (renderControlButton === null || renderControlButton === void 0 ? void 0 : renderControlButton(currentType)) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input__controler__main", onClick: handleOnControlClick },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ControlerIcon, { inputState: currentType }))),
            (renderSubmitButton === null || renderSubmitButton === void 0 ? void 0 : renderSubmitButton()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-voice-message-input__controler__submit', isSendButtonDisabled && 'voice-message--disabled'), onClick: handleOnSubmitClick },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "19px", height: "19px", type: IconTypes.SEND, fillColor: isSendButtonDisabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT }))))));
};


//# sourceMappingURL=bundle-C093wLqR.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DYtgOX1c.js



var compressImage = function (_a) {
    var imageFile = _a.imageFile, compressionRate = _a.compressionRate, resizingWidth = _a.resizingWidth, resizingHeight = _a.resizingHeight, outputFormat = _a.outputFormat;
    var image = document.createElement('img');
    return new Promise(function (resolve, reject) {
        image.src = URL.createObjectURL(imageFile);
        image.onerror = reject;
        image.onload = function () {
            URL.revokeObjectURL(image.src);
            var canvas = document.createElement('canvas');
            var originWidth = image.width;
            var originHeight = image.height;
            var targetResizingWidth = (!resizingWidth || resizingWidth > originWidth) ? originWidth : resizingWidth;
            var targetResizingHeight = (!resizingHeight || resizingHeight > originHeight) ? originHeight : resizingHeight;
            var widthRatio = originWidth / targetResizingWidth;
            var heightRatio = originHeight / targetResizingHeight;
            /**
             * Set the target resizing values again with the calculated ratios
             * to use the impactful value, so the original images' ratio won't be broken.
             */
            if (widthRatio > heightRatio) {
                targetResizingHeight = originHeight / (resizingWidth ? widthRatio : 1);
            }
            else if (heightRatio > widthRatio) {
                targetResizingWidth = originWidth / (resizingHeight ? heightRatio : 1);
            }
            canvas.width = targetResizingWidth;
            canvas.height = targetResizingHeight;
            var ctx = canvas.getContext('2d');
            if (!ctx) {
                reject(new Error('Failed to get canvas 2d context'));
                return;
            }
            ctx.drawImage(image, 0, 0, targetResizingWidth, targetResizingHeight);
            // Change the file.name & file.type for converting file type
            var targetFileType = outputFormat === 'preserve' ? imageFile.type : "image/".concat(outputFormat);
            var targetSubtype = targetFileType.split('/').pop();
            var dotIndex = imageFile.name.lastIndexOf('.');
            // targetName = `fileName.targetSubtype`
            var targetName = "".concat(dotIndex === -1 ? imageFile.name : imageFile.name.substring(0, dotIndex), ".").concat(targetSubtype);
            ctx.canvas.toBlob(function (blob) {
                if (blob) {
                    var file = new File([blob], targetName, { type: targetFileType });
                    resolve(file);
                }
                else {
                    reject(new Error('Failed to compress image'));
                }
            }, targetFileType, compressionRate);
        };
    });
};
var compressImages = function (_a) { return __awaiter(void 0, [_a], void 0, function (_b) {
    var compressionRate, _c, outputFormat, resizingWidth, resizingHeight, result;
    var files = _b.files, logger = _b.logger, imageCompression = _b.imageCompression;
    return __generator(this, function (_d) {
        switch (_d.label) {
            case 0:
                compressionRate = imageCompression.compressionRate, _c = imageCompression.outputFormat, outputFormat = _c === void 0 ? 'preserve' : _c;
                resizingWidth = imageCompression.resizingWidth ? pxToNumber(imageCompression.resizingWidth) : undefined;
                resizingHeight = imageCompression.resizingHeight ? pxToNumber(imageCompression.resizingHeight) : undefined;
                result = {
                    failedIndexes: [],
                    compressedFiles: [],
                };
                if (!(Array.isArray(files) && files.length > 0)) {
                    logger === null || logger === void 0 ? void 0 : logger.warning('utils - compressImages: There are no files.', files);
                    return [2 /*return*/, result];
                }
                if (!compressionRate || compressionRate < 0 || 1 < compressionRate) {
                    logger === null || logger === void 0 ? void 0 : logger.warning('utils - compressImages: The compressionRate is not acceptable.', compressionRate);
                    return [2 /*return*/, result];
                }
                return [4 /*yield*/, Promise.all(files
                        .map(function (file, index) { return __awaiter(void 0, void 0, void 0, function () {
                        var compressedImage, err_1;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    if (!(file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg')) {
                                        logger === null || logger === void 0 ? void 0 : logger.warning('utils - compressImages: The fileType is not compressible.', { file: file, index: index });
                                        result.failedIndexes.push(index);
                                        result.compressedFiles.push(file);
                                        return [2 /*return*/];
                                    }
                                    _a.label = 1;
                                case 1:
                                    _a.trys.push([1, 3, , 4]);
                                    return [4 /*yield*/, compressImage({
                                            imageFile: file,
                                            compressionRate: compressionRate,
                                            resizingWidth: resizingWidth,
                                            resizingHeight: resizingHeight,
                                            outputFormat: outputFormat,
                                        })];
                                case 2:
                                    compressedImage = _a.sent();
                                    result.compressedFiles.push(compressedImage);
                                    return [3 /*break*/, 4];
                                case 3:
                                    err_1 = _a.sent();
                                    result.failedIndexes.push(index);
                                    logger === null || logger === void 0 ? void 0 : logger.warning('utils - compressImages: Failed to compress image file', { file: file, err: err_1 });
                                    return [3 /*break*/, 4];
                                case 4: return [2 /*return*/];
                            }
                        });
                    }); }))];
            case 1:
                _d.sent();
                logger === null || logger === void 0 ? void 0 : logger.info('utils - compressImages: Finished compressing images', result);
                return [2 /*return*/, result];
        }
    });
}); };


//# sourceMappingURL=bundle-DYtgOX1c.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Ct6xKrI3.js






















var VoiceMessageInputWrapper = function (_a) {
    var channel = _a.channel, onCancelClick = _a.onCancelClick, onSubmitClick = _a.onSubmitClick;
    var uuid = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(uuidv4()).current;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), audioFile = _b[0], setAudioFile = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(VoiceMessageInputStatus.READY_TO_RECORD), voiceInputState = _c[0], setVoiceInputState = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isSubmitted = _d[0], setSubmit = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isDisabled = _e[0], setDisabled = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _f[0], setShowModal = _f[1];
    var stringSet = useLocalization().stringSet;
    var config = useSendbirdStateContext().config;
    var _g = useVoiceRecorder({
        onRecordingStarted: function () {
            setVoiceInputState(VoiceMessageInputStatus.RECORDING);
        },
        onRecordingEnded: function (audioFile) {
            setAudioFile(audioFile);
        },
    }), start = _g.start, stop = _g.stop, cancel = _g.cancel, recordingTime = _g.recordingTime, recordingStatus = _g.recordingStatus, recordingLimit = _g.recordingLimit;
    var voicePlayer = useVoicePlayer({
        channelUrl: channel === null || channel === void 0 ? void 0 : channel.url,
        key: uuid,
        audioFile: audioFile !== null && audioFile !== void 0 ? audioFile : undefined,
    });
    var play = voicePlayer.play, pause = voicePlayer.pause, playbackTime = voicePlayer.playbackTime, playingStatus = voicePlayer.playingStatus;
    var stopVoicePlayer = voicePlayer.stop;
    // disabled state: muted & frozen
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (isDisabledBecauseFrozen(channel) || isDisabledBecauseMuted(channel)) {
            setDisabled(true);
        }
        else {
            setDisabled(false);
        }
    }, [channel === null || channel === void 0 ? void 0 : channel.myRole, channel === null || channel === void 0 ? void 0 : channel.isFrozen, channel === null || channel === void 0 ? void 0 : channel.myMutedState]);
    // call onSubmitClick when submit button is clicked and recorded audio file is created
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (isSubmitted && audioFile) {
            onSubmitClick === null || onSubmitClick === void 0 ? void 0 : onSubmitClick(audioFile, recordingTime);
            setSubmit(false);
            setAudioFile(null);
        }
    }, [isSubmitted, audioFile, recordingTime]);
    // operate which control button should be displayed
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (audioFile) {
            if (recordingTime < config.voiceRecord.minRecordingTime) {
                setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
                setAudioFile(null);
            }
            else if (playingStatus === VOICE_PLAYER_STATUS.PLAYING) {
                setVoiceInputState(VoiceMessageInputStatus.PLAYING);
            }
            else {
                setVoiceInputState(VoiceMessageInputStatus.READY_TO_PLAY);
            }
        }
    }, [audioFile, recordingTime, playingStatus]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input-wrapper" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageInput, { currentValue: recordingStatus === VoiceRecorderStatus.COMPLETED ? playbackTime : recordingTime, maximumValue: recordingStatus === VoiceRecorderStatus.COMPLETED ? recordingTime : recordingLimit, currentType: voiceInputState, onCancelClick: function () {
                onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();
                cancel();
                stopVoicePlayer();
            }, onSubmitClick: function () {
                if (isDisabled) {
                    setShowModal(true);
                    setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
                }
                else {
                    stop();
                    pause();
                    setSubmit(true);
                }
            }, onControlClick: function (type) {
                switch (type) {
                    case VoiceMessageInputStatus.READY_TO_RECORD: {
                        stopVoicePlayer();
                        start();
                        break;
                    }
                    case VoiceMessageInputStatus.RECORDING: {
                        if (recordingTime >= config.voiceRecord.minRecordingTime && !isDisabled) {
                            stop();
                        }
                        else if (isDisabled) {
                            cancel();
                            setShowModal(true);
                            setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
                        }
                        else {
                            cancel();
                            setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
                        }
                        break;
                    }
                    case VoiceMessageInputStatus.READY_TO_PLAY: {
                        play();
                        break;
                    }
                    case VoiceMessageInputStatus.PLAYING: {
                        pause();
                        break;
                    }
                }
            } }),
        showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { className: "sendbird-voice-message-input-wrapper-alert", titleText: isDisabledBecauseMuted(channel)
                ? stringSet.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED
                : stringSet.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN, hideFooter: true, isCloseOnClickOutside: true, onClose: function () {
                setShowModal(false);
                onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();
            } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-voice-message-input-wrapper-alert__body" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { className: "sendbird-voice-message-input-wrapper-alert__body__ok-button", type: ButtonTypes.PRIMARY, size: ButtonSizes.BIG, onClick: function () {
                        setShowModal(false);
                        onCancelClick === null || onCancelClick === void 0 ? void 0 : onCancelClick();
                    } }, stringSet.BUTTON__OK))))));
};

var useHandleUploadFiles = function (_a, _b) {
    var sendFileMessage = _a.sendFileMessage, sendMultipleFilesMessage = _a.sendMultipleFilesMessage, quoteMessage = _a.quoteMessage;
    var logger = _b.logger;
    var stringSet = useLocalization().stringSet;
    var config = useSendbirdStateContext().config;
    var imageCompression = config.imageCompression;
    var uikitUploadSizeLimit = config === null || config === void 0 ? void 0 : config.uikitUploadSizeLimit;
    var uikitMultipleFilesMessageLimit = config === null || config === void 0 ? void 0 : config.uikitMultipleFilesMessageLimit;
    var openModal = useGlobalModalContext().openModal;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (files) { return __awaiter(void 0, void 0, void 0, function () {
        var ONE_MiB, compressedFiles, sendingFiles, file, imageFiles_1, otherFiles_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (files.length === 0) {
                        logger.warning('Channel|useHandleUploadFiles: given file list is empty.', { files: files });
                        return [2 /*return*/];
                    }
                    if (files.length > uikitMultipleFilesMessageLimit) {
                        logger.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(uikitMultipleFilesMessageLimit));
                        openModal({
                            modalProps: {
                                titleText: stringSet.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace('%d', "".concat(uikitUploadSizeLimit)),
                                hideFooter: true,
                            },
                            childElement: function (_a) {
                                var closeModal = _a.closeModal;
                                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal }));
                            },
                        });
                        return [2 /*return*/];
                    }
                    // Validate file sizes
                    if (files.some(function (file) { return file.size > uikitUploadSizeLimit; })) {
                        // The default value of uikitUploadSizeLimit is 26MB
                        logger.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(uikitUploadSizeLimit));
                        ONE_MiB = 1024 * 1024;
                        openModal({
                            modalProps: {
                                titleText: stringSet.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace('%d', "".concat(Math.floor(uikitUploadSizeLimit / ONE_MiB))),
                                hideFooter: true,
                            },
                            childElement: function (_a) {
                                var closeModal = _a.closeModal;
                                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal }));
                            },
                        });
                        return [2 /*return*/];
                    }
                    return [4 /*yield*/, compressImages({
                            files: files,
                            imageCompression: imageCompression,
                            logger: logger,
                        })];
                case 1:
                    compressedFiles = (_a.sent()).compressedFiles;
                    sendingFiles = compressedFiles;
                    // Send File Message
                    if (sendingFiles.length === 1) {
                        logger.info('Channel|useHandleUploadFiles: sending one file.');
                        file = sendingFiles[0];
                        return [2 /*return*/, sendFileMessage({ file: file, parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId })];
                    }
                    else if (sendingFiles.length > 1) {
                        logger.info('Channel|useHandleUploadFiles: sending multiple files.');
                        imageFiles_1 = [];
                        otherFiles_1 = [];
                        sendingFiles.forEach(function (file) {
                            if (isImage(file.type)) {
                                imageFiles_1.push(file);
                            }
                            else {
                                otherFiles_1.push(file);
                            }
                        });
                        return [2 /*return*/, otherFiles_1.reduce(function (previousPromise, item) {
                                return previousPromise.then(function () {
                                    return sendFileMessage({ file: item, parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId });
                                });
                            }, (function () {
                                if (imageFiles_1.length === 0) {
                                    return Promise.resolve();
                                }
                                else if (imageFiles_1.length === 1) {
                                    return sendFileMessage({ file: imageFiles_1[0] });
                                }
                                else {
                                    return sendMultipleFilesMessage({
                                        fileInfoList: imageFiles_1.map(function (file) { return ({
                                            file: file,
                                            fileName: file.name,
                                            fileSize: file.size,
                                            mimeType: file.type,
                                        }); }),
                                        parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId,
                                    });
                                }
                            })())];
                    }
                    return [2 /*return*/];
            }
        });
    }); }, [sendFileMessage, sendMultipleFilesMessage, quoteMessage]);
};

var MessageInputWrapperView = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var _a;
    // Props
    var currentChannel = props.currentChannel, loading = props.loading, quoteMessage = props.quoteMessage, setQuoteMessage = props.setQuoteMessage, messageInputRef = props.messageInputRef, sendUserMessage = props.sendUserMessage, sendFileMessage = props.sendFileMessage, sendVoiceMessage = props.sendVoiceMessage, sendMultipleFilesMessage = props.sendMultipleFilesMessage, 
    // render
    renderUserMentionItem = props.renderUserMentionItem, renderFileUploadIcon = props.renderFileUploadIcon, renderVoiceMessageIcon = props.renderVoiceMessageIcon, renderSendMessageIcon = props.renderSendMessageIcon, acceptableMimeTypes = props.acceptableMimeTypes, disabled = props.disabled;
    var stringSet = useLocalization().stringSet;
    var isMobile = useMediaQueryContext().isMobile;
    var _b = useSendbirdStateContext(), stores = _b.stores, config = _b.config;
    var isOnline = config.isOnline, userMention = config.userMention, logger = config.logger, groupChannel = config.groupChannel;
    var sdk = stores.sdkStore.sdk;
    var maxMentionCount = userMention.maxMentionCount, maxSuggestionCount = userMention.maxSuggestionCount;
    var isBroadcast = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isBroadcast;
    var isOperator = (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === 'operator';
    var isMultipleFilesMessageEnabled = (_a = props.isMultipleFilesMessageEnabled) !== null && _a !== void 0 ? _a : config.isMultipleFilesMessageEnabled;
    var isMentionEnabled = groupChannel.enableMention;
    var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;
    // States
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), mentionNickname = _c[0], setMentionNickname = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUsers = _d[0], setMentionedUsers = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUserIds = _e[0], setMentionedUserIds = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), selectedUser = _f[0], setSelectedUser = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionSuggestedUsers = _g[0], setMentionSuggestedUsers = _g[1];
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), messageInputEvent = _h[0], setMessageInputEvent = _h[1];
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showVoiceMessageInput = _j[0], setShowVoiceMessageInput = _j[1];
    // Conditions
    var isMessageInputDisabled = loading
        || !currentChannel
        || isDisabledBecauseFrozen(currentChannel)
        || isDisabledBecauseMuted(currentChannel)
        || (!isOnline && !(sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled))
        || disabled;
    var showSuggestedMentionList = !isMessageInputDisabled
        && isMentionEnabled
        && mentionNickname.length > 0
        && !isBroadcast;
    var mentionNodes = useDirtyGetMentions({ ref: (ref || messageInputRef) }, { logger: logger });
    var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < maxMentionCount;
    // Operate states
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setMentionNickname('');
        setMentionedUsers([]);
        setMentionedUserIds([]);
        setSelectedUser(null);
        setMentionSuggestedUsers([]);
        setMessageInputEvent(null);
        setShowVoiceMessageInput(false);
    }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setMentionedUsers(mentionedUsers.filter(function (_a) {
            var userId = _a.userId;
            var i = mentionedUserIds.indexOf(userId);
            if (i < 0) {
                return false;
            }
            else {
                mentionedUserIds.splice(i, 1);
                return true;
            }
        }));
    }, [mentionedUserIds]);
    // Callbacks
    var handleUploadFiles = useHandleUploadFiles({
        sendFileMessage: sendFileMessage,
        sendMultipleFilesMessage: sendMultipleFilesMessage,
        quoteMessage: quoteMessage !== null && quoteMessage !== void 0 ? quoteMessage : undefined,
    }, { logger: logger });
    if (isBroadcast && !isOperator) {
        /* Only `Operator` can send messages in the Broadcast channel */
        return null;
    }
    // other conditions
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: showVoiceMessageInput ? 'sendbird-message-input-wrapper--voice-message' : 'sendbird-message-input-wrapper' },
        showSuggestedMentionList && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionList, { currentChannel: currentChannel, targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : undefined, renderUserMentionItem: renderUserMentionItem, onUserItemClick: function (user) {
                if (user) {
                    setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));
                }
                setMentionNickname('');
                setSelectedUser(user);
                setMessageInputEvent(null);
            }, onFocusItemChange: function () {
                setMessageInputEvent(null);
            }, onFetchUsers: function (users) {
                setMentionSuggestedUsers(users);
            }, ableAddMention: ableMention, maxMentionCount: maxMentionCount, maxSuggestionCount: maxSuggestionCount })),
        quoteMessage && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-input-wrapper__quote-message-input" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(QuoteMessageInput, { replyingMessage: quoteMessage, onClose: function () { return setQuoteMessage(null); } }))),
        showVoiceMessageInput ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageInputWrapper, { channel: currentChannel !== null && currentChannel !== void 0 ? currentChannel : undefined, onSubmitClick: function (recordedFile, duration) {
                sendVoiceMessage({ file: recordedFile, parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId }, duration);
                setQuoteMessage(null);
                setShowVoiceMessageInput(false);
            }, onCancelClick: function () {
                setShowVoiceMessageInput(false);
            } })) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { className: "sendbird-message-input-wrapper__message-input", channel: currentChannel, channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url, isMobile: isMobile, acceptableMimeTypes: acceptableMimeTypes, mentionSelectedUser: selectedUser, isMentionEnabled: isMentionEnabled, isVoiceMessageEnabled: isVoiceMessageEnabled, isSelectingMultipleFilesEnabled: isMultipleFilesMessageEnabled, onVoiceMessageIconClick: function () {
                setShowVoiceMessageInput(true);
            }, setMentionedUsers: setMentionedUsers, placeholder: (quoteMessage && stringSet.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER)
                || ((disabled || isDisabledBecauseFrozen(currentChannel)) && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED)
                || (isDisabledBecauseMuted(currentChannel) && (isMobile ? stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT : stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED))
                || undefined, ref: (ref || messageInputRef), disabled: isMessageInputDisabled, renderFileUploadIcon: renderFileUploadIcon, renderSendMessageIcon: renderSendMessageIcon, renderVoiceMessageIcon: renderVoiceMessageIcon, onStartTyping: function () {
                currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.startTyping();
            }, onSendMessage: function (_a) {
                var _b;
                var message = _a.message, mentionTemplate = _a.mentionTemplate;
                sendUserMessage({
                    message: message,
                    mentionedUsers: mentionedUsers,
                    mentionedMessageTemplate: mentionTemplate,
                    parentMessageId: quoteMessage === null || quoteMessage === void 0 ? void 0 : quoteMessage.messageId,
                });
                setMentionNickname('');
                setMentionedUsers([]);
                setQuoteMessage(null);
                (_b = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _b === void 0 ? void 0 : _b.call(currentChannel);
            }, onFileUpload: function (fileList) {
                handleUploadFiles(fileList);
                setQuoteMessage(null);
            }, onUserMentioned: function (user) {
                if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
                    setSelectedUser(null);
                    setMentionNickname('');
                }
            }, onMentionStringChange: function (mentionText) {
                setMentionNickname(mentionText);
            }, onMentionedUserIdsUpdated: function (userIds) {
                setMentionedUserIds(userIds);
            }, onKeyDown: function (e) {
                if (showSuggestedMentionList
                    && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0
                    && ((e.key === MessageInputKeys.Enter && ableMention)
                        || e.key === MessageInputKeys.ArrowUp
                        || e.key === MessageInputKeys.ArrowDown)) {
                    setMessageInputEvent(e);
                    return true;
                }
                return false;
            } }))));
});


//# sourceMappingURL=bundle-Ct6xKrI3.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/MessageInputWrapper.js


































































var MessageInputWrapper = function (props) {
    var _a;
    var config = useSendbirdStateContext().config;
    var context = useGroupChannelContext();
    var messages = context.messages, currentChannel = context.currentChannel;
    var lastMessage = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.lastMessage;
    var isLastMessageSuggestedRepliesEnabled = useIIFE(function () {
        var _a;
        if (!((_a = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _a === void 0 ? void 0 : _a.enableSuggestedReplies))
            return false;
        if (getSuggestedReplies(lastMessage !== null && lastMessage !== void 0 ? lastMessage : undefined).length === 0)
            return false;
        var lastMessageInContext = messages[messages.length - 1];
        if (bundle_janisM9b_isSendableMessage(lastMessageInContext) && lastMessageInContext.sendingStatus !== 'succeeded')
            return false;
        return true;
    });
    var disableMessageInput = props.disabled
        || isLastMessageSuggestedRepliesEnabled && !!((_a = lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.extendedMessagePayload) === null || _a === void 0 ? void 0 : _a['disable_chat_input']);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInputWrapperView, __assign({}, props, context, { disabled: disableMessageInput })));
};


//# sourceMappingURL=MessageInputWrapper.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel/components/GroupChannelUI.js












































































































































var GroupChannelUI = function (props) {
    var context = useGroupChannelContext();
    var channelUrl = context.channelUrl, fetchChannelError = context.fetchChannelError;
    // Inject components to presentation layer
    var _a = deleteNullish(props), _b = _a.renderChannelHeader, renderChannelHeader = _b === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelHeader, __assign({}, props)); } : _b, _c = _a.renderMessageList, renderMessageList = _c === void 0 ? function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageList, __assign({}, props, { className: "sendbird-conversation__message-list" })); } : _c, _d = _a.renderMessageInput, renderMessageInput = _d === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInputWrapper, __assign({}, props)); } : _d;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelUIView, __assign({}, props, context, { isInvalid: fetchChannelError !== null, channelUrl: channelUrl, renderChannelHeader: renderChannelHeader, renderMessageList: renderMessageList, renderMessageInput: renderMessageInput })));
};


//# sourceMappingURL=GroupChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannel.js













































































































































var GroupChannel = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelProvider, __assign({}, props),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelUI, __assign({}, props))));
};


//# sourceMappingURL=GroupChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList/context.js












var GroupChannelListContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var GroupChannelListProvider = function (props) {
    var _a, _b, _c;
    var children = props.children, _d = props.className, className = _d === void 0 ? '' : _d, selectedChannelUrl = props.selectedChannelUrl, _e = props.disableAutoSelect, disableAutoSelect = _e === void 0 ? false : _e, allowProfileEdit = props.allowProfileEdit, isTypingIndicatorEnabled = props.isTypingIndicatorEnabled, isMessageReceiptStatusEnabled = props.isMessageReceiptStatusEnabled, channelListQueryParams = props.channelListQueryParams, onThemeChange = props.onThemeChange, _f = props.onChannelSelect, onChannelSelect = _f === void 0 ? noop : _f, _g = props.onChannelCreated, onChannelCreated = _g === void 0 ? noop : _g, onCreateChannelClick = props.onCreateChannelClick, onBeforeCreateChannel = props.onBeforeCreateChannel, onUserProfileUpdated = props.onUserProfileUpdated, disableUserProfile = props.disableUserProfile, renderUserProfile = props.renderUserProfile, onUserProfileMessage = props.onUserProfileMessage;
    var globalStore = useSendbirdStateContext();
    var config = globalStore.config, stores = globalStore.stores;
    var sdkStore = stores.sdkStore;
    var sdk = sdkStore.sdk;
    var isConnected = useOnlineStatus(sdk, config.logger);
    var scheduler = useMarkAsDeliveredScheduler({ isConnected: isConnected }, config);
    var channelListDataSource = useGroupChannelList(sdk, {
        collectionCreator: context_getCollectionCreator(sdk, channelListQueryParams),
        markAsDelivered: function (channels) { return channels.forEach(scheduler.push); },
        onChannelsDeleted: function (channelUrls) {
            channelUrls.forEach(function (url) {
                if (url === selectedChannelUrl)
                    onChannelSelect(null);
            });
        },
    });
    var refreshing = channelListDataSource.refreshing, initialized = channelListDataSource.initialized, groupChannels = channelListDataSource.groupChannels, refresh = channelListDataSource.refresh, loadMore = channelListDataSource.loadMore;
    // SideEffect: Auto select channel
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        if (!disableAutoSelect && stores.sdkStore.initialized && initialized) {
            if (!selectedChannelUrl)
                onChannelSelect((_a = groupChannels[0]) !== null && _a !== void 0 ? _a : null);
        }
    }, [disableAutoSelect, stores.sdkStore.initialized, initialized, selectedChannelUrl]);
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), typingChannelUrls = _h[0], setTypingChannelUrls = _h[1];
    useGroupChannelHandler(sdk, {
        onTypingStatusUpdated: function (channel) {
            var _a;
            var channelList = typingChannelUrls.filter(function (channelUrl) { return channelUrl !== channel.url; });
            if (((_a = channel.getTypingUsers()) === null || _a === void 0 ? void 0 : _a.length) > 0) {
                setTypingChannelUrls(channelList.concat(channel.url));
            }
            else {
                setTypingChannelUrls(channelList);
            }
        },
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListContext.Provider, { value: {
            className: className,
            selectedChannelUrl: selectedChannelUrl,
            disableAutoSelect: disableAutoSelect,
            allowProfileEdit: (_a = allowProfileEdit !== null && allowProfileEdit !== void 0 ? allowProfileEdit : config.allowProfileEdit) !== null && _a !== void 0 ? _a : true,
            isTypingIndicatorEnabled: (_b = isTypingIndicatorEnabled !== null && isTypingIndicatorEnabled !== void 0 ? isTypingIndicatorEnabled : config.groupChannelList.enableTypingIndicator) !== null && _b !== void 0 ? _b : false,
            isMessageReceiptStatusEnabled: (_c = isMessageReceiptStatusEnabled !== null && isMessageReceiptStatusEnabled !== void 0 ? isMessageReceiptStatusEnabled : config.groupChannelList.enableMessageReceiptStatus) !== null && _c !== void 0 ? _c : false,
            onChannelSelect: onChannelSelect,
            onChannelCreated: onChannelCreated,
            onThemeChange: onThemeChange,
            onCreateChannelClick: onCreateChannelClick,
            onBeforeCreateChannel: onBeforeCreateChannel,
            onUserProfileUpdated: onUserProfileUpdated,
            typingChannelUrls: typingChannelUrls,
            refreshing: refreshing,
            initialized: initialized,
            groupChannels: groupChannels,
            refresh: refresh,
            loadMore: loadMore,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { disableUserProfile: disableUserProfile !== null && disableUserProfile !== void 0 ? disableUserProfile : !config.common.enableUsingDefaultUserProfile, renderUserProfile: renderUserProfile !== null && renderUserProfile !== void 0 ? renderUserProfile : config === null || config === void 0 ? void 0 : config.renderUserProfile, onUserProfileMessage: onUserProfileMessage !== null && onUserProfileMessage !== void 0 ? onUserProfileMessage : config === null || config === void 0 ? void 0 : config.onUserProfileMessage },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-list ".concat(className) }, children))));
};
var useGroupChannelListContext = function () {
    var context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(GroupChannelListContext);
    if (!context)
        throw new Error('GroupChannelListContext not found. Use within the GroupChannelList module.');
    return context;
};
function context_getCollectionCreator(sdk, channelListQueryParams) {
    return function (defaultParams) {
        var params = __assign(__assign({}, defaultParams), channelListQueryParams);
        return sdk.groupChannel.createGroupChannelCollection(__assign(__assign({}, params), { filter: new _bundle_a5a397f1_en(params) }));
    };
}


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList/components/GroupChannelListHeader.js



















var GroupChannelListHeader = function (_a) {
    var renderTitle = _a.renderTitle, renderIconButton = _a.renderIconButton, onEdit = _a.onEdit, allowProfileEdit = _a.allowProfileEdit, 
    // Header custom props
    renderLeft = _a.renderLeft, renderMiddle = _a.renderMiddle, renderRight = _a.renderRight;
    var stores = useSendbirdStateContext().stores;
    var user = stores.userStore.user;
    var stringSet = useLocalization().stringSet;
    var renderProfile = renderMiddle !== null && renderMiddle !== void 0 ? renderMiddle : renderTitle;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1, { className: classnames('sendbird-channel-header', allowProfileEdit && 'sendbird-channel-header--allow-edit'), renderLeft: renderLeft, renderMiddle: function () {
            var _a;
            return ((_a = renderProfile === null || renderProfile === void 0 ? void 0 : renderProfile()) !== null && _a !== void 0 ? _a : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-header__title", role: "button", onClick: function () {
                    onEdit === null || onEdit === void 0 ? void 0 : onEdit();
                }, onKeyDown: function () {
                    onEdit === null || onEdit === void 0 ? void 0 : onEdit();
                }, tabIndex: 0 },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-header__title__left" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { width: "32px", height: "32px", src: user.profileUrl, alt: user.nickname })),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-header__title__right" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-header__title__right__name", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, user.nickname || stringSet.NO_NAME),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-header__title__right__user-id", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_2 }, user.userId)))));
        }, renderRight: renderRight !== null && renderRight !== void 0 ? renderRight : renderIconButton }));
};


//# sourceMappingURL=GroupChannelListHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/EditUserProfile/context.js



var EditUserProfileProviderContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var EditUserProfileProvider = function (_a) {
    var children = _a.children, props = __rest(_a, ["children"]);
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfileProviderContext.Provider, { value: props }, children);
};
var useEditUserProfileContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(EditUserProfileProviderContext);
    if (!context)
        throw new Error('EditUserProfileContext not found. Use within the EditUserProfile module.');
    return context;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/EditUserProfile/components/EditUserProfileUI.js



































var EditUserProfileUIView = function (_a) {
    var _b;
    var formRef = _a.formRef, inputRef = _a.inputRef, onThemeChange = _a.onThemeChange, setProfileImage = _a.setProfileImage;
    var _c = useSendbirdStateContext(), stores = _c.stores, config = _c.config;
    var theme = config.theme, setCurrentTheme = config.setCurrentTheme;
    var user = (_b = stores.userStore) === null || _b === void 0 ? void 0 : _b.user;
    var stringSet = useLocalization().stringSet;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), currentImg = _d[0], setCurrentImg = _d[1];
    var hiddenInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", { className: "sendbird-edit-user-profile", ref: formRef, onSubmit: function (e) { e.preventDefault(); } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird-edit-user-profile__img" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__IMAGE_LABEL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-edit-user-profile__img__avatar" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { width: "80px", height: "80px", src: currentImg || (user === null || user === void 0 ? void 0 : user.profileUrl) })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { ref: hiddenInputRef, type: "file", accept: "image/gif, image/jpeg, image/png", style: { display: 'none' }, onChange: function (e) {
                    if (e.target.files) {
                        setCurrentImg(URL.createObjectURL(e.target.files[0]));
                        setProfileImage(e.target.files[0]);
                    }
                    if (hiddenInputRef.current) {
                        hiddenInputRef.current.value = '';
                    }
                } }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "sendbird-edit-user-profile__img__avatar-button", disableUnderline: true, onClick: function () { var _a; return (_a = hiddenInputRef.current) === null || _a === void 0 ? void 0 : _a.click(); } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet.EDIT_PROFILE__IMAGE_UPLOAD))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird-edit-user-profile__name" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__NICKNAME_LABEL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, { required: (user === null || user === void 0 ? void 0 : user.nickname) !== '', name: "sendbird-edit-user-profile__name__input", ref: inputRef, value: user === null || user === void 0 ? void 0 : user.nickname, placeHolder: stringSet.EDIT_PROFILE__NICKNAME_PLACEHOLDER })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird-edit-user-profile__userid" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__USERID_LABEL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, { disabled: true, name: "sendbird-edit-user-profile__userid__input", value: user === null || user === void 0 ? void 0 : user.userId })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", { className: "sendbird-edit-user-profile__theme" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__THEME_LABEL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-edit-user-profile__theme__theme-icon" }, theme === 'dark'
                ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { onClick: function () {
                        setCurrentTheme('light');
                        onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange('light');
                    }, type: IconTypes.TOGGLE_ON, width: 44, height: 24 }))
                : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { onClick: function () {
                        setCurrentTheme('dark');
                        onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange('dark');
                    }, type: IconTypes.TOGGLE_OFF, width: 44, height: 24 }))))));
};

var handleUpdateUserInfo = function (_a) {
    var _b, _c, _d;
    var globalContext = _a.globalContext, formRef = _a.formRef, inputRef = _a.inputRef, profileImage = _a.profileImage, onEditProfile = _a.onEditProfile;
    var stores = globalContext.stores, dispatchers = globalContext.dispatchers;
    var sdk = stores.sdkStore.sdk;
    var user = stores.userStore.user;
    var userDispatcher = dispatchers.userDispatcher;
    if ((user === null || user === void 0 ? void 0 : user.nickname) !== '' && !inputRef.current.value) {
        (_c = (_b = formRef.current).reportValidity) === null || _c === void 0 ? void 0 : _c.call(_b); // might not work in explorer
        return;
    }
    sdk === null || sdk === void 0 ? void 0 : sdk.updateCurrentUserInfo({
        nickname: (_d = inputRef === null || inputRef === void 0 ? void 0 : inputRef.current) === null || _d === void 0 ? void 0 : _d.value,
        profileImage: profileImage !== null && profileImage !== void 0 ? profileImage : undefined,
    }).then(function (updatedUser) {
        userDispatcher({ type: USER_ACTIONS.UPDATE_USER_INFO, payload: updatedUser });
        onEditProfile === null || onEditProfile === void 0 ? void 0 : onEditProfile(updatedUser);
    });
};
var useEditUserProfileUISates = function (_a) {
    var onEditProfile = _a.onEditProfile;
    var globalContext = useSendbirdStateContext();
    var inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var formRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), profileImage = _b[0], setProfileImage = _b[1];
    var updateUserInfo = function () {
        handleUpdateUserInfo({
            globalContext: globalContext,
            formRef: formRef,
            inputRef: inputRef,
            profileImage: profileImage,
            onEditProfile: onEditProfile,
        });
    };
    return {
        formRef: formRef,
        inputRef: inputRef,
        updateUserInfo: updateUserInfo,
        profileImage: profileImage,
        setProfileImage: setProfileImage,
    };
};
var EditUserProfileUI = function () {
    var editProfileContext = useEditUserProfileContext();
    var onEditProfile = editProfileContext.onEditProfile, onCancel = editProfileContext.onCancel, onThemeChange = editProfileContext.onThemeChange;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _a = useEditUserProfileUISates({ onEditProfile: onEditProfile }), formRef = _a.formRef, inputRef = _a.inputRef, updateUserInfo = _a.updateUserInfo, setProfileImage = _a.setProfileImage;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { titleText: stringSet.EDIT_PROFILE__TITLE, submitText: stringSet.BUTTON__SAVE, type: ButtonTypes.PRIMARY, onCancel: onCancel, isFullScreenOnMobile: true, onSubmit: updateUserInfo },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfileUIView, { formRef: formRef, inputRef: inputRef, setProfileImage: setProfileImage, onThemeChange: onThemeChange })));
};


//# sourceMappingURL=EditUserProfileUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/EditUserProfile.js




































var EditUserProfile = function (props) {
    var onEditProfile = props.onEditProfile, onCancel = props.onCancel, onThemeChange = props.onThemeChange;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfileProvider, { onEditProfile: onEditProfile, onCancel: onCancel, onThemeChange: onThemeChange },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfileUI, null)));
};


//# sourceMappingURL=EditUserProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BaXke8XU.js







var GroupChannelListUIView = function (_a) {
    var renderHeader = _a.renderHeader, renderPlaceHolderError = _a.renderPlaceHolderError, renderPlaceHolderLoading = _a.renderPlaceHolderLoading, renderPlaceHolderEmptyList = _a.renderPlaceHolderEmptyList, onChangeTheme = _a.onChangeTheme, onUserProfileUpdated = _a.onUserProfileUpdated, allowProfileEdit = _a.allowProfileEdit, channels = _a.channels, onLoadMore = _a.onLoadMore, initialized = _a.initialized, renderChannel = _a.renderChannel, renderAddChannel = _a.renderAddChannel;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showProfileEdit = _b[0], setShowProfileEdit = _b[1];
    var stores = useSendbirdStateContext().stores;
    var renderer = {
        addChannel: renderAddChannel,
        channel: renderChannel,
        placeholder: {
            loading: function () {
                if (initialized)
                    return null;
                if (renderPlaceHolderLoading)
                    return renderPlaceHolderLoading();
                return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING });
            },
            empty: function () {
                if (!initialized)
                    return null;
                if (renderPlaceHolderEmptyList)
                    return renderPlaceHolderEmptyList();
                return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.NO_CHANNELS });
            },
            error: function () {
                if (!initialized || !stores.sdkStore.error)
                    return null;
                if (renderPlaceHolderError)
                    return renderPlaceHolderError();
                return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG });
            },
        },
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-list__header" }, (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListHeader, { onEdit: function () { return allowProfileEdit && setShowProfileEdit(true); }, allowProfileEdit: allowProfileEdit, renderIconButton: function () { return renderer.addChannel(); } }))),
        showProfileEdit && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfile, { onThemeChange: onChangeTheme, onCancel: function () { return setShowProfileEdit(false); }, onEditProfile: function (user) {
                setShowProfileEdit(false);
                onUserProfileUpdated(user);
            } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListComponent, { data: channels, renderItem: renderer.channel, onLoadMore: onLoadMore, placeholderLoading: renderer.placeholder.loading(), placeholderEmpty: renderer.placeholder.empty(), placeholderError: renderer.placeholder.error() })));
};
/**
 * To do: Implement windowing
 * Implement windowing if you are dealing with large number of messages/channels
 * https://github.com/bvaughn/react-window -> recommendation
 * We hesitate to bring one more dependency to our library,
 * we are planning to implement it inside the library
 * */
var ChannelListComponent = function (props) {
    var data = props.data, renderItem = props.renderItem, onLoadMore = props.onLoadMore, placeholderLoading = props.placeholderLoading, placeholderError = props.placeholderError, placeholderEmpty = props.placeholderEmpty;
    var onScroll = useOnScrollPositionChangeDetector({
        onReachedBottom: function () { return onLoadMore === null || onLoadMore === void 0 ? void 0 : onLoadMore(); },
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-channel-list__body', onScroll: onScroll },
        placeholderError,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, data.map(function (item, index) { return renderItem({ item: item, index: index }); })),
        placeholderLoading,
        data.length === 0 && placeholderEmpty));
};


//# sourceMappingURL=bundle-BaXke8XU.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList/components/GroupChannelPreviewAction.js





























var LeaveGroupChannel = function (_a) {
    var channel = _a.channel, onSubmit = _a.onSubmit, onCancel = _a.onCancel;
    var config = useSendbirdStateContext().config;
    var logger = config.logger, isOnline = config.isOnline;
    var stringSet = useLocalization().stringSet;
    if (channel) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { disabled: !isOnline, onCancel: onCancel, onSubmit: function () {
                logger.info('LeaveGroupChannel: Leaving channel', channel);
                channel.leave().then(function () {
                    logger.info('LeaveGroupChannel: Leaving channel successful!', channel);
                    onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit();
                });
            }, submitText: stringSet.MODAL__LEAVE_CHANNEL__FOOTER, titleText: stringSet.MODAL__LEAVE_CHANNEL__TITLE }));
    }
};

function GroupChannelPreviewAction(_a) {
    var channel = _a.channel, _b = _a.disabled, disabled = _b === void 0 ? false : _b, onLeaveChannel = _a.onLeaveChannel;
    var parentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var parentContainerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _c[0], setShowModal = _c[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: parentContainerRef, tabIndex: 0, role: "button", style: { display: 'inline-block' }, onKeyDown: function (e) { return e.stopPropagation(); }, onClick: function (e) { return e.stopPropagation(); } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { ref: parentRef, onClick: toggleDropdown, height: "32px", width: "32px" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MORE, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: parentRef, parentContainRef: parentContainerRef, closeDropdown: closeDropdown },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                        if (disabled)
                            return;
                        setShowModal(true);
                        closeDropdown();
                    }, dataSbId: "channel_list_item_context_menu_leave_channel" }, stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))); } }),
        showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LeaveGroupChannel, { channel: channel, onSubmit: function () {
                setShowModal(false);
                onLeaveChannel === null || onLeaveChannel === void 0 ? void 0 : onLeaveChannel();
            }, onCancel: function () { return setShowModal(false); } }))));
}


//# sourceMappingURL=GroupChannelPreviewAction.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Badge.js







function Badge(_a) {
    var count = _a.count, _b = _a.maxLevel, maxLevel = _b === void 0 ? 2 : _b, _c = _a.className, className = _c === void 0 ? '' : _c;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var maximumNumber = parseInt('9'.repeat(maxLevel > 6 ? 6 : maxLevel), 10);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-badge',
        ], false).join(' ') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-badge__text" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONCONTENT_1 }, typeof count === 'string'
                ? count
                : count > maximumNumber
                    ? "".concat(maximumNumber).concat(stringSet.BADGE__OVER)
                    : count))));
}


//# sourceMappingURL=Badge.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MentionUserLabel.js




function MentionUserLabel(_a) {
    var _b = _a.className, className = _b === void 0 ? '' : _b, children = _a.children, _c = _a.isReverse, isReverse = _c === void 0 ? false : _c, color = _a.color, userId = _a.userId;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", { className: classnames(MENTION_USER_LABEL_CLASSNAME, className, isReverse && 'reverse', color), contentEditable: false, "data-userid": userId, "data-sb-mention": true }, children));
}


//# sourceMappingURL=MentionUserLabel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DuRujwfr.js


















var GroupChannelListItemView = function (_a) {
    var channel = _a.channel, tabIndex = _a.tabIndex, isTyping = _a.isTyping, isSelected = _a.isSelected, channelName = _a.channelName, _b = _a.isMessageStatusEnabled, isMessageStatusEnabled = _b === void 0 ? true : _b, _c = _a.onClick, onClick = _c === void 0 ? noop : _c, _d = _a.onLeaveChannel, onLeaveChannel = _d === void 0 ? function () { return Promise.resolve(); } : _d, renderChannelAction = _a.renderChannelAction;
    var config = useSendbirdStateContext().config;
    var theme = config.theme, userId = config.userId;
    var _e = useLocalization(), dateLocale = _e.dateLocale, stringSet = _e.stringSet;
    var isMobile = useMediaQueryContext().isMobile;
    var isMentionEnabled = config.groupChannel.enableMention;
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMobileLeave = _f[0], setShowMobileLeave = _f[1];
    var onLongPress = useLongPress({
        onLongPress: function () {
            if (isMobile) {
                setShowMobileLeave(true);
            }
        },
        onClick: onClick,
    }, {
        delay: 1000,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: [
                'sendbird-channel-preview',
                isSelected ? 'sendbird-channel-preview--active' : '',
            ].join(' '), role: "link", tabIndex: tabIndex }, (isMobile ? __assign({}, onLongPress) : { onClick: onClick })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__avatar" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, { channel: channel, userId: userId, theme: theme })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__content" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__content__upper" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__content__upper__header" },
                        (channel.isBroadcast || false) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__content__upper__header__broadcast-icon" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.BROADCAST, fillColor: IconColors.SECONDARY, height: "16px", width: "16px" }))),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-preview__content__upper__header__channel-name", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, channelName),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-preview__content__upper__header__total-members", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, getTotalMembers(channel)),
                        (channel.isFrozen) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { title: "Frozen", className: "sendbird-channel-preview__content__upper__header__frozen-icon" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.FREEZE, fillColor: IconColors.PRIMARY, height: 12, width: 12 })))),
                    !channel.isEphemeral && isMessageStatusEnabled && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageStatus, { className: "sendbird-channel-preview__content__upper__last-message-at", channel: channel, message: channel.lastMessage, isDateSeparatorConsidered: false })),
                    !channel.isEphemeral && !isMessageStatusEnabled && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-preview__content__upper__last-message-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, getLastMessageCreatedAt({
                        channel: channel,
                        locale: dateLocale,
                        stringSet: stringSet,
                    })))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__content__lower" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-preview__content__lower__last-message", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 },
                        isTyping && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorText, { members: channel.getTypingUsers() })),
                        !isTyping
                            && !isVoiceMessage(channel.lastMessage)
                            && getLastMessage(channel, stringSet),
                        !isTyping
                            && isVoiceMessage(channel.lastMessage)
                            && stringSet.VOICE_MESSAGE),
                    /**
                     * Do not show unread count for focused channel. This is because of the limitation where
                     * isScrollBottom and hasNext states needs to be added globally but they are from channel context
                     * so channel list cannot see them with the current architecture.
                     */
                    !isSelected && !channel.isEphemeral && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__content__lower__unread-message-count" },
                        isMentionEnabled && channel.unreadMentionCount > 0 ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MentionUserLabel, { className: "sendbird-channel-preview__content__lower__unread-message-count__mention", color: "purple" }, '@')) : null,
                        getChannelUnreadMessageCount(channel) ? ( // return number
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Badge, { count: getChannelUnreadMessageCount(channel) })) : null)))),
            !isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-preview__action" }, renderChannelAction({ channel: channel })))),
        showMobileLeave && isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { className: "sendbird-channel-preview__leave--mobile", titleText: channelName, hideFooter: true, isCloseOnClickOutside: true, onCancel: function () { return setShowMobileLeave(false); } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { onClick: function () {
                    onLeaveChannel();
                    setShowMobileLeave(false);
                }, className: "sendbird-channel-preview__leave-label--mobile" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE))))));
};


//# sourceMappingURL=bundle-DuRujwfr.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList/components/GroupChannelListItem.js
















































var GroupChannelListItem = function (_a) {
    var _b, _c, _d;
    var channel = _a.channel, isSelected = _a.isSelected, isTyping = _a.isTyping, renderChannelAction = _a.renderChannelAction, onLeaveChannel = _a.onLeaveChannel, onClick = _a.onClick, tabIndex = _a.tabIndex;
    var config = useSendbirdStateContext().config;
    var stringSet = useLocalization().stringSet;
    var _e = useGroupChannelListContext(), _f = _e.isTypingIndicatorEnabled, isTypingIndicatorEnabled = _f === void 0 ? false : _f, _g = _e.isMessageReceiptStatusEnabled, isMessageReceiptStatusEnabled = _g === void 0 ? false : _g;
    var userId = config.userId;
    var isMessageStatusEnabled = isMessageReceiptStatusEnabled
        && (!((_b = channel.lastMessage) === null || _b === void 0 ? void 0 : _b.isAdminMessage()))
        && ((_d = (_c = channel.lastMessage) === null || _c === void 0 ? void 0 : _c.sender) === null || _d === void 0 ? void 0 : _d.userId) === userId;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListItemView, { channel: channel, tabIndex: tabIndex, channelName: bundle_C3gISq8S_getChannelTitle(channel, userId, stringSet), isTyping: isTypingIndicatorEnabled && isTyping, isSelected: isSelected, isMessageStatusEnabled: isMessageStatusEnabled, onClick: onClick, onLeaveChannel: onLeaveChannel, renderChannelAction: renderChannelAction }));
};


//# sourceMappingURL=GroupChannelListItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Ps1Qc3cX.js




var CHANNEL_TYPE;
(function (CHANNEL_TYPE) {
    CHANNEL_TYPE["GROUP"] = "group";
    CHANNEL_TYPE["SUPERGROUP"] = "supergroup";
    CHANNEL_TYPE["BROADCAST"] = "broadcast";
})(CHANNEL_TYPE || (CHANNEL_TYPE = {}));

var CreateChannelContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var CreateChannelProvider = function (props) {
    var _a;
    var children = props.children, onCreateChannelClick = props.onCreateChannelClick, onBeforeCreateChannel = props.onBeforeCreateChannel, onChannelCreated = props.onChannelCreated, userListQuery = props.userListQuery, onCreateChannel = props.onCreateChannel, overrideInviteUser = props.overrideInviteUser;
    var store = useSendbirdStateContext();
    var _userListQuery = userListQuery !== null && userListQuery !== void 0 ? userListQuery : (_a = store === null || store === void 0 ? void 0 : store.config) === null || _a === void 0 ? void 0 : _a.userListQuery;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), step = _b[0], setStep = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(CHANNEL_TYPE.GROUP), type = _c[0], setType = _c[1];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannelContext.Provider, { value: {
            sdk: store.stores.sdkStore.sdk,
            createChannel: getCreateGroupChannel(store),
            onCreateChannelClick: onCreateChannelClick,
            onBeforeCreateChannel: onBeforeCreateChannel,
            onChannelCreated: onChannelCreated,
            userListQuery: _userListQuery,
            step: step,
            setStep: setStep,
            type: type,
            setType: setType,
            onCreateChannel: onCreateChannel,
            overrideInviteUser: overrideInviteUser,
        } }, children));
};
var useCreateChannelContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(CreateChannelContext);
    if (!context)
        throw new Error('CreateChannelContext not found. Use within the CreateChannel module.');
    return context;
};


//# sourceMappingURL=bundle-Ps1Qc3cX.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel/components/InviteUsers.js








































var filterUser = function (idsToFilter) { return function (currentId) { return idsToFilter === null || idsToFilter === void 0 ? void 0 : idsToFilter.includes(currentId); }; };
var setChannelType = function (params, type) {
    if (type === 'broadcast') {
        // eslint-disable-next-line no-param-reassign
        params.isBroadcast = true;
    }
    if (type === 'supergroup') {
        // eslint-disable-next-line no-param-reassign
        params.isSuper = true;
    }
    return params;
};
var createDefaultUserListQuery = function (_a) {
    var sdk = _a.sdk, userFilledApplicationUserListQuery = _a.userFilledApplicationUserListQuery;
    var params = sdk.createApplicationUserListQuery();
    if (userFilledApplicationUserListQuery) {
        Object.keys(userFilledApplicationUserListQuery).forEach(function (key) {
            // @ts-ignore
            params[key] = userFilledApplicationUserListQuery[key];
        });
    }
    return params;
};

var BUFFER = 50;
var InviteUsers = function (_a) {
    var _b, _c, _d;
    var onCancel = _a.onCancel, userListQuery = _a.userListQuery;
    var _e = useCreateChannelContext(), onCreateChannelClick = _e.onCreateChannelClick, onBeforeCreateChannel = _e.onBeforeCreateChannel, onChannelCreated = _e.onChannelCreated, createChannel = _e.createChannel, onCreateChannel = _e.onCreateChannel, overrideInviteUser = _e.overrideInviteUser, type = _e.type;
    var globalStore = useSendbirdStateContext();
    var userId = (_b = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config) === null || _b === void 0 ? void 0 : _b.userId;
    var sdk = (_d = (_c = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _c === void 0 ? void 0 : _c.sdkStore) === null || _d === void 0 ? void 0 : _d.sdk;
    var idsToFilter = [userId];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), users = _f[0], setUsers = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({}), selectedUsers = _g[0], setSelectedUsers = _g[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), usersDataSource = _h[0], setUsersDataSource = _h[1];
    var selectedCount = Object.keys(selectedUsers).length;
    var titleText = stringSet.MODAL__CREATE_CHANNEL__TITLE;
    var submitText = stringSet.BUTTON__CREATE;
    var isMobile = useMediaQueryContext().isMobile;
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(window.innerHeight), scrollableAreaHeight = _j[0], setScrollableAreaHeight = _j[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var applicationUserListQuery = userListQuery ? userListQuery() : createDefaultUserListQuery({ sdk: sdk });
        setUsersDataSource(applicationUserListQuery);
        if (!(applicationUserListQuery === null || applicationUserListQuery === void 0 ? void 0 : applicationUserListQuery.isLoading)) {
            applicationUserListQuery.next().then(function (it) {
                setUsers(it);
            });
        }
    }, []);
    // To fix navbar break in mobile we set dynamic height to the scrollable area
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var scrollableAreaHeight = function () {
            setScrollableAreaHeight(window.innerHeight);
        };
        window.addEventListener('resize', scrollableAreaHeight);
        return function () {
            window.removeEventListener('resize', scrollableAreaHeight);
        };
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, titleText: titleText, submitText: submitText, type: ButtonTypes.PRIMARY, 
        // Disable the create button if no users are selected,
        // but if there's only the logged-in user in the user list,
        // then the create button should be enabled
        disabled: users.length > 1 && Object.keys(selectedUsers).length === 0, onCancel: onCancel, onSubmit: function () {
            var selectedUserList = Object.keys(selectedUsers).length > 0
                ? Object.keys(selectedUsers)
                : [userId];
            var _onChannelCreated = onChannelCreated !== null && onChannelCreated !== void 0 ? onChannelCreated : onCreateChannel;
            var _onCreateChannelClick = onCreateChannelClick !== null && onCreateChannelClick !== void 0 ? onCreateChannelClick : overrideInviteUser;
            if (typeof _onCreateChannelClick === 'function') {
                _onCreateChannelClick({
                    users: selectedUserList,
                    onClose: onCancel !== null && onCancel !== void 0 ? onCancel : noop,
                    channelType: type,
                });
                return;
            }
            if (onBeforeCreateChannel) {
                var params = onBeforeCreateChannel(selectedUserList);
                setChannelType(params, type);
                createChannel(params).then(function (channel) { return _onChannelCreated === null || _onChannelCreated === void 0 ? void 0 : _onChannelCreated(channel); });
            }
            else {
                var params = {};
                params.invitedUserIds = selectedUserList;
                params.isDistinct = false;
                if (userId) {
                    params.operatorUserIds = [userId];
                }
                setChannelType(params, type);
                // do not have custom params
                createChannel(params).then(function (channel) { return _onChannelCreated === null || _onChannelCreated === void 0 ? void 0 : _onChannelCreated(channel); });
            }
            onCancel === null || onCancel === void 0 ? void 0 : onCancel();
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { color: (selectedCount > 0) ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3, type: LabelTypography.CAPTION_1 }, "".concat(selectedCount, " ").concat(stringSet.MODAL__INVITE_MEMBER__SELECTED)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-create-channel--scroll", style: isMobile ? { height: "calc(".concat(scrollableAreaHeight, "px - 200px)") } : {}, onScroll: function (e) {
                    if (!usersDataSource)
                        return;
                    var eventTarget = e.target;
                    var hasNext = usersDataSource.hasNext, isLoading = usersDataSource.isLoading;
                    var fetchMore = ((eventTarget.clientHeight + eventTarget.scrollTop + BUFFER) > eventTarget.scrollHeight);
                    if (hasNext && fetchMore && !isLoading) {
                        usersDataSource.next().then(function (usersBatch) {
                            setUsers(__spreadArray(__spreadArray([], users, true), usersBatch, true));
                        });
                    }
                } }, users.map(function (user) { return (!filterUser(idsToFilter)(user.userId)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { key: user.userId, user: user, checkBox: true, checked: selectedUsers[user.userId], onChange: function (event) {
                    var _a;
                    var modifiedSelectedUsers = __assign(__assign({}, selectedUsers), (_a = {}, _a[event.target.id] = event.target.checked, _a));
                    if (!event.target.checked) {
                        delete modifiedSelectedUsers[event.target.id];
                    }
                    setSelectedUsers(modifiedSelectedUsers);
                } })); })))));
};


//# sourceMappingURL=InviteUsers.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel/components/SelectChannelType.js






























var isBroadcastChannelEnabled = function (sdk) {
    var _a;
    var ALLOW_BROADCAST_CHANNEL = 'allow_broadcast_channel';
    var applicationAttributes = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.applicationAttributes;
    if (Array.isArray(applicationAttributes)) {
        return applicationAttributes.includes(ALLOW_BROADCAST_CHANNEL);
    }
    return false;
};
var isSuperGroupChannelEnabled = function (sdk) {
    var _a;
    var ALLOW_SUPER_GROUP_CHANNEL = 'allow_super_group_channel';
    var applicationAttributes = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.applicationAttributes;
    if (Array.isArray(applicationAttributes)) {
        return applicationAttributes.includes(ALLOW_SUPER_GROUP_CHANNEL);
    }
    return false;
};

var SelectChannelType = function (props) {
    var onCancel = props.onCancel;
    var store = useSendbirdStateContext();
    var sdk = getSdk(store);
    var createChannelProps = useCreateChannelContext();
    var setStep = createChannelProps.setStep, setType = createChannelProps.setType;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var isBroadcastAvailable = isBroadcastChannelEnabled(sdk);
    var isSupergroupAvailable = isSuperGroupChannelEnabled(sdk);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { titleText: stringSet === null || stringSet === void 0 ? void 0 : stringSet.MODAL__CREATE_CHANNEL__TITLE, hideFooter: true, onCancel: function () { onCancel === null || onCancel === void 0 ? void 0 : onCancel(); }, className: "sendbird-add-channel__modal" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-add-channel__rectangle-wrap" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-add-channel__rectangle", onClick: function () {
                    setType(CHANNEL_TYPE.GROUP);
                    setStep(1);
                }, role: "button", tabIndex: 0, onKeyDown: function () {
                    setType(CHANNEL_TYPE.GROUP);
                    setStep(1);
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-add-channel__rectangle__chat-icon", type: IconTypes.CHAT, fillColor: IconColors.PRIMARY, width: "28px", height: "28px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MODAL__CREATE_CHANNEL__GROUP)),
            isSupergroupAvailable && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-add-channel__rectangle", onClick: function () {
                    setType(CHANNEL_TYPE.SUPERGROUP);
                    setStep(1);
                }, role: "button", tabIndex: 0, onKeyDown: function () {
                    setType(CHANNEL_TYPE.SUPERGROUP);
                    setStep(1);
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-add-channel__rectangle__supergroup-icon", type: IconTypes.SUPERGROUP, fillColor: IconColors.PRIMARY, width: "28px", height: "28px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MODAL__CREATE_CHANNEL__SUPER))),
            isBroadcastAvailable && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-add-channel__rectangle", onClick: function () {
                    setType(CHANNEL_TYPE.BROADCAST);
                    setStep(1);
                }, role: "button", tabIndex: 0, onKeyDown: function () {
                    setType(CHANNEL_TYPE.BROADCAST);
                    setStep(1);
                } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-add-channel__rectangle__broadcast-icon", type: IconTypes.BROADCAST, fillColor: IconColors.PRIMARY, width: "28px", height: "28px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.MODAL__CREATE_CHANNEL__BROADCAST))))));
};


//# sourceMappingURL=SelectChannelType.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel/components/CreateChannelUI.js










































var CreateChannel = function (props) {
    var onCancel = props.onCancel, renderStepOne = props.renderStepOne;
    var _a = useCreateChannelContext(), step = _a.step, setStep = _a.setStep, userListQuery = _a.userListQuery;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        step === 0 && ((renderStepOne === null || renderStepOne === void 0 ? void 0 : renderStepOne()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SelectChannelType, { onCancel: onCancel }))),
        step === 1 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InviteUsers, { userListQuery: userListQuery, onCancel: function () {
                setStep(0);
                onCancel === null || onCancel === void 0 ? void 0 : onCancel();
            } }))));
};


//# sourceMappingURL=CreateChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel.js











































var CreateChannel_CreateChannel = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannelProvider, __assign({}, props),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannel, __assign({}, props))));
};


//# sourceMappingURL=CreateChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BKVuhi2w.js






var AddGroupChannelView = function (_a) {
    var createChannelVisible = _a.createChannelVisible, onChangeCreateChannelVisible = _a.onChangeCreateChannelVisible, onBeforeCreateChannel = _a.onBeforeCreateChannel, onCreateChannelClick = _a.onCreateChannelClick, onChannelCreated = _a.onChannelCreated;
    var config = useSendbirdStateContext().config;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { height: '32px', width: '32px', disabled: !config.isOnline, onClick: function () { return onChangeCreateChannelVisible(true); } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CREATE, fillColor: IconColors.PRIMARY, width: '24px', height: '24px' })),
        createChannelVisible && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannel_CreateChannel, { onCancel: function () { return onChangeCreateChannelVisible(false); }, onChannelCreated: function (channel) {
                onChannelCreated === null || onChannelCreated === void 0 ? void 0 : onChannelCreated(channel);
                onChangeCreateChannelVisible(false);
            }, onBeforeCreateChannel: onBeforeCreateChannel, onCreateChannelClick: onCreateChannelClick }))));
};


//# sourceMappingURL=bundle-BKVuhi2w.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList/components/AddGroupChannel.js















































var AddGroupChannel = function () {
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), createChannelVisible = _a[0], setCreateChannelVisible = _a[1];
    var _b = useGroupChannelListContext(), onChannelCreated = _b.onChannelCreated, onBeforeCreateChannel = _b.onBeforeCreateChannel, onCreateChannelClick = _b.onCreateChannelClick;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddGroupChannelView, { createChannelVisible: createChannelVisible, onChangeCreateChannelVisible: setCreateChannelVisible, onCreateChannelClick: onCreateChannelClick, onBeforeCreateChannel: onBeforeCreateChannel, onChannelCreated: onChannelCreated }));
};


//# sourceMappingURL=AddGroupChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList/components/GroupChannelListUI.js














































































var GroupChannelListUI = function (props) {
    var renderHeader = props.renderHeader, renderChannelPreview = props.renderChannelPreview, renderPlaceHolderError = props.renderPlaceHolderError, renderPlaceHolderLoading = props.renderPlaceHolderLoading, renderPlaceHolderEmptyList = props.renderPlaceHolderEmptyList;
    var _a = useGroupChannelListContext(), onChannelSelect = _a.onChannelSelect, onThemeChange = _a.onThemeChange, allowProfileEdit = _a.allowProfileEdit, typingChannelUrls = _a.typingChannelUrls, groupChannels = _a.groupChannels, initialized = _a.initialized, selectedChannelUrl = _a.selectedChannelUrl, loadMore = _a.loadMore, onUserProfileUpdated = _a.onUserProfileUpdated;
    var _b = useSendbirdStateContext(), stores = _b.stores, config = _b.config;
    var logger = config.logger, isOnline = config.isOnline;
    var sdk = stores.sdkStore.sdk;
    var renderListItem = function (renderProps) {
        var channel = renderProps.item, index = renderProps.index;
        var itemProps = {
            channel: channel,
            tabIndex: index,
            isSelected: channel.url === selectedChannelUrl,
            isTyping: typingChannelUrls.includes(channel.url),
            renderChannelAction: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelPreviewAction, __assign({}, props)); },
            onClick: function () {
                if (isOnline || (sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled)) {
                    logger.info('ChannelList: Clicked on channel:', channel);
                    onChannelSelect(channel);
                }
                else {
                    logger.warning('ChannelList: Inactivated clicking channel item during offline.');
                }
            },
            onLeaveChannel: function () {
                return __awaiter(this, void 0, void 0, function () {
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                logger.info('ChannelList: Leaving channel', channel);
                                return [4 /*yield*/, channel.leave()];
                            case 1:
                                _a.sent();
                                logger.info('ChannelList: Leaving channel success');
                                return [2 /*return*/];
                        }
                    });
                });
            },
        };
        if (renderChannelPreview) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { key: channel.url, onClick: itemProps.onClick }, renderChannelPreview(itemProps)));
        }
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListItem, __assign({ key: channel.url }, itemProps));
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListUIView, { renderHeader: renderHeader, renderChannel: renderListItem, renderPlaceHolderError: renderPlaceHolderError, renderPlaceHolderLoading: renderPlaceHolderLoading, renderPlaceHolderEmptyList: renderPlaceHolderEmptyList, onChangeTheme: onThemeChange !== null && onThemeChange !== void 0 ? onThemeChange : noop, allowProfileEdit: allowProfileEdit, onUserProfileUpdated: onUserProfileUpdated !== null && onUserProfileUpdated !== void 0 ? onUserProfileUpdated : noop, channels: groupChannels, onLoadMore: loadMore, initialized: initialized, renderAddChannel: function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddGroupChannel, null); } }));
};


//# sourceMappingURL=GroupChannelListUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/GroupChannelList.js















































































var GroupChannelList = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListProvider, __assign({}, props),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListUI, __assign({}, props))));
};


//# sourceMappingURL=GroupChannelList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-gNs_MAJh.js
var RESET_MESSAGES = 'RESET_MESSAGES';
var FETCH_INITIAL_MESSAGES_START = 'FETCH_INITIAL_MESSAGES_START';
var FETCH_INITIAL_MESSAGES_SUCCESS = 'FETCH_INITIAL_MESSAGES_SUCCESS';
var FETCH_INITIAL_MESSAGES_FAILURE = 'FETCH_INITIAL_MESSAGES_FAILURE';
var FETCH_PREV_MESSAGES_SUCCESS = 'FETCH_PREV_MESSAGES_SUCCESS';
var FETCH_PREV_MESSAGES_FAILURE = 'FETCH_PREV_MESSAGES_FAILURE';
var FETCH_NEXT_MESSAGES_SUCCESS = 'FETCH_NEXT_MESSAGES_SUCCESS';
var FETCH_NEXT_MESSAGES_FAILURE = 'FETCH_NEXT_MESSAGES_FAILURE';
var SEND_MESSAGE_START = 'SEND_MESSAGE_START';
var SEND_MESSAGE_SUCCESS = 'SEND_MESSAGE_SUCCESS';
var SEND_MESSAGE_FAILURE = 'SEND_MESSAGE_FAILURE';
var RESEND_MESSAGE_START = 'RESEND_MESSAGE_START';
var ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';
var ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';
var ON_MESSAGE_THREAD_INFO_UPDATED = 'ON_MESSAGE_THREAD_INFO_UPDATED';
var ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';
var ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';
var SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
var SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';
var MARK_AS_READ = 'MARK_AS_READ';
var ON_REACTION_UPDATED = 'ON_REACTION_UPDATED';
var SET_EMOJI_CONTAINER = 'SET_EMOJI_CONTAINER';
var MESSAGE_LIST_PARAMS_CHANGED = 'MESSAGE_LIST_PARAMS_CHANGED';
var ON_FILE_INFO_UPLOADED = 'ON_FILE_INFO_UPLOADED';
var ON_TYPING_STATUS_UPDATED = 'ON_TYPING_STATUS_UPDATED';

var channelActions = /*#__PURE__*/Object.freeze({
  __proto__: null,
  FETCH_INITIAL_MESSAGES_FAILURE: FETCH_INITIAL_MESSAGES_FAILURE,
  FETCH_INITIAL_MESSAGES_START: FETCH_INITIAL_MESSAGES_START,
  FETCH_INITIAL_MESSAGES_SUCCESS: FETCH_INITIAL_MESSAGES_SUCCESS,
  FETCH_NEXT_MESSAGES_FAILURE: FETCH_NEXT_MESSAGES_FAILURE,
  FETCH_NEXT_MESSAGES_SUCCESS: FETCH_NEXT_MESSAGES_SUCCESS,
  FETCH_PREV_MESSAGES_FAILURE: FETCH_PREV_MESSAGES_FAILURE,
  FETCH_PREV_MESSAGES_SUCCESS: FETCH_PREV_MESSAGES_SUCCESS,
  MARK_AS_READ: MARK_AS_READ,
  MESSAGE_LIST_PARAMS_CHANGED: MESSAGE_LIST_PARAMS_CHANGED,
  ON_FILE_INFO_UPLOADED: ON_FILE_INFO_UPLOADED,
  ON_MESSAGE_DELETED: ON_MESSAGE_DELETED,
  ON_MESSAGE_DELETED_BY_REQ_ID: ON_MESSAGE_DELETED_BY_REQ_ID,
  ON_MESSAGE_RECEIVED: ON_MESSAGE_RECEIVED,
  ON_MESSAGE_THREAD_INFO_UPDATED: ON_MESSAGE_THREAD_INFO_UPDATED,
  ON_MESSAGE_UPDATED: ON_MESSAGE_UPDATED,
  ON_REACTION_UPDATED: ON_REACTION_UPDATED,
  ON_TYPING_STATUS_UPDATED: ON_TYPING_STATUS_UPDATED,
  RESEND_MESSAGE_START: RESEND_MESSAGE_START,
  RESET_MESSAGES: RESET_MESSAGES,
  SEND_MESSAGE_FAILURE: SEND_MESSAGE_FAILURE,
  SEND_MESSAGE_START: SEND_MESSAGE_START,
  SEND_MESSAGE_SUCCESS: SEND_MESSAGE_SUCCESS,
  SET_CHANNEL_INVALID: SET_CHANNEL_INVALID,
  SET_CURRENT_CHANNEL: SET_CURRENT_CHANNEL,
  SET_EMOJI_CONTAINER: SET_EMOJI_CONTAINER
});


//# sourceMappingURL=bundle-gNs_MAJh.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-Dk5y6RzJ.js
var bundle_Dk5y6RzJ_isEmpty = function (val) { return (val === null || val === undefined); };
// Some Ids return string and number inconsistently
// only use to compare IDs
function compareIds(a, b) {
    if (bundle_Dk5y6RzJ_isEmpty(a) || bundle_Dk5y6RzJ_isEmpty(b)) {
        return false;
    }
    var aString = a.toString();
    var bString = b.toString();
    return aString === bString;
}


//# sourceMappingURL=bundle-Dk5y6RzJ.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B3xB7_P4.js







// For legacy
// These are not used for collections(GroupChannel)
var PREV_RESULT_SIZE = 30;
var NEXT_RESULT_SIZE = 15;

function useInitialMessagesFetch(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, initialTimeStamp = _a.initialTimeStamp, userFilledMessageListQuery = _a.userFilledMessageListQuery, replyType = _a.replyType, setIsScrolled = _a.setIsScrolled;
    var logger = _b.logger, scrollRef = _b.scrollRef, messagesDispatcher = _b.messagesDispatcher;
    var channelUrl = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url;
    /**
     * useCallback(() => {}, [currentGroupChannel]) was buggy, that is why we did
     * const channelUrl = currentGroupChannel && currentGroupChannel.url;
     * useCallback(() => {}, [channelUrl])
     * Again, this hook is supposed to execute when currentGroupChannel changes
     * The 'channelUrl' here is not the same memory reference from Conversation.props
     */
    var fetchMessages = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        logger.info('Channel useInitialMessagesFetch: Setup started', currentGroupChannel);
        setIsScrolled(false);
        messagesDispatcher({
            type: RESET_MESSAGES,
            payload: null,
        });
        if (currentGroupChannel && (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.getMessagesByTimestamp)) {
            var messageListParams_1 = {
                prevResultSize: PREV_RESULT_SIZE,
                isInclusive: true,
                includeReactions: true,
                includeMetaArray: true,
            };
            if (initialTimeStamp) {
                messageListParams_1.nextResultSize = NEXT_RESULT_SIZE;
            }
            if (replyType === 'QUOTE_REPLY' || replyType === 'THREAD') {
                messageListParams_1.includeThreadInfo = true;
                messageListParams_1.includeParentMessageInfo = true;
                messageListParams_1.replyType = _bundle_0b1520ed["Fb" /* ax */].ONLY_REPLY_TO_CHANNEL;
            }
            if (userFilledMessageListQuery) {
                Object.keys(userFilledMessageListQuery).forEach(function (key) {
                    // @ts-ignore
                    messageListParams_1[key] = userFilledMessageListQuery[key];
                });
            }
            if ((replyType
                && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD'))
                || userFilledMessageListQuery) {
                logger.info('Channel useInitialMessagesFetch: Setup messageListParams', messageListParams_1);
                messagesDispatcher({
                    type: MESSAGE_LIST_PARAMS_CHANGED,
                    payload: messageListParams_1,
                });
            }
            logger.info('Channel: Fetching messages', { currentGroupChannel: currentGroupChannel, userFilledMessageListQuery: userFilledMessageListQuery });
            messagesDispatcher({
                type: FETCH_INITIAL_MESSAGES_START,
                payload: null,
            });
            currentGroupChannel
                .getMessagesByTimestamp(initialTimeStamp || new Date().getTime(), messageListParams_1)
                .then(function (messages) {
                messagesDispatcher({
                    type: FETCH_INITIAL_MESSAGES_SUCCESS,
                    payload: {
                        currentGroupChannel: currentGroupChannel,
                        messages: messages,
                    },
                });
            })
                .catch(function (error) {
                logger.error('Channel: Fetching messages failed', error);
                messagesDispatcher({
                    type: FETCH_INITIAL_MESSAGES_FAILURE,
                    payload: { currentGroupChannel: currentGroupChannel },
                });
            })
                .finally(function () {
                if (!initialTimeStamp) {
                    setTimeout(function () { return scrollIntoLast(0, scrollRef, setIsScrolled); }, bundle_DhBuJR0w["h" /* a */]);
                }
                else {
                    setTimeout(function () {
                        scrollToRenderedMessage(scrollRef, initialTimeStamp, setIsScrolled);
                    }, 500);
                }
            });
        }
    }, [channelUrl, userFilledMessageListQuery, initialTimeStamp]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        fetchMessages();
    }, [fetchMessages]);
    return fetchMessages;
}


//# sourceMappingURL=bundle-B3xB7_P4.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-BYyMnx0z.js


function useReconnectOnIdle(isOnline, currentGroupChannel, reconnectOnIdle) {
    if (reconnectOnIdle === void 0) { reconnectOnIdle = true; }
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isTabHidden = _a[0], setIsTabHidden = _a[1];
    var wasOffline = !isOnline;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var handleVisibilityChange = function () {
            if (reconnectOnIdle) {
                setIsTabHidden(document.hidden);
            }
        };
        document.addEventListener('visibilitychange', handleVisibilityChange);
        return function () {
            document.removeEventListener('visibilitychange', handleVisibilityChange);
        };
    }, [reconnectOnIdle, document.hidden]);
    var shouldReconnect = wasOffline && !!currentGroupChannel && !isTabHidden;
    return { shouldReconnect: shouldReconnect };
}


//# sourceMappingURL=bundle-BYyMnx0z.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-sX9kxwmI.js






var bundle_sX9kxwmI_getNicknamesMapFromMembers = function (members) {
    if (members === void 0) { members = []; }
    var nicknamesMap = new Map();
    for (var memberIndex = 0; memberIndex < members.length; memberIndex += 1) {
        var _a = members[memberIndex], userId = _a.userId, nickname = _a.nickname;
        nicknamesMap.set(userId, nickname);
    }
    return nicknamesMap;
};
var getParentMessageFrom = function (message) {
    if (!message) {
        return null;
    }
    if (isParentMessage(message)) {
        return message;
    }
    if (bundle_sX9kxwmI_isThreadMessage(message)) {
        return (message === null || message === void 0 ? void 0 : message.parentMessage) || null;
    }
    return null;
};
var isParentMessage = function (message) {
    return ((message === null || message === void 0 ? void 0 : message.parentMessage) === null
        && typeof (message === null || message === void 0 ? void 0 : message.parentMessageId) === 'number'
        && !(message === null || message === void 0 ? void 0 : message.parentMessageId));
};
var bundle_sX9kxwmI_isThreadMessage = function (message) {
    return ((message === null || message === void 0 ? void 0 : message.parentMessage) !== null
        && typeof (message === null || message === void 0 ? void 0 : message.parentMessageId) === 'number'
        && (message === null || message === void 0 ? void 0 : message.parentMessageId) > 0
        && (message === null || message === void 0 ? void 0 : message.threadInfo) === null);
};
var bundle_sX9kxwmI_isAboutSame = function (a, b, px) { return (Math.abs(a - b) <= px); };
var bundle_sX9kxwmI_isEmpty = function (val) { return (val === null || val === undefined); };
// Some Ids return string and number inconsistently
// only use to comapre IDs
function bundle_sX9kxwmI_compareIds(a, b) {
    if (bundle_sX9kxwmI_isEmpty(a) || bundle_sX9kxwmI_isEmpty(b)) {
        return false;
    }
    var aString = a.toString();
    var bString = b.toString();
    return aString === bString;
}
var bundle_sX9kxwmI_scrollIntoLast = function (intialTry) {
    if (intialTry === void 0) { intialTry = 0; }
    var MAX_TRIES = 10;
    var currentTry = intialTry;
    if (currentTry > MAX_TRIES) {
        return;
    }
    try {
        var scrollDOM = document.querySelector('.sendbird-thread-ui--scroll');
        // eslint-disable-next-line no-multi-assign
        if (scrollDOM) {
            scrollDOM.scrollTop = scrollDOM.scrollHeight;
        }
    }
    catch (error) {
        setTimeout(function () {
            bundle_sX9kxwmI_scrollIntoLast(currentTry + 1);
        }, 500 * currentTry);
    }
};

/**
 * pubSub is used instead of messagesDispatcher to avoid redundantly calling
 * because this useSendMultipleFilesMessage is used in the Channel and Thread both
 */
var useSendMultipleFilesMessage = function (_a, _b) {
    var currentChannel = _a.currentChannel, onBeforeSendMultipleFilesMessage = _a.onBeforeSendMultipleFilesMessage, publishingModules = _a.publishingModules;
    var logger = _b.logger, pubSub = _b.pubSub, scrollRef = _b.scrollRef;
    var sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (files, quoteMessage) {
        return new Promise(function (resolve, reject) {
            if (!currentChannel) {
                logger.warning('Channel: Sending MFm failed, because currentChannel is null.', { currentChannel: currentChannel });
                reject();
            }
            if (files.length <= 1) {
                logger.warning('Channel: Sending MFM failed, because there are no multiple files.', { files: files });
                reject();
            }
            var messageParams = {
                fileInfoList: files.map(function (file) { return ({
                    file: file,
                    fileName: file.name,
                    fileSize: file.size,
                    mimeType: file.type,
                }); }),
            };
            if (quoteMessage) {
                messageParams.isReplyToChannel = true;
                messageParams.parentMessageId = quoteMessage.messageId;
            }
            if (typeof onBeforeSendMultipleFilesMessage === 'function') {
                messageParams = onBeforeSendMultipleFilesMessage(files, quoteMessage);
            }
            logger.info('Channel: Start sending MFM', { messageParams: messageParams });
            try {
                currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendMultipleFilesMessage(messageParams).onFileUploaded(function (requestId, index, uploadableFileInfo, error) {
                    logger.info('Channel: onFileUploaded during sending MFM', {
                        requestId: requestId,
                        index: index,
                        error: error,
                        uploadableFileInfo: uploadableFileInfo,
                    });
                    pubSub.publish(pubSubTopics.ON_FILE_INFO_UPLOADED, {
                        response: {
                            channelUrl: currentChannel.url,
                            requestId: requestId,
                            index: index,
                            uploadableFileInfo: uploadableFileInfo,
                            error: error,
                        },
                        publishingModules: publishingModules,
                    });
                }).onPending(function (pendingMessage) {
                    logger.info('Channel: in progress of sending MFM', { pendingMessage: pendingMessage, fileInfoList: messageParams.fileInfoList });
                    pubSub.publish(pubSubTopics.SEND_MESSAGE_START, {
                        message: pendingMessage,
                        channel: currentChannel,
                        publishingModules: publishingModules,
                    });
                    setTimeout(function () {
                        if (scrollRef && shouldPubSubPublishToChannel(publishingModules)) {
                            scrollIntoLast(0, scrollRef);
                        }
                        if (shouldPubSubPublishToThread(publishingModules)) {
                            bundle_sX9kxwmI_scrollIntoLast(0);
                        }
                    }, bundle_DhBuJR0w["i" /* b */]);
                }).onFailed(function (error, failedMessage) {
                    logger.error('Channel: Sending MFM failed.', { error: error, failedMessage: failedMessage });
                    pubSub.publish(pubSubTopics.SEND_MESSAGE_FAILED, {
                        channel: currentChannel,
                        message: failedMessage,
                        publishingModules: publishingModules,
                    });
                    reject(error);
                }).onSucceeded(function (succeededMessage) {
                    logger.info('Channel: Sending voice message success!', { succeededMessage: succeededMessage });
                    pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {
                        channel: currentChannel,
                        message: succeededMessage,
                        publishingModules: publishingModules,
                    });
                    resolve(succeededMessage);
                });
            }
            catch (error) {
                logger.error('Channel: Sending MFM failed.', { error: error });
                reject(error);
            }
        });
    }, [
        currentChannel,
        onBeforeSendMultipleFilesMessage,
        publishingModules,
    ]);
    return [sendMessage];
};


//# sourceMappingURL=bundle-sX9kxwmI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/context.js

























var context_initialState = {
    initialized: false,
    loading: true,
    allMessages: [],
    /**
     * localMessages: pending & failed messages
     */
    localMessages: [],
    currentGroupChannel: null,
    // for scrollup
    hasMorePrev: false,
    oldestMessageTimeStamp: 0,
    // for scroll down
    // onScrollDownCallback is added for navigation to different timestamps on messageSearch
    // hasMorePrev, onScrollCallback -> scroll up(default behavior)
    // hasMoreNext, onScrollDownCallback -> scroll down
    hasMoreNext: false,
    latestMessageTimeStamp: 0,
    emojiContainer: { emojiCategories: [], emojiHash: '' },
    /** @deprecated Please use `unreadSinceDate` instead. * */
    unreadSince: null,
    /**
     * unreadSinceDate is a date information about message unread.
     * It's used only for the {unreadSinceDate && <UnreadCount unreadSinceDate={unreadSinceDate} />}
     */
    unreadSinceDate: null,
    isInvalid: false,
    readStatus: null,
    messageListParams: null,
    typingMembers: [],
};

var getOldestMessageTimeStamp = function (messages) {
    if (messages === void 0) { messages = []; }
    var oldestMessage = messages[0];
    return (oldestMessage && oldestMessage.createdAt) || null;
};
var getLatestMessageTimeStamp = function (messages) {
    if (messages === void 0) { messages = []; }
    var latestMessage = messages[messages.length - 1];
    return (latestMessage && latestMessage.createdAt) || null;
};
function hasReqId(message) {
    return 'reqId' in message;
}
function channelReducer(state, action) {
    return K(action)
        .with({ type: RESET_MESSAGES }, function () {
        return __assign(__assign({}, state), { 
            // when user switches channel, if the previous channel `hasMorePrev`
            // the onScroll gets called twice, setting hasMorePrev false prevents this
            hasMorePrev: false, hasMoreNext: false, allMessages: [], localMessages: [] });
    })
        .with({ type: FETCH_INITIAL_MESSAGES_START }, function () {
        return __assign(__assign({}, state), { loading: true, allMessages: state.allMessages.filter(function (m) { return bundle_janisM9b_isSendableMessage(m)
                ? m.sendingStatus !== _bundle_0b1520ed["vb" /* an */].SUCCEEDED
                : true; }), localMessages: [] });
    })
        .with({ type: FETCH_INITIAL_MESSAGES_SUCCESS }, function (action) {
        var _a;
        var _b = action.payload, currentGroupChannel = _b.currentGroupChannel, messages = _b.messages;
        if (!((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) === ((_a = state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url))) {
            return state;
        }
        var oldestMessageTimeStamp = getOldestMessageTimeStamp(messages);
        var latestMessageTimeStamp = getLatestMessageTimeStamp(messages);
        return __assign(__assign({}, state), { loading: false, initialized: true, hasMorePrev: true, hasMoreNext: true, oldestMessageTimeStamp: oldestMessageTimeStamp, latestMessageTimeStamp: latestMessageTimeStamp, allMessages: __spreadArray([], messages, true) });
    })
        .with({ type: FETCH_PREV_MESSAGES_SUCCESS }, function (action) {
        var _a, _b, _c, _d;
        var _e = action.payload, currentGroupChannel = _e.currentGroupChannel, messages = _e.messages;
        if (!((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) === ((_a = state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url))) {
            return state;
        }
        var hasMorePrev = ((_b = messages === null || messages === void 0 ? void 0 : messages.length) !== null && _b !== void 0 ? _b : 0)
            >= ((_d = (_c = state === null || state === void 0 ? void 0 : state.messageListParams) === null || _c === void 0 ? void 0 : _c.prevResultSize) !== null && _d !== void 0 ? _d : PREV_RESULT_SIZE) + 1;
        var oldestMessageTimeStamp = getOldestMessageTimeStamp(messages);
        // Remove duplicated messages
        var duplicatedMessageIds = [];
        var updatedOldMessages = state.allMessages.map(function (msg) {
            var duplicatedMessage = messages.find(function (_a) {
                var messageId = _a.messageId;
                return compareIds(messageId, msg.messageId);
            });
            if (!duplicatedMessage) {
                return msg;
            }
            duplicatedMessageIds.push(duplicatedMessage.messageId);
            return duplicatedMessage.updatedAt > msg.updatedAt
                ? duplicatedMessage
                : msg;
        });
        var filteredNewMessages = duplicatedMessageIds.length > 0
            ? messages.filter(function (msg) { return !duplicatedMessageIds.find(function (messageId) { return compareIds(messageId, msg.messageId); }); })
            : messages;
        return __assign(__assign({}, state), { hasMorePrev: hasMorePrev, oldestMessageTimeStamp: oldestMessageTimeStamp, allMessages: __spreadArray(__spreadArray([], filteredNewMessages, true), updatedOldMessages, true) });
    })
        .with({ type: FETCH_NEXT_MESSAGES_SUCCESS }, function (action) {
        var _a, _b, _c, _d;
        var _e = action.payload, currentGroupChannel = _e.currentGroupChannel, messages = _e.messages;
        if (!((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) === ((_a = state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url))) {
            return state;
        }
        var hasMoreNext = ((_b = messages === null || messages === void 0 ? void 0 : messages.length) !== null && _b !== void 0 ? _b : 0)
            === ((_d = (_c = state === null || state === void 0 ? void 0 : state.messageListParams) === null || _c === void 0 ? void 0 : _c.nextResultSize) !== null && _d !== void 0 ? _d : NEXT_RESULT_SIZE) + 1;
        var latestMessageTimeStamp = getLatestMessageTimeStamp(messages);
        // sort ~
        var sortedMessages = mergeAndSortMessages(state.allMessages, messages);
        return __assign(__assign({}, state), { hasMoreNext: hasMoreNext, latestMessageTimeStamp: latestMessageTimeStamp, allMessages: sortedMessages });
    })
        .with({
        type: bundle_janisM9b_S.union(FETCH_INITIAL_MESSAGES_FAILURE, FETCH_PREV_MESSAGES_FAILURE, FETCH_NEXT_MESSAGES_FAILURE),
    }, function (action) {
        var _a;
        var currentGroupChannel = action.payload.currentGroupChannel;
        if ((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) !== ((_a = state === null || state === void 0 ? void 0 : state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url))
            return state;
        // It shows something went wrong screen when fetching initial messages failed.
        var shouldInvalid = [FETCH_INITIAL_MESSAGES_FAILURE].includes(action.type);
        return __assign(__assign({}, state), { loading: false, isInvalid: shouldInvalid, initialized: false, allMessages: [], hasMorePrev: false, hasMoreNext: false, oldestMessageTimeStamp: null, latestMessageTimeStamp: null });
    })
        .with({ type: SEND_MESSAGE_START }, function (action) {
        // Message should not be spread here
        // it will loose some methods like `isUserMessage`
        return __assign(__assign({}, state), { localMessages: __spreadArray(__spreadArray([], state.localMessages, true), [action.payload], false) });
    })
        .with({ type: SEND_MESSAGE_SUCCESS }, function (action) {
        var message = action.payload;
        /**
         * Admin messages do not have reqId. We need to include them.
         */
        var filteredMessages = state.allMessages.filter(function (m) { return !hasReqId(m) || (m === null || m === void 0 ? void 0 : m.reqId) !== (message === null || message === void 0 ? void 0 : message.reqId); });
        // [Policy] Pending messages and failed messages
        // must always be at the end of the message list
        return __assign(__assign({}, state), { allMessages: __spreadArray(__spreadArray([], filteredMessages, true), [message], false), localMessages: state.localMessages.filter(function (m) { return hasReqId(m) && (m === null || m === void 0 ? void 0 : m.reqId) !== (message === null || message === void 0 ? void 0 : message.reqId); }) });
    })
        .with({ type: SEND_MESSAGE_FAILURE }, function (action) {
        // @ts-ignore
        action.payload.failed = true;
        return __assign(__assign({}, state), { localMessages: state.localMessages.map(function (m) { return compareIds(hasReqId(m) && m.reqId, action.payload.reqId)
                ? action.payload
                : m; }) });
    })
        .with({ type: SET_CURRENT_CHANNEL }, function (action) {
        return __assign(__assign({}, state), { currentGroupChannel: action.payload, isInvalid: false });
    })
        .with({ type: SET_CHANNEL_INVALID }, function () {
        return __assign(__assign({}, state), { currentGroupChannel: null, allMessages: [], localMessages: [], isInvalid: true });
    })
        .with({ type: ON_MESSAGE_RECEIVED }, function (action) {
        var _a, _b;
        var _c = action.payload, channel = _c.channel, message = _c.message;
        var members = channel.members;
        var sender = message.sender;
        var currentGroupChannel = state.currentGroupChannel;
        var currentGroupChannelUrl = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url;
        if (!compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentGroupChannelUrl)) {
            return state;
        }
        // Excluded overlapping messages
        if (state.allMessages.some(function (msg) { return msg.messageId === message.messageId; })) {
            return state;
        }
        // Filter by userFilledQuery
        if (state.messageListParams
            && !filterMessageListParams(state.messageListParams, message)) {
            return state;
        }
        if (message.isAdminMessage && message.isAdminMessage()) {
            return __assign(__assign({}, state), { allMessages: passUnsuccessfullMessages(state.allMessages, message) });
        }
        // Update members when sender profileUrl, nickname, friendName has been changed
        var senderMember = members === null || members === void 0 ? void 0 : members.find(function (m) { return (m === null || m === void 0 ? void 0 : m.userId) === (sender === null || sender === void 0 ? void 0 : sender.userId); });
        if ((senderMember === null || senderMember === void 0 ? void 0 : senderMember.profileUrl) !== (sender === null || sender === void 0 ? void 0 : sender.profileUrl)
            || (senderMember === null || senderMember === void 0 ? void 0 : senderMember.friendName) !== (sender === null || sender === void 0 ? void 0 : sender.friendName)
            || (senderMember === null || senderMember === void 0 ? void 0 : senderMember.nickname) !== (sender === null || sender === void 0 ? void 0 : sender.nickname)) {
            // @ts-ignore
            channel.members = members.map(function (member) {
                if (member.userId === sender.userId) {
                    return sender;
                }
                return member;
            });
        }
        return __assign(__assign({}, state), { currentGroupChannel: channel, unreadSince: (_a = state.unreadSince) !== null && _a !== void 0 ? _a : format(new Date(), 'p MMM dd'), unreadSinceDate: (_b = state.unreadSinceDate) !== null && _b !== void 0 ? _b : new Date(), allMessages: passUnsuccessfullMessages(state.allMessages, message) });
    })
        .with({ type: ON_MESSAGE_UPDATED }, function (action) {
        var _a;
        var _b = action.payload, channel = _b.channel, message = _b.message;
        var currentGroupChannelUrl = ((_a = state === null || state === void 0 ? void 0 : state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url) || '';
        if (!compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentGroupChannelUrl)) {
            return state; // Ignore event when it is not for the current channel
        }
        if (state.messageListParams
            && !filterMessageListParams(state.messageListParams, message)) {
            // Delete the message if it doesn't match to the params anymore
            return __assign(__assign({}, state), { allMessages: state.allMessages.filter(function (m) { return !compareIds(m.messageId, message === null || message === void 0 ? void 0 : message.messageId); }) });
        }
        return __assign(__assign({}, state), { allMessages: state.allMessages.map(function (m) {
                if (compareIds(m.messageId, message.messageId)) {
                    return message;
                }
                if (compareIds(m.parentMessageId, message.messageId)) {
                    m.parentMessage = message; // eslint-disable-line no-param-reassign
                }
                return m;
            }) });
    })
        .with({ type: ON_MESSAGE_THREAD_INFO_UPDATED }, function (action) {
        var _a;
        var _b = action.payload, channel = _b.channel, event = _b.event;
        var channelUrl = event.channelUrl, threadInfo = event.threadInfo, targetMessageId = event.targetMessageId;
        var currentGroupChannelUrl = ((_a = state === null || state === void 0 ? void 0 : state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url) || '';
        if (!compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentGroupChannelUrl)
            || !compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            return state; // Ignore event when it is not for the current channel
        }
        return __assign(__assign({}, state), { allMessages: state.allMessages.map(function (m) {
                if (compareIds(m.messageId, targetMessageId)) {
                    // eslint-disable-next-line no-param-reassign
                    m.threadInfo = threadInfo; // Upsert threadInfo to the target message
                }
                return m;
            }) });
    })
        .with({ type: RESEND_MESSAGE_START }, function (action) {
        return __assign(__assign({}, state), { localMessages: state.localMessages.map(function (m) { return compareIds(hasReqId(m) && m.reqId, action.payload.reqId)
                ? action.payload
                : m; }) });
    })
        .with({ type: MARK_AS_READ }, function (action) {
        var _a, _b, _c;
        if (((_a = state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url) !== ((_c = (_b = action.payload) === null || _b === void 0 ? void 0 : _b.channel) === null || _c === void 0 ? void 0 : _c.url)) {
            return state;
        }
        return __assign(__assign({}, state), { unreadSince: null, unreadSinceDate: null });
    })
        .with({ type: ON_MESSAGE_DELETED }, function (action) {
        return __assign(__assign({}, state), { allMessages: state.allMessages.filter(function (m) { return !compareIds(m.messageId, action.payload); }) });
    })
        .with({ type: ON_MESSAGE_DELETED_BY_REQ_ID }, function (action) {
        return __assign(__assign({}, state), { localMessages: state.localMessages.filter(function (m) { return !compareIds(hasReqId(m) && m.reqId, action.payload); }) });
    })
        .with({ type: SET_EMOJI_CONTAINER }, function (action) {
        return __assign(__assign({}, state), { emojiContainer: action.payload });
    })
        .with({ type: ON_REACTION_UPDATED }, function (action) {
        return __assign(__assign({}, state), { allMessages: state.allMessages.map(function (m) {
                if (compareIds(m.messageId, action.payload.messageId)) {
                    if (m.applyReactionEvent
                        && typeof m.applyReactionEvent === 'function') {
                        m.applyReactionEvent(action.payload);
                    }
                    return m;
                }
                return m;
            }) });
    })
        .with({ type: MESSAGE_LIST_PARAMS_CHANGED }, function (action) {
        return __assign(__assign({}, state), { messageListParams: action.payload });
    })
        .with({ type: ON_FILE_INFO_UPLOADED }, function (action) {
        var _a, _b;
        var _c = action.payload, channelUrl = _c.channelUrl, requestId = _c.requestId, index = _c.index, uploadableFileInfo = _c.uploadableFileInfo, error = _c.error;
        if (!compareIds(channelUrl, (_a = state === null || state === void 0 ? void 0 : state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url)) {
            return state;
        }
        /**
         * We don't have to do anything here because
         * onFailed() will be called so handle error there instead.
         */
        if (error)
            return state;
        var localMessages = state.localMessages;
        var messageToUpdate = localMessages.find(function (message) { return compareIds(hasReqId(message) && message.reqId, requestId); });
        var fileInfoList = (_b = messageToUpdate
            .messageParams) === null || _b === void 0 ? void 0 : _b.fileInfoList;
        if (Array.isArray(fileInfoList)) {
            fileInfoList[index] = uploadableFileInfo;
        }
        return __assign(__assign({}, state), { localMessages: localMessages });
    })
        .with({ type: ON_TYPING_STATUS_UPDATED }, function (action) {
        var _a;
        var _b = action.payload, channel = _b.channel, typingMembers = _b.typingMembers;
        if (!compareIds(channel.url, (_a = state === null || state === void 0 ? void 0 : state.currentGroupChannel) === null || _a === void 0 ? void 0 : _a.url)) {
            return state;
        }
        return __assign(__assign({}, state), { typingMembers: typingMembers });
    })
        .otherwise(function () { return state; });
}

var DELIVERY_RECEIPT = 'delivery_receipt';
function useHandleChannelEvents(_a, _b) {
    var _c, _d, _e;
    var sdkInit = _a.sdkInit, currentGroupChannel = _a.currentGroupChannel, disableMarkAsRead = _a.disableMarkAsRead;
    var sdk = _b.sdk, logger = _b.logger, scrollRef = _b.scrollRef, setQuoteMessage = _b.setQuoteMessage, messagesDispatcher = _b.messagesDispatcher;
    var store = useSendbirdStateContext();
    var _f = store.config, markAsReadScheduler = _f.markAsReadScheduler, markAsDeliveredScheduler = _f.markAsDeliveredScheduler, disableMarkAsDelivered = _f.disableMarkAsDelivered;
    var canSetMarkAsDelivered = (_e = (_d = (_c = store.stores.sdkStore.sdk) === null || _c === void 0 ? void 0 : _c.appInfo) === null || _d === void 0 ? void 0 : _d.premiumFeatureList) === null || _e === void 0 ? void 0 : _e.find(function (feature) { return (feature === DELIVERY_RECEIPT); });
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        var channelUrl = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url;
        var channelHandlerId = uuidv4();
        if (channelUrl && sdkInit) {
            var channelHandler = {
                onMessageReceived: function (channel, message) {
                    var _a, _b;
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        var scrollToEnd = false;
                        try {
                            var current = scrollRef.current;
                            if (current) {
                                scrollToEnd = current.offsetHeight + current.scrollTop >= current.scrollHeight - 10;
                            }
                            // 10 is a buffer
                        }
                        catch (error) {
                            //
                        }
                        logger.info('Channel | useHandleChannelEvents: onMessageReceived', message);
                        messagesDispatcher({
                            type: ON_MESSAGE_RECEIVED,
                            payload: { channel: channel, message: message },
                        });
                        if (scrollToEnd
                            && ((_a = document.getElementById('sendbird-dropdown-portal')) === null || _a === void 0 ? void 0 : _a.childElementCount) === 0
                            && ((_b = document.getElementById('sendbird-emoji-list-portal')) === null || _b === void 0 ? void 0 : _b.childElementCount) === 0) {
                            // and !openContextMenu
                            try {
                                setTimeout(function () { return scrollIntoLast(0, scrollRef); });
                                if (!disableMarkAsRead) {
                                    markAsReadScheduler.push(currentGroupChannel);
                                }
                                if (canSetMarkAsDelivered && !disableMarkAsDelivered) {
                                    markAsDeliveredScheduler.push(currentGroupChannel);
                                }
                            }
                            catch (error) {
                                logger.warning('Channel | onMessageReceived | scroll to end failed');
                            }
                        }
                    }
                },
                onUnreadMemberStatusUpdated: function (channel) {
                    logger.info('Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated', channel);
                    if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                // before(onDeliveryReceiptUpdated)
                onUndeliveredMemberStatusUpdated: function (channel) {
                    if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onDeliveryReceiptUpdated', channel);
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onMessageUpdated: function (channel, message) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onMessageUpdated', message);
                        messagesDispatcher({
                            type: ON_MESSAGE_UPDATED,
                            payload: { channel: channel, message: message },
                        });
                    }
                },
                onThreadInfoUpdated: function (channel, threadInfoUpdateEvent) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onThreadInfoUpdated', { channel: channel, threadInfoUpdateEvent: threadInfoUpdateEvent });
                        messagesDispatcher({
                            type: ON_MESSAGE_THREAD_INFO_UPDATED,
                            payload: { channel: channel, event: threadInfoUpdateEvent },
                        });
                    }
                },
                onMessageDeleted: function (channel, messageId) {
                    logger.info('Channel | useHandleChannelEvents: onMessageDeleted', { channel: channel, messageId: messageId });
                    setQuoteMessage(null);
                    messagesDispatcher({
                        type: ON_MESSAGE_DELETED,
                        payload: messageId,
                    });
                },
                onReactionUpdated: function (channel, reactionEvent) {
                    logger.info('Channel | useHandleChannelEvents: onReactionUpdated', { channel: channel, reactionEvent: reactionEvent });
                    messagesDispatcher({
                        type: ON_REACTION_UPDATED,
                        payload: reactionEvent,
                    });
                },
                onChannelChanged: function (channel) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onChannelChanged', channel);
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onChannelFrozen: function (channel) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onChannelFrozen', channel);
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onChannelUnfrozen: function (channel) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onChannelUnFrozen', channel);
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onUserMuted: function (channel, user) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onUserMuted', { channel: channel, user: user });
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onUserUnmuted: function (channel, user) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onUserUnmuted', { channel: channel, user: user });
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onUserBanned: function (channel, user) {
                    var _a;
                    if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl) && channel.isGroupChannel()) {
                        logger.info('Channel | useHandleChannelEvents: onUserBanned', { channel: channel, user: user });
                        var isByMe = (user === null || user === void 0 ? void 0 : user.userId) === ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: isByMe ? null : channel,
                        });
                    }
                },
                onOperatorUpdated: function (channel, users) {
                    if (channel.isGroupChannel() && compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onOperatorUpdated', { channel: channel, users: users });
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: channel,
                        });
                    }
                },
                onUserLeft: function (channel, user) {
                    var _a;
                    if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | useHandleChannelEvents: onUserLeft', { channel: channel, user: user });
                        var isByMe = (user === null || user === void 0 ? void 0 : user.userId) === ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                        messagesDispatcher({
                            type: SET_CURRENT_CHANNEL,
                            payload: isByMe ? null : channel,
                        });
                    }
                },
                onTypingStatusUpdated: function (channel) {
                    if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
                        logger.info('Channel | onTypingStatusUpdated', { channel: channel });
                        var typingMembers = channel.getTypingUsers();
                        messagesDispatcher({
                            type: ON_TYPING_STATUS_UPDATED,
                            payload: {
                                channel: channel,
                                typingMembers: typingMembers,
                            },
                        });
                    }
                },
            };
            logger.info('Channel | useHandleChannelEvents: Setup event handler', { channelHandlerId: channelHandlerId, channelHandler: channelHandler });
            // Add this group channel handler to the Sendbird chat instance
            (_a = sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.addGroupChannelHandler(channelHandlerId, new groupChannel_We(channelHandler));
        }
        return function () {
            var _a;
            if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler) {
                logger.info('Channel | useHandleChannelEvents: Removing message reciver handler', channelHandlerId);
                sdk.groupChannel.removeGroupChannelHandler(channelHandlerId);
            }
            else if (sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) {
                logger.error('Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler');
            }
        };
    }, [currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url, sdkInit]);
}

function useGetChannel(_a, _b) {
    var channelUrl = _a.channelUrl, sdkInit = _a.sdkInit, disableMarkAsRead = _a.disableMarkAsRead;
    var messagesDispatcher = _b.messagesDispatcher, sdk = _b.sdk, logger = _b.logger, markAsReadScheduler = _b.markAsReadScheduler;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (channelUrl && sdkInit && sdk && sdk.groupChannel) {
            logger.info('Channel | useSetChannel fetching channel', channelUrl);
            sdk.groupChannel
                .getChannel(channelUrl)
                .then(function (groupChannel) {
                logger.info('Channel | useSetChannel fetched channel', groupChannel);
                messagesDispatcher({
                    type: SET_CURRENT_CHANNEL,
                    payload: groupChannel,
                });
                logger.info('Channel: Mark as read', groupChannel);
                if (!disableMarkAsRead) {
                    markAsReadScheduler.push(groupChannel);
                }
            })
                .catch(function (e) {
                logger.warning('Channel | useSetChannel fetch channel failed', { channelUrl: channelUrl, e: e });
                messagesDispatcher({
                    type: SET_CHANNEL_INVALID,
                });
            });
            sdk
                .getAllEmoji()
                .then(function (emojiContainer_) {
                logger.info('Channel: Getting emojis success', emojiContainer_);
                messagesDispatcher({
                    type: SET_EMOJI_CONTAINER,
                    payload: emojiContainer_,
                });
            })
                .catch(function (err) {
                logger.error('Channel: Getting emojis failed', err);
            });
        }
    }, [channelUrl, sdkInit]);
}

function useHandleReconnect(_a, _b) {
    var isOnline = _a.isOnline, replyType = _a.replyType, disableMarkAsRead = _a.disableMarkAsRead, reconnectOnIdle = _a.reconnectOnIdle;
    var logger = _b.logger, sdk = _b.sdk, scrollRef = _b.scrollRef, currentGroupChannel = _b.currentGroupChannel, messagesDispatcher = _b.messagesDispatcher, markAsReadScheduler = _b.markAsReadScheduler, userFilledMessageListQuery = _b.userFilledMessageListQuery;
    var shouldReconnect = useReconnectOnIdle(isOnline, currentGroupChannel, reconnectOnIdle).shouldReconnect;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        return function () {
            var _a, _b, _c;
            // state changed from offline to online AND tab is visible
            if (shouldReconnect) {
                logger.info('Refreshing conversation state');
                var isReactionEnabled = ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.useReaction) || false;
                var messageListParams_1 = {
                    prevResultSize: PREV_RESULT_SIZE,
                    isInclusive: true,
                    includeReactions: isReactionEnabled,
                    includeMetaArray: true,
                    nextResultSize: NEXT_RESULT_SIZE,
                };
                if (replyType && replyType === 'QUOTE_REPLY') {
                    messageListParams_1.includeThreadInfo = true;
                    messageListParams_1.includeParentMessageInfo = true;
                    messageListParams_1.replyType = _bundle_0b1520ed["Fb" /* ax */].ONLY_REPLY_TO_CHANNEL;
                }
                if (userFilledMessageListQuery) {
                    Object.keys(userFilledMessageListQuery).forEach(function (key) {
                        // @ts-ignore
                        messageListParams_1[key] = userFilledMessageListQuery[key];
                    });
                }
                logger.info('Channel: Fetching messages', { currentGroupChannel: currentGroupChannel, userFilledMessageListQuery: userFilledMessageListQuery });
                messagesDispatcher({
                    type: FETCH_INITIAL_MESSAGES_START,
                    payload: null,
                });
                (_b = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _b === void 0 ? void 0 : _b.getChannel((_c = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) !== null && _c !== void 0 ? _c : '').then(function (groupChannel) {
                    var lastMessageTime = new Date().getTime();
                    groupChannel.getMessagesByTimestamp(lastMessageTime, messageListParams_1)
                        .then(function (messages) {
                        messagesDispatcher({
                            type: FETCH_INITIAL_MESSAGES_SUCCESS,
                            payload: {
                                currentGroupChannel: groupChannel,
                                messages: messages,
                            },
                        });
                        setTimeout(function () { return scrollIntoLast(0, scrollRef); }, bundle_DhBuJR0w["h" /* a */]);
                    })
                        .catch(function (error) {
                        logger.error('Channel: Fetching messages failed', error);
                        messagesDispatcher({
                            type: FETCH_INITIAL_MESSAGES_FAILURE,
                            payload: { currentGroupChannel: groupChannel },
                        });
                    });
                    if (!disableMarkAsRead) {
                        markAsReadScheduler.push(groupChannel);
                    }
                });
            }
        };
    }, [shouldReconnect, replyType]);
}

function useScrollCallback(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, oldestMessageTimeStamp = _a.oldestMessageTimeStamp, userFilledMessageListQuery = _a.userFilledMessageListQuery, replyType = _a.replyType;
    var hasMorePrev = _b.hasMorePrev, logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, sdk = _b.sdk;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (callback) {
        var _a, _b;
        if (!hasMorePrev) {
            return;
        }
        var messageListParams = {
            prevResultSize: PREV_RESULT_SIZE,
            isInclusive: true,
            includeMetaArray: true,
            includeReactions: (_b = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.useReaction) !== null && _b !== void 0 ? _b : false,
        };
        if (replyType === 'QUOTE_REPLY' || replyType === 'THREAD') {
            messageListParams.includeThreadInfo = true;
            messageListParams.includeParentMessageInfo = true;
            messageListParams.replyType = _bundle_0b1520ed["Fb" /* ax */].ONLY_REPLY_TO_CHANNEL;
        }
        if (userFilledMessageListQuery) {
            Object.keys(userFilledMessageListQuery).forEach(function (key) {
                // @ts-ignore
                messageListParams[key] = userFilledMessageListQuery[key];
            });
        }
        logger.info('Channel: Fetching messages', {
            currentGroupChannel: currentGroupChannel,
            userFilledMessageListQuery: userFilledMessageListQuery,
        });
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.getMessagesByTimestamp(oldestMessageTimeStamp || new Date().getTime(), messageListParams).then(function (messages) {
            messagesDispatcher({
                type: FETCH_PREV_MESSAGES_SUCCESS,
                payload: { currentGroupChannel: currentGroupChannel, messages: messages },
            });
            if (callback)
                setTimeout(function () { return callback(); });
        }).catch(function () {
            messagesDispatcher({
                type: FETCH_PREV_MESSAGES_FAILURE,
                payload: { currentGroupChannel: currentGroupChannel },
            });
        });
    }, [currentGroupChannel, oldestMessageTimeStamp, replyType]);
}

function useScrollDownCallback(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, latestMessageTimeStamp = _a.latestMessageTimeStamp, userFilledMessageListQuery = _a.userFilledMessageListQuery, hasMoreNext = _a.hasMoreNext, replyType = _a.replyType;
    var logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, sdk = _b.sdk;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (cb) {
        var _a, _b;
        if (!hasMoreNext) {
            return;
        }
        var isReactionEnabled = (_b = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.useReaction) !== null && _b !== void 0 ? _b : false;
        var messageListParams = {
            nextResultSize: NEXT_RESULT_SIZE,
            isInclusive: true,
            includeReactions: isReactionEnabled,
            includeMetaArray: true,
        };
        if (replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD')) {
            messageListParams.includeThreadInfo = true;
            messageListParams.includeParentMessageInfo = true;
            messageListParams.replyType = _bundle_0b1520ed["Fb" /* ax */].ONLY_REPLY_TO_CHANNEL;
        }
        if (userFilledMessageListQuery) {
            Object.keys(userFilledMessageListQuery).forEach(function (key) {
                // @ts-ignore
                messageListParams[key] = userFilledMessageListQuery[key];
            });
        }
        logger.info('Channel: Fetching later messages', { currentGroupChannel: currentGroupChannel, userFilledMessageListQuery: userFilledMessageListQuery });
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.getMessagesByTimestamp(latestMessageTimeStamp || new Date().getTime(), messageListParams).then(function (messages) {
            messagesDispatcher({
                type: FETCH_NEXT_MESSAGES_SUCCESS,
                payload: { currentGroupChannel: currentGroupChannel, messages: messages },
            });
            setTimeout(function () { return cb([messages, null]); });
        }).catch(function (error) {
            logger.error('Channel: Fetching later messages failed', error);
            messagesDispatcher({
                type: FETCH_NEXT_MESSAGES_FAILURE,
                payload: { currentGroupChannel: currentGroupChannel },
            });
            setTimeout(function () { return cb([null, error]); });
        });
    }, [currentGroupChannel, latestMessageTimeStamp, hasMoreNext, replyType]);
}

function useDeleteMessageCallback(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, messagesDispatcher = _a.messagesDispatcher;
    var logger = _b.logger;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (message) {
        logger.info('Channel | useDeleteMessageCallback: Deleting message', message);
        var sendingStatus = bundle_janisM9b_isSendableMessage(message) ? message.sendingStatus : undefined;
        return new Promise(function (resolve, reject) {
            logger.info('Channel | useDeleteMessageCallback: Deleting message requestState:', sendingStatus);
            // Message is only on local
            if ((sendingStatus === _bundle_0b1520ed["vb" /* an */].FAILED || sendingStatus === _bundle_0b1520ed["vb" /* an */].PENDING) && 'reqId' in message) {
                logger.info('Channel | useDeleteMessageCallback: Deleted message from local:', message);
                messagesDispatcher({
                    type: ON_MESSAGE_DELETED_BY_REQ_ID,
                    payload: message.reqId,
                });
                resolve();
            }
            else {
                logger.info('Channel | useDeleteMessageCallback: Deleting message from remote:', sendingStatus);
                currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.deleteMessage(message).then(function () {
                    logger.info('Channel | useDeleteMessageCallback: Deleting message success!', message);
                    messagesDispatcher({
                        type: ON_MESSAGE_DELETED,
                        payload: message.messageId,
                    });
                    resolve();
                }).catch(function (err) {
                    logger.warning('Channel | useDeleteMessageCallback: Deleting message failed!', err);
                    reject(err);
                });
            }
        });
    }, [currentGroupChannel, messagesDispatcher]);
}

function useUpdateMessageCallback(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, messagesDispatcher = _a.messagesDispatcher, onBeforeUpdateUserMessage = _a.onBeforeUpdateUserMessage, isMentionEnabled = _a.isMentionEnabled;
    var logger = _b.logger, pubSub = _b.pubSub;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (props, callback) {
        var messageId = props.messageId, message = props.message, mentionedUsers = props.mentionedUsers, mentionTemplate = props.mentionTemplate;
        var createParamsDefault = function (message) {
            var params = {
                message: message,
            };
            if (isMentionEnabled && mentionedUsers && mentionedUsers.length > 0) {
                params.mentionedUsers = mentionedUsers;
            }
            if (isMentionEnabled && mentionTemplate) {
                params.mentionedMessageTemplate = mentionTemplate;
            }
            else {
                params.mentionedMessageTemplate = message;
            }
            return params;
        };
        var shouldCreateCustomParams = onBeforeUpdateUserMessage && typeof onBeforeUpdateUserMessage === 'function';
        if (shouldCreateCustomParams) {
            logger.info('Channel: creating params using onBeforeUpdateUserMessage', onBeforeUpdateUserMessage);
        }
        var params = shouldCreateCustomParams ? onBeforeUpdateUserMessage(message) : createParamsDefault(message);
        logger.info('Channel: Updating message!', params);
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.updateUserMessage(messageId, params).then(function (msg) {
            if (callback) {
                callback(null, msg);
            }
            logger.info('Channel: Updating message success!', msg);
            messagesDispatcher({
                type: ON_MESSAGE_UPDATED,
                payload: {
                    channel: currentGroupChannel,
                    message: msg,
                },
            });
            pubSub.publish(pubSubTopics.UPDATE_USER_MESSAGE, {
                message: msg,
                channel: currentGroupChannel,
                publishingModules: [PublishingModuleType.CHANNEL],
            });
        }).catch(function (err) {
            if (callback) {
                callback(err, null);
            }
        });
    }, [currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url, messagesDispatcher, onBeforeUpdateUserMessage]);
}

function useResendMessageCallback(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, messagesDispatcher = _a.messagesDispatcher;
    var logger = _b.logger, pubSub = _b.pubSub;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (failedMessage) {
        logger.info('Channel: Resending message has started', failedMessage);
        if (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isResendable) {
            // userMessage
            if (failedMessage.isUserMessage()) {
                currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.resendMessage(failedMessage).onPending(function (message) {
                    logger.info('Channel: Resending message start!', message);
                    messagesDispatcher({
                        type: RESEND_MESSAGE_START,
                        payload: message,
                    });
                }).onSucceeded(function (message) {
                    logger.info('Channel: Resending message success!', message);
                    messagesDispatcher({
                        type: SEND_MESSAGE_SUCCESS,
                        payload: message,
                    });
                }).onFailed(function (e, message) {
                    logger.warning('Channel: Resending message failed!', e);
                    messagesDispatcher({
                        type: SEND_MESSAGE_FAILURE,
                        payload: message,
                    });
                });
            }
            else if (failedMessage.isFileMessage()) {
                currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.resendMessage(failedMessage).onPending(function (message) {
                    logger.info('Channel: Resending file message start!', message);
                    messagesDispatcher({
                        type: RESEND_MESSAGE_START,
                        payload: message,
                    });
                }).onSucceeded(function (message) {
                    logger.info('Channel: Resending file message success!', message);
                    messagesDispatcher({
                        type: SEND_MESSAGE_SUCCESS,
                        payload: message,
                    });
                }).onFailed(function (e, message) {
                    logger.warning('Channel: Resending file message failed!', e);
                    messagesDispatcher({
                        type: SEND_MESSAGE_FAILURE,
                        payload: message,
                    });
                });
            }
            else if (failedMessage.isMultipleFilesMessage()) {
                currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.resendMessage(failedMessage).onPending(function (message) {
                    logger.info('Channel: Resending multiple files message start!', message);
                    messagesDispatcher({
                        type: RESEND_MESSAGE_START,
                        payload: message,
                    });
                }).onFileUploaded(function (requestId, index, uploadableFileInfo, error) {
                    var _a;
                    logger.info('Channel: Resending multiple files message file uploaded!', {
                        requestId: requestId,
                        index: index,
                        error: error,
                        uploadableFileInfo: uploadableFileInfo,
                    });
                    pubSub.publish(pubSubTopics.ON_FILE_INFO_UPLOADED, {
                        response: {
                            channelUrl: (_a = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) !== null && _a !== void 0 ? _a : '',
                            requestId: requestId,
                            index: index,
                            uploadableFileInfo: uploadableFileInfo,
                            error: error,
                        },
                        publishingModules: [PublishingModuleType.CHANNEL],
                    });
                }).onSucceeded(function (message) {
                    logger.info('Channel: Resending multiple files message success!', message);
                    messagesDispatcher({
                        type: SEND_MESSAGE_SUCCESS,
                        payload: message,
                    });
                }).onFailed(function (e, message) {
                    logger.warning('Channel: Resending multiple files message failed!', e);
                    messagesDispatcher({
                        type: SEND_MESSAGE_FAILURE,
                        payload: message,
                    });
                });
            }
        }
        else {
            logger.error('Message is not resendable', failedMessage);
        }
    }, [currentGroupChannel, messagesDispatcher]);
}

function useSendMessageCallback(_a, _b) {
    var isMentionEnabled = _a.isMentionEnabled, currentGroupChannel = _a.currentGroupChannel, onBeforeSendUserMessage = _a.onBeforeSendUserMessage;
    var logger = _b.logger, pubSub = _b.pubSub, scrollRef = _b.scrollRef, messagesDispatcher = _b.messagesDispatcher;
    var messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (_a) {
        var quoteMessage = _a.quoteMessage, message = _a.message, mentionTemplate = _a.mentionTemplate, 
        // mentionedUserIds,
        mentionedUsers = _a.mentionedUsers;
        var createParamsDefault = function () {
            var params = {
                message: message,
            };
            // if (isMentionEnabled && mentionedUserIds?.length > 0) {
            if (isMentionEnabled && mentionedUsers && mentionedUsers.length > 0) {
                // params.mentionedUserIds = mentionedUserIds;
                params.mentionedUsers = mentionedUsers;
            }
            // if (isMentionEnabled && mentionTemplate && mentionedUserIds?.length > 0) {
            if (isMentionEnabled && mentionTemplate && mentionedUsers && mentionedUsers.length > 0) {
                params.mentionedMessageTemplate = mentionTemplate;
            }
            if (quoteMessage) {
                params.isReplyToChannel = true;
                params.parentMessageId = quoteMessage.messageId;
            }
            return params;
        };
        var shouldCreateCustomParams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';
        if (shouldCreateCustomParams) {
            logger.info('Channel: creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);
        }
        var params = shouldCreateCustomParams ? onBeforeSendUserMessage(message, quoteMessage) : createParamsDefault();
        logger.info('Channel: Sending message has started', params);
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.sendUserMessage(params).onPending(function (pendingMsg) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_START, {
                /* pubSub is used instead of messagesDispatcher
                  to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
                message: pendingMsg,
                channel: currentGroupChannel,
                publishingModules: [PublishingModuleType.CHANNEL],
            });
            setTimeout(function () { return scrollIntoLast(0, scrollRef); }, bundle_DhBuJR0w["i" /* b */]);
        }).onFailed(function (err, msg) {
            logger.warning('Channel: Sending message failed!', { message: msg, error: err });
            messagesDispatcher({
                type: SEND_MESSAGE_FAILURE,
                payload: msg,
            });
        }).onSucceeded(function (msg) {
            logger.info('Channel: Sending message success!', msg);
            messagesDispatcher({
                type: SEND_MESSAGE_SUCCESS,
                payload: msg,
            });
        });
    }, [currentGroupChannel, onBeforeSendUserMessage]);
    return [messageInputRef, sendMessage];
}

function useSendFileMessageCallback(_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, onBeforeSendFileMessage = _a.onBeforeSendFileMessage, imageCompression = _a.imageCompression;
    var logger = _b.logger, pubSub = _b.pubSub, scrollRef = _b.scrollRef, messagesDispatcher = _b.messagesDispatcher;
    var sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (compressedFile, quoteMessage) { return new Promise(function (resolve, reject) {
        // Create FileMessageParams
        var params = onBeforeSendFileMessage === null || onBeforeSendFileMessage === void 0 ? void 0 : onBeforeSendFileMessage(compressedFile, quoteMessage);
        if (!params) {
            params = { file: compressedFile };
            if (quoteMessage) {
                params.isReplyToChannel = true;
                params.parentMessageId = quoteMessage.messageId;
            }
        }
        // Send FileMessage
        logger.info('Channel: Uploading file message start!', params);
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.sendFileMessage(params).onPending(function (pendingMessage) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_START, {
                /* pubSub is used instead of messagesDispatcher
                  to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
                // TODO: remove data pollution
                message: __assign(__assign({}, pendingMessage), { url: URL.createObjectURL(compressedFile), 
                    // pending thumbnail message seems to be failed
                    requestState: 'pending', isUserMessage: pendingMessage.isUserMessage, isFileMessage: pendingMessage.isFileMessage, isAdminMessage: pendingMessage.isAdminMessage, isMultipleFilesMessage: pendingMessage.isMultipleFilesMessage }),
                channel: currentGroupChannel,
                publishingModules: [PublishingModuleType.CHANNEL],
            });
            setTimeout(function () { return scrollIntoLast(0, scrollRef); }, bundle_DhBuJR0w["i" /* b */]);
        }).onFailed(function (err, failedMessage) {
            logger.error('Channel: Sending file message failed!', { failedMessage: failedMessage, err: err });
            // TODO: v4 - remove logic that modifies the original object.
            //  It makes the code difficult to track, likely causing unpredictable side effects.
            // @ts-ignore eslint-disable-next-line no-param-reassign
            failedMessage.localUrl = URL.createObjectURL(compressedFile);
            // @ts-ignore eslint-disable-next-line no-param-reassign
            failedMessage.file = compressedFile;
            messagesDispatcher({
                type: SEND_MESSAGE_FAILURE,
                payload: failedMessage,
            });
            reject(err);
        }).onSucceeded(function (succeededMessage) {
            logger.info('Channel: Sending file message success!', succeededMessage);
            messagesDispatcher({
                type: SEND_MESSAGE_SUCCESS,
                payload: succeededMessage,
            });
            resolve(succeededMessage);
        });
    }); }, [currentGroupChannel, onBeforeSendFileMessage, imageCompression]);
    return [sendMessage];
}

// To prevent multiple clicks on the message in the channel while scrolling
function deactivateClick(scrollRef) {
    var element = scrollRef.current;
    var parentNode = element === null || element === void 0 ? void 0 : element.parentNode;
    if (element && parentNode) {
        element.style.pointerEvents = 'none';
        parentNode.style.cursor = 'wait';
    }
}
function activateClick(scrollRef) {
    var element = scrollRef.current;
    var parentNode = element === null || element === void 0 ? void 0 : element.parentNode;
    if (element && parentNode) {
        element.style.pointerEvents = 'auto';
        parentNode.style.cursor = 'auto';
    }
}
function useScrollToMessage(_a, _b) {
    var setInitialTimeStamp = _a.setInitialTimeStamp, setAnimatedMessageId = _a.setAnimatedMessageId, allMessages = _a.allMessages, scrollRef = _a.scrollRef;
    var logger = _b.logger;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (createdAt, messageId) {
        var isPresent = allMessages.find(function (m) { return (m.messageId === messageId); });
        setAnimatedMessageId(null);
        setTimeout(function () {
            try {
                logger.info('Channel: scroll to message - disabling mouse events');
                deactivateClick(scrollRef);
                if (isPresent) {
                    logger.info('Channel: scroll to message - message is present');
                    setAnimatedMessageId(messageId);
                    scrollToRenderedMessage(scrollRef, createdAt);
                }
                else {
                    logger.info('Channel: scroll to message - fetching older messages');
                    setInitialTimeStamp(null);
                    setInitialTimeStamp(createdAt);
                    setAnimatedMessageId(messageId);
                }
            }
            finally {
                logger.info('Channel: scroll to message - enabled mouse events');
                activateClick(scrollRef);
            }
        });
    }, [
        setInitialTimeStamp,
        setAnimatedMessageId,
        allMessages,
    ]);
}

var useSendVoiceMessageCallback = function (_a, _b) {
    var currentGroupChannel = _a.currentGroupChannel, onBeforeSendVoiceMessage = _a.onBeforeSendVoiceMessage;
    var logger = _b.logger, pubSub = _b.pubSub, scrollRef = _b.scrollRef, messagesDispatcher = _b.messagesDispatcher;
    var sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (file, duration, quoteMessage) { return new Promise(function (resolve, reject) {
        if (!currentGroupChannel) {
            return;
        }
        var messageParams = (onBeforeSendVoiceMessage && typeof onBeforeSendVoiceMessage === 'function')
            ? onBeforeSendVoiceMessage(file, quoteMessage)
            : {
                file: file,
                fileName: bundle_DhBuJR0w["n" /* g */],
                mimeType: bundle_DhBuJR0w["o" /* h */],
                metaArrays: [
                    new _bundle_dc8db3c3_je({
                        key: bundle_DhBuJR0w["d" /* M */],
                        value: ["".concat(duration)],
                    }),
                    new _bundle_dc8db3c3_je({
                        key: bundle_DhBuJR0w["p" /* i */],
                        value: [bundle_DhBuJR0w["q" /* j */]],
                    }),
                ],
            };
        if (quoteMessage) {
            messageParams.isReplyToChannel = true;
            messageParams.parentMessageId = quoteMessage.messageId;
        }
        logger.info('Channel: Start sending voice message', messageParams);
        currentGroupChannel.sendFileMessage(messageParams)
            .onPending(function (pendingMessage) {
            pubSub.publish(pubSubTopics.SEND_MESSAGE_START, {
                /* pubSub is used instead of messagesDispatcher
                  to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
                message: pendingMessage,
                channel: currentGroupChannel,
                publishingModules: [PublishingModuleType.CHANNEL],
            });
            setTimeout(function () { return scrollIntoLast(0, scrollRef); }, bundle_DhBuJR0w["i" /* b */]);
        })
            .onFailed(function (err, failedMessage) {
            logger.error('Channel: Sending voice message failed!', { failedMessage: failedMessage, err: err });
            messagesDispatcher({
                type: SEND_MESSAGE_FAILURE,
                payload: failedMessage,
            });
            reject(err);
        })
            .onSucceeded(function (succeededMessage) {
            logger.info('Channel: Sending voice message success!', succeededMessage);
            messagesDispatcher({
                type: SEND_MESSAGE_SUCCESS,
                payload: succeededMessage,
            });
            resolve(succeededMessage);
        });
    }); }, [
        currentGroupChannel,
        onBeforeSendVoiceMessage,
    ]);
    return [sendMessage];
};

var useHandleChannelPubsubEvents = function (_a) {
    var channelUrl = _a.channelUrl, sdkInit = _a.sdkInit, pubSub = _a.pubSub, dispatcher = _a.dispatcher, scrollRef = _a.scrollRef;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var subscriber = new Map();
        if (pubSub === null || pubSub === void 0 ? void 0 : pubSub.subscribe) {
            subscriber.set(PUBSUB_TOPICS.SEND_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_USER_MESSAGE, function (props) {
                var channel = props.channel, message = props.message;
                if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    dispatcher({
                        type: SEND_MESSAGE_SUCCESS,
                        payload: message,
                    });
                    setTimeout(function () { return scrollIntoLast(0, scrollRef); }, bundle_DhBuJR0w["i" /* b */]);
                }
            }));
            subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_START, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_START, function (props) {
                var channel = props.channel, message = props.message, publishingModules = props.publishingModules;
                if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url) && shouldPubSubPublishToChannel(publishingModules)) {
                    dispatcher({
                        type: SEND_MESSAGE_START,
                        payload: message,
                    });
                }
            }));
            subscriber.set(PUBSUB_TOPICS.ON_FILE_INFO_UPLOADED, pubSub.subscribe(PUBSUB_TOPICS.ON_FILE_INFO_UPLOADED, function (props) {
                var response = props.response, publishingModules = props.publishingModules;
                if (channelUrl === response.channelUrl && shouldPubSubPublishToChannel(publishingModules)) {
                    dispatcher({
                        type: ON_FILE_INFO_UPLOADED,
                        payload: response,
                    });
                }
            }));
            subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, function (props) {
                var channel = props.channel, message = props.message, publishingModules = props.publishingModules;
                if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url) && shouldPubSubPublishToChannel(publishingModules)) {
                    dispatcher({
                        type: SEND_MESSAGE_FAILURE,
                        payload: message,
                    });
                }
            }));
            subscriber.set(PUBSUB_TOPICS.SEND_FILE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_FILE_MESSAGE, function (props) {
                var channel = props.channel, message = props.message;
                if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    dispatcher({
                        type: SEND_MESSAGE_SUCCESS,
                        payload: message,
                    });
                    setTimeout(function () { return scrollIntoLast(0, scrollRef); }, bundle_DhBuJR0w["i" /* b */]);
                }
            }));
            subscriber.set(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, function (props) {
                var channel = props.channel, message = props.message, fromSelector = props.fromSelector;
                if (fromSelector && (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) && channel.isGroupChannel()) {
                    dispatcher({
                        type: ON_MESSAGE_UPDATED,
                        payload: { channel: channel, message: message },
                    });
                }
            }));
            subscriber.set(PUBSUB_TOPICS.DELETE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.DELETE_MESSAGE, function (props) {
                var channel = props.channel, messageId = props.messageId;
                if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    dispatcher({
                        type: ON_MESSAGE_DELETED,
                        payload: messageId,
                    });
                }
            }));
        }
        return function () {
            subscriber.forEach(function (s) {
                try {
                    s.remove();
                }
                catch (_a) {
                    //
                }
            });
        };
    }, [
        channelUrl,
        sdkInit,
    ]);
};

var ChannelContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var ChannelProvider = function (props) {
    var _a, _b, _c, _d, _e, _f, _g;
    var channelUrl = props.channelUrl, children = props.children, isReactionEnabled = props.isReactionEnabled, _h = props.isMessageGroupingEnabled, isMessageGroupingEnabled = _h === void 0 ? true : _h, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, showSearchIcon = props.showSearchIcon, animatedMessage = props.animatedMessage, highlightedMessage = props.highlightedMessage, startingPoint = props.startingPoint, onBeforeSendUserMessage = props.onBeforeSendUserMessage, onBeforeSendFileMessage = props.onBeforeSendFileMessage, onBeforeUpdateUserMessage = props.onBeforeUpdateUserMessage, onBeforeSendVoiceMessage = props.onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage = props.onBeforeSendMultipleFilesMessage, onChatHeaderActionClick = props.onChatHeaderActionClick, onSearchClick = props.onSearchClick, onBackClick = props.onBackClick, threadReplySelectType = props.threadReplySelectType, queries = props.queries, filterMessageList = props.filterMessageList, _j = props.disableMarkAsRead, disableMarkAsRead = _j === void 0 ? false : _j, onReplyInThread = props.onReplyInThread, onQuoteMessageClick = props.onQuoteMessageClick, onMessageAnimated = props.onMessageAnimated, onMessageHighlighted = props.onMessageHighlighted, _k = props.scrollBehavior, scrollBehavior = _k === void 0 ? 'auto' : _k, _l = props.reconnectOnIdle, reconnectOnIdle = _l === void 0 ? true : _l;
    var globalStore = useSendbirdStateContext();
    var config = globalStore.config;
    var replyType = (_a = props.replyType) !== null && _a !== void 0 ? _a : getCaseResolvedReplyType(config.groupChannel.replyType).upperCase;
    var pubSub = config.pubSub, logger = config.logger, userId = config.userId, isOnline = config.isOnline, imageCompression = config.imageCompression, onUserProfileMessage = config.onUserProfileMessage, markAsReadScheduler = config.markAsReadScheduler, groupChannel = config.groupChannel;
    var sdk = (_c = (_b = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _b === void 0 ? void 0 : _b.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;
    var sdkInit = (_e = (_d = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _d === void 0 ? void 0 : _d.sdkStore) === null || _e === void 0 ? void 0 : _e.initialized;
    var globalConfigs = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config;
    var _m = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(startingPoint), initialTimeStamp = _m[0], setInitialTimeStamp = _m[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setInitialTimeStamp(startingPoint);
    }, [startingPoint, channelUrl]);
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), animatedMessageId = _o[0], setAnimatedMessageId = _o[1];
    var _p = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(highlightedMessage), highLightedMessageId = _p[0], setHighLightedMessageId = _p[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setHighLightedMessageId(highlightedMessage);
    }, [highlightedMessage]);
    var userFilledMessageListQuery = queries === null || queries === void 0 ? void 0 : queries.messageListParams;
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), quoteMessage = _q[0], setQuoteMessage = _q[1];
    var _r = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isScrolled = _r[0], setIsScrolled = _r[1];
    var _s = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(channelReducer, context_initialState), messagesStore = _s[0], messagesDispatcher = _s[1];
    var scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var isMentionEnabled = groupChannel.enableMention;
    var allMessages = messagesStore.allMessages, localMessages = messagesStore.localMessages, loading = messagesStore.loading, initialized = messagesStore.initialized, unreadSince = messagesStore.unreadSince, unreadSinceDate = messagesStore.unreadSinceDate, isInvalid = messagesStore.isInvalid, currentGroupChannel = messagesStore.currentGroupChannel, hasMorePrev = messagesStore.hasMorePrev, oldestMessageTimeStamp = messagesStore.oldestMessageTimeStamp, hasMoreNext = messagesStore.hasMoreNext, latestMessageTimeStamp = messagesStore.latestMessageTimeStamp, emojiContainer = messagesStore.emojiContainer, readStatus = messagesStore.readStatus, typingMembers = messagesStore.typingMembers;
    var usingReaction = getIsReactionEnabled({
        channel: currentGroupChannel,
        config: config,
        moduleLevel: isReactionEnabled,
    });
    var emojiAllMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return (usingReaction
        ? getAllEmojisMapFromEmojiContainer(emojiContainer)
        : new Map()); }, [emojiContainer]);
    var nicknamesMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return ((usingReaction && currentGroupChannel)
        ? getNicknamesMapFromMembers(currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.members)
        : new Map()); }, [currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.members]);
    // Animate message
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (animatedMessage) {
            setAnimatedMessageId(animatedMessage);
        }
    }, [animatedMessage]);
    // Scrollup is default scroll for channel
    var onScrollCallback = useScrollCallback({
        currentGroupChannel: currentGroupChannel,
        oldestMessageTimeStamp: oldestMessageTimeStamp,
        userFilledMessageListQuery: userFilledMessageListQuery,
        replyType: replyType,
    }, {
        hasMorePrev: hasMorePrev,
        logger: logger,
        messagesDispatcher: messagesDispatcher,
        sdk: sdk,
    });
    var scrollToMessage = useScrollToMessage({
        setInitialTimeStamp: setInitialTimeStamp,
        setAnimatedMessageId: setAnimatedMessageId,
        allMessages: allMessages,
        scrollRef: scrollRef,
    }, { logger: logger });
    // onScrollDownCallback is added for navigation to different timestamps on messageSearch
    // hasMorePrev, onScrollCallback -> scroll up(default behavior)
    // hasMoreNext, onScrollDownCallback -> scroll down
    var onScrollDownCallback = useScrollDownCallback({
        currentGroupChannel: currentGroupChannel,
        latestMessageTimeStamp: latestMessageTimeStamp,
        userFilledMessageListQuery: userFilledMessageListQuery,
        hasMoreNext: hasMoreNext,
        replyType: replyType,
    }, {
        logger: logger,
        messagesDispatcher: messagesDispatcher,
        sdk: sdk,
    });
    var toggleReaction = useToggleReactionCallback(currentGroupChannel, logger);
    // to create message-datasource
    // this hook sets currentGroupChannel asynchronously
    useGetChannel({ channelUrl: channelUrl, sdkInit: sdkInit, disableMarkAsRead: disableMarkAsRead }, { messagesDispatcher: messagesDispatcher, sdk: sdk, logger: logger, markAsReadScheduler: markAsReadScheduler });
    // to set quote message as null
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setQuoteMessage(null);
    }, [channelUrl]);
    // Hook to handle ChannelEvents and send values to useReducer using messagesDispatcher
    useHandleChannelEvents({
        currentGroupChannel: currentGroupChannel,
        sdkInit: sdkInit,
        currentUserId: userId,
        disableMarkAsRead: disableMarkAsRead,
    }, {
        messagesDispatcher: messagesDispatcher,
        sdk: sdk,
        logger: logger,
        scrollRef: scrollRef,
        setQuoteMessage: setQuoteMessage,
    });
    // hook that fetches messages when channel changes
    // to be clear here useGetChannel sets currentGroupChannel
    // and useInitialMessagesFetch executes when currentGroupChannel changes
    // p.s This one executes on initialTimeStamp change too
    useInitialMessagesFetch({
        currentGroupChannel: currentGroupChannel,
        userFilledMessageListQuery: userFilledMessageListQuery,
        initialTimeStamp: initialTimeStamp,
        replyType: replyType,
        setIsScrolled: setIsScrolled,
    }, {
        logger: logger,
        scrollRef: scrollRef,
        messagesDispatcher: messagesDispatcher,
    });
    // handles API calls from withSendbird
    useHandleChannelPubsubEvents({
        channelUrl: channelUrl,
        sdkInit: sdkInit,
        pubSub: pubSub,
        dispatcher: messagesDispatcher,
        scrollRef: scrollRef,
    });
    // handling connection breaks
    useHandleReconnect({ isOnline: isOnline, replyType: replyType, disableMarkAsRead: disableMarkAsRead, reconnectOnIdle: reconnectOnIdle }, {
        logger: logger,
        sdk: sdk,
        scrollRef: scrollRef,
        currentGroupChannel: currentGroupChannel,
        messagesDispatcher: messagesDispatcher,
        userFilledMessageListQuery: userFilledMessageListQuery,
        markAsReadScheduler: markAsReadScheduler,
    });
    // callbacks for Message CURD actions
    var deleteMessage = useDeleteMessageCallback({ currentGroupChannel: currentGroupChannel, messagesDispatcher: messagesDispatcher }, { logger: logger });
    var updateMessage = useUpdateMessageCallback({ currentGroupChannel: currentGroupChannel, messagesDispatcher: messagesDispatcher, onBeforeUpdateUserMessage: onBeforeUpdateUserMessage, isMentionEnabled: isMentionEnabled }, { logger: logger, pubSub: pubSub });
    var resendMessage = useResendMessageCallback({ currentGroupChannel: currentGroupChannel, messagesDispatcher: messagesDispatcher }, { logger: logger, pubSub: pubSub });
    var _t = useSendMessageCallback({
        currentGroupChannel: currentGroupChannel,
        isMentionEnabled: isMentionEnabled,
        onBeforeSendUserMessage: onBeforeSendUserMessage,
    }, {
        logger: logger,
        pubSub: pubSub,
        scrollRef: scrollRef,
        messagesDispatcher: messagesDispatcher,
    }), messageInputRef = _t[0], sendMessage = _t[1];
    var sendFileMessage = useSendFileMessageCallback({
        currentGroupChannel: currentGroupChannel,
        imageCompression: imageCompression,
        onBeforeSendFileMessage: onBeforeSendFileMessage,
    }, {
        logger: logger,
        pubSub: pubSub,
        scrollRef: scrollRef,
        messagesDispatcher: messagesDispatcher,
    })[0];
    var sendVoiceMessage = useSendVoiceMessageCallback({
        currentGroupChannel: currentGroupChannel,
        onBeforeSendVoiceMessage: onBeforeSendVoiceMessage,
    }, {
        logger: logger,
        pubSub: pubSub,
        scrollRef: scrollRef,
        messagesDispatcher: messagesDispatcher,
    })[0];
    var sendMultipleFilesMessage = useSendMultipleFilesMessage({
        currentChannel: currentGroupChannel,
        onBeforeSendMultipleFilesMessage: onBeforeSendMultipleFilesMessage,
        publishingModules: [PublishingModuleType.CHANNEL],
    }, {
        logger: logger,
        pubSub: pubSub,
        scrollRef: scrollRef,
    })[0];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelContext.Provider, { value: {
            // props
            channelUrl: channelUrl,
            isReactionEnabled: usingReaction,
            isMessageGroupingEnabled: isMessageGroupingEnabled,
            isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled,
            showSearchIcon: showSearchIcon !== null && showSearchIcon !== void 0 ? showSearchIcon : globalConfigs.groupChannelSettings.enableMessageSearch,
            highlightedMessage: highlightedMessage,
            startingPoint: startingPoint,
            onBeforeSendUserMessage: onBeforeSendUserMessage,
            onBeforeSendFileMessage: onBeforeSendFileMessage,
            onBeforeUpdateUserMessage: onBeforeUpdateUserMessage,
            onChatHeaderActionClick: onChatHeaderActionClick,
            onSearchClick: onSearchClick,
            onBackClick: onBackClick,
            replyType: replyType,
            threadReplySelectType: (_f = threadReplySelectType !== null && threadReplySelectType !== void 0 ? threadReplySelectType : getCaseResolvedThreadReplySelectType(groupChannel.threadReplySelectType).upperCase) !== null && _f !== void 0 ? _f : ThreadReplySelectType.THREAD,
            queries: queries,
            filterMessageList: filterMessageList,
            disableMarkAsRead: disableMarkAsRead,
            onReplyInThread: onReplyInThread,
            onQuoteMessageClick: onQuoteMessageClick,
            onMessageAnimated: onMessageAnimated,
            onMessageHighlighted: onMessageHighlighted,
            // messagesStore
            allMessages: allMessages,
            localMessages: localMessages,
            loading: loading,
            initialized: initialized,
            unreadSince: unreadSince,
            unreadSinceDate: unreadSinceDate,
            isInvalid: isInvalid,
            currentGroupChannel: currentGroupChannel,
            hasMorePrev: hasMorePrev,
            hasMoreNext: hasMoreNext,
            oldestMessageTimeStamp: oldestMessageTimeStamp,
            latestMessageTimeStamp: latestMessageTimeStamp,
            emojiContainer: emojiContainer,
            readStatus: readStatus,
            typingMembers: typingMembers,
            // utils
            scrollToMessage: scrollToMessage,
            quoteMessage: quoteMessage,
            setQuoteMessage: setQuoteMessage,
            deleteMessage: deleteMessage,
            updateMessage: updateMessage,
            resendMessage: resendMessage,
            messageInputRef: messageInputRef,
            sendMessage: sendMessage,
            sendFileMessage: sendFileMessage,
            sendVoiceMessage: sendVoiceMessage,
            sendMultipleFilesMessage: sendMultipleFilesMessage,
            initialTimeStamp: initialTimeStamp,
            messageActionTypes: channelActions,
            messagesDispatcher: messagesDispatcher,
            setInitialTimeStamp: setInitialTimeStamp,
            setAnimatedMessageId: setAnimatedMessageId,
            setHighLightedMessageId: setHighLightedMessageId,
            animatedMessageId: animatedMessageId,
            highLightedMessageId: highLightedMessageId,
            nicknamesMap: nicknamesMap,
            emojiAllMap: emojiAllMap,
            onScrollCallback: onScrollCallback,
            onScrollDownCallback: onScrollDownCallback,
            scrollRef: scrollRef,
            scrollBehavior: scrollBehavior,
            toggleReaction: toggleReaction,
            isScrolled: isScrolled,
            setIsScrolled: setIsScrolled,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { disableUserProfile: (_g = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _g !== void 0 ? _g : !config.common.enableUsingDefaultUserProfile, renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile, onUserProfileMessage: onUserProfileMessage }, children)));
};
var useChannelContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ChannelContext);
    if (!context)
        throw new Error('ChannelContext not found. Use within the Channel module.');
    return context;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/ChannelHeader.js











































var ChannelHeader = function (_a) {
    var className = _a.className;
    var context = useChannelContext();
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelHeaderView, __assign({}, context, { className: className, currentChannel: context.currentGroupChannel })));
};


//# sourceMappingURL=ChannelHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/FileViewer.js














































var components_FileViewer_FileViewer = function (props) {
    var deleteMessage = useChannelContext().deleteMessage;
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewerView, __assign({}, props, { deleteMessage: deleteMessage }));
};


//# sourceMappingURL=FileViewer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/RemoveMessageModal.js












































var RemoveMessageModal_RemoveMessageModal = function (props) {
    var deleteMessage = useChannelContext().deleteMessage;
    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModalView, __assign({}, props, { deleteMessage: deleteMessage }));
};


//# sourceMappingURL=RemoveMessageModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/Message.js






















































































































var Message_Message = function (props) {
    var _a, _b, _c;
    var config = useSendbirdStateContext().config;
    var _d = useChannelContext(), initialized = _d.initialized, currentGroupChannel = _d.currentGroupChannel, animatedMessageId = _d.animatedMessageId, setAnimatedMessageId = _d.setAnimatedMessageId, updateMessage = _d.updateMessage, scrollToMessage = _d.scrollToMessage, replyType = _d.replyType, threadReplySelectType = _d.threadReplySelectType, isReactionEnabled = _d.isReactionEnabled, toggleReaction = _d.toggleReaction, emojiContainer = _d.emojiContainer, nicknamesMap = _d.nicknamesMap, setQuoteMessage = _d.setQuoteMessage, resendMessage = _d.resendMessage, deleteMessage = _d.deleteMessage, renderUserMentionItem = _d.renderUserMentionItem, onReplyInThread = _d.onReplyInThread, onQuoteMessageClick = _d.onQuoteMessageClick, onMessageAnimated = _d.onMessageAnimated, sendMessage = _d.sendMessage, localMessages = _d.localMessages;
    var message = props.message;
    if (!currentGroupChannel)
        return null;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageView, __assign({}, props, { channel: currentGroupChannel, emojiContainer: emojiContainer, editInputDisabled: !initialized || bundle_B9ue8vfn_isDisabledBecauseFrozen(currentGroupChannel) || bundle_B9ue8vfn_isDisabledBecauseMuted(currentGroupChannel) || !config.isOnline, shouldRenderSuggestedReplies: ((_a = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _a === void 0 ? void 0 : _a.enableSuggestedReplies)
            && (((_b = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _b === void 0 ? void 0 : _b.showSuggestedRepliesFor) === 'all_messages'
                ? true
                : message.messageId === ((_c = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.lastMessage) === null || _c === void 0 ? void 0 : _c.messageId))
            // the options should appear only when there's no failed or pending messages
            && (localMessages === null || localMessages === void 0 ? void 0 : localMessages.length) === 0
            && getSuggestedReplies(message).length > 0, isReactionEnabled: isReactionEnabled, replyType: replyType, threadReplySelectType: threadReplySelectType, nicknamesMap: nicknamesMap, renderUserMentionItem: renderUserMentionItem, scrollToMessage: scrollToMessage, toggleReaction: toggleReaction, setQuoteMessage: setQuoteMessage, onQuoteMessageClick: onQuoteMessageClick, onReplyInThreadClick: onReplyInThread, sendUserMessage: function (params) {
            sendMessage({
                message: params.message,
                mentionedUsers: params.mentionedUsers,
                mentionTemplate: params.mentionedMessageTemplate,
            });
        }, updateUserMessage: function (messageId, params) {
            var _a;
            updateMessage({
                messageId: messageId,
                message: (_a = params.message) !== null && _a !== void 0 ? _a : '',
                mentionedUsers: params.mentionedUsers,
                mentionTemplate: params.mentionedMessageTemplate,
            });
        }, resendMessage: resendMessage, deleteMessage: deleteMessage, animatedMessageId: animatedMessageId, setAnimatedMessageId: setAnimatedMessageId, onMessageAnimated: onMessageAnimated, renderFileViewer: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(components_FileViewer_FileViewer, __assign({}, props)); }, renderRemoveMessageModal: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModal_RemoveMessageModal, __assign({}, props)); } })));
};


//# sourceMappingURL=Message.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-B3sFrr1p.js





var DELAY = 100;
function calcScrollBottom(scrollHeight, scrollTop) {
    return scrollHeight - scrollTop;
}
function useHandleOnScrollCallback(_a) {
    var hasMore = _a.hasMore, hasNext = _a.hasNext, onScroll = _a.onScroll, scrollRef = _a.scrollRef, setShowScrollDownButton = _a.setShowScrollDownButton;
    var scrollCb = usePreservedCallback(function () {
        var element = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
        if (element == null)
            return;
        var scrollTop = element.scrollTop, scrollHeight = element.scrollHeight, clientHeight = element.clientHeight;
        // https://sendbird.atlassian.net/browse/SBISSUE-11759
        // the edge case where channel is inside a page that already has scroll
        // scrollintoView will move the whole page, which we dont want
        var scrollBottom = calcScrollBottom(scrollHeight, scrollTop);
        // even if there is more to fetch or not,
        // we still have to show the scroll to bottom button
        if (typeof setShowScrollDownButton === 'function') {
            setShowScrollDownButton(scrollHeight > scrollTop + clientHeight + 1);
        }
        // Load previous messages
        // 1. check if hasMore(hasPrevious) and reached to top
        // 2. load previous messages (onScroll)
        // 3. maintain scroll position (sets the scroll position to the bottom of the new messages)
        if (hasMore && isAboutSame(scrollTop, 0, bundle_DhBuJR0w["f" /* S */])) {
            onScroll(function () {
                var messagesAreAddedToView = element.scrollHeight > scrollHeight;
                if (messagesAreAddedToView)
                    element.scrollTop = element.scrollHeight - scrollBottom;
            });
        }
        // Load next messages
        // 1. check if hasNext and reached to bottom
        // 2. load next messages (onScroll)
        // 3. maintain scroll position (sets the scroll position to the top of the new messages)
        if (hasNext && isAboutSame(clientHeight + scrollTop, scrollHeight, bundle_DhBuJR0w["f" /* S */])) {
            onScroll(function () {
                var messagesAreAddedToView = element.scrollHeight > scrollHeight;
                if (messagesAreAddedToView)
                    element.scrollTop = scrollTop;
            });
        }
    });
    return useThrottleCallback(scrollCb, DELAY, { trailing: true });
}


//# sourceMappingURL=bundle-B3sFrr1p.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/MessageList.js
































































































































var MessageList_DELAY = 100;
function useSetScrollToBottom(_a) {
    var loading = _a.loading;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), scrollBottom = _b[0], setScrollBottom = _b[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (loading) {
            setScrollBottom(0);
        }
    }, [loading]);
    var scrollCb = function (e) {
        var element = e.target;
        try {
            setScrollBottom(element.scrollHeight - element.scrollTop - element.offsetHeight);
        }
        catch (_a) {
            //
        }
    };
    return {
        scrollBottom: scrollBottom,
        scrollToBottomHandler: useThrottleCallback(scrollCb, MessageList_DELAY, { trailing: true }),
    };
}

function useScrollBehavior() {
    var _a = useChannelContext(), scrollRef = _a.scrollRef, _b = _a.scrollBehavior, scrollBehavior = _b === void 0 ? 'auto' : _b;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (scrollRef.current) {
            scrollRef.current.style.scrollBehavior = scrollBehavior;
        }
    }, [scrollRef.current]);
    return null;
}

/* We operate the CSS files for Channel&GroupChannel modules in the GroupChannel */
var SCROLL_BOTTOM_PADDING = 50;
var MessageList_MessageList = function (props) {
    var _a, _b, _c, _d, _e;
    var _f = props.className, className = _f === void 0 ? '' : _f;
    var _g = deleteNullish(props), renderMessage = _g.renderMessage, renderMessageContent = _g.renderMessageContent, renderSuggestedReplies = _g.renderSuggestedReplies, renderCustomSeparator = _g.renderCustomSeparator, _h = _g.renderPlaceholderLoader, renderPlaceholderLoader = _h === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING }); } : _h, _j = _g.renderPlaceholderEmpty, renderPlaceholderEmpty = _j === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-conversation__no-messages", type: PlaceHolderTypes.NO_MESSAGES }); } : _j, _k = _g.renderFrozenNotification, renderFrozenNotification = _k === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FrozenNotification, { className: "sendbird-conversation__messages__notification" }); } : _k;
    var _l = useChannelContext(), allMessages = _l.allMessages, localMessages = _l.localMessages, hasMorePrev = _l.hasMorePrev, hasMoreNext = _l.hasMoreNext, setInitialTimeStamp = _l.setInitialTimeStamp, setAnimatedMessageId = _l.setAnimatedMessageId, setHighLightedMessageId = _l.setHighLightedMessageId, isMessageGroupingEnabled = _l.isMessageGroupingEnabled, scrollRef = _l.scrollRef, onScrollCallback = _l.onScrollCallback, onScrollDownCallback = _l.onScrollDownCallback, messagesDispatcher = _l.messagesDispatcher, messageActionTypes = _l.messageActionTypes, currentGroupChannel = _l.currentGroupChannel, disableMarkAsRead = _l.disableMarkAsRead, filterMessageList = _l.filterMessageList, replyType = _l.replyType, loading = _l.loading, isScrolled = _l.isScrolled, unreadSince = _l.unreadSince, unreadSinceDate = _l.unreadSinceDate, typingMembers = _l.typingMembers;
    var store = useSendbirdStateContext();
    var allMessagesFiltered = typeof filterMessageList === 'function' ? allMessages.filter(filterMessageList) : allMessages;
    var markAsReadScheduler = store.config.markAsReadScheduler;
    var _m = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isScrollBottom = _m[0], setIsScrollBottom = _m[1];
    useScrollBehavior();
    /**
     * @param {function} callback callback from useHandleOnScrollCallback, it adjusts scroll position
     * */
    var onScroll = function (callback) {
        var element = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
        if (element == null) {
            return;
        }
        var scrollTop = element.scrollTop, clientHeight = element.clientHeight, scrollHeight = element.scrollHeight;
        if (hasMorePrev && isAboutSame(scrollTop, 0, bundle_DhBuJR0w["f" /* S */])) {
            onScrollCallback(callback);
        }
        if (hasMoreNext && isAboutSame(clientHeight + scrollTop, scrollHeight, bundle_DhBuJR0w["f" /* S */])) {
            onScrollDownCallback(callback);
        }
        if (!disableMarkAsRead && isAboutSame(clientHeight + scrollTop, scrollHeight, bundle_DhBuJR0w["f" /* S */]) && !!currentGroupChannel) {
            messagesDispatcher({
                type: messageActionTypes.MARK_AS_READ,
                payload: { channel: currentGroupChannel },
            });
            markAsReadScheduler.push(currentGroupChannel);
        }
    };
    var onClickScrollBot = function () {
        var _a, _b;
        setInitialTimeStamp === null || setInitialTimeStamp === void 0 ? void 0 : setInitialTimeStamp(null);
        setAnimatedMessageId === null || setAnimatedMessageId === void 0 ? void 0 : setAnimatedMessageId(null);
        setHighLightedMessageId === null || setHighLightedMessageId === void 0 ? void 0 : setHighLightedMessageId(null);
        if (scrollRef.current && scrollRef.current.scrollTop > -1) {
            scrollRef.current.scrollTop = ((_a = scrollRef.current.scrollHeight) !== null && _a !== void 0 ? _a : 0) - ((_b = scrollRef.current.offsetHeight) !== null && _b !== void 0 ? _b : 0);
        }
    };
    /**
     * 1. Move the messsage list scroll
     *    when each message's height is changed by `reactions` OR `showEdit`
     * 2. Keep the scrollBottom value after fetching new message list
     */
    var moveScroll = function (isBottomMessageAffected) {
        if (isBottomMessageAffected === void 0) { isBottomMessageAffected = false; }
        var current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
        if (current) {
            var bottom = current.scrollHeight - current.scrollTop - current.offsetHeight;
            if (scrollBottom < bottom && (!isBottomMessageAffected || scrollBottom < bundle_DhBuJR0w["f" /* S */])) {
                // Move the scroll as much as the height of the message has changed
                current.scrollTop += bottom - scrollBottom;
            }
        }
    };
    var handleOnScroll = useHandleOnScrollCallback({
        hasMore: hasMorePrev,
        hasNext: hasMoreNext,
        onScroll: onScroll,
        scrollRef: scrollRef,
    });
    var onScrollReachedEndDetector = useOnScrollPositionChangeDetector({
        onReachedBottom: function () {
            /**
             * Note that this event is already being called in onScroll() above. However, it is only being called when
             * hasMoreNext is true but it needs to be called when hasNext is false when reached bottom as well.
             */
            if (!hasMoreNext && !disableMarkAsRead && !!currentGroupChannel) {
                messagesDispatcher({
                    type: messageActionTypes.MARK_AS_READ,
                    payload: { channel: currentGroupChannel },
                });
                markAsReadScheduler.push(currentGroupChannel);
            }
            setIsScrollBottom(true);
        },
        onReachedTop: function () {
            setIsScrollBottom(false);
        },
        onInBetween: function () {
            setIsScrollBottom(false);
        },
    });
    var _o = useSetScrollToBottom({ loading: loading }), scrollToBottomHandler = _o.scrollToBottomHandler, scrollBottom = _o.scrollBottom;
    if (loading) {
        return renderPlaceholderLoader();
    }
    if (allMessagesFiltered.length < 1) {
        return renderPlaceholderEmpty();
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        !isScrolled && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__messages ".concat(className) },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__scroll-container" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__padding" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__messages-padding", ref: scrollRef, onScroll: function (e) {
                        handleOnScroll();
                        scrollToBottomHandler(e);
                        onScrollReachedEndDetector(e);
                    } },
                    allMessagesFiltered.map(function (m, idx) {
                        var _a, _b;
                        var _c = getMessagePartsInfo({
                            allMessages: allMessagesFiltered,
                            replyType: replyType,
                            isMessageGroupingEnabled: isMessageGroupingEnabled,
                            currentIndex: idx,
                            currentMessage: m,
                            currentChannel: currentGroupChannel,
                        }), chainTop = _c.chainTop, chainBottom = _c.chainBottom, hasSeparator = _c.hasSeparator;
                        var isByMe = ((_a = m === null || m === void 0 ? void 0 : m.sender) === null || _a === void 0 ? void 0 : _a.userId) === ((_b = store === null || store === void 0 ? void 0 : store.config) === null || _b === void 0 ? void 0 : _b.userId);
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: m, key: m === null || m === void 0 ? void 0 : m.messageId, isByMe: isByMe },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Message_Message, { handleScroll: moveScroll, message: m, hasSeparator: hasSeparator, chainTop: chainTop, chainBottom: chainBottom, renderMessageContent: renderMessageContent, renderSuggestedReplies: renderSuggestedReplies, renderCustomSeparator: renderCustomSeparator, 
                                // backward compatibility
                                renderMessage: renderMessage })));
                    }),
                    localMessages.map(function (m, idx) {
                        var _a, _b;
                        var _c = getMessagePartsInfo({
                            allMessages: allMessagesFiltered,
                            replyType: replyType,
                            isMessageGroupingEnabled: isMessageGroupingEnabled,
                            currentIndex: idx,
                            currentMessage: m,
                            currentChannel: currentGroupChannel,
                        }), chainTop = _c.chainTop, chainBottom = _c.chainBottom;
                        var isByMe = ((_a = m === null || m === void 0 ? void 0 : m.sender) === null || _a === void 0 ? void 0 : _a.userId) === ((_b = store === null || store === void 0 ? void 0 : store.config) === null || _b === void 0 ? void 0 : _b.userId);
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: m, key: m === null || m === void 0 ? void 0 : m.messageId, isByMe: isByMe },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Message_Message, { handleScroll: moveScroll, message: m, chainTop: chainTop, chainBottom: chainBottom, renderMessageContent: renderMessageContent, renderSuggestedReplies: renderSuggestedReplies, renderCustomSeparator: renderCustomSeparator, 
                                // backward compatibility
                                renderMessage: renderMessage })));
                    }),
                    !hasMoreNext
                        && ((_b = (_a = store === null || store === void 0 ? void 0 : store.config) === null || _a === void 0 ? void 0 : _a.groupChannel) === null || _b === void 0 ? void 0 : _b.enableTypingIndicator)
                        && ((_e = (_d = (_c = store === null || store === void 0 ? void 0 : store.config) === null || _c === void 0 ? void 0 : _c.groupChannel) === null || _d === void 0 ? void 0 : _d.typingIndicatorTypes) === null || _e === void 0 ? void 0 : _e.has(TypingIndicatorType.Bubble)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorBubble, { typingMembers: typingMembers, handleScroll: moveScroll })))),
            (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.isFrozen) && renderFrozenNotification(),
            /**
             * Show unread count IFF scroll is not bottom or is bottom but hasNext is true.
             */
            (!isScrollBottom || hasMoreNext) && (unreadSince || unreadSinceDate) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnreadCount, { className: "sendbird-conversation__messages__notification", count: currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.unreadMessageCount, time: unreadSince, lastReadAt: unreadSinceDate, onClick: function () {
                    if (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current)
                        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
                    if (!disableMarkAsRead && !!currentGroupChannel) {
                        markAsReadScheduler.push(currentGroupChannel);
                        messagesDispatcher({
                            type: messageActionTypes.MARK_AS_READ,
                            payload: { channel: currentGroupChannel },
                        });
                    }
                    setInitialTimeStamp(null);
                    setAnimatedMessageId(null);
                    setHighLightedMessageId(null);
                } })),
            // This flag is an unmatched variable
            scrollBottom > SCROLL_BOTTOM_PADDING && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-conversation__scroll-bottom-button", onClick: onClickScrollBot, onKeyDown: onClickScrollBot, tabIndex: 0, role: "button" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.PRIMARY }))))));
};


//# sourceMappingURL=MessageList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/MessageInput.js




































































var MessageInput_MessageInputWrapper = function (props) {
    var _a, _b;
    var config = useSendbirdStateContext().config;
    var context = useChannelContext();
    var quoteMessage = context.quoteMessage, localMessages = context.localMessages, currentGroupChannel = context.currentGroupChannel, sendMessage = context.sendMessage, sendFileMessage = context.sendFileMessage, sendVoiceMessage = context.sendVoiceMessage, sendMultipleFilesMessage = context.sendMultipleFilesMessage;
    var lastMessage = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.lastMessage;
    var isLastMessageSuggestedRepliesEnabled = ((_a = config === null || config === void 0 ? void 0 : config.groupChannel) === null || _a === void 0 ? void 0 : _a.enableSuggestedReplies)
        && getSuggestedReplies(lastMessage).length > 0
        && (localMessages === null || localMessages === void 0 ? void 0 : localMessages.length) === 0;
    var disableMessageInput = props.disabled
        || isLastMessageSuggestedRepliesEnabled && !!((_b = lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.extendedMessagePayload) === null || _b === void 0 ? void 0 : _b['disable_chat_input']);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInputWrapperView, __assign({}, props, context, { disabled: disableMessageInput, currentChannel: currentGroupChannel, sendUserMessage: function (params) {
            return sendMessage({
                message: params.message,
                mentionTemplate: params.mentionedMessageTemplate,
                mentionedUsers: params.mentionedUsers,
                quoteMessage: quoteMessage !== null && quoteMessage !== void 0 ? quoteMessage : undefined,
            });
        }, sendFileMessage: function (params) {
            return sendFileMessage(params.file, quoteMessage !== null && quoteMessage !== void 0 ? quoteMessage : undefined);
        }, sendVoiceMessage: function (_a, duration) {
            var file = _a.file;
            return sendVoiceMessage(file, duration, quoteMessage !== null && quoteMessage !== void 0 ? quoteMessage : undefined);
        }, sendMultipleFilesMessage: function (_a) {
            var fileInfoList = _a.fileInfoList;
            return sendMultipleFilesMessage(fileInfoList.map(function (fileInfo) { return fileInfo.file; }), quoteMessage !== null && quoteMessage !== void 0 ? quoteMessage : undefined);
        } })));
};


//# sourceMappingURL=MessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/ChannelUI.js

















































































































































var ChannelUI = function (props) {
    var context = useChannelContext();
    var channelUrl = context.channelUrl, isInvalid = context.isInvalid;
    // Inject components to presentation layer
    var _a = deleteNullish(props), _b = _a.renderChannelHeader, renderChannelHeader = _b === void 0 ? function (p) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelHeader, __assign({}, p)); } : _b, _c = _a.renderMessageList, renderMessageList = _c === void 0 ? function (p) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageList_MessageList, __assign({}, p, { className: "sendbird-conversation__message-list" })); } : _c, _d = _a.renderMessageInput, renderMessageInput = _d === void 0 ? function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput_MessageInputWrapper, __assign({}, props)); } : _d;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelUIView, __assign({}, props, context, { isLoading: props === null || props === void 0 ? void 0 : props.isLoading, isInvalid: isInvalid, channelUrl: channelUrl, renderChannelHeader: renderChannelHeader, renderMessageList: renderMessageList, renderMessageInput: renderMessageInput })));
};


//# sourceMappingURL=ChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel.js


















































































































































var Channel = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelProvider, __assign({}, props),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelUI, __assign({}, props))));
};


//# sourceMappingURL=Channel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CttExrDx.js












var RESET_CHANNEL_LIST = 'RESET_CHANNEL_LIST';
var CREATE_CHANNEL = 'CREATE_CHANNEL';
var LEAVE_CHANNEL_SUCCESS = 'LEAVE_CHANNEL_SUCCESS';
var bundle_CttExrDx_SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
var FETCH_CHANNELS_START = 'FETCH_CHANNELS_START';
var FETCH_CHANNELS_SUCCESS = 'FETCH_CHANNELS_SUCCESS';
var FETCH_CHANNELS_FAILURE = 'FETCH_CHANNELS_FAILURE';
var INIT_CHANNELS_START = 'INIT_CHANNELS_START';
var INIT_CHANNELS_SUCCESS = 'INIT_CHANNELS_SUCCESS';
var REFRESH_CHANNELS_SUCCESS = 'REFRESH_CHANNELS_SUCCESS';
var INIT_CHANNELS_FAILURE = 'INIT_CHANNELS_FAILURE';
var ON_USER_JOINED = 'ON_USER_JOINED';
var ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';
var ON_LAST_MESSAGE_UPDATED = 'ON_LAST_MESSAGE_UPDATED';
var ON_USER_LEFT = 'ON_USER_LEFT';
var ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';
var ON_CHANNEL_ARCHIVED = 'ON_CHANNEL_ARCHIVED';
var ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';
var ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';
var ON_READ_RECEIPT_UPDATED = 'ON_READ_RECEIPT_UPDATED';
var ON_DELIVERY_RECEIPT_UPDATED = 'ON_DELIVERY_RECEIPT_UPDATED';
var CHANNEL_LIST_PARAMS_UPDATED = 'CHANNEL_LIST_PARAMS_UPDATED';

var bundle_CttExrDx_DELIVERY_RECEIPT = 'delivery_receipt';
var createEventHandler = function (_a) {
    var sdk = _a.sdk, sdkChannelHandlerId = _a.sdkChannelHandlerId, channelListDispatcher = _a.channelListDispatcher, logger = _a.logger;
    var ChannelHandler = new groupChannel_We({
        onChannelChanged: function (channel) {
            if (channel.isGroupChannel()) {
                logger.info('ChannelList: onChannelChanged', channel);
                channelListDispatcher({
                    type: ON_CHANNEL_CHANGED,
                    payload: channel,
                });
            }
        },
        onChannelDeleted: function (channelUrl) {
            logger.info('ChannelList: onChannelDeleted', channelUrl);
            channelListDispatcher({
                type: ON_CHANNEL_DELETED,
                payload: channelUrl,
            });
        },
        onUserJoined: function (channel) {
            logger.info('ChannelList: onUserJoined', channel);
            channelListDispatcher({
                type: ON_USER_JOINED,
                payload: channel,
            });
        },
        onUserBanned: function (channel, user) {
            var _a;
            if (channel.isGroupChannel()) {
                logger.info('Channel: onUserBanned', channel);
                var isMe = user.userId === ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
                channelListDispatcher({
                    type: ON_USER_LEFT,
                    payload: { channel: channel, isMe: isMe },
                });
            }
        },
        onUserLeft: function (channel, user) {
            var _a;
            logger.info('ChannelList: onUserLeft', channel);
            var isMe = user.userId === ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId);
            channelListDispatcher({
                type: ON_USER_LEFT,
                payload: { channel: channel, isMe: isMe },
            });
        },
        onUnreadMemberStatusUpdated: function (channel) {
            logger.info('ChannelList: onUnreadMemberStatusUpdated', channel);
            channelListDispatcher({
                type: ON_READ_RECEIPT_UPDATED,
                payload: channel,
            });
        },
        onUndeliveredMemberStatusUpdated: function (channel) {
            logger.info('ChannelList: onUndeliveredMemberStatusUpdated', channel);
            if (channel.lastMessage) {
                channelListDispatcher({
                    type: ON_DELIVERY_RECEIPT_UPDATED,
                    payload: channel,
                });
            }
        },
        onMessageUpdated: function (channel, message) {
            var _a;
            if (channel.isGroupChannel() && ((_a = channel.lastMessage) === null || _a === void 0 ? void 0 : _a.isEqual(message))) {
                logger.info('ChannelList: onMessageUpdated', channel);
                channelListDispatcher({
                    type: ON_LAST_MESSAGE_UPDATED,
                    payload: channel,
                });
            }
        },
        onChannelHidden: function (channel) {
            logger.info('ChannelList: onChannelHidden', channel);
            channelListDispatcher({
                type: ON_CHANNEL_ARCHIVED,
                payload: channel,
            });
        },
        onChannelFrozen: function (channel) {
            if (channel.isGroupChannel()) {
                logger.info('ChannelList: onChannelFrozen', channel);
                channelListDispatcher({
                    type: ON_CHANNEL_FROZEN,
                    payload: channel,
                });
            }
        },
        onChannelUnfrozen: function (channel) {
            if (channel.isGroupChannel()) {
                logger.info('ChannelList: onChannelUnfrozen', channel);
                channelListDispatcher({
                    type: ON_CHANNEL_UNFROZEN,
                    payload: channel,
                });
            }
        },
    });
    logger.info('ChannelList: Added channelHandler');
    sdk.groupChannel.addGroupChannelHandler(sdkChannelHandlerId, ChannelHandler);
};
var createChannelListQuery = function (_a) {
    var sdk = _a.sdk, _b = _a.userFilledChannelListQuery, userFilledChannelListQuery = _b === void 0 ? {} : _b;
    var params = {
        includeEmpty: false,
        limit: 20, // The value of pagination limit could be set up to 100.
        order: _bundle_7b94e16f_E.LATEST_LAST_MESSAGE,
    };
    if (userFilledChannelListQuery) {
        Object.keys(userFilledChannelListQuery).forEach(function (key) {
            // @ts-ignore
            params[key] = userFilledChannelListQuery[key];
        });
    }
    return sdk.groupChannel.createMyGroupChannelListQuery(params);
};
function setupChannelList(_a) {
    var _b, _c, _d, _e;
    var sdk = _a.sdk, sdkChannelHandlerId = _a.sdkChannelHandlerId, channelListDispatcher = _a.channelListDispatcher, setChannelSource = _a.setChannelSource, onChannelSelect = _a.onChannelSelect, userFilledChannelListQuery = _a.userFilledChannelListQuery, logger = _a.logger, sortChannelList = _a.sortChannelList, disableAutoSelect = _a.disableAutoSelect, markAsDeliveredScheduler = _a.markAsDeliveredScheduler, disableMarkAsDelivered = _a.disableMarkAsDelivered;
    if (sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) {
        createEventHandler({
            sdk: sdk,
            channelListDispatcher: channelListDispatcher,
            sdkChannelHandlerId: sdkChannelHandlerId,
            logger: logger,
        });
    }
    else {
        logger.warning('ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist', sdk);
    }
    logger.info('ChannelList - creating query', { userFilledChannelListQuery: userFilledChannelListQuery });
    var channelListQuery = createChannelListQuery({ sdk: sdk, userFilledChannelListQuery: userFilledChannelListQuery });
    logger.info('ChannelList - created query', channelListQuery);
    setChannelSource(channelListQuery);
    channelListDispatcher({
        type: INIT_CHANNELS_START,
        payload: {
            currentUserId: (_c = (_b = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _b === void 0 ? void 0 : _b.userId) !== null && _c !== void 0 ? _c : '',
        },
    });
    if (userFilledChannelListQuery) {
        logger.info('ChannelList - setting up channelListQuery', channelListQuery);
        channelListDispatcher({
            type: CHANNEL_LIST_PARAMS_UPDATED,
            payload: {
                channelListQuery: channelListQuery,
                currentUserId: (_e = (_d = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _d === void 0 ? void 0 : _d.userId) !== null && _e !== void 0 ? _e : '',
            },
        });
    }
    logger.info('ChannelList - fetching channels');
    if (channelListQuery.hasNext) {
        channelListQuery
            .next()
            .then(function (channelList) {
            var _a, _b;
            logger.info('ChannelList - fetched channels', channelList);
            // select first channel
            logger.info('ChannelList - highlight channel', channelList[0]);
            var sortedChannelList = channelList;
            if (sortChannelList && typeof sortChannelList === 'function') {
                sortedChannelList = sortChannelList(channelList);
                logger.info('ChannelList - channel list sorted', sortedChannelList);
            }
            if (!disableAutoSelect) {
                onChannelSelect === null || onChannelSelect === void 0 ? void 0 : onChannelSelect(sortedChannelList[0]);
            }
            channelListDispatcher({
                type: INIT_CHANNELS_SUCCESS,
                payload: {
                    channelList: sortedChannelList,
                    disableAutoSelect: disableAutoSelect,
                },
            });
            var canSetMarkAsDelivered = (_b = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.premiumFeatureList) === null || _b === void 0 ? void 0 : _b.find(function (feature) { return feature === bundle_CttExrDx_DELIVERY_RECEIPT; });
            if (canSetMarkAsDelivered && !disableMarkAsDelivered) {
                sortedChannelList.forEach(function (channel) {
                    markAsDeliveredScheduler.push(channel);
                });
            }
        })
            .catch(function (err) {
            if (err) {
                logger.error('ChannelList - couldnt fetch channels', err);
                channelListDispatcher({
                    type: INIT_CHANNELS_FAILURE,
                });
            }
        });
    }
    else {
        logger.info('ChannelList - there are no more channels');
    }
}
var pubSubHandleRemover = function (subscriber) {
    subscriber.forEach(function (s) {
        try {
            s.remove();
        }
        catch (_a) {
            //
        }
    });
};
var pubSubHandler = function (pubSub, channelListDispatcher) {
    var subscriber = new Map();
    if (!pubSub)
        return subscriber;
    subscriber.set(pubSubTopics.CREATE_CHANNEL, pubSub.subscribe(pubSubTopics.CREATE_CHANNEL, function (_a) {
        var channel = _a.channel;
        channelListDispatcher({
            type: CREATE_CHANNEL,
            payload: channel,
        });
    }));
    subscriber.set(pubSubTopics.UPDATE_USER_MESSAGE, pubSub.subscribe(pubSubTopics.UPDATE_USER_MESSAGE, function (_a) {
        var _b;
        var channel = _a.channel, message = _a.message;
        if (channel.isGroupChannel() && ((_b = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _b === void 0 ? void 0 : _b.messageId) === message.messageId) {
            channel.lastMessage = message;
            channelListDispatcher({
                type: ON_LAST_MESSAGE_UPDATED,
                payload: channel,
            });
        }
    }));
    subscriber.set(pubSubTopics.LEAVE_CHANNEL, pubSub.subscribe(pubSubTopics.LEAVE_CHANNEL, function (msg) {
        var channel = msg.channel;
        channelListDispatcher({
            type: LEAVE_CHANNEL_SUCCESS,
            payload: channel === null || channel === void 0 ? void 0 : channel.url,
        });
    }));
    return subscriber;
};

/**
 * NOTICE: Use this function IF the current channel is removed from allChannels.
 * This function will give you the next currentChannel value.
 */
var getNextChannel = function (_a) {
    var channel = _a.channel, currentChannel = _a.currentChannel, allChannels = _a.allChannels, disableAutoSelect = _a.disableAutoSelect;
    var nextChannel = null;
    if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === channel.url) {
        if (!disableAutoSelect && allChannels.length > 0) {
            var firstChannel = allChannels[0], _b = allChannels[1], secondChannel = _b === void 0 ? null : _b;
            nextChannel = firstChannel.url === channel.url ? secondChannel : firstChannel;
        }
    }
    else {
        nextChannel = currentChannel;
    }
    return nextChannel;
};

var bundle_CttExrDx_initialState = {
    // we might not need this initialized state -> should remove
    initialized: false,
    loading: true,
    allChannels: [],
    currentChannel: null,
    channelListQuery: null,
    currentUserId: '',
    disableAutoSelect: false,
};

function channelListReducer(state, action) {
    return (K(action)
        .with({ type: INIT_CHANNELS_START }, function (_a) {
        var payload = _a.payload;
        return (__assign(__assign({}, state), { loading: true, currentUserId: payload.currentUserId }));
    })
        .with({ type: RESET_CHANNEL_LIST }, function () {
        return bundle_CttExrDx_initialState;
    })
        .with({ type: INIT_CHANNELS_SUCCESS }, function (action) {
        var _a = action.payload, channelList = _a.channelList, disableAutoSelect = _a.disableAutoSelect;
        return __assign(__assign({}, state), { initialized: true, loading: false, allChannels: channelList, disableAutoSelect: disableAutoSelect, currentChannel: !disableAutoSelect && channelList && channelList.length && channelList.length > 0 ? channelList[0] : state.currentChannel });
    })
        .with({ type: REFRESH_CHANNELS_SUCCESS }, function (action) {
        var _a = action.payload, channelList = _a.channelList, currentChannel = _a.currentChannel;
        return __assign(__assign({}, state), { loading: false, allChannels: channelList, currentChannel: currentChannel });
    })
        .with({ type: FETCH_CHANNELS_SUCCESS }, function (action) {
        var currentChannels = state.allChannels.map(function (c) { return c.url; });
        var filteredChannels = action.payload.filter(function (_a) {
            var url = _a.url;
            return !currentChannels.find(function (c) { return c === url; });
        });
        return __assign(__assign({}, state), { allChannels: __spreadArray(__spreadArray([], state.allChannels, true), filteredChannels, true) });
    })
        .with({ type: CREATE_CHANNEL }, function (action) {
        var _a;
        var channel = action.payload;
        var allChannels = state.allChannels, currentUserId = state.currentUserId, channelListQuery = state.channelListQuery;
        if (channelListQuery) {
            if (filterChannelListParams(channelListQuery, channel, currentUserId)) {
                // Good to add to the ChannelList
                return __assign(__assign({}, state), { currentChannel: channel, allChannels: getChannelsWithUpsertedChannel(allChannels, channel, (_a = state.channelListQuery) === null || _a === void 0 ? void 0 : _a.order) });
            }
            // Do not add to the ChannelList
            return __assign(__assign({}, state), { currentChannel: channel });
        }
        // No channelListQuery
        // Add to the top of the ChannelList
        return __assign(__assign({}, state), { currentChannel: channel, allChannels: __spreadArray([channel], allChannels.filter(function (ch) { return ch.url !== (channel === null || channel === void 0 ? void 0 : channel.url); }), true) });
    })
        // A hidden channel will be unhidden when getting new message
        .with({ type: ON_CHANNEL_ARCHIVED }, function (action) {
        var _a;
        var channel = action.payload;
        var allChannels = state.allChannels, currentUserId = state.currentUserId, currentChannel = state.currentChannel, channelListQuery = state.channelListQuery, disableAutoSelect = state.disableAutoSelect;
        if (channelListQuery) {
            if (filterChannelListParams(channelListQuery, channel, currentUserId)) {
                // Good to [add to/keep in] the ChannelList
                return __assign(__assign({}, state), { allChannels: getChannelsWithUpsertedChannel(allChannels, channel, (_a = state.channelListQuery) === null || _a === void 0 ? void 0 : _a.order) });
            }
            // * Remove the channel from the ChannelList: because the channel is filtered
        }
        // No channelListQuery
        // * Remove the channel from the ChannelList: because the channel is hidden
        // Replace the currentChannel if it's filtered or hidden
        var nextChannel = getNextChannel({
            channel: channel,
            currentChannel: currentChannel,
            allChannels: allChannels,
            disableAutoSelect: disableAutoSelect,
        });
        return __assign(__assign({}, state), { currentChannel: nextChannel, allChannels: allChannels.filter(function (_a) {
                var url = _a.url;
                return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
            }) });
    })
        .with({ type: bundle_janisM9b_S.union(LEAVE_CHANNEL_SUCCESS, ON_CHANNEL_DELETED) }, function (action) {
        var _a;
        var channelUrl = action.payload;
        var allChannels = state.allChannels.filter(function (_a) {
            var url = _a.url;
            return url !== channelUrl;
        });
        return __assign(__assign({}, state), { currentChannel: channelUrl === ((_a = state.currentChannel) === null || _a === void 0 ? void 0 : _a.url) ? allChannels[0] : state.currentChannel, allChannels: allChannels });
    })
        .with({ type: ON_USER_LEFT }, function (action) {
        var _a;
        var _b = action.payload, channel = _b.channel, isMe = _b.isMe;
        var allChannels = state.allChannels, currentUserId = state.currentUserId, currentChannel = state.currentChannel, channelListQuery = state.channelListQuery, disableAutoSelect = state.disableAutoSelect;
        var nextChannels = __spreadArray([], allChannels, true);
        var nextChannel = channel;
        /**
         * 1. If I left channel:
         *   - Remove the channel from channel list
         *   - Replace currentChannel with the next ordered channel
         * 2. If other member left channel:
         *   2-1. If query is given:
         *     2-1-1. If channel no longer matches the query
         *       - Same as step 1
         *     2-1-2. If channel matches the query:
         *       - Upsert channel list with the channel
         *       - Replace currentChannel IFF url is same
         *   2-2. If query is not given,
         *     - Same as step 2-1-2
         */
        /* `1` and `2-1-1` */
        if (isMe || (channelListQuery && !filterChannelListParams(channelListQuery, channel, currentUserId))) {
            var channelAt = allChannels.findIndex(function (ch) { return ch.url === channel.url; });
            if (channelAt > -1) {
                nextChannels.splice(channelAt, 1);
                nextChannel = getNextChannel({
                    channel: channel,
                    currentChannel: currentChannel,
                    allChannels: allChannels,
                    disableAutoSelect: disableAutoSelect,
                });
            }
        }
        else {
            /* `2-1-2` and `2-2` */
            nextChannels = getChannelsWithUpsertedChannel(allChannels, channel, (_a = state.channelListQuery) === null || _a === void 0 ? void 0 : _a.order);
            if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === channel.url) {
                nextChannel = channel;
            }
        }
        return __assign(__assign({}, state), { currentChannel: nextChannel, allChannels: nextChannels });
    })
        .with({
        type: bundle_janisM9b_S.union(ON_USER_JOINED, ON_CHANNEL_CHANGED, ON_READ_RECEIPT_UPDATED, ON_DELIVERY_RECEIPT_UPDATED),
    }, function (action) {
        var _a, _b, _c;
        var channel = action.payload;
        var _d = state.allChannels, allChannels = _d === void 0 ? [] : _d, currentUserId = state.currentUserId, currentChannel = state.currentChannel, channelListQuery = state.channelListQuery, disableAutoSelect = state.disableAutoSelect;
        var unreadMessageCount = channel.unreadMessageCount;
        if (channelListQuery) {
            if (filterChannelListParams(channelListQuery, channel, currentUserId)) {
                // Good to [add to/keep in] the ChannelList
                return __assign(__assign({}, state), { allChannels: getChannelsWithUpsertedChannel(allChannels, channel, (_a = state.channelListQuery) === null || _a === void 0 ? void 0 : _a.order) });
            }
            // Filter the channel from the ChannelList
            // Replace the currentChannel if it's filtered channel
            var nextChannel = getNextChannel({
                channel: channel,
                currentChannel: currentChannel,
                allChannels: allChannels,
                disableAutoSelect: disableAutoSelect,
            });
            return __assign(__assign({}, state), { currentChannel: nextChannel, allChannels: allChannels.filter(function (_a) {
                    var url = _a.url;
                    return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
                }) });
        }
        if (
        // When marking as read the channel
        unreadMessageCount === 0
            // @ts-ignore - When sending a message by the current peer
            && ((_c = (_b = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _b === void 0 ? void 0 : _b.sender) === null || _c === void 0 ? void 0 : _c.userId) !== currentUserId) {
            // Don't move to the top
            return __assign(__assign({}, state), { allChannels: allChannels.map(function (ch) { return (ch.url === (channel === null || channel === void 0 ? void 0 : channel.url) ? channel : ch); }) });
        }
        // Move to the top
        return __assign(__assign({}, state), { allChannels: __spreadArray([channel], allChannels.filter(function (_a) {
                var url = _a.url;
                return url !== channel.url;
            }), true) });
    })
        .with({ type: bundle_CttExrDx_SET_CURRENT_CHANNEL }, function (action) {
        return __assign(__assign({}, state), { currentChannel: action.payload });
    })
        .with({ type: ON_LAST_MESSAGE_UPDATED }, function (action) {
        return __assign(__assign({}, state), { allChannels: state.allChannels.map(function (channel) { return (channel === null || channel === void 0 ? void 0 : channel.url) === action.payload.url ? action.payload : channel; }) });
    })
        .with({ type: ON_CHANNEL_FROZEN }, function (action) {
        var _a;
        var channel = action.payload;
        var allChannels = state.allChannels, currentUserId = state.currentUserId, currentChannel = state.currentChannel, channelListQuery = state.channelListQuery, disableAutoSelect = state.disableAutoSelect;
        if (channelListQuery) {
            if (filterChannelListParams(channelListQuery, channel, currentUserId)) {
                // Good to [add to/keep in] the ChannelList
                return __assign(__assign({}, state), { allChannels: getChannelsWithUpsertedChannel(allChannels, channel, (_a = state.channelListQuery) === null || _a === void 0 ? void 0 : _a.order) });
            }
            // Filter the channel from the ChannelList
            // Replace the currentChannel if it's filtered channel
            var nextChannel = getNextChannel({
                channel: channel,
                currentChannel: currentChannel,
                allChannels: allChannels,
                disableAutoSelect: disableAutoSelect,
            });
            return __assign(__assign({}, state), { currentChannel: nextChannel, allChannels: allChannels.filter(function (_a) {
                    var url = _a.url;
                    return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
                }) });
        }
        return __assign(__assign({}, state), { allChannels: allChannels.map(function (ch) {
                if (ch.url === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    // eslint-disable-next-line no-param-reassign
                    ch.isFrozen = true;
                    return ch;
                }
                return ch;
            }) });
    })
        .with({ type: ON_CHANNEL_UNFROZEN }, function (action) {
        var _a;
        var channel = action.payload;
        var allChannels = state.allChannels, currentUserId = state.currentUserId, currentChannel = state.currentChannel, channelListQuery = state.channelListQuery, disableAutoSelect = state.disableAutoSelect;
        if (channelListQuery) {
            if (filterChannelListParams(channelListQuery, channel, currentUserId)) {
                // Good to [add to/keep in] the ChannelList
                return __assign(__assign({}, state), { allChannels: getChannelsWithUpsertedChannel(allChannels, channel, (_a = state.channelListQuery) === null || _a === void 0 ? void 0 : _a.order) });
            }
            // Filter the channel from the ChannelList
            // Replace the currentChannel if it's filtered channel
            var nextChannel = getNextChannel({
                channel: channel,
                currentChannel: currentChannel,
                allChannels: allChannels,
                disableAutoSelect: disableAutoSelect,
            });
            return __assign(__assign({}, state), { currentChannel: nextChannel, allChannels: allChannels.filter(function (_a) {
                    var url = _a.url;
                    return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
                }) });
        }
        // No channelListQuery
        return __assign(__assign({}, state), { allChannels: allChannels.map(function (ch) {
                if (ch.url === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    // eslint-disable-next-line no-param-reassign
                    ch.isFrozen = false;
                    return ch;
                }
                return ch;
            }) });
    })
        .with({ type: CHANNEL_LIST_PARAMS_UPDATED }, function (action) { return (__assign(__assign({}, state), { channelListQuery: action.payload.channelListQuery, currentUserId: action.payload.currentUserId })); })
        .otherwise(function () { return state; }));
}

function useActiveChannelUrl(_a, _b) {
    var activeChannelUrl = _a.activeChannelUrl, channels = _a.channels, sdk = _a.sdk;
    var logger = _b.logger, channelListDispatcher = _b.channelListDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        if (activeChannelUrl) {
            logger.info('ChannelListProvider: looking for active channel', { activeChannelUrl: activeChannelUrl });
            var activeChannel = channels === null || channels === void 0 ? void 0 : channels.find(function (channel) { return channel.url === activeChannelUrl; });
            if (activeChannel) {
                channelListDispatcher({
                    type: bundle_CttExrDx_SET_CURRENT_CHANNEL,
                    payload: activeChannel,
                });
            }
            else {
                logger.info('ChannelListProvider: searching backend for active channel', { activeChannelUrl: activeChannelUrl });
                (_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.getChannel(activeChannelUrl).then(function (channel) {
                    channelListDispatcher({
                        type: FETCH_CHANNELS_SUCCESS,
                        payload: [channel],
                    });
                    channelListDispatcher({
                        type: bundle_CttExrDx_SET_CURRENT_CHANNEL,
                        payload: channel,
                    });
                }).catch(function () {
                    logger.warning('ChannelListProvider: Active channel not found');
                });
            }
        }
    }, [activeChannelUrl]);
}

var useFetchChannelList = function (_a, _b) {
    var channelSource = _a.channelSource, disableMarkAsDelivered = _a.disableMarkAsDelivered;
    var channelListDispatcher = _b.channelListDispatcher, logger = _b.logger, markAsDeliveredScheduler = _b.markAsDeliveredScheduler;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () { return __awaiter(void 0, void 0, void 0, function () {
        var channelList, error_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!(channelSource === null || channelSource === void 0 ? void 0 : channelSource.hasNext)) {
                        logger.info('ChannelList: not able to fetch');
                        return [2 /*return*/];
                    }
                    logger.info('ChannelList: starting fetch');
                    channelListDispatcher({
                        type: FETCH_CHANNELS_START,
                        payload: null,
                    });
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, channelSource.next()];
                case 2:
                    channelList = _a.sent();
                    logger.info('ChannelList: succeeded fetch', { channelList: channelList });
                    channelListDispatcher({
                        type: FETCH_CHANNELS_SUCCESS,
                        payload: channelList,
                    });
                    if (!disableMarkAsDelivered) {
                        logger.info('ChannelList: mark as delivered to fetched channels');
                        // eslint-disable-next-line no-unused-expressions
                        channelList === null || channelList === void 0 ? void 0 : channelList.forEach(function (channel) {
                            if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) > 0) {
                                markAsDeliveredScheduler.push(channel);
                            }
                        });
                    }
                    return [3 /*break*/, 4];
                case 3:
                    error_1 = _a.sent();
                    logger.error('ChannelList: failed fetch', { error: error_1 });
                    channelListDispatcher({
                        type: FETCH_CHANNELS_FAILURE,
                        payload: error_1,
                    });
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); }, [
        channelSource,
        disableMarkAsDelivered,
    ]);
};

function useHandleReconnectForChannelList(_a) {
    var isOnline = _a.isOnline, reconnectOnIdle = _a.reconnectOnIdle, logger = _a.logger, sdk = _a.sdk, currentGroupChannel = _a.currentGroupChannel, channelListDispatcher = _a.channelListDispatcher, setChannelSource = _a.setChannelSource, userFilledChannelListQuery = _a.userFilledChannelListQuery, sortChannelList = _a.sortChannelList, disableAutoSelect = _a.disableAutoSelect, markAsDeliveredScheduler = _a.markAsDeliveredScheduler, disableMarkAsDelivered = _a.disableMarkAsDelivered;
    var shouldReconnect = useReconnectOnIdle(isOnline, currentGroupChannel, reconnectOnIdle).shouldReconnect;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        return function () {
            var _a, _b, _c, _d;
            // state changed from offline to online AND tab is visible
            if (shouldReconnect) {
                logger.info('ChannelList refresh - creating query', { userFilledChannelListQuery: userFilledChannelListQuery });
                var channelListQuery = createChannelListQuery({ sdk: sdk, userFilledChannelListQuery: userFilledChannelListQuery });
                logger.info('ChannelList refresh - created query', channelListQuery);
                setChannelSource(channelListQuery);
                channelListDispatcher({
                    type: INIT_CHANNELS_START,
                    payload: {
                        currentUserId: (_b = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId) !== null && _b !== void 0 ? _b : '',
                    },
                });
                if (userFilledChannelListQuery) {
                    logger.info('ChannelList refresh - setting up channelListQuery', channelListQuery);
                    channelListDispatcher({
                        type: CHANNEL_LIST_PARAMS_UPDATED,
                        payload: {
                            channelListQuery: channelListQuery,
                            currentUserId: (_d = (_c = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _c === void 0 ? void 0 : _c.userId) !== null && _d !== void 0 ? _d : '',
                        },
                    });
                }
                logger.info('ChannelList refresh - fetching channels');
                if (channelListQuery.hasNext) {
                    channelListQuery
                        .next()
                        .then(function (channelList) {
                        var _a, _b;
                        logger.info('ChannelList refresh - fetched channels', channelList);
                        var sortedChannelList = channelList;
                        if (sortChannelList && typeof sortChannelList === 'function') {
                            sortedChannelList = sortChannelList(channelList);
                            logger.info('ChannelList refresh - channel list sorted', sortedChannelList);
                        }
                        // select first channel
                        var newCurrentChannel = !disableAutoSelect ? sortedChannelList[0] : null;
                        if (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) {
                            var foundChannel = sortedChannelList.find(function (channel) { return (channel.url === currentGroupChannel.url); });
                            if (foundChannel) {
                                newCurrentChannel = foundChannel;
                            }
                        }
                        logger.info('ChannelList refresh - highlight channel', newCurrentChannel);
                        channelListDispatcher({
                            type: REFRESH_CHANNELS_SUCCESS,
                            payload: {
                                channelList: sortedChannelList,
                                currentChannel: newCurrentChannel,
                            },
                        });
                        var canSetMarkAsDelivered = (_b = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) === null || _a === void 0 ? void 0 : _a.premiumFeatureList) === null || _b === void 0 ? void 0 : _b.find(function (feature) { return feature === bundle_DhBuJR0w["c" /* D */]; });
                        if (canSetMarkAsDelivered && !disableMarkAsDelivered) {
                            sortedChannelList.forEach(function (channel) {
                                markAsDeliveredScheduler.push(channel);
                            });
                        }
                    })
                        .catch(function (err) {
                        if (err) {
                            logger.error('ChannelList refresh - could not fetch channels', err);
                            channelListDispatcher({
                                type: INIT_CHANNELS_FAILURE,
                            });
                        }
                    });
                }
                else {
                    logger.info('ChannelList refresh - there are no more channels');
                }
            }
        };
    }, [shouldReconnect]);
}

var ChannelListContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var ChannelListProvider = function (props) {
    var _a, _b;
    // destruct props
    var children = props.children, className = props.className, disableUserProfile = props.disableUserProfile, allowProfileEdit = props.allowProfileEdit, queries = props.queries, onProfileEditSuccess = props.onProfileEditSuccess, onThemeChange = props.onThemeChange, onBeforeCreateChannel = props.onBeforeCreateChannel, sortChannelList = props.sortChannelList, overrideInviteUser = props.overrideInviteUser, activeChannelUrl = props.activeChannelUrl, _c = props.isTypingIndicatorEnabled, isTypingIndicatorEnabled = _c === void 0 ? null : _c, _d = props.isMessageReceiptStatusEnabled, isMessageReceiptStatusEnabled = _d === void 0 ? null : _d, reconnectOnIdle = props.reconnectOnIdle;
    // disable autoselect, if activeChannelUrl is provided
    // useActiveChannelUrl should be executed when activeChannelUrl is present
    var disableAutoSelect = (props === null || props === void 0 ? void 0 : props.disableAutoSelect) || !!activeChannelUrl;
    var onChannelSelect = (props === null || props === void 0 ? void 0 : props.onChannelSelect) || noop;
    // fetch store from <SendbirdProvider />
    var globalStore = useSendbirdStateContext();
    var config = globalStore.config, stores = globalStore.stores;
    var sdkStore = stores.sdkStore;
    var pubSub = config.pubSub, logger = config.logger, onUserProfileMessage = config.onUserProfileMessage;
    var markAsDeliveredScheduler = config.markAsDeliveredScheduler, _e = config.disableMarkAsDelivered, disableMarkAsDelivered = _e === void 0 ? false : _e, isOnline = config.isOnline;
    var sdk = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.sdk;
    var _f = ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) !== null && _a !== void 0 ? _a : {}).premiumFeatureList, premiumFeatureList = _f === void 0 ? [] : _f;
    // derive some variables
    // enable if it is true at least once(both are false by default)
    var userDefinedDisableUserProfile = disableUserProfile !== null && disableUserProfile !== void 0 ? disableUserProfile : !config.common.enableUsingDefaultUserProfile;
    var userDefinedRenderProfile = config === null || config === void 0 ? void 0 : config.renderUserProfile;
    var enableEditProfile = allowProfileEdit || config.allowProfileEdit;
    var userFilledChannelListQuery = queries === null || queries === void 0 ? void 0 : queries.channelListQuery;
    var userFilledApplicationUserListQuery = queries === null || queries === void 0 ? void 0 : queries.applicationUserListQuery;
    var sdkIntialized = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.initialized;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(channelListReducer, bundle_CttExrDx_initialState), channelListStore = _g[0], channelListDispatcher = _g[1];
    var currentChannel = channelListStore.currentChannel;
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), channelSource = _h[0], setChannelSource = _h[1];
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), typingChannels = _j[0], setTypingChannels = _j[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var subscriber = pubSubHandler(pubSub, channelListDispatcher);
        return function () {
            pubSubHandleRemover(subscriber);
        };
    }, [sdkIntialized]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        var sdkChannelHandlerId = uuidv4();
        if (sdkIntialized) {
            logger.info('ChannelList: Setup channelHandlers');
            setupChannelList({
                sdk: sdk,
                sdkChannelHandlerId: sdkChannelHandlerId,
                channelListDispatcher: channelListDispatcher,
                setChannelSource: setChannelSource,
                onChannelSelect: onChannelSelect,
                userFilledChannelListQuery: __assign({}, userFilledChannelListQuery),
                logger: logger,
                sortChannelList: sortChannelList,
                disableAutoSelect: disableAutoSelect,
                markAsDeliveredScheduler: markAsDeliveredScheduler,
                disableMarkAsDelivered: disableMarkAsDelivered,
            });
        }
        else {
            logger.info('ChannelList: Removing channelHandlers');
            // remove previous channelHandlers
            if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler) {
                sdk.groupChannel.removeGroupChannelHandler(sdkChannelHandlerId);
            }
            // remove channelSource
            setChannelSource(null);
            // cleanup
            channelListDispatcher({
                type: RESET_CHANNEL_LIST,
                payload: null,
            });
        }
        return function () {
            var _a, _b;
            logger.info('ChannelList: Removing channelHandlers');
            if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler) {
                (_b = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _b === void 0 ? void 0 : _b.removeGroupChannelHandler(sdkChannelHandlerId);
            }
        };
    }, [
        sdkIntialized,
        sortChannelList,
        Object.entries(userFilledChannelListQuery !== null && userFilledChannelListQuery !== void 0 ? userFilledChannelListQuery : {}).map(function (_a) {
            var key = _a[0], value = _a[1];
            return key + value;
        }).join(),
    ]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        var typingHandlerId = '';
        if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.addGroupChannelHandler) {
            typingHandlerId = uuidv4();
            var handler = new groupChannel_We({
                onTypingStatusUpdated: function (channel) {
                    var _a;
                    var typingMemberCount = (_a = channel === null || channel === void 0 ? void 0 : channel.getTypingUsers()) === null || _a === void 0 ? void 0 : _a.length;
                    var channelList = typingChannels.filter(function (ch) { return ch.url !== channel.url; });
                    if (typingMemberCount > 0) {
                        setTypingChannels(__spreadArray(__spreadArray([], channelList, true), [channel], false));
                    }
                    else {
                        setTypingChannels(channelList);
                    }
                },
                onUnreadMemberStatusUpdated: function (channel) {
                    channelListDispatcher({
                        type: ON_LAST_MESSAGE_UPDATED,
                        payload: channel,
                    });
                },
                onUndeliveredMemberStatusUpdated: function (channel) {
                    channelListDispatcher({
                        type: ON_LAST_MESSAGE_UPDATED,
                        payload: channel,
                    });
                },
                onMessageUpdated: function (channel) {
                    if (channel.isGroupChannel()) {
                        channelListDispatcher({
                            type: ON_LAST_MESSAGE_UPDATED,
                            payload: channel,
                        });
                        sdk.groupChannel.getChannelWithoutCache(channel.url).then(function (ch) {
                            channelListDispatcher({
                                type: ON_LAST_MESSAGE_UPDATED,
                                payload: ch,
                            });
                        });
                    }
                },
                onMentionReceived: function (channel) {
                    if (channel.isGroupChannel()) {
                        channelListDispatcher({
                            type: ON_LAST_MESSAGE_UPDATED,
                            payload: channel,
                        });
                        sdk.groupChannel.getChannelWithoutCache(channel.url).then(function (ch) {
                            channelListDispatcher({
                                type: ON_LAST_MESSAGE_UPDATED,
                                payload: ch,
                            });
                        });
                    }
                },
            });
            (_b = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _b === void 0 ? void 0 : _b.addGroupChannelHandler(typingHandlerId, handler);
        }
        return function () {
            var _a;
            if (((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler) && typingHandlerId !== '') {
                sdk.groupChannel.removeGroupChannelHandler(typingHandlerId);
            }
        };
    }, [(_b = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _b === void 0 ? void 0 : _b.userId]);
    var queries_ = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return {
            applicationUserListQuery: userFilledApplicationUserListQuery,
            channelListQuery: userFilledChannelListQuery,
        };
    }, [userFilledApplicationUserListQuery, userFilledChannelListQuery]);
    var allChannels = channelListStore.allChannels;
    var sortedChannels = sortChannelList && typeof sortChannelList === 'function' ? sortChannelList(allChannels) : allChannels;
    if (sortedChannels.length !== allChannels.length) {
        var warning = "ChannelList: You have removed/added extra channels on sortChannelList\n      this could cause unexpected problems";
        // eslint-disable-next-line no-console
        console.warn(warning, { before: allChannels, after: sortedChannels });
        logger.warning(warning, { before: allChannels, after: sortedChannels });
    }
    // Set current channel (by on_channel_selected event)
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!sdk || !sdk.groupChannel) {
            return;
        }
        // When leaving a channel, tell consumers that the prior channel is no longer selected
        if (!(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
            onChannelSelect(null);
            return;
        }
        sdk.groupChannel.getChannel(currentChannel.url).then(function (groupChannel) {
            if (groupChannel) {
                onChannelSelect(groupChannel);
            }
            else {
                onChannelSelect(null);
            }
        });
    }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
    // Set active channel (by url)
    useActiveChannelUrl({
        activeChannelUrl: activeChannelUrl,
        channels: sortedChannels,
        sdk: sdk,
    }, {
        logger: logger,
        channelListDispatcher: channelListDispatcher,
    });
    useHandleReconnectForChannelList({
        isOnline: isOnline,
        reconnectOnIdle: reconnectOnIdle,
        logger: logger,
        sdk: sdk,
        currentGroupChannel: currentChannel,
        channelListDispatcher: channelListDispatcher,
        setChannelSource: setChannelSource,
        userFilledChannelListQuery: userFilledChannelListQuery,
        sortChannelList: sortChannelList,
        disableAutoSelect: disableAutoSelect,
        markAsDeliveredScheduler: markAsDeliveredScheduler,
        disableMarkAsDelivered: disableMarkAsDelivered,
    });
    var fetchChannelList = useFetchChannelList({
        channelSource: channelSource,
        disableMarkAsDelivered: disableMarkAsDelivered || !premiumFeatureList.some(function (feature) { return feature === bundle_DhBuJR0w["c" /* D */]; }),
    }, {
        channelListDispatcher: channelListDispatcher,
        logger: logger,
        markAsDeliveredScheduler: markAsDeliveredScheduler,
    });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListContext.Provider, { value: __assign(__assign({ className: className, disableUserProfile: disableUserProfile, queries: queries_, onProfileEditSuccess: onProfileEditSuccess, onThemeChange: onThemeChange, onBeforeCreateChannel: onBeforeCreateChannel, overrideInviteUser: overrideInviteUser, onChannelSelect: onChannelSelect, sortChannelList: sortChannelList, allowProfileEdit: enableEditProfile, channelListDispatcher: channelListDispatcher, channelSource: channelSource }, channelListStore), { allChannels: sortedChannels, typingChannels: typingChannels, isTypingIndicatorEnabled: isTypingIndicatorEnabled !== null && isTypingIndicatorEnabled !== void 0 ? isTypingIndicatorEnabled : config.groupChannelList.enableTypingIndicator, isMessageReceiptStatusEnabled: isMessageReceiptStatusEnabled !== null && isMessageReceiptStatusEnabled !== void 0 ? isMessageReceiptStatusEnabled : config.groupChannelList.enableMessageReceiptStatus, fetchChannelList: fetchChannelList }) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { disableUserProfile: userDefinedDisableUserProfile !== null && userDefinedDisableUserProfile !== void 0 ? userDefinedDisableUserProfile : !config.common.enableUsingDefaultUserProfile, renderUserProfile: userDefinedRenderProfile, onUserProfileMessage: onUserProfileMessage },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-list ".concat(className) }, children))));
};
function useChannelListContext() {
    var context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(ChannelListContext);
    if (!context)
        throw new Error('ChannelListContext not found. Use within the ChannelList module.');
    return context;
}


//# sourceMappingURL=bundle-CttExrDx.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/ChannelPreview.js

















































var ChannelPreview = function (_a) {
    var _b, _c, _d, _e;
    var channel = _a.channel, _f = _a.isActive, isActive = _f === void 0 ? false : _f, _g = _a.isSelected, isSelected = _g === void 0 ? false : _g, _h = _a.isTyping, isTyping = _h === void 0 ? false : _h, renderChannelAction = _a.renderChannelAction, onLeaveChannel = _a.onLeaveChannel, onClick = _a.onClick, tabIndex = _a.tabIndex;
    var config = useSendbirdStateContext().config;
    var stringSet = useLocalization().stringSet;
    var _j = useChannelListContext(), _k = _j.isTypingIndicatorEnabled, isTypingIndicatorEnabled = _k === void 0 ? false : _k, _l = _j.isMessageReceiptStatusEnabled, isMessageReceiptStatusEnabled = _l === void 0 ? false : _l;
    var userId = config.userId;
    var isMessageStatusEnabled = isMessageReceiptStatusEnabled
        && (((_b = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _b === void 0 ? void 0 : _b.messageType) === 'user' || ((_c = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _c === void 0 ? void 0 : _c.messageType) === 'file')
        && ((_e = (_d = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _d === void 0 ? void 0 : _d.sender) === null || _e === void 0 ? void 0 : _e.userId) === userId;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListItemView, { channel: channel, tabIndex: tabIndex, isTyping: isTypingIndicatorEnabled && isTyping, isSelected: isSelected !== null && isSelected !== void 0 ? isSelected : isActive, channelName: bundle_C3gISq8S_getChannelTitle(channel, userId, stringSet), isMessageStatusEnabled: isMessageStatusEnabled, onClick: onClick, onLeaveChannel: onLeaveChannel, renderChannelAction: renderChannelAction }));
};


//# sourceMappingURL=ChannelPreview.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/AddChannel.js















































var AddChannel = function () {
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _a[0], setShowModal = _a[1];
    var _b = useChannelListContext(), overrideInviteUser = _b.overrideInviteUser, onBeforeCreateChannel = _b.onBeforeCreateChannel, onChannelSelect = _b.onChannelSelect;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddGroupChannelView, { createChannelVisible: showModal, onChangeCreateChannelVisible: setShowModal, onCreateChannelClick: overrideInviteUser, onBeforeCreateChannel: onBeforeCreateChannel, onChannelCreated: function (it) { return onChannelSelect === null || onChannelSelect === void 0 ? void 0 : onChannelSelect(it); } }));
};


//# sourceMappingURL=AddChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/ChannelListUI.js














































































var ChannelListUI = function (props) {
    var renderHeader = props.renderHeader, renderChannelPreview = props.renderChannelPreview, renderPlaceHolderError = props.renderPlaceHolderError, renderPlaceHolderLoading = props.renderPlaceHolderLoading, renderPlaceHolderEmptyList = props.renderPlaceHolderEmptyList;
    var _a = useChannelListContext(), onThemeChange = _a.onThemeChange, allowProfileEdit = _a.allowProfileEdit, allChannels = _a.allChannels, currentChannel = _a.currentChannel, channelListDispatcher = _a.channelListDispatcher, typingChannels = _a.typingChannels, initialized = _a.initialized, fetchChannelList = _a.fetchChannelList, onProfileEditSuccess = _a.onProfileEditSuccess;
    var _b = useSendbirdStateContext(), stores = _b.stores, config = _b.config;
    var logger = config.logger, _c = config.isOnline, isOnline = _c === void 0 ? false : _c;
    var sdk = stores.sdkStore.sdk;
    var renderListItem = function (props) {
        var channel = props.item, index = props.index;
        var previewProps = {
            channel: channel,
            tabIndex: index,
            isSelected: (channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url),
            isTyping: typingChannels === null || typingChannels === void 0 ? void 0 : typingChannels.some(function (_a) {
                var url = _a.url;
                return url === (channel === null || channel === void 0 ? void 0 : channel.url);
            }),
            renderChannelAction: function (props) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelPreviewAction, __assign({}, props)); },
            onClick: function () {
                if (!isOnline && !(sdk === null || sdk === void 0 ? void 0 : sdk.isCacheEnabled)) {
                    logger.warning('ChannelList: Inactivated clicking channel item during offline.');
                    return;
                }
                logger.info('ChannelList: Clicked on channel:', channel);
                channelListDispatcher({
                    type: bundle_CttExrDx_SET_CURRENT_CHANNEL,
                    payload: channel,
                });
            },
            onLeaveChannel: function (channel, cb) {
                return __awaiter(this, void 0, void 0, function () {
                    var response, err_1;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                logger.info('ChannelList: Leaving channel', channel);
                                if (!channel) return [3 /*break*/, 4];
                                _a.label = 1;
                            case 1:
                                _a.trys.push([1, 3, , 4]);
                                return [4 /*yield*/, channel.leave()];
                            case 2:
                                response = _a.sent();
                                logger.info('ChannelList: Leaving channel success', response);
                                if (cb && typeof cb === 'function')
                                    cb(channel, null);
                                channelListDispatcher({
                                    type: LEAVE_CHANNEL_SUCCESS,
                                    payload: channel.url,
                                });
                                return [3 /*break*/, 4];
                            case 3:
                                err_1 = _a.sent();
                                logger.error('ChannelList: Leaving channel failed', err_1);
                                if (cb && typeof cb === 'function')
                                    cb(channel, err_1);
                                return [3 /*break*/, 4];
                            case 4: return [2 /*return*/];
                        }
                    });
                });
            },
        };
        if (renderChannelPreview) {
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { key: channel === null || channel === void 0 ? void 0 : channel.url, onClick: previewProps.onClick }, renderChannelPreview(previewProps)));
        }
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelPreview, __assign({ key: channel === null || channel === void 0 ? void 0 : channel.url }, previewProps));
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListUIView, { renderHeader: renderHeader, renderChannel: renderListItem, renderPlaceHolderError: renderPlaceHolderError, renderPlaceHolderLoading: renderPlaceHolderLoading, renderPlaceHolderEmptyList: renderPlaceHolderEmptyList, onChangeTheme: onThemeChange !== null && onThemeChange !== void 0 ? onThemeChange : noop, allowProfileEdit: allowProfileEdit, onUserProfileUpdated: onProfileEditSuccess !== null && onProfileEditSuccess !== void 0 ? onProfileEditSuccess : noop, channels: allChannels, onLoadMore: fetchChannelList, initialized: initialized, renderAddChannel: function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddChannel, null); } }));
};


//# sourceMappingURL=ChannelListUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList.js















































































var ChannelList = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListProvider, { className: props === null || props === void 0 ? void 0 : props.className, disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile, allowProfileEdit: props === null || props === void 0 ? void 0 : props.allowProfileEdit, onBeforeCreateChannel: props === null || props === void 0 ? void 0 : props.onBeforeCreateChannel, onThemeChange: props === null || props === void 0 ? void 0 : props.onThemeChange, overrideInviteUser: props === null || props === void 0 ? void 0 : props.overrideInviteUser, onProfileEditSuccess: props === null || props === void 0 ? void 0 : props.onProfileEditSuccess, onChannelSelect: props === null || props === void 0 ? void 0 : props.onChannelSelect, sortChannelList: props === null || props === void 0 ? void 0 : props.sortChannelList, queries: props === null || props === void 0 ? void 0 : props.queries, disableAutoSelect: props === null || props === void 0 ? void 0 : props.disableAutoSelect, activeChannelUrl: props === null || props === void 0 ? void 0 : props.activeChannelUrl, isTypingIndicatorEnabled: props === null || props === void 0 ? void 0 : props.isTypingIndicatorEnabled, isMessageReceiptStatusEnabled: props === null || props === void 0 ? void 0 : props.isMessageReceiptStatusEnabled, reconnectOnIdle: props === null || props === void 0 ? void 0 : props.reconnectOnIdle },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListUI, { renderChannelPreview: props === null || props === void 0 ? void 0 : props.renderChannelPreview, renderHeader: props === null || props === void 0 ? void 0 : props.renderHeader, renderPlaceHolderEmptyList: props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList, renderPlaceHolderError: props === null || props === void 0 ? void 0 : props.renderPlaceHolderError, renderPlaceHolderLoading: props === null || props === void 0 ? void 0 : props.renderPlaceHolderLoading })));
};


//# sourceMappingURL=ChannelList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/context.js







function useAsyncRequest(request, options) {
    var _this = this;
    var _a;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({ loading: true, response: undefined, error: undefined }), state = _b[0], setState = _b[1];
    var updateWithRequest = function () { return __awaiter(_this, void 0, void 0, function () {
        var response_1, error_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 2, , 3]);
                    setState(function (prev) { return ({ loading: true, error: undefined, response: (options === null || options === void 0 ? void 0 : options.resetResponseOnRefresh) ? undefined : prev.response }); });
                    return [4 /*yield*/, request()];
                case 1:
                    response_1 = _a.sent();
                    if (response_1) {
                        setState(function (prev) { return (__assign(__assign({}, prev), { response: response_1, loading: false })); });
                    }
                    else {
                        setState(function (prev) { return (__assign(__assign({}, prev), { loading: Boolean(options === null || options === void 0 ? void 0 : options.persistLoadingIfNoResponse) })); });
                    }
                    return [3 /*break*/, 3];
                case 2:
                    error_1 = _a.sent();
                    setState(function (prev) { return (__assign(__assign({}, prev), { error: error_1, loading: false })); });
                    return [3 /*break*/, 3];
                case 3: return [2 /*return*/];
            }
        });
    }); };
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        updateWithRequest();
        return function () {
            if (request.cancel && typeof request.cancel === 'function') {
                request.cancel();
            }
        };
    }, (_a = options === null || options === void 0 ? void 0 : options.deps) !== null && _a !== void 0 ? _a : []);
    return __assign(__assign({}, state), { refresh: updateWithRequest });
}

var ChannelSettingsContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var ChannelSettingsProvider = function (_a) {
    var children = _a.children, className = _a.className, channelUrl = _a.channelUrl, onCloseClick = _a.onCloseClick, onLeaveChannel = _a.onLeaveChannel, onChannelModified = _a.onChannelModified, overrideInviteUser = _a.overrideInviteUser, onBeforeUpdateChannel = _a.onBeforeUpdateChannel, queries = _a.queries, renderUserProfile = _a.renderUserProfile, disableUserProfile = _a.disableUserProfile;
    var _b = useSendbirdStateContext(), config = _b.config, stores = _b.stores;
    var sdkStore = stores.sdkStore;
    var logger = config.logger, onUserProfileMessage = config.onUserProfileMessage;
    // hack to keep track of channel updates by triggering useEffect
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(function () { return uuidv4(); }), channelUpdateId = _c[0], setChannelUpdateId = _c[1];
    var forceUpdateUI = function () { return setChannelUpdateId(uuidv4()); };
    var _d = useAsyncRequest(function () { return __awaiter(void 0, void 0, void 0, function () {
        var error_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    logger.info('ChannelSettings: fetching channel');
                    if (!channelUrl) {
                        logger.warning('ChannelSettings: channel url is required');
                        return [2 /*return*/];
                    }
                    else if (!sdkStore.initialized || !sdkStore.sdk) {
                        logger.warning('ChannelSettings: SDK is not initialized');
                        return [2 /*return*/];
                    }
                    else if (!sdkStore.sdk.groupChannel) {
                        logger.warning('ChannelSettings: GroupChannelModule is not specified in the SDK');
                        return [2 /*return*/];
                    }
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, sdkStore.sdk.groupChannel.getChannel(channelUrl)];
                case 2: return [2 /*return*/, _a.sent()];
                case 3:
                    error_1 = _a.sent();
                    logger.error('ChannelSettings: fetching channel error:', error_1);
                    throw error_1;
                case 4: return [2 /*return*/];
            }
        });
    }); }, {
        resetResponseOnRefresh: true,
        persistLoadingIfNoResponse: true,
        deps: [sdkStore.initialized, sdkStore.sdk.groupChannel],
    }), _e = _d.response, response = _e === void 0 ? null : _e, loading = _d.loading, error = _d.error, refresh = _d.refresh;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        refresh();
    }, [channelUrl, channelUpdateId]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsContext.Provider, { value: {
            channelUrl: channelUrl,
            onCloseClick: onCloseClick,
            onLeaveChannel: onLeaveChannel,
            onChannelModified: onChannelModified,
            onBeforeUpdateChannel: onBeforeUpdateChannel,
            queries: queries,
            overrideInviteUser: overrideInviteUser,
            setChannelUpdateId: setChannelUpdateId,
            forceUpdateUI: forceUpdateUI,
            channel: response,
            loading: loading,
            invalidChannel: Boolean(error),
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { renderUserProfile: renderUserProfile, disableUserProfile: disableUserProfile !== null && disableUserProfile !== void 0 ? disableUserProfile : !config.common.enableUsingDefaultUserProfile, onUserProfileMessage: onUserProfileMessage },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings ".concat(className) }, children))));
};
var useChannelSettingsContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ChannelSettingsContext);
    if (!context)
        throw new Error('ChannelSettingsContext not found. Use within the ChannelSettings module');
    return context;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ChannelSettingsHeader.js
















var ChannelSettingsHeader = function (_a) {
    var onCloseClick = _a.onCloseClick, 
    // Header custom props
    renderLeft = _a.renderLeft, renderMiddle = _a.renderMiddle, renderRight = _a.renderRight;
    var stringSet = useLocalization().stringSet;
    var config = useSendbirdStateContext().config;
    var logger = config.logger;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1, { className: "sendbird-channel-settings__header", renderLeft: renderLeft, renderMiddle: renderMiddle !== null && renderMiddle !== void 0 ? renderMiddle : (function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Title, { title: stringSet.CHANNEL_SETTING__HEADER__TITLE })); }), renderRight: renderRight !== null && renderRight !== void 0 ? renderRight : (function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings__header-icon" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.IconButton, { type: IconTypes.CLOSE, onClick: function (e) {
                    logger.info('ChannelSettings: Click close');
                    onCloseClick(e);
                } }))); }) }));
};


//# sourceMappingURL=ChannelSettingsHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/EditDetailsModal.js





































var EditDetails = function (props) {
    var _a, _b, _c;
    var onSubmit = props.onSubmit, onCancel = props.onCancel;
    var _d = useChannelSettingsContext(), channel = _d.channel, onChannelModified = _d.onChannelModified, onBeforeUpdateChannel = _d.onBeforeUpdateChannel, setChannelUpdateId = _d.setChannelUpdateId;
    var title = channel === null || channel === void 0 ? void 0 : channel.name;
    var state = useSendbirdStateContext();
    var userId = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    var theme = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.theme;
    var logger = (_c = state === null || state === void 0 ? void 0 : state.config) === null || _c === void 0 ? void 0 : _c.logger;
    var inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var formRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var hiddenInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), currentImg = _e[0], setCurrentImg = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), newFile = _f[0], setNewFile = _f[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, titleText: stringSet.MODAL__CHANNEL_INFORMATION__TITLE, submitText: stringSet.BUTTON__SAVE, onCancel: onCancel, onSubmit: function () {
            var _a, _b, _c;
            if (title !== '' && !((_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.value)) {
                if ((_b = formRef.current) === null || _b === void 0 ? void 0 : _b.reportValidity) { // might not work in explorer
                    formRef.current.reportValidity();
                }
                return;
            }
            var currentTitle = (_c = inputRef.current) === null || _c === void 0 ? void 0 : _c.value;
            var currentImg = newFile;
            logger.info('ChannelSettings: Channel information being updated', {
                currentTitle: currentTitle,
                currentImg: currentImg,
            });
            if (onBeforeUpdateChannel) {
                logger.info('ChannelSettings: onBeforeUpdateChannel');
                var params = onBeforeUpdateChannel(currentTitle !== null && currentTitle !== void 0 ? currentTitle : '', currentImg, channel === null || channel === void 0 ? void 0 : channel.data);
                channel === null || channel === void 0 ? void 0 : channel.updateChannel(params).then(function (groupChannel) {
                    onChannelModified === null || onChannelModified === void 0 ? void 0 : onChannelModified(groupChannel);
                    setChannelUpdateId(uuidv4());
                    onSubmit();
                });
            }
            else {
                logger.info('ChannelSettings: normal');
                channel === null || channel === void 0 ? void 0 : channel.updateChannel({
                    coverImage: currentImg,
                    name: currentTitle,
                    data: (channel === null || channel === void 0 ? void 0 : channel.data) || '',
                }).then(function (groupChannel) {
                    logger.info('ChannelSettings: Channel information updated', groupChannel);
                    onChannelModified === null || onChannelModified === void 0 ? void 0 : onChannelModified(groupChannel);
                    setChannelUpdateId === null || setChannelUpdateId === void 0 ? void 0 : setChannelUpdateId(uuidv4());
                    onSubmit();
                });
            }
        }, type: ButtonTypes.PRIMARY },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", { className: "channel-profile-form", ref: formRef, onSubmit: function (e) { e.preventDefault(); } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "channel-profile-form__img-section" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "channel-profile-form__avatar" }, currentImg
                    ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { height: "80px", width: "80px", src: currentImg })) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, { height: 80, width: 80, channel: channel, userId: userId, theme: theme }))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { ref: hiddenInputRef, type: "file", accept: "image/gif, image/jpeg, image/png", style: { display: 'none' }, onChange: function (e) {
                        if (e.target.files) {
                            setCurrentImg(URL.createObjectURL(e.target.files[0]));
                            setNewFile(e.target.files[0]);
                        }
                        if (hiddenInputRef.current) {
                            hiddenInputRef.current.value = '';
                        }
                    } }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "channel-profile-form__avatar-button", onClick: function () { var _a; return (_a = hiddenInputRef.current) === null || _a === void 0 ? void 0 : _a.click(); }, disableUnderline: true },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet.MODAL__CHANNEL_INFORMATION__UPLOAD))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "channel-profile-form__name-section" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, { required: title !== '', name: "channel-profile-form__name", ref: inputRef, value: title, placeHolder: stringSet.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER })))));
};


//# sourceMappingURL=EditDetailsModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ChannelProfile.js






































var ChannelProfile = function () {
    var _a, _b, _c;
    var state = useSendbirdStateContext();
    var channelSettingStore = useChannelSettingsContext();
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _d[0], setShowModal = _d[1];
    var userId = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    var theme = ((_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.theme) || 'light';
    var isOnline = (_c = state === null || state === void 0 ? void 0 : state.config) === null || _c === void 0 ? void 0 : _c.isOnline;
    var disabled = !isOnline;
    var channel = channelSettingStore === null || channelSettingStore === void 0 ? void 0 : channelSettingStore.channel;
    var getChannelName = function () {
        if ((channel === null || channel === void 0 ? void 0 : channel.name) && channel.name !== 'Group Channel') {
            return channel.name;
        }
        if ((channel === null || channel === void 0 ? void 0 : channel.name) === 'Group Channel' || !(channel === null || channel === void 0 ? void 0 : channel.name)) {
            return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).map(function (member) { return member.nickname || stringSet.NO_NAME; }).join(', ');
        }
        return stringSet.NO_TITLE;
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-profile" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-profile--inner" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-profile__avatar" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, { channel: channel, userId: userId, theme: theme, width: 80, height: 80 })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-profile__title", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, getChannelName()),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { disabled: disabled, className: "sendbird-channel-profile__edit", onClick: function () {
                    if (disabled) {
                        return;
                    }
                    setShowModal(true);
                }, disableUnderline: true },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: disabled ? LabelColors.ONBACKGROUND_2 : LabelColors.PRIMARY }, stringSet.CHANNEL_SETTING__PROFILE__EDIT)),
            showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditDetails, { onCancel: function () { return setShowModal(false); }, onSubmit: function () { return setShowModal(false); } })))));
};


//# sourceMappingURL=ChannelProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/AccordionGroup.js



var AccordionGroupContext = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    openedListKeys: [],
    addOpenedListKey: noop,
    removeOpenedListKey: noop,
    clearOpenedListKeys: noop,
    allowMultipleOpen: false,
});
var AccordionGroupProvider = function (_a) {
    var className = _a.className, children = _a.children, _b = _a.allowMultipleOpen, allowMultipleOpen = _b === void 0 ? false : _b;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), openedListKeys = _c[0], setOpenedListKeys = _c[1];
    var addOpenedListKey = function (key) {
        setOpenedListKeys(function (prevList) {
            if (!allowMultipleOpen) {
                return [key];
            }
            prevList.push(key);
            return prevList;
        });
    };
    var removeOpenedListKey = function (key) {
        setOpenedListKeys(function (prevList) { return prevList.filter(function (k) { return k !== key; }); });
    };
    var clearOpenedListKeys = function () {
        setOpenedListKeys([]);
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-accordion-group-provider ".concat(className) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AccordionGroupContext.Provider, { value: {
                openedListKeys: openedListKeys,
                addOpenedListKey: addOpenedListKey,
                removeOpenedListKey: removeOpenedListKey,
                clearOpenedListKeys: clearOpenedListKeys,
                allowMultipleOpen: allowMultipleOpen,
            } }, children)));
};
var useAccordionGroupContext = function () {
    var context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(AccordionGroupContext);
    if (!context)
        throw new Error('No accordion group context available. Make sure you are rending <AccordionGroupContext />.');
    return context;
};


//# sourceMappingURL=AccordionGroup.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Accordion.js







var Accordion = function (_a) {
    var className = _a.className, id = _a.id, renderTitle = _a.renderTitle, renderContent = _a.renderContent, renderFooter = _a.renderFooter;
    var _b = useAccordionGroupContext(), openedListKeys = _b.openedListKeys, addOpenedListKey = _b.addOpenedListKey, removeOpenedListKey = _b.removeOpenedListKey;
    var isOpened = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return openedListKeys.includes(id); }, [openedListKeys]);
    var handleClick = function () {
        if (isOpened) {
            removeOpenedListKey(id);
        }
        else {
            addOpenedListKey(id);
        }
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-accordion', className, isOpened ? 'sendbird-accordion--opened' : 'sendbird-accordion--closed') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-accordion__panel-header", id: id, role: "switch", "aria-checked": false, onClick: handleClick, onKeyDown: handleClick, tabIndex: 0 },
            renderTitle(),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CHEVRON_RIGHT, className: [
                    'sendbird-accordion__panel-icon-right',
                    'sendbird-accordion__panel-icon--chevron',
                    (isOpened ? 'sendbird-accordion__panel-icon--open' : ''),
                ].join(' '), height: "24px", width: "24px" })),
        isOpened && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-accordion-opened-list" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-accordion__list" }, renderContent()),
            renderFooter && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-accordion__footer" }, renderFooter()))))));
};

var AccordionGroup = AccordionGroupProvider;


//# sourceMappingURL=Accordion.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Toggle.js





/**
 * The default value of `checked` should be null
 * to support both case of controlled and uncontrolled component
 * ref: https://github.com/aaronshaf/react-toggle#props
 */
var Toggle_noop = function () { };
var TOGGLE_DEFAULT_VALUE = {
    checked: null,
    defaultChecked: false,
    disabled: false,
    onChange: Toggle_noop,
    onFocus: Toggle_noop,
    onBlur: Toggle_noop,
};
var ToggleContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(TOGGLE_DEFAULT_VALUE);
function useToggleContext() {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ToggleContext);
    if (context === undefined) {
        throw new Error('@sendbird/uikit-react/ui/Toggle: useToggleContext must be used within a ToggleContainer.');
    }
    return context;
}

// Props Explanation https://github.com/aaronshaf/react-toggle#props
function ToggleContainer(_a) {
    var _b = _a.checked, checked = _b === void 0 ? TOGGLE_DEFAULT_VALUE.checked : _b, // null
    _c = _a.defaultChecked, // null
    defaultChecked = _c === void 0 ? TOGGLE_DEFAULT_VALUE.defaultChecked : _c, _d = _a.disabled, disabled = _d === void 0 ? TOGGLE_DEFAULT_VALUE.disabled : _d, _e = _a.onChange, onChange = _e === void 0 ? TOGGLE_DEFAULT_VALUE.onChange : _e, _f = _a.onFocus, onFocus = _f === void 0 ? TOGGLE_DEFAULT_VALUE.onFocus : _f, _g = _a.onBlur, onBlur = _g === void 0 ? TOGGLE_DEFAULT_VALUE.onBlur : _g, children = _a.children;
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(defaultChecked || false), isChecked = _h[0], setChecked = _h[1];
    var handleChange = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (e) {
        if (disabled) {
            return;
        }
        if (checked === null) {
            setChecked(e.currentTarget.checked);
        }
        onChange(e);
    }, [onChange, checked]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ToggleContext.Provider, { value: {
            checked: checked !== null ? checked : isChecked,
            disabled: disabled,
            onChange: handleChange,
            onFocus: function (e) {
                if (!disabled) {
                    onFocus(e);
                }
            },
            onBlur: function (e) {
                if (!disabled) {
                    onBlur(e);
                }
            },
        } }, children));
}

function filterNumber(input) {
    if (typeof input !== 'string' && typeof input !== 'number') {
        try {
            var config = useSendbirdStateContext().config;
            var logger = config.logger;
            logger.warning('@sendbird/uikit-react/ui/Toggle: TypeError - expected string or number.', input);
        }
        catch (_) { /* noop */ }
        return [];
    }
    if (typeof input === 'number') {
        return [input];
    }
    var regex = /(-?\d+)(\.\d+)?/g;
    var numbers = input.match(regex) || [];
    return numbers.map(parseFloat);
}

function ToggleUI(props) {
    var _a;
    var _b = props.reversed, reversed = _b === void 0 ? false : _b, _c = props.width, width = _c === void 0 ? '40px' : _c, _d = props.animationDuration, animationDuration = _d === void 0 ? '0.5s' : _d, _e = props.style, style = _e === void 0 ? {} : _e, _f = props.name, name = _f === void 0 ? '' : _f, _g = props.id, id = _g === void 0 ? '' : _g, _h = props.ariaLabel, ariaLabel = _h === void 0 ? '' : _h, _j = props.ariaLabelledby, ariaLabelledby = _j === void 0 ? '' : _j;
    var _k = useToggleContext(), checked = _k.checked, disabled = _k.disabled, onChange = _k.onChange, onFocus = _k.onFocus, onBlur = _k.onBlur;
    // animation should not be activated in the initialization step
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), animatedClassName = _l[0], setAnimatedClassName = _l[1];
    var toggleWidth = (_a = filterNumber(width)) === null || _a === void 0 ? void 0 : _a[0];
    var toggleHeight = toggleWidth / 2;
    // The size of dot should be 60% of toggle height
    var dotSize = toggleHeight * 0.6;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("label", { className: [
            'sendbird-input-toggle-button',
            animatedClassName,
            checked ? 'sendbird-input-toggle-button--checked' : 'sendbird-input-toggle-button--unchecked',
            disabled ? 'sendbird-input-toggle-button--disabled' : [],
            reversed ? 'sendbird-input-toggle-button--reversed' : [],
        ].flat().join(' '), style: __assign({ width: "".concat(toggleWidth, "px"), height: "".concat(toggleHeight, "px"), borderRadius: "".concat(dotSize, "px") }, style) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: [
                'sendbird-input-toggle-button__inner-dot',
                checked
                    ? 'sendbird-input-toggle-button__inner-dot--activate'
                    : 'sendbird-input-toggle-button__inner-dot--inactivate',
            ].join(' '), style: {
                width: "".concat(dotSize, "px"),
                height: "".concat(dotSize, "px"),
                animationDuration: animationDuration,
            } }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { type: "checkbox", "aria-label": ariaLabel, "aria-labelledby": ariaLabelledby, name: name, id: id, checked: checked !== null && checked !== void 0 ? checked : undefined, disabled: disabled, onChange: function (e) {
                onChange === null || onChange === void 0 ? void 0 : onChange(e);
                setAnimatedClassName(e.currentTarget.checked ? 'sendbird-input-toggle-button--turned-on' : 'sendbird-input-toggle-button--turned-off');
            }, onFocus: onFocus, onBlur: onBlur })));
}

function Toggle(props) {
    var 
    // ToggleProvider
    checked = props.checked, defaultChecked = props.defaultChecked, disabled = props.disabled, onChange = props.onChange, onFocus = props.onFocus, onBlur = props.onBlur, 
    // ToggleUI
    className = props.className, reversed = props.reversed, width = props.width, 
    // height will be half of width
    animationDuration = props.animationDuration, style = props.style, name = props.name, id = props.id, ariaLabel = props.ariaLabel, ariaLabelledby = props.ariaLabelledby;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-ui-toggle ".concat(className) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ToggleContainer, { checked: checked, defaultChecked: defaultChecked, disabled: disabled, onChange: onChange, onFocus: onFocus, onBlur: onBlur },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ToggleUI, { reversed: reversed, width: width, animationDuration: animationDuration, style: style, name: name, id: id, ariaLabel: ariaLabel, ariaLabelledby: ariaLabelledby }))));
}


//# sourceMappingURL=Toggle.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/UserListItem.js






























var UserListItem_UserListItem = function (_a) {
    var user = _a.user, _b = _a.className, className = _b === void 0 ? '' : _b, currentUser = _a.currentUser, action = _a.action;
    var actionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var parentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _c.disableUserProfile, renderUserProfile = _c.renderUserProfile;
    var injectingClassNames = Array.isArray(className) ? className : [className];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: parentRef, className: __spreadArray([
            'sendbird-user-list-item--small'
        ], injectingClassNames, true).join(' ') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { onClick: function () {
                        if (!disableUserProfile) {
                            toggleDropdown();
                        }
                    }, ref: avatarRef, className: "sendbird-user-list-item--small__avatar", src: user.profileUrl, width: 24, height: 24 }),
                user instanceof _bundle_a5a397f1_Zt && user.isMuted && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedAvatarOverlay, null)))); }, menuItems: function (closeDropdown) { return (renderUserProfile
                ? renderUserProfile({
                    user: user,
                    currentUserId: currentUser !== null && currentUser !== void 0 ? currentUser : '',
                    close: closeDropdown,
                    avatarRef: avatarRef,
                })
                : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { openLeft: true, parentRef: avatarRef, 
                    // for catching location(x, y) of MenuItems
                    parentContainRef: avatarRef, 
                    // for toggling more options(menus & reactions)
                    closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: user, currentUserId: currentUser, onSuccess: closeDropdown })))); } }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-user-list-item--small__title", type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 },
            user.nickname || stringSet.NO_NAME,
            (currentUser === user.userId) && (stringSet.CHANNEL_SETTING__MEMBERS__YOU)), // if there is now nickname, display userId
        !user.nickname && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-user-list-item--small__subtitle", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, user.userId)),
        user instanceof _bundle_a5a397f1_Zt && user.role === 'operator' && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-user-list-item--small__operator", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.CHANNEL_SETTING__MEMBERS__OPERATOR)),
        action && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: actionRef, className: "sendbird-user-list-item--small__action" }, action({ actionRef: actionRef, parentRef: parentRef })))));
};


//# sourceMappingURL=UserListItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-D5P54ZJi.js


















function MembersModal(_a) {
    var _this = this;
    var _b;
    var onCancel = _a.onCancel;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _c[0], setMembers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), memberQuery = _d[0], setMemberQuery = _d[1];
    var channel = useChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUserId = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var memberListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
            limit: 20,
        });
        memberListQuery === null || memberListQuery === void 0 ? void 0 : memberListQuery.next().then(function (members) {
            setMembers(members);
        });
        setMemberQuery(memberListQuery !== null && memberListQuery !== void 0 ? memberListQuery : null);
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, hideFooter: true, onCancel: function () { return onCancel(); }, onSubmit: noop, titleText: stringSet.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: useOnScrollPositionChangeDetector({
                    onReachedBottom: function () { return __awaiter(_this, void 0, void 0, function () {
                        return __generator(this, function (_a) {
                            if (memberQuery && memberQuery.hasNext) {
                                memberQuery.next().then(function (o) {
                                    setMembers(__spreadArray(__spreadArray([], members, true), o, true));
                                });
                            }
                            return [2 /*return*/];
                        });
                    }); },
                }) }, members.map(function (member) {
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { user: member, key: member.userId, currentUser: currentUserId, action: function (_a) {
                        var parentRef = _a.parentRef, actionRef = _a.actionRef;
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, (channel === null || channel === void 0 ? void 0 : channel.myRole) === 'operator' && currentUserId !== member.userId && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: function () {
                                    toggleDropdown();
                                } },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorMenuItem, { channel: channel, user: member, disable: currentUserId === member.userId, onChange: function (_, member, isOperator) {
                                        var newMembers = __spreadArray([], members, true);
                                        for (var _i = 0, newMembers_1 = newMembers; _i < newMembers_1.length; _i++) {
                                            var newMember = newMembers_1[_i];
                                            if (newMember.userId === member.userId) {
                                                newMember.role = isOperator ? _bundle_0b1520ed["H" /* a7 */].OPERATOR : _bundle_0b1520ed["H" /* a7 */].NONE;
                                            }
                                        }
                                        setMembers(newMembers);
                                        closeDropdown();
                                    }, onError: function () {
                                        // FIXME: handle error later
                                        closeDropdown();
                                    }, dataSbId: "channel_setting_member_context_menu_".concat((member.role !== 'operator') ? 'register_as_operator' : 'unregister_operator') }, member.role !== 'operator'
                                    ? stringSet.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR
                                    : stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),
                                // No muted members in broadcast channel
                                !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MuteMenuItem, { channel: channel, user: member, onChange: function (_, member, isMuted) {
                                        var newMembers = __spreadArray([], members, true);
                                        for (var _i = 0, newMembers_2 = newMembers; _i < newMembers_2.length; _i++) {
                                            var newMember = newMembers_2[_i];
                                            if (newMember.userId === member.userId) {
                                                newMember.isMuted = isMuted;
                                            }
                                        }
                                        setMembers(newMembers);
                                        closeDropdown();
                                    }, onError: function () {
                                        // FIXME: handle error later
                                        closeDropdown();
                                    }, dataSbId: "channel_setting_member_context_menu_".concat((member.isMuted) ? 'unmute' : 'mute') }, member.isMuted
                                    ? stringSet.CHANNEL_SETTING__MODERATION__UNMUTE
                                    : stringSet.CHANNEL_SETTING__MODERATION__MUTE)),
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                        channel === null || channel === void 0 ? void 0 : channel.banUser(member, -1, '').then(function () {
                                            setMembers(members.filter(function (_a) {
                                                var userId = _a.userId;
                                                return userId !== member.userId;
                                            }));
                                        });
                                    }, dataSbId: "channel_setting_member_context_menu_ban" }, stringSet.CHANNEL_SETTING__MODERATION__BAN))); } }))));
                    } }));
            })))));
}

function bundle_D5P54ZJi_InviteUsers(_a) {
    var _this = this;
    var _b, _c, _d;
    var onCancel = _a.onCancel, onSubmit = _a.onSubmit;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), users = _e[0], setUsers = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), userListQuery = _f[0], setUserListQuery = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({}), selectedUsers = _g[0], setSelectedUsers = _g[1];
    var state = useSendbirdStateContext();
    var sdk = (_c = (_b = state === null || state === void 0 ? void 0 : state.stores) === null || _b === void 0 ? void 0 : _b.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;
    var globalUserListQuery = (_d = state === null || state === void 0 ? void 0 : state.config) === null || _d === void 0 ? void 0 : _d.userListQuery;
    var _h = useChannelSettingsContext(), channel = _h.channel, overrideInviteUser = _h.overrideInviteUser, queries = _h.queries;
    var stringSet = useLocalization().stringSet;
    var onScroll = useOnScrollPositionChangeDetector({
        onReachedBottom: function () {
            return __awaiter(this, void 0, void 0, function () {
                var users_1;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!(userListQuery === null || userListQuery === void 0 ? void 0 : userListQuery.hasNext)) return [3 /*break*/, 2];
                            return [4 /*yield*/, userListQuery.next()];
                        case 1:
                            users_1 = _a.sent();
                            setUsers(function (prev) { return __spreadArray(__spreadArray([], prev, true), users_1, true); });
                            _a.label = 2;
                        case 2: return [2 /*return*/];
                    }
                });
            });
        },
    });
    var onInviteUsers = function () { return __awaiter(_this, void 0, void 0, function () {
        var userIdsToInvite;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    userIdsToInvite = Object.keys(selectedUsers);
                    if (!(channel && typeof overrideInviteUser === 'function')) return [3 /*break*/, 1];
                    overrideInviteUser({ users: userIdsToInvite, onClose: onCancel, channel: channel });
                    return [3 /*break*/, 3];
                case 1: return [4 /*yield*/, (channel === null || channel === void 0 ? void 0 : channel.inviteWithUserIds(userIdsToInvite))];
                case 2:
                    _a.sent();
                    onSubmit(userIdsToInvite);
                    _a.label = 3;
                case 3: return [2 /*return*/];
            }
        });
    }); };
    var onSelectUser = function (user) {
        setSelectedUsers(function (_a) {
            var draft = __rest(_a, []);
            if (draft[user.userId]) {
                delete draft[user.userId];
            }
            else {
                draft[user.userId] = user;
            }
            return draft;
        });
    };
    var membersMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a;
        var _b, _c;
        // UIKit policy: In a super or broadcast channel, do not check the members when inviting users.
        if ((channel === null || channel === void 0 ? void 0 : channel.isSuper) || (channel === null || channel === void 0 ? void 0 : channel.isBroadcast))
            return _a = {}, _a[(_c = (_b = sdk.currentUser) === null || _b === void 0 ? void 0 : _b.userId) !== null && _c !== void 0 ? _c : ''] = sdk.currentUser, _a;
        return channel === null || channel === void 0 ? void 0 : channel.members.reduce(function (acc, cur) {
            acc[cur.userId] = cur;
            return acc;
        }, {});
    }, [channel === null || channel === void 0 ? void 0 : channel.members.length]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var fetchUsersAndSetQuery = function () { return __awaiter(_this, void 0, void 0, function () {
            var query, users_2;
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        query = (_a = globalUserListQuery === null || globalUserListQuery === void 0 ? void 0 : globalUserListQuery()) !== null && _a !== void 0 ? _a : sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery(queries === null || queries === void 0 ? void 0 : queries.applicationUserListQuery);
                        if (!query) return [3 /*break*/, 2];
                        return [4 /*yield*/, query.next()];
                    case 1:
                        users_2 = _b.sent();
                        setUserListQuery(query);
                        setUsers(users_2);
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        }); };
        fetchUsersAndSetQuery();
    }, [sdk]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, disabled: Object.keys(selectedUsers).length === 0, submitText: stringSet.BUTTON__INVITE, type: ButtonTypes.PRIMARY, onCancel: function () { return onCancel(); }, onSubmit: onInviteUsers, titleText: stringSet.CHANNEL_SETTING__MEMBERS__SELECT_TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: onScroll },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll__inner" }, users.map(function (user) {
                    var isMember = Boolean(membersMap ? membersMap[user.userId] : false);
                    var isSelected = Boolean(selectedUsers[user.userId]);
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { key: user.userId, checkBox: true, checked: isMember || isSelected, disabled: isMember, user: user, onChange: function () { return onSelectUser(user); } }));
                }))))));
}

var MemberList = function () {
    var _a, _b, _c;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _d[0], setMembers = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), hasNext = _e[0], setHasNext = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showAllMembers = _f[0], setShowAllMembers = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showInviteUsers = _g[0], setShowInviteUsers = _g[1];
    var state = useSendbirdStateContext();
    var _h = useChannelSettingsContext(), channel = _h.channel, setChannelUpdateId = _h.setChannelUpdateId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var sdk = (_b = (_a = state === null || state === void 0 ? void 0 : state.stores) === null || _a === void 0 ? void 0 : _a.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk;
    var userId = (_c = state === null || state === void 0 ? void 0 : state.config) === null || _c === void 0 ? void 0 : _c.userId;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel) {
            setMembers([]);
            return;
        }
        var memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({ limit: 10 });
        memberUserListQuery.next().then(function (members) {
            setMembers(members);
            setHasNext(memberUserListQuery.hasNext);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setMembers([]);
            return;
        }
        var memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({ limit: 10 });
        memberUserListQuery.next().then(function (members) {
            setMembers(members);
            setHasNext(memberUserListQuery.hasNext);
            setChannelUpdateId === null || setChannelUpdateId === void 0 ? void 0 : setChannelUpdateId(uuidv4());
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-member-list" },
        members.map(function (member) {
            var _a;
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, { key: member.userId, user: member, currentUser: (_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId, action: ((channel === null || channel === void 0 ? void 0 : channel.myRole) === 'operator' && userId !== member.userId)
                    ? function (_a) {
                        var actionRef = _a.actionRef, parentRef = _a.parentRef;
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorMenuItem, { channel: channel, user: member, onChange: function () {
                                        refreshList();
                                        closeDropdown();
                                    }, onError: noop, dataSbId: "channel_setting_member_context_menu_".concat((member.role !== 'operator') ? 'register_as_operator' : 'unregister_operator') }, member.role !== 'operator'
                                    ? stringSet.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR
                                    : stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),
                                // No muted members in broadcast channel
                                !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MuteMenuItem, { channel: channel, user: member, onChange: function () {
                                        refreshList();
                                        closeDropdown();
                                    }, onError: noop, dataSbId: "channel_setting_member_context_menu_".concat(member.isMuted ? 'unmute' : 'mute') }, member.isMuted
                                    ? stringSet.CHANNEL_SETTING__MODERATION__UNMUTE
                                    : stringSet.CHANNEL_SETTING__MODERATION__MUTE)),
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                        channel === null || channel === void 0 ? void 0 : channel.banUser(member, -1, '').then(function () {
                                            refreshList();
                                            closeDropdown();
                                        });
                                    }, dataSbId: "channel_setting_member_context_menu_ban" }, stringSet.CHANNEL_SETTING__MODERATION__BAN))); } }));
                    }
                    : function () { return null; } }));
        }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-accordion__footer" },
            hasNext && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () { return setShowAllMembers(true); } }, stringSet.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () { return setShowInviteUsers(true); } }, stringSet.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER)),
        showAllMembers && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MembersModal, { onCancel: function () {
                setShowAllMembers(false);
                refreshList();
            } })),
        showInviteUsers && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_D5P54ZJi_InviteUsers, { onSubmit: function () {
                setShowInviteUsers(false);
                refreshList();
            }, onCancel: function () { return setShowInviteUsers(false); } }))));
};


//# sourceMappingURL=bundle-D5P54ZJi.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ModerationPanel.js


















































function OperatorsModal(_a) {
    var _this = this;
    var _b;
    var onCancel = _a.onCancel;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), operators = _c[0], setOperators = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), operatorQuery = _d[0], setOperatorQuery = _d[1];
    var channel = useChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUserId = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
            limit: 20,
        });
        operatorListQuery === null || operatorListQuery === void 0 ? void 0 : operatorListQuery.next().then(function (operators) {
            setOperators(operators);
        });
        setOperatorQuery(operatorListQuery !== null && operatorListQuery !== void 0 ? operatorListQuery : null);
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, hideFooter: true, titleText: stringSet.CHANNEL_SETTING__OPERATORS__TITLE_ALL, onCancel: onCancel },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: useOnScrollPositionChangeDetector({
                    onReachedBottom: function () { return __awaiter(_this, void 0, void 0, function () {
                        return __generator(this, function (_a) {
                            if (operatorQuery && operatorQuery.hasNext) {
                                operatorQuery.next().then(function (o) {
                                    setOperators(__spreadArray(__spreadArray([], operators, true), o, true));
                                });
                            }
                            return [2 /*return*/];
                        });
                    }); },
                }) }, operators.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { currentUser: currentUserId, user: member, key: member.userId, action: function (_a) {
                    var parentRef = _a.parentRef, actionRef = _a.actionRef;
                    return ((member === null || member === void 0 ? void 0 : member.userId) !== currentUserId && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.removeOperators([member.userId]).then(function () {
                                        setOperators(operators.filter(function (_a) {
                                            var userId = _a.userId;
                                            return userId !== member.userId;
                                        }));
                                    });
                                    closeDropdown();
                                }, dataSbId: "channel_setting_operator_context_menu_unregister_unregister_operator" }, stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))); } })));
                } })); })))));
}

function AddOperatorsModal(_a) {
    var _this = this;
    var onCancel = _a.onCancel, onSubmit = _a.onSubmit;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _b[0], setMembers = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({}), selectedMembers = _c[0], setSelectedMembers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), memberQuery = _d[0], setMemberQuery = _d[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var channel = useChannelSettingsContext().channel;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var memberListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
            operatorFilter: _bundle_a5a397f1_Yt.NONOPERATOR,
            limit: 20,
        });
        memberListQuery === null || memberListQuery === void 0 ? void 0 : memberListQuery.next().then(function (members) {
            setMembers(members);
        });
        setMemberQuery(memberListQuery !== null && memberListQuery !== void 0 ? memberListQuery : null);
    }, []);
    var selectedCount = Object.keys(selectedMembers).filter(function (m) { return selectedMembers[m]; }).length;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, type: ButtonTypes.PRIMARY, submitText: stringSet.CHANNEL_SETTING__OPERATORS__ADD_BUTTON, onCancel: onCancel, onSubmit: function () {
                var members = Object.keys(selectedMembers).filter(function (m) { return selectedMembers[m]; });
                channel === null || channel === void 0 ? void 0 : channel.addOperators(members).then(function () {
                    onSubmit(members);
                });
            }, titleText: stringSet.CHANNEL_SETTING__MEMBERS__SELECT_TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { color: (selectedCount > 0) ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3, type: LabelTypography.CAPTION_1 }, "".concat(selectedCount, " ").concat(stringSet.MODAL__INVITE_MEMBER__SELECTED)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: useOnScrollPositionChangeDetector({
                    onReachedBottom: function () { return __awaiter(_this, void 0, void 0, function () {
                        var hasNext;
                        return __generator(this, function (_a) {
                            hasNext = memberQuery.hasNext;
                            if (hasNext) {
                                memberQuery.next().then(function (o) {
                                    setMembers(__spreadArray(__spreadArray([], members, true), o, true));
                                });
                            }
                            return [2 /*return*/];
                        });
                    }); },
                }) }, members.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { checkBox: true, checked: selectedMembers[member.userId], isOperator: (member === null || member === void 0 ? void 0 : member.role) === 'operator', disabled: (member === null || member === void 0 ? void 0 : member.role) === 'operator', onChange: function (event) {
                    var _a;
                    var modifiedSelectedMembers = __assign(__assign({}, selectedMembers), (_a = {}, _a[event.target.id] = event.target.checked, _a));
                    if (!event.target.checked) {
                        delete modifiedSelectedMembers[event.target.id];
                    }
                    setSelectedMembers(modifiedSelectedMembers);
                }, user: member, key: member.userId })); })))));
}

var OperatorList = function () {
    var _a;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), operators = _b[0], setOperators = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMore = _c[0], setShowMore = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showAdd = _d[0], setShowAdd = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), hasNext = _e[0], setHasNext = _e[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var state = useSendbirdStateContext();
    var channel = useChannelSettingsContext().channel;
    var userId = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel) {
            setOperators([]);
            return;
        }
        var operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
            limit: 10,
        });
        operatorListQuery.next().then(function (operators) {
            setOperators(operators);
            setHasNext(operatorListQuery.hasNext);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setOperators([]);
            return;
        }
        var operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
            limit: 10,
        });
        operatorListQuery.next().then(function (operators) {
            setOperators(operators);
            setHasNext(operatorListQuery.hasNext);
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        operators.map(function (operator) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, { key: operator.userId, user: operator, currentUser: userId, action: function (_a) {
                var actionRef = _a.actionRef;
                if ((operator === null || operator === void 0 ? void 0 : operator.userId) === userId) {
                    return null;
                }
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                channel === null || channel === void 0 ? void 0 : channel.removeOperators([operator.userId]).then(function () {
                                    /**
                                     * Limitation to server-side table update delay.
                                     */
                                    setTimeout(function () {
                                        refreshList();
                                    }, 500);
                                });
                                closeDropdown();
                            }, dataSbId: "channel_setting_operator_context_menu_unregister_operator" }, stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))); } }));
            } })); }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-accordion__footer" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowAdd(true);
                } }, stringSet.CHANNEL_SETTING__OPERATORS__TITLE_ADD),
            hasNext && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowMore(true);
                } }, stringSet.CHANNEL_SETTING__OPERATORS__TITLE_ALL))),
        showMore && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorsModal, { onCancel: function () {
                setShowMore(false);
                refreshList();
            } })),
        showAdd && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddOperatorsModal, { onCancel: function () { return setShowAdd(false); }, onSubmit: function () {
                /**
                 * Limitation to server-side table update delay.
                 */
                setTimeout(function () {
                    refreshList();
                }, 500);
                setShowAdd(false);
            } }))));
};

function BannedUsersModal(_a) {
    var _this = this;
    var onCancel = _a.onCancel;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _b[0], setMembers = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), memberQuery = _c[0], setMemberQuery = _c[1];
    var channel = useChannelSettingsContext().channel;
    var stringSet = useLocalization().stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
        if (bannedUserListQuery) {
            bannedUserListQuery.next().then(function (users) {
                setMembers(users);
            });
            setMemberQuery(bannedUserListQuery);
        }
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, hideFooter: true, onCancel: function () { return onCancel(); }, onSubmit: noop, titleText: stringSet.CHANNEL_SETTING__BANNED_MEMBERS__TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: useOnScrollPositionChangeDetector({
                    onReachedBottom: function () { return __awaiter(_this, void 0, void 0, function () {
                        var hasNext;
                        return __generator(this, function (_a) {
                            if (!memberQuery)
                                return [2 /*return*/];
                            hasNext = memberQuery.hasNext;
                            if (hasNext) {
                                memberQuery.next().then(function (o) {
                                    setMembers(__spreadArray(__spreadArray([], members, true), o, true));
                                });
                            }
                            return [2 /*return*/];
                        });
                    }); },
                }) }, members.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { user: member, key: member.userId, action: function (_a) {
                    var parentRef = _a.parentRef, actionRef = _a.actionRef;
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.unbanUser(member).then(function () {
                                        closeDropdown();
                                        setMembers(members.filter(function (m) {
                                            return (m.userId !== member.userId);
                                        }));
                                    });
                                }, dataSbId: "channel_setting_banned_user_context_menu_unban" }, stringSet.CHANNEL_SETTING__MODERATION__UNBAN))); } }));
                } })); })))));
}

var BannedMemberList = function () {
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _a[0], setMembers = _a[1];
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), hasNext = _b[0], setHasNext = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _c[0], setShowModal = _c[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var channel = useChannelSettingsContext().channel;
    var bannedUserListQueryParams = { limit: 10 };
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel) {
            setMembers([]);
            return;
        }
        var bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery(bannedUserListQueryParams);
        bannedUserListQuery.next().then(function (users) {
            setMembers(users);
            setHasNext(bannedUserListQuery.hasNext);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setMembers([]);
            return;
        }
        var bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery(bannedUserListQueryParams);
        bannedUserListQuery.next().then(function (users) {
            setMembers(users);
            setHasNext(bannedUserListQuery.hasNext);
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        members.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, { key: member.userId, user: member, action: function (_a) {
                var actionRef = _a.actionRef, parentRef = _a.parentRef;
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                channel === null || channel === void 0 ? void 0 : channel.unbanUser(member).then(function () {
                                    closeDropdown();
                                    refreshList();
                                });
                            }, dataSbId: "channel_setting_banned_user_context_menu_unban" }, stringSet.CHANNEL_SETTING__MODERATION__UNBAN))); } }));
            } })); }),
        members && members.length === 0 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-settings__empty-list", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_3 }, stringSet.CHANNEL_SETTING__MODERATION__EMPTY_BAN)),
        hasNext && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-accordion__footer" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowModal(true);
                } }, stringSet.CHANNEL_SETTING__MODERATION__ALL_BAN))),
        showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BannedUsersModal, { onCancel: function () {
                setShowModal(false);
                refreshList();
            } }))));
};

function MutedMembersModal(_a) {
    var _this = this;
    var _b;
    var onCancel = _a.onCancel;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _c[0], setMembers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), memberQuery = _d[0], setMemberQuery = _d[1];
    var channel = useChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUser = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    var stringSet = useLocalization().stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
            limit: 20,
            // @ts-ignore
            mutedMemberFilter: 'muted',
        });
        memberUserListQuery === null || memberUserListQuery === void 0 ? void 0 : memberUserListQuery.next().then(function (members) {
            setMembers(members);
        });
        setMemberQuery(memberUserListQuery !== null && memberUserListQuery !== void 0 ? memberUserListQuery : null);
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, hideFooter: true, onCancel: function () { return onCancel(); }, onSubmit: noop, titleText: stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: useOnScrollPositionChangeDetector({
                    onReachedBottom: function () { return __awaiter(_this, void 0, void 0, function () {
                        var hasNext;
                        return __generator(this, function (_a) {
                            hasNext = memberQuery.hasNext;
                            if (hasNext) {
                                memberQuery.next().then(function (o) {
                                    setMembers(__spreadArray(__spreadArray([], members, true), o, true));
                                });
                            }
                            return [2 /*return*/];
                        });
                    }); },
                }) }, members.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { currentUser: currentUser, user: member, key: member.userId, action: function (_a) {
                    var actionRef = _a.actionRef, parentRef = _a.parentRef;
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.unmuteUser(member).then(function () {
                                        closeDropdown();
                                        setMembers(members.filter(function (m) {
                                            return (m.userId !== member.userId);
                                        }));
                                    });
                                }, dataSbId: "channel_setting_muted_member_context_menu_unmute" }, stringSet.CHANNEL_SETTING__MODERATION__UNMUTE))); } }));
                } })); })))));
}

var MutedMemberList = function () {
    var _a;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), members = _b[0], setMembers = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), hasNext = _c[0], setHasNext = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _d[0], setShowModal = _d[1];
    var stringSet = useLocalization().stringSet;
    var channel = useChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUser = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel) {
            setMembers([]);
            return;
        }
        var memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
            limit: 10,
            // @ts-ignore
            mutedMemberFilter: 'muted',
        });
        memberUserListQuery.next().then(function (members) {
            setMembers(members);
            setHasNext(memberUserListQuery.hasNext);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setMembers([]);
            return;
        }
        var memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
            limit: 10,
            // @ts-ignore
            mutedMemberFilter: 'muted',
        });
        memberUserListQuery.next().then(function (members) {
            setMembers(members);
            setHasNext(memberUserListQuery.hasNext);
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        members.map(function (member) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, { key: member.userId, user: member, currentUser: currentUser, action: function (_a) {
                var actionRef = _a.actionRef, parentRef = _a.parentRef;
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { closeDropdown: closeDropdown, openLeft: true, parentContainRef: parentRef, parentRef: actionRef },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                channel === null || channel === void 0 ? void 0 : channel.unmuteUser(member).then(function () {
                                    /**
                                     * Limitation to server-side table update delay.
                                     */
                                    setTimeout(function () {
                                        refreshList();
                                    }, 500);
                                    closeDropdown();
                                });
                            }, dataSbId: "channel_setting_muted_member_context_menu_unmute" }, (stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_SETTING__UNMUTE) || stringSet.CHANNEL_SETTING__MODERATION__UNMUTE))); } }));
            } })); }),
        members && members.length === 0 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-settings__empty-list", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_3 }, stringSet.CHANNEL_SETTING__NO_UNMUTED)),
        hasNext && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-accordion__footer" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowModal(true);
                } }, stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL))),
        showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedMembersModal, { onCancel: function () {
                setShowModal(false);
                refreshList();
            } }))));
};

var kFormatter = function (num) {
    return Math.abs(num) > 999
        ? "".concat((Math.abs(num) / 1000).toFixed(1), "K")
        : num;
};
function ModerationPanel() {
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), frozen = _a[0], setFrozen = _a[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var channel = useChannelSettingsContext().channel;
    // work around for
    // https://sendbird.slack.com/archives/G01290GCDCN/p1595922832000900
    // SDK bug - after frozen/unfrozen myRole becomes "none"
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        setFrozen((_a = channel === null || channel === void 0 ? void 0 : channel.isFrozen) !== null && _a !== void 0 ? _a : false);
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AccordionGroup, { className: "sendbird-channel-settings__operator" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-channel-settings__operators-list", id: "operators", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.OPERATOR, fillColor: IconColors.PRIMARY, width: 24, height: 24, className: "sendbird-channel-settings__accordion-icon" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__OPERATORS__TITLE))); }, renderContent: function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorList, null); } }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-channel-settings__members-list", id: "members", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MEMBERS, fillColor: IconColors.PRIMARY, width: 24, height: 24, className: "sendbird-channel-settings__accordion-icon" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__MEMBERS__TITLE),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Badge, { count: (channel === null || channel === void 0 ? void 0 : channel.memberCount) ? kFormatter(channel.memberCount) : '' }))); }, renderContent: function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MemberList, null); } }),
        // No muted members in broadcast channel
        !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { id: "mutedMembers", className: "sendbird-channel-settings__muted-members-list", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MUTE, fillColor: IconColors.PRIMARY, width: 24, height: 24, className: "sendbird-channel-settings__accordion-icon" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE))); }, renderContent: function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedMemberList, null); } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-channel-settings__banned-members-list", id: "bannedUsers", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.BAN, fillColor: IconColors.PRIMARY, width: 24, height: 24, className: "sendbird-channel-settings__accordion-icon" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__BANNED_MEMBERS__TITLE))); }, renderContent: function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BannedMemberList, null); } }),
        // cannot freeze broadcast channel
        !(channel === null || channel === void 0 ? void 0 : channel.isBroadcast) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings__freeze" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.FREEZE, fillColor: IconColors.PRIMARY, width: 24, height: 24, className: "sendbird-channel-settings__accordion-icon" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__FREEZE_CHANNEL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Toggle, { className: "sendbird-channel-settings__frozen-icon", checked: frozen, onChange: function () {
                    if (frozen) {
                        channel === null || channel === void 0 ? void 0 : channel.unfreeze().then(function () {
                            setFrozen(function (prev) { return !prev; });
                        });
                    }
                    else {
                        channel === null || channel === void 0 ? void 0 : channel.freeze().then(function () {
                            setFrozen(function (prev) { return !prev; });
                        });
                    }
                } })))));
}


//# sourceMappingURL=ModerationPanel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/LeaveChannel.js































var LeaveChannel = function (props) {
    var _a, _b;
    var _c = props.onSubmit, onSubmit = _c === void 0 ? noop : _c, _d = props.onCancel, onCancel = _d === void 0 ? noop : _d;
    var _e = useChannelSettingsContext(), channel = _e.channel, onLeaveChannel = _e.onLeaveChannel;
    var stringSet = useLocalization().stringSet;
    var state = useSendbirdStateContext();
    var logger = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.logger;
    var isOnline = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.isOnline;
    var isMobile = useMediaQueryContext().isMobile;
    var getChannelName = function (channel) {
        if ((channel === null || channel === void 0 ? void 0 : channel.name) && (channel === null || channel === void 0 ? void 0 : channel.name) !== 'Group Channel') {
            return channel.name;
        }
        if ((channel === null || channel === void 0 ? void 0 : channel.name) === 'Group Channel' || !(channel === null || channel === void 0 ? void 0 : channel.name)) {
            return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).map(function (member) { return member.nickname || stringSet.NO_NAME; }).join(', ');
        }
        return stringSet.NO_TITLE;
    };
    if (isMobile) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { className: "sendbird-channel-settings__leave--mobile", titleText: getChannelName(channel), hideFooter: true, isCloseOnClickOutside: true, onCancel: onCancel },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { onClick: function () {
                    logger.info('ChannelSettings: Leaving channel', channel);
                    channel === null || channel === void 0 ? void 0 : channel.leave().then(function () {
                        logger.info('ChannelSettings: Leaving channel successful!', channel);
                        onLeaveChannel === null || onLeaveChannel === void 0 ? void 0 : onLeaveChannel();
                    });
                }, className: "sendbird-channel-settings__leave-label--mobile" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE))));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, disabled: !isOnline, onCancel: onCancel, onSubmit: function () {
            logger.info('ChannelSettings: Leaving channel', channel);
            channel === null || channel === void 0 ? void 0 : channel.leave().then(function () {
                logger.info('ChannelSettings: Leaving channel successful!', channel);
                // is for backward compactability
                if (onLeaveChannel) {
                    onLeaveChannel();
                }
                else {
                    onSubmit();
                }
            });
        }, submitText: stringSet.MODAL__LEAVE_CHANNEL__FOOTER, titleText: stringSet.MODAL__LEAVE_CHANNEL__TITLE }));
};


//# sourceMappingURL=LeaveChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/UserPanel.js















































var UserPanel_kFormatter = function (num) {
    return Math.abs(num) > 999
        ? "".concat((Math.abs(num) / 1000).toFixed(1), "K")
        : num;
};
var UserPanel = function () {
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showAccordion = _a[0], setShowAccordion = _a[1];
    var channel = useChannelSettingsContext().channel;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-channel-settings__user-panel' },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: [
                'sendbird-channel-settings__panel-item',
                'sendbird-channel-settings__members',
            ].join(' '), role: "switch", "aria-checked": showAccordion, onKeyDown: function () { return setShowAccordion(!showAccordion); }, onClick: function () { return setShowAccordion(!showAccordion); }, tabIndex: 0 },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-channel-settings__panel-icon-left", type: IconTypes.MEMBERS, fillColor: IconColors.PRIMARY, height: "24px", width: "24px" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 },
                stringSet.CHANNEL_SETTING__MEMBERS__TITLE,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Badge, { className: 'sendbird-channel-settings__badge', count: channel ? UserPanel_kFormatter(channel === null || channel === void 0 ? void 0 : channel.memberCount) : '' })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: [
                    'sendbird-channel-settings__panel-icon-right',
                    'sendbird-channel-settings__panel-icon--chevron',
                    (showAccordion ? 'sendbird-channel-settings__panel-icon--open' : ''),
                ].join(' '), type: IconTypes.CHEVRON_RIGHT, height: "24px", width: "24px" })),
        showAccordion && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MemberList, null))));
};


//# sourceMappingURL=UserPanel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ChannelSettingsUI.js
































































var ChannelSettingsUI = function (props) {
    var _a;
    var _b = deleteNullish(props), _c = _b.renderHeader, renderHeader = _c === void 0 ? function (p) { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsHeader, __assign({}, p)); } : _c, renderLeaveChannel = _b.renderLeaveChannel, renderChannelProfile = _b.renderChannelProfile, renderModerationPanel = _b.renderModerationPanel, renderPlaceholderError = _b.renderPlaceholderError, renderPlaceholderLoading = _b.renderPlaceholderLoading;
    var state = useSendbirdStateContext();
    var _d = useChannelSettingsContext(), channel = _d.channel, invalidChannel = _d.invalidChannel, onCloseClick = _d.onCloseClick, loading = _d.loading;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showLeaveChannelModal = _e[0], setShowLeaveChannelModal = _e[1];
    var isOnline = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.isOnline;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    if (loading) {
        if (renderPlaceholderLoading)
            return renderPlaceholderLoading();
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING });
    }
    var headerProps = { onCloseClick: onCloseClick };
    if (invalidChannel || !channel) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
            renderHeader(headerProps),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, renderPlaceholderError ? renderPlaceholderError() : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG }))));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        renderHeader(headerProps),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings__scroll-area" },
            (renderChannelProfile === null || renderChannelProfile === void 0 ? void 0 : renderChannelProfile()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelProfile, null),
            (renderModerationPanel === null || renderModerationPanel === void 0 ? void 0 : renderModerationPanel()) || ((channel === null || channel === void 0 ? void 0 : channel.myRole) === 'operator' ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModerationPanel, null) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserPanel, null)),
            (renderLeaveChannel === null || renderLeaveChannel === void 0 ? void 0 : renderLeaveChannel()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: [
                    'sendbird-channel-settings__panel-item',
                    'sendbird-channel-settings__leave-channel',
                    !isOnline ? 'sendbird-channel-settings__panel-item__disabled' : '',
                ].join(' '), role: "button", onKeyDown: function () {
                    if (!isOnline) {
                        return;
                    }
                    setShowLeaveChannelModal(true);
                }, onClick: function () {
                    if (!isOnline) {
                        return;
                    }
                    setShowLeaveChannelModal(true);
                }, tabIndex: 0 },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: ['sendbird-channel-settings__panel-icon-left', 'sendbird-channel-settings__panel-icon__leave'].join(' '), type: IconTypes.LEAVE, fillColor: IconColors.ERROR, height: "24px", width: "24px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))),
            showLeaveChannelModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LeaveChannel, { onCancel: function () {
                    setShowLeaveChannelModal(false);
                }, onSubmit: function () {
                    setShowLeaveChannelModal(false);
                    onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
                } })))));
};


//# sourceMappingURL=ChannelSettingsUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings.js

































































var ChannelSettings = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsProvider, { overrideInviteUser: props === null || props === void 0 ? void 0 : props.overrideInviteUser, channelUrl: props.channelUrl, onCloseClick: props === null || props === void 0 ? void 0 : props.onCloseClick, onLeaveChannel: props === null || props === void 0 ? void 0 : props.onLeaveChannel, onChannelModified: props === null || props === void 0 ? void 0 : props.onChannelModified, onBeforeUpdateChannel: props === null || props === void 0 ? void 0 : props.onBeforeUpdateChannel, queries: props === null || props === void 0 ? void 0 : props.queries, className: props === null || props === void 0 ? void 0 : props.className, disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile, renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsUI, { renderPlaceholderError: props === null || props === void 0 ? void 0 : props.renderPlaceholderError, renderChannelProfile: props === null || props === void 0 ? void 0 : props.renderChannelProfile, renderModerationPanel: props === null || props === void 0 ? void 0 : props.renderModerationPanel, renderLeaveChannel: props === null || props === void 0 ? void 0 : props.renderLeaveChannel })));
};


//# sourceMappingURL=ChannelSettings.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MessageSearch/context.js





var GET_SEARCHED_MESSAGES = 'GET_SEARCHED_MESSAGES';
var GET_NEXT_SEARCHED_MESSAGES = 'GET_NEXT_SEARCHED_MESSAGES';
var START_MESSAGE_SEARCH = 'START_MESSAGE_SEARCH';
var START_GETTING_SEARCHED_MESSAGES = 'START_GETTING_SEARCHED_MESSAGES';
var SET_QUERY_INVALID = 'SET_QUERY_INVALID';
var context_SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
var CHANNEL_INVALID = 'CHANNEL_INVALID';
var RESET_SEARCH_STRING = 'RESET_SEARCH_STRING';

function context_reducer(state, action) {
    switch (action.type) {
        case context_SET_CURRENT_CHANNEL: {
            var currentChannel = action.payload;
            return __assign(__assign({}, state), { currentChannel: currentChannel, initialized: true });
        }
        case CHANNEL_INVALID: {
            return __assign(__assign({}, state), { currentChannel: null, initialized: false });
        }
        case GET_SEARCHED_MESSAGES: {
            var _a = action.payload, messages = _a.messages, createdQuery = _a.createdQuery;
            if (createdQuery
                && createdQuery.channelUrl === (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).channelUrl
                && createdQuery.key === (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).key) {
                return __assign(__assign({}, state), { loading: false, isInvalid: false, allMessages: __spreadArray([], messages, true), hasMoreResult: (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).hasNext });
            }
            return __assign({}, state);
        }
        case SET_QUERY_INVALID: {
            return __assign(__assign({}, state), { isInvalid: true });
        }
        case START_MESSAGE_SEARCH: {
            return __assign(__assign({}, state), { isInvalid: false, loading: false });
        }
        case START_GETTING_SEARCHED_MESSAGES: {
            var currentMessageSearchQuery = action.payload;
            return __assign(__assign({}, state), { loading: true, currentMessageSearchQuery: currentMessageSearchQuery });
        }
        case GET_NEXT_SEARCHED_MESSAGES: {
            var messages = action.payload;
            return __assign(__assign({}, state), { allMessages: __spreadArray(__spreadArray([], state.allMessages, true), messages, true), hasMoreResult: (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).hasNext });
        }
        case RESET_SEARCH_STRING: {
            return __assign(__assign({}, state), { allMessages: [] });
        }
        default: {
            return state;
        }
    }
}

var MessageSearch_context_initialState = {
    allMessages: [],
    loading: false,
    isInvalid: false,
    initialized: false,
    currentChannel: null,
    currentMessageSearchQuery: null,
    hasMoreResult: false,
};

function useSetChannel(_a, _b) {
    var channelUrl = _a.channelUrl, sdkInit = _a.sdkInit;
    var sdk = _b.sdk, logger = _b.logger, messageSearchDispatcher = _b.messageSearchDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (channelUrl && sdkInit && (sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel)) {
            sdk.groupChannel.getChannel(channelUrl).then(function (groupChannel) {
                logger.info('MessageSearch | useSetChannel group channel', groupChannel);
                messageSearchDispatcher({
                    type: context_SET_CURRENT_CHANNEL,
                    payload: groupChannel,
                });
            }).catch(function () {
                messageSearchDispatcher({
                    type: CHANNEL_INVALID,
                    payload: null,
                });
            });
        }
    }, [channelUrl, sdkInit]);
}

var MessageSearchOrder;
(function (MessageSearchOrder) {
    MessageSearchOrder["SCORE"] = "score";
    MessageSearchOrder["TIMESTAMP"] = "ts";
})(MessageSearchOrder || (MessageSearchOrder = {}));
function useGetSearchedMessages(_a, _b) {
    var currentChannel = _a.currentChannel, channelUrl = _a.channelUrl, requestString = _a.requestString, messageSearchQuery = _a.messageSearchQuery, onResultLoaded = _a.onResultLoaded, retryCount = _a.retryCount;
    var sdk = _b.sdk, logger = _b.logger, messageSearchDispatcher = _b.messageSearchDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        messageSearchDispatcher({
            type: START_MESSAGE_SEARCH,
            payload: null,
        });
        if (sdk && channelUrl && sdk.createMessageSearchQuery && currentChannel) {
            if (requestString) {
                currentChannel.refresh()
                    .then(function (channel) {
                    var inputSearchMessageQueryObject = __assign({ order: MessageSearchOrder.TIMESTAMP, channelUrl: channelUrl, messageTimestampFrom: channel.invitedAt, keyword: requestString }, messageSearchQuery);
                    var createdQuery = sdk.createMessageSearchQuery(inputSearchMessageQueryObject);
                    createdQuery.next().then(function (messages) {
                        logger.info('MessageSearch | useGetSearchedMessages: succeeded getting messages', messages);
                        messageSearchDispatcher({
                            type: GET_SEARCHED_MESSAGES,
                            payload: {
                                messages: messages,
                                createdQuery: createdQuery,
                            },
                        });
                        if (onResultLoaded && typeof onResultLoaded === 'function') {
                            onResultLoaded(messages, undefined);
                        }
                    }).catch(function (error) {
                        logger.warning('MessageSearch | useGetSearchedMessages: failed getting search messages.', error);
                        messageSearchDispatcher({
                            type: SET_QUERY_INVALID,
                            payload: null,
                        });
                        if (onResultLoaded && typeof onResultLoaded === 'function') {
                            onResultLoaded(undefined, error);
                        }
                    });
                    messageSearchDispatcher({
                        type: START_GETTING_SEARCHED_MESSAGES,
                        payload: createdQuery,
                    });
                })
                    .catch(function (error) {
                    logger.warning('MessageSearch | useGetSearchedMessages: failed getting channel.', error);
                    messageSearchDispatcher({
                        type: SET_QUERY_INVALID,
                        payload: null,
                    });
                    if (onResultLoaded && typeof onResultLoaded === 'function') {
                        onResultLoaded(undefined, error);
                    }
                });
            }
            else {
                logger.info('MessageSearch | useGetSeasrchedMessages: search string is empty');
            }
        }
    }, [channelUrl, messageSearchQuery, requestString, currentChannel, retryCount]);
}

function context_useScrollCallback(_a, _b) {
    var currentMessageSearchQuery = _a.currentMessageSearchQuery, hasMoreResult = _a.hasMoreResult, onResultLoaded = _a.onResultLoaded;
    var logger = _b.logger, messageSearchDispatcher = _b.messageSearchDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (cb) {
        if (!hasMoreResult) {
            logger.warning('MessageSearch | useScrollCallback: no more searched results', hasMoreResult);
        }
        if (currentMessageSearchQuery && currentMessageSearchQuery.hasNext) {
            currentMessageSearchQuery
                .next()
                .then(function (messages) {
                logger.info('MessageSearch | useScrollCallback: succeeded getting searched messages', messages);
                messageSearchDispatcher({
                    type: GET_NEXT_SEARCHED_MESSAGES,
                    payload: messages,
                });
                cb(messages, null);
                if (onResultLoaded && typeof onResultLoaded === 'function') {
                    onResultLoaded(messages, null);
                }
            })
                .catch(function (error) {
                logger.warning('MessageSearch | useScrollCallback: failed getting searched messages', error);
                cb(null, error);
                if (onResultLoaded && typeof onResultLoaded === 'function') {
                    onResultLoaded(null, error);
                }
            });
        }
        else {
            logger.warning('MessageSearch | useScrollCallback: no currentMessageSearchQuery');
        }
    }, [currentMessageSearchQuery, hasMoreResult]);
}

var context_DEBOUNCING_TIME = 500;
function useSearchStringEffect(_a, _b) {
    var searchString = _a.searchString;
    var messageSearchDispatcher = _b.messageSearchDispatcher;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), requestString = _c[0], setRequestString = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), debouncingTimer = _d[0], setDebouncingTimer = _d[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        clearTimeout(debouncingTimer !== null && debouncingTimer !== void 0 ? debouncingTimer : undefined);
        if (searchString) {
            setDebouncingTimer(setTimeout(function () {
                setRequestString(searchString);
            }, context_DEBOUNCING_TIME));
        }
        else {
            setRequestString('');
            messageSearchDispatcher({
                type: RESET_SEARCH_STRING,
                payload: '',
            });
        }
    }, [searchString]);
    return requestString;
}

var MessageSearchContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var MessageSearchProvider = function (props) {
    var _a, _b, _c, _d, _e;
    var 
    // message search props
    channelUrl = props.channelUrl, searchString = props.searchString, messageSearchQuery = props.messageSearchQuery, onResultLoaded = props.onResultLoaded, onResultClick = props.onResultClick;
    var globalState = useSendbirdStateContext();
    // hook variables
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), retryCount = _f[0], setRetryCount = _f[1]; // this is a trigger flag for activating useGetSearchMessages
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), selectedMessageId = _g[0], setSelectedMessageId = _g[1];
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(context_reducer, MessageSearch_context_initialState), messageSearchStore = _h[0], messageSearchDispatcher = _h[1];
    var allMessages = messageSearchStore.allMessages, loading = messageSearchStore.loading, isInvalid = messageSearchStore.isInvalid, currentChannel = messageSearchStore.currentChannel, currentMessageSearchQuery = messageSearchStore.currentMessageSearchQuery, hasMoreResult = messageSearchStore.hasMoreResult;
    var logger = (_a = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _a === void 0 ? void 0 : _a.logger;
    var sdk = (_c = (_b = globalState === null || globalState === void 0 ? void 0 : globalState.stores) === null || _b === void 0 ? void 0 : _b.sdkStore) === null || _c === void 0 ? void 0 : _c.sdk;
    var sdkInit = (_e = (_d = globalState === null || globalState === void 0 ? void 0 : globalState.stores) === null || _d === void 0 ? void 0 : _d.sdkStore) === null || _e === void 0 ? void 0 : _e.initialized;
    var scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var handleOnScroll = function (e) {
        var scrollElement = e.target;
        var scrollTop = scrollElement.scrollTop, scrollHeight = scrollElement.scrollHeight, clientHeight = scrollElement.clientHeight;
        if (!hasMoreResult) {
            return;
        }
        if (scrollTop + clientHeight >= scrollHeight) {
            onScroll(function () {
                // after load more searched messages
            });
        }
    };
    useSetChannel({ channelUrl: channelUrl, sdkInit: sdkInit }, { sdk: sdk, logger: logger, messageSearchDispatcher: messageSearchDispatcher });
    var requestString = useSearchStringEffect({ searchString: searchString !== null && searchString !== void 0 ? searchString : '' }, { messageSearchDispatcher: messageSearchDispatcher });
    useGetSearchedMessages({ currentChannel: currentChannel, channelUrl: channelUrl, requestString: requestString, messageSearchQuery: messageSearchQuery, onResultLoaded: onResultLoaded, retryCount: retryCount }, { sdk: sdk, logger: logger, messageSearchDispatcher: messageSearchDispatcher });
    var onScroll = context_useScrollCallback({ currentMessageSearchQuery: currentMessageSearchQuery, hasMoreResult: hasMoreResult, onResultLoaded: onResultLoaded }, { logger: logger, messageSearchDispatcher: messageSearchDispatcher });
    var handleRetryToConnect = function () {
        setRetryCount(retryCount + 1);
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchContext.Provider, { value: {
            channelUrl: channelUrl,
            searchString: searchString,
            requestString: requestString,
            messageSearchQuery: messageSearchQuery,
            onResultLoaded: onResultLoaded,
            onResultClick: onResultClick,
            retryCount: retryCount,
            setRetryCount: setRetryCount,
            selectedMessageId: selectedMessageId,
            setSelectedMessageId: setSelectedMessageId,
            messageSearchDispatcher: messageSearchDispatcher,
            allMessages: allMessages,
            loading: loading,
            isInvalid: isInvalid,
            currentChannel: currentChannel,
            currentMessageSearchQuery: currentMessageSearchQuery,
            hasMoreResult: hasMoreResult,
            onScroll: onScroll,
            scrollRef: scrollRef,
            handleRetryToConnect: handleRetryToConnect,
            handleOnScroll: handleOnScroll,
        } }, props === null || props === void 0 ? void 0 : props.children));
};
var useMessageSearchContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(MessageSearchContext);
    if (!context)
        throw new Error('MessageSearchContext not found. Use within the MessageSearch module.');
    return context;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageSearchItem.js















// getCreatedAt
function getCreatedAt (_a) {
    var createdAt = _a.createdAt, locale = _a.locale, stringSet = _a.stringSet;
    var optionalParam = { locale: locale };
    if (!createdAt) {
        return '';
    }
    if (isToday(createdAt)) {
        return format(createdAt, 'p', optionalParam);
    }
    if (isYesterday(createdAt)) {
        return (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_STATUS__YESTERDAY) || 'Yesterday';
    }
    if (isThisYear(createdAt)) {
        return format(createdAt, 'MMM d', optionalParam);
    }
    return format(createdAt, 'yyyy/M/d', optionalParam);
}

function MessageSearchItem(_a) {
    var className = _a.className, message = _a.message, selected = _a.selected, onClick = _a.onClick;
    var createdAt = message.createdAt;
    var messageText = message.message;
    // @ts-ignore
    var sender = message.sender || message._sender;
    var profileUrl = sender.profileUrl, nickname = sender.nickname;
    var _b = useLocalization(), stringSet = _b.stringSet, dateLocale = _b.dateLocale;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-message-search-item',
            selected ? 'sendbird-message-search-item--selected' : '',
        ], false).join(' '), onClick: function (e) {
            e.stopPropagation();
            onClick === null || onClick === void 0 ? void 0 : onClick(message);
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-item__left" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-message-search-item__left__sender-avatar", src: profileUrl, alt: "profile image", width: "56px", height: "56px" })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-item__right" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-search-item__right__sender-name", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, nickname || stringSet.NO_NAME),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-search-item__right__message-text", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_3 }, messageText),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-search-item__right__message-created-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, getCreatedAt({ createdAt: createdAt, locale: dateLocale, stringSet: stringSet }))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-item__right-footer" })));
}


//# sourceMappingURL=MessageSearchItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageSearchFileItem.js



















function MessageSearchFileItem_getCreatedAt(_a) {
    var createdAt = _a.createdAt, locale = _a.locale, stringSet = _a.stringSet;
    var optionalParam = { locale: locale };
    if (!createdAt) {
        return '';
    }
    if (isToday(createdAt)) {
        return format(createdAt, 'p', optionalParam);
    }
    if (isYesterday(createdAt)) {
        return (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_STATUS__YESTERDAY) || 'Yesterday';
    }
    if (isThisYear(createdAt)) {
        return format(createdAt, 'MMM d', optionalParam);
    }
    return format(createdAt, 'yyyy/M/d', optionalParam);
}
function getIconOfFileType(message) {
    var _a, _b, _c;
    var fileMessageUrl = (_a = getMessageFirstFileUrl(message)) !== null && _a !== void 0 ? _a : '';
    var fileExtension = (_c = (_b = (fileMessageUrl.match(/\.([^.]*?)(?=\?|#|$)/))) === null || _b === void 0 ? void 0 : _b[1]) !== null && _c !== void 0 ? _c : '';
    if (/(jpg|jpeg|png)$/i.test(fileExtension)) {
        return IconTypes.PHOTO;
    }
    else if (/mp4$/i.test(fileExtension) || isVoiceMessage(message)) {
        return IconTypes.PLAY;
    }
    else if (/mp3/i.test(fileExtension)) {
        return IconTypes.FILE_AUDIO;
    }
    else if (/gif/i.test(fileExtension)) {
        return IconTypes.GIF;
    }
    else {
        return IconTypes.FILE_DOCUMENT;
    }
}

function MessageSearchFileItem(props) {
    var className = props.className, message = props.message, selected = props.selected, onClick = props.onClick;
    var createdAt = message.createdAt;
    var url = getMessageFirstFileUrl(message);
    var name = getMessageFirstFileName(message);
    // @ts-ignore
    var sender = message.sender || message._sender;
    var profileUrl = sender.profileUrl, nickname = sender.nickname;
    var _a = useLocalization(), stringSet = _a.stringSet, dateLocale = _a.dateLocale;
    var isVoiceMsg = isVoiceMessage(message);
    var prettyFilename = isVoiceMsg ? stringSet.VOICE_MESSAGE : (name || url);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-message-search-file-item',
            selected ? 'sendbird-message-search-file-item--selected' : '',
        ], false).join(' '), onClick: function (e) {
            e.stopPropagation();
            onClick === null || onClick === void 0 ? void 0 : onClick(message);
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-file-item__left" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-message-search-file-item__left__sender-avatar", src: profileUrl, alt: "profile image", width: "56px", height: "56px" })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-file-item__right" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-search-file-item__right__sender-name", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 }, nickname || stringSet.NO_NAME),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-file-item__right__content" },
                !isVoiceMsg && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-message-search-file-item__right__content__type-icon' },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: getIconOfFileType(message), fillColor: IconColors.PRIMARY, width: "18px", height: "18px" }))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-search-file-item__right__content__url", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, prettyFilename))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-message-search-file-item__message-created-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, MessageSearchFileItem_getCreatedAt({ createdAt: createdAt, locale: dateLocale, stringSet: stringSet })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-file-item__right-footer" })));
}


//# sourceMappingURL=MessageSearchFileItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MessageSearch/components/MessageSearchUI.js


























var MessageSearchUI = function (_a) {
    var renderPlaceHolderError = _a.renderPlaceHolderError, renderPlaceHolderLoading = _a.renderPlaceHolderLoading, renderPlaceHolderNoString = _a.renderPlaceHolderNoString, renderPlaceHolderEmptyList = _a.renderPlaceHolderEmptyList, renderSearchItem = _a.renderSearchItem;
    var _b = useMessageSearchContext(), isInvalid = _b.isInvalid, searchString = _b.searchString, requestString = _b.requestString, currentChannel = _b.currentChannel, retryCount = _b.retryCount, setRetryCount = _b.setRetryCount, loading = _b.loading, scrollRef = _b.scrollRef, hasMoreResult = _b.hasMoreResult, onScroll = _b.onScroll, allMessages = _b.allMessages, onResultClick = _b.onResultClick, selectedMessageId = _b.selectedMessageId, setSelectedMessageId = _b.setSelectedMessageId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var handleRetryToConnect = function () {
        setRetryCount(retryCount + 1);
    };
    var handleOnScroll = function (e) {
        var scrollElement = e.target;
        var scrollTop = scrollElement.scrollTop, scrollHeight = scrollElement.scrollHeight, clientHeight = scrollElement.clientHeight;
        if (!hasMoreResult) {
            return;
        }
        if (scrollTop + clientHeight >= scrollHeight - 1) {
            onScroll(function () {
                // after load more searched messages
            });
        }
    };
    var getChannelName = function () {
        if (currentChannel && (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name) && (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name) !== 'Group Channel') {
            return currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name;
        }
        if (currentChannel && ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name) === 'Group Channel' || !(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name))) {
            return currentChannel.members.map(function (member) { return member.nickname || stringSet.NO_NAME; }).join(', ');
        }
        return stringSet.NO_TITLE;
    };
    if (isInvalid && searchString && requestString) {
        return (renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG, retryToConnect: handleRetryToConnect })));
    }
    if (loading && searchString && requestString) {
        return (renderPlaceHolderLoading === null || renderPlaceHolderLoading === void 0 ? void 0 : renderPlaceHolderLoading()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.SEARCHING })));
    }
    if (!searchString) {
        return (renderPlaceHolderNoString === null || renderPlaceHolderNoString === void 0 ? void 0 : renderPlaceHolderNoString()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.SEARCH_IN, searchInString: getChannelName() })));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search", onScroll: handleOnScroll, ref: scrollRef }, (allMessages.length > 0)
        ? (allMessages.map(function (message) {
            if (renderSearchItem) {
                return renderSearchItem({ message: message, onResultClick: onResultClick });
            }
            if (message.messageType === 'file') {
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchFileItem, { className: "sendbird-message-search__message-search-item", message: message, key: message.messageId, selected: (selectedMessageId === message.messageId), onClick: function () {
                        onResultClick === null || onResultClick === void 0 ? void 0 : onResultClick(message);
                        setSelectedMessageId(message.messageId);
                    } }));
            }
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchItem, { className: "sendbird-message-search__message-search-item", message: message, key: message.messageId, selected: (selectedMessageId === message.messageId), onClick: function () {
                    onResultClick === null || onResultClick === void 0 ? void 0 : onResultClick(message);
                    setSelectedMessageId(message.messageId);
                } }));
        }))
        : (renderPlaceHolderEmptyList === null || renderPlaceHolderEmptyList === void 0 ? void 0 : renderPlaceHolderEmptyList()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.NO_RESULTS }))));
};


//# sourceMappingURL=MessageSearchUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MessageSearch.js
































function MessageSearchPannel(props) {
    var channelUrl = props.channelUrl, onResultClick = props.onResultClick, onCloseClick = props.onCloseClick, messageSearchQuery = props.messageSearchQuery, renderPlaceHolderError = props.renderPlaceHolderError, renderPlaceHolderLoading = props.renderPlaceHolderLoading, renderPlaceHolderNoString = props.renderPlaceHolderNoString, renderPlaceHolderEmptyList = props.renderPlaceHolderEmptyList, renderSearchItem = props.renderSearchItem;
    var _a = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), searchString = _a[0], setSearchString = _a[1];
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), inputString = _b[0], setInputString = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), loading = _c[0], setLoading = _c[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var timeout = null;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(function () {
            setSearchString(inputString);
            setLoading(true);
            timeout = null;
        }, 500);
    }, [inputString]);
    var handleOnChangeInputString = function (e) {
        setInputString(e.target.value);
    };
    var handleOnResultLoaded = function () {
        setLoading(false);
    };
    var handleOnClickResetStringButton = function (e) {
        e.stopPropagation();
        setInputString('');
        setSearchString('');
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-pannel" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1, { className: "sendbird-message-search-pannel__header", renderMiddle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Title, { title: stringSet.SEARCH_IN_CHANNEL })); }, renderRight: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.IconButton, { className: "sendbird-message-search-pannel__header__close-button", onClick: onCloseClick, type: IconTypes.CLOSE, color: IconColors.ON_BACKGROUND_1 })); } }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-pannel__input" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-pannel__input__container" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-message-search-pannel__input__container__search-icon", type: IconTypes.SEARCH, fillColor: IconColors.ON_BACKGROUND_3, width: "24px", height: "24px" }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { className: "sendbird-message-search-pannel__input__container__input-area", placeholder: stringSet.SEARCH, value: inputString, onChange: handleOnChangeInputString }),
                inputString && loading && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { className: "sendbird-message-search-pannel__input__container__spinner", width: "20px", height: "20px" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "20px", height: "20px" }))),
                !loading && inputString && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-message-search-pannel__input__container__reset-input-button", type: IconTypes.REMOVE, fillColor: IconColors.ON_BACKGROUND_3, width: "20px", height: "20px", onClick: handleOnClickResetStringButton })))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-message-search-pannel__message-search" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchProvider, { channelUrl: channelUrl, searchString: searchString, onResultClick: onResultClick, onResultLoaded: handleOnResultLoaded, messageSearchQuery: messageSearchQuery },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchUI, { renderPlaceHolderError: renderPlaceHolderError, renderPlaceHolderLoading: renderPlaceHolderLoading, renderPlaceHolderNoString: renderPlaceHolderNoString, renderPlaceHolderEmptyList: renderPlaceHolderEmptyList, renderSearchItem: renderSearchItem })))));
}


//# sourceMappingURL=MessageSearch.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/context/types.js
// Initializing status
var ChannelStateTypes;
(function (ChannelStateTypes) {
    ChannelStateTypes["NIL"] = "NIL";
    ChannelStateTypes["LOADING"] = "LOADING";
    ChannelStateTypes["INVALID"] = "INVALID";
    ChannelStateTypes["INITIALIZED"] = "INITIALIZED";
})(ChannelStateTypes || (ChannelStateTypes = {}));
var ParentMessageStateTypes;
(function (ParentMessageStateTypes) {
    ParentMessageStateTypes["NIL"] = "NIL";
    ParentMessageStateTypes["LOADING"] = "LOADING";
    ParentMessageStateTypes["INVALID"] = "INVALID";
    ParentMessageStateTypes["INITIALIZED"] = "INITIALIZED";
})(ParentMessageStateTypes || (ParentMessageStateTypes = {}));
var ThreadListStateTypes;
(function (ThreadListStateTypes) {
    ThreadListStateTypes["NIL"] = "NIL";
    ThreadListStateTypes["LOADING"] = "LOADING";
    ThreadListStateTypes["INVALID"] = "INVALID";
    ThreadListStateTypes["INITIALIZED"] = "INITIALIZED";
})(ThreadListStateTypes || (ThreadListStateTypes = {}));


//# sourceMappingURL=types.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/context.js


















var PREV_THREADS_FETCH_SIZE = 30;
var NEXT_THREADS_FETCH_SIZE = 30;

var ThreadContextActionTypes;
(function (ThreadContextActionTypes) {
    // initialize
    ThreadContextActionTypes["INIT_USER_ID"] = "INIT_USER_ID";
    // channel
    ThreadContextActionTypes["GET_CHANNEL_START"] = "GET_CHANNEL_START";
    ThreadContextActionTypes["GET_CHANNEL_SUCCESS"] = "GET_CHANNEL_SUCCESS";
    ThreadContextActionTypes["GET_CHANNEL_FAILURE"] = "GET_CHANNEL_FAILURE";
    // emojis
    ThreadContextActionTypes["SET_EMOJI_CONTAINER"] = "SET_EMOJI_CONTAINER";
    // parent message
    ThreadContextActionTypes["GET_PARENT_MESSAGE_START"] = "GET_PARENT_MESSAGE_START";
    ThreadContextActionTypes["GET_PARENT_MESSAGE_SUCCESS"] = "GET_PARENT_MESSAGE_SUCCESS";
    ThreadContextActionTypes["GET_PARENT_MESSAGE_FAILURE"] = "GET_PARENT_MESSAGE_FAILURE";
    // fetch threads
    ThreadContextActionTypes["INITIALIZE_THREAD_LIST_START"] = "INITIALIZE_THREAD_LIST_START";
    ThreadContextActionTypes["INITIALIZE_THREAD_LIST_SUCCESS"] = "INITIALIZE_THREAD_LIST_SUCCESS";
    ThreadContextActionTypes["INITIALIZE_THREAD_LIST_FAILURE"] = "INITIALIZE_THREAD_LIST_FAILURE";
    ThreadContextActionTypes["GET_PREV_MESSAGES_START"] = "GET_PREV_MESSAGES_START";
    ThreadContextActionTypes["GET_PREV_MESSAGES_SUCESS"] = "GET_PREV_MESSAGES_SUCESS";
    ThreadContextActionTypes["GET_PREV_MESSAGES_FAILURE"] = "GET_PREV_MESSAGES_FAILURE";
    ThreadContextActionTypes["GET_NEXT_MESSAGES_START"] = "GET_NEXT_MESSAGES_START";
    ThreadContextActionTypes["GET_NEXT_MESSAGES_SUCESS"] = "GET_NEXT_MESSAGES_SUCESS";
    ThreadContextActionTypes["GET_NEXT_MESSAGES_FAILURE"] = "GET_NEXT_MESSAGES_FAILURE";
    // handle messages
    ThreadContextActionTypes["SEND_MESSAGE_START"] = "SEND_MESSAGE_START";
    ThreadContextActionTypes["SEND_MESSAGE_SUCESS"] = "SEND_MESSAGE_SUCESS";
    ThreadContextActionTypes["SEND_MESSAGE_FAILURE"] = "SEND_MESSAGE_FAILURE";
    ThreadContextActionTypes["RESEND_MESSAGE_START"] = "RESEND_MESSAGE_START";
    ThreadContextActionTypes["ON_MESSAGE_DELETED_BY_REQ_ID"] = "ON_MESSAGE_DELETED_BY_REQ_ID";
    // event handlers - message status change
    ThreadContextActionTypes["ON_MESSAGE_RECEIVED"] = "ON_MESSAGE_RECEIVED";
    ThreadContextActionTypes["ON_MESSAGE_UPDATED"] = "ON_MESSAGE_UPDATED";
    ThreadContextActionTypes["ON_MESSAGE_DELETED"] = "ON_MESSAGE_DELETED";
    ThreadContextActionTypes["ON_REACTION_UPDATED"] = "ON_REACTION_UPDATED";
    ThreadContextActionTypes["ON_FILE_INFO_UPLOADED"] = "ON_FILE_INFO_UPLOADED";
    // event handlers - user status change
    ThreadContextActionTypes["ON_USER_MUTED"] = "ON_USER_MUTED";
    ThreadContextActionTypes["ON_USER_UNMUTED"] = "ON_USER_UNMUTED";
    ThreadContextActionTypes["ON_USER_BANNED"] = "ON_USER_BANNED";
    ThreadContextActionTypes["ON_USER_UNBANNED"] = "ON_USER_UNBANNED";
    ThreadContextActionTypes["ON_USER_LEFT"] = "ON_USER_LEFT";
    // event handler - channel status change
    ThreadContextActionTypes["ON_CHANNEL_FROZEN"] = "ON_CHANNEL_FROZEN";
    ThreadContextActionTypes["ON_CHANNEL_UNFROZEN"] = "ON_CHANNEL_UNFROZEN";
    ThreadContextActionTypes["ON_OPERATOR_UPDATED"] = "ON_OPERATOR_UPDATED";
    // event handler - typing status change
    ThreadContextActionTypes["ON_TYPING_STATUS_UPDATED"] = "ON_TYPING_STATUS_UPDATED";
})(ThreadContextActionTypes || (ThreadContextActionTypes = {}));

function Thread_context_reducer(state, action) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y;
    switch (action.type) {
        // initialize
        case ThreadContextActionTypes.INIT_USER_ID: {
            return __assign(__assign({}, state), { currentUserId: action.payload });
        }
        case ThreadContextActionTypes.GET_CHANNEL_START: {
            return __assign(__assign({}, state), { channelState: ChannelStateTypes.LOADING, currentChannel: null });
        }
        case ThreadContextActionTypes.GET_CHANNEL_SUCCESS: {
            var groupChannel = action.payload.groupChannel;
            return __assign(__assign({}, state), { channelState: ChannelStateTypes.INITIALIZED, currentChannel: groupChannel, 
                // only support in normal group channel
                isMuted: ((_b = (_a = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.members) === null || _a === void 0 ? void 0 : _a.find(function (member) { return (member === null || member === void 0 ? void 0 : member.userId) === state.currentUserId; })) === null || _b === void 0 ? void 0 : _b.isMuted) || false, isChannelFrozen: (groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen) || false });
        }
        case ThreadContextActionTypes.GET_CHANNEL_FAILURE: {
            return __assign(__assign({}, state), { channelState: ChannelStateTypes.INVALID, currentChannel: null });
        }
        case ThreadContextActionTypes.SET_EMOJI_CONTAINER: {
            var emojiContainer = action.payload.emojiContainer;
            return __assign(__assign({}, state), { emojiContainer: emojiContainer });
        }
        case ThreadContextActionTypes.GET_PARENT_MESSAGE_START: {
            return __assign(__assign({}, state), { parentMessageState: ParentMessageStateTypes.LOADING, parentMessage: null });
        }
        case ThreadContextActionTypes.GET_PARENT_MESSAGE_SUCCESS: {
            return __assign(__assign({}, state), { parentMessageState: ParentMessageStateTypes.INITIALIZED, parentMessage: action.payload.parentMessage });
        }
        case ThreadContextActionTypes.GET_PARENT_MESSAGE_FAILURE: {
            return __assign(__assign({}, state), { parentMessageState: ParentMessageStateTypes.INVALID, parentMessage: null });
        }
        // fetch threads
        case ThreadContextActionTypes.INITIALIZE_THREAD_LIST_START: {
            return __assign(__assign({}, state), { threadListState: ThreadListStateTypes.LOADING, allThreadMessages: [] });
        }
        case ThreadContextActionTypes.INITIALIZE_THREAD_LIST_SUCCESS: {
            var _z = action.payload, parentMessage = _z.parentMessage, anchorMessage = _z.anchorMessage, threadedMessages = _z.threadedMessages;
            var anchorMessageCreatedAt_1 = (!(anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.messageId)) ? parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.createdAt : anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.createdAt;
            var anchorIndex = threadedMessages.findIndex(function (message) { return (message === null || message === void 0 ? void 0 : message.createdAt) > anchorMessageCreatedAt_1; });
            var prevThreadMessages = anchorIndex > -1 ? threadedMessages.slice(0, anchorIndex) : threadedMessages;
            var anchorThreadMessage = (anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.messageId) ? [anchorMessage] : [];
            var nextThreadMessages = anchorIndex > -1 ? threadedMessages.slice(anchorIndex) : [];
            return __assign(__assign({}, state), { threadListState: ThreadListStateTypes.INITIALIZED, hasMorePrev: anchorIndex === -1 || anchorIndex === PREV_THREADS_FETCH_SIZE, hasMoreNext: threadedMessages.length - anchorIndex === NEXT_THREADS_FETCH_SIZE, allThreadMessages: [prevThreadMessages, anchorThreadMessage, nextThreadMessages].flat() });
        }
        case ThreadContextActionTypes.INITIALIZE_THREAD_LIST_FAILURE: {
            return __assign(__assign({}, state), { threadListState: ThreadListStateTypes.INVALID, allThreadMessages: [] });
        }
        case ThreadContextActionTypes.GET_NEXT_MESSAGES_START: {
            return __assign({}, state);
        }
        case ThreadContextActionTypes.GET_NEXT_MESSAGES_SUCESS: {
            var threadedMessages = action.payload.threadedMessages;
            return __assign(__assign({}, state), { hasMoreNext: threadedMessages.length === NEXT_THREADS_FETCH_SIZE, allThreadMessages: __spreadArray(__spreadArray([], state.allThreadMessages, true), threadedMessages, true) });
        }
        case ThreadContextActionTypes.GET_NEXT_MESSAGES_FAILURE: {
            return __assign(__assign({}, state), { hasMoreNext: false });
        }
        case ThreadContextActionTypes.GET_PREV_MESSAGES_START: {
            return __assign({}, state);
        }
        case ThreadContextActionTypes.GET_PREV_MESSAGES_SUCESS: {
            var threadedMessages = action.payload.threadedMessages;
            return __assign(__assign({}, state), { hasMorePrev: threadedMessages.length === PREV_THREADS_FETCH_SIZE, allThreadMessages: __spreadArray(__spreadArray([], threadedMessages, true), state.allThreadMessages, true) });
        }
        case ThreadContextActionTypes.GET_PREV_MESSAGES_FAILURE: {
            return __assign(__assign({}, state), { hasMorePrev: false });
        }
        // event handlers - message status change
        case ThreadContextActionTypes.ON_MESSAGE_RECEIVED: {
            var _0 = action.payload, channel = _0.channel, message_1 = _0.message;
            if (((_c = state.currentChannel) === null || _c === void 0 ? void 0 : _c.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)
                || state.hasMoreNext
                || ((_d = message_1 === null || message_1 === void 0 ? void 0 : message_1.parentMessage) === null || _d === void 0 ? void 0 : _d.messageId) !== ((_e = state === null || state === void 0 ? void 0 : state.parentMessage) === null || _e === void 0 ? void 0 : _e.messageId)) {
                return state;
            }
            var isAlreadyReceived = state.allThreadMessages.findIndex(function (m) { return (m.messageId === message_1.messageId); }) > -1;
            return __assign(__assign({}, state), { parentMessage: ((_f = state.parentMessage) === null || _f === void 0 ? void 0 : _f.messageId) === (message_1 === null || message_1 === void 0 ? void 0 : message_1.messageId) ? message_1 : state.parentMessage, allThreadMessages: isAlreadyReceived
                    ? state.allThreadMessages.map(function (m) { return (m.messageId === message_1.messageId ? message_1 : m); })
                    : __spreadArray(__spreadArray([], state.allThreadMessages.filter(function (m) { return (m === null || m === void 0 ? void 0 : m.reqId) !== (message_1 === null || message_1 === void 0 ? void 0 : message_1.reqId); }), true), [
                        message_1,
                    ], false) });
        }
        case ThreadContextActionTypes.ON_MESSAGE_UPDATED: {
            var _1 = action.payload, channel = _1.channel, message_2 = _1.message;
            if (((_g = state.currentChannel) === null || _g === void 0 ? void 0 : _g.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { parentMessage: ((_h = state.parentMessage) === null || _h === void 0 ? void 0 : _h.messageId) === (message_2 === null || message_2 === void 0 ? void 0 : message_2.messageId)
                    ? message_2
                    : state.parentMessage, allThreadMessages: (_j = state.allThreadMessages) === null || _j === void 0 ? void 0 : _j.map(function (msg) { return (((msg === null || msg === void 0 ? void 0 : msg.messageId) === (message_2 === null || message_2 === void 0 ? void 0 : message_2.messageId)) ? message_2 : msg); }) });
        }
        case ThreadContextActionTypes.ON_MESSAGE_DELETED: {
            var _2 = action.payload, channel = _2.channel, messageId_1 = _2.messageId;
            if (((_k = state.currentChannel) === null || _k === void 0 ? void 0 : _k.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)) {
                return state;
            }
            if (((_l = state === null || state === void 0 ? void 0 : state.parentMessage) === null || _l === void 0 ? void 0 : _l.messageId) === messageId_1) {
                return __assign(__assign({}, state), { parentMessage: null, parentMessageState: ParentMessageStateTypes.NIL, allThreadMessages: [] });
            }
            return __assign(__assign({}, state), { allThreadMessages: (_m = state.allThreadMessages) === null || _m === void 0 ? void 0 : _m.filter(function (msg) { return ((msg === null || msg === void 0 ? void 0 : msg.messageId) !== messageId_1); }), localThreadMessages: (_o = state.localThreadMessages) === null || _o === void 0 ? void 0 : _o.filter(function (msg) { return ((msg === null || msg === void 0 ? void 0 : msg.messageId) !== messageId_1); }) });
        }
        case ThreadContextActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID: {
            return __assign(__assign({}, state), { localThreadMessages: state.localThreadMessages.filter(function (m) { return (!bundle_sX9kxwmI_compareIds(m.reqId, action.payload)); }) });
        }
        case ThreadContextActionTypes.ON_REACTION_UPDATED: {
            var reactionEvent_1 = (_p = action.payload) === null || _p === void 0 ? void 0 : _p.reactionEvent;
            if (((_q = state === null || state === void 0 ? void 0 : state.parentMessage) === null || _q === void 0 ? void 0 : _q.messageId) === (reactionEvent_1 === null || reactionEvent_1 === void 0 ? void 0 : reactionEvent_1.messageId)) {
                (_s = (_r = state.parentMessage) === null || _r === void 0 ? void 0 : _r.applyReactionEvent) === null || _s === void 0 ? void 0 : _s.call(_r, reactionEvent_1);
            }
            return __assign(__assign({}, state), { allThreadMessages: state.allThreadMessages.map(function (m) {
                    var _a;
                    if ((reactionEvent_1 === null || reactionEvent_1 === void 0 ? void 0 : reactionEvent_1.messageId) === (m === null || m === void 0 ? void 0 : m.messageId)) {
                        (_a = m === null || m === void 0 ? void 0 : m.applyReactionEvent) === null || _a === void 0 ? void 0 : _a.call(m, reactionEvent_1);
                        return m;
                    }
                    return m;
                }) });
        }
        // event handlers - user status change
        case ThreadContextActionTypes.ON_USER_MUTED: {
            var _3 = action.payload, channel = _3.channel, user = _3.user;
            if (((_t = state.currentChannel) === null || _t === void 0 ? void 0 : _t.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state.currentUserId !== (user === null || user === void 0 ? void 0 : user.userId)) {
                return state;
            }
            return __assign(__assign({}, state), { isMuted: true });
        }
        case ThreadContextActionTypes.ON_USER_UNMUTED: {
            var _4 = action.payload, channel = _4.channel, user = _4.user;
            if (((_u = state.currentChannel) === null || _u === void 0 ? void 0 : _u.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state.currentUserId !== (user === null || user === void 0 ? void 0 : user.userId)) {
                return state;
            }
            return __assign(__assign({}, state), { isMuted: false });
        }
        case ThreadContextActionTypes.ON_USER_BANNED: {
            return __assign(__assign({}, state), { channelState: ChannelStateTypes.NIL, threadListState: ThreadListStateTypes.NIL, parentMessageState: ParentMessageStateTypes.NIL, currentChannel: null, parentMessage: null, allThreadMessages: [], hasMorePrev: false, hasMoreNext: false });
        }
        case ThreadContextActionTypes.ON_USER_UNBANNED: {
            return __assign({}, state);
        }
        case ThreadContextActionTypes.ON_USER_LEFT: {
            return __assign(__assign({}, state), { channelState: ChannelStateTypes.NIL, threadListState: ThreadListStateTypes.NIL, parentMessageState: ParentMessageStateTypes.NIL, currentChannel: null, parentMessage: null, allThreadMessages: [], hasMorePrev: false, hasMoreNext: false });
        }
        // event handler - channel status change
        case ThreadContextActionTypes.ON_CHANNEL_FROZEN: {
            return __assign(__assign({}, state), { isChannelFrozen: true });
        }
        case ThreadContextActionTypes.ON_CHANNEL_UNFROZEN: {
            return __assign(__assign({}, state), { isChannelFrozen: false });
        }
        case ThreadContextActionTypes.ON_OPERATOR_UPDATED: {
            var channel = action.payload.channel;
            if ((channel === null || channel === void 0 ? void 0 : channel.url) === ((_v = state.currentChannel) === null || _v === void 0 ? void 0 : _v.url)) {
                return __assign(__assign({}, state), { currentChannel: channel });
            }
            return state;
        }
        // message
        case ThreadContextActionTypes.SEND_MESSAGE_START: {
            var message = action.payload.message;
            return __assign(__assign({}, state), { localThreadMessages: __spreadArray(__spreadArray([], state.localThreadMessages, true), [
                    message,
                ], false) });
        }
        case ThreadContextActionTypes.SEND_MESSAGE_SUCESS: {
            var message_3 = action.payload.message;
            return __assign(__assign({}, state), { allThreadMessages: __spreadArray(__spreadArray([], state.allThreadMessages.filter(function (m) { return (!bundle_sX9kxwmI_compareIds(m === null || m === void 0 ? void 0 : m.reqId, message_3 === null || message_3 === void 0 ? void 0 : message_3.reqId)); }), true), [
                    message_3,
                ], false), localThreadMessages: state.localThreadMessages.filter(function (m) { return (!bundle_sX9kxwmI_compareIds(m === null || m === void 0 ? void 0 : m.reqId, message_3 === null || message_3 === void 0 ? void 0 : message_3.reqId)); }) });
        }
        case ThreadContextActionTypes.SEND_MESSAGE_FAILURE: {
            var message_4 = action.payload.message;
            return __assign(__assign({}, state), { localThreadMessages: state.localThreadMessages.map(function (m) { return (bundle_sX9kxwmI_compareIds(m === null || m === void 0 ? void 0 : m.reqId, message_4 === null || message_4 === void 0 ? void 0 : message_4.reqId)
                    ? message_4
                    : m); }) });
        }
        case ThreadContextActionTypes.RESEND_MESSAGE_START: {
            var message_5 = action.payload.message;
            return __assign(__assign({}, state), { localThreadMessages: state.localThreadMessages.map(function (m) { return (bundle_sX9kxwmI_compareIds(m === null || m === void 0 ? void 0 : m.reqId, message_5 === null || message_5 === void 0 ? void 0 : message_5.reqId)
                    ? message_5
                    : m); }) });
        }
        case ThreadContextActionTypes.ON_FILE_INFO_UPLOADED: {
            var _5 = action.payload, channelUrl = _5.channelUrl, requestId_1 = _5.requestId, index = _5.index, uploadableFileInfo = _5.uploadableFileInfo, error = _5.error;
            if (!bundle_sX9kxwmI_compareIds(channelUrl, (_w = state.currentChannel) === null || _w === void 0 ? void 0 : _w.url)) {
                return state;
            }
            /**
             * We don't have to do anything here because
             * onFailed() will be called so handle error there instead.
             */
            if (error)
                return state;
            var localThreadMessages = state.localThreadMessages;
            var messageToUpdate = localThreadMessages.find(function (message) { return bundle_sX9kxwmI_compareIds(context_hasReqId(message) && message.reqId, requestId_1); });
            var fileInfoList = (_x = messageToUpdate
                .messageParams) === null || _x === void 0 ? void 0 : _x.fileInfoList;
            if (Array.isArray(fileInfoList)) {
                fileInfoList[index] = uploadableFileInfo;
            }
            return __assign(__assign({}, state), { localThreadMessages: localThreadMessages });
        }
        case ThreadContextActionTypes.ON_TYPING_STATUS_UPDATED: {
            var _6 = action.payload, channel = _6.channel, typingMembers = _6.typingMembers;
            if (!bundle_sX9kxwmI_compareIds(channel.url, (_y = state.currentChannel) === null || _y === void 0 ? void 0 : _y.url)) {
                return state;
            }
            return __assign(__assign({}, state), { typingMembers: typingMembers });
        }
        default: {
            return state;
        }
    }
}
function context_hasReqId(message) {
    return 'reqId' in message;
}

var Thread_context_initialState = {
    currentChannel: null,
    allThreadMessages: [],
    localThreadMessages: [],
    parentMessage: null,
    channelState: ChannelStateTypes.NIL,
    parentMessageState: ParentMessageStateTypes.NIL,
    threadListState: ThreadListStateTypes.NIL,
    hasMorePrev: false,
    hasMoreNext: false,
    emojiContainer: {},
    isMuted: false,
    isChannelFrozen: false,
    currentUserId: '',
    typingMembers: [],
};

function context_useGetChannel(_a, _b) {
    var channelUrl = _a.channelUrl, sdkInit = _a.sdkInit, message = _a.message;
    var sdk = _b.sdk, logger = _b.logger, threadDispatcher = _b.threadDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        // validation check
        if (sdkInit && channelUrl && (sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel)) {
            threadDispatcher({
                type: ThreadContextActionTypes.GET_CHANNEL_START,
                payload: null,
            });
            (_b = (_a = sdk.groupChannel).getChannel) === null || _b === void 0 ? void 0 : _b.call(_a, channelUrl).then(function (groupChannel) {
                logger.info('Thread | useInitialize: Get channel succeeded', groupChannel);
                threadDispatcher({
                    type: ThreadContextActionTypes.GET_CHANNEL_SUCCESS,
                    payload: { groupChannel: groupChannel },
                });
            }).catch(function (error) {
                logger.info('Thread | useInitialize: Get channel failed', error);
                threadDispatcher({
                    type: ThreadContextActionTypes.GET_CHANNEL_FAILURE,
                    payload: error,
                });
            });
        }
    }, [message, sdkInit]);
    /**
     * We don't use channelUrl here,
     * because Thread must operate independently of the channel.
     */
}

function useGetAllEmoji(_a, _b) {
    var sdk = _a.sdk;
    var logger = _b.logger, threadDispatcher = _b.threadDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (sdk === null || sdk === void 0 ? void 0 : sdk.getAllEmoji) { // validation check
            sdk === null || sdk === void 0 ? void 0 : sdk.getAllEmoji().then(function (emojiContainer) {
                logger.info('Thread | useGetAllEmoji: Getting emojis succeeded.', emojiContainer);
                threadDispatcher({
                    type: ThreadContextActionTypes.SET_EMOJI_CONTAINER,
                    payload: { emojiContainer: emojiContainer },
                });
            }).catch(function (error) {
                logger.info('Thread | useGetAllEmoji: Getting emojis failed.', error);
            });
        }
    }, [sdk]);
}

function useGetParentMessage(_a, _b) {
    var channelUrl = _a.channelUrl, sdkInit = _a.sdkInit, parentMessage = _a.parentMessage;
    var sdk = _b.sdk, logger = _b.logger, threadDispatcher = _b.threadDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b, _c;
        // validation check
        if (sdkInit && ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.message) === null || _a === void 0 ? void 0 : _a.getMessage) && parentMessage) {
            threadDispatcher({
                type: ThreadContextActionTypes.GET_PARENT_MESSAGE_START,
                payload: null,
            });
            var params = {
                channelUrl: channelUrl,
                channelType: _bundle_0b1520ed["d" /* C */].GROUP,
                messageId: parentMessage.messageId,
                includeMetaArray: true,
                includeReactions: true,
                includeThreadInfo: true,
                includeParentMessageInfo: true,
            };
            logger.info('Thread | useGetParentMessage: Get parent message start.', params);
            (_c = (_b = sdk.message).getMessage) === null || _c === void 0 ? void 0 : _c.call(_b, params).then(function (parentMsg) {
                logger.info('Thread | useGetParentMessage: Get parent message succeeded.', parentMessage);
                // @ts-ignore
                parentMsg.ogMetaData = (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.ogMetaData) || null; // ogMetaData is not included for now
                threadDispatcher({
                    type: ThreadContextActionTypes.GET_PARENT_MESSAGE_SUCCESS,
                    payload: { parentMessage: parentMsg },
                });
            }).catch(function (error) {
                logger.info('Thread | useGetParentMessage: Get parent message failed.', error);
                threadDispatcher({
                    type: ThreadContextActionTypes.GET_PARENT_MESSAGE_FAILURE,
                    payload: error,
                });
            });
        }
    }, [sdkInit, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId]);
    /**
     * We don't use channelUrl here,
     * because Thread must operate independently of the channel.
     */
}

function useHandleThreadPubsubEvents(_a, _b) {
    var sdkInit = _a.sdkInit, currentChannel = _a.currentChannel, parentMessage = _a.parentMessage;
    var pubSub = _b.pubSub, threadDispatcher = _b.threadDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var subscriber = new Map();
        if (pubSub === null || pubSub === void 0 ? void 0 : pubSub.subscribe) {
            // TODO: subscribe ON_FILE_INFO_UPLOADED
            subscriber.set(pubSubTopics.SEND_MESSAGE_START, pubSub.subscribe(pubSubTopics.SEND_MESSAGE_START, function (props) {
                var _a, _b;
                var channel = props.channel, message = props.message, publishingModules = props.publishingModules;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url) && (message === null || message === void 0 ? void 0 : message.parentMessageId) === (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId) && shouldPubSubPublishToThread(publishingModules)) {
                    // TODO: const clonedMessage = cloneMessage(message);
                    var pendingMessage = __assign({}, message);
                    if (message.isMultipleFilesMessage()) {
                        pendingMessage.fileInfoList = (_b = (_a = message === null || message === void 0 ? void 0 : message.messageParams) === null || _a === void 0 ? void 0 : _a.fileInfoList.map(function (fileInfo) { return (__assign(__assign({}, fileInfo), { url: URL.createObjectURL(fileInfo.file) })); })) !== null && _b !== void 0 ? _b : [];
                    }
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_START,
                        payload: {
                            message: pendingMessage,
                        },
                    });
                }
                bundle_sX9kxwmI_scrollIntoLast === null || bundle_sX9kxwmI_scrollIntoLast === void 0 ? void 0 : bundle_sX9kxwmI_scrollIntoLast();
            }));
            subscriber.set(PUBSUB_TOPICS.ON_FILE_INFO_UPLOADED, pubSub.subscribe(PUBSUB_TOPICS.ON_FILE_INFO_UPLOADED, function (props) {
                var response = props.response, publishingModules = props.publishingModules;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === response.channelUrl && shouldPubSubPublishToThread(publishingModules)) {
                    threadDispatcher({
                        type: ON_FILE_INFO_UPLOADED,
                        payload: response,
                    });
                }
            }));
            subscriber.set(pubSubTopics.SEND_USER_MESSAGE, pubSub.subscribe(pubSubTopics.SEND_USER_MESSAGE, function (props) {
                var _a = props, channel = _a.channel, message = _a.message;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url)
                    && (message === null || message === void 0 ? void 0 : message.parentMessageId) === (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId)) {
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
                        payload: { message: message },
                    });
                }
                bundle_sX9kxwmI_scrollIntoLast === null || bundle_sX9kxwmI_scrollIntoLast === void 0 ? void 0 : bundle_sX9kxwmI_scrollIntoLast();
            }));
            subscriber.set(pubSubTopics.SEND_MESSAGE_FAILED, pubSub.subscribe(pubSubTopics.SEND_MESSAGE_FAILED, function (props) {
                var channel = props.channel, message = props.message, publishingModules = props.publishingModules;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url) && (message === null || message === void 0 ? void 0 : message.parentMessageId) === (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId) && shouldPubSubPublishToThread(publishingModules)) {
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                        payload: { message: message },
                    });
                }
            }));
            subscriber.set(pubSubTopics.SEND_FILE_MESSAGE, pubSub.subscribe(pubSubTopics.SEND_FILE_MESSAGE, function (props) {
                var channel = props.channel, message = props.message, publishingModules = props.publishingModules;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url) && shouldPubSubPublishToThread(publishingModules)) {
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
                        payload: { message: message },
                    });
                }
                bundle_sX9kxwmI_scrollIntoLast === null || bundle_sX9kxwmI_scrollIntoLast === void 0 ? void 0 : bundle_sX9kxwmI_scrollIntoLast();
            }));
            subscriber.set(pubSubTopics.UPDATE_USER_MESSAGE, pubSub.subscribe(pubSubTopics.UPDATE_USER_MESSAGE, function (props) {
                var _a = props, channel = _a.channel, message = _a.message;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_MESSAGE_UPDATED,
                        payload: { channel: channel, message: message },
                    });
                }
            }));
            subscriber.set(pubSubTopics.DELETE_MESSAGE, pubSub.subscribe(pubSubTopics.DELETE_MESSAGE, function (props) {
                var _a = props, channel = _a.channel, messageId = _a.messageId;
                if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url)) {
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_MESSAGE_DELETED,
                        payload: { messageId: messageId },
                    });
                }
            }));
        }
        return function () {
            subscriber === null || subscriber === void 0 ? void 0 : subscriber.forEach(function (s) {
                try {
                    s === null || s === void 0 ? void 0 : s.remove();
                }
                catch (_a) {
                    //
                }
            });
        };
    }, [sdkInit, currentChannel, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId]);
}

function context_useHandleChannelEvents(_a, _b) {
    var sdk = _a.sdk, currentChannel = _a.currentChannel;
    var logger = _b.logger, threadDispatcher = _b.threadDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b, _c;
        var handlerId = uuidv4();
        // validation check
        if (((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.addGroupChannelHandler)
            && currentChannel) {
            var channelHandlerParams = {
                // message status change
                onMessageReceived: function (channel, message) {
                    logger.info('Thread | useHandleChannelEvents: onMessageReceived', { channel: channel, message: message });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_MESSAGE_RECEIVED,
                        payload: { channel: channel, message: message },
                    });
                },
                onMessageUpdated: function (channel, message) {
                    logger.info('Thread | useHandleChannelEvents: onMessageUpdated', { channel: channel, message: message });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_MESSAGE_UPDATED,
                        payload: { channel: channel, message: message },
                    });
                },
                onMessageDeleted: function (channel, messageId) {
                    logger.info('Thread | useHandleChannelEvents: onMessageDeleted', { channel: channel, messageId: messageId });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_MESSAGE_DELETED,
                        payload: { channel: channel, messageId: messageId },
                    });
                },
                onReactionUpdated: function (channel, reactionEvent) {
                    logger.info('Thread | useHandleChannelEvents: onReactionUpdated', { channel: channel, reactionEvent: reactionEvent });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_REACTION_UPDATED,
                        payload: { channel: channel, reactionEvent: reactionEvent },
                    });
                },
                // user status change
                onUserMuted: function (channel, user) {
                    logger.info('Thread | useHandleChannelEvents: onUserMuted', { channel: channel, user: user });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_USER_MUTED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserUnmuted: function (channel, user) {
                    logger.info('Thread | useHandleChannelEvents: onUserUnmuted', { channel: channel, user: user });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_USER_UNMUTED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserBanned: function (channel, user) {
                    logger.info('Thread | useHandleChannelEvents: onUserBanned', { channel: channel, user: user });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_USER_BANNED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserUnbanned: function (channel, user) {
                    logger.info('Thread | useHandleChannelEvents: onUserUnbanned', { channel: channel, user: user });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_USER_UNBANNED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserLeft: function (channel, user) {
                    logger.info('Thread | useHandleChannelEvents: onUserLeft', { channel: channel, user: user });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_USER_LEFT,
                        payload: { channel: channel, user: user },
                    });
                },
                // channel status change
                onChannelFrozen: function (channel) {
                    logger.info('Thread | useHandleChannelEvents: onChannelFrozen', { channel: channel });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_CHANNEL_FROZEN,
                        payload: { channel: channel },
                    });
                },
                onChannelUnfrozen: function (channel) {
                    logger.info('Thread | useHandleChannelEvents: onChannelUnfrozen', { channel: channel });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_CHANNEL_UNFROZEN,
                        payload: { channel: channel },
                    });
                },
                onOperatorUpdated: function (channel, users) {
                    logger.info('Thread | useHandleChannelEvents: onOperatorUpdated', { channel: channel, users: users });
                    threadDispatcher({
                        type: ThreadContextActionTypes.ON_OPERATOR_UPDATED,
                        payload: { channel: channel, users: users },
                    });
                },
                onTypingStatusUpdated: function (channel) {
                    if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentChannel.url)) {
                        logger.info('Channel | onTypingStatusUpdated', { channel: channel });
                        var typingMembers = channel.getTypingUsers();
                        threadDispatcher({
                            type: ON_TYPING_STATUS_UPDATED,
                            payload: {
                                channel: channel,
                                typingMembers: typingMembers,
                            },
                        });
                    }
                },
            };
            var channelHandler = new groupChannel_We(channelHandlerParams);
            (_c = (_b = sdk.groupChannel).addGroupChannelHandler) === null || _c === void 0 ? void 0 : _c.call(_b, handlerId, channelHandler);
            logger.info('Thread | useHandleChannelEvents: Added channelHandler in Thread', { handlerId: handlerId, channelHandler: channelHandler });
        }
        return function () {
            var _a, _b, _c;
            // validation check
            if (handlerId && ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler)) {
                (_c = (_b = sdk.groupChannel).removeGroupChannelHandler) === null || _c === void 0 ? void 0 : _c.call(_b, handlerId);
                logger.info('Thread | useHandleChannelEvents: Removed channelHandler in Thread.', handlerId);
            }
        };
    }, [
        sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel,
        currentChannel,
    ]);
}

function context_useSendFileMessageCallback(_a, _b) {
    var currentChannel = _a.currentChannel, onBeforeSendFileMessage = _a.onBeforeSendFileMessage;
    var logger = _b.logger, pubSub = _b.pubSub, threadDispatcher = _b.threadDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (file, quoteMessage) {
        return new Promise(function (resolve, reject) {
            var _a;
            var createParamsDefault = function () {
                var params = {};
                params.file = file;
                if (quoteMessage) {
                    params.isReplyToChannel = true;
                    params.parentMessageId = quoteMessage.messageId;
                }
                return params;
            };
            var params = (_a = onBeforeSendFileMessage === null || onBeforeSendFileMessage === void 0 ? void 0 : onBeforeSendFileMessage(file, quoteMessage)) !== null && _a !== void 0 ? _a : createParamsDefault();
            logger.info('Thread | useSendFileMessageCallback: Sending file message start.', params);
            currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendFileMessage(params).onPending(function (pendingMessage) {
                threadDispatcher({
                    type: ThreadContextActionTypes.SEND_MESSAGE_START,
                    payload: {
                        /* pubSub is used instead of messagesDispatcher
                          to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
                        // TODO: remove data pollution
                        message: __assign(__assign({}, pendingMessage), { url: URL.createObjectURL(file), 
                            // pending thumbnail message seems to be failed
                            requestState: 'pending', isUserMessage: pendingMessage.isUserMessage, isFileMessage: pendingMessage.isFileMessage, isAdminMessage: pendingMessage.isAdminMessage, isMultipleFilesMessage: pendingMessage.isMultipleFilesMessage }),
                    },
                });
                setTimeout(function () { return bundle_sX9kxwmI_scrollIntoLast(); }, bundle_DhBuJR0w["i" /* b */]);
            }).onFailed(function (error, message) {
                message.localUrl = URL.createObjectURL(file);
                message.file = file;
                logger.info('Thread | useSendFileMessageCallback: Sending file message failed.', { message: message, error: error });
                threadDispatcher({
                    type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                    payload: { message: message, error: error },
                });
                reject(error);
            }).onSucceeded(function (message) {
                logger.info('Thread | useSendFileMessageCallback: Sending file message succeeded.', message);
                pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {
                    channel: currentChannel,
                    message: message,
                    publishingModules: [PublishingModuleType.THREAD],
                });
                resolve(message);
            });
        });
    }, [currentChannel]);
}

function context_useUpdateMessageCallback(_a, _b) {
    var currentChannel = _a.currentChannel, isMentionEnabled = _a.isMentionEnabled;
    var logger = _b.logger, pubSub = _b.pubSub, threadDispatcher = _b.threadDispatcher;
    // TODO: add type
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (props) {
        var _a;
        var messageId = props.messageId, message = props.message, mentionedUsers = props.mentionedUsers, mentionTemplate = props.mentionTemplate;
        var createParamsDefault = function () {
            var params = {};
            params.message = message;
            if (isMentionEnabled && mentionedUsers && (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) > 0) {
                params.mentionedUsers = mentionedUsers;
            }
            if (isMentionEnabled && mentionTemplate) {
                params.mentionedMessageTemplate = mentionTemplate;
            }
            else {
                params.mentionedMessageTemplate = message;
            }
            return params;
        };
        var params = createParamsDefault();
        logger.info('Thread | useUpdateMessageCallback: Message update start.', params);
        (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.updateUserMessage) === null || _a === void 0 ? void 0 : _a.call(currentChannel, messageId, params).then(function (message) {
            logger.info('Thread | useUpdateMessageCallback: Message update succeeded.', message);
            threadDispatcher({
                type: ThreadContextActionTypes.ON_MESSAGE_UPDATED,
                payload: {
                    channel: currentChannel,
                    message: message,
                },
            });
            pubSub.publish(pubSubTopics.UPDATE_USER_MESSAGE, {
                fromSelector: true,
                channel: currentChannel,
                message: message,
                publishingModules: [PublishingModuleType.THREAD],
            });
        });
    }, [currentChannel, isMentionEnabled]);
}

function context_useDeleteMessageCallback(_a, _b) {
    var currentChannel = _a.currentChannel, threadDispatcher = _a.threadDispatcher;
    var logger = _b.logger;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (message) {
        logger.info('Thread | useDeleteMessageCallback: Deleting message.', message);
        var sendingStatus = message.sendingStatus;
        return new Promise(function (resolve, reject) {
            var _a;
            logger.info('Thread | useDeleteMessageCallback: Deleting message requestState:', sendingStatus);
            // Message is only on local
            if (sendingStatus === 'failed' || sendingStatus === 'pending') {
                logger.info('Thread | useDeleteMessageCallback: Deleted message from local:', message);
                threadDispatcher({
                    type: ThreadContextActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID,
                    payload: message.reqId,
                });
                resolve();
            }
            logger.info('Thread | useDeleteMessageCallback: Deleting message from remote:', sendingStatus);
            (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.deleteMessage) === null || _a === void 0 ? void 0 : _a.call(currentChannel, message).then(function () {
                logger.info('Thread | useDeleteMessageCallback: Deleting message success!', message);
                threadDispatcher({
                    type: ThreadContextActionTypes.ON_MESSAGE_DELETED,
                    payload: { message: message, channel: currentChannel },
                });
                resolve();
            }).catch(function (err) {
                logger.warning('Thread | useDeleteMessageCallback: Deleting message failed!', err);
                reject(err);
            });
        });
    }, [currentChannel]);
}

function context_useToggleReactionCallback(_a, _b) {
    var currentChannel = _a.currentChannel;
    var logger = _b.logger;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (message, key, isReacted) {
        var _a, _b;
        if (isReacted) {
            (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.deleteReaction) === null || _a === void 0 ? void 0 : _a.call(currentChannel, message, key).then(function (res) {
                logger.info('Thread | useToggleReactionsCallback: Delete reaction succeeded.', res);
            }).catch(function (err) {
                logger.warning('Thread | useToggleReactionsCallback: Delete reaction failed.', err);
            });
            return;
        }
        (_b = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.addReaction) === null || _b === void 0 ? void 0 : _b.call(currentChannel, message, key).then(function (res) {
            logger.info('Thread | useToggleReactionsCallback: Add reaction succeeded.', res);
        }).catch(function (err) {
            logger.warning('Thread | useToggleReactionsCallback: Add reaction failed.', err);
        });
    }, [currentChannel]);
}

function useSendUserMessageCallback(_a, _b) {
    var isMentionEnabled = _a.isMentionEnabled, currentChannel = _a.currentChannel, onBeforeSendUserMessage = _a.onBeforeSendUserMessage;
    var logger = _b.logger, pubSub = _b.pubSub, threadDispatcher = _b.threadDispatcher;
    var sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (props) {
        var _a;
        var message = props.message, quoteMessage = props.quoteMessage, mentionTemplate = props.mentionTemplate, mentionedUsers = props.mentionedUsers;
        var createDefaultParams = function () {
            var params = {};
            params.message = message;
            var mentionedUsersLength = (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) || 0;
            if (isMentionEnabled && mentionedUsersLength) {
                params.mentionedUsers = mentionedUsers;
            }
            if (isMentionEnabled && mentionTemplate && mentionedUsersLength) {
                params.mentionedMessageTemplate = mentionTemplate;
            }
            if (quoteMessage) {
                params.isReplyToChannel = true;
                params.parentMessageId = quoteMessage.messageId;
            }
            return params;
        };
        var params = (_a = onBeforeSendUserMessage === null || onBeforeSendUserMessage === void 0 ? void 0 : onBeforeSendUserMessage(message, quoteMessage)) !== null && _a !== void 0 ? _a : createDefaultParams();
        logger.info('Thread | useSendUserMessageCallback: Sending user message start.', params);
        if (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendUserMessage) {
            currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendUserMessage(params).onPending(function (pendingMessage) {
                threadDispatcher({
                    type: ThreadContextActionTypes.SEND_MESSAGE_START,
                    payload: { message: pendingMessage },
                });
            }).onFailed(function (error, message) {
                logger.info('Thread | useSendUserMessageCallback: Sending user message failed.', { message: message, error: error });
                threadDispatcher({
                    type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                    payload: { error: error, message: message },
                });
            }).onSucceeded(function (message) {
                logger.info('Thread | useSendUserMessageCallback: Sending user message succeeded.', message);
                // because Thread doesn't subscribe SEND_USER_MESSAGE
                pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, {
                    channel: currentChannel,
                    message: message,
                    publishingModules: [PublishingModuleType.THREAD],
                });
            });
        }
    }, [isMentionEnabled, currentChannel]);
    return sendMessage;
}

function context_useResendMessageCallback(_a, _b) {
    var currentChannel = _a.currentChannel;
    var logger = _b.logger, pubSub = _b.pubSub, threadDispatcher = _b.threadDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (failedMessage) {
        var _a, _b, _c, _d, _e;
        if (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isResendable) {
            logger.info('Thread | useResendMessageCallback: Resending failedMessage start.', failedMessage);
            if (((_a = failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isUserMessage) === null || _a === void 0 ? void 0 : _a.call(failedMessage)) || (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.messageType) === _bundle_0b1520ed["ob" /* ag */].USER) {
                try {
                    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendMessage(failedMessage).onPending(function (message) {
                        logger.info('Thread | useResendMessageCallback: Resending user message started.', message);
                        threadDispatcher({
                            type: ThreadContextActionTypes.RESEND_MESSAGE_START,
                            payload: { message: message },
                        });
                    }).onSucceeded(function (message) {
                        logger.info('Thread | useResendMessageCallback: Resending user message succeeded.', message);
                        threadDispatcher({
                            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
                            payload: { message: message },
                        });
                        pubSub.publish(pubSubTopics.SEND_USER_MESSAGE, {
                            channel: currentChannel,
                            message: message,
                            publishingModules: [PublishingModuleType.THREAD],
                        });
                    }).onFailed(function (error) {
                        logger.warning('Thread | useResendMessageCallback: Resending user message failed.', error);
                        failedMessage.sendingStatus = _bundle_0b1520ed["vb" /* an */].FAILED;
                        threadDispatcher({
                            type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                            payload: { message: failedMessage },
                        });
                    });
                }
                catch (err) {
                    logger.warning('Thread | useResendMessageCallback: Resending user message failed.', err);
                    failedMessage.sendingStatus = _bundle_0b1520ed["vb" /* an */].FAILED;
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                        payload: { message: failedMessage },
                    });
                }
            }
            else if ((_b = failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isFileMessage) === null || _b === void 0 ? void 0 : _b.call(failedMessage)) {
                try {
                    (_c = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendMessage) === null || _c === void 0 ? void 0 : _c.call(currentChannel, failedMessage).onPending(function (message) {
                        logger.info('Thread | useResendMessageCallback: Resending file message started.', message);
                        threadDispatcher({
                            type: ThreadContextActionTypes.RESEND_MESSAGE_START,
                            payload: { message: message },
                        });
                    }).onSucceeded(function (message) {
                        logger.info('Thread | useResendMessageCallback: Resending file message succeeded.', message);
                        threadDispatcher({
                            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
                            payload: { message: message },
                        });
                        pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {
                            channel: currentChannel,
                            message: failedMessage,
                            publishingModules: [PublishingModuleType.THREAD],
                        });
                    }).onFailed(function (error) {
                        logger.warning('Thread | useResendMessageCallback: Resending file message failed.', error);
                        failedMessage.sendingStatus = _bundle_0b1520ed["vb" /* an */].FAILED;
                        threadDispatcher({
                            type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                            payload: { message: failedMessage },
                        });
                    });
                }
                catch (err) {
                    logger.warning('Thread | useResendMessageCallback: Resending file message failed.', err);
                    failedMessage.sendingStatus = _bundle_0b1520ed["vb" /* an */].FAILED;
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                        payload: { message: failedMessage },
                    });
                }
            }
            else if ((_d = failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isMultipleFilesMessage) === null || _d === void 0 ? void 0 : _d.call(failedMessage)) {
                try {
                    (_e = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendMessage) === null || _e === void 0 ? void 0 : _e.call(currentChannel, failedMessage).onPending(function (message) {
                        logger.info('Thread | useResendMessageCallback: Resending multiple files message started.', message);
                        threadDispatcher({
                            type: ThreadContextActionTypes.RESEND_MESSAGE_START,
                            payload: { message: message },
                        });
                    }).onFileUploaded(function (requestId, index, uploadableFileInfo, error) {
                        logger.info('Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.', {
                            requestId: requestId,
                            index: index,
                            error: error,
                            uploadableFileInfo: uploadableFileInfo,
                        });
                        pubSub.publish(pubSubTopics.ON_FILE_INFO_UPLOADED, {
                            response: {
                                channelUrl: currentChannel.url,
                                requestId: requestId,
                                index: index,
                                uploadableFileInfo: uploadableFileInfo,
                                error: error,
                            },
                            publishingModules: [PublishingModuleType.THREAD],
                        });
                    }).onSucceeded(function (message) {
                        logger.info('Thread | useResendMessageCallback: Resending MFM succeeded.', message);
                        threadDispatcher({
                            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
                            payload: { message: message },
                        });
                        pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {
                            channel: currentChannel,
                            message: message,
                            publishingModules: [PublishingModuleType.THREAD],
                        });
                    }).onFailed(function (error, message) {
                        logger.warning('Thread | useResendMessageCallback: Resending MFM failed.', error);
                        threadDispatcher({
                            type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                            payload: { message: message },
                        });
                    });
                }
                catch (err) {
                    logger.warning('Thread | useResendMessageCallback: Resending MFM failed.', err);
                    threadDispatcher({
                        type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                        payload: { message: failedMessage },
                    });
                }
            }
            else {
                logger.warning('Thread | useResendMessageCallback: Message is not resendable.', failedMessage);
                failedMessage.sendingStatus = _bundle_0b1520ed["vb" /* an */].FAILED;
                threadDispatcher({
                    type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                    payload: { message: failedMessage },
                });
            }
        }
    }, [currentChannel]);
}

var context_useSendVoiceMessageCallback = function (_a, _b) {
    var currentChannel = _a.currentChannel, onBeforeSendVoiceMessage = _a.onBeforeSendVoiceMessage;
    var logger = _b.logger, pubSub = _b.pubSub, threadDispatcher = _b.threadDispatcher;
    var sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (file, duration, quoteMessage) {
        var messageParams = (onBeforeSendVoiceMessage
            && typeof onBeforeSendVoiceMessage === 'function')
            ? onBeforeSendVoiceMessage(file, quoteMessage)
            : {
                file: file,
                fileName: bundle_DhBuJR0w["n" /* g */],
                mimeType: bundle_DhBuJR0w["o" /* h */],
                metaArrays: [
                    new _bundle_dc8db3c3_je({
                        key: bundle_DhBuJR0w["d" /* M */],
                        value: ["".concat(duration)],
                    }),
                    new _bundle_dc8db3c3_je({
                        key: bundle_DhBuJR0w["p" /* i */],
                        value: [bundle_DhBuJR0w["q" /* j */]],
                    }),
                ],
            };
        if (quoteMessage) {
            messageParams.isReplyToChannel = true;
            messageParams.parentMessageId = quoteMessage.messageId;
        }
        logger.info('Thread | useSendVoiceMessageCallback:  Start sending voice message', messageParams);
        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendFileMessage(messageParams).onPending(function (pendingMessage) {
            threadDispatcher({
                type: ThreadContextActionTypes.SEND_MESSAGE_START,
                payload: {
                    /* pubSub is used instead of messagesDispatcher
                    to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
                    // TODO: remove data pollution
                    message: __assign(__assign({}, pendingMessage), { url: URL.createObjectURL(file), 
                        // pending thumbnail message seems to be failed
                        requestState: 'pending', isUserMessage: pendingMessage.isUserMessage, isFileMessage: pendingMessage.isFileMessage, isAdminMessage: pendingMessage.isAdminMessage, isMultipleFilesMessage: pendingMessage.isMultipleFilesMessage }),
                },
            });
            setTimeout(function () { return bundle_sX9kxwmI_scrollIntoLast(); }, bundle_DhBuJR0w["i" /* b */]);
        }).onFailed(function (error, message) {
            message.localUrl = URL.createObjectURL(file);
            message.file = file;
            logger.info('Thread | useSendVoiceMessageCallback: Sending voice message failed.', { message: message, error: error });
            threadDispatcher({
                type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
                payload: { message: message, error: error },
            });
        }).onSucceeded(function (message) {
            logger.info('Thread | useSendVoiceMessageCallback: Sending voice message succeeded.', message);
            pubSub.publish(pubSubTopics.SEND_FILE_MESSAGE, {
                channel: currentChannel,
                message: message,
                publishingModules: [PublishingModuleType.THREAD],
            });
        });
    }, [
        currentChannel,
        onBeforeSendVoiceMessage,
    ]);
    return sendMessage;
};

function getThreadMessageListParams(params) {
    return __assign({ prevResultSize: PREV_THREADS_FETCH_SIZE, nextResultSize: NEXT_THREADS_FETCH_SIZE, includeMetaArray: true }, params);
}
var useThreadFetchers = function (_a) {
    var isReactionEnabled = _a.isReactionEnabled, anchorMessage = _a.anchorMessage, staleParentMessage = _a.parentMessage, threadDispatcher = _a.threadDispatcher, logger = _a.logger, oldestMessageTimeStamp = _a.oldestMessageTimeStamp, latestMessageTimeStamp = _a.latestMessageTimeStamp, threadListState = _a.threadListState;
    var stores = useSendbirdStateContext().stores;
    var timestamp = (anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.createdAt) || 0;
    var initialize = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (callback) { return __awaiter(void 0, void 0, void 0, function () {
        var params, _a, threadedMessages_1, parentMessage, error_1;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (!stores.sdkStore.initialized || !staleParentMessage)
                        return [2 /*return*/];
                    threadDispatcher({
                        type: ThreadContextActionTypes.INITIALIZE_THREAD_LIST_START,
                        payload: null,
                    });
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, 3, , 4]);
                    params = getThreadMessageListParams({ includeReactions: isReactionEnabled });
                    logger.info('Thread | useGetThreadList: Initialize thread list start.', { timestamp: timestamp, params: params });
                    return [4 /*yield*/, staleParentMessage.getThreadedMessagesByTimestamp(timestamp, params)];
                case 2:
                    _a = _b.sent(), threadedMessages_1 = _a.threadedMessages, parentMessage = _a.parentMessage;
                    logger.info('Thread | useGetThreadList: Initialize thread list succeeded.', { staleParentMessage: staleParentMessage, threadedMessages: threadedMessages_1 });
                    threadDispatcher({
                        type: ThreadContextActionTypes.INITIALIZE_THREAD_LIST_SUCCESS,
                        payload: { parentMessage: parentMessage, anchorMessage: anchorMessage, threadedMessages: threadedMessages_1 },
                    });
                    setTimeout(function () { return callback === null || callback === void 0 ? void 0 : callback(threadedMessages_1); });
                    return [3 /*break*/, 4];
                case 3:
                    error_1 = _b.sent();
                    logger.info('Thread | useGetThreadList: Initialize thread list failed.', error_1);
                    threadDispatcher({
                        type: ThreadContextActionTypes.INITIALIZE_THREAD_LIST_FAILURE,
                        payload: error_1,
                    });
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); }, [stores.sdkStore.initialized, staleParentMessage, anchorMessage, isReactionEnabled]);
    var loadPrevious = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (callback) { return __awaiter(void 0, void 0, void 0, function () {
        var params, _a, threadedMessages_2, parentMessage, error_2;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (threadListState !== ThreadListStateTypes.INITIALIZED || oldestMessageTimeStamp === 0 || !staleParentMessage)
                        return [2 /*return*/];
                    threadDispatcher({
                        type: ThreadContextActionTypes.GET_PREV_MESSAGES_START,
                        payload: null,
                    });
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, 3, , 4]);
                    params = getThreadMessageListParams({ nextResultSize: 0, includeReactions: isReactionEnabled });
                    return [4 /*yield*/, staleParentMessage.getThreadedMessagesByTimestamp(oldestMessageTimeStamp, params)];
                case 2:
                    _a = _b.sent(), threadedMessages_2 = _a.threadedMessages, parentMessage = _a.parentMessage;
                    logger.info('Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.', { parentMessage: parentMessage, threadedMessages: threadedMessages_2 });
                    threadDispatcher({
                        type: ThreadContextActionTypes.GET_PREV_MESSAGES_SUCESS,
                        payload: { parentMessage: parentMessage, threadedMessages: threadedMessages_2 },
                    });
                    setTimeout(function () { return callback === null || callback === void 0 ? void 0 : callback(threadedMessages_2); });
                    return [3 /*break*/, 4];
                case 3:
                    error_2 = _b.sent();
                    logger.info('Thread | useGetPrevThreadsCallback: Fetch prev threads failed.', error_2);
                    threadDispatcher({
                        type: ThreadContextActionTypes.GET_PREV_MESSAGES_FAILURE,
                        payload: error_2,
                    });
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); }, [threadListState, oldestMessageTimeStamp, isReactionEnabled, staleParentMessage]);
    var loadNext = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (callback) { return __awaiter(void 0, void 0, void 0, function () {
        var params, _a, threadedMessages_3, parentMessage, error_3;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (threadListState !== ThreadListStateTypes.INITIALIZED || latestMessageTimeStamp === 0 || !staleParentMessage)
                        return [2 /*return*/];
                    threadDispatcher({
                        type: ThreadContextActionTypes.GET_NEXT_MESSAGES_START,
                        payload: null,
                    });
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, 3, , 4]);
                    params = getThreadMessageListParams({ prevResultSize: 0, includeReactions: isReactionEnabled });
                    return [4 /*yield*/, staleParentMessage.getThreadedMessagesByTimestamp(latestMessageTimeStamp, params)];
                case 2:
                    _a = _b.sent(), threadedMessages_3 = _a.threadedMessages, parentMessage = _a.parentMessage;
                    logger.info('Thread | useGetNextThreadsCallback: Fetch next threads succeeded.', { parentMessage: parentMessage, threadedMessages: threadedMessages_3 });
                    threadDispatcher({
                        type: ThreadContextActionTypes.GET_NEXT_MESSAGES_SUCESS,
                        payload: { parentMessage: parentMessage, threadedMessages: threadedMessages_3 },
                    });
                    setTimeout(function () { return callback === null || callback === void 0 ? void 0 : callback(threadedMessages_3); });
                    return [3 /*break*/, 4];
                case 3:
                    error_3 = _b.sent();
                    logger.info('Thread | useGetNextThreadsCallback: Fetch next threads failed.', error_3);
                    threadDispatcher({
                        type: ThreadContextActionTypes.GET_NEXT_MESSAGES_FAILURE,
                        payload: error_3,
                    });
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); }, [threadListState, latestMessageTimeStamp, isReactionEnabled, staleParentMessage]);
    return {
        initialize: initialize,
        loadPrevious: loadPrevious,
        loadNext: loadNext,
    };
};

var ThreadContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var ThreadProvider = function (props) {
    var _a, _b;
    var children = props.children, channelUrl = props.channelUrl, onHeaderActionClick = props.onHeaderActionClick, onMoveToParentMessage = props.onMoveToParentMessage, onBeforeSendUserMessage = props.onBeforeSendUserMessage, onBeforeSendFileMessage = props.onBeforeSendFileMessage, onBeforeSendVoiceMessage = props.onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage = props.onBeforeSendMultipleFilesMessage, onBeforeDownloadFileMessage = props.onBeforeDownloadFileMessage, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, 
    // User Profile
    disableUserProfile = props.disableUserProfile, renderUserProfile = props.renderUserProfile;
    var propsMessage = props === null || props === void 0 ? void 0 : props.message;
    var propsParentMessage = getParentMessageFrom(propsMessage);
    // Context from SendbirdProvider
    var globalStore = useSendbirdStateContext();
    var stores = globalStore.stores, config = globalStore.config;
    // // stores
    var sdkStore = stores.sdkStore, userStore = stores.userStore;
    var sdk = sdkStore.sdk;
    var user = userStore.user;
    var sdkInit = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.initialized;
    // // config
    var logger = config.logger, pubSub = config.pubSub, onUserProfileMessage = config.onUserProfileMessage;
    var isMentionEnabled = config.groupChannel.enableMention;
    var isReactionEnabled = config.groupChannel.enableReactions;
    // dux of Thread
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(Thread_context_reducer, Thread_context_initialState), threadStore = _c[0], threadDispatcher = _c[1];
    var currentChannel = threadStore.currentChannel, allThreadMessages = threadStore.allThreadMessages, localThreadMessages = threadStore.localThreadMessages, parentMessage = threadStore.parentMessage, channelState = threadStore.channelState, threadListState = threadStore.threadListState, parentMessageState = threadStore.parentMessageState, hasMorePrev = threadStore.hasMorePrev, hasMoreNext = threadStore.hasMoreNext, emojiContainer = threadStore.emojiContainer, isMuted = threadStore.isMuted, isChannelFrozen = threadStore.isChannelFrozen, currentUserId = threadStore.currentUserId, typingMembers = threadStore.typingMembers;
    // Initialization
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        threadDispatcher({
            type: ThreadContextActionTypes.INIT_USER_ID,
            payload: user === null || user === void 0 ? void 0 : user.userId,
        });
    }, [user]);
    context_useGetChannel({
        channelUrl: channelUrl,
        sdkInit: sdkInit,
        message: propsMessage,
    }, { sdk: sdk, logger: logger, threadDispatcher: threadDispatcher });
    useGetParentMessage({
        channelUrl: channelUrl,
        sdkInit: sdkInit,
        parentMessage: propsParentMessage,
    }, { sdk: sdk, logger: logger, threadDispatcher: threadDispatcher });
    useGetAllEmoji({ sdk: sdk }, { logger: logger, threadDispatcher: threadDispatcher });
    // Handle channel events
    context_useHandleChannelEvents({
        sdk: sdk,
        currentChannel: currentChannel,
    }, { logger: logger, threadDispatcher: threadDispatcher });
    useHandleThreadPubsubEvents({
        sdkInit: sdkInit,
        currentChannel: currentChannel,
        parentMessage: parentMessage,
    }, { logger: logger, pubSub: pubSub, threadDispatcher: threadDispatcher });
    var _d = useThreadFetchers({
        parentMessage: parentMessage,
        // anchorMessage should be null when parentMessage doesn't exist
        anchorMessage: (propsMessage === null || propsMessage === void 0 ? void 0 : propsMessage.messageId) !== (propsParentMessage === null || propsParentMessage === void 0 ? void 0 : propsParentMessage.messageId) ? propsMessage || undefined : undefined,
        logger: logger,
        isReactionEnabled: isReactionEnabled,
        threadDispatcher: threadDispatcher,
        threadListState: threadListState,
        oldestMessageTimeStamp: ((_a = allThreadMessages[0]) === null || _a === void 0 ? void 0 : _a.createdAt) || 0,
        latestMessageTimeStamp: ((_b = allThreadMessages[allThreadMessages.length - 1]) === null || _b === void 0 ? void 0 : _b.createdAt) || 0,
    }), initialize = _d.initialize, loadPrevious = _d.loadPrevious, loadNext = _d.loadNext;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (stores.sdkStore.initialized && config.isOnline) {
            initialize();
        }
    }, [stores.sdkStore.initialized, config.isOnline, initialize]);
    var toggleReaction = context_useToggleReactionCallback({ currentChannel: currentChannel }, { logger: logger });
    // Send Message Hooks
    var sendMessage = useSendUserMessageCallback({
        isMentionEnabled: isMentionEnabled,
        currentChannel: currentChannel,
        onBeforeSendUserMessage: onBeforeSendUserMessage,
    }, {
        logger: logger,
        pubSub: pubSub,
        threadDispatcher: threadDispatcher,
    });
    var sendFileMessage = context_useSendFileMessageCallback({
        currentChannel: currentChannel,
        onBeforeSendFileMessage: onBeforeSendFileMessage,
    }, {
        logger: logger,
        pubSub: pubSub,
        threadDispatcher: threadDispatcher,
    });
    var sendVoiceMessage = context_useSendVoiceMessageCallback({
        currentChannel: currentChannel,
        onBeforeSendVoiceMessage: onBeforeSendVoiceMessage,
    }, {
        logger: logger,
        pubSub: pubSub,
        threadDispatcher: threadDispatcher,
    });
    var sendMultipleFilesMessage = useSendMultipleFilesMessage({
        currentChannel: currentChannel,
        onBeforeSendMultipleFilesMessage: onBeforeSendMultipleFilesMessage,
        publishingModules: [PublishingModuleType.THREAD],
    }, {
        logger: logger,
        pubSub: pubSub,
    })[0];
    var resendMessage = context_useResendMessageCallback({
        currentChannel: currentChannel,
    }, { logger: logger, pubSub: pubSub, threadDispatcher: threadDispatcher });
    var updateMessage = context_useUpdateMessageCallback({
        currentChannel: currentChannel,
        isMentionEnabled: isMentionEnabled,
    }, { logger: logger, pubSub: pubSub, threadDispatcher: threadDispatcher });
    var deleteMessage = context_useDeleteMessageCallback({ currentChannel: currentChannel, threadDispatcher: threadDispatcher }, { logger: logger });
    // memo
    var nicknamesMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return ((config.groupChannel.replyType !== 'none' && currentChannel)
        ? bundle_sX9kxwmI_getNicknamesMapFromMembers(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members)
        : new Map()); }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadContext.Provider, { value: {
            // ThreadProviderProps
            channelUrl: channelUrl,
            message: propsMessage,
            onHeaderActionClick: onHeaderActionClick,
            onMoveToParentMessage: onMoveToParentMessage,
            isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled,
            onBeforeDownloadFileMessage: onBeforeDownloadFileMessage,
            // ThreadContextInitialState
            currentChannel: currentChannel,
            allThreadMessages: allThreadMessages,
            localThreadMessages: localThreadMessages,
            parentMessage: parentMessage,
            channelState: channelState,
            threadListState: threadListState,
            parentMessageState: parentMessageState,
            hasMorePrev: hasMorePrev,
            hasMoreNext: hasMoreNext,
            emojiContainer: emojiContainer,
            // hooks
            fetchPrevThreads: loadPrevious,
            fetchNextThreads: loadNext,
            toggleReaction: toggleReaction,
            sendMessage: sendMessage,
            sendFileMessage: sendFileMessage,
            sendVoiceMessage: sendVoiceMessage,
            sendMultipleFilesMessage: sendMultipleFilesMessage,
            resendMessage: resendMessage,
            updateMessage: updateMessage,
            deleteMessage: deleteMessage,
            // context
            nicknamesMap: nicknamesMap,
            isMuted: isMuted,
            isChannelFrozen: isChannelFrozen,
            currentUserId: currentUserId,
            typingMembers: typingMembers,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { disableUserProfile: disableUserProfile !== null && disableUserProfile !== void 0 ? disableUserProfile : !config.common.enableUsingDefaultUserProfile, renderUserProfile: renderUserProfile, onUserProfileMessage: onUserProfileMessage }, children)));
};
var useThreadContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ThreadContext);
    if (!context)
        throw new Error('ThreadContext not found. Use within the Thread module');
    return context;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-D9dyuFq0.js









var RemoveMessage = function (props) {
    var _a, _b;
    var onCancel = props.onCancel, onSubmit = props.onSubmit, message = props.message;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var deleteMessage = useThreadContext().deleteMessage;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { type: ButtonTypes.DANGER, disabled: ((_b = (_a = message.threadInfo) === null || _a === void 0 ? void 0 : _a.replyCount) !== null && _b !== void 0 ? _b : 0) > 0, onCancel: onCancel, onSubmit: function () {
            deleteMessage(message).then(function () {
                onCancel === null || onCancel === void 0 ? void 0 : onCancel();
                onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit();
            });
        }, submitText: stringSet.MESSAGE_MENU__DELETE, titleText: getModalDeleteMessageTitle(stringSet, message) }));
};


//# sourceMappingURL=bundle-D9dyuFq0.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ParentMessageInfoItem.js





































































function ParentMessageInfoItem(_a) {
    var _this = this;
    var _b, _c, _d, _e, _f, _g, _h, _j;
    var className = _a.className, message = _a.message, showFileViewer = _a.showFileViewer, _k = _a.onBeforeDownloadFileMessage, onBeforeDownloadFileMessage = _k === void 0 ? null : _k;
    var _l = useSendbirdStateContext(), stores = _l.stores, config = _l.config, eventHandlers = _l.eventHandlers;
    var logger = config.logger;
    var onPressUserProfileHandler = (_b = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.reaction) === null || _b === void 0 ? void 0 : _b.onPressUserProfile;
    var currentUserId = (_d = (_c = stores === null || stores === void 0 ? void 0 : stores.userStore) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.userId;
    var stringSet = useLocalization().stringSet;
    var _m = useThreadContext(), currentChannel = _m.currentChannel, emojiContainer = _m.emojiContainer, nicknamesMap = _m.nicknamesMap, toggleReaction = _m.toggleReaction;
    var isMobile = useMediaQueryContext().isMobile;
    var isReactionEnabled = config.groupChannel.enableReactions;
    var isMentionEnabled = config.groupChannel.enableMention;
    var threadMessageKindKey = useThreadMessageKindKeySelector({
        threadMessageKind: ThreadMessageKind.PARENT,
        isMobile: isMobile,
    });
    // For MultipleFilesMessage only.
    var statefulFileInfoList = useFileInfoListWithUploaded(message);
    var isMentionedMessage = isMentionEnabled
        && ((_e = message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate) === null || _e === void 0 ? void 0 : _e.length) > 0
        && (message === null || message === void 0 ? void 0 : message.mentionedUsers)
        && message.mentionedUsers.length > 0;
    // Emoji reactions
    var isReactionActivated = isReactionEnabled
        && config.groupChannel.replyType === 'thread'
        && ((_f = message === null || message === void 0 ? void 0 : message.reactions) === null || _f === void 0 ? void 0 : _f.length) > 0;
    var tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a;
        if (isMentionedMessage) {
            return tokenizeMessage({
                mentionedUsers: (_a = message === null || message === void 0 ? void 0 : message.mentionedUsers) !== null && _a !== void 0 ? _a : undefined,
                messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,
            });
        }
        return tokenizeMessage({
            messageText: message === null || message === void 0 ? void 0 : message.message,
        });
    }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);
    // Only for the FileMessageItemBody
    var downloadFileWithUrl = function () {
        if (isFileMessage(message))
            openURL(message.url);
    };
    var handleOnClickTextButton = onBeforeDownloadFileMessage
        ? function () { return __awaiter(_this, void 0, void 0, function () {
            var allowDownload, err_1;
            var _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(message.messageType === 'file')) return [3 /*break*/, 4];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, onBeforeDownloadFileMessage({ message: message })];
                    case 2:
                        allowDownload = _c.sent();
                        if (allowDownload) {
                            downloadFileWithUrl();
                        }
                        else {
                            (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'ParentMessageInfoItem: Not allowed to download.');
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _c.sent();
                        (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'ParentMessageInfoItem: Error occurred while determining download continuation:', err_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        }); }
        : downloadFileWithUrl;
    // Thumbnail mesage
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isImageRendered = _o[0], setImageRendered = _o[1];
    var thumbnailUrl = ((_g = message === null || message === void 0 ? void 0 : message.thumbnails) === null || _g === void 0 ? void 0 : _g.length) > 0
        ? (_h = message === null || message === void 0 ? void 0 : message.thumbnails[0]) === null || _h === void 0 ? void 0 : _h.url : '';
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item ".concat(className) },
        isUserMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-parent-message-info-item__text-message", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, { tokens: tokens }),
            isEditedMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-parent-message-info-item__text-message edited", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, " ".concat(stringSet.MESSAGE_EDITED, " "))))),
        // Instead of the FileMessageItemBody component
        (getUIKitMessageType(message) === getUIKitMessageTypes().FILE) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__file-message" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__file-message__file-icon" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-parent-message-info-item__file-message__file-icon__icon", type: {
                        IMAGE: IconTypes.PHOTO,
                        VIDEO: IconTypes.PLAY,
                        AUDIO: IconTypes.FILE_AUDIO,
                        GIF: IconTypes.GIF,
                        OTHERS: IconTypes.FILE_DOCUMENT,
                    }[getUIKitFileType(message === null || message === void 0 ? void 0 : message.type)], fillColor: IconColors.PRIMARY, width: "24px", height: "24px" })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "sendbird-parent-message-info-item__file-message__file-name", onClick: handleOnClickTextButton, color: bundle_h8I0AuUK_Colors.ONBACKGROUND_1 },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-parent-message-info-item__file-message__file-name__text", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, truncateString((message === null || message === void 0 ? void 0 : message.name) || (message === null || message === void 0 ? void 0 : message.url), 30))))),
        isMultipleFilesMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MultipleFilesMessageItemBody, { className: "sendbird-parent-message-info-item__multiple-files-message-wrapper", message: message, isByMe: false, isReactionEnabled: isReactionEnabled, threadMessageKindKey: threadMessageKindKey, statefulFileInfoList: statefulFileInfoList, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage })),
        isVoiceMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__voice-message" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageItemBody, { className: "sendbird-parent-message-info-item__voice-message__item", message: message, channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url, isByMe: false, isReactionEnabled: isReactionEnabled }))),
        isThumbnailMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__thumbnail-message", onClick: function () {
                if (isSentMessage(message)) {
                    showFileViewer === null || showFileViewer === void 0 ? void 0 : showFileViewer(true);
                }
            } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-parent-message-info-item__thumbnail-message__thumbnail", url: thumbnailUrl || (message === null || message === void 0 ? void 0 : message.url) || (message === null || message === void 0 ? void 0 : message.plainUrl), alt: message === null || message === void 0 ? void 0 : message.type, width: "200px", height: "148px", onLoad: function () { setImageRendered(true); }, placeHolder: function (_a) {
                    var style = _a.style;
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__thumbnail-message__placeholder", style: style },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__thumbnail-message__placeholder__icon" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: "34px", height: "34px" }))));
                } }),
            (isVideoMessage(message) && !thumbnailUrl) && !isImageRendered && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { className: "sendbird-parent-message-info-item__thumbnail-message__video" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", { src: (message === null || message === void 0 ? void 0 : message.url) || (message === null || message === void 0 ? void 0 : message.plainUrl), type: message === null || message === void 0 ? void 0 : message.type }))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__thumbnail-message__image-cover" }),
            (isVideoMessage(message) || isGifMessage(message)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__thumbnail-message__icon-wrapper" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__thumbnail-message__icon-wrapper__icon" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.GIF, fillColor: IconColors.ON_BACKGROUND_2, width: "34px", height: "34px" })))))),
        getUIKitMessageType(message) === ((_j = getUIKitMessageTypes === null || getUIKitMessageTypes === void 0 ? void 0 : getUIKitMessageTypes()) === null || _j === void 0 ? void 0 : _j.UNKNOWN) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info-item__unknown-message" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-parent-message-info-item__unknown-message__header", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.UNKNOWN__UNKNOWN_MESSAGE_TYPE),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-parent-message-info-item__unknown-message__description", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet.UNKNOWN__CANNOT_READ_MESSAGE))),
        isReactionActivated && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info__reactions" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactions, { userId: currentUserId, message: message, channel: currentChannel, isByMe: false, emojiContainer: emojiContainer, memberNicknamesMap: nicknamesMap, toggleReaction: toggleReaction, onPressUserProfile: onPressUserProfileHandler })))));
}


//# sourceMappingURL=ParentMessageInfoItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-U_oIvkG2.js





var bundle_U_oIvkG2_SuggestedMentionList = function (props) {
    var currentChannel = useThreadContext().currentChannel;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionListView, __assign({}, props, { currentChannel: currentChannel })));
};


//# sourceMappingURL=bundle-U_oIvkG2.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ParentMessageInfo.js

























































































function ParentMessageInfo(_a) {
    var _this = this;
    var _b, _c, _d, _e, _f, _g;
    var className = _a.className;
    var _h = useSendbirdStateContext(), stores = _h.stores, config = _h.config;
    var isOnline = config.isOnline, userMention = config.userMention, logger = config.logger, groupChannel = config.groupChannel;
    var userId = (_c = (_b = stores.userStore.user) === null || _b === void 0 ? void 0 : _b.userId) !== null && _c !== void 0 ? _c : '';
    var dateLocale = useLocalization().dateLocale;
    var _j = useThreadContext(), currentChannel = _j.currentChannel, parentMessage = _j.parentMessage, allThreadMessages = _j.allThreadMessages, emojiContainer = _j.emojiContainer, toggleReaction = _j.toggleReaction, updateMessage = _j.updateMessage, deleteMessage = _j.deleteMessage, onMoveToParentMessage = _j.onMoveToParentMessage, onHeaderActionClick = _j.onHeaderActionClick, isMuted = _j.isMuted, isChannelFrozen = _j.isChannelFrozen, onBeforeDownloadFileMessage = _j.onBeforeDownloadFileMessage;
    var isMobile = useMediaQueryContext().isMobile;
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showRemove = _k[0], setShowRemove = _k[1];
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), supposedHover = _l[0], setSupposedHover = _l[1];
    var _m = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showFileViewer = _m[0], setShowFileViewer = _m[1];
    var isReactionEnabled = getIsReactionEnabled({
        channel: currentChannel,
        config: config,
    });
    var isMentionEnabled = groupChannel.enableMention;
    var replyType = getCaseResolvedReplyType(groupChannel.replyType).upperCase;
    var isByMe = userId === parentMessage.sender.userId;
    // Mobile
    var mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMobileMenu = _o[0], setShowMobileMenu = _o[1];
    var longPress = useLongPress({
        onLongPress: function () {
            if (isMobile) {
                setShowMobileMenu(true);
            }
        },
    }, {
        shouldPreventDefault: false,
    });
    // Edit message
    var _p = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showEditInput = _p[0], setShowEditInput = _p[1];
    var disabled = !isOnline || isMuted || isChannelFrozen && !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR);
    // Mention
    var editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), mentionNickname = _q[0], setMentionNickname = _q[1];
    var _r = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUsers = _r[0], setMentionedUsers = _r[1];
    var _s = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUserIds = _s[0], setMentionedUserIds = _s[1];
    var _t = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), messageInputEvent = _t[0], setMessageInputEvent = _t[1];
    var _u = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), selectedUser = _u[0], setSelectedUser = _u[1];
    var _v = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionSuggestedUsers = _v[0], setMentionSuggestedUsers = _v[1];
    var displaySuggestedMentionList = isOnline
        && isMentionEnabled
        && mentionNickname.length > 0
        && !isMuted
        && !(isChannelFrozen && !(currentChannel.myRole === Role.OPERATOR));
    var mentionNodes = useDirtyGetMentions({ ref: editMessageInputRef }, { logger: logger });
    var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setMentionedUsers(mentionedUsers.filter(function (_a) {
            var userId = _a.userId;
            var i = mentionedUserIds.indexOf(userId);
            if (i < 0) {
                return false;
            }
            else {
                mentionedUserIds.splice(i, 1);
                return true;
            }
        }));
    }, [mentionedUserIds]);
    var handleOnDownloadClick = function (e) { return __awaiter(_this, void 0, void 0, function () {
        var allowDownload, err_1;
        var _a, _b;
        return __generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    if (!onBeforeDownloadFileMessage)
                        return [2 /*return*/];
                    _c.label = 1;
                case 1:
                    _c.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, onBeforeDownloadFileMessage({ message: parentMessage })];
                case 2:
                    allowDownload = _c.sent();
                    if (!allowDownload) {
                        e.preventDefault();
                        (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'ParentMessageInfo: Not allowed to download.');
                    }
                    return [3 /*break*/, 4];
                case 3:
                    err_1 = _c.sent();
                    (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'ParentMessageInfo: Error occurred while determining download continuation:', err_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    }); };
    // User Profile
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _w = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _w.disableUserProfile, renderUserProfile = _w.renderUserProfile;
    if (showEditInput && ((_d = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.isUserMessage) === null || _d === void 0 ? void 0 : _d.call(parentMessage))) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            displaySuggestedMentionList && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_U_oIvkG2_SuggestedMentionList, { className: "parent-message-info--suggested-mention-list", targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : undefined, 
                // renderUserMentionItem={renderUserMentionItem}
                onUserItemClick: function (user) {
                    if (user) {
                        setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));
                    }
                    setMentionNickname('');
                    setSelectedUser(user);
                    setMessageInputEvent(null);
                }, onFocusItemChange: function () {
                    setMessageInputEvent(null);
                }, onFetchUsers: function (users) {
                    setMentionSuggestedUsers(users);
                }, ableAddMention: ableMention, maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount, maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { channel: currentChannel, isEdit: true, disabled: disabled, ref: editMessageInputRef, mentionSelectedUser: selectedUser, isMentionEnabled: isMentionEnabled, message: parentMessage, onStartTyping: function () {
                    var _a;
                    (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.startTyping) === null || _a === void 0 ? void 0 : _a.call(currentChannel);
                }, onUpdateMessage: function (_a) {
                    var _b;
                    var messageId = _a.messageId, message = _a.message, mentionTemplate = _a.mentionTemplate;
                    updateMessage({
                        messageId: messageId,
                        message: message,
                        mentionedUsers: mentionedUsers,
                        mentionTemplate: mentionTemplate,
                    });
                    setShowEditInput(false);
                    (_b = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _b === void 0 ? void 0 : _b.call(currentChannel);
                }, onCancelEdit: function () {
                    var _a;
                    setMentionNickname('');
                    setMentionedUsers([]);
                    setMentionedUserIds([]);
                    setMentionSuggestedUsers([]);
                    setShowEditInput(false);
                    (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _a === void 0 ? void 0 : _a.call(currentChannel);
                }, onUserMentioned: function (user) {
                    if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
                        setSelectedUser(null);
                        setMentionNickname('');
                    }
                }, onMentionStringChange: function (mentionText) {
                    setMentionNickname(mentionText);
                }, onMentionedUserIdsUpdated: function (userIds) {
                    setMentionedUserIds(userIds);
                }, onKeyDown: function (e) {
                    if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0
                        && ((e.key === MessageInputKeys.Enter && ableMention) || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
                        setMessageInputEvent(e);
                        return true;
                    }
                    return false;
                } })));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: "sendbird-parent-message-info ".concat(className) }, (isMobile) ? __assign({}, longPress) : {}, { ref: mobileMenuRef }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) {
                var _a, _b, _c;
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-parent-message-info__sender", ref: avatarRef, src: ((_b = (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members) === null || _a === void 0 ? void 0 : _a.find(function (m) { var _a; return (m === null || m === void 0 ? void 0 : m.userId) === ((_a = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender) === null || _a === void 0 ? void 0 : _a.userId); })) === null || _b === void 0 ? void 0 : _b.profileUrl)
                        || ((_c = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender) === null || _c === void 0 ? void 0 : _c.profileUrl), alt: "thread message sender", width: "40px", height: "40px", onClick: function () {
                        if (!disableUserProfile) {
                            toggleDropdown();
                        }
                    } }));
            }, menuItems: function (closeDropdown) { return (renderUserProfile
                ? renderUserProfile({
                    user: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender,
                    close: closeDropdown,
                    currentUserId: userId,
                    avatarRef: avatarRef,
                })
                : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender, currentUserId: userId, onSuccess: closeDropdown })))); } }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info__content" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-parent-message-info__content__info" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: isReactionEnabled
                        ? 'sendbird-parent-message-info__content__info__sender-name--use-reaction'
                        : 'sendbird-parent-message-info__content__info__sender-name', type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, ((_f = (_e = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members) === null || _e === void 0 ? void 0 : _e.find(function (member) { var _a; return (member === null || member === void 0 ? void 0 : member.userId) === ((_a = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender) === null || _a === void 0 ? void 0 : _a.userId); })) === null || _f === void 0 ? void 0 : _f.nickname) || (getSenderName === null || getSenderName === void 0 ? void 0 : getSenderName(parentMessage))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-parent-message-info__content__info__sent-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, format((parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.createdAt) || 0, 'p', { locale: dateLocale }))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParentMessageInfoItem, { message: parentMessage, showFileViewer: setShowFileViewer, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage })),
        !isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageMenu, { className: classnames('sendbird-parent-message-info__context-menu', isReactionEnabled && 'use-reaction', supposedHover && 'sendbird-mouse-hover'), channel: currentChannel, message: parentMessage, isByMe: userId === ((_g = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender) === null || _g === void 0 ? void 0 : _g.userId), disableDeleteMessage: allThreadMessages.length > 0, replyType: replyType, showEdit: setShowEditInput, showRemove: setShowRemove, setSupposedHover: setSupposedHover, onMoveToParentMessage: function () {
                onMoveToParentMessage === null || onMoveToParentMessage === void 0 ? void 0 : onMoveToParentMessage({ message: parentMessage, channel: currentChannel });
            }, deleteMessage: deleteMessage })),
        (isReactionEnabled && !isMobile) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageEmojiMenu, { className: classnames('sendbird-parent-message-info__reaction-menu', supposedHover && 'sendbird-mouse-hover'), message: parentMessage, userId: userId, emojiContainer: emojiContainer, toggleReaction: toggleReaction, setSupposedHover: setSupposedHover })),
        showRemove && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessage, { onCancel: function () { return setShowRemove(false); }, onSubmit: function () {
                onHeaderActionClick === null || onHeaderActionClick === void 0 ? void 0 : onHeaderActionClick();
            }, message: parentMessage })),
        showFileViewer && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewer, { message: parentMessage, onClose: function () { return setShowFileViewer(false); }, onDelete: function () {
                deleteMessage(parentMessage)
                    .then(function () {
                    setShowFileViewer(false);
                });
            }, onDownloadClick: handleOnDownloadClick })),
        showMobileMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileMenu, { parentRef: mobileMenuRef, channel: currentChannel, message: parentMessage, userId: userId, replyType: replyType, hideMenu: function () {
                setShowMobileMenu(false);
            }, deleteMessage: deleteMessage, deleteMenuState: (allThreadMessages === null || allThreadMessages === void 0 ? void 0 : allThreadMessages.length) === 0
                ? 'ACTIVE'
                : 'HIDE', isReactionEnabled: isReactionEnabled, isByMe: isByMe, emojiContainer: emojiContainer, showEdit: setShowEditInput, showRemove: setShowRemove, toggleReaction: toggleReaction, isOpenedFromThread: true, onDownloadClick: handleOnDownloadClick }))));
}


//# sourceMappingURL=ParentMessageInfo.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadHeader.js














function ThreadHeader(_a) {
    var className = _a.className, channelName = _a.channelName, renderActionIcon = _a.renderActionIcon, onActionIconClick = _a.onActionIconClick, onChannelNameClick = _a.onChannelNameClick;
    var stringSet = useLocalization().stringSet;
    var MemoizedActionIcon = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (typeof renderActionIcon === 'function' && onActionIconClick) {
            return renderActionIcon({ onActionIconClick: onActionIconClick });
        }
        return null;
    }, [renderActionIcon]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1, { className: "sendbird-thread-header ".concat(className), renderMiddle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.Title, { title: stringSet.THREAD__HEADER_TITLE, subtitle: channelName, onClickSubtitle: onChannelNameClick })); }, renderRight: function () { return (MemoizedActionIcon || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread-header__action" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Header$1.IconButton, { onClick: function (e) { return onActionIconClick(e); }, type: IconTypes.CLOSE, color: IconColors.ON_BACKGROUND_1 })))); } }));
}


//# sourceMappingURL=ThreadHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadListItem.js


































































































function ThreadListItemContent(_a) {
    var _this = this;
    var _b, _c, _d, _e, _f;
    var className = _a.className, userId = _a.userId, channel = _a.channel, message = _a.message, _g = _a.disabled, disabled = _g === void 0 ? false : _g, _h = _a.chainTop, chainTop = _h === void 0 ? false : _h, _j = _a.chainBottom, chainBottom = _j === void 0 ? false : _j, _k = _a.isMentionEnabled, isMentionEnabled = _k === void 0 ? false : _k, _l = _a.isReactionEnabled, isReactionEnabled = _l === void 0 ? false : _l, _m = _a.disableQuoteMessage, disableQuoteMessage = _m === void 0 ? false : _m, replyType = _a.replyType, nicknamesMap = _a.nicknamesMap, emojiContainer = _a.emojiContainer, showEdit = _a.showEdit, showRemove = _a.showRemove, showFileViewer = _a.showFileViewer, resendMessage = _a.resendMessage, toggleReaction = _a.toggleReaction, onReplyInThread = _a.onReplyInThread;
    var messageTypes = getUIKitMessageTypes();
    var isMobile = useMediaQueryContext().isMobile;
    var dateLocale = useLocalization().dateLocale;
    var _o = (useSendbirdStateContext === null || useSendbirdStateContext === void 0 ? void 0 : useSendbirdStateContext()) || {}, config = _o.config, eventHandlers = _o.eventHandlers;
    var logger = config.logger;
    var onPressUserProfileHandler = (_b = eventHandlers === null || eventHandlers === void 0 ? void 0 : eventHandlers.reaction) === null || _b === void 0 ? void 0 : _b.onPressUserProfile;
    var _p = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), supposedHover = _p[0], setSupposedHover = _p[1];
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _q.disableUserProfile, renderUserProfile = _q.renderUserProfile;
    var _r = useThreadContext(), deleteMessage = _r.deleteMessage, onBeforeDownloadFileMessage = _r.onBeforeDownloadFileMessage;
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var isByMe = (userId === ((_c = message === null || message === void 0 ? void 0 : message.sender) === null || _c === void 0 ? void 0 : _c.userId))
        || ((message === null || message === void 0 ? void 0 : message.sendingStatus) === 'pending')
        || ((message === null || message === void 0 ? void 0 : message.sendingStatus) === 'failed');
    var useReplying = !!((replyType === 'QUOTE_REPLY' || replyType === 'THREAD')
        && (message === null || message === void 0 ? void 0 : message.parentMessageId) && (message === null || message === void 0 ? void 0 : message.parentMessage)
        && !disableQuoteMessage);
    var supposedHoverClassName = supposedHover ? 'sendbird-mouse-hover' : '';
    var isReactionEnabledInChannel = isReactionEnabled && !(channel === null || channel === void 0 ? void 0 : channel.isEphemeral);
    var isOgMessageEnabledInGroupChannel = channel.isGroupChannel() && config.groupChannel.enableOgtag;
    // Mobile
    var mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _s = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMobileMenu = _s[0], setShowMobileMenu = _s[1];
    var longPress = useLongPress({
        onLongPress: function () {
            if (isMobile) {
                setShowMobileMenu(true);
            }
        },
    }, {
        shouldPreventDefault: false,
    });
    var threadMessageKindKey = useThreadMessageKindKeySelector({
        threadMessageKind: ThreadMessageKind.CHILD,
        isMobile: isMobile,
    });
    // For MultipleFilesMessage only.
    var statefulFileInfoList = useFileInfoListWithUploaded(message);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-thread-list-item-content', className, isByMe ? 'outgoing' : 'incoming'), ref: mobileMenuRef },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-thread-list-item-content__left', isReactionEnabledInChannel && 'use-reaction', isByMe ? 'outgoing' : 'incoming') },
            (!isByMe && !chainBottom) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) {
                    var _a, _b, _c;
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-thread-list-item-content__left__avatar", src: ((_b = (_a = channel === null || channel === void 0 ? void 0 : channel.members) === null || _a === void 0 ? void 0 : _a.find(function (member) { var _a; return (member === null || member === void 0 ? void 0 : member.userId) === ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId); })) === null || _b === void 0 ? void 0 : _b.profileUrl) || ((_c = message === null || message === void 0 ? void 0 : message.sender) === null || _c === void 0 ? void 0 : _c.profileUrl) || '', ref: avatarRef, width: "28px", height: "28px", onClick: function () {
                            if (!disableUserProfile) {
                                toggleDropdown === null || toggleDropdown === void 0 ? void 0 : toggleDropdown();
                            }
                        } }));
                }, menuItems: function (closeDropdown) { return (renderUserProfile
                    ? renderUserProfile({
                        user: message === null || message === void 0 ? void 0 : message.sender,
                        close: closeDropdown,
                        currentUserId: userId,
                        avatarRef: avatarRef,
                    })
                    : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: message === null || message === void 0 ? void 0 : message.sender, onSuccess: closeDropdown })))); } })),
            (isByMe && !isMobile) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-thread-list-item-content-menu', isReactionEnabledInChannel && 'use-reaction', isByMe ? 'outgoing' : 'incoming', supposedHoverClassName) },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageMenu, { className: "sendbird-thread-list-item-content-menu__normal-menu", channel: channel, message: message, isByMe: isByMe, replyType: replyType, disabled: disabled, showEdit: showEdit, showRemove: showRemove, resendMessage: resendMessage, setSupposedHover: setSupposedHover, onReplyInThread: onReplyInThread, deleteMessage: deleteMessage }),
                isReactionEnabledInChannel && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageEmojiMenu, { className: "sendbird-thread-list-item-content-menu__reaction-menu", message: message, userId: userId, emojiContainer: emojiContainer, toggleReaction: toggleReaction, setSupposedHover: setSupposedHover }))))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: "sendbird-thread-list-item-content__middle" }, (isMobile) ? __assign({}, longPress) : {}),
            (!isByMe && !chainTop && !useReplying) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-thread-list-item-content__middle__sender-name", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, ((_e = (_d = channel === null || channel === void 0 ? void 0 : channel.members) === null || _d === void 0 ? void 0 : _d.find(function (member) { var _a; return (member === null || member === void 0 ? void 0 : member.userId) === ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId); })) === null || _e === void 0 ? void 0 : _e.nickname)
                || getSenderName(message)
            // TODO: Divide getting profileUrl logic to utils
            )),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-thread-list-item-content__middle__body-container']) },
                (isByMe && !chainBottom) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName(['sendbird-thread-list-item-content__middle__body-container__created-at', 'left', supposedHoverClassName]) },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread-list-item-content__middle__body-container__created-at__component-container" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageStatus, { message: message, channel: channel })))),
                isOgMessageEnabledInGroupChannel && isOGMessage(message)
                    ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OGMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, isByMe: isByMe, isMentionEnabled: isMentionEnabled, isReactionEnabled: isReactionEnabledInChannel })) : isTextMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, isByMe: isByMe, isMentionEnabled: isMentionEnabled, isReactionEnabled: isReactionEnabledInChannel })),
                isVoiceMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, channelUrl: channel === null || channel === void 0 ? void 0 : channel.url, isByMe: isByMe, isReactionEnabled: isReactionEnabledInChannel })),
                (getUIKitMessageType(message) === messageTypes.FILE) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, isByMe: isByMe, isReactionEnabled: isReactionEnabledInChannel, truncateLimit: isByMe ? 18 : 14, onBeforeDownloadFileMessage: onBeforeDownloadFileMessage })),
                isMultipleFilesMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MultipleFilesMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, isByMe: isByMe, isReactionEnabled: isReactionEnabled, threadMessageKindKey: threadMessageKindKey, statefulFileInfoList: statefulFileInfoList })),
                (isThumbnailMessage(message)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThumbnailMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, isByMe: isByMe, isReactionEnabled: isReactionEnabledInChannel, showFileViewer: showFileViewer, style: {
                        width: isMobile ? '100%' : '200px',
                        height: '148px',
                    } })),
                (getUIKitMessageType(message) === messageTypes.UNKNOWN) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnknownMessageItemBody, { className: "sendbird-thread-list-item-content__middle__message-item-body", message: message, isByMe: isByMe, isReactionEnabled: isReactionEnabledInChannel })),
                (isReactionEnabledInChannel && ((_f = message === null || message === void 0 ? void 0 : message.reactions) === null || _f === void 0 ? void 0 : _f.length) > 0) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: getClassName([
                        'sendbird-thread-list-item-content-reactions',
                        (!isByMe
                            || isThumbnailMessage(message)
                            || (isOgMessageEnabledInGroupChannel && isOGMessage(message))
                            || isMultipleFilesMessage(message)) ? '' : 'primary',
                    ]) },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactions, { userId: userId, message: message, channel: channel, isByMe: isByMe, emojiContainer: emojiContainer, memberNicknamesMap: nicknamesMap, toggleReaction: toggleReaction, onPressUserProfile: onPressUserProfileHandler }))),
                (!isByMe && !chainBottom) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: getClassName(['sendbird-thread-list-item-content__middle__body-container__created-at', 'right', supposedHoverClassName]), type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, 'p', {
                    locale: dateLocale,
                }))))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-thread-list-item-content__right', chainTop && 'chain-top', isByMe ? 'outgoing' : 'incoming') }, (!isByMe && !isMobile) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread-list-item-content-menu ".concat(supposedHoverClassName) },
            isReactionEnabledInChannel && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageEmojiMenu, { className: "sendbird-thread-list-item-content-menu__reaction-menu", message: message, userId: userId, emojiContainer: emojiContainer, toggleReaction: toggleReaction, setSupposedHover: setSupposedHover })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageMenu, { className: "sendbird-thread-list-item-content-menu__normal-menu", channel: channel, message: message, isByMe: isByMe, replyType: replyType, disabled: disabled, showRemove: showRemove, resendMessage: resendMessage, setSupposedHover: setSupposedHover, onReplyInThread: onReplyInThread, deleteMessage: deleteMessage })))),
        showMobileMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileMenu, { parentRef: mobileMenuRef, channel: channel, message: message, userId: userId, replyType: replyType, hideMenu: function () {
                setShowMobileMenu(false);
            }, isReactionEnabled: isReactionEnabled, isByMe: isByMe, emojiContainer: emojiContainer, showEdit: showEdit, showRemove: showRemove, toggleReaction: toggleReaction, isOpenedFromThread: true, deleteMessage: deleteMessage, onDownloadClick: function (e) { return __awaiter(_this, void 0, void 0, function () {
                var allowDownload, err_1;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!onBeforeDownloadFileMessage)
                                return [2 /*return*/];
                            _c.label = 1;
                        case 1:
                            _c.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, onBeforeDownloadFileMessage({ message: message })];
                        case 2:
                            allowDownload = _c.sent();
                            if (!allowDownload) {
                                e.preventDefault();
                                (_a = logger === null || logger === void 0 ? void 0 : logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'ThreadListItemContent: Not allowed to download.');
                            }
                            return [3 /*break*/, 4];
                        case 3:
                            err_1 = _c.sent();
                            (_b = logger === null || logger === void 0 ? void 0 : logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'ThreadListItemContent: Error occurred while determining download continuation:', err_1);
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            }); } }))));
}

function ThreadListItem(_a) {
    var _this = this;
    var _b, _c, _d, _e;
    var className = _a.className, message = _a.message, chainTop = _a.chainTop, chainBottom = _a.chainBottom, hasSeparator = _a.hasSeparator, renderCustomSeparator = _a.renderCustomSeparator, handleScroll = _a.handleScroll;
    var _f = useSendbirdStateContext(), stores = _f.stores, config = _f.config;
    var isOnline = config.isOnline, userMention = config.userMention, logger = config.logger, groupChannel = config.groupChannel;
    var userId = (_c = (_b = stores === null || stores === void 0 ? void 0 : stores.userStore) === null || _b === void 0 ? void 0 : _b.user) === null || _c === void 0 ? void 0 : _c.userId;
    var _g = useLocalization(), dateLocale = _g.dateLocale, stringSet = _g.stringSet;
    var threadContext = useThreadContext === null || useThreadContext === void 0 ? void 0 : useThreadContext();
    var currentChannel = threadContext.currentChannel, nicknamesMap = threadContext.nicknamesMap, emojiContainer = threadContext.emojiContainer, toggleReaction = threadContext.toggleReaction, threadListState = threadContext.threadListState, updateMessage = threadContext.updateMessage, resendMessage = threadContext.resendMessage, deleteMessage = threadContext.deleteMessage, isMuted = threadContext.isMuted, isChannelFrozen = threadContext.isChannelFrozen, onBeforeDownloadFileMessage = threadContext.onBeforeDownloadFileMessage;
    var openingMessage = threadContext === null || threadContext === void 0 ? void 0 : threadContext.message;
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showEdit = _h[0], setShowEdit = _h[1];
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showRemove = _j[0], setShowRemove = _j[1];
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showFileViewer = _k[0], setShowFileViewer = _k[1];
    var isReactionEnabled = getIsReactionEnabled({
        channel: currentChannel,
        config: config,
    });
    var isMentionEnabled = groupChannel.enableMention;
    var replyType = getCaseResolvedReplyType(groupChannel.replyType).upperCase;
    // Move to message
    var messageScrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        var _a;
        if ((openingMessage === null || openingMessage === void 0 ? void 0 : openingMessage.messageId) === (message === null || message === void 0 ? void 0 : message.messageId) && (messageScrollRef === null || messageScrollRef === void 0 ? void 0 : messageScrollRef.current)) {
            (_a = messageScrollRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ block: 'center', inline: 'center' });
        }
    }, [openingMessage, messageScrollRef === null || messageScrollRef === void 0 ? void 0 : messageScrollRef.current]);
    // reactions
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(function () {
        handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();
    }, [showEdit, (_d = message === null || message === void 0 ? void 0 : message.reactions) === null || _d === void 0 ? void 0 : _d.length]);
    // mention
    var editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _l = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), mentionNickname = _l[0], setMentionNickname = _l[1];
    var _m = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUsers = _m[0], setMentionedUsers = _m[1];
    var _o = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUserIds = _o[0], setMentionedUserIds = _o[1];
    var _p = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), messageInputEvent = _p[0], setMessageInputEvent = _p[1];
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), selectedUser = _q[0], setSelectedUser = _q[1];
    var _r = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionSuggestedUsers = _r[0], setMentionSuggestedUsers = _r[1];
    var displaySuggestedMentionList = isOnline
        && isMentionEnabled
        && mentionNickname.length > 0
        && !isMuted
        && !(isChannelFrozen && !(currentChannel.myRole === Role.OPERATOR));
    var mentionNodes = useDirtyGetMentions({ ref: editMessageInputRef }, { logger: logger });
    var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setMentionedUsers(mentionedUsers.filter(function (_a) {
            var userId = _a.userId;
            var i = mentionedUserIds.indexOf(userId);
            if (i < 0) {
                return false;
            }
            else {
                mentionedUserIds.splice(i, 1);
                return true;
            }
        }));
    }, [mentionedUserIds]);
    // edit input
    var disabled = !(threadListState === ThreadListStateTypes.INITIALIZED)
        || !isOnline
        || isMuted
        || isChannelFrozen;
    // memorize
    var MemorizedSeparator = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (typeof renderCustomSeparator === 'function') {
            return renderCustomSeparator === null || renderCustomSeparator === void 0 ? void 0 : renderCustomSeparator({ message: message });
        }
    }, [message, renderCustomSeparator]);
    // Edit message
    if (showEdit && message.isUserMessage()) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            displaySuggestedMentionList && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_U_oIvkG2_SuggestedMentionList, { targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : undefined, 
                // renderUserMentionItem={renderUserMentionItem}
                onUserItemClick: function (user) {
                    if (user) {
                        setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));
                    }
                    setMentionNickname('');
                    setSelectedUser(user);
                    setMessageInputEvent(null);
                }, onFocusItemChange: function () {
                    setMessageInputEvent(null);
                }, onFetchUsers: function (users) {
                    setMentionSuggestedUsers(users);
                }, ableAddMention: ableMention, maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount, maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { isEdit: true, channel: currentChannel, disabled: disabled, ref: editMessageInputRef, mentionSelectedUser: selectedUser, isMentionEnabled: isMentionEnabled, message: message, onStartTyping: function () {
                    var _a;
                    (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.startTyping) === null || _a === void 0 ? void 0 : _a.call(currentChannel);
                }, onUpdateMessage: function (_a) {
                    var _b;
                    var messageId = _a.messageId, message = _a.message, mentionTemplate = _a.mentionTemplate;
                    updateMessage({
                        messageId: messageId,
                        message: message,
                        mentionedUsers: mentionedUsers,
                        mentionTemplate: mentionTemplate,
                    });
                    setShowEdit(false);
                    (_b = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _b === void 0 ? void 0 : _b.call(currentChannel);
                }, onCancelEdit: function () {
                    var _a;
                    setMentionNickname('');
                    setMentionedUsers([]);
                    setMentionedUserIds([]);
                    setMentionSuggestedUsers([]);
                    setShowEdit(false);
                    (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _a === void 0 ? void 0 : _a.call(currentChannel);
                }, onUserMentioned: function (user) {
                    if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
                        setSelectedUser(null);
                        setMentionNickname('');
                    }
                }, onMentionStringChange: function (mentionText) {
                    setMentionNickname(mentionText);
                }, onMentionedUserIdsUpdated: function (userIds) {
                    setMentionedUserIds(userIds);
                }, onKeyDown: function (e) {
                    if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0
                        && ((e.key === MessageInputKeys.Enter && ableMention) || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
                        setMessageInputEvent(e);
                        return true;
                    }
                    return false;
                } })));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { ref: messageScrollRef, className: "sendbird-thread-list-item ".concat(className) },
        hasSeparator && (message === null || message === void 0 ? void 0 : message.createdAt) && (MemorizedSeparator || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, format(message === null || message === void 0 ? void 0 : message.createdAt, stringSet.DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR, { locale: dateLocale }))))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadListItemContent, { userId: userId, channel: currentChannel, message: message, chainTop: chainTop, chainBottom: chainBottom, isReactionEnabled: isReactionEnabled, isMentionEnabled: isMentionEnabled, disableQuoteMessage: true, replyType: replyType, nicknamesMap: nicknamesMap, emojiContainer: emojiContainer, resendMessage: resendMessage, showRemove: setShowRemove, showFileViewer: setShowFileViewer, toggleReaction: toggleReaction, showEdit: setShowEdit }),
        showRemove && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessage, { message: message, onCancel: function () { return setShowRemove(false); } })),
        showFileViewer && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewer, { message: message, isByMe: ((_e = message === null || message === void 0 ? void 0 : message.sender) === null || _e === void 0 ? void 0 : _e.userId) === userId, onClose: function () { return setShowFileViewer(false); }, onDelete: function () {
                deleteMessage(message);
                setShowFileViewer(false);
            }, onDownloadClick: function (e) { return __awaiter(_this, void 0, void 0, function () {
                var allowDownload, err_1;
                var _a, _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!onBeforeDownloadFileMessage)
                                return [2 /*return*/];
                            _c.label = 1;
                        case 1:
                            _c.trys.push([1, 3, , 4]);
                            return [4 /*yield*/, onBeforeDownloadFileMessage({ message: message })];
                        case 2:
                            allowDownload = _c.sent();
                            if (!allowDownload) {
                                e.preventDefault();
                                (_a = logger.info) === null || _a === void 0 ? void 0 : _a.call(logger, 'ThreadListItem: Not allowed to download.');
                            }
                            return [3 /*break*/, 4];
                        case 3:
                            err_1 = _c.sent();
                            (_b = logger.error) === null || _b === void 0 ? void 0 : _b.call(logger, 'ThreadListItem: Error occurred while determining download continuation:', err_1);
                            return [3 /*break*/, 4];
                        case 4: return [2 /*return*/];
                    }
                });
            }); } }))));
}


//# sourceMappingURL=ThreadListItem.js.map

// EXTERNAL MODULE: ./node_modules/date-fns/node_modules/@babel/runtime/helpers/esm/typeof.js
var esm_typeof = __webpack_require__(7);

// CONCATENATED MODULE: ./node_modules/date-fns/esm/_lib/requiredArgs/index.js
function requiredArgs_requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}
// CONCATENATED MODULE: ./node_modules/date-fns/esm/toDate/index.js


/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */
function toDate_toDate(argument) {
  requiredArgs_requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);

  // Clone the date
  if (argument instanceof Date || Object(esm_typeof["a" /* default */])(argument) === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");
      // eslint-disable-next-line no-console
      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}
// CONCATENATED MODULE: ./node_modules/date-fns/esm/startOfDay/index.js


/**
 * @name startOfDay
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|Number} date - the original date
 * @returns {Date} the start of a day
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */
function startOfDay_startOfDay(dirtyDate) {
  requiredArgs_requiredArgs(1, arguments);
  var date = toDate_toDate(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}
// CONCATENATED MODULE: ./node_modules/date-fns/esm/isSameDay/index.js


/**
 * @name isSameDay
 * @category Day Helpers
 * @summary Are the given dates in the same day (and year and month)?
 *
 * @description
 * Are the given dates in the same day (and year and month)?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day (and year and month)
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))
 * //=> true
 *
 * @example
 * // Are 4 September and 4 October in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))
 * //=> false
 *
 * @example
 * // Are 4 September, 2014 and 4 September, 2015 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))
 * //=> false
 */
function isSameDay_isSameDay(dirtyDateLeft, dirtyDateRight) {
  requiredArgs_requiredArgs(2, arguments);
  var dateLeftStartOfDay = startOfDay_startOfDay(dirtyDateLeft);
  var dateRightStartOfDay = startOfDay_startOfDay(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}
// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadList.js





































































































function ThreadList(_a) {
    var className = _a.className, renderMessage = _a.renderMessage, renderCustomSeparator = _a.renderCustomSeparator, scrollRef = _a.scrollRef, scrollBottom = _a.scrollBottom;
    var config = useSendbirdStateContext().config;
    var userId = config.userId;
    var _b = useThreadContext(), currentChannel = _b.currentChannel, allThreadMessages = _b.allThreadMessages, localThreadMessages = _b.localThreadMessages;
    var MemorizedMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return function (_a) {
        var message = _a.message, chainTop = _a.chainTop, chainBottom = _a.chainBottom, hasSeparator = _a.hasSeparator;
        if (typeof renderMessage === 'function') {
            return renderMessage({
                message: message,
                chainTop: chainTop,
                chainBottom: chainBottom,
                hasSeparator: hasSeparator,
            });
        }
        return null;
    }; }, [renderMessage]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread-list ".concat(className) },
        allThreadMessages.map(function (message, idx) {
            var _a;
            var isByMe = ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) === userId;
            var prevMessage = allThreadMessages[idx - 1];
            var nextMessage = allThreadMessages[idx + 1];
            // eslint-disable-next-line no-constant-condition
            var _b = compareMessagesForGrouping(prevMessage, message, nextMessage, currentChannel, getCaseResolvedReplyType(config.groupChannel.replyType).upperCase)
                , chainTop = _b[0], chainBottom = _b[1];
            var hasSeparator = !((prevMessage === null || prevMessage === void 0 ? void 0 : prevMessage.createdAt) > 0 && (isSameDay_isSameDay(message === null || message === void 0 ? void 0 : message.createdAt, prevMessage === null || prevMessage === void 0 ? void 0 : prevMessage.createdAt)));
            var handleScroll = function () {
                var current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
                if (current && scrollBottom) {
                    var bottom = current.scrollHeight - current.scrollTop - current.offsetHeight;
                    if (scrollBottom < bottom) {
                        current.scrollTop += bottom - scrollBottom;
                    }
                }
            };
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: message, isByMe: isByMe, key: message === null || message === void 0 ? void 0 : message.messageId }, MemorizedMessage({
                message: message,
                chainTop: chainTop,
                chainBottom: chainBottom,
                hasSeparator: hasSeparator,
            }) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadListItem, { message: message, chainTop: chainTop, chainBottom: chainBottom, hasSeparator: hasSeparator, renderCustomSeparator: renderCustomSeparator, handleScroll: handleScroll }))));
        }),
        localThreadMessages.map(function (message, idx) {
            var _a;
            var isByMe = ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) === userId;
            var prevMessage = localThreadMessages[idx - 1];
            var nextMessage = localThreadMessages[idx + 1];
            // eslint-disable-next-line no-constant-condition
            var _b = compareMessagesForGrouping(prevMessage, message, nextMessage, currentChannel, getCaseResolvedReplyType(config.groupChannel.replyType).upperCase)
                , chainTop = _b[0], chainBottom = _b[1];
            var hasSeparator = !((prevMessage === null || prevMessage === void 0 ? void 0 : prevMessage.createdAt) > 0 && (isSameDay_isSameDay(message === null || message === void 0 ? void 0 : message.createdAt, prevMessage === null || prevMessage === void 0 ? void 0 : prevMessage.createdAt)));
            var handleScroll = function () {
                var current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
                if (current) {
                    var bottom = current.scrollHeight - current.scrollTop - current.offsetHeight;
                    if (scrollBottom < bottom) {
                        current.scrollTop += bottom - scrollBottom;
                    }
                }
            };
            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: message, isByMe: isByMe, key: message === null || message === void 0 ? void 0 : message.messageId }, MemorizedMessage({
                message: message,
                chainTop: chainTop,
                chainBottom: chainBottom,
                hasSeparator: hasSeparator,
            }) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadListItem, { message: message, hasSeparator: false, renderCustomSeparator: renderCustomSeparator, handleScroll: handleScroll }))));
        })));
}


//# sourceMappingURL=ThreadList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/hooks/useHandleUploadFiles.js





























var useHandleUploadFiles_useHandleUploadFiles = function (_a, _b) {
    var sendFileMessage = _a.sendFileMessage, sendMultipleFilesMessage = _a.sendMultipleFilesMessage, quoteMessage = _a.quoteMessage;
    var logger = _b.logger;
    var stringSet = useLocalization().stringSet;
    var config = useSendbirdStateContext().config;
    var imageCompression = config.imageCompression;
    var uikitUploadSizeLimit = config === null || config === void 0 ? void 0 : config.uikitUploadSizeLimit;
    var uikitMultipleFilesMessageLimit = config === null || config === void 0 ? void 0 : config.uikitMultipleFilesMessageLimit;
    var openModal = useGlobalModalContext().openModal;
    var handleUploadFiles = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (files) { return __awaiter(void 0, void 0, void 0, function () {
        var compressedFiles, sendingFiles, file, imageFiles_1, otherFiles_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    // Validate Parameters
                    if (!sendFileMessage || !sendMultipleFilesMessage) {
                        logger.warning('Channel|useHandleUploadFiles: required functions are undefined', { sendFileMessage: sendFileMessage, sendMultipleFilesMessage: sendMultipleFilesMessage });
                        return [2 /*return*/];
                    }
                    if (files.length === 0) {
                        logger.warning('Channel|useHandleUploadFiles: given file list is empty.', { files: files });
                        return [2 /*return*/];
                    }
                    if (files.length > uikitMultipleFilesMessageLimit) {
                        logger.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(uikitMultipleFilesMessageLimit));
                        openModal({
                            modalProps: {
                                titleText: stringSet.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace('%d', "".concat(uikitMultipleFilesMessageLimit)),
                                hideFooter: true,
                            },
                            childElement: function (_a) {
                                var closeModal = _a.closeModal;
                                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal }));
                            },
                        });
                        return [2 /*return*/];
                    }
                    /**
                     * Validate file sizes
                     * The default value of uikitUploadSizeLimit is 25MiB
                     */
                    if (files.some(function (file) { return file.size > uikitUploadSizeLimit; })) {
                        logger.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(uikitUploadSizeLimit));
                        openModal({
                            modalProps: {
                                titleText: stringSet.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace('%d', "".concat(Math.floor(uikitUploadSizeLimit / bundle_DhBuJR0w["e" /* O */]))),
                                hideFooter: true,
                            },
                            childElement: function (_a) {
                                var closeModal = _a.closeModal;
                                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal }));
                            },
                        });
                        return [2 /*return*/];
                    }
                    return [4 /*yield*/, compressImages({
                            files: files,
                            imageCompression: imageCompression,
                            logger: logger,
                        })];
                case 1:
                    compressedFiles = (_a.sent()).compressedFiles;
                    sendingFiles = compressedFiles;
                    // Send File Message
                    if (sendingFiles.length === 1) {
                        logger.info('Channel|useHandleUploadFiles: sending one file.');
                        file = sendingFiles[0];
                        sendFileMessage(file, quoteMessage);
                    }
                    else if (sendingFiles.length > 1) {
                        logger.info('Channel|useHandleUploadFiles: sending multiple files.');
                        imageFiles_1 = [];
                        otherFiles_1 = [];
                        sendingFiles.forEach(function (file) {
                            if (isImage(file.type)) {
                                imageFiles_1.push(file);
                            }
                            else {
                                otherFiles_1.push(file);
                            }
                        });
                        return [2 /*return*/, otherFiles_1.reduce(function (previousPromise, item) {
                                return previousPromise.then(function () {
                                    return sendFileMessage(item, quoteMessage);
                                });
                            }, (function () {
                                if (imageFiles_1.length === 0) {
                                    return Promise.resolve();
                                }
                                else if (imageFiles_1.length === 1) {
                                    return sendFileMessage(imageFiles_1[0], quoteMessage);
                                }
                                else {
                                    return sendMultipleFilesMessage(imageFiles_1, quoteMessage);
                                }
                            })())];
                    }
                    return [2 /*return*/];
            }
        });
    }); }, [
        sendFileMessage,
        sendMultipleFilesMessage,
        quoteMessage,
    ]);
    return handleUploadFiles;
};


//# sourceMappingURL=useHandleUploadFiles.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadMessageInput.js









































































var ThreadMessageInput = function (props, ref) {
    var _a;
    var className = props.className, renderFileUploadIcon = props.renderFileUploadIcon, renderVoiceMessageIcon = props.renderVoiceMessageIcon, renderSendMessageIcon = props.renderSendMessageIcon, acceptableMimeTypes = props.acceptableMimeTypes;
    var config = useSendbirdStateContext().config;
    var isMobile = useMediaQueryContext().isMobile;
    var stringSet = useLocalization().stringSet;
    var isOnline = config.isOnline, userMention = config.userMention, logger = config.logger, groupChannel = config.groupChannel;
    var threadContext = useThreadContext();
    var currentChannel = threadContext.currentChannel, parentMessage = threadContext.parentMessage, sendMessage = threadContext.sendMessage, sendFileMessage = threadContext.sendFileMessage, sendVoiceMessage = threadContext.sendVoiceMessage, sendMultipleFilesMessage = threadContext.sendMultipleFilesMessage, isMuted = threadContext.isMuted, isChannelFrozen = threadContext.isChannelFrozen, allThreadMessages = threadContext.allThreadMessages;
    var messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var isMentionEnabled = groupChannel.enableMention;
    var isVoiceMessageEnabled = groupChannel.enableVoiceMessage;
    var isMultipleFilesMessageEnabled = (_a = threadContext.isMultipleFilesMessageEnabled) !== null && _a !== void 0 ? _a : config.isMultipleFilesMessageEnabled;
    var threadInputDisabled = props.disabled
        || !isOnline
        || isMuted
        || (!((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR) && isChannelFrozen) || parentMessage === null;
    // MFM
    var handleUploadFiles = useHandleUploadFiles_useHandleUploadFiles({
        sendFileMessage: sendFileMessage,
        sendMultipleFilesMessage: sendMultipleFilesMessage,
        quoteMessage: parentMessage,
    }, {
        logger: logger,
    });
    // mention
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(''), mentionNickname = _b[0], setMentionNickname = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUsers = _c[0], setMentionedUsers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionedUserIds = _d[0], setMentionedUserIds = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), selectedUser = _e[0], setSelectedUser = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mentionSuggestedUsers = _f[0], setMentionSuggestedUsers = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), messageInputEvent = _g[0], setMessageInputEvent = _g[1];
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showVoiceMessageInput = _h[0], setShowVoiceMessageInput = _h[1];
    var displaySuggestedMentionList = isOnline
        && isMentionEnabled
        && mentionNickname.length > 0
        && !bundle_B9ue8vfn_isDisabledBecauseFrozen(currentChannel)
        && !bundle_B9ue8vfn_isDisabledBecauseMuted(currentChannel)
        && !(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isBroadcast);
    // Reset when changing channel
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setShowVoiceMessageInput(false);
    }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
    var mentionNodes = useDirtyGetMentions({ ref: ref || messageInputRef }, { logger: logger });
    var ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        setMentionedUsers(mentionedUsers.filter(function (_a) {
            var userId = _a.userId;
            var i = mentionedUserIds.indexOf(userId);
            if (i < 0) {
                return false;
            }
            else {
                mentionedUserIds.splice(i, 1);
                return true;
            }
        }));
    }, [mentionedUserIds]);
    if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isBroadcast) && (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) !== Role.OPERATOR) {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames(showVoiceMessageInput ? 'sendbird-thread-message-input--voice-message' : 'sendbird-thread-message-input', className) },
        displaySuggestedMentionList && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_U_oIvkG2_SuggestedMentionList, { targetNickname: mentionNickname, inputEvent: messageInputEvent !== null && messageInputEvent !== void 0 ? messageInputEvent : undefined, 
            // renderUserMentionItem={renderUserMentionItem}
            onUserItemClick: function (user) {
                if (user) {
                    setMentionedUsers(__spreadArray(__spreadArray([], mentionedUsers, true), [user], false));
                }
                setMentionNickname('');
                setSelectedUser(user);
                setMessageInputEvent(null);
            }, onFocusItemChange: function () {
                setMessageInputEvent(null);
            }, onFetchUsers: function (users) {
                setMentionSuggestedUsers(users);
            }, ableAddMention: ableMention, maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount, maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount })),
        showVoiceMessageInput
            ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageInputWrapper, { channel: currentChannel, onSubmitClick: function (recordedFile, duration) {
                    sendVoiceMessage(recordedFile, duration, parentMessage);
                    setShowVoiceMessageInput(false);
                }, onCancelClick: function () {
                    setShowVoiceMessageInput(false);
                } }))
            : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { className: "sendbird-thread-message-input__message-input", messageFieldId: "sendbird-message-input-text-field--thread", channel: currentChannel, channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url, isMobile: isMobile, disabled: threadInputDisabled, acceptableMimeTypes: acceptableMimeTypes, setMentionedUsers: setMentionedUsers, mentionSelectedUser: selectedUser, isMentionEnabled: isMentionEnabled, isVoiceMessageEnabled: isVoiceMessageEnabled, isSelectingMultipleFilesEnabled: isMultipleFilesMessageEnabled, onVoiceMessageIconClick: function () {
                    setShowVoiceMessageInput(true);
                }, renderFileUploadIcon: renderFileUploadIcon, renderVoiceMessageIcon: renderVoiceMessageIcon, renderSendMessageIcon: renderSendMessageIcon, ref: ref || messageInputRef, placeholder: ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isFrozen) && !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR) && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED)
                    || ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myMutedState) === _bundle_0b1520ed["Rb" /* bb */].MUTED && stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT)
                    || (allThreadMessages.length > 0
                        ? stringSet.THREAD__INPUT__REPLY_TO_THREAD
                        : stringSet.THREAD__INPUT__REPLY_IN_THREAD), onStartTyping: function () {
                    var _a;
                    (_a = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.startTyping) === null || _a === void 0 ? void 0 : _a.call(currentChannel);
                }, onSendMessage: function (_a) {
                    var _b;
                    var message = _a.message, mentionTemplate = _a.mentionTemplate;
                    sendMessage({
                        message: message,
                        mentionedUsers: mentionedUsers,
                        mentionTemplate: mentionTemplate,
                        quoteMessage: parentMessage,
                    });
                    setMentionNickname('');
                    setMentionedUsers([]);
                    (_b = currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.endTyping) === null || _b === void 0 ? void 0 : _b.call(currentChannel);
                }, onFileUpload: handleUploadFiles, onUserMentioned: function (user) {
                    if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
                        setSelectedUser(null);
                        setMentionNickname('');
                    }
                }, onMentionStringChange: function (mentionText) {
                    setMentionNickname(mentionText);
                }, onMentionedUserIdsUpdated: function (userIds) {
                    setMentionedUserIds(userIds);
                }, onKeyDown: function (e) {
                    if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0
                        && ((e.key === MessageInputKeys.Enter && ableMention) || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
                        setMessageInputEvent(e);
                        return true;
                    }
                    return false;
                } }))));
};
var ThreadMessageInput$1 = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(ThreadMessageInput);


//# sourceMappingURL=ThreadMessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadUI.js


























































































































var useMemorizedHeader = function (_a) {
    var renderHeader = _a.renderHeader;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (typeof renderHeader === 'function') {
            return renderHeader();
        }
        return null;
    }, [renderHeader]);
};

var useMemorizedParentMessageInfo = function (_a) {
    var parentMessage = _a.parentMessage, parentMessageState = _a.parentMessageState, renderParentMessageInfo = _a.renderParentMessageInfo, renderParentMessageInfoPlaceholder = _a.renderParentMessageInfoPlaceholder;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (parentMessageState === ParentMessageStateTypes.NIL
            || parentMessageState === ParentMessageStateTypes.LOADING
            || parentMessageState === ParentMessageStateTypes.INVALID) {
            if (typeof renderParentMessageInfoPlaceholder === 'function') {
                return renderParentMessageInfoPlaceholder(parentMessageState);
            }
            switch (parentMessageState) {
                case ParentMessageStateTypes.NIL: {
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-thread-ui__parent-message-info placeholder-nil", type: PlaceHolderTypes.NO_RESULTS, iconSize: "64px" }));
                }
                case ParentMessageStateTypes.LOADING: {
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-thread-ui__parent-message-info placeholder-loading", type: PlaceHolderTypes.LOADING, iconSize: "64px" }));
                }
                case ParentMessageStateTypes.INVALID: {
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-thread-ui__parent-message-info placeholder-invalid", type: PlaceHolderTypes.WRONG, iconSize: "64px" }));
                }
                default: {
                    return null;
                }
            }
        }
        else if (parentMessageState === ParentMessageStateTypes.INITIALIZED) {
            if (typeof renderParentMessageInfo === 'function') {
                return renderParentMessageInfo();
            }
        }
        return null;
    }, [
        parentMessage,
        parentMessageState,
        renderParentMessageInfo,
        renderParentMessageInfoPlaceholder,
    ]);
};

var useMemorizedThreadList = function (_a) {
    var threadListState = _a.threadListState, renderThreadListPlaceHolder = _a.renderThreadListPlaceHolder;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        if (threadListState === ThreadListStateTypes.NIL
            || threadListState === ThreadListStateTypes.LOADING
            || threadListState === ThreadListStateTypes.INVALID) {
            if (typeof renderThreadListPlaceHolder === 'function') {
                return renderThreadListPlaceHolder(threadListState);
            }
            switch (threadListState) {
                case ThreadListStateTypes.LOADING: {
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-thread-ui__thread-list placeholder-loading", type: PlaceHolderTypes.LOADING, iconSize: "64px" }));
                }
                case ThreadListStateTypes.INVALID: {
                    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-thread-ui__thread-list placeholder-invalid", type: PlaceHolderTypes.WRONG, iconSize: "64px" }));
                }
                case ThreadListStateTypes.NIL: {
                    return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
                }
                default: {
                    return null;
                }
            }
        }
        return null;
    }, [
        threadListState,
        renderThreadListPlaceHolder,
    ]);
};

var ThreadUI = function (_a) {
    var _b, _c, _d, _e;
    var renderHeader = _a.renderHeader, renderParentMessageInfo = _a.renderParentMessageInfo, renderMessage = _a.renderMessage, renderMessageInput = _a.renderMessageInput, renderCustomSeparator = _a.renderCustomSeparator, renderParentMessageInfoPlaceholder = _a.renderParentMessageInfoPlaceholder, renderThreadListPlaceHolder = _a.renderThreadListPlaceHolder, renderFileUploadIcon = _a.renderFileUploadIcon, renderVoiceMessageIcon = _a.renderVoiceMessageIcon, renderSendMessageIcon = _a.renderSendMessageIcon;
    var stores = useSendbirdStateContext().stores;
    var currentUserId = (_d = (_c = (_b = stores === null || stores === void 0 ? void 0 : stores.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk) === null || _c === void 0 ? void 0 : _c.currentUser) === null || _d === void 0 ? void 0 : _d.userId;
    var stringSet = useLocalization().stringSet;
    var _f = useThreadContext(), currentChannel = _f.currentChannel, allThreadMessages = _f.allThreadMessages, parentMessage = _f.parentMessage, parentMessageState = _f.parentMessageState, threadListState = _f.threadListState, hasMorePrev = _f.hasMorePrev, hasMoreNext = _f.hasMoreNext, fetchPrevThreads = _f.fetchPrevThreads, fetchNextThreads = _f.fetchNextThreads, onHeaderActionClick = _f.onHeaderActionClick, onMoveToParentMessage = _f.onMoveToParentMessage;
    var replyCount = allThreadMessages.length;
    var isByMe = currentUserId === ((_e = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender) === null || _e === void 0 ? void 0 : _e.userId);
    // Memoized custom components
    var MemorizedHeader = useMemorizedHeader({ renderHeader: renderHeader });
    var MemorizedParentMessageInfo = useMemorizedParentMessageInfo({
        parentMessage: parentMessage,
        parentMessageState: parentMessageState,
        renderParentMessageInfo: renderParentMessageInfo,
        renderParentMessageInfoPlaceholder: renderParentMessageInfoPlaceholder,
    });
    var MemorizedThreadList = useMemorizedThreadList({
        threadListState: threadListState,
        renderThreadListPlaceHolder: renderThreadListPlaceHolder,
    });
    // scroll
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0), scrollBottom = _g[0], setScrollBottom = _g[1];
    var scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var onScroll = function (e) {
        var _a;
        var element = e.target;
        var scrollTop = element.scrollTop, clientHeight = element.clientHeight, scrollHeight = element.scrollHeight;
        var threadItemNodes = (_a = scrollRef.current) === null || _a === void 0 ? void 0 : _a.querySelectorAll('.sendbird-thread-list-item');
        var firstNode = threadItemNodes === null || threadItemNodes === void 0 ? void 0 : threadItemNodes[0];
        if (bundle_sX9kxwmI_isAboutSame(scrollTop, 0, 10) && hasMorePrev) {
            fetchPrevThreads(function (messages) {
                var _a;
                if (messages) {
                    try {
                        (_a = firstNode === null || firstNode === void 0 ? void 0 : firstNode.scrollIntoView) === null || _a === void 0 ? void 0 : _a.call(firstNode, { block: 'start', inline: 'nearest' });
                    }
                    catch (error) {
                        //
                    }
                }
            });
        }
        if (bundle_sX9kxwmI_isAboutSame(clientHeight + scrollTop, scrollHeight, 10) && hasMoreNext) {
            var scrollTop_1 = scrollTop;
            fetchNextThreads(function (messages) {
                if (messages) {
                    try {
                        element.scrollTop = scrollTop_1;
                        if (scrollRef.current) {
                            scrollRef.current.scrollTop = scrollTop_1;
                        }
                    }
                    catch (error) {
                        //
                    }
                }
            });
        }
        // save the lastest scroll bottom value
        if (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) {
            var current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
            setScrollBottom(current.scrollHeight - current.scrollTop - current.offsetHeight);
        }
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-thread-ui' },
        MemorizedHeader || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadHeader, { className: "sendbird-thread-ui__header", channelName: getChannelTitle(currentChannel, currentUserId !== null && currentUserId !== void 0 ? currentUserId : '', stringSet), onActionIconClick: onHeaderActionClick, onChannelNameClick: function () {
                onMoveToParentMessage === null || onMoveToParentMessage === void 0 ? void 0 : onMoveToParentMessage({ message: parentMessage, channel: currentChannel });
            } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread-ui--scroll", ref: scrollRef, onScroll: onScroll },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: parentMessage, isByMe: isByMe }, MemorizedParentMessageInfo || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParentMessageInfo, { className: "sendbird-thread-ui__parent-message-info" }))),
            replyCount > 0 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread-ui__reply-counts" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_3 }, "".concat(replyCount, " ").concat(replyCount > 1 ? stringSet.THREAD__THREAD_REPLIES : stringSet.THREAD__THREAD_REPLY)))),
            MemorizedThreadList || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadList, { className: "sendbird-thread-ui__thread-list", renderMessage: renderMessage, renderCustomSeparator: renderCustomSeparator, scrollRef: scrollRef, scrollBottom: scrollBottom }))),
        (renderMessageInput === null || renderMessageInput === void 0 ? void 0 : renderMessageInput()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadMessageInput$1, { className: "sendbird-thread-ui__message-input", renderFileUploadIcon: renderFileUploadIcon, renderVoiceMessageIcon: renderVoiceMessageIcon, renderSendMessageIcon: renderSendMessageIcon }))));
};


//# sourceMappingURL=ThreadUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread.js



























































































































var Thread = function (props) {
    var 
    // props
    className = props.className, 
    // ThreadProviderProps
    channelUrl = props.channelUrl, message = props.message, onHeaderActionClick = props.onHeaderActionClick, onMoveToParentMessage = props.onMoveToParentMessage, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, 
    // onBeforeSend~~~Message
    onBeforeSendUserMessage = props.onBeforeSendUserMessage, onBeforeSendFileMessage = props.onBeforeSendFileMessage, onBeforeSendVoiceMessage = props.onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage = props.onBeforeSendMultipleFilesMessage, 
    // ThreadUIProps
    renderHeader = props.renderHeader, renderParentMessageInfo = props.renderParentMessageInfo, renderMessage = props.renderMessage, renderMessageInput = props.renderMessageInput, renderCustomSeparator = props.renderCustomSeparator, renderParentMessageInfoPlaceholder = props.renderParentMessageInfoPlaceholder, renderThreadListPlaceHolder = props.renderThreadListPlaceHolder, renderFileUploadIcon = props.renderFileUploadIcon, renderVoiceMessageIcon = props.renderVoiceMessageIcon, renderSendMessageIcon = props.renderSendMessageIcon;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-thread ".concat(className) },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadProvider, { channelUrl: channelUrl, message: message, onHeaderActionClick: onHeaderActionClick, onMoveToParentMessage: onMoveToParentMessage, onBeforeSendUserMessage: onBeforeSendUserMessage, onBeforeSendFileMessage: onBeforeSendFileMessage, onBeforeSendVoiceMessage: onBeforeSendVoiceMessage, onBeforeSendMultipleFilesMessage: onBeforeSendMultipleFilesMessage, isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadUI, { renderHeader: renderHeader, renderParentMessageInfo: renderParentMessageInfo, renderMessage: renderMessage, renderMessageInput: renderMessageInput, renderCustomSeparator: renderCustomSeparator, renderParentMessageInfoPlaceholder: renderParentMessageInfoPlaceholder, renderThreadListPlaceHolder: renderThreadListPlaceHolder, renderFileUploadIcon: renderFileUploadIcon, renderVoiceMessageIcon: renderVoiceMessageIcon, renderSendMessageIcon: renderSendMessageIcon }))));
};


//# sourceMappingURL=Thread.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/App.js


























































































































































































































var DesktopLayout = function (props) {
    var isReactionEnabled = props.isReactionEnabled, replyType = props.replyType, isMessageGroupingEnabled = props.isMessageGroupingEnabled, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, allowProfileEdit = props.allowProfileEdit, showSearchIcon = props.showSearchIcon, onProfileEditSuccess = props.onProfileEditSuccess, disableAutoSelect = props.disableAutoSelect, currentChannel = props.currentChannel, setCurrentChannel = props.setCurrentChannel, showSettings = props.showSettings, setShowSettings = props.setShowSettings, showSearch = props.showSearch, setShowSearch = props.setShowSearch, highlightedMessage = props.highlightedMessage, setHighlightedMessage = props.setHighlightedMessage, startingPoint = props.startingPoint, setStartingPoint = props.setStartingPoint, showThread = props.showThread, setShowThread = props.setShowThread, threadTargetMessage = props.threadTargetMessage, setThreadTargetMessage = props.setThreadTargetMessage, enableLegacyChannelModules = props.enableLegacyChannelModules;
    var updateFocusedChannel = function (channel) {
        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(null);
        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
        if (channel) {
            setCurrentChannel(channel);
        }
        else {
            setCurrentChannel(undefined);
        }
    };
    var onClickThreadReply = function (_a) {
        var message = _a.message;
        // parent message
        setShowSettings(false);
        setShowSearch(false);
        if (replyType === 'THREAD') {
            setThreadTargetMessage(message);
            setShowThread(true);
        }
    };
    var channelListProps = {
        allowProfileEdit: allowProfileEdit,
        activeChannelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
        onProfileEditSuccess: onProfileEditSuccess,
        disableAutoSelect: disableAutoSelect,
        onChannelSelect: updateFocusedChannel,
        // for GroupChannelList
        selectedChannelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
        onChannelCreated: updateFocusedChannel,
        onUserProfileUpdated: onProfileEditSuccess,
    };
    var channelProps = {
        channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
        onChatHeaderActionClick: function () {
            setShowSearch(false);
            setShowThread(false);
            setShowSettings(!showSettings);
        },
        onSearchClick: function () {
            setShowSettings(false);
            setShowThread(false);
            setShowSearch(!showSearch);
        },
        onReplyInThread: onClickThreadReply,
        onQuoteMessageClick: function (_a) {
            var message = _a.message;
            // thread message
            setShowSettings(false);
            setShowSearch(false);
            if (replyType === 'THREAD') {
                setThreadTargetMessage(message);
                setShowThread(true);
            }
        },
        animatedMessage: highlightedMessage,
        onMessageAnimated: function () { return setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null); },
        showSearchIcon: showSearchIcon,
        startingPoint: startingPoint !== null && startingPoint !== void 0 ? startingPoint : undefined,
        isReactionEnabled: isReactionEnabled,
        replyType: replyType,
        isMessageGroupingEnabled: isMessageGroupingEnabled,
        isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled,
        // for GroupChannel
        animatedMessageId: highlightedMessage,
        onReplyInThreadClick: onClickThreadReply,
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-app__wrap" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-app__channellist-wrap" }, enableLegacyChannelModules ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelList, __assign({}, channelListProps)) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelList, __assign({}, channelListProps))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: classnames('sendbird-app__conversation-wrap', showSettings && 'sendbird-app__conversation--settings-open', showSearch && 'sendbird-app__conversation--search-open') }, enableLegacyChannelModules ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Channel, __assign({}, channelProps)) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannel, __assign({}, channelProps))),
        showSettings && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-app__settingspanel-wrap" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettings, { className: "sendbird-channel-settings", channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '', onCloseClick: function () {
                    setShowSettings(false);
                } }))),
        showSearch && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-app__searchpanel-wrap" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchPannel, { channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '', onResultClick: function (message) {
                    if (message.messageId === highlightedMessage) {
                        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
                        setTimeout(function () {
                            setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(message.messageId);
                        });
                    }
                    else {
                        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(message.createdAt);
                        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(message.messageId);
                    }
                }, onCloseClick: function () {
                    setShowSearch(false);
                } }))),
        showThread && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Thread, { className: "sendbird-app__thread", channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '', message: threadTargetMessage, onHeaderActionClick: function () {
                setShowThread(false);
            }, onMoveToParentMessage: function (_a) {
                var message = _a.message, channel = _a.channel;
                if ((channel === null || channel === void 0 ? void 0 : channel.url) !== (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
                    setCurrentChannel(channel);
                }
                if ((message === null || message === void 0 ? void 0 : message.messageId) !== highlightedMessage) {
                    setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(message === null || message === void 0 ? void 0 : message.createdAt);
                }
                setTimeout(function () {
                    setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(null);
                    setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(message === null || message === void 0 ? void 0 : message.messageId);
                }, 500);
            } }))));
};

var PANELS;
(function (PANELS) {
    PANELS["CHANNEL_LIST"] = "CHANNEL_LIST";
    PANELS["CHANNEL"] = "CHANNEL";
    PANELS["CHANNEL_SETTINGS"] = "CHANNEL_SETTINGS";
    PANELS["MESSAGE_SEARCH"] = "MESSAGE_SEARCH";
    PANELS["THREAD"] = "THREAD";
})(PANELS || (PANELS = {}));
var MobileLayout = function (props) {
    var _a, _b, _c;
    var replyType = props.replyType, isMessageGroupingEnabled = props.isMessageGroupingEnabled, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, allowProfileEdit = props.allowProfileEdit, isReactionEnabled = props.isReactionEnabled, showSearchIcon = props.showSearchIcon, onProfileEditSuccess = props.onProfileEditSuccess, currentChannel = props.currentChannel, setCurrentChannel = props.setCurrentChannel, startingPoint = props.startingPoint, setStartingPoint = props.setStartingPoint, threadTargetMessage = props.threadTargetMessage, setThreadTargetMessage = props.setThreadTargetMessage, highlightedMessage = props.highlightedMessage, setHighlightedMessage = props.setHighlightedMessage, enableLegacyChannelModules = props.enableLegacyChannelModules;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(PANELS.CHANNEL_LIST), panel = _d[0], setPanel = _d[1];
    var store = useSendbirdStateContext();
    var sdk = (_b = (_a = store === null || store === void 0 ? void 0 : store.stores) === null || _a === void 0 ? void 0 : _a.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk;
    var userId = (_c = store === null || store === void 0 ? void 0 : store.config) === null || _c === void 0 ? void 0 : _c.userId;
    var pause = useVoicePlayerContext().pause;
    var goToMessage = function (message, timeoutCb) {
        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint((message === null || message === void 0 ? void 0 : message.createdAt) || null);
        setTimeout(function () {
            timeoutCb === null || timeoutCb === void 0 ? void 0 : timeoutCb((message === null || message === void 0 ? void 0 : message.messageId) || null);
        }, 500);
    };
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (panel !== PANELS.CHANNEL) {
            goToMessage(null, function () { return setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null); });
        }
    }, [panel]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        var handlerId = uuidv4();
        if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.addGroupChannelHandler) {
            var handler = new groupChannel_We({
                onUserBanned: function (groupChannel, user) {
                    if (groupChannel.url === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === userId) {
                        setPanel(PANELS.CHANNEL_LIST);
                    }
                },
                onChannelDeleted: function (channelUrl) {
                    if (channelUrl === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
                        setPanel(PANELS.CHANNEL_LIST);
                    }
                },
                onUserLeft: function (groupChannel, user) {
                    if (groupChannel.url === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === userId) {
                        setPanel(PANELS.CHANNEL_LIST);
                    }
                },
            });
            (_b = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _b === void 0 ? void 0 : _b.addGroupChannelHandler(handlerId, handler);
        }
        return function () {
            var _a, _b;
            (_b = (_a = sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel) === null || _a === void 0 ? void 0 : _a.removeGroupChannelHandler) === null || _b === void 0 ? void 0 : _b.call(_a, handlerId);
        };
    }, [sdk, currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
    // if currentChannel is changed while on Thread
    // then change panel type to CHANNEL
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (panel === PANELS.THREAD) {
            setPanel(PANELS.CHANNEL);
        }
    }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
    var channelListProps = {
        allowProfileEdit: allowProfileEdit,
        onProfileEditSuccess: onProfileEditSuccess,
        disableAutoSelect: true,
        onChannelSelect: function (channel) {
            setCurrentChannel(channel !== null && channel !== void 0 ? channel : undefined);
            if (channel) {
                setPanel(PANELS.CHANNEL);
            }
            else {
                setPanel(PANELS.CHANNEL_LIST);
            }
        },
        // for GroupChannelList
        onChannelCreated: function (channel) {
            setCurrentChannel(channel);
            setPanel(PANELS.CHANNEL);
        },
        onUserProfileUpdated: onProfileEditSuccess,
    };
    var channelProps = {
        channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
        onChatHeaderActionClick: function () {
            setPanel(PANELS.CHANNEL_SETTINGS);
        },
        onBackClick: function () {
            setPanel(PANELS.CHANNEL_LIST);
            pause(ALL);
        },
        onSearchClick: function () {
            setPanel(PANELS.MESSAGE_SEARCH);
        },
        onReplyInThread: function (_a) {
            var message = _a.message;
            if (replyType === 'THREAD') {
                setPanel(PANELS.THREAD);
                setThreadTargetMessage(message);
            }
        },
        onQuoteMessageClick: function (_a) {
            var message = _a.message;
            // thread message
            if (replyType === 'THREAD') {
                setThreadTargetMessage(message);
                setPanel(PANELS.THREAD);
            }
        },
        animatedMessage: highlightedMessage,
        onMessageAnimated: function () { return setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null); },
        showSearchIcon: showSearchIcon,
        startingPoint: startingPoint !== null && startingPoint !== void 0 ? startingPoint : undefined,
        isReactionEnabled: isReactionEnabled,
        replyType: replyType,
        isMessageGroupingEnabled: isMessageGroupingEnabled,
        isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled,
        // for GroupChannel
        animatedMessageId: highlightedMessage,
        onReplyInThreadClick: function (_a) {
            var message = _a.message;
            if (replyType === 'THREAD') {
                setPanel(PANELS.THREAD);
                setThreadTargetMessage(message);
            }
        },
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sb_mobile" },
        panel === PANELS.CHANNEL_LIST && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sb_mobile__panelwrap" }, enableLegacyChannelModules ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelList, __assign({}, channelListProps)) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelList, __assign({}, channelListProps)))),
        panel === PANELS.CHANNEL && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sb_mobile__panelwrap" }, enableLegacyChannelModules ? external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Channel, __assign({}, channelProps)) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannel, __assign({}, channelProps)))),
        panel === PANELS.CHANNEL_SETTINGS && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sb_mobile__panelwrap" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettings, { channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '', onCloseClick: function () {
                    setPanel(PANELS.CHANNEL);
                }, onLeaveChannel: function () {
                    setPanel(PANELS.CHANNEL_LIST);
                } }))),
        panel === PANELS.MESSAGE_SEARCH && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sb_mobile__panelwrap" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchPannel, { channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '', onCloseClick: function () {
                    setPanel(PANELS.CHANNEL);
                }, onResultClick: function (message) {
                    setPanel(PANELS.CHANNEL);
                    goToMessage(message, function (messageId) {
                        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(messageId);
                    });
                } }))),
        panel === PANELS.THREAD && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sb_mobile__panelwrap" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Thread, { channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '', message: threadTargetMessage, onHeaderActionClick: function () {
                    setPanel(PANELS.CHANNEL);
                    pause(ALL);
                }, onMoveToParentMessage: function (_a) {
                    var message = _a.message, channel = _a.channel;
                    setCurrentChannel(channel);
                    goToMessage(message, function (messageId) {
                        setPanel(PANELS.CHANNEL);
                        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(messageId);
                    });
                } })))));
};

var AppLayout = function (props) {
    var _a, _b, _c;
    var isMessageGroupingEnabled = props.isMessageGroupingEnabled, allowProfileEdit = props.allowProfileEdit, onProfileEditSuccess = props.onProfileEditSuccess, disableAutoSelect = props.disableAutoSelect, currentChannel = props.currentChannel, setCurrentChannel = props.setCurrentChannel, enableLegacyChannelModules = props.enableLegacyChannelModules;
    var globalStore = useSendbirdStateContext();
    var globalConfigs = globalStore.config;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showThread = _d[0], setShowThread = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), threadTargetMessage = _e[0], setThreadTargetMessage = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showSettings = _f[0], setShowSettings = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showSearch = _g[0], setShowSearch = _g[1];
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), highlightedMessage = _h[0], setHighlightedMessage = _h[1];
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), startingPoint = _j[0], setStartingPoint = _j[1];
    var isMobile = useMediaQueryContext().isMobile;
    /**
     * Below configs can be set via Dashboard UIKit config setting but as a lower priority than App props.
     * So need to be have fallback value \w global configs even though each prop values are undefined
     */
    var replyType = (_a = props.replyType) !== null && _a !== void 0 ? _a : getCaseResolvedReplyType(globalConfigs.groupChannel.replyType).upperCase;
    var isReactionEnabled = (_b = props.isReactionEnabled) !== null && _b !== void 0 ? _b : globalConfigs.groupChannel.enableReactions;
    var showSearchIcon = (_c = props.showSearchIcon) !== null && _c !== void 0 ? _c : globalConfigs.groupChannelSettings.enableMessageSearch;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, isMobile
        ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileLayout, { replyType: replyType, showSearchIcon: showSearchIcon, isReactionEnabled: isReactionEnabled, isMessageGroupingEnabled: isMessageGroupingEnabled, allowProfileEdit: allowProfileEdit, onProfileEditSuccess: onProfileEditSuccess, currentChannel: currentChannel, setCurrentChannel: setCurrentChannel, highlightedMessage: highlightedMessage, setHighlightedMessage: setHighlightedMessage, startingPoint: startingPoint, setStartingPoint: setStartingPoint, threadTargetMessage: threadTargetMessage, setThreadTargetMessage: setThreadTargetMessage, enableLegacyChannelModules: enableLegacyChannelModules }))
        : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DesktopLayout, { replyType: replyType, isReactionEnabled: isReactionEnabled, showSearchIcon: showSearchIcon, isMessageGroupingEnabled: isMessageGroupingEnabled, allowProfileEdit: allowProfileEdit, onProfileEditSuccess: onProfileEditSuccess, disableAutoSelect: disableAutoSelect, currentChannel: currentChannel, setCurrentChannel: setCurrentChannel, showThread: showThread, setShowThread: setShowThread, threadTargetMessage: threadTargetMessage, setThreadTargetMessage: setThreadTargetMessage, showSettings: showSettings, setShowSettings: setShowSettings, showSearch: showSearch, setShowSearch: setShowSearch, highlightedMessage: highlightedMessage, setHighlightedMessage: setHighlightedMessage, startingPoint: startingPoint, setStartingPoint: setStartingPoint, enableLegacyChannelModules: enableLegacyChannelModules }))));
};

/**
 * This is a drop in Chat solution
 * Can also be used as an example for creating
 * default chat apps
 */
function App(props) {
    var appId = props.appId, userId = props.userId, _a = props.accessToken, accessToken = _a === void 0 ? '' : _a, _b = props.customApiHost, customApiHost = _b === void 0 ? '' : _b, _c = props.customWebSocketHost, customWebSocketHost = _c === void 0 ? '' : _c, breakpoint = props.breakpoint, _d = props.theme, theme = _d === void 0 ? 'light' : _d, userListQuery = props.userListQuery, _e = props.nickname, nickname = _e === void 0 ? '' : _e, _f = props.profileUrl, profileUrl = _f === void 0 ? '' : _f, dateLocale = props.dateLocale, _g = props.config, config = _g === void 0 ? {} : _g, voiceRecord = props.voiceRecord, _h = props.isMessageGroupingEnabled, isMessageGroupingEnabled = _h === void 0 ? true : _h, colorSet = props.colorSet, stringSet = props.stringSet, _j = props.allowProfileEdit, allowProfileEdit = _j === void 0 ? false : _j, _k = props.disableMarkAsDelivered, disableMarkAsDelivered = _k === void 0 ? false : _k, renderUserProfile = props.renderUserProfile, onProfileEditSuccess = props.onProfileEditSuccess, _l = props.imageCompression, imageCompression = _l === void 0 ? {} : _l, _m = props.disableAutoSelect, disableAutoSelect = _m === void 0 ? false : _m, sdkInitParams = props.sdkInitParams, customExtensionParams = props.customExtensionParams, eventHandlers = props.eventHandlers, isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled, _o = props.isUserIdUsedForNickname, isUserIdUsedForNickname = _o === void 0 ? true : _o, _p = props.enableLegacyChannelModules, enableLegacyChannelModules = _p === void 0 ? false : _p, uikitOptions = props.uikitOptions, 
    // The below configs are duplicates of the Dashboard UIKit Configs.
    // Since their default values will be set in the Sendbird component,
    // we don't need to set them here.
    showSearchIcon = props.showSearchIcon, isMentionEnabled = props.isMentionEnabled, isReactionEnabled = props.isReactionEnabled, replyType = props.replyType, disableUserProfile = props.disableUserProfile, isVoiceMessageEnabled = props.isVoiceMessageEnabled, isTypingIndicatorEnabledOnChannelList = props.isTypingIndicatorEnabledOnChannelList, isMessageReceiptStatusEnabledOnChannelList = props.isMessageReceiptStatusEnabledOnChannelList;
    var _q = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(), currentChannel = _q[0], setCurrentChannel = _q[1];
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdProvider, { stringSet: stringSet, appId: appId, userId: userId, accessToken: accessToken, customApiHost: customApiHost, customWebSocketHost: customWebSocketHost, breakpoint: breakpoint, theme: theme, nickname: nickname, profileUrl: profileUrl, dateLocale: dateLocale, userListQuery: userListQuery, config: config, colorSet: colorSet, disableMarkAsDelivered: disableMarkAsDelivered, renderUserProfile: renderUserProfile, imageCompression: imageCompression, isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled, voiceRecord: voiceRecord, onUserProfileMessage: function (channel) {
            setCurrentChannel(channel);
        }, uikitOptions: uikitOptions, isUserIdUsedForNickname: isUserIdUsedForNickname, sdkInitParams: sdkInitParams, customExtensionParams: customExtensionParams, eventHandlers: eventHandlers, isTypingIndicatorEnabledOnChannelList: isTypingIndicatorEnabledOnChannelList, isMessageReceiptStatusEnabledOnChannelList: isMessageReceiptStatusEnabledOnChannelList, replyType: replyType, showSearchIcon: showSearchIcon, disableUserProfile: disableUserProfile, isReactionEnabled: isReactionEnabled, isMentionEnabled: isMentionEnabled, isVoiceMessageEnabled: isVoiceMessageEnabled },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AppLayout, { isMessageGroupingEnabled: isMessageGroupingEnabled, allowProfileEdit: allowProfileEdit, onProfileEditSuccess: onProfileEditSuccess, disableAutoSelect: disableAutoSelect, currentChannel: currentChannel, setCurrentChannel: setCurrentChannel, enableLegacyChannelModules: enableLegacyChannelModules, isReactionEnabled: isReactionEnabled, replyType: replyType, showSearchIcon: showSearchIcon })));
}


//# sourceMappingURL=App.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-DQdztuN4.js
















var shouldFetchMore = function (messageLength, maxMessages) {
    if (typeof maxMessages !== 'number') {
        return true;
    }
    return maxMessages > messageLength;
};
/* eslint-disable default-param-last */
var bundle_DQdztuN4_scrollIntoLast = function (initialTry, scrollRef) {
    if (initialTry === void 0) { initialTry = 0; }
    var MAX_TRIES = 10;
    var currentTry = initialTry;
    if (currentTry > MAX_TRIES) {
        return;
    }
    try {
        var scrollDOM = (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) || document.querySelector('.sendbird-openchannel-conversation-scroll__container__item-container');
        // eslint-disable-next-line no-multi-assign
        if (scrollDOM) {
            scrollDOM.scrollTop = scrollDOM.scrollHeight;
        }
    }
    catch (error) {
        setTimeout(function () {
            bundle_DQdztuN4_scrollIntoLast(currentTry + 1, scrollRef);
        }, 500 * currentTry);
    }
};
var bundle_DQdztuN4_kFormatter = function (num) {
    if (Math.abs(num) > 999999) {
        return "".concat((Math.abs(num) / 1000000).toFixed(1), "M");
    }
    if (Math.abs(num) > 999) {
        return "".concat((Math.abs(num) / 1000).toFixed(1), "K");
    }
    return "".concat(num);
};
var bundle_DQdztuN4_isOperator = function (openChannel, userId) {
    var operators = openChannel === null || openChannel === void 0 ? void 0 : openChannel.operators;
    if (operators.map(function (operator) { return operator.userId; }).indexOf(userId) < 0) {
        return false;
    }
    return true;
};
var bundle_DQdztuN4_isDisabledBecauseFrozen = function (openChannel, userId) {
    if (!openChannel)
        return false;
    var isFrozen = openChannel.isFrozen;
    return isFrozen && !bundle_DQdztuN4_isOperator(openChannel, userId);
};
var bundle_DQdztuN4_isDisabledBecauseMuted = function (mutedParticipantIds, userId) {
    return mutedParticipantIds.indexOf(userId) > -1;
};
var fetchWithListQuery = function (listQuery, logger, eachQueryNextCallback) {
    var fetchList = function (query) {
        var hasNext = query.hasNext;
        if (hasNext) {
            query.next().then(function (users) {
                eachQueryNextCallback(users);
                fetchList(query);
            }).catch(function (error) {
                logger.warning('OpenChannel | FetchUserList failed', error);
            });
        }
        else {
            logger.info('OpenChannel | FetchUserList finished');
        }
    };
    logger.info('OpenChannel | FetchUserList start', listQuery);
    fetchList(listQuery);
};

var bundle_DQdztuN4_SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
var bundle_DQdztuN4_SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';
var bundle_DQdztuN4_RESET_MESSAGES = 'RESET_MESSAGES';
var EXIT_CURRENT_CHANNEL = 'EXIT_CURRENT_CHANNEL';
var GET_PREV_MESSAGES_START = 'GET_PREV_MESSAGES_START';
var GET_PREV_MESSAGES_SUCESS = 'GET_PREV_MESSAGES_SUCESS';
var GET_PREV_MESSAGES_FAIL = 'GET_PREV_MESSAGES_FAIL';
var SENDING_MESSAGE_FAILED = 'SENDING_MESSAGE_FAILED';
var SENDING_MESSAGE_SUCCEEDED = 'SENDING_MESSAGE_SUCCEEDED';
var SENDING_MESSAGE_START = 'SENDING_MESSAGE_START';
var RESENDING_MESSAGE_START = 'RESENDING_MESSAGE_START';
var FETCH_PARTICIPANT_LIST = 'FETCH_PARTICIPANT_LIST';
var FETCH_BANNED_USER_LIST = 'FETCH_BANNED_USER_LIST';
var FETCH_MUTED_USER_LIST = 'FETCH_MUTED_USER_LIST';
var TRIM_MESSAGE_LIST = 'TRIM_MESSAGE_LIST';
// event handlers
var bundle_DQdztuN4_ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';
var bundle_DQdztuN4_ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';
var bundle_DQdztuN4_ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';
var bundle_DQdztuN4_ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';
var ON_OPERATOR_UPDATED = 'ON_OPERATOR_UPDATED';
var ON_USER_ENTERED = 'ON_USER_ENTERED';
var ON_USER_EXITED = 'ON_USER_EXITED';
var ON_USER_MUTED = 'ON_USER_MUTED';
var ON_USER_UNMUTED = 'ON_USER_UNMUTED';
var ON_USER_BANNED = 'ON_USER_BANNED';
var ON_USER_UNBANNED = 'ON_USER_UNBANNED';
var bundle_DQdztuN4_ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';
var bundle_DQdztuN4_ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';
var bundle_DQdztuN4_ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';
var bundle_DQdztuN4_ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';
var ON_META_DATA_CREATED = 'ON_META_DATA_CREATED';
var ON_META_DATA_UPDATED = 'ON_META_DATA_UPDATED';
var ON_META_DATA_DELETED = 'ON_META_DATA_DELETED';
var ON_META_COUNTERS_CREATED = 'ON_META_COUNTERS_CREATED';
var ON_META_COUNTERS_UPDATED = 'ON_META_COUNTERS_UPDATED';
var ON_META_COUNTERS_DELETED = 'ON_META_COUNTERS_DELETED';
var ON_MENTION_RECEIVED = 'ON_MENTION_RECEIVED';

function bundle_DQdztuN4_reducer(state, action) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    switch (action.type) {
        case bundle_DQdztuN4_RESET_MESSAGES: {
            return __assign(__assign({}, state), { allMessages: [] });
        }
        case EXIT_CURRENT_CHANNEL: {
            if (((_a = action.payload) === null || _a === void 0 ? void 0 : _a.url) === ((_b = state.currentOpenChannel) === null || _b === void 0 ? void 0 : _b.url)) {
                return __assign(__assign({}, state), { currentOpenChannel: null });
            }
            return state;
        }
        case bundle_DQdztuN4_SET_CURRENT_CHANNEL: {
            var gottenChannel = action.payload;
            var operators = gottenChannel.operators;
            if (!state.isInvalid
                && state.currentOpenChannel
                && state.currentOpenChannel.url
                && (state.currentOpenChannel.url === gottenChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { currentOpenChannel: gottenChannel, isInvalid: false, operators: operators, participants: operators, bannedParticipantIds: [], mutedParticipantIds: [] });
        }
        case bundle_DQdztuN4_SET_CHANNEL_INVALID: {
            return __assign(__assign({}, state), { isInvalid: true });
        }
        case GET_PREV_MESSAGES_START: {
            return __assign(__assign({}, state), { loading: true });
        }
        case GET_PREV_MESSAGES_SUCESS:
        case GET_PREV_MESSAGES_FAIL: {
            var isFailed = (action.type === GET_PREV_MESSAGES_FAIL);
            var _j = action.payload, _k = _j.currentOpenChannel, currentOpenChannel = _k === void 0 ? {} : _k, _l = _j.messages, messages = _l === void 0 ? [] : _l, hasMore = _j.hasMore, lastMessageTimestamp = _j.lastMessageTimestamp;
            var actionChannelUrl = currentOpenChannel.url;
            var receivedMessages_1 = (isFailed ? [] : messages);
            var _hasMore = isFailed ? false : hasMore;
            var _lastMessageTimestamp = isFailed ? 0 : lastMessageTimestamp;
            var stateChannel = state.currentOpenChannel;
            var stateChannelUrl = stateChannel === null || stateChannel === void 0 ? void 0 : stateChannel.url;
            if (actionChannelUrl !== stateChannelUrl) {
                return state;
            }
            var filteredAllMessages = state.allMessages.filter(function (message) { return (!(receivedMessages_1.find(function (_a) {
                var messageId = _a.messageId;
                return compareIds(messageId, message.messageId);
            }))); });
            return __assign(__assign({}, state), { loading: false, initialized: true, hasMore: _hasMore, lastMessageTimestamp: _lastMessageTimestamp, allMessages: __spreadArray(__spreadArray([], receivedMessages_1, true), filteredAllMessages, true) });
        }
        case SENDING_MESSAGE_START: {
            var _m = action.payload, message_1 = _m.message, channel = _m.channel;
            if ((channel === null || channel === void 0 ? void 0 : channel.url) !== ((_c = state.currentOpenChannel) === null || _c === void 0 ? void 0 : _c.url)
                || state.allMessages.some(function (m) { return m.reqId === message_1.reqId; })
            // Handing failed first than sending start issue
            ) {
                return state;
            }
            return __assign(__assign({}, state), { allMessages: __spreadArray(__spreadArray([], state.allMessages, true), [
                    message_1,
                ], false) });
        }
        case SENDING_MESSAGE_SUCCEEDED: {
            var sentMessage_1 = action.payload;
            var newMessages = state.allMessages.map(function (m) { return (compareIds(m.reqId, sentMessage_1.reqId) ? sentMessage_1 : m); });
            return __assign(__assign({}, state), { allMessages: newMessages });
        }
        case SENDING_MESSAGE_FAILED: {
            var sentMessage_2 = action.payload;
            sentMessage_2.sendingStatus = 'failed';
            if (!(state.allMessages.some(function (m) { return (m === null || m === void 0 ? void 0 : m.reqId) === (sentMessage_2 === null || sentMessage_2 === void 0 ? void 0 : sentMessage_2.reqId); }))) {
                // Handling failed first than sending start issue
                return __assign(__assign({}, state), { allMessages: __spreadArray(__spreadArray([], state.allMessages.filter(function (m) { return !compareIds(m.reqId, sentMessage_2); }), true), [
                        sentMessage_2,
                    ], false) });
            }
            else {
                return __assign(__assign({}, state), { allMessages: state.allMessages.map(function (m) { return (compareIds(m.reqId, sentMessage_2.reqId) ? sentMessage_2 : m); }) });
            }
        }
        case TRIM_MESSAGE_LIST: {
            var allMessages = state.allMessages;
            var messageLimit = (_d = action.payload) === null || _d === void 0 ? void 0 : _d.messageLimit;
            if (messageLimit
                && messageLimit > 0
                && (allMessages === null || allMessages === void 0 ? void 0 : allMessages.length) > messageLimit) {
                var sliceAt = allMessages.length - messageLimit;
                return __assign(__assign({}, state), { allMessages: allMessages.slice(sliceAt) });
            }
            return state;
        }
        case RESENDING_MESSAGE_START: {
            var eventedChannel = action.payload.channel;
            var resentMessage_1 = action.payload.message;
            if (eventedChannel.url !== ((_e = state.currentOpenChannel) === null || _e === void 0 ? void 0 : _e.url)) {
                return state;
            }
            return __assign(__assign({}, state), { allMessages: state.allMessages.map(function (m) { return (compareIds(m.reqId, resentMessage_1.reqId) ? resentMessage_1 : m); }) });
        }
        case FETCH_PARTICIPANT_LIST: {
            var eventedChannel = action.payload.channel;
            var fetchedParticipantList = action.payload.users;
            if (eventedChannel.url !== ((_f = state.currentOpenChannel) === null || _f === void 0 ? void 0 : _f.url)) {
                return state;
            }
            return __assign(__assign({}, state), { participants: __spreadArray(__spreadArray([], state.participants, true), fetchedParticipantList, true) });
        }
        case FETCH_BANNED_USER_LIST: {
            var eventedChannel = action.payload.channel;
            var fetchedBannedUserList = action.payload.users;
            if ((eventedChannel.url !== ((_g = state.currentOpenChannel) === null || _g === void 0 ? void 0 : _g.url))
                || !(fetchedBannedUserList.every(function (user) { return typeof user.userId === 'string'; }))) {
                return state;
            }
            return __assign(__assign({}, state), { bannedParticipantIds: __spreadArray(__spreadArray([], state.bannedParticipantIds, true), fetchedBannedUserList.map(function (user) { return user.userId; }), true) });
        }
        case FETCH_MUTED_USER_LIST: {
            var eventedChannel = action.payload.channel;
            var fetchedMutedUserList = action.payload.users;
            if ((eventedChannel.url !== ((_h = state.currentOpenChannel) === null || _h === void 0 ? void 0 : _h.url))
                || !(fetchedMutedUserList.every(function (user) { return typeof user.userId === 'string'; }))) {
                return state;
            }
            return __assign(__assign({}, state), { mutedParticipantIds: __spreadArray(__spreadArray([], state.mutedParticipantIds, true), fetchedMutedUserList.map(function (user) { return user.userId; }), true) });
        }
        // events
        case bundle_DQdztuN4_ON_MESSAGE_RECEIVED: {
            var eventedChannel = action.payload.channel;
            var receivedMessage = action.payload.message;
            var currentOpenChannel = state.currentOpenChannel;
            if (!compareIds(eventedChannel.url, currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url)
                || (!(state.allMessages.map(function (message) { return message.messageId; }).indexOf(receivedMessage.messageId) < 0))) {
                return state;
            }
            return __assign(__assign({}, state), { allMessages: __spreadArray(__spreadArray([], state.allMessages, true), [receivedMessage], false) });
        }
        case bundle_DQdztuN4_ON_MESSAGE_UPDATED: {
            var eventedChannel = action.payload.channel;
            var updatedMessage_1 = action.payload.message;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { allMessages: state.allMessages.map(function (message) { return (message.isIdentical(updatedMessage_1)
                    ? updatedMessage_1
                    : message); }) });
        }
        case bundle_DQdztuN4_ON_MESSAGE_DELETED: {
            var eventedChannel = action.payload.channel;
            var deletedMessageId_1 = action.payload.messageId;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { allMessages: state.allMessages.filter(function (message) { return (!compareIds(message.messageId, deletedMessageId_1)); }) });
        }
        case bundle_DQdztuN4_ON_MESSAGE_DELETED_BY_REQ_ID: {
            return __assign(__assign({}, state), { allMessages: state.allMessages.filter(function (m) { return (!compareIds(m.reqId, action.payload)); }) });
        }
        case ON_OPERATOR_UPDATED: {
            var eventedChannel = action.payload.channel;
            var updatedOperators = action.payload.operators;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { currentOpenChannel: eventedChannel, operators: updatedOperators });
        }
        case ON_USER_ENTERED: {
            var eventedChannel = action.payload.channel;
            var enteredUser = action.payload.user;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { participants: __spreadArray(__spreadArray([], state.participants, true), [enteredUser], false) });
        }
        case ON_USER_EXITED: {
            var eventedChannel = action.payload.channel;
            var exitedUser_1 = action.payload.user;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { participants: state.participants.filter(function (participant) { return (!compareIds(participant.userId, exitedUser_1.userId)); }) });
        }
        case ON_USER_MUTED: {
            var eventedChannel = action.payload.channel;
            var mutedUser = action.payload.user;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel
                || (currentChannel.url && (currentChannel.url !== eventedChannel.url))
                || state.mutedParticipantIds.indexOf(mutedUser.userId) >= 0) {
                return state;
            }
            return __assign(__assign({}, state), { mutedParticipantIds: __spreadArray(__spreadArray([], state.mutedParticipantIds, true), [mutedUser.userId], false) });
        }
        case ON_USER_UNMUTED: {
            var eventedChannel = action.payload.channel;
            var unmutedUser_1 = action.payload.user;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel
                || (currentChannel.url && (currentChannel.url !== eventedChannel.url))
                || state.mutedParticipantIds.indexOf(unmutedUser_1.userId) < 0) {
                return state;
            }
            return __assign(__assign({}, state), { mutedParticipantIds: state.mutedParticipantIds.filter(function (userId) { return userId !== unmutedUser_1.userId; }) });
        }
        case ON_USER_BANNED: {
            var eventedChannel = action.payload.channel;
            var bannedUser = action.payload.user;
            var currentUser = action.payload.currentUser;
            var currentChannel = state.currentOpenChannel;
            if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url) && (bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId)) {
                return __assign(__assign({}, state), { currentOpenChannel: null });
            }
            else if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url)) {
                return __assign(__assign({}, state), { bannedParticipantIds: __spreadArray(__spreadArray([], state.bannedParticipantIds, true), [bannedUser.userId], false) });
            }
            return state;
        }
        case ON_USER_UNBANNED: {
            var eventedChannel = action.payload.channel;
            var unbannedUser_1 = action.payload.user;
            var currentChannel = state.currentOpenChannel;
            if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url)) {
                return __assign(__assign({}, state), { bannedParticipantIds: state.bannedParticipantIds.filter(function (userId) { return userId !== unbannedUser_1.userId; }) });
            }
            return state;
        }
        case bundle_DQdztuN4_ON_CHANNEL_FROZEN: {
            var frozenChannel = action.payload;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== frozenChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { frozen: true });
        }
        case bundle_DQdztuN4_ON_CHANNEL_UNFROZEN: {
            var unfrozenChannel = action.payload;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== unfrozenChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { frozen: false });
        }
        case bundle_DQdztuN4_ON_CHANNEL_CHANGED: {
            var changedChannel = action.payload;
            var currentChannel = state.currentOpenChannel;
            if (!currentChannel || currentChannel.url && (currentChannel.url !== changedChannel.url)) {
                return state;
            }
            return __assign(__assign({}, state), { currentOpenChannel: changedChannel });
        }
        case bundle_DQdztuN4_ON_CHANNEL_DELETED: {
            var deletedChannelUrl = action.payload;
            var currentChannel = state === null || state === void 0 ? void 0 : state.currentOpenChannel;
            if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === deletedChannelUrl) {
                return __assign(__assign({}, state), { currentOpenChannel: null });
            }
            return state;
        }
        case ON_META_DATA_CREATED: {
            // const eventedChannel = action.payload.channel;
            // const createdMetaData = action.payload.metaData;
            // return {
            //   ...state
            // };
            return state;
        }
        case ON_META_DATA_UPDATED: {
            // const eventedChannel = action.payload.channel;
            // const updatedMetaData = action.payload.metaData;
            // return {
            //   ...state
            // };
            return state;
        }
        case ON_META_DATA_DELETED: {
            // const eventedChannel = action.payload.channel;
            // const deletedMetaDataKeys = action.payload.metaDataKeys;
            // return {
            //   ...state
            // };
            return state;
        }
        case ON_META_COUNTERS_CREATED: {
            // const eventedChannel = action.payload.channel;
            // const createdMetaCounter = action.payload.metaCounter;
            // return {
            //   ...state
            // };
            return state;
        }
        case ON_META_COUNTERS_UPDATED: {
            // const eventedChannel = action.payload.channel;
            // const updatedMetaCounter = action.payload.metaCounter;
            // return {
            //   ...state
            // };
            return state;
        }
        case ON_META_COUNTERS_DELETED: {
            // const eventedChannel = action.payload.channel;
            // const deletedMetaCounterKeys = action.payload.metaCounterKeys;
            // return {
            //   ...state
            // };
            return state;
        }
        case ON_MENTION_RECEIVED: {
            // const eventedChannel = action.payload.channel;
            // const mentionedMessage = action.payload.message;
            // return {
            //   ...state
            // };
            return state;
        }
        default:
            return state;
    }
}

var bundle_DQdztuN4_initialState = {
    allMessages: [],
    loading: false,
    initialized: false,
    currentOpenChannel: null,
    isInvalid: false,
    hasMore: false,
    lastMessageTimestamp: 0,
    frozen: false,
    operators: [],
    participants: [],
    bannedParticipantIds: [],
    mutedParticipantIds: [],
};

function bundle_DQdztuN4_useSetChannel(_a, _b) {
    var channelUrl = _a.channelUrl, sdkInit = _a.sdkInit, fetchingParticipants = _a.fetchingParticipants, userId = _a.userId, currentOpenChannel = _a.currentOpenChannel;
    var sdk = _b.sdk, logger = _b.logger, messagesDispatcher = _b.messagesDispatcher;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        if (channelUrl && sdkInit && (sdk === null || sdk === void 0 ? void 0 : sdk.openChannel)) {
            if (currentOpenChannel && (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.exit)) {
                (_a = currentOpenChannel.exit) === null || _a === void 0 ? void 0 : _a.call(currentOpenChannel).then(function () {
                    logger.info('OpenChannel | useSetChannel: Exit from the previous open channel', currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url);
                    messagesDispatcher({
                        type: EXIT_CURRENT_CHANNEL,
                        payload: currentOpenChannel,
                    });
                });
            }
            logger.info('OpenChannel | useSetChannel: Fetching channel', channelUrl);
            sdk.openChannel.getChannel(channelUrl).then(function (openChannel) {
                logger.info('OpenChannel | useSetChannel: Succeeded to fetch channel', openChannel);
                messagesDispatcher({
                    type: bundle_DQdztuN4_SET_CURRENT_CHANNEL,
                    payload: openChannel,
                });
                openChannel.enter().then(function () {
                    if (openChannel.isOperator(userId)) { // only operator has a permission to fetch these list
                        var bannedParticipantListQuery = openChannel.createBannedUserListQuery();
                        var mutedParticipantListQuery = openChannel.createMutedUserListQuery();
                        fetchWithListQuery(bannedParticipantListQuery, logger, function (users) {
                            messagesDispatcher({
                                type: FETCH_BANNED_USER_LIST,
                                payload: {
                                    channel: openChannel,
                                    users: users,
                                },
                            });
                        });
                        fetchWithListQuery(mutedParticipantListQuery, logger, function (users) {
                            messagesDispatcher({
                                type: FETCH_MUTED_USER_LIST,
                                payload: {
                                    channel: openChannel,
                                    users: users,
                                },
                            });
                        });
                    }
                    else {
                        openChannel.getMyMutedInfo()
                            .then(function (mutedInfo) {
                            if (mutedInfo === null || mutedInfo === void 0 ? void 0 : mutedInfo.isMuted) {
                                messagesDispatcher({
                                    type: FETCH_MUTED_USER_LIST,
                                    payload: {
                                        channel: openChannel,
                                        users: [sdk === null || sdk === void 0 ? void 0 : sdk.currentUser],
                                    },
                                });
                            }
                        });
                    }
                    if (fetchingParticipants) {
                        // fetch participants list
                        var participantListQuery = openChannel.createParticipantListQuery({
                            limit: openChannel.participantCount,
                        });
                        fetchWithListQuery(participantListQuery, logger, function (users) {
                            messagesDispatcher({
                                type: FETCH_PARTICIPANT_LIST,
                                payload: {
                                    channel: openChannel,
                                    users: users,
                                },
                            });
                        });
                    }
                }).catch(function (error) {
                    logger.warning('OpenChannel | useSetChannel: Failed to enter channel', { channelUrl: channelUrl, error: error });
                    messagesDispatcher({
                        type: bundle_DQdztuN4_SET_CHANNEL_INVALID,
                        payload: null,
                    });
                });
            }).catch(function (error) {
                logger.warning('OpenChannel | useSetChannel: Failed to fetch channel', { channelUrl: channelUrl, error: error });
                messagesDispatcher({
                    type: bundle_DQdztuN4_SET_CHANNEL_INVALID,
                    payload: null,
                });
            });
        }
    }, [channelUrl, sdkInit, fetchingParticipants]);
}

function bundle_DQdztuN4_useHandleChannelEvents(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel, checkScrollBottom = _a.checkScrollBottom;
    var sdk = _b.sdk, logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, scrollRef = _b.scrollRef;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        var messageReceiverId = uuidv4();
        if (currentOpenChannel && currentOpenChannel.url && ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _a === void 0 ? void 0 : _a.addOpenChannelHandler)) {
            logger.info('OpenChannel | useHandleChannelEvents: Setup evnet handler', messageReceiverId);
            var channelHandlerParams = {
                onMessageReceived: function (channel, message) {
                    var scrollToEnd = checkScrollBottom();
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMessageReceived', { channelUrl: channelUrl, message: message });
                    messagesDispatcher({
                        type: bundle_DQdztuN4_ON_MESSAGE_RECEIVED,
                        payload: { channel: channel, message: message },
                    });
                    if (scrollToEnd) {
                        try {
                            setTimeout(function () {
                                bundle_DQdztuN4_scrollIntoLast(0, scrollRef);
                            });
                        }
                        catch (error) {
                            logger.warning('OpenChannel | onMessageReceived | scroll to end failed');
                        }
                    }
                },
                onMessageUpdated: function (channel, message) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMessageUpdated', { channelUrl: channelUrl, message: message });
                    messagesDispatcher({
                        type: bundle_DQdztuN4_ON_MESSAGE_UPDATED,
                        payload: { channel: channel, message: message },
                    });
                },
                onMessageDeleted: function (channel, messageId) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMessageDeleted', { channelUrl: channelUrl, messageId: messageId });
                    messagesDispatcher({
                        type: bundle_DQdztuN4_ON_MESSAGE_DELETED,
                        payload: { channel: channel, messageId: messageId },
                    });
                },
                onOperatorUpdated: function (channel, operators) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onOperatorUpdated', { channelUrl: channelUrl, operators: operators });
                    messagesDispatcher({
                        type: ON_OPERATOR_UPDATED,
                        payload: { channel: channel, operators: operators },
                    });
                },
                onUserEntered: function (channel, user) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onUserEntered', { channelUrl: channelUrl, user: user });
                    messagesDispatcher({
                        type: ON_USER_ENTERED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserExited: function (channel, user) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onUserExited', { channelUrl: channelUrl, user: user });
                    messagesDispatcher({
                        type: ON_USER_EXITED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserMuted: function (channel, user) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onUserMuted', { channelUrl: channelUrl, user: user });
                    messagesDispatcher({
                        type: ON_USER_MUTED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserUnmuted: function (channel, user) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onUserUnmuted', { channelUrl: channelUrl, user: user });
                    messagesDispatcher({
                        type: ON_USER_UNMUTED,
                        payload: { channel: channel, user: user },
                    });
                },
                onUserBanned: function (channel, user) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onUserBanned', { channelUrl: channelUrl, user: user });
                    messagesDispatcher({
                        type: ON_USER_BANNED,
                        payload: { channel: channel, user: user, currentUser: sdk === null || sdk === void 0 ? void 0 : sdk.currentUser },
                    });
                },
                onUserUnbanned: function (channel, user) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onUserUnbanned', { channelUrl: channelUrl, user: user });
                    messagesDispatcher({
                        type: ON_USER_UNBANNED,
                        payload: { channel: channel, user: user },
                    });
                },
                onChannelFrozen: function (channel) {
                    logger.info('OpenChannel | useHandleChannelEvents: onChannelFrozen', channel);
                    messagesDispatcher({
                        type: bundle_DQdztuN4_ON_CHANNEL_FROZEN,
                        payload: channel,
                    });
                },
                onChannelUnfrozen: function (channel) {
                    logger.info('OpenChannel | useHandleChannelEvents: onChannelUnfrozen', channel);
                    messagesDispatcher({
                        type: bundle_DQdztuN4_ON_CHANNEL_UNFROZEN,
                        payload: channel,
                    });
                },
                onChannelChanged: function (channel) {
                    logger.info('OpenChannel | useHandleChannelEvents: onChannelChanged', channel);
                    messagesDispatcher({
                        type: bundle_DQdztuN4_ON_CHANNEL_CHANGED,
                        payload: channel,
                    });
                },
                onMetaDataCreated: function (channel, metaData) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMetaDataCreated', { channelUrl: channelUrl, metaData: metaData });
                    messagesDispatcher({
                        type: ON_META_DATA_CREATED,
                        payload: { channel: channel, metaData: metaData },
                    });
                },
                onMetaDataUpdated: function (channel, metaData) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMetaDataUpdated', { channelUrl: channelUrl, metaData: metaData });
                    messagesDispatcher({
                        type: ON_META_DATA_UPDATED,
                        payload: { channel: channel, metaData: metaData },
                    });
                },
                onMetaDataDeleted: function (channel, metaDataKeys) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMetaDataDeleted', { channelUrl: channelUrl, metaDataKeys: metaDataKeys });
                    messagesDispatcher({
                        type: ON_META_DATA_DELETED,
                        payload: { channel: channel, metaDataKeys: metaDataKeys },
                    });
                },
                onMetaCounterCreated: function (channel, metaCounter) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersCreated', { channelUrl: channelUrl, metaCounter: metaCounter });
                    messagesDispatcher({
                        type: ON_META_COUNTERS_CREATED,
                        payload: { channel: channel, metaCounter: metaCounter },
                    });
                },
                onMetaCounterUpdated: function (channel, metaCounter) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersUpdated', { channelUrl: channelUrl, metaCounter: metaCounter });
                    messagesDispatcher({
                        type: ON_META_COUNTERS_UPDATED,
                        payload: { channel: channel, metaCounter: metaCounter },
                    });
                },
                onMetaCounterDeleted: function (channel, metaCounterKeys) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersDeleted', { channelUrl: channelUrl, metaCounterKeys: metaCounterKeys });
                    messagesDispatcher({
                        type: ON_META_COUNTERS_DELETED,
                        payload: { channel: channel, metaCounterKeys: metaCounterKeys },
                    });
                },
                onMentionReceived: function (channel, message) {
                    var channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
                    logger.info('OpenChannel | useHandleChannelEvents: onMentionReceived', { channelUrl: channelUrl, message: message });
                    messagesDispatcher({
                        type: ON_MENTION_RECEIVED,
                        payload: { channel: channel, message: message },
                    });
                },
                onChannelDeleted: function (channelUrl, channelType) {
                    if (channelType === _bundle_0b1520ed["d" /* C */].OPEN && (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url) === channelUrl) {
                        messagesDispatcher({
                            type: bundle_DQdztuN4_ON_CHANNEL_DELETED,
                            payload: channelUrl,
                        });
                    }
                },
            };
            var ChannelHandler = new openChannel_De(channelHandlerParams);
            (_b = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _b === void 0 ? void 0 : _b.addOpenChannelHandler(messageReceiverId, ChannelHandler);
        }
        return function () {
            var _a;
            if ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _a === void 0 ? void 0 : _a.removeOpenChannelHandler) {
                logger.info('OpenChannel | useHandleChannelEvents: Removing message receiver handler', messageReceiverId);
                sdk.openChannel.removeOpenChannelHandler(messageReceiverId);
            }
        };
    }, [currentOpenChannel]);
}

function bundle_DQdztuN4_useInitialMessagesFetch(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel, userFilledMessageListParams = _a.userFilledMessageListParams;
    var logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, scrollRef = _b.scrollRef;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        logger.info('OpenChannel | useInitialMessagesFetch: Setup started', currentOpenChannel);
        messagesDispatcher({
            type: bundle_DQdztuN4_RESET_MESSAGES,
            payload: null,
        });
        if (currentOpenChannel && currentOpenChannel.getMessagesByTimestamp) {
            var messageListParams_1 = {
                nextResultSize: 0,
                prevResultSize: 30,
                isInclusive: true,
                includeReactions: false,
            };
            if (userFilledMessageListParams) {
                Object.keys(userFilledMessageListParams).forEach(function (key) {
                    // @ts-ignore
                    messageListParams_1[key] = userFilledMessageListParams[key];
                });
                logger.info('OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams');
            }
            logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages', { currentOpenChannel: currentOpenChannel, messageListParams: messageListParams_1 });
            messagesDispatcher({
                type: GET_PREV_MESSAGES_START,
                payload: null,
            });
            currentOpenChannel.getMessagesByTimestamp(new Date().getTime(), messageListParams_1).then(function (messages) {
                logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages succeeded', messages);
                var hasMore = (messages && messages.length > 0);
                var lastMessageTimestamp = hasMore ? messages[0].createdAt : null;
                messagesDispatcher({
                    type: GET_PREV_MESSAGES_SUCESS,
                    payload: {
                        currentOpenChannel: currentOpenChannel,
                        messages: messages,
                        hasMore: hasMore,
                        lastMessageTimestamp: lastMessageTimestamp,
                    },
                });
                setTimeout(function () { bundle_DQdztuN4_scrollIntoLast(0, scrollRef); });
            }).catch(function (error) {
                logger.error('OpenChannel | useInitialMessagesFetch: Fetching messages failed', error);
                messagesDispatcher({
                    type: GET_PREV_MESSAGES_FAIL,
                    payload: {
                        currentOpenChannel: currentOpenChannel,
                        messages: [],
                        hasMore: false,
                        lastMessageTimestamp: 0,
                    },
                });
            });
        }
    }, [currentOpenChannel, userFilledMessageListParams]);
}

function bundle_DQdztuN4_useScrollCallback(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel, lastMessageTimestamp = _a.lastMessageTimestamp, fetchMore = _a.fetchMore;
    var sdk = _b.sdk, logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, hasMore = _b.hasMore, userFilledMessageListParams = _b.userFilledMessageListParams;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (callback) {
        if (fetchMore && hasMore) {
            logger.info('OpenChannel | useScrollCallback: start');
            var messageListParams_1 = {
                prevResultSize: 30,
                includeReactions: false,
                nextResultSize: 0,
            };
            if (userFilledMessageListParams) {
                Object.keys(userFilledMessageListParams).forEach(function (key) {
                    // @ts-ignore
                    messageListParams_1[key] = userFilledMessageListParams[key];
                });
                logger.info('OpenChannel | useScrollCallback: Used userFilledMessageListParams', userFilledMessageListParams);
            }
            logger.info('OpenChannel | useScrollCallback: Fetching messages', { currentOpenChannel: currentOpenChannel, messageListParams: messageListParams_1 });
            currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.getMessagesByTimestamp(lastMessageTimestamp || new Date().getTime(), messageListParams_1).then(function (messages) {
                logger.info('OpenChannel | useScrollCallback: Fetching messages succeeded', messages);
                var hasMore = (messages && messages.length > 0);
                var lastMessageTimestamp = hasMore ? messages[0].createdAt : null;
                messagesDispatcher({
                    type: GET_PREV_MESSAGES_SUCESS,
                    payload: {
                        currentOpenChannel: currentOpenChannel,
                        messages: messages,
                        hasMore: hasMore,
                        lastMessageTimestamp: lastMessageTimestamp,
                    },
                });
                setTimeout(function () {
                    callback();
                });
            }).catch(function (error) {
                logger.error('OpenChannel | useScrollCallback: Fetching messages failed', error);
                messagesDispatcher({
                    type: GET_PREV_MESSAGES_FAIL,
                    payload: {
                        currentOpenChannel: currentOpenChannel,
                        messages: [],
                        hasMore: false,
                        lastMessageTimestamp: 0,
                    },
                });
            });
        }
    }, [currentOpenChannel, lastMessageTimestamp, fetchMore, sdk]);
}

function useCheckScrollBottom(_a, _b) {
    var conversationScrollRef = _a.conversationScrollRef;
    var logger = _b.logger;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        var isBottom = true;
        if (conversationScrollRef && (conversationScrollRef === null || conversationScrollRef === void 0 ? void 0 : conversationScrollRef.current)) {
            try {
                var conversationScroll = conversationScrollRef.current;
                isBottom = conversationScroll.scrollHeight <= conversationScroll.scrollTop + conversationScroll.clientHeight;
            }
            catch (error) {
                logger.error('OpenChannel | useCheckScrollBottom', error);
            }
        }
        return isBottom;
    }, [conversationScrollRef]);
}

function bundle_DQdztuN4_useSendMessageCallback(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel, onBeforeSendUserMessage = _a.onBeforeSendUserMessage, messageInputRef = _a.messageInputRef;
    var sdk = _b.sdk, logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, scrollRef = _b.scrollRef;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        var _a;
        if (sdk) {
            var text = (_a = messageInputRef.current) === null || _a === void 0 ? void 0 : _a.innerText;
            var createParamsDefault = function (txt) {
                var message = txt;
                var params = {
                    message: message,
                };
                return params;
            };
            var createCustomParams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';
            if (createCustomParams) {
                logger.info('OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);
            }
            var params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text !== null && text !== void 0 ? text : '') : createParamsDefault(text !== null && text !== void 0 ? text : '');
            logger.info('OpenChannel | useSendMessageCallback: Sending message has started', params);
            var pendingMsg_1;
            currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.sendUserMessage(params).onPending(function (pendingMessage) {
                messagesDispatcher({
                    type: SENDING_MESSAGE_START,
                    payload: {
                        message: pendingMessage,
                        channel: currentOpenChannel,
                    },
                });
                pendingMsg_1 = pendingMessage;
                setTimeout(function () { return bundle_DQdztuN4_scrollIntoLast(0, scrollRef); });
            }).onSucceeded(function (message) {
                logger.info('OpenChannel | useSendMessageCallback: Sending message succeeded', message);
                messagesDispatcher({
                    type: SENDING_MESSAGE_SUCCEEDED,
                    payload: message,
                });
            }).onFailed(function (error) {
                logger.warning('OpenChannel | useSendMessageCallback: Sending message failed', error);
                messagesDispatcher({
                    type: SENDING_MESSAGE_FAILED,
                    payload: pendingMsg_1,
                });
                // https://sendbird.com/docs/chat/v3/javascript/guides/error-codes#2-server-error-codes
                // TODO: Do we need to handle the error cases?
                // @ts-ignore
                if ((error === null || error === void 0 ? void 0 : error.code) === 900041) {
                    messagesDispatcher({
                        type: ON_USER_MUTED,
                        payload: {
                            channel: currentOpenChannel,
                            user: sdk.currentUser,
                        },
                    });
                }
            });
        }
    }, [currentOpenChannel, onBeforeSendUserMessage, messageInputRef]);
}

function useFileUploadCallback(_a, _b) {
    var _this = this;
    var currentOpenChannel = _a.currentOpenChannel, _c = _a.imageCompression, imageCompression = _c === void 0 ? {} : _c, onBeforeSendFileMessage = _a.onBeforeSendFileMessage;
    var sdk = _b.sdk, logger = _b.logger, messagesDispatcher = _b.messagesDispatcher, scrollRef = _b.scrollRef;
    var stringSet = useLocalization().stringSet;
    var openModal = useGlobalModalContext().openModal;
    var config = useSendbirdStateContext().config;
    var uikitUploadSizeLimit = config.uikitUploadSizeLimit;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (files) { return __awaiter(_this, void 0, void 0, function () {
        var file_1, createCustomParams, createParamsDefault, compressedFiles, compressedFile, params;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!sdk) return [3 /*break*/, 2];
                    file_1 = Array.isArray(files) ? files[0] : files;
                    createCustomParams = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';
                    createParamsDefault = function (file) {
                        var params = {};
                        params.file = file;
                        return params;
                    };
                    /**
                     * Validate file sizes
                     * The default value of uikitUploadSizeLimit is 25MiB
                     */
                    if (file_1.size > uikitUploadSizeLimit) {
                        logger.info("OpenChannel | useFileUploadCallback: Cannot upload file size exceeding ".concat(uikitUploadSizeLimit));
                        openModal({
                            modalProps: {
                                titleText: stringSet.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace('%d', "".concat(Math.floor(uikitUploadSizeLimit / bundle_DhBuJR0w["e" /* O */]))),
                                hideFooter: true,
                            },
                            childElement: function (_a) {
                                var closeModal = _a.closeModal;
                                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, { type: ButtonTypes.PRIMARY, submitText: stringSet.BUTTON__OK, hideCancelButton: true, onCancel: closeModal, onSubmit: closeModal }));
                            },
                        });
                        return [2 /*return*/];
                    }
                    return [4 /*yield*/, compressImages({
                            files: [file_1],
                            imageCompression: imageCompression,
                            logger: logger,
                        })];
                case 1:
                    compressedFiles = (_a.sent()).compressedFiles;
                    compressedFile = compressedFiles[0];
                    // Send FileMessage
                    if (createCustomParams) {
                        logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
                    }
                    params = onBeforeSendFileMessage ? onBeforeSendFileMessage(compressedFile) : createParamsDefault(compressedFile);
                    logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);
                    currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.sendFileMessage(params).onPending(function (pendingMessage) {
                        messagesDispatcher({
                            type: SENDING_MESSAGE_START,
                            payload: {
                                // TODO: remove data pollution
                                message: __assign(__assign({}, pendingMessage), { url: URL.createObjectURL(file_1), 
                                    // pending thumbnail message seems to be failed
                                    requestState: 'pending', isUserMessage: pendingMessage.isUserMessage, isFileMessage: pendingMessage.isFileMessage, isAdminMessage: pendingMessage.isAdminMessage, isMultipleFilesMessage: pendingMessage.isMultipleFilesMessage }),
                                channel: currentOpenChannel,
                            },
                        });
                        setTimeout(function () { return bundle_DQdztuN4_scrollIntoLast(0, scrollRef); });
                    }).onSucceeded(function (message) {
                        logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);
                        messagesDispatcher({
                            type: SENDING_MESSAGE_SUCCEEDED,
                            payload: message,
                        });
                    }).onFailed(function (error, message) {
                        logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', { message: message, error: error });
                        // @ts-ignore
                        message.localUrl = URL.createObjectURL(file_1);
                        // @ts-ignore
                        message.file = file_1;
                        messagesDispatcher({
                            type: SENDING_MESSAGE_FAILED,
                            payload: message,
                        });
                    });
                    _a.label = 2;
                case 2: return [2 /*return*/];
            }
        });
    }); }, [currentOpenChannel, onBeforeSendFileMessage, imageCompression]);
}

function bundle_DQdztuN4_useUpdateMessageCallback(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel, onBeforeSendUserMessage = _a.onBeforeSendUserMessage;
    var logger = _b.logger, messagesDispatcher = _b.messagesDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (messageId, text, callback) {
        var createParamsDefault = function (txt) {
            return {
                message: txt,
            };
        };
        if (onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function') {
            logger.info('OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage');
        }
        var params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);
        currentOpenChannel.updateUserMessage(messageId, params)
            .then(function (message) {
            if (callback) {
                callback();
            }
            logger.info('OpenChannel | useUpdateMessageCallback: Updating message succeeded', { message: message, params: params });
            messagesDispatcher({
                type: bundle_DQdztuN4_ON_MESSAGE_UPDATED,
                payload: {
                    channel: currentOpenChannel,
                    message: message,
                },
            });
        });
    }, [currentOpenChannel, onBeforeSendUserMessage]);
}

function bundle_DQdztuN4_useDeleteMessageCallback(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel;
    var logger = _b.logger, messagesDispatcher = _b.messagesDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (message, callback) {
        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message', message);
        var sendingStatus = message.sendingStatus;
        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message requestState', sendingStatus);
        if (sendingStatus === 'failed' || sendingStatus === 'pending') {
            logger.info('OpenChannel | useDeleteMessageCallback: Deleted message from local', message);
            messagesDispatcher({
                type: bundle_DQdztuN4_ON_MESSAGE_DELETED_BY_REQ_ID,
                payload: message.reqId,
            });
            if (callback) {
                callback();
            }
        }
        else {
            if (!(message.messageType === 'file' || message.messageType === 'user')) {
                return;
            }
            var messageToDelete = message;
            currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.deleteMessage(messageToDelete).then(function () {
                logger.info('OpenChannel | useDeleteMessageCallback: Deleting message on server', sendingStatus);
                if (callback) {
                    callback();
                }
                logger.info('OpenChannel | useDeleteMessageCallback: Deleting message succeeded', message);
                messagesDispatcher({
                    type: bundle_DQdztuN4_ON_MESSAGE_DELETED,
                    payload: {
                        channel: currentOpenChannel,
                        messageId: message.messageId,
                    },
                });
            }).catch(function (error) {
                logger.warning('OpenChannel | useDeleteMessageCallback: Deleting message failed', error);
            });
        }
    }, [currentOpenChannel]);
}

function bundle_DQdztuN4_useResendMessageCallback(_a, _b) {
    var currentOpenChannel = _a.currentOpenChannel;
    var logger = _b.logger, messagesDispatcher = _b.messagesDispatcher;
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (failedMessage) {
        logger.info('OpenChannel | useResendMessageCallback: Resending message has started', failedMessage);
        if (typeof (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.isResendable) === 'boolean'
            && failedMessage.isResendable) {
            // userMessage
            if (failedMessage.isUserMessage()) {
                currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.resendMessage(failedMessage).onPending(function (message) {
                    messagesDispatcher({
                        type: RESENDING_MESSAGE_START,
                        payload: {
                            channel: currentOpenChannel,
                            message: message,
                        },
                    });
                }).onSucceeded(function (message) {
                    logger.info('OpenChannel | useResendMessageCallback: Reseding message succeeded', message);
                    messagesDispatcher({
                        type: SENDING_MESSAGE_SUCCEEDED,
                        payload: message,
                    });
                }).onFailed(function (error, message) {
                    logger.warning('OpenChannel | useResendMessageCallback: Resending message failed', error);
                    messagesDispatcher({
                        type: SENDING_MESSAGE_FAILED,
                        payload: message,
                    });
                });
            }
            // fileMessage
            if (failedMessage.isFileMessage()) {
                currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.resendMessage(failedMessage).onPending(function (message) {
                    messagesDispatcher({
                        type: RESENDING_MESSAGE_START,
                        payload: {
                            channel: currentOpenChannel,
                            message: message,
                        },
                    });
                }).onSucceeded(function (message) {
                    logger.info('OpenChannel | useResendMessageCallback: Resending file message succeeded', message);
                    messagesDispatcher({
                        type: SENDING_MESSAGE_SUCCEEDED,
                        payload: message,
                    });
                }).onFailed(function (error, message) {
                    logger.warning('OpenChannel | useResendMessageCallback: Resending file message failed', error);
                    messagesDispatcher({
                        type: SENDING_MESSAGE_FAILED,
                        payload: message,
                    });
                });
            }
        }
        else {
            // to alert user on console
            // eslint-disable-next-line no-console
            console.error('OpenChannel | useResendMessageCallback: Message is not resendable');
            logger.warning('OpenChannel | useResendMessageCallback: Message is not resendable', failedMessage);
        }
    }, [currentOpenChannel]);
}

var THROTTLE_TIMER = 5000;
// to trim message list so that we wont keep thousands of messages in memory
// We are throttling here; not debouncing
// it will be called once very 5 sec if messagesLength, messageLimit changes
// we check if messagesLength > messageLimit before dispatching action
function useTrimMessageList(_a, _b) {
    var messagesLength = _a.messagesLength, messageLimit = _a.messageLimit;
    var messagesDispatcher = _b.messagesDispatcher, logger = _b.logger;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), inProgress = _c[0], setInProgress = _c[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (inProgress) {
            return;
        }
        if (typeof messagesLength === 'number' && typeof messageLimit === 'number' && messagesLength > messageLimit) {
            logger.info('Trimming MessageList');
            messagesDispatcher({
                type: TRIM_MESSAGE_LIST,
                payload: { messageLimit: messageLimit },
            });
        }
        setInProgress(true);
        setTimeout(function () { setInProgress(false); }, THROTTLE_TIMER);
    }, [messagesLength, messageLimit]);
}

var OpenChannelContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var OpenChannelProvider = function (props) {
    var _a, _b, _c, _d, _e, _f, _g;
    var channelUrl = props.channelUrl, children = props.children, _h = props.isMessageGroupingEnabled, isMessageGroupingEnabled = _h === void 0 ? true : _h, queries = props.queries, onBeforeSendUserMessage = props.onBeforeSendUserMessage, messageLimit = props.messageLimit, onBeforeSendFileMessage = props.onBeforeSendFileMessage, onChatHeaderActionClick = props.onChatHeaderActionClick, onBackClick = props.onBackClick, disableUserProfile = props.disableUserProfile, renderUserProfile = props.renderUserProfile;
    // We didn't decide to support fetching participant list
    var fetchingParticipants = false;
    var globalStore = useSendbirdStateContext();
    var sdk = (_b = (_a = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _a === void 0 ? void 0 : _a.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk;
    var sdkInit = (_d = (_c = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _c === void 0 ? void 0 : _c.sdkStore) === null || _d === void 0 ? void 0 : _d.initialized;
    var user = (_f = (_e = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _e === void 0 ? void 0 : _e.userStore) === null || _f === void 0 ? void 0 : _f.user;
    var config = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config;
    var userId = config.userId, isOnline = config.isOnline, logger = config.logger, pubSub = config.pubSub, imageCompression = config.imageCompression;
    // hook variables
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(bundle_DQdztuN4_reducer, bundle_DQdztuN4_initialState), messagesStore = _j[0], messagesDispatcher = _j[1];
    var allMessages = messagesStore.allMessages, loading = messagesStore.loading, initialized = messagesStore.initialized, currentOpenChannel = messagesStore.currentOpenChannel, isInvalid = messagesStore.isInvalid, hasMore = messagesStore.hasMore, lastMessageTimestamp = messagesStore.lastMessageTimestamp, operators = messagesStore.operators, bannedParticipantIds = messagesStore.bannedParticipantIds, mutedParticipantIds = messagesStore.mutedParticipantIds;
    // ref
    var messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null); // useSendMessageCallback
    var conversationScrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null); // useScrollAfterSendMessageCallback
    // const
    var userFilledMessageListParams = queries === null || queries === void 0 ? void 0 : queries.messageListParams;
    var disabled = !initialized
        || !isOnline
        || bundle_DQdztuN4_isDisabledBecauseFrozen(currentOpenChannel, userId)
        || bundle_DQdztuN4_isDisabledBecauseMuted(mutedParticipantIds, userId);
    // useMemo
    var amIBanned = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return bannedParticipantIds.indexOf(user.userId) >= 0;
    }, [channelUrl, bannedParticipantIds, user]);
    var amIMuted = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return mutedParticipantIds.indexOf(user.userId) >= 0;
    }, [channelUrl, mutedParticipantIds, user]);
    var amIOperator = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return operators.map(function (operator) { return operator.userId; }).indexOf(user.userId) >= 0;
    }, [channelUrl, operators, user]);
    // use hooks
    bundle_DQdztuN4_useSetChannel({ channelUrl: channelUrl, sdkInit: sdkInit, fetchingParticipants: fetchingParticipants, userId: userId, currentOpenChannel: currentOpenChannel }, { sdk: sdk, logger: logger, messagesDispatcher: messagesDispatcher });
    var checkScrollBottom = useCheckScrollBottom({ conversationScrollRef: conversationScrollRef }, { logger: logger });
    bundle_DQdztuN4_useHandleChannelEvents({ currentOpenChannel: currentOpenChannel, checkScrollBottom: checkScrollBottom }, { sdk: sdk, logger: logger, messagesDispatcher: messagesDispatcher, scrollRef: conversationScrollRef });
    bundle_DQdztuN4_useInitialMessagesFetch({ currentOpenChannel: currentOpenChannel, userFilledMessageListParams: userFilledMessageListParams }, { logger: logger, messagesDispatcher: messagesDispatcher, scrollRef: conversationScrollRef });
    var fetchMore = shouldFetchMore(allMessages === null || allMessages === void 0 ? void 0 : allMessages.length, messageLimit);
    // do not fetch more for streaming
    var onScroll = bundle_DQdztuN4_useScrollCallback({ currentOpenChannel: currentOpenChannel, lastMessageTimestamp: lastMessageTimestamp, fetchMore: fetchMore }, { sdk: sdk, logger: logger, messagesDispatcher: messagesDispatcher, hasMore: hasMore, userFilledMessageListParams: userFilledMessageListParams });
    var handleSendMessage = bundle_DQdztuN4_useSendMessageCallback({ currentOpenChannel: currentOpenChannel, onBeforeSendUserMessage: onBeforeSendUserMessage, checkScrollBottom: checkScrollBottom, messageInputRef: messageInputRef }, { sdk: sdk, logger: logger, messagesDispatcher: messagesDispatcher, scrollRef: conversationScrollRef });
    var handleFileUpload = useFileUploadCallback({ currentOpenChannel: currentOpenChannel, onBeforeSendFileMessage: onBeforeSendFileMessage, checkScrollBottom: checkScrollBottom, imageCompression: imageCompression }, { sdk: sdk, logger: logger, messagesDispatcher: messagesDispatcher, scrollRef: conversationScrollRef });
    var updateMessage = bundle_DQdztuN4_useUpdateMessageCallback({ currentOpenChannel: currentOpenChannel, onBeforeSendUserMessage: onBeforeSendUserMessage }, { logger: logger, messagesDispatcher: messagesDispatcher });
    var deleteMessage = bundle_DQdztuN4_useDeleteMessageCallback({ currentOpenChannel: currentOpenChannel }, { logger: logger, messagesDispatcher: messagesDispatcher });
    var resendMessage = bundle_DQdztuN4_useResendMessageCallback({ currentOpenChannel: currentOpenChannel }, { logger: logger, messagesDispatcher: messagesDispatcher });
    useTrimMessageList({ messagesLength: allMessages === null || allMessages === void 0 ? void 0 : allMessages.length, messageLimit: messageLimit }, { messagesDispatcher: messagesDispatcher, logger: logger });
    // handle API calls from withSendbird
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var subscriber = new Map();
        if (!pubSub || !pubSub.subscribe) {
            return;
        }
        subscriber.set(pubSubTopics.SEND_USER_MESSAGE, pubSub.subscribe(pubSubTopics.SEND_USER_MESSAGE, function (msg) {
            var channel = msg.channel, message = msg.message;
            bundle_DQdztuN4_scrollIntoLast(0, conversationScrollRef);
            if (channel && (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url))) {
                messagesDispatcher({
                    type: SENDING_MESSAGE_SUCCEEDED,
                    payload: message,
                });
            }
        }));
        subscriber.set(pubSubTopics.SEND_MESSAGE_START, pubSub.subscribe(pubSubTopics.SEND_MESSAGE_START, function (msg) {
            var channel = msg.channel, message = msg.message;
            if (channel && (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url))) {
                messagesDispatcher({
                    type: SENDING_MESSAGE_START,
                    payload: { message: message, channel: channel },
                });
            }
        }));
        subscriber.set(pubSubTopics.SEND_FILE_MESSAGE, pubSub.subscribe(pubSubTopics.SEND_FILE_MESSAGE, function (msg) {
            var channel = msg.channel, message = msg.message;
            bundle_DQdztuN4_scrollIntoLast(0, conversationScrollRef);
            if (channel && (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url))) {
                messagesDispatcher({
                    type: SENDING_MESSAGE_SUCCEEDED,
                    payload: { message: message, channel: channel },
                });
            }
        }));
        subscriber.set(pubSubTopics.UPDATE_USER_MESSAGE, pubSub.subscribe(pubSubTopics.UPDATE_USER_MESSAGE, function (msg) {
            var channel = msg.channel, message = msg.message, fromSelector = msg.fromSelector;
            if (fromSelector && channel && (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url))) {
                messagesDispatcher({
                    type: bundle_DQdztuN4_ON_MESSAGE_UPDATED,
                    payload: { channel: channel, message: message },
                });
            }
        }));
        subscriber.set(pubSubTopics.DELETE_MESSAGE, pubSub.subscribe(pubSubTopics.DELETE_MESSAGE, function (msg) {
            var channel = msg.channel, messageId = msg.messageId;
            if (channel && (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url))) {
                messagesDispatcher({
                    type: bundle_DQdztuN4_ON_MESSAGE_DELETED,
                    payload: messageId,
                });
            }
        }));
        return function () {
            if (subscriber) {
                subscriber.forEach(function (s) {
                    try {
                        s.remove();
                    }
                    catch (_a) {
                        //
                    }
                });
            }
        };
    }, [channelUrl, sdkInit]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelContext.Provider, { value: {
            // props
            channelUrl: channelUrl,
            children: children,
            isMessageGroupingEnabled: isMessageGroupingEnabled,
            queries: queries,
            onBeforeSendUserMessage: onBeforeSendUserMessage,
            messageLimit: messageLimit,
            onBeforeSendFileMessage: onBeforeSendFileMessage,
            onChatHeaderActionClick: onChatHeaderActionClick,
            onBackClick: onBackClick,
            // store
            allMessages: allMessages,
            loading: loading,
            initialized: initialized,
            currentOpenChannel: currentOpenChannel,
            isInvalid: isInvalid,
            hasMore: hasMore,
            lastMessageTimestamp: lastMessageTimestamp,
            operators: operators,
            bannedParticipantIds: bannedParticipantIds,
            mutedParticipantIds: mutedParticipantIds,
            // derived/utils
            messageInputRef: messageInputRef,
            conversationScrollRef: conversationScrollRef,
            disabled: disabled,
            amIBanned: amIBanned,
            amIMuted: amIMuted,
            amIOperator: amIOperator,
            checkScrollBottom: checkScrollBottom,
            fetchMore: fetchMore,
            onScroll: onScroll,
            handleSendMessage: handleSendMessage,
            handleFileUpload: handleFileUpload,
            updateMessage: updateMessage,
            deleteMessage: deleteMessage,
            resendMessage: resendMessage,
            frozen: messagesStore.frozen,
            disableUserProfile: disableUserProfile,
            renderUserProfile: renderUserProfile,
            participants: messagesStore.participants,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { isOpenChannel: true, renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile, disableUserProfile: (_g = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _g !== void 0 ? _g : config === null || config === void 0 ? void 0 : config.disableUserProfile }, children)));
};
var useOpenChannelContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(OpenChannelContext);
    if (!context)
        throw new Error('OpenChannelContext not found. Use within the OpenChannel module');
    return context;
};


//# sourceMappingURL=bundle-DQdztuN4.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelInput.js










































var OpenChannelInput = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(function (props, ref) {
    var _a = useOpenChannelContext(), currentOpenChannel = _a.currentOpenChannel, disabled = _a.disabled, handleSendMessage = _a.handleSendMessage, handleFileUpload = _a.handleFileUpload, amIMuted = _a.amIMuted;
    var channel = currentOpenChannel;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var value = props.value;
    function getPlaceHolderString() {
        if (amIMuted) {
            return stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED;
        }
        if (disabled) {
            return stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED;
        }
        return '';
    }
    if (!channel) {
        return null;
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-footer" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { channel: currentOpenChannel, ref: ref, value: value, disabled: disabled, isVoiceMessageEnabled: false, onSendMessage: handleSendMessage, onFileUpload: handleFileUpload, placeholder: getPlaceHolderString() })));
});


//# sourceMappingURL=OpenChannelInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/FrozenChannelNotification.js







var FrozenChannelNotification_FrozenNotification = function () {
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-frozen-channel-notification" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-frozen-channel-notification__text", type: LabelTypography.CAPTION_2 }, stringSet.CHANNEL_FROZEN)));
};


//# sourceMappingURL=FrozenChannelNotification.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelHeader.js



































function OpenchannelConversationHeader() {
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _a = useOpenChannelContext(), currentOpenChannel = _a.currentOpenChannel, onChatHeaderActionClick = _a.onChatHeaderActionClick, amIOperator = _a.amIOperator, onBackClick = _a.onBackClick;
    var title = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.name;
    var subTitle = "".concat(bundle_DQdztuN4_kFormatter(currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.participantCount), " ").concat(stringSet.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS);
    var coverImage = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.coverUrl;
    var isMobile = useMediaQueryContext().isMobile;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-header" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-header__left" },
            isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-oepnchannel-header__icon_back", onClick: onBackClick, fillColor: IconColors.PRIMARY, width: "24px", height: "24px", type: IconTypes.ARROW_LEFT })),
            coverImage ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-openchannel-conversation-header__left__cover-image", src: coverImage, alt: "channel cover image", width: "32px", height: "32px" })) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-header__left__cover-image--icon", style: { width: 32, height: 32 } },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CHANNELS, fillColor: IconColors.CONTENT, width: "18px", height: "18px" }))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-conversation-header__left__title", type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, title || stringSet.NO_TITLE),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-conversation-header__left__sub-title", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_2 }, subTitle || stringSet.NO_TITLE)),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-header__right" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-conversation-header__right__trigger", width: "32px", height: "32px", onClick: onChatHeaderActionClick },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: (amIOperator
                        ? IconTypes.INFO
                        : IconTypes.MEMBERS), fillColor: IconColors.PRIMARY, width: "24px", height: "24px" })))));
}


//# sourceMappingURL=OpenChannelHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-FfoT30Gt.js
var bundle_FfoT30Gt_copyToClipboard = function (text) {
    // @ts-ignore: Unreachable code error
    if (window.clipboardData && window.clipboardData.setData) {
        // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
        // @ts-ignore: Unreachable code error
        return window.clipboardData.setData('Text', text);
    }
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = text;
        textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.
        document.body.appendChild(textarea);
        textarea.select();
        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        }
        catch (ex) {
            return false;
        }
        finally {
            document.body.removeChild(textarea);
        }
    }
    return false;
};


//# sourceMappingURL=bundle-FfoT30Gt.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-CYknZObK.js





var OpenChannelMessageStatusTypes = {
    NONE: 'none',
    PENDING: 'pending',
    FAILED: 'failed',
    CANCELED: 'canceled',
    SUCCEEDED: 'succeeded',
};
var getSenderFromMessage = function (message) {
    // @ts-ignore
    return message.sender || message._sender;
};
var checkIsSent = function (status) { return (status === OpenChannelMessageStatusTypes.SUCCEEDED); };
var checkIsPending = function (status) { return (status === OpenChannelMessageStatusTypes.PENDING); };
var checkIsFailed = function (status) { return (status === OpenChannelMessageStatusTypes.FAILED); };
var checkIsByMe = function (message, userId) { return (getSenderFromMessage(message).userId === userId); };
var isFineCopy = function (_a) {
    var _b;
    var message = _a.message;
    return ((message === null || message === void 0 ? void 0 : message.messageType) === 'user' && ((_b = message === null || message === void 0 ? void 0 : message.message) === null || _b === void 0 ? void 0 : _b.length) > 0);
};
var isFineResend = function (_a) {
    var message = _a.message, status = _a.status, userId = _a.userId;
    return checkIsByMe(message, userId)
        && checkIsFailed(status)
        // @ts-ignore
        && (message === null || message === void 0 ? void 0 : message.isResendable);
};
var isFineEdit = function (_a) {
    var _b;
    var message = _a.message, status = _a.status, userId = _a.userId;
    return checkIsByMe(message, userId) && checkIsSent(status) && ((_b = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _b === void 0 ? void 0 : _b.call(message));
};
var isFineDelete = function (_a) {
    var message = _a.message, userId = _a.userId;
    return checkIsByMe(message, userId);
};
var isFineDownload = function (_a) {
    var _b;
    var message = _a.message, status = _a.status;
    if (((_b = message === null || message === void 0 ? void 0 : message.isFileMessage) === null || _b === void 0 ? void 0 : _b.call(message)) && checkIsSent(status)) {
        return true;
    }
    return false;
};
var showMenuTrigger = function (props) {
    var message = props.message, status = props.status, userId = props.userId;
    // @ts-ignore
    if (message.messageType === 'user') {
        return (isFineDelete({ message: message, status: status, userId: userId })
            || isFineEdit({ message: message, status: status, userId: userId })
            // @ts-ignore
            || isFineCopy({ message: message, status: status, userId: userId })
            || isFineResend({ message: message, status: status, userId: userId }));
    }
    else {
        return (isFineDelete({ message: message, status: status, userId: userId })
            || isFineResend({ message: message, status: status, userId: userId }));
    }
};

var OpenChannelMobileMenu = function (props) {
    var _a, _b;
    var message = props.message, parentRef = props.parentRef, resendMessage = props.resendMessage, showEdit = props.showEdit, showRemove = props.showRemove, copyToClipboard = props.copyToClipboard, hideMenu = props.hideMenu, _c = props.isEphemeral, isEphemeral = _c === void 0 ? false : _c;
    var userMessage = message;
    var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
    var stringSet = useLocalization().stringSet;
    var userId = (_b = (_a = useSendbirdStateContext()) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.userId;
    var fileMessage = message;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { isOpen: true, menuItems: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { className: "sendbird-openchannel__mobile-menu", parentRef: parentRef, parentContainRef: parentRef, closeDropdown: hideMenu },
            isFineCopy({ message: userMessage, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-og-message__top__context-menu__copy", onClick: function () {
                    copyToClipboard === null || copyToClipboard === void 0 ? void 0 : copyToClipboard();
                }, dataSbId: "open_channel_mobile_context_menu_copy" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__COPY))),
            (!isEphemeral && isFineEdit({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-og-message__top__context-menu__edit", onClick: function () {
                    showEdit === null || showEdit === void 0 ? void 0 : showEdit();
                }, dataSbId: "open_channel_mobile_context_menu_edit" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__EDIT))),
            isFineResend({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                    resendMessage === null || resendMessage === void 0 ? void 0 : resendMessage();
                }, dataSbId: "open_channel_mobile_context_menu_resend" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__RESEND))),
            (!isEphemeral && isFineDelete({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                    showRemove === null || showRemove === void 0 ? void 0 : showRemove();
                }, dataSbId: "open_channel_mobile_context_menu_delete" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__DELETE))),
            isFineDownload({ message: message, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                    hideMenu();
                }, dataSbId: "open_channel_mobile_context_menu_download_file" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", { className: "sendbird-openchannel__mobile-menu-hyperlink", rel: "noopener noreferrer", href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url, target: "_blank" }, stringSet.CONTEXT_MENU_DROPDOWN__SAVE))))); } }));
};


//# sourceMappingURL=bundle-CYknZObK.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelUserMessage.js




































function OpenchannelUserMessage(_a) {
    var className = _a.className, message = _a.message, isOperator = _a.isOperator, _b = _a.isEphemeral, isEphemeral = _b === void 0 ? false : _b, userId = _a.userId, resendMessage = _a.resendMessage, disabled = _a.disabled, showEdit = _a.showEdit, showRemove = _a.showRemove, chainTop = _a.chainTop;
    // hooks
    var _c = useLocalization(), stringSet = _c.stringSet, dateLocale = _c.dateLocale;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _d.disableUserProfile, renderUserProfile = _d.renderUserProfile;
    var messageRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({}), contextStyle = _e[0], setContextStyle = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), contextMenu = _f[0], setContextMenu = _f[1];
    // consts
    var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
    var isPending = checkIsPending(status);
    var isFailed = checkIsFailed(status);
    var sender = getSenderFromMessage(message);
    // place context menu top depending clientHeight of message component
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        if (((_a = messageRef === null || messageRef === void 0 ? void 0 : messageRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) && messageRef.current.clientHeight > 36) {
            setContextStyle({ top: '8px ' });
        }
        else {
            setContextStyle({ top: '2px' });
        }
    }, [window.innerWidth]);
    var onLongPress = useLongPress({
        onLongPress: function () {
            setContextMenu(true);
        },
    });
    var isMobile = useMediaQueryContext().isMobile;
    if (!message || message.messageType !== 'user') {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
                'sendbird-openchannel-user-message',
            ], false).join(' '), ref: messageRef },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-user-message__left" }, !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-openchannel-user-message__left__avatar", src: sender.profileUrl || '', ref: avatarRef, width: "28px", height: "28px", onClick: function () {
                        if (!disableUserProfile) {
                            toggleDropdown();
                        }
                    } })); }, menuItems: function (closeDropdown) { return (renderUserProfile
                    ? (renderUserProfile({
                        user: sender,
                        close: closeDropdown,
                        currentUserId: userId,
                        avatarRef: avatarRef,
                    }))
                    : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })))); } }))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-user-message__right" },
                !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-user-message__right__top" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-user-message__right__top__sender-name", type: LabelTypography.CAPTION_2, color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName
                        || sender.nickname
                        || sender.userId)),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-user-message__right__top__sent-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && (format(message === null || message === void 0 ? void 0 : message.createdAt, 'p', {
                        locale: dateLocale,
                    }))))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({}, (isMobile ? __assign({}, onLongPress) : {}), { className: "sendbird-openchannel-user-message__right__bottom", ref: mobileMenuRef }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-user-message__right__bottom__message", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, message === null || message === void 0 ? void 0 :
                        message.message,
                        isEditedMessage(message) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { key: uuidv4(), type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2, className: "sendbird-openchannel-user-message-word" }, " ".concat(stringSet.MESSAGE_EDITED, " "))))),
                (isPending || isFailed) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-user-message__right__tail" },
                    isPending && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { width: "16px", height: "16px" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-user-message__right__tail__pending", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" }))),
                    isFailed && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-user-message__right__tail__failed", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: "16px", height: "16px" }))))),
            !isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-user-message__context-menu", ref: contextMenuRef, style: contextStyle },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (showMenuTrigger({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-user-message__context-menu--icon", width: "32px", height: "32px", onClick: function () {
                            toggleDropdown();
                        } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: "24px", height: "24px" })))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown: closeDropdown, openLeft: true },
                        isFineCopy({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-user-message__context-menu__copy", onClick: function () {
                                bundle_FfoT30Gt_copyToClipboard(message.message);
                                closeDropdown();
                            }, dataSbId: "open_channel_user_message_menu_copy" }, stringSet.CONTEXT_MENU_DROPDOWN__COPY)),
                        (!isEphemeral && isFineEdit({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-user-message__context-menu__edit", onClick: function () {
                                if (disabled) {
                                    return;
                                }
                                showEdit(true);
                                closeDropdown();
                            }, dataSbId: "open_channel_user_message_menu_edit" }, stringSet.CONTEXT_MENU_DROPDOWN__EDIT)),
                        isFineResend({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-user-message__context-menu__resend", onClick: function () {
                                resendMessage(message);
                                closeDropdown();
                            }, dataSbId: "open_channel_user_message_menu_resend" }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND)),
                        (!isEphemeral && isFineDelete({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-user-message__context-menu__delete", onClick: function () {
                                if (disabled) {
                                    return;
                                }
                                showRemove(true);
                                closeDropdown();
                            }, dataSbId: "open_channel_user_message_menu_delete" }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE)))); } })))),
        contextMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, { message: message, parentRef: mobileMenuRef, hideMenu: function () {
                setContextMenu(false);
            }, showRemove: function () {
                setContextMenu(false);
                showRemove(true);
            }, showEdit: function () {
                setContextMenu(false);
                showEdit(true);
            }, copyToClipboard: function () {
                setContextMenu(false);
                bundle_FfoT30Gt_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
            }, resendMessage: function () {
                setContextMenu(false);
                resendMessage(message);
            } }))));
}


//# sourceMappingURL=OpenchannelUserMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenChannelAdminMessage.js





function OpenChannelAdminMessage(_a) {
    var className = _a.className, message = _a.message;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
            'sendbird-openchannel-admin-message',
        ], false).join(' ') },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-admin-message__text", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, message.message || '')));
}


//# sourceMappingURL=OpenChannelAdminMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelOGMessage.js









































function OpenChannelOGMessage(_a) {
    var _b, _c, _d;
    var message = _a.message, isOperator = _a.isOperator, _e = _a.isEphemeral, isEphemeral = _e === void 0 ? false : _e, className = _a.className, disabled = _a.disabled, showEdit = _a.showEdit, showRemove = _a.showRemove, resendMessage = _a.resendMessage, chainTop = _a.chainTop, userId = _a.userId;
    var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
    var ogMetaData = (_b = message.ogMetaData) !== null && _b !== void 0 ? _b : null;
    var defaultImage = ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.defaultImage;
    var _f = useLocalization(), stringSet = _f.stringSet, dateLocale = _f.dateLocale;
    var isMobile = useMediaQueryContext().isMobile;
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _g.disableUserProfile, renderUserProfile = _g.renderUserProfile;
    var _h = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({}), contextStyle = _h[0], setContextStyle = _h[1];
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showContextMenu = _j[0], setShowContextMenu = _j[1];
    var openLink = function () { return openURL(ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.url); };
    var onLongPress = useLongPress({
        onLongPress: function () { return setShowContextMenu(true); },
        onClick: openLink,
    }, {
        delay: 300,
    });
    var messageComponentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
    var isPending = checkIsPending(status);
    var isFailed = checkIsFailed(status);
    var sender = getSenderFromMessage(message);
    var tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return tokenizeMessage({
            messageText: message.message,
        });
    }, [message === null || message === void 0 ? void 0 : message.updatedAt, message === null || message === void 0 ? void 0 : message.message]);
    // place conxt menu top depending clientHeight of message component
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        if (((_a = messageComponentRef === null || messageComponentRef === void 0 ? void 0 : messageComponentRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) && ((_b = messageComponentRef === null || messageComponentRef === void 0 ? void 0 : messageComponentRef.current) === null || _b === void 0 ? void 0 : _b.clientHeight) > 36) {
            setContextStyle({ top: '8px ' });
        }
        else {
            setContextStyle({ top: '2px' });
        }
    }, [window.innerWidth]);
    if (!message || message.messageType !== 'user') {
        return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
                'sendbird-openchannel-og-message',
            ], false).join(' '), ref: messageComponentRef }, (isMobile ? __assign({}, onLongPress) : {})),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top__left" }, !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-openchannel-og-message__top__left__avatar", src: sender.profileUrl || '', ref: avatarRef, width: "28px", height: "28px", onClick: function () {
                            if (!disableUserProfile) {
                                toggleDropdown();
                            }
                        } })); }, menuItems: function (closeDropdown) { return (renderUserProfile
                        ? (renderUserProfile({
                            user: sender,
                            close: closeDropdown,
                            currentUserId: userId,
                            avatarRef: avatarRef,
                        }))
                        : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })))); } }))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top__right" },
                    !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top__right__title" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-og-message__top__right__title__sender-name", type: LabelTypography.CAPTION_2, color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName
                            || sender.nickname
                            || sender.userId)),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-og-message__top__right__title__sent-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && (format(message === null || message === void 0 ? void 0 : message.createdAt, 'p', {
                            locale: dateLocale,
                        }))))),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top__right__description" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-og-message__top__right__description__message", type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, { tokens: tokens }),
                            (((_c = message === null || message === void 0 ? void 0 : message.updatedAt) !== null && _c !== void 0 ? _c : 0) > 0) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { key: uuidv4(), className: 'sendbird-openchannel-og-message--word', type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_2 }, stringSet.MESSAGE_EDITED))))),
                !isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top__context-menu", ref: contextMenuRef, style: contextStyle },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (showMenuTrigger({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-og-message__top__context-menu--icon", width: "32px", height: "32px", onClick: function () {
                                toggleDropdown();
                            } },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: "24px", height: "24px" })))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown: closeDropdown, openLeft: true },
                            isFineCopy({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-og-message__top__context-menu__copy", onClick: function () {
                                    bundle_FfoT30Gt_copyToClipboard(message.message);
                                    closeDropdown();
                                }, dataSbId: "open_channel_og_message_menu_copy" }, stringSet.CONTEXT_MENU_DROPDOWN__COPY)),
                            (!isEphemeral && isFineEdit({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-og-message__top__context-menu__edit", onClick: function () {
                                    if (disabled) {
                                        return;
                                    }
                                    showEdit(true);
                                    closeDropdown();
                                }, dataSbId: "open_channel_og_message_menu_edit" }, stringSet.CONTEXT_MENU_DROPDOWN__EDIT)),
                            isFineResend({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-og-message__top__context-menu__resend", onClick: function () {
                                    resendMessage(message);
                                    closeDropdown();
                                }, dataSbId: "open_channel_og_message_menu_resend" }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND)),
                            (!isEphemeral && isFineDelete({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { className: "sendbird-openchannel-og-message__top__context-menu__delete", onClick: function () {
                                    if (disabled) {
                                        return;
                                    }
                                    showRemove(true);
                                    closeDropdown();
                                }, dataSbId: "open_channel_og_message_menu_delete" }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE)))); } })))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__bottom" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__bottom__og-tag", ref: mobileMenuRef },
                    (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.url) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-og-message__bottom__og-tag__url", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, ogMetaData.url)),
                    (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.title) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LinkLabel, { className: "sendbird-openchannel-og-message__bottom__og-tag__title", src: (_d = ogMetaData.url) !== null && _d !== void 0 ? _d : '', type: LabelTypography.SUBTITLE_2, color: LabelColors.PRIMARY }, ogMetaData.title)),
                    (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.description) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-og-message__bottom__og-tag__description", type: LabelTypography.BODY_2, color: LabelColors.ONBACKGROUND_1 }, ogMetaData.description)),
                    (ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.url) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail", role: "button", onClick: openLink, onKeyDown: openLink, tabIndex: 0 }, defaultImage && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image", url: defaultImage.url || '', alt: defaultImage.alt || '', height: "189px", defaultComponent: (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder" },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.THUMBNAIL_NONE, width: "56px", height: "56px" }))) }))))),
                (isPending || isFailed) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-og-message__top__right__tail" },
                    isPending && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { width: "16px", height: "16px" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-og-message__top__right__tail__pending", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" }))),
                    isFailed && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-og-message__top__right__tail__failed", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: "16px", height: "16px" })))))),
        showContextMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, { message: message, parentRef: mobileMenuRef, hideMenu: function () {
                setShowContextMenu(false);
            }, showRemove: function () {
                setShowContextMenu(false);
                showRemove(true);
            }, showEdit: function () {
                setShowContextMenu(false);
                showEdit(true);
            }, copyToClipboard: function () {
                setShowContextMenu(false);
                bundle_FfoT30Gt_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
            }, resendMessage: function () {
                setShowContextMenu(false);
                resendMessage(message);
            } }))));
}


//# sourceMappingURL=OpenchannelOGMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelThumbnailMessage.js



































var SUPPORTING_TYPES = {
    IMAGE: 'IMAGE',
    VIDEO: 'VIDEO',
    UNSUPPORTED: 'UNSUPPORTED',
};
var OpenchannelThumbnailMessage_SUPPORTED_MIMES = {
    IMAGE: [
        'image/jpeg',
        'image/jpg',
        'image/png',
        'image/gif',
        'image/webp',
    ],
    VIDEO: [
        'video/mpeg',
        'video/ogg',
        'video/webm',
        'video/mp4',
    ],
};
var getSupportingFileType = function (type) {
    if (OpenchannelThumbnailMessage_SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0) {
        return SUPPORTING_TYPES.IMAGE;
    }
    if (OpenchannelThumbnailMessage_SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0) {
        return SUPPORTING_TYPES.VIDEO;
    }
    return SUPPORTING_TYPES.UNSUPPORTED;
};

function OpenchannelThumbnailMessage(_a) {
    var _b;
    var className = _a.className, message = _a.message, isOperator = _a.isOperator, _c = _a.isEphemeral, isEphemeral = _c === void 0 ? false : _c, disabled = _a.disabled, userId = _a.userId, chainTop = _a.chainTop, onClick = _a.onClick, showRemove = _a.showRemove, resendMessage = _a.resendMessage;
    var type = message.type, url = message.url, thumbnails = message.thumbnails, localUrl = message.localUrl;
    var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
    var thumbnailUrl = (thumbnails && thumbnails.length > 0 && thumbnails[0].url) || null;
    var _d = useLocalization(), stringSet = _d.stringSet, dateLocale = _d.dateLocale;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _e.disableUserProfile, renderUserProfile = _e.renderUserProfile;
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(360), messageWidth = _f[0], setMessageWidth = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), contextMenu = _g[0], setContextMenu = _g[1];
    var messageRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var onLongPress = useLongPress({
        onLongPress: function () { setContextMenu(true); },
        onClick: function () { onClick(true); },
    });
    var isMobile = useMediaQueryContext().isMobile;
    var memorizedThumbnailPlaceHolder = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () { return function (type) { return function (_a) {
        var style = _a.style;
        return ( // eslint-disable-line
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { style: style },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: type, fillColor: IconColors.ON_BACKGROUND_2, width: "56px", height: "56px" })));
    }; }; }, []);
    var isMessageSent = checkIsSent(status);
    var isPending = checkIsPending(status);
    var isFailed = checkIsFailed(status);
    var sender = getSenderFromMessage(message);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a, _b;
        var thumbnailWidth = ((_b = (_a = messageRef === null || messageRef === void 0 ? void 0 : messageRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth) !== null && _b !== void 0 ? _b : 0) - 80;
        setMessageWidth(thumbnailWidth > 360 ? 360 : thumbnailWidth);
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
                'sendbird-openchannel-thumbnail-message',
            ], false).join(' '), ref: messageRef },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__left" }, !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-openchannel-thumbnail-message__left__avatar", src: sender.profileUrl || '', ref: avatarRef, width: "28px", height: "28px", onClick: function () {
                        if (!disableUserProfile) {
                            toggleDropdown();
                        }
                    } })); }, menuItems: function (closeDropdown) { return (renderUserProfile
                    ? (renderUserProfile({
                        user: sender,
                        close: closeDropdown,
                        currentUserId: userId,
                        avatarRef: avatarRef,
                    }))
                    : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })))); } }))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__right" },
                !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__right__title" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-thumbnail-message__right__title__sender-name", type: LabelTypography.CAPTION_2, color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName
                        || sender.nickname
                        || sender.userId)),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-thumbnail-message__right__title__sent-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && (format(message.createdAt, 'p', {
                        locale: dateLocale,
                    }))))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__right__body", ref: mobileMenuRef },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: "sendbird-openchannel-thumbnail-message__right__body__wrap", role: "button", onClick: function () {
                            if (isMessageSent) {
                                onClick(true);
                            }
                        }, onKeyDown: function () {
                            if (isMessageSent) {
                                onClick(true);
                            }
                        }, tabIndex: 0 }, (isMobile ? __assign({}, onLongPress) : {})),
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__overlay" }),
                        (_b = {},
                            _b[SUPPORTING_TYPES.VIDEO] = ((url || localUrl)
                                ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video" },
                                    (thumbnailUrl)
                                        ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video", url: thumbnailUrl, width: messageWidth, height: "270px", alt: "image", placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PLAY) }))
                                        : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video__video" },
                                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", { src: url || localUrl, type: type }))),
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon", type: IconTypes.PLAY, fillColor: IconColors.ON_BACKGROUND_2, width: "56px", height: "56px" })))
                                : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon", type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: "56px", height: "56px" }))),
                            _b[SUPPORTING_TYPES.IMAGE] = ((url || localUrl)
                                ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__image", url: thumbnailUrl || url || localUrl || '', alt: "image", width: messageWidth, height: "270px", placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PHOTO) }))
                                : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon", type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: "56px", height: "56px" }))),
                            _b[SUPPORTING_TYPES.UNSUPPORTED] = (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-thumbnail-message__right__body__wrap__unknown", type: IconTypes.PHOTO, fillColor: IconColors.ON_BACKGROUND_2, width: "56px", height: "56px" })),
                            _b)[getSupportingFileType(type)])),
                (isPending || isFailed) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__right__tail" },
                    isPending && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { width: "16px", height: "16px" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-thumbnail-message__right__tail__pending", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" }))),
                    isFailed && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-thumbnail-message__right__tail__failed", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: "16px", height: "16px" }))))),
            !isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-thumbnail-message__context-menu", ref: contextMenuRef }, (isFineResend({ message: message, userId: userId, status: status }) || !isEphemeral) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (showMenuTrigger({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-thumbnail-message__context-menu--icon", width: "32px", height: "32px", onClick: toggleDropdown },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE, width: "24px", height: "24px" })))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown: closeDropdown, openLeft: true },
                    isFineResend({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                            resendMessage(message);
                            closeDropdown();
                        }, dataSbId: "open_channel_thumbnail_message_menu_resend" }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND)),
                    (!isEphemeral && isFineDelete({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                            if (disabled) {
                                return;
                            }
                            showRemove(true);
                            closeDropdown();
                        }, dataSbId: "open_channel_thumbnail_message_menu_delete" }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE)))); } }))))),
        contextMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, { message: message, parentRef: mobileMenuRef, hideMenu: function () {
                setContextMenu(false);
            }, showRemove: function () {
                setContextMenu(false);
                showRemove(true);
            }, resendMessage: function () {
                setContextMenu(false);
                resendMessage(message);
            } }))));
}


//# sourceMappingURL=OpenchannelThumbnailMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelFileMessage.js





































var checkFileType = function (fileUrl) {
    var audioFile = /(\.mp3)$/i;
    var gifFile = /(\.gif)$/i;
    if (audioFile.test(fileUrl)) {
        return IconTypes.FILE_AUDIO;
    }
    if (gifFile.test(fileUrl)) {
        return IconTypes.GIF;
    }
    return IconTypes.FILE_DOCUMENT;
};
var truncate = function (fullStr, strLen) {
    if (fullStr === null || fullStr === undefined)
        return '';
    if (fullStr.length <= strLen)
        return fullStr;
    var separator = '...';
    var sepLen = separator.length;
    var charsToShow = strLen - sepLen;
    var frontChars = Math.ceil(charsToShow / 2);
    var backChars = Math.floor(charsToShow / 2);
    return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
};

function OpenChannelFileMessage(_a) {
    var className = _a.className, message = _a.message, isOperator = _a.isOperator, _b = _a.isEphemeral, isEphemeral = _b === void 0 ? false : _b, userId = _a.userId, disabled = _a.disabled, chainTop = _a.chainTop, showRemove = _a.showRemove, resendMessage = _a.resendMessage;
    var status = message === null || message === void 0 ? void 0 : message.sendingStatus;
    var _c = useLocalization(), dateLocale = _c.dateLocale, stringSet = _c.stringSet;
    var contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _d.disableUserProfile, renderUserProfile = _d.renderUserProfile;
    var isMobile = useMediaQueryContext().isMobile;
    var openFileUrl = function () { return openURL(message.url); };
    var isPending = checkIsPending(status);
    var isFailed = checkIsFailed(status);
    var sender = getSenderFromMessage(message);
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), contextMenu = _e[0], setContextMenu = _e[1];
    var longPress = useLongPress({
        onLongPress: function () {
            if (isMobile) {
                setContextMenu(true);
            }
        },
        onClick: openFileUrl,
    }, { delay: 300 });
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: __spreadArray(__spreadArray([], (Array.isArray(className) ? className : [className]), true), [
                'sendbird-openchannel-file-message',
            ], false).join(' '), ref: mobileMenuRef },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-file-message__left" }, !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-openchannel-file-message__left__avatar", src: sender.profileUrl || '', ref: avatarRef, width: "28px", height: "28px", onClick: function () {
                        if (!disableUserProfile) {
                            toggleDropdown();
                        }
                    } })); }, menuItems: function (closeDropdown) { return (renderUserProfile
                    ? (renderUserProfile({
                        user: sender,
                        close: closeDropdown,
                        currentUserId: userId,
                        avatarRef: avatarRef,
                    }))
                    : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: avatarRef, parentContainRef: avatarRef, closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { user: sender, onSuccess: closeDropdown, disableMessaging: true })))); } }))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-file-message__right" },
                !chainTop && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-file-message__right__title" },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-file-message__right__title__sender-name", type: LabelTypography.CAPTION_2, color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2 }, sender && (sender.friendName
                        || sender.nickname
                        || sender.userId)),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-file-message__right__title__sent-at", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_3 }, (message === null || message === void 0 ? void 0 : message.createdAt) && (format(message.createdAt, 'p', {
                        locale: dateLocale,
                    }))))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", __assign({ className: "sendbird-openchannel-file-message__right__body" }, (isMobile ? __assign({}, longPress) : {})),
                    checkFileType(message.url) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-file-message__right__body__icon", type: checkFileType(message.url), fillColor: IconColors.PRIMARY, width: "48px", height: "48px" })),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "sendbird-openchannel-file-message__right__body__file-name", onClick: openFileUrl },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BODY_1, color: LabelColors.ONBACKGROUND_1 }, truncate(message.name || message.url, 40)))),
                (isPending || isFailed) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-file-message__right__tail" },
                    isPending && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, { width: "16px", height: "16px" },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-file-message__right__tail__pending", type: IconTypes.SPINNER, fillColor: IconColors.PRIMARY, width: "16px", height: "16px" }))),
                    isFailed && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-file-message__right__tail__failed", type: IconTypes.ERROR, fillColor: IconColors.ERROR, width: "16px", height: "16px" }))))),
            !isMobile && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-file-message__context-menu", ref: contextMenuRef }, (isFineResend({ message: message, userId: userId, status: status }) || !isEphemeral) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (showMenuTrigger({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-file-message__context-menu__icon", width: "32px", height: "32px", onClick: toggleDropdown },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MORE, width: "24px", height: "24px" })))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: contextMenuRef, parentContainRef: contextMenuRef, closeDropdown: closeDropdown, openLeft: true },
                    isFineResend({ message: message, userId: userId, status: status }) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                            if (disabled) {
                                return;
                            }
                            resendMessage(message);
                            closeDropdown();
                        }, dataSbId: "open_channel_file_message_context_menu_resend" }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND)),
                    (!isEphemeral && isFineDelete({ message: message, userId: userId, status: status })) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                            if (disabled) {
                                return;
                            }
                            showRemove(true);
                            closeDropdown();
                        }, dataSbId: "open_channel_file_message_context_menu_delete" }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE)))); } }))))),
        contextMenu && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, { message: message, hideMenu: function () {
                setContextMenu(false);
            }, parentRef: mobileMenuRef, showRemove: function () {
                setContextMenu(false);
                showRemove(true);
            } }))));
}


//# sourceMappingURL=OpenchannelFileMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelMessage.js




































































function OpenChannelMessage_RemoveMessageModal(_a) {
    var message = _a.message, onCloseModal = _a.onCloseModal, onDeleteMessage = _a.onDeleteMessage;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { onCancel: onCloseModal, onSubmit: onDeleteMessage, submitText: stringSet.MESSAGE_MENU__DELETE, titleText: getModalDeleteMessageTitle(stringSet, message) }));
}

var MessageTypes = {
    ADMIN: 'ADMIN',
    USER: 'USER',
    FILE: 'FILE',
    THUMBNAIL: 'THUMBNAIL',
    OG: 'OG',
    UNKNOWN: 'UNKNOWN',
};
var SendingMessageStatus = {
    NONE: 'none',
    SUCCEEDED: 'succeeded',
    FAILED: 'failed',
    PENDING: 'pending',
};
var getMessageType = function (message, options) {
    var _a, _b;
    var isOgMessageEnabledInOpenChannel = options === null || options === void 0 ? void 0 : options.isOgMessageEnabledInOpenChannel;
    if (((_a = message === null || message === void 0 ? void 0 : message.isUserMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || (message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
        return ((message === null || message === void 0 ? void 0 : message.ogMetaData) && isOgMessageEnabledInOpenChannel)
            ? MessageTypes.OG
            : MessageTypes.USER;
    }
    if ((_b = message === null || message === void 0 ? void 0 : message.isAdminMessage) === null || _b === void 0 ? void 0 : _b.call(message)) {
        return MessageTypes.ADMIN;
    }
    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
        return (bundle_Cn6S1UKt_isImage(message.type) || bundle_Cn6S1UKt_isVideo(message.type))
            ? MessageTypes.THUMBNAIL
            : MessageTypes.FILE;
    }
    return MessageTypes.UNKNOWN;
};

function OpenChannelMessage(props) {
    var _a;
    var _b;
    var message = props.message, chainTop = props.chainTop, chainBottom = props.chainBottom, hasSeparator = props.hasSeparator, renderMessage = props.renderMessage;
    var _c = useOpenChannelContext(), currentOpenChannel = _c.currentOpenChannel, deleteMessage = _c.deleteMessage, updateMessage = _c.updateMessage, resendMessage = _c.resendMessage;
    var _d = useLocalization(), dateLocale = _d.dateLocale, stringSet = _d.stringSet;
    var editDisabled = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen;
    var globalState = useSendbirdStateContext();
    var currentUserId = (_b = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _b === void 0 ? void 0 : _b.userId;
    var isOgMessageEnabledInOpenChannel = globalState.config.openChannel.enableOgtag;
    var sender;
    if ((message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
        sender = message === null || message === void 0 ? void 0 : message.sender;
    }
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showEdit = _e[0], setShowEdit = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showRemove = _f[0], setShowRemove = _f[1];
    var _g = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showFileViewer = _g[0], setShowFileViewer = _g[1];
    var editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var isByMe = false;
    if (sender && (message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
        // pending and failed messages are by me
        isByMe = currentUserId === sender.userId
            || (message === null || message === void 0 ? void 0 : message.sendingStatus)
                === SendingMessageStatus.PENDING
            || (message === null || message === void 0 ? void 0 : message.sendingStatus)
                === SendingMessageStatus.FAILED;
    }
    if (renderMessage) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-msg-hoc sendbird-msg--scroll-ref" }, renderMessage({ message: message, chainTop: chainTop, chainBottom: chainBottom })));
    }
    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user' && showEdit) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, { isEdit: true, channel: currentOpenChannel, disabled: editDisabled, ref: editMessageInputRef, message: message, onUpdateMessage: function (_a) {
                var messageId = _a.messageId, message = _a.message;
                updateMessage(messageId, message);
                setShowEdit(false);
            }, onCancelEdit: function () {
                setShowEdit(false);
            } }));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-msg-hoc sendbird-msg--scroll-ref" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            hasSeparator && (message === null || message === void 0 ? void 0 : message.createdAt) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null,
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, format(message === null || message === void 0 ? void 0 : message.createdAt, stringSet.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR, { locale: dateLocale })))),
            (_a = {},
                _a[MessageTypes.ADMIN] = (function () {
                    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'admin') {
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelAdminMessage, { message: message }));
                    }
                })(),
                _a[MessageTypes.FILE] = (function () {
                    var _a;
                    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelFileMessage, { message: message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, disabled: editDisabled, userId: currentUserId, showRemove: setShowRemove, resendMessage: resendMessage, chainTop: chainTop, chainBottom: chainBottom }));
                    }
                })(),
                _a[MessageTypes.OG] = (function () {
                    var _a;
                    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user'
                        && isOgMessageEnabledInOpenChannel) {
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelOGMessage, { message: message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, userId: currentUserId, showEdit: setShowEdit, disabled: editDisabled, showRemove: setShowRemove, resendMessage: resendMessage, chainTop: chainTop, chainBottom: chainBottom }));
                    }
                })(),
                _a[MessageTypes.THUMBNAIL] = (function () {
                    var _a;
                    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelThumbnailMessage, { message: message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, disabled: editDisabled, userId: currentUserId, showRemove: setShowRemove, resendMessage: resendMessage, onClick: setShowFileViewer, chainTop: chainTop, chainBottom: chainBottom }));
                    }
                })(),
                _a[MessageTypes.USER] = (function () {
                    var _a;
                    if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
                        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelUserMessage, { message: message, isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId), isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral, userId: currentUserId, disabled: editDisabled, showEdit: setShowEdit, showRemove: setShowRemove, resendMessage: resendMessage, chainTop: chainTop, chainBottom: chainBottom }));
                    }
                })(),
                _a[MessageTypes.UNKNOWN] = (function () {
                    // return (
                    //   <OpenChannelUnknownMessage message={message} />
                    // );
                })(),
                _a)[getMessageType(message, { isOgMessageEnabledInOpenChannel: isOgMessageEnabledInOpenChannel })],
            showRemove && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMessage_RemoveMessageModal, { message: message, onCloseModal: function () { return setShowRemove(false); }, onDeleteMessage: function () {
                    if ((message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
                        deleteMessage(message);
                    }
                } })),
            showFileViewer && (message === null || message === void 0 ? void 0 : message.messageType) === 'file' && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewer, { onClose: function () { return setShowFileViewer(false); }, message: message, onDelete: function () { return deleteMessage(message); }, isByMe: isByMe })))));
}


//# sourceMappingURL=OpenChannelMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelMessageList.js












































































function OpenChannelMessageList(props, ref) {
    var _a = useOpenChannelContext(), _b = _a.isMessageGroupingEnabled, isMessageGroupingEnabled = _b === void 0 ? true : _b, allMessages = _a.allMessages, hasMore = _a.hasMore, onScroll = _a.onScroll;
    var store = useSendbirdStateContext();
    var userId = store.config.userId;
    var localRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var scrollRef = ref || localRef;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showScrollDownButton = _c[0], setShowScrollDownButton = _c[1];
    var scrollToBottom = function () {
        if (scrollRef && 'current' in scrollRef && scrollRef.current) {
            scrollRef.current.scrollTo(0, scrollRef.current.scrollHeight);
            setShowScrollDownButton(false);
        }
    };
    var handleOnScroll = useHandleOnScrollCallback({
        setShowScrollDownButton: setShowScrollDownButton,
        hasMore: hasMore,
        onScroll: onScroll,
        scrollRef: scrollRef,
    });
    var memoizedMessageList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        var _a;
        if (allMessages.length > 0) {
            return (allMessages.map(function (message, index) {
                var _a;
                var previousMessage = allMessages[index - 1];
                var nextMessage = allMessages[index - 1];
                var previousMessageCreatedAt = previousMessage && previousMessage.createdAt;
                var currentCreatedAt = message === null || message === void 0 ? void 0 : message.createdAt;
                // https://stackoverflow.com/a/41855608
                var hasSeparator = !(previousMessageCreatedAt && (isSameDay(currentCreatedAt, previousMessageCreatedAt)));
                var _b = isMessageGroupingEnabled
                    ? compareMessagesForGrouping(previousMessage, message, nextMessage)
                    : [false, false], chainTop = _b[0], chainBottom = _b[1];
                var isByMe = ((_a = message === null || message === void 0 ? void 0 : message.sender) === null || _a === void 0 ? void 0 : _a.userId) === userId;
                var key = (message === null || message === void 0 ? void 0 : message.messageId) || (message === null || message === void 0 ? void 0 : message.reqId);
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, { message: message, isByMe: isByMe, key: key },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMessage, { message: message, chainTop: chainTop, chainBottom: chainBottom, hasSeparator: hasSeparator, renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage })));
            }));
        }
        return (((_a = props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList) === null || _a === void 0 ? void 0 : _a.call(props)) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { className: "sendbird-openchannel-conversation-scroll__container__place-holder", type: PlaceHolderTypes.NO_MESSAGES })));
    }, [allMessages]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-scroll" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-scroll__container" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-scroll__container__padding" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: [
                    'sendbird-openchannel-conversation-scroll__container__item-container',
                    (allMessages.length > 0) ? '' : 'no-messages',
                ].join(' '), onScroll: handleOnScroll, ref: scrollRef }, memoizedMessageList)),
        showScrollDownButton && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-conversation-scroll__container__scroll-bottom-button", onClick: scrollToBottom, onKeyDown: scrollToBottom, tabIndex: 0, role: "button" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.CHEVRON_DOWN, fillColor: IconColors.CONTENT })))));
}
var OpenChannelMessageList$1 = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(OpenChannelMessageList);


//# sourceMappingURL=OpenChannelMessageList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelUI.js
















































































var COMPONENT_CLASS_NAME = 'sendbird-openchannel-conversation';
var OpenChannelUI = function (_a) {
    var renderMessage = _a.renderMessage, renderHeader = _a.renderHeader, renderPlaceHolderEmptyList = _a.renderPlaceHolderEmptyList, renderPlaceHolderError = _a.renderPlaceHolderError, renderPlaceHolderLoading = _a.renderPlaceHolderLoading, renderMessageInput = _a.renderMessageInput, renderInput = _a.renderInput;
    var _b = useOpenChannelContext(), currentOpenChannel = _b.currentOpenChannel, amIBanned = _b.amIBanned, loading = _b.loading, isInvalid = _b.isInvalid, messageInputRef = _b.messageInputRef, conversationScrollRef = _b.conversationScrollRef;
    if (!currentOpenChannel
        || !(currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url)
        || amIBanned) {
        return ((renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError())
            || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: COMPONENT_CLASS_NAME },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.NO_CHANNELS })));
    }
    if (loading) {
        return ((renderPlaceHolderLoading === null || renderPlaceHolderLoading === void 0 ? void 0 : renderPlaceHolderLoading())
            || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: COMPONENT_CLASS_NAME },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.LOADING })));
    }
    if (isInvalid) {
        return ((renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError())
            || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: COMPONENT_CLASS_NAME },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG })));
    }
    var renderInputComponent = renderMessageInput || renderInput;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: COMPONENT_CLASS_NAME },
        (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelConversationHeader, null),
        (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen) && external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FrozenChannelNotification_FrozenNotification, null),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMessageList$1, { ref: conversationScrollRef, renderMessage: renderMessage, renderPlaceHolderEmptyList: renderPlaceHolderEmptyList }),
        (renderInputComponent === null || renderInputComponent === void 0 ? void 0 : renderInputComponent()) || external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelInput, { ref: messageInputRef })));
};


//# sourceMappingURL=OpenChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel.js

















































































var OpenChannel = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelProvider, { channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl, isMessageGroupingEnabled: props === null || props === void 0 ? void 0 : props.isMessageGroupingEnabled, queries: props === null || props === void 0 ? void 0 : props.queries, messageLimit: props === null || props === void 0 ? void 0 : props.messageLimit, onBeforeSendUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendUserMessage, onBeforeSendFileMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendFileMessage, onChatHeaderActionClick: props === null || props === void 0 ? void 0 : props.onChatHeaderActionClick, disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile, renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile, onBackClick: props === null || props === void 0 ? void 0 : props.onBackClick },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelUI, { renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage, renderHeader: props === null || props === void 0 ? void 0 : props.renderHeader, renderInput: props === null || props === void 0 ? void 0 : props.renderInput, renderMessageInput: props === null || props === void 0 ? void 0 : props.renderMessageInput, renderPlaceHolderEmptyList: props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList, renderPlaceHolderError: props === null || props === void 0 ? void 0 : props.renderPlaceHolderError, renderPlaceHolderLoading: props === null || props === void 0 ? void 0 : props.renderPlaceHolderLoading })));
};


//# sourceMappingURL=OpenChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/context.js








var OpenChannelSettingsContext = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
var OpenChannelSettingsProvider = function (props) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    var children = props.children, channelUrl = props.channelUrl, onCloseClick = props.onCloseClick, onChannelModified = props.onChannelModified, onBeforeUpdateChannel = props.onBeforeUpdateChannel, onDeleteChannel = props.onDeleteChannel;
    // fetch store from <SendbirdProvider />
    var globalStore = useSendbirdStateContext();
    var sdk = (_b = (_a = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _a === void 0 ? void 0 : _a.sdkStore) === null || _b === void 0 ? void 0 : _b.sdk;
    var isSDKInitialized = (_d = (_c = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _c === void 0 ? void 0 : _c.sdkStore) === null || _d === void 0 ? void 0 : _d.initialized;
    var logger = (_e = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config) === null || _e === void 0 ? void 0 : _e.logger;
    var currentUserId = (_f = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _f === void 0 ? void 0 : _f.userId;
    var _j = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), currentChannel = _j[0], setChannel = _j[1];
    var _k = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), isChannelInitialized = _k[0], setChannelInitialized = _k[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channelUrl || !sdk.openChannel) {
            setChannel(null);
            return;
        }
        sdk.openChannel.getChannel(channelUrl)
            .then(function (channel) {
            logger.info('open channel setting: fetched', channel);
            // TODO: Add pending status
            channel.enter()
                .then(function () {
                setChannel(channel);
                logger.info('OpenChannelSettings | Succeeded to enter channel', channel === null || channel === void 0 ? void 0 : channel.url);
                setChannelInitialized(true);
            })
                .catch(function (error) {
                setChannel(null);
                logger.warning('OpenChannelSettings | Failed to enter channel', error);
            });
        })
            .catch(function (error) {
            logger.error('open channel setting: error fetching', error);
            setChannel(null);
        });
        return function () {
            if (currentChannel && currentChannel.exit) {
                currentChannel.exit()
                    .then(function () {
                    logger.info('OpenChannelSettings | Succeeded to exit channel', currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url);
                })
                    .catch(function (error) {
                    logger.warning('OpenChannelSettings | Failed to exit channel', error);
                });
            }
        };
    }, [channelUrl, isSDKInitialized]);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var _a;
        var channelHandlerId = uuidv4();
        if (currentChannel !== null && ((_a = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _a === void 0 ? void 0 : _a.addOpenChannelHandler)) {
            var channelHandlerParams = new openChannel_De({
                onOperatorUpdated: function (channel) {
                    if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
                        setChannel(channel);
                    }
                },
                onUserMuted: function (channel, user) {
                    if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
                        setChannel(channel);
                    }
                },
                onUserUnmuted: function (channel, user) {
                    if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
                        setChannel(channel);
                    }
                },
                onUserBanned: function (channel, user) {
                    if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
                        setChannel(null);
                    }
                },
                onUserUnbanned: function (channel, user) {
                    if ((user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
                        setChannel(channel);
                    }
                },
                onChannelChanged: function (channel) {
                    if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
                        setChannel(channel);
                    }
                },
                onChannelDeleted: function (channelUrl) {
                    if (channelUrl === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
                        setChannel(null);
                    }
                },
            });
            sdk.openChannel.addOpenChannelHandler(channelHandlerId, channelHandlerParams);
        }
        return function () {
            var _a, _b, _c;
            if (((_a = sdk === null || sdk === void 0 ? void 0 : sdk.openChannel) === null || _a === void 0 ? void 0 : _a.removeOpenChannelHandler) && channelHandlerId) {
                logger.info('OpenChannelSettings | Removing channel handlers', channelHandlerId);
                (_c = (_b = sdk.openChannel).removeOpenChannelHandler) === null || _c === void 0 ? void 0 : _c.call(_b, channelHandlerId);
            }
        };
    }, [channelUrl]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelSettingsContext.Provider, { value: {
            channelUrl: channelUrl,
            channel: currentChannel,
            isChannelInitialized: isChannelInitialized,
            setChannel: setChannel,
            onCloseClick: onCloseClick,
            onChannelModified: onChannelModified,
            onBeforeUpdateChannel: onBeforeUpdateChannel,
            onDeleteChannel: onDeleteChannel,
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, { isOpenChannel: true, renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile, disableUserProfile: (_g = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _g !== void 0 ? _g : (_h = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config) === null || _h === void 0 ? void 0 : _h.disableUserProfile }, children)));
};
var useOpenChannelSettingsContext = function () {
    var context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(OpenChannelSettingsContext);
    if (!context)
        throw new Error('OpenChannelSettingsContext not found. Use within the OpenChannelSettings module.');
    return context;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenChannelAvatar.js












function OpenChannelAvatar_ChannelAvatar(_a) {
    var channel = _a.channel, theme = _a.theme, _b = _a.height, height = _b === void 0 ? 56 : _b, _c = _a.width, width = _c === void 0 ? 56 : _c;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var memoizedAvatar = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(function () {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-chat-header__avatar--open-channel", src: getOpenChannelAvatar(channel), width: "".concat(width, "px"), height: "".concat(height, "px"), alt: (channel === null || channel === void 0 ? void 0 : channel.name) || stringSet.OPEN_CHANNEL_SETTINGS__NO_TITLE }));
    }, [channel === null || channel === void 0 ? void 0 : channel.coverUrl, theme]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, memoizedAvatar));
}


//# sourceMappingURL=OpenChannelAvatar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/EditDetailsModal.js






































var EditDetailsModal_EditDetails = function (props) {
    var onCancel = props.onCancel;
    var globalState = useSendbirdStateContext();
    var _a = globalState.config, logger = _a.logger, theme = _a.theme, pubSub = _a.pubSub;
    var _b = useOpenChannelSettingsContext(), channel = _b.channel, onBeforeUpdateChannel = _b.onBeforeUpdateChannel, onChannelModified = _b.onChannelModified, setChannel = _b.setChannel;
    var inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var formRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var hiddenInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), currentImg = _c[0], setCurrentImg = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), newFile = _d[0], setNewFile = _d[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var title = channel === null || channel === void 0 ? void 0 : channel.name;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, titleText: stringSet.MODAL__CHANNEL_INFORMATION__TITLE, submitText: stringSet.BUTTON__SAVE, onCancel: onCancel, onSubmit: function () {
            var _a, _b, _c, _d, _e;
            if (title !== '' && !((_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.value)) {
                if ((_b = formRef.current) === null || _b === void 0 ? void 0 : _b.reportValidity) { // might not work in explorer
                    formRef.current.reportValidity();
                }
                return;
            }
            var currentTitle = (_d = (_c = inputRef.current) === null || _c === void 0 ? void 0 : _c.value) !== null && _d !== void 0 ? _d : '';
            var currentImg = newFile;
            logger.info('ChannelSettings: Channel information being updated');
            var params = onBeforeUpdateChannel
                ? onBeforeUpdateChannel(currentTitle, currentImg, (_e = channel === null || channel === void 0 ? void 0 : channel.data) !== null && _e !== void 0 ? _e : '')
                : {
                    name: currentTitle,
                    coverUrlOrImage: currentImg !== null && currentImg !== void 0 ? currentImg : undefined,
                    data: channel === null || channel === void 0 ? void 0 : channel.data,
                };
            logger.info('ChannelSettings: Updating channel information', params);
            channel === null || channel === void 0 ? void 0 : channel.updateChannel(params).then(function (updatedChannel) {
                logger.info('ChannelSettings: Channel information update succeeded', updatedChannel);
                onChannelModified === null || onChannelModified === void 0 ? void 0 : onChannelModified(updatedChannel);
                setChannel === null || setChannel === void 0 ? void 0 : setChannel(updatedChannel);
                pubSub === null || pubSub === void 0 ? void 0 : pubSub.publish(pubSubTopics.UPDATE_OPEN_CHANNEL, updatedChannel);
            }).catch(function (error) {
                logger.error('ChannelSettings: Channel infomation update failed', error);
                setChannel === null || setChannel === void 0 ? void 0 : setChannel(null);
            });
            onCancel();
        }, type: ButtonTypes.PRIMARY },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", { className: "channel-profile-form", ref: formRef, onSubmit: function (e) { e.preventDefault(); } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "channel-profile-form__img-section" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "channel-profile-form__avatar" }, currentImg
                    ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { height: "80px", width: "80px", src: currentImg })) : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelAvatar_ChannelAvatar, { height: 80, width: 80, channel: channel, theme: theme }))),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", { ref: hiddenInputRef, type: "file", accept: "image/gif, image/jpeg, image/png", style: { display: 'none' }, onChange: function (e) {
                        if (e.target.files) {
                            setCurrentImg(URL.createObjectURL(e.target.files[0]));
                            setNewFile(e.target.files[0]);
                        }
                        if (hiddenInputRef.current)
                            hiddenInputRef.current.value = '';
                    } }),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { className: "channel-profile-form__avatar-button", onClick: function () { var _a; return (_a = hiddenInputRef.current) === null || _a === void 0 ? void 0 : _a.click(); }, disableUnderline: true },
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: LabelColors.PRIMARY }, stringSet.MODAL__CHANNEL_INFORMATION__UPLOAD))),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "channel-profile-form__name-section" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, { required: title !== '', name: "channel-profile-form__name", ref: inputRef, value: title, placeHolder: stringSet.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER })))));
};


//# sourceMappingURL=EditDetailsModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/OpenChannelProfile.js







































function OpenChannelProfile_ChannelProfile() {
    var _a, _b;
    var globalState = useSendbirdStateContext();
    var disabled = !((_a = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _a === void 0 ? void 0 : _a.isOnline);
    var theme = (_b = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _b === void 0 ? void 0 : _b.theme;
    var channel = useOpenChannelSettingsContext().channel;
    var title = channel === null || channel === void 0 ? void 0 : channel.name;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _c[0], setShowModal = _c[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-profile" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-profile--inner" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-profile__avatar" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelAvatar_ChannelAvatar, { channel: channel, theme: theme, height: 80, width: 80 })),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1, className: "sendbird-openchannel-profile__title" }, title || stringSet.OPEN_CHANNEL_SETTINGS__NO_TITLE),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, { disabled: disabled, className: "sendbird-openchannel-profile__edit", onClick: function () {
                    if (disabled) {
                        return;
                    }
                    setShowModal(true);
                }, disableUnderline: true },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.BUTTON_1, color: disabled ? LabelColors.ONBACKGROUND_2 : LabelColors.PRIMARY }, stringSet.CHANNEL_SETTING__PROFILE__EDIT)),
            showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditDetailsModal_EditDetails, { onCancel: function () { return setShowModal(false); } })))));
}


//# sourceMappingURL=OpenChannelProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/chunks/bundle-COd0N3nE.js





























function ParticipantsModal(_a) {
    var _b, _c, _d;
    var onCancel = _a.onCancel;
    var state = useSendbirdStateContext();
    var channel = useOpenChannelSettingsContext().channel;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), participants = _e[0], setParticipants = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), participantListQuery = _f[0], setParticipantListQuery = _f[1];
    var userId = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    var sdk = (_d = (_c = state === null || state === void 0 ? void 0 : state.stores) === null || _c === void 0 ? void 0 : _c.sdkStore) === null || _d === void 0 ? void 0 : _d.sdk;
    var isOperatorView = channel === null || channel === void 0 ? void 0 : channel.isOperator(userId);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel || !(channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery)) {
            return;
        }
        var participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({});
        setParticipantListQuery(participantListQuery);
        participantListQuery.next().then(function (participantList) {
            setParticipants(participantList);
        });
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { hideFooter: true, isFullScreenOnMobile: true, onCancel: function () { return onCancel(); }, onSubmit: noop, titleText: stringSet.OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: function (e) {
                    if (participantListQuery) {
                        var hasNext = participantListQuery.hasNext;
                        var target = e.target;
                        var fetchMore = (target.clientHeight + target.scrollTop === target.scrollHeight);
                        if (hasNext && fetchMore) {
                            participantListQuery.next().then(function (fetchedParticipants) {
                                setParticipants(__spreadArray(__spreadArray([], (participants !== null && participants !== void 0 ? participants : []), true), fetchedParticipants, true));
                            });
                        }
                    }
                } }, participants === null || participants === void 0 ? void 0 : participants.map(function (p) {
                var _a;
                var isOperator = channel === null || channel === void 0 ? void 0 : channel.isOperator(p.userId);
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { user: p, key: p.userId, currentUser: (_a = sdk === null || sdk === void 0 ? void 0 : sdk.currentUser) === null || _a === void 0 ? void 0 : _a.userId, action: (userId !== p.userId && isOperatorView)
                        ? function (_a) {
                            var actionRef = _a.actionRef, parentRef = _a.parentRef;
                            return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorMenuItem, { channel: channel, user: p, onChange: function () { return closeDropdown(); }, onError: function () {
                                            // FIXME: handle error later
                                            closeDropdown();
                                        }, dataSbId: "open_channel_setting_participant_context_menu_".concat((isOperator) ? 'unregister_operator' : 'register_as_operator') }, isOperator
                                        ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR
                                        : stringSet.OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR),
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MuteMenuItem, { channel: channel, user: p, onChange: function () { return closeDropdown(); }, onError: function () {
                                            // FIXME: handle error later
                                            closeDropdown();
                                        }, dataSbId: "open_channel_setting_participant_context_menu_".concat(p.isMuted ? 'unmute' : 'mute') }, p.isMuted
                                        ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE
                                        : stringSet.OPEN_CHANNEL_SETTING__MODERATION__MUTE),
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                            channel === null || channel === void 0 ? void 0 : channel.banUser(p).then(function () {
                                                closeDropdown();
                                            });
                                        }, dataSbId: "open_channel_setting_participant_context_menu_ban" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__BAN))); } }));
                        }
                        : function () { return external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null); } }));
            })))));
}

var bundle_COd0N3nE_UserListItem = function (_a) {
    var user = _a.user, currentUser = _a.currentUser, isOperator = _a.isOperator, action = _a.action;
    var avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var actionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext), disableUserProfile = _b.disableUserProfile, renderUserProfile = _b.renderUserProfile;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-participants-accordion__member" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-participants-accordion__member-avatar" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, { className: "sendbird-participants-accordion__member-avatar__avatar", onClick: function () {
                            if (!disableUserProfile) {
                                toggleDropdown();
                            }
                        }, ref: avatarRef, src: user.profileUrl, width: 24, height: 24 }),
                    user instanceof _bundle_dc8db3c3_Wt && user.isMuted ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedAvatarOverlay, null)) : '')); }, menuItems: function (closeDropdown) { return (renderUserProfile
                    ? renderUserProfile({
                        user: user,
                        currentUserId: currentUser !== null && currentUser !== void 0 ? currentUser : '',
                        close: closeDropdown,
                        avatarRef: avatarRef,
                    })
                    : (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { openLeft: true, parentRef: avatarRef, 
                        // for catching location(x, y) of MenuItems
                        parentContainRef: avatarRef, 
                        // for toggling more options(menus & reactions)
                        closeDropdown: closeDropdown, style: { paddingTop: '0px', paddingBottom: '0px' } },
                        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, { disableMessaging: true, user: user, currentUserId: currentUser, onSuccess: closeDropdown })))); } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-participants-accordion__member__title", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_1 },
            user.nickname || stringSet.NO_NAME,
            (currentUser === user.userId) && (stringSet.OPEN_CHANNEL_SETTINGS__MEMBERS__YOU)), // if there is now nickname, display userId
        !user.nickname && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-participants-accordion__member__title user-id", type: LabelTypography.CAPTION_3, color: LabelColors.ONBACKGROUND_2 }, user.userId)),
        isOperator && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-participants-accordion__member__title\n                ".concat((user === null || user === void 0 ? void 0 : user.userId) !== currentUser ? 'operator' : '', "\n                ").concat((user === null || user === void 0 ? void 0 : user.userId) === currentUser ? 'self-operator' : '', "\n              "), type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR)),
        action && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-participants-accordion__member__action", ref: actionRef }, action({ actionRef: actionRef })))));
};

function ParticipantList(_a) {
    var _b;
    var _c = _a.isOperatorView, isOperatorView = _c === void 0 ? false : _c;
    var globalState = useSendbirdStateContext();
    var currentUserId = (_b = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _b === void 0 ? void 0 : _b.userId;
    var channel = useOpenChannelSettingsContext().channel;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), participants = _d[0], setParticipants = _d[1];
    var _e = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), participantListQuery = _e[0], setParticipantListQuery = _e[1];
    var _f = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showParticipantsModal = _f[0], setShowParticipantsModal = _f[1];
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel || !(channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery)) {
            return;
        }
        var participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({ limit: 10 });
        setParticipantListQuery(participantListQuery);
        participantListQuery.next().then(function (participants) {
            setParticipants(participants);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setParticipants([]);
            return;
        }
        var participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({ limit: 10 });
        participantListQuery.next().then(function (participants) {
            setParticipants(participants);
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__participant-list", onScroll: function (e) {
            if (participantListQuery) {
                var hasNext = participantListQuery.hasNext;
                var target = e.target;
                var fetchMore = (target.clientHeight + target.scrollTop === target.scrollHeight);
                if (hasNext && fetchMore) {
                    participantListQuery.next().then(function (fetchedParticipants) {
                        setParticipants(__spreadArray(__spreadArray([], (participants !== null && participants !== void 0 ? participants : []), true), fetchedParticipants, true));
                    });
                }
            }
        } },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, participants === null || participants === void 0 ? void 0 :
            participants.map(function (p) {
                var isOperator = channel === null || channel === void 0 ? void 0 : channel.isOperator(p.userId);
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_COd0N3nE_UserListItem, { user: p, currentUser: currentUserId, key: p.userId, isOperator: isOperator, action: function (_a) {
                        var actionRef = _a.actionRef;
                        return ((isOperatorView && currentUserId !== (p === null || p === void 0 ? void 0 : p.userId))
                            ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-participant-list__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorMenuItem, { channel: channel, user: p, onChange: function () {
                                            closeDropdown();
                                            refreshList();
                                        }, onError: function () {
                                            // FIXME: handle error later
                                            closeDropdown();
                                        }, dataSbId: "open_channel_setting_partitipant_conext_menu_".concat((isOperator) ? 'unregister_operator' : 'register_as_operator') }, isOperator
                                        ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR
                                        : stringSet.OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR),
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MuteMenuItem, { channel: channel, user: p, onChange: function () {
                                            closeDropdown();
                                            refreshList();
                                        }, onError: function () {
                                            // FIXME: handle error later
                                            closeDropdown();
                                        }, dataSbId: "open_channel_setting_partitipant_conext_menu_".concat(p.isMuted ? 'unmute' : 'mute') }, p.isMuted
                                        ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE
                                        : stringSet.OPEN_CHANNEL_SETTING__MODERATION__MUTE),
                                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                            channel === null || channel === void 0 ? void 0 : channel.banUser(p).then(function () {
                                                closeDropdown();
                                                refreshList();
                                            });
                                        }, dataSbId: "open_channel_setting_partitipant_conext_menu_ban" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__BAN))); } }))
                            : null);
                    } }));
            }),
            (participants && participants.length === 0)
                ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-settings__empty-list", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_3 }, stringSet.OPEN_CHANNEL_SETTINGS__EMPTY_LIST)) : null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-participant-list__footer" }, (participantListQuery === null || participantListQuery === void 0 ? void 0 : participantListQuery.hasNext) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () { return setShowParticipantsModal(true); } }, stringSet.OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE))),
            showParticipantsModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParticipantsModal, { onCancel: function () {
                    setShowParticipantsModal(false);
                    refreshList();
                } })))));
}


//# sourceMappingURL=bundle-COd0N3nE.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/OperatorUI.js


















































function DeleteChannel() {
    var _a, _b;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showDeleteChannelModal = _c[0], setShowDeleteChannelModal = _c[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var globalState = useSendbirdStateContext();
    var isOnline = (_a = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _a === void 0 ? void 0 : _a.isOnline;
    var logger = (_b = globalState === null || globalState === void 0 ? void 0 : globalState.config) === null || _b === void 0 ? void 0 : _b.logger;
    var _d = useOpenChannelSettingsContext(), channel = _d.channel, onDeleteChannel = _d.onDeleteChannel;
    var deleteChannel = function () {
        channel === null || channel === void 0 ? void 0 : channel.delete().then(function (response) {
            logger.info('OpenChannelSettings: Delete channel success', response);
            if (onDeleteChannel) {
                onDeleteChannel(channel);
            }
        }).catch(function (error) {
            logger.warning('OpenChannelSettings: Delete channel failed', error);
        });
    };
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__panel-item\n          sendbird-openchannel-settings__delete-channel\n            ".concat(!isOnline ? 'sendbird-openchannel-settings__panel-item__disabled' : ''), role: "button", tabIndex: 0, onKeyDown: function () {
                if (!isOnline) {
                    return;
                }
                setShowDeleteChannelModal(true);
            }, onClick: function () {
                if (!isOnline) {
                    return;
                }
                setShowDeleteChannelModal(true);
            } },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.DELETE, fillColor: IconColors.ERROR, className: [
                    'sendbird-openchannel-settings__panel-icon-left',
                    'sendbird-openchannel-settings__panel-icon__delete',
                ].join(' '), height: "24px", width: "24px" }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL)),
        showDeleteChannelModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, onCancel: function () {
                setShowDeleteChannelModal(false);
            }, onSubmit: function () {
                deleteChannel();
            }, titleText: stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE, submitText: stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT }, stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT))));
}

function OperatorListModal(_a) {
    var _b;
    var onCancel = _a.onCancel;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), users = _c[0], setUsers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), operatorQuery = _d[0], setOperatorQuery = _d[1];
    var channel = useOpenChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUserId = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
            limit: 20,
        });
        if (operatorListQuery) {
            operatorListQuery.next().then(function (participants) {
                setUsers(participants);
            });
            setOperatorQuery(operatorListQuery);
        }
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { hideFooter: true, isFullScreenOnMobile: true, titleText: stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL, onCancel: onCancel },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-users__popup-scroll", onScroll: function (e) {
                    var hasNext = operatorQuery === null || operatorQuery === void 0 ? void 0 : operatorQuery.hasNext;
                    var target = e.target;
                    var fetchMore = (target.clientHeight + target.scrollTop === target.scrollHeight);
                    if (hasNext && fetchMore) {
                        operatorQuery.next().then(function (o) {
                            setUsers(__spreadArray(__spreadArray([], users, true), o, true));
                        });
                    }
                } }, users.map(function (operator) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { currentUser: currentUserId, user: operator, key: operator.userId, action: function (_a) {
                    var parentRef = _a.parentRef, actionRef = _a.actionRef;
                    return (currentUserId !== (operator === null || operator === void 0 ? void 0 : operator.userId)
                        ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentContainRef: parentRef, parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                        channel === null || channel === void 0 ? void 0 : channel.removeOperators([operator.userId]).then(function () {
                                            setUsers(users.filter(function (_a) {
                                                var userId = _a.userId;
                                                return userId !== operator.userId;
                                            }));
                                        });
                                        closeDropdown();
                                    }, dataSbId: "open_channel_setting_operator_context_menu_unregister_operator" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))); } })) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
                } })); })))));
}

function OperatorUI_AddOperatorsModal(_a) {
    var onCancel = _a.onCancel, onSubmit = _a.onSubmit;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), participants = _b[0], setParticipants = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({}), selectedUsers = _c[0], setSelectedUsers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), participantQuery = _d[0], setParticipantQuery = _d[1];
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var channel = useOpenChannelSettingsContext().channel;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({
            limit: 20,
        });
        if (participantListQuery) {
            participantListQuery.next().then(function (users) {
                setParticipants(users);
            });
            setParticipantQuery(participantListQuery);
        }
    }, []);
    var selectedCount = Object.keys(selectedUsers).filter(function (m) { return selectedUsers[m]; }).length;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, type: ButtonTypes.PRIMARY, submitText: stringSet.CHANNEL_SETTING__OPERATORS__ADD_BUTTON, onCancel: onCancel, onSubmit: function () {
                var users = Object.keys(selectedUsers).filter(function (m) { return selectedUsers[m]; });
                channel === null || channel === void 0 ? void 0 : channel.addOperators(users).then(function () {
                    onSubmit(users);
                });
            }, titleText: stringSet.OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { color: (selectedCount > 0) ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3, type: LabelTypography.CAPTION_1 }, "".concat(selectedCount, " ").concat(stringSet.MODAL__INVITE_MEMBER__SELECTED)),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-users__popup-scroll", onScroll: function (e) {
                    var hasNext = participantQuery ? participantQuery.hasNext : false;
                    var target = e.target;
                    var fetchMore = (target.clientHeight + target.scrollTop === target.scrollHeight);
                    if (hasNext && fetchMore && participantQuery) {
                        participantQuery.next().then(function (o) {
                            setParticipants(__spreadArray(__spreadArray([], participants, true), o, true));
                        });
                    }
                } }, participants.map(function (participant) {
                var isOperator = (channel === null || channel === void 0 ? void 0 : channel.operators.find(function (operator) { return (operator === null || operator === void 0 ? void 0 : operator.userId) === (participant === null || participant === void 0 ? void 0 : participant.userId); })) ? true : false;
                return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { checkBox: true, checked: selectedUsers[participant.userId] || isOperator, disabled: isOperator, isOperator: isOperator, onChange: function (event) {
                        var _a;
                        var modifiedSelectedUsers = __assign(__assign({}, selectedUsers), (_a = {}, _a[event.target.id] = event.target.checked, _a));
                        if (!event.target.checked) {
                            delete modifiedSelectedUsers[event.target.id];
                        }
                        setSelectedUsers(modifiedSelectedUsers);
                    }, user: participant, key: participant.userId }));
            })))));
}

var OperatorUI_OperatorList = function () {
    var _a, _b;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showAdd = _c[0], setShowAdd = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showMore = _d[0], setShowMore = _d[1];
    var state = useSendbirdStateContext();
    var currentUserId = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var channel = useOpenChannelSettingsContext().channel;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, (_b = channel === null || channel === void 0 ? void 0 : channel.operators) === null || _b === void 0 ? void 0 :
        _b.slice(0, 10).map(function (operator) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_COd0N3nE_UserListItem, { key: operator.userId, user: operator, currentUser: currentUserId, action: function (_a) {
                var actionRef = _a.actionRef;
                return (currentUserId !== (operator === null || operator === void 0 ? void 0 : operator.userId)
                    ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-openchannel-operator-list__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.removeOperators([operator.userId]).then(function () {
                                        closeDropdown();
                                    });
                                }, dataSbId: "open_channel_setting_operator_context_menu_unregister_operator" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MuteMenuItem, { channel: channel, user: operator, onChange: function () { return closeDropdown(); }, onError: function () {
                                    // FIXME: handle error later
                                    closeDropdown();
                                }, dataSbId: "open_channel_setting_operator_context_menu_".concat(operator.isMuted ? 'unmute' : 'mute') }, operator.isMuted
                                ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE
                                : stringSet.OPEN_CHANNEL_SETTING__MODERATION__MUTE),
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.banUser(operator).then(function () {
                                        closeDropdown();
                                    });
                                }, dataSbId: "open_channel_setting_operator_context_menu_ban" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__BAN))); } })) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
            } })); }),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-operator-list__footer" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowAdd(true);
                } }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD),
            (channel === null || channel === void 0 ? void 0 : channel.operators) && channel.operators.length > 10 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowMore(true);
                } }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL))),
        showMore && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorListModal, { onCancel: function () {
                    setShowMore(false);
                } }))),
        showAdd && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI_AddOperatorsModal, { onCancel: function () { return setShowAdd(false); }, onSubmit: function () {
                    setShowAdd(false);
                } })))));
};

function MutedParticipantsModal(_a) {
    var _b;
    var onCancel = _a.onCancel;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mutedUsers = _c[0], setMutedUsers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), userListQuery = _d[0], setUserListQuery = _d[1];
    var channel = useOpenChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUserId = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var mutedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMutedUserListQuery({
            limit: 10,
        });
        mutedUserListQuery === null || mutedUserListQuery === void 0 ? void 0 : mutedUserListQuery.next().then(function (users) {
            setMutedUsers(users);
        });
        if (mutedUserListQuery) {
            setUserListQuery(mutedUserListQuery);
        }
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { isFullScreenOnMobile: true, hideFooter: true, onCancel: function () { return onCancel(); }, onSubmit: noop, titleText: stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: function (e) {
                    var hasNext = userListQuery === null || userListQuery === void 0 ? void 0 : userListQuery.hasNext;
                    var target = e.target;
                    var fetchMore = (target.clientHeight + target.scrollTop === target.scrollHeight);
                    if (hasNext && fetchMore) {
                        userListQuery.next().then(function (o) {
                            setMutedUsers(__spreadArray(__spreadArray([], mutedUsers, true), o, true));
                        });
                    }
                } }, mutedUsers.map(function (mutedUser) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { currentUser: currentUserId, user: mutedUser, key: mutedUser.userId, action: function (_a) {
                    var actionRef = _a.actionRef;
                    return ((mutedUser === null || mutedUser === void 0 ? void 0 : mutedUser.userId) !== currentUserId
                        ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                        channel === null || channel === void 0 ? void 0 : channel.unmuteUser(mutedUser).then(function () {
                                            closeDropdown();
                                            setMutedUsers(mutedUsers.filter(function (u) {
                                                return (u.userId !== mutedUser.userId);
                                            }));
                                        });
                                    }, dataSbId: "open_channel_setting_muted_member_context_menu_unmute" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE))); } })) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
                } })); })))));
}

var MutedParticipantList = function () {
    var _a;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), mutedUsers = _b[0], setMutedUsers = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), hasNext = _c[0], setHasNext = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _d[0], setShowModal = _d[1];
    var channel = useOpenChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var currentUserId = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel) {
            setMutedUsers([]);
            return;
        }
        var mutedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMutedUserListQuery({
            limit: 10,
        });
        mutedUserListQuery.next().then(function (members) {
            setMutedUsers(members);
            setHasNext(mutedUserListQuery.hasNext);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setMutedUsers([]);
            return;
        }
        var mutedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMutedUserListQuery({
            limit: 10,
        });
        mutedUserListQuery.next().then(function (members) {
            setMutedUsers(members);
            setHasNext(mutedUserListQuery.hasNext);
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        mutedUsers.map(function (mutedUser) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_COd0N3nE_UserListItem, { key: mutedUser.userId, user: mutedUser, currentUser: currentUserId, isOperator: channel === null || channel === void 0 ? void 0 : channel.isOperator(mutedUser.userId), action: function (_a) {
                var actionRef = _a.actionRef;
                return ((mutedUser === null || mutedUser === void 0 ? void 0 : mutedUser.userId) !== currentUserId
                    ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { closeDropdown: closeDropdown, openLeft: true, parentRef: actionRef },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.unmuteUser(mutedUser).then(function () {
                                        refreshList();
                                        closeDropdown();
                                    });
                                }, dataSbId: "open_channel_setting_muted_member_context_menu_unmute" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE))); } })) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
            } })); }),
        mutedUsers && mutedUsers.length === 0 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-settings__empty-list", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_3 }, stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE)),
        hasNext && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-muted-participant-list__footer" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowModal(true);
                } }, stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL))),
        showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedParticipantsModal, { onCancel: function () {
                setShowModal(false);
                refreshList();
            } }))));
};

function OperatorUI_BannedUsersModal(_a) {
    var _b;
    var onCancel = _a.onCancel;
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), bannedUsers = _c[0], setBannedUsers = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null), userListQuery = _d[0], setUserListQuery = _d[1];
    var channel = useOpenChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var currentUserId = (_b = state === null || state === void 0 ? void 0 : state.config) === null || _b === void 0 ? void 0 : _b.userId;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        var bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
        bannedUserListQuery === null || bannedUserListQuery === void 0 ? void 0 : bannedUserListQuery.next().then(function (users) {
            setBannedUsers(users);
        });
        setUserListQuery(bannedUserListQuery !== null && bannedUserListQuery !== void 0 ? bannedUserListQuery : null);
    }, []);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, { hideFooter: true, isFullScreenOnMobile: true, onCancel: function () { return onCancel(); }, onSubmit: noop, titleText: stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-more-members__popup-scroll", onScroll: function (e) {
                    var hasNext = userListQuery === null || userListQuery === void 0 ? void 0 : userListQuery.hasNext;
                    var target = e.target;
                    var fetchMore = (target.clientHeight + target.scrollTop === target.scrollHeight);
                    if (hasNext && fetchMore) {
                        userListQuery.next().then(function (o) {
                            setBannedUsers(__spreadArray(__spreadArray([], bannedUsers, true), o, true));
                        });
                    }
                } }, bannedUsers.map(function (bannedUser) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, { user: bannedUser, key: bannedUser.userId, action: function (_a) {
                    var actionRef = _a.actionRef;
                    return ((bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) !== currentUserId
                        ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                        channel === null || channel === void 0 ? void 0 : channel.unbanUser(bannedUser).then(function () {
                                            closeDropdown();
                                            setBannedUsers(bannedUsers.filter(function (u) {
                                                return (u.userId !== bannedUser.userId);
                                            }));
                                        });
                                    }, dataSbId: "open_channel_setting_banned_user_context_menu_unban" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNBAN))); } })) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
                } })); })))));
}

var BannedUserList = function () {
    var _a;
    var _b = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]), bannedUsers = _b[0], setBannedUsers = _b[1];
    var _c = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), hasNext = _c[0], setHasNext = _c[1];
    var _d = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false), showModal = _d[0], setShowModal = _d[1];
    var channel = useOpenChannelSettingsContext().channel;
    var state = useSendbirdStateContext();
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var currentUserId = (_a = state === null || state === void 0 ? void 0 : state.config) === null || _a === void 0 ? void 0 : _a.userId;
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(function () {
        if (!channel) {
            setBannedUsers([]);
            return;
        }
        var bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
        bannedUserListQuery.next().then(function (users) {
            setBannedUsers(users);
            setHasNext(bannedUserListQuery.hasNext);
        });
    }, [channel]);
    var refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function () {
        if (!channel) {
            setBannedUsers([]);
            return;
        }
        var bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
        bannedUserListQuery.next().then(function (users) {
            setBannedUsers(users);
            setHasNext(bannedUserListQuery.hasNext);
        });
    }, [channel]);
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        bannedUsers.map(function (bannedUser) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(bundle_COd0N3nE_UserListItem, { key: bannedUser.userId, user: bannedUser, isOperator: channel === null || channel === void 0 ? void 0 : channel.isOperator(bannedUser.userId), action: function (_a) {
                var actionRef = _a.actionRef;
                return ((bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) !== currentUserId
                    ? (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, { menuTrigger: function (toggleDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, { className: "sendbird-user-message__more__menu", width: "32px", height: "32px", onClick: toggleDropdown },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { width: "24px", height: "24px", type: IconTypes.MORE, fillColor: IconColors.CONTENT_INVERSE }))); }, menuItems: function (closeDropdown) { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu_MenuItems, { parentRef: actionRef, closeDropdown: closeDropdown, openLeft: true },
                            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, { onClick: function () {
                                    channel === null || channel === void 0 ? void 0 : channel.unbanUser(bannedUser).then(function () {
                                        closeDropdown();
                                        refreshList();
                                    });
                                }, dataSbId: "open_channel_setting_banned_user_context_menu_unban" }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNBAN))); } })) : external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null));
            } })); }),
        bannedUsers && bannedUsers.length === 0 && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-channel-settings__empty-list", type: LabelTypography.SUBTITLE_2, color: LabelColors.ONBACKGROUND_3 }, stringSet.OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE)),
        hasNext && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-channel-settings-banned-user-list__footer" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, { type: ButtonTypes.SECONDARY, size: ButtonSizes.SMALL, onClick: function () {
                    setShowModal(true);
                } }, stringSet.OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL))),
        showModal && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI_BannedUsersModal, { onCancel: function () {
                setShowModal(false);
                refreshList();
            } }))));
};

var OperatorUI_copyToClipboard = function (text) {
    // @ts-ignore: Unreachable code error
    if (window.clipboardData && window.clipboardData.setData) {
        // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
        // @ts-ignore: Unreachable code error
        return window.clipboardData.setData('Text', text);
    }
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = text;
        textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.
        document.body.appendChild(textarea);
        textarea.select();
        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        }
        catch (ex) {
            return false;
        }
        finally {
            document.body.removeChild(textarea);
        }
    }
    return false;
};
var OperatorUI = function (_a) {
    var renderChannelProfile = _a.renderChannelProfile;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    var _b = useOpenChannelSettingsContext(), onCloseClick = _b.onCloseClick, channel = _b.channel;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__header" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__HEADER__TITLE),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-settings__close-icon", type: IconTypes.CLOSE, height: "24px", width: "24px", onClick: function () {
                    onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
                } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__profile" }, (renderChannelProfile === null || renderChannelProfile === void 0 ? void 0 : renderChannelProfile()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelProfile_ChannelProfile, null))),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__url" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-settings__copy-icon", type: IconTypes.COPY, height: "22px", width: "22px", onClick: function () {
                    var _a;
                    OperatorUI_copyToClipboard((_a = channel === null || channel === void 0 ? void 0 : channel.url) !== null && _a !== void 0 ? _a : '');
                } }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-settings__url-label", type: LabelTypography.CAPTION_2, color: LabelColors.ONBACKGROUND_2 }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATOR_URL),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { className: "sendbird-openchannel-settings__url-value", type: LabelTypography.SUBTITLE_2 }, channel === null || channel === void 0 ? void 0 : channel.url)),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AccordionGroup, null,
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-openchannel-settings__operators-list", id: "operators", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-settings__operator-accordion-icon", type: IconTypes.OPERATOR, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE))); }, renderContent: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI_OperatorList, null))); } }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-channel-settings__operators-list", id: "participants", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.MEMBERS, fillColor: IconColors.PRIMARY, width: 24, height: 24, className: "sendbird-openchannel-settings__operator-accordion-icon" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE))); }, renderContent: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParticipantList, { isOperatorView: true }))); } }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-channel-settings__operators-list", id: "mutedMembers", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-settings__operator-accordion-icon", type: IconTypes.MUTE, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE))); }, renderContent: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedParticipantList, null))); } }),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, { className: "sendbird-channel-settings__operators-list", id: "bannedUsers", renderTitle: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { className: "sendbird-openchannel-settings__operator-accordion-icon", type: IconTypes.BAN, fillColor: IconColors.PRIMARY, width: "24px", height: "24px" }),
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.SUBTITLE_1, color: LabelColors.ONBACKGROUND_1 }, stringSet.OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE))); }, renderContent: function () { return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null,
                    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BannedUserList, null))); } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DeleteChannel, null)));
};


//# sourceMappingURL=OperatorUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/OpenChannelSettingsUI.js





















































function InvalidChannel(_a) {
    var onCloseClick = _a.onCloseClick;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings" },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__header" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, stringSet.CHANNEL_SETTING__HEADER__TITLE),
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CLOSE, className: "sendbird-openchannel-settings__close-icon", height: "24px", width: "24px", onClick: function () {
                    onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
                } })),
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__placeholder" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaceHolder, { type: PlaceHolderTypes.WRONG }))));
}

var OpenChannelSettingsUI_OpenChannelUI = function (_a) {
    var _b, _c, _d;
    var renderOperatorUI = _a.renderOperatorUI, renderParticipantList = _a.renderParticipantList;
    var _e = useOpenChannelSettingsContext(), channel = _e.channel, onCloseClick = _e.onCloseClick, isChannelInitialized = _e.isChannelInitialized;
    var globalStore = useSendbirdStateContext();
    var logger = (_b = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config) === null || _b === void 0 ? void 0 : _b.logger;
    var user = (_d = (_c = globalStore === null || globalStore === void 0 ? void 0 : globalStore.stores) === null || _c === void 0 ? void 0 : _c.userStore) === null || _d === void 0 ? void 0 : _d.user;
    var stringSet = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext).stringSet;
    if (isChannelInitialized && !channel) {
        return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InvalidChannel, { onCloseClick: function () {
                logger.info('OpenChannelSettings: Click close');
                if (onCloseClick) {
                    onCloseClick();
                }
            } }));
    }
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: 'sendbird-openchannel-settings' },
        (channel === null || channel === void 0 ? void 0 : channel.isOperator(user)) && ((renderOperatorUI === null || renderOperatorUI === void 0 ? void 0 : renderOperatorUI()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI, null))),
        !(channel === null || channel === void 0 ? void 0 : channel.isOperator(user)) && (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__participant" },
            external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", { className: "sendbird-openchannel-settings__header" },
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, { type: LabelTypography.H_2, color: LabelColors.ONBACKGROUND_1 }, stringSet.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE),
                external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, { type: IconTypes.CLOSE, className: "sendbird-openchannel-settings__close-icon", height: "24px", width: "24px", onClick: function () {
                        onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
                    } })),
            (renderParticipantList === null || renderParticipantList === void 0 ? void 0 : renderParticipantList()) || (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParticipantList, null))))));
};


//# sourceMappingURL=OpenChannelSettingsUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings.js






















































var OpenChannelSetting = function (props) {
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelSettingsProvider, { channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl, onCloseClick: props === null || props === void 0 ? void 0 : props.onCloseClick, onBeforeUpdateChannel: props === null || props === void 0 ? void 0 : props.onBeforeUpdateChannel, onChannelModified: props === null || props === void 0 ? void 0 : props.onChannelModified, onDeleteChannel: props === null || props === void 0 ? void 0 : props.onDeleteChannel, disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile, renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile },
        external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelSettingsUI_OpenChannelUI, { renderOperatorUI: props === null || props === void 0 ? void 0 : props.renderOperatorUI, renderParticipantList: props === null || props === void 0 ? void 0 : props.renderParticipantList })));
};


//# sourceMappingURL=OpenChannelSettings.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index.js

















































































































































































































































//# sourceMappingURL=index.js.map

// EXTERNAL MODULE: ./node_modules/sendbird-uikit/dist/index.css
var dist = __webpack_require__(14);

// EXTERNAL MODULE: ./src/index.css
var src_0 = __webpack_require__(15);

// CONCATENATED MODULE: ./src/index.js
function src_extends() { src_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return src_extends.apply(this, arguments); }






function Component(props) {
  var _props$model, _props$model2, _props$model3, _props$model4, _props$model5, _props$model6;
  var _useState = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    currentChannel = _useState[0],
    setCurrentChannel = _useState[1];
  var _useState2 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false),
    showThread = _useState2[0],
    setShowThread = _useState2[1];
  var _useState3 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    threadTargetMessage = _useState3[0],
    setThreadTargetMessage = _useState3[1];
  var _useState4 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false),
    showSettings = _useState4[0],
    setShowSettings = _useState4[1];
  var _useState5 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false),
    showSearch = _useState5[0],
    setShowSearch = _useState5[1];
  var _useState6 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    highlightedMessage = _useState6[0],
    setHighlightedMessage = _useState6[1];
  var _useState7 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    startingPoint = _useState7[0],
    setStartingPoint = _useState7[1];
  var _props$userListQuery = props.userListQuery,
    userListQuery = _props$userListQuery === void 0 ? null : _props$userListQuery,
    _props$profileUrl = props.profileUrl,
    profileUrl = _props$profileUrl === void 0 ? "" : _props$profileUrl,
    _props$dateLocale = props.dateLocale,
    dateLocale = _props$dateLocale === void 0 ? null : _props$dateLocale,
    _props$colorSet = props.colorSet,
    colorSet = _props$colorSet === void 0 ? null : _props$colorSet,
    _props$allowProfileEd = props.allowProfileEdit,
    allowProfileEdit = _props$allowProfileEd === void 0 ? false : _props$allowProfileEd,
    _props$onProfileEditS = props.onProfileEditSuccess,
    onProfileEditSuccess = _props$onProfileEditS === void 0 ? null : _props$onProfileEditS,
    _props$disableAutoSel = props.disableAutoSelect,
    disableAutoSelect = _props$disableAutoSel === void 0 ? false : _props$disableAutoSel,
    showSearchIcon = props.showSearchIcon,
    replyType = props.replyType,
    isMultipleFilesMessageEnabled = props.isMultipleFilesMessageEnabled;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdProvider, {
    appId: (_props$model = props.model) === null || _props$model === void 0 ? void 0 : _props$model.sendbirdAppId,
    userId: (_props$model2 = props.model) === null || _props$model2 === void 0 ? void 0 : _props$model2.userId,
    accessToken: (_props$model3 = props.model) === null || _props$model3 === void 0 ? void 0 : _props$model3.accessToken,
    theme: "light",
    nickname: (_props$model4 = props.model) === null || _props$model4 === void 0 ? void 0 : _props$model4.userNickname,
    profileUrl: profileUrl,
    dateLocale: dateLocale,
    userListQuery: userListQuery,
    colorSet: colorSet,
    onUserProfileMessage: function onUserProfileMessage(channel) {
      setCurrentChannel(channel);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__channellist-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelList, {
    allowProfileEdit: allowProfileEdit,
    activeChannelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
    onProfileEditSuccess: onProfileEditSuccess,
    disableAutoSelect: disableAutoSelect,
    onChannelSelect: function onChannelSelect(channel) {
      setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(null);
      setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
      if (channel) {
        setCurrentChannel(channel);
      } else {
        setCurrentChannel(null);
      }
    },
    queries: ((_props$model5 = props.model) === null || _props$model5 === void 0 ? void 0 : _props$model5.channelUrlList) ? {
      channelListQuery: {
        channelUrlsFilter: (_props$model6 = props.model) === null || _props$model6 === void 0 ? void 0 : _props$model6.channelUrlList
      }
    } : null,
    renderChannelPreview: function renderChannelPreview(props) {
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(GroupChannelListItem, src_extends({}, props, {
        renderChannelAction: function renderChannelAction() {
          return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", null, props.channel.customType);
        }
      }));
    }
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "\n          " + (showSettings ? "sendbird-app__conversation--settings-open" : "") + "\n          " + (showSearch ? "sendbird-app__conversation--search-open" : "") + "\n          sendbird-app__conversation-wrap\n        "
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Channel, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || "",
    onChatHeaderActionClick: function onChatHeaderActionClick() {
      setShowSearch(false);
      setShowThread(false);
      setShowSettings(!showSettings);
    },
    onSearchClick: function onSearchClick() {
      setShowSettings(false);
      setShowThread(false);
      setShowSearch(!showSearch);
    },
    onReplyInThread: function onReplyInThread(_ref) {
      var message = _ref.message;
      // parent message
      setShowSettings(false);
      setShowSearch(false);
      if (replyType === "THREAD") {
        setThreadTargetMessage(message);
        setShowThread(true);
      }
    },
    onQuoteMessageClick: function onQuoteMessageClick(_ref2) {
      var message = _ref2.message;
      // thread message
      setShowSettings(false);
      setShowSearch(false);
      if (replyType === "THREAD") {
        setThreadTargetMessage(message);
        setShowThread(true);
      }
    },
    onMessageAnimated: function onMessageAnimated() {
      setHighlightedMessage(null);
    },
    onMessageHighlighted: function onMessageHighlighted() {
      setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
    },
    showSearchIcon: showSearchIcon,
    startingPoint: startingPoint,
    animatedMessage: highlightedMessage,
    isReactionEnabled: true,
    replyType: replyType,
    isMessageGroupingEnabled: true,
    isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled
  })), showSettings && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__settingspanel-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettings, {
    className: "sendbird-channel-settings",
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || "",
    onCloseClick: function onCloseClick() {
      setShowSettings(false);
    }
  })), showThread && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Thread, {
    className: "sendbird-app__thread",
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || "",
    message: threadTargetMessage,
    onHeaderActionClick: function onHeaderActionClick() {
      setShowThread(false);
    },
    onMoveToParentMessage: function onMoveToParentMessage(_ref3) {
      var message = _ref3.message,
        channel = _ref3.channel;
      if ((channel === null || channel === void 0 ? void 0 : channel.url) !== (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
        setCurrentChannel(channel);
      }
      if ((message === null || message === void 0 ? void 0 : message.messageId) !== highlightedMessage) {
        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(message === null || message === void 0 ? void 0 : message.createdAt);
      }
      setTimeout(function () {
        setHighlightedMessage(message === null || message === void 0 ? void 0 : message.messageId);
      }, 500);
    }
  })));
}

/***/ })
/******/ ])["default"];
});