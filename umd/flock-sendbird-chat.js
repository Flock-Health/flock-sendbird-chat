/*!
 * flock-sendbird-chat v0.0.1
 * MIT Licensed
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("react"));
	else if(typeof define === 'function' && define.amd)
		define(["react"], factory);
	else if(typeof exports === 'object')
		exports["FlockChat"] = factory(require("react"));
	else
		root["FlockChat"] = factory(root["React"]);
})(window, function(__WEBPACK_EXTERNAL_MODULE__1__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 	};
/******/
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		0: 0
/******/ 	};
/******/
/******/
/******/
/******/ 	// script path function
/******/ 	function jsonpScriptSrc(chunkId) {
/******/ 		return __webpack_require__.p + "" + chunkId + ".flock-sendbird-chat.js"
/******/ 	}
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		var promises = [];
/******/
/******/
/******/ 		// JSONP chunk loading for javascript
/******/
/******/ 		var installedChunkData = installedChunks[chunkId];
/******/ 		if(installedChunkData !== 0) { // 0 means "already installed".
/******/
/******/ 			// a Promise means "currently loading".
/******/ 			if(installedChunkData) {
/******/ 				promises.push(installedChunkData[2]);
/******/ 			} else {
/******/ 				// setup Promise in chunk cache
/******/ 				var promise = new Promise(function(resolve, reject) {
/******/ 					installedChunkData = installedChunks[chunkId] = [resolve, reject];
/******/ 				});
/******/ 				promises.push(installedChunkData[2] = promise);
/******/
/******/ 				// start chunk loading
/******/ 				var script = document.createElement('script');
/******/ 				var onScriptComplete;
/******/
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.src = jsonpScriptSrc(chunkId);
/******/
/******/ 				// create error before stack unwound to get useful stacktrace later
/******/ 				var error = new Error();
/******/ 				onScriptComplete = function (event) {
/******/ 					// avoid mem leaks in IE.
/******/ 					script.onerror = script.onload = null;
/******/ 					clearTimeout(timeout);
/******/ 					var chunk = installedChunks[chunkId];
/******/ 					if(chunk !== 0) {
/******/ 						if(chunk) {
/******/ 							var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 							var realSrc = event && event.target && event.target.src;
/******/ 							error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 							error.name = 'ChunkLoadError';
/******/ 							error.type = errorType;
/******/ 							error.request = realSrc;
/******/ 							chunk[1](error);
/******/ 						}
/******/ 						installedChunks[chunkId] = undefined;
/******/ 					}
/******/ 				};
/******/ 				var timeout = setTimeout(function(){
/******/ 					onScriptComplete({ type: 'timeout', target: script });
/******/ 				}, 120000);
/******/ 				script.onerror = script.onload = onScriptComplete;
/******/ 				document.head.appendChild(script);
/******/ 			}
/******/ 		}
/******/ 		return Promise.all(promises);
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	var jsonpArray = window["webpackJsonpFlockChat"] = window["webpackJsonpFlockChat"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 9);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/* unused harmony export $ */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ne; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return Vr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ir; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return cr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return X; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return Mr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return zr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return br; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return ke; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return Me; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return N; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return M; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return U; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return d; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return qr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return f; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return T; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return _; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return R; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return p; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return Pr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return To; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return Ve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return No; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return z; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return P; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "A", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "B", function() { return w; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C", function() { return H; });
/* unused harmony export a0 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "D", function() { return F; });
/* unused harmony export a2 */
/* unused harmony export a3 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "E", function() { return Re; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "F", function() { return De; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "G", function() { return Le; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H", function() { return oe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "I", function() { return Sr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "J", function() { return y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "K", function() { return Lo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return v; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "M", function() { return k; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "N", function() { return zo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "O", function() { return is; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "P", function() { return Fo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Q", function() { return D; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "R", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "S", function() { return Mo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "T", function() { return Po; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "U", function() { return Uo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "V", function() { return xo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "W", function() { return le; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "X", function() { return So; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y", function() { return Yo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Z", function() { return Xo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ab", function() { return es; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bb", function() { return ts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cb", function() { return Jo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "db", function() { return $o; });
/* unused harmony export aU */
/* unused harmony export aV */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "eb", function() { return $; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fb", function() { return po; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gb", function() { return Se; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hb", function() { return pe; });
/* unused harmony export a_ */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ib", function() { return V; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jb", function() { return Dr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "kb", function() { return j; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lb", function() { return Z; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mb", function() { return C; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nb", function() { return q; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ob", function() { return Io; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pb", function() { return B; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "qb", function() { return ar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rb", function() { return be; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sb", function() { return ye; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "tb", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ub", function() { return Br; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "vb", function() { return Fe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "wb", function() { return K; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "xb", function() { return se; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "yb", function() { return qe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zb", function() { return Ho; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ab", function() { return me; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bb", function() { return he; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Cb", function() { return we; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Db", function() { return G; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Eb", function() { return ko; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Fb", function() { return fe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Gb", function() { return Vo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hb", function() { return wr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ib", function() { return r; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Jb", function() { return I; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Kb", function() { return ae; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lb", function() { return A; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Mb", function() { return Ao; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Nb", function() { return xe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ob", function() { return Do; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Pb", function() { return Wr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Qb", function() { return Co; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Rb", function() { return ue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sb", function() { return ce; });
/* unused harmony export ba */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tb", function() { return o; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ub", function() { return re; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Vb", function() { return ee; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wb", function() { return Ne; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Xb", function() { return n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Yb", function() { return Ae; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Zb", function() { return O; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ac", function() { return _e; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bc", function() { return de; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cc", function() { return Ee; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dc", function() { return Q; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ec", function() { return Ue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fc", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "gc", function() { return a; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hc", function() { return g; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ic", function() { return s; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jc", function() { return xr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "kc", function() { return ss; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lc", function() { return te; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mc", function() { return l; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nc", function() { return us; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "oc", function() { return Lr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pc", function() { return lr; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "qc", function() { return or; });
var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};function i(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function r(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function o(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function c(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var u,l="4.9.10",h=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();!function(e){e[e.STAT_LOG_NOT_ALLOWED=400108]="STAT_LOG_NOT_ALLOWED",e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR"}(u||(u={}));var d,_,f,p,E,v=function(e){return!(e instanceof g&&!e.shouldThrowOutside)},g=function(e){function n(t){var i=t.code,r=void 0===i?0:i,o=t.message,s=void 0===o?"":o,a=e.call(this,s)||this;return a.shouldThrowOutside=!1,a.name="SendbirdError",a.code=r,Object.setPrototypeOf(a,n.prototype),a}return t(n,e),Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===u.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===u.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===u.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===u.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===u.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===u.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:u.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:u.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:u.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:u.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:u.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:u.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:u.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:u.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:u.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:u.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:u.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:u.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:u.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:u.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:u.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:u.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:u.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:u.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:u.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:u.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:u.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:u.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:u.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:u.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:u.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n}(Error),b=[u.CONNECTION_REQUIRED,u.NETWORK_ERROR,u.ACK_TIMEOUT,u.WEBSOCKET_CONNECTION_CLOSED,u.WEBSOCKET_CONNECTION_FAILED,u.FILE_UPLOAD_CANCEL_FAILED,u.REQUEST_CANCELED,u.INTERNAL_SERVER_ERROR,u.RATE_LIMIT_EXCEEDED,u.UNKNOWN_SERVER_ERROR],m=[u.WEBSOCKET_CONNECTION_CLOSED,u.WEBSOCKET_CONNECTION_FAILED,u.CONNECTION_REQUIRED],y=function(e,t){if(e!==t){var i=n({},e),r=n({},t);return(!i.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||i.messageId===r.messageId)&&((!i.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||i.reqId===r.reqId)&&(i.hasOwnProperty("messageId")&&delete i.messageId,i.hasOwnProperty("reqId")&&delete i.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(i)===JSON.stringify(r)))}return!0},w=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||("string"!=typeof e?"object"==typeof e?T(e,t):S(e,t):typeof t===e)},T=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Object.values(e).includes(t)},S=function(e,t){return t instanceof e},N=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Array.isArray(t)&&t.every((function(t){return w(e,t)}))},A=function(e,t){return void 0===t&&(t=!1),!(!t||void 0!==e)||"number"==typeof e&&13===e.toString().length},C=function(e){return e>0&&b.indexOf(e)>=0},k=function(e){return e>0&&m.indexOf(e)>=0},O=function(e,t){if(void 0===t&&(t=!1),t&&null==e)return!0;var n="object"==typeof e&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!n){if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n},I=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=c([],a(e),!1).sort(),i=c([],a(t),!1).sort(),r=0;r<n.length;++r)if(n[r]!==i[r])return!1;return!0},R=function(){function e(e){var t=void 0===e?{}:e,n=t.useMemberInfoInMessage,i=void 0===n||n,r=t.typingIndicatorInvalidateTime,o=void 0===r?1e4:r,s=t.typingIndicatorThrottle,a=void 0===s?1e3:s,c=t.websocketResponseTimeout,u=void 0===c?1e4:c,l=t.websocketPayloadDecompression,h=void 0===l||l,d=t.sessionTokenRefreshTimeout,_=void 0===d?60:d;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=o,this._typingIndicatorThrottle=a,this._websocketResponseTimeout=u,this._sessionTokenRefreshTimeout=_,this.websocketPayloadDecompression=h}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(e){w("boolean",e)&&(this._useMemberInfoInMessage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(e){w("number",e)&&(this._typingIndicatorInvalidateTime=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(e){w("number",e)&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(e){w("number",e)&&e>=5e3&&e<=3e4&&(this._websocketResponseTimeout=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(e){w("number",e)&&(e<60?e=60:e>1800&&(e=1800),this._sessionTokenRefreshTimeout=e)},enumerable:!1,configurable:!0}),e}(),D={encrypt:function(e){return e},decrypt:function(e){return e}},L=function(){function e(e){var t=e.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:this._keysAddress,value:c([],a(this._preference.keys()),!1)})];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(e,t){var n;return void 0===t&&(t=1),r(this,void 0,void 0,(function(){var i,r,a,c,u,l,h,d,_,f;return o(this,(function(o){switch(o.label){case 0:return this._version=t,this._keysAddress=e,i="".concat(e,".metadata.version"),[4,this._store.get(i)];case 1:return r=o.sent(),[4,this._store.get(e)];case 2:return a=null!==(n=o.sent())&&void 0!==n?n:[],!r||r.version<this._version?[4,this._resetPreferenceData(a,i)]:[3,4];case 3:return o.sent(),[3,11];case 4:o.trys.push([4,9,10,11]),c=s(a),u=c.next(),o.label=5;case 5:return u.done?[3,8]:(l=u.value,[4,this._store.get(l)]);case 6:(h=o.sent())&&this._preference.set(l,h),o.label=7;case 7:return u=c.next(),[3,5];case 8:return[3,11];case 9:return d=o.sent(),_={error:d},[3,11];case 10:try{u&&!u.done&&(f=c.return)&&f.call(c)}finally{if(_)throw _.error}return[7];case 11:return[2]}}))}))},e.prototype._resetPreferenceData=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this._preference=new Map,[4,this._store.removeMany(e)];case 1:return n.sent(),[4,this._store.set({key:t,value:{version:this._version}})];case 2:return n.sent(),[2]}}))}))},e.prototype.get=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._preference.get(e)]}))}))},e.prototype.set=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=!this._preference.has(e),[4,this._store.set({key:e,value:t})];case 1:return i.sent(),this._preference.set(e,t),n?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},e.prototype.remove=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._store.remove(e)];case 1:return t.sent(),this._preference.delete(e),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._store.removeMany(c([],a(this._preference.keys()),!1))];case 1:return e.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},e}(),x=function(){function e(e){var t=e.encryption,n=e.store,i=e.localCacheEnabled,r=e.localCacheConfig;this.store=n,this.preference=new L({store:n}),this.encryption=null!=t?t:D,this.localCacheEnabled=i,this.localCacheConfig=r}return e.prototype.replaceStore=function(e){this.store=e,this.preference=new L({store:e})},e}();!function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"}(d||(d={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(_||(_={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(f||(f={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(p||(p={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(E||(E={}));var U,P=function(){function e(e){var t=e.channel,n=e.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=n}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),M=function(){function e(e){var t=void 0===e?{}:e,n=t.maxSize,i=void 0===n?256:n,r=t.clearOrder,o=void 0===r?E.MESSAGE_COLLECTION_ACCESSED_AT:r,s=t.customClearOrderComparator,a=t.enableAutoResend,c=void 0===a||a;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(e,t){return e.channel.messageCollectionLastAccessedAt===t.channel.messageCollectionLastAccessedAt?e.channel.lastMessage&&!t.channel.lastMessage?1:!e.channel.lastMessage&&t.channel.lastMessage?-1:e.channel.lastMessage||t.channel.lastMessage?e.channel.lastMessage.createdAt-t.channel.lastMessage.createdAt:0:e.channel.messageCollectionLastAccessedAt>t.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),s?(this._clearOrder=o,this._customClearOrderComparator=s):this._clearOrder=E.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=c}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var e;return this._clearOrder===E.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:null!==(e=this._customClearOrderComparator)&&void 0!==e?e:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),e}();!function(e){e.FEED="feed",e.CHAT="chat"}(U||(U={}));var z,F,H,V,q,G,j,K,B,Z,W=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e.prototype.hasLessServiceScopeThan=function(e){var t;return!this.sessionKey||!(null===(t=this.services)||void 0===t?void 0:t.includes(U.CHAT))||e.includes(U.CHAT)},e}(),Q=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},Y=function(){function e(e){var t=e.container;this._container={},this._container=t,this.key=Q()}return e.prototype._register=function(e,t,n){var i;return e in this._container||(this._container[e]=new Map),null===(i=this._container[e])||void 0===i||i.set(this.key,{occurence:t,handler:n}),this},e.prototype.on=function(e,t){return this._register(e,-1,t)},e.prototype.once=function(e,t){return this._register(e,1,t)},e.prototype.close=function(){var e;for(var t in this._container)null===(e=this._container[t])||void 0===e||e.delete(this.key)},e}(),X=function(){function e(){this._container={}}return e.prototype.on=function(e,t){return new Y({container:this._container}).on(e,t)},e.prototype.once=function(e,t){return new Y({container:this._container}).once(e,t)},e.prototype.dispatch=function(e,t){var n,i,r=this._container[e];if(r){var o=[];try{for(var a=s(r.keys()),c=a.next();!c.done;c=a.next()){var u=c.value,l=r.get(u);l.handler(t),l.occurence>0&&(l.occurence--,0===l.occurence&&o.push(u))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}o.forEach((function(e){return r.delete(e)}))}},e}(),J=function(){function e(){this._dispatcher=new X}return e.prototype.on=function(e){return this._dispatcher.on("event",e)},e.prototype.once=function(e){return this._dispatcher.once("event",e)},e.prototype.dispatch=function(e){this._dispatcher.dispatch("event",e)},e}(),$=function(){},ee=function(e){var t={};return e&&Object.keys(e).forEach((function(n){void 0===e[n]||Number.isNaN(e[n])||null===e[n]||(t[n]=e[n])})),t},te=function(e){if(null!=e){if("object"==typeof e){if(Array.isArray(e)){var t=c([],a(e),!1);for(var n in t)t[n]=te(t[n]);return t}for(var i in e)null===e[i]&&delete e[i];return e}return e}};!function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"}(z||(z={})),function(e){e.OPERATOR="operator",e.NONE="none"}(F||(F={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(H||(H={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(V||(V={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(q||(q={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(G||(G={})),function(e){e.USERS="users",e.CHANNEL="channel"}(j||(j={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(K||(K={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(B||(B={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(Z||(Z={}));var ne,ie="v3",re="/".concat(ie,"/users"),oe="/".concat(ie,"/storage/file"),se="/".concat(ie,"/group_channels"),ae="/".concat(ie,"/sdk/group_channels"),ce="/".concat(ie,"/open_channels"),ue="/".concat(ie,"/sdk/open_channels"),le="/".concat(ie,"/search"),he="/".concat(ie,"/report"),de="/".concat(ie,"/emojis"),_e="/".concat(ie,"/emoji_categories"),fe="/".concat(ie,"/polls"),pe="/".concat(ie,"/scheduled_messages"),Ee="/".concat(ie,"/sdk/ui_kit/configuration"),ve="/".concat(ie,"/sdk/statistics"),ge="/".concat(ie,"/notifications"),be=function(e){switch(e){case z.FEED:case z.GROUP:return se;case z.OPEN:return ce;default:return null}},me=function(e){switch(e){case z.GROUP:return"".concat(he,"/group_channels");case z.OPEN:return"".concat(he,"/open_channels");default:return null}},ye=function(e,t,n){var i,r;switch(e){case j.CHANNEL:return!0;case j.USERS:if(t)try{for(var o=s(t),a=o.next();!a.done;a=o.next()){if(a.value===n)return!0}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}}return!1},we=function(e,t,n){var i,r,o,s,a=ye(null!==(i=e.mentionType)&&void 0!==i?i:null,null!==(r=e.mentionedUserIds)&&void 0!==r?r:[],n),c=ye(null!==(o=t.mentionType)&&void 0!==o?o:null,null!==(s=t.mentionedUserIds)&&void 0!==s?s:[],n);return!a&&c?1:a&&!c?-1:0},Te=function(e,t,n){var i,r=t||new FormData;for(var o in e)if(e.hasOwnProperty(o)){var s=e[o],a=n?"".concat(n,"[").concat(o,"]"):o;O(s)?r.append(a,s,null!==(i=s.name)&&void 0!==i?i:"filename"):"object"!=typeof s||null===s||Array.isArray(s)||s instanceof Blob?r.append(a,String(s)):r=Te(s,r,a)}return r};!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(ne||(ne={}));var Se,Ne=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=Q(),t}return t(n,e),n.prototype.encodeParams=function(e){var t=this;return null==e||""===e?encodeURIComponent(""):Array.isArray(e)?e.map((function(e){return t.encodeParams(e)})).join(","):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(String(e))},Object.defineProperty(n.prototype,"query",{get:function(){var e=this,t=ee(this.params);return"?".concat(Object.keys(t).map((function(n){return"".concat(encodeURIComponent(n),"=").concat(e.encodeParams(t[n]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var e=ee(this.params);return Object.keys(e).some((function(t){return O(e[t])}))?Te(e):JSON.stringify(e)},enumerable:!1,configurable:!0}),n}($),Ae=function(e){function i(t,n){var i=e.call(this)||this;return i._iid=t,i._payload=n,i}return t(i,e),Object.defineProperty(i.prototype,"payload",{get:function(){return n({},this._payload)},enumerable:!1,configurable:!0}),i.prototype.as=function(e){return new e(this._iid,this.payload)},i}($),Ce=function(e){function n(t){var n=e.call(this)||this;return n.requestId=t,n}return t(n,e),n}($),ke=function(e){function n(t){var n=t.expires_in,i=t.reason,r=void 0===i?u.SESSION_KEY_EXPIRED:i,o=e.call(this)||this;switch(o.expiresIn=null!=n?n:0,r){case u.SESSION_KEY_EXPIRED:case u.SESSION_TOKEN_EXPIRED:case u.SESSION_REVOKED:case u.USER_AUTH_DEACTIVATED:case u.USER_AUTH_DELETED_OR_NOT_FOUND:o.error=new g({code:r})}return o}return t(n,e),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var e;return!!(null===(e=this.error)||void 0===e?void 0:e.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n}($),Oe=function(e){function n(t){var n=e.call(this)||this;return n.statLog=t,n}return t(n,e),n}($),Ie=function(e){function n(t){var n=t.request,i=t.deferred,r=t.error,o=void 0===r?g.requestFailed:r,s=e.call(this)||this;return s.request=n,s.deferred=i,s.error=o,s}return t(n,e),n}($);!function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"}(Se||(Se={}));var Re,De,Le,xe=function(){function e(e){var t=e.type,n=e.data,i=e.ts,r=void 0===i?Date.now():i;this.type=t,this.createdAt=r,this.data=n}return e.payloadify=function(e){return ee({stat_type:e.type,ts:e.createdAt,data:ee(e.data)})},e}(),Ue=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},Pe=function(){return!("undefined"==typeof navigator||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};!function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live"}(Re||(Re={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}(De||(De={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(Le||(Le={}));var Me="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",ze=function(){function e(){}return e.sendbirdSdkUserAgentWithExtension=function(e){var t=Ue()?De.REACT_NATIVE:De.JS,i={main_sdk_info:"chat/".concat(t,"/").concat(h.SDK_VERSION),device_os_platform:Pe()?"mobile-web":"web",os_version:h.OS_VERSION};if(e){var r=e.sendbirdExtensions,o=e.deviceOS,s=e.customData,c=void 0===s?{}:s;o.version&&(i.os_version=o.version),o.platform&&(i.device_os_platform=o.platform),r.length>0&&(i.extension_sdk_info=r.map((function(e){var t=e.product,n=e.platform,i=e.version;return"".concat(t,"/").concat(n,"/").concat(i)})).join(",")),Object.keys(i).forEach((function(e){return delete c[e]})),Object.keys(c).length>0&&(i=n(n({},i),c))}return Object.entries(i).map((function(e){var t=a(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(i)})).join("&")},e.userAgentWithExtension=function(e){var t=Ue()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",i=e.sb_uikit?"u".concat(e.sb_uikit):"",r=e["device-os-platform"]?"o".concat(e["device-os-platform"]):Pe()?"omobile-web":"oweb";return"".concat(t,"/c").concat(h.SDK_VERSION,"/").concat(n,"/").concat(i,"/").concat(r)},e}(),Fe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},He=function(){function e(e,t){var n=t.session,i=t.sdkState,r=t.dispatcher,o=t.logger,s=t.useFetchCompat,a=void 0!==s&&s,c=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=e,this._session=n,this._sdkState=i,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof Ce&&c.cancel(e.requestId)})),this._logger=o,this._shouldImportFetchCompat=a}return e.prototype._createHeader=function(e,t){var i=this._sdkState,r=i.appId,o=i.appVersion,s=i.sendbirdRuntimeEnvironment,a=n(n({},e.headers),{SendBird:"JS,".concat(h.OS_VERSION,",").concat(h.SDK_VERSION,",").concat(r).concat(o?",".concat(o):""),"SB-User-Agent":ze.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":ze.sendbirdSdkUserAgentWithExtension(s)});return t||(a["Content-Type"]="application/json; charset=utf-8"),e.requireAuth&&this._session.hasSession&&(a["Session-Key"]=this._session.sessionKey),this._session&&this._session.authToken&&(a["App-Id"]=r,a["Access-Token"]=this._session.authToken),a},e.prototype._statLogApiResult=function(e,t,n){this._dispatcher.dispatch(new Oe(new xe({type:Se.API_RESULT,data:{endpoint:e.path,method:e.method,success:!n,latency:Date.now()-t,error_code:null==n?void 0:n.code,error_description:null==n?void 0:n.message}})))},e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,s,a,c,u,l,h,d,_,f,p,E,v;return o(this,(function(o){switch(o.label){case 0:t=e.path,n=e.method,i=![ne.GET,ne.DELETE].includes(n),r=this._sdkState.api,s="".concat(r.host).concat(t).concat(i?"":e.query),a=i?e.payload:null,c=this._createHeader(e,a instanceof FormData?a:void 0),u=new AbortController,l=u.signal,this._abortControl.set(e.requestId,u),h=Date.now(),o.label=1;case 1:return o.trys.push([1,8,,9]),this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,("undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{fetch:null}).fetch=null),"undefined"!=typeof AbortController?[3,3]:[4,__webpack_require__.e(/* import() */ 2).then(__webpack_require__.t.bind(null, 19, 7))];case 2:o.sent(),o.label=3;case 3:return"function"==typeof fetch?[3,5]:[4,__webpack_require__.e(/* import() */ 3).then(__webpack_require__.t.bind(null, 20, 7))];case 4:o.sent(),o.label=5;case 5:return[4,fetch(s,{method:n,body:a,headers:c,signal:l})];case 6:return[4,(d=o.sent()).json()];case 7:if(_=o.sent(),d.ok||d.redirected)return this._logger.debug("receive api response",e.requestId),this._statLogApiResult(e,h),[2,new Ae(this._iid,_)];if(_){if((p=new g(_)).isSessionExpiredError)return f=new Fe,this._dispatcher.dispatch(new Ie({request:e,deferred:f,error:p})),this._dispatcher.dispatch(new ke({reason:p.code})),[2,f.promise];throw p.isSessionInvalidatedError?(this._dispatcher.dispatch(new ke({reason:p.code})),p):(this._statLogApiResult(e,h,p),p)}throw p=g.requestFailed,this._statLogApiResult(e,h,p),p;case 8:throw E=o.sent(),this._statLogApiResult(e,h,E),E instanceof g?(this._logger.debug("fail api request",E),E):"AbortError"===E.name?g.requestCanceled:(v=g.networkError,this._logger.debug("fail api request",v),v);case 9:return[2]}}))}))},e.prototype.cancel=function(e){this._abortControl.has(e)&&(this._abortControl.get(e).abort(),this._abortControl.delete(e))},e.prototype.cancelAll=function(){var e,t;try{for(var n=s(this._abortControl.values()),i=n.next();!i.done;i=n.next()){i.value.abort()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._abortControl.clear()},e}(),Ve=function(e){function n(t,n,i,r){void 0===r&&(r="");var o,s=this;return(s=e.call(this)||this)._iid=t,s.code=n,s.payload=i,s.requestId=null!==(o=i.req_id)&&void 0!==o?o:r,s}return t(n,e),n.createFromRawMessage=function(e,t){var i=t.substring(0,4),r={};try{r=JSON.parse(t.substring(4))}catch(e){i="NOOP"}finally{return new n(e,i,r)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},n.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},n}($),qe=function(){};function Ge(e){let t=e.length;for(;--t>=0;)e[t]=0}const je=256,Ke=286,Be=30,Ze=15,We=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Qe=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ye=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Xe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Je=new Array(576);Ge(Je);const $e=new Array(60);Ge($e);const et=new Array(512);Ge(et);const tt=new Array(256);Ge(tt);const nt=new Array(29);Ge(nt);const it=new Array(Be);function rt(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let ot,st,at;function ct(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ge(it);const ut=e=>e<256?et[e]:et[256+(e>>>7)],lt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ht=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,lt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},dt=(e,t,n)=>{ht(e,n[2*t],n[2*t+1])},_t=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ft=(e,t,n)=>{const i=new Array(16);let r,o,s=0;for(r=1;r<=Ze;r++)s=s+n[r-1]<<1,i[r]=s;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=_t(i[t]++,t))}},pt=e=>{let t;for(t=0;t<Ke;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Be;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Et=e=>{e.bi_valid>8?lt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},vt=(e,t,n,i)=>{const r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]},gt=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&vt(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!vt(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},bt=(e,t,n)=>{let i,r,o,s,a=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+a++],i+=(255&e.pending_buf[e.sym_buf+a++])<<8,r=e.pending_buf[e.sym_buf+a++],0===i?dt(e,r,t):(o=tt[r],dt(e,o+je+1,t),s=We[o],0!==s&&(r-=nt[o],ht(e,r,s)),i--,o=ut(i),dt(e,o,n),s=Qe[o],0!==s&&(i-=it[o],ht(e,i,s)))}while(a<e.sym_next);dt(e,256,t)},mt=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,c,u=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[2*c+1]);for(t.max_code=u,s=e.heap_len>>1;s>=1;s--)gt(e,n,s);c=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],gt(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,gt(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,l,h,d,_,f,p=0;for(d=0;d<=Ze;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)l=e.heap[u],d=n[2*n[2*l+1]+1]+1,d>c&&(d=c,p++),n[2*l+1]=d,l>i||(e.bl_count[d]++,_=0,l>=a&&(_=s[l-a]),f=n[2*l],e.opt_len+=f*(d+_),o&&(e.static_len+=f*(r[2*l+1]+_)));if(0!==p){do{for(d=c-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(d=c;0!==d;d--)for(l=e.bl_count[d];0!==l;)h=e.heap[--u],h>i||(n[2*h+1]!==d&&(e.opt_len+=(d-n[2*h+1])*n[2*h],n[2*h+1]=d),l--)}})(e,t),ft(n,u,e.bl_count)},yt=(e,t,n)=>{let i,r,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++a<c&&r===s||(a<u?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=r,0===s?(c=138,u=3):r===s?(c=6,u=3):(c=7,u=4))},wt=(e,t,n)=>{let i,r,o=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++a<c&&r===s)){if(a<u)do{dt(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(dt(e,r,e.bl_tree),a--),dt(e,16,e.bl_tree),ht(e,a-3,2)):a<=10?(dt(e,17,e.bl_tree),ht(e,a-3,3)):(dt(e,18,e.bl_tree),ht(e,a-11,7));a=0,o=r,0===s?(c=138,u=3):r===s?(c=6,u=3):(c=7,u=4)}};let Tt=!1;const St=(e,t,n,i)=>{ht(e,0+(i?1:0),3),Et(e),lt(e,n),lt(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Nt=(e,t,n,i)=>{let r,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<je;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),mt(e,e.l_desc),mt(e,e.d_desc),s=(e=>{let t;for(yt(e,e.dyn_ltree,e.l_desc.max_code),yt(e,e.dyn_dtree,e.d_desc.max_code),mt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Xe[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?St(e,t,n,i):4===e.strategy||o===r?(ht(e,2+(i?1:0),3),bt(e,Je,$e)):(ht(e,4+(i?1:0),3),((e,t,n,i)=>{let r;for(ht(e,t-257,5),ht(e,n-1,5),ht(e,i-4,4),r=0;r<i;r++)ht(e,e.bl_tree[2*Xe[r]+1],3);wt(e,e.dyn_ltree,t-1),wt(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),bt(e,e.dyn_ltree,e.dyn_dtree)),pt(e),i&&Et(e)},At={_tr_init:e=>{Tt||((()=>{let e,t,n,i,r;const o=new Array(16);for(n=0,i=0;i<28;i++)for(nt[i]=n,e=0;e<1<<We[i];e++)tt[n++]=i;for(tt[n-1]=i,r=0,i=0;i<16;i++)for(it[i]=r,e=0;e<1<<Qe[i];e++)et[r++]=i;for(r>>=7;i<Be;i++)for(it[i]=r<<7,e=0;e<1<<Qe[i]-7;e++)et[256+r++]=i;for(t=0;t<=Ze;t++)o[t]=0;for(e=0;e<=143;)Je[2*e+1]=8,e++,o[8]++;for(;e<=255;)Je[2*e+1]=9,e++,o[9]++;for(;e<=279;)Je[2*e+1]=7,e++,o[7]++;for(;e<=287;)Je[2*e+1]=8,e++,o[8]++;for(ft(Je,287,o),e=0;e<Be;e++)$e[2*e+1]=5,$e[2*e]=_t(e,5);ot=new rt(Je,We,257,Ke,Ze),st=new rt($e,Qe,0,Be,Ze),at=new rt(new Array(0),Ye,0,19,7)})(),Tt=!0),e.l_desc=new ct(e.dyn_ltree,ot),e.d_desc=new ct(e.dyn_dtree,st),e.bl_desc=new ct(e.bl_tree,at),e.bi_buf=0,e.bi_valid=0,pt(e)},_tr_stored_block:St,_tr_flush_block:Nt,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(tt[n]+je+1)]++,e.dyn_dtree[2*ut(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{ht(e,2,3),dt(e,256,Je),(e=>{16===e.bi_valid?(lt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Ct=(e,t,n,i)=>{let r=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+t[i++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0};const kt=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Ot=(e,t,n,i)=>{const r=kt,o=i+n;e^=-1;for(let n=i;n<o;n++)e=e>>>8^r[255&(e^t[n])];return-1^e},It={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Rt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Dt,_tr_stored_block:Lt,_tr_flush_block:xt,_tr_tally:Ut,_tr_align:Pt}=At,{Z_NO_FLUSH:Mt,Z_PARTIAL_FLUSH:zt,Z_FULL_FLUSH:Ft,Z_FINISH:Ht,Z_BLOCK:Vt,Z_OK:qt,Z_STREAM_END:Gt,Z_STREAM_ERROR:jt,Z_DATA_ERROR:Kt,Z_BUF_ERROR:Bt,Z_DEFAULT_COMPRESSION:Zt,Z_FILTERED:Wt,Z_HUFFMAN_ONLY:Qt,Z_RLE:Yt,Z_FIXED:Xt,Z_DEFAULT_STRATEGY:Jt,Z_UNKNOWN:$t,Z_DEFLATED:en}=Rt,tn=258,nn=262,rn=42,on=113,sn=666,an=(e,t)=>(e.msg=It[t],t),cn=e=>2*e-(e>4?9:0),un=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ln=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do{n=e.head[--i],e.head[i]=n>=r?n-r:0}while(--t);t=r,i=t;do{n=e.prev[--i],e.prev[i]=n>=r?n-r:0}while(--t)};let hn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const dn=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},_n=(e,t)=>{xt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,dn(e.strm)},fn=(e,t)=>{e.pending_buf[e.pending++]=t},pn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},En=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=Ct(e.adler,t,r,n):2===e.state.wrap&&(e.adler=Ot(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},vn=(e,t)=>{let n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-nn?e.strstart-(e.w_size-nn):0,u=e.window,l=e.w_mask,h=e.prev,d=e.strstart+tn;let _=u[o+s-1],f=u[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,u[n+s]===f&&u[n+s-1]===_&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<d);if(i=tn-(d-o),o=d-tn,i>s){if(e.match_start=t,s=i,i>=a)break;_=u[o+s-1],f=u[o+s]}}}while((t=h[t&l])>c&&0!=--r);return s<=e.lookahead?s:e.lookahead},gn=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-nn)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ln(e),i+=t),0===e.strm.avail_in)break;if(n=En(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=hn(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=hn(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<nn&&0!==e.strm.avail_in)},bn=(e,t)=>{let n,i,r,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>r&&(n=r),n<o&&(0===n&&t!==Ht||t===Mt||n!==i+e.strm.avail_in))break;s=t===Ht&&n===i+e.strm.avail_in?1:0,Lt(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,dn(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(En(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==Mt&&t!==Ht&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(En(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,o=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=o||(i||t===Ht)&&t!==Mt&&0===e.strm.avail_in&&i<=r)&&(n=i>r?r:i,s=t===Ht&&0===e.strm.avail_in&&n===i?1:0,Lt(e,e.block_start,n,s),e.block_start+=n,dn(e.strm)),s?3:1)},mn=(e,t)=>{let n,i;for(;;){if(e.lookahead<nn){if(gn(e),e.lookahead<nn&&t===Mt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=hn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-nn&&(e.match_length=vn(e,n)),e.match_length>=3)if(i=Ut(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=hn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=hn(e,e.ins_h,e.window[e.strstart+1]);else i=Ut(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(_n(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ht?(_n(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(_n(e,!1),0===e.strm.avail_out)?1:2},yn=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<nn){if(gn(e),e.lookahead<nn&&t===Mt)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=hn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-nn&&(e.match_length=vn(e,n),e.match_length<=5&&(e.strategy===Wt||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=Ut(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=hn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(_n(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=Ut(e,0,e.window[e.strstart-1]),i&&_n(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Ut(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ht?(_n(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(_n(e,!1),0===e.strm.avail_out)?1:2};function wn(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const Tn=[new wn(0,0,0,0,bn),new wn(4,4,8,4,mn),new wn(4,5,16,8,mn),new wn(4,6,32,32,mn),new wn(4,4,16,16,yn),new wn(8,16,32,32,yn),new wn(8,16,128,128,yn),new wn(8,32,128,256,yn),new wn(32,128,258,1024,yn),new wn(32,258,258,4096,yn)];function Sn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=en,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),un(this.dyn_ltree),un(this.dyn_dtree),un(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),un(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),un(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Nn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==rn&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==on&&t.status!==sn?1:0},An=e=>{if(Nn(e))return an(e,jt);e.total_in=e.total_out=0,e.data_type=$t;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?rn:on,e.adler=2===t.wrap?0:1,t.last_flush=-2,Dt(t),qt},Cn=e=>{const t=An(e);var n;return t===qt&&((n=e.state).window_size=2*n.w_size,un(n.head),n.max_lazy_match=Tn[n.level].max_lazy,n.good_match=Tn[n.level].good_length,n.nice_match=Tn[n.level].nice_length,n.max_chain_length=Tn[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},kn=(e,t,n,i,r,o)=>{if(!e)return jt;let s=1;if(t===Zt&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==en||i<8||i>15||t<0||t>9||o<0||o>Xt||8===i&&1!==s)return an(e,jt);8===i&&(i=9);const a=new Sn;return e.state=a,a.strm=e,a.status=rn,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,Cn(e)};var On={deflateInit:(e,t)=>kn(e,t,en,15,8,Jt),deflateInit2:kn,deflateReset:Cn,deflateResetKeep:An,deflateSetHeader:(e,t)=>Nn(e)||2!==e.state.wrap?jt:(e.state.gzhead=t,qt),deflate:(e,t)=>{if(Nn(e)||t>Vt||t<0)return e?an(e,jt):jt;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===sn&&t!==Ht)return an(e,0===e.avail_out?Bt:jt);const i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(dn(e),0===e.avail_out)return n.last_flush=-1,qt}else if(0===e.avail_in&&cn(t)<=cn(i)&&t!==Ht)return an(e,Bt);if(n.status===sn&&0!==e.avail_in)return an(e,Bt);if(n.status===rn&&0===n.wrap&&(n.status=on),n.status===rn){let t=en+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=Qt||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=i<<6,0!==n.strstart&&(t|=32),t+=31-t%31,pn(n,t),0!==n.strstart&&(pn(n,e.adler>>>16),pn(n,65535&e.adler)),e.adler=1,n.status=on,dn(e),0!==n.pending)return n.last_flush=-1,qt}if(57===n.status)if(e.adler=0,fn(n,31),fn(n,139),fn(n,8),n.gzhead)fn(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),fn(n,255&n.gzhead.time),fn(n,n.gzhead.time>>8&255),fn(n,n.gzhead.time>>16&255),fn(n,n.gzhead.time>>24&255),fn(n,9===n.level?2:n.strategy>=Qt||n.level<2?4:0),fn(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(fn(n,255&n.gzhead.extra.length),fn(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Ot(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(fn(n,0),fn(n,0),fn(n,0),fn(n,0),fn(n,0),fn(n,9===n.level?2:n.strategy>=Qt||n.level<2?4:0),fn(n,3),n.status=on,dn(e),0!==n.pending)return n.last_flush=-1,qt;if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ot(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,dn(e),0!==n.pending)return n.last_flush=-1,qt;t=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ot(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Ot(e.adler,n.pending_buf,n.pending-i,i)),dn(e),0!==n.pending)return n.last_flush=-1,qt;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,fn(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=Ot(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Ot(e.adler,n.pending_buf,n.pending-i,i)),dn(e),0!==n.pending)return n.last_flush=-1,qt;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,fn(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>i&&(e.adler=Ot(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(dn(e),0!==n.pending))return n.last_flush=-1,qt;fn(n,255&e.adler),fn(n,e.adler>>8&255),e.adler=0}if(n.status=on,dn(e),0!==n.pending)return n.last_flush=-1,qt}if(0!==e.avail_in||0!==n.lookahead||t!==Mt&&n.status!==sn){let i=0===n.level?bn(n,t):n.strategy===Qt?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(gn(e),0===e.lookahead)){if(t===Mt)return 1;break}if(e.match_length=0,n=Ut(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(_n(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ht?(_n(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(_n(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Yt?((e,t)=>{let n,i,r,o;const s=e.window;for(;;){if(e.lookahead<=tn){if(gn(e),e.lookahead<=tn&&t===Mt)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=e.strstart+tn;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=tn-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ut(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ut(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(_n(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ht?(_n(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(_n(e,!1),0===e.strm.avail_out)?1:2})(n,t):Tn[n.level].func(n,t);if(3!==i&&4!==i||(n.status=sn),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),qt;if(2===i&&(t===zt?Pt(n):t!==Vt&&(Lt(n,0,0,!1),t===Ft&&(un(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),dn(e),0===e.avail_out))return n.last_flush=-1,qt}return t!==Ht?qt:n.wrap<=0?Gt:(2===n.wrap?(fn(n,255&e.adler),fn(n,e.adler>>8&255),fn(n,e.adler>>16&255),fn(n,e.adler>>24&255),fn(n,255&e.total_in),fn(n,e.total_in>>8&255),fn(n,e.total_in>>16&255),fn(n,e.total_in>>24&255)):(pn(n,e.adler>>>16),pn(n,65535&e.adler)),dn(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?qt:Gt)},deflateEnd:e=>{if(Nn(e))return jt;const t=e.state.status;return e.state=null,t===on?an(e,Kt):qt},deflateSetDictionary:(e,t)=>{let n=t.length;if(Nn(e))return jt;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==rn||i.lookahead)return jt;if(1===r&&(e.adler=Ct(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(un(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,gn(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=hn(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,gn(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,i.wrap=r,qt},deflateInfo:"pako deflate (from Nodeca project)"};const In=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Rn={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)In(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];n.set(r,i),i+=r.length}return n}};let Dn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Dn=!1}const Ln=new Uint8Array(256);for(let e=0;e<256;e++)Ln[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ln[254]=Ln[254]=1;var xn={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,o,s=e.length,a=0;for(r=0;r<s;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const o=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){o[r++]=t;continue}let s=Ln[t];if(s>4)o[r++]=65533,i+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&i<n;)t=t<<6|63&e[i++],s--;s>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=55296|t>>10&1023,o[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Dn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(o,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Ln[e[n]]>t?n:t}};var Un=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Pn=Object.prototype.toString,{Z_NO_FLUSH:Mn,Z_SYNC_FLUSH:zn,Z_FULL_FLUSH:Fn,Z_FINISH:Hn,Z_OK:Vn,Z_STREAM_END:qn,Z_DEFAULT_COMPRESSION:Gn,Z_DEFAULT_STRATEGY:jn,Z_DEFLATED:Kn}=Rt;function Bn(e){this.options=Rn.assign({level:Gn,method:Kn,chunkSize:16384,windowBits:15,memLevel:8,strategy:jn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Un,this.strm.avail_out=0;let n=On.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Vn)throw new Error(It[n]);if(t.header&&On.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?xn.string2buf(t.dictionary):"[object ArrayBuffer]"===Pn.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=On.deflateSetDictionary(this.strm,e),n!==Vn)throw new Error(It[n]);this._dict_set=!0}}function Zn(e,t){const n=new Bn(t);if(n.push(e,!0),n.err)throw n.msg||It[n.err];return n.result}Bn.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Hn:Mn,"string"==typeof e?n.input=xn.string2buf(e):"[object ArrayBuffer]"===Pn.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(o===zn||o===Fn)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=On.deflate(n,o),r===qn)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=On.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Vn;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Bn.prototype.onData=function(e){this.chunks.push(e)},Bn.prototype.onEnd=function(e){e===Vn&&(this.result=Rn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Wn={Deflate:Bn,deflate:Zn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Zn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Zn(e,t)},constants:Rt};const Qn=16209;var Yn=function(e,t){let n,i,r,o,s,a,c,u,l,h,d,_,f,p,E,v,g,b,m,y,w,T,S,N;const A=e.state;n=e.next_in,S=e.input,i=n+(e.avail_in-5),r=e.next_out,N=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),a=A.dmax,c=A.wsize,u=A.whave,l=A.wnext,h=A.window,d=A.hold,_=A.bits,f=A.lencode,p=A.distcode,E=(1<<A.lenbits)-1,v=(1<<A.distbits)-1;e:do{_<15&&(d+=S[n++]<<_,_+=8,d+=S[n++]<<_,_+=8),g=f[d&E];t:for(;;){if(b=g>>>24,d>>>=b,_-=b,b=g>>>16&255,0===b)N[r++]=65535&g;else{if(!(16&b)){if(0==(64&b)){g=f[(65535&g)+(d&(1<<b)-1)];continue t}if(32&b){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=Qn;break e}m=65535&g,b&=15,b&&(_<b&&(d+=S[n++]<<_,_+=8),m+=d&(1<<b)-1,d>>>=b,_-=b),_<15&&(d+=S[n++]<<_,_+=8,d+=S[n++]<<_,_+=8),g=p[d&v];n:for(;;){if(b=g>>>24,d>>>=b,_-=b,b=g>>>16&255,!(16&b)){if(0==(64&b)){g=p[(65535&g)+(d&(1<<b)-1)];continue n}e.msg="invalid distance code",A.mode=Qn;break e}if(y=65535&g,b&=15,_<b&&(d+=S[n++]<<_,_+=8,_<b&&(d+=S[n++]<<_,_+=8)),y+=d&(1<<b)-1,y>a){e.msg="invalid distance too far back",A.mode=Qn;break e}if(d>>>=b,_-=b,b=r-o,y>b){if(b=y-b,b>u&&A.sane){e.msg="invalid distance too far back",A.mode=Qn;break e}if(w=0,T=h,0===l){if(w+=c-b,b<m){m-=b;do{N[r++]=h[w++]}while(--b);w=r-y,T=N}}else if(l<b){if(w+=c+l-b,b-=l,b<m){m-=b;do{N[r++]=h[w++]}while(--b);if(w=0,l<m){b=l,m-=b;do{N[r++]=h[w++]}while(--b);w=r-y,T=N}}}else if(w+=l-b,b<m){m-=b;do{N[r++]=h[w++]}while(--b);w=r-y,T=N}for(;m>2;)N[r++]=T[w++],N[r++]=T[w++],N[r++]=T[w++],m-=3;m&&(N[r++]=T[w++],m>1&&(N[r++]=T[w++]))}else{w=r-y;do{N[r++]=N[w++],N[r++]=N[w++],N[r++]=N[w++],m-=3}while(m>2);m&&(N[r++]=N[w++],m>1&&(N[r++]=N[w++]))}break}}break}}while(n<i&&r<s);m=_>>3,n-=m,_-=m<<3,d&=(1<<_)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<s?s-r+257:257-(r-s),A.hold=d,A.bits=_};const Xn=15,Jn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ei=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ti=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ni=(e,t,n,i,r,o,s,a)=>{const c=a.bits;let u,l,h,d,_,f,p=0,E=0,v=0,g=0,b=0,m=0,y=0,w=0,T=0,S=0,N=null;const A=new Uint16Array(16),C=new Uint16Array(16);let k,O,I,R=null;for(p=0;p<=Xn;p++)A[p]=0;for(E=0;E<i;E++)A[t[n+E]]++;for(b=c,g=Xn;g>=1&&0===A[g];g--);if(b>g&&(b=g),0===g)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(v=1;v<g&&0===A[v];v++);for(b<v&&(b=v),w=1,p=1;p<=Xn;p++)if(w<<=1,w-=A[p],w<0)return-1;if(w>0&&(0===e||1!==g))return-1;for(C[1]=0,p=1;p<Xn;p++)C[p+1]=C[p]+A[p];for(E=0;E<i;E++)0!==t[n+E]&&(s[C[t[n+E]]++]=E);if(0===e?(N=R=s,f=20):1===e?(N=Jn,R=$n,f=257):(N=ei,R=ti,f=0),S=0,E=0,p=v,_=o,m=b,y=0,h=-1,T=1<<b,d=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){k=p-y,s[E]+1<f?(O=0,I=s[E]):s[E]>=f?(O=R[s[E]-f],I=N[s[E]-f]):(O=96,I=0),u=1<<p-y,l=1<<m,v=l;do{l-=u,r[_+(S>>y)+l]=k<<24|O<<16|I|0}while(0!==l);for(u=1<<p-1;S&u;)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,E++,0==--A[p]){if(p===g)break;p=t[n+s[E]]}if(p>b&&(S&d)!==h){for(0===y&&(y=b),_+=v,m=p-y,w=1<<m;m+y<g&&(w-=A[m+y],!(w<=0));)m++,w<<=1;if(T+=1<<m,1===e&&T>852||2===e&&T>592)return 1;h=S&d,r[h]=b<<24|m<<16|_-o|0}}return 0!==S&&(r[_+S]=p-y<<24|64<<16|0),a.bits=b,0};const{Z_FINISH:ii,Z_BLOCK:ri,Z_TREES:oi,Z_OK:si,Z_STREAM_END:ai,Z_NEED_DICT:ci,Z_STREAM_ERROR:ui,Z_DATA_ERROR:li,Z_MEM_ERROR:hi,Z_BUF_ERROR:di,Z_DEFLATED:_i}=Rt,fi=16180,pi=16190,Ei=16191,vi=16192,gi=16194,bi=16199,mi=16200,yi=16206,wi=16209,Ti=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Si(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ni=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<fi||t.mode>16211?1:0},Ai=e=>{if(Ni(e))return ui;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=fi,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,si},Ci=e=>{if(Ni(e))return ui;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ai(e)},ki=(e,t)=>{let n;if(Ni(e))return ui;const i=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ui:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,Ci(e))},Oi=(e,t)=>{if(!e)return ui;const n=new Si;e.state=n,n.strm=e,n.window=null,n.mode=fi;const i=ki(e,t);return i!==si&&(e.state=null),i};let Ii,Ri,Di=!0;const Li=e=>{if(Di){Ii=new Int32Array(512),Ri=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ni(1,e.lens,0,288,Ii,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ni(2,e.lens,0,32,Ri,0,e.work,{bits:5}),Di=!1}e.lencode=Ii,e.lenbits=9,e.distcode=Ri,e.distbits=5},xi=(e,t,n,i)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(t.subarray(n-i,n-i+r),o.wnext),(i-=r)?(o.window.set(t.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var Ui={inflateReset:Ci,inflateReset2:ki,inflateResetKeep:Ai,inflateInit:e=>Oi(e,15),inflateInit2:Oi,inflate:(e,t)=>{let n,i,r,o,s,a,c,u,l,h,d,_,f,p,E,v,g,b,m,y,w,T,S=0;const N=new Uint8Array(4);let A,C;const k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ni(e)||!e.output||!e.input&&0!==e.avail_in)return ui;n=e.state,n.mode===Ei&&(n.mode=vi),s=e.next_out,r=e.output,c=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,u=n.hold,l=n.bits,h=a,d=c,T=si;e:for(;;)switch(n.mode){case fi:if(0===n.wrap){n.mode=vi;break}for(;l<16;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&u,N[1]=u>>>8&255,n.check=Ot(n.check,N,2,0),u=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=wi;break}if((15&u)!==_i){e.msg="unknown compression method",n.mode=wi;break}if(u>>>=4,l-=4,w=8+(15&u),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=wi;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:Ei,u=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(n.flags=u,(255&n.flags)!==_i){e.msg="unknown compression method",n.mode=wi;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=wi;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=Ot(n.check,N,2,0)),u=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,N[2]=u>>>16&255,N[3]=u>>>24&255,n.check=Ot(n.check,N,4,0)),u=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=Ot(n.check,N,2,0)),u=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=Ot(n.check,N,2,0)),u=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(_=n.length,_>a&&(_=a),_&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(o,o+_),w)),512&n.flags&&4&n.wrap&&(n.check=Ot(n.check,i,_,o)),a-=_,o+=_,n.length-=_),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;_=0;do{w=i[o+_++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&_<a);if(512&n.flags&&4&n.wrap&&(n.check=Ot(n.check,i,_,o)),a-=_,o+=_,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;_=0;do{w=i[o+_++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&_<a);if(512&n.flags&&4&n.wrap&&(n.check=Ot(n.check,i,_,o)),a-=_,o+=_,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=wi;break}u=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Ei;break;case 16189:for(;l<32;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}e.adler=n.check=Ti(u),u=0,l=0,n.mode=pi;case pi:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=l,ci;e.adler=n.check=1,n.mode=Ei;case Ei:if(t===ri||t===oi)break e;case vi:if(n.last){u>>>=7&l,l-=7&l,n.mode=yi;break}for(;l<3;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}switch(n.last=1&u,u>>>=1,l-=1,3&u){case 0:n.mode=16193;break;case 1:if(Li(n),n.mode=bi,t===oi){u>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=wi}u>>>=2,l-=2;break;case 16193:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=wi;break}if(n.length=65535&u,u=0,l=0,n.mode=gi,t===oi)break e;case gi:n.mode=16195;case 16195:if(_=n.length,_){if(_>a&&(_=a),_>c&&(_=c),0===_)break e;r.set(i.subarray(o,o+_),s),a-=_,o+=_,c-=_,s+=_,n.length-=_;break}n.mode=Ei;break;case 16196:for(;l<14;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=wi;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}n.lens[k[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[k[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},T=ni(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,T){e.msg="invalid code lengths set",n.mode=wi;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[u&(1<<n.lenbits)-1],E=S>>>24,v=S>>>16&255,g=65535&S,!(E<=l);){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(g<16)u>>>=E,l-=E,n.lens[n.have++]=g;else{if(16===g){for(C=E+2;l<C;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(u>>>=E,l-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=wi;break}w=n.lens[n.have-1],_=3+(3&u),u>>>=2,l-=2}else if(17===g){for(C=E+3;l<C;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}u>>>=E,l-=E,w=0,_=3+(7&u),u>>>=3,l-=3}else{for(C=E+7;l<C;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}u>>>=E,l-=E,w=0,_=11+(127&u),u>>>=7,l-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=wi;break}for(;_--;)n.lens[n.have++]=w}}if(n.mode===wi)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=wi;break}if(n.lenbits=9,A={bits:n.lenbits},T=ni(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,T){e.msg="invalid literal/lengths set",n.mode=wi;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},T=ni(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,T){e.msg="invalid distances set",n.mode=wi;break}if(n.mode=bi,t===oi)break e;case bi:n.mode=mi;case mi:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=l,Yn(e,d),s=e.next_out,r=e.output,c=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,u=n.hold,l=n.bits,n.mode===Ei&&(n.back=-1);break}for(n.back=0;S=n.lencode[u&(1<<n.lenbits)-1],E=S>>>24,v=S>>>16&255,g=65535&S,!(E<=l);){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(v&&0==(240&v)){for(b=E,m=v,y=g;S=n.lencode[y+((u&(1<<b+m)-1)>>b)],E=S>>>24,v=S>>>16&255,g=65535&S,!(b+E<=l);){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=E,l-=E,n.back+=E,n.length=g,0===v){n.mode=16205;break}if(32&v){n.back=-1,n.mode=Ei;break}if(64&v){e.msg="invalid literal/length code",n.mode=wi;break}n.extra=15&v,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;l<C;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[u&(1<<n.distbits)-1],E=S>>>24,v=S>>>16&255,g=65535&S,!(E<=l);){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(0==(240&v)){for(b=E,m=v,y=g;S=n.distcode[y+((u&(1<<b+m)-1)>>b)],E=S>>>24,v=S>>>16&255,g=65535&S,!(b+E<=l);){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=E,l-=E,n.back+=E,64&v){e.msg="invalid distance code",n.mode=wi;break}n.offset=g,n.extra=15&v,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;l<C;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=wi;break}n.mode=16204;case 16204:if(0===c)break e;if(_=d-c,n.offset>_){if(_=n.offset-_,_>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=wi;break}_>n.wnext?(_-=n.wnext,f=n.wsize-_):f=n.wnext-_,_>n.length&&(_=n.length),p=n.window}else p=r,f=s-n.offset,_=n.length;_>c&&(_=c),c-=_,n.length-=_;do{r[s++]=p[f++]}while(--_);0===n.length&&(n.mode=mi);break;case 16205:if(0===c)break e;r[s++]=n.length,c--,n.mode=mi;break;case yi:if(n.wrap){for(;l<32;){if(0===a)break e;a--,u|=i[o++]<<l,l+=8}if(d-=c,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?Ot(n.check,r,d,s-d):Ct(n.check,r,d,s-d)),d=c,4&n.wrap&&(n.flags?u:Ti(u))!==n.check){e.msg="incorrect data check",n.mode=wi;break}u=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break e;a--,u+=i[o++]<<l,l+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=wi;break}u=0,l=0}n.mode=16208;case 16208:T=ai;break e;case wi:T=li;break e;case 16210:return hi;default:return ui}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=l,(n.wsize||d!==e.avail_out&&n.mode<wi&&(n.mode<yi||t!==ii))&&xi(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?Ot(n.check,r,d,e.next_out-d):Ct(n.check,r,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Ei?128:0)+(n.mode===bi||n.mode===gi?256:0),(0===h&&0===d||t===ii)&&T===si&&(T=di),T},inflateEnd:e=>{if(Ni(e))return ui;let t=e.state;return t.window&&(t.window=null),e.state=null,si},inflateGetHeader:(e,t)=>{if(Ni(e))return ui;const n=e.state;return 0==(2&n.wrap)?ui:(n.head=t,t.done=!1,si)},inflateSetDictionary:(e,t)=>{const n=t.length;let i,r,o;return Ni(e)?ui:(i=e.state,0!==i.wrap&&i.mode!==pi?ui:i.mode===pi&&(r=1,r=Ct(r,t,n,0),r!==i.check)?li:(o=xi(e,t,n,n),o?(i.mode=16210,hi):(i.havedict=1,si)))},inflateInfo:"pako inflate (from Nodeca project)"};var Pi=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Mi=Object.prototype.toString,{Z_NO_FLUSH:zi,Z_FINISH:Fi,Z_OK:Hi,Z_STREAM_END:Vi,Z_NEED_DICT:qi,Z_STREAM_ERROR:Gi,Z_DATA_ERROR:ji,Z_MEM_ERROR:Ki}=Rt;function Bi(e){this.options=Rn.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Un,this.strm.avail_out=0;let n=Ui.inflateInit2(this.strm,t.windowBits);if(n!==Hi)throw new Error(It[n]);if(this.header=new Pi,Ui.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=xn.string2buf(t.dictionary):"[object ArrayBuffer]"===Mi.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ui.inflateSetDictionary(this.strm,t.dictionary),n!==Hi)))throw new Error(It[n])}function Zi(e,t){const n=new Bi(t);if(n.push(e),n.err)throw n.msg||It[n.err];return n.result}Bi.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Fi:zi,"[object ArrayBuffer]"===Mi.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),o=Ui.inflate(n,s),o===qi&&r&&(o=Ui.inflateSetDictionary(n,r),o===Hi?o=Ui.inflate(n,s):o===ji&&(o=qi));n.avail_in>0&&o===Vi&&n.state.wrap>0&&0!==e[n.next_in];)Ui.inflateReset(n),o=Ui.inflate(n,s);switch(o){case Gi:case ji:case qi:case Ki:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===Vi))if("string"===this.options.to){let e=xn.utf8border(n.output,n.next_out),t=n.next_out-e,r=xn.buf2string(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==Hi||0!==a){if(o===Vi)return o=Ui.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Bi.prototype.onData=function(e){this.chunks.push(e)},Bi.prototype.onEnd=function(e){e===Hi&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Rn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Wi={Inflate:Bi,inflate:Zi,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Zi(e,t)},ungzip:Zi,constants:Rt};const{Deflate:Qi,deflate:Yi,deflateRaw:Xi,gzip:Ji}=Wn,{Inflate:$i,inflate:er,inflateRaw:tr,ungzip:nr}=Wi;var ir,rr={Deflate:Qi,deflate:Yi,deflateRaw:Xi,gzip:Ji,Inflate:$i,inflate:er,inflateRaw:tr,ungzip:nr,constants:Rt};!function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"}(ir||(ir={}));var or,sr=function(e){function n(t,n){var i=n.sdkState,r=n.dispatcher,o=n.logger,s=e.call(this)||this;return s.lastActive=0,s._iid=t,s._sdkState=i,s._dispatcher=r,s._logger=o,s}return t(n,e),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===ir.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return ir.CONNECTING;case 1:return ir.OPEN}return ir.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var e;return null!==(e=this._ws)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(e){var t=this;e.split("\n").forEach((function(e){if(e){var n=Ve.createFromRawMessage(t._iid,e);if(t._logger.debug("receive websocket event",n),"LOGI"===n.code)t.dispatch("message",n);else if("PONG"===n.code)t.dispatch("pong");else if("EXPR"===n.code){if(n.payload){var i=new ke(n.payload);i.expiresIn>=0&&t._dispatcher.dispatch(i)}}else"NOOP"===n.code||t.dispatch("message",n)}}))},n.prototype.connect=function(e,t){var n=this;this._ws=new WebSocket(e,encodeURIComponent(t)),this._ws.onopen=function(){n._logger.debug("websocket open"),n.dispatch("open")},this._ws.onmessage=function(e){return r(n,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(s){return(null===(n=this._sdkState.websocket)||void 0===n?void 0:n.compression)?e.data instanceof Blob?((t=new FileReader).readAsArrayBuffer(e.data),t.onloadend=function(){return r(i,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(i=t.result,r(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){return e=rr.ungzip(i),[2,String.fromCharCode.apply(null,e)]}))})))];case 1:return e=n.sent(),this._handleMessage(e),[2]}var i}))}))}):"string"==typeof e.data&&this._handleMessage(e.data):this._handleMessage(e.data),[2]}))}))},this._ws.onerror=function(){n._logger.debug("websocket error"),n.dispatch("error",g.networkError)},this._ws.onclose=function(){n._logger.debug("websocket close"),n.dispatch("close")},this.lastActive=Date.now()},n.prototype.disconnect=function(){var e=this;return new Promise((function(t){e._logger.debug("websocket disconnect"),e._ws&&e.connectionState!==ir.CLOSED?(e._ws.onopen=qe,e._ws.onmessage=qe,e._ws.onerror=qe,e._ws.onclose=function(){e.dispatch("close"),t()},e._ws.close(),e._ws=void 0):t()}))},n.prototype.send=function(e){if(!this._ws)throw g.connectionClosed;"PING"!==e.code?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},n.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},n}(X),ar=function(e){function n(t){var n,i=t.code,r=t.ackRequired,o=t.payload,s=void 0===o?{}:o,a=this;return(a=e.call(this)||this).code=i,a.payload=s,a.requestId=null!==(n=a.payload.req_id)&&void 0!==n?n:Q(),a.ackRequired=r,a.payload.req_id=a.requestId,a}return t(n,e),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},n}($),cr=function(e){function n(t){var n=t.all,i=t.feed,r=t.custom_types,o=t.ts,s=e.call(this)||this;return s.all=n,s.feed=i,s.customTypes=r,s.ts=o,s}return t(n,e),n}($),ur=function(){function e(e,t){var n=t.session,i=t.sdkState,r=t.dispatcher,o=t.logger,s=t.useFetchCompat,a=void 0!==s&&s,c=this;this._ackStateMap=new Map,this._sdkState=i,this._dispatcher=r,this._logger=o,this.apiClient=new He(e,{session:n,sdkState:i,dispatcher:r,logger:o,useFetchCompat:a}),this.websocketClient=new sr(e,{sdkState:i,dispatcher:r,logger:o}),this.websocketClient.on("message",(function(e){if(e.payload.unread_cnt&&c._dispatcher.dispatch(new cr(e.payload.unread_cnt)),e.requestId){if(c._ackStateMap.has(e.requestId)){var t=c._ackStateMap.get(e.requestId);"EROR"!==e.code?t.resolve(e):t.reject(new g({code:e.payload.code,message:e.payload.message}))}}else c._dispatcher.dispatch(e)})).on("close",(function(){c._ackStateMap.forEach((function(e){e.reject(g.connectionClosed)})),c._ackStateMap.clear()}))}return e.prototype._sendApiRequest=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.apiClient.send(e)];case 1:return[2,t.sent()]}}))}))},e.prototype._sendWebsocketRequest=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r=this;return o(this,(function(o){if(!this._sdkState.websocket)throw g.connectionRequired;if(t=new Fe,e.ackRequired){i=function(i,o){r._ackStateMap.has(e.requestId)&&(r._ackStateMap.delete(e.requestId),n&&(clearTimeout(n),n=null),i?(r._logger.debug("fail websocket request",i),t.reject(i)):(r._logger.debug("receive websocket ack",e.requestId),t.resolve(o)))};try{n=setTimeout((function(){return i(g.noAckTimeout)}),this._sdkState.websocket.responseTimeout),this._ackStateMap.set(e.requestId,{resolve:function(e){return i(void 0,e)},reject:function(e){return i(e)}}),this.websocketClient.send(e)}catch(e){i(e)}}else try{this.websocketClient.send(e),t.resolve()}catch(e){t.reject(e)}return[2,t.promise]}))}))},e.prototype.send=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return e instanceof Ne?[4,this._sendApiRequest(e)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e instanceof ar?[4,this._sendWebsocketRequest(e)]:[3,4];case 4:throw g.invalidParameters}}))}))},e.prototype.cancel=function(e){this.apiClient.cancel(e)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();!function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"}(or||(or={}));var lr=function(e){function n(t){var n=t.stateType,i=e.call(this)||this;return i.stateType=n,i}return t(n,e),n}($),hr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}($),dr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}($),_r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}($),fr=function(e){function n(t){var n=t.userId,i=t.authToken,r=t.services,o=void 0===r?[U.CHAT]:r,s=t.expiringSession,a=void 0===s||s,c=e.call(this)||this;return c.path="".concat(re,"/").concat(n,"/session_key"),c.method=ne.POST,c.params=ee({token:i,services:o,expiring_session:!!a}),c.requireAuth=!1,c}return t(n,e),n}(Ne),pr=function(e){function n(t){var n=t.authToken,i=t.expiringSession,r=void 0===i||i,o=t.requestId,s=void 0===o?"":o;return e.call(this,{code:"LOGI",payload:{token:n,expiring_session:r?1:0,req_id:s},ackRequired:!0})||this}return t(n,e),n}(ar),Er=function(e){function n(t,n){var i=e.call(this,t,n)||this,r=n.key,o=n.expires_at,s=n.services;return i.key=r,i.expiresAt=o,i.services=s,i}return t(n,e),n}(Ae),vr=function(e){function n(t,n,i){var r,o=this;return(o=e.call(this,t,"LOGI",i)||this).error=null,o.newKey=null,o.newKey=null!==(r=i.new_key)&&void 0!==r?r:null,o.error=i.error?new g(i.error):null,o}return t(n,e),n}(Ve),gr=function(){function e(e){var t,n,i,r;this.isEnabled=null!==(t=e.enabled)&&void 0!==t&&t,this.feedChannels=null!==(n=e.feed_channels)&&void 0!==n?n:{},this.templateListToken=null!==(i=e.template_list_token)&&void 0!==i?i:null,this.settingsUpdatedAt=null!==(r=e.settings_updated_at)&&void 0!==r?r:0}return e.payloadify=function(e){return ee(te({enabled:e.isEnabled,feed_channels:e.feedChannels,template_list_token:e.templateListToken,settings_updated_at:e.settingsUpdatedAt}))},e}(),br=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},mr=function(){function e(e){var t;this.lastUpdatedAt=null!==(t=e.last_updated_at)&&void 0!==t?t:0}return e.payloadify=function(e){return ee(te({last_updated_at:e.lastUpdatedAt}))},e}(),yr=1048576,wr=5,Tr=function(){function e(e){var t,n,i,r,o;void 0===e&&(e={}),this.emojiHash=e.emoji_hash||"",this.uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*yr:Number.MAX_SAFE_INTEGER,this.useReaction=!!e.use_reaction,this.applicationAttributes=null!==(t=e.application_attributes)&&void 0!==t?t:[],this.premiumFeatureList=null!==(n=e.premium_feature_list)&&void 0!==n?n:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=null!==(i=e.multiple_file_send_max_size)&&void 0!==i?i:5,this.allowSdkStatsUpload=null===(r=e.allow_sdk_log_ingestion)||void 0===r||r,this.uikitConfigInfo=new mr(null!==(o=e.uikit_config)&&void 0!==o?o:{}),this.notificationInfo=e.notifications?new gr(e.notifications):null}return e.payloadify=function(e){return ee(te({emoji_hash:e.emojiHash,file_upload_size_limit:e.uploadSizeLimit/yr,application_attributes:e.applicationAttributes,premium_feature_list:e.premiumFeatureList,use_reaction:e.useReaction,allow_sdk_log_ingestion:e.allowSdkStatsUpload,uikit_config:e.uikitConfigInfo?mr.payloadify(e.uikitConfigInfo):null,notifications:e.notificationInfo?gr.payloadify(e.notificationInfo):null}))},e}(),Sr=function(){function e(e){this._iid="",this._iid=e}return e.payloadify=function(e){return{}},e}(),Nr=function(e){function n(t){var n=t.userId,i=t.metadata,r=e.call(this)||this;return r.method=ne.POST,r.path="".concat(re,"/").concat(n,"/metadata"),r.params={metadata:i},r}return t(n,e),n}(Ne),Ar=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.metaData=n,i}return t(n,e),n}(Ae),Cr=function(e){function n(t){var n=t.userId,i=t.metadata,r=t.upsert,o=e.call(this)||this;return o.method=ne.PUT,o.path="".concat(re,"/").concat(n,"/metadata"),o.params={metadata:i,upsert:r},o}return t(n,e),n}(Ne),kr=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.metadata=n,i}return t(n,e),n}(Ae),Or=function(e){function n(t){var n=t.userId,i=t.metadataKey,r=e.call(this)||this;return r.method=ne.DELETE,r.path="".concat(re,"/").concat(n,"/metadata/").concat(i),r}return t(n,e),n}(Ne);!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e)}(Ae);var Ir=function(e){function n(t){var n=t.userId,i=e.call(this)||this;return i.method=ne.DELETE,i.path="".concat(re,"/").concat(n,"/metadata"),i}return t(n,e),n}(Ne);!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e)}(Ae);var Rr,Dr=function(e,t){var n=JSON.parse(JSON.stringify(e));return n._iid&&delete n._iid,t&&t(n),n},Lr=function(e,t){var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},xr=function(e){return{do:function(t){e||t()},throw:function(t){if(!e)throw t}}};!function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"}(Rr||(Rr={}));var Ur,Pr=function(e){function i(t,n){var i,r,o,s,u,l,h,d,_,f,p,E,v=this;return(v=e.call(this,t)||this).userId=null!==(r=null!==(i=n.guest_id)&&void 0!==i?i:n.user_id)&&void 0!==r?r:"",v.nickname=null!==(s=null!==(o=n.nickname)&&void 0!==o?o:n.name)&&void 0!==s?s:"",v.plainProfileUrl=null!==(l=null!==(u=n.profile_url)&&void 0!==u?u:n.image)&&void 0!==l?l:"",v.requireAuth=null!==(h=n.require_auth_for_profile_image)&&void 0!==h&&h,v.metaData=null!==(d=n.metadata)&&void 0!==d?d:{},v.connectionStatus=Rr.NON_AVAILABLE,T(Rr,n.is_online)?v.connectionStatus=n.is_online:w("boolean",n.is_online)&&(v.connectionStatus=n.is_online?Rr.ONLINE:Rr.OFFLINE),v.isActive=null===(_=n.is_active)||void 0===_||_,v.lastSeenAt=null!==(f=n.last_seen_at)&&void 0!==f?f:null,v.preferredLanguages=n.preferred_languages?c([],a(n.preferred_languages),!1):null,v.friendDiscoveryKey=null!==(p=n.friend_discovery_key)&&void 0!==p?p:null,v.friendName=null!==(E=n.friend_name)&&void 0!==E?E:null,v}return t(i,e),i.payloadify=function(t){return ee(te(n(n({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},Object.defineProperty(i.prototype,"profileUrl",{get:function(){var e=To.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),i.prototype.serialize=function(){return Dr(this)},i.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return w("string",e)}))},i.prototype._applyMetaData=function(e,t){var n=this;void 0===t&&(t=!1),Object.keys(e).forEach((function(i){t?delete n.metaData[i]:n.metaData[i]=e[i]}))},i.prototype.createMetaData=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,s,a;return o(this,(function(o){switch(o.label){case 0:return xr(this._isValidMetaData(e)).throw(g.invalidParameters),t=To.of(this._iid),n=t.sdkState,i=t.requestQueue,r=new Nr({userId:n.userId,metadata:e}),[4,i.send(r)];case 1:return s=o.sent(),a=s.as(Ar).metaData,this._applyMetaData(a),[2,this.metaData]}}))}))},i.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var n,i,r,s,a,c;return o(this,(function(o){switch(o.label){case 0:return xr(this._isValidMetaData(e)).throw(g.invalidParameters),n=To.of(this._iid),i=n.sdkState,r=n.requestQueue,s=new Cr({userId:i.userId,metadata:e,upsert:t}),[4,r.send(s)];case 1:return a=o.sent(),c=a.as(kr).metadata,this._applyMetaData(c),[2,this.metaData]}}))}))},i.prototype.deleteMetaData=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,s;return o(this,(function(o){switch(o.label){case 0:return xr(w("string",e)).throw(g.invalidParameters),t=To.of(this._iid),n=t.sdkState,i=t.requestQueue,r=new Or({userId:n.userId,metadataKey:e}),[4,i.send(r)];case 1:return o.sent(),this._applyMetaData(((s={})[e]=!0,s),!0),[2,this.metaData]}}))}))},i.prototype.deleteAllMetaData=function(){return r(this,void 0,void 0,(function(){var e,t,n,i;return o(this,(function(r){switch(r.label){case 0:return e=To.of(this._iid),t=e.sdkState,n=e.requestQueue,i=new Ir({userId:t.userId}),[4,n.send(i)];case 1:return r.sent(),this.metaData={},[2]}}))}))},i}(Sr),Mr=function(e){function n(t){var n=t.userProfile,i=e.call(this)||this;return i.userProfile=n,i}return t(n,e),n}($),zr=function(){function e(e,t){var n,i,r,o,s,a,c,u,l,h,d,_,f,p;this._iid=e,this.appInfo=new Tr(t),this.user=new Pr(e,t),this.connectedAt=null!==(n=t.login_ts)&&void 0!==n?n:0,this.firstConnectedAt=0,this.pingInterval=null!==(i=t.ping_interval)&&void 0!==i?i:15e3,this.pongTimeout=null!==(r=t.pong_timeout)&&void 0!==r?r:5e3,this.reconnectInterval=null!==(s=null===(o=t.reconnect)||void 0===o?void 0:o.interval)&&void 0!==s?s:3e3,this.reconnectMaxInterval=null!==(c=null===(a=t.reconnect)||void 0===a?void 0:a.max_interval)&&void 0!==c?c:6e4,this.reconnectRetryCount=null!==(l=null===(u=t.reconnect)||void 0===u?void 0:u.retry_cnt)&&void 0!==l?l:5,this.reconnectIntervalMultiple=null!==(d=null===(h=t.reconnect)||void 0===h?void 0:h.mul)&&void 0!==d?d:2,this.maxUnreadCountOnSuperGroup=null!==(_=t.max_unread_cnt_on_super_group)&&void 0!==_?_:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=null!==(f=t.concurrent_call_limit)&&void 0!==f?f:5,this.backOffDelay=null!==(p=t.back_off_delay)&&void 0!==p?p:100}return e.payloadify=function(e){return ee(te(n(n(n({},Pr.payloadify(e.user)),Tr.payloadify(e.appInfo)),{login_ts:e.connectedAt,ping_interval:e.pingInterval,pong_timeout:e.pongTimeout,reconnect:{interval:e.reconnectInterval,max_interval:e.reconnectMaxInterval,retry_cnt:e.reconnectRetryCount,mul:e.reconnectIntervalMultiple},max_unread_cnt_on_super_group:e.maxUnreadCountOnSuperGroup,profile_image_encryption:e.profileImageEncryption,concurrent_call_limit:e.concurrentCallLimit,back_off_delay:e.backOffDelay})))},e.prototype.apply=function(){var e=this.reconnectInterval,t=this.reconnectMaxInterval,n=this.reconnectIntervalMultiple,i=To.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(i){return i>0?1e3*Math.min(e*Math.pow(n,i-1),t):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.dispatcher.dispatch(new Mr({userProfile:this}))},e}(),Fr=function(e){function i(t,n,i){var r,o,s,a,c=this;return(c=e.call(this,t,n,i)||this).error=null,c.services=[],c.userProfile=new zr(t,i),c.deviceTokenLastDeletedAt=null!==(r=i.device_token_last_deleted_at)&&void 0!==r?r:0,c.key=null!==(o=i.key)&&void 0!==o?o:"",c.ekey=null!==(s=i.ekey)&&void 0!==s?s:"",c.error=i.error?new g(i):null,c.services=null!==(a=i.services)&&void 0!==a?a:[],c}return t(i,e),i.asError=function(e){return new i("","LOGI",n({user_id:"",error:!0},e))},i.prototype.applyTo=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this.error?[3,4]:(t=To.of(e))?[4,t.sessionManager.login(this)]:[3,2];case 1:return n.sent(),this.userProfile.apply(),[3,3];case 2:throw g.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},i}(Ve),Hr=function(){function e(){this.type=or.NONE,this.name="none"}return e.prototype.run=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.onReconnect=function(e,t){return t.resetReconnectCount,r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.onDisconnect=function(e,t){return t.error,t.autoReconnect,r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},e}(),Vr=function(e){return r(void 0,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:if(!((t=n.sent())instanceof g))throw t;return t.throwOutside(),[3,3];case 3:return[2]}}))}))},qr=function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},Gr=function(e){function n(t){void 0===t&&(t={});var n,i=this;return(i=e.call(this)||this).type=or.LOGOUT,i.name="logout",i._wasPreviouslyConnected=null===(n=t.wasPreviouslyConnected)||void 0===n||n,i}return t(n,e),n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(s){switch(s.label){case 0:return t=Date.now(),n=e.sdkState.userId,[4,e.logout()];case 1:return s.sent(),[4,e.changeState(new Jr,t)];case 2:return s.sent(),this._wasPreviouslyConnected&&Vr((function(){return r(i,void 0,void 0,(function(){return o(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onDisconnected&&e.onDisconnected(n)})),[2]}))}))})),[2]}}))}))},n}(Hr),jr=function(e){function n(){var t=e.call(this)||this;return t.type=or.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return t(n,e),n.prototype.run=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,e.disconnect()];case 1:return t.sent(),[2]}}))}))},n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return i.sent(),[4,e.changeState(new Xr({authToken:t}),n)];case 2:return i.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Qr,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Gr,t)];case 1:return n.sent(),[2]}}))}))},n}(Hr),Kr=function(e){function n(t){var n=t.autoReconnect,i=e.call(this)||this;return i.type=or.INTERNAL_DISCONNECTED,i.name="internaldisconnected",i._autoReconnect=!1,i._autoReconnect=n,i}return t(n,e),n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),this._autoReconnect?[4,e.changeState(new Qr,t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return i.sent(),[4,e.changeState(new Xr({authToken:t}),n)];case 2:return i.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Qr,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new jr,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Gr,t)];case 1:return n.sent(),[2]}}))}))},n}(Hr),Br=function(e){return r(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},Zr=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),Wr=function(e,t,n){return void 0===n&&(n=new Zr),r(void 0,void 0,void 0,(function(){var i,r,s,a,c,u;return o(this,(function(o){switch(o.label){case 0:i=0,r=null,s=function(e){return r=null!=e?e:new Error("Halted")},a=function(){i=0},o.label=1;case 1:if(!(-1===t||i<t))return[3,9];o.label=2;case 2:return o.trys.push([2,4,,8]),[4,e(s,a)];case 3:if(c=o.sent(),r)throw r;return[2,c];case 4:if(u=o.sent(),r)return[3,6];if(++i===t)throw u;return[4,Br(n.calcTimeout(i))];case 5:return o.sent(),[3,7];case 6:throw r;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}}))}))},Qr=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=or.RECONNECTING,t.name="reconnecting",t._callbacks=[],t}return t(n,e),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t,n,i,s,a,c,l=this;return o(this,(function(h){switch(h.label){case 0:t=Date.now(),n=new Fe,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),Vr((function(){return r(l,void 0,void 0,(function(){return o(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectStarted&&e.onReconnectStarted()})),[2]}))}))})),h.label=1;case 1:return h.trys.push([1,4,,9]),i=e.sdkState.websocket,s=i.reconnectMaxRetry,a=i.reconnectRetryStrategy,[4,Wr((function(t,n){return r(l,void 0,void 0,(function(){var i;return o(this,(function(r){switch(r.label){case 0:this._haltConnect=t,this._resetConnect=n,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.connect()];case 2:return r.sent(),[3,4];case 3:if(i=r.sent(),e.clearLoginTimer(),i instanceof g){if(i.code===u.CONNECTION_CANCELED)return t(i),[2];if(i.isSessionExpiredError||i.isSessionInvalidatedError)return t(i),[2]}throw i;case 4:return[2]}}))}))}),s,a)];case 2:return h.sent(),[4,e.changeState(new Yr,t)];case 3:return h.sent(),Vr((function(){return r(l,void 0,void 0,(function(){return o(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(e){e.onReconnectSucceeded&&e.onReconnectSucceeded()})),[2]}))}))})),[3,9];case 4:return c=h.sent(),v(c)?[3,7]:c instanceof g?c.code===u.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new Kr({autoReconnect:!1}),t)]:[3,6];case 5:h.sent(),h.label=6;case 6:return Vr((function(){return r(l,void 0,void 0,(function(){return o(this,(function(t){return this._flushCallbacks(c),e.connectionHandlers.forEach((function(e){e.onReconnectFailed&&e.onReconnectFailed()})),[2]}))}))})),[3,8];case 7:throw c;case 8:return[3,9];case 9:return[2,n.promise]}}))}))},n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(i){return n=new Fe,this._halt(g.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var i=Date.now();e.changeState(new Xr({authToken:t}),i).then((function(){n.resolve()})).catch((function(e){n.reject(e)}))})),[2,n.promise]}))}))},n.prototype.onReconnect=function(e,t){var n=t.resetReconnectCount,i=void 0!==n&&n;return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){return e=new Fe,this._resetConnect&&i&&this._resetConnect(),this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},n.prototype.onDisconnect=function(e,t){t.error;var n=t.autoReconnect,i=void 0===n||n;return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(g.connectionCanceled),[4,e.changeState(new Kr({autoReconnect:i}),t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(g.connectionCanceled),[4,e.changeState(new jr,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(g.connectionCanceled),[4,e.changeState(new Gr,t)];case 1:return n.sent(),[2]}}))}))},n}(Hr),Yr=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=or.CONNECTED,t.name="connected",t}return t(n,e),n.prototype.onReconnect=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),[4,e.changeState(new Qr,t)];case 2:return n.sent(),[2]}}))}))},n.prototype.onDisconnect=function(e,t){var n=t.autoReconnect;return r(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return t=Date.now(),[4,e.changeState(new Kr({autoReconnect:n}),t)];case 1:return i.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new jr,t)];case 1:return n.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Gr,t)];case 1:return n.sent(),[2]}}))}))},n}(Hr),Xr=function(e){function n(t){var n=t.authToken,i=e.call(this)||this;return i.type=or.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=n,i}return t(n,e),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._callbacks.forEach((function(t){return t(e)}))},n.prototype.run=function(e){return r(this,void 0,void 0,(function(){var t,n,i,s=this;return o(this,(function(a){switch(a.label){case 0:t=Date.now(),n=new Fe,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),a.label=1;case 1:return a.trys.push([1,4,,10]),[4,Wr((function(t){return r(s,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:this._haltConnect=t,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.connect(this._authToken)];case 2:return i.sent(),[3,4];case 3:if(n=i.sent(),e.clearLoginTimer(),n instanceof g&&n.code===u.CONNECTION_CANCELED)return t(n),[2];throw n;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return a.sent(),[4,e.changeState(new Yr,t)];case 3:return a.sent(),Vr((function(){return r(s,void 0,void 0,(function(){return o(this,(function(t){return this._flushCallbacks(),e.connectionHandlers.forEach((function(t){t.onConnected&&t.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,10];case 4:return i=a.sent(),v(i)?[3,8]:[4,e.disconnect()];case 5:return a.sent(),i instanceof g?i.code===u.CONNECTION_CANCELED?[3,7]:[4,e.changeState(new Jr,t)]:[3,7];case 6:a.sent(),a.label=7;case 7:return Vr((function(){return r(s,void 0,void 0,(function(){return o(this,(function(e){return this._flushCallbacks(i),[2]}))}))})),[3,9];case 8:throw i;case 9:return[3,10];case 10:return[2,n.promise]}}))}))},n.prototype.onConnect=function(e){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){return e=new Fe,this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},n.prototype.onDisconnect=function(e,t){var n=t.error,i=void 0===n?null:n,s=t.autoReconnect,a=void 0!==s&&s;return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(null!=i?i:g.connectionCanceled),e.hasSession?[4,e.changeState(new Kr({autoReconnect:a}),t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new Gr,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(g.connectionCanceled),e.hasSession?[4,e.changeState(new jr,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new Gr,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(g.connectionCanceled),[4,e.changeState(new Gr,t)];case 1:return n.sent(),[2]}}))}))},n}(Hr),Jr=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=or.INITIALIZED,t.name="initialized",t}return t(n,e),n.prototype.onConnect=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=Date.now(),[4,e.changeState(new Xr({authToken:t}),n)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new Gr({wasPreviouslyConnected:!1}),t)];case 1:return n.sent(),[2]}}))}))},n}(Hr),$r=function(e){function n(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return t(n,e),n}(ar),eo=function(){function e(e){var t=e.pingDelegate,n=e.sdkState,i=e.logger;this.pingDelegate=t,this.sdkState=n,this._logger=i}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var e,t=this;if(!this.sdkState.websocket)throw g.connectionRequired;var n=new $r;try{var i=null!==(e=this.sdkState.websocket.pongTimeout)&&void 0!==e?e:5e3;this._pingTimeoutTimer=setTimeout((function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()}),i),this.pingDelegate.send(n),this._logger.debug("pinger.ping()")}catch(e){this._logger.debug("pinger.ping() error",e),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return n},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var e,t=this;if(!this.sdkState.websocket)throw g.connectionRequired;this._logger.debug("pinger.refreshTimer()");var n=null!==(e=this.sdkState.websocket.pingInterval)&&void 0!==e?e:15e3;this.stop(),this._pingTimer=setInterval((function(){t.ping()}),n)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),to=function(e){function i(t){var i=t.request,r=void 0===i||i,o=t.features,s=void 0===o?{}:o,a=t.options,c=void 0===a?{}:a,u=e.call(this)||this;return u.request=r,u.features=n({localCache:!0},s),u.options=n({ingestion:!0},c),u}return t(i,e),i}($),no=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications"],io=function(e){function n(t,n){var i,r=n.sdkState,o=n.cacheContext,s=n.connectionHandlers,a=n.sessionManager,c=n.websocketClient,u=n.dispatcher,l=n.logger,h=n.entryState,d=void 0===h?new Jr:h,_=this;return(_=e.call(this)||this)._stateUpdatedAt=0,_._connectingAt=0,_._connectionRequestQueue=[],_._iid=t,_.sdkState=r,_.cacheContext=o,_.connectionHandlers=s,_._sessionManager=a,_._websocketClient=c,_._dispatcher=u,_._logger=l,_._currentState=d,(null===(i=_.sdkState.websocket)||void 0===i?void 0:i.pingerDisabled)||(_._pinger=new eo({pingDelegate:{send:function(e){return _._websocketClient.send(e)},error:function(e){return _._websocketClient.error(e)}},sdkState:_.sdkState,logger:l})),_._websocketClient.on("open",(function(){_._tryResolveConnectionRequest()})).on("message",(function(e){if("LOGI"===e.code)_.clearLoginTimer(),_._dispatcher.dispatch(e.as(Fr))})).on("ping-refresh",(function(){var e;return null===(e=_._pinger)||void 0===e?void 0:e.refreshTimer()})).on("pong",(function(){var e;return null===(e=_._pinger)||void 0===e?void 0:e.pong()})).on("error",(function(){var e;return null===(e=_._pinger)||void 0===e?void 0:e.stop()})).on("close",(function(){_._logiProcessingTimer=setTimeout((function(){_._logiProcessingTimer=void 0,_._unresolvedLogi||_._rejectConnectionRequest(g.networkError)}),500)})),_._dispatcher.on((function(e){e instanceof Fr&&(_._unresolvedLogi=e,_._tryResolveConnectionRequest())})),_}return t(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),n.prototype.changeState=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return t>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=t,this._dispatcher.dispatch(new lr({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},n.prototype._tryResolveConnectionRequest=function(){var e;return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:return t=this._unresolvedLogi,this._websocketClient.isOpen&&t?(this._unresolvedLogi=void 0,t.error?[3,2]:[4,t.applyTo(this._iid)]):[3,3];case 1:return i.sent(),n=t.userProfile,this._enableStatLog({request:n.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:n.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish")},options:{ingestion:n.appInfo.allowSdkStatsUpload}}),this._statLogConnection(),null===(e=this._pinger)||void 0===e||e.start(),this._connectionRequestQueue.forEach((function(e){return e.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.session.authToken=void 0,(t.error.isSessionExpiredError||t.error.isSessionInvalidatedError)&&this._dispatcher.dispatch(new ke({reason:t.error.code})),this._rejectConnectionRequest(t.error),i.label=3;case 3:return[2]}}))}))},n.prototype._rejectConnectionRequest=function(e){var t;if(null===(t=this._pinger)||void 0===t||t.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var n=this._connectionRequestQueue;this._connectionRequestQueue=[],n.forEach((function(t){return t.reject(e)})),this._statLogConnection(e)}},n.prototype._url=function(){var e,t=this.sdkState,n=t.appId,i=t.appVersion,r=t.userId,o=t.extensions,s=t.sendbirdRuntimeEnvironment,a=this.cacheContext.localCacheEnabled,c=this._sessionManager.session,u=null===(e=this.sdkState.websocket)||void 0===e?void 0:e.compression,l=!!(null!=o?o:{}).sb_uikit,d=ze.userAgentWithExtension(o);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(h.OS_VERSION),"&sv=").concat(encodeURIComponent(h.SDK_VERSION),"&ai=").concat(n).concat(i?"&av=".concat(i):"").concat(c.hasSession?"":"&user_id=".concat(encodeURIComponent(r)),"&pmce=").concat(u?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(d,"&SB-SDK-User-Agent=").concat(encodeURIComponent(ze.sendbirdSdkUserAgentWithExtension(s)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(no))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(a?1:0,"&include_poll_details=1").concat(l?"&uikit_config=1":"")},n.prototype._enableStatLog=function(e){var t=e.request,n=e.features,i=e.options,r=void 0===i?{}:i;this._dispatcher.dispatch(new to({request:t,features:n,options:r}))},n.prototype._statLogConnection=function(e){var t;this._dispatcher.dispatch(new Oe(new xe({type:Se.WEBSOCKET_CONNECT,data:{host_url:null===(t=this.sdkState.websocket)||void 0===t?void 0:t.host,success:!e,latency:Date.now()-this._connectingAt,error_code:null==e?void 0:e.code,error_description:null==e?void 0:e.message}})))},n.prototype.connect=function(e){var t;return void 0===e&&(e=""),r(this,void 0,void 0,(function(){var n,i,r,s=this;return o(this,(function(o){return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(g.connectionCanceled)),n=this._url(),i=new Fe,this._connectionRequestQueue.push(i),1===this._connectionRequestQueue.length&&(this._connectingAt=Date.now(),this._loginTimer=setTimeout((function(){s._loginTimer=void 0,s._rejectConnectionRequest(g.loginTimeout)}),null===(t=this.sdkState.websocket)||void 0===t?void 0:t.responseTimeout),r=this._sessionManager.session,e&&(r.authToken=e),this._websocketClient.connect(n,JSON.stringify(r.hasSession?{auth:r.sessionKey}:{token:e}))),[2,i.promise]}))}))},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(Fr.asError(g.connectionRenew))},n.prototype.disconnect=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},n.prototype.logout=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this._sessionManager.clear()];case 1:return e.sent(),[4,this.disconnect()];case 2:return e.sent(),[2]}}))}))},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n}(X),ro=function(e){function n(t){var n=t.appId,i=t.userId,r=t.services,o=void 0===r?[U.CHAT]:r,s=t.includeUIKitConfig,a=void 0!==s&&s,c=t.localCacheEnabled,u=void 0===c||c,l=t.expiringSession,h=void 0===l||l,d=e.call(this)||this;return d.path="".concat(re,"/").concat(i,"/login"),d.method=ne.POST,d.params={expiring_session:!!h,services:o,include_logi:!0,include_extra_data:String(no),uikit_config:a,use_local_cache:u,app_id:n},d.requireAuth=!1,d}return t(n,e),n}(Ne),oo=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.logi=new Fr(t,"LOGI",n),i}return t(n,e),n}(Ae);!function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"}(Ur||(Ur={}));var so,ao=[fr,ro],co=function(){function e(e,t){var n=t.session,i=t.sdkState,r=t.dispatcher,o=t.logger,a=t.useFetchCompat,c=void 0!==a&&a,u=this;this._currentConnectionStateType=or.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new ur(e,{session:n,sdkState:i,dispatcher:r,logger:o,useFetchCompat:c}),this._session=n,this._logger=o,this._dispatcher=r,this._dispatcher.on((function(e){var t,n,i,r;if(e instanceof lr){var o=e.stateType;switch(u._currentConnectionStateType=o,o){case or.CONNECTED:u._resolveLazyCallQueue();break;case or.INITIALIZED:case or.INTERNAL_DISCONNECTED:case or.EXTERNAL_DISCONNECTED:case or.LOGOUT:u._rejectLazyCallQueue((null===(i=u._session)||void 0===i?void 0:i.hasSession)?g.connectionClosed:g.connectionRequired)}}else if(e instanceof hr)(null===(r=u._session.services)||void 0===r?void 0:r.includes(U.CHAT))||u._resolveLazyCallQueue(Ur.API);else if(e instanceof dr||e instanceof _r)u._rejectLazyCallQueue(g.connectionClosed);else if(e instanceof Ie){var a=e.request,c=e.deferred,l=e.error;try{for(var h=s(ao),d=h.next();!d.done;d=h.next()){if(a instanceof d.value)return void c.reject(l)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}u._lazyCallQueue.push({command:a,deferred:c})}}))}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===or.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===or.CONNECTING||this._currentConnectionStateType===or.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(e){var t,n=[],i=[];switch(e){case Ur.ALL:t=null;break;case Ur.WEBSOCKET:t=ar;break;case Ur.API:t=Ne}var r=!1;return this._lazyCallQueue.forEach((function(e){!t||e.command instanceof t||(r=!0),r?i.push(e):n.push(e)})),[n,i]},e.prototype._resolveLazyCallQueue=function(e){var t=this;void 0===e&&(e=Ur.ALL);var n=a(this._classifyLazyCallQueueByScope(e),2),i=n[0],s=n[1];this._lazyCallQueue=s,i.forEach((function(e){return r(t,void 0,void 0,(function(){var t,n,i,r,s;return o(this,(function(o){switch(o.label){case 0:t=e.command,n=e.deferred,(i=e.timeout)&&clearTimeout(i),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.send(t)];case 2:return r=o.sent(),n.resolve(r),[3,4];case 3:return s=o.sent(),n.reject(s),[3,4];case 4:return[2]}}))}))}))},e.prototype._rejectLazyCallQueue=function(e,t){var n=this;void 0===t&&(t=Ur.ALL);var i=a(this._classifyLazyCallQueueByScope(t),2),s=i[0],c=i[1];this._lazyCallQueue=c,s.forEach((function(t){return r(n,void 0,void 0,(function(){var n,i;return o(this,(function(r){return n=t.deferred,i=t.timeout,clearTimeout(i),n.reject(e),[2]}))}))}))},e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(r){switch(r.label){case 0:return e instanceof ar?this.isReady?(this._logger.debug("send websocket request",e),[4,this.commandRouter.send(e)]):[3,2]:[3,4];case 1:case 5:return[2,r.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",e),t=new Fe,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return i.timeout(e.requestId)}),1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),g.connectionRequired;case 3:case 7:return[3,9];case 4:return e instanceof Ne?this._session.hasSession?(this._logger.debug("send api request",e),[4,this.commandRouter.send(e)]):[3,6]:[3,8];case 6:if(this.isLazyCallActivated)return this._logger.debug("wait api request",e),t=new Fe,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return i.timeout(e.requestId)}),1e4)}),[2,t.promise];throw n=g.connectionRequired,this._logger.debug("fail api request",n),n;case 8:throw g.invalidCommand;case 9:return[2]}}))}))},e.prototype.forceSend=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._logger.debug("send forced request",e),e instanceof ar||e instanceof Ne?[4,this.commandRouter.send(e)]:[3,2];case 1:return[2,t.sent()];case 2:throw g.invalidCommand}}))}))},e.prototype.timeout=function(e){this._logger.debug("timeout request",e);var t=this._lazyCallQueue.findIndex((function(t){return t.command.requestId===e}));t>-1&&(this._lazyCallQueue[t].deferred.reject(g.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(e){this._logger.debug("cancel api request",e),this.commandRouter.cancel(e)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),uo="sendbird@devicetokens",lo=function(){function e(e){var t=e.type,n=e.token;this.type=t,this.token=n}return e.payloadify=function(e){return ee(te({type:e.type,token:e.token}))},e}(),ho=new WeakMap,_o=function(e){function n(t){var n=t.session,i=t.cacheContext,r=t.sdkState,o=t.dispatcher,s=t.requestQueue,a=t.logger,c=e.call(this)||this;return c._currentConnectionStateType=or.INITIALIZED,c._isRefreshingAuthToken=!1,c.currentUser=null,c.session=n,c._cacheContext=i,c._sdkState=r,c._dispatcher=o,c._requestQueue=s,c._logger=a,c._deviceTokens=[],c._dispatcher.on((function(e){var t;if(e instanceof lr){var n=e.stateType;c._currentConnectionStateType=n}else e instanceof ke&&c.handler&&(e.invalidateSessionToken&&(c.session.authToken=void 0),e.error&&e.error.isSessionExpiredError&&(c._logger.debug("session expired"),(null===(t=c.handler)||void 0===t?void 0:t.onSessionExpired)&&c.handler.onSessionExpired(),c.refresh()))})),c}return t(n,e),Object.defineProperty(n.prototype,"ekey",{get:function(){return ho.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(e,t){return this._deviceTokens.findIndex((function(n){return n.type===e&&n.token===t}))},n.prototype.hasDeviceToken=function(e,t){return this.indexOfDeviceToken(e,t)>=0},n.prototype.createRefreshWebsocketCommand=function(e,t){return new pr({authToken:e,expiringSession:!0,requestId:t})},n.prototype._refreshSessionKeyByWebSocket=function(e){return r(this,void 0,void 0,(function(){var t,n,i,r,s;return o(this,(function(o){switch(o.label){case 0:return t=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(t)];case 1:if(n=o.sent(),i=n.as(vr),r=i.newKey,s=i.error)throw s;return this.session.sessionKey=null!=r?r:this.session.sessionKey,[2]}}))}))},n.prototype._refreshSessionKeyByApi=function(e){return r(this,void 0,void 0,(function(){var t,n=this;return o(this,(function(i){switch(i.label){case 0:return t=new fr({userId:this._sdkState.userId,authToken:e,services:this.session.services,expiringSession:!0}),[4,Wr((function(e){return r(n,void 0,void 0,(function(){var n,i,r,s,a;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(t)];case 1:return n=o.sent(),i=n.as(Er),r=i.key,s=i.services,this.session.sessionKey=r,this.session.services=s,[3,3];case 2:if(a=o.sent(),!this._isSessionRelatedError(a))throw a;return e(a),[3,3];case 3:return[2]}}))}))}),3)];case 1:return i.sent(),[2]}}))}))},n.prototype._refreshSessionKey=function(e,t){return void 0===t&&(t=!0),r(this,void 0,void 0,(function(){var n,i,r;return o(this,(function(o){switch(o.label){case 0:if(this._currentConnectionStateType!==or.CONNECTED)return[3,10];o.label=1;case 1:return o.trys.push([1,3,,10]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return o.sent(),this.complete(),[2];case 3:return(n=o.sent())instanceof g&&n.isSessionTokenExpiredError&&t?[4,this._receiveNewAuthToken()]:[3,9];case 4:return(r=o.sent())?(this.session.authToken=r,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,6];case 5:return o.sent(),this.complete(),[3,8];case 6:return[4,this.clear()];case 7:o.sent(),o.label=8;case 8:return[2];case 9:return[3,10];case 10:return o.trys.push([10,12,,22]),[4,this._refreshSessionKeyByApi(e)];case 11:return o.sent(),this.complete(),[3,22];case 12:return(i=o.sent())instanceof g&&i.isSessionTokenExpiredError?t?[4,this._receiveNewAuthToken()]:[3,18]:[3,20];case 13:return(r=o.sent())?(this.session.authToken=r,[4,this._refreshSessionKeyByApi(this.session.authToken)]):[3,15];case 14:return o.sent(),this.complete(),[3,17];case 15:return[4,this.clear()];case 16:o.sent(),o.label=17;case 17:return[3,19];case 18:throw i;case 19:return[3,21];case 20:throw i;case 21:return[3,22];case 22:return[2]}}))}))},n.prototype._receiveNewAuthToken=function(){var e=this,t=new Fe;return Vr((function(){return r(e,void 0,void 0,(function(){var e,n,i,r,s,a=this;return o(this,(function(o){return this._isRefreshingAuthToken=!0,this.session.clear(),(null===(s=this.handler)||void 0===s?void 0:s.onSessionTokenRequired)?(e=null,n=function(){e&&(clearTimeout(e),e=null)},i=function(e){n(),a._isRefreshingAuthToken&&(a._isRefreshingAuthToken=!1,a.dispatch("refresh-authtoken"),t.resolve(e))},r=function(e){n(),a._isRefreshingAuthToken&&(a._isRefreshingAuthToken=!1,t.reject(e))},e=setTimeout((function(){return r()}),1e3*this._sdkState.sessionTokenRefreshTimeout),this.handler.onSessionTokenRequired(i,r)):t.resolve(null),[2]}))}))})),t.promise},n.prototype._isSessionRelatedError=function(e){return e instanceof g&&(e.isSessionExpiredError||e.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticateFeed=function(e,t){var n;return r(this,void 0,void 0,(function(){var i,r,s;return o(this,(function(o){switch(o.label){case 0:return this.session.authToken=t,i=new ro({appId:this._sdkState.appId,userId:e,services:[U.FEED],includeUIKitConfig:!!(null!==(n=this._sdkState.extensions)&&void 0!==n?n:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:!t||this.isSessionExpiring}),[4,this._requestQueue.commandRouter.send(i)];case 1:return r=o.sent(),(s=r.as(oo).logi).error?[3,3]:[4,this.login(s)];case 2:return o.sent(),s.userProfile.apply(),[3,4];case 3:throw s.error;case 4:return[2]}}))}))},n.prototype.login=function(e){var t;return r(this,void 0,void 0,(function(){var n,i,r,s,a,c,u,l;return o(this,(function(o){switch(o.label){case 0:return n=e.key,i=e.ekey,r=e.services,s=e.userProfile,a=e.deviceTokenLastDeletedAt,c=void 0===a?0:a,this.session.hasLessServiceScopeThan(r)&&(this.session.sessionKey=n,this.session.services=r),ho.set(this,i),this._deviceTokenCacheEnabled=null===(t=null==s?void 0:s.appInfo)||void 0===t?void 0:t.deviceTokenCache,u=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,u.get(uo)]:[3,5];case 1:return!(l=o.sent())||l.lastDeletedAt<c?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=c,[4,this.saveDeviceToken()]):[3,3];case 2:return o.sent(),[3,4];case 3:this._deviceTokens=l.tokens.map((function(e){return new lo(lo.payloadify(e))})),this._deviceTokenLastDeletedAt=l.lastDeletedAt,o.label=4;case 4:return[3,7];case 5:return[4,u.remove(uo)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},n.prototype.complete=function(){var e=this;this.dispatch("refresh"),this._dispatcher.dispatch(new hr),Vr((function(){return r(e,void 0,void 0,(function(){var e;return o(this,(function(t){return this._logger.debug("session refreshed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionRefreshed)&&this.handler.onSessionRefreshed(),[2]}))}))}))},n.prototype.error=function(e){var t=this;Vr((function(){return r(t,void 0,void 0,(function(){var t;return o(this,(function(n){return(null===(t=this.handler)||void 0===t?void 0:t.onSessionError)&&this.handler.onSessionError(e),[2]}))}))}))},n.prototype.close=function(){var e=this;this.dispatch("close"),this._dispatcher.dispatch(new _r),Vr((function(){return r(e,void 0,void 0,(function(){var e;return o(this,(function(t){return this._logger.debug("session closed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionClosed)&&this.handler.onSessionClosed(),[2]}))}))}))},n.prototype.refresh=function(){return r(this,void 0,void 0,(function(){var e,t;return o(this,(function(n){switch(n.label){case 0:if(!this.isSessionExpiring)return[3,10];if(this.session.isRefreshing)return[3,10];if(this.session.isRefreshing=!0,this.session.authToken)return[3,7];n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this._receiveNewAuthToken()];case 2:return(e=n.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=e,[3,5]):[3,3];case 3:return[4,this.clear()];case 4:return n.sent(),this.session.isRefreshing=!1,[2];case 5:return[3,7];case 6:throw n.sent(),t=g.sessionTokenRequestFailed,this._dispatcher.dispatch(new dr),this.error(t),this.session.isRefreshing=!1,t;case 7:return n.trys.push([7,9,,10]),[4,this._refreshSessionKey(this.session.authToken)];case 8:return n.sent(),this.session.isRefreshing=!1,[3,10];case 9:throw n.sent(),t=g.sessionTokenRefreshFailed,this._dispatcher.dispatch(new dr),this.error(t),this.session.isRefreshing=!1,t;case 10:return[2]}}))}))},n.prototype.setDeviceToken=function(e,t){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,t)<0)return this._deviceTokens.push(new lo({type:e,token:t})),!0;return!1},n.prototype.unsetDeviceToken=function(e,t){if(this._deviceTokenCacheEnabled){var n=this.indexOfDeviceToken(e,t);n>=0&&this._deviceTokens.splice(n,1)}},n.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(t){return t.type!==e})):[])},n.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},n.prototype.saveDeviceToken=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(uo,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),ho.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))},n}(X),fo=function(){function e(e,t){var n=t.sdkState,i=t.cacheContext,r=t.connectionHandlers,o=t.sessionManager,s=t.websocketClient,a=t.dispatcher,c=t.logger,u=t.disableWebSocketCloseEventHandling,l=void 0!==u&&u;this._disableWebSocketCloseEventHandling=!1,this._externalCalledWebSocketClose=!1,this._logger=c,this._disableWebSocketCloseEventHandling=l,this._context=new io(e,{sdkState:n,cacheContext:i,connectionHandlers:r,sessionManager:o,websocketClient:s,dispatcher:a,logger:c}),this._sdkState=n,this._sessionManager=o,this._websocketClient=s}return e.prototype._registerEventDispatcher=function(){var e=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh-authtoken",(function(){e.isConnected||(e._logger.debug("try reconnect by session token refresh"),e.reconnect())})).on("refresh",(function(){e.isConnecting||e.isConnected||(e._logger.debug("try reconnect by session key refresh"),e.reconnect())})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){"foreground"!==e._sdkState.appState||e._externalCalledWebSocketClose||e._sessionManager.isRefreshingAuthToken||(e._logger.debug("try reconnect by websocket connection closed"),e.reconnect())})))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===or.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var e=this._context.currentState;return e.type===or.CONNECTING||e.type===or.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return t=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,t.onConnect(this._context,e)];case 1:return n.sent(),this._registerEventDispatcher(),[2]}}))}))},e.prototype.reconnect=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{})];case 1:return t.sent(),[2]}}))}))},e.prototype.resetAndReconnect=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.background=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnect(this._context,{autoReconnect:!1})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnect=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:e,autoReconnect:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnectWebSocket(this._context)];case 1:return t.sent(),[2]}}))}))},e.prototype.logout=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context)];case 1:return t.sent(),[2]}}))}))},e}(),po=function(e){function n(t){var n,i,r,o,s=t.type,a=t.data,c=t.ts,u=void 0===c?Date.now():c,l=e.call(this,{type:s,data:a,ts:u})||this;return l.date=new Date(u),l.key="".concat((n=l.date,i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),"".concat(i).concat(r).concat(o)),"_").concat(s),l}return t(n,e),n}(xe),Eo=function(e){function n(t){var n=t.deviceId,i=t.statLogs,r=e.call(this)||this;return r.method=ne.POST,r.path="".concat(ve),r.params={device_id:n,log_entries:i.map((function(e){return xe.payloadify(e)}))},r}return t(n,e),n}(Ne),vo=function(e,t){var n,i;if(null!==e&&null!==t){var r=Object.keys(e),o=Object.keys(t),u=c([],a(new Set(c(c([],a(r),!1),a(o),!1))),!1),l={};try{for(var h=s(u),d=h.next();!d.done;d=h.next()){var _=d.value,f=typeof e[_],p=typeof t[_];"undefined"===f?l[_]=t[_]:"undefined"===p?l[_]=e[_]:f!==p?l[_]=t[_]:"object"===f&&e[_]&&t[_]?l[_]=vo(e[_],t[_]):l[_]=t[_]}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return l}return t};!function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"}(so||(so={}));var go,bo=function(e){function n(t){var n=t.cacheContext,i=t.requestQueue,r=t.dispatcher,o=t.baseLimit,s=void 0===o?100:o,a=t.maxLimit,c=void 0===a?1e3:a,u=t.minLimit,l=void 0===u?10:u,h=e.call(this)||this;return h.queue=[],h.enabledState=so.PENDING,h.isFlushing=!1,h.generation=1,h.lastFlushedAt=0,h._collectRequestStat=!0,h._collectFeatureLocalCacheStat=!0,h.deviceId=Q(),h.cacheContext=n,h.requestQueue=i,h.dispatcher=r,h.baseLimit=s,h.limit=s,h.maxLimit=c,h.minLimit=l,h}return t(n,e),Object.defineProperty(n.prototype,"isEnabled",{get:function(){return this.enabledState===so.ENABLED},enumerable:!1,configurable:!0}),n.prototype._arrangeStat=function(){var e=[];this._collectRequestStat&&e.push.apply(e,c([],a(this.queue.filter((function(e){return e.type===Se.API_RESULT||e.type===Se.WEBSOCKET_CONNECT}))),!1)),this._collectFeatureLocalCacheStat&&e.push.apply(e,c([],a(this.queue.filter((function(e){return e.type===Se.FEATURE_LOCALCACHE}))),!1)),this.queue=e},n.prototype._save=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.enabledState!==so.ENABLED?[3,2]:[4,this.cacheContext.preference.set(this.key,{deviceId:this.deviceId,statLogs:this.queue.map((function(e){return xe.payloadify(e)})),generation:this.generation++,lastFlushedAt:this.lastFlushedAt})];case 1:e.sent(),this.dispatch("save",c([],a(this.queue),!1)),e.label=2;case 2:return[2]}}))}))},n.prototype._flush=function(){return r(this,void 0,void 0,(function(){var e,t,n,i,r;return o(this,(function(o){switch(o.label){case 0:if(!this.isEnabled)return[3,10];if(this.isFlushing)return[3,10];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,5,9,10]),this._arrangeStat(),e=this.queue.filter((function(e){if(e instanceof po){var t=new Date,n=a([e.date.getFullYear(),t.getFullYear()],2),i=n[0],r=n[1];if(i<r)return!0;if(i===r){var o=a([e.date.getMonth(),t.getMonth()],2),s=o[0],c=o[1];if(s<c)return!0;if(s===c){var u=a([e.date.getDate(),t.getDate()],2);return u[0]<u[1]}}}return!1})),t=this.queue.filter((function(e){return!(e instanceof po)})),(n=c(c([],a(e),!1),a(t),!1).slice(0,Math.min(this.limit,this.maxLimit))).length>0?(i=new Eo({deviceId:this.deviceId,statLogs:n}),[4,this.requestQueue.send(i)]):[3,4];case 2:return o.sent(),this.dispatch("flush",n),this.queue=c(c([],a(e),!1),a(t),!1).slice(n.length),[4,this._save()];case 3:o.sent(),o.label=4;case 4:return this.limit=this.baseLimit,this.lastFlushedAt=Date.now(),[3,10];case 5:return(r=o.sent())instanceof g?r.code!==u.STAT_LOG_NOT_ALLOWED?[3,7]:[4,this.clear()]:[3,8];case 6:return o.sent(),this.enabledState=so.DISABLED,[3,8];case 7:r.code===u.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=so.COLLECT_ONLY),o.label=8;case 8:return this.limit=this.limit+20,[3,10];case 9:return this.isFlushing=!1,[7];case 10:return[2]}}))}))},n.prototype.init=function(e){return r(this,void 0,void 0,(function(){var t,n,i=this;return o(this,(function(r){switch(r.label){case 0:return this.key=e,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=r.sent())?(this.deviceId=t.deviceId,this.queue=t.statLogs.map((function(e){return new xe({type:e.stat_type,ts:e.ts,data:e.data})})),this.generation=t.generation,this.lastFlushedAt=t.lastFlushedAt,Date.now()-this.lastFlushedAt>=108e5&&this.queue.length>=this.minLimit?(n=Math.min(Math.floor(18e4*Math.random()),100),[4,Br(n)]):[3,4]):[3,4];case 2:return r.sent(),[4,this._flush()];case 3:r.sent(),r.label=4;case 4:return this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(e){if(e instanceof Oe){var t=e.statLog;i.put(t)}else if(e instanceof to){var n=e.request,r=e.features,o=e.options;i._collectRequestStat=n,i._collectFeatureLocalCacheStat=null==r?void 0:r.localCache,i._arrangeStat(),i._collectRequestStat||i._collectFeatureLocalCacheStat?i.enabledState=o.ingestion?so.ENABLED:so.COLLECT_ONLY:i.enabledState=so.DISABLED,i.isEnabled?i.queue.length>=i.limit&&i._flush():i.clear()}}))),[2]}}))}))},n.prototype.put=function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:return this.enabledState===so.DISABLED?[3,3]:(e instanceof po?this._collectFeatureLocalCacheStat&&(t=a(this.queue.filter((function(t){return t instanceof po&&t.key===e.key})),1),(n=t[0])?n.data=vo(n.data,e.data):this.queue.push(e)):this._collectRequestStat&&this.queue.push(e),[4,this._save()]);case 1:return i.sent(),this.queue.length>=this.limit?[4,this._flush()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},n.prototype.clear=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.queue=[],this.generation=1,[4,this._save()];case 1:return e.sent(),[2]}}))}))},n.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},n}(X);!function(e){e[e.NONE=0]="NONE",e[e.VERBOSE=1]="VERBOSE",e[e.DEBUG=2]="DEBUG",e[e.INFO=3]="INFO",e[e.WARN=4]="WARN",e[e.ERROR=5]="ERROR"}(go||(go={}));var mo,yo=function(){function e(){this.level=go.WARN}return e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=go.VERBOSE&&console.log.apply(console,c(["[verbose]"],a(e),!1))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=go.DEBUG&&console.log.apply(console,c(["[debug]"],a(e),!1))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=go.INFO&&console.log.apply(console,c(["[info]"],a(e),!1))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=go.WARN&&console.warn.apply(console,c(["[warn]"],a(e),!1))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=go.ERROR&&console.error.apply(console,c(["[error]"],a(e),!1))},e}(),wo={},To=function(){function e(e,t){var n,i,r,o,s,a,c,u,l,d;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!wo[e]){wo[e]=this;var _=null!==(n=t.options)&&void 0!==n?n:new R,f=this.sdkState={appId:t.appId,appVersion:null!==(i=t.appVersion)&&void 0!==i?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:null!==(r=t.apiHost)&&void 0!==r?r:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:null!==(o=t.websocketHost)&&void 0!==o?o:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new Zr,responseTimeout:_.websocketResponseTimeout},sessionTokenRefreshTimeout:_.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var p=this.logger=new yo;this.logger.level=null!==(s=t.logLevel)&&void 0!==s?s:go.WARN,this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var E=this.cacheContext=new x({encryption:t.encryption,store:t.store,localCacheEnabled:null!==(a=t.localCacheEnabled)&&void 0!==a&&a,localCacheConfig:null!==(c=t.localCacheConfig)&&void 0!==c?c:new M});this.debugMode=null!==(u=t.debugMode)&&void 0!==u&&u,this.maxSuperGroupChannelUnreadCount=h.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=_.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=_.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=_.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var v=this.dispatcher=new J,g=new W;this.requestQueue=new co(e,{session:g,sdkState:f,dispatcher:v,logger:p,useFetchCompat:t.useFetchCompat}),this.sessionManager=new _o({session:g,cacheContext:E,sdkState:f,dispatcher:v,requestQueue:this.requestQueue,logger:p}),this.connectionManager=new fo(e,{sdkState:f,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:v,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:null!==(l=t.disableWebSocketCloseEventHandling)&&void 0!==l&&l,logger:p}),this.statLogCollector=new bo({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:v}),this.appStateToggleEnabled=null===(d=t.appStateToggleEnabled)||void 0===d||d}return wo[e]}return e.of=function(e){if(wo[e])return wo[e];throw g.lostInstance},e.clear=function(e){wo[e]&&delete wo[e]},e.prototype.hasExtension=function(e){return this.sdkState.extensions&&this.sdkState.extensions[e]},e}(),So=function(){function e(){}return e.prototype.init=function(e,t){var n=t.sdkState,i=t.dispatcher,r=t.sessionManager,o=t.requestQueue,s=t.logger;t.onlineDetector;var a=t.cacheContext;this._iid=e,this._cacheContext=a,this._sdkState=n,this._dispatcher=i,this._sessionManager=r,this._requestQueue=o,this._logger=s},e}();!function(e){e.OPEN="open",e.CLOSED="closed"}(mo||(mo={}));var No,Ao="removed",Co=function(e){switch(e){case"open":return mo.OPEN;case"closed":return mo.CLOSED;default:return null}},ko=function(e){return!e||!!e.text&&w("string",e.text)},Oo=function(e){function i(t,n){var i,r,o,s,a,c,u,l=this;return(l=e.call(this,t)||this).pollId=0,l.id=0,l.text=null,l.voteCount=0,l.createdBy=null,l.createdAt=0,l.updatedAt=0,l._lastVotedAt=0,l.pollId=null!==(i=n.poll_id)&&void 0!==i?i:0,l.id=null!==(r=n.id)&&void 0!==r?r:0,l.text=null!==(o=n.text)&&void 0!==o?o:null,l.voteCount=null!==(s=n.vote_count)&&void 0!==s?s:0,l.createdBy=null!==(a=n.created_by)&&void 0!==a?a:null,l.createdAt=null!==(c=n.created_at)&&void 0!==c?c:0,l.updatedAt=null!==(u=n.updated_at)&&void 0!==u?u:0,l}return t(i,e),i.payloadify=function(t){return ee(te(n(n({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},i}(Sr),Io=function(e){function i(t,n){var i,r,o,s,a,c,u,l,h,d,_,f,p,E=this;return(E=e.call(this,t)||this).id=0,E.title=null,E.createdAt=0,E.updatedAt=0,E.closeAt=-1,E.status=mo.CLOSED,E.messageId=0,E.data=null,E.voterCount=-1,E.options=[],E.createdBy=null,E.allowUserSuggestion=!1,E.allowMultipleVotes=!1,E.votedPollOptionIds=[],E.id=null!==(i=n.id)&&void 0!==i?i:0,E.title=null!==(r=n.title)&&void 0!==r?r:null,E.createdAt=null!==(o=n.created_at)&&void 0!==o?o:0,E.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,E.closeAt=null!==(a=n.close_at)&&void 0!==a?a:-1,E.status=null!==(c=Co(n.status))&&void 0!==c?c:mo.CLOSED,E.messageId=null!==(u=n.message_id)&&void 0!==u?u:0,E.data=null!==(l=n.data)&&void 0!==l?l:null,E.voterCount=null!==(h=n.voter_count)&&void 0!==h?h:-1,E.options=n.options?n.options.map((function(e){return new Oo(E._iid,e)})):[],E.createdBy=null!==(d=n.created_by)&&void 0!==d?d:null,E.allowUserSuggestion=null!==(_=n.allow_user_suggestion)&&void 0!==_&&_,E.allowMultipleVotes=null!==(f=n.allow_multiple_votes)&&void 0!==f&&f,E.votedPollOptionIds=null!==(p=n.voted_option_ids)&&void 0!==p?p:[],E}return t(i,e),i.prototype._applyPollUpdatePayload=function(e){var t,n,i,r,o,s,a,c,u=this;this.title=null!==(t=e.title)&&void 0!==t?t:this.title,this.updatedAt=null!==(n=e.updated_at)&&void 0!==n?n:this.updatedAt,this.closeAt=null!==(i=e.close_at)&&void 0!==i?i:this.closeAt,this.status=null!==(r=Co(e.status))&&void 0!==r?r:this.status,this.data=null!==(o=e.data)&&void 0!==o?o:this.data,this.voterCount=null!==(s=e.voter_count)&&void 0!==s?s:this.voterCount,e.options&&(this.options=e.options.map((function(e){return new Oo(u._iid,e)})),this.votedPollOptionIds=e.options.filter((function(e){return e.vote_count>0})).map((function(e){return e.id}))),this.allowUserSuggestion=null!==(a=e.allow_user_suggestion)&&void 0!==a?a:this.allowUserSuggestion,this.allowMultipleVotes=null!==(c=e.allow_multiple_votes)&&void 0!==c?c:this.allowMultipleVotes},i.payloadify=function(t){return ee(te(n(n({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map((function(e){return Oo.payloadify(e)})),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},i.prototype.applyPollUpdateEvent=function(e){var t=e._payload.poll;return!(!t||this.id!==t.id||t.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(t),!0)},i.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var t=this.options,n=t.map((function(e){return e.id})),i=e._payload,r=Math.floor(i.ts/1e3);return i.updated_vote_counts.forEach((function(e){var i=n.indexOf(e.option_id);if(i>-1){var o=t[i];r>=o._lastVotedAt&&(o.voteCount=e.vote_count,o._lastVotedAt=r)}})),i.req_id&&i.voted_option_ids&&(this.votedPollOptionIds=i.voted_option_ids),"number"==typeof i.voter_count&&(this.voterCount=i.voter_count),!0},i.prototype.serialize=function(){return Dr(this)},i}(Sr);!function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"}(No||(No={}));var Ro=n({},No),Do=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===No.SYNC_MESSAGE_FILL||e===No.SYNC_MESSAGE_CHANGELOGS||e===No.SYNC_POLL_CHANGELOGS},Lo=function(e){function n(t){var n=t.messages,i=t.source,r=t.isWebSocketEventComing,o=void 0!==r&&r,s=e.call(this)||this;return s.messages=n,s.source=i,s.isWebSocketEventComing=o,s}return t(n,e),n}($),xo=function(e){function n(t){var n=t.messageIds,i=t.source,r=t.isWebSocketEventComing,o=void 0!==r&&r,s=e.call(this)||this;return s.messageIds=n,s.source=i,s.isWebSocketEventComing=o,s}return t(n,e),n}($),Uo=function(e){function n(t){var n=t.reqId,i=t.source,r=e.call(this)||this;return r.reqId=n,r.source=i,r}return t(n,e),n}($),Po=function(e){function n(t){var n=t.polls,i=t.source,r=e.call(this)||this;return r.polls=n,r.source=i,r}return t(n,e),n}($),Mo=function(e){function n(t){var n=t.event,i=t.source,r=e.call(this)||this;return r.event=n,r.source=i,r}return t(n,e),n}($),zo=function(e){function n(t){var n=t.event,i=t.source,r=e.call(this)||this;return r.event=n,r.source=i,r}return t(n,e),n}($),Fo=function(){function e(e,t){var n;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=e,this.limit=null!==(n=t.limit)&&void 0!==n?n:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return w("number",this.limit)&&this.limit>0},e}(),Ho=function(e){function n(t,n,i,r){var o=e.call(this,t,r)||this;return o.channelUrl=n,o.channelType=i,o}return t(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&w("string",this.channelUrl)&&T(z,this.channelType)},n}(Fo),Vo=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},qo=function(e){function n(t){var n=t.title,i=t.optionTexts,r=t.data,o=t.allowUserSuggestion,s=t.allowMultipleVotes,a=t.closeAt,c=e.call(this)||this;return c.method=ne.POST,c.path=fe,c.params={title:n,options:i,data:r,allow_user_suggestion:o,allow_multiple_votes:s,close_at:a},c}return t(n,e),n}(Ne),Go=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.poll=new Io(t,n),i}return t(n,e),n}(Ae),jo=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.pollId,o=e.call(this)||this;return o.method=ne.GET,o.path="".concat(fe,"/").concat(encodeURIComponent(r)),o.params={channel_url:n,channel_type:i},o}return t(n,e),n}(Ne),Ko=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.poll=new Io(t,n),i}return t(n,e),n}(Ae),Bo=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.pollId,o=t.pollOptionId,s=e.call(this)||this;return s.method=ne.GET,s.path="".concat(fe,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(o)),s.params={channel_url:n,channel_type:i},s}return t(n,e),n}(Ne),Zo=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.pollOption=new Oo(t,n),i}return t(n,e),n}(Ae),Wo=function(e){function n(t){var n=t.channelType,i=t.channelUrl,r=t.timestamp,o=t.token,s=e.call(this)||this;return s.method=ne.GET,s.path="".concat(be(n),"/").concat(encodeURIComponent(i),"/polls/changelogs"),s.params=ee({change_ts:r,token:o}),s}return t(n,e),n}(Ne),Qo=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.updatedPolls=n.updated.map((function(e){return function(e,t){return new Io(e,t)}(t,e)})),i.deletedPollIds=n.deleted.map((function(e){return e})),i.hasMore=n.has_more,i.nextToken=n.next,i}return t(n,e),n}(Ae),Yo={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},Xo=function(e){return w("string",e.title)&&(t=e.optionTexts,N("string",t)&&t.every((function(e){return""!==e.trim()})))&&ko(e.data)&&w("boolean",e.allowUserSuggestion,!0)&&w("boolean",e.allowMultipleVotes,!0)&&w("number",e.closeAt,!0);var t},Jo={channelUrl:"",channelType:z.BASE,pollId:0,pollOptionId:0},$o=function(e){return w("string",e.channelUrl)&&""!==e.channelUrl&&T(z,e.channelType)&&w("number",e.pollId)&&e.pollId>0&&w("number",e.pollOptionId)&&e.pollOptionId>0},es={channelUrl:"",channelType:z.BASE,pollId:0},ts=function(e){return w("string",e.channelUrl)&&""!==e.channelUrl&&T(z,e.channelType)&&w("number",e.pollId)},ns={},is=function(){function e(e,t){var n=t.sdkState,i=t.dispatcher,r=t.sessionManager,o=t.requestQueue,s=t.logger;this._iid=e,this._sdkState=n,this._sessionManager=r,this._requestQueue=o,this._dispatcher=i,this._logger=s,ns[e]=this}return e.of=function(e){return ns[e]},e.prototype.buildPollFromSerializedData=function(e){var t=Lr(e);return new Io(this._iid,Io.payloadify(t))},e.prototype.get=function(e){return r(this,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:return xr(ts(e)).throw(g.invalidParameters),t=new jo(n({},e)),[4,this._requestQueue.send(t)];case 1:return i=r.sent(),[2,i.as(Ko).poll]}}))}))},e.prototype.create=function(e){return r(this,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:return xr(Xo(e)).throw(g.invalidParameters),t=new qo(n({},e)),[4,this._requestQueue.send(t)];case 1:return i=r.sent(),[2,i.as(Go).poll]}}))}))},e.prototype.getOption=function(e){return r(this,void 0,void 0,(function(){var t,i;return o(this,(function(r){switch(r.label){case 0:return xr($o(e)).throw(g.invalidParameters),t=new Bo(n({},e)),[4,this._requestQueue.send(t)];case 1:return i=r.sent(),[2,i.as(Zo).pollOption]}}))}))},e.prototype.getPollChangeLogs=function(e,t,n,i){return void 0===i&&(i=No.SYNC_POLL_CHANGELOGS),r(this,void 0,void 0,(function(){var r,s,a,c,u,l,h;return o(this,(function(o){switch(o.label){case 0:return r=new Wo(te({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null})),[4,this._requestQueue.send(r)];case 1:return s=o.sent(),a=s.as(Qo),c=a.updatedPolls,u=a.deletedPollIds,l=a.hasMore,h=a.nextToken,c.length>0&&this._dispatcher.dispatch(new Po({polls:c,source:i})),[2,{updatedPolls:c,deletedPollIds:u,hasMore:l,token:h}]}}))}))},e}(),rs=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.token,o=t.limit,s=e.call(this)||this;return s.method=ne.GET,s.path=fe,s.params={channel_url:n,channel_type:i,token:r,limit:o},s}return t(n,e),n}(Ne),os=function(e){function n(t,n){var i,r=this;return(r=e.call(this,t,n)||this).polls=(null!==(i=n.polls)&&void 0!==i?i:[]).map((function(e){return new Io(t,e)})),r.token=n.next,r}return t(n,e),n}(Ae),ss=function(e){function i(t,n){return e.call(this,t,n.channelUrl,n.channelType,n)||this}return t(i,e),i.prototype.next=function(){return r(this,void 0,void 0,(function(){var e,t,i,r,s,a;return o(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=To.of(this._iid).requestQueue,t=new rs(n(n({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return i=o.sent(),r=i.as(os),s=r.polls,a=r.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}}))}))},i}(Ho),as=function(e){function n(t){var n=t.channelUrl,i=t.channelType,r=t.pollId,o=t.pollOptionId,s=t.token,a=t.limit,c=e.call(this)||this;return c.method=ne.GET,c.path="".concat(fe,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(o),"/voters"),c.params={channel_url:n,channel_type:i,token:s,limit:a},c}return t(n,e),n}(Ne),cs=function(e){function n(t,n){var i,r=this;return(r=e.call(this,t,n)||this).voters=(null!==(i=n.voters)&&void 0!==i?i:[]).map((function(e){return new Pr(t,e)})),r.token=n.next,r}return t(n,e),n}(Ae),us=function(e){function i(t,n){var i=e.call(this,t,n.channelUrl,n.channelType,n)||this;return i.pollId=n.pollId,i.pollOptionId=n.pollOptionId,i}return t(i,e),i.prototype._validate=function(){return e.prototype._validate.call(this)&&w("number",this.pollId)&&w("number",this.pollOptionId)},i.prototype.next=function(){return r(this,void 0,void 0,(function(){var e,t,i,r,s,a;return o(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=To.of(this._iid).requestQueue,t=new as(n(n({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return i=o.sent(),r=i.as(cs),s=r.voters,a=r.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw g.queryInProgress;case 4:return[3,6];case 5:throw g.invalidParameters;case 6:return[2]}}))}))},i}(Ho);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(8)))

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__1__;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

if (false) { var throwOnDirectAccess, ReactIs; } else {
  // By explicitly using `prop-types` you are opting into new production behavior.
  // http://fb.me/prop-types-in-prod
  module.exports = __webpack_require__(14)();
}


/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BROWSER_SUPPORT_MIME_TYPE_LIST; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DELIVERY_RECEIPT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return META_ARRAY_VOICE_DURATION_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return SCROLL_BUFFER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return VOICE_RECORDER_DEFAULT_MAX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return VOICE_RECORDER_DEFAULT_MIN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return VOICE_MESSAGE_FILE_NAME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return VOICE_MESSAGE_MIME_TYPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return META_ARRAY_MESSAGE_TYPE_KEY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return META_ARRAY_MESSAGE_TYPE_VALUE__VOICE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return VOICE_PLAYER_ROOT_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return VOICE_PLAYER_AUDIO_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return VOICE_RECORDER_AUDIO_BIT_RATE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return VOICE_RECORDER_CLICK_BUFFER_TIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return SLIDER_BUTTON_ICON_SIDE_LENGTH; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return VOICE_RECORDER_AUDIO_SAMPLE_RATE; });
const SCROLL_BUFFER = 10;

// voice message record
const VOICE_RECORDER_CLICK_BUFFER_TIME = 250;
const VOICE_RECORDER_DEFAULT_MIN = 1000; // 1 seconds
const VOICE_RECORDER_DEFAULT_MAX = 600000; // 10 minutes
const VOICE_RECORDER_AUDIO_BIT_RATE = 12000;
const VOICE_RECORDER_AUDIO_SAMPLE_RATE = 11025;
const BROWSER_SUPPORT_MIME_TYPE_LIST = ['audio/webm', 'audio/mp4', 'audio/mpeg', 'audio/ogg'];

/**
 * Append Audio element to the root
 * because I can't get the Audio element in the useEffect unmount scope
 */
const VOICE_PLAYER_ROOT_ID = 'sendbird-voice-player-provider-root';
const VOICE_PLAYER_AUDIO_ID = 'sendbird-global-audio-player-id';

// voice message file
const VOICE_MESSAGE_FILE_NAME = 'Voice_message.mp3';
const VOICE_MESSAGE_MIME_TYPE = 'audio/mp3;sbu_type=voice';

// meta array
const META_ARRAY_VOICE_DURATION_KEY = 'KEY_VOICE_MESSAGE_DURATION';
const META_ARRAY_MESSAGE_TYPE_KEY = 'KEY_INTERNAL_MESSAGE_TYPE';
const META_ARRAY_MESSAGE_TYPE_VALUE__VOICE = 'voice/mp3';

// delivery receipt in feature list
const DELIVERY_RECEIPT = 'delivery_receipt';

// file viewer slider
const SLIDER_BUTTON_ICON_SIDE_LENGTH = '32px';


//# sourceMappingURL=consts-397a92f1.js.map


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function checkDCE() {
  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */
  if (
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'
  ) {
    return;
  }
  if (false) {}
  try {
    // Verify that the code above has been dead code eliminated (DCE'd).
    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
  } catch (err) {
    // DevTools shouldn't crash React, no matter what.
    // We should still report in case we break this code.
    console.error(err);
  }
}

if (true) {
  // DCE check should happen before ReactDOM bundle executes so that
  // DevTools can report bad minification during injection.
  checkDCE();
  module.exports = __webpack_require__(10);
} else {}


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */

(function (global, factory) {
   true ? module.exports = factory() :
  undefined;
})(this, (function () { 'use strict';

  const {
    entries,
    setPrototypeOf,
    isFrozen,
    getPrototypeOf,
    getOwnPropertyDescriptor
  } = Object;
  let {
    freeze,
    seal,
    create
  } = Object; // eslint-disable-line import/no-mutable-exports

  let {
    apply,
    construct
  } = typeof Reflect !== 'undefined' && Reflect;

  if (!apply) {
    apply = function apply(fun, thisValue, args) {
      return fun.apply(thisValue, args);
    };
  }

  if (!freeze) {
    freeze = function freeze(x) {
      return x;
    };
  }

  if (!seal) {
    seal = function seal(x) {
      return x;
    };
  }

  if (!construct) {
    construct = function construct(Func, args) {
      return new Func(...args);
    };
  }

  const arrayForEach = unapply(Array.prototype.forEach);
  const arrayPop = unapply(Array.prototype.pop);
  const arrayPush = unapply(Array.prototype.push);
  const stringToLowerCase = unapply(String.prototype.toLowerCase);
  const stringToString = unapply(String.prototype.toString);
  const stringMatch = unapply(String.prototype.match);
  const stringReplace = unapply(String.prototype.replace);
  const stringIndexOf = unapply(String.prototype.indexOf);
  const stringTrim = unapply(String.prototype.trim);
  const regExpTest = unapply(RegExp.prototype.test);
  const typeErrorCreate = unconstruct(TypeError);
  function unapply(func) {
    return function (thisArg) {
      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        args[_key - 1] = arguments[_key];
      }

      return apply(func, thisArg, args);
    };
  }
  function unconstruct(func) {
    return function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      return construct(func, args);
    };
  }
  /* Add properties to a lookup table */

  function addToSet(set, array, transformCaseFunc) {
    var _transformCaseFunc;

    transformCaseFunc = (_transformCaseFunc = transformCaseFunc) !== null && _transformCaseFunc !== void 0 ? _transformCaseFunc : stringToLowerCase;

    if (setPrototypeOf) {
      // Make 'in' and truthy checks like Boolean(set.constructor)
      // independent of any properties defined on Object.prototype.
      // Prevent prototype setters from intercepting set as a this value.
      setPrototypeOf(set, null);
    }

    let l = array.length;

    while (l--) {
      let element = array[l];

      if (typeof element === 'string') {
        const lcElement = transformCaseFunc(element);

        if (lcElement !== element) {
          // Config presets (e.g. tags.js, attrs.js) are immutable.
          if (!isFrozen(array)) {
            array[l] = lcElement;
          }

          element = lcElement;
        }
      }

      set[element] = true;
    }

    return set;
  }
  /* Shallow clone an object */

  function clone(object) {
    const newObject = create(null);

    for (const [property, value] of entries(object)) {
      newObject[property] = value;
    }

    return newObject;
  }
  /* This method automatically checks if the prop is function
   * or getter and behaves accordingly. */

  function lookupGetter(object, prop) {
    while (object !== null) {
      const desc = getOwnPropertyDescriptor(object, prop);

      if (desc) {
        if (desc.get) {
          return unapply(desc.get);
        }

        if (typeof desc.value === 'function') {
          return unapply(desc.value);
        }
      }

      object = getPrototypeOf(object);
    }

    function fallbackValue(element) {
      console.warn('fallback value for', element);
      return null;
    }

    return fallbackValue;
  }

  const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']); // SVG

  const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);
  const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']); // List of SVG elements that are disallowed by default.
  // We still need to know them so that we can do namespace
  // checks properly in case one wants to add them to
  // allow-list.

  const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);
  const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']); // Similarly to SVG, we want to know all MathML elements,
  // even those that we disallow by default.

  const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);
  const text = freeze(['#text']);

  const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'xmlns', 'slot']);
  const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);
  const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);
  const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);

  const MUSTACHE_EXPR = seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode

  const ERB_EXPR = seal(/<%[\w\W]*|[\w\W]*%>/gm);
  const TMPLIT_EXPR = seal(/\${[\w\W]*}/gm);
  const DATA_ATTR = seal(/^data-[\-\w.\u00B7-\uFFFF]/); // eslint-disable-line no-useless-escape

  const ARIA_ATTR = seal(/^aria-[\-\w]+$/); // eslint-disable-line no-useless-escape

  const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i // eslint-disable-line no-useless-escape
  );
  const IS_SCRIPT_OR_DATA = seal(/^(?:\w+script|data):/i);
  const ATTR_WHITESPACE = seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g // eslint-disable-line no-control-regex
  );
  const DOCTYPE_NAME = seal(/^html$/i);

  var EXPRESSIONS = /*#__PURE__*/Object.freeze({
    __proto__: null,
    MUSTACHE_EXPR: MUSTACHE_EXPR,
    ERB_EXPR: ERB_EXPR,
    TMPLIT_EXPR: TMPLIT_EXPR,
    DATA_ATTR: DATA_ATTR,
    ARIA_ATTR: ARIA_ATTR,
    IS_ALLOWED_URI: IS_ALLOWED_URI,
    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,
    ATTR_WHITESPACE: ATTR_WHITESPACE,
    DOCTYPE_NAME: DOCTYPE_NAME
  });

  const getGlobal = () => typeof window === 'undefined' ? null : window;
  /**
   * Creates a no-op policy for internal use only.
   * Don't export this function outside this module!
   * @param {?TrustedTypePolicyFactory} trustedTypes The policy factory.
   * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).
   * @return {?TrustedTypePolicy} The policy created (or null, if Trusted Types
   * are not supported or creating the policy failed).
   */


  const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {
    if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {
      return null;
    } // Allow the callers to control the unique policy name
    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.
    // Policy creation with duplicate names throws in Trusted Types.


    let suffix = null;
    const ATTR_NAME = 'data-tt-policy-suffix';

    if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {
      suffix = purifyHostElement.getAttribute(ATTR_NAME);
    }

    const policyName = 'dompurify' + (suffix ? '#' + suffix : '');

    try {
      return trustedTypes.createPolicy(policyName, {
        createHTML(html) {
          return html;
        },

        createScriptURL(scriptUrl) {
          return scriptUrl;
        }

      });
    } catch (_) {
      // Policy creation failed (most likely another DOMPurify script has
      // already run). Skip creating the policy, as this will only cause errors
      // if TT are enforced.
      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');
      return null;
    }
  };

  function createDOMPurify() {
    let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();

    const DOMPurify = root => createDOMPurify(root);
    /**
     * Version label, exposed for easier checks
     * if DOMPurify is up to date or not
     */


    DOMPurify.version = '3.0.5';
    /**
     * Array of elements that DOMPurify removed during sanitation.
     * Empty if nothing was removed.
     */

    DOMPurify.removed = [];

    if (!window || !window.document || window.document.nodeType !== 9) {
      // Not running in a browser, provide a factory function
      // so that you can pass your own Window
      DOMPurify.isSupported = false;
      return DOMPurify;
    }

    const originalDocument = window.document;
    const currentScript = originalDocument.currentScript;
    let {
      document
    } = window;
    const {
      DocumentFragment,
      HTMLTemplateElement,
      Node,
      Element,
      NodeFilter,
      NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,
      HTMLFormElement,
      DOMParser,
      trustedTypes
    } = window;
    const ElementPrototype = Element.prototype;
    const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');
    const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');
    const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');
    const getParentNode = lookupGetter(ElementPrototype, 'parentNode'); // As per issue #47, the web-components registry is inherited by a
    // new document created via createHTMLDocument. As per the spec
    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)
    // a new empty registry is used when creating a template contents owner
    // document, so we use that as our parent document to ensure nothing
    // is inherited.

    if (typeof HTMLTemplateElement === 'function') {
      const template = document.createElement('template');

      if (template.content && template.content.ownerDocument) {
        document = template.content.ownerDocument;
      }
    }

    let trustedTypesPolicy;
    let emptyHTML = '';
    const {
      implementation,
      createNodeIterator,
      createDocumentFragment,
      getElementsByTagName
    } = document;
    const {
      importNode
    } = originalDocument;
    let hooks = {};
    /**
     * Expose whether this browser supports running the full DOMPurify.
     */

    DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;
    const {
      MUSTACHE_EXPR,
      ERB_EXPR,
      TMPLIT_EXPR,
      DATA_ATTR,
      ARIA_ATTR,
      IS_SCRIPT_OR_DATA,
      ATTR_WHITESPACE
    } = EXPRESSIONS;
    let {
      IS_ALLOWED_URI: IS_ALLOWED_URI$1
    } = EXPRESSIONS;
    /**
     * We consider the elements and attributes below to be safe. Ideally
     * don't add any new ones but feel free to remove unwanted ones.
     */

    /* allowed element names */

    let ALLOWED_TAGS = null;
    const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);
    /* Allowed attribute names */

    let ALLOWED_ATTR = null;
    const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);
    /*
     * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.
     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)
     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)
     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.
     */

    let CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {
      tagNameCheck: {
        writable: true,
        configurable: false,
        enumerable: true,
        value: null
      },
      attributeNameCheck: {
        writable: true,
        configurable: false,
        enumerable: true,
        value: null
      },
      allowCustomizedBuiltInElements: {
        writable: true,
        configurable: false,
        enumerable: true,
        value: false
      }
    }));
    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */

    let FORBID_TAGS = null;
    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */

    let FORBID_ATTR = null;
    /* Decide if ARIA attributes are okay */

    let ALLOW_ARIA_ATTR = true;
    /* Decide if custom data attributes are okay */

    let ALLOW_DATA_ATTR = true;
    /* Decide if unknown protocols are okay */

    let ALLOW_UNKNOWN_PROTOCOLS = false;
    /* Decide if self-closing tags in attributes are allowed.
     * Usually removed due to a mXSS issue in jQuery 3.0 */

    let ALLOW_SELF_CLOSE_IN_ATTR = true;
    /* Output should be safe for common template engines.
     * This means, DOMPurify removes data attributes, mustaches and ERB
     */

    let SAFE_FOR_TEMPLATES = false;
    /* Decide if document with <html>... should be returned */

    let WHOLE_DOCUMENT = false;
    /* Track whether config is already set on this instance of DOMPurify. */

    let SET_CONFIG = false;
    /* Decide if all elements (e.g. style, script) must be children of
     * document.body. By default, browsers might move them to document.head */

    let FORCE_BODY = false;
    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html
     * string (or a TrustedHTML object if Trusted Types are supported).
     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead
     */

    let RETURN_DOM = false;
    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html
     * string  (or a TrustedHTML object if Trusted Types are supported) */

    let RETURN_DOM_FRAGMENT = false;
    /* Try to return a Trusted Type object instead of a string, return a string in
     * case Trusted Types are not supported  */

    let RETURN_TRUSTED_TYPE = false;
    /* Output should be free from DOM clobbering attacks?
     * This sanitizes markups named with colliding, clobberable built-in DOM APIs.
     */

    let SANITIZE_DOM = true;
    /* Achieve full DOM Clobbering protection by isolating the namespace of named
     * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.
     *
     * HTML/DOM spec rules that enable DOM Clobbering:
     *   - Named Access on Window (7.3.3)
     *   - DOM Tree Accessors (3.1.5)
     *   - Form Element Parent-Child Relations (4.10.3)
     *   - Iframe srcdoc / Nested WindowProxies (4.8.5)
     *   - HTMLCollection (4.2.10.2)
     *
     * Namespace isolation is implemented by prefixing `id` and `name` attributes
     * with a constant string, i.e., `user-content-`
     */

    let SANITIZE_NAMED_PROPS = false;
    const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';
    /* Keep element content when removing element? */

    let KEEP_CONTENT = true;
    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead
     * of importing it into a new Document and returning a sanitized copy */

    let IN_PLACE = false;
    /* Allow usage of profiles like html, svg and mathMl */

    let USE_PROFILES = {};
    /* Tags to ignore content of when KEEP_CONTENT is true */

    let FORBID_CONTENTS = null;
    const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);
    /* Tags that are safe for data: URIs */

    let DATA_URI_TAGS = null;
    const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);
    /* Attributes safe for values like "javascript:" */

    let URI_SAFE_ATTRIBUTES = null;
    const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);
    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';
    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';
    const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';
    /* Document namespace */

    let NAMESPACE = HTML_NAMESPACE;
    let IS_EMPTY_INPUT = false;
    /* Allowed XHTML+XML namespaces */

    let ALLOWED_NAMESPACES = null;
    const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);
    /* Parsing of strict XHTML documents */

    let PARSER_MEDIA_TYPE;
    const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];
    const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';
    let transformCaseFunc;
    /* Keep a reference to config to pass to hooks */

    let CONFIG = null;
    /* Ideally, do not touch anything below this line */

    /* ______________________________________________ */

    const formElement = document.createElement('form');

    const isRegexOrFunction = function isRegexOrFunction(testValue) {
      return testValue instanceof RegExp || testValue instanceof Function;
    };
    /**
     * _parseConfig
     *
     * @param  {Object} cfg optional config literal
     */
    // eslint-disable-next-line complexity


    const _parseConfig = function _parseConfig(cfg) {
      if (CONFIG && CONFIG === cfg) {
        return;
      }
      /* Shield configuration object from tampering */


      if (!cfg || typeof cfg !== 'object') {
        cfg = {};
      }
      /* Shield configuration object from prototype pollution */


      cfg = clone(cfg);
      PARSER_MEDIA_TYPE = // eslint-disable-next-line unicorn/prefer-includes
      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE; // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.

      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;
      /* Set configuration parameters */

      ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;
      ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;
      ALLOWED_NAMESPACES = 'ALLOWED_NAMESPACES' in cfg ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;
      URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), // eslint-disable-line indent
      cfg.ADD_URI_SAFE_ATTR, // eslint-disable-line indent
      transformCaseFunc // eslint-disable-line indent
      ) // eslint-disable-line indent
      : DEFAULT_URI_SAFE_ATTRIBUTES;
      DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), // eslint-disable-line indent
      cfg.ADD_DATA_URI_TAGS, // eslint-disable-line indent
      transformCaseFunc // eslint-disable-line indent
      ) // eslint-disable-line indent
      : DEFAULT_DATA_URI_TAGS;
      FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;
      FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};
      FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};
      USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;
      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true

      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true

      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false

      ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true

      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false

      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false

      RETURN_DOM = cfg.RETURN_DOM || false; // Default false

      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false

      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false

      FORCE_BODY = cfg.FORCE_BODY || false; // Default false

      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true

      SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false

      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true

      IN_PLACE = cfg.IN_PLACE || false; // Default false

      IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;
      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;
      CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};

      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {
        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;
      }

      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {
        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;
      }

      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {
        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;
      }

      if (SAFE_FOR_TEMPLATES) {
        ALLOW_DATA_ATTR = false;
      }

      if (RETURN_DOM_FRAGMENT) {
        RETURN_DOM = true;
      }
      /* Parse profile info */


      if (USE_PROFILES) {
        ALLOWED_TAGS = addToSet({}, [...text]);
        ALLOWED_ATTR = [];

        if (USE_PROFILES.html === true) {
          addToSet(ALLOWED_TAGS, html$1);
          addToSet(ALLOWED_ATTR, html);
        }

        if (USE_PROFILES.svg === true) {
          addToSet(ALLOWED_TAGS, svg$1);
          addToSet(ALLOWED_ATTR, svg);
          addToSet(ALLOWED_ATTR, xml);
        }

        if (USE_PROFILES.svgFilters === true) {
          addToSet(ALLOWED_TAGS, svgFilters);
          addToSet(ALLOWED_ATTR, svg);
          addToSet(ALLOWED_ATTR, xml);
        }

        if (USE_PROFILES.mathMl === true) {
          addToSet(ALLOWED_TAGS, mathMl$1);
          addToSet(ALLOWED_ATTR, mathMl);
          addToSet(ALLOWED_ATTR, xml);
        }
      }
      /* Merge configuration parameters */


      if (cfg.ADD_TAGS) {
        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {
          ALLOWED_TAGS = clone(ALLOWED_TAGS);
        }

        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);
      }

      if (cfg.ADD_ATTR) {
        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {
          ALLOWED_ATTR = clone(ALLOWED_ATTR);
        }

        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);
      }

      if (cfg.ADD_URI_SAFE_ATTR) {
        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);
      }

      if (cfg.FORBID_CONTENTS) {
        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {
          FORBID_CONTENTS = clone(FORBID_CONTENTS);
        }

        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);
      }
      /* Add #text in case KEEP_CONTENT is set to true */


      if (KEEP_CONTENT) {
        ALLOWED_TAGS['#text'] = true;
      }
      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */


      if (WHOLE_DOCUMENT) {
        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);
      }
      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */


      if (ALLOWED_TAGS.table) {
        addToSet(ALLOWED_TAGS, ['tbody']);
        delete FORBID_TAGS.tbody;
      }

      if (cfg.TRUSTED_TYPES_POLICY) {
        if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {
          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');
        }

        if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {
          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');
        } // Overwrite existing TrustedTypes policy.


        trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY; // Sign local variables required by `sanitize`.

        emptyHTML = trustedTypesPolicy.createHTML('');
      } else {
        // Uninitialized policy, attempt to initialize the internal dompurify policy.
        if (trustedTypesPolicy === undefined) {
          trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);
        } // If creating the internal policy succeeded sign internal variables.


        if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {
          emptyHTML = trustedTypesPolicy.createHTML('');
        }
      } // Prevent further manipulation of configuration.
      // Not available in IE8, Safari 5, etc.


      if (freeze) {
        freeze(cfg);
      }

      CONFIG = cfg;
    };

    const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);
    const HTML_INTEGRATION_POINTS = addToSet({}, ['foreignobject', 'desc', 'title', 'annotation-xml']); // Certain elements are allowed in both SVG and HTML
    // namespace. We need to specify them explicitly
    // so that they don't get erroneously deleted from
    // HTML namespace.

    const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);
    /* Keep track of all possible SVG and MathML tags
     * so that we can perform the namespace checks
     * correctly. */

    const ALL_SVG_TAGS = addToSet({}, svg$1);
    addToSet(ALL_SVG_TAGS, svgFilters);
    addToSet(ALL_SVG_TAGS, svgDisallowed);
    const ALL_MATHML_TAGS = addToSet({}, mathMl$1);
    addToSet(ALL_MATHML_TAGS, mathMlDisallowed);
    /**
     *
     *
     * @param  {Element} element a DOM element whose namespace is being checked
     * @returns {boolean} Return false if the element has a
     *  namespace that a spec-compliant parser would never
     *  return. Return true otherwise.
     */

    const _checkValidNamespace = function _checkValidNamespace(element) {
      let parent = getParentNode(element); // In JSDOM, if we're inside shadow DOM, then parentNode
      // can be null. We just simulate parent in this case.

      if (!parent || !parent.tagName) {
        parent = {
          namespaceURI: NAMESPACE,
          tagName: 'template'
        };
      }

      const tagName = stringToLowerCase(element.tagName);
      const parentTagName = stringToLowerCase(parent.tagName);

      if (!ALLOWED_NAMESPACES[element.namespaceURI]) {
        return false;
      }

      if (element.namespaceURI === SVG_NAMESPACE) {
        // The only way to switch from HTML namespace to SVG
        // is via <svg>. If it happens via any other tag, then
        // it should be killed.
        if (parent.namespaceURI === HTML_NAMESPACE) {
          return tagName === 'svg';
        } // The only way to switch from MathML to SVG is via`
        // svg if parent is either <annotation-xml> or MathML
        // text integration points.


        if (parent.namespaceURI === MATHML_NAMESPACE) {
          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);
        } // We only allow elements that are defined in SVG
        // spec. All others are disallowed in SVG namespace.


        return Boolean(ALL_SVG_TAGS[tagName]);
      }

      if (element.namespaceURI === MATHML_NAMESPACE) {
        // The only way to switch from HTML namespace to MathML
        // is via <math>. If it happens via any other tag, then
        // it should be killed.
        if (parent.namespaceURI === HTML_NAMESPACE) {
          return tagName === 'math';
        } // The only way to switch from SVG to MathML is via
        // <math> and HTML integration points


        if (parent.namespaceURI === SVG_NAMESPACE) {
          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];
        } // We only allow elements that are defined in MathML
        // spec. All others are disallowed in MathML namespace.


        return Boolean(ALL_MATHML_TAGS[tagName]);
      }

      if (element.namespaceURI === HTML_NAMESPACE) {
        // The only way to switch from SVG to HTML is via
        // HTML integration points, and from MathML to HTML
        // is via MathML text integration points
        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {
          return false;
        }

        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {
          return false;
        } // We disallow tags that are specific for MathML
        // or SVG and should never appear in HTML namespace


        return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);
      } // For XHTML and XML documents that support custom namespaces


      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {
        return true;
      } // The code should never reach this place (this means
      // that the element somehow got namespace that is not
      // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).
      // Return false just in case.


      return false;
    };
    /**
     * _forceRemove
     *
     * @param  {Node} node a DOM node
     */


    const _forceRemove = function _forceRemove(node) {
      arrayPush(DOMPurify.removed, {
        element: node
      });

      try {
        // eslint-disable-next-line unicorn/prefer-dom-node-remove
        node.parentNode.removeChild(node);
      } catch (_) {
        node.remove();
      }
    };
    /**
     * _removeAttribute
     *
     * @param  {String} name an Attribute name
     * @param  {Node} node a DOM node
     */


    const _removeAttribute = function _removeAttribute(name, node) {
      try {
        arrayPush(DOMPurify.removed, {
          attribute: node.getAttributeNode(name),
          from: node
        });
      } catch (_) {
        arrayPush(DOMPurify.removed, {
          attribute: null,
          from: node
        });
      }

      node.removeAttribute(name); // We void attribute values for unremovable "is"" attributes

      if (name === 'is' && !ALLOWED_ATTR[name]) {
        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {
          try {
            _forceRemove(node);
          } catch (_) {}
        } else {
          try {
            node.setAttribute(name, '');
          } catch (_) {}
        }
      }
    };
    /**
     * _initDocument
     *
     * @param  {String} dirty a string of dirty markup
     * @return {Document} a DOM, filled with the dirty markup
     */


    const _initDocument = function _initDocument(dirty) {
      /* Create a HTML document */
      let doc;
      let leadingWhitespace;

      if (FORCE_BODY) {
        dirty = '<remove></remove>' + dirty;
      } else {
        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */
        const matches = stringMatch(dirty, /^[\r\n\t ]+/);
        leadingWhitespace = matches && matches[0];
      }

      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {
        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)
        dirty = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + dirty + '</body></html>';
      }

      const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;
      /*
       * Use the DOMParser API by default, fallback later if needs be
       * DOMParser not work for svg when has multiple root element.
       */

      if (NAMESPACE === HTML_NAMESPACE) {
        try {
          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);
        } catch (_) {}
      }
      /* Use createHTMLDocument in case DOMParser is not available */


      if (!doc || !doc.documentElement) {
        doc = implementation.createDocument(NAMESPACE, 'template', null);

        try {
          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;
        } catch (_) {// Syntax error if dirtyPayload is invalid xml
        }
      }

      const body = doc.body || doc.documentElement;

      if (dirty && leadingWhitespace) {
        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);
      }
      /* Work on whole document or just its body */


      if (NAMESPACE === HTML_NAMESPACE) {
        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];
      }

      return WHOLE_DOCUMENT ? doc.documentElement : body;
    };
    /**
     * _createIterator
     *
     * @param  {Document} root document/fragment to create iterator for
     * @return {Iterator} iterator instance
     */


    const _createIterator = function _createIterator(root) {
      return createNodeIterator.call(root.ownerDocument || root, root, // eslint-disable-next-line no-bitwise
      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);
    };
    /**
     * _isClobbered
     *
     * @param  {Node} elm element to check for clobbering attacks
     * @return {Boolean} true if clobbered, false if safe
     */


    const _isClobbered = function _isClobbered(elm) {
      return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');
    };
    /**
     * _isNode
     *
     * @param  {Node} obj object to check whether it's a DOM node
     * @return {Boolean} true is object is a DOM node
     */


    const _isNode = function _isNode(object) {
      return typeof Node === 'object' ? object instanceof Node : object && typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';
    };
    /**
     * _executeHook
     * Execute user configurable hooks
     *
     * @param  {String} entryPoint  Name of the hook's entry point
     * @param  {Node} currentNode node to work on with the hook
     * @param  {Object} data additional hook parameters
     */


    const _executeHook = function _executeHook(entryPoint, currentNode, data) {
      if (!hooks[entryPoint]) {
        return;
      }

      arrayForEach(hooks[entryPoint], hook => {
        hook.call(DOMPurify, currentNode, data, CONFIG);
      });
    };
    /**
     * _sanitizeElements
     *
     * @protect nodeName
     * @protect textContent
     * @protect removeChild
     *
     * @param   {Node} currentNode to check for permission to exist
     * @return  {Boolean} true if node was killed, false if left alive
     */


    const _sanitizeElements = function _sanitizeElements(currentNode) {
      let content;
      /* Execute a hook if present */

      _executeHook('beforeSanitizeElements', currentNode, null);
      /* Check if element is clobbered or can clobber */


      if (_isClobbered(currentNode)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Now let's check the element's type and name */


      const tagName = transformCaseFunc(currentNode.nodeName);
      /* Execute a hook if present */

      _executeHook('uponSanitizeElement', currentNode, {
        tagName,
        allowedTags: ALLOWED_TAGS
      });
      /* Detect mXSS attempts abusing namespace confusion */


      if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\w]/g, currentNode.innerHTML) && regExpTest(/<[/\w]/g, currentNode.textContent)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Remove element if anything forbids its presence */


      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {
        /* Check if we have a custom element to handle */
        if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {
          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) return false;
          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) return false;
        }
        /* Keep content except for bad-listed elements */


        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {
          const parentNode = getParentNode(currentNode) || currentNode.parentNode;
          const childNodes = getChildNodes(currentNode) || currentNode.childNodes;

          if (childNodes && parentNode) {
            const childCount = childNodes.length;

            for (let i = childCount - 1; i >= 0; --i) {
              parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));
            }
          }
        }

        _forceRemove(currentNode);

        return true;
      }
      /* Check whether element has a valid namespace */


      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Make sure that older browsers don't get fallback-tag mXSS */


      if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\/no(script|embed|frames)/i, currentNode.innerHTML)) {
        _forceRemove(currentNode);

        return true;
      }
      /* Sanitize element content to be template-safe */


      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {
        /* Get the element's text content */
        content = currentNode.textContent;
        content = stringReplace(content, MUSTACHE_EXPR, ' ');
        content = stringReplace(content, ERB_EXPR, ' ');
        content = stringReplace(content, TMPLIT_EXPR, ' ');

        if (currentNode.textContent !== content) {
          arrayPush(DOMPurify.removed, {
            element: currentNode.cloneNode()
          });
          currentNode.textContent = content;
        }
      }
      /* Execute a hook if present */


      _executeHook('afterSanitizeElements', currentNode, null);

      return false;
    };
    /**
     * _isValidAttribute
     *
     * @param  {string} lcTag Lowercase tag name of containing element.
     * @param  {string} lcName Lowercase attribute name.
     * @param  {string} value Attribute value.
     * @return {Boolean} Returns true if `value` is valid, otherwise false.
     */
    // eslint-disable-next-line complexity


    const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {
      /* Make sure attribute cannot clobber */
      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {
        return false;
      }
      /* Allow valid data-* attributes: At least one character after "-"
          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)
          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)
          We don't need to check the value; it's always URI safe. */


      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {
        if ( // First condition does a very basic check if a) it's basically a valid custom element tagname AND
        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck
        _basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || // Alternative, second condition checks if it's an `is`-attribute, AND
        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {
          return false;
        }
        /* Check value is safe. First, is attr inert? If so, is safe */

      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {
        return false;
      } else ;

      return true;
    };
    /**
     * _basicCustomElementCheck
     * checks if at least one dash is included in tagName, and it's not the first char
     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name
     * @param {string} tagName name of the tag of the node to sanitize
     */


    const _basicCustomElementTest = function _basicCustomElementTest(tagName) {
      return tagName.indexOf('-') > 0;
    };
    /**
     * _sanitizeAttributes
     *
     * @protect attributes
     * @protect nodeName
     * @protect removeAttribute
     * @protect setAttribute
     *
     * @param  {Node} currentNode to sanitize
     */


    const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {
      let attr;
      let value;
      let lcName;
      let l;
      /* Execute a hook if present */

      _executeHook('beforeSanitizeAttributes', currentNode, null);

      const {
        attributes
      } = currentNode;
      /* Check if we have attributes; if not we might have a text node */

      if (!attributes) {
        return;
      }

      const hookEvent = {
        attrName: '',
        attrValue: '',
        keepAttr: true,
        allowedAttributes: ALLOWED_ATTR
      };
      l = attributes.length;
      /* Go backwards over all attributes; safely remove bad ones */

      while (l--) {
        attr = attributes[l];
        const {
          name,
          namespaceURI
        } = attr;
        value = name === 'value' ? attr.value : stringTrim(attr.value);
        lcName = transformCaseFunc(name);
        /* Execute a hook if present */

        hookEvent.attrName = lcName;
        hookEvent.attrValue = value;
        hookEvent.keepAttr = true;
        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set

        _executeHook('uponSanitizeAttribute', currentNode, hookEvent);

        value = hookEvent.attrValue;
        /* Did the hooks approve of the attribute? */

        if (hookEvent.forceKeepAttr) {
          continue;
        }
        /* Remove attribute */


        _removeAttribute(name, currentNode);
        /* Did the hooks approve of the attribute? */


        if (!hookEvent.keepAttr) {
          continue;
        }
        /* Work around a security issue in jQuery 3.0 */


        if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\/>/i, value)) {
          _removeAttribute(name, currentNode);

          continue;
        }
        /* Sanitize attribute content to be template-safe */


        if (SAFE_FOR_TEMPLATES) {
          value = stringReplace(value, MUSTACHE_EXPR, ' ');
          value = stringReplace(value, ERB_EXPR, ' ');
          value = stringReplace(value, TMPLIT_EXPR, ' ');
        }
        /* Is `value` valid for this attribute? */


        const lcTag = transformCaseFunc(currentNode.nodeName);

        if (!_isValidAttribute(lcTag, lcName, value)) {
          continue;
        }
        /* Full DOM Clobbering protection via namespace isolation,
         * Prefix id and name attributes with `user-content-`
         */


        if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {
          // Remove the attribute with this value
          _removeAttribute(name, currentNode); // Prefix the value and later re-create the attribute with the sanitized value


          value = SANITIZE_NAMED_PROPS_PREFIX + value;
        }
        /* Handle attributes that require Trusted Types */


        if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {
          if (namespaceURI) ; else {
            switch (trustedTypes.getAttributeType(lcTag, lcName)) {
              case 'TrustedHTML':
                {
                  value = trustedTypesPolicy.createHTML(value);
                  break;
                }

              case 'TrustedScriptURL':
                {
                  value = trustedTypesPolicy.createScriptURL(value);
                  break;
                }
            }
          }
        }
        /* Handle invalid data-* attribute set by try-catching it */


        try {
          if (namespaceURI) {
            currentNode.setAttributeNS(namespaceURI, name, value);
          } else {
            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. "x-schema". */
            currentNode.setAttribute(name, value);
          }

          arrayPop(DOMPurify.removed);
        } catch (_) {}
      }
      /* Execute a hook if present */


      _executeHook('afterSanitizeAttributes', currentNode, null);
    };
    /**
     * _sanitizeShadowDOM
     *
     * @param  {DocumentFragment} fragment to iterate over recursively
     */


    const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {
      let shadowNode;

      const shadowIterator = _createIterator(fragment);
      /* Execute a hook if present */


      _executeHook('beforeSanitizeShadowDOM', fragment, null);

      while (shadowNode = shadowIterator.nextNode()) {
        /* Execute a hook if present */
        _executeHook('uponSanitizeShadowNode', shadowNode, null);
        /* Sanitize tags and elements */


        if (_sanitizeElements(shadowNode)) {
          continue;
        }
        /* Deep shadow DOM detected */


        if (shadowNode.content instanceof DocumentFragment) {
          _sanitizeShadowDOM(shadowNode.content);
        }
        /* Check attributes, sanitize if necessary */


        _sanitizeAttributes(shadowNode);
      }
      /* Execute a hook if present */


      _executeHook('afterSanitizeShadowDOM', fragment, null);
    };
    /**
     * Sanitize
     * Public method providing core sanitation functionality
     *
     * @param {String|Node} dirty string or DOM node
     * @param {Object} configuration object
     */
    // eslint-disable-next-line complexity


    DOMPurify.sanitize = function (dirty) {
      let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      let body;
      let importedNode;
      let currentNode;
      let returnNode;
      /* Make sure we have a string to sanitize.
        DO NOT return early, as this will return the wrong type if
        the user has requested a DOM object rather than a string */

      IS_EMPTY_INPUT = !dirty;

      if (IS_EMPTY_INPUT) {
        dirty = '<!-->';
      }
      /* Stringify, in case dirty is an object */


      if (typeof dirty !== 'string' && !_isNode(dirty)) {
        if (typeof dirty.toString === 'function') {
          dirty = dirty.toString();

          if (typeof dirty !== 'string') {
            throw typeErrorCreate('dirty is not a string, aborting');
          }
        } else {
          throw typeErrorCreate('toString is not a function');
        }
      }
      /* Return dirty HTML if DOMPurify cannot run */


      if (!DOMPurify.isSupported) {
        return dirty;
      }
      /* Assign config vars */


      if (!SET_CONFIG) {
        _parseConfig(cfg);
      }
      /* Clean up removed elements */


      DOMPurify.removed = [];
      /* Check if dirty is correctly typed for IN_PLACE */

      if (typeof dirty === 'string') {
        IN_PLACE = false;
      }

      if (IN_PLACE) {
        /* Do some early pre-sanitization to avoid unsafe root nodes */
        if (dirty.nodeName) {
          const tagName = transformCaseFunc(dirty.nodeName);

          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {
            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');
          }
        }
      } else if (dirty instanceof Node) {
        /* If dirty is a DOM element, append to an empty document to avoid
           elements being stripped by the parser */
        body = _initDocument('<!---->');
        importedNode = body.ownerDocument.importNode(dirty, true);

        if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {
          /* Node is already a body, use as is */
          body = importedNode;
        } else if (importedNode.nodeName === 'HTML') {
          body = importedNode;
        } else {
          // eslint-disable-next-line unicorn/prefer-dom-node-append
          body.appendChild(importedNode);
        }
      } else {
        /* Exit directly if we have nothing to do */
        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && // eslint-disable-next-line unicorn/prefer-includes
        dirty.indexOf('<') === -1) {
          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;
        }
        /* Initialize the document to work on */


        body = _initDocument(dirty);
        /* Check we have a DOM node from the data */

        if (!body) {
          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';
        }
      }
      /* Remove first element node (ours) if FORCE_BODY is set */


      if (body && FORCE_BODY) {
        _forceRemove(body.firstChild);
      }
      /* Get node iterator */


      const nodeIterator = _createIterator(IN_PLACE ? dirty : body);
      /* Now start iterating over the created document */


      while (currentNode = nodeIterator.nextNode()) {
        /* Sanitize tags and elements */
        if (_sanitizeElements(currentNode)) {
          continue;
        }
        /* Shadow DOM detected, sanitize it */


        if (currentNode.content instanceof DocumentFragment) {
          _sanitizeShadowDOM(currentNode.content);
        }
        /* Check attributes, sanitize if necessary */


        _sanitizeAttributes(currentNode);
      }
      /* If we sanitized `dirty` in-place, return it. */


      if (IN_PLACE) {
        return dirty;
      }
      /* Return sanitized string or DOM */


      if (RETURN_DOM) {
        if (RETURN_DOM_FRAGMENT) {
          returnNode = createDocumentFragment.call(body.ownerDocument);

          while (body.firstChild) {
            // eslint-disable-next-line unicorn/prefer-dom-node-append
            returnNode.appendChild(body.firstChild);
          }
        } else {
          returnNode = body;
        }

        if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {
          /*
            AdoptNode() is not used because internal state is not reset
            (e.g. the past names map of a HTMLFormElement), this is safe
            in theory but we would rather not risk another attack vector.
            The state that is cloned by importNode() is explicitly defined
            by the specs.
          */
          returnNode = importNode.call(originalDocument, returnNode, true);
        }

        return returnNode;
      }

      let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;
      /* Serialize doctype if allowed */

      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {
        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\n' + serializedHTML;
      }
      /* Sanitize final string template-safe */


      if (SAFE_FOR_TEMPLATES) {
        serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR, ' ');
        serializedHTML = stringReplace(serializedHTML, ERB_EXPR, ' ');
        serializedHTML = stringReplace(serializedHTML, TMPLIT_EXPR, ' ');
      }

      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;
    };
    /**
     * Public method to set the configuration once
     * setConfig
     *
     * @param {Object} cfg configuration object
     */


    DOMPurify.setConfig = function (cfg) {
      _parseConfig(cfg);

      SET_CONFIG = true;
    };
    /**
     * Public method to remove the configuration
     * clearConfig
     *
     */


    DOMPurify.clearConfig = function () {
      CONFIG = null;
      SET_CONFIG = false;
    };
    /**
     * Public method to check if an attribute value is valid.
     * Uses last set config, if any. Otherwise, uses config defaults.
     * isValidAttribute
     *
     * @param  {string} tag Tag name of containing element.
     * @param  {string} attr Attribute name.
     * @param  {string} value Attribute value.
     * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.
     */


    DOMPurify.isValidAttribute = function (tag, attr, value) {
      /* Initialize shared config vars if necessary. */
      if (!CONFIG) {
        _parseConfig({});
      }

      const lcTag = transformCaseFunc(tag);
      const lcName = transformCaseFunc(attr);
      return _isValidAttribute(lcTag, lcName, value);
    };
    /**
     * AddHook
     * Public method to add DOMPurify hooks
     *
     * @param {String} entryPoint entry point for the hook to add
     * @param {Function} hookFunction function to execute
     */


    DOMPurify.addHook = function (entryPoint, hookFunction) {
      if (typeof hookFunction !== 'function') {
        return;
      }

      hooks[entryPoint] = hooks[entryPoint] || [];
      arrayPush(hooks[entryPoint], hookFunction);
    };
    /**
     * RemoveHook
     * Public method to remove a DOMPurify hook at a given entryPoint
     * (pops it from the stack of hooks if more are present)
     *
     * @param {String} entryPoint entry point for the hook to remove
     * @return {Function} removed(popped) hook
     */


    DOMPurify.removeHook = function (entryPoint) {
      if (hooks[entryPoint]) {
        return arrayPop(hooks[entryPoint]);
      }
    };
    /**
     * RemoveHooks
     * Public method to remove all DOMPurify hooks at a given entryPoint
     *
     * @param  {String} entryPoint entry point for the hooks to remove
     */


    DOMPurify.removeHooks = function (entryPoint) {
      if (hooks[entryPoint]) {
        hooks[entryPoint] = [];
      }
    };
    /**
     * RemoveAllHooks
     * Public method to remove all DOMPurify hooks
     *
     */


    DOMPurify.removeAllHooks = function () {
      hooks = {};
    };

    return DOMPurify;
  }

  var purify = createDOMPurify();

  return purify;

}));
//# sourceMappingURL=purify.js.map


/***/ }),
/* 6 */,
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _typeof; });
function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}

/***/ }),
/* 8 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(18);


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
var aa=__webpack_require__(1),m=__webpack_require__(11),r=__webpack_require__(12);function y(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+"Capture",b)}
function ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}
var fa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,
ja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}
function na(a,b,c,d){if(null===b||"undefined"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});
["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});
["checked","multiple","muted","selected"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}
"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(oa,
pa);D[b]=new B(b,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});
D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});
function qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}
var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;
if("function"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E("react.element");ta=E("react.portal");ua=E("react.fragment");wa=E("react.strict_mode");xa=E("react.profiler");ya=E("react.provider");za=E("react.context");Aa=E("react.forward_ref");Ba=E("react.suspense");Ca=E("react.suspense_list");Da=E("react.memo");Ea=E("react.lazy");Fa=E("react.block");E("react.scope");Ga=E("react.opaque.id");Ha=E("react.debug_trace_mode");Ia=E("react.offscreen");Ja=E("react.legacy_hidden")}
var Ka="function"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||"object"!==typeof a)return null;a=Ka&&a[Ka]||a["@@iterator"];return"function"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\n( *(at )?)/);Ma=b&&b[1]||""}return"\n"+Ma+a}var Oa=!1;
function Pa(a,b){if(!a||Oa)return"";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&"string"===typeof k.stack){for(var e=k.stack.split("\n"),
f=d.stack.split("\n"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return"\n"+e[g].replace(" at new "," at ");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?Na(a):""}
function Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return""}}
function Ra(a){if(null==a)return null;if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case za:return(a.displayName||"Context")+".Consumer";case ya:return(a._context.displayName||"Context")+".Provider";case Aa:var b=a.render;b=b.displayName||b.name||"";
return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;default:return""}}function Ta(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}
function Ua(a){var b=Ta(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=
null;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ta(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}
function Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,"checked",b,!1)}
function ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?bb(a,b.type,c):b.hasOwnProperty("defaultValue")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}
function cb(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}
function bb(a,b,c){if("number"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function db(a){var b="";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}
function fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}
function gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:Sa(c)}}
function ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};
function lb(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?lb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}
var nb,ob=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||"innerHTML"in a)a.innerHTML=b;else{nb=nb||document.createElement("div");nb.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});
function pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}
var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,
floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(""+b).trim():b+"px"}
function tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=sb(c,b[c],d);"float"===c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});
function vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(y(62));}}
function wb(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;
function Bb(a){if(a=Cb(a)){if("function"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}
function Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}
function Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==
typeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}});window.addEventListener("test",Qb,Qb);window.removeEventListener("test",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}
function Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}
function bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===
c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}
function dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
function rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case "focusin":case "focusout":kc=null;break;case "dragenter":case "dragleave":lc=null;break;case "mouseover":case "mouseout":mc=null;break;case "pointerover":case "pointerout":nc.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":oc.delete(b.pointerId)}}
function tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}
function uc(a,b,c,d,e){switch(b){case "focusin":return kc=tc(kc,a,b,c,d,e),!0;case "dragenter":return lc=tc(lc,a,b,c,d,e),!0;case "mouseover":return mc=tc(mc,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}
function vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}
function xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}
function Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}
function Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}
function Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}
function Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};
fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}
var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart",
"lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e="on"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;
function Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;
F=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}
function Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}
function Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}
function $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}
function hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}
function yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;
function nd(){if(md)return md;var a,b=ld,c=b.length,d,e="value"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}
function rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&
(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}
var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if("movementX"in
a)return a.movementX;a!==yd&&(yd&&"mousemove"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",
Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",
119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}
var Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=od(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return"keypress"===a.type?od(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?od(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},
deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be=null;fa&&"documentMode"in document&&(be=document.documentMode);var ce=fa&&"TextEvent"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;
function ge(a,b){switch(a){case "keyup":return-1!==$d.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "focusout":return!0;default:return!1}}function he(a){a=a.detail;return"object"===typeof a&&"data"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case "compositionend":return he(b);case "keypress":if(32!==b.which)return null;fe=!0;return ee;case "textInput":return a=b.data,a===ee&&fe?null:a;default:return null}}
function ke(a,b){if(ie)return"compositionend"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case "compositionend":return de&&"ko"!==b.locale?null:b.data;default:return null}}
var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!le[a.type]:"textarea"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,"onChange");0<b.length&&(c=new td("onChange","change",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}
function ve(a,b){if("change"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;");ye="function"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if("value"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}
function Ce(a,b,c){"focusin"===a?(Ae(),pe=b,qe=c,pe.attachEvent("onpropertychange",Be)):"focusout"===a&&Ae()}function De(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return te(qe)}function Ee(a,b){if("click"===a)return te(b)}function Fe(a,b){if("input"===a||"change"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He="function"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;
function Je(a,b){if(He(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}
function Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}
function Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}
var Pe=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;
function Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(b=new td("onSelect","select",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}
Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea("onMouseEnter",["mouseout","mouseover"]);
ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));
da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));
function Ze(a,b,c){var d=a.type||"unknown-event";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}
function se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}
function G(a,b){var c=$e(b),d=a+"__bubble";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}
function df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;"selectionchange"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if("scroll"!==a)return;e|=2;f=d}var g=$e(f),h=a+"__"+(b?"capture":"bubble");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}
function af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||"touchstart"!==b&&"touchmove"!==b&&"wheel"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}
function jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];
a:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case "keypress":if(0===od(c))break a;case "keydown":case "keyup":k=Rd;break;case "focusin":x="focus";k=Fd;break;case "focusout":x="blur";k=Fd;break;case "beforeblur":case "afterblur":k=Fd;break;case "click":if(2===c.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":k=Bd;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":k=
Dd;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case "scroll":k=vd;break;case "wheel":k=Zd;break;case "copy":case "cut":case "paste":k=Jd;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":k=Td}var w=0!==(b&4),z=!w&&"scroll"===a,u=w?null!==h?h+"Capture":null:h;w=[];for(var t=d,q;null!==
t;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h="mouseover"===a||"pointerover"===a;k="mouseout"===a||"pointerout"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==
x&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v="onMouseLeave";u="onMouseEnter";t="mouse";if("pointerout"===a||"pointerover"===a)w=Td,v="onPointerLeave",u="onPointerEnter",t="pointer";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+"leave",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+"enter",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=
gf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if("select"===k||"input"===k&&"file"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&"input"===k.toLowerCase()&&("checkbox"===h.type||"radio"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);"focusout"===a&&(K=h._wrapperState)&&
K.controlled&&"number"===h.type&&bb(h,"number",h.value)}K=d?ue(d):window;switch(a){case "focusin":if(me(K)||"true"===K.contentEditable)Qe=K,Re=d,Se=null;break;case "focusout":Se=Re=Qe=null;break;case "mousedown":Te=!0;break;case "contextmenu":case "mouseup":case "dragend":Te=!1;Ue(g,c,e);break;case "selectionchange":if(Pe)break;case "keydown":case "keyup":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case "compositionstart":var L="onCompositionStart";break b;case "compositionend":L="onCompositionEnd";break b;
case "compositionupdate":L="onCompositionUpdate";break b}L=void 0}else ie?ge(a,c)&&(L="onCompositionEnd"):"keydown"===a&&229===c.keyCode&&(L="onCompositionStart");L&&(de&&"ko"!==c.locale&&(ie||"onCompositionStart"!==L?"onCompositionEnd"===L&&ie&&(Q=nd()):(kd=e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,"onBeforeInput"),0<d.length&&(e=new Ld("onBeforeInput",
"beforeinput",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+"Capture",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}
function hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}
function nf(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of="function"===typeof setTimeout?setTimeout:void 0,pf="function"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent="":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=""))}
function rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if("$"===c||"$!"===c||"$?"===c){if(0===b)return a;b--}else"/$"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;
function wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}
function $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;
function Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}
function If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||"Unknown",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}
var Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};
function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}
function jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}
function rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}
function vg(a,b){if(pg!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}
function yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}
function Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=
b;c.lastBaseUpdate=b}
function Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,
next:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if("function"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h="function"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===
f)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if("function"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;
function Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}
var Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=
b);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}
function Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;"object"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}
function Ng(a,b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}
function Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;"function"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||
(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);"function"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;
function Qg(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}
function Rg(a,b){if("textarea"!==a.type)throw Error(y(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b));}
function Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,
c):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=
Wg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if("string"===typeof b||"number"===typeof b)return b=Ug(""+b,a.mode,c),b.return=a,b;if("object"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,
a.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||
null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===
n.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if("function"!==typeof l)throw Error(y(150));h=l.call(h);if(null==
h)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&
u.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k="object"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l="object"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);
d=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=
Wg(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if("undefined"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||"Component"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);
function dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);
function ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||"$?"===c.data||"$!"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;
function mh(a,b){var c=nh(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}
function ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}
function rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if("/$"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else"$"!==c&&"$!"!==c&&"$?"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}
function sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}
function Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}
function Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return"function"===typeof b?b(a):b}
function Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,
eagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}
function Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}
function Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}
function Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=
e.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}
function Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}
function Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}
function Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}
function $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}
function di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}
function Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}
var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,
b,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;
wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c("r:"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c("r:"+(tf++).toString(36))},
void 0,null));return b}b="r:"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,
a]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,
a]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}
function ii(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}
function ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}
function mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if("hidden"===d.mode||"unstable-defer-without-hiding"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}
function oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}
function pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A="function"===typeof n||"function"===typeof g.getSnapshotBeforeUpdate;A||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&
"function"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?("function"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===
typeof g.componentDidMount&&(b.flags|=4)):("function"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;"object"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n="function"===typeof C||
"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?("function"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||"function"!==typeof g.UNSAFE_componentWillUpdate&&"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,
x,k),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),"function"===typeof g.componentDidUpdate&&(b.flags|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):("function"!==typeof g.componentDidUpdate||
h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}
function qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}
var si={dehydrated:null,retryLane:0};
function ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if("number"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},
b.memoizedState=si,b.lanes=33554432,a;c=vi({mode:"visible",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:
{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:"hidden",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}
function xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:"visible",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}
function wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:"hidden",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}
function zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}
function Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=
null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case "together":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}
function hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;
Bi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};
Di=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case "input":e=Ya(a,e);d=Ya(a,d);f=[];break;case "option":e=eb(a,e);d=eb(a,d);f=[];break;case "select":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case "textarea":e=gb(a,e);d=gb(a,d);f=[];break;default:"function"!==typeof e.onClick&&"function"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if("style"===
l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if("style"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]="");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||
(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else"dangerouslySetInnerHTML"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):"children"===l?"string"!==typeof k&&"number"!==typeof k||(f=f||[]).push(l,""+k):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(ca.hasOwnProperty(l)?(null!=k&&"onScroll"===l&&G("scroll",a),f||h===k||(f=[])):"object"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push("style",
c);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}
function Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===
b.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case "dialog":G("cancel",d);G("close",d);break;case "iframe":case "object":case "embed":G("load",d);break;case "video":case "audio":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case "source":G("error",d);break;case "img":case "image":case "link":G("error",d);G("load",d);break;case "details":G("toggle",d);break;case "input":Za(d,f);G("invalid",d);break;case "select":d._wrapperState=
{wasMultiple:!!f.multiple};G("invalid",d);break;case "textarea":hb(d,f),G("invalid",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],"children"===g?"string"===typeof e?d.textContent!==e&&(a=["children",e]):"number"===typeof e&&d.textContent!==""+e&&(a=["children",""+e]):ca.hasOwnProperty(g)&&null!=e&&"onScroll"===g&&G("scroll",d));switch(c){case "input":Va(d);cb(d,f,!0);break;case "textarea":Va(d);jb(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=
jf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?"script"===c?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),"select"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case "dialog":G("cancel",a);G("close",a);
e=d;break;case "iframe":case "object":case "embed":G("load",a);e=d;break;case "video":case "audio":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case "source":G("error",a);e=d;break;case "img":case "image":case "link":G("error",a);G("load",a);e=d;break;case "details":G("toggle",a);e=d;break;case "input":Za(a,d);e=Ya(a,d);G("invalid",a);break;case "option":e=eb(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G("invalid",a);break;case "textarea":hb(a,d);e=
gb(a,d);G("invalid",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];"style"===f?tb(a,k):"dangerouslySetInnerHTML"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):"children"===f?"string"===typeof k?("textarea"!==c||""!==k)&&pb(a,k):"number"===typeof k&&pb(a,""+k):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(ca.hasOwnProperty(f)?null!=k&&"onScroll"===f&&G("scroll",a):null!=k&&qa(a,f,k,g))}switch(c){case "input":Va(a);cb(a,d,!1);
break;case "textarea":Va(a);jb(a);break;case "option":null!=d.value&&a.setAttribute("value",""+Sa(d.value));break;case "select":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(y(166));
c=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=
4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);
null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,
f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&"hidden"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=
64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&"unstable-defer-without-hiding"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}
function Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}
function Mi(a,b){try{var c="",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e="\nError generating stack: "+f.message+"\n"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi="function"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}
function Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}var Ui="function"===typeof WeakSet?WeakSet:Set;
function Vi(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}
function Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,
b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));
return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}
function aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,"function"===typeof d.setProperty?d.setProperty("display","none","important"):d.display="none";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null;d.style.display=sb("display",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?"":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===
a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}
function bj(a,b){if(Mf&&"function"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if("function"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,
f)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}
function fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,""),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===
c.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}
function gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}
function hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}
function cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,
8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}
function ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;"input"===a&&"radio"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=
2){var g=f[e],h=f[e+1];"style"===g?tb(c,h):"dangerouslySetInnerHTML"===g?ob(c,h):"children"===g?pb(c,h):qa(c,g,h,b)}switch(a){case "input":ab(c,d);break;case "textarea":ib(c,d);break;case "select":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=
b.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}
function mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}
function Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}
function Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}
function Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),
c=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}
function Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=
a.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>
c?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}
function Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}
function Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}
function Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}
function Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&"object"===typeof k&&"function"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):
(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=
void 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==V&&(V=2);k=Mi(k,h);p=
g;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&("function"===typeof K.getDerivedStateFromError||null!==Q&&"function"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}
function Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}
function Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==
a.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}
function dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==
Cj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if("selectionStart"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;
break a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===
Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,"");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&("function"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==
J&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),"selectionStart"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===
g.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});"function"===typeof t.focus&&t.focus();for(t=
0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}"function"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=
Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&"function"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}
function ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}
function fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if("function"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=
null,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}
function Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if("function"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}
function Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;
ck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==
b?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if("object"===
typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);
a=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));
d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&
ph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,
c),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=
k.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,
f.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));
};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}
function hk(a){if("function"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}
function Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};
c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}
function Vg(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)ji(a)&&(g=1);else if("string"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if("object"===
typeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,""));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}
function Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}
function jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}
function kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}
function lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==
d&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}
function qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}
qk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}
function sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}
function tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if("function"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if("function"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};
gc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};
yb=function(a,b,c){switch(b){case "input":ab(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case "textarea":ib(a,c);break;case "select":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;
Hb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"};
var xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||
pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;
exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if("function"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};
exports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};
exports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version="17.0.2";


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/


/* eslint-disable no-unused-vars */
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line no-new-wrappers
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (err) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (getOwnPropertySymbols) {
			symbols = getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


if (true) {
  module.exports = __webpack_require__(13);
} else {}


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var f,g,h,k;if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}
if("undefined"===typeof window||"function"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if("undefined"!==typeof console){var z=
window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");"function"!==typeof z&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=
E};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=
x(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}
function K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;
function T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}
function V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if("function"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();"function"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;
exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};
exports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};
exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();"object"===typeof c&&null!==c?(c=c.delay,c="number"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};
exports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



var ReactPropTypesSecret = __webpack_require__(15);

function emptyFunction() {}
function emptyFunctionWithReset() {}
emptyFunctionWithReset.resetWarningCache = emptyFunction;

module.exports = function() {
  function shim(props, propName, componentName, location, propFullName, secret) {
    if (secret === ReactPropTypesSecret) {
      // It is still safe when called from React.
      return;
    }
    var err = new Error(
      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +
      'Use PropTypes.checkPropTypes() to call them. ' +
      'Read more at http://fb.me/use-check-prop-types'
    );
    err.name = 'Invariant Violation';
    throw err;
  };
  shim.isRequired = shim;
  function getShim() {
    return shim;
  };
  // Important!
  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.
  var ReactPropTypes = {
    array: shim,
    bigint: shim,
    bool: shim,
    func: shim,
    number: shim,
    object: shim,
    string: shim,
    symbol: shim,

    any: shim,
    arrayOf: getShim,
    element: shim,
    elementType: shim,
    instanceOf: getShim,
    node: shim,
    objectOf: getShim,
    oneOf: getShim,
    oneOfType: getShim,
    shape: getShim,
    exact: getShim,

    checkPropTypes: emptyFunctionWithReset,
    resetWarningCache: emptyFunction
  };

  ReactPropTypes.PropTypes = ReactPropTypes;

  return ReactPropTypes;
};


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';

module.exports = ReactPropTypesSecret;


/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "default", function() { return /* binding */ Component; });

// EXTERNAL MODULE: external {"root":"React","commonjs2":"react","commonjs":"react","amd":"react"}
var external_root_React_commonjs2_react_commonjs_react_amd_react_ = __webpack_require__(1);
var external_root_React_commonjs2_react_commonjs_react_amd_react_default = /*#__PURE__*/__webpack_require__.n(external_root_React_commonjs2_react_commonjs_react_amd_react_);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/_rollupPluginBabelHelpers-0f2ee8c1.js
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {
      _defineProperty(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty(obj, key, value) {
  key = _toPropertyKey(key);
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
function _toPrimitive(input, hint) {
  if (typeof input !== "object" || input === null) return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== undefined) {
    var res = prim.call(input, hint || "default");
    if (typeof res !== "object") return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}
function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return typeof key === "symbol" ? key : String(key);
}


//# sourceMappingURL=_rollupPluginBabelHelpers-0f2ee8c1.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/withSendbird.js



const SendbirdSdkContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({});

// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
const withSendbirdContext = (OriginalComponent, mapStoreToProps) => {
  const ContextAwareComponent = props => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdSdkContext.Consumer, null, context => {
    if (mapStoreToProps && typeof mapStoreToProps !== 'function') {
      // eslint-disable-next-line no-console
      console.warn('Second parameter to withSendbirdContext must be a pure function');
    }
    const mergedProps = mapStoreToProps && typeof mapStoreToProps === 'function' ? _objectSpread2(_objectSpread2({}, mapStoreToProps(context)), props) : _objectSpread2(_objectSpread2({}, context), props);
    // eslint-disable-next-line react/jsx-props-no-spreading
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OriginalComponent, mergedProps);
  });
  const componentName = OriginalComponent.displayName || OriginalComponent.name || 'Component';
  ContextAwareComponent.displayName = `SendbirdAware${componentName}`;
  return ContextAwareComponent;
};


//# sourceMappingURL=withSendbird.js.map

// CONCATENATED MODULE: ./node_modules/css-vars-ponyfill/dist/css-vars-ponyfill.esm.js
/*!
 * css-vars-ponyfill
 * v2.4.8
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function css_vars_ponyfill_esm_extends() {
    css_vars_ponyfill_esm_extends = Object.assign ? Object.assign.bind() : function(target) {
        for (var i = 1; i < arguments.length; i++) {
            var source = arguments[i];
            for (var key in source) {
                if (Object.prototype.hasOwnProperty.call(source, key)) {
                    target[key] = source[key];
                }
            }
        }
        return target;
    };
    return css_vars_ponyfill_esm_extends.apply(this, arguments);
}

/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */ function getUrls(urls) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var settings = {
        mimeType: options.mimeType || null,
        onBeforeSend: options.onBeforeSend || Function.prototype,
        onSuccess: options.onSuccess || Function.prototype,
        onError: options.onError || Function.prototype,
        onComplete: options.onComplete || Function.prototype
    };
    var urlArray = Array.isArray(urls) ? urls : [ urls ];
    var urlQueue = Array.apply(null, Array(urlArray.length)).map((function(x) {
        return null;
    }));
    function isValidCss(text) {
        var isString = typeof text === "string";
        var isHTML = isString && text.trim().charAt(0) === "<";
        return isString && !isHTML;
    }
    function onError(xhr, urlIndex) {
        settings.onError(xhr, urlArray[urlIndex], urlIndex);
    }
    function onSuccess(responseText, urlIndex) {
        var returnVal = settings.onSuccess(responseText, urlArray[urlIndex], urlIndex);
        responseText = returnVal === false ? "" : returnVal || responseText;
        urlQueue[urlIndex] = responseText;
        if (urlQueue.indexOf(null) === -1) {
            settings.onComplete(urlQueue);
        }
    }
    var parser = document.createElement("a");
    urlArray.forEach((function(url, i) {
        parser.setAttribute("href", url);
        parser.href = String(parser.href);
        var isIElte9 = Boolean(document.all && !window.atob);
        var isIElte9CORS = isIElte9 && parser.host.split(":")[0] !== location.host.split(":")[0];
        if (isIElte9CORS) {
            var isSameProtocol = parser.protocol === location.protocol;
            if (isSameProtocol) {
                var xdr = new XDomainRequest;
                xdr.open("GET", url);
                xdr.timeout = 0;
                xdr.onprogress = Function.prototype;
                xdr.ontimeout = Function.prototype;
                xdr.onload = function() {
                    var text = xdr.responseText;
                    if (isValidCss(text)) {
                        onSuccess(text, i);
                    } else {
                        onError(xdr, i);
                    }
                };
                xdr.onerror = function(err) {
                    onError(xdr, i);
                };
                setTimeout((function() {
                    xdr.send();
                }), 0);
            } else {
                console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(url, ")"));
                onError(null, i);
            }
        } else {
            var xhr = new XMLHttpRequest;
            xhr.open("GET", url);
            if (settings.mimeType && xhr.overrideMimeType) {
                xhr.overrideMimeType(settings.mimeType);
            }
            settings.onBeforeSend(xhr, url, i);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    var text = xhr.responseText;
                    if (xhr.status < 400 && isValidCss(text)) {
                        onSuccess(text, i);
                    } else if (xhr.status === 0 && isValidCss(text)) {
                        onSuccess(text, i);
                    } else {
                        onError(xhr, i);
                    }
                }
            };
            xhr.send();
        }
    }));
}

/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */ function getCssData(options) {
    var regex = {
        cssComments: /\/\*[\s\S]+?\*\//g,
        cssImports: /(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g
    };
    var settings = {
        rootElement: options.rootElement || document,
        include: options.include || 'style,link[rel="stylesheet"]',
        exclude: options.exclude || null,
        filter: options.filter || null,
        skipDisabled: options.skipDisabled !== false,
        useCSSOM: options.useCSSOM || false,
        onBeforeSend: options.onBeforeSend || Function.prototype,
        onSuccess: options.onSuccess || Function.prototype,
        onError: options.onError || Function.prototype,
        onComplete: options.onComplete || Function.prototype
    };
    var sourceNodes = Array.apply(null, settings.rootElement.querySelectorAll(settings.include)).filter((function(node) {
        return !matchesSelector(node, settings.exclude);
    }));
    var cssArray = Array.apply(null, Array(sourceNodes.length)).map((function(x) {
        return null;
    }));
    function handleComplete() {
        var isComplete = cssArray.indexOf(null) === -1;
        if (isComplete) {
            cssArray.reduce((function(skipIndices, value, i) {
                if (value === "") {
                    skipIndices.push(i);
                }
                return skipIndices;
            }), []).reverse().forEach((function(skipIndex) {
                return [ sourceNodes, cssArray ].forEach((function(arr) {
                    return arr.splice(skipIndex, 1);
                }));
            }));
            var cssText = cssArray.join("");
            settings.onComplete(cssText, cssArray, sourceNodes);
        }
    }
    function handleSuccess(cssText, cssIndex, node, sourceUrl) {
        var returnVal = settings.onSuccess(cssText, node, sourceUrl);
        cssText = returnVal !== undefined && Boolean(returnVal) === false ? "" : returnVal || cssText;
        resolveImports(cssText, node, sourceUrl, (function(resolvedCssText, errorData) {
            if (cssArray[cssIndex] === null) {
                errorData.forEach((function(data) {
                    return settings.onError(data.xhr, node, data.url);
                }));
                if (!settings.filter || settings.filter.test(resolvedCssText)) {
                    cssArray[cssIndex] = resolvedCssText;
                } else {
                    cssArray[cssIndex] = "";
                }
                handleComplete();
            }
        }));
    }
    function parseImportData(cssText, baseUrl) {
        var ignoreRules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
        var importData = {};
        importData.rules = (cssText.replace(regex.cssComments, "").match(regex.cssImports) || []).filter((function(rule) {
            return ignoreRules.indexOf(rule) === -1;
        }));
        importData.urls = importData.rules.map((function(rule) {
            return rule.replace(regex.cssImports, "$1");
        }));
        importData.absoluteUrls = importData.urls.map((function(url) {
            return getFullUrl$1(url, baseUrl);
        }));
        importData.absoluteRules = importData.rules.map((function(rule, i) {
            var oldUrl = importData.urls[i];
            var newUrl = getFullUrl$1(importData.absoluteUrls[i], baseUrl);
            return rule.replace(oldUrl, newUrl);
        }));
        return importData;
    }
    function resolveImports(cssText, node, baseUrl, callbackFn) {
        var __errorData = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];
        var __errorRules = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];
        var importData = parseImportData(cssText, baseUrl, __errorRules);
        if (importData.rules.length) {
            getUrls(importData.absoluteUrls, {
                onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {
                    settings.onBeforeSend(xhr, node, url);
                },
                onSuccess: function onSuccess(cssText, url, urlIndex) {
                    var returnVal = settings.onSuccess(cssText, node, url);
                    cssText = returnVal === false ? "" : returnVal || cssText;
                    var responseImportData = parseImportData(cssText, url, __errorRules);
                    responseImportData.rules.forEach((function(rule, i) {
                        cssText = cssText.replace(rule, responseImportData.absoluteRules[i]);
                    }));
                    return cssText;
                },
                onError: function onError(xhr, url, urlIndex) {
                    __errorData.push({
                        xhr: xhr,
                        url: url
                    });
                    __errorRules.push(importData.rules[urlIndex]);
                    resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
                },
                onComplete: function onComplete(responseArray) {
                    responseArray.forEach((function(importText, i) {
                        cssText = cssText.replace(importData.rules[i], importText);
                    }));
                    resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);
                }
            });
        } else {
            callbackFn(cssText, __errorData);
        }
    }
    if (sourceNodes.length) {
        sourceNodes.forEach((function(node, i) {
            var linkHref = node.getAttribute("href");
            var linkRel = node.getAttribute("rel");
            var isLink = node.nodeName.toLowerCase() === "link" && linkHref && linkRel && linkRel.toLowerCase().indexOf("stylesheet") !== -1;
            var isSkip = settings.skipDisabled === false ? false : node.disabled;
            var isStyle = node.nodeName.toLowerCase() === "style";
            if (isLink && !isSkip) {
                var isURIScheme = linkHref.indexOf("data:text/css") !== -1;
                if (isURIScheme) {
                    var cssText = decodeURIComponent(linkHref.substring(linkHref.indexOf(",") + 1));
                    if (settings.useCSSOM) {
                        cssText = Array.apply(null, node.sheet.cssRules).map((function(rule) {
                            return rule.cssText;
                        })).join("");
                    }
                    handleSuccess(cssText, i, node, location.href);
                } else {
                    getUrls(linkHref, {
                        mimeType: "text/css",
                        onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {
                            settings.onBeforeSend(xhr, node, url);
                        },
                        onSuccess: function onSuccess(cssText, url, urlIndex) {
                            var sourceUrl = getFullUrl$1(linkHref);
                            handleSuccess(cssText, i, node, sourceUrl);
                        },
                        onError: function onError(xhr, url, urlIndex) {
                            cssArray[i] = "";
                            settings.onError(xhr, node, url);
                            handleComplete();
                        }
                    });
                }
            } else if (isStyle && !isSkip) {
                var _cssText = node.textContent;
                if (settings.useCSSOM) {
                    _cssText = Array.apply(null, node.sheet.cssRules).map((function(rule) {
                        return rule.cssText;
                    })).join("");
                }
                handleSuccess(_cssText, i, node, location.href);
            } else {
                cssArray[i] = "";
                handleComplete();
            }
        }));
    } else {
        settings.onComplete("", []);
    }
}

function getFullUrl$1(url, base) {
    var d = document.implementation.createHTMLDocument("");
    var b = d.createElement("base");
    var a = d.createElement("a");
    d.head.appendChild(b);
    d.body.appendChild(a);
    b.href = base || document.baseURI || (document.querySelector("base") || {}).href || location.href;
    a.href = url;
    return a.href;
}

function matchesSelector(elm, selector) {
    var matches = elm.matches || elm.matchesSelector || elm.webkitMatchesSelector || elm.mozMatchesSelector || elm.msMatchesSelector || elm.oMatchesSelector;
    return matches.call(elm, selector);
}

var balancedMatch = balanced;

function balanced(a, b, str) {
    if (a instanceof RegExp) a = maybeMatch(a, str);
    if (b instanceof RegExp) b = maybeMatch(b, str);
    var r = range(a, b, str);
    return r && {
        start: r[0],
        end: r[1],
        pre: str.slice(0, r[0]),
        body: str.slice(r[0] + a.length, r[1]),
        post: str.slice(r[1] + b.length)
    };
}

function maybeMatch(reg, str) {
    var m = str.match(reg);
    return m ? m[0] : null;
}

balanced.range = range;

function range(a, b, str) {
    var begs, beg, left, right, result;
    var ai = str.indexOf(a);
    var bi = str.indexOf(b, ai + 1);
    var i = ai;
    if (ai >= 0 && bi > 0) {
        if (a === b) {
            return [ ai, bi ];
        }
        begs = [];
        left = str.length;
        while (i >= 0 && !result) {
            if (i == ai) {
                begs.push(i);
                ai = str.indexOf(a, i + 1);
            } else if (begs.length == 1) {
                result = [ begs.pop(), bi ];
            } else {
                beg = begs.pop();
                if (beg < left) {
                    left = beg;
                    right = bi;
                }
                bi = str.indexOf(b, i + 1);
            }
            i = ai < bi && ai >= 0 ? ai : bi;
        }
        if (begs.length) {
            result = [ left, right ];
        }
    }
    return result;
}

function parseCss(css) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var defaults = {
        preserveStatic: true,
        removeComments: false
    };
    var settings = css_vars_ponyfill_esm_extends({}, defaults, options);
    var errors = [];
    function error(msg) {
        throw new Error("CSS parse error: ".concat(msg));
    }
    function match(re) {
        var m = re.exec(css);
        if (m) {
            css = css.slice(m[0].length);
            return m;
        }
    }
    function open() {
        return match(/^{\s*/);
    }
    function close() {
        return match(/^}/);
    }
    function whitespace() {
        match(/^\s*/);
    }
    function comment() {
        whitespace();
        if (css[0] !== "/" || css[1] !== "*") {
            return;
        }
        var i = 2;
        while (css[i] && (css[i] !== "*" || css[i + 1] !== "/")) {
            i++;
        }
        if (!css[i]) {
            return error("end of comment is missing");
        }
        var str = css.slice(2, i);
        css = css.slice(i + 2);
        return {
            type: "comment",
            comment: str
        };
    }
    function comments() {
        var cmnts = [];
        var c;
        while (c = comment()) {
            cmnts.push(c);
        }
        return settings.removeComments ? [] : cmnts;
    }
    function selector() {
        whitespace();
        while (css[0] === "}") {
            error("extra closing bracket");
        }
        var m = match(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);
        if (m) {
            var _selector = m[0].trim();
            var selectorItems;
            var hasComment = /\/\*/.test(_selector);
            if (hasComment) {
                _selector = _selector.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, "");
            }
            var hasCommaInQuotes = /["']\w*,\w*["']/.test(_selector);
            if (hasCommaInQuotes) {
                _selector = _selector.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, (function(m) {
                    return m.replace(/,/g, "");
                }));
            }
            var hasMultipleSelectors = /,/.test(_selector);
            if (hasMultipleSelectors) {
                selectorItems = _selector.split(/\s*(?![^(]*\)),\s*/);
            } else {
                selectorItems = [ _selector ];
            }
            if (hasCommaInQuotes) {
                selectorItems = selectorItems.map((function(s) {
                    return s.replace(/\u200C/g, ",");
                }));
            }
            return selectorItems;
        }
    }
    function declaration() {
        if (css[0] === "@") {
            return at_rule();
        }
        match(/^([;\s]*)+/);
        var comment_regexp = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;
        var prop = match(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);
        if (!prop) {
            return;
        }
        prop = prop[0].trim();
        if (!match(/^:\s*/)) {
            return error("property missing ':'");
        }
        var val = match(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/);
        var ret = {
            type: "declaration",
            property: prop.replace(comment_regexp, ""),
            value: val ? val[0].replace(comment_regexp, "").trim() : ""
        };
        match(/^[;\s]*/);
        return ret;
    }
    function declarations() {
        if (!open()) {
            return error("missing '{'");
        }
        var d;
        var decls = comments();
        while (d = declaration()) {
            decls.push(d);
            decls = decls.concat(comments());
        }
        if (!close()) {
            return error("missing '}'");
        }
        return decls;
    }
    function keyframe() {
        whitespace();
        var vals = [];
        var m;
        while (m = match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/)) {
            vals.push(m[1]);
            match(/^,\s*/);
        }
        if (vals.length) {
            return {
                type: "keyframe",
                values: vals,
                declarations: declarations()
            };
        }
    }
    function at_keyframes() {
        var m = match(/^@([-\w]+)?keyframes\s*/);
        if (!m) {
            return;
        }
        var vendor = m[1];
        m = match(/^([-\w]+)\s*/);
        if (!m) {
            return error("@keyframes missing name");
        }
        var name = m[1];
        if (!open()) {
            return error("@keyframes missing '{'");
        }
        var frame;
        var frames = comments();
        while (frame = keyframe()) {
            frames.push(frame);
            frames = frames.concat(comments());
        }
        if (!close()) {
            return error("@keyframes missing '}'");
        }
        return {
            type: "keyframes",
            name: name,
            vendor: vendor,
            keyframes: frames
        };
    }
    function at_page() {
        var m = match(/^@page */);
        if (m) {
            var sel = selector() || [];
            return {
                type: "page",
                selectors: sel,
                declarations: declarations()
            };
        }
    }
    function at_page_margin_box() {
        var m = match(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);
        if (m) {
            var name = "".concat(m[1], "-").concat(m[2]) + (m[3] ? "-".concat(m[3]) : "");
            return {
                type: "page-margin-box",
                name: name,
                declarations: declarations()
            };
        }
    }
    function at_fontface() {
        var m = match(/^@font-face\s*/);
        if (m) {
            return {
                type: "font-face",
                declarations: declarations()
            };
        }
    }
    function at_supports() {
        var m = match(/^@supports *([^{]+)/);
        if (m) {
            return {
                type: "supports",
                supports: m[1].trim(),
                rules: rules()
            };
        }
    }
    function at_host() {
        var m = match(/^@host\s*/);
        if (m) {
            return {
                type: "host",
                rules: rules()
            };
        }
    }
    function at_media() {
        var m = match(/^@media([^{]+)*/);
        if (m) {
            return {
                type: "media",
                media: (m[1] || "").trim(),
                rules: rules()
            };
        }
    }
    function at_custom_m() {
        var m = match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);
        if (m) {
            return {
                type: "custom-media",
                name: m[1].trim(),
                media: m[2].trim()
            };
        }
    }
    function at_document() {
        var m = match(/^@([-\w]+)?document *([^{]+)/);
        if (m) {
            return {
                type: "document",
                document: m[2].trim(),
                vendor: m[1] ? m[1].trim() : null,
                rules: rules()
            };
        }
    }
    function at_x() {
        var m = match(/^@(import|charset|namespace)\s*([^;]+);/);
        if (m) {
            return {
                type: m[1],
                name: m[2].trim()
            };
        }
    }
    function at_rule() {
        whitespace();
        if (css[0] === "@") {
            var ret = at_x() || at_fontface() || at_media() || at_keyframes() || at_supports() || at_document() || at_custom_m() || at_host() || at_page() || at_page_margin_box();
            if (ret && !settings.preserveStatic) {
                var hasVarFunc = false;
                if (ret.declarations) {
                    hasVarFunc = ret.declarations.some((function(decl) {
                        return /var\(/.test(decl.value);
                    }));
                } else {
                    var arr = ret.keyframes || ret.rules || [];
                    hasVarFunc = arr.some((function(obj) {
                        return (obj.declarations || []).some((function(decl) {
                            return /var\(/.test(decl.value);
                        }));
                    }));
                }
                return hasVarFunc ? ret : {};
            }
            return ret;
        }
    }
    function rule() {
        if (!settings.preserveStatic) {
            var balancedMatch$1 = balancedMatch("{", "}", css);
            if (balancedMatch$1) {
                var hasVarDecl = /:(?:root|host)(?![.:#(])/.test(balancedMatch$1.pre) && /--\S*\s*:/.test(balancedMatch$1.body);
                var hasVarFunc = /var\(/.test(balancedMatch$1.body);
                if (!hasVarDecl && !hasVarFunc) {
                    css = css.slice(balancedMatch$1.end + 1);
                    return {};
                }
            }
        }
        var sel = selector() || [];
        var decls = settings.preserveStatic ? declarations() : declarations().filter((function(decl) {
            var hasVarDecl = sel.some((function(s) {
                return /:(?:root|host)(?![.:#(])/.test(s);
            })) && /^--\S/.test(decl.property);
            var hasVarFunc = /var\(/.test(decl.value);
            return hasVarDecl || hasVarFunc;
        }));
        if (!sel.length) {
            error("selector missing");
        }
        return {
            type: "rule",
            selectors: sel,
            declarations: decls
        };
    }
    function rules(core) {
        if (!core && !open()) {
            return error("missing '{'");
        }
        var node;
        var rules = comments();
        while (css.length && (core || css[0] !== "}") && (node = at_rule() || rule())) {
            if (node.type) {
                rules.push(node);
            }
            rules = rules.concat(comments());
        }
        if (!core && !close()) {
            return error("missing '}'");
        }
        return rules;
    }
    return {
        type: "stylesheet",
        stylesheet: {
            rules: rules(true),
            errors: errors
        }
    };
}

function parseVars(cssData) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var defaults = {
        parseHost: false,
        store: {},
        onWarning: function onWarning() {}
    };
    var settings = css_vars_ponyfill_esm_extends({}, defaults, options);
    var reVarDeclSelectors = new RegExp(":".concat(settings.parseHost ? "host" : "root", "$"));
    if (typeof cssData === "string") {
        cssData = parseCss(cssData, settings);
    }
    cssData.stylesheet.rules.forEach((function(rule) {
        if (rule.type !== "rule" || !rule.selectors.some((function(s) {
            return reVarDeclSelectors.test(s);
        }))) {
            return;
        }
        rule.declarations.forEach((function(decl, i) {
            var prop = decl.property;
            var value = decl.value;
            if (prop && prop.indexOf("--") === 0) {
                settings.store[prop] = value;
            }
        }));
    }));
    return settings.store;
}

function stringifyCss(tree) {
    var delim = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";
    var cb = arguments.length > 2 ? arguments[2] : undefined;
    var renderMethods = {
        charset: function charset(node) {
            return "@charset " + node.name + ";";
        },
        comment: function comment(node) {
            return node.comment.indexOf("__CSSVARSPONYFILL") === 0 ? "/*" + node.comment + "*/" : "";
        },
        "custom-media": function customMedia(node) {
            return "@custom-media " + node.name + " " + node.media + ";";
        },
        declaration: function declaration(node) {
            return node.property + ":" + node.value + ";";
        },
        document: function document(node) {
            return "@" + (node.vendor || "") + "document " + node.document + "{" + visit(node.rules) + "}";
        },
        "font-face": function fontFace(node) {
            return "@font-face" + "{" + visit(node.declarations) + "}";
        },
        host: function host(node) {
            return "@host" + "{" + visit(node.rules) + "}";
        },
        import: function _import(node) {
            return "@import " + node.name + ";";
        },
        keyframe: function keyframe(node) {
            return node.values.join(",") + "{" + visit(node.declarations) + "}";
        },
        keyframes: function keyframes(node) {
            return "@" + (node.vendor || "") + "keyframes " + node.name + "{" + visit(node.keyframes) + "}";
        },
        media: function media(node) {
            return "@media " + node.media + "{" + visit(node.rules) + "}";
        },
        namespace: function namespace(node) {
            return "@namespace " + node.name + ";";
        },
        page: function page(node) {
            return "@page " + (node.selectors.length ? node.selectors.join(", ") : "") + "{" + visit(node.declarations) + "}";
        },
        "page-margin-box": function pageMarginBox(node) {
            return "@" + node.name + "{" + visit(node.declarations) + "}";
        },
        rule: function rule(node) {
            var decls = node.declarations;
            if (decls.length) {
                return node.selectors.join(",") + "{" + visit(decls) + "}";
            }
        },
        supports: function supports(node) {
            return "@supports " + node.supports + "{" + visit(node.rules) + "}";
        }
    };
    function visit(nodes) {
        var buf = "";
        for (var i = 0; i < nodes.length; i++) {
            var n = nodes[i];
            if (cb) {
                cb(n);
            }
            var txt = renderMethods[n.type](n);
            if (txt) {
                buf += txt;
                if (txt.length && n.selectors) {
                    buf += delim;
                }
            }
        }
        return buf;
    }
    return visit(tree.stylesheet.rules);
}

function walkCss(node, fn) {
    node.rules.forEach((function(rule) {
        if (rule.rules) {
            walkCss(rule, fn);
            return;
        }
        if (rule.keyframes) {
            rule.keyframes.forEach((function(keyframe) {
                if (keyframe.type === "keyframe") {
                    fn(keyframe.declarations, rule);
                }
            }));
            return;
        }
        if (!rule.declarations) {
            return;
        }
        fn(rule.declarations, node);
    }));
}

var VAR_PROP_IDENTIFIER = "--";

var VAR_FUNC_IDENTIFIER = "var";

function transformCss(cssData) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var defaults = {
        preserveStatic: true,
        preserveVars: false,
        variables: {},
        onWarning: function onWarning() {}
    };
    var settings = css_vars_ponyfill_esm_extends({}, defaults, options);
    if (typeof cssData === "string") {
        cssData = parseCss(cssData, settings);
    }
    walkCss(cssData.stylesheet, (function(declarations, node) {
        for (var i = 0; i < declarations.length; i++) {
            var decl = declarations[i];
            var type = decl.type;
            var prop = decl.property;
            var value = decl.value;
            if (type !== "declaration") {
                continue;
            }
            if (!settings.preserveVars && prop && prop.indexOf(VAR_PROP_IDENTIFIER) === 0) {
                declarations.splice(i, 1);
                i--;
                continue;
            }
            if (value.indexOf(VAR_FUNC_IDENTIFIER + "(") !== -1) {
                var resolvedValue = resolveValue(value, settings);
                if (resolvedValue !== decl.value) {
                    resolvedValue = fixNestedCalc(resolvedValue);
                    if (!settings.preserveVars) {
                        decl.value = resolvedValue;
                    } else {
                        declarations.splice(i, 0, {
                            type: type,
                            property: prop,
                            value: resolvedValue
                        });
                        i++;
                    }
                }
            }
        }
    }));
    return stringifyCss(cssData);
}

function fixNestedCalc(value) {
    var reCalcVal = /calc\(([^)]+)\)/g;
    (value.match(reCalcVal) || []).forEach((function(match) {
        var newVal = "calc".concat(match.split("calc").join(""));
        value = value.replace(match, newVal);
    }));
    return value;
}

function resolveValue(value) {
    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var __recursiveFallback = arguments.length > 2 ? arguments[2] : undefined;
    if (value.indexOf("var(") === -1) {
        return value;
    }
    var valueData = balancedMatch("(", ")", value);
    function resolveFunc(value) {
        var name = value.split(",")[0].replace(/[\s\n\t]/g, "");
        var fallback = (value.match(/(?:\s*,\s*){1}(.*)?/) || [])[1];
        var match = Object.prototype.hasOwnProperty.call(settings.variables, name) ? String(settings.variables[name]) : undefined;
        var replacement = match || (fallback ? String(fallback) : undefined);
        var unresolvedFallback = __recursiveFallback || value;
        if (!match) {
            settings.onWarning('variable "'.concat(name, '" is undefined'));
        }
        if (replacement && replacement !== "undefined" && replacement.length > 0) {
            return resolveValue(replacement, settings, unresolvedFallback);
        } else {
            return "var(".concat(unresolvedFallback, ")");
        }
    }
    if (!valueData) {
        if (value.indexOf("var(") !== -1) {
            settings.onWarning('missing closing ")" in the value "'.concat(value, '"'));
        }
        return value;
    } else if (valueData.pre.slice(-3) === "var") {
        var isEmptyVarFunc = valueData.body.trim().length === 0;
        if (isEmptyVarFunc) {
            settings.onWarning("var() must contain a non-whitespace string");
            return value;
        } else {
            return valueData.pre.slice(0, -3) + resolveFunc(valueData.body) + resolveValue(valueData.post, settings);
        }
    } else {
        return valueData.pre + "(".concat(resolveValue(valueData.body, settings), ")") + resolveValue(valueData.post, settings);
    }
}

var isBrowser = typeof window !== "undefined";

var isNativeSupport = isBrowser && window.CSS && window.CSS.supports && window.CSS.supports("(--a: 0)");

var counters = {
    group: 0,
    job: 0
};

var defaults = {
    rootElement: isBrowser ? document : null,
    shadowDOM: false,
    include: "style,link[rel=stylesheet]",
    exclude: "",
    variables: {},
    onlyLegacy: true,
    preserveStatic: true,
    preserveVars: false,
    silent: false,
    updateDOM: true,
    updateURLs: true,
    watch: null,
    onBeforeSend: function onBeforeSend() {},
    onError: function onError() {},
    onWarning: function onWarning() {},
    onSuccess: function onSuccess() {},
    onComplete: function onComplete() {},
    onFinally: function onFinally() {}
};

var css_vars_ponyfill_esm_regex = {
    cssComments: /\/\*[\s\S]+?\*\//g,
    cssKeyframes: /@(?:-\w*-)?keyframes/,
    cssMediaQueries: /@media[^{]+\{([\s\S]+?})\s*}/g,
    cssUrls: /url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,
    cssVarDeclRules: /(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,
    cssVarDecls: /(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,
    cssVarFunc: /var\(\s*--[\w-]/,
    cssVars: /(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/
};

var variableStore = {
    dom: {},
    job: {},
    user: {}
};

var cssVarsIsRunning = false;

var cssVarsObserver = null;

var cssVarsSrcNodeCount = 0;

var debounceTimer = null;

var isShadowDOMReady = false;

/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */ function cssVars() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var msgPrefix = "cssVars(): ";
    var settings = css_vars_ponyfill_esm_extends({}, defaults, options);
    function handleError(message, sourceNode, xhr, url) {
        if (!settings.silent && window.console) {
            console.error("".concat(msgPrefix).concat(message, "\n"), sourceNode);
        }
        settings.onError(message, sourceNode, xhr, url);
    }
    function handleWarning(message) {
        if (!settings.silent && window.console) {
            console.warn("".concat(msgPrefix).concat(message));
        }
        settings.onWarning(message);
    }
    function handleFinally(hasChanged) {
        settings.onFinally(Boolean(hasChanged), isNativeSupport, getTimeStamp() - settings.__benchmark);
    }
    if (!isBrowser) {
        return;
    }
    if (settings.watch) {
        settings.watch = defaults.watch;
        addMutationObserver(settings);
        cssVars(settings);
        return;
    } else if (settings.watch === false && cssVarsObserver) {
        cssVarsObserver.disconnect();
        cssVarsObserver = null;
    }
    if (!settings.__benchmark) {
        if (cssVarsIsRunning === settings.rootElement) {
            cssVarsDebounced(options);
            return;
        }
        var srcNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));
        settings.__benchmark = getTimeStamp();
        settings.exclude = [ cssVarsObserver ? '[data-cssvars]:not([data-cssvars=""])' : '[data-cssvars="out"]', "link[disabled]:not([data-cssvars])", settings.exclude ].filter((function(selector) {
            return selector;
        })).join(",");
        settings.variables = fixVarNames(settings.variables);
        srcNodes.forEach((function(srcNode) {
            var hasStyleCache = srcNode.nodeName.toLowerCase() === "style" && srcNode.__cssVars.text;
            var hasStyleChanged = hasStyleCache && srcNode.textContent !== srcNode.__cssVars.text;
            if (hasStyleCache && hasStyleChanged) {
                srcNode.sheet && (srcNode.sheet.disabled = false);
                srcNode.setAttribute("data-cssvars", "");
            }
        }));
        if (!cssVarsObserver) {
            var outNodes = [].slice.call(settings.rootElement.querySelectorAll('[data-cssvars="out"]'));
            outNodes.forEach((function(outNode) {
                var dataGroup = outNode.getAttribute("data-cssvars-group");
                var srcNode = dataGroup ? settings.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(dataGroup, '"]')) : null;
                if (!srcNode) {
                    outNode.parentNode.removeChild(outNode);
                }
            }));
            if (cssVarsSrcNodeCount && srcNodes.length < cssVarsSrcNodeCount) {
                cssVarsSrcNodeCount = srcNodes.length;
                variableStore.dom = {};
            }
        }
    }
    if (document.readyState !== "loading") {
        if (isNativeSupport && settings.onlyLegacy) {
            var hasVarChange = false;
            if (settings.updateDOM) {
                var targetElm = settings.rootElement.host || (settings.rootElement === document ? document.documentElement : settings.rootElement);
                Object.keys(settings.variables).forEach((function(key) {
                    var varValue = settings.variables[key];
                    hasVarChange = hasVarChange || varValue !== getComputedStyle(targetElm).getPropertyValue(key);
                    targetElm.style.setProperty(key, varValue);
                }));
            }
            handleFinally(hasVarChange);
        } else if (!isShadowDOMReady && (settings.shadowDOM || settings.rootElement.shadowRoot || settings.rootElement.host)) {
            getCssData({
                rootElement: defaults.rootElement,
                include: defaults.include,
                exclude: settings.exclude,
                skipDisabled: false,
                onSuccess: function onSuccess(cssText, node, url) {
                    var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;
                    if (isUserDisabled) {
                        return false;
                    }
                    cssText = cssText.replace(css_vars_ponyfill_esm_regex.cssComments, "").replace(css_vars_ponyfill_esm_regex.cssMediaQueries, "");
                    cssText = (cssText.match(css_vars_ponyfill_esm_regex.cssVarDeclRules) || []).join("");
                    return cssText || false;
                },
                onComplete: function onComplete(cssText, cssArray, nodeArray) {
                    parseVars(cssText, {
                        store: variableStore.dom,
                        onWarning: handleWarning
                    });
                    isShadowDOMReady = true;
                    cssVars(settings);
                }
            });
        } else {
            cssVarsIsRunning = settings.rootElement;
            getCssData({
                rootElement: settings.rootElement,
                include: settings.include,
                exclude: settings.exclude,
                skipDisabled: false,
                onBeforeSend: settings.onBeforeSend,
                onError: function onError(xhr, node, url) {
                    var responseUrl = xhr.responseURL || getFullUrl(url, location.href);
                    var statusText = xhr.statusText ? "(".concat(xhr.statusText, ")") : "Unspecified Error" + (xhr.status === 0 ? " (possibly CORS related)" : "");
                    var errorMsg = "CSS XHR Error: ".concat(responseUrl, " ").concat(xhr.status, " ").concat(statusText);
                    handleError(errorMsg, node, xhr, responseUrl);
                },
                onSuccess: function onSuccess(cssText, node, url) {
                    var isUserDisabled = (node.sheet || {}).disabled && !node.__cssVars;
                    if (isUserDisabled) {
                        return false;
                    }
                    var isLink = node.nodeName.toLowerCase() === "link";
                    var isStyleImport = node.nodeName.toLowerCase() === "style" && cssText !== node.textContent;
                    var returnVal = settings.onSuccess(cssText, node, url);
                    cssText = returnVal !== undefined && Boolean(returnVal) === false ? "" : returnVal || cssText;
                    if (settings.updateURLs && (isLink || isStyleImport)) {
                        cssText = fixRelativeCssUrls(cssText, url);
                    }
                    return cssText;
                },
                onComplete: function onComplete(cssText, cssArray) {
                    var nodeArray = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
                    var currentVars = css_vars_ponyfill_esm_extends({}, variableStore.dom, variableStore.user);
                    var hasVarChange = false;
                    variableStore.job = {};
                    nodeArray.forEach((function(node, i) {
                        var nodeCSS = cssArray[i];
                        node.__cssVars = node.__cssVars || {};
                        node.__cssVars.text = nodeCSS;
                        if (css_vars_ponyfill_esm_regex.cssVars.test(nodeCSS)) {
                            try {
                                var cssTree = parseCss(nodeCSS, {
                                    preserveStatic: settings.preserveStatic,
                                    removeComments: true
                                });
                                parseVars(cssTree, {
                                    parseHost: Boolean(settings.rootElement.host),
                                    store: variableStore.dom,
                                    onWarning: handleWarning
                                });
                                node.__cssVars.tree = cssTree;
                            } catch (err) {
                                handleError(err.message, node);
                            }
                        }
                    }));
                    css_vars_ponyfill_esm_extends(variableStore.job, variableStore.dom);
                    if (settings.updateDOM) {
                        css_vars_ponyfill_esm_extends(variableStore.user, settings.variables);
                        css_vars_ponyfill_esm_extends(variableStore.job, variableStore.user);
                    } else {
                        css_vars_ponyfill_esm_extends(variableStore.job, variableStore.user, settings.variables);
                        css_vars_ponyfill_esm_extends(currentVars, settings.variables);
                    }
                    hasVarChange = counters.job > 0 && Boolean(Object.keys(variableStore.job).length > Object.keys(currentVars).length || Boolean(Object.keys(currentVars).length && Object.keys(variableStore.job).some((function(key) {
                        return variableStore.job[key] !== currentVars[key];
                    }))));
                    if (hasVarChange) {
                        resetCssNodes(settings.rootElement);
                        cssVars(settings);
                    } else {
                        var outCssArray = [];
                        var outNodeArray = [];
                        var hasKeyframesWithVars = false;
                        if (settings.updateDOM) {
                            counters.job++;
                        }
                        nodeArray.forEach((function(node, i) {
                            var isSkip = !node.__cssVars.tree;
                            if (node.__cssVars.tree) {
                                try {
                                    transformCss(node.__cssVars.tree, css_vars_ponyfill_esm_extends({}, settings, {
                                        variables: variableStore.job,
                                        onWarning: handleWarning
                                    }));
                                    var outCss = stringifyCss(node.__cssVars.tree);
                                    if (settings.updateDOM) {
                                        var nodeCSS = cssArray[i];
                                        var hasCSSVarFunc = css_vars_ponyfill_esm_regex.cssVarFunc.test(nodeCSS);
                                        if (!node.getAttribute("data-cssvars")) {
                                            node.setAttribute("data-cssvars", "src");
                                        }
                                        if (outCss.length && hasCSSVarFunc) {
                                            var dataGroup = node.getAttribute("data-cssvars-group") || ++counters.group;
                                            var outCssNoSpaces = outCss.replace(/\s/g, "");
                                            var outNode = settings.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(dataGroup, '"]')) || document.createElement("style");
                                            hasKeyframesWithVars = hasKeyframesWithVars || css_vars_ponyfill_esm_regex.cssKeyframes.test(outCss);
                                            if (settings.preserveStatic) {
                                                node.sheet && (node.sheet.disabled = true);
                                            }
                                            if (!outNode.hasAttribute("data-cssvars")) {
                                                outNode.setAttribute("data-cssvars", "out");
                                            }
                                            if (outCssNoSpaces === node.textContent.replace(/\s/g, "")) {
                                                isSkip = true;
                                                if (outNode && outNode.parentNode) {
                                                    node.removeAttribute("data-cssvars-group");
                                                    outNode.parentNode.removeChild(outNode);
                                                }
                                            } else if (outCssNoSpaces !== outNode.textContent.replace(/\s/g, "")) {
                                                [ node, outNode ].forEach((function(n) {
                                                    n.setAttribute("data-cssvars-job", counters.job);
                                                    n.setAttribute("data-cssvars-group", dataGroup);
                                                }));
                                                outNode.textContent = outCss;
                                                outCssArray.push(outCss);
                                                outNodeArray.push(outNode);
                                                if (!outNode.parentNode) {
                                                    node.parentNode.insertBefore(outNode, node.nextSibling);
                                                }
                                            }
                                        }
                                    } else {
                                        if (node.textContent.replace(/\s/g, "") !== outCss) {
                                            outCssArray.push(outCss);
                                        }
                                    }
                                } catch (err) {
                                    handleError(err.message, node);
                                }
                            }
                            if (isSkip) {
                                node.setAttribute("data-cssvars", "skip");
                            }
                            if (!node.hasAttribute("data-cssvars-job")) {
                                node.setAttribute("data-cssvars-job", counters.job);
                            }
                        }));
                        cssVarsSrcNodeCount = settings.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length;
                        if (settings.shadowDOM) {
                            var elms = [].concat(settings.rootElement).concat([].slice.call(settings.rootElement.querySelectorAll("*")));
                            for (var i = 0, elm; elm = elms[i]; ++i) {
                                if (elm.shadowRoot && elm.shadowRoot.querySelector("style")) {
                                    var shadowSettings = css_vars_ponyfill_esm_extends({}, settings, {
                                        rootElement: elm.shadowRoot
                                    });
                                    cssVars(shadowSettings);
                                }
                            }
                        }
                        if (settings.updateDOM && hasKeyframesWithVars) {
                            fixKeyframes(settings.rootElement);
                        }
                        cssVarsIsRunning = false;
                        settings.onComplete(outCssArray.join(""), outNodeArray, JSON.parse(JSON.stringify(variableStore.job)), getTimeStamp() - settings.__benchmark);
                        handleFinally(outNodeArray.length);
                    }
                }
            });
        }
    } else {
        document.addEventListener("DOMContentLoaded", (function init(evt) {
            cssVars(options);
            document.removeEventListener("DOMContentLoaded", init);
        }));
    }
}

cssVars.reset = function() {
    counters.job = 0;
    counters.group = 0;
    cssVarsIsRunning = false;
    if (cssVarsObserver) {
        cssVarsObserver.disconnect();
        cssVarsObserver = null;
    }
    cssVarsSrcNodeCount = 0;
    debounceTimer = null;
    isShadowDOMReady = false;
    for (var prop in variableStore) {
        variableStore[prop] = {};
    }
};

function addMutationObserver(settings) {
    function isDisabled(node) {
        var isDisabledAttr = isLink(node) && node.hasAttribute("disabled");
        var isDisabledSheet = (node.sheet || {}).disabled;
        return isDisabledAttr || isDisabledSheet;
    }
    function isLink(node) {
        var isStylesheet = node.nodeName.toLowerCase() === "link" && (node.getAttribute("rel") || "").indexOf("stylesheet") !== -1;
        return isStylesheet;
    }
    function isStyle(node) {
        return node.nodeName.toLowerCase() === "style";
    }
    function isValidAttributeMutation(mutation) {
        var isValid = false;
        if (mutation.type === "attributes" && isLink(mutation.target) && !isDisabled(mutation.target)) {
            var isEnabledMutation = mutation.attributeName === "disabled";
            var isHrefMutation = mutation.attributeName === "href";
            var isSkipNode = mutation.target.getAttribute("data-cssvars") === "skip";
            var isSrcNode = mutation.target.getAttribute("data-cssvars") === "src";
            if (isEnabledMutation) {
                isValid = !isSkipNode && !isSrcNode;
            } else if (isHrefMutation) {
                if (isSkipNode) {
                    mutation.target.setAttribute("data-cssvars", "");
                } else if (isSrcNode) {
                    resetCssNodes(settings.rootElement, true);
                }
                isValid = true;
            }
        }
        return isValid;
    }
    function isValidStyleTextMutation(mutation) {
        var isValid = false;
        if (mutation.type === "childList") {
            var isStyleElm = isStyle(mutation.target);
            var isOutNode = mutation.target.getAttribute("data-cssvars") === "out";
            isValid = isStyleElm && !isOutNode;
        }
        return isValid;
    }
    function isValidAddMutation(mutation) {
        var isValid = false;
        if (mutation.type === "childList") {
            isValid = [].slice.call(mutation.addedNodes).some((function(node) {
                var isElm = node.nodeType === 1;
                var hasAttr = isElm && node.hasAttribute("data-cssvars");
                var isStyleWithVars = isStyle(node) && css_vars_ponyfill_esm_regex.cssVars.test(node.textContent);
                var isValid = !hasAttr && (isLink(node) || isStyleWithVars);
                return isValid && !isDisabled(node);
            }));
        }
        return isValid;
    }
    function isValidRemoveMutation(mutation) {
        var isValid = false;
        if (mutation.type === "childList") {
            isValid = [].slice.call(mutation.removedNodes).some((function(node) {
                var isElm = node.nodeType === 1;
                var isOutNode = isElm && node.getAttribute("data-cssvars") === "out";
                var isSrcNode = isElm && node.getAttribute("data-cssvars") === "src";
                var isValid = isSrcNode;
                if (isSrcNode || isOutNode) {
                    var dataGroup = node.getAttribute("data-cssvars-group");
                    var orphanNode = settings.rootElement.querySelector('[data-cssvars-group="'.concat(dataGroup, '"]'));
                    if (isSrcNode) {
                        resetCssNodes(settings.rootElement, true);
                    }
                    if (orphanNode) {
                        orphanNode.parentNode.removeChild(orphanNode);
                    }
                }
                return isValid;
            }));
        }
        return isValid;
    }
    if (!window.MutationObserver) {
        return;
    }
    if (cssVarsObserver) {
        cssVarsObserver.disconnect();
        cssVarsObserver = null;
    }
    cssVarsObserver = new MutationObserver((function(mutations) {
        var hasValidMutation = mutations.some((function(mutation) {
            return isValidAttributeMutation(mutation) || isValidStyleTextMutation(mutation) || isValidAddMutation(mutation) || isValidRemoveMutation(mutation);
        }));
        if (hasValidMutation) {
            cssVars(settings);
        }
    }));
    cssVarsObserver.observe(document.documentElement, {
        attributes: true,
        attributeFilter: [ "disabled", "href" ],
        childList: true,
        subtree: true
    });
}

function cssVarsDebounced(settings) {
    var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout((function() {
        settings.__benchmark = null;
        cssVars(settings);
    }), delay);
}

function fixKeyframes(rootElement) {
    var animationNameProp = [ "animation-name", "-moz-animation-name", "-webkit-animation-name" ].filter((function(prop) {
        return getComputedStyle(document.body)[prop];
    }))[0];
    if (animationNameProp) {
        var allNodes = [].slice.call(rootElement.querySelectorAll("*"));
        var keyframeNodes = [];
        var nameMarker = "__CSSVARSPONYFILL-KEYFRAMES__";
        for (var i = 0, len = allNodes.length; i < len; i++) {
            var node = allNodes[i];
            var animationName = getComputedStyle(node)[animationNameProp];
            if (animationName !== "none") {
                node.style[animationNameProp] += nameMarker;
                keyframeNodes.push(node);
            }
        }
        void document.body.offsetHeight;
        for (var _i = 0, _len = keyframeNodes.length; _i < _len; _i++) {
            var nodeStyle = keyframeNodes[_i].style;
            nodeStyle[animationNameProp] = nodeStyle[animationNameProp].replace(nameMarker, "");
        }
    }
}

function fixRelativeCssUrls(cssText, baseUrl) {
    var cssUrls = cssText.replace(css_vars_ponyfill_esm_regex.cssComments, "").match(css_vars_ponyfill_esm_regex.cssUrls) || [];
    cssUrls.forEach((function(cssUrl) {
        var oldUrl = cssUrl.replace(css_vars_ponyfill_esm_regex.cssUrls, "$1");
        var newUrl = getFullUrl(oldUrl, baseUrl);
        cssText = cssText.replace(cssUrl, cssUrl.replace(oldUrl, newUrl));
    }));
    return cssText;
}

function fixVarNames() {
    var varObj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var reLeadingHyphens = /^-{2}/;
    return Object.keys(varObj).reduce((function(obj, value) {
        var key = reLeadingHyphens.test(value) ? value : "--".concat(value.replace(/^-+/, ""));
        obj[key] = varObj[value];
        return obj;
    }), {});
}

function getFullUrl(url) {
    var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : location.href;
    var d = document.implementation.createHTMLDocument("");
    var b = d.createElement("base");
    var a = d.createElement("a");
    d.head.appendChild(b);
    d.body.appendChild(a);
    b.href = base;
    a.href = url;
    return a.href;
}

function getTimeStamp() {
    return isBrowser && (window.performance || {}).now ? window.performance.now() : (new Date).getTime();
}

function resetCssNodes(rootElement) {
    var resetDOMVariableStore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var resetNodes = [].slice.call(rootElement.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));
    resetNodes.forEach((function(node) {
        return node.setAttribute("data-cssvars", "");
    }));
    if (resetDOMVariableStore) {
        variableStore.dom = {};
    }
}


//# sourceMappingURL=css-vars-ponyfill.esm.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index.module-b694546f.js
var index_module_b694546f_n=Symbol("@ts-pattern/matcher"),index_module_b694546f_t="@ts-pattern/anonymous-select-key",index_module_b694546f_e=function(n){return Boolean(n&&"object"==typeof n)},index_module_b694546f_r=function(t){return t&&!!t[index_module_b694546f_n]},index_module_b694546f_u=function t(u,i,c){if(index_module_b694546f_e(u)){if(index_module_b694546f_r(u)){var o=u[index_module_b694546f_n]().match(i),a=o.matched,f=o.selections;return a&&f&&Object.keys(f).forEach(function(n){return c(n,f[n])}),a}if(!index_module_b694546f_e(i))return !1;if(Array.isArray(u))return !!Array.isArray(i)&&u.length===i.length&&u.every(function(n,e){return t(n,i[e],c)});if(u instanceof Map)return i instanceof Map&&Array.from(u.keys()).every(function(n){return t(u.get(n),i.get(n),c)});if(u instanceof Set){if(!(i instanceof Set))return !1;if(0===u.size)return 0===i.size;if(1===u.size){var s=Array.from(u.values())[0];return index_module_b694546f_r(s)?Array.from(i.values()).every(function(n){return t(s,n,c)}):i.has(s)}return Array.from(u.values()).every(function(n){return i.has(n)})}return Object.keys(u).every(function(e){var o,a=u[e];return (e in i||index_module_b694546f_r(o=a)&&"optional"===o[index_module_b694546f_n]().matcherType)&&t(a,i[e],c)})}return Object.is(i,u)};function index_module_b694546f_h(t){var e;return (e={})[index_module_b694546f_n]=function(){return {match:function(n){return {matched:Boolean(t(n))}}}},e}index_module_b694546f_h(function(n){return !0});index_module_b694546f_h(function(n){return "string"==typeof n});index_module_b694546f_h(function(n){return "number"==typeof n});index_module_b694546f_h(function(n){return "boolean"==typeof n});index_module_b694546f_h(function(n){return "bigint"==typeof n});index_module_b694546f_h(function(n){return "symbol"==typeof n});index_module_b694546f_h(function(n){return null==n});function index_module_b694546f_K(n){return new index_module_b694546f_O(n,[])}var index_module_b694546f_O=/*#__PURE__*/function(){function n(n,t){this.value=void 0,this.cases=void 0,this.value=n,this.cases=t;}var e=n.prototype;return e.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],i=[e[0]],c=[];return 3===e.length&&"function"==typeof e[1]?(i.push(e[0]),c.push(e[1])):e.length>2&&i.push.apply(i,e.slice(1,e.length-1)),new n(this.value,this.cases.concat([{match:function(n){var e={},r=Boolean(i.some(function(t){return index_module_b694546f_u(t,n,function(n,t){e[n]=t;})})&&c.every(function(t){return t(n)}));return {matched:r,value:r&&Object.keys(e).length?index_module_b694546f_t in e?e[index_module_b694546f_t]:e:n}},handler:r}]))},e.when=function(t,e){return new n(this.value,this.cases.concat([{match:function(n){return {matched:Boolean(t(n)),value:n}},handler:e}]))},e.otherwise=function(t){return new n(this.value,this.cases.concat([{match:function(n){return {matched:!0,value:n}},handler:t}])).run()},e.exhaustive=function(){return this.run()},e.run=function(){for(var n=this.value,t=void 0,e=0;e<this.cases.length;e++){var r=this.cases[e],u=r.match(this.value);if(u.matched){n=u.value,t=r.handler;break}}if(!t){var i;try{i=JSON.stringify(this.value);}catch(n){i=this.value;}throw new Error("Pattern matching error: no pattern matches value "+i)}return t(n,this.value)},n}();


//# sourceMappingURL=index.module-b694546f.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/actionTypes-670a9a48.js
const USER_ACTIONS = {
  INIT_USER: 'INIT_USER',
  RESET_USER: 'RESET_USER',
  UPDATE_USER_INFO: 'UPDATE_USER_INFO'
};


//# sourceMappingURL=actionTypes-670a9a48.js.map

// EXTERNAL MODULE: ./node_modules/@sendbird/chat/lib/__bundle-a5600e6c.js
var _bundle_a5600e6c = __webpack_require__(0);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/lib/__bundle-1edafb8c.js
var _bundle_1edafb8c_Ee,_bundle_1edafb8c_Te=function(i){function s(e){var s=i.call(this)||this;if(s.method=_bundle_a5600e6c["a" /* A */].POST,s.path="".concat(_bundle_a5600e6c["H" /* a7 */]),s.params=Object(_bundle_a5600e6c["Vb" /* e */])({file:e.file,channel_url:e.channelUrl}),e.thumbnailSizes)for(var a=0;a<e.thumbnailSizes.length;a++){var o=e.thumbnailSizes[a],u=o.maxWidth,c=o.maxHeight;s.params["thumbnail".concat(a+1)]="".concat(u,",").concat(c)}return s.requestId=e.requestId,s}return Object(_bundle_a5600e6c["A" /* _ */])(s,i),s}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_we=function(t){function n(e,n){var r,i,s,a=this;return(a=t.call(this,e,n)||this).url=n.url,a.fileSize=null!==(r=n.file_size)&&void 0!==r?r:0,a.thumbnailSizes=null!==(i=n.thumbnails)&&void 0!==i?i:[],a.requireAuth=null!==(s=n.require_auth)&&void 0!==s&&s,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_Me=function(t){function n(e,n){var r,i,s,a=this;return(a=t.call(this,e)||this).replyCount=0,a.lastRepliedAt=0,a.updatedAt=0,a.replyCount=null!==(r=n.reply_count)&&void 0!==r?r:0,a.mostRepliedUsers=n.most_replies&&Object(_bundle_a5600e6c["k" /* K */])("object",n.most_replies)?n.most_replies.map((function(e){return new _bundle_a5600e6c["u" /* U */](a._iid,e)})):[],a.lastRepliedAt=null!==(i=n.last_replied_at)&&void 0!==i?i:0,a.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{reply_count:e.replyCount,most_replies:Array.isArray(e.mostRepliedUsers)?e.mostRepliedUsers.map((function(e){return _bundle_a5600e6c["u" /* U */].payloadify(e)})):[],last_replied_at:e.lastRepliedAt,updated_at:e.updatedAt})))},n}(_bundle_a5600e6c["I" /* a8 */]);!function(e){e.ADD="add",e.DELETE="delete"}(_bundle_1edafb8c_Ee||(_bundle_1edafb8c_Ee={}));var _bundle_1edafb8c_Se,_bundle_1edafb8c_Ne,_bundle_1edafb8c_Ae=function(e){this.messageId=0,this.operation=null,this.updatedAt=0;var t=Object(_bundle_a5600e6c["B" /* a */])("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,n=e.user_id,r=e.operation?e.operation.toLowerCase():null,i=e.reaction,s=e.updated_at;t&&Object(_bundle_a5600e6c["B" /* a */])("string",n)&&Object(_bundle_a5600e6c["B" /* a */])("string",r)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_1edafb8c_Ee,r)&&Object(_bundle_a5600e6c["B" /* a */])("string",i)&&i&&Object(_bundle_a5600e6c["B" /* a */])("number",s)&&(this.messageId=t,this.userId=n,this.key=i,this.operation=r,this.updatedAt=s)},_bundle_1edafb8c_Ue=function(){function e(e){var t,n,r,i=e.key,s=null!==(r=Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(e.user_ids),!1))&&void 0!==r?r:[],a=e.updated_at;Object(_bundle_a5600e6c["B" /* a */])("string",i)&&i&&Object(_bundle_a5600e6c["k" /* K */])("string",s)&&s.length>0&&Object(_bundle_a5600e6c["B" /* a */])("number",a)&&(this.key=i,this.userIds=s,this.updatedAt=a);var o={};try{for(var u=Object(_bundle_a5600e6c["ic" /* r */])(this.userIds),c=u.next();!c.done;c=u.next()){o[c.value]=this.updatedAt}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}this._version=o}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}))},e.prototype.applyEvent=function(e){if(e.key===this.key&&this.updatedAt<=e.updatedAt){if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var t=this.userIds.indexOf(e.userId);switch(e.operation){case _bundle_1edafb8c_Ee.ADD:t<0&&this.userIds.push(e.userId);break;case _bundle_1edafb8c_Ee.DELETE:t>=0&&this.userIds.splice(t,1)}this._version[e.userId]=e.updatedAt}this.updatedAt=Math.max(this.updatedAt,e.updatedAt)}},e}(),_bundle_1edafb8c_Ce=function(){function e(e){this.key=e.key,this.value=Object(_bundle_a5600e6c["k" /* K */])("string",e.value)?Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(e.value),!1):[]}return e.payloadify=function(e){var t;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({key:e.key,value:null!==(t=e.value)&&void 0!==t?t:[]}))},e}(),_bundle_1edafb8c_Oe=function(){function e(e){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=e.url,e.secure_url&&(this.secureUrl=e.secure_url),e.type&&(this.type=e.type),e.width&&(this.width=e.width),e.height&&(this.height=e.height),e.alt&&(this.alt=e.alt)}return e.payloadify=function(e){var t,n;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({url:e.url,secure_url:e.secureUrl,type:e.type,width:null!==(t=e.width)&&void 0!==t?t:0,height:null!==(n=e.height)&&void 0!==n?n:0,alt:e.alt}))},e}(),_bundle_1edafb8c_Pe=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e["og:title"]&&(this.title=e["og:title"]),e["og:url"]&&(this.url=e["og:url"]),e["og:description"]&&(this.description=e["og:description"]),e["og:image"]&&(this.defaultImage=new _bundle_1edafb8c_Oe(e["og:image"]))}return e.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({"og:title":e.title,"og:url":e.url,"og:description":e.description,"og:image":e.defaultImage?_bundle_1edafb8c_Oe.payloadify(e.defaultImage):null}))},e}(),_bundle_1edafb8c_ke=function(){function e(e){var t,n;this.volume=0,this.name=null!==(t=e.name)&&void 0!==t?t:"default",this.volume=null!==(n=e.volume)&&void 0!==n?n:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({name:e.name,volume:e.volume}))},e}(),_bundle_1edafb8c_Re=function(t){function n(e,n){var r,i=this;return(i=t.call(this,e,n)||this).isBlockedByMe=!1,i.role=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["D" /* a1 */],n.role)?n.role:_bundle_a5600e6c["D" /* a1 */].NONE,i.isBlockedByMe=null!==(r=n.is_blocked_by_me)&&void 0!==r&&r,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{role:e.role,is_blocked_by_me:e.isBlockedByMe})))},n}(_bundle_a5600e6c["u" /* U */]);!function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"}(_bundle_1edafb8c_Se||(_bundle_1edafb8c_Se={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(_bundle_1edafb8c_Ne||(_bundle_1edafb8c_Ne={}));var _bundle_1edafb8c_xe=function(e){switch(e){case _bundle_a5600e6c["ib" /* aa */].BASE:return"";case _bundle_a5600e6c["ib" /* aa */].USER:return"MESG";case _bundle_a5600e6c["ib" /* aa */].FILE:return"FILE";case _bundle_a5600e6c["ib" /* aa */].ADMIN:return"ADMM"}},_bundle_1edafb8c_Le=function(t){function n(e,n){var r,i,s,a,o,c,l,d,f,p,m,v,y,g,E,T,w=this;(w=t.call(this,e)||this).channelType=_bundle_a5600e6c["y" /* Y */].BASE,w.parentMessage=null,w.silent=!1,w.isOperatorMessage=!1,w.messageType=_bundle_a5600e6c["ib" /* aa */].BASE,w.mentionType=null,w.threadInfo=null,w.reactions=[],w.metaArrays=[],w.appleCriticalAlertOptions=null,w.createdAt=0,w.updatedAt=0,w.scheduledInfo=null,w.extendedMessage={},w.notificationData=null,w._isContinuousMessages=!1,w._scheduledStatus=null,w.messageId=null!==(i=null!==(r=n.msg_id)&&void 0!==r?r:n.message_id)&&void 0!==i?i:0,w.channelUrl=n.channel_url,w.channelType=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["y" /* Y */],n.channel_type)?n.channel_type:_bundle_a5600e6c["y" /* Y */].GROUP,n.channel&&(n.channel.channel_url&&(w.channelUrl=n.channel.channel_url),n.channel.channel_type&&(w.channelType=n.channel.channel_type)),w.parentMessageId=null!==(s="string"==typeof n.parent_message_id?parseInt(n.parent_message_id):n.parent_message_id)&&void 0!==s?s:0,w.data=null!==(a=n.data)&&void 0!==a?a:"",w.customType=null!==(o=n.custom_type)&&void 0!==o?o:"",w.mentionType=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["kb" /* ac */],n.mention_type)?n.mention_type:null,w.mentionedUsers=n.mentioned_users?n.mentioned_users.map((function(e){return new _bundle_a5600e6c["u" /* U */](w._iid,e)})):null,w.mentionedUserIds=null!==(c=n.mentioned_user_ids)&&void 0!==c?c:null,w.mentionedUsers&&!w.mentionedUserIds&&(w.mentionedUserIds=w.mentionedUsers.map((function(e){return e.userId}))),w.mentionedMessageTemplate=null!==(l=n.mentioned_message_template)&&void 0!==l?l:"",w.threadInfo=n.thread_info?new _bundle_1edafb8c_Me(w._iid,n.thread_info):null,w.reactions=n.reactions?n.reactions.map((function(e){return new _bundle_1edafb8c_Ue(e)})):[];var M=null!==(d=n.metaarray)&&void 0!==d?d:{},S=null!==(f=n.metaarray_key_order)&&void 0!==f?f:Object.keys(M).sort((function(e,t){return e.localeCompare(t)}));w.metaArrays=[];for(var N=0;N<S.length;N++){var A=S[N];w.metaArrays.push(new _bundle_1edafb8c_Ce({key:A,value:M[A]||[]}))}if(n.sorted_metaarray&&(w.metaArrays=n.sorted_metaarray.map((function(e){return new _bundle_1edafb8c_Ce(e)}))),w.ogMetaData=n.og_tag?new _bundle_1edafb8c_Pe(n.og_tag):null,w.silent=null!==(p=n.silent)&&void 0!==p&&p,w.isOperatorMessage=null!==(m=n.is_op_msg)&&void 0!==m&&m,w.appleCriticalAlertOptions=n.apple_critical_alert_options?new _bundle_1edafb8c_ke(n.apple_critical_alert_options):null,w.createdAt=null!==(y=null!==(v=n.created_at)&&void 0!==v?v:n.ts)&&void 0!==y?y:0,w.updatedAt=null!==(g=n.updated_at)&&void 0!==g?g:0,"number"==typeof n.scheduled_message_id&&"number"==typeof n.scheduled_at&&n.scheduled_status&&(w.scheduledInfo={scheduledMessageId:n.scheduled_message_id,scheduledAt:n.scheduled_at},w._scheduledStatus=n.scheduled_status),w.extendedMessage=null!==(E=n.extended_message)&&void 0!==E?E:{},0===w.extendedMessage.sub_type)try{var U=JSON.parse(w.extendedMessage.sub_data),C=U.label,O=U.tags,P=U.template_key,k=U.template_variables;w.notificationData={label:C,tags:O,templateKey:P,templateVariables:k}}catch(e){}return w._isContinuousMessages=null!==(T=n.is_continuous_messages)&&void 0!==T&&T,w}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){var n,i,s,c;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{channel_url:e.channelUrl,channel_type:e.channelType,message_id:e.messageId,type:_bundle_1edafb8c_xe(e.messageType),parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,mentioned_user_ids:e.mentionedUserIds,mentioned_users:null===(n=e.mentionedUsers)||void 0===n?void 0:n.map((function(e){return _bundle_a5600e6c["u" /* U */].payloadify(e)})),mentioned_message_template:e.mentionedMessageTemplate,thread_info:e.threadInfo?_bundle_1edafb8c_Me.payloadify(e.threadInfo):null,reactions:e.reactions.map((function(e){return _bundle_1edafb8c_Ue.payloadify(e)})),sorted_metaarray:null===(i=e.metaArrays)||void 0===i?void 0:i.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})),og_tag:e.ogMetaData?_bundle_1edafb8c_Pe.payloadify(e.ogMetaData):null,silent:e.silent,is_op_msg:e.isOperatorMessage,apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,created_at:e.createdAt,updated_at:e.updatedAt,scheduled_message_id:null===(s=e.scheduledInfo)||void 0===s?void 0:s.scheduledMessageId,scheduled_at:null===(c=e.scheduledInfo)||void 0===c?void 0:c.scheduledAt,scheduled_status:e._scheduledStatus,extended_message:e.extendedMessage})))},n._getParentMessageInfoPayload=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({type:_bundle_1edafb8c_xe(e.messageType),ts:e.createdAt,user:e.sender?_bundle_1edafb8c_Re.payloadify(e.sender):null,message:e.message,file:{url:e.plainUrl,name:e.name,type:e.type,require_auth:e.requireAuth}}))},n.prototype.isIdentical=function(e){return this.messageId===e.messageId},n.prototype.isEqual=function(e){return Object(_bundle_a5600e6c["J" /* a9 */])(this,e)},n.prototype.isUserMessage=function(){return this.messageType===_bundle_a5600e6c["ib" /* aa */].USER},n.prototype.isFileMessage=function(){return this.messageType===_bundle_a5600e6c["ib" /* aa */].FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isMultipleFilesMessage=function(){return this.messageType===_bundle_a5600e6c["ib" /* aa */].FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isAdminMessage=function(){return this.messageType===_bundle_a5600e6c["ib" /* aa */].ADMIN},n.prototype.serialize=function(){return Object(_bundle_a5600e6c["jb" /* ab */])(this)},n.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(t){return e.includes(t.key)}))},n.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(this.threadInfo=e.threadInfo),!1},n.prototype.applyReactionEvent=function(e){if(this.messageId===e.messageId){for(var t=!1,n=0;n<this.reactions.length;n++)if(this.reactions[n].key===e.key){this.reactions[n].applyEvent(e),this.reactions[n].isEmpty&&this.reactions.splice(n,1),t=!0;break}t||"add"!==e.operation||this.reactions.push(new _bundle_1edafb8c_Ue(_bundle_1edafb8c_Ue.payloadify({key:e.key,userIds:[e.userId],updatedAt:e.updatedAt})))}},n.prototype.applyParentMessage=function(e){if(!this.parentMessage)return this.parentMessage=e,!0;if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1},n}(_bundle_a5600e6c["I" /* a8 */]),_bundle_1edafb8c_De=function(t){function n(e,n){var r,i,s,a,o=this;if((o=t.call(this,e,n)||this).reqId="",o.replyToChannel=!1,o.errorCode=0,o.sender=n.user?new _bundle_1edafb8c_Re(o._iid,n.user):n.sender_id,o.reqId=null!==(i=null!==(r=n.req_id)&&void 0!==r?r:n.request_id)&&void 0!==i?i:"",o.replyToChannel=null!==(s=n.is_reply_to_channel)&&void 0!==s&&s,n.request_state&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["lb" /* ad */],n.request_state)&&(o.sendingStatus=n.request_state),!o.sendingStatus)if(o.messageId>0)o.sendingStatus=_bundle_a5600e6c["lb" /* ad */].SUCCEEDED;else if(o.scheduledInfo)switch(n.scheduled_status&&(o._scheduledStatus=n.scheduled_status),n.scheduled_status){case _bundle_1edafb8c_Ne.SENT:case _bundle_1edafb8c_Ne.IN_QUEUE:o.sendingStatus=_bundle_a5600e6c["lb" /* ad */].SUCCEEDED;break;case _bundle_1edafb8c_Ne.PENDING:o.sendingStatus=_bundle_a5600e6c["lb" /* ad */].SCHEDULED;break;case _bundle_1edafb8c_Ne.FAILED:case _bundle_1edafb8c_Ne.REMOVED:o.sendingStatus=_bundle_a5600e6c["lb" /* ad */].FAILED;break;case _bundle_1edafb8c_Ne.CANCELED:o.sendingStatus=_bundle_a5600e6c["lb" /* ad */].CANCELED}else o.sendingStatus=_bundle_a5600e6c["lb" /* ad */].PENDING;return o.errorCode=null!==(a=n.error_code)&&void 0!==a?a:0,o}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{user:_bundle_1edafb8c_Re.payloadify(e.sender),req_id:e.reqId,is_reply_to_channel:e.replyToChannel,request_state:e.sendingStatus,error_code:e.errorCode})))},Object.defineProperty(n.prototype,"isResendable",{get:function(){return(this.sendingStatus===_bundle_a5600e6c["lb" /* ad */].FAILED||this.sendingStatus===_bundle_a5600e6c["lb" /* ad */].CANCELED)&&Object(_bundle_a5600e6c["mb" /* ae */])(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},n}(_bundle_1edafb8c_Le),_bundle_1edafb8c_Fe=function(){function e(e,t,n){var r,i;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=e,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=null!==(r=t.real_width)&&void 0!==r?r:t.width,this.realHeight=null!==(i=t.real_height)&&void 0!==i?i:t.height,this._requireAuth=n}return e.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({url:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(e.prototype,"url",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager;return this._requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),e}(),_bundle_1edafb8c_qe={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:_bundle_a5600e6c["nb" /* af */].ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},_bundle_1edafb8c_ze=function(e){return Object(_bundle_a5600e6c["B" /* a */])("number",e.prevResultSize)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.nextResultSize)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isInclusive)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.reverse)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.messageTypeFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["nb" /* af */],e.messageTypeFilter)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.customTypesFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.senderUserIdsFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeMetaArray)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeReactions)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeParentMessageInfo)},_bundle_1edafb8c_Be=function(t){function n(e,n){var i,s,u,c,l=this;if((l=t.call(this,e,n)||this).translations={},l.message=null!==(i=n.message)&&void 0!==i?i:"",l.messageType=_bundle_a5600e6c["ib" /* aa */].ADMIN,l.translations=null!==(s=n.translations)&&void 0!==s?s:{},n.parent_message_info){var d=n.parent_message_info;l.parentMessage=_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},d),{message_id:l.parentMessageId,channel_url:l.channelUrl,channel_type:l.channelType,file:d.file,url:null===(u=d.file)||void 0===u?void 0:u.url,require_auth:null===(c=d.file)||void 0===c?void 0:c.require_auth}))))}return l}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{message:e.message,translations:e.translations,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_qe),t),Object(_bundle_a5600e6c["jc" /* s */])(this.messageId>0&&Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_ze(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n}(_bundle_1edafb8c_Le),_bundle_1edafb8c_Ke=function(){function e(e){var t,n;this.detail={},this.type=null!==(t=e.type)&&void 0!==t?t:"",this.vendor=null!==(n=e.vendor)&&void 0!==n?n:"",e.detail&&Object(_bundle_a5600e6c["B" /* a */])("object",e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}return e.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({type:e.type,vendor:e.vendor,detail:e.detail}))},e}(),_bundle_1edafb8c_je=function(t){function n(e,n){var i,s,u,c,l,d,h,f=this;if((f=t.call(this,e,n)||this).message="",f.messageParams=null,f.translations={},f.translationTargetLanguages=[],f.messageSurvivalSeconds=-1,f.plugins=[],f._poll=null,f.message=n.message,f.messageType=_bundle_a5600e6c["ib" /* aa */].USER,f.translations=null!==(u=n.translations)&&void 0!==u?u:{},f.translationTargetLanguages=null!==(c=n.target_langs)&&void 0!==c?c:[],0===Object.keys(f.translations).length&&f.translationTargetLanguages.length>0)try{for(var p=Object(_bundle_a5600e6c["ic" /* r */])(f.translationTargetLanguages),v=p.next();!v.done;v=p.next()){var y=v.value;f.translations[y]=""}}catch(e){i={error:e}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}if(f.messageSurvivalSeconds=null!==(l=n.message_survival_seconds)&&void 0!==l?l:-1,f.plugins=n.plugins?n.plugins.map((function(e){return new _bundle_1edafb8c_Ke(e)})):[],f._poll=n.poll?new _bundle_a5600e6c["ob" /* ag */](f._iid,n.poll):null,n.parent_message_info){var g=n.parent_message_info;f.parentMessage=_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},g),{created_at:g.ts,message_id:f.parentMessageId,channel_url:f.channelUrl,channel_type:f.channelType,file:g.file,url:null===(d=g.file)||void 0===d?void 0:d.url,require_auth:null===(h=g.file)||void 0===h?void 0:h.require_auth}))))}return f}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{message:e.message,translations:e.translations,message_survival_seconds:e.messageSurvivalSeconds,plugins:e.plugins.map((function(e){return _bundle_1edafb8c_Ke.payloadify(e)})),poll:e._poll?_bundle_a5600e6c["ob" /* ag */].payloadify(e._poll):null,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_qe),t),Object(_bundle_a5600e6c["jc" /* s */])(this.messageId>0&&Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_ze(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt)&&(this._poll=e,!0)},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n}(_bundle_1edafb8c_De),_bundle_1edafb8c_Qe=function(t){function n(e,n){var r,i,s,a,u,c=this;return(c=t.call(this,e)||this).plainUrl="",c.fileName=null,c.mimeType=null,c.fileSize=0,c.thumbnails=[],c._requireAuth=!1,c.plainUrl=null!==(r=n.url)&&void 0!==r?r:"",c.fileName=null!==(i=n.file_name)&&void 0!==i?i:null,c.mimeType=null!==(s=n.file_type)&&void 0!==s?s:null,c.fileSize=null!==(a=n.file_size)&&void 0!==a?a:0,c._requireAuth=null!==(u=n.require_auth)&&void 0!==u&&u,_bundle_a5600e6c["v" /* V */].of(c._iid).sessionManager,c.thumbnails=n.thumbnails?n.thumbnails.map((function(e){var t;return new _bundle_1edafb8c_Fe(c._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),c._requireAuth)})):[],c}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){var t;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({url:e.plainUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{url:e.url,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),require_auth:e._requireAuth}))},Object.defineProperty(n.prototype,"url",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager;return this._requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n}(_bundle_a5600e6c["I" /* a8 */]),_bundle_1edafb8c_Ge=function(t){function n(e,n){var i,s,u,c,l,d=this;if((d=t.call(this,e,n)||this).messageParams=null,d.fileInfoList=[],d.messageSurvivalSeconds=-1,d.messageType=_bundle_a5600e6c["ib" /* aa */].FILE,d.fileInfoList=null!==(s=null===(i=n.files)||void 0===i?void 0:i.map((function(t){return new _bundle_1edafb8c_Qe(e,t)})))&&void 0!==s?s:[],d.messageSurvivalSeconds=null!==(u=n.message_survival_seconds)&&void 0!==u?u:-1,n.parent_message_info){var h=n.parent_message_info;d.parentMessage=_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},h),{created_at:h.ts,message_id:d.parentMessageId,channel_url:d.channelUrl,channel_type:d.channelType,file:h.file,url:null===(c=h.file)||void 0===c?void 0:c.url,require_auth:null===(l=h.file)||void 0===l?void 0:l.require_auth}))))}return d}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_qe),t),Object(_bundle_a5600e6c["jc" /* s */])(this.messageId>0&&Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_ze(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{files:e.fileInfoList&&e.fileInfoList&&Array.isArray(e.fileInfoList)?e.fileInfoList.map((function(e){return _bundle_1edafb8c_Qe.payloadify(e)})):null,message_survival_seconds:e.messageSurvivalSeconds,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n._isMultipleFilesMessagePayload=function(e){var t=e.files;return Array.isArray(t)&&t.length>=2},n._isMultipleFilesMessageSerializedData=function(e){var t=e.fileInfoList;return Array.isArray(t)},n}(_bundle_1edafb8c_De),_bundle_1edafb8c_Ve=function(e){switch(e.messageType){case _bundle_a5600e6c["ib" /* aa */].USER:return _bundle_1edafb8c_je.payloadify(e);case _bundle_a5600e6c["ib" /* aa */].FILE:return e.fileInfoList?_bundle_1edafb8c_Ge.payloadify(e):_bundle_1edafb8c_We.payloadify(e);case _bundle_a5600e6c["ib" /* aa */].ADMIN:return _bundle_1edafb8c_Be.payloadify(e);default:throw _bundle_a5600e6c["hc" /* q */].unknown}},_bundle_1edafb8c_He=function(e,t){switch(t.type){case"MESG":return new _bundle_1edafb8c_je(e,t);case"FILE":return _bundle_1edafb8c_Ge._isMultipleFilesMessagePayload(t)?new _bundle_1edafb8c_Ge(e,t):new _bundle_1edafb8c_We(e,t);case"ADMM":case"BRDM":return new _bundle_1edafb8c_Be(e,t)}return null},_bundle_1edafb8c_We=function(t){function n(e,n){var i,s,u,c,l,d,h,f,p,m,v,y,g,b,I=this;(I=t.call(this,e,n)||this).messageParams=null,I.plainUrl="",I.requireAuth=!1,I.thumbnails=[],I.messageSurvivalSeconds=-1,I.messageType=_bundle_a5600e6c["ib" /* aa */].FILE;var E=n.file;if(I.plainUrl=(null!==(s=null!==(i=null==E?void 0:E.url)&&void 0!==i?i:n.url)&&void 0!==s?s:"").split("?auth=")[0],I.name=null!==(c=null!==(u=null==E?void 0:E.name)&&void 0!==u?u:n.name)&&void 0!==c?c:"File",I.size=null!==(d=null!==(l=null==E?void 0:E.size)&&void 0!==l?l:n.size)&&void 0!==d?d:0,I.data=null!==(f=null!==(h=null==E?void 0:E.data)&&void 0!==h?h:n.custom)&&void 0!==f?f:"",I.type=E?null!==(p=E.type)&&void 0!==p?p:"":null!==(m=n.type)&&void 0!==m?m:"",_bundle_a5600e6c["v" /* V */].of(I._iid).sessionManager,I.requireAuth=null!==(v=n.require_auth)&&void 0!==v&&v,I.thumbnails=n.thumbnails?n.thumbnails.map((function(e){var t;return new _bundle_1edafb8c_Fe(I._iid,"string"==typeof e?{url:e,width:0,height:0}:Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{url:(null!==(t=e.url)&&void 0!==t?t:"").split("auth=")[0]}),I.requireAuth)})):[],I.messageSurvivalSeconds=null!==(y=n.message_survival_seconds)&&void 0!==y?y:-1,n.parent_message_info){var T=n.parent_message_info;I.parentMessage=_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},T),{created_at:T.ts,message_id:I.parentMessageId,channel_url:I.channelUrl,channel_type:I.channelType,file:T.file,url:null===(g=T.file)||void 0===g?void 0:g.url,require_auth:null===(b=T.file)||void 0===b?void 0:b.require_auth}))))}return I}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){var n;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{url:e.plainUrl,require_auth:e.requireAuth,file:{name:e.name,size:e.size,type:e.type,data:e.data},thumbnails:null===(n=e.thumbnails)||void 0===n?void 0:n.map((function(e){return{url:e.plainUrl,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),message_survival_seconds:e.messageSurvivalSeconds,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},Object.defineProperty(n.prototype,"url",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_qe),t),Object(_bundle_a5600e6c["jc" /* s */])(this.messageId>0&&Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_ze(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n}(_bundle_1edafb8c_De),_bundle_1edafb8c_Ye=function(t){function n(e){var n,i,s,o=[];return e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?o=e.mentionedUserIds:e.mentionedUsers&&(o=e.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"FILE",ackRequired:!0,payload:Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({channel_url:e.channelUrl,files:e.files?_bundle_1edafb8c_$e(e.files):null,url:e.url,name:null!==(n=e.fileName)&&void 0!==n?n:"",type:null!==(i=e.mimeType)&&void 0!==i?i:"",size:null!==(s=e.fileSize)&&void 0!==s?s:0,custom:e.data,custom_type:e.customType,thumbnails:e.thumbnailSizes,require_auth:e.requireAuth,metaarray:e.metaArrays,mention_type:e.mentionType,mentioned_user_ids:o,push_option:e.pushNotificationDeliveryOption&&e.pushNotificationDeliveryOption!==_bundle_a5600e6c["pb" /* ah */].DEFAULT?e.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,silent:e.silent,reply_to_channel:e.isReplyToChannel,parent_message_id:e.parentMessageId?e.parentMessageId:null,req_id:e.reqId,pin_message:e.isPinnedMessage}))})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),_bundle_1edafb8c_Je=function(n){function i(e){var i,s,o=this;o=n.call(this)||this;var u=[];return e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?u=e.mentionedUserIds:e.mentionedUsers&&(u=e.mentionedUsers.map((function(e){return e.userId})))),o.method=_bundle_a5600e6c["a" /* A */].POST,o.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(e.channelType),"/").concat(encodeURIComponent(e.channelUrl),"/messages"),o.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({message_type:_bundle_a5600e6c["ib" /* aa */].FILE,user_id:e.userId,files:e.files?_bundle_1edafb8c_$e(e.files):null,url:e.fileUrl,mention_type:e.mentionType,mentioned_user_ids:u,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,data:e.data,custom_type:e.customType,thumbnails:null===(i=e.thumbnailSizes)||void 0===i?void 0:i.map((function(e){return _bundle_1edafb8c_Fe.payloadify(e)})),require_auth:e.requireAuth,sorted_metaarray:null===(s=e.metaArrays)||void 0===s?void 0:s.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})),push_option:e.pushNotificationDeliveryOption,parent_message_id:e.parentMessageId?e.parentMessageId:null,apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,reply_to_channel:e.isReplyToChannel,req_id:e.reqId,pin_message:e.isPinnedMessage})),o}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_Xe=function(t){function n(e,n,r){var i,s,a,o,u=this;(u=t.call(this,e,"FILE",r)||this).message=r.files&&r.files.length>=2?new _bundle_1edafb8c_Ge(e,r):new _bundle_1edafb8c_We(e,r);var c=_bundle_a5600e6c["v" /* V */].of(e).sdkState;return u.isMentioned=Object(_bundle_a5600e6c["sb" /* ak */])(u.message.mentionType,null!==(a=null!==(i=u.message.mentionedUserIds)&&void 0!==i?i:null===(s=u.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})))&&void 0!==a?a:[],c.userId),u.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,u}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_1edafb8c_Ze=function(t){function n(e,n){var r,i,s,a,o=this;(o=t.call(this,e,n)||this).message=n.files&&n.files.length>=2?new _bundle_1edafb8c_Ge(e,n):new _bundle_1edafb8c_We(e,n);var u=_bundle_a5600e6c["v" /* V */].of(e).sdkState;return o.isMentioned=Object(_bundle_a5600e6c["sb" /* ak */])(o.message.mentionType,null!==(s=null!==(r=o.message.mentionedUserIds)&&void 0!==r?r:null===(i=o.message.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})))&&void 0!==s?s:[],u.userId),o.forceUpdateLastMessage=null!==(a=n.force_update_last_message)&&void 0!==a&&a,o}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]);function _bundle_1edafb8c_$e(e){return e.map((function(e){var t,n;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({url:e.fileUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:null===(t=e.thumbnailSizes)||void 0===t?void 0:t.map((function(e){return _bundle_1edafb8c_Fe.payloadify(e)})),require_auth:null===(n=e._uploadedMetaData)||void 0===n?void 0:n.requireAuth}))}))}var _bundle_1edafb8c_et;!function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"}(_bundle_1edafb8c_et||(_bundle_1edafb8c_et={}));var _bundle_1edafb8c_tt=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,a=t.cacheContext,o=this;this._queueMap=new Map,this._iid=e,this._sdkState=n,this._requestQueue=i,this._cacheContext=a,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof _bundle_a5600e6c["pc" /* y */]&&(o._connectionState=e.stateType)})),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===_bundle_a5600e6c["qc" /* z */].CONNECTED||this._connectionState===_bundle_a5600e6c["qc" /* z */].CONNECTING||this._connectionState===_bundle_a5600e6c["qc" /* z */].RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return n=this._createSendFileMessageRequestParams(e,t),this._shouldSendThroughWebSocket?(r=new _bundle_1edafb8c_Ye(n),[4,this._requestQueue.send(r)]):[3,2];case 1:return i=s.sent(),[2,i.as(_bundle_1edafb8c_Xe).message];case 2:return r=new _bundle_1edafb8c_Je(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},n),{userId:this._sdkState.userId})),[4,this._requestQueue.send(r)];case 3:return i=s.sent(),[2,i.as(_bundle_1edafb8c_Ze).message]}}))}))},e.prototype._createSendFileMessageRequestParams=function(e,t){var n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.params),{channelUrl:e.url,channelType:e.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var r=t.params;n.files=r.fileInfoList}else{r=t.params;n.url=r.fileUrl,n.requireAuth=r.requireAuth}return n},e.prototype._resolveMessageQueue=function(e){var t;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l,d,h,f,p;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(v){switch(v.label){case 0:if(!(n=this._queueMap.get(e.url)))return[3,21];if(n.isResolving)return[3,20];n.isResolving=!0,r=[],i=!0,v.label=1;case 1:v.trys.push([1,15,16,17]),s=Object(_bundle_a5600e6c["ic" /* r */])(n.messageQueue),a=s.next(),v.label=2;case 2:if(a.done)return[3,14];switch(o=a.value,o.state){case _bundle_1edafb8c_et.PENDING:case _bundle_1edafb8c_et.UPLOADING:return[3,3];case _bundle_1edafb8c_et.UPLOADED:return[3,4];case _bundle_1edafb8c_et.FAILED:return[3,12]}return[3,13];case 3:return i=!1,r.push(o),[3,13];case 4:if(!i)return[3,10];v.label=5;case 5:return v.trys.push([5,8,,9]),o.state=_bundle_1edafb8c_et.SENDING,[4,this._sendFileMessage(e,o)];case 6:return u=v.sent(),o.deferred.resolve(u),[4,Object(_bundle_a5600e6c["ub" /* am */])(100)];case 7:return v.sent(),[3,9];case 8:return c=v.sent(),o.deferred.reject(c),[3,9];case 9:return[3,11];case 10:r.push(o),v.label=11;case 11:return[3,13];case 12:return l=null!==(t=o.error)&&void 0!==t?t:_bundle_a5600e6c["hc" /* q */].unknown,o.deferred.reject(l.code===_bundle_a5600e6c["tb" /* al */].REQUEST_CANCELED?_bundle_a5600e6c["hc" /* q */].fileUploadCanceled:l),[3,13];case 13:return a=s.next(),[3,2];case 14:return[3,17];case 15:return d=v.sent(),f={error:d},[3,17];case 16:try{a&&!a.done&&(p=s.return)&&p.call(s)}finally{if(f)throw f.error}return[7];case 17:return h=n.isResolveRequestPending,n.messageQueue=r,n.isResolving=!1,n.isResolveRequestPending=!1,h?[4,this._resolveMessageQueue(e)]:[3,19];case 18:v.sent(),v.label=19;case 19:return[3,21];case 20:n.isResolveRequestPending=!0,v.label=21;case 21:return[2]}}))}))},e.prototype._uploadNextPendingItem=function(e){var t;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return(n=this._queueMap.get(e.url))&&(r=n.messageQueue.find((function(e){return e.state===_bundle_1edafb8c_et.PENDING})))?r.multipleFileUploadInfo?(i=r.multipleFileUploadInfo,s=i.uploadIndex,a=i.uploadCount,o=i.requestHandler,l=r.params,u=l.fileInfoList[s],!Object(_bundle_a5600e6c["Zb" /* i */])(u.file)||(null===(t=u._uploadedMetaData)||void 0===t?void 0:t.isUploaded)?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]):[3,4]:[3,9];case 1:return d.sent(),[3,3];case 2:r.state=s<a-1?_bundle_1edafb8c_et.PENDING:_bundle_1edafb8c_et.UPLOADED,d.label=3;case 3:return c=r.multipleFileUploadInfo.uploadIndex++,r.multipleFileUploadInfo.isCopy||null==o||o._triggerOnFileUploaded(r.requestId,c,u,r.error),[3,7];case 4:return l=r.params,Object(_bundle_a5600e6c["Zb" /* i */])(l.file)?[4,this._tryUploadNextItemAndUpdateItemState(e,n,r)]:[3,6];case 5:return d.sent(),[3,7];case 6:l.thumbnailSizes=[],r.state=_bundle_1edafb8c_et.UPLOADED,d.label=7;case 7:return this._uploadNextPendingItem(e),[4,this._resolveMessageQueue(e)];case 8:d.sent(),d.label=9;case 9:return[2]}}))}))},e.prototype._tryUploadNextItemAndUpdateItemState=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i,s,a,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(r=c.sent(),!_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager.currentUser||!r)return n.error=_bundle_a5600e6c["hc" /* q */].connectionRequired,n.state=_bundle_1edafb8c_et.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];n.state=_bundle_1edafb8c_et.UPLOADING,t.uploadQueue.push(n),c.label=2;case 2:return c.trys.push([2,7,,8]),n.multipleFileUploadInfo?(i=n.multipleFileUploadInfo,s=i.uploadIndex,a=i.uploadCount,o=n.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(e,n,o)]):[3,4];case 3:return c.sent(),n.state=s<a-1?_bundle_1edafb8c_et.PENDING:_bundle_1edafb8c_et.UPLOADED,[3,6];case 4:return o=n.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(e,n,o)];case 5:c.sent(),n.state=_bundle_1edafb8c_et.UPLOADED,c.label=6;case 6:return[3,8];case 7:switch((u=c.sent()).code){case _bundle_a5600e6c["tb" /* al */].REQUEST_FAILED:n.error=new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].NETWORK_ERROR,message:"Failed to upload a file."});break;case _bundle_a5600e6c["tb" /* al */].REQUEST_CANCELED:n.error=_bundle_a5600e6c["hc" /* q */].fileUploadCanceled;break;default:n.error=u}return n.state=_bundle_1edafb8c_et.FAILED,[3,8];case 8:this._dequeueUploadItem(t,n),c.label=9;case 9:return[2]}}))}))},e.prototype._dequeueUploadItem=function(e,t){var n=e.uploadQueue.findIndex((function(e){return e.requestId===t.requestId}));n>=0&&e.uploadQueue.splice(n,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(e,t,n){var r,i,s;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var a,o,u,c,l,d,h,f,p,m;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(v){switch(v.label){case 0:return a=new _bundle_1edafb8c_Te({file:n.file,channelUrl:e.url,thumbnailSizes:n.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(a)];case 1:return o=v.sent(),u=o.as(_bundle_1edafb8c_we),c=u.url,l=u.fileSize,d=void 0===l?n.fileSize:l,h=u.thumbnailSizes,f=void 0===h?n.thumbnailSizes:h,p=u.requireAuth,m=void 0!==p&&p,n.fileName=null!==(r=n.fileName)&&void 0!==r?r:n.file.name,n.mimeType=null!==(i=n.mimeType)&&void 0!==i?i:n.file.type,n.fileSize=null!==(s=n.fileSize)&&void 0!==s?s:n.file.size,n.fileUrl=c,n.fileSize=d,n.thumbnailSizes=f,n.requireAuth=m,[2]}}))}))},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(e,t,n){var r,i,s;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var a,u,c,l,d,h,f,p,m,v,y,_;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(g){switch(g.label){case 0:return a=t.multipleFileUploadInfo.uploadIndex,u=n.fileInfoList[a],c=new _bundle_1edafb8c_Te({file:u.file,channelUrl:e.url,thumbnailSizes:u.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(c)];case 1:return l=g.sent(),d=l.as(_bundle_1edafb8c_we),h=d.url,f=d.fileSize,p=void 0===f?u.fileSize:f,m=d.thumbnailSizes,v=void 0===m?u.thumbnailSizes:m,y=d.requireAuth,_=void 0!==y&&y,u.fileName=null!==(r=u.fileName)&&void 0!==r?r:u.file.name,u.mimeType=null!==(i=u.mimeType)&&void 0!==i?i:u.file.type,u.fileSize=null!==(s=u.fileSize)&&void 0!==s?s:u.file.size,u.file=void 0,u.fileUrl=h,u.fileSize=p,u.thumbnailSizes=v,u._uploadedMetaData=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},u._uploadedMetaData),{requireAuth:_,isUploaded:!0}),[2]}}))}))},e.prototype.request=function(e,t,n,r){return void 0===r&&(r={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,s,a,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){return this._queueMap.has(e.url)||(i={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(e.url,i)),s=this._queueMap.get(e.url),a=new _bundle_a5600e6c["vb" /* an */],u={requestId:t,params:n,state:_bundle_1edafb8c_et.PENDING,deferred:a},function(e){return"fileInfoList"in e}(n)&&(c=Object(_bundle_a5600e6c["Xb" /* g */])({uploadIndex:0,uploadCount:n.fileInfoList.length},r),u.multipleFileUploadInfo=c),s.messageQueue.push(u),this._uploadNextPendingItem(e),[2,a.promise]}))}))},e.prototype.cancel=function(e,t){var n,r,i=this._queueMap.get(e.url);if(i){var s=t?[i.messageQueue.find((function(e){return e.requestId===t}))]:Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(i.messageQueue),!1);try{for(var a=Object(_bundle_a5600e6c["ic" /* r */])(s),o=a.next();!o.done;o=a.next()){var u=o.value;if(u)switch(u.state){case _bundle_1edafb8c_et.PENDING:if(u.state=_bundle_1edafb8c_et.FAILED,u.error=_bundle_a5600e6c["hc" /* q */].requestCanceled,u.multipleFileUploadInfo&&!u.multipleFileUploadInfo.isCopy){var c=u.multipleFileUploadInfo,l=c.uploadIndex,d=c.requestHandler,h=u.params.fileInfoList[l];null==d||d._triggerOnFileUploaded(u.requestId,l,h,_bundle_a5600e6c["hc" /* q */].fileUploadCanceled)}this._resolveMessageQueue(e);break;case _bundle_1edafb8c_et.UPLOADING:this._requestQueue.cancel(u.requestId)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},e}();var _bundle_1edafb8c_nt,_bundle_1edafb8c_rt={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:_bundle_a5600e6c["nb" /* af */].ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:_bundle_a5600e6c["wb" /* ao */].NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},_bundle_1edafb8c_it=function(e){return Object(_bundle_a5600e6c["B" /* a */])("number",e.prevResultSize)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.nextResultSize)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isInclusive)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.reverse)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.messageTypeFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["nb" /* af */],e.messageTypeFilter)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.customTypesFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.senderUserIdsFilter,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["wb" /* ao */],e.replyType)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeMetaArray)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeReactions)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeParentMessageInfo)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeThreadInfo)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.showSubchannelMessagesOnly)},_bundle_1edafb8c_st={replyType:_bundle_a5600e6c["wb" /* ao */].NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},_bundle_1edafb8c_at=function(e){return Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["wb" /* ao */],e.replyType)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeReactions)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeMetaArray)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeParentMessageInfo)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeThreadInfo)},_bundle_1edafb8c_ot=function(n){function r(e){var r=e.channelType,i=e.channelUrl,s=e.messageId,a=e.includeMetaArray,o=e.includeReactions,u=e.includeThreadInfo,c=e.includeParentMessageInfo,l=n.call(this)||this;return l.method=_bundle_a5600e6c["a" /* A */].GET,l.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(s)),l.params={is_sdk:!0,with_sorted_meta_array:a,include_reactions:o,include_thread_info:u,include_parent_message_info:c,include_poll_details:!0},l}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_ut=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.message=n?_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Xb" /* g */])({},n)):null,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_ct=function(n){function i(e){var i=e.channelType,s=e.channelUrl,o=e.timestamp,u=e.token,c=e.prevResultSize,l=e.nextResultSize,d=e.isInclusive,h=e.reverse,f=e.messageTypeFilter,p=e.customTypesFilter,m=e.senderUserIdsFilter,v=e.replyType,y=e.includeMetaArray,_=e.includeReactions,g=e.parentMessageId,b=e.includeThreadInfo,I=e.includeParentMessageInfo,E=e.showSubchannelMessagesOnly,T=e.checkingHasNext,w=e.checkingContinuousMessages,M=n.call(this)||this;return M.method=_bundle_a5600e6c["a" /* A */].GET,M.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(i),"/").concat(encodeURIComponent(s),"/messages"),M.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({is_sdk:!0,prev_limit:c,next_limit:l,include:d,reverse:h,message_ts:o,message_id:u,message_type:null!=f?f:null,custom_types:p,sender_ids:m,include_reply_type:v,with_sorted_meta_array:y,include_reactions:_,parent_message_id:g,include_thread_info:b,include_parent_message_info:I,show_subchannel_message_only:E,include_poll_details:!0,checking_has_next:T,checking_continuous_messages:w})),M}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_lt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return n.is_continuous_messages&&(r.isContinuousMessages=n.is_continuous_messages),n.has_next&&(r.hasNext=n.has_next),r.messages=n.messages.map((function(t){return _bundle_1edafb8c_He(e,t)})),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_dt=function(n){function r(e){var r=e.channelType,i=e.channelUrl,s=e.timestamp,a=e.token,o=e.replyType,u=e.includeMetaArray,c=e.includeReactions,l=e.includeThreadInfo,d=e.includeParentMessageInfo,h=n.call(this)||this;return h.method=_bundle_a5600e6c["a" /* A */].GET,h.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(r),"/").concat(encodeURIComponent(i),"/messages/changelogs"),h.params={change_ts:s,token:a,with_sorted_meta_array:u,include_reactions:c,include_thread_info:l,include_reply_type:o,include_parent_message_info:d,include_poll_details:!0},h}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_ht=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.updatedMessages=n.updated.map((function(t){return _bundle_1edafb8c_He(e,t)})),r.deletedMessagesInfo=n.deleted.map((function(e){return{messageId:e.message_id,deletedAt:e.deleted_at}})),r.hasMore=n.has_more,r.nextToken=n.next,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_ft=function(n){function r(e){var r=e.channelUrl,i=e.scheduledMessageId,s=n.call(this)||this;return s.method=_bundle_a5600e6c["a" /* A */].GET,s.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),s.params={},s}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_pt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.message=n?_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Xb" /* g */])({},n)):null,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]);!function(e){e.MUTED="muted",e.BANNED="banned"}(_bundle_1edafb8c_nt||(_bundle_1edafb8c_nt={}));var _bundle_1edafb8c_mt=function(){function e(e){var t,n,r,i;this.restrictionType=null,Object(_bundle_a5600e6c["q" /* Q */])(_bundle_1edafb8c_nt,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(t=e.description)&&void 0!==t?t:null,this.endAt=null!==(r=null!==(n=e.end_at)&&void 0!==n?n:e.muted_end_at)&&void 0!==r?r:-1,this.remainingDuration=null!==(i=e.remaining_duration)&&void 0!==i?i:-1}return e.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt,remaining_duration:e.remainingDuration}))},e}(),_bundle_1edafb8c_vt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.restrictionInfo=new _bundle_1edafb8c_mt(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),_bundle_1edafb8c_mt.payloadify(e.restrictionInfo))))},n}(_bundle_a5600e6c["u" /* U */]),_bundle_1edafb8c_yt=function(t){function n(e,n){var r,i=this;return(i=t.call(this,e,n)||this).isMuted=!1,i.isMuted=null!==(r=n.is_muted)&&void 0!==r&&r,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["u" /* U */]),_bundle_1edafb8c_t=function(){function e(){this._onPending=_bundle_a5600e6c["yb" /* aq */],this._onFailed=_bundle_a5600e6c["yb" /* aq */],this._onSucceeded=_bundle_a5600e6c["yb" /* aq */]}return e.prototype._trigger=function(e){switch(null==e?void 0:e.sendingStatus){case _bundle_a5600e6c["lb" /* ad */].PENDING:0===e.errorCode&&this._onPending(e);break;case _bundle_a5600e6c["lb" /* ad */].SCHEDULED:case _bundle_a5600e6c["lb" /* ad */].SUCCEEDED:this._onSucceeded(e)}},e.prototype._triggerFailed=function(e,t){switch(null==t?void 0:t.sendingStatus){case _bundle_a5600e6c["lb" /* ad */].FAILED:case _bundle_a5600e6c["lb" /* ad */].CANCELED:this._onFailed(e,t.scheduledInfo?null:t)}},e.prototype.onPending=function(e){return this._onPending=e,this},e.prototype.onFailed=function(e){return this._onFailed=e,this},e.prototype.onSucceeded=function(e){return this._onSucceeded=e,this},e}(),gt={data:void 0,customType:void 0,mentionType:_bundle_a5600e6c["kb" /* ac */].USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1},_bundle_1edafb8c_bt=function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.data,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.customType,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["kb" /* ac */],e.mentionType)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.mentionedUserIds,!0)&&Object(_bundle_a5600e6c["k" /* K */])(_bundle_a5600e6c["u" /* U */],e.mentionedUsers,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.mentionedMessageTemplate,!0)&&Object(_bundle_a5600e6c["k" /* K */])(_bundle_1edafb8c_Ce,e.metaArrays,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.parentMessageId,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isReplyToChannel)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["pb" /* ah */],e.pushNotificationDeliveryOption,!0)&&Object(_bundle_a5600e6c["B" /* a */])(_bundle_1edafb8c_ke,e.appleCriticalAlertOptions,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isPinnedMessage,!0)},It=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},Et=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},gt),{message:"",translationTargetLanguages:void 0,pollId:void 0});function Tt(e){var t,n,r;return null!==(t=e.messageParams)&&void 0!==t?t:Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{mentionType:e.mentionType,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:_bundle_a5600e6c["pb" /* ah */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var wt,Mt=function(e){var t;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:null===(t=e.poll)||void 0===t?void 0:t.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations)}))},St=function(e){return _bundle_1edafb8c_bt(e)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.message)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.translationTargetLanguages,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.pollId,!0)};!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(wt||(wt={}));var Nt=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},At=function(e){return e===wt.BLOB||e===wt.FILE},Ut=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},Ct=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},gt),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1});function _bundle_1edafb8c_Ot(e){var t,n,r,i;return null!==(t=e.messageParams)&&void 0!==t?t:Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:_bundle_a5600e6c["pb" /* ah */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(i=e.thumbnails)||void 0===i?void 0:i.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:e.requireAuth,isPinnedMessage:!1}))}var _bundle_1edafb8c_Pt,_bundle_1edafb8c_kt=function(e,t){var n;return e.messageParams?(!e.url&&Object(_bundle_a5600e6c["Zb" /* i */])(t)&&(e.messageParams.file=t),e.messageParams):Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:t,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:null===(n=e.thumbnails)||void 0===n?void 0:n.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))}))},Rt=function(e){return _bundle_1edafb8c_bt(e)&&(Object(_bundle_a5600e6c["Zb" /* i */])(e.file)||Object(_bundle_a5600e6c["B" /* a */])("string",e.fileUrl))&&Object(_bundle_a5600e6c["B" /* a */])("string",e.fileName,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.mimeType,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return Object(_bundle_a5600e6c["B" /* a */])("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},_bundle_1edafb8c_xt={data:void 0,customType:void 0,mentionType:_bundle_a5600e6c["kb" /* ac */].USERS,mentionedUserIds:void 0,mentionedUsers:void 0,mentionedMessageTemplate:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},_bundle_1edafb8c_Lt=function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.data,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.customType,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["kb" /* ac */],e.mentionType)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.mentionedUserIds,!0)&&Object(_bundle_a5600e6c["k" /* K */])(_bundle_a5600e6c["u" /* U */],e.mentionedUsers,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.mentionedMessageTemplate,!0)&&Object(_bundle_a5600e6c["k" /* K */])(_bundle_1edafb8c_Ce,e.metaArrays,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["pb" /* ah */],e.pushNotificationDeliveryOption,!0)&&Object(_bundle_a5600e6c["B" /* a */])(_bundle_1edafb8c_ke,e.appleCriticalAlertOptions,!0)},Dt=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_xt),{message:void 0,translationTargetLanguages:void 0,pollId:void 0}),_bundle_1edafb8c_Ft=function(e){return _bundle_1edafb8c_Lt(e)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.message,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.translationTargetLanguages,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.pollId,!0)},_bundle_1edafb8c_qt=Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_xt),_bundle_1edafb8c_zt=function(n){function r(e){var r=e.channelUrl,i=e.channelType,s=e.token,a=e.limit,o=n.call(this)||this;return o.method=_bundle_a5600e6c["a" /* A */].GET,o.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(i),"/").concat(encodeURIComponent(r),"/operators"),o.params={token:s,limit:a},o}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_Bt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.operators=n.operators.map((function(t){return new _bundle_a5600e6c["u" /* U */](e,t)})),r.token=n.next,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_Kt=function(t){function n(e,n,r,i){return t.call(this,e,n,r,i)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_zt(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=u.sent(),i=r.as(_bundle_1edafb8c_Bt),s=i.operators,a=i.token,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,s];case 2:return[2,e];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["zb" /* ar */]),_bundle_1edafb8c_jt=function(t){function n(e,n,r,i){var s,a,o,u,c,l,d,h,f,p,m=this;return(m=t.call(this,e,n,r,i)||this).reverse=!1,m.messageTypeFilter=_bundle_a5600e6c["nb" /* af */].ALL,m.customTypesFilter=null,m.senderUserIdsFilter=null,m.replyType=_bundle_a5600e6c["wb" /* ao */].NONE,m.includeMetaArray=!1,m.includeReactions=!1,m.includeParentMessageInfo=!1,m.includeThreadInfo=!1,m.showSubchannelMessagesOnly=!1,m._edge=Number.MAX_SAFE_INTEGER,m.reverse=null!==(s=i.reverse)&&void 0!==s&&s,m.messageTypeFilter=null!==(a=i.messageTypeFilter)&&void 0!==a?a:_bundle_a5600e6c["nb" /* af */].ALL,m.customTypesFilter=null!==(o=i.customTypesFilter)&&void 0!==o?o:null,m.senderUserIdsFilter=null!==(u=i.senderUserIdsFilter)&&void 0!==u?u:null,m.replyType=null!==(c=i.replyType)&&void 0!==c?c:_bundle_a5600e6c["wb" /* ao */].NONE,m.includeMetaArray=null!==(l=i.includeMetaArray)&&void 0!==l&&l,m.includeReactions=null!==(d=i.includeReactions)&&void 0!==d&&d,m.includeParentMessageInfo=null!==(h=i.includeParentMessageInfo)&&void 0!==h&&h,m.includeThreadInfo=null!==(f=i.includeThreadInfo)&&void 0!==f&&f,m.showSubchannelMessagesOnly=null!==(p=i.showSubchannelMessagesOnly)&&void 0!==p&&p,m}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.reverse)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["nb" /* af */],this.messageTypeFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["wb" /* ao */],this.replyType)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.customTypesFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.senderUserIdsFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeMetaArray)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeReactions)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeParentMessageInfo)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeThreadInfo)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,is.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,Object(_bundle_a5600e6c["lc" /* u */])({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return e=t.sent(),this._edge=Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([Number.MAX_SAFE_INTEGER],Object(_bundle_a5600e6c["gc" /* p */])(e.map((function(e){return e.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["zb" /* ar */]),_bundle_1edafb8c_Qt=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.limit,o=e.token;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/mute"),r.params={limit:a,token:o},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_Gt=function(t){function n(e,n){var r=t.call(this,e,n)||this;r.mutedUsers=[];var i=n.next,s=n.muted_list;return r.token=i,s&&s.length>0&&(r.mutedUsers=s.map((function(t){return new _bundle_1edafb8c_vt(e,t)}))),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_Vt=function(t){function n(e,n,r,i){return t.call(this,e,n,r,i)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_Qt(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(_bundle_1edafb8c_Gt),i=r.mutedUsers,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["zb" /* ar */]),_bundle_1edafb8c_Ht=function(n){function i(e){var i=this,s=e.channelUrl,a=e.channelType,o=e.limit,u=e.token;return(i=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,i.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(a),"/").concat(encodeURIComponent(s),"/ban"),i.params=Object(_bundle_a5600e6c["Vb" /* e */])({limit:o,token:u}),i}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_Wt=function(t){function n(e,n){var r=t.call(this,e,n)||this;r.bannedUsers=[];var i=n.next,s=n.banned_list;return r.token=i,s&&s.length>0&&(r.bannedUsers=s.map((function(t){return new _bundle_1edafb8c_vt(e,t.user)}))),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_Yt=function(t){function n(e,n,r,i){return t.call(this,e,n,r,i)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_Ht(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=a.sent(),r=n.as(_bundle_1edafb8c_Wt),i=r.bannedUsers,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["zb" /* ar */]);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(_bundle_1edafb8c_Pt||(_bundle_1edafb8c_Pt={}));var _bundle_1edafb8c_Jt=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.operatorUserIds;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:a},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_1edafb8c_Xt=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.operatorUserIds;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:a},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_1edafb8c_Zt=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.userId;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/mute/").concat(a),r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_$t=function(t){function n(e,n){var r=t.call(this,e,n)||this;r.isMuted=!1,r.startAt=0,r.endAt=0;var i=n.is_muted,s=n.start_at,a=n.end_at,o=n.remaining_duration,u=n.description;return r.isMuted=i,r.startAt=s,r.endAt=a,r.remainingDuration=o,r.description=u,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_en=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.keys;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metadata"),r.params={keys:a,include_ts:!0},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_tn=function(t){function n(e,n){var r=t.call(this,e,n)||this,i=n.metadata,s=n.ts;return r.metadata=i,r.ts=s,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_nn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.metadata;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:a,include_ts:!0},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_rn=function(t){function n(e,n){var r,i,s=this;return(s=t.call(this,e,n)||this).metaData=null!==(r=n.metadata)&&void 0!==r?r:{},s.ts=null!==(i=n.ts)&&void 0!==i?i:null,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_sn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.metadata,o=e.upsert;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:a,include_ts:!0,upsert:null!=o&&o},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),an=function(t){function n(e,n){var r=t.call(this,e,n)||this,i=n.metadata,s=n.ts;return r.metadata=i,r.ts=s,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),on=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_1edafb8c_un=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.key;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metadata/").concat(a),r.params={include_ts:!0},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_cn=function(t){function n(e,n){var r=t.call(this,e,n)||this,i=n.ts;return r.ts=i,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_ln=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metadata"),r.params={include_ts:!0},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_dn=function(t){function n(e,n){var r=t.call(this,e,n)||this,i=n.ts;return r.ts=i,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_hn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.keys;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={keys:a},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_fn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.metaCounter=n,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_pn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.metaCounter;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:a},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_mn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.metaCounter=n,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_vn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.metaCounter,o=e.upsert,u=void 0!==o&&o,c=e.mode,l=void 0===c?"set":c;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:a,upsert:u,mode:l},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),_bundle_1edafb8c_yn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.metaCounter=n,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_1edafb8c_n=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_1edafb8c_gn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.key;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metacounter/").concat(a),r.params={},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_1edafb8c_bn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var In=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.userId,o=e.seconds,u=e.description;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/mute"),r.params={user_id:a,seconds:o,description:u},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_1edafb8c_En=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return i.user=new _bundle_1edafb8c_vt(e,r.data),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),Tn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.userId;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(a)),r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var wn=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return i.user=new _bundle_1edafb8c_vt(e,r.data),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_1edafb8c_Mn=function(n){function i(e){var i=this,s=e.channelUrl,a=e.channelType,o=e.userId,u=e.seconds,c=e.description;return(i=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,i.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(a),"/").concat(encodeURIComponent(s),"/ban"),i.params=Object(_bundle_a5600e6c["Vb" /* e */])({user_id:o,seconds:u,description:c}),i}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var Sn=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return i.user=new _bundle_1edafb8c_vt(e,r.data),r.data.member_count&&(i.memberCount=r.data.member_count),r.data.joined_member_count&&(i.joinedMemberCount=r.data.joined_member_count),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_1edafb8c_Nn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.userId;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/ban/").concat(encodeURIComponent(a)),r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var An=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return i.user=new _bundle_1edafb8c_vt(e,r.data),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_1edafb8c_Un=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.freezing;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(i),"/freeze"),r.params={freeze:a},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_1edafb8c_Cn=function(t){function n(e,n,r){var i=t.call(this,e,"SYEV",r)||this;return i.freeze=r.data.freeze,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),On=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.category,o=e.userId,u=e.description;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(Object(_bundle_a5600e6c["Ab" /* as */])(s),"/").concat(encodeURIComponent(i)),r.params={report_category:a,reporting_user_id:o,report_description:u},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),Pn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.category,o=e.userId,u=e.offendingUserId,c=e.description;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(_bundle_a5600e6c["Bb" /* at */],"/users/").concat(u),r.params={channel_url:i,channel_type:s===_bundle_a5600e6c["y" /* Y */].OPEN?"open_channels":"group_channels",report_category:a,reporting_user_id:o,report_description:c},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),kn=function(n){function r(e){var r=this,i=e.channelUrl,s=e.channelType,a=e.category,o=e.userId,u=e.offendingUserId,c=e.messageId,l=e.description;return(r=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,r.path="".concat(Object(_bundle_a5600e6c["Ab" /* as */])(s),"/").concat(encodeURIComponent(i),"/messages/").concat(c),r.params={report_category:a,reporting_user_id:o,report_description:l,offending_user_id:u},r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),Rn=function(t){function n(e){var n=[];return e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?n=e.mentionedUserIds:e.mentionedUsers&&(n=e.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"MESG",ackRequired:!0,payload:Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({channel_url:e.channelUrl,message:e.message,data:e.data,custom_type:e.customType,metaarray:e.metaArrays,mention_type:e.mentionType,mentioned_user_ids:n,mentioned_message_template:e.mentionedMessageTemplate,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption&&e.pushNotificationDeliveryOption!==_bundle_a5600e6c["pb" /* ah */].DEFAULT?e.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:e.appleCriticalAlertOptions,silent:e.silent,reply_to_channel:e.isReplyToChannel,parent_message_id:e.parentMessageId?e.parentMessageId:null,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage}))})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),xn=function(t){function n(e,n,r){var i,s,a,o,u=this;(u=t.call(this,e,"MESG",r)||this).message=new _bundle_1edafb8c_je(e,r);var c=_bundle_a5600e6c["v" /* V */].of(e).sdkState;return u.isMentioned=Object(_bundle_a5600e6c["sb" /* ak */])(u.message.mentionType,null!==(a=null!==(i=u.message.mentionedUserIds)&&void 0!==i?i:null===(s=u.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})))&&void 0!==a?a:[],c.userId),u.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,u}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),Ln=function(t){function n(e){var n=null;return e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?n=e.mentionedUserIds:e.mentionedUsers&&(n=e.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"MEDI",ackRequired:!0,payload:Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({channel_url:e.channelUrl,msg_id:e.messageId,message:e.message,data:e.data,custom_type:e.customType,metaarray:e.metaArrayParams,mention_type:e.mentionType,mentioned_user_ids:n,mentioned_message_template:e.mentionedMessageTemplate,apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,poll_id:e.pollId}))})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),Dn=function(t){function n(e,n,r){var i,s,o,u,c,l=this;(l=t.call(this,e,"MEDI",r)||this).message=new _bundle_1edafb8c_je(e,r);var d=_bundle_a5600e6c["v" /* V */].of(e).sdkState;return l.mentionCountChange=Object(_bundle_a5600e6c["Cb" /* au */])({mentionType:null===(i=r.old_values)||void 0===i?void 0:i.mention_type,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},Object(_bundle_a5600e6c["lc" /* u */])({mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))}),d.userId),l}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),Fn=function(t){function n(e){var n=null;return e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?n=e.mentionedUserIds:e.mentionedUsers&&(n=e.mentionedUsers.map((function(e){return e.userId})))),t.call(this,{code:"FEDI",ackRequired:!0,payload:Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({channel_url:e.channelUrl,msg_id:e.messageId,data:e.data,custom_type:e.customType,metaarray:e.metaArrayParams,mention_type:e.mentionType,mentioned_user_ids:n,apple_critical_alert_options:e.appleCriticalAlertOptions}))})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),qn=function(t){function n(e,n,r){var i,s,o,u,c,l=this;(l=t.call(this,e,"FEDI",r)||this).message=new _bundle_1edafb8c_We(e,r);var d=_bundle_a5600e6c["v" /* V */].of(e).sdkState;return l.mentionCountChange=Object(_bundle_a5600e6c["Cb" /* au */])({mentionType:null===(i=r.old_values)||void 0===i?void 0:i.mention_type,mentionedUserIds:null!==(o=null===(s=r.old_values)||void 0===s?void 0:s.mentioned_user_ids)&&void 0!==o?o:[]},Object(_bundle_a5600e6c["lc" /* u */])({mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))}),d.userId),l}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),zn=function(n){function r(e){var r=n.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(e.channelType),"/").concat(e.channelUrl,"/messages/").concat(e.messageId),r}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var Bn=function(t){function n(e,n,r){var i=t.call(this,e,"DELM",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.messageId=Number(r.msg_id),i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),Kn=function(n){function r(e){var r=e.channelType,i=e.channelUrl,s=e.messageId,a=e.reactionKey,o=n.call(this)||this;return o.method=_bundle_a5600e6c["a" /* A */].POST,o.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(r),"/").concat(encodeURIComponent(i),"/messages/").concat(s,"/reactions"),o.params={reaction:a},o}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),jn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.reactionEvent=new _bundle_1edafb8c_Ae(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Qn=function(n){function r(e){var r=e.channelType,i=e.channelUrl,s=e.messageId,a=e.reactionKey,o=n.call(this)||this;return o.method=_bundle_a5600e6c["a" /* A */].DELETE,o.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(r),"/").concat(encodeURIComponent(i),"/messages/").concat(s,"/reactions"),o.params={reaction:a},o}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),Gn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.reactionEvent=new _bundle_1edafb8c_Ae(Object(_bundle_a5600e6c["Xb" /* g */])({},n)),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Vn=function(n){function r(e){var r=e.channelType,i=e.channelUrl,s=e.messageId,a=e.translationTargetLanguages,o=n.call(this)||this;return o.method=_bundle_a5600e6c["a" /* A */].POST,o.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(s),"/translation"),o.params={target_langs:a},o}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),Hn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.message=new _bundle_1edafb8c_je(e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Wn=function(n){function i(e){var i,s=this;s=n.call(this)||this;var o=[];e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?o=e.mentionedUserIds:e.mentionedUsers&&(o=e.mentionedUsers.map((function(e){return e.userId}))));var u=e.channelType,c=e.channelUrl;return s.method=_bundle_a5600e6c["a" /* A */].POST,s.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(u),"/").concat(encodeURIComponent(c),"/scheduled_messages"),s.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:_bundle_a5600e6c["Db" /* av */].USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:o,sorted_metaarray:null===(i=e.metaArrays)||void 0===i?void 0:i.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})),apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),s}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]),Yn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.message=new _bundle_1edafb8c_je(e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Jn=function(n){function r(e){var r,i=this;i=n.call(this)||this;var s=[];e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(e){return e.userId}))));var o=e.channelType,u=e.channelUrl;return i.method=_bundle_a5600e6c["a" /* A */].POST,i.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(o),"/").concat(encodeURIComponent(u),"/scheduled_messages"),i.params=Object(_bundle_a5600e6c["lc" /* u */])({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:_bundle_a5600e6c["Db" /* av */].FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return _bundle_1edafb8c_Fe.payloadify(e)})):[],custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:s,sorted_metaarray:null===(r=e.metaArrays)||void 0===r?void 0:r.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})),apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption}),i}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),Xn=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.message=new _bundle_1edafb8c_We(e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Zn=function(n){function r(e){var r=e.pollId,i=e.title,s=e.data,a=e.allowUserSuggestion,o=e.allowMultipleVotes,u=e.closeAt,c=n.call(this)||this;return c.method=_bundle_a5600e6c["a" /* A */].PUT,c.path="".concat(_bundle_a5600e6c["Fb" /* ax */],"/").concat(encodeURIComponent(r)),c.params={title:i,data:s,allow_user_suggestion:a,allow_multiple_votes:o,close_at:u},c}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),$n=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.poll=new _bundle_a5600e6c["ob" /* ag */](e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),er=function(n){function r(e){var r=e.pollId,i=n.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].DELETE,i.path="".concat(_bundle_a5600e6c["Fb" /* ax */],"/").concat(encodeURIComponent(r)),i}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var tr=function(n){function r(e){var r=e.pollId,i=n.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].PUT,i.path="".concat(_bundle_a5600e6c["Fb" /* ax */],"/").concat(encodeURIComponent(r),"/close"),i}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),nr=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.poll=new _bundle_a5600e6c["ob" /* ag */](e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),rr=function(n){function r(e){var r=e.channelUrl,i=e.channelType,s=e.pollId,a=e.optionText,o=n.call(this)||this;return o.method=_bundle_a5600e6c["a" /* A */].POST,o.path="".concat(_bundle_a5600e6c["Fb" /* ax */],"/").concat(encodeURIComponent(s),"/options"),o.params={channel_url:r,channel_type:i,text:a},o}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),ir=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.poll=new _bundle_a5600e6c["ob" /* ag */](e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),sr=function(n){function r(e){var r=e.pollId,i=e.pollOptionId,s=e.optionText,a=n.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(_bundle_a5600e6c["Fb" /* ax */],"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),a.params={text:s},a}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),ar=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.poll=new _bundle_a5600e6c["ob" /* ag */](e,n),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),or=function(n){function r(e){var r=e.pollId,i=e.pollOptionId,s=n.call(this)||this;return s.method=_bundle_a5600e6c["a" /* A */].DELETE,s.path="".concat(_bundle_a5600e6c["Fb" /* ax */],"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),s}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var ur=function(t){function n(e){var n=e.reqId,i=e.channelType,s=e.channelUrl,a=e.pollId,o=e.pollOptionIds;return t.call(this,{code:"VOTE",ackRequired:!0,payload:Object(_bundle_a5600e6c["Vb" /* e */])({req_id:n,channel_type:i===_bundle_a5600e6c["y" /* Y */].OPEN?"open_channels":"group_channels",channel_url:s,poll_id:a,option_ids:o})})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),cr=function(t){function n(e,n,r){var i=t.call(this,e,"VOTE",r)||this;return i.event=new _bundle_a5600e6c["Gb" /* ay */](r),i.channelUrl=r.channel_url,i.channelType=r.channel_type,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),lr=100,dr="GroupChannel",hr="url",fr=100,pr="Message",mr="messageId",vr="Poll",yr="pollId",_r=100,gr="FeedChannel",br="url";function Ir(e){var t,n,r;return null!==(t=e.messageParams)&&void 0!==t?t:Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{isReplyToChannel:!1,mentionedUserIds:null!==(n=e.mentionedUserIds)&&void 0!==n?n:null===(r=e.mentionedUsers)||void 0===r?void 0:r.map((function(e){return e.userId})),pushNotificationDeliveryOption:_bundle_a5600e6c["pb" /* ah */].DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map((function(e){var t;return{fileUrl:e.plainUrl,fileName:e.fileName,fileSize:e.fileSize,mimeType:e.mimeType,thumbnailSizes:null===(t=e.thumbnails)||void 0===t?void 0:t.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),_uploadedMetaData:{requireAuth:e._requireAuth,isUploaded:!0}}}))}))}var Er,Tr=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},gt),{fileInfoList:[]}),wr=function(e){return(Object(_bundle_a5600e6c["Zb" /* i */])(e.file)||Object(_bundle_a5600e6c["B" /* a */])("string",e.fileUrl))&&Object(_bundle_a5600e6c["B" /* a */])("string",e.fileName,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.mimeType,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.fileSize,!0)&&(void 0===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return e.maxWidth>0&&e.maxHeight>0})))},Mr=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._onFileUploaded=_bundle_a5600e6c["yb" /* aq */],e}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._triggerOnFileUploaded=function(e,t,n,r){this._onFileUploaded(e,t,n,r)},n.prototype.onFileUploaded=function(e){return this._onFileUploaded=e,this},n.prototype.onPending=function(e){return t.prototype.onPending.call(this,e),this},n.prototype.onFailed=function(e){return t.prototype.onFailed.call(this,e),this},n.prototype.onSucceeded=function(e){return t.prototype.onSucceeded.call(this,e),this},n}(_bundle_1edafb8c_t),Sr=2;!function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"}(Er||(Er={}));var Nr,Ar=function(t){function n(e,n){var r,i,s,a,o,c,l=this;return(l=t.call(this,e)||this)._name="",l._createdAt=0,l.channelType=_bundle_a5600e6c["y" /* Y */].BASE,l.coverUrl="",l.customType="",l.data="",l.isFrozen=!1,l.isEphemeral=!1,l.creator=null,l._messageCollectionLastAccessedAt=0,l._url=n.channel_url,l._name=null!==(r=n.name)&&void 0!==r?r:"",l._createdAt=1e3*n.created_at,l.coverUrl=null!==(i=n.cover_url)&&void 0!==i?i:"",l.customType=null!==(s=n.custom_type)&&void 0!==s?s:"",l.data=null!==(a=n.data)&&void 0!==a?a:"",l.isFrozen=null!==(o=n.freeze)&&void 0!==o&&o,l.isEphemeral=null!==(c=n.is_ephemeral)&&void 0!==c&&c,l.creator=n.created_by?new _bundle_a5600e6c["u" /* U */](l._iid,n.created_by):null,n.metadata&&Object.keys(n.metadata).length>0&&n.ts&&(l._cachedMetaData=new Map,Object.keys(n.metadata).forEach((function(e){l._cachedMetaData.set(e,{value:n.metadata[e],isRemoved:!1,updatedAt:n.ts})}))),l}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},n.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t.payloadify.call(this,e)),{channel_url:e.url,name:e.name,cover_url:e.coverUrl,custom_type:e.customType,data:e.data,freeze:e.isFrozen,is_ephemeral:e.isEphemeral,created_by:e.creator?_bundle_a5600e6c["u" /* U */].payloadify(e.creator):null,created_at:e.createdAt/1e3})))},n.prototype.isGroupChannel=function(){return this.channelType===_bundle_a5600e6c["y" /* Y */].GROUP},n.prototype.isOpenChannel=function(){return this.channelType===_bundle_a5600e6c["y" /* Y */].OPEN},n.prototype.isFeedChannel=function(){return this.channelType===_bundle_a5600e6c["y" /* Y */].FEED},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData?(this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e):e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(e){var t=Object(_bundle_a5600e6c["Vb" /* e */])(e);Object.assign(this,t)},n.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){n._cachedMetaData||(n._cachedMetaData=new Map);var i=n._cachedMetaData.get(r);(!i||i.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},n.prototype._updateCachedMetaData=function(e,t){var n=this;this._cachedMetaData?this._cachedMetaData.forEach((function(r,i){var s;r.updatedAt<=t&&n._cachedMetaData.set(i,{value:null!==(s=e[i])&&void 0!==s?s:r.value,isRemoved:!e[i],updatedAt:t})})):(this._cachedMetaData=new Map,Object.keys(e).forEach((function(r){n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})})))},n.prototype._removeFromCachedMetaData=function(e,t){var n=this;this._cachedMetaData&&e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!0,r.updatedAt=t)}))},n.prototype._runIfHandleableWithGroupChannel=function(e){this.isGroupChannel()?e(this):this.isFeedChannel()&&e(this.groupChannel)},n.prototype._generateRequestId=function(){return"rq-".concat(Object(_bundle_a5600e6c["dc" /* m */])())},n.prototype.isIdentical=function(e){return e&&this.url===e.url},n.prototype.isEqual=function(e){return Object(_bundle_a5600e6c["J" /* a9 */])(this,e)},n.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new _bundle_1edafb8c_Kt(this._iid,this.url,this.channelType,e)},n.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new _bundle_1edafb8c_Vt(this._iid,this.url,this.channelType,e)},n.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new _bundle_1edafb8c_Yt(this._iid,this.url,this.channelType,e)},n.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new _bundle_1edafb8c_jt(this._iid,this.url,this.channelType,e)},n.prototype.addOperators=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_Jt({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.removeOperators=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_Xt({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.getMyMutedInfo=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u,c,l;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new _bundle_1edafb8c_Zt({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return i=d.sent(),s=i.as(_bundle_1edafb8c_$t),a=s.isMuted,o=s.startAt,u=s.endAt,c=s.remainingDuration,l=s.description,[2,{isMuted:a,startAt:o,endAt:u,remainingDuration:c,description:l}]}}))}))},n.prototype.getMetaData=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_en({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=o.sent(),i=r.as(_bundle_1edafb8c_tn),s=i.metadata,a=i.ts,this._upsertCachedMetaData(s,a),[2,s]}}))}))},n.prototype.getAllMetaData=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_en({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=a.sent(),r=n.as(_bundle_1edafb8c_tn),i=r.metadata,s=r.ts,this._updateCachedMetaData(i,s),[2,i]}}))}))},n.prototype.createMetaData=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_nn({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=s.sent(),i=r.as(_bundle_1edafb8c_rn).metaData,this._upsertCachedMetaData(i,0),[2,i]}}))}))},n.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new _bundle_1edafb8c_sn({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return i=u.sent(),s=i.as(an),a=s.metadata,o=s.ts,this._upsertCachedMetaData(a,o),[2,a]}}))}))},n.prototype.deleteMetaData=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_un({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=s.sent(),i=r.as(_bundle_1edafb8c_cn).ts,this._removeFromCachedMetaData([e],i),[2]}}))}))},n.prototype.deleteAllMetaData=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_ln({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=i.sent(),r=n.as(_bundle_1edafb8c_dn).ts,this._removeFromCachedMetaData(Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._cachedMetaData.keys()),!1),r),[2]}}))}))},n.prototype.getMetaCounters=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_hn({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(_bundle_1edafb8c_fn).metaCounter]}}))}))},n.prototype.getAllMetaCounters=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_hn({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(_bundle_1edafb8c_fn).metaCounter]}}))}))},n.prototype.createMetaCounters=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_pn({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(_bundle_1edafb8c_mn).metaCounter]}}))}))},n.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new _bundle_1edafb8c_vn({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(_bundle_1edafb8c_yn).metaCounter]}}))}))},n.prototype.increaseMetaCounters=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_vn({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(_bundle_1edafb8c_yn).metaCounter]}}))}))},n.prototype.decreaseMetaCounters=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_vn({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(_bundle_1edafb8c_yn).metaCounter]}}))}))},n.prototype.deleteMetaCounter=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_gn({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.deleteAllMetaCounters=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_bn({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},n.prototype.muteUser=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},n.prototype.muteUserWithUserId=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&Object(_bundle_a5600e6c["B" /* a */])("number",t,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",n,!0)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=new In({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.unmuteUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},n.prototype.unmuteUserWithUserId=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new Tn({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.banUser=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},n.prototype.banUserWithUserId=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&Object(_bundle_a5600e6c["B" /* a */])("number",t,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",n,!0)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=new _bundle_1edafb8c_Mn({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.unbanUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},n.prototype.unbanUserWithUserId=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_Nn({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.freeze=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_Un({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},n.prototype.unfreeze=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_1edafb8c_Un({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},n.prototype.getMessagesByMessageId=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_rt),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_it(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMessagesByTimestamp=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_rt),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_it(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return void 0===t&&(t={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_st),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_at(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceToken=function(e,t){return void 0===t&&(t={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_st),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&_bundle_1edafb8c_at(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,is.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype._createPendingSendableMessagePayload=function(e,t,n){var i,s=_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,created_at:n,user:s.currentUser?_bundle_1edafb8c_Re.payloadify(s.currentUser):null,req_id:t,request_state:_bundle_a5600e6c["lb" /* ad */].PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:null===(i=e.mentionedUsers)||void 0===i?void 0:i.map((function(e){return _bundle_a5600e6c["u" /* U */].payloadify(e)}))}))},n.prototype._createPendingUserMessage=function(e,t,n){var i,s,a={};if(e.translationTargetLanguages)try{for(var u=Object(_bundle_a5600e6c["ic" /* r */])(e.translationTargetLanguages),c=u.next();!c.done;c=u.next()){a[c.value]=""}}catch(e){i={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}var l=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this._createPendingSendableMessagePayload(e,t,n)),{type:_bundle_a5600e6c["ib" /* aa */].USER,message:e.message,translations:a})),d=new _bundle_1edafb8c_je(this._iid,l);return d.messageParams=e,d},n.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},n.prototype._createPendingFileMessage=function(e,t,n){var i,s,a,u,c,l,d=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this._createPendingSendableMessagePayload(e,t,n)),{type:_bundle_a5600e6c["ib" /* aa */].FILE,url:e.fileUrl,file:{name:null!==(i=e.fileName)&&void 0!==i?i:null===(s=e.file)||void 0===s?void 0:s.name,size:null!==(a=e.fileSize)&&void 0!==a?a:null===(u=e.file)||void 0===u?void 0:u.size,type:null!==(c=e.mimeType)&&void 0!==c?c:null===(l=e.file)||void 0===l?void 0:l.type,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}})):[]})),h=new _bundle_1edafb8c_We(this._iid,d);return h.messageParams=e,h},n.prototype._createPendingMultipleFilesMessage=function(e,t,n){var i=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this._createPendingSendableMessagePayload(e,t,n)),{type:_bundle_a5600e6c["ib" /* aa */].FILE})),s=new _bundle_1edafb8c_Ge(this._iid,i);return s.messageParams=e,s},n.prototype._validateFailedFileMessageHasFile=function(e,t){var n;return Boolean(e.url)||Object(_bundle_a5600e6c["Zb" /* i */])(t)||Object(_bundle_a5600e6c["Zb" /* i */])(null===(n=e.messageParams)||void 0===n?void 0:n.file)},n.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},n.prototype._markMessageAsFailed=function(e,t,n){void 0===n&&(n=!1),e.errorCode=t.code,t.code===_bundle_a5600e6c["tb" /* al */].REQUEST_CANCELED||t.code===_bundle_a5600e6c["tb" /* al */].FILE_UPLOAD_CANCEL_FAILED?e.sendingStatus=_bundle_a5600e6c["lb" /* ad */].CANCELED:n||(e.sendingStatus=_bundle_a5600e6c["lb" /* ad */].FAILED)},n.prototype.sendUserMessage=function(e){var t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Et),e);return Object(_bundle_a5600e6c["jc" /* s */])(St(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this._sendUserMessage(t)},n.prototype._sendUserMessage=function(e,t,n){var r=this;void 0===t&&(t=Er.SEND);var i=_bundle_a5600e6c["v" /* V */].of(this._iid),s=i.dispatcher,a=i.requestQueue,u=null!=n?n:this._generateRequestId(),c=Date.now(),l=new _bundle_1edafb8c_t;return Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var n=r._createPendingUserMessage(e,u,c);s.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:t===Er.RESEND?_bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_RESEND_STARTED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_PENDING})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,l._trigger(n)]}))}))}));var i=new Rn(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{channelUrl:r.url,channelType:r.channelType,reqId:u}));a.send(i).then((function(e){var t=e.as(xn).message;s.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[t],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_SUCCESS})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,l._trigger(t)]}))}))}))})).catch((function(t){if(Object(_bundle_a5600e6c["L" /* aB */])(t))throw t;Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var n=r._createPendingUserMessage(e,u,c),i=_bundle_a5600e6c["v" /* V */].of(r._iid).cacheContext,a=i.localCacheEnabled&&i.localCacheConfig.enableAutoResend&&Object(_bundle_a5600e6c["M" /* aC */])(t.code);r._markMessageAsFailed(n,t,a),s.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:n.sendingStatus===_bundle_a5600e6c["lb" /* ad */].PENDING?_bundle_a5600e6c["x" /* X */].REQUEST_RESEND_MESSAGE:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_FAILED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,l._triggerFailed(t,n)]}))}))}))}))}))})),l},n.prototype._autoResendUserMessage=function(e){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_je&&!!e.messageParams).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this._sendUserMessage(e.messageParams,Er.SEND,e.reqId)},n.prototype.resendUserMessage=function(e){var t;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_je&&!e.scheduledInfo).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=new _bundle_a5600e6c["vb" /* an */],r=null!==(t=e.messageParams)&&void 0!==t?t:Mt(e),this._sendUserMessage(r,Er.RESEND,e.reqId).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},n.prototype.updateUserMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Dt),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_1edafb8c_Ft(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=new Ln(Object(_bundle_a5600e6c["Xb" /* g */])({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(Dn).message]}}))}))},n.prototype.copyUserMessage=function(e,t){var r,i,s;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof n&&t instanceof _bundle_1edafb8c_je&&t.sendingStatus===_bundle_a5600e6c["lb" /* ad */].SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),Object(_bundle_a5600e6c["jc" /* s */])(!t.poll).throw(_bundle_a5600e6c["hc" /* q */].notSupportedError),u=new _bundle_a5600e6c["vb" /* an */],c=null!==(r=t.messageParams)&&void 0!==r?r:Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t),{mentionType:t.mentionType,mentionedUserIds:null!==(i=t.mentionedUserIds)&&void 0!==i?i:null===(s=t.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(t.translations),pushNotificationDeliveryOption:_bundle_a5600e6c["pb" /* ah */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),e._sendUserMessage(c).onSucceeded((function(e){u.resolve(e)})).onFailed((function(e){return u.reject(e)})),[2,u.promise]}))}))},n.prototype.translateUserMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_je&&e.messageId>0&&Object(_bundle_a5600e6c["k" /* K */])("string",t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new Vn({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(Hn).message]}}))}))},n.prototype._createScheduledUserMessage=function(e,t){var n=this,r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=Date.now(),s=this._generateRequestId();Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var r=n._createPendingScheduledUserMessage(e,s,i);Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,t._trigger(r)]}))}))}))}));var a=new Wn(Object(_bundle_a5600e6c["Xb" /* g */])({reqId:s,channelType:this.channelType,channelUrl:this.url},e));r.send(a).then((function(e){var r=e.as(Yn).message;Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,t._trigger(r)]}))}))}))})).catch((function(r){if(Object(_bundle_a5600e6c["L" /* aB */])(r))throw r;Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var a=n._createPendingScheduledUserMessage(e,s,i);n._markMessageAsFailed(a,r),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,t._trigger(a)]}))}))}))}))}))},n.prototype.sendFileMessage=function(e){var t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Ct),e);return Object(_bundle_a5600e6c["jc" /* s */])(Rt(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this._sendFileMessage(t)},n.prototype.sendMultipleFilesMessage=function(e){var t,n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Tr),e),r=_bundle_a5600e6c["v" /* V */].of(this._iid);Object(_bundle_a5600e6c["jc" /* s */])(function(e,t){return void 0===t&&(t=_bundle_a5600e6c["Hb" /* az */]),_bundle_1edafb8c_bt(e)&&Array.isArray(e.fileInfoList)&&e.fileInfoList.length>=2&&e.fileInfoList.length<=t&&e.fileInfoList.every((function(e){return wr(e)}))}(n,null===(t=r.appInfo)||void 0===t?void 0:t.multipleFilesMessageFileCountLimit)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);var i=!!e.fileInfoList.find((function(e){var t=r.appInfo.uploadSizeLimit;return e.file instanceof Blob&&e.file.size>t||e.fileSize>t}));return Object(_bundle_a5600e6c["jc" /* s */])(!i).throw(_bundle_a5600e6c["hc" /* q */].fileSizeLimitExceededError),this._sendMultipleFilesMessage(n)},n.prototype._sendFileMessage=function(e,t,n){var r=this;void 0===t&&(t=Er.SEND);var i=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,s=is.of(this._iid).fileMessageQueue,a=null!=n?n:this._generateRequestId(),o=Date.now(),u=new _bundle_1edafb8c_t;return Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var n=r._createPendingFileMessage(e,a,o);i.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:t===Er.RESEND?_bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_RESEND_STARTED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_PENDING})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,u._trigger(n)]}))}))})),s.request(r,a,e).then((function(e){i.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[e],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_SUCCESS})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,u._trigger(e)]}))}))}))})).catch((function(t){if(Object(_bundle_a5600e6c["L" /* aB */])(t))throw t;Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var n=r._createPendingFileMessage(e,a,o),s=_bundle_a5600e6c["v" /* V */].of(r._iid).cacheContext,c=s.localCacheEnabled&&s.localCacheConfig.enableAutoResend&&Object(_bundle_a5600e6c["M" /* aC */])(t.code);r._markMessageAsFailed(n,t,c),i.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:n.sendingStatus===_bundle_a5600e6c["lb" /* ad */].PENDING?_bundle_a5600e6c["x" /* X */].REQUEST_RESEND_MESSAGE:t.code===_bundle_a5600e6c["tb" /* al */].FILE_UPLOAD_CANCEL_FAILED?_bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_CANCELED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_FAILED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,u._triggerFailed(t,n)]}))}))}))}))}))})),u},n.prototype._autoResendFileMessage=function(e){Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_We&&!!e.messageParams).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);var t=_bundle_a5600e6c["v" /* V */].of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,Er.SEND,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},n.prototype._sendMultipleFilesMessage=function(e,t,n){var r=this,i=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,s=is.of(this._iid).fileMessageQueue,a=null!=n?n:this._generateRequestId(),o=Date.now(),u=new Mr;return Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var n=r._createPendingMultipleFilesMessage(e,a,o);i.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:t===Er.RESEND?_bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_RESEND_STARTED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_PENDING})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,u._trigger(n)]}))}))})),s.request(r,a,e,{requestHandler:u,isCopy:t===Er.COPY}).then((function(e){i.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[e],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_SUCCESS})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,u._trigger(e)]}))}))}))})).catch((function(t){if(Object(_bundle_a5600e6c["L" /* aB */])(t))throw t;Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var n=r._createPendingMultipleFilesMessage(e,a,o);r._markMessageAsFailed(n,t),i.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_FAILED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,u._triggerFailed(t,n)]}))}))}))}))}))})),u},n.prototype._createScheduledFileMessage=function(e,t,n,r){var i=this,s=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,a=new Jn(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({reqId:n,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));s.send(a).then((function(e){var n=e.as(Xn).message;Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(i,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,t._trigger(n)]}))}))}))})).catch((function(s){if(Object(_bundle_a5600e6c["L" /* aB */])(s))throw s;Object(_bundle_a5600e6c["ub" /* am */])(2).then((function(){var a=i._createPendingScheduledFileMessage(e,n,r);i._markMessageAsFailed(a,s),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(i,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,t._triggerFailed(s,a)]}))}))}))}))}))},n.prototype.sendFileMessages=function(e){var t,n;Object(_bundle_a5600e6c["jc" /* s */])(e.every((function(e){return Rt(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Ct),e))}))).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);var r=new _bundle_1edafb8c_t;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.sendFileMessage(a).onPending((function(e){return r._trigger(e)})).onFailed((function(e,t){return r._triggerFailed(e,t)})).onSucceeded((function(e){return r._trigger(e)}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},n.prototype.resendFileMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){return n=this._validateFailedFileMessageHasFile(e,t),Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_We&&n&&!e.scheduledInfo).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=new _bundle_a5600e6c["vb" /* an */],i=_bundle_1edafb8c_kt(e,t),this._sendFileMessage(i,Er.RESEND,e.reqId).onFailed((function(e){return r.reject(e)})).onSucceeded((function(e){return r.resolve(e)})),[2,r.promise]}))}))},n.prototype.resendMessage=function(e,t){var n,r;if(Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_De&&!e.scheduledInfo&&e.isResendable).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),e.isUserMessage()){var i=null!==(n=e.messageParams)&&void 0!==n?n:Mt(e);return this._sendUserMessage(i,Er.RESEND,e.reqId)}if(e.isFileMessage()){var s=this._validateFailedFileMessageHasFile(e,t);Object(_bundle_a5600e6c["jc" /* s */])(s).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);i=null!==(r=e.messageParams)&&void 0!==r?r:_bundle_1edafb8c_kt(e,t);return this._sendFileMessage(i,Er.RESEND,e.reqId)}if(e.isMultipleFilesMessage())throw _bundle_a5600e6c["hc" /* q */].channelTypeNotSupportedError},n.prototype.updateFileMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_qt),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&function(e){return _bundle_1edafb8c_Lt(e)}(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=new Fn(Object(_bundle_a5600e6c["Xb" /* g */])({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(qn).message]}}))}))},n.prototype.cancelUploadingFileMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),is.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},n.prototype.copyFileMessage=function(e,t){var r,i,s;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof n&&t instanceof _bundle_1edafb8c_We&&t.sendingStatus===_bundle_a5600e6c["lb" /* ad */].SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),u=new _bundle_a5600e6c["vb" /* an */],c=Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t),{fileUrl:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,mentionType:t.mentionType,mentionedUserIds:null!==(r=t.mentionedUserIds)&&void 0!==r?r:null===(i=t.mentionedUsers)||void 0===i?void 0:i.map((function(e){return e.userId})),pushNotificationDeliveryOption:_bundle_a5600e6c["pb" /* ah */].DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:null===(s=t.thumbnails)||void 0===s?void 0:s.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:t.requireAuth,isPinnedMessage:!1})),e._sendFileMessage(c).onSucceeded((function(e){return u.resolve(e)})).onFailed((function(e){return u.reject(e)})),[2,u.promise]}))}))},n.prototype.copyMessage=function(e,t){Object(_bundle_a5600e6c["jc" /* s */])(e instanceof n&&t instanceof _bundle_1edafb8c_De&&t.sendingStatus===_bundle_a5600e6c["lb" /* ad */].SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);var r=t,i=e;if(r.isUserMessage()){Object(_bundle_a5600e6c["jc" /* s */])(!r.poll).throw(_bundle_a5600e6c["hc" /* q */].notSupportedError);var s=Tt(r);return i._sendUserMessage(s)}if(r.isFileMessage()){s=_bundle_1edafb8c_Ot(r);return i._sendFileMessage(s)}if(t.isMultipleFilesMessage())throw _bundle_a5600e6c["hc" /* q */].channelTypeNotSupportedError},n.prototype.deleteMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),e.messageId>0?(t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new zn({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n.prototype.addReaction=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le&&e.messageId>0&&Object(_bundle_a5600e6c["B" /* a */])("string",t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new Kn({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(jn).reactionEvent]}}))}))},n.prototype.deleteReaction=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le&&e.messageId>0&&Object(_bundle_a5600e6c["B" /* a */])("string",t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new Qn({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(Gn).reactionEvent]}}))}))},n.prototype._updateUserMessageMetaArray=function(e,t,n,r){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,s,a,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return i=_bundle_a5600e6c["v" /* V */].of(this._iid),s=i.dispatcher,a=i.requestQueue,o=new Ln({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,a.send(o)];case 1:return u=l.sent(),c=u.as(Dn).message,s.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[c],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},n.prototype._updateFileMessageMetaArray=function(e,t,n,r){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,s,a,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return i=_bundle_a5600e6c["v" /* V */].of(this._iid),s=i.dispatcher,a=i.requestQueue,o=new Fn({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,a.send(o)];case 1:return u=l.sent(),c=u.as(qn).message,s.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[c],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},n.prototype.createMessageMetaArrayKeys=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le&&e.messageId>0&&Object(_bundle_a5600e6c["k" /* K */])("string",t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=t.map((function(e){return new _bundle_1edafb8c_Ce({key:e})})),e instanceof _bundle_1edafb8c_We?[2,this._updateFileMessageMetaArray(e.messageId,n,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"add",!0)]}))}))},n.prototype.deleteMessageMetaArrayKeys=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le&&e.messageId>0&&Object(_bundle_a5600e6c["k" /* K */])("string",t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=t.map((function(e){return new _bundle_1edafb8c_Ce({key:e})})),e instanceof _bundle_1edafb8c_We?[2,this._updateFileMessageMetaArray(e.messageId,n,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},n.prototype.addMessageMetaArrayValues=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le&&e.messageId>0&&t.every((function(e){return e instanceof _bundle_1edafb8c_Ce}))).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),e instanceof _bundle_1edafb8c_We?[2,this._updateFileMessageMetaArray(e.messageId,t,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"add",!0)]}))}))},n.prototype.removeMessageMetaArrayValues=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_Le&&e.messageId>0&&t.every((function(e){return e instanceof _bundle_1edafb8c_Ce}))).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),e instanceof _bundle_1edafb8c_We?[2,this._updateFileMessageMetaArray(e.messageId,t,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},n.prototype.report=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["q" /* Q */])(_bundle_1edafb8c_Pt,e)&&Object(_bundle_a5600e6c["B" /* a */])("string",t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid),r=n.sdkState,i=n.requestQueue,s=new On({channelUrl:this.url,channelType:this.channelType,userId:r.userId,category:e,description:t}),[4,i.send(s)];case 1:return a.sent(),[2]}}))}))},n.prototype.reportUser=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_a5600e6c["u" /* U */]&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_1edafb8c_Pt,t)&&Object(_bundle_a5600e6c["B" /* a */])("string",n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid),i=r.sdkState,s=r.requestQueue,a=new Pn({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:e.userId,category:t,description:n}),[4,s.send(a)];case 1:return o.sent(),[2]}}))}))},n.prototype.reportMessage=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_De&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_1edafb8c_Pt,t)&&Object(_bundle_a5600e6c["B" /* a */])("string",n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid),i=r.sdkState,s=r.requestQueue,a=new kn({channelUrl:this.url,channelType:this.channelType,userId:i.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:t,description:n}),[4,s.send(a)];case 1:return o.sent(),[2]}}))}))},n.prototype.updatePoll=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.title,!0)&&Object(_bundle_a5600e6c["Eb" /* aw */])(e.data)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.allowUserSuggestion,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.allowMultipleVotes,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.closeAt,!0)}(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new Zn(Object(_bundle_a5600e6c["Xb" /* g */])({pollId:e},t)),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as($n).poll]}}))}))},n.prototype.deletePoll=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=Object(_bundle_a5600e6c["B" /* a */])("number",e),Object(_bundle_a5600e6c["jc" /* s */])(t).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new er({pollId:e}),[4,n.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.closePoll=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t=Object(_bundle_a5600e6c["B" /* a */])("number",e),Object(_bundle_a5600e6c["jc" /* s */])(t).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,r=new tr({pollId:e}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(nr).poll]}}))}))},n.prototype.addPollOption=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return n=Object(_bundle_a5600e6c["B" /* a */])("number",e)&&Object(_bundle_a5600e6c["B" /* a */])("string",t)&&""!==t.trim(),Object(_bundle_a5600e6c["jc" /* s */])(n).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=new rr({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:t}),[4,r.send(i)];case 1:return s=a.sent(),[2,s.as(ir).poll]}}))}))},n.prototype.updatePollOption=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return r=Object(_bundle_a5600e6c["B" /* a */])("number",e)&&Object(_bundle_a5600e6c["B" /* a */])("number",t)&&Object(_bundle_a5600e6c["B" /* a */])("string",n)&&""!==n.trim(),Object(_bundle_a5600e6c["jc" /* s */])(r).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),i=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,s=new sr({pollId:e,pollOptionId:t,optionText:n}),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(ar).poll]}}))}))},n.prototype.deletePollOption=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return n=Object(_bundle_a5600e6c["B" /* a */])("number",e)&&Object(_bundle_a5600e6c["B" /* a */])("number",t),Object(_bundle_a5600e6c["jc" /* s */])(n).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,i=new or({pollId:e,pollOptionId:t}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.votePoll=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return n=Object(_bundle_a5600e6c["B" /* a */])("number",e)&&Object(_bundle_a5600e6c["k" /* K */])("number",t),Object(_bundle_a5600e6c["jc" /* s */])(n).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid),i=r.requestQueue,s=r.dispatcher,a=new ur({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:t}),[4,i.send(a)];case 1:return o=c.sent(),u=o.as(cr).event,s.dispatch(new _bundle_a5600e6c["N" /* aD */]({event:u,source:_bundle_a5600e6c["x" /* X */].EVENT_POLL_VOTED})),[2,u]}}))}))},n.prototype.getPollChangeLogsSinceTimestamp=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,_bundle_a5600e6c["O" /* aE */].of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},n.prototype.getPollChangeLogsSinceToken=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e,!0)),[4,_bundle_a5600e6c["O" /* aE */].of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},n.prototype.createPollListQuery=function(e){return void 0===e&&(e=10),new _bundle_a5600e6c["kc" /* t */](this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},n.prototype.createPollVoterListQuery=function(e,t,n){return void 0===n&&(n=20),new _bundle_a5600e6c["nc" /* w */](this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:t,limit:n})},n}(_bundle_a5600e6c["I" /* a8 */]),Ur=function(t){function n(e){void 0===e&&(e={});var n=t.call(this)||this;return Object.keys(e).forEach((function(t){n.hasOwnProperty(t)&&(n[t]=e[t])})),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}((function(){this.onConnected=_bundle_a5600e6c["yb" /* aq */],this.onReconnectStarted=_bundle_a5600e6c["yb" /* aq */],this.onReconnectSucceeded=_bundle_a5600e6c["yb" /* aq */],this.onReconnectFailed=_bundle_a5600e6c["yb" /* aq */],this.onDisconnected=_bundle_a5600e6c["yb" /* aq */]})),Cr=function(t){function n(e){void 0===e&&(e={});var n=t.call(this)||this;return Object.keys(e).forEach((function(t){n.hasOwnProperty(t)&&(n[t]=e[t])})),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}((function(){this.onSessionExpired=_bundle_a5600e6c["yb" /* aq */],this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=_bundle_a5600e6c["yb" /* aq */],this.onSessionRefreshed=_bundle_a5600e6c["yb" /* aq */],this.onSessionClosed=_bundle_a5600e6c["yb" /* aq */]})),Or=function(t){function n(e){void 0===e&&(e={});var n=t.call(this)||this;return Object.keys(e).forEach((function(t){n.hasOwnProperty(t)&&(n[t]=e[t])})),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}((function(){this.onFriendsDiscovered=_bundle_a5600e6c["yb" /* aq */],this.onTotalUnreadMessageCountChanged=_bundle_a5600e6c["yb" /* aq */],this.onTotalUnreadMessageCountUpdated=_bundle_a5600e6c["yb" /* aq */]})),Pr=function(n){function i(e){var i=e.limit,s=e.token,a=e.userIdsFilter,o=e.metaDataKeyFilter,u=e.metaDataValuesFilter,c=e.nicknameStartsWithFilter,l=n.call(this)||this;return l.method=_bundle_a5600e6c["a" /* A */].GET,l.path=_bundle_a5600e6c["Ub" /* d */],l.params=Object(_bundle_a5600e6c["Vb" /* e */])({limit:i,token:s,user_ids:a,metadatakey:o,metadatavalues_in:u,nickname_startswith:c}),l}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]),kr=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.users=n.users.map((function(t){return new _bundle_a5600e6c["u" /* U */](e,t)})),r.next=n.next,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Rr=function(t){function n(e,n){var r,i,s,a=this;return(a=t.call(this,e,n)||this).userIdsFilter=null,a.metaDataKeyFilter=null,a.metaDataValuesFilter=null,a.nicknameStartsWithFilter=null,a.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,a.metaDataKeyFilter=null!==(i=n.metaDataKeyFilter)&&void 0!==i?i:null,a.metaDataValuesFilter=null!==(s=n.metaDataValuesFilter)&&void 0!==s?s:null,a.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.userIdsFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metaDataKeyFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.metaDataValuesFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metaDataKeyFilter,!0)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new Pr(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=u.sent(),r=n.as(kr),i=r.users,s=r.next,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["P" /* aF */]),xr=function(n){function i(e){var i=e.userId,s=e.limit,a=e.token,o=e.userIdsFilter,u=n.call(this)||this;return u.method=_bundle_a5600e6c["a" /* A */].GET,u.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(i,"/block"),u.params=Object(_bundle_a5600e6c["Vb" /* e */])({limit:s,token:a,user_ids:o}),u}return Object(_bundle_a5600e6c["A" /* _ */])(i,n),i}(_bundle_a5600e6c["Wb" /* f */]),Lr=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.users=n.users.map((function(t){return new _bundle_a5600e6c["u" /* U */](e,t)})),r.next=n.next,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Dr=function(t){function n(e,n){var r,i=this;return(i=t.call(this,e,n)||this).userIdsFilter=null,i.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.userIdsFilter,!0)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new xr(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{userId:t.userId,token:this._token}))),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),s=i.as(Lr),u=s.users,c=s.next,this._token=c,this._hasNext=!!c,this._isLoading=!1,[2,u];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["P" /* aF */]),Fr=function(n){function r(e){var r=e.userId,i=e.limit,s=e.token,a=n.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].GET,a.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(r),"/friends"),a.params={limit:i,token:s},a}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),qr=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.hasMore=n.has_more,r.users=n.users.map((function(t){return new _bundle_a5600e6c["u" /* U */](e,t)})),r.next=n.next,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),zr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Fr(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),s=i.as(qr),a=s.users,u=s.hasMore,c=s.next,this._token=c,this._hasNext=u,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["P" /* aF */]),Br={},Kr=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,i=e.cacheLimit,s=void 0===i?256:i,a=e.blockHashBase,o=void 0===a?2:a,u=e.blockHashMultiplier,c=void 0===u?10:u,l=e.blockHashConstant,d=void 0===l?11:l,h=e.transactionApplyDelay,f=void 0===h?200:h,p=e.disableLogger,m=void 0!==p&&p;return Br[t]||(this.itemSizeLimit=r,this.cacheLimit=s,this.blockHashBase=o,this.blockHashMultiplier=c,this.blockHashConstant=d,this.transactionApplyDelay=f,this.disableLogger=m,Br[t]=this),Br[t]}return e.get=function(e){return Br[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Nr||(Nr={}));var jr,Qr=function(t){function n(e){var r=e.code,i=void 0===r?Nr.UNKNOWN_ERROR:r,s=e.message,a=void 0===s?"Unknown error occurred.":s,o=t.call(this,a)||this;return o.code=i,Object.setPrototypeOf(o,n.prototype),o}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:Nr.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:Nr.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:Nr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:Nr.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotInitialized",{get:function(){return new n({code:Nr.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:Nr.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:Nr.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:Nr.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:Nr.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:Nr.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:Nr.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:Nr.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:Nr.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:Nr.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:Nr.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:Nr.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:Nr.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:Nr.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:Nr.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:Nr.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:Nr.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:Nr.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:Nr.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:Nr.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:Nr.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}(jr||(jr={}));var Gr,Vr=function(e,t){if(void 0===t&&(t=new WeakMap),"object"==typeof e&&null!==e){if(t.has(e))throw Qr.circularReferenceFound;t.set(e,!0);var n=void 0;if(Array.isArray(e))n=e.map((function(e){return Vr(e,t)}));else if(e instanceof RegExp)n=e;else if(e instanceof Date)n=e;else for(var r in n={},e)n[r]=Vr(e[r],t);return t.delete(e),n}return e},Hr=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw Qr.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},Wr=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},Yr=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},Jr=function(e,t){if(!t)return!1;if("function"!=typeof e){for(var n in e){if(["/and","&&"].includes(n)){if(e[n].some((function(e){return!Jr(e,t)})))return!1}else if(["/or","||"].includes(n)){if(e[n].every((function(e){return!Jr(e,t)})))return!1}else if("/where"===n){if(!(0,e[n])(t))return!1}else{var r=n;if("object"==typeof e[r]){var i=e[r];for(var s in i)switch(s){case"/eq":case"=":if((a=t[r])!==(o=i[s]))return!1;break;case"/neq":case"!=":if((a=t[r])===(o=i[s]))return!1;break;case"/gt":case">":var a=t[r],o=i[s];if(!(Hr(a,o)>0))return!1;break;case"/gte":case">=":a=t[r],o=i[s];if(!(Hr(a,o)>=0))return!1;break;case"/lt":case"<":a=t[r],o=i[s];if(!(Hr(a,o)<0))return!1;break;case"/lte":case"<=":a=t[r],o=i[s];if(!(Hr(a,o)<=0))return!1;break;case"/in":a=t[r];if(!(o=i[s]).includes(a))return!1;break;case"/nin":a=t[r];if((o=i[s]).includes(a))return!1;break;case"/contain":a=t[r],o=i[s];if(!a.includes(o))return!1;break;case"/regex":a=t[r];if(!(o=i[s]).test(a))return!1;break;case"/where":a=t[r];if(!(0,i[s])(a))return!1}}else if("function"==typeof e[r]){if(!e[r](t[r]))return!1}else if(e[r]!==t[r])return!1}}return!0}return e(t)},Xr=function(){},Zr=function(){return Promise.resolve()},$r=function(e){return e},ei=function(e,t){t()};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(Gr||(Gr={}));var ti,ni,ri,ii=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,i=void 0===r?null:r,s=e.iterator,a=e.map,o=void 0===a?$r:a,u=e.backward,c=void 0===u?Zr:u,l=e.forward,d=void 0===l?Zr:l,h=e.complete,f=void 0===h?Xr:h;this._prevValue=n,this._nextValue=i,this._error=null,this._map=o,this._backward=c,this._forward=d,this._iterator=s,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),si=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,s=e.blockManager,a=e.indexer;this.condition=n,this.backward=i,this._blockManager=s,this._indexer=a}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var i in this._indexer.fields){var s=this._indexer.fields[i],a=1;if("-"===s[0]&&(s=s.slice(1),a=-1),this.condition[s])if("object"==typeof this.condition[s]){var o=a>0?n:t;for(var u in this.condition[s])if(o.includes(u))for(var c=r;c>=0;c--)if(a*Hr(this._indexer.origin[c].columnValues[i],this.condition[s][u])<=0){r=c;break}}else for(c=r;c>=0;c--)if(a*Hr(this._indexer.origin[c].columnValues[i],this.condition[s])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var l=0;if("function"!=typeof this.condition)for(var d=function(r){var i=h._indexer.fields[r],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),h.condition[i])if("object"==typeof h.condition[i])Object.keys(h.condition[i]).forEach((function(a){if((s>0?t:n).includes(a))for(var o=l;o<e._indexer.origin.length;o++)if(s*Hr(e._indexer.origin[o].columnValues[r],e.condition[i][a])>=0){l=o;break}}));else for(var a=l;a<h._indexer.origin.length;a++)if(s*Hr(h._indexer.origin[a].columnValues[r],h.condition[i])>=0){l=a;break}},h=this,i=0;i<this._indexer.fields.length;i++)d(i);return Math.max(l-1,0)},e.prototype.each=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[++n]){if(!u._indexer.origin[++t])return!1;n=0}return!0}return!1},i=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[--n]){if(!u._indexer.origin[--t])return!1;n=u._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];a=this.backward?i:r,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if((o=c.sent())&&Jr(this.condition,o))return s=o,[3,4];c.label=3;case 3:if(a())return[3,1];c.label=4;case 4:return[4,new Promise((function(a){var o=new ii({initialNextValue:Vr(s),iterator:e,forward:function(){return Object(_bundle_a5600e6c["Ib" /* b */])(u,void 0,void 0,(function(){var e,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:e=this.backward?i:r,a.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=a.sent())&&Jr(this.condition,s)?[2,Vr(s)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return Object(_bundle_a5600e6c["Ib" /* b */])(u,void 0,void 0,(function(){var e,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:e=this.backward?r:i,a.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=a.sent())&&Jr(this.condition,s)?[2,Vr(s)]:[3,1];case 3:return[2,null]}}))}))},complete:a});e(o)}))];case 5:return[2,c.sent()]}}))}))},e}(),ai=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,s=e.mutex,a=e.blockManager,o=e.indexer;this._mutex=s,this._iterator=new si({condition:n,backward:i,blockManager:a,indexer:o})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw Qr.collectionQueryNotValid;a.label=1;case 1:return a.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return a.sent(),[4,this._iterator.each((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(s,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return a.sent(),this._mutex.unlock(),[2,r];case 4:throw i=a.sent(),this._mutex.unlock(),i;case 5:return[2]}}))}))},e.prototype.count=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),oi=function(e){return"".concat("nest","@").concat(e)},ui=function(e,t){return"".concat(oi(e),"/").concat(t)},ci=function(e,t){return"".concat(ui(e,t),".metadata")},li=function(e,t){return"".concat(ui(e,t),"/block.")},di=function(e,t){return"".concat(ui(e,t),"/blob.")},hi=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this.store=r}return e.prototype.get=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return[4,this.store.get(e)];case 1:return(t=l.sent())?(n=t.data,r=t.type,"undefined"==typeof fetch?[3,4]:[4,fetch(n)]):[3,5];case 2:return[4,l.sent().blob()];case 3:return[2,l.sent()];case 4:for(512,i=[],s=atob(n.split(",")[1]),a=0;a<s.length;a+=512){for(o=s.slice(a,a+512),u=new Array(o.length),c=0;c<o.length;c++)u[c]=o.charCodeAt(c);i.push(new Uint8Array(u))}return[2,new Blob(i,{type:r})];case 5:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(n){var r=function(e,t,n,r){return void 0===r&&(r=0),"".concat(di(e,t)).concat(n,".").concat(r)}(a.dbname,a.collectionName,t),i=new FileReader;i.onload=function(){n({blobId:r,data:i.result,type:e.type})},i.readAsDataURL(e)}))];case 1:return n=o.sent(),r=n.blobId,i=n.data,s=n.type,[4,this.store.set({key:r,value:{data:i,type:s}})];case 2:return o.sent(),[2,r]}}))}))},e.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=di(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=r.sent(),[4,Promise.all(t.filter((function(t){return t.startsWith(e)})).map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return[2,t.sent()]}}))}))})))];case 2:return r.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(ti||(ti={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(ni||(ni={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(ri||(ri={}));var fi,pi,mi=[ni.PENDING,ni.VOLATILE],vi={},yi=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return vi[t]||(this.dbname=t,this._items=[],this._limit=r,vi[t]=this),vi[t]}return e.get=function(e){return vi[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=ri.DEFAULT),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(i=s.sent())&&(r={key:t,value:i,state:n===ri.PERSISTENT?ni.PERSISTENT:ni.VOLATILE},this.put(r)),[3,3];case 2:n===ri.PERSISTENT&&(r.state=ni.PERSISTENT),s.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=ri.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===ri.PERSISTENT&&(r.state=ni.PERSISTENT),t!==ri.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){var t,n;if(this._limit>0){var r=this._items.map((function(e){return e.key})).indexOf(e.key);if(r>-1)mi.includes(this._items[r].state)&&mi.includes(e.state)?(this._items.splice(r,1),this._items.push(e)):(this._items[r].state=e.state,this._items[r].value=e.value);else{this._items.push(e);var i=this._items.filter((function(e){return e.state===ni.VOLATILE})),s=i.length-this._limit;if(s>0){var a=[];try{for(var o=Object(_bundle_a5600e6c["ic" /* r */])(this._items),u=o.next();!u.done;u=o.next()){var c=u.value;c.state===ni.VOLATILE&&s>0?s--:a.push(c)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this._items=a}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==ni.VOLATILE}))},e}(),_i=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(ui(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(ui(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(e),!1)),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var i=e[r],s=[],a=i.requests.length-1;a>=0;a--){var o=i.requests[a],u=o.data;n[u.key]||(s.unshift(o),n[u.key]=!0)}s.length>0&&(i.requests=s,t.unshift(i))}return t},e.prototype._applyRecord=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,d;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(h){switch(h.label){case 0:n=yi.get(this.dbname),r=t.generation,i=t.requests,s=null,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._store.setMany(i.map((function(e){return Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e.data),{generation:r})})))];case 2:for(a=h.sent(),u=0;u<i.length;u++)a[u]instanceof Error&&(s||(s=a[u]),c=i[u].data,n.put(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},c),{state:ni.PERSISTENT})));return[3,4];case 3:return l=h.sent(),s=l,[3,4];case 4:return s?[3,6]:(d=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:d})]);case 5:return h.sent(),this._onWrite.forEach((function(e){e(i.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){s&&e(s)})),h.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),n=Object(_bundle_a5600e6c["ic" /* r */])(t),r=n.next(),u.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._applyRecord(t,i)]);case 5:u.sent(),u.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s=u.sent(),a={error:s},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}return[7];case 10:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case ti.COMMIT:this._onCommit.set(t,n);break;case ti.WRITE:this._onWrite.set(t,n);break;case ti.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){this._requests.push({data:e,options:t}),yi.get(this.dbname).put(Object(_bundle_a5600e6c["Xb" /* g */])({state:ni.PENDING},e))},e.prototype.requestMultipleWrite=function(e,t){var n,r,i=yi.get(this.dbname);try{for(var s=Object(_bundle_a5600e6c["ic" /* r */])(e),a=s.next();!a.done;a=s.next()){var u=a.value;this._requests.push({data:u,options:t}),i.put(Object(_bundle_a5600e6c["Xb" /* g */])({state:ni.PENDING},u))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return yi.get(this.dbname).clearByCondition((function(e){return e.state===ni.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,c,l,d,h,f=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(p){switch(p.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},u=e.length-1;u>=0;u--)r=e[u],l=r.data,n[l.key]||(n[l.key]=!0,t.unshift(r));return i={generation:this.generation,requests:t},[4,this._getReducedRecordset([i])];case 1:return s=p.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return p.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(p.sent(),a=yi.get(this.dbname),u=0;u<t.length;u++)c=t[u],l=c.data,d=c.options,a.put(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},l),{state:d&&d.persistent?ni.PERSISTENT:ni.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),h=Kr.get(this.dbname),setTimeout((function(){try{f._applyRecord(s,i)}catch(e){f._onError.forEach((function(t){return t(e)}))}}),h.transactionApplyDelay),p.label=4;case 4:return[2]}}))}))},e}(),gi=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,i=void 0===r?[]:r,s=e.limit;this.blockId=t,this.keyName=n,this.limit=s,this._items=Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(i),!1)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this,n=this._items.find((function(n){var r=n[t.keyName];return e===r}));return null!=n?n:null},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),bi=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,i=e.hashFunction,s=void 0===i?Wr:i,a=e.transaction,o=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=s,this.metadata=r,this._transaction=a,this._store=o}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,i=t,s="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||Wr)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(li(n,r)).concat(i,".").concat(s);var n,r,i,s},e.prototype._findBlock=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:t=yi.get(this.dbname),n=this.metadata.blockLevel,a.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((i=a.sent())&&(s=gi.createFromCacheItem(i),null==s?void 0:s.getItemByKey(e)))return[2,s];a.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return n=Kr.get(this.dbname),r=this.createBlockId(e),i=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,yi.get(this.dbname).find(this._store,r)];case 1:return s=o.sent(),(null==(a=s?gi.createFromCacheItem(s):new gi({blockId:r,keyName:this.keyName,items:[],limit:i}))?void 0:a.add(t))?(this._transaction.requestWrite({key:a.blockId,value:a.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=li(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=r.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:return r.sent(),[4,this._transaction.clear()];case 3:return r.sent(),yi.get(this.dbname).clearByCondition((function(t){return t.key.startsWith(e)})),[2]}}))}))},e}(),Ii={},Ei=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.fields,s=e.transaction,a=e.store,o=this;this._origin=[],this._table=[];var u=function(e,t,n){return"".concat(ui(e,t),"/index.").concat(n)}(t,n,i.join(">"));return Ii[u]||(this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=i,this.indexerKey=u,this._transaction=s,this._store=a,this._transaction.on(ti.COMMIT,this.indexerKey,(function(){return o.commit()})),this._transaction.on(ti.ERROR,this.indexerKey,(function(){return o.abort()}))),Ii[u]}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.clearIndexerMap=function(){for(var e in Ii)delete Ii[e]},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(_bundle_a5600e6c["gc" /* p */])(this.indexOf(n),2),i=r[0];return r[1]?!this._table[i].keys.includes(t)&&(this._table[i].keys.push(t),!0):(this._table.splice(i,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=Object(_bundle_a5600e6c["gc" /* p */])(this.indexOf(n),2),i=r[0];if(r[1]){var s=this._table[i].keys.indexOf(t);if(s>-1)return this._table[i].keys.splice(s,1),0===this._table[i].keys.length&&this._table.splice(i,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){var t,n,r,i,s=[];try{for(var a=Object(_bundle_a5600e6c["ic" /* r */])(this.fields),o=a.next();!o.done;o=a.next()){var u=o.value;if("-"===u[0]&&(u=u.slice(1)),r=e[u],i=void 0,i=typeof r,null!==r&&"undefined"!==i&&"boolean"!==i&&"number"!==i&&"string"!==i)throw Qr.indexTypesNotMatch;s.push(e[u])}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,i=Hr(e[n],t[n]);if(0!==i)return r*i}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),i=this.diff(e,this._table[r].columnValues);if(i>0)t=r+1;else{if(!(i<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u,c,l,d,h,f,p,v,y;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(_){switch(_.label){case 0:return[4,(e=yi.get(this.dbname)).find(this._store,this.indexerKey,ri.PERSISTENT)];case 1:return(t=_.sent())?[3,11]:(n=li(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=_.sent(),_.label=3;case 3:_.trys.push([3,8,9,10]),i=Object(_bundle_a5600e6c["ic" /* r */])(r),s=i.next(),_.label=4;case 4:return s.done?[3,7]:(a=s.value).startsWith(n)?[4,e.find(this._store,a,ri.NO_CACHE)]:[3,6];case 5:if(o=_.sent(),u=gi.createFromCacheItem(o))try{for(v=void 0,c=Object(_bundle_a5600e6c["ic" /* r */])(u.items),l=c.next();!l.done;l=c.next())d=l.value,this._addItem(d)}catch(e){v={error:e}}finally{try{l&&!l.done&&(y=c.return)&&y.call(c)}finally{if(v)throw v.error}}_.label=6;case 6:return s=i.next(),[3,4];case 7:return[3,10];case 8:return h=_.sent(),f={error:h},[3,10];case 9:try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=Vr(this._origin),_.label=12;case 12:return Ii[this.indexerKey]=this,[2]}}))}))},e.prototype.drop=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return yi.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),delete Ii[this.indexerKey],[2]}}))}))},e.prototype.addItem=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=Vr(this._origin)},e.prototype.abort=function(){this._table=Vr(this._origin)},e}(),Ti=function(){return"undefined"!=typeof document&&"undefined"!=typeof navigator&&"ReactNative"!==navigator.product},wi=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(fi||(fi={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(pi||(pi={}));var Mi,Si={},Ni=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=fi.PROCESSING,this._queue=[],this._activationQueue=[],Si[e]&&!t.forceCreate||(this.nodeId=wi(),this.key=e,Ti()&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t,r,i=e.data,s=i.nodeId,a=i.requestId,o=i.key,u=i.op,c=i.data;if(s!==n.nodeId&&o===n.key)switch(u){case pi.NEWNODE:n._sendSync();break;case pi.CLAIM_HOST:n._sendSync(),n._hostId=s;break;case pi.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);var l=c,d=l.currentItemRequestId,h=l.queue,f=function(e){var t=n._queue.findIndex((function(t){return t.requestId===e.requestId}));t<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:pi.REQUEST_LOCK,ts:e.ts})};try{for(var p=Object(_bundle_a5600e6c["ic" /* r */])(h),v=p.next();!v.done;v=p.next()){f(v.value)}}catch(e){t={error:e}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}n._currentItem=n._queue.find((function(e){return e.requestId===d})),n._completeSync()}break;case pi.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==i.nodeId})),n._currentItem&&n._currentItem.nodeId===i.nodeId&&(n._currentItem=void 0,n._acquire(n._queue[0]));break;case pi.REQUEST_LOCK:n._requestLock(i);break;case pi.ACQUIRE_LOCK:var y=n._queue.find((function(e){return e.requestId===a}));n._acquire(y);break;case pi.RELEASE_LOCK:n._release(a)}})),window.addEventListener("beforeunload",(function(){n._send(pi.REMOVENODE)}))),Si[e]=this),Si[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==fi.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n;void 0===t&&(t={});var r={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:wi(),key:this.key,op:e,data:t.data,ts:Date.now()};return Ti()&&window.postMessage(r,"*"),r},e.prototype._acquire=function(e){e?(this._currentItem=e,this._currentItem.onAcquired&&this._currentItem.onAcquired(e.requestId)):this._currentItem=void 0},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(pi.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased&&t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(pi.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},i=!1;for(var s in t._queue)if(t._queue[s].ts>r.ts){t._queue.splice(parseInt(s),0,r),i=!0;break}i||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(pi.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=fi.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(pi.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(pi.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(pi.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)&&this._release(this._currentItem.requestId)},e}(),Ai=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.keyHash,s=e.indexes,a=e.store,o=this;this._state=jr.INIT,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=Object(_bundle_a5600e6c["fc" /* o */])([[r]],Object(_bundle_a5600e6c["gc" /* p */])(s.filter((function(e){return Ei.createKey(e)!==o.keyName}))),!1),this._keyHash=i,this._store=a,this._mutex=new Ni(function(e,t){return"".concat(ui(e,t),".lock")}(t,n)),this._blobContainer=new hi({dbname:t,collectionName:n,store:a}),this._transaction=new _i({dbname:t,collectionName:n,store:a})}return e.metadataOf=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return r=ci(e,t),[4,n.get(r)];case 1:return[2,i.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===jr.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,v,y,_=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(g){switch(g.label){case 0:return[4,this._mutex.lock()];case 1:g.sent(),g.label=2;case 2:return g.trys.push([2,9,,10]),t=Kr.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=g.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:g.sent(),this._blockManager=new bi({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this.indexes),!1),i=[],s=r.map((function(e){return Ei.createKey(e)})),a=n?n.indexes.map((function(e){return Ei.createKey(e)})):[];try{for(o=Object(_bundle_a5600e6c["ic" /* r */])(a),u=o.next();!u.done;u=o.next())c=u.value,s.includes(c)||i.push(Ei.parseKey(c))}catch(e){v={error:e}}finally{try{u&&!u.done&&(y=o.return)&&y.call(o)}finally{if(v)throw v.error}}return(l=[]).push.apply(l,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r.map((function(e){var t=new Ei({dbname:_.dbname,collectionName:_.name,keyName:_.keyName,fields:e,transaction:_._transaction,store:_._store});return _._indexers.push(t),t.ensure()}))),!1)),l.push.apply(l,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(i.map((function(e){return new Ei({dbname:_.dbname,collectionName:_.name,keyName:_.keyName,fields:e,transaction:_._transaction,store:_._store}).drop()}))),!1)),[4,Promise.all(l)];case 5:return g.sent(),[4,this._transaction.commit()];case 6:return g.sent(),s.sort().join(",")===a.sort().join(",")?[3,8]:(d=ci(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:d,value:this._metadata})]);case 7:g.sent(),g.label=8;case 8:return this._state=jr.READY,this._mutex.unlock(),[3,10];case 9:throw h=g.sent(),this._mutex.unlock(),h;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=jr.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){var t,n;void 0===e&&(e=null),e||(e=[this.keyName]);var r=Ei.createKey(e);try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),s=i.next();!s.done;s=i.next()){var a=s.value;if(r===Ei.createKey(a.fields))return a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw Qr.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=ci(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return o.sent()?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return o.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return o.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:o.sent(),o.label=5;case 5:o.trys.push([5,10,11,12]),n=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),r=n.next(),o.label=6;case 6:return r.done?[3,9]:[4,r.value.addItem(e)];case 7:o.sent(),o.label=8;case 8:return r=n.next(),[3,6];case 9:return[3,12];case 10:return i=o.sent(),s={error:i},[3,12];case 11:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw Qr.collectionInsertDuplicate;case 14:return[2]}}))}))},e.prototype._requestUpsert=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(p){switch(p.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=p.sent())?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return p.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return p.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:p.sent(),p.label=5;case 5:p.trys.push([5,10,11,12]),r=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),i=r.next(),p.label=6;case 6:return i.done?[3,9]:[4,(u=i.value).addItem(e)];case 7:p.sent(),p.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return s=p.sent(),l={error:s},[3,12];case 11:try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(l)throw l.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,e)];case 14:p.sent(),p.label=15;case 15:p.trys.push([15,21,22,23]),a=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),o=a.next(),p.label=16;case 16:return o.done?[3,20]:0===(u=o.value).diff(u.getColumnValues(n),u.getColumnValues(e))?[3,19]:[4,u.removeItem(n)];case 17:return p.sent(),[4,u.addItem(e)];case 18:p.sent(),p.label=19;case 19:return o=a.next(),[3,16];case 20:return[3,23];case 21:return c=p.sent(),h={error:c},[3,23];case 22:try{o&&!o.done&&(f=a.return)&&f.call(a)}finally{if(h)throw h.error}return[7];case 23:return[2]}}))}))},e.prototype._requestUpdate=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=c.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,11];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,9,10,11]),r=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),i=r.next(),c.label=4;case 4:return i.done?[3,8]:0===(s=i.value).diff(s.getColumnValues(n),s.getColumnValues(e))?[3,7]:[4,s.removeItem(n)];case 5:return c.sent(),[4,s.addItem(e)];case 6:c.sent(),c.label=7;case 7:return i=r.next(),[3,4];case 8:return[3,11];case 9:return a=c.sent(),o={error:a},[3,11];case 10:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 11:return[2]}}))}))},e.prototype._requestRemove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=o.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,10];case 2:o.sent(),o.label=3;case 3:o.trys.push([3,8,9,10]),n=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),r=n.next(),o.label=4;case 4:return r.done?[3,7]:[4,r.value.removeItem(t)];case 5:o.sent(),o.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return i=o.sent(),s={error:i},[3,10];case 9:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},e.prototype._requestClear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),e=Object(_bundle_a5600e6c["ic" /* r */])(this._indexers),t=e.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=e.next(),[3,3];case 6:return[3,9];case 7:return n=s.sent(),r={error:n},[3,9];case 8:try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}return[7];case 9:return[2]}}))}))},e.prototype.getByKey=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,Vr(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw Qr.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){if(void 0===e&&(e={}),this.isReady)return new ai({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward});throw Qr.collectionNotReady},e.prototype.insertOne=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Qr.collectionKeyNotGiven;return[4,this._requestInsert(Vr(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Qr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!u._hasPropertyOfKeyName(e)})))throw Qr.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestInsert(Vr(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=c.sent(),a={error:i},[3,10];case 9:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(a)throw a.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Qr.collectionNotReady;case 16:return[2]}}))}))},e.prototype.upsertOne=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Qr.collectionKeyNotGiven;return[4,this._requestUpsert(Vr(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Qr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!u._hasPropertyOfKeyName(e)})))throw Qr.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestUpsert(Vr(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=c.sent(),a={error:i},[3,10];case 9:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(a)throw a.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Qr.collectionNotReady;case 16:return[2]}}))}))},e.prototype.update=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw Qr.collectionKeyNotGiven;return[4,this._requestUpdate(Vr(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Qr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u,c,l,d,h,f,p,v,y=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(_){switch(_.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:_.sent(),_.label=2;case 2:return _.trys.push([2,13,,15]),n=e.where,r=void 0===n?{}:n,i=e.index,s=void 0===i?null:i,a=e.backward,o=void 0!==a&&a,u=[],[4,new si({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(s)}).each((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(y,void 0,void 0,(function(){var n,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(n=e.nextValue,Jr(r,n)&&t.set){if("function"!=typeof t.set)for(i in t.set)n[i]=t.set[i];else t.set(n);u.push(n)}e.next()}else e.stop();return[2]}))}))}))];case 3:_.sent(),_.label=4;case 4:_.trys.push([4,9,10,11]),c=Object(_bundle_a5600e6c["ic" /* r */])(u),l=c.next(),_.label=5;case 5:return l.done?[3,8]:(d=l.value,[4,this._requestUpdate(Vr(d))]);case 6:_.sent(),_.label=7;case 7:return l=c.next(),[3,5];case 8:return[3,11];case 9:return h=_.sent(),p={error:h},[3,11];case 10:try{l&&!l.done&&(v=c.return)&&v.call(c)}finally{if(p)throw p.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return _.sent(),this._mutex.unlock(),[2,u];case 13:return f=_.sent(),[4,this._transaction.clear()];case 14:throw _.sent(),this._mutex.unlock(),f;case 15:return[3,17];case 16:throw this._transaction.clear(),Qr.collectionNotReady;case 17:return[2]}}))}))},e.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Qr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f,p,v=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(y){switch(y.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:y.sent(),y.label=2;case 2:return y.trys.push([2,13,,14]),t=e.where,n=void 0===t?{}:t,r=e.index,i=void 0===r?null:r,s=e.backward,a=void 0!==s&&s,o=[],[4,new si({condition:n,blockManager:this._blockManager,backward:a,indexer:this._getIndexerBy(i)}).each((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(v,void 0,void 0,(function(){var t,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){if(e.error)throw e.stop(),e.error;return e.hasNext?(t=e.nextValue,Jr(n,t)&&(r=t[this.keyName],o.push(r)),e.next()):e.stop(),[2]}))}))}))];case 3:y.sent(),y.label=4;case 4:y.trys.push([4,9,10,11]),u=Object(_bundle_a5600e6c["ic" /* r */])(o),c=u.next(),y.label=5;case 5:return c.done?[3,8]:(l=c.value,[4,this._requestRemove(l)]);case 6:y.sent(),y.label=7;case 7:return c=u.next(),[3,5];case 8:return[3,11];case 9:return d=y.sent(),f={error:d},[3,11];case 10:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return y.sent(),this._mutex.unlock(),[2,o];case 13:throw h=y.sent(),this._mutex.unlock(),h;case 14:return[3,16];case 15:throw this._transaction.clear(),Qr.collectionNotReady;case 16:return[2]}}))}))},e.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw Qr.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),Ui="[NESTDB]",Ci=!0,Oi=function(){function e(){}return e.off=function(){Ci=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ci&&console.log.apply(console,Object(_bundle_a5600e6c["fc" /* o */])(["".concat(Ui,"[LOG]")],Object(_bundle_a5600e6c["gc" /* p */])(e),!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ci&&console.warn.apply(console,Object(_bundle_a5600e6c["fc" /* o */])(["".concat(Ui,"[WARNING]")],Object(_bundle_a5600e6c["gc" /* p */])(e),!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ci&&console.error.apply(console,Object(_bundle_a5600e6c["fc" /* o */])(["".concat(Ui,"[ERROR]")],Object(_bundle_a5600e6c["gc" /* p */])(e),!1))},e}(),Pi=[{},{a:700400,n:"error"}],ki=function(){function e(e){var t,n,r;this.encryption=null!==(t=e.encryption)&&void 0!==t?t:_bundle_a5600e6c["Q" /* aG */],this.itemSizeLimit=null!==(n=e.itemSizeLimit)&&void 0!==n?n:4194304,this.metadataBuffer=null!==(r=e.metadataBuffer)&&void 0!==r?r:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(e,t){return void 0===t&&(t=""),"".concat(e).concat(t)},e.prototype._generateShardPostfixArray=function(e){return void 0===e&&(e=1),Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(Array(e).keys()),!1)},e.prototype._shardify=function(e){var t=this,n=e.key,r=e.value,i=JSON.stringify(this.encryption.encrypt(r)),s=Math.ceil(i.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map((function(e){var r={key:t._getRawKey(n,".".concat(e)),data:i.substring(e*t.adjustedItemSizeLimit,(e+1)*t.adjustedItemSizeLimit)};return 0===e&&(r.metadata={shards:s}),r}))},e.prototype._resetIfEncryptionChanged=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u,c=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(e=l.sent(),t={encrypted:Pi.map((function(e){var t;return null===(t=c.encryption)||void 0===t?void 0:t.encrypt(e)}))},!(e&&e.encrypted&&Array.isArray(e.encrypted)))return[3,6];for(i in n=e.encrypted,r=[],n)r.push(i);s=0,l.label=2;case 2:return s<r.length?(i=r[s])in n?(a=i,o=JSON.stringify(e.encrypted[a]),u=JSON.stringify(t.encrypted[a]),o===u?[3,4]:(Oi.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return l.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return e?[3,8]:[4,this.clear()];case 7:l.sent(),l.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 9:return l.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return e=0,[4,this._getAllRawKeys()];case 1:t=c.sent(),c.label=2;case 2:c.trys.push([2,7,8,9]),n=Object(_bundle_a5600e6c["ic" /* r */])(t),r=n.next(),c.label=3;case 3:return r.done?[3,6]:(i=r.value,[4,this._getRaw(i)]);case 4:(s=c.sent())&&(e+=JSON.stringify(s).length),c.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return a=c.sent(),o={error:a},[3,9];case 8:try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(o)throw o.error}return[7];case 9:return[2,e]}}))}))},e.prototype.getAllKeys=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter((function(e){return e.endsWith(".0")})).map((function(e){return e.replace(/\.0$/,"")})).filter((function(t){return!e._reservedKeys.includes(t)}))]}}))}))},e.prototype.get=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:if(!(n=u.sent()))return[3,7];u.label=2;case 2:return u.trys.push([2,6,,7]),r=n.data,(null==(i=n.metadata)?void 0:i.shards)&&i.shards>1?[4,Promise.all(this._generateShardPostfixArray(null==i?void 0:i.shards).map((function(t){return Object(_bundle_a5600e6c["Ib" /* b */])(o,void 0,void 0,(function(){var n,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t>0?(n=this._getRawKey(e,".".concat(t)),[4,this._getRaw(n)]):[3,2];case 1:if(!(i=s.sent()))throw Qr.storeBrokenIntegrity;return[2,i.data];case 2:return[2,r]}}))}))})))]:[3,4];case 3:return a=u.sent(),[3,5];case 4:a=[r],u.label=5;case 5:return s=a,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return u.sent(),[2,null];case 7:return[2,null]}}))}))},e.prototype.set=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return t=this._shardify(e),[4,this._setRaw(t)];case 1:return n.sent(),[2,Object(_bundle_a5600e6c["Xb" /* g */])({},e.value)]}}))}))},e.prototype.setMany=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(e.map((function(e){return n._shardify(e)}))),!1)))];case 1:return r.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:return(n=s.sent())?(r=n.metadata,[4,this._removeRaw(this._generateShardPostfixArray(null==r?void 0:r.shards).map((function(t){return i._getRawKey(e,".".concat(t))})))]):[3,3];case 2:return s.sent(),[2,!0];case 3:return[2,!1]}}))}))},e.prototype.removeMany=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:t=[],n=function(e){var n,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return n=r._getRawKey(e,".0"),[4,r._getRaw(n)];case 1:return(i=a.sent())&&(s=i.metadata,t.push.apply(t,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r._generateShardPostfixArray(null==s?void 0:s.shards).map((function(t){return l._getRawKey(e,".".concat(t))}))),!1))),[2]}}))},r=this,d.label=1;case 1:d.trys.push([1,6,7,8]),i=Object(_bundle_a5600e6c["ic" /* r */])(e),s=i.next(),d.label=2;case 2:return s.done?[3,5]:(a=s.value,[5,n(a)]);case 3:d.sent(),d.label=4;case 4:return s=i.next(),[3,2];case 5:return[3,8];case 6:return o=d.sent(),u={error:o},[3,8];case 7:try{s&&!s.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}return[7];case 8:return t.length>0?[4,this._removeRaw(t)]:[3,10];case 9:d.sent(),d.label=10;case 10:return[2,e]}}))}))},e}(),Ri={},xi=function(t){function n(e){void 0===e&&(e={});var n,r=this;r=t.call(this,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{itemSizeLimit:null!==(n=e.itemSizeLimit)&&void 0!==n?n:4194304}))||this;var i=e.delay,s=void 0===i?1:i;return r.delay=s,r.observer={},r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"rawData",{get:function(){return Ri[this.dbname]},set:function(e){Ri[this.dbname]=e},enumerable:!1,configurable:!0}),n.prototype._getAllRawKeys=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){if(Ri[this.dbname])return[2,Object.keys(Ri[this.dbname])];throw Qr.storeNotAvailable}))}))},n.prototype._getRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return Ri[this.dbname]?[4,Yr(this.delay)]:[3,2];case 1:return t.sent(),[2,Ri[this.dbname][e]?Object(_bundle_a5600e6c["Xb" /* g */])({key:e},Ri[this.dbname][e]):null];case 2:throw Qr.storeNotAvailable}}))}))},n.prototype._setRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return Ri[this.dbname]?[4,Yr(this.delay)]:[3,2];case 1:c.sent();try{for(t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,s=r.data,a=r.metadata,Ri[this.dbname][i]=Object.freeze({data:s,metadata:a})}catch(e){o={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(o)throw o.error}}return[3,3];case 2:throw Qr.storeNotAvailable;case 3:return[2]}}))}))},n.prototype._removeRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Ri[this.dbname]?[4,Yr(this.delay)]:[3,2];case 1:a.sent();try{for(t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next();!n.done;n=t.next())r=n.value,Ri[this.dbname][r]&&delete Ri[this.dbname][r]}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[3,3];case 2:throw Qr.storeNotAvailable;case 3:return[2]}}))}))},n.prototype.observe=function(e,t,n){var r=this;this.observer[e]||(this.observer[e]={}),t.forEach((function(t){return r.observer[e][t]=n}))},n.prototype.checkAvailability=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2]}))}))},n.prototype.init=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,Ri[this.dbname]||(Ri[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},n.prototype.set=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){if((n=this.observer[e.key])&&"function"==typeof n.set&&(r=n.set()))throw r;return[2,t.prototype.set.call(this,e)]}))}))},n.prototype.setMany=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i,s,a,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){try{for(n=Object(_bundle_a5600e6c["ic" /* r */])(e),r=n.next();!r.done;r=n.next())if(i=r.value,(s=this.observer[i.key])&&"function"==typeof s.set&&(a=s.set()))throw a}catch(e){o={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(o)throw o.error}}return[2,t.prototype.setMany.call(this,e)]}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,Yr(this.delay)];case 1:return e.sent(),Ri[this.dbname]={},[2]}}))}))},n}(ki),Li="NestDBStore";!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"}(Mi||(Mi={}));var Di=function(t){function n(e){void 0===e&&(e={});var n,r=this;return(r=t.call(this,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{itemSizeLimit:null!==(n=e.itemSizeLimit)&&void 0!==n?n:104857600}))||this)._storeName=Li,r._state=Mi.UNINITIALIZED,r._openJobQueue=[],r._window="undefined"!=typeof window?window:void 0,r._indexedDb=r._window?r._window.indexedDB||r._window.mozIndexedDB||r._window.webkitIndexedDB||r._window.msIndexedDB:void 0,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype._openDatabase=function(e){var t=this;return new Promise((function(n,r){if(t._indexedDb){t._state=Mi.OPENING;var i=t._indexedDb.open(e);i.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(Li,{keyPath:"key"})})),i.addEventListener("success",(function(r){t._state=Mi.OPEN,t._database=r.target.result,t._openJobQueue.forEach((function(e){return e()})),t._openJobQueue=[],t._database.onclose=function(){t._database=void 0,t._state=Mi.OPENING,setTimeout((function(){t._openDatabase(e)}),5)},n(t._database)})),i.addEventListener("error",(function(e){t._state=Mi.UNINITIALIZED,r(e.target.error)}))}else r(Qr.storeNotAvailable)}))},n.prototype._getObjectStore=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this._database?[2,this._database.transaction(this._storeName,e).objectStore(this._storeName)]:[3,1];case 1:switch(this._state){case Mi.UNINITIALIZED:case Mi.OPEN:return[3,2];case Mi.OPENING:case Mi.CLOSED:return[3,3]}return[3,4];case 2:throw Qr.storeNotInitialized;case 3:return[2,new Promise((function(n){t._openJobQueue.push((function(){return n(t._getObjectStore(e))}))}))];case 4:return[4,this._getObjectStore(e)];case 5:return[2,n.sent()]}}))}))},n.prototype._getAllRawKeys=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.getAllKeys();r.addEventListener("success",(function(e){t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},n.prototype._getRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return t=n.sent(),[4,new Promise((function(n,r){var i=t.get(e);i.addEventListener("success",(function(e){var t;n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.result)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 2:return[2,n.sent()]}}))}))},n.prototype._setRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=n.sent(),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.put(e);i.addEventListener("success",(function(e){n(e.target.result)})),i.addEventListener("error",(function(){r("Failed to write.")}))}))})))];case 2:return n.sent(),[2]}}))}))},n.prototype._removeRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return t=n.sent(),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.delete(e);i.addEventListener("success",(function(){return n(e)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 2:return n.sent(),[2]}}))}))},n.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},n.prototype.checkAvailability=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:if(!((null==(e="undefined"!=typeof window?window:null)?void 0:e.indexedDB)||(null==e?void 0:e.mozIndexedDB)||(null==e?void 0:e.webkitIndexedDB)||(null==e?void 0:e.msIndexedDB)))return[3,6];if(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,!this._window||!Ti())return[3,4];if(!(Ti()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw Qr.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise((function(e,n){if(t._indexedDb)try{var r=t._indexedDb.open("_testMozilla");r.onerror=function(){return n(Qr.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}catch(e){n(Qr.storeNotAvailableInPrivateBrowsing)}else n(Qr.storeNotAvailable)}))];case 2:n.sent(),n.label=3;case 3:return[3,5];case 4:throw Qr.storeNotAvailable;case 5:return[3,7];case 6:throw Qr.storeNotAvailable;case 7:return[2]}}))}))},n.prototype.init=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return t.sent(),[4,this._openDatabase(e)];case 2:return t.sent(),[4,this._resetIfEncryptionChanged()];case 3:return t.sent(),[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return e=t.sent(),[4,new Promise((function(t,n){var r=e.clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 2:return[2,t.sent()]}}))}))},n}(ki),Fi=function(t){function n(e){var n=this,r=e.AsyncStorage,i=e.itemSizeLimit,s=void 0===i?6291456:i,a=Object(_bundle_a5600e6c["R" /* aH */])(e,["AsyncStorage","itemSizeLimit"]);return(n=t.call(this,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},a),{itemSizeLimit:s}))||this)._asyncStorage=r,n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},n.prototype._getAllRawKeys=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return e=n.sent(),[2,e.filter((function(e){return t._isBelonging(e)})).map((function(e){return e.substring("".concat(t.dbname,"/").length)}))]}}))}))},n.prototype._getRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},n.prototype._setRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:t=[];try{for(n=Object(_bundle_a5600e6c["ic" /* r */])(e),r=n.next();!r.done;r=n.next())i=r.value,s=i.key,i.data.length<=this.adjustedItemSizeLimit&&t.push([this._getActualKey(s),JSON.stringify(i)])}catch(e){a={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(a)throw a.error}}return[4,this._asyncStorage.multiSet(t)];case 1:return u.sent(),[2]}}))}))},n.prototype._removeRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(e){return t._getActualKey(e)})))];case 1:return n.sent(),[2]}}))}))},n.prototype.checkAvailability=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){if(!this._asyncStorage)throw Qr.storeNotAvailable;return[2]}))}))},n.prototype.init=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},n}(ki);!function(t){function n(e){var n,r=this;return(r=t.call(this,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{itemSizeLimit:null!==(n=e.itemSizeLimit)&&void 0!==n?n:6291456}))||this)._mmkv=e.MMKV,r}Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},n.prototype._getAllRawKeys=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return e=n.sent(),[2,e.filter((function(e){return t._isBelonging(e)})).map((function(e){return e.substring("".concat(t.dbname,"/").length)}))]}}))}))},n.prototype._getRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},n.prototype._setRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){try{for(t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,r.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(i),JSON.stringify(r))}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}return[2]}))}))},n.prototype._removeRaw=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next();!n.done;n=t.next())r=n.value,this._mmkv.delete(this._getActualKey(r))}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[2]}))}))},n.prototype.checkAvailability=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){if(!this._mmkv)throw Qr.storeNotAvailable;return[2]}))}))},n.prototype.init=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return t.sent(),[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))}}(ki);var qi;!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(qi||(qi={}));var zi,Bi=function(){function e(e){var t=e.name,n=e.version,r=e.store,i=e.config;this.name=t,this._version=n,this._state=qi.INIT,this._config=i||new Kr({dbname:t}),this._store=r,this._event={success:Xr,error:Xr,storeReplaced:Xr,upgrade:ei},this._collections=new Map,this._globalMutex=new Ni("".concat(this.name,".lock")),this._config.disableLogger&&Oi.off(),new yi({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,(t=this._store,Object(_bundle_a5600e6c["Ib" /* b */])(void 0,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,t.usage()];case 1:return[2,e.sent()]}}))})))];case 1:return[2,e.sent()]}var t}))}))},e.prototype.commitSchema=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this._state!==qi.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,i=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new Ai({dbname:this.name,collectionName:t,keyName:n,indexes:i,store:this._store})),(s=this._collections.get(t))?[4,s.init()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw Qr.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return[4,this._globalMutex.lock()];case 1:if(a.sent(),this._state===qi.OPENED)return[3,12];this._state=qi.OPENING,a.label=2;case 2:return a.trys.push([2,5,,12]),[4,this._store.init(this.name)];case 3:return a.sent(),o=this.name,t="".concat(oi(o),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=a.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var i=function(e){r.version<s._version?s._event.upgrade(r.version,(function(n){return Object(_bundle_a5600e6c["Ib" /* b */])(s,void 0,void 0,(function(){var i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r})];case 2:return s.sent(),e({continued:!0}),[3,4];case 3:return i=s.sent(),e({continued:!1,err:i}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),s.label=6;case 6:return[2]}}))}))})):e({continued:!1})},a=function(t){var o=t.continued,u=void 0!==o&&o,c=t.err,l=void 0===c?null:c;if(u)setTimeout((function(){return i(a)}),10);else if(l)Oi.error(l.message),s._globalMutex.unlock(),s._event.error(l),n(l);else{var d=[];r.collectionNames.forEach((function(e){var t=s._collections.get(e);t&&t.state===jr.READY||d.push(Object(_bundle_a5600e6c["Ib" /* b */])(s,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return[4,Ai.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new Ai({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(d).then((function(){s._state=qi.OPENED,s._globalMutex.unlock(),s._event.success(),e()})).catch((function(e){Oi.error(e.message),s._globalMutex.unlock(),s._event.error(e),n(e)}))}};i(a)}))];case 5:switch(i=a.sent(),i.code){case Nr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Nr.STORE_NOT_AVAILABLE:return[3,8]}return[3,10];case 6:return Oi.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new xi({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 7:return a.sent(),[3,11];case 8:return Oi.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new xi({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 9:return a.sent(),[3,11];case 10:throw Oi.error(i.message),this._globalMutex.unlock(),this._event.error(i),i;case 11:return[3,12];case 12:return[2]}var o}))}))},e.prototype.close=function(){this._collections.forEach((function(e){return e.close()})),this._state=qi.CLOSED},e.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return e.sent(),[2]}}))}))},e.prototype.reset=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.close(),(e=yi.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(oi(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){if("function"==typeof this._event[e])if("upgrade"===e)this._event[e]=ei;else this._event[e]=Xr},e.prototype.collection=function(e){var t=this._collections.get(e);if(t)return t;throw Qr.collectionNotReady},e}(),Ki=function(){function e(){this.messageTypeFilter=_bundle_a5600e6c["nb" /* af */].ALL,this.customTypesFilter=null,this.senderUserIdsFilter=null,this.replyType=_bundle_a5600e6c["wb" /* ao */].NONE}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){switch(this.messageTypeFilter){case _bundle_a5600e6c["nb" /* af */].USER:if(e.messageType!==_bundle_a5600e6c["ib" /* aa */].USER)return!1;break;case _bundle_a5600e6c["nb" /* af */].FILE:if(e.messageType!==_bundle_a5600e6c["ib" /* aa */].FILE)return!1;break;case _bundle_a5600e6c["nb" /* af */].ADMIN:if(e.messageType!==_bundle_a5600e6c["ib" /* aa */].ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(e.customType))return!1;if(this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0){if(!(e instanceof _bundle_1edafb8c_De))return!1;if(!this.senderUserIdsFilter.includes(e.sender.userId))return!1}switch(this.replyType){case _bundle_a5600e6c["wb" /* ao */].NONE:if(e.parentMessageId>0)return!1;break;case _bundle_a5600e6c["wb" /* ao */].ONLY_REPLY_TO_CHANNEL:if(e instanceof _bundle_1edafb8c_De&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},e}();!function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"}(zi||(zi={}));var ji,Qi=function(e){switch(e){case zi.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case zi.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},Gi=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Et),{scheduledAt:void 0}),Vi=function(e){return St(e)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.scheduledAt,!0)},Hi=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},gt),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),Wi=function(e){return _bundle_1edafb8c_bt(e)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.scheduledAt)&&(Object(_bundle_a5600e6c["Zb" /* i */])(e.file)||Object(_bundle_a5600e6c["B" /* a */])("string",e.fileUrl))&&Object(_bundle_a5600e6c["B" /* a */])("string",e.fileName,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.mimeType,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(_bundle_a5600e6c["B" /* a */])("object",e)&&e.maxWidth>0&&e.maxHeight>0})))},Yi="UnsentMessage",Ji="reqId",Xi={},Zi=function(t){function n(e){var n=t.call(this,e)||this;return n._mutex=new Ni("unsendmessagecache.lock"),Xi[e]=n,n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(e,t){return void 0===t&&(t=!1),Xi[e]&&!t||(Xi[e]=new n(e)),Xi[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb,t=null==e?void 0:e.collection(Yi);if(!t)throw _bundle_a5600e6c["hc" /* q */].databaseError;return t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){if(e.messageId>0)throw _bundle_a5600e6c["hc" /* q */].invalidParameters;var t,n=Object(_bundle_a5600e6c["Xb" /* g */])({},e.serialize());return e instanceof _bundle_1edafb8c_je?(e.messageParams&&(n.messageParams=It(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=(t=e.scheduledInfo.scheduledMessageParams,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},It(t)),{scheduledAt:t.scheduledAt})))):e instanceof _bundle_1edafb8c_We?(e.messageParams&&(n.messageParams=Ut(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=function(e){return Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Ut(e)),{scheduledAt:e.scheduledAt})}(e.scheduledInfo.scheduledMessageParams))):e instanceof _bundle_1edafb8c_Ge&&e.messageParams&&(n.messageParams=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])({fileInfoList:e.fileInfoList,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption})}(e.messageParams)),n},n.prototype._deserialize=function(e){return e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{messageId:parseInt(e.messageId)}),is.of(this._iid).buildMessageFromSerializedData(e)},n.prototype._deserializeWithMessageCreateParams=function(e){var t,n,r;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,s,a,o,u,c,l=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return i=is.of(this._iid),s=this._deserialize(e),e.messageParams?s instanceof _bundle_1edafb8c_je?(o=e.messageParams,s.messageParams=i.buildUserMessageCreateParamsFromSerializedData(o,s),[3,6]):[3,1]:[3,6];case 1:return s instanceof _bundle_1edafb8c_We?(o=e.messageParams).fileKey&&"string"==typeof o.fileKey&&At(null!==(t=o.fileType)&&void 0!==t?t:"")?(a=o,[4,this.collection.getBlob(o.fileKey)]):[3,3]:[3,4];case 2:a.file=null!==(n=d.sent())&&void 0!==n?n:void 0,d.label=3;case 3:return s.messageParams=i.buildFileMessageCreateParamsFromSerializedData(o,s),[3,6];case 4:return s instanceof _bundle_1edafb8c_Ge&&((o=e.messageParams)&&o.fileInfoList)?(s.messageParams=i.buildMultipleFilesMessageCreateParamsFromSerializedData(o,s),[4,Promise.all(s.messageParams.fileInfoList.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){var t,n,r,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return"string"==typeof(null===(n=e._uploadedMetaData)||void 0===n?void 0:n.fileKey)&&At(null!==(i=null===(r=e._uploadedMetaData)||void 0===r?void 0:r.fileType)&&void 0!==i?i:"")?(t=e,[4,this.collection.getBlob(e._uploadedMetaData.fileKey)]):[3,2];case 1:t.file=null!==(s=a.sent())&&void 0!==s?s:void 0,a.label=2;case 2:return[2]}}))}))})))]):[3,6];case 5:d.sent(),d.label=6;case 6:return s.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?s instanceof _bundle_1edafb8c_je?(u=e.scheduledInfo.scheduledMessageParams,s.scheduledInfo.scheduledMessageParams=i.buildScheduledUserMessageCreateParamsFromSerializedData(u,s),[3,10]):[3,7]:[3,10];case 7:return s instanceof _bundle_1edafb8c_We?(u=e.scheduledInfo.scheduledMessageParams).fileKey&&"string"==typeof u.fileKey&&"string"==typeof u.fileType&&At(u.fileType)?(c=u,[4,this.collection.getBlob(u.fileKey)]):[3,9]:[3,10];case 8:c.file=null!==(r=d.sent())&&void 0!==r?r:void 0,d.label=9;case 9:s.scheduledInfo.scheduledMessageParams=i.buildScheduledFileMessageCreateParamsFromSerializedData(u,s),d.label=10;case 10:return[2,s]}}))}))},n.prototype._getFileInfoBlobKey=function(e,t){return"".concat(e,".").concat(t)},n.prototype.get=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserializeWithMessageCreateParams(t)];n.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var t=e.channelUrl,n=e.filter,r=void 0===n?new Ki:n,i=e.order,s=void 0===i?zi.CHANNEL_LATEST:i,a=e.sendingStatus,o=e.backward,u=void 0!==o&&o,c=e.parentMessageId;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n,i,o,l=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return this.localCacheEnabled?(e=Qi(s),n={"/where":function(e){return!!(s!==zi.NEWEST_CHILD_MESSAGE||c&&0!==e.parentMessageId&&e.parentMessageId===c)&&r.match(l._deserialize(e))}},t&&(n.channelUrl=t),a&&(n.sendingStatus=a),i={where:n,index:e,backward:u},[4,this.collection.query(i)]):[3,3];case 1:return[4,d.sent().fetch({})];case 2:return o=d.sent(),[2,Promise.all(o.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._deserializeWithMessageCreateParams(e)];case 1:return[2,t.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},n.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new Ki),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this.fetch({filter:t,order:zi.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},n.prototype.upsert=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return e instanceof _bundle_1edafb8c_We||e instanceof _bundle_1edafb8c_Ge?[4,this._mutex.lock()]:[3,4];case 1:return n.sent(),[4,this.saveBlob(e)];case 2:return n.sent(),[4,this._mutex.unlock()];case 3:n.sent(),n.label=4;case 4:return t=this._serialize(e),[4,this.collection.upsertOne(t)];case 5:return n.sent(),[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},n.prototype.upsertChildMessages=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return t=[],e.threadInfo&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=n.sent(),n.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=o.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.saveBlob=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return e instanceof _bundle_1edafb8c_We?e.messageParams&&(r=e.messageParams).file&&Nt(r.file)?[4,this.collection.saveBlob(r.file,e.reqId)]:[3,2]:[3,5];case 1:n=s.sent(),r.fileKey=n,r.fileType=wt.BLOB,s.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&((t=e.scheduledInfo.scheduledMessageParams).file&&Nt(t.file))?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,4];case 3:n=s.sent(),t.fileKey=n,t.fileType=wt.BLOB,s.label=4;case 4:return[3,7];case 5:return e instanceof _bundle_1edafb8c_Ge&&((r=e.messageParams)&&r.fileInfoList&&Array.isArray(r.fileInfoList))?[4,Promise.all(r.fileInfoList.map((function(t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(i,void 0,void 0,(function(){var r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t.file&&Nt(t.file)?[4,this.collection.saveBlob(t.file,this._getFileInfoBlobKey(e.reqId,n))]:[3,2];case 1:r=i.sent(),t._uploadedMetaData||(t._uploadedMetaData={}),t._uploadedMetaData.fileKey=r,t._uploadedMetaData.fileType=wt.BLOB,i.label=2;case 2:return[2]}}))}))})))]:[3,7];case 6:s.sent(),s.label=7;case 7:return[2]}}))}))},n}(_bundle_a5600e6c["I" /* a8 */]),$i={},es=function(t){function n(e){var n=t.call(this,e)||this;return $i[e]=n,n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Zi.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e,t){return void 0===t&&(t=!1),$i[e]&&!t||($i[e]=new n(e)),$i[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(_bundle_a5600e6c["jc" /* s */])(!!e).throw(_bundle_a5600e6c["hc" /* q */].databaseError),e.collection(pr)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){return Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e.serialize()),{messageId:"".concat(e.messageId)})},n.prototype._deserialize=function(e){return e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{messageId:parseInt(e.messageId)}),is.of(this._iid).buildMessageFromSerializedData(e)},n.prototype.get=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,i=void 0===r?100:r,s=e.filter,a=void 0===s?new Ki:s,o=e.order,u=void 0===o?zi.CHANNEL_LATEST:o,c=e.backward,l=void 0!==c&&c,d=e.parentMessageId,h=e.isPollOnly,f=void 0!==h&&h,p=e.exactMatch,m=void 0!==p&&p,v=e.inclusive,y=void 0===v||v;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,r,s,o=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return this.localCacheEnabled?(e=Qi(u),r={where:{channelUrl:t,"/where":function(e){if(n)switch(u){case zi.CHANNEL_LATEST:if(m&&e.createdAt!==n)return!1;if(l){if(y&&e.createdAt<n||!y&&e.createdAt<=n)return!1}else if(y&&e.createdAt>n||!y&&e.createdAt>=n)return!1;break;case zi.NEWEST_CHILD_MESSAGE:if(!d||0===e.parentMessageId||e.parentMessageId!==d)return!1}return!(f&&!e._poll)&&a.match(o._deserialize(e))}},index:e,backward:l},[4,this.collection.query(r)]):[3,3];case 1:return[4,c.sent().fetch({limit:null!=i?i:void 0})];case 2:return s=c.sent(),[2,Promise.all(s.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(o,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this._deserialize(e)]}))}))})))];case 3:return[2,[]]}}))}))},n.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new Ki),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:t,order:zi.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},n.prototype.upsert=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,5];case 1:return r.sent(),t=e.map((function(e){return n._serialize(e)})),[4,this.collection.upsertMany(t)];case 2:return r.sent(),[4,this.upsertChildMessages(e)];case 3:return r.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},n.prototype.upsertChildMessages=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)&&e.threadInfo.replyCount>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:if(!this.localCacheEnabled)return[3,8];o.label=1;case 1:o.trys.push([1,6,7,8]),t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next(),o.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove("".concat(r))]);case 3:o.sent(),o.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=o.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:Qi(zi.CHANNEL_LATEST)})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},n.prototype.removeUnderOffset=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:Qi(zi.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.countBetween=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return this.localCacheEnabled?(r=Qi(zi.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=i._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,s.sent()];case 2:return[2,0]}}))}))},n.prototype.saveBlobs=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e instanceof _bundle_1edafb8c_We&&e.messageParams&&((t=e.messageParams).file&&Nt(t.file))?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2];case 1:n=r.sent(),t.fileKey=n,r.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[2]}}))}))},n.prototype._getGroupChannelPreferenceSize=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,s,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return t=0,[4,(n=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return r=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return i=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return s=o.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return a=o.sent(),r&&(t+=JSON.stringify(r).length),i&&(t+=JSON.stringify(i).length),s&&(t+=JSON.stringify(s).length),a&&(t+=JSON.stringify(a).length),[2,t]}}))}))},n}(_bundle_a5600e6c["I" /* a8 */]),ts={},ns=function(t){function n(e){var n=t.call(this,e)||this;return n._observers=new Map,n._dispatcherContext=n._dispatcher.on((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){var t,n,r,i,s,a,o,u,c,l,d,h,f,p,m=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(v){switch(v.label){case 0:return e instanceof _bundle_a5600e6c["K" /* aA */]?(t=e.messages,f=e.source,s=e.isWebSocketEventComing,n=t.filter((function(e){return e.messageId>0})),r=t.filter((function(e){return 0===e.messageId})),n.length>0?[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(n)];case 1:return e.sent(),[4,this._unsentMessageCache.remove(n.map((function(e){return e instanceof _bundle_1edafb8c_De?e.reqId:null})).filter((function(e){return null!==e})))];case 2:return e.sent(),[2]}}))}))}))]:[3,2]):[3,5];case 1:v.sent(),s||this._broadcastUpdateEvent(n,f),v.label=2;case 2:return r.length>0?[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.upsert(r)];case 1:return e.sent(),[2]}}))}))}))]:[3,4];case 3:v.sent(),s||this._broadcastUpdateEvent(r,f),v.label=4;case 4:return[3,21];case 5:return e instanceof _bundle_a5600e6c["V" /* aL */]?(i=e.messageIds,f=e.source,s=e.isWebSocketEventComing,[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.remove(i)];case 1:return e.sent(),[2]}}))}))}))]):[3,7];case 6:return v.sent(),s||this._broadcastRemoveEvent(i,f),[3,21];case 7:return e instanceof _bundle_a5600e6c["U" /* aK */]?(a=e.reqId,f=e.source,[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._unsentMessageCache.remove([a])];case 1:return e.sent(),[2]}}))}))}))]):[3,9];case 8:return v.sent(),this._broadcastRemoveUnsentEvent(a,f),[3,21];case 9:return e instanceof _bundle_a5600e6c["T" /* aJ */]?(o=e.polls,f=e.source,this._cacheContext.localCacheEnabled?(u=o.map((function(e){return e.messageId})),[4,Promise.all(u.map((function(e){return m._messageCache.get(e)})))]):[3,12]):[3,13];case 10:return(c=v.sent().filter((function(e){return e}))).length>0&&o.forEach((function(e){var t=c.find((function(t){return t.messageId===e.messageId}));t&&t.applyPoll(e)})),[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert(c)];case 1:return[2,e.sent()]}}))}))}))];case 11:v.sent(),v.label=12;case 12:return this._broadcastPollChangeLogEvent(o,f),[3,21];case 13:return e instanceof _bundle_a5600e6c["S" /* aI */]?(l=e.event,f=e.source,[4,this._messageCache.get(l.messageId)]):[3,17];case 14:return(d=v.sent())&&d.isUserMessage()&&d.poll&&d.poll.applyPollUpdateEvent(l)?[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([d])];case 1:return[2,e.sent()]}}))}))}))]:[3,16];case 15:v.sent(),v.label=16;case 16:return this._broadcastPollUpdateEvent(l,f),[3,21];case 17:return e instanceof _bundle_a5600e6c["N" /* aD */]?(h=e.event,f=e.source,[4,this._messageCache.get(h.messageId)]):[3,21];case 18:return(p=v.sent())&&p.isUserMessage()&&p.poll&&p.poll.applyPollVoteEvent(h)?[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(m,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.upsert([p])];case 1:return[2,e.sent()]}}))}))}))]:[3,20];case 19:v.sent(),v.label=20;case 20:this._broadcastPollVoteEvent(h,f),v.label=21;case 21:return[2]}}))}))})),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_dispatcher",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return es.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Zi.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e,t){var r;return void 0===t&&(t=!1),ts[e]&&!t||(ts[e]&&(null===(r=ts[e]._dispatcherContext)||void 0===r||r.close()),ts[e]=new n(e)),ts[e]},n.prototype._broadcastUpdateEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onUpdate&&a.onUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype._broadcastPollChangeLogEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollChangeLogUpdate&&a.onPollChangeLogUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype._broadcastPollUpdateEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollUpdate&&a.onPollUpdate(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype._broadcastPollVoteEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onPollVote&&a.onPollVote(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype._broadcastRemoveEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemove&&a.onRemove(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype._broadcastRemoveUnsentEvent=function(e,t){var n,r;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.onRemoveUnsent&&a.onRemoveUnsent(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},n.prototype.subscribe=function(e,t){this._observers.set(e,t)},n.prototype.unsubscribe=function(e){this._observers.delete(e)},n.prototype.unsubscribeAll=function(){this._observers.clear()},n}(_bundle_a5600e6c["I" /* a8 */]),rs={},is=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,a=t.cacheContext;this._iid=e,this._sdkState=n,this._requestQueue=i,this._dispatcher=r,this._cacheContext=a,es.of(e),Zi.of(e),ns.of(e),this.fileMessageQueue=new _bundle_1edafb8c_tt(e,{sdkState:n,dispatcher:r,requestQueue:i,onlineDetector:s,cacheContext:a}),rs[e]=this}return e.of=function(e){return rs[e]},e.prototype.buildMessageFromSerializedData=function(e){var t=Object(_bundle_a5600e6c["oc" /* x */])(e);switch(t.messageType){case _bundle_a5600e6c["ib" /* aa */].USER:return new _bundle_1edafb8c_je(this._iid,_bundle_1edafb8c_je.payloadify(t));case _bundle_a5600e6c["ib" /* aa */].FILE:return _bundle_1edafb8c_Ge._isMultipleFilesMessageSerializedData(t)?new _bundle_1edafb8c_Ge(this._iid,_bundle_1edafb8c_Ge.payloadify(t)):new _bundle_1edafb8c_We(this._iid,_bundle_1edafb8c_We.payloadify(t));case _bundle_a5600e6c["ib" /* aa */].ADMIN:return new _bundle_1edafb8c_Be(this._iid,_bundle_1edafb8c_Be.payloadify(t))}throw _bundle_a5600e6c["hc" /* q */].invalidParameters},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(e,t){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:e.pollId}))},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(e,t){var n;return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:e.file,fileKey:e.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:null===(n=t.thumbnails)||void 0===n?void 0:n.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),fileType:e.fileType,requireAuth:t.requireAuth}))},e.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(e,t){return Object(_bundle_a5600e6c["Vb" /* e */])({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,fileInfoList:e.fileInfoList})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(e,t){return Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this.buildUserMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(e,t){return Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this.buildFileMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(e){var t=Object(_bundle_a5600e6c["oc" /* x */])(e);return new _bundle_1edafb8c_Re(this._iid,_bundle_1edafb8c_Re.payloadify(t))},e.prototype.getMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return t=new _bundle_1edafb8c_ot(e),[4,this._requestQueue.send(t)];case 1:return n=r.sent(),[2,n.as(_bundle_1edafb8c_ut).message]}}))}))},e.prototype.getScheduledMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return t=new _bundle_1edafb8c_ft(e),[4,this._requestQueue.send(t)];case 1:return n=r.sent(),[2,n.as(_bundle_1edafb8c_pt).message]}}))}))},e.prototype.getMessagesByMessageId=function(e,t,n,r,i){return void 0===i&&(i=_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var s,a,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return s=new _bundle_1edafb8c_ct(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({channelType:t,channelUrl:e,token:String(n)},_bundle_1edafb8c_rt),r)),[4,this._requestQueue.send(s)];case 1:return a=c.sent(),u=a.as(_bundle_1edafb8c_lt).messages,this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:u,source:i})),[2,u]}}))}))},e.prototype.getMessagesByTimestamp=function(e,t,n,r,i){return void 0===i&&(i=_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var s,a,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return s=new _bundle_1edafb8c_ct(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({channelType:t,channelUrl:e,timestamp:n},_bundle_1edafb8c_rt),r)),[4,this._requestQueue.send(s)];case 1:return a=c.sent(),u=a.as(_bundle_1edafb8c_lt).messages,this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:u,source:i})),[2,u]}}))}))},e.prototype._getMessagesByTimestampForCollection=function(e,t,n,r,i,s,a){return void 0===i&&(i=_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var u,c,l,d,h,f;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(p){switch(p.label){case 0:return u=new _bundle_1edafb8c_ct(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({channelType:t,channelUrl:e,timestamp:n},_bundle_1edafb8c_rt),r),{checkingHasNext:s,checkingContinuousMessages:a})),[4,this._requestQueue.send(u)];case 1:return c=p.sent(),l=c.as(_bundle_1edafb8c_lt),d=l.messages,h=l.isContinuousMessages,f=l.hasNext,this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:d,source:i})),[2,{messages:d,isContinuousMessages:h,hasNext:f}]}}))}))},e.prototype.getThreadedMessagesByTimestamp=function(e,t,n,r){return void 0===r&&(r=_bundle_a5600e6c["x" /* X */].REQUEST_THREADED_MESSAGE),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,s,a,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return i=new _bundle_1edafb8c_ct(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({channelUrl:e.channelUrl,channelType:e.channelType,timestamp:t},_bundle_1edafb8c_qe),n),{replyType:_bundle_a5600e6c["wb" /* ao */].ALL,parentMessageId:e.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(i)];case 1:return s=c.sent(),a=s.as(_bundle_1edafb8c_lt).messages,(u=a.slice(1)).forEach((function(t){t.parentMessage=e})),this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:u,source:r})),[2,{parentMessage:a[0],threadedMessages:u}]}}))}))},e.prototype.getMessageChangelogs=function(e,t,n,i,s){return void 0===s&&(s=_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE_CHANGELOGS),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var u,c,l,d,h,f,p,m;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(v){switch(v.label){case 0:return u=new _bundle_1edafb8c_dt(Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null},_bundle_1edafb8c_st),i)))),[4,this._requestQueue.send(u)];case 1:return c=v.sent(),l=c.as(_bundle_1edafb8c_ht),d=l.updatedMessages,h=l.deletedMessagesInfo,f=l.hasMore,p=l.nextToken,m=h.map((function(e){return e.messageId})),d.length>0&&this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:d,source:s})),m.length>0&&this._dispatcher.dispatch(new _bundle_a5600e6c["V" /* aL */]({messageIds:m,source:s})),[2,{updatedMessages:d,deletedMessageIds:m,hasMore:f,token:p}]}}))}))},e}(),ss=function(t){function n(e,n){var r=t.call(this,e)||this;r.targetMessageId=0;var i=n.thread_info,s=n.parent_message_id,a=n.channel_url,o=n.channel_type;return i&&Object(_bundle_a5600e6c["B" /* a */])("object",i)&&Object(_bundle_a5600e6c["B" /* a */])("number",s)&&Object(_bundle_a5600e6c["B" /* a */])("string",a)&&Object(_bundle_a5600e6c["B" /* a */])("string",o)&&(r.threadInfo=new _bundle_1edafb8c_Me(e,i),r.targetMessageId=s,r.channelUrl=a,r.channelType=o),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["I" /* a8 */]),as={channelUrl:"",channelType:_bundle_a5600e6c["y" /* Y */].BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},os=function(n){function r(e){var r=e.channelCustomType,i=e.keyword,s=e.limit,a=e.reverse,o=e.exactMatch,u=e.channelUrl,c=e.order,l=e.messageTimestampFrom,d=e.messageTimestampTo,h=e.advancedQuery,f=e.targetFields,p=e.nextToken,m=n.call(this)||this;return m.method=_bundle_a5600e6c["a" /* A */].GET,m.path="".concat(_bundle_a5600e6c["W" /* aM */],"/messages"),m.params={custom_type:r,query:i,limit:s,reverse:a,exact_match:o,channel_url:u,message_ts_from:l,message_ts_to:d,sort_field:c,advanced_query:h,target_fields:f,after:p},m}return Object(_bundle_a5600e6c["A" /* _ */])(r,n),r}(_bundle_a5600e6c["Wb" /* f */]),us=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.messages=n.results.map((function(t){return _bundle_1edafb8c_He(e,t)})),r.hasNext=n.has_next,r.nextToken=n.end_cursor,r.totalCount=n.total_count,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]);!function(e){e.SCORE="score",e.TIMESTAMP="ts"}(ji||(ji={}));var cs=function(t){function n(e,n){var r,i,s,a,o,u,c,l,d,h=this;return(h=t.call(this,e,n)||this).keyword="",h.reverse=!1,h.exactMatch=!1,h.channelUrl="",h.channelCustomType="",h.messageTimestampFrom=null,h.messageTimestampTo=null,h.order=ji.SCORE,h.advancedQuery=!1,h.targetFields=null,h._nextToken="",h.totalCount=-1,h.keyword=n.keyword,h.reverse=null!==(r=n.reverse)&&void 0!==r&&r,h.exactMatch=null!==(i=n.exactMatch)&&void 0!==i&&i,h.channelUrl=null!==(s=n.channelUrl)&&void 0!==s?s:"",h.channelCustomType=null!==(a=n.channelCustomType)&&void 0!==a?a:"",h.messageTimestampFrom=null!==(o=n.messageTimestampFrom)&&void 0!==o?o:null,h.messageTimestampTo=null!==(u=n.messageTimestampTo)&&void 0!==u?u:null,h.order=null!==(c=n.order)&&void 0!==c?c:ji.SCORE,h.advancedQuery=null!==(l=n.advancedQuery)&&void 0!==l&&l,h.targetFields=null!==(d=n.targetFields)&&void 0!==d?d:null,h}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.keyword)&&this.keyword.length>0&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.reverse)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.exactMatch)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.channelUrl)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.channelCustomType)&&(Object(_bundle_a5600e6c["B" /* a */])("number",this.messageTimestampFrom)||null===this.messageTimestampFrom)&&(Object(_bundle_a5600e6c["B" /* a */])("number",this.messageTimestampTo)||null===this.messageTimestampTo)&&Object(_bundle_a5600e6c["q" /* Q */])(ji,this.order)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.advancedQuery)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.targetFields,!0)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new os(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=l.sent(),r=n.as(us),i=r.messages,s=r.hasNext,u=r.nextToken,c=r.totalCount,this._nextToken=u,this._hasNext=s,this._isLoading=!1,this.totalCount=c,[2,i];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["P" /* aF */]),ls={channelUrl:"",scheduledMessageId:0},ds=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="message",e}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype.init=function(e,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,a=n.requestQueue,o=n.logger,u=n.onlineDetector,c=n.cacheContext;t.prototype.init.call(this,e,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:a,logger:o,onlineDetector:u,cacheContext:c}),this._manager=new is(e,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:u,cacheContext:c})},n.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},n.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},n.prototype.getMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},as),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.channelUrl)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["y" /* Y */],e.channelType)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.messageId)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeReactions,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeMetaArray,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeParentMessageInfo,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeThreadInfo,!0)}(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.getMessage(t)]}))}))},n.prototype.getScheduledMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},ls),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.channelUrl)&&""!==e.channelUrl&&Object(_bundle_a5600e6c["B" /* a */])("number",e.scheduledMessageId)&&e.scheduledMessageId>0}(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.getScheduledMessage(t)]}))}))},n}(_bundle_a5600e6c["X" /* aN */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/lib/__bundle-c336221f.js
var _bundle_c336221f_s=function(s,i){this.pollId=0,this.messageId=0,this.pollId=i.poll.id,this.messageId=i.poll.message_id,this._iid=s,this._payload=i};

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/poll.js
var poll_f=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="poll",e}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype.init=function(e,r){var n=r.sdkState,o=r.dispatcher,i=r.sessionManager,s=r.requestQueue,l=r.logger,u=r.onlineDetector,c=r.cacheContext;t.prototype.init.call(this,e,{sdkState:n,dispatcher:o,sessionManager:i,requestQueue:s,logger:l,onlineDetector:u,cacheContext:c}),this._manager=new _bundle_a5600e6c["O" /* aE */](e,{sdkState:n,dispatcher:o,sessionManager:i,requestQueue:s,logger:l,onlineDetector:u,cacheContext:c})},n.prototype.create=function(t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_a5600e6c["Y" /* aO */]),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["Z" /* aP */])(e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.create(e)]}))}))},n.prototype.get=function(t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_a5600e6c["ab" /* aQ */]),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["bb" /* aR */])(e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.get(e)]}))}))},n.prototype.getOption=function(t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_a5600e6c["cb" /* aS */]),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["db" /* aT */])(e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.getOption(e)]}))}))},n.prototype.buildPollFromSerializedData=function(t){return this._manager.buildPollFromSerializedData(t)},n}(_bundle_a5600e6c["X" /* aN */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/lib/__bundle-2a18997f.js
var _bundle_2a18997f_E,_bundle_2a18997f_p,_bundle_2a18997f_C;!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(_bundle_2a18997f_E||(_bundle_2a18997f_E={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(_bundle_2a18997f_p||(_bundle_2a18997f_p={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(_bundle_2a18997f_C||(_bundle_2a18997f_C={}));var _bundle_2a18997f_R,_bundle_2a18997f_L=function(e){switch(e){case _bundle_2a18997f_E.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case _bundle_2a18997f_E.CHRONOLOGICAL:return["-createdAt","syncIndex"];case _bundle_2a18997f_E.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},_bundle_2a18997f_I=function(t){function s(e){var s=e.message,n=t.call(this)||this;return n.message=s,n}return Object(_bundle_a5600e6c["A" /* _ */])(s,t),s}(_bundle_a5600e6c["eb" /* aW */]),_bundle_2a18997f_b={},_bundle_2a18997f_S=function(){function e(e,t){var s=t.localCacheEnabled,n=t.enableAutoResend,r=t.dispatcher,a=t.sdkState,u=t.logger,d=this;this._iid=e,_bundle_2a18997f_b[e]=this,this._localCacheEnabled=s,this._enableAutoResend=n,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=r,this._logger=u,this._sdkState=a,this._localCacheEnabled&&r.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])switch(e.stateType){case _bundle_a5600e6c["qc" /* z */].CONNECTED:d._isProcessingAutoResend||d.processAutoResendRegisteredPendingMessages().then((function(){return d._processNextAutoResend()}));break;case _bundle_a5600e6c["qc" /* z */].INTERNAL_DISCONNECTED:case _bundle_a5600e6c["qc" /* z */].EXTERNAL_DISCONNECTED:d._isProcessingAutoResend=!1}}))}return e.of=function(e){return _bundle_2a18997f_b[e]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,s,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this._enableAutoResend?[4,this._fetchAllCachedPendingMessages()]:[2];case 1:e=n.sent();try{for(t=Object(_bundle_a5600e6c["ic" /* r */])(e),s=t.next();!s.done;s=t.next())0===(a=s.value).errorCode&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",a.reqId),a.sendingStatus=_bundle_a5600e6c["lb" /* ad */].FAILED,a.errorCode=_bundle_a5600e6c["tb" /* al */].ACK_TIMEOUT,this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[a],source:_bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_FAILED})))}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}}return[2]}}))}))},e.prototype.processAutoResendRegisteredPendingMessages=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,s,i,o,d,l,_;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=n.sent();try{for(t=Object(_bundle_a5600e6c["ic" /* r */])(e),s=t.next();!s.done;s=t.next())i=s.value,this._enableAutoResend&&i.errorCode&&Object(_bundle_a5600e6c["M" /* aC */])(i.errorCode)&&(o=(new Date).getTime(),d=i.createdAt+2592e5,this._enableAutoResend&&o<=d?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(i.reqId)<0&&this._autoResendQueue.push(i):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(d).toLocaleString()),i.sendingStatus=_bundle_a5600e6c["lb" /* ad */].FAILED,this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[i],source:_bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_FAILED}))))}catch(e){l={error:e}}finally{try{s&&!s.done&&(_=t.return)&&_.call(t)}finally{if(l)throw l.error}}return[2]}}))}))},e.prototype.completeCurrentAndProcessNextAutoResend=function(e){if(this._localCacheEnabled&&this._enableAutoResend&&(e.sendingStatus===_bundle_a5600e6c["lb" /* ad */].SUCCEEDED||e.sendingStatus===_bundle_a5600e6c["lb" /* ad */].FAILED&&!Object(_bundle_a5600e6c["M" /* aC */])(e.errorCode))){var t=this.indexOf(e);t>=0&&this._autoResendQueue.splice(t,1),0===t&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return e=Zi.of(this._iid),(t=new Ki).replyType=_bundle_a5600e6c["wb" /* ao */].ALL,[4,e.fetch({sendingStatus:_bundle_a5600e6c["lb" /* ad */].PENDING,backward:!0,filter:t})];case 1:return[2,s.sent()]}}))}))},e.prototype.indexOf=function(e){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId):-1},e.prototype._isNotInQueue=function(e){return-1===this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId)},e.prototype._processNextAutoResend=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){if(this._localCacheEnabled&&this._enableAutoResend&&"foreground"===this._sdkState.appState)try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),e=this._autoResendQueue[0],this._dispatcher.dispatch(new _bundle_2a18997f_I({message:e})),this._logger.debug("processing auto-resend for message request id: ",e.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(e){this._logger.warn("process auto-resend error: ",e),this._isProcessingAutoResend=!1}return[2]}))}))},e}();!function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"}(_bundle_2a18997f_R||(_bundle_2a18997f_R={}));var _bundle_2a18997f_N=function(){function e(e){this.category=e.cat,this.data=e.data}return e.getDataAsUserBlockEvent=function(e,t){var s=t.data,n=s.blocker,r=s.blockee;return{blocker:new _bundle_a5600e6c["u" /* U */](e,n),blockee:new _bundle_a5600e6c["u" /* U */](e,r)}},e.getDataAsFriendDiscoveredEvent=function(e,t){var s=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(s)?s.map((function(t){return new _bundle_a5600e6c["u" /* U */](e,t)})):[]}},e}(),_bundle_2a18997f_v=function(t){function s(e,s){var n=s.userId,r=t.call(this)||this;return r._iid=e,r.userId=n,r}return Object(_bundle_a5600e6c["A" /* _ */])(s,t),s}(_bundle_a5600e6c["eb" /* aW */]),_bundle_2a18997f_D=function(t){function s(){return t.call(this)||this}return Object(_bundle_a5600e6c["A" /* _ */])(s,t),s}(_bundle_a5600e6c["eb" /* aW */]),_bundle_2a18997f_T=function(t){function s(e,s,n){var r=t.call(this,e,"USEV",n)||this;return r.event=new _bundle_2a18997f_N(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(s,t),s}(_bundle_a5600e6c["w" /* W */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/lib/__bundle-f475d1ef.js
var _bundle_f475d1ef_a=function(t){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},_bundle_f475d1ef_e=function(n){function a(){return null!==n&&n.apply(this,arguments)||this}return Object(_bundle_a5600e6c["A" /* _ */])(a,n),a}(_bundle_a5600e6c["eb" /* aW */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/index.js
var chat_ot=function(e){this.key=e.key,this.url=e.url},chat_st=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map((function(e){return new chat_ot(e)})):[]},chat_at=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new chat_st(e)})):[]},chat_ut={profileImage:void 0,profileUrl:void 0,nickname:void 0},chat_ct=function(e){return{v2:e.commitSchema([{collectionName:dr,keyName:hr,index:[_bundle_2a18997f_L(_bundle_2a18997f_E.LATEST_LAST_MESSAGE),_bundle_2a18997f_L(_bundle_2a18997f_E.CHRONOLOGICAL),_bundle_2a18997f_L(_bundle_2a18997f_E.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:pr,keyName:mr,index:[Qi(zi.CHANNEL_LATEST),Qi(zi.NEWEST_CHILD_MESSAGE)]},{collectionName:Yi,keyName:Ji,index:[Qi(zi.CHANNEL_LATEST),Qi(zi.NEWEST_CHILD_MESSAGE)]},{collectionName:vr,keyName:yr}]),v3:e.commitSchema([{collectionName:gr,keyName:br,index:[_bundle_f475d1ef_a("latest_last_message")]}])}},chat_dt=function(e){return function(t,n){switch(t){case 1:e.clear().then((function(){chat_ct(e).v2.then((function(){return n()})).catch((function(e){return n(e)}))})).catch((function(e){return n(e)}));break;case 2:chat_ct(e).v3.then((function(){return n()})).catch((function(e){return n(e)}));break;default:n()}}},chat_lt=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},chat_ht=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?chat_lt:n,i=t.initialState,o=void 0===i?"visible":i,s=t.isEnabled,a=void 0===s||s,u=t.pauseCheckDelay,c=void 0===u?3e4:u,d=e.call(this)||this;return d._pauseCheckDelay=3e4,d._currentState="visible",d._getVisibilityState=r,d._pauseCheckDelay=c,d._currentState=o,d._isEnabled=a,d._boundToggleState=d._toggleState.bind(d),d}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(_bundle_a5600e6c["e" /* E */]),chat_ft=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:_bundle_a5600e6c["a" /* A */].GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),chat_pt=function(e){function t(t){var n=t.userId,r=t.nickname,i=t.profileUrl,o=t.profileImage,s=t.preferredLanguages,a=e.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n)),a.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({nickname:r,profile_url:i,profile_file:o,preferred_languages:s})),a}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _bundle_a5600e6c["u" /* U */](t,Object(_bundle_a5600e6c["Xb" /* g */])({},n)),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_gt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].POST,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/apns"),i.params={apns_device_token:r,always_push:!0},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?_bundle_a5600e6c["p" /* P */][n.type.toLowerCase()]:_bundle_a5600e6c["p" /* P */].UNKNOWN,r.user=new _bundle_a5600e6c["u" /* U */](t,n.user),r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_t=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].POST,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/gcm"),i.params={gcm_reg_token:r,always_push:!0},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?_bundle_a5600e6c["p" /* P */][n.type.toLowerCase()]:_bundle_a5600e6c["p" /* P */].UNKNOWN,r.user=new _bundle_a5600e6c["u" /* U */](t,n.user),r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_mt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].DELETE,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _bundle_a5600e6c["u" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_bt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].DELETE,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _bundle_a5600e6c["u" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_yt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/apns"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?_bundle_a5600e6c["p" /* P */][n.type.toLowerCase()]:_bundle_a5600e6c["p" /* P */].UNKNOWN,r.user=new _bundle_a5600e6c["u" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_wt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].DELETE,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/gcm"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?_bundle_a5600e6c["p" /* P */][n.type.toLowerCase()]:_bundle_a5600e6c["p" /* P */].UNKNOWN,r.user=new _bundle_a5600e6c["u" /* U */](t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_It=function(e){function t(t){var n=t.userId,r=t.type,i=t.token,o=t.ts,s=e.call(this)||this;return s.method=_bundle_a5600e6c["a" /* A */].GET,s.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),s.params={created_ts:o,token:i},s}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_kt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?_bundle_a5600e6c["p" /* P */][n.type.toLowerCase()]:_bundle_a5600e6c["p" /* P */].UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Ct=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_St=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Tt=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].PUT,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),i.params={auto_accept:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Et=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Ut=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Pt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Dt=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,i=t.startHour,o=t.startMin,s=t.endHour,a=t.endMin,u=t.timezone,l=e.call(this)||this;return l.method=_bundle_a5600e6c["a" /* A */].PUT,l.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),l.params={do_not_disturb:r,start_hour:i,start_min:o,end_hour:s,end_min:a,timezone:u},l}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_At=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Lt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Nt=function(e){function t(t){var n=t.userId,r=t.snoozeOn,i=t.startTs,o=t.endTs,s=e.call(this)||this;return s.method=_bundle_a5600e6c["a" /* A */].PUT,s.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),s.params={snooze_enabled:r,snooze_start_ts:i,snooze_end_ts:o},s}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Mt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Rt=function(e){function t(t){var n=t.userId,r=t.blockedUserId,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].POST,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/block"),i.params={target_id:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _bundle_a5600e6c["u" /* U */](t,n),r}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_zt=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].DELETE,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_Qt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Ft=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].PUT,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference"),i.params={push_trigger_option:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_qt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Ht=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/template"),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_xt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Gt=function(e){function t(t){var n=t.userId,r=t.templateName,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].PUT,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push/template"),i.params={name:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Wt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Bt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].GET,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/friends/changelogs"),i.params={token:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Kt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new _bundle_a5600e6c["u" /* U */](t,e)})),updatedUsers:n.updated.map((function(e){return new _bundle_a5600e6c["u" /* U */](t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Vt=function(e){function t(t){var n=t.userId,r=t.discoveries,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].PUT,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_Xt=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].DELETE,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discovery_keys:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_Yt=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].POST,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_Zt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _bundle_a5600e6c["u" /* U */](t,e)})),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_$t=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].DELETE,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_en=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(n,"/allow_friend_discovery"),r.params={},r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_tn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_nn=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,i=e.call(this)||this;return i.method=_bundle_a5600e6c["a" /* A */].PUT,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(n,"/allow_friend_discovery"),i.params={allow_friend_discovery:r},i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(t,e)}(_bundle_a5600e6c["Yb" /* h */]);var chat_rn,chat_on=function(e){function t(){var t=e.call(this)||this;return t.method=_bundle_a5600e6c["a" /* A */].GET,t.path=_bundle_a5600e6c["ac" /* j */],t}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_sn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new chat_at(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_an=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["ac" /* j */],"/").concat(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_un=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new chat_st(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_cn=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["bc" /* k */],"/").concat(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_dn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new chat_ot(n),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_ln=function(e){function t(){var t=e.call(this)||this;return t.method=_bundle_a5600e6c["a" /* A */].GET,t.path="".concat(_bundle_a5600e6c["cc" /* l */]),t}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),chat_hn=function(e){function t(t,n){var r,i=this,o=null!=n?n:{};return(i=e.call(this,t,n)||this).uikitConfiguration={string:JSON.stringify(o),json:o},i.updatedAt=null!==(r=null==n?void 0:n.updated_at)&&void 0!==r?r:0,i}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),chat_fn=function(){function t(e,t,n){var r=this;this._storeInitialized=!1,this._iid=e,this.options=t;var i=_bundle_a5600e6c["v" /* V */].of(e),s=i.sdkState,u=i.cacheContext,c=i.dispatcher,d=i.sessionManager,l=i.requestQueue,h=i.logger,f=i.userEventHandlers,p=i.appStateToggleEnabled;this._onlineDetector=new chat_ft({logger:h,connectionDelegate:{reconnect:function(){var t=_bundle_a5600e6c["v" /* V */].of(e),n=t.sdkState,r=t.connectionManager,i=t.sessionManager;i.session.hasSession?"foreground"===n.appState&&r.resetAndReconnect():r.connect(i.session.authToken),c.dispatch(new _bundle_f475d1ef_e)},disconnect:function(){_bundle_a5600e6c["v" /* V */].of(e).connectionManager.disconnect()}}});var v=new _bundle_2a18997f_S(e,{localCacheEnabled:u.localCacheEnabled,enableAutoResend:u.localCacheConfig.enableAutoResend,dispatcher:c,sdkState:s,logger:h});n.forEach((function(t){t.init(e,{sdkState:s,cacheContext:u,dispatcher:c,sessionManager:d,requestQueue:l,logger:h,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new chat_ht({isEnabled:p}),this._appStateChangeDetector.on("resume",(function(){h.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){h.debug("the page freezes"),r.setBackgroundState()})),c.on((function(t){var n;if(t instanceof _bundle_a5600e6c["pc" /* y */]){if(t.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED)v.processNonAutoResendRegisteredPendingMessages()}else if(t instanceof _bundle_a5600e6c["w" /* W */]){if("USEV"===t.code){var i=t.as(_bundle_2a18997f_T).event;if(i.category===_bundle_2a18997f_R.FRIEND_DISCOVERED){var c=_bundle_2a18997f_N.getDataAsFriendDiscoveredEvent(e,i).friendDiscoveries;Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,f.forEach((function(e){e.onFriendsDiscovered&&e.onFriendsDiscovered(c)}))]}))}))}))}}}else if(t instanceof _bundle_a5600e6c["d" /* D */]){var d=_bundle_a5600e6c["v" /* V */].of(r._iid).subscribedUnreadMessageCount,l=!1,p=t.ts;if("number"==typeof p&&p>d.ts){if(d.all!==t.all&&(l=!0),d.all=t.all>=0?t.all:0,t.customTypes)for(var g in t.customTypes)d.customTypes[g]!==t.customTypes[g]&&(l=!0),d.customTypes[g]=t.customTypes[g];l=l&&d.ts>0,d.ts=p}l&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,f.forEach((function(e){e.onTotalUnreadMessageCountChanged&&e.onTotalUnreadMessageCountChanged({groupChannelCount:d.all,feedChannelCount:d.feed,customTypeUnreadCount:d.customTypes}),e.onTotalUnreadMessageCountUpdated&&e.onTotalUnreadMessageCountUpdated(d.all,d.customTypes)}))]}))}))}))}else t instanceof _bundle_a5600e6c["f" /* F */]?(u.preference.set(r._getUserProfileCacheKey(s.userId),_bundle_a5600e6c["g" /* G */].payloadify(t.userProfile)),(null===(n=t.userProfile.appInfo.notificationInfo)||void 0===n?void 0:n.isEnabled)&&u.preference.set(Object(_bundle_a5600e6c["h" /* H */])(r.appId),{value:!0})):t instanceof _bundle_a5600e6c["i" /* I */]&&t.error&&t.error.isSessionInvalidatedError&&(h.debug("session revoked."),r.disconnect())}))}return t.init=function(e){var n=e.appId,r=e.appVersion,i=e.modules,o=void 0===i?[]:i,s=e.options,a=void 0===s?new _bundle_a5600e6c["s" /* S */]:s,u=e.debugMode,c=void 0!==u&&u,d=e.customApiHost,l=e.customWebSocketHost,h=e.newInstance,f=void 0!==h&&h,p=e.logLevel,v=e.localCacheEnabled,g=void 0!==v&&v,_=e.localCacheConfig,m=void 0===_?new _bundle_a5600e6c["l" /* L */]:_,b=e.localCacheEncryption,y=e.useAsyncStorageStore,w=void 0===y?null:y,I=e.appStateToggleEnabled,k=void 0===I||I;if(!chat_rn||f){var C="su-".concat(Object(_bundle_a5600e6c["dc" /* m */])()),S=null!=b?b:{encrypt:function(e){return e},decrypt:function(e){return e}},T=new xi({encryption:S});c||(T=Object(_bundle_a5600e6c["ec" /* n */])()?w?new Fi({AsyncStorage:w,encryption:S}):new xi({encryption:S}):new Di({encryption:S})),new _bundle_a5600e6c["v" /* V */](C,{appId:n,appVersion:r,options:a,apiHost:null!=d?d:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=l?l:"wss://ws-".concat(n,".sendbird.com"),store:T,encryption:S,logLevel:p,localCacheEnabled:g,localCacheConfig:m,debugMode:c,appStateToggleEnabled:k});var E=[new ds,new poll_f],U=new t(C,a,Object(_bundle_a5600e6c["fc" /* o */])(Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(o),!1),Object(_bundle_a5600e6c["gc" /* p */])(E),!1));return chat_rn||(chat_rn=U),U}return chat_rn},Object.defineProperty(t,"instance",{get:function(){return chat_rn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"version",{get:function(){return _bundle_a5600e6c["mc" /* v */]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appId",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appInfo",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).appInfo;return null!=e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appVersion",{get:function(){var e;return null!==(e=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugMode",{get:function(){return!!_bundle_a5600e6c["v" /* V */].of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).logger.level},set:function(e){_bundle_a5600e6c["v" /* V */].of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCacheEnabled",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheConfig",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ekey",{get:function(){return _bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentUser",{get:function(){var e;return null!==(e=_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).connectionManager;return e.isConnected?_bundle_a5600e6c["c" /* C */].OPEN:e.isConnecting?_bundle_a5600e6c["c" /* C */].CONNECTING:_bundle_a5600e6c["c" /* C */].CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastConnectedAt",{get:function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fcmPushToken",{get:function(){var e;return null!==(e=this._fcmPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"apnsPushToken",{get:function(){var e;return null!==(e=this._apnsPushToken)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),t.prototype._getNestDBVersion=function(){return 3},t.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},t.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},t.prototype.getMemoryStoreForDebugging=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof xi?n.store:null;throw _bundle_a5600e6c["hc" /* q */].debugModeRequired},t.prototype.addExtension=function(e,t){var n=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&n.extensions&&(n.extensions[e]=t)},t.prototype.addSendbirdExtensions=function(e,t,n){var r,i,o=_bundle_a5600e6c["v" /* V */].of(this._iid),s=o.logger,a=o.sdkState,u=new RegExp(_bundle_a5600e6c["j" /* J */]);if(0===e.length)return s.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(e.find((function(e){return!u.test(e.version)})))return s.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(n)try{for(var c=Object(_bundle_a5600e6c["ic" /* r */])(Object.entries(n)),d=c.next();!d.done;d=c.next()){var l=Object(_bundle_a5600e6c["gc" /* p */])(d.value,2),h=l[0],f=l[1];if(/&|=/.test(h)||/&|=/.test(f))return s.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a.sendbirdRuntimeEnvironment={sendbirdExtensions:e,deviceOS:t,customData:n},!0},t.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},t.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},t.prototype._safeInitializeStore=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:t=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.replaceStore(new xi),[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.initializeCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:if(t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.dispatcher,o=t.logger,n.userId&&n.userId===e)return[3,9];if(s="sendbird@".concat(n.appId,"/").concat(e,".db"),!r.localCacheEnabled)return[3,7];a.label=1;case 1:return a.trys.push([1,4,,6]),r.nestdb&&r.nestdb.state!==qi.CLOSED&&r.nestdb.name===s?[3,3]:((u=r.nestdb=new Bi({name:"sendbird@".concat(n.appId,"/").concat(e,".db"),version:this._getNestDBVersion(),store:r.store})).on("upgrade",chat_dt(u)),u.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,u.on("upgrade",chat_dt(u))})),[4,u.open()]);case 2:a.sent(),this._storeInitialized=!0,i.dispatch(new _bundle_2a18997f_v(this._iid,{userId:e})),a.label=3;case 3:return n.userId=e,[3,6];case 4:return c=a.sent(),o.warn("Nest DB Open Failed. ",c),[4,this._safeInitializeStore(s)];case 5:throw a.sent(),n.userId=e,_bundle_a5600e6c["hc" /* q */].databaseError;case 6:return[3,9];case 7:return[4,this._safeInitializeStore(s)];case 8:a.sent(),n.userId=e,a.label=9;case 9:return[2]}}))}))},t.prototype.getCacheDataSize=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return(e=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},t.prototype.clearCachedData=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return(e=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},t.prototype.clearCachedMessages=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=es.of(this._iid),n=Zi.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype._ready=function(e,t,r){return void 0===r&&(r={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,o,s,u,c,d,l,h;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&Object(_bundle_a5600e6c["B" /* a */])("string",t,!0)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),i=_bundle_a5600e6c["v" /* V */].of(this._iid),o=i.sdkState,s=i.cacheContext,u=i.connectionManager,c=i.statLogCollector,d=r.errorForOtherUser,o.userId?[3,2]:[4,u.logout()];case 1:case 3:return a.sent(),[3,5];case 2:return o.userId===e?[3,5]:d?[3,4]:[4,u.logout()];case 4:throw d;case 5:return a.trys.push([5,7,,8]),[4,this.initializeCache(e)];case 6:return a.sent(),_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_2a18997f_D),[3,8];case 7:return a.sent(),l=_bundle_a5600e6c["v" /* V */].of(this._iid).logger,s.localCacheEnabled=!1,l.warn("Cache initialization failed - cache is not available."),[3,8];case 8:return[4,s.preference.init(this._getPreferenceCacheKey(e),this._getNestDBVersion())];case 9:return a.sent(),[4,s.preference.get(this._getUserProfileCacheKey(e))];case 10:return(h=a.sent())&&new _bundle_a5600e6c["g" /* G */](this._iid,h).apply(),[4,c.init("sendbird@".concat(o.appId,"/").concat(e,".statlog"))];case 11:return a.sent(),[2]}}))}))},t.prototype.authenticateFeed=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return n=_bundle_a5600e6c["v" /* V */].of(this._iid),r=n.sessionManager,i=n.connectionManager,[4,this._ready(e,t,{errorForOtherUser:i.isConnected?_bundle_a5600e6c["hc" /* q */].alreadyConnectedAsAnotherUser:void 0})];case 1:return o.sent(),r.session.hasLessServiceScopeThan([_bundle_a5600e6c["m" /* M */].FEED])?[4,r.authenticateFeed(e,t)]:[3,3];case 2:o.sent(),o.label=3;case 3:return[2,this.currentUser]}}))}))},t.prototype.connect=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._ready(e,t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,_bundle_a5600e6c["v" /* V */].of(this._iid).connectionManager.connect(t)];case 3:return n.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},t.prototype.reconnect=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.session.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},t.prototype.disconnect=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.connectionManager,n=e.requestQueue,e.sessionManager,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.logout()];case 1:return r.sent(),[4,this.clearCachedData()];case 2:return r.sent(),[2]}}))}))},t.prototype.disconnectWebSocket=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket()];case 1:return r.sent(),[2]}}))}))},t.prototype.setBackgroundState=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background())},t.prototype.setForegroundState=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.dispatcher,i=e.logger;"background"===n.appState&&(n.appState="foreground",i.debug("going foreground state"),t.resetAndReconnect(),r.dispatch(new _bundle_f475d1ef_e))},t.prototype.setSessionHandler=function(e){Object(_bundle_a5600e6c["jc" /* s */])(e instanceof Cr).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),_bundle_a5600e6c["v" /* V */].of(this._iid).sessionManager.handler=e},t.prototype.addUserEventHandler=function(e,t){Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&t instanceof Or).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),_bundle_a5600e6c["v" /* V */].of(this._iid).userEventHandlers.set(e,t)},t.prototype.removeUserEventHandler=function(e){_bundle_a5600e6c["v" /* V */].of(this._iid).userEventHandlers.delete(e)},t.prototype.removeAllUserEventHandler=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).userEventHandlers.clear()},t.prototype.addConnectionHandler=function(e,t){Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&t instanceof Ur).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),_bundle_a5600e6c["v" /* V */].of(this._iid).connectionHandlers.set(e,t)},t.prototype.removeConnectionHandler=function(e){_bundle_a5600e6c["v" /* V */].of(this._iid).connectionHandlers.delete(e)},t.prototype.removeAllConnectionHandler=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).connectionHandlers.clear()},t.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new Rr(this._iid,e)},t.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new Dr(this._iid,e)},t.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new zr(this._iid,e)},t.prototype.createMessageSearchQuery=function(e){return new cs(this._iid,e)},t.prototype.createPollListQuery=function(e){return new _bundle_a5600e6c["kc" /* t */](this._iid,Object(_bundle_a5600e6c["Xb" /* g */])({},e))},t.prototype.createPollVoterListQuery=function(e){return new _bundle_a5600e6c["nc" /* w */](this._iid,Object(_bundle_a5600e6c["Xb" /* g */])({},e))},t.prototype.buildUserFromSerializedData=function(e){var t=Object(_bundle_a5600e6c["oc" /* x */])(e);return new _bundle_a5600e6c["u" /* U */](this._iid,_bundle_a5600e6c["u" /* U */].payloadify(t))},t.prototype.updateCurrentUserInfo=function(t){return void 0===t&&(t={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i,o,s,u,c,d;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return r=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},chat_ut),t),Object(_bundle_a5600e6c["jc" /* s */])(function(t){return Object(_bundle_a5600e6c["Zb" /* i */])(t.profileImage,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",t.profileUrl,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",t.nickname,!0)}(r)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this.currentUser?(i=_bundle_a5600e6c["v" /* V */].of(this._iid),o=i.sdkState,s=i.requestQueue,u=new chat_pt(Object(_bundle_a5600e6c["Xb" /* g */])({userId:o.userId},r)),[4,s.send(u)]):[3,2];case 1:return c=a.sent(),d=c.as(chat_vt).user,this.currentUser&&(r.nickname&&(this.currentUser.nickname=d.nickname),(r.profileUrl||r.profileImage)&&(this.currentUser.plainProfileUrl=d.profileUrl)),[2,d];case 2:throw _bundle_a5600e6c["hc" /* q */].connectionRequired}}))}))},t.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,o,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this.currentUser?(t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_pt({userId:n.userId,preferredLanguages:e}),[4,r.send(i)]):[3,2];case 1:return o=a.sent(),s=o.as(chat_vt).user,this.currentUser&&(this.currentUser.preferredLanguages=s.preferredLanguages),[2,s];case 2:throw _bundle_a5600e6c["hc" /* q */].connectionRequired}}))}))},t.prototype.registerFCMPushTokenForCurrentUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,s,u,c=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:if(Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),!this.currentUser)return[3,6];d.label=1;case 1:return d.trys.push([1,4,,5]),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sessionManager,i=t.sdkState,s=t.requestQueue,r.hasDeviceToken(_bundle_a5600e6c["p" /* P */].FCM,e)?[2,_bundle_a5600e6c["n" /* N */].SUCCESS]:(u=new chat_t({userId:i.userId,token:e}),[4,s.send(u)]);case 2:return d.sent(),[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return r.setDeviceToken(_bundle_a5600e6c["p" /* P */].FCM,e),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return d.sent(),this._fcmPushToken="",[2,_bundle_a5600e6c["n" /* N */].SUCCESS];case 4:return d.sent(),[2,_bundle_a5600e6c["n" /* N */].ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,_bundle_a5600e6c["n" /* N */].PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,s,u,c,d=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:if(Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sessionManager,i=t.sdkState,s=t.requestQueue,u=new chat_bt({userId:i.userId,token:e}),[4,s.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(d,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return r.unsetDeviceToken(_bundle_a5600e6c["p" /* P */].FCM,e),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._fcmPushToken="",[2,_bundle_a5600e6c["n" /* N */].SUCCESS];case 4:return l.sent(),[2,_bundle_a5600e6c["n" /* N */].ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,_bundle_a5600e6c["n" /* N */].PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,u=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,i=new chat_wt({userId:n.userId}),[4,r.send(i)]):[3,3];case 1:return s=c.sent().lastDeletedAt,[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(u,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(_bundle_a5600e6c["p" /* P */].FCM),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.registerAPNSPushTokenForCurrentUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,s,u,c=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:if(Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),!this.currentUser)return[3,6];d.label=1;case 1:return d.trys.push([1,4,,5]),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sessionManager,i=t.sdkState,s=t.requestQueue,r.hasDeviceToken(_bundle_a5600e6c["p" /* P */].APNS,e)?[2,_bundle_a5600e6c["n" /* N */].SUCCESS]:(u=new chat_gt({userId:i.userId,token:e}),[4,s.send(u)]);case 2:return d.sent(),[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return r.setDeviceToken(_bundle_a5600e6c["p" /* P */].APNS,e),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return d.sent(),this._apnsPushToken="",[2,_bundle_a5600e6c["n" /* N */].SUCCESS];case 4:return d.sent(),[2,_bundle_a5600e6c["n" /* N */].ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,_bundle_a5600e6c["n" /* N */].PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,s,u,c,d=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:if(Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sessionManager,i=t.sdkState,s=t.requestQueue,u=new chat_mt({userId:i.userId,token:e}),[4,s.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(d,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return r.unsetDeviceToken(_bundle_a5600e6c["p" /* P */].APNS,e),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._apnsPushToken="",[2,_bundle_a5600e6c["n" /* N */].SUCCESS];case 4:return l.sent(),[2,_bundle_a5600e6c["n" /* N */].ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,_bundle_a5600e6c["n" /* N */].PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i,s,u=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,i=new chat_yt({userId:n.userId}),[4,r.send(i)]):[3,3];case 1:return s=c.sent().lastDeletedAt,[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(u,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(_bundle_a5600e6c["p" /* P */].APNS),t.setDeviceTokenDeletedAt(s),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.getChannelInvitationPreference=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Ct({userId:t.userId}),[4,n.send(r)];case 1:return i=o.sent(),[2,{autoAccept:i.as(chat_St).autoAccept}]}}))}))},t.prototype.setChannelInvitationPreference=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,o,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("boolean",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sdkState,i=t.requestQueue,o=new chat_Tt({userId:r.userId,willAutoAccept:e}),[4,i.send(o)];case 1:return s=a.sent(),[2,{autoAccept:s.as(chat_Et).autoAccept}]}}))}))},t.prototype.getDoNotDisturb=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Ut({userId:t.userId}),[4,n.send(r)];case 1:return i=o.sent(),[2,i.as(chat_Pt).preference]}}))}))},t.prototype.setDoNotDisturb=function(e,t,r,i,s,u){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=""),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var o,c,d,l,h;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("boolean",e)&&Object(_bundle_a5600e6c["B" /* a */])("number",t)&&Object(_bundle_a5600e6c["B" /* a */])("number",r)&&Object(_bundle_a5600e6c["B" /* a */])("number",i)&&Object(_bundle_a5600e6c["B" /* a */])("number",s)&&Object(_bundle_a5600e6c["B" /* a */])("string",u)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),o=_bundle_a5600e6c["v" /* V */].of(this._iid),c=o.sdkState,d=o.requestQueue,l=new chat_Dt({userId:c.userId,doNotDisturbOn:e,startHour:t,startMin:r,endHour:i,endMin:s,timezone:u}),[4,d.send(l)];case 1:return h=a.sent(),[2,h.as(chat_Ot).preference]}}))}))},t.prototype.getSnoozePeriod=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_At({userId:t.userId}),[4,n.send(r)];case 1:return i=o.sent(),[2,i.as(chat_Lt).snoozePeriod]}}))}))},t.prototype.setSnoozePeriod=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=0),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,o,s,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("boolean",e)&&Object(_bundle_a5600e6c["B" /* a */])("number",t)&&Object(_bundle_a5600e6c["B" /* a */])("number",r)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),i=_bundle_a5600e6c["v" /* V */].of(this._iid),o=i.sdkState,s=i.requestQueue,u=new chat_Nt({userId:o.userId,snoozeOn:e,startTs:t,endTs:r}),[4,s.send(u)];case 1:return c=a.sent(),[2,c.as(chat_Mt).snoozePeriod]}}))}))},t.prototype.getMyPushTokensByToken=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,i,o,s,u,c,d,l,h,f,p,v;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["p" /* P */],t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid),i=r.sdkState,o=r.requestQueue,s=r.sessionManager,u=new chat_It({userId:i.userId,type:t,token:e}),[4,o.send(u)];case 1:c=a.sent(),d=c.as(chat_kt).pushTokens;try{for(l=Object(_bundle_a5600e6c["ic" /* r */])(d.deviceTokens),h=l.next();!h.done;h=l.next())f=h.value,s.setDeviceToken(d.type,f)}catch(e){p={error:e}}finally{try{h&&!h.done&&(v=l.return)&&v.call(l)}finally{if(p)throw p.error}}return[4,s.saveDeviceToken()];case 2:return a.sent(),[2,d]}}))}))},t.prototype.getPushTriggerOption=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Qt({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(chat_jt).pushTriggerOption]}}))}))},t.prototype.setPushTriggerOption=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["r" /* R */],e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Ft({userId:n.userId,pushTriggerOption:e}),[4,r.send(i)];case 1:return[2,o.sent().as(chat_qt).pushTriggerOption]}}))}))},t.prototype.getPushTemplate=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_Ht({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(chat_xt).name]}}))}))},t.prototype.setPushTemplate=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["t" /* T */],e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Gt({userId:n.userId,templateName:e}),[4,r.send(i)];case 1:return[2,o.sent().as(chat_Wt).name]}}))}))},t.prototype.blockUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_a5600e6c["u" /* U */]||Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sdkState,i=t.requestQueue,o=new chat_Rt({userId:r.userId,blockedUserId:e instanceof _bundle_a5600e6c["u" /* U */]?e.userId:e}),[4,i.send(o)];case 1:return s.sent(),[2]}}))}))},t.prototype.blockUserWithUserId=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this.blockUser(e)]}))}))},t.prototype.unblockUser=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_a5600e6c["u" /* U */]||Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sdkState,i=t.requestQueue,o=new chat_zt({userId:r.userId,unblockedUserId:e instanceof _bundle_a5600e6c["u" /* U */]?e.userId:e}),[4,i.send(o)];case 1:return s.sent(),[2]}}))}))},t.prototype.unblockUserWithUserId=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this.unblockUser(e)]}))}))},t.prototype.getFriendChangeLogsByToken=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,o,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sdkState,i=t.requestQueue,o=new chat_Bt({userId:r.userId,token:e}),[4,i.send(o)];case 1:return s=a.sent(),[2,s.as(chat_Kt).changelogs]}}))}))},t.prototype.getAllowFriendDiscovery=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,r=new chat_en({userId:t.userId}),[4,n.send(r)];case 1:return i=o.sent(),[2,i.as(chat_tn).allowFriendDiscovery]}}))}))},t.prototype.setAllowFriendDiscovery=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("boolean",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),r=t.sdkState,i=t.requestQueue,o=new chat_nn({userId:r.userId,allowFriendDiscovery:e}),[4,i.send(o)];case 1:return s.sent(),[2,e]}}))}))},t.prototype.uploadFriendDiscoveries=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Vt({userId:n.userId,discoveries:e}),[4,r.send(i)];case 1:return o=s.sent(),[2,o.as(chat_Jt).friendDiscoveryRequestId]}}))}))},t.prototype.deleteFriendDiscovery=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},t.prototype.deleteFriendDiscoveries=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Xt({userId:n.userId,discoveryKeys:e}),[4,r.send(i)];case 1:return o.sent(),[2]}}))}))},t.prototype.addFriends=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_Yt({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return o=s.sent(),[2,o.as(chat_Zt).users]}}))}))},t.prototype.deleteFriend=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return[2,this.deleteFriends([e])]}))}))},t.prototype.deleteFriends=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,r=t.requestQueue,i=new chat_$t({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return o.sent(),[2]}}))}))},t.prototype.getAllEmoji=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new chat_on,[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(chat_sn).emojiContainer]}}))}))},t.prototype.getEmojiCategory=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new chat_an({categoryId:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(chat_un).emojiCategory]}}))}))},t.prototype.getEmoji=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new chat_cn({key:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(chat_dn).emoji]}}))}))},t.prototype.getUIKitConfiguration=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),Object(_bundle_a5600e6c["jc" /* s */])(e.hasExtension("sb_uikit")).throw(_bundle_a5600e6c["hc" /* q */].notSupportedError),t=e.requestQueue,n=new chat_ln,[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(chat_hn).uikitConfiguration]}}))}))},t}();

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/uuid-6d982751.js
/* eslint-disable no-bitwise */
/* eslint-disable eqeqeq */
/* eslint-disable no-mixed-operators */
// https://stackoverflow.com/a/2117523
// used mainly for dom key generation
const uuidv4 = () => 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
  const r = Math.random() * 16 | 0;
  const v = c === 'x' ? r : r & 0x3 | 0x8;
  return v.toString(16);
});


//# sourceMappingURL=uuid-6d982751.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/lib/__bundle-dd1faecb.js
var _bundle_dd1faecb_U;!function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"}(_bundle_dd1faecb_U||(_bundle_dd1faecb_U={}));var _bundle_dd1faecb_b=function(){function t(e){var t;this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=null!==(t=e.data)&&void 0!==t?t:{},this.ts=e.ts}return Object.defineProperty(t.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===_bundle_a5600e6c["y" /* Y */].GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===_bundle_a5600e6c["y" /* Y */].OPEN},enumerable:!1,configurable:!0}),t}(),_bundle_dd1faecb_T=function(e){function n(t,n,s){var r=e.call(this,t,"SYEV",s)||this;return r.event=new _bundle_dd1faecb_b(s),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_M=function(e){function n(t,n,r){var a=e.call(this,t,n,r)||this,o=r.data.operators,i=void 0===o?[]:o;return a.operators=i.map((function(e){return new _bundle_a5600e6c["u" /* U */](a._iid,e)})),a}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_dd1faecb_T),H=function(){function e(e){var t=e.top,n=void 0===t?Number.MAX_SAFE_INTEGER:t,s=e.bottom,r=void 0===s?0:s;this.top=n,this.bottom=r}return e.prototype.includes=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.every((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.overlap=function(e){return this.includes(e.top)||this.includes(e.bottom)},e.prototype.intersect=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some((function(t){return e.top<=t&&t<=e.bottom}))},e.prototype.extends=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.top=Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([this.top],Object(_bundle_a5600e6c["gc" /* p */])(e),!1)),this.bottom=Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([this.bottom],Object(_bundle_a5600e6c["gc" /* p */])(e),!1))},e}(),_bundle_dd1faecb_L=function(e){function n(t,n){var s=e.call(this,t)||this;return s._logger=n.logger,s._sdkState=n.sdkState,s._sessionManager=n.sessionManager,s._requestQueue=n.requestQueue,s._dispatcher=n.dispatcher,s._cacheContext=n.cacheContext,s._channelType=n.channelType,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return es.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Zi.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return ns.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(e,t){this._messageBroadcast.subscribe(e,t)},n.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},n.prototype.getMessageFromCache=function(e){var t;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,filter:n,exactMatch:!0})];case 1:return[2,s.sent()]}}))}))},n.prototype.getMessagesFromCache=function(e,t,n,s,r,a){return void 0===r&&(r=fr),void 0===a&&(a=!0),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:r,filter:s,backward:"next"===n,inclusive:a})];case 1:return[2,o.sent()]}}))}))},n.prototype.getPollMessagesFromCache=function(e,t,n,s){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:t,limit:s,filter:n,backward:!1,isPollOnly:!0})];case 1:return[2,r.sent()]}}))}))},n.prototype.getCachedMessageCountBetween=function(e,t,n,s){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return[4,this._messageCache.countBetween(e,t,new H({top:n,bottom:s}))];case 1:return[2,r.sent()]}}))}))},n.prototype.getUnsentMessagesFromCache=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:t})];case 1:return[2,n.sent()]}}))}))},n.prototype.removeFailedMessageFromCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return t.sent(),[2]}}))}))},n}(_bundle_a5600e6c["I" /* a8 */]),_bundle_dd1faecb_y=function(e){function n(t,n,s){var r,a,o,i,u=this;(u=e.call(this,t,"ADMM",s)||this).message=new _bundle_1edafb8c_Be(t,s);var l=_bundle_a5600e6c["v" /* V */].of(t).sdkState;return u.isMentioned=Object(_bundle_a5600e6c["sb" /* ak */])(u.message.mentionType,null!==(o=null!==(r=u.message.mentionedUserIds)&&void 0!==r?r:null===(a=u.message.mentionedUsers)||void 0===a?void 0:a.map((function(e){return e.userId})))&&void 0!==o?o:[],l.userId),u.forceUpdateLastMessage=null!==(i=s.force_update_last_message)&&void 0!==i&&i,u}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_I=function(e){function n(t,n,s){var r,a,o,i,u,h=this;(h=e.call(this,t,"AEDI",s)||this).message=new _bundle_1edafb8c_Be(t,s);var N=_bundle_a5600e6c["v" /* V */].of(t).sdkState;return h.mentionCountChange=Object(_bundle_a5600e6c["Cb" /* au */])({mentionType:null===(r=s.old_values)||void 0===r?void 0:r.mention_type,mentionedUserIds:null!==(o=null===(a=s.old_values)||void 0===a?void 0:a.mentioned_user_ids)&&void 0!==o?o:[]},Object(_bundle_a5600e6c["lc" /* u */])({mentionType:h.message.mentionType,mentionedUserIds:null!==(i=h.message.mentionedUserIds)&&void 0!==i?i:null===(u=h.message.mentionedUsers)||void 0===u?void 0:u.map((function(e){return e.userId}))}),N.userId),h}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_D=function(e){function n(t,n,s){var r=e.call(this,t,"MRCT",s)||this;return r.channelUrl=s.channel_url,r.channelType=s.channel_type,r.event=new _bundle_1edafb8c_Ae(s),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_R=function(e){function n(t,n,s){var r=e.call(this,t,"MTHD",s)||this;return r.event=new ss(t,s),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_P=function(e){function n(t,n,s){var r=e.call(this,t,"MCNT",s)||this;return r.groupChannelMemberCounts=s.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),r.openChannelMemberCounts=s.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_O=function(e){function n(t,n,s){var r=e.call(this,t,"PEDI",s)||this;return r.event=new _bundle_c336221f_s(t,s),r.status=Object(_bundle_a5600e6c["Qb" /* b7 */])(s.poll.status)||s.poll.status,r.channelUrl=s.channel_url,r.channelType=s.channel_type,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,e),n}(_bundle_a5600e6c["w" /* W */]),_bundle_dd1faecb_S=function(){this.onUserMuted=_bundle_a5600e6c["yb" /* aq */],this.onUserUnmuted=_bundle_a5600e6c["yb" /* aq */],this.onUserBanned=_bundle_a5600e6c["yb" /* aq */],this.onUserUnbanned=_bundle_a5600e6c["yb" /* aq */],this.onChannelChanged=_bundle_a5600e6c["yb" /* aq */],this.onChannelDeleted=_bundle_a5600e6c["yb" /* aq */],this.onChannelFrozen=_bundle_a5600e6c["yb" /* aq */],this.onChannelUnfrozen=_bundle_a5600e6c["yb" /* aq */],this.onOperatorUpdated=_bundle_a5600e6c["yb" /* aq */],this.onChannelMemberCountChanged=_bundle_a5600e6c["yb" /* aq */],this.onMetaDataCreated=_bundle_a5600e6c["yb" /* aq */],this.onMetaDataUpdated=_bundle_a5600e6c["yb" /* aq */],this.onMetaDataDeleted=_bundle_a5600e6c["yb" /* aq */],this.onMetaCounterCreated=_bundle_a5600e6c["yb" /* aq */],this.onMetaCounterUpdated=_bundle_a5600e6c["yb" /* aq */],this.onMetaCounterDeleted=_bundle_a5600e6c["yb" /* aq */],this.onMessageReceived=_bundle_a5600e6c["yb" /* aq */],this.onMessageUpdated=_bundle_a5600e6c["yb" /* aq */],this.onMessageDeleted=_bundle_a5600e6c["yb" /* aq */],this.onMentionReceived=_bundle_a5600e6c["yb" /* aq */],this.onReactionUpdated=_bundle_a5600e6c["yb" /* aq */],this.onThreadInfoUpdated=_bundle_a5600e6c["yb" /* aq */]};

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/openChannel.js
var openChannel_le=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e._channels=new Map,e._enteredChannelUrls=[],e}return Object(_bundle_a5600e6c["A" /* _ */])(a,r),Object.defineProperty(a.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(n){return e._channels.get(n)})).filter((function(e){return!!e}))},enumerable:!1,configurable:!0}),a.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},a.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},a.prototype.exit=function(e){var n=this._enteredChannelUrls.indexOf(e);n>=0&&this._enteredChannelUrls.splice(n,1)},a.prototype.exitAll=function(){this._enteredChannelUrls=[]},a.prototype.get=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return[2,this._channels.get(e)]}))}))},a.prototype.upsert=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return n=[],e.forEach((function(e){if(r._channels.has(e.url)){var t=r._channels.get(e.url);Object.assign(t,e),n.push(t)}else r._channels.set(e.url,e),n.push(e)})),[2,n]}))}))},a.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return this._channels.delete(e),this.exit(e),[2]}))}))},a.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},a}(_bundle_a5600e6c["I" /* a8 */]),openChannel_he={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},openChannel_de=function(n){function t(e){var t=e.channelUrl,r=e.isInternalCall,a=n.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].GET,a.path="".concat(r?_bundle_a5600e6c["Rb" /* b8 */]:_bundle_a5600e6c["Sb" /* b9 */],"/").concat(encodeURIComponent(t)),a}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Wb" /* f */]),openChannel_pe=function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.channel=new openChannel_Pe(e,t),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Yb" /* h */]),openChannel_fe=function(n){function t(e){var t=this,r=e.channelUrl,a=e.coverUrlOrImage,u=e.name,l=e.data,h=e.customType,f=e.operatorUserIds,v=e.isEphemeral;return(t=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,t.path=_bundle_a5600e6c["Sb" /* b9 */],t.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({channel_url:r,cover_url:Object(_bundle_a5600e6c["B" /* a */])("string",a)?a:null,cover_file:Object(_bundle_a5600e6c["Zb" /* i */])(a)?a:null,name:u,data:l,custom_type:h,operators:f,is_ephemeral:v})),t}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Wb" /* f */]);!function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.channel=new openChannel_Pe(e,t),r}Object(_bundle_a5600e6c["A" /* _ */])(t,n)}(_bundle_a5600e6c["Yb" /* h */]);var openChannel_ve=function(n){function t(e){var t=e.channelUrl;return n.call(this,{code:"ENTR",payload:{channel_url:t},ackRequired:!0})||this}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["qb" /* ai */]),openChannel_Ce=function(n){function t(e,t,r){var a,o,i=this;return i=n.call(this,e,"SYEV",r)||this,r.data&&(i.participantCount=null!==(a=r.data.participant_count)&&void 0!==a?a:0,i.user=new _bundle_a5600e6c["u" /* U */](e,r.data),i.ts=null!==(o=r.data.edge_ts)&&void 0!==o?o:0),i}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_dd1faecb_T),openChannel_e=function(n){function t(e){var t=e.channelUrl;return n.call(this,{code:"EXIT",payload:{channel_url:t},ackRequired:!0})||this}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["qb" /* ai */]),openChannel_ye=function(n){function t(e,t,r){var a,o,i=this;return i=n.call(this,e,"EXIT",r)||this,r.data&&(i.participantCount=null!==(a=r.data.participant_count)&&void 0!==a?a:0,i.user=new _bundle_a5600e6c["u" /* U */](e,r.data),i.ts=null!==(o=r.data.edge_ts)&&void 0!==o?o:0),i}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_dd1faecb_T),openChannel_Ue={},openChannel_me=function(r){function s(e,a){var o=r.call(this,e,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},a),{channelType:_bundle_a5600e6c["y" /* Y */].OPEN}))||this;return o.subscribeChannelEvent=_bundle_a5600e6c["yb" /* aq */],o.unsubscribeChannelEvent=_bundle_a5600e6c["yb" /* aq */],o.refreshChannel=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(o,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,Object(_bundle_a5600e6c["yb" /* aq */])()]}))}))},o._openChannelCache=new openChannel_le(e),o._openChannelHandlers=new Map,o._dispatcher.on((function(e){var n,t;if(e instanceof _bundle_a5600e6c["w" /* W */])o._handleEvent(e);else if(e instanceof _bundle_a5600e6c["pc" /* y */]&&e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED){var r=o._openChannelCache.enteredChannels;try{for(var a=Object(_bundle_a5600e6c["ic" /* r */])(r),i=a.next();!i.done;i=a.next()){i.value.enter()}}catch(e){n={error:e}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}}})),openChannel_Ue[e]||(openChannel_Ue[e]=o),o}return Object(_bundle_a5600e6c["A" /* _ */])(s,r),s.of=function(e){return openChannel_Ue[e]},s.prototype.buildOpenChannelFromSerializedData=function(e){var n=Object(_bundle_a5600e6c["oc" /* x */])(e);return new openChannel_Pe(this._iid,openChannel_Pe.payloadify(n))},s.prototype.getChannelFromCache=function(e){var r;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,null!==(r=n.sent())&&void 0!==r?r:null]}}))}))},s.prototype.upsertChannelsToCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,n.sent()]}}))}))},s.prototype.removeChannelsFromCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,a,o,i,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:t.trys.push([0,5,6,7]),n=Object(_bundle_a5600e6c["ic" /* r */])(e),r=n.next(),t.label=1;case 1:return r.done?[3,4]:(a=r.value,[4,this._openChannelCache.remove(a)]);case 2:t.sent(),t.label=3;case 3:return r=n.next(),[3,1];case 4:return[3,7];case 5:return o=t.sent(),i={error:o},[3,7];case 6:try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},s.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},s.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},s.prototype._handleEvent=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var r,a,o,i,s,u,c,l,h,d,p,f,v,C,_,U,m,g,E,D,O,x,I,A,L,R,Y,Z,$,ee,ce,le,he,de,pe,fe,ve,_e,Ue,me,ge,Ee,we,Te,Me,be,Ne,Pe,De,Oe,He,xe,Ie,Ae,Le,Re,Fe,ke,Se,qe,ze,Qe,Ke,Ve,Be,We,Ge,je,Xe=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(Ye){switch(Ye.label){case 0:switch(Ye.trys.push([0,57,,58]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,56];case 1:return i=null,"MESG"===e.code?i=e.as(xn):"FILE"===e.code?i=e.as(_bundle_1edafb8c_Xe):"ADMM"!==e.code&&"BRDM"!=e.code||(i=e.as(_bundle_dd1faecb_y)),i?(r=i.message,a=i.isMentioned,r.channelType!==_bundle_a5600e6c["y" /* Y */].OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:o=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,i,s,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())i=n.value,this._openChannelCache.isEnteredChannel(o.url)&&(i.onMessageReceived&&i.onMessageReceived(o,r),a&&i.onMentionReceived&&i.onMentionReceived(o,r))}catch(e){s={error:e}}finally{try{n&&!n.done&&(u=e.return)&&u.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Ye.label=3;case 3:return[3,56];case 4:return i=null,"MEDI"===e.code?i=e.as(Dn):"FEDI"===e.code?i=e.as(qn):"AEDI"===e.code&&(i=e.as(_bundle_dd1faecb_I)),i?(s=i.message,u=i.mentionCountChange,s.channelType!==_bundle_a5600e6c["y" /* Y */].OPEN?[3,6]:[4,this.getChannel(s.channelUrl,!0)]):[3,6];case 5:c=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(c.url)&&(r.onMessageUpdated&&r.onMessageUpdated(c,s),u>0&&r.onMentionReceived&&r.onMentionReceived(c,s))}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=6;case 6:return[3,56];case 7:return l=e.as(Bn),ce=l.channelUrl,le=l.channelType,h=l.messageId,le!==_bundle_a5600e6c["y" /* Y */].OPEN?[3,9]:[4,this.getChannel(ce,!0)];case 8:d=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(d.url)&&r.onMessageDeleted&&r.onMessageDeleted(d,h)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=9;case 9:return[3,56];case 10:return p=e.as(_bundle_dd1faecb_D),ce=p.channelUrl,le=p.channelType,f=p.event,le!==_bundle_a5600e6c["y" /* Y */].OPEN?[3,12]:[4,this.getChannel(ce,!0)];case 11:v=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(v.url)&&r.onReactionUpdated&&r.onReactionUpdated(v,f)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=12;case 12:return[3,56];case 13:return(C=e.as(_bundle_dd1faecb_R).event).channelType!==_bundle_a5600e6c["y" /* Y */].OPEN?[3,15]:[4,this.getChannel(C.channelUrl,!0)];case 14:_=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())r=n.value,this._openChannelCache.isEnteredChannel(_.url)&&r.onThreadInfoUpdated&&r.onThreadInfoUpdated(_,C)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=15;case 15:return[3,56];case 16:U=e.as(_bundle_dd1faecb_P).openChannelMemberCounts,m=[],Ye.label=17;case 17:Ye.trys.push([17,22,23,24]),g=Object(_bundle_a5600e6c["ic" /* r */])(U),E=g.next(),Ye.label=18;case 18:return E.done?[3,21]:(D=E.value,ce=D.channelUrl,ge=D.participantCount,O=D.updatedAt,[4,this.getChannelFromCache(ce)]);case 19:(x=Ye.sent())&&x._updateParticipantCount(ge,O)&&m.push(x),Ye.label=20;case 20:return E=g.next(),[3,18];case 21:return[3,24];case 22:return I=Ye.sent(),Ge={error:I},[3,24];case 23:try{E&&!E.done&&(je=g.return)&&je.call(g)}finally{if(Ge)throw Ge.error}return[7];case 24:return m.length>0?[4,this.upsertChannelsToCache(m)]:[3,26];case 25:A=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onChannelMemberCountChanged&&r.onChannelMemberCountChanged(A)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=26;case 26:return[3,56];case 27:return L=e.as(_bundle_dd1faecb_O),R=L.event,Y=L.status,ce=L.channelUrl,le=L.channelType,ce&&le===_bundle_a5600e6c["y" /* Y */].OPEN?[4,this.getChannel(ce,!0)]:[3,29];case 28:Z=Ye.sent(),this._dispatcher.dispatch(new _bundle_a5600e6c["S" /* aI */]({event:R,source:_bundle_a5600e6c["x" /* X */].EVENT_POLL_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])(Y===_bundle_a5600e6c["Mb" /* b3 */]?function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onPollDeleted&&r.onPollDeleted(Z,R.pollId)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))}:function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onPollUpdated&&r.onPollUpdated(Z,R)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))}),Ye.label=29;case 29:return[3,56];case 30:return $=e.as(cr),ee=$.event,ce=$.channelUrl,le=$.channelType,ce&&le===_bundle_a5600e6c["y" /* Y */].OPEN?[4,this.getChannel(ce,!0)]:[3,32];case 31:he=Ye.sent(),this._dispatcher.dispatch(new _bundle_a5600e6c["N" /* aD */]({event:ee,source:_bundle_a5600e6c["x" /* X */].EVENT_POLL_VOTED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){var e,n,r,a,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._openChannelHandlers.values()),n=e.next();!n.done;n=e.next())(r=n.value).onPollVoted&&r.onPollVoted(he,ee)}catch(e){a={error:e}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Ye.label=32;case 32:return[3,56];case 33:if(!(de=e.as(_bundle_dd1faecb_T).event).isOpenChannelEvent)return[3,55];switch(de.category){case _bundle_dd1faecb_U.CHANNEL_ENTER:return[3,34];case _bundle_dd1faecb_U.CHANNEL_EXIT:return[3,36];case _bundle_dd1faecb_U.CHANNEL_OPERATOR_UPDATE:return[3,38];case _bundle_dd1faecb_U.USER_CHANNEL_MUTE:case _bundle_dd1faecb_U.USER_CHANNEL_UNMUTE:return[3,40];case _bundle_dd1faecb_U.USER_CHANNEL_BAN:case _bundle_dd1faecb_U.USER_CHANNEL_UNBAN:return[3,42];case _bundle_dd1faecb_U.CHANNEL_FREEZE:case _bundle_dd1faecb_U.CHANNEL_UNFREEZE:return[3,44];case _bundle_dd1faecb_U.CHANNEL_DELETED:return[3,46];case _bundle_dd1faecb_U.CHANNEL_PROP_CHANGED:return[3,49];case _bundle_dd1faecb_U.CHANNEL_META_DATA_CHANGED:return[3,51];case _bundle_dd1faecb_U.CHANNEL_META_COUNTERS_CHANGED:return[3,53]}return[3,55];case 34:return[4,this.getChannel(de.channelUrl,!0)];case 35:return pe=Ye.sent(),fe=e.as(openChannel_Ce),ge=fe.participantCount,ve=fe.user,_e=pe._updateParticipantCount(ge,de.ts),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserEntered&&e.onUserEntered(pe,ve),_e&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(pe)})),[2]}))}))})),[3,55];case 36:return[4,this.getChannel(de.channelUrl,!0)];case 37:return Ue=Ye.sent(),me=e.as(openChannel_ye),ge=me.participantCount,Ee=me.user,we=Ue._updateParticipantCount(ge,de.ts),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserExited&&e.onUserExited(Ue,Ee),we&&e.onChannelParticipantCountChanged&&e.onChannelParticipantCountChanged(Ue)})),[2]}))}))})),[3,55];case 38:return[4,this.getChannel(de.channelUrl,!0)];case 39:return Te=Ye.sent(),Me=e.as(_bundle_dd1faecb_M).operators,Te.operators=Me,this.upsertChannelsToCache([Te]),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(Te,Me)})),[2]}))}))})),[3,55];case 40:return[4,this.getChannel(de.channelUrl,!0)];case 41:return be=Ye.sent(),Ne=de.category===_bundle_dd1faecb_U.USER_CHANNEL_MUTE,Pe=e.as(Ne?_bundle_1edafb8c_En:wn).user,Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Ne?e.onUserMuted&&e.onUserMuted(be,Pe):e.onUserUnmuted&&e.onUserUnmuted(be,Pe)})),[2]}))}))})),[3,55];case 42:return[4,this.getChannel(de.channelUrl,!0)];case 43:return De=Ye.sent(),Oe=de.category===_bundle_dd1faecb_U.USER_CHANNEL_BAN,He=e.as(Oe?Sn:An).user,Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Oe?e.onUserBanned&&e.onUserBanned(De,He):e.onUserUnbanned&&e.onUserUnbanned(De,He)})),[2]}))}))})),[3,55];case 44:return[4,this.getChannel(de.channelUrl,!0)];case 45:return xe=Ye.sent(),Ie=e.as(_bundle_1edafb8c_Cn).freeze,xe.isFrozen=Ie,this.upsertChannelsToCache([xe]),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Ie?e.onChannelFrozen&&e.onChannelFrozen(xe):e.onChannelUnfrozen&&e.onChannelUnfrozen(xe)})),[2]}))}))})),[3,55];case 46:return[4,this.getChannel(de.channelUrl,!0)];case 47:return Ae=Ye.sent(),[4,this.removeChannelsFromCache([Ae.url])];case 48:return Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(Ae.url,Ae.channelType)})),[2]}))}))})),[3,55];case 49:return[4,this.getChannelWithoutCache(de.channelUrl,!0)];case 50:return Le=Ye.sent(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(Le)})),[2]}))}))})),[3,55];case 51:return[4,this.getChannel(de.channelUrl,!0)];case 52:return Re=Ye.sent(),Fe=e.as(on),ke=Fe.created,Se=Fe.updated,qe=Fe.deleted,ke&&Re._upsertCachedMetaData(ke,de.ts),Se&&Re._upsertCachedMetaData(Se,de.ts),qe&&Re._removeFromCachedMetaData(qe,de.ts),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){ke&&e.onMetaDataCreated&&e.onMetaDataCreated(Re,ke),Se&&e.onMetaDataUpdated&&e.onMetaDataUpdated(Re,Se),qe&&e.onMetaDataDeleted&&e.onMetaDataDeleted(Re,qe)})),[2]}))}))})),[3,55];case 53:return[4,this.getChannel(de.channelUrl,!0)];case 54:return ze=Ye.sent(),Qe=e.as(_bundle_1edafb8c_n),Ke=Qe.created,Ve=Qe.updated,Be=Qe.deleted,Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Xe,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._openChannelHandlers.forEach((function(e){Ke&&e.onMetaCounterCreated&&e.onMetaCounterCreated(ze,Ke),Ve&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(ze,Ve),Be&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(ze,Be)})),[2]}))}))})),[3,55];case 55:return[3,56];case 56:return[3,58];case 57:if(We=Ye.sent(),Object(_bundle_a5600e6c["L" /* aB */])(We))throw We;return[3,58];case 58:return[2]}}))}))},s.prototype.addHandler=function(e,n){this._openChannelHandlers.set(e,n)},s.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},s.prototype.clearHandler=function(){this._openChannelHandlers.clear()},s.prototype.getChannel=function(e,r){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(n=t.sent())?[2,n]:[3,4];case 3:return t.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e)];case 5:return[2,t.sent()]}}))}))},s.prototype.getChannelWithoutCache=function(e,r){return void 0===r&&(r=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=new openChannel_de({channelUrl:e,isInternalCall:r}),[4,this._requestQueue.send(n)];case 1:return a=t.sent(),i=a.as(openChannel_pe).channel,[4,this.upsertChannelsToCache([i])];case 2:return[2,t.sent()[0]]}}))}))},s.prototype.createChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,s,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},openChannel_he),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["k" /* K */])("string",e.operatorUserIds,!0)&&(Object(_bundle_a5600e6c["B" /* a */])("string",e.coverUrlOrImage,!0)||Object(_bundle_a5600e6c["Zb" /* i */])(e.coverUrlOrImage,!0))&&Object(_bundle_a5600e6c["B" /* a */])("string",e.name,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.data,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.customType,!0)&&(Object(_bundle_a5600e6c["B" /* a */])("string",e.channelUrl)&&/^\w+$/.test(e.channelUrl)||null===e.channelUrl||void 0===e.channelUrl)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isEphemeral,!0)}(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=new openChannel_fe(n),[4,this._requestQueue.send(r)];case 1:return s=t.sent(),u=s.as(openChannel_pe).channel,this.upsertChannelsToCache([u]),[2,u]}}))}))},s}(_bundle_dd1faecb_L),openChannel_ge={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},openChannel_Ee=function(n){function t(e){var t=this,r=e.channelUrl,a=e.token,o=e.limit;return(t=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,t.path="".concat(_bundle_a5600e6c["Sb" /* b9 */],"/").concat(encodeURIComponent(r),"/participants"),t.params={token:a,limit:o},t}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Wb" /* f */]),openChannel_we=function(n){function t(e,t){var r=n.call(this,e,t)||this;r.participants=[];var a=t.next,o=t.participants;return r.token=a,r.participants=o.map((function(n){return new _bundle_1edafb8c_yt(e,n)})),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Yb" /* h */]),openChannel_Te=function(r){function a(e,n,t){return r.call(this,e,n,_bundle_a5600e6c["y" /* Y */].OPEN,t)||this}return Object(_bundle_a5600e6c["A" /* _ */])(a,r),a.prototype._validate=function(){return r.prototype._validate.call(this)},a.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new openChannel_Ee(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token})),[4,e.send(n)]):[3,2]:[3,5];case 1:return r=t.sent(),a=r.as(openChannel_we),o=a.participants,i=a.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},a}(_bundle_a5600e6c["zb" /* ar */]),openChannel_Me=function(n){function t(e){var t=this,r=e.channelUrl,a=e.coverUrlOrImage,u=e.name,l=e.data,h=e.customType,f=e.operatorUserIds;return(t=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,t.path="".concat(_bundle_a5600e6c["Sb" /* b9 */],"/").concat(encodeURIComponent(r)),t.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({cover_url:Object(_bundle_a5600e6c["B" /* a */])("string",a)?a:null,cover_file:Object(_bundle_a5600e6c["Zb" /* i */])(a)?a:null,name:u,data:l,custom_type:h,operators:f})),t}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Wb" /* f */]),openChannel_be=function(n){function t(e,t){var r=n.call(this,e,t)||this;return r.channel=new openChannel_Pe(e,t),r}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Yb" /* h */]),openChannel_Ne=function(n){function t(e){var t=this,r=e.channelUrl;return(t=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,t.path="".concat(_bundle_a5600e6c["Sb" /* b9 */],"/").concat(encodeURIComponent(r)),t}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Wb" /* f */]);!function(n){function t(e,t){return n.call(this,e,t)||this}Object(_bundle_a5600e6c["A" /* _ */])(t,n)}(_bundle_a5600e6c["Yb" /* h */]);var openChannel_Pe=function(r){function s(e,n){var t,a=this;return(a=r.call(this,e,n)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.channelType=_bundle_a5600e6c["y" /* Y */].OPEN,a.participantCount=null!==(t=n.participant_count)&&void 0!==t?t:0,a.operators=Array.isArray(n.operators)?n.operators.map((function(n){return new _bundle_a5600e6c["u" /* U */](e,n)})):[],a}return Object(_bundle_a5600e6c["A" /* _ */])(s,r),s.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Ar.payloadify(e)),{participant_count:e.participantCount,operators:e.operators.map((function(e){return _bundle_a5600e6c["u" /* U */].payloadify(e)}))})))},s.prototype.serialize=function(){return Object(_bundle_a5600e6c["jb" /* ab */])(this)},s.prototype.isOperator=function(e){return e instanceof _bundle_a5600e6c["u" /* U */]?this.isOperator(e.userId):this.operators.some((function(n){return n.userId===e}))},s.prototype._updateParticipantCount=function(e,n){return n>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=n,!0)},s.prototype.createParticipantListQuery=function(e){return new openChannel_Te(this._iid,this.url,e)},s.prototype.refresh=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,openChannel_me.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},s.prototype.enter=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new openChannel_ve({channelUrl:this.url}),[4,e.send(n)];case 1:return r=t.sent(),a=r.as(openChannel_Ce),o=a.participantCount,i=a.ts,this._updateParticipantCount(o,i),openChannel_me.of(this._iid).setEnteredToCache(this),[2]}}))}))},s.prototype.exit=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new openChannel_e({channelUrl:this.url}),[4,e.send(n)];case 1:return r=t.sent(),a=r.as(openChannel_ye),o=a.participantCount,i=a.ts,this._updateParticipantCount(o,i),openChannel_me.of(this._iid).setExitedToCache(this),is.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},s.prototype.updateChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,s,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},openChannel_ge),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["k" /* K */])("string",e.operatorUserIds,!0)&&(Object(_bundle_a5600e6c["B" /* a */])("string",e.coverUrlOrImage)||Object(_bundle_a5600e6c["Zb" /* i */])(e.coverUrlOrImage)||null===e.coverUrlOrImage)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.name,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.data,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.customType,!0)}(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,s=new openChannel_Me(Object(_bundle_a5600e6c["Xb" /* g */])({channelUrl:this.url},n)),[4,r.send(s)];case 1:return u=t.sent(),c=u.as(openChannel_be).channel,this._update(c),[4,openChannel_me.of(this._iid).upsertChannelsToCache([c])];case 2:return t.sent(),[2,this]}}))}))},s.prototype.updateChannelWithOperatorUserIds=function(e,r,a,o,i){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},openChannel_ge),{name:e,coverUrlOrImage:r,data:a,operatorUserIds:o,customType:i}),[2,this.updateChannel(n)]}))}))},s.prototype.delete=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new openChannel_Ne({channelUrl:this.url}),[4,e.send(n)];case 1:return t.sent(),[4,openChannel_me.of(this._iid).removeChannelsFromCache([this.url])];case 2:return t.sent(),[2]}}))}))},s.prototype.sendUserMessage=function(e){return Object(_bundle_a5600e6c["jc" /* s */])(!e.isPinnedMessage).throw(_bundle_a5600e6c["hc" /* q */].notSupportedError),r.prototype.sendUserMessage.call(this,e)},s.prototype.sendFileMessage=function(e){return Object(_bundle_a5600e6c["jc" /* s */])(!e.isPinnedMessage).throw(_bundle_a5600e6c["hc" /* q */].notSupportedError),r.prototype.sendFileMessage.call(this,e)},s}(Ar),openChannel_De=function(n){function t(e){void 0===e&&(e={});var t=n.call(this)||this;return Object.keys(e).forEach((function(n){t.hasOwnProperty(n)&&(t[n]=e[n])})),t}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.onUserEntered=_bundle_a5600e6c["yb" /* aq */],e.onUserExited=_bundle_a5600e6c["yb" /* aq */],e.onChannelParticipantCountChanged=_bundle_a5600e6c["yb" /* aq */],e.onPollUpdated=_bundle_a5600e6c["yb" /* aq */],e.onPollVoted=_bundle_a5600e6c["yb" /* aq */],e.onPollDeleted=_bundle_a5600e6c["yb" /* aq */],e}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_dd1faecb_S)),openChannel_Oe=function(n){function t(e){var t=this,r=e.token,a=e.limit,o=e.nameKeyword,i=e.urlKeyword,u=e.customTypes,l=e.includeFrozen,h=e.includeMetaData;return(t=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,t.path=_bundle_a5600e6c["Sb" /* b9 */],t.params=Object(_bundle_a5600e6c["Vb" /* e */])({token:r,limit:a,name_contains:o,url_contains:i,custom_types:u,show_frozen:l,show_metadata:h}),t}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Wb" /* f */]),openChannel_He=function(n){function t(e,t){var r=n.call(this,e,t)||this;r.channels=[];var a=t.next,o=t.channels,i=t.ts;return r.token=a,o&&o.length>0&&(r.channels=o.map((function(n){return new openChannel_Pe(e,n)}))),r.ts="number"==typeof i?i:null,r}return Object(_bundle_a5600e6c["A" /* _ */])(t,n),t}(_bundle_a5600e6c["Yb" /* h */]),openChannel_xe=function(r){function i(e,n){var t,a,o,i,s,u=this;return(u=r.call(this,e,n)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=null===(t=n.includeFrozen)||void 0===t||t,u.includeMetaData=null===(a=n.includeMetaData)||void 0===a||a,u.nameKeyword=null!==(o=n.nameKeyword)&&void 0!==o?o:null,u.urlKeyword=null!==(i=n.urlKeyword)&&void 0!==i?i:null,u.customTypes=null!==(s=n.customTypes)&&void 0!==s?s:null,u}return Object(_bundle_a5600e6c["A" /* _ */])(i,r),i.prototype._validate=function(){return r.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeFrozen)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeMetaData)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.nameKeyword,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.urlKeyword,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.customTypes,!0)},i.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n,r,a,o,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new openChannel_Oe(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token}))),[4,e.send(n)]):[3,3]:[3,6];case 1:return r=t.sent(),a=r.as(openChannel_He),o=a.channels,i=a.token,this._token=i,this._hasNext=!!i,[4,openChannel_me.of(this._iid).upsertChannelsToCache(o)];case 2:return t.sent(),this._isLoading=!1,[2,o];case 3:return[2,[]];case 4:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 5:return[3,7];case 6:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 7:return[2]}}))}))},i}(_bundle_a5600e6c["P" /* aF */]),openChannel_Ie=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="openChannel",e}return Object(_bundle_a5600e6c["A" /* _ */])(a,r),a.prototype.init=function(e,n){var t=n.sdkState,a=n.dispatcher,o=n.sessionManager,i=n.requestQueue,s=n.logger,u=n.onlineDetector,c=n.cacheContext;r.prototype.init.call(this,e,{sdkState:t,dispatcher:a,sessionManager:o,requestQueue:i,logger:s,onlineDetector:u,cacheContext:c}),this._manager=new openChannel_me(e,{sdkState:t,dispatcher:a,requestQueue:i,logger:s,cacheContext:c,sessionManager:o})},a.prototype.createOpenChannelListQuery=function(e){return void 0===e&&(e={}),new openChannel_xe(this._iid,e)},a.prototype.addOpenChannelHandler=function(e,n){this._manager.addHandler(e,n)},a.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},a.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},a.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},a.prototype.getChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return[2,this._manager.getChannel(e)]}))}))},a.prototype.getChannelWithoutCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return[2,this._manager.getChannelWithoutCache(e)]}))}))},a.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return[2,this._manager.createChannel(e)]}))}))},a.prototype.createChannelWithOperatorUserIds=function(e,r,a,o,i){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return(n=Object(_bundle_a5600e6c["Xb" /* g */])({},openChannel_he)).name=e,n.coverUrlOrImage=r,n.data=a,n.operatorUserIds=o,n.customType=i,[2,this._manager.createChannel(n)]}))}))},a}(_bundle_a5600e6c["X" /* aN */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/lib/__bundle-863f90b8.js
var _bundle_863f90b8_Rt;!function(e){e.NONE="none",e.JOINED="joined",e.INVITED="invited",e.LEFT="left"}(_bundle_863f90b8_Rt||(_bundle_863f90b8_Rt={}));var _bundle_863f90b8_Pt,_bundle_863f90b8_Ft,_bundle_863f90b8_kt,_bundle_863f90b8_xt,_bundle_863f90b8_Ot,_bundle_863f90b8_Ht,_bundle_863f90b8_Vt,_bundle_863f90b8_Gt,_bundle_863f90b8_Bt=function(i){function o(e,t){var n=i.call(this,e,t)||this;return n.state=null,n.role=null,n.isMuted=!1,n.isBlockedByMe=!1,n.isBlockingMe=!1,n.state=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Rt,t.state)?t.state:null,n.role=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["D" /* a1 */],t.role)?t.role:null,"boolean"==typeof t.is_muted&&(n.isMuted=t.is_muted),"boolean"==typeof t.is_blocked_by_me&&(n.isBlockedByMe=t.is_blocked_by_me),"boolean"==typeof t.is_blocking_me&&(n.isBlockingMe=t.is_blocking_me),n}return Object(_bundle_a5600e6c["A" /* _ */])(o,i),o.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},i.payloadify.call(this,e)),{state:e.state,role:e.role,is_muted:e.isMuted,is_blocked_by_me:e.isBlockedByMe,is_blocking_me:e.isBlockingMe})))},o}(_bundle_1edafb8c_vt),_bundle_863f90b8_qt=function(t){function n(e,n){var s,r,a=this;return(a=t.call(this,e)||this).channelUrl=null!==(s=n.channel_url)&&void 0!==s?s:"",a.channelType=null!==(r=n.channel_type)&&void 0!==r?r:_bundle_a5600e6c["y" /* Y */].GROUP,a.reader=new _bundle_a5600e6c["u" /* U */](a._iid,n.user),a.readAt=n.ts,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["I" /* a8 */]);!function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"}(_bundle_863f90b8_Pt||(_bundle_863f90b8_Pt={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(_bundle_863f90b8_Ft||(_bundle_863f90b8_Ft={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(_bundle_863f90b8_kt||(_bundle_863f90b8_kt={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(_bundle_863f90b8_xt||(_bundle_863f90b8_xt={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(_bundle_863f90b8_Ot||(_bundle_863f90b8_Ot={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(_bundle_863f90b8_Ht||(_bundle_863f90b8_Ht={})),function(e){e.AND="AND",e.OR="OR"}(_bundle_863f90b8_Vt||(_bundle_863f90b8_Vt={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(_bundle_863f90b8_Gt||(_bundle_863f90b8_Gt={}));var _bundle_863f90b8_zt,_bundle_863f90b8_Wt=function(){function e(){this._searchFilter=null,this._userIdsFilter=null,this.includeEmpty=!1,this.nicknameContainsFilter=null,this.nicknameStartsWithFilter=null,this.nicknameExactMatchFilter=null,this.channelNameContainsFilter="",this.myMemberStateFilter=_bundle_863f90b8_Ft.ALL,this.customTypesFilter=null,this.channelUrlsFilter=null,this.superChannelFilter=_bundle_863f90b8_kt.ALL,this.publicChannelFilter=_bundle_863f90b8_Pt.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=_bundle_863f90b8_xt.ALL,this.hiddenChannelFilter=_bundle_863f90b8_Ot.UNHIDDEN,this.includeFrozen=!0}return e.prototype._isFriend=function(e){return!(!e||!e.friendDiscoveryKey&&!e.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={query:t,fields:e})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(e,t,n){void 0===n&&(n=_bundle_863f90b8_Vt.AND),this._userIdsFilter={userIds:e,includeMode:t,queryType:n}},e.prototype.clone=function(){var t,n=new e;this.searchFilter&&n.setSearchFilter(this.searchFilter.fields,null!==(t=this.searchFilter.query)&&void 0!==t?t:void 0),this.userIdsFilter&&n.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var s=JSON.parse(JSON.stringify(this));return Object.keys(s).forEach((function(e){n[e]=s[e]})),n},e.prototype.match=function(e,t){if(this._searchFilter){var n=this._searchFilter,s=n.query,r=n.fields;if(s&&r&&r.length>0&&!r.some((function(t){switch(t){case _bundle_863f90b8_Gt.CHANNEL_NAME:return e.name.toLowerCase().includes(s.toLowerCase());case _bundle_863f90b8_Gt.MEMBER_NICKNAME:return e.members.some((function(e){return e.nickname.toLowerCase().includes(s.toLowerCase())}));default:return!0}})))return!1}if(this._userIdsFilter){var a=this._userIdsFilter,i=a.userIds,o=a.includeMode,u=a.queryType,l=e.members.map((function(e){return e.userId}));if(o){if(i.length>0)switch(u){case _bundle_863f90b8_Vt.AND:if(i.some((function(e){return!l.includes(e)})))return!1;break;case _bundle_863f90b8_Vt.OR:if(i.every((function(e){return!l.includes(e)})))return!1}}else{if(i.includes(t)||i.push(t),e.members.length>i.length)return!1;if(!Object(_bundle_a5600e6c["Jb" /* b0 */])(i,l))return!1}}if(!this.includeEmpty&&!e.lastMessage)return!1;if(!this.includeFrozen&&e.isFrozen)return!1;if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(e.customType))return!1;if(this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(e.customType))return!1;if(this.channelNameContainsFilter&&!e.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var h=this.nicknameContainsFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().includes(h)})))return!1}if(this.nicknameStartsWithFilter){var d=this.nicknameStartsWithFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase().startsWith(d)})))return!1}if(this.nicknameExactMatchFilter){var _=this.nicknameExactMatchFilter.toLowerCase();if(!e.members.some((function(e){return e.userId!==t&&e.nickname.toLowerCase()!=_})))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(e.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case _bundle_863f90b8_Ft.JOINED:if("joined"!==e.myMemberState)return!1;break;case _bundle_863f90b8_Ft.INVITED:if("invited"!==e.myMemberState)return!1;break;case _bundle_863f90b8_Ft.INVITED_BY_FRIEND:if("invited"!==e.myMemberState||!this._isFriend(e.inviter))return!1;break;case _bundle_863f90b8_Ft.INVITED_BY_NON_FRIEND:if("invited"!==e.myMemberState||this._isFriend(e.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case _bundle_863f90b8_Ot.UNHIDDEN:if(e.isHidden||"unhidden"!==e.hiddenState)return!1;break;case _bundle_863f90b8_Ot.HIDDEN:if(!e.isHidden)return!1;break;case _bundle_863f90b8_Ot.HIDDEN_ALLOW_AUTO_UNHIDE:if(!e.isHidden||"hidden_allow_auto_unhide"!==e.hiddenState)return!1;break;case _bundle_863f90b8_Ot.HIDDEN_PREVENT_AUTO_UNHIDE:if(!e.isHidden||"hidden_prevent_auto_unhide"!==e.hiddenState)return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===_bundle_863f90b8_xt.UNREAD_MESSAGE)if(0===e.unreadMessageCount)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case _bundle_863f90b8_Pt.PUBLIC:if(!e.isPublic)return!1;break;case _bundle_863f90b8_Pt.PRIVATE:if(e.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case _bundle_863f90b8_kt.SUPER:if(!e.isSuper)return!1;break;case _bundle_863f90b8_kt.NON_SUPER:if(e.isSuper)return!1}return!(this.createdAfter&&e.createdAt<this.createdAfter)&&!(this.createdBefore&&e.createdAt>this.createdBefore)},e}(),_bundle_863f90b8_jt=function(t){function n(e,n){var s=n.sdkState,r=n.cacheContext,a=t.call(this,e)||this;return a._channels=new Map,a._sdkState=s,a._cacheContext=r,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Object(_bundle_a5600e6c["jc" /* s */])(!!e).throw(_bundle_a5600e6c["hc" /* q */].databaseError),e.collection(dr)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e,t){return void 0===t&&(t=0),Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e.serialize()),{lastMessageUpdatedAt:e.lastMessage?e.lastMessage.createdAt:0,syncIndex:t})},n.prototype._deserialize=function(e){return _bundle_863f90b8_ss.of(this._iid).buildGroupChannelFromSerializedData(e)},Object.defineProperty(n.prototype,"channels",{get:function(){return Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(e){return this._channels.has(e)},n.prototype.filterOffsetChanged=function(e){var t=this;return e.filter((function(e){if(t._channels.has(e.url))return t._channels.get(e.url).messageOffsetTimestamp<e.messageOffsetTimestamp}))},n.prototype.get=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return this._channels.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(t=s.sent())return n=this._deserialize(t),this._channels.set(e,n),[2,n];s.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(e)]}}))}))},n.prototype.fetch=function(e){var t=e.token,n=e.limit,s=void 0===n?lr:n,r=e.backward,a=void 0!==r&&r,i=e.filter,o=void 0===i?new _bundle_863f90b8_Wt:i,u=e.order,c=void 0===u?_bundle_2a18997f_E.LATEST_LAST_MESSAGE:u,l=e.borderlineChannelUrl;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,n,r,i,u=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(h){switch(h.label){case 0:return this.localCacheEnabled?(e=_bundle_2a18997f_L(c),n={where:function(e){if(t)switch(c){case _bundle_2a18997f_E.CHANNEL_NAME_ALPHABETICAL:if(!a&&e.name.localeCompare(t)<0||a&&e.name.localeCompare(t)>0)return!1;if(l&&l===e.url)return!1;break;case _bundle_2a18997f_E.CHRONOLOGICAL:if(!a&&e.createdAt>t||a&&e.createdAt<t)return!1;if(l&&l===e.url)return!1;break;case _bundle_2a18997f_E.LATEST_LAST_MESSAGE:if(!a&&e.lastMessageUpdatedAt>t||a&&e.lastMessageUpdatedAt<t)return!1;if(l&&l===e.url)return!1}return o.match(u._deserialize(e),u._sdkState.userId)},index:e,backward:a},[4,this.collection.query(n)]):[3,3];case 1:return[4,h.sent().fetch({limit:s})];case 2:return r=h.sent(),(i=r.map((function(e){return u._deserialize(e)}))).forEach((function(e){u._channels.has(e.url)||u._channels.set(e.url,e)})),[2,i];case 3:return[2,[]]}}))}))},n.prototype.upsert=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,s,r,a=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:if(n=[],e.forEach((function(e){if(a._channels.has(e.url)){var s=a._channels.get(e.url);s._pinnedMessagesUpdatedAt<e._pinnedMessagesUpdatedAt&&(s._pinnedMessagesUpdatedAt=e._pinnedMessagesUpdatedAt),e.cachedMetaData&&t&&(s._updateCachedMetaData(e.cachedMetaData,t),Object.assign(e,{_cachedMetaData:void 0})),s._update(e),n.push(s)}else a._channels.set(e.url,e),n.push(e)})),!this.localCacheEnabled)return[3,2];for(r in s=[],n)s.push(this._serialize(n[r],parseInt(r)));return[4,this.collection.upsertMany(s)];case 1:i.sent(),i.label=2;case 2:return[2,n]}}))}))},n.prototype.remove=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),t=Object(_bundle_a5600e6c["ic" /* r */])(e),n=t.next(),o.label=1;case 1:return n.done?[3,4]:(s=n.value,this._channels.delete(s),this.localCacheEnabled?[4,this.collection.remove(s)]:[3,3]);case 2:o.sent(),o.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return r=o.sent(),a={error:r},[3,7];case 6:try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(a)throw a.error}return[7];case 7:return[2]}}))}))},n.prototype.clear=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(e,t,n){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var s,r,a,i,o,u,c,l,h,d,_,p,m,g,E,C,y,M,b;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:if(s=[],e===this._sdkState.userId)try{for(r=Object(_bundle_a5600e6c["ic" /* r */])(this._channels.values()),a=r.next();!a.done;a=r.next()){l=a.value;try{for(g=void 0,i=Object(_bundle_a5600e6c["ic" /* r */])(l.members),o=i.next();!o.done;o=i.next())if((_=o.value).userId===t){_.isBlockedByMe=n,s.push(l);break}}catch(e){g={error:e}}finally{try{o&&!o.done&&(E=i.return)&&E.call(i)}finally{if(g)throw g.error}}}}catch(e){p={error:e}}finally{try{a&&!a.done&&(m=r.return)&&m.call(r)}finally{if(p)throw p.error}}else if(t===this._sdkState.userId)try{for(u=Object(_bundle_a5600e6c["ic" /* r */])(this._channels.values()),c=u.next();!c.done;c=u.next()){l=c.value;try{for(M=void 0,h=Object(_bundle_a5600e6c["ic" /* r */])(l.members),d=h.next();!d.done;d=h.next())if((_=d.value).userId===e){_.isBlockingMe=n,s.push(l);break}}catch(e){M={error:e}}finally{try{d&&!d.done&&(b=h.return)&&b.call(h)}finally{if(M)throw M.error}}}}catch(e){C={error:e}}finally{try{c&&!c.done&&(y=u.return)&&y.call(u)}finally{if(C)throw C.error}}return s.length>0?[4,this.upsert(s)]:[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}}))}))},n.prototype.block=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!0)];case 1:return n.sent(),[2]}}))}))},n.prototype.unblock=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._setBlockStateOfAllChannels(e,t,!1)];case 1:return n.sent(),[2]}}))}))},n.prototype.markAsRead=function(e,t){return void 0===t&&(t=Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._channels.keys()),!1)),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,s,r,a,i,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:n=[],l.label=1;case 1:l.trys.push([1,6,7,8]),s=Object(_bundle_a5600e6c["ic" /* r */])(t),r=s.next(),l.label=2;case 2:return r.done?[3,5]:(a=r.value,[4,this.get(a)]);case 3:(null==(i=l.sent())?void 0:i._updateUnreadMemberState(this._sdkState.userId,e))&&(i._updateUnreadCount(0,0),n.push(i)),l.label=4;case 4:return r=s.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),u={error:o},[3,8];case 7:try{r&&!r.done&&(c=s.return)&&c.call(s)}finally{if(u)throw u.error}return[7];case 8:return n.length>0?[4,this.upsert(n)]:[3,10];case 9:l.sent(),l.label=10;case 10:return[2]}}))}))},n}(_bundle_a5600e6c["I" /* a8 */]),_bundle_863f90b8_Qt={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},_bundle_863f90b8_Yt=function(e){return Object(_bundle_a5600e6c["k" /* K */])("string",e.invitedUserIds,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.channelUrl,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.coverUrl,!0)&&(Object(_bundle_a5600e6c["Zb" /* i */])(e.coverImage)||Object(_bundle_a5600e6c["B" /* a */])("string",e.coverImage,!0))&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isDistinct,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isSuper,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isBroadcast,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isExclusive,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isPublic,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isStrict,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isDiscoverable,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isEphemeral,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.accessCode,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.name,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.data,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.customType,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.operatorUserIds,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.messageSurvivalSeconds,!0)},_bundle_863f90b8_Kt={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeChatNotification:!1},_bundle_863f90b8_Jt=function(e){return Object(_bundle_a5600e6c["k" /* K */])("string",e.customTypes,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeEmpty)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeFrozen)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.includeChatNotification)},_bundle_863f90b8_Zt={myMemberStateFilter:_bundle_863f90b8_Ft.ALL},_bundle_863f90b8_Xt=function(e){return Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Ft,e.myMemberStateFilter)};!function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"}(_bundle_863f90b8_zt||(_bundle_863f90b8_zt={}));var _bundle_863f90b8_$t={keys:[]},_bundle_863f90b8_en={channelCustomTypesFilter:void 0,superChannelFilter:_bundle_863f90b8_kt.ALL},_bundle_863f90b8_tn=function(e){return Object(_bundle_a5600e6c["k" /* K */])("string",e.channelCustomTypesFilter,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_kt,e.superChannelFilter)},_bundle_863f90b8_nn={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:_bundle_a5600e6c["nb" /* af */].ALL},_bundle_863f90b8_sn=Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_a5600e6c["x" /* X */]),_bundle_863f90b8_rn=function(e){return e.startsWith("EVENT_")||e===_bundle_a5600e6c["x" /* X */].SYNC_CHANNEL_CHANGELOGS||e===_bundle_a5600e6c["x" /* X */].REFRESH_CHANNEL},_bundle_863f90b8_an=function(t){function n(e){var n=e.channels,s=e.source,r=e.isWebSocketEventComing,a=void 0!==r&&r,i=e.data,o=void 0===i?null:i,u=e.ts,c=t.call(this)||this;return c.channels=n,c.source=s,c.isWebSocketEventComing=a,c.data=o,c.ts=u,c}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["eb" /* aW */]),_bundle_863f90b8_on=function(t){function n(e){var n=e.channelUrls,s=e.source,r=e.isWebSocketEventComing,a=void 0!==r&&r,i=t.call(this)||this;return i.channelUrls=n,i.source=s,i.isWebSocketEventComing=a,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["eb" /* aW */]),_bundle_863f90b8_un=function(){function e(e){var t=e.groupChannelCache,n=e.messageCache,s=e.unsentMessageCache,r=e.dispatcher,a=this;this._observers=new Map,r.on((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(a,void 0,void 0,(function(){var r,a,i,o,u,c,l,h,d,_,m,g,E,C,y=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(M){switch(M.label){case 0:if(!(e instanceof _bundle_863f90b8_an))return[3,10];r=e.channels,m=e.source,g=e.isWebSocketEventComing,a=e.data,i=r.filter((function(e){return e instanceof _bundle_863f90b8_dr})),o=t.filterOffsetChanged(i),M.label=1;case 1:M.trys.push([1,6,7,8]),u=Object(_bundle_a5600e6c["ic" /* r */])(o),c=u.next(),M.label=2;case 2:return c.done?[3,5]:(l=c.value,[4,n.removeUnderOffset(l.url,l.messageOffsetTimestamp)]);case 3:M.sent(),M.label=4;case 4:return c=u.next(),[3,2];case 5:return[3,8];case 6:return h=M.sent(),E={error:h},[3,8];case 7:try{c&&!c.done&&(C=u.return)&&C.call(u)}finally{if(E)throw E.error}return[7];case 8:return[4,t.upsert(i,e.ts)];case 9:return d=M.sent(),g||this._broadcastUpdateEvent(d,m,a),[3,15];case 10:return e instanceof _bundle_863f90b8_on?(_=e.channelUrls,m=e.source,g=e.isWebSocketEventComing,[4,t.remove(_)]):[3,13];case 11:return M.sent(),[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(y,void 0,void 0,(function(){var e,t,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:u.trys.push([0,6,7,8]),e=Object(_bundle_a5600e6c["ic" /* r */])(_),t=e.next(),u.label=1;case 1:return t.done?[3,5]:(r=t.value,[4,n.removeMessagesOfChannel(r)]);case 2:return u.sent(),[4,s.removeMessagesOfChannel(r)];case 3:u.sent(),u.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return a=u.sent(),i={error:a},[3,8];case 7:try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(i)throw i.error}return[7];case 8:return[2]}}))}))}))];case 12:return M.sent(),g||this._broadcastRemoveEvent(_,m),[3,15];case 13:return e instanceof _bundle_2a18997f_v?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,15];case 14:M.sent(),M.label=15;case 15:return[2]}}))}))}))}return e.prototype._broadcastUpdateEvent=function(e,t,n){var s,r;try{for(var a=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),i=a.next();!i.done;i=a.next()){var o=i.value;o.onUpdate&&o.onUpdate(e,t,n)}}catch(e){s={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(s)throw s.error}}},e.prototype._broadcastRemoveEvent=function(e,t){var n,s;try{for(var r=Object(_bundle_a5600e6c["ic" /* r */])(this._observers.values()),a=r.next();!a.done;a=r.next()){var i=a.value;i.onRemove&&i.onRemove(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(s=r.return)&&s.call(r)}finally{if(n)throw n.error}}},e.prototype.subscribe=function(e,t){this._observers.set(e,t)},e.prototype.unsubscribe=function(e){this._observers.delete(e)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),_bundle_863f90b8_cn=function(r){function a(e){var a=e.userId,i=e.ts,o=e.token,u=e.filter,c=e.includeChatNotification,l=void 0!==c&&c,h=r.call(this)||this,d=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Kt),u),_=d.customTypes,p=d.includeEmpty,f=d.includeFrozen;return h.method=_bundle_a5600e6c["a" /* A */].GET,h.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(a),"/my_group_channels/changelogs"),h.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:i||null,token:o,custom_types:_,show_empty:p,show_frozen:f,include_chat_notification:l})),h}return Object(_bundle_a5600e6c["A" /* _ */])(a,r),a}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_ln=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.updatedChannels=n.updated.map((function(t){return new _bundle_863f90b8_dr(e,Object.assign(t,{ts:n.ts}))})),s.deletedChannelUrls=n.deleted,s.hasMore=n.has_more,s.token=n.next,s.ts=n.ts,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_hn=function(t){function n(e){var n=e.channelUrl,s=e.isInternalCall,r=t.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(s?_bundle_a5600e6c["Kb" /* b1 */]:_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(n)),r.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_dn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_863f90b8_dr(e,n),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_n={includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1,channelUrlsFilter:void 0,customTypesFilter:void 0,customTypeStartsWithFilter:void 0,nicknameContainsFilter:void 0,nicknameStartsWithFilter:void 0,nicknameExactMatchFilter:void 0,channelNameContainsFilter:void 0,myMemberStateFilter:_bundle_863f90b8_Ft.ALL,unreadChannelFilter:_bundle_863f90b8_xt.ALL,superChannelFilter:_bundle_863f90b8_kt.ALL,publicChannelFilter:_bundle_863f90b8_Pt.ALL,hiddenChannelFilter:_bundle_863f90b8_Ot.ALL,userIdsFilter:{userIds:[],includeMode:!0,queryType:_bundle_863f90b8_Vt.AND},searchFilter:{query:void 0,fields:[]},metadataKey:void 0,metadataValues:void 0,metadataOrderKeyFilter:void 0,metadataValueStartsWith:void 0,order:_bundle_2a18997f_E.LATEST_LAST_MESSAGE,createdAfter:void 0,createdBefore:void 0},_bundle_863f90b8_pn=function(n){function s(e){var s=this,r=e.userId,a=e.token,i=e.limit,o=e.order,u=e.includeEmpty,c=e.myMemberStateFilter,l=e.superChannelFilter,h=e.publicChannelFilter,d=e.unreadChannelFilter,_=e.nicknameContainsFilter,p=e.nicknameStartsWithFilter,f=e.nicknameExactMatchFilter,v=e.channelNameContainsFilter,m=e.channelUrlsFilter,g=e.customTypesFilter,E=e.customTypeStartsWithFilter,C=e.hiddenChannelFilter,y=e.metadataOrderKeyFilter,M=e.metadataKey,b=e.metadataValues,S=e.metadataValueStartsWith,A=e.includeFrozen,T=e.includeMetaData,I=e.searchFilter,w=e.userIdsFilter,D=e.includeChatNotification,L=void 0!==D&&D,R=e.createdAfter,P=e.createdBefore;return(s=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,s.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(r),"/my_group_channels"),s.params=Object(_bundle_a5600e6c["Vb" /* e */])({token:a,limit:i,order:null!=o?o:_bundle_863f90b8_n.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:null!=u?u:_bundle_863f90b8_n.includeEmpty,member_state_filter:null!=c?c:_bundle_863f90b8_n.myMemberStateFilter,super_mode:null!=l?l:_bundle_863f90b8_n.superChannelFilter,public_mode:null!=h?h:_bundle_863f90b8_n.publicChannelFilter,unread_filter:null!=d?d:_bundle_863f90b8_n.unreadChannelFilter,members_nickname_contains:_,members_nickname_startswith:p,members_nickname:f,name_contains:v,channel_urls:m,custom_types:g,custom_type_startswith:E,hidden_mode:C,metadata_order_key:y,metadata_key:M,metadata_values:b,metadata_value_startswith:S,show_frozen:A,show_metadata:T,include_chat_notification:L,created_after:R,created_before:P}),I&&I.query&&I.fields&&(s.params.search_query=I.query,s.params.search_fields=I.fields),w&&w.userIds&&w.userIds.length>0&&(w.includeMode?(s.params.members_include_in=w.userIds,s.params.query_type=w.queryType.toUpperCase()):s.params.members_exactly_in=w.userIds),s}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_fn=function(t){function n(e,n){var s=t.call(this,e,n)||this;s.channels=[];var r=n.next,a=n.channels,i=n.ts;return s.token=r,a&&a.length>0&&(s.channels=a.map((function(t){return t.ts=i,new _bundle_863f90b8_dr(e,t)}))),s.ts=null!=i?i:0,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_vn=function(t){function n(e){var n=e.userId,s=e.filter,r=t.call(this)||this,a=s.myMemberStateFilter;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/group_channel_count"),r.params={state:null!=a?a:_bundle_863f90b8_Ft.ALL},r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_mn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.groupChannelCount=n.group_channel_count,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_gn=function(n){function s(e){var s=e.userId,r=e.filter,a=n.call(this)||this,i=r.keys;return a.method=_bundle_a5600e6c["a" /* A */].GET,a.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(s),"/unread_item_count"),a.params=Object(_bundle_a5600e6c["Vb" /* e */])({item_keys:i}),a}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_En=function(t){function n(e,n){var s=t.call(this,e,n)||this;return"number"==typeof n[_bundle_863f90b8_zt.GROUP_CHANNEL_UNREAD_MENTION_COUNT]&&(s.groupChannelUnreadMentionCount=n[_bundle_863f90b8_zt.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]&&(s.groupChannelUnreadMessageCount=n[_bundle_863f90b8_zt.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.GROUP_CHANNEL_INVITATION_COUNT]&&(s.groupChannelInvitationCount=n[_bundle_863f90b8_zt.GROUP_CHANNEL_INVITATION_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.SUPER_UNREAD_MENTION_COUNT]&&(s.superGroupChannelUnreadMentionCount=n[_bundle_863f90b8_zt.SUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.SUPER_UNREAD_MESSAGE_COUNT]&&(s.superGroupChannelUnreadMessageCount=n[_bundle_863f90b8_zt.SUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.SUPER_INVITATION_COUNT]&&(s.superGroupChannelInvitationCount=n[_bundle_863f90b8_zt.SUPER_INVITATION_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.NONSUPER_UNREAD_MENTION_COUNT]&&(s.nonSuperGroupChannelUnreadMentionCount=n[_bundle_863f90b8_zt.NONSUPER_UNREAD_MENTION_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.NONSUPER_UNREAD_MESSAGE_COUNT]&&(s.nonSuperGroupChannelUnreadMessageCount=n[_bundle_863f90b8_zt.NONSUPER_UNREAD_MESSAGE_COUNT]),"number"==typeof n[_bundle_863f90b8_zt.NONSUPER_INVITATION_COUNT]&&(s.nonSuperGroupChannelInvitationCount=n[_bundle_863f90b8_zt.NONSUPER_INVITATION_COUNT]),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_Cn=function(t){function n(e){var n=e.userId,s=t.call(this)||this;return s.method=_bundle_a5600e6c["a" /* A */].GET,s.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/unread_channel_count"),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_yn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.unreadCount=n.unread_count,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_Mn=function(t){function n(e){var n=e.userId,s=e.filter,r=e.includeFeedChannel,a=void 0!==r&&r,i=t.call(this)||this,o=s.channelCustomTypesFilter,u=s.superChannelFilter;return i.method=_bundle_a5600e6c["a" /* A */].GET,i.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/unread_message_count"),i.params={super_mode:null!=u?u:_bundle_863f90b8_kt.ALL,custom_types:o,include_feed_channel:a},i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_bn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.unreadCount=n.unread_count,s.unreadFeedCount=n.unread_feed_count,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_Nn=function(t){function n(e){var n=e.channelUrl,s=e.scheduledStatus,r=e.messageTypeFilter,a=t.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].GET,a.path="".concat(_bundle_a5600e6c["hb" /* aZ */],"/count"),a.params={channel_url:n,status:_bundle_863f90b8_Sn(s)},r&&(a.params.message_type=r),a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_Un=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.count=n.count,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_Sn=function(e){if(!e)return[];var t=[];return e.forEach((function(e){switch(e){case _bundle_1edafb8c_Se.PENDING:t.push(_bundle_1edafb8c_Ne.PENDING);break;case _bundle_1edafb8c_Se.SENT:t.push(_bundle_1edafb8c_Ne.IN_QUEUE),t.push(_bundle_1edafb8c_Ne.SENT);break;case _bundle_1edafb8c_Se.CANCELED:t.push(_bundle_1edafb8c_Ne.CANCELED);break;case _bundle_1edafb8c_Se.FAILED:t.push(_bundle_1edafb8c_Ne.FAILED)}})),t},_bundle_863f90b8_An=function(n){function s(e){var s=this,r=e.userId,a=e.channelUrl,i=e.coverUrl,o=e.coverImage,u=e.isDistinct,c=e.isSuper,l=e.isBroadcast,h=e.isPublic,p=e.isExclusive,f=e.isDiscoverable,v=e.isStrict,m=e.isEphemeral,g=e.accessCode,E=e.name,C=e.data,y=e.customType,M=e.messageSurvivalSeconds,b=e.invitedUserIds,U=e.operatorUserIds;return(s=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,s.path=_bundle_a5600e6c["xb" /* ap */],s.params=Object(_bundle_a5600e6c["Vb" /* e */])({user_ids:Object(_bundle_a5600e6c["fc" /* o */])([r],Object(_bundle_a5600e6c["gc" /* p */])(null!=b?b:[]),!1).filter((function(e,t,n){return t===n.indexOf(e)})),channel_url:a,cover_url:i,cover_file:o,is_distinct:u,is_super:c,is_broadcast:l,is_exclusive:p,is_public:h,is_discoverable:f,strict:v,is_ephemeral:m,access_code:g,name:E,data:C,custom_type:y,operator_ids:U,message_survival_seconds:M}),s}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_Tn=function(t){function n(e,n){var s,r=this;return(r=t.call(this,e,n)||this).channel=new _bundle_863f90b8_dr(e,n),r.isCreated=null===(s=n.is_created)||void 0===s||s,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_In=function(t){function n(e){var n=e.userId,s=e.channelUrls,r=t.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].PUT,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/mark_as_read_all"),r.params={channel_urls:s},r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_863f90b8_wn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,a=e.accessCode;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/join"),n.params={user_id:r,access_code:a},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_Dn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_863f90b8_dr(e,n),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_Ln=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this,a=s.data,i=a.member_count,o=void 0===i?0:i,u=a.joined_member_count,c=void 0===u?0:u,l=a.users,h=void 0===l?null:l;return r.memberCount=o,r.joinedMemberCount=c,r.members=Array.isArray(h)?h.map((function(t){return new _bundle_863f90b8_Bt(e,t)})):[new _bundle_863f90b8_Bt(e,s.data)],r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_dd1faecb_T),_bundle_863f90b8_Rn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,a=e.shouldRemoveOperatorStatus;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/leave"),n.params={user_id:r,should_remove_operator_status:a},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_863f90b8_Pn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this,a=s.data,i=a.member_count,o=void 0===i?0:i,u=a.joined_member_count,c=void 0===u?0:u;return r.memberCount=o,r.joinedMemberCount=c,r.member=new _bundle_863f90b8_Bt(r._iid,s.data),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_dd1faecb_T),_bundle_863f90b8_Fn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userIds;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].POST,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/invite"),n.params={user_ids:r},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_kn=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_863f90b8_dr(e,n),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_xn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this;r.inviter=null;var a=s.data,i=a.member_count,u=void 0===i?0:i,c=a.joined_member_count,l=void 0===c?0:c,h=a.inviter,d=a.invitees,_=void 0===d?[]:d;return r.memberCount=u,r.joinedMemberCount=l,h&&Object.keys(h).length>0&&(r.inviter=new _bundle_a5600e6c["u" /* U */](e,h)),r.invitees=_.map((function(t){return new _bundle_863f90b8_Bt(e,t)})),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_dd1faecb_T),_bundle_863f90b8_On=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/decline"),n.params={user_id:r},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_863f90b8_dr(e,n),s.channel.myMemberState=_bundle_863f90b8_Rt.NONE,s}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_863f90b8_Hn=function(t){function n(e,n,s){var r=t.call(this,e,n,s)||this,a=s.data,i=a.member_count,u=a.joined_member_count,c=a.inviter,l=a.invitee;return r.memberCount=null!=i?i:0,r.joinedMemberCount=null!=u?u:0,r.inviter=new _bundle_a5600e6c["u" /* U */](e,c),r.invitee=new _bundle_863f90b8_Bt(e,l),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_dd1faecb_T),_bundle_863f90b8_Vn={hidePreviousMessages:!1,allowAutoUnhide:!0},_bundle_863f90b8_Gn=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,a=e.hidePreviousMessages,i=e.allowAutoUnhide;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/hide"),n.params={user_id:r,hide_previous_messages:null!=a?a:_bundle_863f90b8_Vn.hidePreviousMessages,allow_auto_unhide:null!=i?i:_bundle_863f90b8_Vn.allowAutoUnhide},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_Bn=function(t){function n(e,n){var s=t.call(this,e,n)||this,r=n.ts_message_offset;return s.messageOffsetTimestamp=r,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_qn=function(t){function n(e,n,s){var r,a,i,o=this;return(o=t.call(this,e,"SYEV",s)||this).allowAutoUnhide=null,o.hidePreviousMessages=null,o.messageOffsetTimestamp=null,s.data&&(o.allowAutoUnhide=null!==(r=s.data.allow_auto_unhide)&&void 0!==r?r:null,o.hidePreviousMessages=null!==(a=s.data.hide_previous_messages)&&void 0!==a?a:null),o.messageOffsetTimestamp=null!==(i=s.ts_message_offset)&&void 0!==i?i:null,o}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_863f90b8_zn=function(t){function n(e){var n=e.channelUrl,s=e.time;return t.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:n,time:s}})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),_bundle_863f90b8_Wn=function(t){function n(e,n,s){var r=t.call(this,e,"SYEV",s)||this;return r.user=new _bundle_a5600e6c["u" /* U */](e,s.data),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_863f90b8_jn=function(t){function n(e){var n=e.channelUrl,s=e.time;return t.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:n,time:s}})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),_bundle_863f90b8_Qn=function(t){function n(e,n,s){var r=t.call(this,e,"SYEV",s)||this;return r.user=new _bundle_a5600e6c["u" /* U */](e,s.data),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_863f90b8_Yn=function(t){function n(e){var n=e.channelUrl,s=e.messageId;return t.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:n,msg_id:s}})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),_bundle_863f90b8_Kn=function(t){function a(e,n){var s,r,a,i,o,u,c,l,h,d,_,p,f,v,m,g,E,C,y,M,b,N,U,S=this;return(S=t.call(this,e,n)||this).includeEmpty=!1,S.includeFrozen=!0,S.includeMetaData=!0,S.includeChatNotification=!1,S.channelUrlsFilter=null,S.customTypesFilter=null,S.customTypeStartsWithFilter=null,S.nicknameContainsFilter=null,S.nicknameStartsWithFilter=null,S.nicknameExactMatchFilter=null,S.channelNameContainsFilter="",S.myMemberStateFilter=_bundle_863f90b8_Ft.ALL,S.unreadChannelFilter=_bundle_863f90b8_xt.ALL,S.superChannelFilter=_bundle_863f90b8_kt.ALL,S.publicChannelFilter=_bundle_863f90b8_Pt.ALL,S.hiddenChannelFilter=_bundle_863f90b8_Ot.UNHIDDEN,S.searchFilter={fields:[],query:null},S.userIdsFilter={userIds:[],includeMode:!0,queryType:_bundle_863f90b8_Vt.AND},S.metadataKey=null,S.metadataValues=null,S.metadataOrderKeyFilter=null,S.metadataValueStartsWith=null,S.order=_bundle_2a18997f_E.LATEST_LAST_MESSAGE,S.includeEmpty=null!==(s=n.includeEmpty)&&void 0!==s&&s,S.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,S.includeMetaData=null===(a=n.includeMetaData)||void 0===a||a,S.includeChatNotification=null!==(i=n.includeChatNotification)&&void 0!==i&&i,S.channelUrlsFilter=null!==(o=n.channelUrlsFilter)&&void 0!==o?o:null,S.customTypesFilter=null!==(u=n.customTypesFilter)&&void 0!==u?u:null,S.customTypeStartsWithFilter=null!==(c=n.customTypeStartsWithFilter)&&void 0!==c?c:"",S.nicknameContainsFilter=null!==(l=n.nicknameContainsFilter)&&void 0!==l?l:null,S.nicknameStartsWithFilter=null!==(h=n.nicknameStartsWithFilter)&&void 0!==h?h:null,S.nicknameExactMatchFilter=null!==(d=n.nicknameExactMatchFilter)&&void 0!==d?d:null,S.channelNameContainsFilter=null!==(_=n.channelNameContainsFilter)&&void 0!==_?_:"",S.myMemberStateFilter=null!==(p=n.myMemberStateFilter)&&void 0!==p?p:_bundle_863f90b8_Ft.ALL,S.unreadChannelFilter=null!==(f=n.unreadChannelFilter)&&void 0!==f?f:_bundle_863f90b8_xt.ALL,S.superChannelFilter=null!==(v=n.superChannelFilter)&&void 0!==v?v:_bundle_863f90b8_kt.ALL,S.publicChannelFilter=null!==(m=n.publicChannelFilter)&&void 0!==m?m:_bundle_863f90b8_Pt.ALL,S.hiddenChannelFilter=null!==(g=n.hiddenChannelFilter)&&void 0!==g?g:_bundle_863f90b8_Ot.UNHIDDEN,S.searchFilter=null!==(E=n.searchFilter)&&void 0!==E?E:{fields:[],query:null},S.userIdsFilter=null!==(C=n.userIdsFilter)&&void 0!==C?C:{userIds:[],includeMode:!0,queryType:_bundle_863f90b8_Vt.AND},S.metadataKey=null!==(y=n.metadataKey)&&void 0!==y?y:null,S.metadataValues=null!==(M=n.metadataValues)&&void 0!==M?M:null,S.metadataOrderKeyFilter=null!==(b=n.metadataOrderKeyFilter)&&void 0!==b?b:null,S.metadataValueStartsWith=null!==(N=n.metadataValueStartsWith)&&void 0!==N?N:null,S.order=null!==(U=n.order)&&void 0!==U?U:_bundle_2a18997f_E.LATEST_LAST_MESSAGE,n.createdAfter&&(S.createdAfter=n.createdAfter),n.createdBefore&&(S.createdBefore=n.createdBefore),S}return Object(_bundle_a5600e6c["A" /* _ */])(a,t),a.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeEmpty)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeFrozen)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeMetaData)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.channelNameContainsFilter)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.channelUrlsFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.customTypesFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.customTypeStartsWithFilter)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.nicknameContainsFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.nicknameStartsWithFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.nicknameExactMatchFilter,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Ft,this.myMemberStateFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_kt,this.superChannelFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Pt,this.publicChannelFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_xt,this.unreadChannelFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Ot,this.hiddenChannelFilter)&&Object(_bundle_a5600e6c["k" /* K */])(_bundle_863f90b8_Gt,this.searchFilter.fields)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.searchFilter.query,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.userIdsFilter.userIds)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.userIdsFilter.includeMode)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Vt,this.userIdsFilter.queryType)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_2a18997f_E,this.order)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metadataOrderKeyFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metadataKey,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.metadataValues,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metadataValueStartsWith,!0)&&Object(_bundle_a5600e6c["Lb" /* b2 */])(this.createdAfter,!0)&&Object(_bundle_a5600e6c["Lb" /* b2 */])(this.createdBefore,!0)},a.prototype.serialize=function(){return Object(_bundle_a5600e6c["jb" /* ab */])(this)},a.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,_bundle_863f90b8_ss.of(this._iid).getMyGroupChannels(this._token,Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this)),this.limit)]):[3,2]:[3,5];case 1:return e=a.sent(),t=e.channels,r=e.token,this._token=r,this._hasNext=!!r,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},a}(_bundle_a5600e6c["P" /* aF */]),_bundle_863f90b8_Jn=function(t){function n(e,n,r){var a,i=this;return(i=t.call(this,e,"SYEV",r)||this).pinnedMessageIds=[],i.latestPinnedMessage=null,i.ts=0,r.data&&(i.pinnedMessageIds=null!==(a=r.data.pinned_message_ids)&&void 0!==a?a:[],i.latestPinnedMessage=r.data.latest_pinned_message?_bundle_1edafb8c_He(e,Object(_bundle_a5600e6c["Xb" /* g */])({},r.data.latest_pinned_message)):null),i.ts=r.ts,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_863f90b8_Zn=function(t){function n(e){var n=e.channelUrl;return t.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:n}})||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["qb" /* ai */]),_bundle_863f90b8_Xn=function(t){function n(e,n,s){var r=t.call(this,e,"READ",s)||this;return r.readStatus=new _bundle_863f90b8_qt(e,s),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_863f90b8_$n=function(n){function s(e){var s=e.channelUrl,r=e.userId,a=n.call(this)||this;return(a=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/messages/mark_as_delivered"),a.params=Object(_bundle_a5600e6c["Vb" /* e */])({userId:r}),a}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_863f90b8_es,_bundle_863f90b8_ts=function(t){function n(e,n,s){var r=t.call(this,e,"DLVR",s)||this;return r.channelUrl=s.channel_url,r.deliveredStateUpdate=s.updated,r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["w" /* W */]),_bundle_863f90b8_ns={},_bundle_863f90b8_ss=function(o){function u(e,t){var n,r=this;return(r=o.call(this,e,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t),{channelType:_bundle_a5600e6c["y" /* Y */].GROUP}))||this)._leftChannels=new Map,r._disableMack=!1,r._markAsReadAllLastSentAt=0,r._disableMack=null!==(n=t.disableMack)&&void 0!==n&&n,r._groupChannelHandlers=new Map,r._groupChannelCache=new _bundle_863f90b8_jt(r._iid,{sdkState:t.sdkState,cacheContext:t.cacheContext}),r._groupChannelBroadcast=new _bundle_863f90b8_un({dispatcher:t.dispatcher,groupChannelCache:r._groupChannelCache,messageCache:es.of(r._iid),unsentMessageCache:Zi.of(r._iid)}),setInterval((function(){var e,t,n=function(e){e.invalidateTypingStatus()&&(r._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[e],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_TYPING_STATUS_UPDATE})),r._groupChannelHandlers.forEach((function(t){t.onTypingStatusUpdated&&t.onTypingStatusUpdated(e)})))};try{for(var s=Object(_bundle_a5600e6c["ic" /* r */])(r._groupChannelCache.channels),a=s.next();!a.done;a=s.next()){n(a.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}),1e3),r._dispatcher.on((function(e){e instanceof _bundle_a5600e6c["w" /* W */]?r._handleEvent(e):e instanceof _bundle_2a18997f_I?Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t=e.message,[4,this.getChannel(t.channelUrl,!0)];case 1:return n=s.sent(),t instanceof _bundle_1edafb8c_je?n._autoResendUserMessage(t):t instanceof _bundle_1edafb8c_We&&n._autoResendFileMessage(t),[2]}}))})):e instanceof _bundle_2a18997f_D&&r.reduceDBSize()})),_bundle_863f90b8_ns[e]||(_bundle_863f90b8_ns[e]=r),r}return Object(_bundle_a5600e6c["A" /* _ */])(u,o),u.of=function(e){return _bundle_863f90b8_ns[e]||(_bundle_863f90b8_ns[e]=new u(e,_bundle_a5600e6c["v" /* V */].of(e))),_bundle_863f90b8_ns[e]},u.clear=function(e){_bundle_863f90b8_ns[e]&&delete _bundle_863f90b8_ns[e]},Object.defineProperty(u.prototype,"handlers",{get:function(){return Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),u.prototype.buildGroupChannelFromSerializedData=function(e){var t=Object(_bundle_a5600e6c["oc" /* x */])(e);return new _bundle_863f90b8_dr(this._iid,_bundle_863f90b8_dr.payloadify(t))},u.prototype.buildGroupChannelListQueryFromSerializedData=function(e){var t=Object(_bundle_a5600e6c["oc" /* x */])(e);return new _bundle_863f90b8_Kn(this._iid,t)},u.prototype.buildMemberFromSerializedData=function(e){var t=Object(_bundle_a5600e6c["oc" /* x */])(e);return new _bundle_863f90b8_Bt(this._iid,_bundle_863f90b8_Bt.payloadify(t))},u.prototype.getChannelFromCache=function(e){var t;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,this._groupChannelCache.get(e)];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:null]}}))}))},u.prototype.getChannelsFromCache=function(e,t,n,s,r){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return[4,this._groupChannelCache.fetch({token:e,filter:t,order:n,limit:s,borderlineChannelUrl:r})];case 1:return[2,a.sent()]}}))}))},u.prototype.upsertChannelsToCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},u.prototype.removeChannelsFromCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._groupChannelCache.remove(e)];case 1:return t.sent(),[2]}}))}))},u.prototype.clearChannelsFromCache=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return e.sent(),[2]}}))}))},u.prototype.reduceDBSize=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r,a,i,o,u,c,l,h,d,_,p;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:return e=es.of(this._iid),t=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext,n=t.localCacheConfig,s=t.nestdb,t.localCacheEnabled&&s&&s.state==qi.OPENED?(r=1024*n.maxSize*1024,[4,s.estimateUsage()]):[2];case 1:if((a=f.sent())<r)return[2];i=[],o=this._groupChannelCache.channels,u={},d=0,f.label=2;case 2:return d<o.length?[4,this.getMessagesFromCache(o[d].url,0,"prev",new Ki)]:[3,5];case 3:c=f.sent(),u[o[d].url]=JSON.stringify(c).length,l=new _bundle_a5600e6c["z" /* Z */]({channel:o[d],cachedMessageCount:c.length}),i.push(l),f.label=4;case 4:return d++,[3,2];case 5:h=i.sort(n.clearOrderComparator),d=0,f.label=6;case 6:return d<h.length?[4,e.removeMessagesOfChannel(h[d].channel.url)]:[3,10];case 7:return f.sent(),[4,e._getGroupChannelPreferenceSize(h[d].channel.url)];case 8:if(_=f.sent(),p=u[h[d].channel.url]+_,(a-=p)<r)return[3,10];f.label=9;case 9:return d++,[3,6];case 10:return[2]}}))}))},u.prototype._handleEvent=function(e){var t;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,s,r,o,u,c,l,h,d,_,m,g,E,C,M,N,U,S,A,T,I,w,D,L,R,P,F,x,O,j,Y,K,J,Z,X,$,ee,te,ne,se,re,ae,ie,oe,ue,ce,le,he,de,_e,pe,fe,ve,me,ge,Ee,Ce,ye,Me,be,Ne,Ue,Ve,Ge,Be,qe,ze,We,je,Qe,Ye,Ke,Je,Ze,Xe,$e,et,tt,nt,st,rt,at,it,ot,ut,ct,lt,ht,dt,_t,pt,ft,vt,mt,yt,bt,Lt,Pt,Ft,kt,xt,Ot,Ht,Vt,Gt,Bt,qt,zt,Wt,jt,Qt,Yt,Kt,Jt,Zt,Xt,$t,en,tn,nn,sn,rn,un,cn,ln,hn,dn,_n,pn,fn,vn,mn,gn,En,Cn,yn,Mn,bn,Nn=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(Un){switch(Un.label){case 0:switch(Un.trys.push([0,80,,81]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,19];case"MCNT":return[3,23];case"PEDI":return[3,32];case"VOTE":return[3,35];case"SYEV":return[3,38];case"USEV":return[3,78]}return[3,79];case 1:return h=null,"MESG"===e.code?h=e.as(xn):"FILE"===e.code?h=e.as(_bundle_1edafb8c_Xe):"ADMM"!==e.code&&"BRDM"!=e.code||(h=e.as(_bundle_dd1faecb_y)),h?(n=h.message,s=h.isMentioned,r=h.forceUpdateLastMessage,n.channelType!==_bundle_a5600e6c["y" /* Y */].GROUP?[3,3]:(this._disableMack||Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return e=new _bundle_863f90b8_Yn(n),this._requestQueue.send(e),[2]}))}))})),R=this._groupChannelCache.isCachedInMemory(n.channelUrl),g=n instanceof _bundle_1edafb8c_De&&n.sender.userId===this._sdkState.userId,[4,this.getChannel(n.channelUrl,!0)])):[3,3];case 2:if((o=Un.sent()).hiddenState===_bundle_863f90b8_or.HIDDEN_ALLOW_AUTO_UNHIDE&&(o.hiddenState=_bundle_863f90b8_or.UNHIDDEN),n instanceof _bundle_1edafb8c_De){u=_bundle_a5600e6c["v" /* V */].of(this._iid).useMemberInfoInMessage;try{for(c=Object(_bundle_a5600e6c["ic" /* r */])(o.members),l=c.next();!l.done;l=c.next())if((pt=l.value).userId===n.sender.userId){u||(n.sender.nickname=pt.nickname,n.sender.plainProfileUrl=pt.plainProfileUrl,n.sender.metaData=pt.metaData,n.sender.isBlockedByMe=pt.isBlockedByMe);break}}catch(e){pn={error:e}}finally{try{l&&!l.done&&(fn=c.return)&&fn.call(c)}finally{if(pn)throw pn.error}}!u&&s&&(null===(t=n.mentionedUsers)||void 0===t||t.forEach((function(e){var t,n;try{for(var s=Object(_bundle_a5600e6c["ic" /* r */])(o.members),r=s.next();!r.done;r=s.next()){var a=r.value;if(e.userId===a.userId){e.nickname=a.nickname,e.plainProfileUrl=a.plainProfileUrl,e.metaData=a.metaData;break}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}))),g&&(M=this._sessionManager.currentUser)&&(M.nickname=n.sender.nickname,M.plainProfileUrl=n.sender.plainProfileUrl,M.metaData=n.sender.metaData)}n.silent&&!g||(o.isEphemeral||R)&&((!o.lastMessage||o.lastMessage.createdAt<n.createdAt)&&(o.lastMessage=n),g||o._updateUnreadCount(o.unreadMessageCount+1,o.unreadMentionCount+(s?1:0))),r&&(!o.lastMessage||o.lastMessage.createdAt<n.createdAt)&&(o.lastMessage=n),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[o],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_RECEIVED})),n.silent&&!g||Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(o)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[n],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_RECEIVED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,r,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(r=t.value).onMessageReceived&&r.onMessageReceived(o,n),s&&r.onMentionReceived&&r.onMentionReceived(o,n)}catch(e){a={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(a)throw a.error}}return[2]}))}))})),Un.label=3;case 3:return[3,79];case 4:return h=null,"MEDI"===e.code?h=e.as(Dn):"FEDI"===e.code?h=e.as(qn):"AEDI"===e.code&&(h=e.as(_bundle_dd1faecb_I)),h?(d=h.message,_=h.mentionCountChange,d.channelType!==_bundle_a5600e6c["y" /* Y */].GROUP?[3,6]:(R=this._groupChannelCache.isCachedInMemory(d.channelUrl),[4,this.getChannel(d.channelUrl,!0)])):[3,6];case 5:m=Un.sent(),g=d instanceof _bundle_1edafb8c_De&&d.sender.userId===this._sdkState.userId,E=!1,g?(C=d.sender,(M=this._sessionManager.currentUser)&&(M.nickname=C.nickname,M.plainProfileUrl=C.plainProfileUrl,M.metaData=C.metaData)):m.isReadMessage(d)||0!==_&&!d.silent&&R&&(m._updateUnreadCount(m.unreadMessageCount,m.unreadMentionCount+_),E=!0),!m.lastMessage||m.lastMessage.createdAt<d.createdAt?(m.lastMessage=d,E=!0):m.lastMessage.isIdentical(d)&&(R?m.lastMessage.updatedAt<d.updatedAt&&(m.lastMessage=d,E=!0):E=!0),N=!1,m.lastPinnedMessage&&m.lastPinnedMessage.messageId===d.messageId&&(m.lastPinnedMessage=d,E=!0,N=!0),E&&(this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[m],source:N?_bundle_a5600e6c["x" /* X */].EVENT_PINNED_MESSAGE_UPDATED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED})),d.silent&&!g||Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(m)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),N&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPinnedMessageUpdated&&n.onPinnedMessageUpdated(m)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[d],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageUpdated&&n.onMessageUpdated(m,d),0!==_&&n.onMentionReceived&&n.onMentionReceived(m,d)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Un.label=6;case 6:return[3,79];case 7:return U=e.as(Bn),he=U.channelUrl,de=U.channelType,S=U.messageId,de!==_bundle_a5600e6c["y" /* Y */].GROUP?[3,9]:[4,this.getChannel(he,!0)];case 8:A=Un.sent(),this._dispatcher.dispatch(new _bundle_a5600e6c["V" /* aL */]({messageIds:[S],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_DELETED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onMessageDeleted&&n.onMessageDeleted(A,S)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Un.label=9;case 9:return[3,79];case 10:return(T=e.as(_bundle_863f90b8_Xn).readStatus).channelType!==_bundle_a5600e6c["y" /* Y */].GROUP?[3,12]:(R=this._groupChannelCache.isCachedInMemory(T.channelUrl),[4,this.getChannel(T.channelUrl,!0)]);case 11:I=Un.sent(),R&&I._updateUnreadMemberState(T.reader.userId,T.readAt),T.reader.userId===this._sdkState.userId?R?(I.unreadMessageCount>0||I.unreadMentionCount>0)&&(I._updateUnreadCount(0,0),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[I],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_READ})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(I)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))):0!==I.unreadMessageCount&&0!==I.unreadMentionCount||(this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[I],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_READ})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(I)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))):(this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[I],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_READ})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUnreadMemberStatusUpdated&&n.onUnreadMemberStatusUpdated(I)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),Un.label=12;case 12:return[3,79];case 13:return w=e.as(_bundle_863f90b8_ts),he=w.channelUrl,D=w.deliveredStateUpdate,L=void 0===D?{}:D,R=this._groupChannelCache.isCachedInMemory(he),[4,this.getChannel(he,!0)];case 14:if(P=Un.sent(),R)for(F in L)P._updateUndeliveredMemberState(F,L[F]);return Object.keys(L).some((function(e){return e!==Nn._sdkState.userId}))&&(this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[P],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_DELIVERED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onUndeliveredMemberStatusUpdated&&n.onUndeliveredMemberStatusUpdated(P)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),[3,79];case 15:return x=e.as(_bundle_dd1faecb_D),he=x.channelUrl,de=x.channelType,O=x.event,de!==_bundle_a5600e6c["y" /* Y */].GROUP?[3,18]:[4,this.getChannel(he,!0)];case 16:return j=Un.sent(),[4,this.getMessageFromCache(O.messageId)];case 17:(J=Un.sent())&&(J.applyReactionEvent(O),this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[J],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_REACTION_UPDATED}))),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onReactionUpdated&&n.onReactionUpdated(j,O)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Un.label=18;case 18:return[3,79];case 19:return(Y=e.as(_bundle_dd1faecb_R).event).channelType!==_bundle_a5600e6c["y" /* Y */].GROUP?[3,22]:[4,this.getChannel(Y.channelUrl,!0)];case 20:return K=Un.sent(),[4,this.getMessageFromCache(Y.targetMessageId)];case 21:(J=Un.sent())&&(J.applyThreadInfoUpdateEvent(Y),this._dispatcher.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[J],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_THREADINFO_UPDATED}))),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onThreadInfoUpdated&&n.onThreadInfoUpdated(K,Y)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Un.label=22;case 22:return[3,79];case 23:Z=e.as(_bundle_dd1faecb_P).groupChannelMemberCounts,X=[],Un.label=24;case 24:Un.trys.push([24,29,30,31]),$=Object(_bundle_a5600e6c["ic" /* r */])(Z),ee=$.next(),Un.label=25;case 25:return ee.done?[3,28]:(te=ee.value,he=te.channelUrl,nt=te.memberCount,st=te.joinedMemberCount,ne=te.updatedAt,[4,this.getChannelFromCache(he)]);case 26:(se=Un.sent())&&se._setLatestMemberCount(nt,st,ne)&&X.push(se),Un.label=27;case 27:return ee=$.next(),[3,25];case 28:return[3,31];case 29:return re=Un.sent(),vn={error:re},[3,31];case 30:try{ee&&!ee.done&&(mn=$.return)&&mn.call($)}finally{if(vn)throw vn.error}return[7];case 31:return X.length>0&&(this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:X,source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_MEMBER_COUNT_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelMemberCountChanged&&n.onChannelMemberCountChanged(X)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}))),[3,79];case 32:return ae=e.as(_bundle_dd1faecb_O),ie=ae.event,oe=ae.status,he=ae.channelUrl,de=ae.channelType,he&&de===_bundle_a5600e6c["y" /* Y */].GROUP?[4,this.getChannel(he,!0)]:[3,34];case 33:ue=Un.sent(),this._dispatcher.dispatch(new _bundle_a5600e6c["S" /* aI */]({event:ie,source:_bundle_a5600e6c["x" /* X */].EVENT_POLL_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])(oe===_bundle_a5600e6c["Mb" /* b3 */]?function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollDeleted&&n.onPollDeleted(ue,ie.pollId)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}:function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollUpdated&&n.onPollUpdated(ue,ie)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))}),Un.label=34;case 34:return[3,79];case 35:return ce=e.as(cr),le=ce.event,he=ce.channelUrl,de=ce.channelType,he&&de===_bundle_a5600e6c["y" /* Y */].GROUP?[4,this.getChannel(he,!0)]:[3,37];case 36:_e=Un.sent(),this._dispatcher.dispatch(new _bundle_a5600e6c["N" /* aD */]({event:le,source:_bundle_a5600e6c["x" /* X */].EVENT_POLL_VOTED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onPollVoted&&n.onPollVoted(_e,le)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Un.label=37;case 37:return[3,79];case 38:if(!(pe=e.as(_bundle_dd1faecb_T).event).isGroupChannelEvent)return[3,77];switch(pe.category){case _bundle_dd1faecb_U.CHANNEL_JOIN:return[3,39];case _bundle_dd1faecb_U.CHANNEL_LEAVE:return[3,41];case _bundle_dd1faecb_U.CHANNEL_OPERATOR_UPDATE:return[3,45];case _bundle_dd1faecb_U.CHANNEL_INVITE:return[3,47];case _bundle_dd1faecb_U.CHANNEL_DECLINE_INVITE:return[3,49];case _bundle_dd1faecb_U.TYPING_START:case _bundle_dd1faecb_U.TYPING_END:return[3,51];case _bundle_dd1faecb_U.USER_CHANNEL_MUTE:case _bundle_dd1faecb_U.USER_CHANNEL_UNMUTE:return[3,53];case _bundle_dd1faecb_U.USER_CHANNEL_BAN:return[3,55];case _bundle_dd1faecb_U.USER_CHANNEL_UNBAN:return[3,59];case _bundle_dd1faecb_U.CHANNEL_FREEZE:case _bundle_dd1faecb_U.CHANNEL_UNFREEZE:return[3,61];case _bundle_dd1faecb_U.CHANNEL_HIDE:return[3,63];case _bundle_dd1faecb_U.CHANNEL_UNHIDE:return[3,65];case _bundle_dd1faecb_U.CHANNEL_DELETED:return[3,67];case _bundle_dd1faecb_U.CHANNEL_PROP_CHANGED:return[3,69];case _bundle_dd1faecb_U.CHANNEL_META_DATA_CHANGED:return[3,71];case _bundle_dd1faecb_U.CHANNEL_META_COUNTERS_CHANGED:return[3,73];case _bundle_dd1faecb_U.PINNED_MESSAGE_CHANGED:return[3,75]}return[3,77];case 39:return[4,this.getChannel(pe.channelUrl,!0)];case 40:return fe=Un.sent(),ve=e.as(_bundle_863f90b8_Ln),me=ve.memberCount,ge=ve.joinedMemberCount,Ee=ve.members,Ce=!1,Ee.forEach((function(e){fe.isExclusive||fe.isSuper||fe.isBroadcast?Ce=Ce||fe._setLatestMemberCount(me,ge,pe.ts):(e.state=_bundle_863f90b8_Rt.JOINED,fe.addMember(e,pe.ts),Nn._updateJoinedMemberCount(fe)),e.userId===Nn._sdkState.userId&&(fe.myMemberState=_bundle_863f90b8_Rt.JOINED)})),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[fe],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_JOINED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){var t,n;try{for(var s=Object(_bundle_a5600e6c["ic" /* r */])(Ee),r=s.next();!r.done;r=s.next()){var a=r.value;e.onUserJoined&&e.onUserJoined(fe,a)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}fe.isBroadcast&&Ce&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([fe])})),[2]}))}))})),[3,77];case 41:return(ft=this._leftChannels.get(pe.channelUrl))?(Me=ft.channel,[3,44]):[3,42];case 42:return[4,this.getChannel(pe.channelUrl,!0)];case 43:Me=Un.sent(),Un.label=44;case 44:return ye=Me,be=e.as(_bundle_863f90b8_Pn),nt=be.memberCount,st=be.joinedMemberCount,Ne=be.member,Ue=!1,Ve=_bundle_a5600e6c["v" /* V */].of(this._iid).appInfo,ye.isExclusive||ye.isSuper||ye.isBroadcast?Ue=ye._setLatestMemberCount(nt,st,pe.ts):((null==Ve?void 0:Ve.enabledChannelMemberShipHistory)?((Ge=ye.members.find((function(e){return e.userId===Ge.userId})))&&(Ge.state=_bundle_863f90b8_Rt.LEFT),ye.memberCount=nt):ye.removeMember(Ne),this._updateJoinedMemberCount(ye)),Ne.userId===this._sdkState.userId?(ye.myMemberState=_bundle_863f90b8_Rt.NONE,ye.invitedAt=0,ye.joinedAt=0,ye._updateUnreadCount(0,0),ye.isPublic?this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[ye],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_LEFT})):(this._markAsLeave(ye),this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[ye.url],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_LEFT})))):this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[ye],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_LEFT})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserLeft&&e.onUserLeft(ye,Ne),ye.isBroadcast&&Ue&&e.onChannelMemberCountChanged&&e.onChannelMemberCountChanged([ye])})),[2]}))}))})),[3,77];case 45:return[4,this.getChannel(pe.channelUrl,!0)];case 46:Be=Un.sent(),qe=e.as(_bundle_dd1faecb_M).operators,ze=qe.map((function(e){return e.userId}));try{for(We=Object(_bundle_a5600e6c["ic" /* r */])(Be.members),je=We.next();!je.done;je=We.next())(pt=je.value).role=ze.includes(pt.userId)?_bundle_a5600e6c["D" /* a1 */].OPERATOR:_bundle_a5600e6c["D" /* a1 */].NONE}catch(e){gn={error:e}}finally{try{je&&!je.done&&(En=We.return)&&En.call(We)}finally{if(gn)throw gn.error}}return Be.myRole=ze.includes(this._sdkState.userId)?_bundle_a5600e6c["D" /* a1 */].OPERATOR:_bundle_a5600e6c["D" /* a1 */].NONE,this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Be],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_OPERATOR_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onOperatorUpdated&&e.onOperatorUpdated(Be,qe)})),[2]}))}))})),[3,77];case 47:return[4,this.getChannel(pe.channelUrl,!0)];case 48:Qe=Un.sent(),Ye=e.as(_bundle_863f90b8_xn),nt=Ye.memberCount,st=Ye.joinedMemberCount,Ke=Ye.inviter,(Je=Ye.invitees).forEach((function(e){return e.state=_bundle_863f90b8_Rt.INVITED}));try{for(Ze=Object(_bundle_a5600e6c["ic" /* r */])(Je),Xe=Ze.next();!Xe.done;Xe=Ze.next())$e=Xe.value,Qe.isExclusive||Qe.isSuper||Qe.isBroadcast?Qe._setLatestMemberCount(nt,st,pe.ts):Qe.addMember($e,pe.ts),this._sdkState.userId===$e.userId&&(Qe.hiddenState=_bundle_863f90b8_or.UNHIDDEN,Qe.myMemberState!==_bundle_863f90b8_Rt.JOINED&&(Qe.myMemberState=_bundle_863f90b8_Rt.INVITED),Qe.invitedAt=pe.ts)}catch(e){Cn={error:e}}finally{try{Xe&&!Xe.done&&(yn=Ze.return)&&yn.call(Ze)}finally{if(Cn)throw Cn.error}}return this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Qe],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_INVITED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserReceivedInvitation&&e.onUserReceivedInvitation(Qe,Ke,Je)})),[2]}))}))})),[3,77];case 49:return[4,this.getChannel(pe.channelUrl,!0)];case 50:return et=Un.sent(),tt=e.as(_bundle_863f90b8_Hn),nt=tt.memberCount,st=tt.joinedMemberCount,rt=tt.inviter,at=tt.invitee,et.isExclusive||et.isSuper||et.isBroadcast?et._setLatestMemberCount(nt,st,pe.ts):et.removeMember(at),this._sdkState.userId===at.userId?(et.invitedAt=0,et.myMemberState=_bundle_863f90b8_Rt.NONE,et.isPublic?this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[et],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_DECLINED_INVITE})):this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[et.url],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_DECLINED_INVITE}))):this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[et],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_DECLINED_INVITE})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserDeclinedInvitation&&e.onUserDeclinedInvitation(et,rt,at)})),[2]}))}))})),[3,77];case 51:return[4,this.getChannel(pe.channelUrl,!0)];case 52:return it=Un.sent(),ot=pe.category===_bundle_dd1faecb_U.TYPING_START,ut=e.as(ot?_bundle_863f90b8_Wn:_bundle_863f90b8_Qn).user,it._updateTypingStatus(ut,ot?pe.ts:0),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[it],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_TYPING_STATUS_UPDATE})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onTypingStatusUpdated&&e.onTypingStatusUpdated(it)})),[2]}))}))})),[3,77];case 53:return[4,this.getChannel(pe.channelUrl,!0)];case 54:ct=Un.sent(),lt=pe.category===_bundle_dd1faecb_U.USER_CHANNEL_MUTE,(ht=e.as(lt?_bundle_1edafb8c_En:wn).user).userId===this._sdkState.userId&&(ct.myMutedState=lt?_bundle_a5600e6c["C" /* a$ */].MUTED:_bundle_a5600e6c["C" /* a$ */].UNMUTED,ct._myMutedRemainingTime=ht.restrictionInfo.remainingDuration);try{for(dt=Object(_bundle_a5600e6c["ic" /* r */])(ct.members),_t=dt.next();!_t.done;_t=dt.next())if((pt=_t.value).userId===ht.userId){pt.isMuted=lt;break}}catch(e){Mn={error:e}}finally{try{_t&&!_t.done&&(bn=dt.return)&&bn.call(dt)}finally{if(Mn)throw Mn.error}}return this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[ct],source:lt?_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_MUTED:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNMUTED,data:ht.userId})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){lt?e.onUserMuted&&e.onUserMuted(ct,ht):e.onUserUnmuted&&e.onUserUnmuted(ct,ht)})),[2]}))}))})),[3,77];case 55:return(ft=this._leftChannels.get(pe.channelUrl))?(mt=ft.channel,[3,58]):[3,56];case 56:return[4,this.getChannel(pe.channelUrl,!0)];case 57:mt=Un.sent(),Un.label=58;case 58:return vt=mt,this._markAsLeave(vt),yt=e.as(Sn).user,yt.userId===this._sdkState.userId&&this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[vt.url],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_BANNED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserBanned&&e.onUserBanned(vt,yt)})),[2]}))}))})),[3,77];case 59:return[4,this.getChannel(pe.channelUrl,!0)];case 60:return bt=Un.sent(),Lt=e.as(An).user,Lt.userId===this._sdkState.userId&&this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[bt.url],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNBANNED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onUserUnbanned&&e.onUserUnbanned(bt,Lt)})),[2]}))}))})),[3,77];case 61:return[4,this.getChannel(pe.channelUrl,!0)];case 62:return Pt=Un.sent(),Ft=e.as(_bundle_1edafb8c_Cn).freeze,Pt.isFrozen=Ft,this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Pt],source:Ft?_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_FROZEN:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNFROZEN})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){Ft?e.onChannelFrozen&&e.onChannelFrozen(Pt):e.onChannelUnfrozen&&e.onChannelUnfrozen(Pt)})),[2]}))}))})),[3,77];case 63:return[4,this.getChannel(pe.channelUrl,!0)];case 64:return kt=Un.sent(),xt=e.as(_bundle_863f90b8_qn),Ot=xt.allowAutoUnhide,Ht=xt.hidePreviousMessages,Vt=xt.messageOffsetTimestamp,null!==Ot&&(kt.hiddenState=Ot?_bundle_863f90b8_or.HIDDEN_ALLOW_AUTO_UNHIDE:_bundle_863f90b8_or.HIDDEN_PREVENT_AUTO_UNHIDE),null!==Ht&&Ht&&kt._updateUnreadCount(0,0),null!==Vt&&(kt.messageOffsetTimestamp=Vt),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[kt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_HIDDEN})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelHidden&&e.onChannelHidden(kt)})),[2]}))}))})),[3,77];case 65:return[4,this.getChannel(pe.channelUrl,!0)];case 66:return(Gt=Un.sent()).hiddenState=_bundle_863f90b8_or.UNHIDDEN,this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Gt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNHIDDEN})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(Gt)})),[2]}))}))})),[3,77];case 67:return[4,this.getChannel(pe.channelUrl,!0)];case 68:return Bt=Un.sent(),this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[pe.channelUrl],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_DELETED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelDeleted&&e.onChannelDeleted(Bt.url,Bt.channelType)})),[2]}))}))})),[3,77];case 69:return[4,this.getChannelWithoutCache(pe.channelUrl,!0)];case 70:return qt=Un.sent(),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[qt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onChannelChanged&&e.onChannelChanged(qt)})),[2]}))}))})),[3,77];case 71:return[4,this.getChannel(pe.channelUrl,!0)];case 72:return zt=Un.sent(),Wt=e.as(on),jt=Wt.created,Qt=Wt.updated,Yt=Wt.deleted,jt&&(zt._upsertCachedMetaData(jt,pe.ts),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[zt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_METADATA_CREATED}))),Qt&&(zt._upsertCachedMetaData(Qt,pe.ts),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[zt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_METADATA_UPDATED}))),Yt&&(zt._removeFromCachedMetaData(Yt,pe.ts),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[zt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_METADATA_DELETED}))),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){jt&&e.onMetaDataCreated&&e.onMetaDataCreated(zt,jt),Qt&&e.onMetaDataUpdated&&e.onMetaDataUpdated(zt,Qt),Yt&&e.onMetaDataDeleted&&e.onMetaDataDeleted(zt,Yt)})),[2]}))}))})),[3,77];case 73:return[4,this.getChannel(pe.channelUrl,!0)];case 74:return Kt=Un.sent(),Jt=e.as(_bundle_1edafb8c_n),Zt=Jt.created,Xt=Jt.updated,$t=Jt.deleted,Zt&&this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Kt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_METACOUNTER_CREATED})),Xt&&this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Kt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_METACOUNTER_UPDATED})),$t&&this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[Kt],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_METACOUNTER_DELETED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){Zt&&e.onMetaCounterCreated&&e.onMetaCounterCreated(Kt,Zt),Xt&&e.onMetaCounterUpdated&&e.onMetaCounterUpdated(Kt,Xt),$t&&e.onMetaCounterDeleted&&e.onMetaCounterDeleted(Kt,$t)})),[2]}))}))})),[3,77];case 75:return[4,this.getChannel(pe.channelUrl,!0)];case 76:return en=Un.sent(),tn=e.as(_bundle_863f90b8_Jn),nn=tn.pinnedMessageIds,sn=tn.latestPinnedMessage,(rn=tn.ts)>en._pinnedMessagesUpdatedAt&&(en.pinnedMessageIds=nn,en.lastPinnedMessage=sn,en._pinnedMessagesUpdatedAt=rn,this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:[en],source:_bundle_a5600e6c["x" /* X */].EVENT_PINNED_MESSAGE_UPDATED})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){try{for(e=Object(_bundle_a5600e6c["ic" /* r */])(this._groupChannelHandlers.values()),t=e.next();!t.done;t=e.next())(n=t.value).onChannelChanged&&n.onChannelChanged(en)}catch(e){s={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(s)throw s.error}}return[2]}))}))})),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(Nn,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._groupChannelHandlers.forEach((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(en)})),[2]}))}))}))),[3,77];case 77:return[3,79];case 78:switch((un=e.as(_bundle_2a18997f_T).event).category){case _bundle_2a18997f_R.USER_BLOCK:cn=_bundle_2a18997f_N.getDataAsUserBlockEvent(this._iid,un),hn=cn.blocker,dn=cn.blockee,this._groupChannelCache.block(hn.userId,dn.userId);break;case _bundle_2a18997f_R.USER_UNBLOCK:ln=_bundle_2a18997f_N.getDataAsUserBlockEvent(this._iid,un),hn=ln.blocker,dn=ln.blockee,this._groupChannelCache.unblock(hn.userId,dn.userId)}return[3,79];case 79:return[3,81];case 80:if(_n=Un.sent(),Object(_bundle_a5600e6c["L" /* aB */])(_n))throw _n;return[3,81];case 81:return[2]}}))}))},u.prototype._markAsLeave=function(e){var t,n=this,s=null!==(t=this._leftChannels.get(e.url))&&void 0!==t?t:{channel:e,ref:0};s.ref++,this._leftChannels.set(e.url,s),setTimeout((function(){s.ref--,0===s.ref&&n._leftChannels.delete(e.url)}),1e4)},u.prototype.addHandler=function(e,t){this._groupChannelHandlers.set(e,t)},u.prototype.removeHandler=function(e){this._groupChannelHandlers.delete(e)},u.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},u.prototype.subscribeChannelEvent=function(e,t){this._groupChannelBroadcast.subscribe(e,t)},u.prototype.unsubscribeChannelEvent=function(e){this._groupChannelBroadcast.unsubscribe(e)},u.prototype._updateJoinedMemberCount=function(e){e.joinedMemberCount=e.members.filter((function(e){return e.state===_bundle_863f90b8_Rt.JOINED})).length},u.prototype.getChannel=function(e,t){return void 0===t&&(t=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(n=s.sent())?[2,n]:[3,4];case 3:return s.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,t)];case 5:return[2,s.sent()]}}))}))},u.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,s,r,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=new _bundle_863f90b8_hn({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:switch(s=o.sent(),r=s.as(_bundle_863f90b8_dn).channel,a=r.unreadMessageCount,i=r.unreadMentionCount,r.myCountPreference){case _bundle_863f90b8_ir.UNREAD_MESSAGE_COUNT_ONLY:i=0;break;case _bundle_863f90b8_ir.UNREAD_MENTION_COUNT_ONLY:a=0;break;case _bundle_863f90b8_ir.OFF:a=0,i=0}return r._updateUnreadCount(a,i),[4,this.upsertChannelsToCache([r])];case 2:return[2,o.sent()[0]]}}))}))},u.prototype.refreshChannel=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=_bundle_a5600e6c["x" /* X */].REFRESH_CHANNEL),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var s,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),s=new _bundle_863f90b8_hn({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(s)];case 1:return r=u.sent(),(a=r.as(_bundle_863f90b8_dn).channel).myMemberState!==_bundle_863f90b8_Rt.NONE?[3,2]:(this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[a.url],source:n})),[3,4]);case 2:return[4,this.upsertChannelsToCache([a])];case 3:i=u.sent(),this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:i,source:n})),u.label=4;case 4:return[3,6];case 5:return(o=u.sent()).code!==_bundle_a5600e6c["tb" /* al */].NON_AUTHORIZED&&o.code!==_bundle_a5600e6c["tb" /* al */].NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:[e],source:n})),[3,6];case 6:return[2]}}))}))},u.prototype.getMyGroupChannels=function(e,t,n,r){return void 0===r&&(r=_bundle_a5600e6c["x" /* X */].REQUEST_CHANNEL),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var a,i,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return t.createdAfter&&(t.createdAfter=Math.floor(t.createdAfter/1e3)),t.createdBefore&&(t.createdBefore=Math.floor(t.createdBefore/1e3)),a=new _bundle_863f90b8_pn(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},t),{userId:this._sdkState.userId,token:e,limit:n})),[4,this._requestQueue.send(a)];case 1:return i=l.sent(),o=i.as(_bundle_863f90b8_fn),u=o.channels,c=o.token,this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:u,source:r})),[2,{channels:u,token:c}]}}))}))},u.prototype.getMyGroupChannelChangeLogs=function(e,t,r){return void 0===r&&(r=_bundle_a5600e6c["x" /* X */].REQUEST_CHANNEL_CHANGELOGS),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var a,i,o,u,c,d,_,p;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:return a=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Kt),t),Object(_bundle_a5600e6c["jc" /* s */])((Object(_bundle_a5600e6c["B" /* a */])("string",e)||Object(_bundle_a5600e6c["B" /* a */])("number",e))&&_bundle_863f90b8_Jt(a)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),i=new _bundle_863f90b8_cn(Object(_bundle_a5600e6c["lc" /* u */])({userId:this._sdkState.userId,ts:"number"==typeof e?e:null,token:"string"==typeof e?e:null,filter:a})),[4,this._requestQueue.send(i)];case 1:return o=f.sent(),u=o.as(_bundle_863f90b8_ln),c=u.updatedChannels,d=u.deletedChannelUrls,_=u.hasMore,p=u.ts,c.length>0&&this._dispatcher.dispatch(new _bundle_863f90b8_an({channels:c,source:r,ts:p})),d.length>0&&this._dispatcher.dispatch(new _bundle_863f90b8_on({channelUrls:d,source:r})),[2,{updatedChannels:c,deletedChannelUrls:d,hasMore:_,token:u.token}]}}))}))},u.prototype.getGroupChannelCount=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Zt),e),Object(_bundle_a5600e6c["jc" /* s */])(_bundle_863f90b8_Xt(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=new _bundle_863f90b8_vn({userId:this._sdkState.userId,filter:t}),[4,this._requestQueue.send(n)];case 1:return r=a.sent(),[2,r.as(_bundle_863f90b8_mn).groupChannelCount]}}))}))},u.prototype.getUnreadItemCount=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,a,i,o,u,c,d,_,p,v,g,E,C,y,M;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_$t),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["k" /* K */])(_bundle_863f90b8_zt,e.keys)}(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid),a=r.sdkState,i=r.requestQueue,o=new _bundle_863f90b8_gn({userId:a.userId,filter:n}),[4,i.send(o)];case 1:return u=f.sent(),c=u.as(_bundle_863f90b8_En),d=c.groupChannelUnreadMentionCount,_=c.groupChannelUnreadMessageCount,p=c.groupChannelInvitationCount,v=c.superGroupChannelUnreadMentionCount,g=c.superGroupChannelUnreadMessageCount,E=c.superGroupChannelInvitationCount,C=c.nonSuperGroupChannelUnreadMentionCount,y=c.nonSuperGroupChannelUnreadMessageCount,M=c.nonSuperGroupChannelInvitationCount,[2,Object(_bundle_a5600e6c["Vb" /* e */])({groupChannelUnreadMentionCount:d,groupChannelUnreadMessageCount:_,groupChannelInvitationCount:p,superGroupChannelUnreadMentionCount:v,superGroupChannelUnreadMessageCount:g,superGroupChannelInvitationCount:E,nonSuperGroupChannelUnreadMentionCount:C,nonSuperGroupChannelUnreadMessageCount:y,nonSuperGroupChannelInvitationCount:M})]}}))}))},u.prototype.getTotalUnreadChannelCount=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_863f90b8_Cn({userId:t.userId}),[4,n.send(s)];case 1:return r=a.sent(),[2,r.as(_bundle_863f90b8_yn).unreadCount]}}))}))},u.prototype.getTotalUnreadMessageCount=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_en),e),Object(_bundle_a5600e6c["jc" /* s */])(_bundle_863f90b8_tn(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid),r=n.sdkState,a=n.requestQueue,i=new _bundle_863f90b8_Mn({userId:r.userId,filter:t}),[4,a.send(i)];case 1:return o=u.sent(),[2,o.as(_bundle_863f90b8_bn).unreadCount]}}))}))},u.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_nn),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.channelUrl,!0)&&Object(_bundle_a5600e6c["k" /* K */])(_bundle_1edafb8c_Se,e.scheduledStatus,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["nb" /* af */],e.messageTypeFilter)}(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,a=new _bundle_863f90b8_Nn(t),[4,n.send(a)];case 1:return i=o.sent(),[2,i.as(_bundle_863f90b8_Un).count]}}))}))},u.prototype.getSubscribedTotalUnreadMessageCount=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).subscribedUnreadMessageCount;return e.all>=0?e.all:0},u.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var e=0,t=_bundle_a5600e6c["v" /* V */].of(this._iid).subscribedUnreadMessageCount;for(var n in t.customTypes)e+=t.customTypes[n];return e},u.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){var t;return null!==(t=_bundle_a5600e6c["v" /* V */].of(this._iid).subscribedUnreadMessageCount.customTypes[e])&&void 0!==t?t:0},u.prototype.createChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Qt),e),Object(_bundle_a5600e6c["jc" /* s */])(_bundle_863f90b8_Yt(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t.isPublic||(t.accessCode=void 0),n=new _bundle_863f90b8_An(Object(_bundle_a5600e6c["Xb" /* g */])({userId:this._sdkState.userId},t)),[4,this._requestQueue.send(n)];case 1:return r=i.sent(),a=r.as(_bundle_863f90b8_Tn).channel,[4,this.upsertChannelsToCache([a])];case 2:return i.sent(),[2,a]}}))}))},u.prototype.markAsReadAll=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return e=Date.now(),Object(_bundle_a5600e6c["jc" /* s */])(e-this._markAsReadAllLastSentAt>=1e3).throw(_bundle_a5600e6c["hc" /* q */].markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=e,t=new _bundle_863f90b8_In({userId:this._sdkState.userId}),[4,this._requestQueue.send(t)];case 1:u.sent(),n=this._groupChannelCache.channels;try{for(s=Object(_bundle_a5600e6c["ic" /* r */])(n),r=s.next();!r.done;r=s.next())(a=r.value)._updateUnreadMemberState(this._sdkState.userId,e),a._updateUnreadCount(0,0)}catch(e){i={error:e}}finally{try{r&&!r.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return n.length>0?[4,this.upsertChannelsToCache(n)]:[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},u.prototype.markAsReadWithChannelUrls=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return t=Date.now(),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)&&t-this._markAsReadAllLastSentAt>=1e3).throw(_bundle_a5600e6c["hc" /* q */].markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,n=new _bundle_863f90b8_In({userId:this._sdkState.userId,channelUrls:e}),[4,this._requestQueue.send(n)];case 1:d.sent(),s=this._groupChannelCache.channels,r=[];try{for(a=Object(_bundle_a5600e6c["ic" /* r */])(s),i=a.next();!i.done;i=a.next())o=i.value,e.includes(o.url)&&(o._updateUnreadMemberState(this._sdkState.userId,t),o._updateUnreadCount(0,0),r.push(o))}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=a.return)&&c.call(a)}finally{if(u)throw u.error}}return r.length>0?[4,this.upsertChannelsToCache(r)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))},u.prototype.markAsDelivered=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},u}(_bundle_dd1faecb_L);!function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"}(_bundle_863f90b8_es||(_bundle_863f90b8_es={}));var _bundle_863f90b8_rs,_bundle_863f90b8_as=function(t){function n(e,n,s,r){var a=t.call(this)||this;return a._state=_bundle_863f90b8_es.IDLE,a._retryCount=0,a._retryLimit=3,a.priority=0,a._worker=n,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===_bundle_863f90b8_es.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===_bundle_863f90b8_es.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===_bundle_863f90b8_es.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:if(!this.isRunning)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._worker(e)];case 2:return t=s.sent(),this._retryCount=0,this.dispatch("progress",t),t.hasNext?this._run(t.nextToken):this.end(),[3,4];case 3:return n=s.sent(),this.dispatch("error",n),this._retryCount<this._retryLimit?(this._retryCount++,this._run(e)):this.stop(),[3,4];case 4:return[2]}}))}))},n.prototype.start=function(e){this.isIdle&&(this._state=_bundle_863f90b8_es.RUNNING,this._run(e))},n.prototype.stop=function(){this._state=_bundle_863f90b8_es.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=_bundle_863f90b8_es.END,this.dispatch("end")},n}(_bundle_a5600e6c["e" /* E */]),_bundle_863f90b8_is={},_bundle_863f90b8_os=function(){function e(e){var t=e._iid,n=e.channel,s=e.limit,r=void 0===s?100:s,a=this;this.ref=0,this._iid=t,this._channel=n,this._limit=r,this._prevSyncLoopCount=0,this._nextSyncLoopCount=0;var i,o,u=_bundle_a5600e6c["v" /* V */].of(this._iid),c=u.sdkState,l=u.cacheContext,v=u.dispatcher,m=u.logger,g=u.statLogCollector;this._metadataKey=(i=c.userId,o=n.url,"sendbird:".concat(i,"@groupchannel/").concat(o,"/message/sync.meta"));var E=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/sync")}(c.userId,n.url);this._prevSync=new _bundle_863f90b8_as(E,(function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(a,void 0,void 0,(function(){var t,s,r,a,i,o,u,c,p,v,E,C;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:return t={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata(e)];case 1:if(f.sent(),m.debug("message background prev sync from",null===(o=this._metadata)||void 0===o?void 0:o.range.top),null===(u=this._metadata)||void 0===u?void 0:u.previousComplete)return[3,10];f.label=2;case 2:return f.trys.push([2,5,8,9]),[4,is.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(p=null===(c=this._metadata)||void 0===c?void 0:c.range)||void 0===p?void 0:p.top)?this._metadata.range.top:e,{prevResultSize:this._limit,nextResultSize:0,replyType:_bundle_a5600e6c["wb" /* ao */].ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_BACKGROUND)];case 3:return(s=f.sent()).length>0&&(r=s.map((function(e){return e.createdAt})),(null===(v=this._metadata)||void 0===v?void 0:(i=v.range).intersect.apply(i,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r),!1)))?this.extendRange(s):this._metadata={range:new H({top:Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r),!1)),bottom:Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r),!1))}),previousComplete:!1}),t.hasNext=s.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.top,this._metadata.previousComplete=s.length<this._limit),m.debug("message background prev sync progress",t),[4,this.saveMetadata()];case 4:return f.sent(),[3,9];case 5:return a=f.sent(),m.debug("message background prev sync error",a),a instanceof _bundle_a5600e6c["hc" /* q */]&&a.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:f.sent(),f.label=7;case 7:throw a;case 8:return g.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(C=null===(E=l.localCacheConfig)||void 0===E?void 0:E.maxSize)&&void 0!==C?C:0,use_local_cache:l.localCacheEnabled}})),[7];case 9:return[3,11];case 10:t.hasNext=!1,f.label=11;case 11:return[2,t]}}))}))})),this._nextSync=new _bundle_863f90b8_as(E,(function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(a,void 0,void 0,(function(){var t,s,r,a,i,o,u,c,h,p,v;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:return t={hasNext:!0,nextToken:0},this._nextSyncLoopCount++,[4,this.loadMetadata(e)];case 1:f.sent(),m.debug("message background next sync from",null===(o=this._metadata)||void 0===o?void 0:o.range.bottom),f.label=2;case 2:return f.trys.push([2,5,6,7]),[4,is.of(this._iid).getMessagesByTimestamp(this._channel.url,this._channel.channelType,(null===(c=null===(u=this._metadata)||void 0===u?void 0:u.range)||void 0===c?void 0:c.bottom)?this._metadata.range.bottom:e,{prevResultSize:0,nextResultSize:this._limit,replyType:_bundle_a5600e6c["wb" /* ao */].ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0},_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_BACKGROUND)];case 3:return(s=f.sent()).length>0&&(r=s.map((function(e){return e.createdAt})),(null===(h=this._metadata)||void 0===h?void 0:(i=h.range).intersect.apply(i,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r),!1)))?this.extendRange(s):this._metadata={range:new H({top:Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r),!1)),bottom:Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r),!1))}),previousComplete:!1}),t.hasNext=s.length>=this._limit&&this._nextSyncLoopCount<1,this._metadata&&(t.nextToken=this._metadata.range.bottom),m.debug("message background next sync progress",t),[4,this.saveMetadata()];case 4:return f.sent(),[3,7];case 5:throw a=f.sent(),m.debug("message background next sync error",a),a;case 6:return g.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:n.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:null!==(v=null===(p=l.localCacheConfig)||void 0===p?void 0:p.maxSize)&&void 0!==v?v:0,use_local_cache:l.localCacheEnabled}})),[7];case 7:return[2,t]}}))}))})),this._connectionEventContext=v.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])if(e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED)a.resume();else a.pause()}))}return e.of=function(t,n){return _bundle_863f90b8_is[t]||(_bundle_863f90b8_is[t]={}),_bundle_863f90b8_is[t][n.url]||(_bundle_863f90b8_is[t][n.url]=new e({_iid:t,channel:n})),_bundle_863f90b8_is[t][n.url].ref++,_bundle_863f90b8_is[t][n.url]},e.clear=function(e,t){_bundle_863f90b8_is[e]&&_bundle_863f90b8_is[e][t]&&(_bundle_863f90b8_is[e][t].close(),delete _bundle_863f90b8_is[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new H({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(e){var t;return null===(t=this.range)||void 0===t?void 0:t.includes.apply(t,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(e.map((function(e){return e.createdAt}))),!1))},e.prototype.extendRange=function(e){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(e.map((function(e){return e.createdAt}))),!1))},e.prototype.loadMetadata=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return this._metadata?[3,2]:[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:(t=n.sent())?t.range.bottom<e?this._metadata={range:new H({}),previousComplete:!1}:this._metadata={range:new H(t.range),previousComplete:t.previousComplete}:this._metadata={range:new H({}),previousComplete:!1},n.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(e){var t,n,s,r;void 0===e&&(e=Date.now());var a=_bundle_a5600e6c["v" /* V */].of(this._iid),i=a.logger;a.connectionManager.isConnected&&(i.debug("message background sync resume()"),this._prevSyncLoopCount=this._nextSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start(null!==(n=null===(t=this._metadata)||void 0===t?void 0:t.range.top)&&void 0!==n?n:e),this._nextSync.start(null!==(r=null===(s=this._metadata)||void 0===s?void 0:s.range.bottom)&&void 0!==r?r:e))},e.prototype.pause=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete _bundle_863f90b8_is[this._iid][this._channel.url])},e}(),_bundle_863f90b8_us={},_bundle_863f90b8_cs=function(){function e(e){var t=e._iid,n=e.channel,s=this;this.ref=0,this._iid=t,this._channel=n;var r,a,i=_bundle_a5600e6c["v" /* V */].of(this._iid),o=i.logger,u=i.sdkState,c=i.dispatcher;this._metadataKey=(r=u.userId,a=n.url,"sendbird:".concat(r,"@groupchannel/").concat(a,"/message/changelogs.meta"));var l=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/message/changelogs")}(u.userId,this._channel.url);this._sync=new _bundle_863f90b8_as(l,(function(){return Object(_bundle_a5600e6c["Ib" /* b */])(s,void 0,void 0,(function(){var e,t,n,s,r,a,i,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:c.sent(),o.debug("message changelog sync from",null===(u=this._metadata)||void 0===u?void 0:u.token),c.label=2;case 2:return c.trys.push([2,5,,8]),[4,is.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,{replyType:_bundle_a5600e6c["wb" /* ao */].ALL,includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0},_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_CHANGELOGS)];case 3:return t=c.sent(),n=t.updatedMessages,s=t.deletedMessageIds,r=t.hasMore,a=t.token,e.hasNext=r,e.nextToken=a,(n.length>0||s.length>0)&&this._metadata&&(this._metadata.token=a),o.debug("message changelog sync progress",e),[4,this.saveMetadata()];case 4:return c.sent(),[3,8];case 5:return i=c.sent(),o.debug("message changelog sync error",i),i instanceof _bundle_a5600e6c["hc" /* q */]&&i.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:c.sent(),c.label=7;case 7:throw i;case 8:return[2,e]}}))}))})),this._connectionEventContext=c.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])if(e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED)s.resume();else s.pause()}))}return e.of=function(t,n){return _bundle_863f90b8_us[t]||(_bundle_863f90b8_us[t]={}),_bundle_863f90b8_us[t][n.url]||(_bundle_863f90b8_us[t][n.url]=new e({_iid:t,channel:n})),_bundle_863f90b8_us[t][n.url].ref++,_bundle_863f90b8_us[t][n.url]},e.clear=function(e,t){_bundle_863f90b8_us[e]&&_bundle_863f90b8_us[e][t]&&(_bundle_863f90b8_us[e][t].close(),delete _bundle_863f90b8_us[e])},e.prototype.loadMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return this._metadata?[3,2]:(e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:s=r.sent(),this._metadata={token:s?s.token:n},r.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.logger;e.connectionManager.isConnected&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.logger;e.connectionManager,t.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete _bundle_863f90b8_us[this._iid][this._channel.url])},e}(),_bundle_863f90b8_ls={},hs=function(){function e(e){var t=e._iid,n=e.channel,s=e.hasPollMessage,r=this;this.ref=0,this._iid=t,this._channel=n;var a,i,o=_bundle_a5600e6c["v" /* V */].of(this._iid),u=o.logger,c=o.sdkState,l=o.dispatcher;this._metadataKey=(a=c.userId,i=n.url,"sendbird:".concat(a,"@groupchannel/").concat(i,"/poll/changelogs.meta"));var d=function(e,t){return"sendbird:".concat(e,"@groupchannel/").concat(t,"/poll/changelogs")}(c.userId,this._channel.url);this._sync=new _bundle_863f90b8_as(d,(function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,t,n,r,a,i,o,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(l){switch(l.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return l.sent(),u.debug("poll changelog sync from",null===(c=this._metadata)||void 0===c?void 0:c.token),(t=!this._metadata||!this._metadata.token)?[4,s()]:[3,3];case 2:t=!l.sent(),l.label=3;case 3:if(t)return[2,{hasNext:!1,nextToken:0}];this._metadata||(n=_bundle_a5600e6c["v" /* V */].of(this._iid).firstConnectedAt,this._metadata={token:n}),l.label=4;case 4:return l.trys.push([4,7,,10]),[4,_bundle_a5600e6c["O" /* aE */].of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return r=l.sent(),a=r.hasMore,i=r.token,e.hasNext=a,e.nextToken=i,this._metadata.token=i,u.debug("poll changelog sync progress",e),[4,this.saveMetadata()];case 6:return l.sent(),[3,10];case 7:return o=l.sent(),u.debug("poll changelog sync error",o),o instanceof _bundle_a5600e6c["hc" /* q */]&&o.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:l.sent(),l.label=9;case 9:throw o;case 10:return[2,e]}}))}))})),this._connectionEventContext=l.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])if(e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED)r.resume();else r.pause()}))}return e.of=function(t,n,s){return _bundle_863f90b8_ls[t]||(_bundle_863f90b8_ls[t]={}),_bundle_863f90b8_ls[t][n.url]||(_bundle_863f90b8_ls[t][n.url]=new e({_iid:t,channel:n,hasPollMessage:s})),_bundle_863f90b8_ls[t][n.url].ref++,_bundle_863f90b8_ls[t][n.url]},e.prototype.loadMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata=e?{token:e.token}:void 0,t.label=2;case 2:return[2]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete _bundle_863f90b8_ls[this._iid][this._channel.url])},e}(),_bundle_863f90b8_ds=function(e,t){return t instanceof _bundle_1edafb8c_De?e.findIndex((function(e){return e instanceof _bundle_1edafb8c_De&&t.isIdentical(e)})):e.findIndex((function(e){return e.isIdentical(t)}))},_s=function(e,t){return e.findIndex((function(e){return e.messageId===t}))},ps=function(e,t){if(e.length>0){for(var n=0,s=e.length-1,r=Math.floor((n+s)/2);n<s;){var a=e[r].createdAt-t.createdAt;if(a>0)s=r,r=Math.floor((n+s)/2);else{if(!(a<0))return r;n=r+1,r=Math.floor((n+s)/2)}}return e[r].createdAt>t.createdAt?r:r+1}return e.length},fs=function(t){function n(e){var n=e.channels,s=e.source,r=e.isWebSocketEventComing,a=void 0!==r&&r,i=e.data,o=void 0===i?null:i,u=t.call(this)||this;return u.channels=n,u.source=s,u.isWebSocketEventComing=a,u.data=o,u}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["eb" /* aW */]),vs=function(t){function n(e){var n=e.channelUrls,s=e.source,r=e.isWebSocketEventComing,a=void 0!==r&&r,i=t.call(this)||this;return i.channelUrls=n,i.source=s,i.isWebSocketEventComing=a,i}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["eb" /* aW */]),ms=function(n){function s(e){var s,r,a,i,o,u,c,l,h,d,_=this;return(_=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,_.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(e.channelType),"/").concat(e.channelUrl,"/messages_gap"),_.params=Object(_bundle_a5600e6c["Vb" /* e */])({prev_start_ts:e.prevStart,prev_end_ts:e.prevEnd,prev_cache_count:e.prevCount,next_start_ts:e.nextStart,next_end_ts:e.nextEnd,next_cache_count:e.nextCount,huge_gap_threshold:null!==(s=e.threshold)&&void 0!==s?s:null,reverse:!0,custom_types:null!==(r=e.customTypes)&&void 0!==r?r:["*"],message_type:null!==(a=e.messageType)&&void 0!==a?a:null,include_reply_type:null!==(i=e.replyType)&&void 0!==i?i:_bundle_a5600e6c["wb" /* ao */].NONE,include_reactions:null===(o=e.includeReactions)||void 0===o||o,include_meta_array:null===(u=e.includeMetaArray)||void 0===u||u,include_thread_info:null===(c=e.includeThreadInfo)||void 0===c||c,include_parent_message_info:null===(l=e.includeParentMessageInfo)||void 0===l||l,with_sorted_meta_array:null===(h=e.includeMetaArray)||void 0===h||h,show_subchannel_messages_only:null!==(d=e.showSubchannelMessagesOnly)&&void 0!==d&&d,include_poll_details:!0,checking_continuous_messages:e.checkingContinuousMessages}),_}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]),gs=function(t){function n(e,n){var s,r,a,i,o,u,c=this;return(c=t.call(this,e,n)||this).isHugeGap=n.is_huge_gap,c.prevMessages=(null!==(s=n.prev_messages)&&void 0!==s?s:[]).map((function(t){return _bundle_1edafb8c_He(e,t)})),c.prevHasMore=null!==(r=n.prev_hasmore)&&void 0!==r&&r,c.isContinuousPrevMessages=null!==(a=n.is_continuous_prev_messages)&&void 0!==a&&a,c.nextMessages=(null!==(i=n.next_messages)&&void 0!==i?i:[]).map((function(t){return _bundle_1edafb8c_He(e,t)})),c.nextHasmore=null!==(o=n.next_hasmore)&&void 0!==o&&o,c.isContinuousNextMessages=null!==(u=n.is_continuous_next_messages)&&void 0!==u&&u,c}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Es=function(e){this.source=e},Cs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(Es),ys=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(Es),Ms=function(e){this.source=e},bs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(Ms),Ns=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(Ms),Us=6e5,Ss={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};!function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"}(_bundle_863f90b8_rs||(_bundle_863f90b8_rs={}));var As,Ts,Is,ws=function(){function e(){this._onCacheResult=_bundle_a5600e6c["yb" /* aq */],this._onApiResult=_bundle_a5600e6c["yb" /* aq */]}return e.prototype._invokeResponse=function(e,t,n){var s=this;Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(s,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(e){case"local":this._onCacheResult(t,n);break;case"remote":this._onApiResult(t,n)}return[2]}))}))}))},e.prototype.onCacheResult=function(e){return this._onCacheResult=e,this},e.prototype.onApiResult=function(e){return this._onApiResult=e,this},e}(),Ds=function(){function e(e,t){var n=t.filter,s=t.startingPoint,r=t.limit,a=t.channel,i=t.channelManager,o=t.disableBackgroundSync,u=void 0!==o&&o,c=this;this._messages=[],this._unsentMessages=[],this._iid=e,this._key="mc-".concat(Object(_bundle_a5600e6c["dc" /* m */])()),this._isDisposed=!1,this.filter=null!=n?n:new Ki,this._channel=a,this._syncRange=new H({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint="number"==typeof s?s:Date.now()+Us,this._limit=r||fr,this._channelManager=i,this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(e,t,n){var s=e.findIndex((function(e){return e.isIdentical(c.channel)}));s>=0&&(c._replaceChannelOfCollection(e[s]),c.channel._runIfHandleableWithGroupChannel((function(e){switch(t){case _bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UPDATED:var s=!1;for(var r in c._messages){if(c._messages[r].createdAt>=e.messageOffsetTimestamp){s=!0;var a=parseInt(r);if(a>0){var i=c._messages.splice(0,a);c._removeMessagesFromView(i.map((function(e){return e.messageId})),_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_OFFSET_UPDATED)}break}}!s&&c._messages.length>0&&c._removeMessagesFromView(c._messages.map((function(e){return e.messageId})),_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_OFFSET_UPDATED);break;case _bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNMUTED:var o=_bundle_a5600e6c["v" /* V */].of(c._iid).sdkState,u=n;o.userId===u&&c._clearCheckMyMutedTimer();break;case _bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_MUTED:o=_bundle_a5600e6c["v" /* V */].of(c._iid).sdkState;var l=n;o.userId===l&&-1!==e._myMutedRemainingTime&&c._startCheckMyMutedTimer(e._myMutedRemainingTime);break;case _bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_LEFT:e.isPublic&&c._clearCheckMyMutedTimer()}Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){var e,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){return e=this._createChannelEventContext(t),_bundle_863f90b8_rn(t)&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelUpdated)&&this._handler.onChannelUpdated(e,this.channel),[2]}))}))}))})))},onRemove:function(e,t){e.indexOf(c.channel.url)>=0&&(c._clearCheckMyMutedTimer(),Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){var e,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){return e=this._createChannelEventContext(t),(null===(n=this._handler)||void 0===n?void 0:n.onChannelDeleted)&&this._handler.onChannelDeleted(e,this.channel.url),[2]}))}))})))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(e,t){var n,s,r=[],a=[];try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(e),o=i.next();!o.done;o=i.next()){var u=o.value;u.channelUrl===c._channel.url&&(c.filter.match(u)?r.push(u):a.push(u.messageId))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}if(Object(_bundle_a5600e6c["Ob" /* b5 */])(t)){if(r.length>0)switch(t){case _bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_CANCELED:case _bundle_a5600e6c["x" /* X */].LOCAL_MESSAGE_RESEND_STARTED:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_FAILED:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_SUCCESS:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_THREADINFO_UPDATED:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_REACTION_UPDATED:case _bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_CHANGELOGS:c._updateMessagesToView(r,t);break;case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT_PENDING:c._addMessagesToView(r,t);break;case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_RECEIVED:c.hasNext||c._addMessagesToView(r,t);break;case _bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL:c._addMessagesToView(r,t)}a.length>0&&c._removeMessagesFromView(a,t)}},onRemove:function(e,t){c._removeMessagesFromView(e,t)},onRemoveUnsent:function(e,t){c._removeUnsentMessageFromView(e,t)},onPollChangeLogUpdate:function(e,t){c._updatePollsToView(e,t)},onPollUpdate:function(e,t){c._applyPollUpdateEventToView(e,t)},onPollVote:function(e,t){c._applyPollVoteEventToView(e,t)}});var l=_bundle_a5600e6c["v" /* V */].of(this._iid),h=l.cacheContext,m=l.dispatcher;this._channel._updateMessageCollectionLastAccessedAt();var g=this._createChannelUpdateEventCommand(_bundle_a5600e6c["x" /* X */].CHANNEL_LASTACCESSEDAT_UPDATED);g&&m.dispatch(g),!u&&this._shouldStartBackgroundSync()&&(this._backgroundSync=_bundle_863f90b8_os.of(this._iid,this._channel),this._backgroundSync.resume(this._startingPoint)),this._changelogSync=_bundle_863f90b8_cs.of(this._iid,this._channel),this._changelogSync.resume(),this._pollChangelogSync=hs.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new _bundle_863f90b8_as(this._key,(function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){var t,n,s,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return[4,this._getRemoteMessages(e,{prevLimit:this._limit,source:_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL,checkingContinuousMessages:h.localCacheEnabled})];case 1:return t=u.sent(),n=t.messages,s=t.isContinuousMessages,n.length>0?(r=Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(r),s&&(null===(a=this._backgroundSync)||void 0===a||a.range.extends(r)),[2,{hasNext:n.length>=this._limit&&this.viewTop<r,nextToken:this._syncRange.top}]):(E.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(o=null===(i=h.localCacheConfig)||void 0===i?void 0:i.maxSize)&&void 0!==o?o:0,use_local_cache:h.localCacheEnabled}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._nextFill=new _bundle_863f90b8_as(this._key,(function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){var t,n,s,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return[4,this._getRemoteMessages(e,{nextLimit:this._limit,source:_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL,checkingContinuousMessages:h.localCacheEnabled})];case 1:return t=u.sent(),n=t.messages,s=t.isContinuousMessages,n.length>0?(r=Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(n.map((function(e){return e.createdAt}))),!1)),this._syncRange.extends(r),s&&(null===(a=this._backgroundSync)||void 0===a||a.range.extends(r)),[2,{hasNext:!(n.length>=this._limit&&this._hasNext)||this.viewBottom>r,nextToken:this._syncRange.bottom}]):(E.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(o=null===(i=h.localCacheConfig)||void 0===i?void 0:i.maxSize)&&void 0!==o?o:0,use_local_cache:h.localCacheEnabled}})),[2,{hasNext:!1,nextToken:0}])}}))}))})),this._connectionEventContext=m.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])switch(e.stateType){case _bundle_a5600e6c["qc" /* z */].CONNECTED:Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(c,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._activate(),[2]}))}))}));break;case _bundle_a5600e6c["qc" /* z */].LOGOUT:c.dispose();break;default:c._clearCheckMyMutedTimer(),c._prevFill.stop(),c._nextFill.stop()}}));var E=_bundle_a5600e6c["v" /* V */].of(this._iid).statLogCollector;E.put(new _bundle_a5600e6c["fb" /* aX */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE,data:{use_local_cache:h.localCacheEnabled,collection_interface:{message:!0}}}))}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===_bundle_a5600e6c["lb" /* ad */].FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter((function(e){return e.sendingStatus===_bundle_a5600e6c["lb" /* ad */].PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])(Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._messages.map((function(e){return e.createdAt}))),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])(Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(this._messages.map((function(e){return e.createdAt}))),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return _bundle_a5600e6c["v" /* V */].of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(_bundle_a5600e6c["x" /* X */].SYNC_CHANNEL_CHANGELOGS)];case 1:return e.sent(),[2]}}))}))},e.prototype._replaceChannelOfCollection=function(e){this._channel.isGroupChannel()?this._channel=e:this._channel.isFeedChannel()&&(this._channel._groupChannel=e._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var e=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext;return this.channel.isGroupChannel()?e.localCacheEnabled&&!this.channel.isSuper:e.localCacheEnabled},e.prototype._createChannelEventContext=function(e){switch(!0){case this.channel.isGroupChannel():return new Cs(e);case this.channel.isFeedChannel():return new ys(e);default:throw new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].WRONG_CHANNEL_TYPE,message:"Wrong channel type"})}},e.prototype._createMessageEventContext=function(e){switch(!0){case this.channel.isGroupChannel():return new bs(e);case this.channel.isFeedChannel():return new Ns(e);default:throw new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].WRONG_CHANNEL_TYPE,message:"Wrong channel type"})}},e.prototype._createChannelUpdateEventCommand=function(e){switch(!0){case this.channel.isGroupChannel():return new _bundle_863f90b8_an({channels:[this._channel],source:e});case this.channel.isFeedChannel():return new fs({channels:[this._channel],source:e});default:return null}},e.prototype._setBaseMessageCollectionHandler=function(e){this._handler=e},e.prototype._filterUnderOffsetMessage=function(e){return e},e.prototype._addMessagesToView=function(e,t){var n,s,r=this,a=this._filterUnderOffsetMessage(e),i=[],o=[];try{for(var u=Object(_bundle_a5600e6c["ic" /* r */])(a),c=u.next();!c.done;c=u.next()){var l=c.value;if(t===_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL){if(l.messageId>0){if((E=_bundle_863f90b8_ds(this._messages,l))<0){_bundle_863f90b8_ds(this._unsentMessages,l)<0&&i.push(l);var h=ps(this._messages,l);this._messages.splice(h,0,l)}}else if(l instanceof _bundle_1edafb8c_De){(E=_bundle_863f90b8_ds(this._unsentMessages,l))<0&&_bundle_863f90b8_ds(this._messages,l)<0&&(this._unsentMessages.push(l),i.push(l))}}else if(l.messageId>0){if((E=_bundle_863f90b8_ds(this._messages,l))<0){var m=_bundle_863f90b8_ds(this._unsentMessages,l);m<0?i.push(l):(this._unsentMessages.splice(m,1),o.push(l));h=ps(this._messages,l);this._messages.splice(h,0,l)}else o.push(l),this._messages[E]=l;if(l.updatedAt>0){var g=this._updateChildMessagesInView(l);o.push.apply(o,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(g),!1))}}else if(l instanceof _bundle_1edafb8c_De){var E;(E=_bundle_863f90b8_ds(this._unsentMessages,l))<0?_bundle_863f90b8_ds(this._messages,l)<0&&(this._unsentMessages.push(l),i.push(l)):(o.push(l),this._unsentMessages[E]=l)}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}Object(_bundle_a5600e6c["Ob" /* b5 */])(t)&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,n,s,r,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){return e=this._createMessageEventContext(t),i.length>0&&(null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesAdded)||void 0===s||s.call(n,e,this.channel,i)),o.length>0&&(null===(a=null===(r=this._handler)||void 0===r?void 0:r.onMessagesUpdated)||void 0===a||a.call(r,e,this.channel,o)),[2]}))}))}))},e.prototype._updateChildMessagesInView=function(e){var t=[];return this._messages.forEach((function(n){n.parentMessageId===e.messageId&&n.applyParentMessage(e)&&t.push(n)})),t},e.prototype._updatePollsToView=function(e,t){var n,s,r=this,a=[];try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(e),o=i.next();!o.done;o=i.next()){var u=o.value,c=_s(this._messages,u.messageId);if(c>=0){var l=this._messages[c];l&&l.applyPoll(u),a.push(l)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(n)throw n.error}}return a.length>0&&Object(_bundle_a5600e6c["Ob" /* b5 */])(t)&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){return e=this._createMessageEventContext(t),a.length>0&&(null===(s=(n=this._handler).onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,a)),[2]}))}))})),a},e.prototype._applyPollUpdateEventToView=function(e,t){var n=this,s=_s(this._messages,e.messageId);if(s>=0){var r=this._messages[s];r&&r.isUserMessage()&&r.poll&&r.poll.applyPollUpdateEvent(e)&&Object(_bundle_a5600e6c["Ob" /* b5 */])(t)&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){var e,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=this._createMessageEventContext(t),null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,[r]),[2]}))}))}))}},e.prototype._applyPollVoteEventToView=function(e,t){var n=this,s=_s(this._messages,e.messageId);if(s>=0){var r=this._messages[s];r&&r.isUserMessage()&&r.poll&&r.poll.applyPollVoteEvent(e)&&Object(_bundle_a5600e6c["Ob" /* b5 */])(t)&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){var e,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=this._createMessageEventContext(t),null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,[r]),[2]}))}))}))}},e.prototype._updateMessagesToView=function(e,t){var n,s,r=this,a=[],i=[],o=[];try{for(var u=Object(_bundle_a5600e6c["ic" /* r */])(e),c=u.next();!c.done;c=u.next()){var l,h=c.value;if(h.messageId>0)if((l=_bundle_863f90b8_ds(this._messages,h))>=0)i.push(h),this._messages[l]=h;else{var m=_bundle_863f90b8_ds(this._unsentMessages,h);if(m>=0){var g=this._unsentMessages.splice(m,1);if(this.hasNext&&g.length>0)o.push(g[0]);else{i.push(h);var E=ps(this._messages,h);this._messages.splice(E,0,h)}}else{var C=this._messages.map((function(e){return e.createdAt}));(h.createdAt<Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(C),!1))&&!this._hasPrevious||h.createdAt>Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(C),!1))&&!this._hasNext)&&a.push(h)}}else if(h instanceof _bundle_1edafb8c_De)(l=_bundle_863f90b8_ds(this._unsentMessages,h))>=0&&(i.push(h),this._unsentMessages[l]=h)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}return Object(_bundle_a5600e6c["Ob" /* b5 */])(t)&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,n,s,r,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){return e=this._createMessageEventContext(t),i.length>0?null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesUpdated)||void 0===s||s.call(n,e,this.channel,i):o.length>0?null===(u=null===(r=this._handler)||void 0===r?void 0:r.onMessagesDeleted)||void 0===u||u.call(r,e,this.channel,[],o):a.length>0&&this._addMessagesToView(a,t),[2]}))}))})),i},e.prototype._removeMessagesFromView=function(e,t){var n,s,r=this,a=[],i=[],o=function(e){var t=u._messages.findIndex((function(t){return t.messageId===e}));if(t>=0){var n=u._messages[t];a.push(n.messageId),i.push(n),u._messages.splice(t,1)}},u=this;try{for(var c=Object(_bundle_a5600e6c["ic" /* r */])(e),l=c.next();!l.done;l=c.next()){o(l.value)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}return Object(_bundle_a5600e6c["Ob" /* b5 */])(t)&&i.length>0&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){return e=this._createMessageEventContext(t),null===(s=null===(n=this._handler)||void 0===n?void 0:n.onMessagesDeleted)||void 0===s||s.call(n,e,this.channel,a,i),[2]}))}))})),a},e.prototype._removeUnsentMessageFromView=function(e,t){var n=this._unsentMessages.findIndex((function(t){return t.reqId===e}));n>=0&&this._unsentMessages.splice(n,1)},e.prototype._getLocalMessages=function(e,t){var n=t.prevLimit,s=void 0===n?0:n,r=t.nextLimit,a=void 0===r?0:r,i=t.inclusive,o=void 0===i||i;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,i,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return t=[],o?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,e,this.filter)]:[3,2];case 1:t=c.sent(),c.label=2;case 2:return s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"prev",this.filter,s,!1)]:[3,4];case 3:return r=c.sent(),[3,5];case 4:r=[],c.label=5;case 5:return n=r,a>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,e,"next",this.filter,a,!1)]:[3,7];case 6:return u=c.sent(),[3,8];case 7:u=[],c.label=8;case 8:return i=u,[2,Object(_bundle_a5600e6c["fc" /* o */])(Object(_bundle_a5600e6c["fc" /* o */])(Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(t),!1),Object(_bundle_a5600e6c["gc" /* p */])(n),!1),Object(_bundle_a5600e6c["gc" /* p */])(i),!1).sort((function(e,t){return t.createdAt-e.createdAt}))]}}))}))},e.prototype._getRemoteMessages=function(e,t){var r=t.prevLimit,a=void 0===r?0:r,i=t.nextLimit,o=void 0===i?0:i,u=t.source,c=void 0===u?_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE:u,l=t.reverse,h=void 0!==l&&l,d=t.checkingHasNext,_=void 0!==d&&d,v=t.checkingContinuousMessages,m=void 0!==v&&v;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return t=is.of(this._iid),a>0||o>0?[4,t._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,e,Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this.filter),Ss),{isInclusive:!0,reverse:h,prevResultSize:a,nextResultSize:o})),c,_,m)]:[3,2];case 1:return r=i.sent(),[3,3];case 2:r={messages:[],isContinuousMessages:!1},i.label=3;case 3:return[2,r]}}))}))},e.prototype._checkHugeGap=function(){var e,t,n,r,a;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i,o,u,c,l,v,m,g,E,C,M,b,N,U,S,A,T,I,w,D,L,R,P,F,x=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(O){switch(O.label){case 0:return i=_bundle_a5600e6c["v" /* V */].of(this._iid),o=i.dispatcher,u=i.requestQueue,c=i.cacheContext,l=i.statLogCollector,this._messages.length>0?(v=this._syncRange.top,m=this.viewTop,g=this._syncRange.bottom,E=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,m,v)]):[3,7];case 1:return C=O.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,g,E)];case 2:M=O.sent(),O.label=3;case 3:return O.trys.push([3,,5,6]),[4,Object(_bundle_a5600e6c["Pb" /* b6 */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(x,void 0,void 0,(function(){var e,t,n,r,a,i,l,h,b,N,U,S,A,T,I,w,D,L=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(R){switch(R.label){case 0:return e=new ms(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:m,prevEnd:v,prevCount:C,nextStart:g,nextEnd:E,nextCount:M,checkingContinuousMessages:c.localCacheEnabled},this.filter),Ss)),[4,u.send(e)];case 1:return t=R.sent(),n=t.as(gs),r=n.isHugeGap,a=n.prevMessages,i=void 0===a?[]:a,l=n.prevHasMore,h=n.isContinuousPrevMessages,b=n.nextMessages,N=void 0===b?[]:b,U=n.nextHasmore,S=n.isContinuousNextMessages,r?Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(L,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return(null===(e=this._handler)||void 0===e?void 0:e.onHugeGapDetected)&&this._handler.onHugeGapDetected(),[2]}))}))})):(A=this.viewTop,T=this.viewBottom,I=Math.min.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([Number.MAX_SAFE_INTEGER,A],Object(_bundle_a5600e6c["gc" /* p */])(i.map((function(e){return e.createdAt}))),!1)),w=Math.max.apply(Math,Object(_bundle_a5600e6c["fc" /* o */])([0,T],Object(_bundle_a5600e6c["gc" /* p */])(N.map((function(e){return e.createdAt}))),!1)),o.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:i,source:_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL})),o.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:N,source:_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL})),this._syncRange.extends(I,w),(h||S)&&(null===(D=this._backgroundSync)||void 0===D||D.range.extends(I,w)),l&&this._prevFill.start(I),U&&this._nextFill.start(w)),[2]}}))}))}),1)];case 4:return O.sent(),[3,6];case 5:return l.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(t=null===(e=c.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:c.localCacheEnabled}})),[7];case 6:return[3,12];case 7:b=Math.floor(this._limit/2),N=Date.now(),O.label=8;case 8:return O.trys.push([8,10,11,12]),[4,this._getRemoteMessages(N,{prevLimit:b,nextLimit:b,source:_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:c.localCacheEnabled})];case 9:if(U=O.sent(),S=U.messages,A=U.isContinuousMessages,T=U.hasNext,S.length>0){for(I=S.map((function(e){return e.createdAt})),w=0,D=0,L=0;L<I.length;L++)(R=I[L])<=N?w++:R>=N&&D++;this._hasPrevious=w>=b,this._hasNext=null!=T?T:D>=b,(F=this._syncRange).extends.apply(F,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(I),!1)),A&&(null===(n=this._backgroundSync)||void 0===n||n.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(S,_bundle_a5600e6c["x" /* X */].SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,12];case 10:return(P=O.sent())instanceof _bundle_a5600e6c["hc" /* q */]&&P.code===_bundle_a5600e6c["tb" /* al */].NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,12];case 11:return l.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:null!==(a=null===(r=c.localCacheConfig)||void 0===r?void 0:r.maxSize)&&void 0!==a?a:0,use_local_cache:c.localCacheEnabled}})),[7];case 12:return[2]}}))}))},e.prototype._loadUnsentMessages=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return e._unsentMessages=t.sent(),[2]}}))}))},e.prototype._hasPollMessage=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+Us,this.filter,1)];case 1:return e.sent().length>0?[2,!0]:[2,!1]}}))}))},e.prototype._refreshChannel=function(e){this._channelManager.refreshChannel(this.channel.url,!0,e)},e.prototype._startCheckMyMutedTimer=function(e){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var e,t,n=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:this._checkMyMutedStateTimer=void 0,e=!0,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return t=s.sent(),e=!t.isMuted,[3,5];case 3:return s.sent(),e=!0,[3,5];case 4:return e&&this.channel._runIfHandleableWithGroupChannel((function(e){var t,s;e.myMutedState=_bundle_a5600e6c["C" /* a$ */].UNMUTED;var r=n._createChannelEventContext(_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNMUTED);null===(s=null===(t=n._handler)||void 0===t?void 0:t.onChannelUpdated)||void 0===s||s.call(t,r,n.channel)})),[7];case 5:return[2]}}))}))}),e+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype.initialize=function(e){var t=this,n=new ws;this._messages=[],this._unsentMessages=[],this._syncRange=new H({}),this._hasNext=!0,this._hasPrevious=!0,this._refreshChannel(_bundle_a5600e6c["x" /* X */].REFRESH_CHANNEL),Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(e=t.sent()).isMuted&&-1!==e.remainingDuration&&this._startCheckMyMutedTimer(e.remainingDuration),[2]}}))}))}));var s=_bundle_a5600e6c["v" /* V */].of(this._iid),r=s.cacheContext,a=s.statLogCollector,i=Math.floor(this._limit/2);if(e===_bundle_863f90b8_rs.CACHE_AND_REPLACE_BY_API)this._getLocalMessages(this._startingPoint,{prevLimit:i,nextLimit:i}).then((function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return t=this._filterUnderOffsetMessage(e),this._addMessagesToView(t,_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return s.sent(),n._invokeResponse("local",null,t),[2]}}))}))})).catch((function(e){if(Object(_bundle_a5600e6c["L" /* aB */])(e))throw e;n._invokeResponse("local",e,null)})).finally((function(){var s=_bundle_a5600e6c["v" /* V */].of(t._iid).cacheContext;t._getRemoteMessages(t._startingPoint,{prevLimit:i,nextLimit:i,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:s.localCacheEnabled}).then((function(r){var o,u,c,l,h,p,f=r.messages,v=r.isContinuousMessages,m=r.hasNext,g=t._filterUnderOffsetMessage(f),E=!0;if(t._messages.length===g.length){var C=t._messages.map((function(e){return e.messageId}));for(var M in g)if(!C.includes(g[M].messageId)){E=!1;break}}else E=!1;if(t._messages=[],g.length>0){var b=g.map((function(e){return e.createdAt})),N=0,U=0;for(M=0;M<b.length;M++){var S=b[M];S<t._startingPoint?N++:S>t._startingPoint&&U++}t._hasPrevious=N>=i,t._hasNext=null!=m?m:U>=i,(o=t._syncRange).extends.apply(o,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(g.map((function(e){return e.createdAt}))),!1)),v&&(null===(u=t._backgroundSync)||void 0===u||u.range.extends(t._syncRange.top,t._syncRange.bottom)),t._addMessagesToView(g,_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE)}else t._hasPrevious=!1,t._hasNext=!1;a.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:E?"cache_hit":"cache_miss",max_db_size:null!==(l=null===(c=s.localCacheConfig)||void 0===c?void 0:c.maxSize)&&void 0!==l?l:0,message_init_policy:e,use_local_cache:s.localCacheEnabled,collection_id:t._key}})),a.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:t.channel.url,starting_point:t._startingPoint,measured_on:"initial_load",event:"cache_fetch",max_db_size:null!==(p=null===(h=s.localCacheConfig)||void 0===h?void 0:h.maxSize)&&void 0!==p?p:0,message_init_policy:e,use_local_cache:s.localCacheEnabled,collection_id:t._key}})),n._invokeResponse("remote",null,g)})).catch((function(e){if(Object(_bundle_a5600e6c["L" /* aB */])(e))throw e;n._invokeResponse("remote",e,null)}))}));return a.put(new _bundle_a5600e6c["fb" /* aX */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE,data:{use_local_cache:r.localCacheEnabled,collection_interface:{message_init_policy:e}}})),n},e.prototype.loadPrevious=function(){var e,t,n;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var s,r,a,i,o,u,c,l=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(v){switch(v.label){case 0:if(this._isDisposed)throw new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasPrevious?(s=Math.floor(this._limit/2),r=this.viewTop,a=[],[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(r,{prevLimit:s,inclusive:!1})];case 1:return a=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return v.sent(),i=a.length>=s,o=_bundle_a5600e6c["v" /* V */].of(this._iid),u=o.cacheContext,(c=o.statLogCollector).put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:i?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=u.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:u.localCacheEnabled,collection_id:this._key}})),i&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(a))?[3,3]:[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){var e,t,n,i,o,u,l,h=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(p){switch(p.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext,[4,this._getRemoteMessages(r,{prevLimit:s,reverse:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=p.sent(),a=(a=this._filterUnderOffsetMessage(t.messages)).filter((function(e){return _bundle_863f90b8_ds(h._messages,e)<0})),this._hasPrevious=a.length>=s,a.length>0&&((n=this._syncRange).extends.apply(n,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(a.map((function(e){return e.createdAt}))),!1)),(null===(i=this._backgroundSync)||void 0===i?void 0:i.range.overlap(this._syncRange))&&t.isContinuousMessages&&(null===(o=this._backgroundSync)||void 0===o||o.range.extends(this._syncRange.top))),c.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:null!==(l=null===(u=e.localCacheConfig)||void 0===u?void 0:u.maxSize)&&void 0!==l?l:0,use_local_cache:e.localCacheEnabled,collection_id:this._key}})),[2]}}))}))}))];case 2:return v.sent(),this._addMessagesToView(a,_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=a.length>=s,a.length>0&&this._addMessagesToView(a,_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),v.label=4;case 4:return[2,a]}}))}))},e.prototype.loadNext=function(){var e,t,n;return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var s,r,a,i,o,u,c,l=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(v){switch(v.label){case 0:if(this._isDisposed)throw new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasNext?(s=Math.floor(this._limit/2),r=this.viewBottom,a=[],[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return e=this._filterUnderOffsetMessage,[4,this._getLocalMessages(r,{nextLimit:s,inclusive:!1})];case 1:return a=e.apply(this,[t.sent()]),[2]}}))}))}))]):[2,[]];case 1:return v.sent(),i=a.length>=s,o=_bundle_a5600e6c["v" /* V */].of(this._iid),u=o.cacheContext,(c=o.statLogCollector).put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:i?"cache_hit":"cache_miss",max_db_size:null!==(t=null===(e=u.localCacheConfig)||void 0===e?void 0:e.maxSize)&&void 0!==t?t:0,use_local_cache:u.localCacheEnabled,collection_id:this._key}})),i&&(null===(n=this._backgroundSync)||void 0===n?void 0:n.isWrappingMessages(a))?[3,3]:[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){var e,t,n,i,o,u,l,h,p=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(f){switch(f.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext,[4,this._getRemoteMessages(r,{nextLimit:s,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:e.localCacheEnabled})];case 1:return t=f.sent(),a=(a=this._filterUnderOffsetMessage(t.messages)).filter((function(e){return _bundle_863f90b8_ds(p._messages,e)<0})),this._hasNext=null!==(i=t.hasNext)&&void 0!==i?i:a.length>=s,a.length>0&&((n=this._syncRange).extends.apply(n,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(a.map((function(e){return e.createdAt}))),!1)),(null===(o=this._backgroundSync)||void 0===o?void 0:o.range.overlap(this._syncRange))&&t.isContinuousMessages&&(null===(u=this._backgroundSync)||void 0===u||u.range.extends(this._syncRange.bottom))),c.put(new _bundle_a5600e6c["Nb" /* b4 */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:null!==(h=null===(l=e.localCacheConfig)||void 0===l?void 0:l.maxSize)&&void 0!==h?h:0,use_local_cache:e.localCacheEnabled,collection_id:this._key}})),[2]}}))}))}))];case 2:return v.sent(),this._addMessagesToView(a,_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),[3,4];case 3:this._hasNext=a.length>=s,a.length>0&&this._addMessagesToView(a,_bundle_a5600e6c["x" /* X */].REQUEST_MESSAGE),v.label=4;case 4:return[2,a]}}))}))},e.prototype.removeFailedMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:if(this._isDisposed)throw new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(e)];case 1:return n.sent(),(t=this._unsentMessages.findIndex((function(t){return t.reqId===e})))>-1&&this._unsentMessages.splice(t,1),[2]}}))}))},e.prototype.dispose=function(){var e,t,n,s=this;if(!this._isDisposed){this._isDisposed=!0;var r=_bundle_a5600e6c["v" /* V */].of(this._iid),a=r.cacheContext,i=r.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel((function(e){if(e.myMemberState!==_bundle_863f90b8_Rt.NONE){s._channel._updateMessageCollectionLastAccessedAt();var t=s._createChannelUpdateEventCommand(_bundle_a5600e6c["x" /* X */].CHANNEL_LASTACCESSEDAT_UPDATED);t&&i.dispatch(t)}})),a.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),null===(n=this._pollChangelogSync)||void 0===n||n.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}(),Ls=function(t){function n(e,n){return t.call(this,e,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},n),{channelManager:_bundle_863f90b8_ss.of(e)}))||this}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype.setMessageCollectionHandler=function(e){this._setBaseMessageCollectionHandler(e)},n.prototype._activate=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return[4,t.prototype._activate.call(this)];case 1:return n.sent(),[4,this.channel.getMyMutedInfo()];case 2:return(e=n.sent()).isMuted&&-1!==e.remainingDuration&&this._startCheckMyMutedTimer(e.remainingDuration),[2]}}))}))},n}(Ds),Rs={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},Ps=function(t){function n(e){var n=this,s=e.channelUrl,r=e.token,a=e.limit,i=e.order,o=e.mutedMemberFilter,u=e.memberStateFilter,c=e.nicknameStartsWithFilter,l=e.operatorFilter;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/members"),n.params={token:r,limit:a,order:i,muted_member_filter:o,member_state_filter:u,nickname_startswith:c,operator_filter:l,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),Fs=function(t){function n(e,n){var s=t.call(this,e,n)||this;s.members=[];var r=n.next,a=n.members;return s.token=r,a&&a.length>0&&(s.members=a.map((function(t){return new _bundle_863f90b8_Bt(e,t)}))),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]);!function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"}(As||(As={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(Ts||(Ts={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(Is||(Is={}));var ks=function(t){function a(e,n,s){var r,a,o,u,c=this;return(c=t.call(this,e,n,_bundle_a5600e6c["y" /* Y */].GROUP,s)||this).mutedMemberFilter=As.ALL,c.memberStateFilter=Is.ALL,c.nicknameStartsWithFilter=null,c.operatorFilter=_bundle_863f90b8_Ht.ALL,c.order=Ts.MEMBER_NICKNAME_ALPHABETICAL,c.mutedMemberFilter=null!==(r=s.mutedMemberFilter)&&void 0!==r?r:As.ALL,c.memberStateFilter=null!==(a=s.memberStateFilter)&&void 0!==a?a:Is.ALL,c.nicknameStartsWithFilter=null!==(o=s.nicknameStartsWithFilter)&&void 0!==o?o:null,c.order=null!==(u=s.order)&&void 0!==u?u:Ts.MEMBER_NICKNAME_ALPHABETICAL,c}return Object(_bundle_a5600e6c["A" /* _ */])(a,t),a.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["q" /* Q */])(As,this.mutedMemberFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(Is,this.memberStateFilter)&&(Object(_bundle_a5600e6c["B" /* a */])("string",this.nicknameStartsWithFilter)||null===this.nicknameStartsWithFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Ht,this.operatorFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(Ts,this.order)},a.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new Ps(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return r=u.sent(),a=r.as(Fs),i=a.members,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},a}(_bundle_a5600e6c["zb" /* ar */]),xs=function(t){function n(e){var n=this,s=e.channelUrl,r=e.userId,a=e.accessCode;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/accept"),n.params={user_id:r,access_code:a},n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),Os=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_863f90b8_dr(e,n),s.channel.myMemberState=_bundle_863f90b8_Rt.JOINED,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Hs=function(n){function s(e){var s=this,r=e.channelUrl,a=e.isDistinct,i=e.isPublic,o=e.isDiscoverable,u=e.coverUrl,c=e.coverImage,l=e.accessCode,h=e.name,d=e.data,_=e.customType,p=e.operatorUserIds,f=e.messageSurvivalSeconds;return(s=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,s.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(r)),s.params=Object(_bundle_a5600e6c["Vb" /* e */])({is_distinct:a,is_public:i,is_discoverable:o,name:h,data:d,custom_type:_,cover_url:u,cover_file:c,access_code:l,operator_ids:p,message_survival_seconds:f}),s}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]),Vs=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.channel=new _bundle_863f90b8_dr(e,n),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Gs=function(t){function n(e){var n=this,s=e.channelUrl;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s)),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var Bs=function(t){function n(e){var n=this,s=e.channelUrl;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].DELETE,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/hide"),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var qs=function(t){function n(e){var n=e.userId,s=e.channelUrl,r=e.countPreference,a=t.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/count_preference/").concat(encodeURIComponent(s)),a.params={count_preference:r},a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),zs=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.countPreference=n.count_preference,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Ws=function(t){function n(e){var n=this,s=e.channelUrl;return(n=t.call(this)||this).method=_bundle_a5600e6c["a" /* A */].PUT,n.path="".concat(_bundle_a5600e6c["xb" /* ap */],"/").concat(encodeURIComponent(s),"/reset_user_history"),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),js=function(t){function n(e,n){var s=t.call(this,e,n)||this,r=n.ts_message_offset;return s.messageOffsetTimestamp=r,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Qs=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_1edafb8c_xt),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),Ys=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Dt),{scheduledAt:void 0}),Ks=function(s){function r(e){var r,a=this;a=s.call(this)||this;var i=[];e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?i=e.mentionedUserIds:e.mentionedUsers&&(i=e.mentionedUsers.map((function(e){return e.userId}))));var o=e.channelType,u=e.channelUrl,c=e.scheduledMessageId;return a.method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(o),"/").concat(encodeURIComponent(u),"/scheduled_messages/").concat(encodeURIComponent(c)),a.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:_bundle_a5600e6c["Db" /* av */].FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return _bundle_1edafb8c_Fe.payloadify(e)})):[],custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(r=e.metaArrays)||void 0===r?void 0:r.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})),apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption})),a}return Object(_bundle_a5600e6c["A" /* _ */])(r,s),r}(_bundle_a5600e6c["Wb" /* f */]),Js=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.message=new _bundle_1edafb8c_We(e,n),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),Zs=function(s){function r(e){var r,a=this;a=s.call(this)||this;var i=[];e.mentionType===_bundle_a5600e6c["kb" /* ac */].USERS&&(e.mentionedUserIds?i=e.mentionedUserIds:e.mentionedUsers&&(i=e.mentionedUsers.map((function(e){return e.userId}))));var o=e.channelType,u=e.channelUrl,c=e.scheduledMessageId;return a.method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(o),"/").concat(encodeURIComponent(u),"/scheduled_messages/").concat(encodeURIComponent(c)),a.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:_bundle_a5600e6c["Db" /* av */].USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:i,sorted_metaarray:null===(r=e.metaArrays)||void 0===r?void 0:r.map((function(e){return _bundle_1edafb8c_Ce.payloadify(e)})),apple_critical_alert_options:e.appleCriticalAlertOptions?_bundle_1edafb8c_ke.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),a}return Object(_bundle_a5600e6c["A" /* _ */])(r,s),r}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.message=new _bundle_1edafb8c_je(e,n),s}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var Xs=function(t){function n(e){var n=t.call(this)||this,s=e.channelType,r=e.channelUrl,a=e.scheduledMessageId;return n.method=_bundle_a5600e6c["a" /* A */].DELETE,n.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(a)),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),$s=function(t){function n(e){var n=t.call(this)||this,s=e.channelType,r=e.channelUrl,a=e.scheduledMessageId;return n.method=_bundle_a5600e6c["a" /* A */].POST,n.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(s),"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(a),"/send_now"),n}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_er=function(t){function n(e){var n=e.userId,s=e.channelUrl,r=e.pushTriggerOption,a=t.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].PUT,a.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(s)),a.params={push_trigger_option:r},a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_tr=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.pushTriggerOption=n.push_trigger_option,s.enabled=n.enable,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_nr=function(t){function n(e){var n=e.userId,s=e.channelUrl,r=t.call(this)||this;return r.method=_bundle_a5600e6c["a" /* A */].GET,r.path="".concat(_bundle_a5600e6c["Ub" /* d */],"/").concat(encodeURIComponent(n),"/push_preference/").concat(encodeURIComponent(s)),r}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_sr=function(t){function n(e,n){var s=t.call(this,e,n)||this;return s.pushTriggerOption=n.push_trigger_option,s.enabled=n.enable,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_rr=function(t){function n(e){var n=e.channelType,s=e.channelUrl,r=e.messageId,a=t.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].POST,a.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(n),"/").concat(encodeURIComponent(s),"/messages/").concat(r,"/pin"),a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_863f90b8_ar=function(t){function n(e){var n=e.channelType,s=e.channelUrl,r=e.messageId,a=t.call(this)||this;return a.method=_bundle_a5600e6c["a" /* A */].DELETE,a.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(n),"/").concat(encodeURIComponent(s),"/messages/").concat(r,"/pin"),a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Wb" /* f */]);!function(t){function n(e,n){return t.call(this,e,n)||this}Object(_bundle_a5600e6c["A" /* _ */])(n,t)}(_bundle_a5600e6c["Yb" /* h */]);var _bundle_863f90b8_ir,_bundle_863f90b8_or,_bundle_863f90b8_ur=function(t){function n(e,n){var s=t.call(this,e)||this;return s.message=null,s.message=_bundle_1edafb8c_He(e,n.message),s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["I" /* a8 */]),_bundle_863f90b8_cr=function(n){function s(e){var s=this,r=e.channelType,a=e.channelUrl,i=e.limit,o=e.token,u=e.includeReactions,c=e.includeMetaArray,l=e.includeParentMessageInfo,h=e.includeThreadInfo,d=e.includePollDetails;return(s=n.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,s.path="".concat(Object(_bundle_a5600e6c["rb" /* aj */])(r),"/").concat(encodeURIComponent(a),"/pinned_messages"),s.params=Object(_bundle_a5600e6c["Vb" /* e */])({limit:i,token:o,include_reactions:u,with_sorted_meta_array:c,include_thread_info:h,include_parent_message_info:l,include_poll_details:d}),s}return Object(_bundle_a5600e6c["A" /* _ */])(s,n),s}(_bundle_a5600e6c["Wb" /* f */]),_bundle_863f90b8_lr=function(t){function n(e,n){var s=t.call(this,e,n)||this,r=n.pinned_messages,a=n.has_more,i=n.next;return s.pinnedMessages=r.map((function(t){return new _bundle_863f90b8_ur(e,t)})),s.hasMore=a,s.token=i,s}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n}(_bundle_a5600e6c["Yb" /* h */]),_bundle_863f90b8_hr=function(t){function n(e,n,s,r){var a=t.call(this,e,n,s,r)||this;return a.includeMetaArray=r.includeMetaArray,a.includeReactions=r.includeReactions,a.includeParentMessageInfo=r.includeParentMessageInfo,a.includeThreadInfo=r.includeThreadInfo,a.includePollDetails=r.includePollDetails,a}return Object(_bundle_a5600e6c["A" /* _ */])(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeMetaArray,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeReactions,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeParentMessageInfo,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeThreadInfo,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new _bundle_863f90b8_cr(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=u.sent(),r=n.as(_bundle_863f90b8_lr),a=r.pinnedMessages,i=r.hasMore,o=r.token,this._token=o,this._hasNext=!!i,this._isLoading=!1,[2,a];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},n}(_bundle_a5600e6c["zb" /* ar */]);!function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"}(_bundle_863f90b8_ir||(_bundle_863f90b8_ir={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(_bundle_863f90b8_or||(_bundle_863f90b8_or={}));var _bundle_863f90b8_dr=function(u){function c(e,t){var n,c,l,h,p,f,v,m,E,C,y,M,b,N,U,S,A,T,I,w,D=this;return(D=u.call(this,e,t)||this)._unreadMemberStateMap=new Map,D._undeliveredMemberStateMap=new Map,D._typingStatus=new Map,D._lastMemberCountUpdated=0,D._typingStarted=0,D._typingEnded=0,D.isDistinct=!1,D.isSuper=!1,D.isBroadcast=!1,D.isExclusive=!1,D.isPublic=!1,D.isDiscoverable=!0,D.isChatNotification=!1,D.isAccessCodeRequired=!1,D.isPushEnabled=!1,D.unreadMessageCount=0,D.unreadMentionCount=0,D.members=[],D.memberCount=0,D.joinedMemberCount=0,D.hiddenState=_bundle_863f90b8_or.UNHIDDEN,D.lastMessage=null,D.messageOffsetTimestamp=0,D.messageSurvivalSeconds=-1,D.myMemberState=_bundle_863f90b8_Rt.NONE,D.myRole=_bundle_a5600e6c["D" /* a1 */].NONE,D.myMutedState=_bundle_a5600e6c["C" /* a$ */].UNMUTED,D.myLastRead=0,D.myCountPreference=_bundle_863f90b8_ir.ALL,D.myPushTriggerOption=_bundle_a5600e6c["r" /* R */].DEFAULT,D.inviter=null,D.invitedAt=0,D.joinedAt=0,D.pinnedMessageIds=[],D.lastPinnedMessage=null,D._pinnedMessagesUpdatedAt=0,D._myMutedRemainingTime=-1,D.channelType=_bundle_a5600e6c["y" /* Y */].GROUP,D.isDistinct=null!==(c=t.is_distinct)&&void 0!==c&&c,D.isSuper=null!==(l=t.is_super)&&void 0!==l&&l,D.isBroadcast=null!==(h=t.is_broadcast)&&void 0!==h&&h,D.isExclusive=null!==(p=t.is_exclusive)&&void 0!==p&&p,D.isPublic=null!==(f=t.is_public)&&void 0!==f&&f,D.isDiscoverable=null!==(v=t.is_discoverable)&&void 0!==v?v:D.isPublic,D.isChatNotification=null!==(m=t.is_chat_notification)&&void 0!==m&&m,D.isAccessCodeRequired=null!==(E=t.is_access_code_required)&&void 0!==E&&E,D.isPushEnabled=null!==(C=t.is_push_enabled)&&void 0!==C&&C,Array.isArray(t.members)&&(n=D.members).push.apply(n,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(t.members.map((function(e){return new _bundle_863f90b8_Bt(D._iid,e)}))),!1)),D.memberCount=null!==(y=t.member_count)&&void 0!==y?y:0,D.joinedMemberCount=null!==(M=t.joined_member_count)&&void 0!==M?M:0,D.hiddenState=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_or,t.hidden_state)?t.hidden_state:_bundle_863f90b8_or.UNHIDDEN,D.messageOffsetTimestamp=null!==(b=t.ts_message_offset)&&void 0!==b?b:0,D.messageSurvivalSeconds=null!==(N=t.message_survival_seconds)&&void 0!==N?N:-1,D.lastMessage=t.last_message?_bundle_1edafb8c_He(D._iid,Object(_bundle_a5600e6c["Xb" /* g */])({channel_type:D.channelType},t.last_message)):null,t.read_receipt&&Object.keys(t.read_receipt).forEach((function(e){Object(_bundle_a5600e6c["B" /* a */])("number",t.read_receipt[e])&&D._updateUnreadMemberState(e,t.read_receipt[e])})),t.delivery_receipt&&Object.keys(t.delivery_receipt).forEach((function(e){Object(_bundle_a5600e6c["B" /* a */])("number",t.delivery_receipt[e])&&D._updateUndeliveredMemberState(e,t.delivery_receipt[e])})),D.myMemberState=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_Rt,t.member_state)?t.member_state:_bundle_863f90b8_Rt.NONE,D.myRole=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["D" /* a1 */],t.my_role)?t.my_role:_bundle_a5600e6c["D" /* a1 */].NONE,Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["C" /* a$ */],t.is_muted)?D.myMutedState=t.is_muted:Object(_bundle_a5600e6c["B" /* a */])("boolean",t.is_muted)?D.myMutedState=t.is_muted?_bundle_a5600e6c["C" /* a$ */].MUTED:_bundle_a5600e6c["C" /* a$ */].UNMUTED:D.myMutedState=_bundle_a5600e6c["C" /* a$ */].UNMUTED,D.myCountPreference=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_ir,t.count_preference)?t.count_preference:_bundle_863f90b8_ir.ALL,D.myPushTriggerOption=Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["r" /* R */],t.push_trigger_option)?t.push_trigger_option:_bundle_a5600e6c["r" /* R */].ALL,D.myLastRead=null!==(U=t.user_last_read)&&void 0!==U?U:0,D.inviter=t.inviter?new _bundle_a5600e6c["u" /* U */](D._iid,t.inviter):null,D.invitedAt=null!==(S=t.invited_at)&&void 0!==S?S:0,D.joinedAt=null!==(A=t.joined_ts)&&void 0!==A?A:0,D._updateUnreadCount(null!==(T=t.unread_message_count)&&void 0!==T?T:0,null!==(I=t.unread_mention_count)&&void 0!==I?I:0),D.pinnedMessageIds=null!==(w=t.pinned_message_ids)&&void 0!==w?w:[],D.lastPinnedMessage=t.latest_pinned_message?_bundle_1edafb8c_He(D._iid,Object(_bundle_a5600e6c["Xb" /* g */])({channel_type:D.channelType},t.latest_pinned_message)):null,D}return Object(_bundle_a5600e6c["A" /* _ */])(c,u),Object.defineProperty(c.prototype,"isHidden",{get:function(){return this.hiddenState!==_bundle_863f90b8_or.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"cachedUnreadMemberState",{get:function(){var e,t,n={};try{for(var s=Object(_bundle_a5600e6c["ic" /* r */])(this._unreadMemberStateMap),r=s.next();!r.done;r=s.next()){var a=Object(_bundle_a5600e6c["gc" /* p */])(r.value,2),i=a[0],o=a[1];n[i]=o}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"cachedUndeliveredMemberState",{get:function(){var e,t,n={};try{for(var s=Object(_bundle_a5600e6c["ic" /* r */])(this._undeliveredMemberStateMap),r=s.next();!r.done;r=s.next()){var a=Object(_bundle_a5600e6c["gc" /* p */])(r.value,2),i=a[0],o=a[1];n[i]=o}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),c.payloadify=function(e){return Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},u.payloadify.call(this,e)),{is_access_code_required:e.isAccessCodeRequired,is_distinct:e.isDistinct,is_super:e.isSuper,is_broadcast:e.isBroadcast,is_exclusive:e.isExclusive,is_public:e.isPublic,is_discoverable:e.isDiscoverable,is_muted:e.myMutedState,is_push_enabled:e.isPushEnabled,unread_message_count:e.unreadMessageCount,unread_mention_count:e.unreadMentionCount,push_trigger_option:e.myPushTriggerOption,count_preference:e.myCountPreference,hidden_state:e.hiddenState,member_count:e.memberCount,joined_member_count:e.joinedMemberCount,member_state:e.myMemberState,my_role:e.myRole,user_last_read:e.myLastRead,ts_message_offset:e.messageOffsetTimestamp,message_survival_seconds:e.messageSurvivalSeconds,read_receipt:e.cachedUnreadMemberState,delivery_receipt:e.cachedUndeliveredMemberState,members:e.members.map((function(e){return _bundle_863f90b8_Bt.payloadify(e)})),last_message:e.lastMessage?_bundle_1edafb8c_Ve(e.lastMessage):null,inviter:e.inviter?_bundle_a5600e6c["u" /* U */].payloadify(e.inviter):null,invited_at:e.invitedAt,joined_ts:e.joinedAt,pinned_message_ids:e.pinnedMessageIds,latest_pinned_message:e.lastPinnedMessage?_bundle_1edafb8c_Ve(e.lastPinnedMessage):null})))},c.prototype._shouldUpdateLastMessageWith=function(e){return!(e instanceof _bundle_1edafb8c_De&&e.parentMessageId>0&&!e.replyToChannel)&&(!this.lastMessage||this.lastMessage.createdAt<e.createdAt||this.lastMessage.createdAt===e.createdAt&&this.lastMessage.messageId===e.messageId&&this.lastMessage.updatedAt<e.updatedAt)},c.prototype._tryUpdateLastMessageAndCallEvents=function(e,t){var n=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,s=_bundle_863f90b8_ss.of(this._iid);e._shouldUpdateLastMessageWith(t)&&(e.lastMessage=t),s.handlers.map((function(t){t.onChannelChanged&&t.onChannelChanged(e)})),n.dispatch(new _bundle_863f90b8_an({channels:[e],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT}))},c.prototype._updateUnreadCount=function(e,t){if("number"==typeof e&&e>=0)if(this.myCountPreference===_bundle_863f90b8_ir.ALL||this.myCountPreference===_bundle_863f90b8_ir.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var n=_bundle_a5600e6c["v" /* V */].of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=n&&e>=n?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;else this.unreadMessageCount=0;"number"==typeof t&&t>=0&&(this.myCountPreference===_bundle_863f90b8_ir.ALL||this.myCountPreference===_bundle_863f90b8_ir.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=t:this.unreadMentionCount=0},c.prototype._updateUnreadMemberState=function(e,t){var n=this._unreadMemberStateMap.get(e);return(!n||n<t)&&(this._unreadMemberStateMap.set(e,t),_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState.userId===e&&(this.myLastRead=t),!0)},c.prototype._updateUndeliveredMemberState=function(e,t){var n=this._undeliveredMemberStateMap.get(e);return(!n||n<t)&&(this._undeliveredMemberStateMap.set(e,t),!0)},c.prototype._updateTypingStatus=function(e,t){void 0===t&&(t=(new Date).getTime()),t>0?this._typingStatus.set(e.userId,{user:e,ts:t}):this._typingStatus.delete(e.userId)},c.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},c.prototype._setLatestMemberCount=function(e,t,n){var s=!1;return n>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=n,s=e!==this.memberCount||t!==this.joinedMemberCount,this.memberCount=e,this.joinedMemberCount=t),s},c.prototype.isReadMessage=function(e){var t=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState,n=this._unreadMemberStateMap.get(t.userId);return!!n&&n>=e.createdAt},c.prototype.serialize=function(){var e=this;return Object(_bundle_a5600e6c["jb" /* ab */])(this,(function(t){t.cachedUnreadMemberState=e.cachedUnreadMemberState,t.cachedUndeliveredMemberState=e.cachedUndeliveredMemberState}))},c.prototype.createMessageCollection=function(e){return void 0===e&&(e={}),new Ls(this._iid,Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},e),{channel:this}))},c.prototype.createMemberListQuery=function(e){return void 0===e&&(e={}),new ks(this._iid,this.url,e)},c.prototype.createPinnedMessageListQuery=function(e){return void 0===e&&(e={}),new _bundle_863f90b8_hr(this._iid,this.url,this.channelType,e)},c.prototype.addMember=function(e,t){if(void 0===t&&(t=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var n=this.members.findIndex((function(t){return t.userId===e.userId}));if(n>-1){var s=this.members[n];s.state===_bundle_863f90b8_Rt.JOINED&&(e.state=s.state),this.members.splice(n,1),this.memberCount--}this.members.push(e),this.memberCount++,this._updateUnreadMemberState(e.userId,t),this._updateUndeliveredMemberState(e.userId,t)}},c.prototype.removeMember=function(e){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var t=e instanceof _bundle_863f90b8_Bt?e.userId:e,n=this.members.findIndex((function(e){return e.userId===t}));if(n>-1)return this.members.splice(n,1),this.memberCount--,!0}return!1},c.prototype.getUnreadMemberCount=function(e){var t,n;if(e instanceof _bundle_1edafb8c_De&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var s=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState,r=e.createdAt,a=0;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this.members),o=i.next();!o.done;o=i.next()){var u=o.value;if(s.userId!==u.userId&&u.state===_bundle_863f90b8_Rt.JOINED&&e.sender.userId!==u.userId)(this.cachedUnreadMemberState[u.userId]||0)<r&&a++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}return 0},c.prototype.getUndeliveredMemberCount=function(e){var t,n;if(e instanceof _bundle_1edafb8c_De&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var s=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState,r=e.createdAt,a=0;try{for(var i=Object(_bundle_a5600e6c["ic" /* r */])(this.members),o=i.next();!o.done;o=i.next()){var u=o.value;if(s.userId!==u.userId&&u.state===_bundle_863f90b8_Rt.JOINED&&e.sender.userId!==u.userId)(this.cachedUndeliveredMemberState[u.userId]||0)<r&&a++}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}return 0},c.prototype.getReadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var s=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState;if(!s.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var r=e instanceof _bundle_1edafb8c_De?e.sender:null,a=[];return this.members.forEach((function(i){if(t||i.userId!==s.userId&&i.userId!==(null==r?void 0:r.userId)){var o=n._unreadMemberStateMap.get(i.userId);o&&o>=e.createdAt&&a.push(i)}})),a},c.prototype.getUnreadMembers=function(e,t){var n=this;void 0===t&&(t=!1);var s=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState;if(!s.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var r=e instanceof _bundle_1edafb8c_De?e.sender:null,a=[];return this.members.forEach((function(i){if(t||i.userId!==s.userId&&i.userId!==(null==r?void 0:r.userId)){var o=n._unreadMemberStateMap.get(i.userId);o&&o<e.createdAt&&a.push(i)}})),a},c.prototype.getReadStatus=function(e){var t=this;void 0===e&&(e=!1);var n=_bundle_a5600e6c["v" /* V */].of(this._iid).sdkState;if(!n.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var s={};return this.members.forEach((function(r){if(e||r.userId!==n.userId){var a=t._unreadMemberStateMap.get(r.userId);s[r.userId]=new _bundle_863f90b8_qt(t._iid,{channel_url:t.url,channel_type:t.channelType,user:_bundle_863f90b8_Bt.payloadify(r),ts:null!=a?a:0})}})),s},c.prototype.getTypingUsers=function(){var e=[];return this._typingStatus.forEach((function(t){var n=t.user;e.push(n)})),e},c.prototype.invalidateTypingStatus=function(){var e=this,t=_bundle_a5600e6c["v" /* V */].of(this._iid).typingIndicatorInvalidateTime,n=Date.now(),s=!1;return this._typingStatus.forEach((function(r,a){var i=r.ts;n-i>=t&&(e._typingStatus.delete(a),s=!0)})),s},c.prototype.refresh=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,this._refresh()]}))}))},c.prototype._refresh=function(e){return void 0===e&&(e=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.requestQueue,s=t.dispatcher,r=new _bundle_863f90b8_hn({channelUrl:this.url}),[4,n.send(r)];case 1:return a=o.sent(),i=a.as(_bundle_863f90b8_dn).channel,this._update(i),e&&s.dispatch(new _bundle_863f90b8_an({channels:[i],source:_bundle_a5600e6c["x" /* X */].REQUEST_CHANNEL})),[2,this]}}))}))},c.prototype.freeze=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,u.prototype.freeze.call(this)];case 1:return e.sent(),_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_FROZEN,isWebSocketEventComing:!0})),[2]}}))}))},c.prototype.unfreeze=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,u.prototype.unfreeze.call(this)];case 1:return e.sent(),_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNFROZEN,isWebSocketEventComing:!0})),[2]}}))}))},c.prototype.updateChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,a,i,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Rs),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["B" /* a */])("string",e.coverUrl,!0)&&(Object(_bundle_a5600e6c["Zb" /* i */])(e.coverImage)||Object(_bundle_a5600e6c["B" /* a */])("string",e.coverImage,!0))&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isDistinct,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isPublic,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.isDiscoverable,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.accessCode,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.name,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.data,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.customType,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",e.operatorUserIds,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.messageSurvivalSeconds,!0)}(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid),r=n.dispatcher,a=n.requestQueue,i=new Hs(Object(_bundle_a5600e6c["Xb" /* g */])({channelUrl:this.url},t)),[4,a.send(i)];case 1:return o=c.sent(),u=o.as(Vs).channel,this._update(u),r.dispatch(new _bundle_863f90b8_an({channels:[u],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.invite=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return Object(_bundle_a5600e6c["jc" /* s */])(e.every((function(e){return e instanceof _bundle_a5600e6c["u" /* U */]}))).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this.inviteWithUserIds(e.map((function(e){return e.userId})))]}))}))},c.prototype.inviteWithUserIds=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.dispatcher,s=t.requestQueue,r=new _bundle_863f90b8_Fn({channelUrl:this.url,userIds:e}),[4,s.send(r)];case 1:return a=o.sent(),i=a.as(_bundle_863f90b8_kn).channel,this._update(i),n.dispatch(new _bundle_863f90b8_an({channels:[i],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_INVITED,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.join=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e,!0)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,r=t.requestQueue,a=new _bundle_863f90b8_wn({channelUrl:this.url,userId:s.userId,accessCode:e}),[4,r.send(a)];case 1:return i=u.sent(),(o=i.as(_bundle_863f90b8_Dn).channel).myMemberState=this.myMemberState=_bundle_863f90b8_Rt.JOINED,this._update(o),n.dispatch(new _bundle_863f90b8_an({channels:[o],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_JOINED,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.leave=function(e){return void 0===e&&(e=!1),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.sdkState,s=t.requestQueue,r=new _bundle_863f90b8_Rn({channelUrl:this.url,userId:n.userId,shouldRemoveOperatorStatus:e}),[4,s.send(r)];case 1:return a.sent(),this.myMemberState=_bundle_863f90b8_Rt.NONE,[2]}}))}))},c.prototype.acceptInvitation=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i,o;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e,!0)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,r=t.requestQueue,a=new xs({channelUrl:this.url,userId:s.userId,accessCode:e}),[4,r.send(a)];case 1:return i=u.sent(),(o=i.as(Os).channel).myMemberState=this.myMemberState=_bundle_863f90b8_Rt.JOINED,this._update(o),n.dispatch(new _bundle_863f90b8_an({channels:[o],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_ACCEPTED_INVITE,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.declineInvitation=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_863f90b8_On({channelUrl:this.url,userId:t.userId}),[4,n.send(s)];case 1:return r.sent(),this.myMemberState=_bundle_863f90b8_Rt.NONE,[2,this]}}))}))},c.prototype.sendUserMessage=function(e){var t=this,n=new _bundle_1edafb8c_t,s=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,r=_bundle_2a18997f_S.of(this._iid);return u.prototype.sendUserMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){t&&r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){t.hiddenState===_bundle_863f90b8_or.HIDDEN_ALLOW_AUTO_UNHIDE&&(t.hiddenState=_bundle_863f90b8_or.UNHIDDEN),r.completeCurrentAndProcessNextAutoResend(e),t._shouldUpdateLastMessageWith(e)&&(t.lastMessage=e),_bundle_863f90b8_ss.of(t._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_863f90b8_an({channels:[t],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT})),n._trigger(e)})),n},c.prototype.updateUserMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,s,r,a,i=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return n=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,[4,u.prototype.updateUserMessage.call(this,e,t)];case 1:return s=o.sent(),r=!1,!s.silent&&this._shouldUpdateLastMessageWith(s)&&(this.lastMessage=s,r=!0),a=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===s.messageId&&(this.lastPinnedMessage=s,r=!0,a=!0),r&&(_bundle_863f90b8_ss.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(i)})),n.dispatch(new _bundle_863f90b8_an({channels:[this],source:a?_bundle_a5600e6c["x" /* X */].EVENT_PINNED_MESSAGE_UPDATED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED}))),a&&_bundle_863f90b8_ss.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(i)})),n.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[s],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED})),[2,s]}}))}))},c.prototype._autoResendUserMessage=function(e){var t=this,n=new _bundle_1edafb8c_t,s=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,r=_bundle_2a18997f_S.of(this._iid);return u.prototype._autoResendUserMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){var a=_bundle_863f90b8_ss.of(t._iid);r.completeCurrentAndProcessNextAutoResend(e),t._shouldUpdateLastMessageWith(e)&&(t.lastMessage=e),a.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_863f90b8_an({channels:[t],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT})),n._trigger(e)})),n},c.prototype.sendFileMessage=function(e){var t=this,n=new _bundle_1edafb8c_t,s=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,r=_bundle_2a18997f_S.of(this._iid);return u.prototype.sendFileMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){t&&r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){var a=_bundle_863f90b8_ss.of(t._iid);r.completeCurrentAndProcessNextAutoResend(e),t._shouldUpdateLastMessageWith(e)&&(t.lastMessage=e),a.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_863f90b8_an({channels:[t],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT})),n._trigger(e)})),n},c.prototype.sendMultipleFilesMessage=function(e){var t=this,n=new Mr,s=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher;return u.prototype.sendMultipleFilesMessage.call(this,e).onPending((function(e){n._trigger(e)})).onFailed((function(e,t){n._triggerFailed(e,t)})).onSucceeded((function(e){var r=_bundle_863f90b8_ss.of(t._iid);t._shouldUpdateLastMessageWith(e)&&(t.lastMessage=e),r.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_863f90b8_an({channels:[t],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT})),n._trigger(e)})).onFileUploaded((function(e,t,s,r){n._triggerOnFileUploaded(e,t,s,r)})),n},c.prototype.updateFileMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,s,r,a,i=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return n=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,[4,u.prototype.updateFileMessage.call(this,e,t)];case 1:return s=o.sent(),r=!1,!s.silent&&this._shouldUpdateLastMessageWith(s)&&(this.lastMessage=s,r=!0),a=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===s.messageId&&(this.lastPinnedMessage=s,r=!0,a=!0),r&&(_bundle_863f90b8_ss.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(i)})),n.dispatch(new _bundle_863f90b8_an({channels:[this],source:a?_bundle_a5600e6c["x" /* X */].EVENT_PINNED_MESSAGE_UPDATED:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED}))),a&&_bundle_863f90b8_ss.of(this._iid).handlers.map((function(e){e.onPinnedMessageUpdated&&e.onPinnedMessageUpdated(i)})),n.dispatch(new _bundle_a5600e6c["K" /* aA */]({messages:[s],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_UPDATED})),[2,s]}}))}))},c.prototype._autoResendFileMessage=function(e){var t=this,n=new _bundle_1edafb8c_t,s=_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher,r=_bundle_2a18997f_S.of(this._iid);return u.prototype._autoResendFileMessage.call(this,e).onPending((function(e){r.completeCurrentAndProcessNextAutoResend(e),n._trigger(e)})).onFailed((function(e,t){r.completeCurrentAndProcessNextAutoResend(t),n._triggerFailed(e,t)})).onSucceeded((function(e){var a=_bundle_863f90b8_ss.of(t._iid);r.completeCurrentAndProcessNextAutoResend(e),t._shouldUpdateLastMessageWith(e)&&(t.lastMessage=e),a.handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(t)})),s.dispatch(new _bundle_863f90b8_an({channels:[t],source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT})),n._trigger(e)})),n},c.prototype.deleteMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,u.prototype.deleteMessage.call(this,e)];case 1:return t.sent(),0===e.messageId&&e instanceof _bundle_1edafb8c_De&&_bundle_a5600e6c["v" /* V */].of(this._iid).dispatcher.dispatch(new _bundle_a5600e6c["U" /* aK */]({reqId:e.reqId,source:_bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_DELETED})),[2]}}))}))},c.prototype.hide=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,r,a,i,o,u,c;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Vn),e),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return Object(_bundle_a5600e6c["B" /* a */])("boolean",e.hidePreviousMessages,!0)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",e.allowAutoUnhide,!0)}(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),n=_bundle_a5600e6c["v" /* V */].of(this._iid),r=n.dispatcher,a=n.sdkState,i=n.requestQueue,o=new _bundle_863f90b8_Gn(Object(_bundle_a5600e6c["Xb" /* g */])({channelUrl:this.url,userId:a.userId},t)),[4,i.send(o)];case 1:return u=d.sent(),c=u.as(_bundle_863f90b8_Bn).messageOffsetTimestamp,this.hiddenState=t.allowAutoUnhide?_bundle_863f90b8_or.HIDDEN_ALLOW_AUTO_UNHIDE:_bundle_863f90b8_or.HIDDEN_PREVENT_AUTO_UNHIDE,t.hidePreviousMessages&&this._updateUnreadCount(0,0),c&&(this.messageOffsetTimestamp=c),r.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_HIDDEN,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.unhide=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.dispatcher,n=e.requestQueue,s=new Bs({channelUrl:this.url}),[4,n.send(s)];case 1:return r.sent(),this.hiddenState=_bundle_863f90b8_or.UNHIDDEN,t.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UNHIDDEN,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.delete=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new Gs({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},c.prototype.markAsRead=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r,a,i,o=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.dispatcher,s=e.requestQueue,r=new _bundle_863f90b8_Zn({channelUrl:this.url}),[4,s.send(r)];case 1:return a=u.sent(),i=a.as(_bundle_863f90b8_Xn).readStatus,this._updateUnreadMemberState(t.userId,i.readAt),(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),_bundle_863f90b8_ss.of(this._iid).handlers.map((function(e){e.onChannelChanged&&e.onChannelChanged(o)}))),n.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_READ})),[2]}}))}))},c.prototype.markAsDelivered=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_863f90b8_$n({channelUrl:this.url,userId:t.userId}),[4,n.send(s)];case 1:return r.sent(),[2]}}))}))},c.prototype.startTyping=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(s=(new Date).getTime())-this._typingStarted>=n&&(this._typingStarted=s,this._typingEnded=0,r=new _bundle_863f90b8_zn({channelUrl:this.url,time:this._typingStarted}),t.send(r)),[2]}))}))},c.prototype.endTyping=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.requestQueue,n=e.typingIndicatorThrottle,(s=(new Date).getTime())-this._typingEnded>=n&&(this._typingStarted=0,this._typingEnded=s,r=new _bundle_863f90b8_jn({channelUrl:this.url,time:this._typingStarted}),t.send(r)),[2]}))}))},c.prototype.createScheduledUserMessage=function(e){e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Gi),e),Object(_bundle_a5600e6c["jc" /* s */])(Vi(e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);var t=new _bundle_1edafb8c_t;return this._createScheduledUserMessage(e,t),t},c.prototype.updateScheduledUserMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,a,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Ys),t),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return _bundle_1edafb8c_Ft(e)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.scheduledAt,!0)}(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),r=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,a=new Zs(Object(_bundle_a5600e6c["Xb" /* g */])({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,r.send(a)];case 1:return i=o.sent(),[2,i.as(Yn).message]}}))}))},c.prototype.createScheduledFileMessage=function(e){var t=this;e=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Hi),e),Object(_bundle_a5600e6c["jc" /* s */])(Wi(e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);var n=Date.now(),r=this._generateRequestId(),a=new _bundle_1edafb8c_t;return Object(_bundle_a5600e6c["ub" /* am */])(Sr).then((function(){var s=t._createPendingScheduledFileMessage(e,r,n);Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(t,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return[2,a._trigger(s)]}))}))}))})),Object(_bundle_a5600e6c["Zb" /* i */])(e.file)?this._uploadFileAndUpdateParams(e).then((function(){return t._createScheduledFileMessage(e,a,r,n)})):this._createScheduledFileMessage(e,a,r,n),a},c.prototype.updateScheduledFileMessage=function(e,t){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n,r,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},Qs),t),Object(_bundle_a5600e6c["jc" /* s */])(function(e){return _bundle_1edafb8c_Lt(e)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.scheduledAt,!0)&&(Object(_bundle_a5600e6c["Zb" /* i */])(e.file)||Object(_bundle_a5600e6c["B" /* a */])("string",e.fileUrl))&&Object(_bundle_a5600e6c["B" /* a */])("string",e.fileName,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",e.mimeType,!0)&&Object(_bundle_a5600e6c["B" /* a */])("number",e.fileSize,!0)&&(null===e.thumbnailSizes||void 0===e.thumbnailSizes||e.thumbnailSizes.every((function(e){return Object(_bundle_a5600e6c["B" /* a */])("object",e)&&e.maxWidth>0&&e.maxHeight>0})))}(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),Object(_bundle_a5600e6c["Zb" /* i */])(n.file)?[4,this._uploadFileAndUpdateParams(n)]:[3,2];case 1:i.sent(),i.label=2;case 2:return r=new Ks(Object(_bundle_a5600e6c["Xb" /* g */])({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},n)),[4,_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue.send(r)];case 3:return a=i.sent(),[2,a.as(Js).message]}}))}))},c.prototype.cancelScheduledMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return t=new Xs({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},c.prototype.sendScheduledMessageNow=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return t=new $s({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue.send(t)];case 1:return n.sent(),[2]}}))}))},c.prototype.getMyPushTriggerOption=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.sdkState,n=e.requestQueue,s=new _bundle_863f90b8_nr({userId:t.userId,channelUrl:this.url}),[4,n.send(s)];case 1:return r=i.sent(),a=r.as(_bundle_863f90b8_sr).pushTriggerOption,this.myPushTriggerOption=a,[2,a]}}))}))},c.prototype.setMyPushTriggerOption=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,a,i,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["r" /* R */],e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,a=t.requestQueue,i=new _bundle_863f90b8_er({userId:s.userId,channelUrl:this.url,pushTriggerOption:e}),[4,a.send(i)];case 1:return o=c.sent(),u=o.as(_bundle_863f90b8_tr).pushTriggerOption,this.myPushTriggerOption=u,n.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,u]}}))}))},c.prototype.setMyCountPreference=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,a,i,o,u;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(c){switch(c.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_ir,e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.dispatcher,s=t.sdkState,a=t.requestQueue,i=new qs({channelUrl:this.url,userId:s.userId,countPreference:e}),[4,a.send(i)];case 1:return o=c.sent(),u=o.as(zs).countPreference,this.myCountPreference=u,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),n.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UPDATED,isWebSocketEventComing:!0})),[2,u]}}))}))},c.prototype.resetMyHistory=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,s,r,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){switch(i.label){case 0:return e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.dispatcher,n=e.requestQueue,s=new Ws({channelUrl:this.url}),[4,n.send(s)];case 1:return r=i.sent(),a=r.as(js).messageOffsetTimestamp,this.messageOffsetTimestamp=a,this.lastMessage&&this.lastMessage.createdAt<a&&(this.lastMessage=null),t.dispatch(new _bundle_863f90b8_an({channels:[this],source:_bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_RESET_HISTORY,isWebSocketEventComing:!0})),[2,this]}}))}))},c.prototype.pinMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&e>0).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_863f90b8_rr({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return s.sent(),[2]}}))}))},c.prototype.unpinMessage=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(s){switch(s.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&e>0).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_863f90b8_ar({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,t.send(n)];case 1:return s.sent(),[2]}}))}))},c.prototype._uploadFileAndUpdateParams=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t,n,s,r,a,i,o,u,c,l,h;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(d){switch(d.label){case 0:return Object(_bundle_a5600e6c["Zb" /* i */])(e.file)?(t=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,n=new _bundle_1edafb8c_Te({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:this._generateRequestId()}),[4,t.send(n)]):[3,2];case 1:s=d.sent(),r=s.as(_bundle_1edafb8c_we),a=r.url,i=r.fileSize,o=void 0===i?e.fileSize:i,u=r.thumbnailSizes,c=void 0===u?e.thumbnailSizes:u,l=r.requireAuth,h=void 0!==l&&l,e.fileUrl=a,e.fileSize=o,e.thumbnailSizes=c,e.requireAuth=h,d.label=2;case 2:return[2]}}))}))},c.prototype.resendMessage=function(e,t){var n,s=this;if(Object(_bundle_a5600e6c["jc" /* s */])(e instanceof _bundle_1edafb8c_De&&!e.scheduledInfo&&e.isResendable).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),e.isUserMessage()){var r=null!==(n=e.messageParams)&&void 0!==n?n:Mt(e),a=new _bundle_1edafb8c_t;return this._sendUserMessage(r,Er.RESEND,e.reqId).onPending((function(e){a._trigger(e)})).onFailed((function(e,t){a._triggerFailed(e,t)})).onSucceeded((function(e){s._tryUpdateLastMessageAndCallEvents(s,e),a._trigger(e)})),a}if(e.isFileMessage()){var i=this._validateFailedFileMessageHasFile(e,t);Object(_bundle_a5600e6c["jc" /* s */])(i).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters);r=_bundle_1edafb8c_kt(e,t);var o=new _bundle_1edafb8c_t;return this._sendFileMessage(r,Er.RESEND,e.reqId).onPending((function(e){o._trigger(e)})).onFailed((function(e,t){o._triggerFailed(e,t)})).onSucceeded((function(e){s._tryUpdateLastMessageAndCallEvents(s,e),o._trigger(e)})),o}if(e.isMultipleFilesMessage()){r=e.messageParams;var u=new Mr;return this._sendMultipleFilesMessage(r,Er.RESEND,e.reqId).onPending((function(e){u._trigger(e)})).onFailed((function(e,t){u._triggerFailed(e,t)})).onSucceeded((function(e){s._tryUpdateLastMessageAndCallEvents(s,e),u._trigger(e)})).onFileUploaded((function(e,t,n,s){u._triggerOnFileUploaded(e,t,n,s)})),u}},c.prototype.copyMessage=function(e,t){var n=this;if(Object(_bundle_a5600e6c["jc" /* s */])(e instanceof Ar&&t instanceof _bundle_1edafb8c_De&&t.sendingStatus===_bundle_a5600e6c["lb" /* ad */].SUCCEEDED&&this.url===t.channelUrl&&!t.scheduledInfo).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t.isUserMessage()){Object(_bundle_a5600e6c["jc" /* s */])(!t.poll).throw(_bundle_a5600e6c["hc" /* q */].notSupportedError);var s=Tt(t),r=new _bundle_1edafb8c_t;return e._sendUserMessage(s).onPending((function(e){r._trigger(e)})).onFailed((function(e,t){r._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),r._trigger(t)})),r}if(t.isFileMessage()){s=_bundle_1edafb8c_Ot(t);var a=new _bundle_1edafb8c_t;return e._sendFileMessage(s).onPending((function(e){a._trigger(e)})).onFailed((function(e,t){a._triggerFailed(e,t)})).onSucceeded((function(t){e.isGroupChannel()&&n._tryUpdateLastMessageAndCallEvents(e,t),a._trigger(t)})),a}if(t.isMultipleFilesMessage()){if(e.isGroupChannel()){s=Ir(t);var i=new Mr;return e._sendMultipleFilesMessage(s,Er.COPY).onPending((function(e){i._trigger(e)})).onFailed((function(e,t){i._triggerFailed(e,t)})).onSucceeded((function(t){n._tryUpdateLastMessageAndCallEvents(e,t),i._trigger(t)})).onFileUploaded((function(e,t,n,s){i._triggerOnFileUploaded(e,t,n,s)})),i}throw _bundle_a5600e6c["hc" /* q */].channelTypeNotSupportedError}},c}(Ar);

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/groupChannel.js
var groupChannel_Ue,groupChannel_Oe={},groupChannel_De=function(){function e(e){var t=e._iid,n=e.limit,a=void 0===n?100:n,r=this;this.ref=0,this._iid=t,this._limit=a;var o,l=_bundle_a5600e6c["v" /* V */].of(this._iid),u=l.sdkState,c=l.dispatcher,d=l.logger,p=l.cacheContext;this._metadataKey=(o=u.userId,"sendbird:".concat(o,"@groupchannel/sync.meta"));var m=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(u.userId);this._sync=new _bundle_863f90b8_as(m,(function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,t,n,a,r,i,s,o,l,c,f,m;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(h.sent(),d.debug("channel background sync from",null===(l=this._metadata)||void 0===l?void 0:l.token),null===(c=this._metadata)||void 0===c?void 0:c.completed)return[3,13];h.label=2;case 2:if(h.trys.push([2,9,,12]),(t={includeEmpty:!0,order:_bundle_2a18997f_E.CHRONOLOGICAL}).order!==_bundle_2a18997f_E.LATEST_LAST_MESSAGE)return[3,6];h.label=3;case 3:return h.trys.push([3,5,,6]),[4,p.preference.get(Object(_bundle_a5600e6c["h" /* H */])(u.appId))];case 4:return n=h.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return h.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_bundle_863f90b8_ss.of(this._iid).getMyGroupChannels(null!==(m=null===(f=this._metadata)||void 0===f?void 0:f.token)&&void 0!==m?m:"",t,this._limit,_bundle_a5600e6c["x" /* X */].SYNC_CHANNEL_BACKGROUND)];case 7:return a=h.sent(),r=a.channels,i=a.token,e.hasNext=r.length>=this._limit&&!!i,e.nextToken=i,this._metadata&&(this._metadata.token=i,(o=this._metadata.range).extends.apply(o,Object(_bundle_a5600e6c["fc" /* o */])([],Object(_bundle_a5600e6c["gc" /* p */])(r.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),d.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return h.sent(),[3,12];case 9:return s=h.sent(),d.debug("channel background sync error",s),s instanceof _bundle_a5600e6c["hc" /* q */]&&s.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:h.sent(),h.label=11;case 11:throw s;case 12:return[3,14];case 13:e.hasNext=!1,e.nextToken="",h.label=14;case 14:return[2,e]}}))}))})),this._connectionEventContext=c.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])if(e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED)r.resume();else r.pause()}))}return e.of=function(t){return groupChannel_Oe[t]||(groupChannel_Oe[t]=new e({_iid:t})),groupChannel_Oe[t].ref++,groupChannel_Oe[t]},e.clear=function(e){groupChannel_Oe[e]&&(groupChannel_Oe[e].close(),delete groupChannel_Oe[e])},Object.defineProperty(e.prototype,"range",{get:function(){var e,t;return null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==t?t:new H({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:e=t.sent(),this._metadata={token:e?e.token:"",range:new H(e?e.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!e&&e.completed},t.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetaData=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){var e,t,n=_bundle_a5600e6c["v" /* V */].of(this._iid),a=n.logger;n.connectionManager.isConnected&&(a.debug("channel background sync resume()"),this._sync.start(null!==(t=null===(e=this._metadata)||void 0===e?void 0:e.token)&&void 0!==t?t:""))},e.prototype.pause=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete groupChannel_Oe[this._iid])},e}(),groupChannel_Pe={},groupChannel_Ie=function(){function e(e){var t=e._iid,n=this;this.ref=0,this._iid=t;var a,r=_bundle_a5600e6c["v" /* V */].of(this._iid),o=r.logger,l=r.sdkState,u=r.dispatcher,c=r.cacheContext;this._metadataKey=(a=l.userId,"sendbird:".concat(a,"@groupchannel/changelogs.meta"));var d=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(l.userId);this._sync=new _bundle_863f90b8_as(d,(function(){return Object(_bundle_a5600e6c["Ib" /* b */])(n,void 0,void 0,(function(){var e,t,n,a,r,i,s,u,d,p;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(h){switch(h.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:h.sent(),o.debug("channel changelog sync from",null===(u=this._metadata)||void 0===u?void 0:u.token),h.label=2;case 2:h.trys.push([2,9,,12]),t={includeEmpty:!0},h.label=3;case 3:return h.trys.push([3,5,,6]),[4,c.preference.get(Object(_bundle_a5600e6c["h" /* H */])(l.appId))];case 4:return n=h.sent(),t.includeChatNotification=Boolean(n),[3,6];case 5:return h.sent(),t.includeChatNotification=!1,[3,6];case 6:return[4,_bundle_863f90b8_ss.of(this._iid).getMyGroupChannelChangeLogs(null!==(p=null===(d=this._metadata)||void 0===d?void 0:d.token)&&void 0!==p?p:"",t,_bundle_a5600e6c["x" /* X */].SYNC_CHANNEL_CHANGELOGS)];case 7:return a=h.sent(),r=a.hasMore,i=a.token,e.hasNext=r,e.nextToken=i,this._metadata&&(this._metadata.token=i),o.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return h.sent(),[3,12];case 9:return s=h.sent(),o.debug("channel changelog sync error",s),s instanceof _bundle_a5600e6c["hc" /* q */]&&s.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:h.sent(),h.label=11;case 11:throw s;case 12:return[2,e]}}))}))})),this._connectionEventContext=u.on((function(e){if(e instanceof _bundle_a5600e6c["pc" /* y */])if(e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED)n.resume();else n.pause()}))}return e.of=function(t){return groupChannel_Pe[t]||(groupChannel_Pe[t]=new e({_iid:t})),groupChannel_Pe[t].ref++,groupChannel_Pe[t]},e.clear=function(e){groupChannel_Pe[e]&&(groupChannel_Pe[e].close(),delete groupChannel_Pe[e])},e.prototype.loadMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,a;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(r){switch(r.label){case 0:return this._metadata?[3,2]:(e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.cacheContext,n=e.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:a=r.sent(),this._metadata={token:a?a.token:n},r.label=2;case 2:return[2,this._metadata]}}))}))},e.prototype.saveMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return this._metadata?[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return e.sent(),[2,!0];case 2:return[2,!1]}}))}))},e.prototype.clearMetadata=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,_bundle_a5600e6c["v" /* V */].of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return e.sent(),this._metadata=void 0,[2]}}))}))},e.prototype.resume=function(){_bundle_a5600e6c["v" /* V */].of(this._iid).connectionManager.isConnected&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete groupChannel_Pe[this._iid])},e}(),groupChannel_He=function(e,t){return e.findIndex((function(e){return e.isIdentical(t)}))},groupChannel_Re=function(e,t,n){if(e.length>0){for(var a=groupChannel_He(e,t),r=0,i=e.length-1,s=Math.floor((r+i)/2);r<i;){var o=groupChannel_Ve(e[s],t,n);if(o>0)i=s,s=Math.floor((r+i)/2);else{if(!(o<0))return{place:s,oldPosition:a};r=s+1,s=Math.floor((r+i)/2)}}return{place:groupChannel_Ve(e[s],t,n)>=0?s:s+1,oldPosition:a}}return{place:e.length,oldPosition:-1}},groupChannel_Ve=function(e,t,n){switch(n){case _bundle_2a18997f_E.LATEST_LAST_MESSAGE:return e.lastMessage&&t.lastMessage?t.lastMessage.createdAt-e.lastMessage.createdAt:e.lastMessage?-1:t.lastMessage?1:t.createdAt-e.createdAt;case _bundle_2a18997f_E.CHRONOLOGICAL:return t.createdAt-e.createdAt;case _bundle_2a18997f_E.CHANNEL_NAME_ALPHABETICAL:var a=e.name.localeCompare(t.name);return 0===a?e.createdAt-t.createdAt:a;default:return 0}},groupChannel_Ke=function(){function e(e,t){var n=t.filter,a=t.order,r=t.limit,o=this;this.channels=[],this._iid=e,this._key="gcc-".concat(Object(_bundle_a5600e6c["dc" /* m */])()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this.filter=null!=n?n:new _bundle_863f90b8_Wt,this.order=null!=a?a:_bundle_2a18997f_E.LATEST_LAST_MESSAGE,this._hasMore=!0,this._token="",this._limit=null!=r?r:lr;var l=_bundle_a5600e6c["v" /* V */].of(this._iid),u=l.sdkState,c=l.cacheContext,d=l.dispatcher;c.localCacheEnabled&&(this._backgroundSync=groupChannel_De.of(e),this._backgroundSync.resume()),this._changelogSync=groupChannel_Ie.of(e),this._changelogSync.resume(),_bundle_863f90b8_ss.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,t){if(_bundle_863f90b8_rn(t)){var n=e.filter((function(e){return o.filter.match(e,u.userId)})),a=e.filter((function(e){return!o.filter.match(e,u.userId)})).map((function(e){return e.url}));n.length>0&&o._addChannelsToView(n,t),a.length>0&&o._removeChannelsFromView(a,t)}},onRemove:function(e,t){o._removeChannelsFromView(e,t)}}),_bundle_a5600e6c["v" /* V */].of(this._iid).statLogCollector.put(new _bundle_a5600e6c["fb" /* aX */]({type:_bundle_a5600e6c["gb" /* aY */].FEATURE_LOCALCACHE,data:{use_local_cache:c.localCacheEnabled,collection_interface:{group_channel:!0}}})),d.on((function(e){e instanceof _bundle_a5600e6c["pc" /* y */]&&(e.stateType===_bundle_a5600e6c["qc" /* z */].CONNECTED?o._isGetRemoteChannelsSucceeded||Object(_bundle_a5600e6c["Ib" /* b */])(o,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):e.stateType===_bundle_a5600e6c["qc" /* z */].LOGOUT&&o.dispose())}))}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},e.prototype._addChannelsToView=function(e,t,n){var a,r,s,o,l=this;void 0===n&&(n=!1);var u=[],c=[],d=[];try{for(var p=Object(_bundle_a5600e6c["ic" /* r */])(e),f=p.next();!f.done;f=p.next()){var m=f.value,v=groupChannel_He(this.channels,m);v>=0&&this.channels.splice(v,1);var _=groupChannel_Re(this.channels,m,this.order).place;if(v<0)_===this.channels.length?!n&&this._hasMore||(u.push(m),this.channels.push(m)):(u.push(m),this.channels.splice(_,0,m));else switch(t){case _bundle_a5600e6c["x" /* X */].EVENT_CHANNEL_UPDATED:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_RECEIVED:case _bundle_a5600e6c["x" /* X */].SYNC_CHANNEL_CHANGELOGS:case _bundle_a5600e6c["x" /* X */].EVENT_MESSAGE_SENT:_!==v&&this._hasMore&&_===this.channels.length?d.push(m):(this.channels.splice(_,0,m),c.push(m));break;default:this.channels.splice(_,0,m),c.push(m)}}}catch(e){a={error:e}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(a)throw a.error}}if(d.length>0)try{for(var g=Object(_bundle_a5600e6c["ic" /* r */])(d),y=g.next();!y.done;y=g.next()){m=y.value;var C=groupChannel_He(this.channels,m);-1!==C&&this.channels.splice(C,1)}}catch(e){s={error:e}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(s)throw s.error}}_bundle_863f90b8_rn(t)&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(l,void 0,void 0,(function(){var e,n,a,r;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(i){return e=new Cs(t),u.length>0&&(null===(n=this._handler)||void 0===n?void 0:n.onChannelsAdded)&&this._handler.onChannelsAdded(e,u),c.length>0&&(null===(a=this._handler)||void 0===a?void 0:a.onChannelsUpdated)&&this._handler.onChannelsUpdated(e,c),d.length>0&&(null===(r=this._handler)||void 0===r?void 0:r.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,d.map((function(e){return e.url}))),[2]}))}))}))},e.prototype._removeChannelsFromView=function(e,t){var n,a,r=this,s=[],o=function(e){var t=l.channels.findIndex((function(t){return t.url===e}));t>=0&&(s.push(l.channels[t].url),l.channels.splice(t,1))},l=this;try{for(var u=Object(_bundle_a5600e6c["ic" /* r */])(e),c=u.next();!c.done;c=u.next()){o(c.value)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return _bundle_863f90b8_rn(t)&&s.length>0&&Object(_bundle_a5600e6c["b" /* B */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){var e,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){return e=new Cs(t),(null===(n=this._handler)||void 0===n?void 0:n.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,s),[2]}))}))})),s},e.prototype._getLocalChannels=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){switch(n.label){case 0:return e=_bundle_863f90b8_ss.of(this._iid),t=this.channels.length>0?function(e,t){var n,a,r,i;switch(t){case _bundle_2a18997f_E.LATEST_LAST_MESSAGE:return null!==(a=null===(n=e.lastMessage)||void 0===n?void 0:n.createdAt)&&void 0!==a?a:e.createdAt;case _bundle_2a18997f_E.CHRONOLOGICAL:return e.createdAt;case _bundle_2a18997f_E.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(i=null===(r=e.lastMessage)||void 0===r?void 0:r.createdAt)&&void 0!==i?i:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,n.sent()]}}))}))},e.prototype._getRemoteChannels=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return[4,_bundle_863f90b8_ss.of(this._iid).getMyGroupChannels(this._token,Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this.filter),{order:this.order})),this._limit)];case 1:return e=a.sent(),t=e.channels,n=e.token,this._token=n,this._hasMore=!!n,[2,t]}}))}))},e.prototype._revokeLoadMore=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,_bundle_a5600e6c["x" /* X */].REQUEST_CHANNEL,!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},e.prototype.loadMore=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,a,r=this;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:if(this._isDisposed)throw new _bundle_a5600e6c["hc" /* q */]({code:_bundle_a5600e6c["tb" /* al */].COLLECTION_DISPOSED,message:"Collection has been disposed."});return this._hasMore?(e=_bundle_a5600e6c["v" /* V */].of(this._iid),t=e.cacheContext,n=e.connectionManager,a=[],!t.localCacheEnabled||n.isConnected&&!this._backgroundSync.completed?[3,2]:[4,Object(_bundle_a5600e6c["o" /* O */])((function(){return Object(_bundle_a5600e6c["Ib" /* b */])(r,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return a=e.sent(),[2]}}))}))}))]):[3,6];case 1:return o.sent(),this._hasMore=a.length>=this._limit,[3,5];case 2:return o.trys.push([2,4,,5]),[4,this._getRemoteChannels()];case 3:return a=o.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,5];case 4:return o.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,5];case 5:return this._addChannelsToView(a,_bundle_a5600e6c["x" /* X */].REQUEST_CHANNEL,!0),[2,a];case 6:return[2,[]]}}))}))},e.prototype.dispose=function(){var e,t;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(t=this._changelogSync)||void 0===t||t.close(),_bundle_863f90b8_ss.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),groupChannel_Qe=function(e){function t(t){var n=this,a=t.token,r=t.limit,i=t.order,s=t.includeEmpty,o=t.membershipFilter,l=t.channelNameContainsFilter,u=t.channelUrlsFilter,c=t.customTypesFilter,h=t.customTypeStartsWithFilter,d=t.superChannelFilter,p=t.metadataOrderKeyFilter,f=t.metadataKey,m=t.metadataValues,v=t.metadataValueStartsWith,_=t.includeFrozen,g=t.includeMetaData;return(n=e.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,n.path=_bundle_a5600e6c["xb" /* ap */],n.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({token:a,limit:r,order:i,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:s,public_mode:_bundle_863f90b8_Pt.PUBLIC,public_membership_mode:o,name_contains:l,channel_urls:u,custom_types:c,custom_type_startswith:h,super_mode:d,metadata_order_key:p,metadata_key:f,metadata_values:m,metadata_value_startswith:v,show_frozen:_,show_metadata:g})),n}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),groupChannel_je=function(e){function t(t,n){var a=e.call(this,t,n)||this;a.channels=[];var r=n.next,i=n.channels,s=n.ts;return a.token=r,i&&i.length>0&&(a.channels=i.map((function(e){return e.ts=s,new _bundle_863f90b8_dr(t,e)}))),a.ts="number"==typeof s?s:0,a}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]);!function(e){e.ALL="all",e.JOINED="joined"}(groupChannel_Ue||(groupChannel_Ue={}));var groupChannel_ze=function(e){function t(t,n){var a,r,i,s,o,l,u,c,h,d,p,f,m,v,_=this;return(_=e.call(this,t,n)||this).includeEmpty=!1,_.includeFrozen=!0,_.includeMetaData=!0,_.channelUrlsFilter=null,_.customTypesFilter=null,_.customTypeStartsWithFilter=null,_.channelNameContainsFilter=null,_.membershipFilter=groupChannel_Ue.ALL,_.superChannelFilter=_bundle_863f90b8_kt.ALL,_.metadataKey=null,_.metadataValues=null,_.metadataOrderKeyFilter=null,_.metadataValueStartsWith=null,_.order=_bundle_2a18997f_p.CHRONOLOGICAL,_.includeEmpty=null!==(a=n.includeEmpty)&&void 0!==a&&a,_.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,_.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,_.channelUrlsFilter=null!==(s=n.channelUrlsFilter)&&void 0!==s?s:null,_.customTypesFilter=null!==(o=n.customTypesFilter)&&void 0!==o?o:null,_.customTypeStartsWithFilter=null!==(l=n.customTypeStartsWithFilter)&&void 0!==l?l:null,_.channelNameContainsFilter=null!==(u=n.channelNameContainsFilter)&&void 0!==u?u:null,_.membershipFilter=null!==(c=n.membershipFilter)&&void 0!==c?c:groupChannel_Ue.ALL,_.superChannelFilter=null!==(h=n.superChannelFilter)&&void 0!==h?h:_bundle_863f90b8_kt.ALL,_.metadataKey=null!==(d=n.metadataKey)&&void 0!==d?d:null,_.metadataValues=null!==(p=n.metadataValues)&&void 0!==p?p:null,_.metadataOrderKeyFilter=null!==(f=n.metadataOrderKeyFilter)&&void 0!==f?f:null,_.metadataValueStartsWith=null!==(m=n.metadataValueStartsWith)&&void 0!==m?m:null,_.order=null!==(v=n.order)&&void 0!==v?v:_bundle_2a18997f_p.CHRONOLOGICAL,_}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeEmpty)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeFrozen)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.includeMetaData)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.channelNameContainsFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.channelUrlsFilter,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.customTypesFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.customTypeStartsWithFilter,!0)&&Object(_bundle_a5600e6c["q" /* Q */])(groupChannel_Ue,this.membershipFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_863f90b8_kt,this.superChannelFilter)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_2a18997f_p,this.order)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metadataOrderKeyFilter,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metadataKey,!0)&&Object(_bundle_a5600e6c["k" /* K */])("string",this.metadataValues,!0)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.metadataValueStartsWith,!0)},t.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,a,r,i,o,l;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=_bundle_a5600e6c["v" /* V */].of(this._iid),n=t.requestQueue,t.dispatcher,a=new groupChannel_Qe(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token}))),[4,n.send(a)]):[3,2]):[3,5];case 1:return r=u.sent(),i=r.as(groupChannel_je),o=i.channels,l=i.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,e];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_a5600e6c["P" /* aF */]),groupChannel_We=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserJoined=_bundle_a5600e6c["yb" /* aq */],t.onUserLeft=_bundle_a5600e6c["yb" /* aq */],t.onUserReceivedInvitation=_bundle_a5600e6c["yb" /* aq */],t.onUserDeclinedInvitation=_bundle_a5600e6c["yb" /* aq */],t.onChannelHidden=_bundle_a5600e6c["yb" /* aq */],t.onUnreadMemberStatusUpdated=_bundle_a5600e6c["yb" /* aq */],t.onUndeliveredMemberStatusUpdated=_bundle_a5600e6c["yb" /* aq */],t.onTypingStatusUpdated=_bundle_a5600e6c["yb" /* aq */],t.onPollUpdated=_bundle_a5600e6c["yb" /* aq */],t.onPollVoted=_bundle_a5600e6c["yb" /* aq */],t.onPollDeleted=_bundle_a5600e6c["yb" /* aq */],t.onPinnedMessageUpdated=_bundle_a5600e6c["yb" /* aq */],t}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_dd1faecb_S)),groupChannel_Be=function(e){function t(t){var n=this,a=t.token,r=t.limit,i=t.order,s=t.reverse,o=t.channelUrl,l=t.messageTypeFilter,u=t.scheduledStatus;return(n=e.call(this)||this).method=_bundle_a5600e6c["a" /* A */].GET,n.path="".concat(_bundle_a5600e6c["hb" /* aZ */]),n.params=Object(_bundle_a5600e6c["Vb" /* e */])(Object(_bundle_a5600e6c["lc" /* u */])({token:a,limit:r,reverse:s,channel_url:o,order:i,message_type:l,status:u})),n}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Wb" /* f */]),groupChannel_qe=function(e){function t(t,n){var a=e.call(this,t,n)||this;a.scheduledMessages=[];var r=n.next,i=n.scheduled_messages;return a.token=r,a.scheduledMessages=i.map((function(e){return _bundle_1edafb8c_He(t,e)})),a}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t}(_bundle_a5600e6c["Yb" /* h */]),groupChannel_Ye=function(e){function t(t,n){var a,r,i,s,o,l=this;return(l=e.call(this,t,n)||this).channelUrl=null,l.order=null,l.reverse=!1,l.scheduledStatus=null,l.messageTypeFilter=_bundle_a5600e6c["nb" /* af */].ALL,l.channelUrl=null!==(a=n.channelUrl)&&void 0!==a?a:null,l.order=null!==(r=n.order)&&void 0!==r?r:null,l.reverse=null!==(i=n.reverse)&&void 0!==i&&i,l.scheduledStatus=null!==(s=n.scheduledStatus)&&void 0!==s?s:null,l.messageTypeFilter=null!==(o=n.messageTypeFilter)&&void 0!==o?o:_bundle_a5600e6c["nb" /* af */].ALL,l}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&Object(_bundle_a5600e6c["B" /* a */])("string",this.channelUrl,!0)&&(Object(_bundle_a5600e6c["q" /* Q */])(_bundle_2a18997f_C,this.order)||null===this.order)&&Object(_bundle_a5600e6c["B" /* a */])("boolean",this.reverse)&&(Object(_bundle_a5600e6c["k" /* K */])(_bundle_1edafb8c_Se,this.scheduledStatus)||null===this.scheduledStatus)&&Object(_bundle_a5600e6c["q" /* Q */])(_bundle_a5600e6c["nb" /* af */],this.messageTypeFilter)},t.prototype.next=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var e,t,n,a,r,i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=_bundle_a5600e6c["v" /* V */].of(this._iid).requestQueue,t=new groupChannel_Be(Object(_bundle_a5600e6c["lc" /* u */])(Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},this),{token:this._token}))),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),a=n.as(groupChannel_qe),r=a.scheduledMessages,i=a.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw _bundle_a5600e6c["hc" /* q */].queryInProgress;case 4:return[3,6];case 5:throw _bundle_a5600e6c["hc" /* q */].invalidParameters;case 6:return[2]}}))}))},t}(_bundle_a5600e6c["P" /* aF */]),groupChannel_Xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return Object(_bundle_a5600e6c["A" /* _ */])(t,e),t.prototype.init=function(t,n){var a=n.sdkState,r=n.dispatcher,i=n.sessionManager,s=n.requestQueue,o=n.logger,l=n.onlineDetector,u=n.cacheContext;e.prototype.init.call(this,t,{sdkState:a,dispatcher:r,sessionManager:i,requestQueue:s,logger:o,onlineDetector:l,cacheContext:u}),this._manager=new _bundle_863f90b8_ss(t,{sdkState:a,cacheContext:u,dispatcher:r,sessionManager:i,requestQueue:s,logger:o})},t.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new groupChannel_Ke(this._iid,e)},t.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new _bundle_863f90b8_Kn(this._iid,e)},t.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new groupChannel_ze(this._iid,e)},t.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new groupChannel_Ye(this._iid,e)},t.prototype.addGroupChannelHandler=function(e,t){Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&t instanceof groupChannel_We).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this._manager.addHandler(e,t)},t.prototype.removeGroupChannelHandler=function(e){Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this._manager.removeHandler(e)},t.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},t.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},t.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},t.prototype.getChannel=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.getMyGroupChannelChangeLogsByToken=function(e,t){return void 0===t&&(t={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Kt),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)&&_bundle_863f90b8_Jt(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,a.sent()]}}))}))},t.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,t){return void 0===t&&(t={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var n;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(a){switch(a.label){case 0:return n=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Kt),t),Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("number",e)&&_bundle_863f90b8_Jt(n)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,n)];case 1:return[2,a.sent()]}}))}))},t.prototype.getGroupChannelCount=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Zt),e),Object(_bundle_a5600e6c["jc" /* s */])(_bundle_863f90b8_Xt(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.getGroupChannelCount(t)]}))}))},t.prototype.getUnreadItemCount=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalUnreadChannelCount=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},t.prototype.getTotalUnreadMessageCount=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},t.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},t.prototype.createChannel=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Qt),e),Object(_bundle_a5600e6c["jc" /* s */])(_bundle_863f90b8_Yt(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[2,this._manager.createChannel(t)]}))}))},t.prototype.createDistinctChannelIfNotExist=function(e){return void 0===e&&(e={}),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var t;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(n){return t=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Qt),e),Object(_bundle_a5600e6c["jc" /* s */])(_bundle_863f90b8_Yt(t)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),t&&(t.isDistinct=!0),[2,this.createChannel(t)]}))}))},t.prototype.createChannelWithUserIds=function(e,t,n,a,r,s){return void 0===t&&(t=!1),void 0===r&&(r=""),void 0===s&&(s=""),Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){var i;return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(o){return i=Object(_bundle_a5600e6c["Xb" /* g */])(Object(_bundle_a5600e6c["Xb" /* g */])({},_bundle_863f90b8_Qt),{invitedUserIds:e,isDistinct:t,name:n,data:r,customType:s}),"string"==typeof a?i.coverUrl=a:i.coverImage=a,[2,this.createChannel(i)]}))}))},t.prototype.markAsReadAll=function(){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},t.prototype.markAsReadWithChannelUrls=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["k" /* K */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},t.prototype.markAsDelivered=function(e){return Object(_bundle_a5600e6c["Ib" /* b */])(this,void 0,void 0,(function(){return Object(_bundle_a5600e6c["Tb" /* c */])(this,(function(t){switch(t.label){case 0:return Object(_bundle_a5600e6c["jc" /* s */])(Object(_bundle_a5600e6c["B" /* a */])("string",e)).throw(_bundle_a5600e6c["hc" /* q */].invalidParameters),[4,this.getChannel(e)];case 1:return[4,t.sent().markAsDelivered()];case 2:return t.sent(),[2]}}))}))},t}(_bundle_a5600e6c["X" /* aN */]);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils/message/getOutgoingMessageState.js
let OutgoingMessageStates = /*#__PURE__*/function (OutgoingMessageStates) {
  OutgoingMessageStates["NONE"] = "NONE";
  OutgoingMessageStates["PENDING"] = "PENDING";
  OutgoingMessageStates["SENT"] = "SENT";
  OutgoingMessageStates["FAILED"] = "FAILED";
  OutgoingMessageStates["DELIVERED"] = "DELIVERED";
  OutgoingMessageStates["READ"] = "READ";
  return OutgoingMessageStates;
}({});
const getOutgoingMessageState = (channel, message) => {
  var _channel$isGroupChann;
  if (message.sendingStatus === 'pending') {
    return OutgoingMessageStates.PENDING;
  }
  if (message.sendingStatus === 'failed') {
    return OutgoingMessageStates.FAILED;
  }
  if (channel !== null && channel !== void 0 && (_channel$isGroupChann = channel.isGroupChannel) !== null && _channel$isGroupChann !== void 0 && _channel$isGroupChann.call(channel)) {
    var _getUnreadMemberCount, _ref, _getUndeliveredMember, _ref2;
    /* GroupChannel only */
    if (((_getUnreadMemberCount = (_ref = channel).getUnreadMemberCount) === null || _getUnreadMemberCount === void 0 ? void 0 : _getUnreadMemberCount.call(_ref, message)) === 0) {
      return OutgoingMessageStates.READ;
    } else if (((_getUndeliveredMember = (_ref2 = channel).getUndeliveredMemberCount) === null || _getUndeliveredMember === void 0 ? void 0 : _getUndeliveredMember.call(_ref2, message)) === 0) {
      return OutgoingMessageStates.DELIVERED;
    }
  }
  if (message.sendingStatus === 'succeeded') {
    return OutgoingMessageStates.SENT;
  }
  return OutgoingMessageStates.NONE;
};


//# sourceMappingURL=getOutgoingMessageState.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-39eeabbb.js



// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types
const SUPPORTED_MIMES = {
  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/svg+xml', 'image/webp' // not supported in IE
  ],

  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4'],
  AUDIO: ['audio/aac', 'audio/midi', 'audio/x-midi', 'audio/mpeg', 'audio/ogg', 'audio/opus', 'audio/wav', 'audio/webm', 'audio/3gpp', 'audio/3gpp2', 'audio/mp3']
};

/* eslint-disable no-redeclare */

const UIKitMessageTypes = {
  ADMIN: 'ADMIN',
  TEXT: 'TEXT',
  FILE: 'FILE',
  MULTIPLE_FILES: 'MULTIPLE_FILES',
  THUMBNAIL: 'THUMBNAIL',
  OG: 'OG',
  UNKNOWN: 'UNKNOWN'
};
/* eslint-disable no-redeclare */

const UIKitFileTypes = {
  IMAGE: 'IMAGE',
  AUDIO: 'AUDIO',
  VIDEO: 'VIDEO',
  GIF: 'GIF',
  VOICE: 'VOICE',
  OTHERS: 'OTHERS'
};

/* eslint-disable no-redeclare */

const SendingMessageStatus = {
  NONE: 'none',
  SUCCEEDED: 'succeeded',
  FAILED: 'failed',
  PENDING: 'pending'
};
const isTextuallyNull = text => {
  if (text === '' || text === null) {
    return true;
  }
  return false;
};
const isImage = type => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;
const isVideo = type => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;
const isGif = type => type === 'image/gif';
const isSupportedFileView = type => isImage(type) || isVideo(type);
const isAudio = type => SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;
const getUIKitFileTypes = () => _objectSpread2({}, UIKitFileTypes);
const getUIKitFileType = type => {
  if (isGif(type)) return UIKitFileTypes.GIF;
  if (isImage(type)) return UIKitFileTypes.IMAGE;
  if (isVideo(type)) return UIKitFileTypes.VIDEO;
  if (isAudio(type)) return UIKitFileTypes.AUDIO;
  return UIKitFileTypes.OTHERS;
};
const isSentMessage = message => message.sendingStatus === 'succeeded';
const isReadMessage = (channel, message) => getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;
// TODO: Remove channel from the params, it seems unnecessary
const isFailedMessage = message => (message === null || message === void 0 ? void 0 : message.sendingStatus) === 'failed';
const isPendingMessage = message => (message === null || message === void 0 ? void 0 : message.sendingStatus) === 'pending';
const isSentStatus = state => state === OutgoingMessageStates.SENT || state === OutgoingMessageStates.DELIVERED || state === OutgoingMessageStates.READ;
const isAdminMessage = message => message && (message['isAdminMessage'] && typeof message.isAdminMessage === 'function' ? message.isAdminMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === 'admin');
const isUserMessage = message => message && (message['isUserMessage'] && typeof message.isUserMessage === 'function' ? message.isUserMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === 'user');
const isFileMessage = message => message && (message['isFileMessage'] && typeof message.isFileMessage === 'function' ? message.isFileMessage() : (message === null || message === void 0 ? void 0 : message.messageType) === 'file');
const isThreadMessage = message => !!message.parentMessageId && !!message.parentMessage;
const isOGMessage = message => {
  var _message$ogMetaData, _message$ogMetaData2, _message$ogMetaData3, _message$ogMetaData4;
  return !!(message && isUserMessage(message) && message !== null && message !== void 0 && message.ogMetaData && ((_message$ogMetaData = message.ogMetaData) !== null && _message$ogMetaData !== void 0 && _message$ogMetaData.url || (_message$ogMetaData2 = message.ogMetaData) !== null && _message$ogMetaData2 !== void 0 && _message$ogMetaData2.title || (_message$ogMetaData3 = message.ogMetaData) !== null && _message$ogMetaData3 !== void 0 && _message$ogMetaData3.description || (_message$ogMetaData4 = message.ogMetaData) !== null && _message$ogMetaData4 !== void 0 && _message$ogMetaData4.defaultImage));
};
const isTextMessage = message => isUserMessage(message);
const isThumbnailMessage = message => message && isFileMessage(message) && isSupportedFileView(message.type);
const isImageMessage = message => message && isThumbnailMessage(message) && isImage(message.type);
const isVideoMessage = message => message && isThumbnailMessage(message) && isVideo(message.type);
const isGifMessage = message => message && isThumbnailMessage(message) && isGif(message.type);
const isAudioMessage = message => message && isFileMessage(message) && isAudio(message.type);
const isAudioMessageMimeType = type => /^audio\//.test(type);
const isVoiceMessageMimeType = type => /^voice\//.test(type);
const isVoiceMessage = message => {
  var _message$metaArrays$f, _message$metaArrays, _message$metaArrays$f2, _message$metaArrays$f3;
  // ex) audio/m4a OR audio/m4a;sbu_type=voice
  if (!(message && isFileMessage(message)) || !message.type) {
    return false;
  }
  const [mimeType, typeParameter] = message.type.split(';');
  if (!isAudioMessageMimeType(mimeType)) {
    return false;
  }
  if (typeParameter) {
    const [key, value] = typeParameter.split('=');
    return key === 'sbu_type' && value === 'voice';
  }
  // ex) message.metaArrays = [{ key: 'KEY_INTERNAL_MESSAGE_TYPE', value: ['voice/m4a'] }]
  return isVoiceMessageMimeType((_message$metaArrays$f = message === null || message === void 0 ? void 0 : (_message$metaArrays = message.metaArrays) === null || _message$metaArrays === void 0 ? void 0 : (_message$metaArrays$f2 = _message$metaArrays.find(metaArray => metaArray.key === 'KEY_INTERNAL_MESSAGE_TYPE')) === null || _message$metaArrays$f2 === void 0 ? void 0 : (_message$metaArrays$f3 = _message$metaArrays$f2.value) === null || _message$metaArrays$f3 === void 0 ? void 0 : _message$metaArrays$f3[0]) !== null && _message$metaArrays$f !== void 0 ? _message$metaArrays$f : '');
};
const isEditedMessage = message => isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.updatedAt) > 0;
const getUIKitMessageTypes = () => _objectSpread2({}, UIKitMessageTypes);
const getUIKitMessageType = message => {
  if (isAdminMessage(message)) return UIKitMessageTypes.ADMIN;
  if (isUserMessage(message)) {
    return isOGMessage(message) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;
  }
  if (isFileMessage(message)) {
    if (isThumbnailMessage(message)) {
      return UIKitMessageTypes.THUMBNAIL;
    }
    if (isVoiceMessage(message)) {
      return UIKitFileTypes.VOICE;
    }
    return UIKitMessageTypes.FILE;
  }
  return UIKitMessageTypes.UNKNOWN;
};
const getSendingMessageStatus = () => _objectSpread2({}, SendingMessageStatus);
const reducer = (accumulator, currentValue) => {
  if (Array.isArray(currentValue)) {
    return [...accumulator, ...currentValue];
  } else {
    accumulator.push(currentValue);
    return accumulator;
  }
};
const getClassName = classNames => Array.isArray(classNames) ? classNames.reduce(reducer, []).join(' ') : classNames;
const isReactedBy = (userId, reaction) => reaction.userIds.some(reactorUserId => reactorUserId === userId);
const getEmojiTooltipString = (reaction, userId, memberNicknamesMap, stringSet) => {
  let you = '';
  if (isReactedBy(userId, reaction)) {
    you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;
  }
  return `${reaction.userIds.filter(reactorUserId => reactorUserId !== userId).map(reactorUserId => memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER).join(', ')}${you}`;
};
const URL_REG = /^((http|https):\/\/)?([a-z\d]+\.)+[a-z]{2,6}(\:[0-9]{1,5})?(\/[-a-zA-Z\d%_.~+&=]*)*(\?[;&a-zA-Z\d%_.~+=-]*)?(\#[-a-zA-Z\d_]*)?$/;
const isUrl = text => URL_REG.test(text);
const truncateString = (fullStr, strLen) => {
  if (!strLen) strLen = 40;
  if (fullStr === null || fullStr === undefined) return '';
  if (fullStr.length <= strLen) return fullStr;
  const separator = '...';
  const sepLen = separator.length;
  const charsToShow = strLen - sepLen;
  const frontChars = Math.ceil(charsToShow / 2);
  const backChars = Math.floor(charsToShow / 2);
  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
};
const index_39eeabbb_copyToClipboard = text => {
  // @ts-ignore: Unreachable code error
  if (window.clipboardData && window.clipboardData.setData) {
    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
    // @ts-ignore: Unreachable code error
    return window.clipboardData.setData('Text', text);
  }
  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
    const textarea = document.createElement('textarea');
    textarea.textContent = text;
    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.
    document.body.appendChild(textarea);
    textarea.select();
    try {
      return document.execCommand('copy'); // Security exception may be thrown by some browsers.
    } catch (ex) {
      return false;
    } finally {
      document.body.removeChild(textarea);
    }
  }
  return false;
};
const getEmojiListAll = emojiContainer => {
  var _emojiContainer$emoji;
  return emojiContainer === null || emojiContainer === void 0 ? void 0 : (_emojiContainer$emoji = emojiContainer.emojiCategories) === null || _emojiContainer$emoji === void 0 ? void 0 : _emojiContainer$emoji.map(emojiCategory => emojiCategory.emojis).reduce((prevArr, currArr) => prevArr.concat(currArr), []);
};
const getEmojiMapAll = emojiContainer => {
  var _emojiContainer$emoji2;
  const emojiMap = new Map();
  emojiContainer === null || emojiContainer === void 0 ? void 0 : (_emojiContainer$emoji2 = emojiContainer.emojiCategories) === null || _emojiContainer$emoji2 === void 0 ? void 0 : _emojiContainer$emoji2.forEach(category => {
    var _category$emojis;
    category === null || category === void 0 ? void 0 : (_category$emojis = category.emojis) === null || _category$emojis === void 0 ? void 0 : _category$emojis.forEach(emoji => {
      if (emoji && emoji.key) {
        emojiMap.set(emoji.key, emoji);
      }
    });
  });
  return emojiMap;
};
const findEmojiUrl = targetKey => _ref => {
  let {
    key
  } = _ref;
  return key === targetKey;
};
const getEmojiUrl = (emojiContainer, emojiKey) => {
  var _emojiContainer$emoji3, _emojiContainer$emoji4;
  const isFindingKey = findEmojiUrl(emojiKey !== null && emojiKey !== void 0 ? emojiKey : '');
  return (emojiContainer === null || emojiContainer === void 0 ? void 0 : (_emojiContainer$emoji3 = emojiContainer.emojiCategories.find(category => category.emojis.some(isFindingKey))) === null || _emojiContainer$emoji3 === void 0 ? void 0 : (_emojiContainer$emoji4 = _emojiContainer$emoji3.emojis.find(isFindingKey)) === null || _emojiContainer$emoji4 === void 0 ? void 0 : _emojiContainer$emoji4.url) || '';
};
const getUserName = user => (user === null || user === void 0 ? void 0 : user.friendName) || (user === null || user === void 0 ? void 0 : user.nickname) || (user === null || user === void 0 ? void 0 : user.userId);
const getSenderName = message => (message === null || message === void 0 ? void 0 : message.sender) && getUserName(message === null || message === void 0 ? void 0 : message.sender);
const hasSameMembers = (a, b) => {
  if (a === b) {
    return true;
  }
  if (a == null || b == null) {
    return false;
  }
  if (a.length !== b.length) {
    return false;
  }
  const sortedA = [...a].sort();
  const sortedB = [...b].sort();
  for (let i = 0; i < sortedA.length; ++i) {
    if (sortedA[i] !== sortedB[i]) {
      return false;
    }
  }
  return true;
};
const isFriend = user => {
  if (!user) return false;
  return !!(user.friendDiscoveryKey || user.friendName);
};
const filterMessageListParams = (params, message) => {
  var _params$senderUserIds;
  const {
    customTypesFilter = []
  } = params;
  // @ts-ignore
  if (params !== null && params !== void 0 && params.messageTypeFilter && params.messageTypeFilter !== message.messageType) {
    return false;
  }
  if ((customTypesFilter === null || customTypesFilter === void 0 ? void 0 : customTypesFilter.length) > 0) {
    const customTypes = customTypesFilter.filter(item => item !== '*');
    // Because Chat SDK inserts '*' when customTypes is empty
    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {
      return false;
    }
  }
  if (params !== null && params !== void 0 && params.senderUserIdsFilter && (params === null || params === void 0 ? void 0 : (_params$senderUserIds = params.senderUserIdsFilter) === null || _params$senderUserIds === void 0 ? void 0 : _params$senderUserIds.length) > 0) {
    var _message$isUserMessag, _message$isFileMessag;
    if (message !== null && message !== void 0 && (_message$isUserMessag = message.isUserMessage) !== null && _message$isUserMessag !== void 0 && _message$isUserMessag.call(message) || message !== null && message !== void 0 && (_message$isFileMessag = message.isFileMessage) !== null && _message$isFileMessag !== void 0 && _message$isFileMessag.call(message)) {
      var _params$senderUserIds2;
      const messageSender = message.sender || message['_sender'];
      if (!(params !== null && params !== void 0 && (_params$senderUserIds2 = params.senderUserIdsFilter) !== null && _params$senderUserIds2 !== void 0 && _params$senderUserIds2.includes(messageSender === null || messageSender === void 0 ? void 0 : messageSender.userId))) {
        return false;
      }
    } else {
      return false;
    }
  }
  if (!(params !== null && params !== void 0 && params.includeParentMessageInfo) && (message !== null && message !== void 0 && message.parentMessageId || message !== null && message !== void 0 && message.parentMessage)) {
    return false;
  }
  return true;
};
const filterChannelListParams = (params, channel, currentUserId) => {
  var _searchFilter$fields$, _searchFilter$fields, _userIdsFilter$userId, _channel$name2;
  const {
    includeEmpty,
    includeFrozen,
    searchFilter,
    userIdsFilter,
    customTypesFilter,
    channelUrlsFilter,
    customTypeStartsWithFilter,
    channelNameContainsFilter,
    nicknameContainsFilter,
    myMemberStateFilter,
    hiddenChannelFilter,
    unreadChannelFilter,
    publicChannelFilter,
    superChannelFilter,
    metadataKey = '',
    metadataValues = ['a', 'b'],
    metadataValueStartsWith
  } = params;
  if (!includeEmpty && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {
    return false;
  }
  if (searchFilter !== null && searchFilter !== void 0 && searchFilter.query && ((_searchFilter$fields$ = searchFilter === null || searchFilter === void 0 ? void 0 : (_searchFilter$fields = searchFilter.fields) === null || _searchFilter$fields === void 0 ? void 0 : _searchFilter$fields.length) !== null && _searchFilter$fields$ !== void 0 ? _searchFilter$fields$ : 0) > 0) {
    const searchQuery = searchFilter.query;
    const searchFields = searchFilter.fields;
    if (searchQuery && searchFields && searchFields.length > 0) {
      if (!searchFields.some(searchField => {
        switch (searchField) {
          case 'channel_name':
            {
              var _channel$name;
              return channel === null || channel === void 0 ? void 0 : (_channel$name = channel.name) === null || _channel$name === void 0 ? void 0 : _channel$name.toLowerCase().includes(searchQuery.toLowerCase());
            }
          case 'member_nickname':
            {
              var _channel$members;
              return channel === null || channel === void 0 ? void 0 : (_channel$members = channel.members) === null || _channel$members === void 0 ? void 0 : _channel$members.some(member => member.nickname.toLowerCase().includes(searchQuery.toLowerCase()));
            }
          default:
            {
              return true;
            }
        }
      })) {
        return false;
      }
    }
  }
  if ((userIdsFilter === null || userIdsFilter === void 0 ? void 0 : (_userIdsFilter$userId = userIdsFilter.userIds) === null || _userIdsFilter$userId === void 0 ? void 0 : _userIdsFilter$userId.length) > 0) {
    var _channel$members2;
    const {
      includeMode,
      queryType
    } = userIdsFilter;
    const userIds = userIdsFilter.userIds;
    const memberIds = channel === null || channel === void 0 ? void 0 : (_channel$members2 = channel.members) === null || _channel$members2 === void 0 ? void 0 : _channel$members2.map(member => member.userId);
    if (!includeMode) {
      var _channel$members3;
      // exact match
      if (!userIds.includes(currentUserId)) {
        userIds.push(currentUserId); // add the caller's userId if not added already.
      }

      if ((channel === null || channel === void 0 ? void 0 : (_channel$members3 = channel.members) === null || _channel$members3 === void 0 ? void 0 : _channel$members3.length) > userIds.length) {
        return false; // userIds may contain one or more non-member(s).
      }

      if (!hasSameMembers(userIds, memberIds)) {
        return false;
      }
    } else if (userIds.length > 0) {
      // inclusive
      switch (queryType) {
        case 'AND':
          {
            if (userIds.some(userId => !memberIds.includes(userId))) {
              return false;
            }
            break;
          }
        case 'OR':
          {
            if (userIds.every(userId => !memberIds.includes(userId))) {
              return false;
            }
            break;
          }
      }
    }
  }
  if (includeEmpty === false && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {
    return false;
  }
  if (includeFrozen === false && (channel === null || channel === void 0 ? void 0 : channel.isFrozen) === true) {
    return false;
  }
  if (customTypesFilter && !customTypesFilter.includes(channel === null || channel === void 0 ? void 0 : channel.customType)) {
    return false;
  }
  if (customTypeStartsWithFilter && !new RegExp(`^${customTypeStartsWithFilter}`).test(channel === null || channel === void 0 ? void 0 : channel.customType)) {
    return false;
  }
  if (channelNameContainsFilter && !(channel !== null && channel !== void 0 && (_channel$name2 = channel.name) !== null && _channel$name2 !== void 0 && _channel$name2.toLowerCase().includes(channelNameContainsFilter.toLowerCase()))) {
    return false;
  }
  if (nicknameContainsFilter) {
    var _channel$members4;
    const lowerCasedSubString = nicknameContainsFilter.toLowerCase();
    if (channel !== null && channel !== void 0 && (_channel$members4 = channel.members) !== null && _channel$members4 !== void 0 && _channel$members4.every(member => !member.nickname.toLowerCase().includes(lowerCasedSubString))) {
      return false;
    }
  }
  if (channelUrlsFilter && !channelUrlsFilter.includes(channel === null || channel === void 0 ? void 0 : channel.url)) {
    return false;
  }
  if (myMemberStateFilter) {
    switch (myMemberStateFilter) {
      case 'joined_only':
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'joined') {
          return false;
        }
        break;
      case 'invited_only':
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited') {
          return false;
        }
        break;
      case 'invited_by_friend':
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || !isFriend(channel === null || channel === void 0 ? void 0 : channel.inviter)) {
          return false;
        }
        break;
      case 'invited_by_non_friend':
        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || isFriend(channel === null || channel === void 0 ? void 0 : channel.inviter)) {
          return false;
        }
        break;
    }
  }
  if (hiddenChannelFilter) {
    switch (hiddenChannelFilter) {
      case 'unhidden_only':
        if (channel !== null && channel !== void 0 && channel.isHidden || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'unhidden') {
          return false;
        }
        break;
      case 'hidden_only':
        if (!(channel !== null && channel !== void 0 && channel.isHidden)) {
          return false;
        }
        break;
      case 'hidden_allow_auto_unhide':
        if (!(channel !== null && channel !== void 0 && channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_allow_auto_unhide') {
          return false;
        }
        break;
      case 'hidden_prevent_auto_unhide':
        if (!(channel !== null && channel !== void 0 && channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_prevent_auto_unhide') {
          return false;
        }
        break;
    }
  }
  if (unreadChannelFilter) {
    switch (unreadChannelFilter) {
      case 'unread_message':
        if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) === 0) {
          return false;
        }
        break;
    }
  }
  if (publicChannelFilter) {
    switch (publicChannelFilter) {
      case 'public':
        if (!(channel !== null && channel !== void 0 && channel.isPublic)) {
          return false;
        }
        break;
      case 'private':
        if (channel !== null && channel !== void 0 && channel.isPublic) {
          return false;
        }
        break;
    }
  }
  if (superChannelFilter) {
    switch (superChannelFilter) {
      case 'super':
        if (!(channel !== null && channel !== void 0 && channel.isSuper)) {
          return false;
        }
        break;
      case 'nonsuper':
        if (channel !== null && channel !== void 0 && channel.isSuper) {
          return false;
        }
        break;
    }
  }
  const {
    cachedMetaData = {}
  } = channel;
  if (metadataKey && (metadataValues || metadataValueStartsWith)) {
    const metadataValue = cachedMetaData[metadataKey];
    if (!metadataValue) {
      return false;
    }
    if (metadataValues && !metadataValues.every(value => metadataValue.includes(value))) {
      return false;
    }
    if (metadataValueStartsWith && !metadataValue.startsWith(metadataValueStartsWith)) {
      return false;
    }
  }
  return true;
};
const binarySearch = (list, number) => {
  // [100, 99, 98, 97, ...]
  const pivot = Math.floor(list.length / 2);
  if (list[pivot] === number) {
    return pivot;
  }
  const leftList = list.slice(0, pivot);
  const rightList = list.slice(pivot + 1, list.length);
  if (list[pivot] > number) {
    return pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number));
  } else {
    return leftList.length === 0 ? pivot : binarySearch(leftList, number);
  }
};
// This is required when channel is displayed on channel list by filter
const getChannelsWithUpsertedChannel = (channels, channel) => {
  var _channel$lastMessage2;
  if (channels.some(ch => ch.url === (channel === null || channel === void 0 ? void 0 : channel.url))) {
    return channels.map(ch => ch.url === (channel === null || channel === void 0 ? void 0 : channel.url) ? channel : ch);
  }
  const targetIndex = binarySearch(channels.map(channel => {
    var _channel$lastMessage;
    return (channel === null || channel === void 0 ? void 0 : (_channel$lastMessage = channel.lastMessage) === null || _channel$lastMessage === void 0 ? void 0 : _channel$lastMessage.createdAt) || (channel === null || channel === void 0 ? void 0 : channel.createdAt);
  }), (channel === null || channel === void 0 ? void 0 : (_channel$lastMessage2 = channel.lastMessage) === null || _channel$lastMessage2 === void 0 ? void 0 : _channel$lastMessage2.createdAt) || (channel === null || channel === void 0 ? void 0 : channel.createdAt));
  return [...channels.slice(0, targetIndex), channel, ...channels.slice(targetIndex, channels.length)];
};
let StringObjType = /*#__PURE__*/function (StringObjType) {
  StringObjType["normal"] = "normal";
  StringObjType["mention"] = "mention";
  StringObjType["url"] = "url";
  return StringObjType;
}({});
/**
 * @deprecated
 * use modules/message/utils/tokenize instead
 */
const convertWordToStringObj = (word, _users, _template) => {
  const users = _users || [];
  const template = _template || '@'; // Use global variable
  const resultArray = [];
  const regex = RegExp(`${template}{(${users.map(user => user === null || user === void 0 ? void 0 : user.userId).join('|')})}`, 'g');
  let excutionResult;
  let lastIndex = 0;
  while ((excutionResult = regex.exec(word)) !== null) {
    const [template, userId] = excutionResult;
    const endIndex = regex.lastIndex;
    const startIndex = endIndex - template.length;
    // Normal text
    const normalText = word.slice(lastIndex, startIndex);
    resultArray.push({
      type: isUrl(normalText) ? StringObjType.url : StringObjType.normal,
      value: normalText
    });
    // Mention template
    const mentionedUser = users.find(user => (user === null || user === void 0 ? void 0 : user.userId) === userId);
    if (!mentionedUser) {
      resultArray.push({
        type: StringObjType.normal,
        value: template // because template is the origin text
      });
    } else {
      resultArray.push({
        type: StringObjType.mention,
        value: (mentionedUser === null || mentionedUser === void 0 ? void 0 : mentionedUser.nickname) || '(No name)',
        userId: userId
      });
    }
    lastIndex = endIndex;
  }
  if (lastIndex < word.length) {
    // Normal text
    const normalText = word.slice(lastIndex);
    resultArray.push({
      type: isUrl(normalText) ? StringObjType.url : StringObjType.normal,
      value: normalText
    });
  }
  return resultArray;
};
const arrayEqual = (array1, array2) => {
  if (Array.isArray(array1) && Array.isArray(array2) && array1.length === array2.length) {
    for (let i = 0; i < array1.length; i++) {
      if (array1[i] !== array2[i]) {
        return false;
      }
    }
    return true;
  }
  return false;
};


//# sourceMappingURL=index-39eeabbb.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/constants/applicationAttributes.js
const applicationAttributes = {
    reactions: 'reactions',
    message_search_v3: 'message_search_v3',
    enable_og_tag: 'enable_og_tag',
    enable_message_threading: 'enable_message_threading',
    allow_broadcast_channel: 'allow_broadcast_channel',
    allow_super_group_channel: 'allow_super_group_channel',
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/constants/index.js


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/hooks/usePreservedCallback.js

/**
 * Preserves a reference to the given callback function as an argument while the component is mounted.
 * Wraps the given callback in React's Ref to preserve the reference.
 * @param callback want to be preserved
 */
function usePreservedCallback(callback) {
    const callbackRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(callback);
    Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
        callbackRef.current = callback;
    });
    return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((...args) => callbackRef.current(...args), [callbackRef]);
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/hooks/index.js


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/utils/snakeToCamel.js
function snakeToCamel(obj) {
    if (typeof obj !== 'object' || obj === null) {
        return obj;
    }
    if (Array.isArray(obj)) {
        return obj.map((item) => snakeToCamel(item));
    }
    const result = {};
    Object.keys(obj).forEach((key) => {
        const camelKey = key.replace(/_\w/g, (m) => m[1].toUpperCase());
        // @ts-ignore
        result[camelKey] = snakeToCamel(obj[key]);
    });
    return result;
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/initialConfig.js
const initialConfig = {
    common: {
        enableUsingDefaultUserProfile: false,
    },
    groupChannel: {
        channel: {
            enableMention: false,
            enableOgtag: true,
            enableReactions: true,
            enableTypingIndicator: true,
            enableVoiceMessage: false,
            input: {
                camera: {
                    enablePhoto: true,
                    enableVideo: true,
                },
                enableDocument: true,
                gallery: {
                    enablePhoto: true,
                    enableVideo: true,
                },
            },
            replyType: 'quote_reply',
            threadReplySelectType: 'thread',
        },
        channelList: {
            enableMessageReceiptStatus: false,
            enableTypingIndicator: false,
        },
        setting: {
            enableMessageSearch: false,
        },
    },
    openChannel: {
        channel: {
            enableOgtag: true,
            input: {
                camera: {
                    enablePhoto: true,
                    enableVideo: true,
                },
                enableDocument: true,
                gallery: {
                    enablePhoto: true,
                    enableVideo: true,
                },
            },
        },
    },
};

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/utils/isSameType.js
function isSameType(a, b) {
    // we do this cause typeof can't differenciate object/ array/ null
    return Object.prototype.toString.call(a) === Object.prototype.toString.call(b);
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/utils.js

/**
 * @param localConfigs Set directly in code level. It has higher priority than remote ones
 * @param remoteConfigs Set by Feature Config setting in Dashboard
 * @returns
 */
function getConfigsByPriority(localConfigs, remoteConfigs) {
    // copy remoteConfigs to prevent mutation
    const prioritizedConfigs = Object.assign({}, remoteConfigs);
    Object.keys(localConfigs).forEach((key) => {
        if (Object.prototype.hasOwnProperty.call(prioritizedConfigs, key) &&
            isSameType(localConfigs[key], prioritizedConfigs[key])) {
            if (typeof localConfigs[key] === 'object') {
                // Recursively call getConfigsByPriority only when the value of the key is Object
                prioritizedConfigs[key] = getConfigsByPriority(localConfigs[key], prioritizedConfigs[key]);
            }
            else {
                prioritizedConfigs[key] = localConfigs[key];
            }
        }
    });
    return prioritizedConfigs;
}
/**
 * @param json UIKitConfiguration's json
 * @returns boolean
 * */
function isRawSBUConfigPayload(json) {
    return typeof json === 'object' && 'configuration' in json && 'updated_at' in json;
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/configManager.js
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


const MemoryStorage = {
    items: {},
    getItem(key) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            return (_a = MemoryStorage.items[key]) !== null && _a !== void 0 ? _a : null;
        });
    },
    setItem(key, value) {
        return __awaiter(this, void 0, void 0, function* () {
            MemoryStorage.items[key] = value;
        });
    },
};
class configManager_UIKitConfigManager {
    constructor(storage) {
        this.storage = storage !== null && storage !== void 0 ? storage : MemoryStorage;
    }
    init(appId) {
        this.key = `sbu@${appId}.uikitConfiguration`;
        return this.get();
    }
    get safeKey() {
        if (!this.key)
            throw new Error('Please UIKitConfigManager.init() first');
        return this.key;
    }
    update(remoteConfigPayload) {
        return __awaiter(this, void 0, void 0, function* () {
            const storedConfigPayload = yield this.get();
            const mergedConfigPayload = {
                updatedAt: remoteConfigPayload.updatedAt,
                configuration: getConfigsByPriority(remoteConfigPayload.configuration, storedConfigPayload.configuration),
            };
            yield this.storage.setItem(this.safeKey, JSON.stringify(mergedConfigPayload));
            return mergedConfigPayload;
        });
    }
    get() {
        return __awaiter(this, void 0, void 0, function* () {
            const initialPayload = {
                updatedAt: 0,
                configuration: initialConfig,
            };
            try {
                const storedConfig = yield this.storage.getItem(this.safeKey);
                if (storedConfig) {
                    // TODO: Validation
                    return JSON.parse(storedConfig);
                }
                else {
                    return initialPayload;
                }
            }
            catch (_a) {
                return initialPayload;
            }
        });
    }
}

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/context.js
var context_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







function getApplicationAttributes(sdk) {
    var _a, _b;
    return (_b = (_a = sdk.appInfo) === null || _a === void 0 ? void 0 : _a.applicationAttributes) !== null && _b !== void 0 ? _b : [];
}
const UIKitConfigContext = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
    initDashboardConfigs: () => Promise.resolve(),
    configs: initialConfig,
    configsWithAppAttr: () => initialConfig,
});
const UIKitConfigProvider = ({ storage, children, localConfigs = {} }) => {
    // Set by Feature Config setting in Dashboard
    const [remoteConfigs, setRemoteConfigs] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(initialConfig);
    const [manager] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(() => new configManager_UIKitConfigManager(storage));
    const initDashboardConfigs = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((sdk) => context_awaiter(void 0, void 0, void 0, function* () {
        // Compare the sdk uikitConfig's lastUpdatedAt <-> stored one
        const storedConfigPayload = yield manager.init(sdk.appId);
        if (sdk.appInfo && sdk.appInfo.uikitConfigInfo.lastUpdatedAt === storedConfigPayload.updatedAt) {
            setRemoteConfigs(storedConfigPayload.configuration);
        }
        else {
            try {
                const response = yield sdk.getUIKitConfiguration();
                if (isRawSBUConfigPayload(response.json)) {
                    const remoteConfigPayload = snakeToCamel(response.json);
                    const updatedConfigPayload = yield manager.update(remoteConfigPayload);
                    setRemoteConfigs(updatedConfigPayload.configuration);
                }
            }
            catch (_a) {
                setRemoteConfigs(storedConfigPayload.configuration);
            }
        }
    }), [manager]);
    const configs = getConfigsByPriority(localConfigs, remoteConfigs);
    const configsWithAppAttr = usePreservedCallback((sdk) => ({
        groupChannel: {
            channel: {
                get enableReactions() {
                    return (configs.groupChannel.channel.enableReactions &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.reactions));
                },
                get enableOgtag() {
                    return (configs.groupChannel.channel.enableOgtag &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag));
                },
            },
            setting: {
                get enableMessageSearch() {
                    return (configs.groupChannel.setting.enableMessageSearch &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.message_search_v3));
                },
            },
        },
        openChannel: {
            channel: {
                get enableOgtag() {
                    return (configs.openChannel.channel.enableOgtag &&
                        getApplicationAttributes(sdk).includes(applicationAttributes.enable_og_tag));
                },
            },
        },
    }));
    return (external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UIKitConfigContext.Provider, { value: { initDashboardConfigs, configs, configsWithAppAttr } }, children));
};
const useUIKitConfig = () => Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UIKitConfigContext);


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/internal/exports.js



// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/types.js


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/uikitConfiguration/index.js



// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-tools/dist/esm/index.js




// EXTERNAL MODULE: ./node_modules/@sendbird/uikit-react/consts-397a92f1.js
var consts_397a92f1 = __webpack_require__(3);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/useSendbirdStateContext.js




/**
 * Example:
 * const MyComponent = () => {
 *  const context = useSendbirdStateContext();
 *  const sdk = sendbirdSelectors.getSdk(context);
 *  return (<div>...</div>);
 * }
 */
function useSendbirdStateContext() {
  const context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(SendbirdSdkContext);
  return context;
}


//# sourceMappingURL=useSendbirdStateContext.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-da7bc750.js





const INITIALIZE_AUDIO_UNIT = 'INITIALIZE_AUDIO_UNIT';
const SET_CURRENT_PLAYER = 'SET_CURRENT_PLAYER';
const ON_VOICE_PLAYER_PLAY = 'ON_VOICE_PLAYER_PLAY';
const ON_VOICE_PLAYER_PAUSE = 'ON_VOICE_PLAYER_PAUSE';
const ON_CURRENT_TIME_UPDATE = 'ON_CURRENT_TIME_UPDATE';

const VOICE_PLAYER_STATUS = {
  IDLE: 'IDLE',
  PREPARING: 'PREPARING',
  PLAYING: 'PLAYING',
  PAUSED: 'PAUSED',
  COMPLETED: 'COMPLETED'
};
const AudioUnitDefaultValue = () => ({
  audioFile: null,
  playbackTime: 0,
  duration: 1000,
  playingStatus: VOICE_PLAYER_STATUS.IDLE
});
const voicePlayerInitialState = {
  currentPlayer: null,
  currentGroupKey: '',
  audioStorage: {}
};

function voicePlayerReducer(state, action) {
  switch (action.type) {
    case INITIALIZE_AUDIO_UNIT:
      {
        var _state$audioStorage;
        const {
          groupKey
        } = action.payload;
        const audioUnit = (_state$audioStorage = state.audioStorage) !== null && _state$audioStorage !== void 0 && _state$audioStorage[groupKey] ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
        audioUnit.playingStatus = VOICE_PLAYER_STATUS.PREPARING;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          audioStorage: _objectSpread2(_objectSpread2({}, state.audioStorage), {}, {
            [groupKey]: audioUnit
          })
        });
      }
    case SET_CURRENT_PLAYER:
      {
        const {
          audioPlayer,
          groupKey
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentPlayer: audioPlayer,
          currentGroupKey: groupKey
        });
      }
    case ON_VOICE_PLAYER_PLAY:
      {
        var _state$audioStorage2;
        const {
          groupKey,
          audioFile
        } = action.payload;
        const audioUnit = (_state$audioStorage2 = state.audioStorage) !== null && _state$audioStorage2 !== void 0 && _state$audioStorage2[groupKey] ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
        audioUnit.audioFile = audioFile;
        audioUnit.playingStatus = VOICE_PLAYER_STATUS.PLAYING;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          audioStorage: _objectSpread2(_objectSpread2({}, state.audioStorage), {}, {
            [groupKey]: audioUnit
          })
        });
      }
    case ON_VOICE_PLAYER_PAUSE:
      {
        var _state$audioStorage3;
        const {
          groupKey
        } = action.payload;
        const audioUnit = (_state$audioStorage3 = state.audioStorage) !== null && _state$audioStorage3 !== void 0 && _state$audioStorage3[groupKey] ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
        audioUnit.playingStatus = VOICE_PLAYER_STATUS.PAUSED;
        const {
          currentTime,
          duration
        } = state.currentPlayer;
        if (audioUnit.playbackTime === audioUnit.duration) {
          audioUnit.playbackTime = 0;
        } else if (currentTime > 0 && duration > 0) {
          audioUnit.playbackTime = currentTime;
          audioUnit.duration = duration;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          audioStorage: _objectSpread2(_objectSpread2({}, state.audioStorage), {}, {
            [groupKey]: audioUnit
          })
        });
      }
    case ON_CURRENT_TIME_UPDATE:
      {
        var _state$audioStorage4;
        const {
          groupKey
        } = action.payload;
        const {
          currentTime,
          duration
        } = state.currentPlayer;
        const audioUnit = (_state$audioStorage4 = state.audioStorage) !== null && _state$audioStorage4 !== void 0 && _state$audioStorage4[groupKey] ? state.audioStorage[groupKey] : AudioUnitDefaultValue();
        if (currentTime > 0 && duration > 0) {
          audioUnit.playbackTime = currentTime;
          audioUnit.duration = duration;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          audioStorage: _objectSpread2(_objectSpread2({}, state.audioStorage), {}, {
            [groupKey]: audioUnit
          })
        });
      }
    default:
      return state;
  }
}

// VoicePlayerProvider interface

const ALL = 'ALL';
const noop = () => {/* noop */};
const VoicePlayerStoreDefaultValue = {
  currentGroupKey: '',
  currentPlayer: null,
  audioStorage: {}
};
const Context = /*#__PURE__*/Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
  play: noop,
  pause: noop,
  stop: noop,
  voicePlayerStore: VoicePlayerStoreDefaultValue
});
const VoicePlayerProvider = _ref => {
  let {
    children
  } = _ref;
  const [voicePlayerStore, voicePlayerDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(voicePlayerReducer, voicePlayerInitialState);
  const {
    currentGroupKey,
    currentPlayer,
    audioStorage
  } = voicePlayerStore;
  const {
    config
  } = useSendbirdStateContext();
  const {
    logger
  } = config;
  const stop = function () {
    let text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    if (currentGroupKey.includes(text)) {
      logger.info('VoicePlayer: Pause playing(by text).');
      pause(currentGroupKey);
    }
  };
  const pause = groupKey => {
    if (currentGroupKey === groupKey && currentPlayer !== null) {
      logger.info('VoicePlayer: Pause playing(by group key).');
      currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.pause();
    }
    if (groupKey === ALL) {
      logger.info('VoicePlayer: Pause playing(all).');
      currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.pause();
    }
  };
  const play = _ref2 => {
    let {
      groupKey,
      audioFile = null,
      audioFileUrl = ''
    } = _ref2;
    if (groupKey !== currentGroupKey) {
      pause(currentGroupKey);
    }

    // Clear the previous AudioPlayer element
    const voicePlayerRoot = document.getElementById(consts_397a92f1["k" /* f */]);
    const voicePlayerAudioElement = document.getElementById(consts_397a92f1["l" /* g */]);
    if (voicePlayerAudioElement) {
      voicePlayerRoot.removeChild(voicePlayerAudioElement);
    }
    logger.info('VoicePlayer: Start getting audio file.');
    new Promise(resolve => {
      var _audioStorage$groupKe;
      voicePlayerDispatcher({
        type: INITIALIZE_AUDIO_UNIT,
        payload: {
          groupKey
        }
      });
      // audio file passed as a parameter
      if (audioFile) {
        logger.info('VoicePlayer: Use the audioFile instance.');
        resolve(audioFile);
        return;
      }
      // audio file from the audioStorage
      const cachedAudioFile = audioStorage === null || audioStorage === void 0 ? void 0 : (_audioStorage$groupKe = audioStorage[groupKey]) === null || _audioStorage$groupKe === void 0 ? void 0 : _audioStorage$groupKe.audioFile;
      if (cachedAudioFile) {
        logger.info('VoicePlayer: Get from the audioStorage.');
        resolve(cachedAudioFile);
        return;
      }
      // fetch the audio file from URL
      fetch(audioFileUrl).then(res => res.blob()).then(blob => {
        const audioFile = new File([blob], consts_397a92f1["g" /* b */], {
          lastModified: new Date().getTime(),
          type: consts_397a92f1["h" /* c */]
        });
        resolve(audioFile);
        logger.info('VoicePlayer: Get the audioFile from URL.');
      });
    }).then(audioFile => {
      var _URL, _URL$createObjectURL;
      const voicePlayerRoot = document.getElementById(consts_397a92f1["k" /* f */]);
      logger.info('VoicePlayer: Succeeded getting audio file.', {
        audioFile
      });
      const currentAudioUnit = audioStorage[groupKey] || AudioUnitDefaultValue();
      const audioPlayer = new Audio((_URL = URL) === null || _URL === void 0 ? void 0 : (_URL$createObjectURL = _URL.createObjectURL) === null || _URL$createObjectURL === void 0 ? void 0 : _URL$createObjectURL.call(_URL, audioFile));
      audioPlayer.id = consts_397a92f1["l" /* g */];
      audioPlayer.currentTime = currentAudioUnit.playbackTime;
      audioPlayer.volume = 1;
      audioPlayer.loop = false;
      audioPlayer.onplaying = () => {
        logger.info('VoicePlayer: OnPlaying event is called from audioPlayer', {
          groupKey,
          audioPlayer
        });
        voicePlayerDispatcher({
          type: ON_VOICE_PLAYER_PLAY,
          payload: {
            groupKey,
            audioFile
          }
        });
      };
      audioPlayer.onpause = () => {
        logger.info('VoicePlayer: OnPause event is called from audioPlayer', {
          groupKey,
          audioPlayer
        });
        voicePlayerDispatcher({
          type: ON_VOICE_PLAYER_PAUSE,
          payload: {
            groupKey
          }
        });
      };
      audioPlayer.ontimeupdate = () => {
        voicePlayerDispatcher({
          type: ON_CURRENT_TIME_UPDATE,
          payload: {
            groupKey
          }
        });
      };
      audioPlayer.dataset.sbGroupId = groupKey;
      // clean up the previous audio player
      try {
        voicePlayerRoot === null || voicePlayerRoot === void 0 ? void 0 : voicePlayerRoot.childNodes.forEach(node => {
          var _element$dataset;
          const element = node;
          const thisGroupKey = (_element$dataset = element.dataset) === null || _element$dataset === void 0 ? void 0 : _element$dataset.sbGroupKey;
          if (thisGroupKey !== groupKey) {
            var _element$pause;
            element === null || element === void 0 ? void 0 : (_element$pause = element.pause) === null || _element$pause === void 0 ? void 0 : _element$pause.call(element);
            voicePlayerDispatcher({
              type: ON_VOICE_PLAYER_PAUSE,
              payload: {
                groupKey
              }
            });
            voicePlayerRoot.removeChild(element);
            logger.info('VoicePlayer: Removed other player.', {
              element
            });
          }
        });
      } finally {
        audioPlayer === null || audioPlayer === void 0 ? void 0 : audioPlayer.play();
        voicePlayerRoot === null || voicePlayerRoot === void 0 ? void 0 : voicePlayerRoot.appendChild(audioPlayer);
        voicePlayerDispatcher({
          type: SET_CURRENT_PLAYER,
          payload: {
            groupKey,
            audioPlayer
          }
        });
        logger.info('VoicePlayer: Succeeded playing audio player.', {
          groupKey,
          audioPlayer
        });
      }
    });
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Context.Provider, {
    value: {
      play,
      pause,
      stop,
      voicePlayerStore
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    id: consts_397a92f1["k" /* f */],
    style: {
      display: 'none'
    }
  }), children);
};
const useVoicePlayerContext = () => Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(Context);


//# sourceMappingURL=index-da7bc750.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/stringSet-ed242956.js
/**
 * NOTE:
 * Do not forget to update the string set table on Docs
 * When you update this string set
 */

const getStringSet = function () {
  let lang = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'en';
  const stringSet = {
    en: {
      // Group Channel - Conversation
      MESSAGE_STATUS__YESTERDAY: 'Yesterday',
      CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE: 'new message(s) since',
      CHANNEL__MESSAGE_LIST__NOTIFICATION__ON: 'on',
      // Channel List
      CHANNEL_PREVIEW_MOBILE_LEAVE: 'Leave channel',
      // Group Channel - Settings
      CHANNEL_SETTING__HEADER__TITLE: 'Channel information',
      CHANNEL_SETTING__PROFILE__EDIT: 'Edit',
      CHANNEL_SETTING__MEMBERS__TITLE: 'Members',
      CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS: 'All members',
      CHANNEL_SETTING__MEMBERS__INVITE_MEMBER: 'Invite users',
      CHANNEL_SETTING__MEMBERS__YOU: ' (You)',
      CHANNEL_SETTING__MEMBERS__SELECT_TITLE: 'Select members',
      CHANNEL_SETTING__MEMBERS__OPERATOR: 'Operator',
      CHANNEL_SETTING__LEAVE_CHANNEL__TITLE: 'Leave channel',
      CHANNEL_SETTING__OPERATORS__TITLE: 'Operators',
      CHANNEL_SETTING__OPERATORS__TITLE_ALL: 'All operators',
      CHANNEL_SETTING__OPERATORS__TITLE_ADD: 'Add operator',
      CHANNEL_SETTING__OPERATORS__ADD_BUTTON: 'Add',
      CHANNEL_SETTING__MUTED_MEMBERS__TITLE: 'Muted members',
      CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL: 'All muted members',
      CHANNEL_SETTING__NO_UNMUTED: 'No muted members yet',
      CHANNEL_SETTING__BANNED_MEMBERS__TITLE: 'Banned users',
      CHANNEL_SETTING__FREEZE_CHANNEL: 'Freeze Channel',
      CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: 'Register as operator',
      CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: 'Unregister operator',
      CHANNEL_SETTING__MODERATION__MUTE: 'Mute',
      CHANNEL_SETTING__MODERATION__UNMUTE: 'Unmute',
      CHANNEL_SETTING__MODERATION__BAN: 'Ban',
      CHANNEL_SETTING__MODERATION__UNBAN: 'Unban',
      CHANNEL_SETTING__MODERATION__EMPTY_BAN: 'No banned members yet',
      CHANNEL_SETTING__MODERATION__ALL_BAN: 'All banned members',
      // OpenChannel - Conversation
      OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS: 'participants',
      OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS: 'Select participants',
      // OpenChannelList
      OPEN_CHANNEL_LIST__TITLE: 'Channels',
      CREATE_OPEN_CHANNEL_LIST__TITLE: 'New channel profile',
      CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION: 'Channel image',
      CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD: 'Upload',
      CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION: 'Channel name',
      CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER: 'Enter channel name',
      CREATE_OPEN_CHANNEL_LIST__SUBMIT: 'Create',
      // OpenChannel - Settings
      OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE: 'Channel Information',
      OPEN_CHANNEL_SETTINGS__OPERATOR_URL: 'URL',
      OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE: 'Participants',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL: 'Delete channel',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE: 'Delete channel?',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT: 'Once deleted, this channel can\'t be restored.',
      OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT: 'Delete',
      OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE: 'Operators',
      OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD: 'Add operator',
      OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL: 'All operators',
      OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE: 'Muted participants',
      OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL: 'All muted participants',
      OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE: 'No muted participants yet',
      OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE: 'Banned users',
      OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL: 'All banned users',
      OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE: 'No banned users yet',
      OPEN_CHANNEL_SETTINGS__MEMBERS__YOU: ' (You)',
      OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR: 'Operator',
      OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE: 'Participants',
      OPEN_CHANNEL_SETTINGS__EMPTY_LIST: 'No participants yet',
      OPEN_CHANNEL_SETTINGS__SEE_ALL: 'See all participants',
      OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE: 'All participants',
      OPEN_CHANNEL_SETTINGS__NO_TITLE: '(No title)',
      OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR: 'Register as operator',
      OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR: 'Unregister operator',
      OPEN_CHANNEL_SETTING__MODERATION__MUTE: 'Mute',
      OPEN_CHANNEL_SETTING__MODERATION__UNMUTE: 'Unmute',
      OPEN_CHANNEL_SETTING__MODERATION__BAN: 'Ban',
      OPEN_CHANNEL_SETTING__MODERATION__UNBAN: 'Unban',
      // Channel - Common
      TRYING_TO_CONNECT: 'Trying to connect',
      TYPING_INDICATOR__IS_TYPING: 'is typing...',
      TYPING_INDICATOR__AND: 'and',
      TYPING_INDICATOR__ARE_TYPING: 'are typing...',
      TYPING_INDICATOR__MULTIPLE_TYPING: 'Several people are typing...',
      CHANNEL_FROZEN: 'Channel frozen',
      PLACE_HOLDER__NO_CHANNEL: 'No channels',
      PLACE_HOLDER__WRONG: 'Something went wrong',
      PLACE_HOLDER__RETRY_TO_CONNECT: 'Retry',
      PLACE_HOLDER__NO_MESSAGES: 'No messages',
      TOOLTIP__AND_YOU: ', and you',
      TOOLTIP__YOU: 'you',
      TOOLTIP__UNKNOWN_USER: '(no name)',
      UNKNOWN__UNKNOWN_MESSAGE_TYPE: '(Unknown message type)',
      UNKNOWN__CANNOT_READ_MESSAGE: 'Cannot read this message.',
      MESSAGE_EDITED: '(edited)',
      // Channel - Modal
      MODAL__DELETE_MESSAGE__TITLE: 'Delete this message?',
      MODAL__CHANNEL_INFORMATION__TITLE: 'Edit channel information',
      MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE: 'Channel image',
      MODAL__CHANNEL_INFORMATION__UPLOAD: 'Upload',
      MODAL__CHANNEL_INFORMATION__CHANNEL_NAME: 'Channel name',
      MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER: 'Enter name',
      MODAL__INVITE_MEMBER__TITLE: 'Invite member',
      MODAL__INVITE_MEMBER__SELECTED: 'selected',
      MODAL__CHOOSE_CHANNEL_TYPE__TITLE: 'New channel',
      MODAL__CHOOSE_CHANNEL_TYPE__GROUP: 'Group',
      MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP: 'Super group',
      MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST: 'Broadcast',
      MODAL__CREATE_CHANNEL__TITLE: 'New channel',
      MODAL__CREATE_CHANNEL__GROUP: 'Group',
      MODAL__CREATE_CHANNEL__SUPER: 'Super group',
      MODAL__CREATE_CHANNEL__BROADCAST: 'Broadcast',
      MODAL__CREATE_CHANNEL__SELECTED: 'selected',
      MODAL__LEAVE_CHANNEL__TITLE: 'Leave this channel?',
      MODAL__LEAVE_CHANNEL__FOOTER: 'Leave',
      MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED: 'You\'re muted by the operator.',
      MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN: 'Channel is frozen.',
      // User Profile
      USER_PROFILE__MESSAGE: 'Message',
      USER_PROFILE__USER_ID: 'User ID',
      EDIT_PROFILE__TITLE: 'My profile',
      EDIT_PROFILE__IMAGE_LABEL: 'Profile image',
      EDIT_PROFILE__IMAGE_UPLOAD: 'Upload',
      EDIT_PROFILE__NICKNAME_LABEL: 'Nickname',
      EDIT_PROFILE__NICKNAME_PLACEHOLDER: 'Enter your nickname',
      EDIT_PROFILE__USERID_LABEL: 'User ID',
      EDIT_PROFILE__THEME_LABEL: 'Dark theme',
      // Message Input
      MESSAGE_INPUT__PLACE_HOLDER: 'Enter message',
      MESSAGE_INPUT__PLACE_HOLDER__DISABLED: 'Chat is unavailable in this channel',
      MESSAGE_INPUT__PLACE_HOLDER__MUTED: 'Chat is unavailable because you\'re muted',
      MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT: 'You\'re muted',
      MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER: 'Reply to message',
      // Common UI
      BUTTON__CANCEL: 'Cancel',
      BUTTON__DELETE: 'Delete',
      BUTTON__SAVE: 'Save',
      BUTTON__CREATE: 'Create',
      BUTTON__INVITE: 'Invite',
      BUTTON__OK: 'OK',
      BADGE__OVER: '+',
      NO_TITLE: 'No title',
      NO_NAME: '(No name)',
      NO_MEMBERS: '(No members)',
      // Context Menu
      MESSAGE_MENU__COPY: 'Copy',
      MESSAGE_MENU__REPLY: 'Reply',
      MESSAGE_MENU__THREAD: 'Reply in thread',
      MESSAGE_MENU__OPEN_IN_CHANNEL: 'Open in channel',
      MESSAGE_MENU__EDIT: 'Edit',
      MESSAGE_MENU__RESEND: 'Resend',
      MESSAGE_MENU__DELETE: 'Delete',
      MESSAGE_MENU__SAVE: 'Save',
      //  * FIXME: get back legacy, remove after refactoring open channel messages *
      CONTEXT_MENU_DROPDOWN__COPY: 'Copy',
      CONTEXT_MENU_DROPDOWN__EDIT: 'Edit',
      CONTEXT_MENU_DROPDOWN__RESEND: 'Resend',
      CONTEXT_MENU_DROPDOWN__DELETE: 'Delete',
      CONTEXT_MENU_DROPDOWN__SAVE: 'Save',
      // Feature - Message Search
      SEARCH: 'Search',
      SEARCH_IN_CHANNEL: 'Search in channel',
      SEARCH_IN: 'Search in',
      SEARCHING: 'Searching for messages...',
      NO_SEARCHED_MESSAGE: 'No results found.',
      // Feature - Message Reply
      QUOTE_MESSAGE_INPUT__REPLY_TO: 'Reply to',
      QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE: 'Photo',
      QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF: 'GIF',
      QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO: 'Video',
      QUOTED_MESSAGE__REPLIED_TO: 'replied to',
      QUOTED_MESSAGE__CURRENT_USER: 'You',
      QUOTED_MESSAGE__UNAVAILABLE: 'Message unavailable',
      // Feature - Thread
      THREAD__HEADER_TITLE: 'Thread',
      CHANNEL__THREAD_REPLY: 'reply',
      CHANNEL__THREAD_REPLIES: 'replies',
      CHANNEL__THREAD_OVER_MAX: '99+',
      THREAD__THREAD_REPLY: 'reply',
      THREAD__THREAD_REPLIES: 'replies',
      THREAD__INPUT__REPLY_TO_THREAD: 'Reply to thread',
      THREAD__INPUT__REPLY_IN_THREAD: 'Reply in thread',
      // Feature - Mention
      MENTION_NAME__NO_NAME: '(No name)',
      MENTION_COUNT__OVER_LIMIT: 'You can mention up to %d times at a time.',
      UI__FILE_VIEWER__UNSUPPORT: 'Unsupported message',
      // Feature - Voice Message
      VOICE_RECORDING_PERMISSION_DENIED: `You cannot record the voice since
        voice recording is not permitted in your device system setting`,
      VOICE_MESSAGE: 'Voice Message'
    }
  };
  return stringSet[lang];
};


//# sourceMappingURL=stringSet-ed242956.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-91634369.js
var formatDistanceLocale = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};

var formatDistance = function formatDistance(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];

  if (typeof tokenValue === 'string') {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace('{{count}}', count.toString());
  }

  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }

  return result;
};

function buildFormatLongFn(args) {
  return function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    // TODO: Remove String()
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

var dateFormats = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: 'full'
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: 'full'
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: 'full'
  })
};

var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};

var formatRelative = function formatRelative(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};

function buildLocalizeFn(args) {
  return function (dirtyIndex, options) {
    var context = options !== null && options !== void 0 && options.context ? String(options.context) : 'standalone';
    var valuesArray;

    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options !== null && options !== void 0 && options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;

      var _width = options !== null && options !== void 0 && options.width ? String(options.width) : args.defaultWidth;

      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }

    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex; // @ts-ignore: For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!

    return valuesArray[index];
  };
}

var eraValues = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']
}; // Note: in English, the names of days of the week and months are capitalized.
// If you are making a new locale based on this one, check if the same is true for the language you're working on.
// Generally, formatted dates should look like they are in the middle of a sentence,
// e.g. in Spanish language the weekdays and months should be in the lowercase.

var monthValues = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};

var ordinalNumber = function ordinalNumber(dirtyNumber, _options) {
  var number = Number(dirtyNumber); // If ordinal numbers depend on context, for example,
  // if they are different for different grammatical genders,
  // use `options.unit`.
  //
  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',
  // 'day', 'hour', 'minute', 'second'.

  var rem100 = number % 100;

  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';

      case 2:
        return number + 'nd';

      case 3:
        return number + 'rd';
    }
  }

  return number + 'th';
};

var localize = {
  ordinalNumber: ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: 'wide'
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: 'wide',
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: 'wide'
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: 'wide'
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: 'wide'
  })
};

function buildMatchFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);

    if (!matchResult) {
      return null;
    }

    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }

  return undefined;
}

function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }

  return undefined;
}

function buildMatchPatternFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns,
    defaultParseWidth: 'any'
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: 'any',
    valueCallback: function valueCallback(index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: 'any'
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns,
    defaultParseWidth: 'any'
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: 'any'
  })
};

/**
 * @type {Locale}
 * @category Locales
 * @summary English locale (United States).
 * @language English
 * @iso-639-2 eng
 * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}
 * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}
 */
var index_91634369_locale = {
  code: 'en-US',
  formatDistance: formatDistance,
  formatLong: formatLong,
  formatRelative: formatRelative,
  localize: localize,
  match: match,
  options: {
    weekStartsOn: 0
    /* Sunday */
    ,
    firstWeekContainsDate: 1
  }
};
var defaultLocale = index_91634369_locale;


//# sourceMappingURL=index-91634369.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/LocalizationContext-9a9a0064.js




const LocalizationContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
  stringSet: getStringSet('en'),
  dateLocale: defaultLocale
});
const LocalizationProvider = props => {
  const {
    children
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LocalizationContext.Provider, {
    value: props
  }, children);
};
const useLocalization = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(LocalizationContext);


//# sourceMappingURL=LocalizationContext-9a9a0064.js.map

// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(4);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-d16a8084.js


// simple component to be used as modal root
const MODAL_ROOT = 'sendbird-modal-root';


//# sourceMappingURL=index-d16a8084.js.map

// EXTERNAL MODULE: ./node_modules/prop-types/index.js
var prop_types = __webpack_require__(2);
var prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-7c1266b5.js




const Typography = {
  H_1: 'H_1',
  H_2: 'H_2',
  SUBTITLE_1: 'SUBTITLE_1',
  SUBTITLE_2: 'SUBTITLE_2',
  BODY_1: 'BODY_1',
  BODY_2: 'BODY_2',
  BUTTON_1: 'BUTTON_1',
  BUTTON_2: 'BUTTON_2',
  CAPTION_1: 'CAPTION_1',
  CAPTION_2: 'CAPTION_2',
  CAPTION_3: 'CAPTION_3'
};
const Colors = {
  ONBACKGROUND_1: 'ONBACKGROUND_1',
  ONBACKGROUND_2: 'ONBACKGROUND_2',
  ONBACKGROUND_3: 'ONBACKGROUND_3',
  ONBACKGROUND_4: 'ONBACKGROUND_4',
  ONCONTENT_1: 'ONCONTENT_1',
  ONCONTENT_2: 'ONCONTENT_2',
  PRIMARY: 'PRIMARY',
  ERROR: 'ERROR',
  SECONDARY_3: 'SECONDARY_3'
};

function changeTypographyToClassName(type) {
  switch (type) {
    case Typography.H_1:
      return 'sendbird-label--h-1';
    case Typography.H_2:
      return 'sendbird-label--h-2';
    case Typography.SUBTITLE_1:
      return 'sendbird-label--subtitle-1';
    case Typography.SUBTITLE_2:
      return 'sendbird-label--subtitle-2';
    case Typography.BODY_1:
      return 'sendbird-label--body-1';
    case Typography.BODY_2:
      return 'sendbird-label--body-2';
    case Typography.BUTTON_1:
      return 'sendbird-label--button-1';
    case Typography.BUTTON_2:
      return 'sendbird-label--button-2';
    case Typography.CAPTION_1:
      return 'sendbird-label--caption-1';
    case Typography.CAPTION_2:
      return 'sendbird-label--caption-2';
    case Typography.CAPTION_3:
      return 'sendbird-label--caption-3';
    default:
      return '';
  }
}
function changeColorToClassName(color) {
  switch (color) {
    case Colors.ONBACKGROUND_1:
      return 'sendbird-label--color-onbackground-1';
    case Colors.ONBACKGROUND_2:
      return 'sendbird-label--color-onbackground-2';
    case Colors.ONBACKGROUND_3:
      return 'sendbird-label--color-onbackground-3';
    case Colors.ONBACKGROUND_4:
      return 'sendbird-label--color-onbackground-4';
    case Colors.ONCONTENT_1:
      return 'sendbird-label--color-oncontent-1';
    case Colors.ONCONTENT_2:
      return 'sendbird-label--color-oncontent-2';
    case Colors.PRIMARY:
      return 'sendbird-label--color-primary';
    // should be Primary-3 fix me
    case Colors.ERROR:
      return 'sendbird-label--color-error';
    case Colors.SECONDARY_3:
      return 'sendbird-label--color-secondary-3';
    default:
      return '';
  }
}

function Label(_ref) {
  let {
    className,
    type,
    color,
    children
  } = _ref;
  return (
    /*#__PURE__*/
    // Donot make this into div
    // Mention uses Label. If we use div, it would break the mention detection on Paste
    // https://github.com/sendbird/sendbird-uikit-react/pull/479
    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
      className: [...(Array.isArray(className) ? className : [className]), 'sendbird-label', type ? changeTypographyToClassName(type) : '', color ? changeColorToClassName(color) : ''].join(' ')
    }, children)
  );
}
Label.propTypes = {
  className: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.arrayOf(prop_types_default.a.string)]),
  type: prop_types_default.a.string,
  color: prop_types_default.a.string,
  children: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.number, prop_types_default.a.element, prop_types_default.a.any])
};
Label.defaultProps = {
  className: [],
  type: '',
  color: '',
  children: null
};
const LabelTypography = Typography;
const LabelColors = Colors;
const LabelStringSet = getStringSet('en');


//# sourceMappingURL=index-7c1266b5.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Button.js





let ButtonTypes$1 = /*#__PURE__*/function (ButtonTypes) {
  ButtonTypes["PRIMARY"] = "PRIMARY";
  ButtonTypes["SECONDARY"] = "SECONDARY";
  ButtonTypes["DANGER"] = "DANGER";
  ButtonTypes["DISABLED"] = "DISABLED";
  return ButtonTypes;
}({});
let ButtonSizes$1 = /*#__PURE__*/function (ButtonSizes) {
  ButtonSizes["BIG"] = "BIG";
  ButtonSizes["SMALL"] = "SMALL";
  return ButtonSizes;
}({});

function changeTypeToClassName(type) {
  switch (type) {
    case ButtonTypes$1.PRIMARY:
      return 'sendbird-button--primary';
    case ButtonTypes$1.SECONDARY:
      return 'sendbird-button--secondary';
    case ButtonTypes$1.DANGER:
      return 'sendbird-button--danger';
    case ButtonTypes$1.DISABLED:
      return 'sendbird-button--disabled';
    default:
      return null;
  }
}
function changeSizeToClassName(size) {
  switch (size) {
    case ButtonSizes$1.BIG:
      return 'sendbird-button--big';
    case ButtonSizes$1.SMALL:
      return 'sendbird-button--small';
    default:
      return null;
  }
}

const ButtonTypes = ButtonTypes$1;
const ButtonSizes = ButtonSizes$1;
function Button(_ref) {
  let {
    className,
    type = ButtonTypes.PRIMARY,
    size = ButtonSizes.BIG,
    children = 'Button',
    disabled = false,
    onClick = () => {/* noop */}
  } = _ref;
  const injectingClassNames = [...(Array.isArray(className) ? className : [className]), 'sendbird-button', disabled ? 'sendbird-button__disabled' : '', changeTypeToClassName(type), changeSizeToClassName(size)].join(' ');
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("button", {
    className: injectingClassNames,
    type: "button",
    onClick: onClick,
    disabled: disabled
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-button__text",
    type: LabelTypography.BUTTON_1,
    color: LabelColors.ONCONTENT_1
  }, children));
}


//# sourceMappingURL=Button.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Icon.js




/* eslint-disable no-redeclare */
const Types = {
  ADD: 'ADD',
  ARROW_LEFT: 'ARROW_LEFT',
  ATTACH: 'ATTACH',
  AUDIO_ON_LINED: 'AUDIO_ON_LINED',
  BAN: 'BAN',
  BROADCAST: 'BROADCAST',
  CAMERA: 'CAMERA',
  CHANNELS: 'CHANNELS',
  CHAT: 'CHAT',
  CHAT_FILLED: 'CHAT_FILLED',
  CHEVRON_DOWN: 'CHEVRON_DOWN',
  CHEVRON_RIGHT: 'CHEVRON_RIGHT',
  CLOSE: 'CLOSE',
  COLLAPSE: 'COLLAPSE',
  COPY: 'COPY',
  CREATE: 'CREATE',
  DELETE: 'DELETE',
  DISCONNECTED: 'DISCONNECTED',
  DOCUMENT: 'DOCUMENT',
  DONE: 'DONE',
  DONE_ALL: 'DONE_ALL',
  DOWNLOAD: 'DOWNLOAD',
  EDIT: 'EDIT',
  EMOJI_MORE: 'EMOJI_MORE',
  ERROR: 'ERROR',
  EXPAND: 'EXPAND',
  FILE_AUDIO: 'FILE_AUDIO',
  FILE_DOCUMENT: 'FILE_DOCUMENT',
  FREEZE: 'FREEZE',
  GIF: 'GIF',
  INFO: 'INFO',
  LEAVE: 'LEAVE',
  MEMBERS: 'MEMBERS',
  MESSAGE: 'MESSAGE',
  MODERATIONS: 'MODERATIONS',
  MORE: 'MORE',
  MUTE: 'MUTE',
  NOTIFICATIONS: 'NOTIFICATIONS',
  NOTIFICATIONS_OFF_FILLED: 'NOTIFICATIONS_OFF_FILLED',
  OPERATOR: 'OPERATOR',
  PHOTO: 'PHOTO',
  PLAY: 'PLAY',
  PLUS: 'PLUS',
  QUESTION: 'QUESTION',
  REFRESH: 'REFRESH',
  REPLY: 'REPLY',
  REMOVE: 'REMOVE',
  SEARCH: 'SEARCH',
  SEND: 'SEND',
  SETTINGS_FILLED: 'SETTINGS_FILLED',
  SLIDE_LEFT: 'SLIDE_LEFT',
  SPINNER: 'SPINNER',
  SUPERGROUP: 'SUPERGROUP',
  THREAD: 'THREAD',
  THUMBNAIL_NONE: 'THUMBNAIL_NONE',
  TOGGLE_OFF: 'TOGGLE_OFF',
  TOGGLE_ON: 'TOGGLE_ON',
  USER: 'USER'
};

/* eslint-disable no-redeclare */
const Icon_Colors = {
  DEFAULT: 'DEFAULT',
  PRIMARY: 'PRIMARY',
  PRIMARY_2: 'PRIMARY_2',
  SECONDARY: 'SECONDARY',
  CONTENT: 'CONTENT',
  CONTENT_INVERSE: 'CONTENT_INVERSE',
  WHITE: 'WHITE',
  GRAY: 'GRAY',
  SENT: 'SENT',
  READ: 'READ',
  ON_BACKGROUND_1: 'ON_BACKGROUND_1',
  ON_BACKGROUND_2: 'ON_BACKGROUND_2',
  ON_BACKGROUND_3: 'ON_BACKGROUND_3',
  ON_BACKGROUND_4: 'ON_BACKGROUND_4',
  BACKGROUND_3: 'BACKGROUND_3',
  ERROR: 'ERROR'
};

function Icon_changeColorToClassName(color) {
  switch (color) {
    case Icon_Colors.PRIMARY:
      return 'sendbird-icon-color--primary';
    case Icon_Colors.PRIMARY_2:
      return 'sendbird-icon-color--primary-2';
    case Icon_Colors.SECONDARY:
      return 'sendbird-icon-color--secondary';
    case Icon_Colors.CONTENT:
      return 'sendbird-icon-color--content';
    case Icon_Colors.CONTENT_INVERSE:
      return 'sendbird-icon-color--content-inverse';
    case Icon_Colors.WHITE:
      return 'sendbird-icon-color--white';
    case Icon_Colors.GRAY:
      return 'sendbird-icon-color--gray';
    case Icon_Colors.SENT:
      return 'sendbird-icon-color--sent';
    case Icon_Colors.READ:
      return 'sendbird-icon-color--read';
    case Icon_Colors.ON_BACKGROUND_1:
      return 'sendbird-icon-color--on-background-1';
    case Icon_Colors.ON_BACKGROUND_2:
      return 'sendbird-icon-color--on-background-2';
    case Icon_Colors.ON_BACKGROUND_3:
      return 'sendbird-icon-color--on-background-3';
    case Icon_Colors.ON_BACKGROUND_4:
      return 'sendbird-icon-color--on-background-4';
    case Icon_Colors.BACKGROUND_3:
      return 'sendbird-icon-color--background-3';
    case Icon_Colors.ERROR:
      return 'sendbird-icon-color--error';
    default:
      return '';
  }
}
function changeTypeToIconClassName(type) {
  switch (type) {
    case Types.ADD:
      return 'sendbird-icon-add';
    case Types.ARROW_LEFT:
      return 'sendbird-icon-arrow-left';
    case Types.ATTACH:
      return 'sendbird-icon-attach';
    case Types.AUDIO_ON_LINED:
      return 'sendbird-icon-audio-on-lined';
    case Types.BAN:
      return 'sendbird-icon-ban';
    case Types.BROADCAST:
      return 'sendbird-icon-broadcast';
    case Types.CAMERA:
      return 'sendbird-icon-camera';
    case Types.CHANNELS:
      return 'sendbird-icon-channels';
    case Types.CHAT:
      return 'sendbird-icon-chat';
    case Types.CHAT_FILLED:
      return 'sendbird-icon-chat-filled';
    case Types.CHEVRON_DOWN:
      return 'sendbird-icon-chevron-down';
    case Types.CHEVRON_RIGHT:
      return 'sendbird-icon-chevron-right';
    case Types.CLOSE:
      return 'sendbird-icon-close';
    case Types.COLLAPSE:
      return 'sendbird-icon-collapse';
    case Types.COPY:
      return 'sendbird-icon-copy';
    case Types.CREATE:
      return 'sendbird-icon-create';
    case Types.DELETE:
      return 'sendbird-icon-delete';
    case Types.DISCONNECTED:
      return 'sendbird-icon-disconnected';
    case Types.DOCUMENT:
      return 'sendbird-icon-document';
    case Types.DONE:
      return 'sendbird-icon-done';
    case Types.DONE_ALL:
      return 'sendbird-icon-done-all';
    case Types.DOWNLOAD:
      return 'sendbird-icon-down-load';
    case Types.EDIT:
      return 'sendbird-icon-edit';
    case Types.EMOJI_MORE:
      return 'sendbird-icon-emoji-more';
    case Types.ERROR:
      return 'sendbird-icon-error';
    case Types.EXPAND:
      return 'sendbird-icon-expand';
    case Types.FILE_AUDIO:
      return 'sendbird-icon-file-audio';
    case Types.FILE_DOCUMENT:
      return 'sendbird-icon-file-document';
    case Types.FREEZE:
      return 'sendbird-icon-freeze';
    case Types.GIF:
      return 'sendbird-icon-gif';
    case Types.INFO:
      return 'sendbird-icon-info';
    case Types.LEAVE:
      return 'sendbird-icon-leave';
    case Types.MEMBERS:
      return 'sendbird-icon-members';
    case Types.MESSAGE:
      return 'sendbird-icon-message';
    case Types.MODERATIONS:
      return 'sendbird-icon-moderations';
    case Types.MORE:
      return 'sendbird-icon-more';
    case Types.MUTE:
      return 'sendbird-icon-mute';
    case Types.NOTIFICATIONS:
      return 'sendbird-icon-notifications';
    case Types.NOTIFICATIONS_OFF_FILLED:
      return 'sendbird-icon-notifications-off-filled';
    case Types.OPERATOR:
      return 'sendbird-icon-operator';
    case Types.PHOTO:
      return 'sendbird-icon-photo';
    case Types.PLAY:
      return 'sendbird-icon-play';
    case Types.PLUS:
      return 'sendbird-iconn-plus';
    case Types.QUESTION:
      return 'sendbird-icon-question';
    case Types.REFRESH:
      return 'sendbird-icon-refresh';
    case Types.REMOVE:
      return 'sendbird-icon-remove';
    case Types.REPLY:
      return 'sendbird-icon-reply';
    case Types.SEARCH:
      return 'sendbird-icon-search';
    case Types.SEND:
      return 'sendbird-icon-send';
    case Types.SETTINGS_FILLED:
      return 'sendbird-icon-settings-filled';
    case Types.SPINNER:
      return 'sendbird-icon-spinner';
    case Types.SUPERGROUP:
      return 'sendbird-icon-supergroup';
    case Types.THREAD:
      return 'sendbird-icon-thread';
    case Types.THUMBNAIL_NONE:
      return 'sendbird-icon-thumbnail-none';
    case Types.TOGGLE_OFF:
      return 'sendbird-icon-toggle-off';
    case Types.TOGGLE_ON:
      return 'sendbird-icon-toggle-on';
    case Types.USER:
      return 'sendbird-icon-user';
    default:
      return 'sendbird-icon-unknown';
    // If you see this text 'icon' replace icon for it
  }
}

var _path$S;
function _extends$V() { _extends$V = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$V.apply(this, arguments); }
function SvgIconAdd(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$V({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$S || (_path$S = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-add_svg__fill",
    d: "M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm0 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334a2.667 2.667 0 002.666 2.666h37.334a2.667 2.667 0 002.666-2.666V13.333a2.667 2.667 0 00-2.666-2.666zm-18.667 8a2.667 2.667 0 012.649 2.355l.018.311v8h8a2.667 2.667 0 01.311 5.316l-.311.018h-8v8a2.667 2.667 0 01-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 01-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0132 18.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$R;
function _extends$U() { _extends$U = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$U.apply(this, arguments); }
function SvgIconArrowLeft(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$U({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$R || (_path$R = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-arrow-left_svg__fill",
    d: "M33.886 8.781a2.668 2.668 0 01.221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 01.311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 01.222 3.52l-.221.251a2.668 2.668 0 01-3.52.222l-.252-.222L8.781 33.886a2.668 2.668 0 01-.222-3.52l.222-.252L30.114 8.781a2.668 2.668 0 013.772 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$Q;
function _extends$T() { _extends$T = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$T.apply(this, arguments); }
function SvgIconAttach(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$T({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$Q || (_path$Q = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-attach_svg__fill",
    d: "M55.334 28.926l-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 00-3.676-3.864L15.709 37.89a7.578 7.578 0 00-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 10-3.678-3.862z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _g$2, _defs;
function _extends$S() { _extends$S = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$S.apply(this, arguments); }
function SvgIconAudioOnLined(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$S({
    viewBox: "0 0 64 64",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _g$2 || (_g$2 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("g", {
    clipPath: "url(#icon-audio-on-lined_svg__clip0_1_7)"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-audio-on-lined_svg__fill",
    clipRule: "evenodd",
    d: "M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0zm-5.333 10.667a5.333 5.333 0 0110.666 0V32a5.333 5.333 0 01-10.666 0V10.667z"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-audio-on-lined_svg__fill",
    d: "M16 26.667a2.667 2.667 0 10-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 000 5.333h21.334a2.667 2.667 0 100-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 10-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16v-5.333z"
  }))), _defs || (_defs = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("defs", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("clipPath", {
    id: "icon-audio-on-lined_svg__clip0_1_7"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    fill: "#fff",
    d: "M0 0h64v64H0z"
  })))));
}

var _path$P;
function _extends$R() { _extends$R = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$R.apply(this, arguments); }
function SvgIconBan(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$R({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$P || (_path$P = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-ban_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm12.333 21.333a1 1 0 011 1v3.334a1 1 0 01-1 1H19.667a1 1 0 01-1-1v-3.334a1 1 0 011-1h24.666z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$O;
function _extends$Q() { _extends$Q = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$Q.apply(this, arguments); }
function SvgIconBroadcast(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$Q({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$O || (_path$O = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-broadcast_svg__fill",
    d: "M58.545 5.498c.08.258.122.526.122.796v46.079a2.666 2.666 0 01-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 01-7.997-7.75l-.003-.25V24a8 8 0 018-8H16L55.205 3.749a2.665 2.665 0 013.34 1.75zM21.333 44.587V48a5.333 5.333 0 0010.652.398L32 47.92l-10.667-3.333zm32-34.667l-32 9.997v18.83l32 9.997V9.92zM16 21.333h-5.333a2.67 2.67 0 00-2.65 2.356L8 24v10.667a2.667 2.667 0 002.667 2.666H16v-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$N;
function _extends$P() { _extends$P = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$P.apply(this, arguments); }
function SvgIconCamera(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$P({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$N || (_path$N = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-camera_svg__fill",
    d: "M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 017.986 7.53l.014.47v29.334a8 8 0 01-8 8H8a8 8 0 01-8-8V21.333a8 8 0 018-8h9.237l4.544-6.812a2.665 2.665 0 011.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 01-1.887 1.167l-.331.02H8a2.668 2.668 0 00-2.667 2.667v29.334A2.667 2.667 0 008 53.333h48a2.667 2.667 0 002.667-2.666V21.333A2.667 2.667 0 0056 18.667H45.333a2.665 2.665 0 01-2.218-1.188l-4.544-6.812zM32 21.333c7.364 0 13.333 5.97 13.333 13.334C45.333 42.03 39.363 48 32 48c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$M;
function _extends$O() { _extends$O = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$O.apply(this, arguments); }
function SvgIconChannels(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$O({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$M || (_path$M = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-channels_svg__fill",
    d: "M42.65 5.333l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 01.311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 01.312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 01-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 01-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 01-.311-5.315l.31-.018h11.835l1.515-13.627a2.668 2.668 0 012.634-2.373l.311.017a2.666 2.666 0 012.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.668 2.668 0 012.634-2.373zm-5.927 32l1.186-10.667H27.272l-1.184 10.667h10.635z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$L;
function _extends$N() { _extends$N = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$N.apply(this, arguments); }
function SvgIconChat(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$N({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$L || (_path$L = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-chat_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$K;
function _extends$M() { _extends$M = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$M.apply(this, arguments); }
function SvgIconChatFilled(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$M({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$K || (_path$K = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-chat-filled_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$J;
function _extends$L() { _extends$L = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$L.apply(this, arguments); }
function SvgIconChevronDown(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$L({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$J || (_path$J = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-chevron-down_svg__fill",
    d: "M16.121 21.879a2.998 2.998 0 00-4.242 0 2.998 2.998 0 000 4.242l18 18a2.998 2.998 0 004.242 0l18-18a2.998 2.998 0 000-4.242 2.998 2.998 0 00-4.242 0L32 37.757 16.121 21.88z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$I;
function _extends$K() { _extends$K = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$K.apply(this, arguments); }
function SvgIconChevronRight(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$K({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$I || (_path$I = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-chevron-right_svg__fill",
    d: "M22.114 46.114a2.668 2.668 0 003.772 3.772l16-16a2.668 2.668 0 000-3.772l-16-16a2.668 2.668 0 00-3.772 3.772L36.23 32 22.114 46.114z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$H;
function _extends$J() { _extends$J = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$J.apply(this, arguments); }
function SvgIconClose(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$J({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$H || (_path$H = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-close_svg__fill",
    d: "M52.552 11.448a2.666 2.666 0 01.222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 010 3.771 2.666 2.666 0 01-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 01-3.771 0 2.666 2.666 0 01-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 013.771 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$G;
function _extends$I() { _extends$I = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$I.apply(this, arguments); }
function SvgIconCollapse(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$I({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$G || (_path$G = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-collapse_svg__fill",
    d: "M16 8a2.667 2.667 0 00-2.649 2.356l-.018.31v42.667a2.667 2.667 0 005.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.668 2.668 0 00-.221 3.52l.221.251a2.666 2.666 0 003.52.222l.252-.222 10.666-10.666a2.666 2.666 0 00.222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 00-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0016 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$F;
function _extends$H() { _extends$H = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$H.apply(this, arguments); }
function SvgIconCopy(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$H({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$F || (_path$F = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-copy_svg__fill",
    d: "M53.333 21.333a8 8 0 018 8v24a8 8 0 01-8 8h-24a8 8 0 01-8-8v-24a8 8 0 018-8zm0 5.334h-24a2.667 2.667 0 00-2.666 2.666v24A2.667 2.667 0 0029.333 56h24A2.667 2.667 0 0056 53.333v-24a2.667 2.667 0 00-2.667-2.666zm-18.666-24a8 8 0 017.986 7.53l.014.47v2.666a2.667 2.667 0 01-5.316.311l-.018-.31v-2.667a2.67 2.67 0 00-2.355-2.65L34.667 8h-24a2.67 2.67 0 00-2.65 2.356l-.017.31v24a2.67 2.67 0 002.356 2.65l.31.017h2.667a2.667 2.667 0 01.311 5.316l-.31.018h-2.667a8.001 8.001 0 01-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013h24z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$E;
function _extends$G() { _extends$G = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$G.apply(this, arguments); }
function SvgIconCreate(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$G({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$E || (_path$E = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-create_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zm2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$D;
function _extends$F() { _extends$F = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$F.apply(this, arguments); }
function SvgIconDelete(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$F({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$D || (_path$D = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-delete_svg__fill",
    d: "M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 01.311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 01-.311-5.316L8 13.333h10.666v-2.666a8.002 8.002 0 017.53-7.987l.47-.013h10.667zm10.666 16H16v34.666a2.67 2.67 0 002.356 2.65l.31.017h26.667a2.67 2.67 0 002.65-2.356l.017-.31V18.666zm-21.332 8a2.667 2.667 0 012.648 2.355l.018.311v16a2.667 2.667 0 01-5.316.311l-.017-.31v-16a2.667 2.667 0 012.667-2.667zm10.666 0a2.67 2.67 0 012.65 2.355l.017.311v16a2.667 2.667 0 01-5.315.311l-.018-.31v-16a2.667 2.667 0 012.666-2.667zm0-18.667H26.667a2.67 2.67 0 00-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 00-2.356-2.65L37.334 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$C;
function _extends$E() { _extends$E = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$E.apply(this, arguments); }
function SvgIconDisconnected(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$E({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$C || (_path$C = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-disconnected_svg__fill",
    d: "M54.534 6.069l-.248.217-9.736 9.735-.04.04-9.573 9.573c-.15.118-.286.254-.405.404L6.286 54.286a2.423 2.423 0 003.18 3.645l.248-.217 13.374-13.373a2.419 2.419 0 001.88-.401 12.119 12.119 0 0114.04 0 2.424 2.424 0 102.808-3.952 16.951 16.951 0 00-11.303-3.072l6.743-6.744a24.105 24.105 0 0110.159 5.021 2.424 2.424 0 003.11-3.719 28.945 28.945 0 00-9.34-5.23l5.633-5.634a36.153 36.153 0 019.225 5.934 2.425 2.425 0 003.211-3.633 40.972 40.972 0 00-8.796-5.941l7.256-7.256a2.423 2.423 0 00-3.18-3.645zm-35.04 21.474a28.936 28.936 0 00-6.032 3.942 2.424 2.424 0 003.137 3.697 24.018 24.018 0 015.022-3.282 2.425 2.425 0 00-2.127-4.357zM4.748 22.909a2.424 2.424 0 003.207 3.636 36.363 36.363 0 0126.978-8.977 2.424 2.424 0 00.389-4.832A41.204 41.204 0 004.748 22.909z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$B;
function _extends$D() { _extends$D = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$D.apply(this, arguments); }
function SvgIconDocument(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$D({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$B || (_path$B = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-document_svg__fill",
    d: "M37.333 2.667a3.305 3.305 0 01.274.014l.085.01.058.008c.047.007.094.016.141.026l.029.007c.05.01.098.023.146.037l.034.01c.237.07.46.173.663.303l.034.022c.036.023.07.047.104.072l.057.043a2.646 2.646 0 01.261.228l-.126-.117c.05.043.097.088.143.135L55.21 19.438c.047.046.091.094.134.143l.035.04c.026.032.052.063.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048c.009.043.017.086.024.13l.006.048.007.051.004.041c.01.09.014.18.014.27v32a8 8 0 01-8 8H16a8 8 0 01-8-8V10.667a8 8 0 018-8h21.333zM34.666 8H16a2.667 2.667 0 00-2.667 2.667v42.666A2.667 2.667 0 0016 56h32a2.667 2.667 0 002.667-2.667L50.666 24H37.333a2.667 2.667 0 01-2.648-2.356l-.018-.31L34.666 8zm12.227 10.667l-6.894-6.894.001 6.894h6.893z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$A;
function _extends$C() { _extends$C = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$C.apply(this, arguments); }
function SvgIconDone(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$C({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$A || (_path$A = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-done_svg__fill",
    d: "M12.552 31.448a2.665 2.665 0 10-3.771 3.771l13.333 13.333a2.666 2.666 0 003.772 0L55.219 19.22a2.667 2.667 0 00-3.771-3.771L24 42.895 12.552 31.448z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$z;
function _extends$B() { _extends$B = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$B.apply(this, arguments); }
function SvgIconDoneAll(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$B({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$z || (_path$z = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-done-all_svg__fill",
    d: "M5.886 31.448L19.219 44.78a2.667 2.667 0 01-3.771 3.771L2.114 35.22a2.667 2.667 0 013.772-3.771zm52.228-16a2.666 2.666 0 113.772 3.771L32.552 48.552a2.665 2.665 0 01-3.771 0L15.448 35.22a2.665 2.665 0 010-3.771 2.665 2.665 0 013.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 010 3.771L32.556 35.215a2.665 2.665 0 01-3.771 0 2.664 2.664 0 010-3.77L44.78 15.447a2.665 2.665 0 013.771 0z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$y;
function _extends$A() { _extends$A = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$A.apply(this, arguments); }
function SvgIconDownload(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$A({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$y || (_path$y = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-download_svg__fill",
    d: "M56 42.667a2.667 2.667 0 012.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 01-7.986-7.53l-.014-.47v-8a2.667 2.667 0 015.316-.311l.018.311v8a2.67 2.67 0 002.355 2.65l.311.017h37.334a2.667 2.667 0 002.648-2.356l.018-.31v-8A2.667 2.667 0 0156 42.667zm-36.552-8.781a2.666 2.666 0 013.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 015.316-.311l.018.311v30.894l6.114-6.113a2.668 2.668 0 013.52-.221l.251.221a2.666 2.666 0 01.222 3.52l-.222.252-10.658 10.657a2.341 2.341 0 01-.135.128l.127-.119a2.67 2.67 0 01-.195.176l-.056.045a1.74 1.74 0 01-.086.064l-.056.04-.086.056-.06.036-.081.046-.079.04a2.528 2.528 0 01-.14.065l-.09.036c-.023.01-.045.017-.067.025l-.09.03-.063.019c-.043.012-.086.024-.13.034l-.013.003a3.06 3.06 0 01-.144.028l-.064.01c-.03.005-.061.009-.092.012l-.084.008a1.727 1.727 0 01-.103.006l-.069.002h-.095c-.028 0-.055-.002-.082-.003l.139.003c-.084 0-.167-.004-.249-.011l-.061-.007a1.359 1.359 0 01-.092-.012l-.09-.015a2.242 2.242 0 01-.118-.025l-.04-.01a2.644 2.644 0 01-.34-.11l-.015-.006c-.05-.02-.097-.04-.145-.063l-.042-.02L30.71 45a1.16 1.16 0 01-.067-.039c-.03-.018-.059-.035-.087-.054l-.062-.041c-.03-.02-.06-.042-.088-.063l-.04-.03-.008-.007a2.796 2.796 0 01-.251-.223L19.448 33.886z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$x;
function _extends$z() { _extends$z = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$z.apply(this, arguments); }
function SvgIconEdit(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$z({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 65 65"
  }, props), _path$x || (_path$x = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-edit_svg__fill",
    d: "M56 56a2.667 2.667 0 01.311 5.315l-.311.018H8a2.667 2.667 0 01-.311-5.316L8 56h48zM35.448 3.448a2.665 2.665 0 013.771 0l10.667 10.666a2.668 2.668 0 010 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 01-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16l-6.894-6.893z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$w;
function _extends$y() { _extends$y = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$y.apply(this, arguments); }
function SvgIconEmojiMore(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$y({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$w || (_path$w = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-emoji-more_svg__fill",
    d: "M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 01-1.144 4.111 24.669 24.669 0 00-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 011.494-2.62 2.13 2.13 0 012.62 1.494 28.895 28.895 0 011.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897C3.2 16.157 16.138 3.22 32.097 3.22zm10.705 34.792a2.133 2.133 0 012.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488-5.792 0-10.856-3.865-12.73-9.488a2.134 2.134 0 011.875-2.803l.15-.005h21.41zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23.292-.382zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133zm21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 01-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133zM54.853 0a.8.8 0 01.8.8v7.786h7.76a.8.8 0 01.8.8v2.667a.8.8 0 01-.8.8h-7.76v7.758a.8.8 0 01-.8.8h-2.666a.8.8 0 01-.8-.8v-7.758h-7.785a.8.8 0 01-.8-.8V9.387a.8.8 0 01.8-.8l7.784-.001V.8a.8.8 0 01.8-.8h2.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$v;
function _extends$x() { _extends$x = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$x.apply(this, arguments); }
function SvgIconError(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$x({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$v || (_path$v = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-error_svg__fill",
    d: "M32 5.06a8 8 0 016.561 3.424l.287.439 22.608 37.744a8 8 0 01.022 7.962 8.005 8.005 0 01-6.356 4.014l-.535.024H9.384a8.002 8.002 0 01-6.862-4.038 8.008 8.008 0 01-.226-7.493l.27-.506L25.16 8.91A8.001 8.001 0 0132 5.06zm0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.669 2.669 0 001.909 3.973l.341.027h45.144a2.67 2.67 0 002.45-3.659l-.148-.304L34.28 11.676A2.666 2.666 0 0032 10.393zm0 32.274A2.667 2.667 0 1132 48a2.667 2.667 0 010-5.333zm0-21.334a2.667 2.667 0 012.649 2.356l.018.311v10.667a2.667 2.667 0 01-5.316.311l-.018-.311V24A2.667 2.667 0 0132 21.333z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$u;
function _extends$w() { _extends$w = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$w.apply(this, arguments); }
function SvgIconExpand(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$w({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$u || (_path$u = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-expand_svg__fill",
    d: "M48 8a2.667 2.667 0 012.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 01-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.668 2.668 0 01.221 3.52l-.221.251a2.666 2.666 0 01-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 01-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 013.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0148 8z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$t;
function _extends$v() { _extends$v = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$v.apply(this, arguments); }
function SvgIconFileAudio(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$v({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$t || (_path$t = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-file-audio_svg__fill",
    d: "M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 01-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 013.156-.047zm-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 01-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 013.156-.047z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$s;
function _extends$u() { _extends$u = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$u.apply(this, arguments); }
function SvgIconFileDocument(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$u({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$s || (_path$s = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-file-document_svg__fill",
    d: "M39.414 6.4a2.41 2.41 0 011.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm0-8.533l-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16zm-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 00-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.152 2.152 0 001.985-2.155c0-1.193-.957-2.16-2.137-2.16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$r;
function _extends$t() { _extends$t = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$t.apply(this, arguments); }
function SvgIconFreeze(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$t({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$r || (_path$r = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-freeze_svg__fill",
    d: "M41.636 3.226l.251.222a2.668 2.668 0 01.222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 015.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.668 2.668 0 011.952 2.938l-.067.328a2.667 2.667 0 01-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.667 2.667 0 012.937 1.952l.067.328a2.669 2.669 0 01-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 01-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 01-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 01-3.52.222l-.251-.222a2.666 2.666 0 01-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 01-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 01-1.953-2.937l.067-.328a2.665 2.665 0 012.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 01-2.937-1.952l-.067-.328a2.668 2.668 0 011.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 015.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 010-3.771 2.666 2.666 0 013.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 013.52-.222z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$q;
function _extends$s() { _extends$s = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$s.apply(this, arguments); }
function SvgIconGif(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$s({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$q || (_path$q = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-gif_svg__fill",
    d: "M16.664 45.333c2.155 0 4.119-.318 5.89-.953 1.772-.636 3.143-1.53 4.113-2.683V31.34h-10.29v3.94h4.902v4.474c-.861.856-2.304 1.283-4.327 1.283-2.011 0-3.538-.695-4.58-2.085-1.04-1.39-1.562-3.446-1.562-6.168v-1.657c.012-2.698.497-4.73 1.455-6.097.958-1.366 2.352-2.05 4.184-2.05 1.437 0 2.565.345 3.385 1.034.82.69 1.35 1.777 1.59 3.262h5.243c-.324-2.804-1.36-4.94-3.107-6.408-1.748-1.468-4.172-2.201-7.273-2.201-2.226 0-4.169.502-5.827 1.506-1.658 1.004-2.927 2.454-3.807 4.35-.88 1.895-1.32 4.138-1.32 6.728v1.765c.024 2.52.5 4.712 1.428 6.578.928 1.865 2.245 3.288 3.95 4.269 1.707.98 3.69 1.47 5.953 1.47zm20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666h5.063z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$p;
function _extends$r() { _extends$r = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$r.apply(this, arguments); }
function SvgIconInfo(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$r({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$p || (_path$p = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-info_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8zm1.667 21.333a1 1 0 011 1v14a1 1 0 01-1 1h-3.334a1 1 0 01-1-1v-14a1 1 0 011-1h3.334zm-1.667-8a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$o;
function _extends$q() { _extends$q = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$q.apply(this, arguments); }
function SvgIconLeave(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$q({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$o || (_path$o = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-leave_svg__fill",
    d: "M32 5.333a2.667 2.667 0 01.311 5.316l-.311.018H10.667a2.67 2.67 0 00-2.65 2.355L8 13.333v37.334a2.667 2.667 0 002.356 2.648l.31.018H32a2.667 2.667 0 01.311 5.316l-.311.018H10.667a8.001 8.001 0 01-7.987-7.53l-.013-.47V13.333a8 8 0 017.53-7.986l.47-.014H32zm17.634 13.893l.252.222 10.666 10.666a2.666 2.666 0 01.222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 01-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 01-.311-5.315l.311-.018h33.56l-7.446-7.448a2.668 2.668 0 01-.221-3.52l.221-.251a2.666 2.666 0 013.52-.222z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$n;
function _extends$p() { _extends$p = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$p.apply(this, arguments); }
function SvgIconMembers(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$p({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$n || (_path$n = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-members_svg__fill",
    d: "M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM54 37.765a13.333 13.333 0 019.986 12.297l.014.605V56a2.667 2.667 0 01-5.315.311L58.667 56v-5.331a8 8 0 00-6-7.74A2.667 2.667 0 1154 37.765zM24 5.333c7.364 0 13.333 5.97 13.333 13.334C37.333 26.03 31.363 32 24 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm19.328.43a13.333 13.333 0 010 25.834 2.667 2.667 0 11-1.323-5.167 8 8 0 000-15.5 2.667 2.667 0 111.323-5.167zM24 10.667a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$m;
function _extends$o() { _extends$o = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$o.apply(this, arguments); }
function SvgIconMessage(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$o({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$m || (_path$m = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-message_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58c-5.965 1.912-10.133 2.572-12.504 1.981-2.799-.698-3.351-1.919-1.657-3.663 1.171-1.396 2.147-3.14 2.928-5.234.622-1.668.377-4.001-.737-7A29.15 29.15 0 012.666 32C2.667 15.8 15.8 2.667 32 2.667zM32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62.067 62.067 0 004.886-1.363l1.721-.568 2.04-.696 1.95.917A23.882 23.882 0 0032 56c13.255 0 24-10.745 24-24S45.255 8 32 8zM18.667 29.333a2.667 2.667 0 11-.001 5.333 2.667 2.667 0 01.001-5.333zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334zm13.333 0a2.667 2.667 0 110 5.334 2.667 2.667 0 010-5.334z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$l;
function _extends$n() { _extends$n = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$n.apply(this, arguments); }
function SvgIconModerations(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$n({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$l || (_path$l = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-moderations_svg__fill",
    d: "M18.667 34.667a2.667 2.667 0 01.311 5.316l-.311.017h-5.334v16a2.667 2.667 0 01-5.316.311L8 56V40H2.667a2.667 2.667 0 01-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 012.649 2.356l.018.311v24a2.667 2.667 0 01-5.316.311L29.333 56V32A2.667 2.667 0 0132 29.333zM61.333 40a2.667 2.667 0 01.311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 01-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 01-.311-5.316l.311-.017h16zm-8-34.667a2.67 2.67 0 012.65 2.356L56 8v24a2.667 2.667 0 01-5.315.311L50.667 32V8a2.667 2.667 0 012.666-2.667zm-42.666 0a2.667 2.667 0 012.648 2.356l.018.311v18.667a2.667 2.667 0 01-5.316.311L8 26.667V8a2.667 2.667 0 012.667-2.667zm21.333 0a2.667 2.667 0 012.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 01.311 5.317L40 24H24a2.667 2.667 0 01-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0132 5.333z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$k;
function _extends$m() { _extends$m = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$m.apply(this, arguments); }
function SvgIconMore(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$m({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$k || (_path$k = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-more_svg__fill",
    d: "M32 45.333a5.333 5.333 0 110 10.666 5.333 5.333 0 010-10.666zM32 28a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 28zm0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$j;
function _extends$l() { _extends$l = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$l.apply(this, arguments); }
function SvgIconMute(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$l({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$j || (_path$j = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-mute_svg__fill",
    d: "M55.62 19.616l.067.123A26.552 26.552 0 0158.667 32c0 4.326-1.03 8.41-2.864 12.025-1.012 2.726-1.235 4.847-.67 6.363.71 1.903 1.598 3.49 2.662 4.758 1.54 1.586 1.039 2.696-1.506 3.33-2.09.521-5.716-.027-10.879-1.646l-.488-.155-1.594-.527A26.56 26.56 0 0132 58.667a26.55 26.55 0 01-12.326-3.014l-.059-.03 4-4A21.24 21.24 0 0032 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219c.728.225 1.414.423 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.188 21.188 0 001.895-8.8 21.24 21.24 0 00-1.71-8.385l3.997-3.999zm2.266-13.502a2.668 2.668 0 01.221 3.52l-.221.252-48 48a2.668 2.668 0 01-3.993-3.52l.221-.252 5.238-5.237a26.563 26.563 0 01-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0116.877 6.02l5.237-5.239a2.668 2.668 0 013.772 0zM32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.248 21.248 0 0032 10.666z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$i;
function _extends$k() { _extends$k = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$k.apply(this, arguments); }
function SvgIconNotifications(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$k({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$i || (_path$i = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-notifications_svg__fill",
    d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zM32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.583 10.583 0 01-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$h;
function _extends$j() { _extends$j = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$j.apply(this, arguments); }
function SvgIconNotificationsOffFilled(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$j({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$h || (_path$h = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-notifications-off-filled_svg__fill",
    d: "M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 01-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017h9.226zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 012.85-.117l.127.117a2.105 2.105 0 010 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 010-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 004.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333zm20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 004.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31l28.54-28.538z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$g;
function _extends$i() { _extends$i = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$i.apply(this, arguments); }
function SvgIconOperator(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$i({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$g || (_path$g = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-operator_svg__fill",
    d: "M29.83 6.45a2.667 2.667 0 014.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0150.666 56H13.333a2.666 2.666 0 01-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 01-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 01-3.632-.281l-.204-.251L32 12.587zM32 32a5.333 5.333 0 110 10.668A5.333 5.333 0 0132 32z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$f;
function _extends$h() { _extends$h = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$h.apply(this, arguments); }
function SvgIconPhoto(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$h({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$f || (_path$f = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-photo_svg__fill",
    d: "M50.667 5.333a8 8 0 018 8v37.334a8 8 0 01-8 8H13.333a8 8 0 01-8-8V13.333a8 8 0 018-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 002.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.668 2.668 0 013.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 00-2.498-2.661l-.168-.005zm-28 5.333a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$e;
function _extends$g() { _extends$g = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$g.apply(this, arguments); }
function SvgIconPlay(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$g({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$e || (_path$e = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-play_svg__fill",
    d: "M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016L51.908 34.75z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$d;
function _extends$f() { _extends$f = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$f.apply(this, arguments); }
function SvgIconPlus(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$f({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$d || (_path$d = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-plus_svg__fill",
    d: "M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0v18.666z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$c;
function _extends$e() { _extends$e = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$e.apply(this, arguments); }
function SvgIconQuestion(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$e({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$c || (_path$c = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-question_svg__fill",
    d: "M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333zM32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24zm2.213-18.63a2.667 2.667 0 11-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 00-10.364-1.777 2.667 2.667 0 01-5.032-1.77 10.668 10.668 0 0120.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21.268 21.268 0 01-2.813 1.578v.893zm-5.333 7.523a2.667 2.667 0 115.333 0v.44a2.667 2.667 0 11-5.333 0v-.44z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$b;
function _extends$d() { _extends$d = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$d.apply(this, arguments); }
function SvgIconRefresh(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$d({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$b || (_path$b = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-refresh_svg__fill",
    d: "M46.14 14.43l.562.537 6.631 6.167v-7.8a2.67 2.67 0 012.356-2.65l.311-.017a2.667 2.667 0 012.649 2.355l.018.311v16a2.67 2.67 0 01-2.356 2.65L56 32H40a2.667 2.667 0 01-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 015.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$a;
function _extends$c() { _extends$c = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$c.apply(this, arguments); }
function SvgIconRemove(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$c({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$a || (_path$a = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-remove_svg__fill",
    d: "M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667zm9.886 19.447a2.668 2.668 0 00-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 00-3.638.124l-.124.134a2.667 2.667 0 00.124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 00.124 3.638l.134.124a2.667 2.667 0 003.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 003.638-.124l.124-.134a2.667 2.667 0 00-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 00-.124-3.638z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$9;
function _extends$b() { _extends$b = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$b.apply(this, arguments); }
function SvgIconReplyFilled(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$b({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 12 12"
  }, props), _path$9 || (_path$9 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-reply-filled_svg__fill",
    d: "M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 00.062-.164c-.07-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.331 9.331 0 00-2.406-.655 9.542 9.542 0 00-.862-.078V2.225a.225.225 0 00-.128-.203.23.23 0 00-.24.028L.084 5.692A.221.221 0 000 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.222.222 0 00.13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.39 6.39 0 012.087.96c1.018.724 1.398 1.5 1.4 1.507a.23.23 0 00.205.128z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$8;
function _extends$a() { _extends$a = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$a.apply(this, arguments); }
function SvgIconSearch(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$a({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$8 || (_path$8 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-search_svg__fill",
    d: "M26.667 48C14.885 48 5.333 38.449 5.333 26.667c0-11.782 9.552-21.334 21.334-21.334S48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 01-3.772 3.772l-13.67-13.67A21.239 21.239 0 0126.667 48zm0-5.333c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16-8.837 0-16 7.163-16 16 0 8.836 7.163 16 16 16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$7;
function _extends$9() { _extends$9 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$9.apply(this, arguments); }
function SvgIconSend(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$9({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$7 || (_path$7 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-send_svg__fill",
    d: "M59.795 29.43L7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 001.544 1.275l32.273 5.394L11.4 37.47a1.998 1.998 0 00-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$6;
function _extends$8() { _extends$8 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$8.apply(this, arguments); }
function SvgIconSettingsFilled(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$8({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$6 || (_path$6 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-settings-filled_svg__fill",
    d: "M32 2.667A5.332 5.332 0 0137.333 8v.24A4.4 4.4 0 0040 12.267a4.4 4.4 0 004.853-.88l.16-.16a5.332 5.332 0 017.547 0 5.333 5.333 0 010 7.546l-.16.16a4.401 4.401 0 00-.88 4.854V24a4.4 4.4 0 004.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0051.733 40a4.4 4.4 0 00.88 4.853l.16.16a5.332 5.332 0 010 7.547 5.333 5.333 0 01-7.546 0l-.16-.16a4.401 4.401 0 00-4.854-.88 4.397 4.397 0 00-2.666 4.027V56a5.333 5.333 0 01-10.667 0v-.24A4.4 4.4 0 0024 51.733a4.4 4.4 0 00-4.853.88l-.16.16a5.332 5.332 0 01-7.547 0 5.333 5.333 0 010-7.546l.16-.16a4.401 4.401 0 00.88-4.854 4.397 4.397 0 00-4.027-2.666H8A5.333 5.333 0 018 26.88h.24A4.4 4.4 0 0012.267 24a4.4 4.4 0 00-.88-4.853l-.16-.16a5.332 5.332 0 010-7.547 5.333 5.333 0 017.546 0l.16.16a4.401 4.401 0 004.854.88H24a4.4 4.4 0 002.667-4.027V8A5.332 5.332 0 0132 2.667zM32 24a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$5;
function _extends$7() { _extends$7 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$7.apply(this, arguments); }
function SvgIconSlideLeft(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$7({
    xmlns: "http://www.w3.org/2000/svg",
    width: 32,
    height: 32,
    fill: "none"
  }, props), _path$5 || (_path$5 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M21.943 24.39a1.333 1.333 0 01-1.886 1.886l-9.333-9.333a1.333 1.333 0 010-1.886l9.333-9.333a1.333 1.333 0 111.886 1.885L13.553 16l8.39 8.391z",
    fill: "#000"
  })));
}

var _path$4;
function _extends$6() { _extends$6 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$6.apply(this, arguments); }
function SvgIconSpinner(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$6({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$4 || (_path$4 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-spinner_svg__fill",
    d: "M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 105.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 100 5.677z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$3;
function _extends$5() { _extends$5 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$5.apply(this, arguments); }
function SvgIconSupergroup(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$5({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$3 || (_path$3 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-supergroup_svg__fill",
    d: "M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 01-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 01-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011h9.778zm18.578-17.291c.266 0 .53.04.784.118 4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 01-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 01-2.648-2.356l-.018-.31a2.67 2.67 0 012.355-2.65l.311-.017h2.934zm-44 0l.31.018a2.666 2.666 0 012.356 2.648l-.018.311a2.666 2.666 0 01-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 010 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809.255-.078.52-.118.788-.118h2.953zM32 19.958c5.512 0 10 4.409 10 9.871 0 5.463-4.488 9.872-10 9.872s-10-4.41-10-9.872 4.488-9.871 10-9.871zm0 5.333c-2.588 0-4.667 2.043-4.667 4.538 0 2.496 2.08 4.538 4.667 4.538 2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538zM17.333 2.667c5.513 0 10 4.409 10 9.871 0 5.462-4.487 9.871-10 9.871-5.512 0-10-4.409-10-9.871 0-5.462 4.488-9.871 10-9.871zm29.334 0c5.512 0 10 4.409 10 9.871 0 5.462-4.488 9.871-10 9.871-5.513 0-10-4.409-10-9.871 0-5.462 4.487-9.871 10-9.871zM17.333 8c-2.587 0-4.666 2.042-4.666 4.538 0 2.496 2.079 4.538 4.666 4.538 2.588 0 4.667-2.042 4.667-4.538C22 10.042 19.921 8 17.333 8zm29.334 0C44.079 8 42 10.042 42 12.538c0 2.496 2.079 4.538 4.667 4.538 2.587 0 4.666-2.042 4.666-4.538 0-2.496-2.079-4.538-4.666-4.538z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _path$2, _path2;
function _extends$4() { _extends$4 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$4.apply(this, arguments); }
function SvgIconThread(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$4({
    viewBox: "0 0 64 64",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, props), _path$2 || (_path$2 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-thread_svg__fill",
    clipRule: "evenodd",
    d: "M38.824 25.895a2.95 2.95 0 014.16-.074L57.1 39.378a2.921 2.921 0 01.002 4.213L42.985 57.177a2.95 2.95 0 01-4.158-.07 2.919 2.919 0 01.07-4.14l11.928-11.48-11.926-11.451a2.919 2.919 0 01-.075-4.14z"
  })), _path2 || (_path2 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-thread_svg__fill",
    clipRule: "evenodd",
    d: "M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716 0 1.5-1.283 2.716-2.866 2.716H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6z"
  })));
}

var _path$1;
function _extends$3() { _extends$3 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$3.apply(this, arguments); }
function SvgIconThumbnailNone(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$3({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path$1 || (_path$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-thumbnail-none_svg__fill",
    d: "M34.667 5.333a2.667 2.667 0 010 5.334H13.333a2.667 2.667 0 00-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 013.771 0l8.781 8.78v-4.228a2.667 2.667 0 012.498-2.661l.169-.005a2.667 2.667 0 012.667 2.666v21.334a8 8 0 01-8 8H13.33a8 8 0 01-7.998-8V13.333a8 8 0 018-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 002.661-2.498l.005-.168v-9.563L42.667 30.438zM22.667 16a6.666 6.666 0 110 13.333 6.666 6.666 0 010-13.333zm0 5.333a1.334 1.334 0 100 2.667 1.334 1.334 0 000-2.667zM56.78 3.448a2.665 2.665 0 013.771 0 2.665 2.665 0 010 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 01-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 01-3.638.125l-.133-.125a2.665 2.665 0 010-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 01-.125-3.638l.125-.133a2.665 2.665 0 013.771 0l4.78 4.78z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

var _g$1;
function _extends$2() { _extends$2 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$2.apply(this, arguments); }
function SvgIconToggleoff(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$2({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 88 48"
  }, props), _g$1 || (_g$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("g", {
    fill: "none",
    fillRule: "evenodd"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("rect", {
    className: "icon-toggleoff_svg__fill",
    width: 80,
    height: 40,
    x: 4,
    y: 4,
    fill: "#000",
    rx: 20
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("circle", {
    cx: 24,
    cy: 24,
    r: 12,
    fill: "#FFF"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    fill: "#FFF",
    d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-toggleoff_svg__fill",
    fill: "#000",
    d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"
  }))));
}

var _g;
function _extends$1() { _extends$1 = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$1.apply(this, arguments); }
function SvgIconToggleon(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", _extends$1({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 88 48"
  }, props), _g || (_g = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("g", {
    fill: "none",
    fillRule: "evenodd"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("rect", {
    className: "icon-toggleon_svg__fill",
    width: 80,
    height: 40,
    x: 4,
    y: 4,
    fill: "#000",
    rx: 20
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("circle", {
    cx: 64,
    cy: 24,
    r: 12,
    fill: "#FFF"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    fill: "#FFF",
    d: "M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992L64 6z"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-toggleon_svg__fill",
    fill: "#000",
    d: "M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0zm0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4h40z"
  }))));
}

var _path;
function Icon_extends() { Icon_extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return Icon_extends.apply(this, arguments); }
function SvgIconUser(props) {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("svg", Icon_extends({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 64 64"
  }, props), _path || (_path = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_["createElement"]("path", {
    className: "icon-user_svg__fill",
    d: "M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 01-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 00-7.986 7.53l-.014.47V56a2.667 2.667 0 01-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013h21.334zM32 5.333c7.364 0 13.333 5.97 13.333 13.334C45.333 26.03 39.363 32 32 32c-7.364 0-13.333-5.97-13.333-13.333 0-7.364 5.97-13.334 13.333-13.334zm0 5.334a8 8 0 100 16 8 8 0 000-16z",
    fill: "#000",
    fillRule: "evenodd"
  })));
}

function changeTypeToIconComponent(type) {
  switch (type) {
    case Types.ADD:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconAdd, null);
    case Types.ARROW_LEFT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconArrowLeft, null);
    case Types.ATTACH:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconAttach, null);
    case Types.AUDIO_ON_LINED:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconAudioOnLined, null);
    case Types.BAN:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconBan, null);
    case Types.BROADCAST:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconBroadcast, null);
    case Types.CAMERA:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCamera, null);
    case Types.CHANNELS:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChannels, null);
    case Types.CHAT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChat, null);
    case Types.CHAT_FILLED:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChatFilled, null);
    case Types.CHEVRON_DOWN:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChevronDown, null);
    case Types.CHEVRON_RIGHT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconChevronRight, null);
    case Types.CLOSE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconClose, null);
    case Types.COLLAPSE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCollapse, null);
    case Types.COPY:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCopy, null);
    case Types.CREATE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconCreate, null);
    case Types.DELETE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDelete, null);
    case Types.DISCONNECTED:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDisconnected, null);
    case Types.DOCUMENT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDocument, null);
    case Types.DONE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDone, null);
    case Types.DONE_ALL:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDoneAll, null);
    case Types.DOWNLOAD:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconDownload, null);
    case Types.EDIT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconEdit, null);
    case Types.EMOJI_MORE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconEmojiMore, null);
    case Types.ERROR:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconError, null);
    case Types.EXPAND:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconExpand, null);
    case Types.FILE_AUDIO:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFileAudio, null);
    case Types.FILE_DOCUMENT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFileDocument, null);
    case Types.FREEZE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconFreeze, null);
    case Types.GIF:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconGif, null);
    case Types.INFO:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconInfo, null);
    case Types.LEAVE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconLeave, null);
    case Types.MEMBERS:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMembers, null);
    case Types.MESSAGE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMessage, null);
    case Types.MODERATIONS:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconModerations, null);
    case Types.MORE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMore, null);
    case Types.MUTE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconMute, null);
    case Types.NOTIFICATIONS:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconNotifications, null);
    case Types.NOTIFICATIONS_OFF_FILLED:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconNotificationsOffFilled, null);
    case Types.OPERATOR:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconOperator, null);
    case Types.PHOTO:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconPhoto, null);
    case Types.PLAY:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconPlay, null);
    case Types.PLUS:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconPlus, null);
    case Types.QUESTION:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconQuestion, null);
    case Types.REFRESH:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconRefresh, null);
    case Types.REMOVE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconRemove, null);
    case Types.REPLY:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconReplyFilled, null);
    case Types.SEARCH:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSearch, null);
    case Types.SEND:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSend, null);
    case Types.SETTINGS_FILLED:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSettingsFilled, null);
    case Types.SLIDE_LEFT:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSlideLeft, null);
    case Types.SPINNER:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSpinner, null);
    case Types.SUPERGROUP:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconSupergroup, null);
    case Types.THREAD:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconThread, null);
    case Types.THUMBNAIL_NONE:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconThumbnailNone, null);
    case Types.TOGGLE_OFF:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconToggleoff, null);
    case Types.TOGGLE_ON:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconToggleon, null);
    case Types.USER:
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SvgIconUser, null);
    default:
      return 'icon';
    // If you see this text 'icon' replace icon for it
  }
}

function Icon(_ref) {
  let {
    className,
    type,
    fillColor,
    width,
    height,
    onClick,
    children
  } = _ref;
  const iconStyle = {
    width: typeof width === 'string' ? width : `${width}px`,
    minWidth: typeof width === 'string' ? width : `${width}px`,
    height: typeof height === 'string' ? height : `${height}px`,
    minHeight: typeof height === 'string' ? height : `${height}px`
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-icon', changeTypeToIconClassName(type), Icon_changeColorToClassName(fillColor)].join(' '),
    role: "button",
    onClick: onClick,
    onKeyDown: onClick,
    tabIndex: "0",
    style: iconStyle
  }, children || changeTypeToIconComponent(type));
}
Icon.propTypes = {
  className: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.arrayOf(prop_types_default.a.string)]),
  /** Type: Use strings from below list */
  type: prop_types_default.a.oneOfType([prop_types_default.a.oneOf(Object.keys(Types)), prop_types_default.a.string]).isRequired,
  /** Type: Use Colors from below list */
  fillColor: prop_types_default.a.oneOf(Object.keys(Icon_Colors)),
  width: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.number]),
  height: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.number]),
  onClick: prop_types_default.a.func,
  children: prop_types_default.a.element
};
Icon.defaultProps = {
  className: '',
  fillColor: Icon_Colors.DEFAULT,
  width: 26,
  height: 26,
  onClick: () => {},
  children: null
};
const IconTypes = Types;
const IconColors = Icon_Colors;


//# sourceMappingURL=Icon.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/IconButton.js



const IconButton = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef((props, ref) => {
  const {
    className = '',
    children,
    disabled = false,
    width = '56px',
    height = '56px',
    type = 'button',
    style = {},
    onBlur = () => {/* noop */},
    onClick = () => {/* noop */}
  } = props;
  const [isPressed, setIsPressed] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("button", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-iconbutton', isPressed ? 'sendbird-iconbutton--pressed' : ''].join(' '),
    disabled: disabled,
    ref: ref,
    type: type,
    style: _objectSpread2(_objectSpread2({}, style), {}, {
      height,
      width
    }),
    onClick: e => {
      if (disabled) {
        return;
      }
      setIsPressed(true);
      onClick === null || onClick === void 0 ? void 0 : onClick(e);
    },
    onBlur: e => {
      setIsPressed(false);
      onBlur === null || onBlur === void 0 ? void 0 : onBlur(e);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
    className: "sendbird-iconbutton__inner"
  }, children));
});


//# sourceMappingURL=IconButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MediaQueryContext-aebb709a.js


const DEFAULT_MOBILE = false;
// const DEFAULT_MOBILE = '768px';
const MOBILE_CLASSNAME = 'sendbird--mobile-mode';
const MediaQueryContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
  breakpoint: DEFAULT_MOBILE,
  isMobile: false
});
const addClassNameToBody = () => {
  try {
    const body = document.querySelector('body');
    body === null || body === void 0 ? void 0 : body.classList.add(MOBILE_CLASSNAME);
  } catch (_unused) {
    // noop
  }
};
const removeClassNameFromBody = () => {
  try {
    const body = document.querySelector('body');
    body === null || body === void 0 ? void 0 : body.classList.remove(MOBILE_CLASSNAME);
  } catch (_unused2) {
    // noop
  }
};
const MediaQueryProvider = props => {
  const {
    children,
    logger
  } = props;
  const breakpoint = (props === null || props === void 0 ? void 0 : props.breakpoint) || false;
  const [isMobile, setIsMobile] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _logger$info6;
    const updateSize = () => {
      if (typeof breakpoint === 'boolean') {
        setIsMobile(breakpoint);
        if (breakpoint) {
          var _logger$info;
          logger === null || logger === void 0 ? void 0 : (_logger$info = logger.info) === null || _logger$info === void 0 ? void 0 : _logger$info.call(logger, 'MediaQueryProvider: isMobile: true');
          addClassNameToBody();
        } else {
          var _logger$info2;
          logger === null || logger === void 0 ? void 0 : (_logger$info2 = logger.info) === null || _logger$info2 === void 0 ? void 0 : _logger$info2.call(logger, 'MediaQueryProvider: isMobile: false');
          removeClassNameFromBody();
        }
      } else {
        var _logger$info3;
        const mq = window.matchMedia(`(max-width: ${breakpoint})`);
        logger === null || logger === void 0 ? void 0 : (_logger$info3 = logger.info) === null || _logger$info3 === void 0 ? void 0 : _logger$info3.call(logger, `MediaQueryProvider: Screensize updated to ${breakpoint}`);
        if (mq.matches) {
          var _logger$info4;
          setIsMobile(true);
          addClassNameToBody();
          logger === null || logger === void 0 ? void 0 : (_logger$info4 = logger.info) === null || _logger$info4 === void 0 ? void 0 : _logger$info4.call(logger, 'MediaQueryProvider: isMobile: true');
        } else {
          var _logger$info5;
          setIsMobile(false);
          removeClassNameFromBody();
          logger === null || logger === void 0 ? void 0 : (_logger$info5 = logger.info) === null || _logger$info5 === void 0 ? void 0 : _logger$info5.call(logger, 'MediaQueryProvider: isMobile: false');
        }
      }
    };
    updateSize();
    window.addEventListener('resize', updateSize);
    logger === null || logger === void 0 ? void 0 : (_logger$info6 = logger.info) === null || _logger$info6 === void 0 ? void 0 : _logger$info6.call(logger, 'MediaQueryProvider: addEventListener', {
      updateSize
    });
    return () => {
      var _logger$info7;
      window.removeEventListener('resize', updateSize);
      logger === null || logger === void 0 ? void 0 : (_logger$info7 = logger.info) === null || _logger$info7 === void 0 ? void 0 : _logger$info7.call(logger, 'MediaQueryProvider: removeEventListener', {
        updateSize
      });
    };
  }, [breakpoint]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MediaQueryContext.Provider, {
    value: {
      breakpoint,
      isMobile
    }
  }, children);
};
const useMediaQueryContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(MediaQueryContext);


//# sourceMappingURL=MediaQueryContext-aebb709a.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Modal.js














const ModalHeader = _ref => {
  let {
    titleText
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-modal__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_1,
    color: LabelColors.ONBACKGROUND_1
  }, titleText));
};
const ModalBody = _ref2 => {
  let {
    children
  } = _ref2;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-modal__body"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_2
  }, children));
};
const ModalFooter = _ref3 => {
  let {
    submitText,
    disabled = false,
    type = ButtonTypes.DANGER,
    onSubmit,
    onCancel
  } = _ref3;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-modal__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    onClick: onCancel
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.BUTTON__CANCEL)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: type,
    disabled: disabled,
    onClick: onSubmit
  }, submitText));
};
function Modal(props) {
  const {
    children = null,
    className = '',
    isCloseOnClickOutside = false,
    isFullScreenOnMobile = false,
    titleText,
    submitText,
    disabled = false,
    hideFooter = false,
    type = ButtonTypes.DANGER,
    onCancel = () => {/* noop */},
    onSubmit = () => {/* noop */},
    renderHeader
  } = props;
  const {
    isMobile
  } = useMediaQueryContext();
  return /*#__PURE__*/Object(react_dom["createPortal"])( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `
      sendbird-modal ${className}
      ${isFullScreenOnMobile && isMobile ? 'sendbird-modal--full-mobile' : ''}
    `
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-modal__content"
  }, (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalHeader, {
    titleText: titleText
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalBody, null, children), !hideFooter && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ModalFooter, {
    disabled: disabled,
    onCancel: onCancel,
    onSubmit: onSubmit,
    submitText: submitText,
    type: type
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-modal__close"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    width: "32px",
    height: "32px",
    onClick: onCancel
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.DEFAULT,
    width: "24px",
    height: "24px"
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `
          sendbird-modal__backdrop
          ${isCloseOnClickOutside && 'sendbird-modal__backdrop--clickoutside'}
        `,
    onClick: e => {
      e === null || e === void 0 ? void 0 : e.stopPropagation();
      if (isCloseOnClickOutside) {
        onCancel();
      }
    }
  })), document.getElementById(MODAL_ROOT));
}


//# sourceMappingURL=Modal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/VoiceRecorder/context.js


















// Input props of VoiceRecorder

// Output of VoiceRecorder

const context_noop = () => {/* noop */};
const context_Context = /*#__PURE__*/Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["createContext"])({
  start: context_noop,
  stop: context_noop,
  isRecordable: false
});
const VoiceRecorderProvider = props => {
  var _BROWSER_SUPPORT_MIME;
  const {
    children
  } = props;
  const {
    config
  } = useSendbirdStateContext();
  const {
    logger,
    isVoiceMessageEnabled
  } = config;
  const [mediaRecorder, setMediaRecorder] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [isRecordable, setIsRecordable] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [permissionWarning, setPermissionWarning] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = useLocalization();
  const checkPermission = () => {
    try {
      // Type '"microphone"' is not assignable to type 'PermissionName'.ts(2322)
      // this is typescript issue
      // https://github.com/microsoft/TypeScript/issues/33923
      // @ts-expect-error
      navigator.permissions.query({
        name: 'microphone'
      }).then(result => {
        if (result.state === 'denied') {
          logger.warning('VoiceRecorder: Permission denied.');
          setPermissionWarning(true);
        }
      });
    } catch (error) {
      logger.warning('VoiceRecorder: Failed to check permission.', error);
    }
  };
  const browserSupportMimeType = (_BROWSER_SUPPORT_MIME = consts_397a92f1["a" /* B */].find(mimeType => MediaRecorder.isTypeSupported(mimeType))) !== null && _BROWSER_SUPPORT_MIME !== void 0 ? _BROWSER_SUPPORT_MIME : '';
  if (!browserSupportMimeType) {
    logger.error('VoiceRecorder: Browser does not support mimeType', {
      mimmeTypes: consts_397a92f1["a" /* B */]
    });
  }
  const [webAudioUtils, setWebAudioUtils] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isVoiceMessageEnabled && !webAudioUtils) {
      __webpack_require__.e(/* import() */ 1).then(__webpack_require__.bind(null, 22)).then(data => {
        setWebAudioUtils(data);
      });
    }
  }, []);
  const start = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(eventHandler => {
    var _navigator, _navigator$mediaDevic, _navigator$mediaDevic2;
    if (isVoiceMessageEnabled && !webAudioUtils) {
      logger.error('VoiceRecorder: Recording audio processor is being loaded.');
      return;
    }
    logger.info('VoiceRecorder: Start recording.');
    if (mediaRecorder) {
      stop();
      logger.info('VoiceRecorder: Previous mediaRecorder is stopped.');
    }
    checkPermission();
    (_navigator = navigator) === null || _navigator === void 0 ? void 0 : (_navigator$mediaDevic = _navigator.mediaDevices) === null || _navigator$mediaDevic === void 0 ? void 0 : (_navigator$mediaDevic2 = _navigator$mediaDevic.getUserMedia) === null || _navigator$mediaDevic2 === void 0 ? void 0 : _navigator$mediaDevic2.call(_navigator$mediaDevic, {
      audio: true
    }).then(stream => {
      logger.info('VoiceRecorder: Succeeded getting media stream.', stream);
      setIsRecordable(true);
      const mediaRecorder = new MediaRecorder(stream, {
        mimeType: browserSupportMimeType,
        audioBitsPerSecond: consts_397a92f1["m" /* h */]
      });
      mediaRecorder.ondataavailable = e => {
        var _stream$getAudioTrack, _stream$getAudioTrack2, _stream$getAudioTrack3;
        // when recording stops
        logger.info('VoiceRecorder: Succeeded getting an available data.', e.data);
        const audioFile = new File([e.data], consts_397a92f1["g" /* b */], {
          lastModified: new Date().getTime(),
          type: consts_397a92f1["h" /* c */]
        });
        webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.downsampleToWav(audioFile, buffer => {
          const mp3Buffer = webAudioUtils === null || webAudioUtils === void 0 ? void 0 : webAudioUtils.encodeMp3(buffer);
          const mp3blob = new Blob(mp3Buffer, {
            type: consts_397a92f1["h" /* c */]
          });
          const convertedAudioFile = new File([mp3blob], consts_397a92f1["g" /* b */], {
            lastModified: new Date().getTime(),
            type: consts_397a92f1["h" /* c */]
          });
          eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingEnded(convertedAudioFile);
          logger.info('VoiceRecorder: Succeeded converting audio file.', convertedAudioFile);
        });
        stream === null || stream === void 0 ? void 0 : (_stream$getAudioTrack = stream.getAudioTracks) === null || _stream$getAudioTrack === void 0 ? void 0 : (_stream$getAudioTrack2 = (_stream$getAudioTrack3 = _stream$getAudioTrack.call(stream)).forEach) === null || _stream$getAudioTrack2 === void 0 ? void 0 : _stream$getAudioTrack2.call(_stream$getAudioTrack3, track => track === null || track === void 0 ? void 0 : track.stop());
        setIsRecordable(false);
      };
      mediaRecorder === null || mediaRecorder === void 0 ? void 0 : mediaRecorder.start();
      setMediaRecorder(mediaRecorder);
      eventHandler === null || eventHandler === void 0 ? void 0 : eventHandler.onRecordingStarted();
    }).catch(err => {
      logger.error('VoiceRecorder: Failed getting media stream.', err);
      setMediaRecorder(null);
    });
  }, [mediaRecorder, webAudioUtils]);
  const stop = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    // Stop recording
    mediaRecorder === null || mediaRecorder === void 0 ? void 0 : mediaRecorder.stop();
    setMediaRecorder(null);
    setIsRecordable(false);
    logger.info('VoiceRecorder: Stop recording.');
  }, [mediaRecorder]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(context_Context.Provider, {
    value: {
      start,
      stop,
      isRecordable
    }
  }, children, permissionWarning && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    hideFooter: true,
    onCancel: () => setPermissionWarning(false)
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.VOICE_RECORDING_PERMISSION_DENIED)));
};
const useVoiceRecorderContext = () => Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(context_Context);
var context_index = {
  VoiceRecorderProvider,
  useVoiceRecorderContext
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/resolvedReplyType-97610f1a.js
/**
 * Dashboard UIKitConfig's replyType is consisted of all lowercases,
 * we need to convert it into uppercase ones(or vice versa)
 * when we pass the value to internal components
 *  - 'thread' <-> 'THREAD'
 *  - 'quote_reply' <-> 'QUOTE_REPLY'
 */
function getCaseResolvedReplyType(replyType) {
  return {
    lowerCase: replyType.toLowerCase(),
    upperCase: replyType.toUpperCase()
  };
}
/**
 * Dashboard UIKitConfig's threadReplySelectType is consisted of all lowercase letters,
 * we need to convert it into uppercase ones(or vice versa)
 * when we pass the value to internal components
 *  - 'thread' <-> 'THREAD'
 *  - 'parent' <-> 'PARENT'
 */
function getCaseResolvedThreadReplySelectType(threadReplySelectType) {
  return {
    lowerCase: threadReplySelectType.toLowerCase(),
    upperCase: threadReplySelectType.toUpperCase()
  };
}


//# sourceMappingURL=resolvedReplyType-97610f1a.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/SendbirdProvider.js































const isEmpty = obj => {
  if (obj === null || obj === undefined) {
    return true;
  }
  for (const prop in obj) {
    if (obj.hasOwnProperty(prop)) {
      return false;
    }
  }
  return JSON.stringify(obj) === JSON.stringify({});
};
const useTheme = overrides => {
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    if (!isEmpty(overrides)) {
      cssVars({
        variables: _objectSpread2(_objectSpread2({}, {
          '--sendbird-dark-primary-500': '#4d2aa6',
          '--sendbird-dark-primary-400': '#6440C4',
          '--sendbird-dark-primary-300': '#7B53EF',
          '--sendbird-dark-primary-200': '#9E8CF5',
          '--sendbird-dark-primary-100': '#E2DFFF',
          '--sendbird-dark-secondary-500': '#007A7A',
          '--sendbird-dark-secondary-400': '#189A8D',
          '--sendbird-dark-secondary-300': '#2EBA9F',
          '--sendbird-dark-secondary-200': '#6FD6BE',
          '--sendbird-dark-secondary-100': '#AEF2DC',
          '--sendbird-dark-information-100': '#b2d9ff',
          '--sendbird-dark-error-500': '#A30E2D',
          '--sendbird-dark-error-400': '#C11F41',
          '--sendbird-dark-error-300': '#E53157',
          '--sendbird-dark-error-200': '#FF6183',
          '--sendbird-dark-error-100': '#FFABBD',
          '--sendbird-dark-background-700': '#000000',
          '--sendbird-dark-background-600': '#161616',
          '--sendbird-dark-background-500': '#2C2C2C',
          '--sendbird-dark-background-400': '#393939',
          '--sendbird-dark-background-300': '#A8A8A8',
          '--sendbird-dark-background-200': '#D9D9D9',
          '--sendbird-dark-background-100': '#F0F0F0',
          '--sendbird-dark-background-50': '#FFFFFF',
          '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',
          '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',
          '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',
          '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',
          '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',
          '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',
          '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',
          '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',
          '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',
          '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',
          '--sendbird-light-primary-500': '#4d2aa6',
          '--sendbird-light-primary-400': '#6440C4',
          '--sendbird-light-primary-300': '#7B53EF',
          '--sendbird-light-primary-200': '#9E8CF5',
          '--sendbird-light-primary-100': '#E2DFFF',
          '--sendbird-light-secondary-500': '#007A7A',
          '--sendbird-light-secondary-400': '#189A8D',
          '--sendbird-light-secondary-300': '#2EBA9F',
          '--sendbird-light-secondary-200': '#6FD6BE',
          '--sendbird-light-secondary-100': '#AEF2DC',
          '--sendbird-light-information-100': '#b2d9ff',
          '--sendbird-light-error-500': '#A30E2D',
          '--sendbird-light-error-400': '#C11F41',
          '--sendbird-light-error-300': '#E53157',
          '--sendbird-light-error-200': '#FF6183',
          '--sendbird-light-error-100': '#FFABBD',
          '--sendbird-light-background-700': '#000000',
          '--sendbird-light-background-600': '#161616',
          '--sendbird-light-background-500': '#2C2C2C',
          '--sendbird-light-background-400': '#393939',
          '--sendbird-light-background-300': '#A8A8A8',
          '--sendbird-light-background-200': '#D9D9D9',
          '--sendbird-light-background-100': '#F0F0F0',
          '--sendbird-light-background-50': ' #FFFFFF',
          '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',
          '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',
          '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',
          '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',
          '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',
          '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',
          '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',
          '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',
          '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',
          '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',
          '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)'
        }), overrides)
      });
    }
  }, [overrides]);
};

const SDK_ACTIONS = {
  INIT_SDK: 'INIT_SDK',
  SET_SDK_LOADING: 'SET_SDK_LOADING',
  RESET_SDK: 'RESET_SDK',
  SDK_ERROR: 'SDK_ERROR'
};

const initialState$1 = {
  initialized: false,
  loading: false,
  sdk: {},
  error: false
};

function reducer$1(state, action) {
  return index_module_b694546f_K(action).with({
    type: SDK_ACTIONS.SET_SDK_LOADING
  }, _ref => {
    let {
      payload
    } = _ref;
    return _objectSpread2(_objectSpread2({}, state), {}, {
      initialized: false,
      loading: payload
    });
  }).with({
    type: SDK_ACTIONS.SDK_ERROR
  }, () => {
    return _objectSpread2(_objectSpread2({}, state), {}, {
      initialized: false,
      loading: false,
      error: true
    });
  }).with({
    type: SDK_ACTIONS.INIT_SDK
  }, _ref2 => {
    let {
      payload
    } = _ref2;
    return {
      sdk: payload,
      initialized: true,
      loading: false,
      error: false
    };
  }).with({
    type: SDK_ACTIONS.RESET_SDK
  }, () => {
    return initialState$1;
  }).otherwise(() => {
    return state;
  });
}

const initialState = {
  initialized: false,
  loading: false,
  user: {}
};

function SendbirdProvider_reducer(state, action) {
  return index_module_b694546f_K(action).with({
    type: USER_ACTIONS.INIT_USER
  }, _ref => {
    let {
      payload
    } = _ref;
    return {
      initialized: true,
      loading: false,
      user: payload
    };
  }).with({
    type: USER_ACTIONS.RESET_USER
  }, () => {
    return initialState;
  }).with({
    type: USER_ACTIONS.UPDATE_USER_INFO
  }, _ref2 => {
    let {
      payload
    } = _ref2;
    return _objectSpread2(_objectSpread2({}, state), {}, {
      user: payload
    });
  }).otherwise(() => {
    return state;
  });
}

function useConnectionStatus(sdk, logger) {
  const [isOnline, setIsOnline] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(true);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const uniqueHandlerId = uuidv4();
    try {
      logger.warning('sdk changed', uniqueHandlerId);
      const handler = new Ur();
      handler.onDisconnected = () => {
        setIsOnline(false);
        logger.warning('onDisconnected', {
          isOnline
        });
      };
      handler.onReconnectStarted = () => {
        setIsOnline(false);
        logger.warning('onReconnectStarted', {
          isOnline
        });
      };
      handler.onReconnectSucceeded = () => {
        setIsOnline(true);
        logger.warning('onReconnectSucceeded', {
          isOnline
        });
      };
      handler.onReconnectFailed = () => {
        sdk.reconnect();
        logger.warning('onReconnectFailed');
      };
      logger.info('Added ConnectionHandler', uniqueHandlerId);
      // workaround -> addConnectionHandler invalidates session handler
      // provided through configureSession
      if (sdk !== null && sdk !== void 0 && sdk.addConnectionHandler) {
        sdk.addConnectionHandler(uniqueHandlerId, handler);
      }
    } catch (_unused) {
      //
    }
    return () => {
      try {
        sdk.removeConnectionHandler(uniqueHandlerId);
        logger.info('Removed ConnectionHandler', uniqueHandlerId);
      } catch (_unused2) {
        //
      }
    };
  }, [sdk]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const tryReconnect = () => {
      try {
        logger.warning('Try reconnecting SDK');
        if (sdk.connectionState !== 'OPEN') {
          // connection is not broken yet
          sdk.reconnect();
        }
      } catch (_unused3) {
        //
      }
    };
    // addEventListener version
    window.addEventListener('online', tryReconnect);
    return () => {
      window.removeEventListener('online', tryReconnect);
    };
  }, [sdk]);

  // add offline-class to body
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const body = document.querySelector('body');
    if (!isOnline) {
      try {
        body.classList.add('sendbird__offline');
        logger.info('Added class sendbird__offline to body');
      } catch (e) {
        //
      }
    } else {
      try {
        body.classList.remove('sendbird__offline');
        logger.info('Removed class sendbird__offline from body');
      } catch (e) {
        //
      }
    }
  }, [isOnline]);
  return isOnline;
}

async function disconnectSdk(_ref) {
  let {
    sdkDispatcher,
    userDispatcher,
    sdk
  } = _ref;
  return new Promise(resolve => {
    sdkDispatcher({
      type: SDK_ACTIONS.SET_SDK_LOADING,
      payload: true
    });
    if (sdk !== null && sdk !== void 0 && sdk.disconnect) {
      sdk.disconnect().then(() => {
        sdkDispatcher({
          type: SDK_ACTIONS.RESET_SDK
        });
        userDispatcher({
          type: USER_ACTIONS.RESET_USER
        });
      }).finally(() => {
        resolve(true);
      });
    } else {
      resolve(true);
    }
  });
}

const APP_VERSION_STRING = '3.6.8';
const {
  INIT_SDK,
  SET_SDK_LOADING,
  RESET_SDK,
  SDK_ERROR
} = SDK_ACTIONS;
const {
  INIT_USER,
  UPDATE_USER_INFO,
  RESET_USER
} = USER_ACTIONS;
function getMissingParamError(_ref) {
  let {
    userId,
    appId
  } = _ref;
  return `SendbirdProvider | useConnect/setupConnection/Connection failed UserId: ${userId} or appId: ${appId} missing`;
}
function getConnectSbError(error) {
  return `SendbirdProvider | useConnect/setupConnection/Connection failed. ${(error === null || error === void 0 ? void 0 : error.code) || ''} ${(error === null || error === void 0 ? void 0 : error.message) || ''}`;
}
function setUpParams(_ref2) {
  let {
    appId,
    customApiHost,
    customWebSocketHost,
    sdkInitParams
  } = _ref2;
  const params = _objectSpread2(_objectSpread2({
    modules: [new groupChannel_Xe(), new openChannel_Ie()],
    newInstance: true
  }, sdkInitParams !== null && sdkInitParams !== void 0 ? sdkInitParams : {}), {}, {
    // appId shouldn't be overrided
    appId
  });
  if (customApiHost) {
    params['customApiHost'] = customApiHost;
  }
  if (customWebSocketHost) {
    params['customWebSocketHost'] = customWebSocketHost;
  }
  const newSdk = chat_fn.init(params);
  return newSdk;
}

// Steps
// 1. Check if minimum userID/appID is provided
//  1.a. If not, throw error > !reject
//  1.b. If yes, continue
// 2. Set up params with custom host if provided
// 3. Set up session handler if provided
// 4. Set up version
// 5. Connect to Sendbird -> either using user ID or (user ID + access token)
// 6. If connected, connectCbSucess
//  6.a check if nickname is to be updated -> no > !resolve immediately
//  6.b check if nickname is to be updated -> yes > update nickname > !resolve
// 7. If not connected, connectCbError > !reject
async function setUpConnection(_ref3) {
  let {
    logger,
    sdkDispatcher,
    userDispatcher,
    initDashboardConfigs,
    userId,
    appId,
    customApiHost,
    customWebSocketHost,
    configureSession,
    nickname,
    profileUrl,
    accessToken,
    isUserIdUsedForNickname,
    sdkInitParams,
    customExtensionParams,
    isMobile = false
  } = _ref3;
  return new Promise((resolve, reject) => {
    var _logger$info;
    logger === null || logger === void 0 ? void 0 : (_logger$info = logger.info) === null || _logger$info === void 0 ? void 0 : _logger$info.call(logger, 'SendbirdProvider | useConnect/setupConnection/init', {
      userId,
      appId
    });
    sdkDispatcher({
      type: SET_SDK_LOADING,
      payload: true
    });
    if (userId && appId) {
      var _logger$info3, _newSdk$addSendbirdEx, _SendbirdProduct$UIKI, _SendbirdPlatform$JS, _DeviceOsPlatform$MOB, _DeviceOsPlatform$WEB, _logger$info8;
      const newSdk = setUpParams({
        appId,
        customApiHost,
        customWebSocketHost,
        sdkInitParams
      });
      if (configureSession && typeof configureSession === 'function') {
        var _logger$info2;
        const sessionHandler = configureSession(newSdk);
        logger === null || logger === void 0 ? void 0 : (_logger$info2 = logger.info) === null || _logger$info2 === void 0 ? void 0 : _logger$info2.call(logger, 'SendbirdProvider | useConnect/setupConnection/configureSession', sessionHandler);
        newSdk.setSessionHandler(sessionHandler);
      }
      logger === null || logger === void 0 ? void 0 : (_logger$info3 = logger.info) === null || _logger$info3 === void 0 ? void 0 : _logger$info3.call(logger, 'SendbirdProvider | useConnect/setupConnection/setVersion', {
        version: APP_VERSION_STRING
      });
      /**
       * Keep optional chaining to the addSendbirdExtensions
       * for supporting the ChatSDK v4.9.5 or less
       */
      newSdk === null || newSdk === void 0 ? void 0 : (_newSdk$addSendbirdEx = newSdk.addSendbirdExtensions) === null || _newSdk$addSendbirdEx === void 0 ? void 0 : _newSdk$addSendbirdEx.call(newSdk, [{
        product: (_SendbirdProduct$UIKI = _bundle_a5600e6c["E" /* a4 */] === null || _bundle_a5600e6c["E" /* a4 */] === void 0 ? void 0 : _bundle_a5600e6c["E" /* a4 */].UIKIT_CHAT) !== null && _SendbirdProduct$UIKI !== void 0 ? _SendbirdProduct$UIKI : 'uikit-chat',
        version: APP_VERSION_STRING,
        platform: (_SendbirdPlatform$JS = _bundle_a5600e6c["F" /* a5 */] === null || _bundle_a5600e6c["F" /* a5 */] === void 0 ? void 0 : _bundle_a5600e6c["F" /* a5 */].JS) !== null && _SendbirdPlatform$JS !== void 0 ? _SendbirdPlatform$JS : 'js'
      }], isMobile ? (_DeviceOsPlatform$MOB = _bundle_a5600e6c["G" /* a6 */] === null || _bundle_a5600e6c["G" /* a6 */] === void 0 ? void 0 : _bundle_a5600e6c["G" /* a6 */].MOBILE_WEB) !== null && _DeviceOsPlatform$MOB !== void 0 ? _DeviceOsPlatform$MOB : 'mobile_web' : (_DeviceOsPlatform$WEB = _bundle_a5600e6c["G" /* a6 */] === null || _bundle_a5600e6c["G" /* a6 */] === void 0 ? void 0 : _bundle_a5600e6c["G" /* a6 */].WEB) !== null && _DeviceOsPlatform$WEB !== void 0 ? _DeviceOsPlatform$WEB : 'web', customExtensionParams);
      newSdk.addExtension('sb_uikit', APP_VERSION_STRING);
      const connectCbSucess = async user => {
        var _logger$info4;
        logger === null || logger === void 0 ? void 0 : (_logger$info4 = logger.info) === null || _logger$info4 === void 0 ? void 0 : _logger$info4.call(logger, 'SendbirdProvider | useConnect/setupConnection/connectCbSucess', user);
        sdkDispatcher({
          type: INIT_SDK,
          payload: newSdk
        });
        userDispatcher({
          type: INIT_USER,
          payload: user
        });
        initDashboardConfigs(newSdk).then(config => {
          var _logger$info5;
          logger === null || logger === void 0 ? void 0 : (_logger$info5 = logger.info) === null || _logger$info5 === void 0 ? void 0 : _logger$info5.call(logger, 'SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration success', {
            config
          });
        }).catch(error => {
          var _logger$error;
          logger === null || logger === void 0 ? void 0 : (_logger$error = logger.error) === null || _logger$error === void 0 ? void 0 : _logger$error.call(logger, 'SendbirdProvider | useConnect/setupConnection/getUIKitConfiguration failed', {
            error
          });
        });

        // use nickname/profileUrl if provided
        // or set userID as nickname
        if ((nickname !== user.nickname || profileUrl !== user.profileUrl) && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))) {
          var _logger$info6;
          logger === null || logger === void 0 ? void 0 : (_logger$info6 = logger.info) === null || _logger$info6 === void 0 ? void 0 : _logger$info6.call(logger, 'SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo', {
            nickname,
            profileUrl
          });
          newSdk.updateCurrentUserInfo({
            nickname: nickname || user.nickname || (isUserIdUsedForNickname ? user.userId : ''),
            profileUrl: profileUrl || user.profileUrl
          }).then(namedUser => {
            var _logger$info7;
            logger === null || logger === void 0 ? void 0 : (_logger$info7 = logger.info) === null || _logger$info7 === void 0 ? void 0 : _logger$info7.call(logger, 'SendbirdProvider | useConnect/setupConnection/updateCurrentUserInfo success', {
              nickname,
              profileUrl
            });
            userDispatcher({
              type: UPDATE_USER_INFO,
              payload: namedUser
            });
          }).finally(() => {
            resolve();
          });
        } else {
          resolve();
        }
      };
      const connectCbError = e => {
        var _logger$error2;
        const errorMessage = getConnectSbError(e);
        logger === null || logger === void 0 ? void 0 : (_logger$error2 = logger.error) === null || _logger$error2 === void 0 ? void 0 : _logger$error2.call(logger, errorMessage, {
          e,
          appId,
          userId
        });
        sdkDispatcher({
          type: RESET_SDK
        });
        userDispatcher({
          type: RESET_USER
        });
        sdkDispatcher({
          type: SDK_ERROR
        });
        // exit promise with error
        reject(errorMessage);
      };
      logger === null || logger === void 0 ? void 0 : (_logger$info8 = logger.info) === null || _logger$info8 === void 0 ? void 0 : _logger$info8.call(logger, `SendbirdProvider | useConnect/setupConnection/connect connecting using ${accessToken !== null && accessToken !== void 0 ? accessToken : userId}`);
      newSdk.connect(userId, accessToken).then(res => connectCbSucess(res)).catch(err => connectCbError(err));
    } else {
      var _logger$error3;
      const errorMessage = getMissingParamError({
        userId,
        appId
      });
      sdkDispatcher({
        type: SDK_ERROR
      });
      logger === null || logger === void 0 ? void 0 : (_logger$error3 = logger.error) === null || _logger$error3 === void 0 ? void 0 : _logger$error3.call(logger, errorMessage);
      // exit promise with error
      reject(errorMessage);
    }
  });
}

async function connect(_ref) {
  let {
    logger,
    sdkDispatcher,
    userDispatcher,
    initDashboardConfigs,
    userId,
    appId,
    customApiHost,
    customWebSocketHost,
    configureSession,
    nickname,
    profileUrl,
    accessToken,
    sdk,
    sdkInitParams,
    customExtensionParams,
    isMobile
  } = _ref;
  await disconnectSdk({
    logger,
    sdkDispatcher,
    userDispatcher,
    sdk
  });
  await setUpConnection({
    logger,
    sdkDispatcher,
    userDispatcher,
    initDashboardConfigs,
    userId,
    appId,
    customApiHost,
    customWebSocketHost,
    configureSession,
    nickname,
    profileUrl,
    accessToken,
    sdkInitParams,
    customExtensionParams,
    isMobile
  });
}

function useConnect(triggerTypes, staticTypes) {
  var _logger$info;
  const {
    userId,
    appId,
    accessToken,
    isMobile,
    isUserIdUsedForNickname
  } = triggerTypes;
  const {
    logger,
    nickname,
    profileUrl,
    configureSession,
    customApiHost,
    customWebSocketHost,
    sdk,
    sdkDispatcher,
    userDispatcher,
    initDashboardConfigs,
    sdkInitParams,
    customExtensionParams
  } = staticTypes;
  logger === null || logger === void 0 ? void 0 : (_logger$info = logger.info) === null || _logger$info === void 0 ? void 0 : _logger$info.call(logger, 'SendbirdProvider | useConnect', _objectSpread2(_objectSpread2({}, triggerTypes), staticTypes));
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _logger$info2;
    logger === null || logger === void 0 ? void 0 : (_logger$info2 = logger.info) === null || _logger$info2 === void 0 ? void 0 : _logger$info2.call(logger, 'SendbirdProvider | useConnect/useEffect', {
      userId,
      appId,
      accessToken
    });
    try {
      connect({
        userId,
        appId,
        accessToken,
        logger,
        nickname,
        profileUrl,
        configureSession,
        customApiHost,
        customWebSocketHost,
        sdk,
        sdkDispatcher,
        userDispatcher,
        initDashboardConfigs,
        isUserIdUsedForNickname,
        sdkInitParams,
        customExtensionParams,
        isMobile
      });
    } catch (error) {
      var _logger$error;
      logger === null || logger === void 0 ? void 0 : (_logger$error = logger.error) === null || _logger$error === void 0 ? void 0 : _logger$error.call(logger, 'SendbirdProvider | useConnect/useEffect', error);
    }
  }, [userId, appId, accessToken]);
  const reconnect = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    var _logger$info3;
    logger === null || logger === void 0 ? void 0 : (_logger$info3 = logger.info) === null || _logger$info3 === void 0 ? void 0 : _logger$info3.call(logger, 'SendbirdProvider | useConnect/reconnect/useCallback', {
      sdk
    });
    try {
      connect({
        userId,
        appId,
        accessToken,
        logger,
        nickname,
        profileUrl,
        configureSession,
        customApiHost,
        customWebSocketHost,
        sdk,
        sdkDispatcher,
        userDispatcher,
        initDashboardConfigs,
        isUserIdUsedForNickname,
        sdkInitParams,
        customExtensionParams,
        isMobile
      });
    } catch (error) {
      var _logger$error2;
      logger === null || logger === void 0 ? void 0 : (_logger$error2 = logger.error) === null || _logger$error2 === void 0 ? void 0 : _logger$error2.call(logger, 'SendbirdProvider | useConnect/reconnect/useCallback', error);
    }
  }, [sdk]);
  return reconnect;
}

// Logger, pretty much explains it
// in SendbirdProvider

// const [logger, setLogger] = useState(LoggerFactory(logLevel));
const LOG_LEVELS = {
  DEBUG: 'debug',
  WARNING: 'warning',
  ERROR: 'error',
  INFO: 'info',
  ALL: 'all'
};
const colorLog = level => {
  switch (level) {
    case LOG_LEVELS.WARNING:
      return 'color: Orange';
    case LOG_LEVELS.ERROR:
      return 'color: Red';
    default:
      return 'color: Gray';
  }
};
const printLog = _ref => {
  let {
    level,
    title,
    description = ''
  } = _ref;
  // eslint-disable-next-line no-console
  console.log(`%c SendbirdUIKit | ${level} | ${new Date().toISOString()} | ${title} ${description && '|'}`, colorLog(level), description);
};
const SendbirdProvider_noop = () => {/* noop */};
const getDefaultLogger = () => ({
  info: SendbirdProvider_noop,
  error: SendbirdProvider_noop,
  warning: SendbirdProvider_noop
});
const LoggerFactory = (lvl, customInterface) => {
  const logInterface = customInterface || printLog;
  const lvlArray = Array.isArray(lvl) ? lvl : [lvl];
  const applyLog = lgLvl => (title, description) => logInterface({
    level: lgLvl,
    title,
    description
  });
  const logger = lvlArray.reduce((accumulator, currentLvl) => {
    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        info: applyLog(LOG_LEVELS.INFO),
        error: applyLog(LOG_LEVELS.ERROR),
        warning: applyLog(LOG_LEVELS.WARNING)
      });
    }
    if (currentLvl === LOG_LEVELS.INFO) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        info: applyLog(LOG_LEVELS.INFO)
      });
    }
    if (currentLvl === LOG_LEVELS.ERROR) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        error: applyLog(LOG_LEVELS.ERROR)
      });
    }
    if (currentLvl === LOG_LEVELS.WARNING) {
      return _objectSpread2(_objectSpread2({}, accumulator), {}, {
        warning: applyLog(LOG_LEVELS.WARNING)
      });
    }
    return _objectSpread2({}, accumulator);
  }, getDefaultLogger());
  return logger;
};

// TODO: Make this to hook, useLogger

// https://davidwalsh.name/pubsub-javascript
// we use pubsub to sync events between multiple components(example - ChannelList, Channel)
// for example, if customer sends a message from their custom component
// without pubsub,we would not be able to listen to it
// in our ChannelList or Conversation

const pubSubFactory = () => {
  const topics = {};
  const hOP = topics.hasOwnProperty;
  return {
    __getTopics: () => topics,
    subscribe: (topic, listener) => {
      // Create the topic's object if not yet created
      if (!hOP.call(topics, topic)) {
        topics[topic] = [];
      }

      // Add the listener to queue
      const index = topics[topic].push(listener) - 1;

      // Provide handle back for removal of topic
      return {
        remove: () => {
          delete topics[topic][index];
        }
      };
    },
    publish: (topic, info) => {
      // If the topic doesn't exist, or there's no listeners in queue, just leave
      if (!hOP.call(topics, topic)) {
        return;
      }

      // Cycle through topics queue, fire!
      topics[topic].forEach(item => {
        item(info !== undefined ? info : {});
      });
    }
  };
};

/* eslint-disable default-param-last */
function useAppendDomNode() {
  let ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  let rootSelector = arguments.length > 1 ? arguments[1] : undefined;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const root = document.querySelector(rootSelector);
    ids.forEach(id => {
      const elem = document.createElement('div');
      elem.setAttribute('id', id);
      root.appendChild(elem);
    });
    return () => {
      ids.forEach(id => {
        const target = document.getElementById(id);
        if (target) {
          root.removeChild(target);
        }
      });
    };
  }, []);
}

const VoiceMessageProvider = _ref => {
  let {
    children,
    isVoiceMessageEnabled = true
  } = _ref;
  if (!isVoiceMessageEnabled) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoicePlayerProvider, null, children);
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceRecorderProvider, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoicePlayerProvider, null, children));
};

function uikitConfigMapper(_ref) {
  var _uikitOptions$common$, _uikitOptions$common, _uikitOptions$groupCh, _uikitOptions$groupCh2, _uikitOptions$groupCh3, _uikitOptions$groupCh4, _uikitOptions$groupCh5, _uikitOptions$groupCh6, _uikitOptions$groupCh7, _uikitOptions$groupCh8, _uikitOptions$groupCh9, _uikitOptions$groupCh10, _uikitOptions$groupCh11, _uikitOptions$groupCh12, _uikitOptions$groupCh13, _uikitOptions$groupCh14, _uikitOptions$groupCh15, _uikitOptions$groupCh16, _uikitOptions$groupCh17, _uikitOptions$groupCh18, _uikitOptions$groupCh19, _uikitOptions$groupCh20, _uikitOptions$openCha, _uikitOptions$openCha2, _uikitOptions$openCha3;
  let {
    legacyConfig,
    uikitOptions = {}
  } = _ref;
  const {
    replyType,
    isMentionEnabled,
    isReactionEnabled,
    disableUserProfile,
    isVoiceMessageEnabled,
    isTypingIndicatorEnabledOnChannelList,
    isMessageReceiptStatusEnabledOnChannelList,
    showSearchIcon
  } = legacyConfig;
  return {
    common: {
      enableUsingDefaultUserProfile: (_uikitOptions$common$ = (_uikitOptions$common = uikitOptions.common) === null || _uikitOptions$common === void 0 ? void 0 : _uikitOptions$common.enableUsingDefaultUserProfile) !== null && _uikitOptions$common$ !== void 0 ? _uikitOptions$common$ : typeof disableUserProfile === 'boolean' ? !disableUserProfile : undefined
    },
    groupChannel: {
      enableOgtag: (_uikitOptions$groupCh = uikitOptions.groupChannel) === null || _uikitOptions$groupCh === void 0 ? void 0 : _uikitOptions$groupCh.enableOgtag,
      enableMention: (_uikitOptions$groupCh2 = (_uikitOptions$groupCh3 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh3 === void 0 ? void 0 : _uikitOptions$groupCh3.enableMention) !== null && _uikitOptions$groupCh2 !== void 0 ? _uikitOptions$groupCh2 : isMentionEnabled,
      enableReactions: (_uikitOptions$groupCh4 = (_uikitOptions$groupCh5 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh5 === void 0 ? void 0 : _uikitOptions$groupCh5.enableReactions) !== null && _uikitOptions$groupCh4 !== void 0 ? _uikitOptions$groupCh4 : isReactionEnabled,
      enableTypingIndicator: (_uikitOptions$groupCh6 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh6 === void 0 ? void 0 : _uikitOptions$groupCh6.enableTypingIndicator,
      enableVoiceMessage: (_uikitOptions$groupCh7 = (_uikitOptions$groupCh8 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh8 === void 0 ? void 0 : _uikitOptions$groupCh8.enableVoiceMessage) !== null && _uikitOptions$groupCh7 !== void 0 ? _uikitOptions$groupCh7 : isVoiceMessageEnabled,
      replyType: (_uikitOptions$groupCh9 = (_uikitOptions$groupCh10 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh10 === void 0 ? void 0 : _uikitOptions$groupCh10.replyType) !== null && _uikitOptions$groupCh9 !== void 0 ? _uikitOptions$groupCh9 : replyType != null ? getCaseResolvedReplyType(replyType).lowerCase : undefined,
      threadReplySelectType: (_uikitOptions$groupCh11 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh11 === void 0 ? void 0 : _uikitOptions$groupCh11.threadReplySelectType,
      input: {
        enableDocument: (_uikitOptions$groupCh12 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh12 === void 0 ? void 0 : (_uikitOptions$groupCh13 = _uikitOptions$groupCh12.input) === null || _uikitOptions$groupCh13 === void 0 ? void 0 : _uikitOptions$groupCh13.enableDocument
      },
      uikitMultipleFilesMessageLimit: (_uikitOptions$groupCh14 = uikitOptions.groupChannel) === null || _uikitOptions$groupCh14 === void 0 ? void 0 : _uikitOptions$groupCh14.uikitMultipleFilesMessageLimit
    },
    groupChannelList: {
      enableTypingIndicator: (_uikitOptions$groupCh15 = (_uikitOptions$groupCh16 = uikitOptions.groupChannelList) === null || _uikitOptions$groupCh16 === void 0 ? void 0 : _uikitOptions$groupCh16.enableTypingIndicator) !== null && _uikitOptions$groupCh15 !== void 0 ? _uikitOptions$groupCh15 : isTypingIndicatorEnabledOnChannelList,
      enableMessageReceiptStatus: (_uikitOptions$groupCh17 = (_uikitOptions$groupCh18 = uikitOptions.groupChannelList) === null || _uikitOptions$groupCh18 === void 0 ? void 0 : _uikitOptions$groupCh18.enableMessageReceiptStatus) !== null && _uikitOptions$groupCh17 !== void 0 ? _uikitOptions$groupCh17 : isMessageReceiptStatusEnabledOnChannelList
    },
    groupChannelSettings: {
      enableMessageSearch: (_uikitOptions$groupCh19 = (_uikitOptions$groupCh20 = uikitOptions.groupChannelSettings) === null || _uikitOptions$groupCh20 === void 0 ? void 0 : _uikitOptions$groupCh20.enableMessageSearch) !== null && _uikitOptions$groupCh19 !== void 0 ? _uikitOptions$groupCh19 : showSearchIcon
    },
    openChannel: {
      enableOgtag: (_uikitOptions$openCha = uikitOptions.openChannel) === null || _uikitOptions$openCha === void 0 ? void 0 : _uikitOptions$openCha.enableOgtag,
      input: {
        enableDocument: (_uikitOptions$openCha2 = uikitOptions.openChannel) === null || _uikitOptions$openCha2 === void 0 ? void 0 : (_uikitOptions$openCha3 = _uikitOptions$openCha2.input) === null || _uikitOptions$openCha3 === void 0 ? void 0 : _uikitOptions$openCha3.enableDocument
      }
    }
  };
}

const TIMEOUT = 2000;

/*
  * This is a factory function that returns a scheduler.
  * The scheduler is a queue that calls the callback function on intervals.
  * If interval is empty, the callback function is called immediately.
  * If interval is not empty, the callback function is called after the interval.
*/
function schedulerFactory(_ref) {
  let {
    logger,
    timeout,
    cb
  } = _ref;
  let queue = [];
  let interval = null;
  const push = channel => {
    const channelPresent = queue.find(c => c.url === channel.url);
    if (!channelPresent) {
      queue.push(channel);
    } else {
      logger.info('Channel: Mark as read already in queue', {
        channel
      });
    }
    // start the interval if it's not already running
    if (interval) {
      return;
    }
    const item = queue.shift();
    if (item) {
      cb(item);
    }
    interval = setInterval(() => {
      if (queue.length === 0 && interval) {
        clearInterval(interval);
        interval = null;
        return;
      }
      const item = queue.shift();
      if (item) {
        cb(item);
      }
    }, timeout || TIMEOUT);
  };
  const clear = () => {
    queue = [];
    if (interval) {
      clearInterval(interval);
      interval = null;
    }
  };
  return {
    push,
    clear,
    getQueue: () => queue
  };
}

// this hook accepts a callback to run component is unmounted
function useUnmount(callback) {
  let deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    return () => {
      callback();
    };
  }, deps);
}

function useMarkAsReadScheduler(_ref, _ref2) {
  let {
    isConnected
  } = _ref;
  let {
    logger
  } = _ref2;
  const markAsReadScheduler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => schedulerFactory({
    logger,
    cb: channel => {
      try {
        channel.markAsRead();
      } catch (error) {
        logger.warning('Channel: Mark as delivered failed', {
          channel,
          error
        });
      }
    }
  }), []);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    // for simplicity, we clear the queue when the connection is lost
    if (!isConnected) {
      markAsReadScheduler.clear();
    }
  }, [isConnected]);
  useUnmount(() => {
    markAsReadScheduler.clear();
  });
  return markAsReadScheduler;
}

function useMarkAsDeliveredScheduler(_ref, _ref2) {
  let {
    isConnected
  } = _ref;
  let {
    logger
  } = _ref2;
  const markAsDeliveredScheduler = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => schedulerFactory({
    logger,
    cb: channel => {
      try {
        channel.markAsDelivered();
      } catch (error) {
        logger.warning('Channel: Mark as delivered failed', {
          channel,
          error
        });
      }
    }
  }), []);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    // for simplicity, we clear the queue when the connection is lost
    if (!isConnected) {
      markAsDeliveredScheduler.clear();
    }
  }, [isConnected]);
  useUnmount(() => {
    markAsDeliveredScheduler.clear();
  });
  return markAsDeliveredScheduler;
}

function Sendbird(props) {
  const localConfigs = uikitConfigMapper({
    legacyConfig: {
      replyType: props.replyType,
      isMentionEnabled: props.isMentionEnabled,
      isReactionEnabled: props.isReactionEnabled,
      disableUserProfile: props.disableUserProfile,
      isVoiceMessageEnabled: props.isVoiceMessageEnabled,
      isTypingIndicatorEnabledOnChannelList: props.isTypingIndicatorEnabledOnChannelList,
      isMessageReceiptStatusEnabledOnChannelList: props.isMessageReceiptStatusEnabledOnChannelList,
      showSearchIcon: props.showSearchIcon
    },
    uikitOptions: props.uikitOptions
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UIKitConfigProvider, {
    localConfigs: {
      common: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.common,
      groupChannel: {
        channel: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannel,
        channelList: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannelList,
        setting: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.groupChannelSettings
      },
      openChannel: {
        channel: localConfigs === null || localConfigs === void 0 ? void 0 : localConfigs.openChannel
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdSDK, props));
}
const SendbirdSDK = _ref => {
  let {
    appId,
    userId,
    children,
    accessToken = '',
    customApiHost = '',
    customWebSocketHost = '',
    configureSession = null,
    theme = 'light',
    config = {},
    nickname = '',
    colorSet = null,
    stringSet = null,
    dateLocale = null,
    profileUrl = '',
    voiceRecord = {
      maxRecordingTime: consts_397a92f1["e" /* V */],
      minRecordingTime: consts_397a92f1["f" /* a */]
    },
    userListQuery = null,
    imageCompression = {},
    allowProfileEdit = false,
    disableMarkAsDelivered = false,
    renderUserProfile = null,
    onUserProfileMessage = null,
    breakpoint = false,
    isUserIdUsedForNickname = true,
    sdkInitParams,
    customExtensionParams,
    uikitMultipleFilesMessageLimit
  } = _ref;
  const {
    logLevel = '',
    userMention = {},
    isREMUnitEnabled = false
  } = config;
  const {
    isMobile
  } = useMediaQueryContext();
  const [logger, setLogger] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(LoggerFactory(logLevel));
  const [pubSub] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(pubSubFactory());
  const [sdkStore, sdkDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(reducer$1, initialState$1);
  const [userStore, userDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(SendbirdProvider_reducer, initialState);
  const {
    configs,
    configsWithAppAttr,
    initDashboardConfigs
  } = useUIKitConfig();
  const sdkInitialized = sdkStore.initialized;
  const sdk = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.sdk;
  useTheme(colorSet);
  const reconnect = useConnect({
    appId,
    userId,
    accessToken,
    isUserIdUsedForNickname,
    isMobile
  }, {
    logger,
    nickname,
    profileUrl,
    configureSession,
    customApiHost,
    customWebSocketHost,
    sdkInitParams,
    customExtensionParams,
    sdk,
    sdkDispatcher,
    userDispatcher,
    initDashboardConfigs
  });
  useUnmount(() => {
    if (typeof sdk.disconnect === 'function') {
      disconnectSdk({
        logger,
        sdkDispatcher,
        userDispatcher,
        sdk
      });
    }
  }, [sdk.disconnect]);

  // to create a pubsub to communicate between parent and child
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setLogger(LoggerFactory(logLevel));
  }, [logLevel]);
  useAppendDomNode(['sendbird-modal-root', 'sendbird-dropdown-portal', 'sendbird-emoji-list-portal'], 'body');

  // should move to reducer
  const [currenttheme, setCurrenttheme] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(theme);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setCurrenttheme(theme);
  }, [theme]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const body = document.querySelector('body');
    body.classList.remove('sendbird-experimental__rem__units');
    if (isREMUnitEnabled) {
      body.classList.add('sendbird-experimental__rem__units');
    }
  }, [isREMUnitEnabled]);
  // add-remove theme from body
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    logger.info('Setup theme', `Theme: ${currenttheme}`);
    try {
      const body = document.querySelector('body');
      body.classList.remove('sendbird-theme--light');
      body.classList.remove('sendbird-theme--dark');
      body.classList.add(`sendbird-theme--${currenttheme || 'light'}`);
      logger.info('Finish setup theme');
      // eslint-disable-next-line no-empty
    } catch (e) {
      logger.warning('Setup theme failed', `${e}`);
    }
    return () => {
      try {
        const body = document.querySelector('body');
        body.classList.remove('sendbird-theme--light');
        body.classList.remove('sendbird-theme--dark');
        // eslint-disable-next-line no-empty
      } catch (_unused) {}
    };
  }, [currenttheme]);
  const isOnline = useConnectionStatus(sdkStore.sdk, logger);
  const markAsReadScheduler = useMarkAsReadScheduler({
    isConnected: isOnline
  }, {
    logger
  });
  const markAsDeliveredScheduler = useMarkAsDeliveredScheduler({
    isConnected: isOnline
  }, {
    logger
  });
  const localeStringSet = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useMemo(() => {
    if (!stringSet) {
      return getStringSet('en');
    }
    return _objectSpread2(_objectSpread2({}, getStringSet('en')), stringSet);
  }, [stringSet]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SendbirdSdkContext.Provider, {
    value: {
      stores: {
        sdkStore,
        userStore
      },
      dispatchers: {
        sdkDispatcher,
        userDispatcher,
        reconnect
      },
      config: {
        disableMarkAsDelivered,
        renderUserProfile,
        onUserProfileMessage,
        allowProfileEdit,
        isOnline,
        userId,
        appId,
        accessToken,
        theme: currenttheme,
        setCurrenttheme,
        uikitMultipleFilesMessageLimit,
        userListQuery,
        logger,
        pubSub,
        imageCompression: _objectSpread2({
          compressionRate: 0.7
        }, imageCompression),
        voiceRecord,
        userMention: {
          maxMentionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || 10,
          maxSuggestionCount: (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || 15
        },
        markAsReadScheduler,
        markAsDeliveredScheduler,
        // From UIKitConfigProvider.localConfigs
        disableUserProfile: !configs.common.enableUsingDefaultUserProfile,
        isReactionEnabled: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableReactions,
        isMentionEnabled: configs.groupChannel.channel.enableMention,
        isVoiceMessageEnabled: configs.groupChannel.channel.enableVoiceMessage,
        replyType: getCaseResolvedReplyType(configs.groupChannel.channel.replyType).upperCase,
        isTypingIndicatorEnabledOnChannelList: configs.groupChannel.channelList.enableTypingIndicator,
        isMessageReceiptStatusEnabledOnChannelList: configs.groupChannel.channelList.enableMessageReceiptStatus,
        showSearchIcon: sdkInitialized && configsWithAppAttr(sdk).groupChannel.setting.enableMessageSearch,
        // Remote configs set from dashboard by UIKit feature configuration
        groupChannel: {
          enableOgtag: sdkInitialized && configsWithAppAttr(sdk).groupChannel.channel.enableOgtag,
          enableTypingIndicator: configs.groupChannel.channel.enableTypingIndicator,
          enableDocument: configs.groupChannel.channel.input.enableDocument,
          threadReplySelectType: getCaseResolvedThreadReplySelectType(configs.groupChannel.channel.threadReplySelectType).upperCase
        },
        openChannel: {
          enableOgtag: sdkInitialized && configsWithAppAttr(sdk).openChannel.channel.enableOgtag,
          enableDocument: configs.openChannel.channel.input.enableDocument
        }
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MediaQueryProvider, {
    logger: logger,
    breakpoint: breakpoint
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LocalizationProvider, {
    stringSet: localeStringSet,
    dateLocale: dateLocale
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageProvider, {
    isVoiceMessageEnabled: configs.groupChannel.channel.enableVoiceMessage
  }, children))));
};


//# sourceMappingURL=SendbirdProvider.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/topics-da8f3f42.js
const PUBSUB_TOPICS = {
  // Group Channel
  USER_UPDATED: 'USER_UPDATED',
  SEND_MESSAGE_START: 'SEND_MESSAGE_START',
  SEND_MESSAGE_FAILED: 'SEND_MESSAGE_FAILED',
  SEND_USER_MESSAGE: 'SEND_USER_MESSAGE',
  SEND_FILE_MESSAGE: 'SEND_FILE_MESSAGE',
  UPDATE_USER_MESSAGE: 'UPDATE_USER_MESSAGE',
  DELETE_MESSAGE: 'DELETE_MESSAGE',
  LEAVE_CHANNEL: 'LEAVE_CHANNEL',
  CREATE_CHANNEL: 'CREATE_CHANNEL',
  // Open Channel
  UPDATE_OPEN_CHANNEL: 'UPDATE_OPEN_CHANNEL'
};


//# sourceMappingURL=topics-da8f3f42.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils-40781609.js
const utils_40781609_noop = () => {};


//# sourceMappingURL=utils-40781609.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/UserProfileContext-9fba7a03.js



/**
 * user profile goes deep inside the component tree
 * use this context as a short circuit to send in values
 */
const UserProfileContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
  disableUserProfile: true,
  isOpenChannel: false,
  renderUserProfile: null,
  onUserProfileMessage: null
});
const UserProfileProvider = props => {
  const {
    children
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileContext.Provider, {
    value: props
  }, children);
};
UserProfileProvider.propTypes = {
  children: prop_types_default.a.oneOfType([prop_types_default.a.element, prop_types_default.a.arrayOf(prop_types_default.a.element), prop_types_default.a.any]).isRequired,
  // eslint-disable-next-line react/no-unused-prop-types
  isOpenChannel: prop_types_default.a.bool,
  // eslint-disable-next-line react/no-unused-prop-types
  disableUserProfile: prop_types_default.a.bool,
  // eslint-disable-next-line react/no-unused-prop-types
  renderUserProfile: prop_types_default.a.func,
  // eslint-disable-next-line react/no-unused-prop-types
  onUserProfileMessage: prop_types_default.a.func
};
UserProfileProvider.defaultProps = {
  isOpenChannel: false,
  disableUserProfile: false,
  renderUserProfile: null,
  onUserProfileMessage: null
};


//# sourceMappingURL=UserProfileContext-9fba7a03.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelListProvider-63f3007c.js











const RESET_CHANNEL_LIST = 'RESET_CHANNEL_LIST';
const CREATE_CHANNEL = 'CREATE_CHANNEL';
const USER_INVITED = 'USER_INVITED';
const LEAVE_CHANNEL_SUCCESS = 'LEAVE_CHANNEL_SUCCESS';
const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
const FETCH_CHANNELS_START = 'FETCH_CHANNELS_START';
const FETCH_CHANNELS_SUCCESS = 'FETCH_CHANNELS_SUCCESS';
const FETCH_CHANNELS_FAILURE = 'FETCH_CHANNELS_FAILURE';
const INIT_CHANNELS_START = 'INIT_CHANNELS_START';
const INIT_CHANNELS_SUCCESS = 'INIT_CHANNELS_SUCCESS';
const INIT_CHANNELS_FAILURE = 'INIT_CHANNELS_FAILURE';
const ON_USER_JOINED = 'ON_USER_JOINED';
const ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';
const ON_LAST_MESSAGE_UPDATED = 'ON_LAST_MESSAGE_UPDATED';
const ON_USER_LEFT = 'ON_USER_LEFT';
const ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';
const ON_CHANNEL_ARCHIVED = 'ON_CHANNEL_ARCHIVED';
const ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';
const ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';
const ON_READ_RECEIPT_UPDATED = 'ON_READ_RECEIPT_UPDATED';
const ON_DELIVERY_RECEIPT_UPDATED = 'ON_DELIVERY_RECEIPT_UPDATED';
const CHANNEL_REPLACED_TO_TOP = 'CHANNEL_REPLACED_TO_TOP';
const CHANNEL_LIST_PARAMS_UPDATED = 'CHANNEL_LIST_PARAMS_UPDATED';

const DELIVERY_RECIPT = 'delivery_receipt';
const createEventHandler = _ref => {
  let {
    sdk,
    sdkChannelHandlerId,
    channelListDispatcher,
    logger
  } = _ref;
  const ChannelHandler = new groupChannel_We({
    onChannelChanged: channel => {
      logger.info('ChannelList: onChannelChanged', channel);
      channelListDispatcher({
        type: ON_CHANNEL_CHANGED,
        payload: channel
      });
    },
    onChannelDeleted: channelUrl => {
      logger.info('ChannelList: onChannelDeleted', channelUrl);
      channelListDispatcher({
        type: ON_CHANNEL_DELETED,
        payload: channelUrl
      });
    },
    onUserJoined: channel => {
      logger.info('ChannelList: onUserJoined', channel);
      if (channel !== null && channel !== void 0 && channel.lastMessage) {
        channelListDispatcher({
          type: ON_USER_JOINED,
          payload: channel
        });
      }
    },
    onUserReceivedInvitation: (channel, inviter, invitees) => {
      logger.info('ChannelList: onUserReceivedInvitation', {
        channel,
        inviter,
        invitees
      });
      const {
        currentUser
      } = sdk;
      const isInvited = invitees.find(user => (user === null || user === void 0 ? void 0 : user.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId));
      // The newly created channel should be displayed only when there's a message
      if (isInvited && channel !== null && channel !== void 0 && channel.lastMessage) {
        channelListDispatcher({
          type: USER_INVITED,
          payload: channel
        });
      }
    },
    onUserBanned: (channel, user) => {
      const {
        currentUser
      } = sdk;
      logger.info('Channel: onUserBanned', channel);
      if (user.userId === currentUser.userId) {
        channelListDispatcher({
          type: ON_USER_LEFT,
          payload: {
            channel,
            isMe: true
          }
        });
      } else {
        channelListDispatcher({
          type: ON_USER_LEFT,
          payload: {
            channel,
            isMe: false
          }
        });
      }
    },
    onUserLeft: (channel, leftUser) => {
      const {
        currentUser
      } = sdk;
      const isMe = currentUser.userId === leftUser.userId;
      logger.info('ChannelList: onUserLeft', channel);
      channelListDispatcher({
        type: ON_USER_LEFT,
        payload: {
          channel,
          isMe
        }
      });
    },
    onReadStatus: channel => {
      logger.info('ChannelList: onReadStatus', channel);
      channelListDispatcher({
        type: ON_READ_RECEIPT_UPDATED,
        payload: channel
      });
    },
    onDeliveryReceiptUpdated: channel => {
      logger.info('ChannelList: onDeliveryReceiptUpdated', channel);
      if (channel !== null && channel !== void 0 && channel.lastMessage) {
        channelListDispatcher({
          type: ON_DELIVERY_RECEIPT_UPDATED,
          payload: channel
        });
      }
    },
    onMessageUpdated: (channel, message) => {
      if (channel !== null && channel !== void 0 && channel.lastMessage.isEqual(message)) {
        logger.info('ChannelList: onMessageUpdated', channel);
        channelListDispatcher({
          type: ON_LAST_MESSAGE_UPDATED,
          payload: channel
        });
      }
    },
    onChannelHidden: channel => {
      logger.info('ChannelList: onChannelHidden', channel);
      channelListDispatcher({
        type: ON_CHANNEL_ARCHIVED,
        payload: channel
      });
    },
    onChannelFrozen: channel => {
      logger.info('ChannelList: onChannelFrozen', channel);
      channelListDispatcher({
        type: ON_CHANNEL_FROZEN,
        payload: channel
      });
    },
    onChannelUnfrozen: channel => {
      logger.info('ChannelList: onChannelUnfrozen', channel);
      channelListDispatcher({
        type: ON_CHANNEL_UNFROZEN,
        payload: channel
      });
    }
  });
  logger.info('ChannelList: Added channelHandler');
  sdk.groupChannel.addGroupChannelHandler(sdkChannelHandlerId, ChannelHandler);
};
const createChannelListQuery = _ref2 => {
  let {
    sdk,
    userFilledChannelListQuery = {}
  } = _ref2;
  const param = {};
  param.includeEmpty = false;
  param.limit = 20; // The value of pagination limit could be set up to 100.
  param.order = 'latest_last_message'; // 'chronological', 'latest_last_message', 'channel_name_alphabetical', and 'metadata_value_alphabetical'

  if (userFilledChannelListQuery) {
    Object.keys(userFilledChannelListQuery).forEach(key => {
      param[key] = userFilledChannelListQuery[key];
    });
  }
  const channelListQuery = sdk.groupChannel.createMyGroupChannelListQuery(param);
  return channelListQuery;
};

/**
 * Setup event listener
 * create channel source query
 * addloading screen
 */
function setupChannelList(_ref3) {
  let {
    sdk,
    sdkChannelHandlerId,
    channelListDispatcher,
    setChannelSource,
    onChannelSelect,
    userFilledChannelListQuery,
    logger,
    sortChannelList,
    disableAutoSelect,
    markAsDeliveredScheduler,
    disableMarkAsDelivered
  } = _ref3;
  if (sdk !== null && sdk !== void 0 && sdk.groupChannel) {
    createEventHandler({
      sdk,
      channelListDispatcher,
      sdkChannelHandlerId,
      logger
    });
  } else {
    logger.warning('ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist', sdk);
  }
  logger.info('ChannelList - creating query', {
    userFilledChannelListQuery
  });
  const channelListQuery = createChannelListQuery({
    sdk,
    userFilledChannelListQuery
  });
  logger.info('ChannelList - created query', channelListQuery);
  setChannelSource(channelListQuery);
  channelListDispatcher({
    type: INIT_CHANNELS_START
  });
  if (userFilledChannelListQuery) {
    logger.info('ChannelList - setting up channelListQuery', channelListQuery);
    channelListDispatcher({
      type: CHANNEL_LIST_PARAMS_UPDATED,
      payload: {
        channelListQuery,
        currentUserId: sdk && sdk.currentUser && sdk.currentUser.userId
      }
    });
  }
  logger.info('ChannelList - fetching channels');
  if (channelListQuery.hasNext) {
    channelListQuery.next().then(channelList => {
      var _sdk$appInfo, _sdk$appInfo$premiumF;
      logger.info('ChannelList - fetched channels', channelList);
      // select first channel
      logger.info('ChannelList - highlight channel', channelList[0]);
      let sortedChannelList = channelList;
      if (sortChannelList && typeof sortChannelList === 'function') {
        sortedChannelList = sortChannelList(channelList);
        logger.info('ChannelList - channel list sorted', sortedChannelList);
      }
      if (!disableAutoSelect) {
        onChannelSelect(sortedChannelList[0]);
      }
      channelListDispatcher({
        type: INIT_CHANNELS_SUCCESS,
        payload: {
          channelList: sortedChannelList,
          disableAutoSelect
        }
      });
      const canSetMarkAsDelivered = sdk === null || sdk === void 0 ? void 0 : (_sdk$appInfo = sdk.appInfo) === null || _sdk$appInfo === void 0 ? void 0 : (_sdk$appInfo$premiumF = _sdk$appInfo.premiumFeatureList) === null || _sdk$appInfo$premiumF === void 0 ? void 0 : _sdk$appInfo$premiumF.find(feature => feature === DELIVERY_RECIPT);
      if (canSetMarkAsDelivered && !disableMarkAsDelivered) {
        sortedChannelList.forEach(channel => {
          markAsDeliveredScheduler.push(channel);
        });
      }
    }).catch(err => {
      if (err) {
        logger.error('ChannelList - couldnt fetch channels', err);
        channelListDispatcher({
          type: INIT_CHANNELS_FAILURE
        });
      }
    });
  } else {
    logger.info('ChannelList - there are no more channels');
  }
}
const pubSubHandleRemover = subscriber => {
  subscriber.forEach(s => {
    try {
      s.remove();
    } catch (_unused) {
      //
    }
  });
};
const ChannelListProvider_63f3007c_pubSubHandler = (pubSub, channelListDispatcher) => {
  const subscriber = new Map();
  if (!pubSub) return subscriber;
  subscriber.set(PUBSUB_TOPICS.CREATE_CHANNEL, pubSub.subscribe(PUBSUB_TOPICS.CREATE_CHANNEL, msg => {
    const {
      channel
    } = msg;
    channelListDispatcher({
      type: 'CREATE_CHANNEL',
      payload: channel
    });
  }));
  subscriber.set(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, msg => {
    var _updatedChannel$lastM;
    const {
      channel,
      message
    } = msg;
    const updatedChannel = channel;
    if ((updatedChannel === null || updatedChannel === void 0 ? void 0 : (_updatedChannel$lastM = updatedChannel.lastMessage) === null || _updatedChannel$lastM === void 0 ? void 0 : _updatedChannel$lastM.messageId) === message.messageId) {
      updatedChannel.lastMessage = message;
    }
    if (channel) {
      channelListDispatcher({
        type: ON_LAST_MESSAGE_UPDATED,
        payload: updatedChannel
      });
    }
  }));
  subscriber.set(PUBSUB_TOPICS.LEAVE_CHANNEL, pubSub.subscribe(PUBSUB_TOPICS.LEAVE_CHANNEL, msg => {
    const {
      channel
    } = msg;
    channelListDispatcher({
      type: LEAVE_CHANNEL_SUCCESS,
      payload: channel === null || channel === void 0 ? void 0 : channel.url
    });
  }));
  subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_START, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_START, msg => {
    const {
      channel
    } = msg;
    channelListDispatcher({
      type: CHANNEL_REPLACED_TO_TOP,
      payload: channel
    });
  }));
  return subscriber;
};

var channelListInitialState = {
  // we might not need this initialized state -> should remove
  initialized: false,
  loading: true,
  allChannels: [],
  currentChannel: null,
  channelListQuery: null,
  currentUserId: '',
  disableAutoSelect: false
};

function ChannelListProvider_63f3007c_reducer(state, action) {
  switch (action.type) {
    case INIT_CHANNELS_START:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        loading: true
      });
    case RESET_CHANNEL_LIST:
      return channelListInitialState;
    case INIT_CHANNELS_SUCCESS:
      {
        const {
          channelList,
          disableAutoSelect
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          initialized: true,
          loading: false,
          allChannels: channelList,
          disableAutoSelect,
          currentChannel: !disableAutoSelect && channelList && channelList.length && channelList.length > 0 ? channelList[0] : null
        });
      }
    case FETCH_CHANNELS_SUCCESS:
      {
        const currentChannels = state.allChannels.map(c => c.url);
        const filteredChannels = action.payload.filter(_ref => {
          let {
            url
          } = _ref;
          return !currentChannels.find(c => c === url);
        });
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: [...state.allChannels, ...filteredChannels]
        });
      }
    case USER_INVITED:
      {
        const channel = action.payload;
        if (state.channelListQuery) {
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel)
            });
          }
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentChannel: channel
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: [channel, ...state.allChannels.filter(ch => ch.url !== (channel === null || channel === void 0 ? void 0 : channel.url))]
        });
      }
    case CREATE_CHANNEL:
      {
        const channel = action.payload;
        if (state.channelListQuery) {
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel)
            });
          }
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentChannel: channel
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: [channel, ...state.allChannels.filter(ch => ch.url !== (channel === null || channel === void 0 ? void 0 : channel.url))],
          currentChannel: channel
        });
      }
    case ON_CHANNEL_ARCHIVED:
      {
        var _state$currentChannel;
        const channel = action.payload;
        if (state.channelListQuery) {
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel)
            });
            // TODO: Check if we have to set current channel
          }
        }

        const nextChannel = (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel = state.currentChannel) === null || _state$currentChannel === void 0 ? void 0 : _state$currentChannel.url) ? state.allChannels[state.allChannels[0].url === (channel === null || channel === void 0 ? void 0 : channel.url) ? 1 : 0] : state.currentChannel;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: state.allChannels.filter(_ref2 => {
            let {
              url
            } = _ref2;
            return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
          }),
          currentChannel: state.disableAutoSelect ? null : nextChannel
        });
      }
    case LEAVE_CHANNEL_SUCCESS:
    case ON_CHANNEL_DELETED:
      {
        var _state$currentChannel2;
        const channelUrl = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentChannel: channelUrl === ((_state$currentChannel2 = state.currentChannel) === null || _state$currentChannel2 === void 0 ? void 0 : _state$currentChannel2.url) ? state.allChannels[0] : state.currentChannel,
          allChannels: state.allChannels.filter(_ref3 => {
            let {
              url
            } = _ref3;
            return url !== channelUrl;
          })
        });
      }
    case ON_USER_LEFT:
      {
        var _state$currentChannel5;
        const {
          channel,
          isMe
        } = action.payload;
        if (state.channelListQuery) {
          var _state$currentChannel4;
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            var _state$currentChannel3;
            const filteredChannels = getChannelsWithUpsertedChannel(state.allChannels, channel);
            const nextChannel = isMe && (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel3 = state.currentChannel) === null || _state$currentChannel3 === void 0 ? void 0 : _state$currentChannel3.url) ? filteredChannels[0] : state.currentChannel;
            return _objectSpread2(_objectSpread2({}, state), {}, {
              currentChannel: state.disableAutoSelect ? null : nextChannel,
              allChannels: filteredChannels
            });
          }
          const nextChannel = (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel4 = state.currentChannel) === null || _state$currentChannel4 === void 0 ? void 0 : _state$currentChannel4.url) ? state.allChannels[0] : state.currentChannel;
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentChannel: state.disableAutoSelect ? null : nextChannel,
            allChannels: state.allChannels.filter(_ref4 => {
              let {
                url
              } = _ref4;
              return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
            })
          });
        }
        const filteredChannels = state.allChannels.filter(c => !(c.url === (channel === null || channel === void 0 ? void 0 : channel.url) && isMe));
        const nextChannel = isMe && (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel5 = state.currentChannel) === null || _state$currentChannel5 === void 0 ? void 0 : _state$currentChannel5.url) ? filteredChannels[0] : state.currentChannel;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentChannel: state.disableAutoSelect ? null : nextChannel,
          allChannels: filteredChannels
        });
      }
    case ON_USER_JOINED:
    case ON_CHANNEL_CHANGED:
    case ON_READ_RECEIPT_UPDATED:
    case ON_DELIVERY_RECEIPT_UPDATED:
      {
        const {
          allChannels = []
        } = state;
        const channel = action.payload;
        const {
          unreadMessageCount
        } = channel;
        if (!(channel !== null && channel !== void 0 && channel.lastMessage)) return state;
        if (state.channelListQuery) {
          var _state$currentChannel6;
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: getChannelsWithUpsertedChannel(allChannels, channel)
            });
          }
          const nextChannel = (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel6 = state.currentChannel) === null || _state$currentChannel6 === void 0 ? void 0 : _state$currentChannel6.url) ? state.allChannels[state.allChannels[0].url === (channel === null || channel === void 0 ? void 0 : channel.url) ? 1 : 0]
          // if coming channel is first of channel list, current channel will be the next one
          : state.currentChannel;
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentChannel: state.disableAutoSelect ? null : nextChannel,
            allChannels: state.allChannels.filter(_ref5 => {
              let {
                url
              } = _ref5;
              return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
            })
          });
        }
        // if its only an unread message count change, dont push to top
        if (unreadMessageCount === 0) {
          const currentChannel = allChannels.find(_ref6 => {
            let {
              url
            } = _ref6;
            return url === (channel === null || channel === void 0 ? void 0 : channel.url);
          });
          const currentUnreadCount = currentChannel && currentChannel.unreadMessageCount;
          if (currentUnreadCount === 0) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: state.allChannels.map(ch => ch.url === (channel === null || channel === void 0 ? void 0 : channel.url) ? channel : ch)
            });
          }
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: [channel, ...state.allChannels.filter(_ref7 => {
            let {
              url
            } = _ref7;
            return url !== action.payload.url;
          })]
        });
      }
    case SET_CURRENT_CHANNEL:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        currentChannel: action.payload
      });
    case ON_LAST_MESSAGE_UPDATED:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: state.allChannels.map(channel => (channel === null || channel === void 0 ? void 0 : channel.url) === action.payload.url ? action.payload : channel)
        });
      }
    case ON_CHANNEL_FROZEN:
      {
        const channel = action.payload;
        if (state.channelListQuery) {
          var _state$currentChannel7;
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel)
            });
          }
          const nextChannel = (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel7 = state.currentChannel) === null || _state$currentChannel7 === void 0 ? void 0 : _state$currentChannel7.url) ? state.allChannels[state.allChannels[0].url === (channel === null || channel === void 0 ? void 0 : channel.url) ? 1 : 0]
          // if coming channel is first of channel list, current channel will be the next one
          : state.currentChannel;
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allChannels: state.allChannels.filter(_ref8 => {
              let {
                url
              } = _ref8;
              return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
            }),
            currentChannel: state.disableAutoSelect ? null : nextChannel
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: state.allChannels.map(ch => {
            if (ch.url === (channel === null || channel === void 0 ? void 0 : channel.url)) {
              // eslint-disable-next-line no-param-reassign
              ch.isFrozen = true;
              return ch;
            }
            return ch;
          })
        });
      }
    case ON_CHANNEL_UNFROZEN:
      {
        const channel = action.payload;
        if (state.channelListQuery) {
          var _state$currentChannel8;
          if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel)
            });
          }
          const nextChannel = (channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel8 = state.currentChannel) === null || _state$currentChannel8 === void 0 ? void 0 : _state$currentChannel8.url) ? state.allChannels[state.allChannels[0].url === (channel === null || channel === void 0 ? void 0 : channel.url) ? 1 : 0]
          // if coming channel is first of channel list, current channel will be the next one
          : state.currentChannel;
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allChannels: state.allChannels.filter(_ref9 => {
              let {
                url
              } = _ref9;
              return url !== (channel === null || channel === void 0 ? void 0 : channel.url);
            }),
            currentChannel: state.disableAutoSelect ? null : nextChannel
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: state.allChannels.map(ch => {
            if (ch.url === (channel === null || channel === void 0 ? void 0 : channel.url)) {
              // eslint-disable-next-line no-param-reassign
              ch.isFrozen = false;
              return ch;
            }
            return ch;
          })
        });
      }
    case CHANNEL_REPLACED_TO_TOP:
      {
        if (state.channelListQuery) {
          if (filterChannelListParams(state.channelListQuery, action.payload, state.currentUserId)) {
            return _objectSpread2(_objectSpread2({}, state), {}, {
              allChannels: [action.payload, ...state.allChannels.filter(channel => (channel === null || channel === void 0 ? void 0 : channel.url) !== action.payload.url)]
            });
          }
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allChannels: [action.payload, ...state.allChannels.filter(channel => (channel === null || channel === void 0 ? void 0 : channel.url) !== action.payload.url)]
        });
      }
    case CHANNEL_LIST_PARAMS_UPDATED:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        currentUserId: action.payload.currentUserId,
        channelListQuery: action.payload.channelListQuery
      });
    default:
      return state;
  }
}

function useActiveChannelUrl(_ref, _ref2) {
  let {
    activeChannelUrl,
    channels,
    sdk
  } = _ref;
  let {
    logger,
    channelListDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (activeChannelUrl) {
      logger.info('ChannelListProvider: looking for active channel', {
        activeChannelUrl
      });
      const activeChannel = channels === null || channels === void 0 ? void 0 : channels.find(channel => channel.url === activeChannelUrl);
      if (activeChannel) {
        channelListDispatcher({
          type: SET_CURRENT_CHANNEL,
          payload: activeChannel
        });
      } else {
        var _sdk$groupChannel;
        logger.info('ChannelListProvider: searching backend for active channel', {
          activeChannelUrl
        });
        sdk === null || sdk === void 0 ? void 0 : (_sdk$groupChannel = sdk.groupChannel) === null || _sdk$groupChannel === void 0 ? void 0 : _sdk$groupChannel.getChannel(activeChannelUrl).then(channel => {
          channelListDispatcher({
            type: FETCH_CHANNELS_SUCCESS,
            payload: [channel]
          });
          channelListDispatcher({
            type: SET_CURRENT_CHANNEL,
            payload: channel
          });
        }).catch(() => {
          logger.warning('ChannelListProvider: Active channel not found');
        });
      }
    }
  }, [activeChannelUrl]);
}

const useFetchChannelList = (_ref, _ref2) => {
  let {
    channelSource,
    disableMarkAsDelivered
  } = _ref;
  let {
    channelListDispatcher,
    logger,
    markAsDeliveredScheduler
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(async () => {
    if (!(channelSource !== null && channelSource !== void 0 && channelSource.hasNext)) {
      logger.info('ChannelList: not able to fetch');
      return;
    }
    logger.info('ChannelList: starting fetch');
    channelListDispatcher({
      type: FETCH_CHANNELS_START,
      payload: null
    });
    try {
      const channelList = await channelSource.next();
      logger.info('ChannelList: succeeded fetch', {
        channelList
      });
      channelListDispatcher({
        type: FETCH_CHANNELS_SUCCESS,
        payload: channelList
      });
      if (!disableMarkAsDelivered) {
        logger.info('ChannelList: mark as delivered to fetched channels');
        // eslint-disable-next-line no-unused-expressions
        channelList === null || channelList === void 0 ? void 0 : channelList.forEach(channel => {
          if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) > 0) {
            markAsDeliveredScheduler.push(channel);
          }
        });
      }
    } catch (error) {
      logger.error('ChannelList: failed fetch', {
        error
      });
      channelListDispatcher({
        type: FETCH_CHANNELS_FAILURE,
        payload: error
      });
    }
  }, [channelSource, disableMarkAsDelivered]);
};

const ChannelListContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
  disableUserProfile: true,
  allowProfileEdit: true,
  onBeforeCreateChannel: null,
  onThemeChange: null,
  onProfileEditSuccess: null,
  onChannelSelect: null,
  queries: {},
  className: null,
  initialized: false,
  loading: false,
  allChannels: [],
  currentChannel: null,
  channelListQuery: {},
  currentUserId: null,
  channelListDispatcher: null,
  channelSource: null,
  typingChannels: []
});
const ChannelListProvider = props => {
  var _sdk$appInfo, _sdk$currentUser;
  // destruct props
  const {
    children,
    className,
    disableUserProfile,
    allowProfileEdit,
    queries,
    onProfileEditSuccess,
    onThemeChange,
    onBeforeCreateChannel,
    sortChannelList,
    overrideInviteUser,
    activeChannelUrl,
    isTypingIndicatorEnabled = null,
    isMessageReceiptStatusEnabled = null
  } = props;
  // disable autoselect, if activeChannelUrl is provided
  // useActiveChannelUrl should be executed when activeChannelUrl is present
  const disableAutoSelect = (props === null || props === void 0 ? void 0 : props.disableAutoSelect) || !!activeChannelUrl;
  const onChannelSelect = (props === null || props === void 0 ? void 0 : props.onChannelSelect) || utils_40781609_noop;
  // fetch store from <SendbirdProvider />
  const globalStore = useSendbirdStateContext();
  const {
    config,
    stores
  } = globalStore;
  const {
    sdkStore
  } = stores;
  const {
    pubSub,
    logger,
    onUserProfileMessage
  } = config;
  const {
    markAsDeliveredScheduler,
    disableMarkAsDelivered = false,
    isTypingIndicatorEnabledOnChannelList = false,
    isMessageReceiptStatusEnabledOnChannelList = false
  } = config;
  const sdk = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.sdk;
  const {
    premiumFeatureList = []
  } = (_sdk$appInfo = sdk === null || sdk === void 0 ? void 0 : sdk.appInfo) !== null && _sdk$appInfo !== void 0 ? _sdk$appInfo : {};

  // derive some variables
  // enable if it is true atleast once(both are flase by default)
  const userDefinedDisableUserProfile = disableUserProfile || (config === null || config === void 0 ? void 0 : config.disableUserProfile);
  const userDefinedRenderProfile = config === null || config === void 0 ? void 0 : config.renderUserProfile;
  const enableEditProfile = allowProfileEdit || (config === null || config === void 0 ? void 0 : config.allowProfileEdit);
  const userFilledChannelListQuery = queries === null || queries === void 0 ? void 0 : queries.channelListQuery;
  const userFilledApplicationUserListQuery = queries === null || queries === void 0 ? void 0 : queries.applicationUserListQuery;
  const sdkIntialized = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.initialized;
  const [channelListStore, channelListDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(ChannelListProvider_63f3007c_reducer, channelListInitialState);
  const {
    currentChannel
  } = channelListStore;
  const [channelSource, setChannelSource] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [typingChannels, setTypingChannels] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const subscriber = ChannelListProvider_63f3007c_pubSubHandler(pubSub, channelListDispatcher);
    return () => {
      pubSubHandleRemover(subscriber);
    };
  }, [sdkIntialized]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const sdkChannelHandlerId = uuidv4();
    if (sdkIntialized) {
      logger.info('ChannelList: Setup channelHandlers');
      setupChannelList({
        sdk,
        sdkChannelHandlerId,
        channelListDispatcher,
        setChannelSource,
        onChannelSelect,
        userFilledChannelListQuery,
        logger,
        sortChannelList,
        disableAutoSelect,
        markAsDeliveredScheduler,
        disableMarkAsDelivered
      });
    } else {
      var _sdk$groupChannel;
      logger.info('ChannelList: Removing channelHandlers');
      // remove previous channelHandlers
      if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel = sdk.groupChannel) !== null && _sdk$groupChannel !== void 0 && _sdk$groupChannel.removeGroupChannelHandler) {
        sdk.groupChannel.removeGroupChannelHandler(sdkChannelHandlerId);
      }
      // remove channelSource
      setChannelSource(null);
      // cleanup
      channelListDispatcher({
        type: RESET_CHANNEL_LIST,
        payload: null
      });
    }
    return () => {
      var _sdk$groupChannel2;
      logger.info('ChannelList: Removing channelHandlers');
      if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel2 = sdk.groupChannel) !== null && _sdk$groupChannel2 !== void 0 && _sdk$groupChannel2.removeGroupChannelHandler) {
        var _sdk$groupChannel3;
        sdk === null || sdk === void 0 ? void 0 : (_sdk$groupChannel3 = sdk.groupChannel) === null || _sdk$groupChannel3 === void 0 ? void 0 : _sdk$groupChannel3.removeGroupChannelHandler(sdkChannelHandlerId);
      }
    };
  }, [sdkIntialized, userFilledChannelListQuery, sortChannelList]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sdk$groupChannel4;
    let typingHandlerId = '';
    if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel4 = sdk.groupChannel) !== null && _sdk$groupChannel4 !== void 0 && _sdk$groupChannel4.addGroupChannelHandler) {
      var _sdk$groupChannel5;
      typingHandlerId = uuidv4();
      const handler = new groupChannel_We({
        onTypingStatusUpdated: channel => {
          var _channel$getTypingUse;
          const typingMemberCount = channel === null || channel === void 0 ? void 0 : (_channel$getTypingUse = channel.getTypingUsers()) === null || _channel$getTypingUse === void 0 ? void 0 : _channel$getTypingUse.length;
          const channelList = typingChannels.filter(ch => ch.url !== channel.url);
          if (typingMemberCount > 0) {
            setTypingChannels([...channelList, channel]);
          } else {
            setTypingChannels(channelList);
          }
        },
        onUnreadMemberStatusUpdated(channel) {
          channelListDispatcher({
            type: ON_LAST_MESSAGE_UPDATED,
            payload: channel
          });
        },
        onUndeliveredMemberStatusUpdated(channel) {
          channelListDispatcher({
            type: ON_LAST_MESSAGE_UPDATED,
            payload: channel
          });
        },
        onMessageUpdated(channel) {
          channelListDispatcher({
            type: ON_LAST_MESSAGE_UPDATED,
            payload: channel
          });
          sdk.groupChannel.getChannelWithoutCache(channel.url).then(ch => {
            channelListDispatcher({
              type: ON_LAST_MESSAGE_UPDATED,
              payload: ch
            });
          });
        },
        onMentionReceived(channel) {
          channelListDispatcher({
            type: ON_LAST_MESSAGE_UPDATED,
            payload: channel
          });
          sdk.groupChannel.getChannelWithoutCache(channel.url).then(ch => {
            channelListDispatcher({
              type: ON_LAST_MESSAGE_UPDATED,
              payload: ch
            });
          });
        }
      });
      sdk === null || sdk === void 0 ? void 0 : (_sdk$groupChannel5 = sdk.groupChannel) === null || _sdk$groupChannel5 === void 0 ? void 0 : _sdk$groupChannel5.addGroupChannelHandler(typingHandlerId, handler);
    }
    return () => {
      var _sdk$groupChannel6;
      if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel6 = sdk.groupChannel) !== null && _sdk$groupChannel6 !== void 0 && _sdk$groupChannel6.removeGroupChannelHandler && typingHandlerId !== '') {
        sdk.groupChannel.removeGroupChannelHandler(typingHandlerId);
      }
    };
  }, [sdk === null || sdk === void 0 ? void 0 : (_sdk$currentUser = sdk.currentUser) === null || _sdk$currentUser === void 0 ? void 0 : _sdk$currentUser.userId]);
  const queries_ = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return {
      applicationUserListQuery: userFilledApplicationUserListQuery,
      channelListQuery: userFilledChannelListQuery
    };
  }, [userFilledApplicationUserListQuery, userFilledChannelListQuery]);
  const {
    allChannels
  } = channelListStore;
  const sortedChannels = sortChannelList && typeof sortChannelList === 'function' ? sortChannelList(allChannels) : allChannels;
  if (sortedChannels.length !== allChannels.length) {
    const warning = `ChannelList: You have removed/added extra channels on sortChannelList
      this could cause unexpected problems`;
    // eslint-disable-next-line no-console
    console.warn(warning, {
      before: allChannels,
      after: sortedChannels
    });
    logger.warning(warning, {
      before: allChannels,
      after: sortedChannels
    });
  }

  // Set current channel (by on_channel_selected event)
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!sdk || !sdk.groupChannel || !currentChannel || !(currentChannel !== null && currentChannel !== void 0 && currentChannel.url)) {
      return;
    }
    sdk.groupChannel.getChannel(currentChannel.url).then(groupChannel => {
      if (groupChannel) {
        onChannelSelect(groupChannel);
      } else {
        onChannelSelect(null);
      }
    });
  }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);

  // Set active channel (by url)
  useActiveChannelUrl({
    activeChannelUrl,
    channels: sortedChannels,
    sdk
  }, {
    logger,
    channelListDispatcher
  });
  const fetchChannelList = useFetchChannelList({
    channelSource,
    disableMarkAsDelivered: disableMarkAsDelivered || !premiumFeatureList.some(feature => feature === consts_397a92f1["b" /* D */])
  }, {
    channelListDispatcher,
    logger,
    markAsDeliveredScheduler
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListContext.Provider, {
    value: _objectSpread2(_objectSpread2({
      className,
      disableUserProfile,
      queries: queries_,
      onProfileEditSuccess,
      onThemeChange,
      onBeforeCreateChannel,
      overrideInviteUser,
      onChannelSelect,
      sortChannelList,
      allowProfileEdit: enableEditProfile,
      channelListDispatcher,
      channelSource
    }, channelListStore), {}, {
      allChannels: sortedChannels,
      typingChannels,
      isTypingIndicatorEnabled: isTypingIndicatorEnabled !== null ? isTypingIndicatorEnabled : isTypingIndicatorEnabledOnChannelList,
      isMessageReceiptStatusEnabled: isMessageReceiptStatusEnabled !== null ? isMessageReceiptStatusEnabled : isMessageReceiptStatusEnabledOnChannelList,
      fetchChannelList
    })
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    disableUserProfile: userDefinedDisableUserProfile !== null && userDefinedDisableUserProfile !== void 0 ? userDefinedDisableUserProfile : config === null || config === void 0 ? void 0 : config.disableUserProfile,
    renderUserProfile: userDefinedRenderProfile,
    onUserProfileMessage: onUserProfileMessage
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-channel-list ${className}`
  }, children)));
};
function useChannelListContext() {
  const context = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(ChannelListContext);
  return context;
}


//# sourceMappingURL=ChannelListProvider-63f3007c.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ImageRenderer.js


var numberToPx = (value => {
  return typeof value === 'number' ? `${value}px` : value;
});

/*
  ImageRenderer displays image with url or source
  it checks if the source exist with img tag first
  if it exists onLoad is called, if not onError is called
  and those properties switch img tag to real purposing element
*/

function getBorderRadiusForImageRenderer() {
  let circle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
  let borderRadius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  return circle ? '50%' : numberToPx(borderRadius);
}
const ImageRenderer = _ref => {
  let {
    className = '',
    url,
    alt = '',
    width = null,
    height = null,
    circle = false,
    fixedSize = false,
    placeHolder = null,
    defaultComponent = null,
    borderRadius = null,
    onLoad = () => {/* noop */},
    onError = () => {/* noop */}
  } = _ref;
  const [showDefaultComponent, setShowDefaultComponent] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showPlaceHolder, setShowPlaceHolder] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(true);
  const parsedWidth = numberToPx(width);
  const parsedHeight = numberToPx(height);
  const DefaultComponent = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return typeof defaultComponent === 'function' ? defaultComponent() : defaultComponent;
  }, [defaultComponent]);
  const PlaceHolder = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return placeHolder && typeof placeHolder === 'function' ? placeHolder({
      style: {
        width: '100%',
        minWidth: parsedWidth,
        maxWidth: fixedSize ? parsedWidth : '400px',
        height: parsedHeight,
        position: 'absolute',
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center'
      }
    }) : null;
  }, [placeHolder]);
  const HiddenImageLoader = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    setShowDefaultComponent(false);
    // reset the state when url is changed
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", {
      className: "sendbird-image-renderer__hidden-image-loader",
      src: url,
      alt: alt,
      onLoad: () => {
        setShowPlaceHolder(false);
        onLoad();
      },
      onError: () => {
        setShowDefaultComponent(true);
        onError();
      }
    });
  }, [url]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-image-renderer'].join(' '),
    style: {
      width: '100%',
      minWidth: parsedWidth,
      maxWidth: fixedSize ? parsedWidth : '400px',
      height: parsedHeight
    }
  }, showPlaceHolder && PlaceHolder, showDefaultComponent ? DefaultComponent : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-image-renderer__image",
    style: {
      width: '100%',
      minWidth: parsedWidth,
      maxWidth: fixedSize ? parsedWidth : '400px',
      height: parsedHeight,
      position: 'absolute',
      backgroundRepeat: 'no-repeat',
      backgroundPosition: 'center',
      backgroundSize: 'cover',
      backgroundImage: `url(${url})`,
      borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius)
    }
  }), HiddenImageLoader);
};


//# sourceMappingURL=ImageRenderer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Avatar.js






var pxToNumber = (px => {
  if (typeof px === 'number') {
    return px;
  }
  if (typeof px === 'string') {
    const parsed = Number.parseFloat(px);
    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }
  return null;
});

const imageRendererClassName = 'sendbird-avatar-img';
const Avatar_DefaultComponent = _ref => {
  let {
    width,
    height
  } = _ref;
  let iconWidth = pxToNumber(width);
  let iconHeight = pxToNumber(height);
  if (typeof iconWidth === 'number') {
    iconWidth *= 0.575;
  }
  if (typeof iconHeight === 'number') {
    iconHeight *= 0.575;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-avatar-img--default",
    style: {
      width,
      height
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.USER,
    fillColor: IconColors.CONTENT,
    width: iconWidth,
    height: iconHeight
  }));
};
const _defaultComponent = _ref2 => {
  let {
    width,
    height
  } = _ref2;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar_DefaultComponent, {
    width: width,
    height: height
  });
};
const AvatarInner = _ref3 => {
  let {
    src = '',
    alt = '',
    height,
    width,
    customDefaultComponent
  } = _ref3;
  const defaultComponent = () => customDefaultComponent ? customDefaultComponent({
    width,
    height
  }) : _defaultComponent({
    width,
    height
  });
  if (typeof src === 'string') {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      className: imageRendererClassName,
      url: src,
      height: height,
      width: width,
      alt: alt,
      defaultComponent: defaultComponent
    });
  }
  if (src && src.length) {
    if (src.length === 1) {
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[0],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      });
    }
    if (src.length === 2) {
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        className: "sendbird-avatar--inner__two-child"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[0],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[1],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      }));
    }
    if (src.length === 3) {
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        className: "sendbird-avatar--inner__three-child--upper"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[0],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        className: "sendbird-avatar--inner__three-child--lower"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[1],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        className: imageRendererClassName,
        url: src[2],
        height: height,
        width: width,
        alt: alt,
        defaultComponent: defaultComponent
      })));
    }
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-avatar--inner__four-child"
    }, src.slice(0, 4).map(i => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      className: imageRendererClassName,
      url: i,
      height: height,
      width: width,
      alt: alt,
      key: uuidv4(),
      defaultComponent: defaultComponent
    })));
  }
  // default img
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    className: imageRendererClassName,
    url: "",
    height: height,
    width: width,
    alt: alt,
    defaultComponent: defaultComponent
  });
};
function Avatar(_ref4, ref) {
  let {
    className = '',
    src = '',
    alt = '',
    width = '56px',
    height = '56px',
    onClick,
    customDefaultComponent
  } = _ref4;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-avatar'].join(' '),
    role: "button",
    ref: ref,
    style: {
      height,
      width
    },
    onClick: onClick,
    onKeyDown: onClick,
    tabIndex: 0
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AvatarInner, {
    src: src,
    width: width,
    height: height,
    alt: alt,
    customDefaultComponent: customDefaultComponent
  }));
}
var Avatar$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(Avatar);


//# sourceMappingURL=Avatar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/ChannelListHeader.js














const ChannelListHeader = _ref => {
  let {
    renderHeader,
    renderTitle,
    renderIconButton,
    onEdit,
    allowProfileEdit
  } = _ref;
  const {
    stores,
    config
  } = useSendbirdStateContext();
  const {
    user
  } = stores.userStore;
  const {
    logger
  } = config;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  if (renderHeader) {
    logger === null || logger === void 0 ? void 0 : logger.warning('Recomend to use "renderTitle" instead of "renderHeader". It will be deprecated.');
  }
  // renderTitle should have higher priority
  const titleRenderer = renderHeader || renderTitle;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-channel-header', allowProfileEdit ? 'sendbird-channel-header--allow-edit' : ''].join(' ')
  }, (titleRenderer === null || titleRenderer === void 0 ? void 0 : titleRenderer()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-header__title",
    role: "button",
    onClick: () => {
      onEdit === null || onEdit === void 0 ? void 0 : onEdit();
    },
    onKeyDown: () => {
      onEdit === null || onEdit === void 0 ? void 0 : onEdit();
    },
    tabIndex: 0
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-header__title__left"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    width: "32px",
    height: "32px",
    src: user.profileUrl,
    alt: user.nickname
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-header__title__right"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-header__title__right__name",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, user.nickname || stringSet.NO_NAME), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-header__title__right__user-id",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_2
  }, user.userId))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-header__right-icon"
  }, renderIconButton === null || renderIconButton === void 0 ? void 0 : renderIconButton()));
};


//# sourceMappingURL=ChannelListHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/sendbirdSelectors.js




/**
 * 1. UIKit Instances
 *    a. getSdk
 *    b. getPubSub
 * 2. Chat & Connection
 *    a. getConnect
 *    b. getDisconnect
 *    c. getUpdateUserInfo
 * 3. Channel
 *    a. getCreateGroupChannel
 *    b. getCreateOpenChannel
 *    c. getGetGroupChannel
 *    d. getGetOpenChannel
 *    e. getLeaveGroupChannel
 *    f. getEnterOpenChannel
 *    g. getExitOpenChannel
 *    h. getFreezeChannel
 *    i. getUnfreezeChannel
 * 4. Message
 *    a. getSendUserMessage
 *    b. getSendFileMessage
 *    c. getUpdateUserMessage
 *    d. x - getUpdateFileMessage
 *    e. getDeleteMessage
 *    f. getResendUserMessage
 *    g. getResendFileMessage
 */

/**
 * import useSendbirdStateContext from '@sendbird-uikit/useSendbirdStateContext'
 * import selectors from '@sendbird-uikit/send'
 * const state = useSendbirdStateContext();
 */

// 1. UIKit Instances
/**
 * const sdk = selectors.getSdk(state);
 */
const getSdk = state => {
  const {
    stores = {}
  } = state;
  const {
    sdkStore = {}
  } = stores;
  const {
    sdk
  } = sdkStore;
  return sdk;
};

/**
 * const pubSub = selectors.getPubSub(state);
 */
const getPubSub = state => {
  const {
    config = {}
  } = state;
  const {
    pubSub
  } = config;
  return pubSub;
};

// 2. Chat & Connection

/**
 * const connect = selectors.getConnect(state);
 * connect('user-id-sendbirdian', 'access-token-0000')
 *  .then((user) => {})
 *  .catch((error) => {})
 */
const getConnect = state => (userId, accessToken) => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!(sdk !== null && sdk !== void 0 && sdk.connect && typeof sdk.connect === 'function')) {
    reject(new Error('Not found the function "connect'));
  }
  if (!accessToken) {
    sdk.connect(userId).then(res => resolve(res)).catch(err => reject(err));
  } else {
    sdk.connect(userId, accessToken).then(res => resolve(res)).catch(err => reject(err));
  }
});

/**
 * const disconnect = selectors.getDisconnect(state);
 * disconnect()
 *  .then(() => {})
 *  .catch((error) => {})
 */
const getDisconnect = state => () => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!(sdk.disconnect && typeof sdk.disconnect === 'function')) {
    reject(new Error('Not found the function "disconnect'));
  }
  sdk.disconnect().then(res => resolve(res)).catch(err => reject(err));
});

/**
 * const updateUserInfo = selectors.getUpdateUserInfo(state);
 * updateUserInfo('new-nickname', 'new-profile-url')
 *  .then((user) => {})
 *  .catch((error) => {})
 */
const getUpdateUserInfo = state => (nickname, profileUrl) => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!(sdk.updateCurrentUserInfo && typeof sdk.updateCurrentUserInfo === 'function')) {
    reject(new Error('Not found the function "updateCurrentUserInfo"'));
  }
  const userParams = {
    nickname
  };
  if (profileUrl) {
    userParams.profileUrl = profileUrl;
  }
  sdk.updateCurrentUserInfo(userParams).then(res => resolve(res)).catch(err => reject(err));
});

// 3. Channel

/**
 * const createGroupChannel = selectors.getCreateGroupChannel(state);
 * createGroupChannel(channelParams: GroupChannelCreateParams)
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
const getCreateGroupChannel = state => params => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  const pubSub = getPubSub(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!sdk.groupChannel) {
    reject(new Error('Not found GroupChannelModule'));
  }
  if (!(sdk.groupChannel.createChannel && typeof sdk.groupChannel.createChannel === 'function')) {
    reject(new Error('Not found the function "createChannel"'));
  }
  sdk.groupChannel.createChannel(params).then(channel => {
    resolve(channel);
    pubSub.publish(PUBSUB_TOPICS.CREATE_CHANNEL, {
      channel
    });
  }).catch(reject);
});

/**
 * const createOpenChannel = selectors.getCreateOpenChannel(state);
 * createOpenChannel(channelParams: OpenChannelCreateParams)
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
const getCreateOpenChannel = state => params => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  // const pubSub = getPubSub(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!sdk.openChannel) {
    reject(new Error('Not found OpenChannelModule'));
  }
  if (!(sdk.openChannel.createChannel && typeof sdk.openChannel.createChannel === 'function')) {
    reject(new Error('Not found the function "createChannel"'));
  }
  sdk.openChannel.createChannel(params).then(channel => {
    resolve(channel);
    // Consider pubSub process
  }).catch(reject);
});

/**
 * const getGroupChannel = selectors.getGetGroupChannel(state);
 * getGroupChannel('channel-url-1234', isSelected)
 *  .then((channel) => {
 *    // groupChannel = channel;
 *    // or
 *    // setCurrentChannel(channel);
 *  })
 *  .catch((error) => {})
 */
const getGetGroupChannel = state => channelUrl => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  // const pubSub = getPubSub(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!sdk.groupChannel) {
    reject(new Error('Not found GroupChannelModule'));
  }
  if (!(sdk.groupChannel.getChannel && typeof sdk.groupChannel.getChannel === 'function')) {
    reject(new Error('Not found the function "getChannel"'));
  }
  sdk.groupChannel.getChannel(channelUrl).then(channel => {
    resolve(channel);
    // Add pubSub with isSelected
  }).catch(reject);
});

/**
 * const getOpenChannel = selectors.getGetOpenChannel(state);
 * getOpenChannel('channel-url-12345')
 *  .then((channel) => {
 *    // openChannel = channel;
 *    // or
 *    // setCurrentChannel(channel);
 *  })
 *  .catch((error) => {})
 */
const getGetOpenChannel = state => channelUrl => new Promise((resolve, reject) => {
  const sdk = getSdk(state);
  // const pubSub = getPubSub(state);
  if (!sdk) {
    reject(new Error('Sdk not found'));
  }
  if (!sdk.openChannel) {
    reject(new Error('Not found OpenChannelModule'));
  }
  if (!(sdk.openChannel.getChannel && typeof sdk.openChannel.getChannel === 'function')) {
    reject(new Error('Not found the function "getChannel"'));
  }
  sdk.openChannel.getChannel(channelUrl).then(channel => {
    resolve(channel);
    // Add pubSub with isSelected
  }).catch(reject);
});

/**
 * const leaveChannel = selectors.getLeaveGroupChannel(state);
 * leaveChannel('group-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
const getLeaveGroupChannel = state => channelUrl => new Promise((resolve, reject) => {
  var _getGetGroupChannel;
  (_getGetGroupChannel = getGetGroupChannel(state)) === null || _getGetGroupChannel === void 0 ? void 0 : _getGetGroupChannel(channelUrl).then(channel => {
    channel.leave().then(() => {
      resolve();
      // Add pubSub process
    }).catch(reject);
  }).catch(reject);
});

/**
 * const enterChannel = selectors.getEnterOpenChannel(state);
 * enterChannel('open-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
const getEnterOpenChannel = state => channelUrl => new Promise((resolve, reject) => {
  var _getGetOpenChannel;
  (_getGetOpenChannel = getGetOpenChannel(state)) === null || _getGetOpenChannel === void 0 ? void 0 : _getGetOpenChannel(channelUrl).then(channel => {
    channel.enter().then(() => {
      resolve(channel);
      // Add pubSub process
    }).catch(reject);
  }).catch(reject);
});

/**
 * const exitChannel = selectors.getExitOpenChannel(state);
 * exitChannel('open-channel-url')
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
const getExitOpenChannel = state => channelUrl => new Promise((resolve, reject) => {
  var _getGetOpenChannel2;
  (_getGetOpenChannel2 = getGetOpenChannel(state)) === null || _getGetOpenChannel2 === void 0 ? void 0 : _getGetOpenChannel2(channelUrl).then(channel => {
    channel.exit().then(() => {
      resolve(channel);
      // Add pubSub process
    }).catch(reject);
  }).catch(reject);
});

/**
 * const freezeChannel = selectors.getFreezeChannel(currentChannel);
 * freezeChannel()
 *  .then(() => {})
 *  .catch((error) => {})
 */
const getFreezeChannel = () => channel => new Promise((resolve, reject) => {
  if (!(channel.freeze && typeof (channel === null || channel === void 0 ? void 0 : channel.freeze) === 'function')) {
    reject(new Error('Not found the function "freeze"'));
  }
  channel.freeze().then(() => {
    resolve();
    // Add pubSub process
    /**
     * consider divide the logic to
     * _freezeGroupChannel and _freezeOpenChannel
     */
  }).catch(reject);
});

/**
 * const unfreezeChannel = selectors.getUnfreezeChannel(currentChannel);
 * unfreezeChannel()
 *  .then((channel) => {})
 *  .catch((error) => {})
 */
const getUnfreezeChannel = () => channel => new Promise((resolve, reject) => {
  if (!(channel.unfreeze && typeof (channel === null || channel === void 0 ? void 0 : channel.unfreeze) === 'function')) {
    reject(new Error('Not found the function "unfreeze"'));
  }
  channel.unfreeze().then(() => {
    resolve();
    // Add pubSub process
    /**
     * consider divide the logic to
     * _unfreezeGroupChannel and _unfreezeOpenChannel
     */
  }).catch(reject);
});

// 4. Message
class sendbirdSelectors_UikitMessageHandler {
  constructor() {
    _defineProperty(this, "_onPending", utils_40781609_noop);
    _defineProperty(this, "_onFailed", utils_40781609_noop);
    _defineProperty(this, "_onSucceeded", utils_40781609_noop);
  }
  triggerPending(message) {
    this._onPending(message);
  }
  triggerFailed(error, message) {
    this._onFailed(error, message.isResendable ? message : null);
  }
  triggerSucceeded(message) {
    this._onSucceeded(message);
  }
  onPending(handler) {
    if (typeof handler === 'function') {
      this._onPending = handler;
    }
    return this;
  }
  onFailed(handler) {
    if (typeof handler === 'function') {
      this._onFailed = handler;
    }
    return this;
  }
  onSucceeded(handler) {
    if (typeof handler === 'function') {
      this._onSucceeded = handler;
    }
    return this;
  }
}

/**
 * const sendUserMessage = selectors.getSendUserMessage(state);
 * sendUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  params: UserMessageCreateParams,
 * )
 *  .onPending((message) => {})
 *  .onFailed((error, message) => {})
 *  .onSucceeded((message) => {})
 */

const getSendUserMessage = state => (channel, params) => {
  const handler = new sendbirdSelectors_UikitMessageHandler();
  const pubSub = getPubSub(state);
  channel.sendUserMessage(params).onFailed((error, message) => {
    pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, {
      error,
      message,
      channel
    });
    handler.triggerFailed(error, message);
  }).onPending(message => {
    pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_START, {
      message,
      channel
    });
    handler.triggerPending(message);
  }).onSucceeded(message => {
    pubSub.publish(PUBSUB_TOPICS.SEND_USER_MESSAGE, {
      message,
      channel
    });
    handler.triggerSucceeded(message);
  });
  return handler;
};

/**
 * const sendFileMessage = selectors.getSendFileMessage(state);
 * sendFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  params: FileMessageCreateParams,
 * )
 *  .onPending((message) => {})
 *  .onFailed((error, message) => {})
 *  .onSucceeded((message) => {})
 */
const getSendFileMessage = state => (channel, params) => {
  const handler = new sendbirdSelectors_UikitMessageHandler();
  const pubSub = getPubSub(state);
  channel.sendFileMessage(params).onFailed((error, message) => {
    pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, {
      error,
      message,
      channel
    });
    handler.triggerFailed(error, message);
  }).onPending(message => {
    pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_START, {
      message,
      channel
    });
    handler.triggerPending(message);
  }).onSucceeded(message => {
    pubSub.publish(PUBSUB_TOPICS.SEND_FILE_MESSAGE, {
      message,
      channel
    });
    handler.triggerSucceeded(message);
  });
  return handler;
};

/**
 * const updateUserMessage = selectors.getUpdateUserMessage(state);
 * updateUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  messageId: number,
 *  messageParams: UserMessageUpdateParams,
 * )
 *  .then((message) => {})
 *  .catch((error) => {})
 */
const getUpdateUserMessage = state => (channel, messageId, params) => new Promise((resolve, reject) => {
  const pubSub = getPubSub(state);
  channel.updateUserMessage(messageId, params).then(message => {
    pubSub.publish(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, {
      message,
      channel,
      fromSelector: true
    });
    resolve(message);
  }).catch(reject);
});

// TODO: We will provie this function in the future
/**
 * const updateFileMessage = selectors.getUpdateFileMessage(state);
 * updateFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  messageId: number,
 *  params: FileMessageUpdateParams,
 * )
 *  .then((message) => {})
 *  .catch((error) => {})
 */
// const getUpdateFileMessage = (state: SendBirdState) => (
//   (channel: GroupChannel | OpenChannel, messageId: number, params: FileMessageUpdateParams) => (
//     new Promise((resolve, reject) => {
//       const pubSub = getPubSub(state);
//       channel.updateFileMessage(messageId, params)
//         .then((message) => {
//           pubSub.publish(
//             topics.UPDATE_USER_MESSAGE,
//             { message, channel, fromSelector: true },
//           );
//           resolve(message);
//         })
//         .catch(reject);
//     })
//   )
// );

/**
 * const deleteMessage = selectors.getDeleteMessage(state);
 * deleteMessage(
 *  channel: GroupChannel | OpenChannel,
 *  message: SendableMessage,
 * )
 *  .then((deletedMessage) => {})
 *  .catch((error) => {})
 */
const getDeleteMessage = state => (channel, message) => new Promise((resolve, reject) => {
  const pubSub = getPubSub(state);
  const {
    messageId
  } = message;
  channel.deleteMessage(message).then(() => {
    pubSub.publish(PUBSUB_TOPICS.DELETE_MESSAGE, {
      messageId,
      channel
    });
    resolve(message);
  }).catch(reject);
});

/**
 * const resendUserMessage = selectors.getResendUserMessage(state);
 * resendUserMessage(
 *  channel: GroupChannel | OpenChannel,
 *  failedMessage: UserMessage,
 * )
 *  .then(() => {})
 *  .catch((error) => {})
 */
const getResendUserMessage = state => (channel, failedMessage) => new Promise((resolve, reject) => {
  const pubSub = getPubSub(state);
  channel.resendUserMessage(failedMessage).then(message => {
    pubSub.publish(PUBSUB_TOPICS.SEND_USER_MESSAGE, {
      message,
      channel
    });
    resolve(message);
  }).catch(reject);
});

/**
 * const resendFileMessage = selectors.getResendFileMessage(state);
 * resendFileMessage(
 *  channel: GroupChannel | OpenChannel,
 *  failedMessage: FileMessage,
 *  blob: Blob,
 * )
 *  .then(() => {})
 *  .catch((error) => {})
 */
const getResendFileMessage = state => (channel, failedMessage, blob) => new Promise((resolve, reject) => {
  const pubSub = getPubSub(state);
  channel.resendFileMessage(failedMessage, blob).then(message => {
    pubSub.publish(PUBSUB_TOPICS.SEND_FILE_MESSAGE, {
      message,
      channel
    });
    resolve(message);
  }).catch(reject);
});
const sendbirdSelectors = {
  getSdk,
  getPubSub,
  getConnect,
  getDisconnect,
  getUpdateUserInfo,
  getCreateGroupChannel,
  getCreateOpenChannel,
  getGetGroupChannel,
  getGetOpenChannel,
  getLeaveGroupChannel,
  getEnterOpenChannel,
  getExitOpenChannel,
  getFreezeChannel,
  getUnfreezeChannel,
  getSendUserMessage,
  getSendFileMessage,
  getUpdateUserMessage,
  getDeleteMessage,
  getResendUserMessage,
  getResendFileMessage
};


//# sourceMappingURL=sendbirdSelectors.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannelProvider-32ceb13a.js




let CHANNEL_TYPE = /*#__PURE__*/function (CHANNEL_TYPE) {
  CHANNEL_TYPE["GROUP"] = "group";
  CHANNEL_TYPE["SUPERGROUP"] = "supergroup";
  CHANNEL_TYPE["BROADCAST"] = "broadcast";
  return CHANNEL_TYPE;
}({});

const CreateChannelContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const CreateChannelProvider = props => {
  var _store$config;
  const {
    children,
    onCreateChannel,
    onBeforeCreateChannel,
    overrideInviteUser,
    userListQuery
  } = props;
  const store = useSendbirdStateContext();
  const userListQuery_ = store === null || store === void 0 ? void 0 : (_store$config = store.config) === null || _store$config === void 0 ? void 0 : _store$config.userListQuery;
  const createChannel = getCreateGroupChannel(store);
  const [step, setStep] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  const [type, setType] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(CHANNEL_TYPE.GROUP);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannelContext.Provider, {
    value: {
      onBeforeCreateChannel,
      createChannel,
      onCreateChannel,
      overrideInviteUser,
      userListQuery: userListQuery || userListQuery_,
      step,
      setStep,
      type,
      setType
    }
  }, children);
};
const useCreateChannelContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(CreateChannelContext);


//# sourceMappingURL=CreateChannelProvider-32ceb13a.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MutedAvatarOverlay.js




function MutedAvatarOverlay(props) {
  const {
    height = 24,
    width = 24
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-muted-avatar",
    style: {
      height: `${height}px`,
      width: `${width}px`
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-muted-avatar__icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-muted-avatar__bg",
    style: {
      height: `${height}px`,
      width: `${width}px`
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.MUTE,
    fillColor: IconColors.WHITE,
    width: `${height - 8}px`,
    height: `${width - 8}px`
  })));
}


//# sourceMappingURL=MutedAvatarOverlay.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Checkbox.js


function Checkbox(_ref) {
  let {
    id,
    checked = false,
    disabled,
    onChange
  } = _ref;
  const [isChecked, setIsCheck] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(checked);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("label", {
    className: ['sendbird-checkbox', disabled ? 'disabled' : ''].join(' '),
    htmlFor: id
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    disabled: disabled,
    id: id,
    type: "checkbox",
    checked: isChecked,
    onClick: () => {
      if (!disabled) setIsCheck(!isChecked);
    },
    onChange: onChange
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
    className: ['sendbird-checkbox--checkmark', disabled ? 'disabled' : ''].join(' ')
  }));
}


//# sourceMappingURL=Checkbox.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/UserProfile.js



















function UserProfile(_ref) {
  var _store$config, _store$config2;
  let {
    user,
    currentUserId,
    disableMessaging = false,
    onSuccess
  } = _ref;
  const store = useSendbirdStateContext();
  const createChannel = getCreateGroupChannel(store);
  const logger = store === null || store === void 0 ? void 0 : (_store$config = store.config) === null || _store$config === void 0 ? void 0 : _store$config.logger;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const currentUserId_ = currentUserId || (store === null || store === void 0 ? void 0 : (_store$config2 = store.config) === null || _store$config2 === void 0 ? void 0 : _store$config2.userId);
  // @ts-ignore
  const {
    onUserProfileMessage
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird__user-profile"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird__user-profile-avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    height: "80px",
    width: "80px",
    src: user === null || user === void 0 ? void 0 : user.profileUrl
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird__user-profile-name"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, (user === null || user === void 0 ? void 0 : user.nickname) || stringSet.NO_NAME)), (user === null || user === void 0 ? void 0 : user.userId) !== currentUserId_ && !disableMessaging && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird__user-profile-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    onClick: () => {
      // Create 1:1 channel
      const params = {
        isDistinct: false,
        invitedUserIds: [user === null || user === void 0 ? void 0 : user.userId],
        operatorUserIds: [currentUserId_]
      };
      onSuccess();
      createChannel(params).then(groupChannel => {
        logger.info('UserProfile, channel create', groupChannel);
        if (typeof onUserProfileMessage === 'function') {
          onUserProfileMessage === null || onUserProfileMessage === void 0 ? void 0 : onUserProfileMessage(groupChannel);
        }
      });
    }
  }, stringSet.USER_PROFILE__MESSAGE)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird__user-profile-separator"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird__user-profile-userId"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird__user-profile-userId--label",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.USER_PROFILE__USER_ID), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird__user-profile-userId--value",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, user === null || user === void 0 ? void 0 : user.userId)));
}


//# sourceMappingURL=UserProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/SortByRow.js



const componentClassName = 'sendbird-sort-by-row';
function SortByRow(_ref) {
  let {
    className = '',
    maxItemCount,
    itemWidth,
    itemHeight,
    children
  } = _ref;
  if (Array.isArray(children) && children.length > maxItemCount) {
    const result = [];
    for (let i = 0; i < children.length; i += maxItemCount) {
      result.push( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        className: [...(Array.isArray(className) ? className : [className]), componentClassName].join(' '),
        key: uuidv4(),
        style: {
          width: itemWidth * maxItemCount,
          height: itemHeight
        }
      }, children.slice(i, i + maxItemCount)));
    }
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, result);
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), componentClassName].join(' '),
    style: {
      width: itemWidth * (Array.isArray(children) ? children.length : 1),
      height: itemHeight
    }
  }, children);
}


//# sourceMappingURL=SortByRow.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ContextMenu.js











// padding to handle height of last item in message-list
const HEIGHT_PADDING = 60;
class ContextMenu_MenuItems$1 extends external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Component {
  constructor(props) {
    super(props);
    _defineProperty(this, "menuRef", /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createRef());
    _defineProperty(this, "setupEvents", () => {
      const {
        closeDropdown
      } = this.props;
      const {
        menuRef
      } = this;
      const handleClickOutside = event => {
        var _menuRef$current, _menuRef$current$cont;
        if (menuRef !== null && menuRef !== void 0 && menuRef.current && !(menuRef !== null && menuRef !== void 0 && (_menuRef$current = menuRef.current) !== null && _menuRef$current !== void 0 && (_menuRef$current$cont = _menuRef$current.contains) !== null && _menuRef$current$cont !== void 0 && _menuRef$current$cont.call(_menuRef$current, event.target))) {
          closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();
        }
      };
      this.setState({
        handleClickOutside
      });
      document.addEventListener('mousedown', handleClickOutside);
    });
    _defineProperty(this, "cleanUpEvents", () => {
      const {
        handleClickOutside
      } = this.state;
      document.removeEventListener('mousedown', handleClickOutside);
    });
    _defineProperty(this, "getMenuPosition", () => {
      var _parentRef$current, _parentRef$current$ge;
      const {
        parentRef,
        openLeft
      } = this.props;
      const parentRect = parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : (_parentRef$current$ge = _parentRef$current.getBoundingClientRect) === null || _parentRef$current$ge === void 0 ? void 0 : _parentRef$current$ge.call(_parentRef$current);
      const x = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0;
      const y = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0;
      const menuStyle = {
        top: y,
        left: x
      };
      if (!this.menuRef.current) return menuStyle;
      const {
        innerWidth,
        innerHeight
      } = window;
      const rect = this.menuRef.current.getBoundingClientRect();
      if (y + rect.height + HEIGHT_PADDING > innerHeight) {
        menuStyle.top -= rect.height;
      }
      if (x + rect.width > innerWidth && !openLeft) {
        menuStyle.left -= rect.width;
      }
      if (menuStyle.top < 0) {
        menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;
      }
      menuStyle.top += 32;
      if (openLeft) {
        const padding = Number.isNaN(rect.width - 30) ? 108 // default
        : rect.width - 30;
        menuStyle.left -= padding;
      }
      // warning: this section has to be executed after the openLeft is calculated
      // menu is outside viewport
      if (menuStyle.left < 0) {
        menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;
      }
      this.setState({
        menuStyle
      });
      return menuStyle;
    });
    this.state = {
      menuStyle: {},
      handleClickOutside: () => {/* noop */}
    };
  }
  componentDidMount() {
    this.setupEvents();
    this.getMenuPosition();
  }
  componentWillUnmount() {
    this.cleanUpEvents();
  }
  render() {
    var _this$props;
    const {
      menuStyle
    } = this.state;
    const {
      children,
      style,
      className = ''
    } = this.props;
    return /*#__PURE__*/Object(react_dom["createPortal"])( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: (_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.className
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-dropdown__menu-backdrop"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("ul", {
      className: `${className} sendbird-dropdown__menu`,
      ref: this.menuRef,
      style: _objectSpread2({
        display: 'inline-block',
        position: 'fixed',
        left: `${Math.round(menuStyle.left)}px`,
        top: `${Math.round(menuStyle.top)}px`
      }, style)
    }, children)), document.getElementById('sendbird-dropdown-portal'));
  }
}

const defaultParentRect = {
  x: 0,
  y: 0,
  left: 0,
  top: 0,
  height: 0
};
const EmojiListItems$1 = _ref => {
  let {
    children,
    parentRef,
    parentContainRef,
    spaceFromTrigger = {
      x: 0,
      y: 0
    },
    closeDropdown
  } = _ref;
  const [reactionStyle, setReactionStyle] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({
    left: 0,
    top: 0
  });
  const reactionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);

  /* showParent & hideParent */
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (parentContainRef && parentContainRef !== null && parentContainRef !== void 0 && parentContainRef.current) {
      parentContainRef.current.classList.add('sendbird-reactions--pressed');
    }
    return () => {
      if (parentContainRef && parentContainRef !== null && parentContainRef !== void 0 && parentContainRef.current) {
        parentContainRef.current.classList.remove('sendbird-reactions--pressed');
      }
    };
  }, []);

  /* setupEvents & cleanupEvents */
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const handleClickOutSide = event => {
      var _reactionRef$current, _reactionRef$current$;
      if (reactionRef !== null && reactionRef !== void 0 && reactionRef.current && !(reactionRef !== null && reactionRef !== void 0 && (_reactionRef$current = reactionRef.current) !== null && _reactionRef$current !== void 0 && (_reactionRef$current$ = _reactionRef$current.contains) !== null && _reactionRef$current$ !== void 0 && _reactionRef$current$.call(_reactionRef$current, event.target))) {
        closeDropdown();
      }
    };
    document.addEventListener('mousedown', handleClickOutSide);
    return () => {
      document.removeEventListener('mousedown', handleClickOutSide);
    };
  }, []);

  /* getBarPosition */
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _parentRef$current$ge, _parentRef$current;
    const spaceFromTriggerX = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.x) || 0;
    const spaceFromTriggerY = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.y) || 0;
    const parentRect = (_parentRef$current$ge = parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : _parentRef$current.getBoundingClientRect()) !== null && _parentRef$current$ge !== void 0 ? _parentRef$current$ge : defaultParentRect;
    const x = parentRect.x || parentRect.left;
    const y = parentRect.y || parentRect.top;
    const reactionStyle = {
      top: y,
      left: x
    };
    if (!(reactionRef !== null && reactionRef !== void 0 && reactionRef.current)) {
      setReactionStyle(reactionStyle);
    } else {
      var _reactionRef$current2;
      const rect = reactionRef === null || reactionRef === void 0 ? void 0 : (_reactionRef$current2 = reactionRef.current) === null || _reactionRef$current2 === void 0 ? void 0 : _reactionRef$current2.getBoundingClientRect();
      if (reactionStyle.top < rect.height) {
        reactionStyle.top += parentRect.height;
        reactionStyle.top += spaceFromTriggerY;
      } else {
        reactionStyle.top -= rect.height;
        reactionStyle.top -= spaceFromTriggerY;
      }
      reactionStyle.left -= rect.width / 2;
      reactionStyle.left += parentRect.height / 2 - 2;
      reactionStyle.left += spaceFromTriggerX;
      const maximumLeft = window.innerWidth - rect.width;
      if (maximumLeft < reactionStyle.left) {
        reactionStyle.left = maximumLeft;
      }
      if (reactionStyle.left < 0) {
        reactionStyle.left = 0;
      }
      setReactionStyle(reactionStyle);
    }
  }, []);
  const rootElement = document.getElementById('sendbird-emoji-list-portal');
  if (rootElement) {
    return /*#__PURE__*/Object(react_dom["createPortal"])( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-dropdown__menu-backdrop"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("ul", {
      className: "sendbird-dropdown__reaction-bar",
      ref: reactionRef,
      style: {
        display: 'inline-block',
        position: 'fixed',
        left: `${Math.round(reactionStyle.left)}px`,
        top: `${Math.round(reactionStyle.top)}px`
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SortByRow, {
      className: "sendbird-dropdown__reaction-bar__row",
      maxItemCount: 8,
      itemWidth: 44,
      itemHeight: 40
    }, children))), rootElement);
  }
  return null;
};

const ENTER_KEY = 13;
const MenuItems = ContextMenu_MenuItems$1;
const EmojiListItems = EmojiListItems$1;
const MenuItem = _ref => {
  let {
    className = '',
    children,
    onClick,
    disable = false,
    dataSbId = ''
  } = _ref;
  const handleClickEvent = e => {
    if (!disable && onClick) {
      onClick === null || onClick === void 0 ? void 0 : onClick(e);
    }
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("li", {
    className: getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : '']),
    role: "menuitem",
    "aria-disabled": disable ? true : false,
    onClick: handleClickEvent,
    onKeyPress: e => {
      if (e.keyCode === ENTER_KEY) handleClickEvent(e);
    },
    tabIndex: 0,
    "data-sb-id": dataSbId
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-dropdown__menu-item__text",
    type: LabelTypography.SUBTITLE_2,
    color: disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1
  }, children));
};
const MenuRoot = () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
  id: "sendbird-dropdown-portal",
  className: "sendbird-dropdown-portal"
});

// For the test environment
const EmojiReactionListRoot = () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
  id: "sendbird-emoji-list-portal"
});
function ContextMenu(_ref2) {
  let {
    menuTrigger,
    menuItems,
    isOpen
  } = _ref2;
  const [showMenu, setShowMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-context-menu",
    style: {
      display: 'inline'
    }
  }, menuTrigger === null || menuTrigger === void 0 ? void 0 : menuTrigger(() => setShowMenu(!showMenu)), (showMenu || isOpen) && menuItems(() => setShowMenu(false)));
}


//# sourceMappingURL=ContextMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/UserListItem.js



























function UserListItem(_ref) {
  let {
    user,
    className,
    checked,
    checkBox,
    isOperator,
    disabled,
    disableMessaging,
    currentUser,
    action,
    onChange,
    avatarSize = '40px'
  } = _ref;
  const uniqueKey = user.userId;
  const actionRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useRef(null);
  const parentRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useRef(null);
  const avatarRef = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useRef(null);
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-user-list-item'].join(' '),
    ref: parentRef
  }, (user === null || user === void 0 ? void 0 : user.isMuted) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedAvatarOverlay, {
    height: 40,
    width: 40
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-user-list-item__avatar",
      ref: avatarRef,
      src: user.profileUrl,
      width: avatarSize,
      height: avatarSize,
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      }
    }),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      openLeft: true,
      parentRef: avatarRef
      // for catching location(x, y) of MenuItems
      ,
      parentContainRef: avatarRef
      // for toggling more options(menus & reactions)
      ,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user,
      currentUserId: currentUser,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      disableMessaging: disableMessaging,
      user: user,
      currentUserId: currentUser,
      onSuccess: closeDropdown
    }))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-user-list-item__title",
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, user.nickname || stringSet.NO_NAME, currentUser === user.userId && ' (You)'),
  // if there is now nickname, display userId
  !user.nickname && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-user-list-item__subtitle",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, user.userId), checkBox && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("label", {
    className: "sendbird-user-list-item__checkbox",
    htmlFor: uniqueKey
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Checkbox, {
    id: uniqueKey,
    checked: checked,
    disabled: disabled,
    onChange: event => onChange(event)
  })), isOperator && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: ['sendbird-user-list-item__operator', checkBox ? 'checkbox' : ''].join(' '),
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_2
  }, "Operator"), action && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-user-list-item__action",
    ref: actionRef
  }, action({
    actionRef,
    parentRef
  })));
}


//# sourceMappingURL=UserListItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel/components/InviteUsers.js

































const filterUser = idsToFilter => currentId => idsToFilter === null || idsToFilter === void 0 ? void 0 : idsToFilter.includes(currentId);
const setChannelType = (params, type) => {
  if (type === 'broadcast') {
    // eslint-disable-next-line no-param-reassign
    params.isBroadcast = true;
  }
  if (type === 'supergroup') {
    // eslint-disable-next-line no-param-reassign
    params.isSuper = true;
  }
  return params;
};
const createDefaultUserListQuery = _ref => {
  let {
    sdk,
    userFilledApplicationUserListQuery
  } = _ref;
  if (sdk !== null && sdk !== void 0 && sdk.createApplicationUserListQuery) {
    const params = sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery();
    if (userFilledApplicationUserListQuery) {
      Object.keys(userFilledApplicationUserListQuery).forEach(key => {
        params[key] = userFilledApplicationUserListQuery[key];
      });
    }
    return params;
  }
};

const appHeight = () => {
  try {
    const doc = document.documentElement;
    doc.style.setProperty('--sendbird-vh', window.innerHeight * 0.01 + 'px');
  } catch (_unused) {
    //
  }
};
const BUFFER = 50;
const InviteUsers = _ref => {
  var _globalStore$config, _globalStore$stores, _globalStore$stores$s;
  let {
    onCancel,
    userListQuery
  } = _ref;
  const {
    onBeforeCreateChannel,
    onCreateChannel,
    overrideInviteUser,
    createChannel,
    type
  } = useCreateChannelContext();
  const globalStore = useSendbirdStateContext();
  const userId = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config = globalStore.config) === null || _globalStore$config === void 0 ? void 0 : _globalStore$config.userId;
  const sdk = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$s = _globalStore$stores.sdkStore) === null || _globalStore$stores$s === void 0 ? void 0 : _globalStore$stores$s.sdk;
  const idsToFilter = [userId];
  const [users, setUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [selectedUsers, setSelectedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [usersDataSource, setUsersDataSource] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const selectedCount = Object.keys(selectedUsers).length;
  const titleText = stringSet.MODAL__CREATE_CHANNEL__TITLE;
  const submitText = stringSet.BUTTON__CREATE;
  const userQueryCreator = userListQuery ? userListQuery() : createDefaultUserListQuery({
    sdk
  });
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const applicationUserListQuery = userQueryCreator;
    setUsersDataSource(applicationUserListQuery);
    // @ts-ignore
    if (!(applicationUserListQuery !== null && applicationUserListQuery !== void 0 && applicationUserListQuery.isLoading)) {
      applicationUserListQuery.next().then(users_ => {
        setUsers(users_);
      });
    }
  }, []);

  // https://stackoverflow.com/a/70302463
  // https://css-tricks.com/the-trick-to-viewport-units-on-mobile/#css-custom-properties-the-trick-to-correct-sizing
  // to fix navbar break in mobile
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    appHeight();
    window.addEventListener('resize', appHeight);
    return () => {
      window.removeEventListener('resize', appHeight);
    };
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    titleText: titleText,
    submitText: submitText,
    type: ButtonTypes.PRIMARY
    // Disable the create button if no users are selected,
    // but if there's only the logged-in user in the user list,
    // then the create button should be enabled
    ,
    disabled: users.length > 1 && Object.keys(selectedUsers).length === 0,
    onCancel: onCancel,
    onSubmit: () => {
      const selectedUserList = Object.keys(selectedUsers).length > 0 ? Object.keys(selectedUsers) : [userId];
      if (typeof overrideInviteUser === 'function') {
        overrideInviteUser({
          users: selectedUserList,
          onClose: onCancel,
          channelType: type
        });
        return;
      }
      if (onBeforeCreateChannel) {
        const params = onBeforeCreateChannel(selectedUserList);
        setChannelType(params, type);
        createChannel(params).then(channel => {
          onCreateChannel(channel);
        });
      } else {
        const params = {};
        params.invitedUserIds = selectedUserList;
        params.isDistinct = false;
        if (userId) {
          params.operatorUserIds = [userId];
        }
        setChannelType(params, type);
        // do not have custom params
        createChannel(params).then(channel => {
          onCreateChannel(channel);
        });
      }
      onCancel();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    color: selectedCount > 0 ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3,
    type: LabelTypography.CAPTION_1
  }, `${selectedCount} ${stringSet.MODAL__INVITE_MEMBER__SELECTED}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-create-channel--scroll",
    onScroll: e => {
      const eventTarget = e.target;
      const {
        hasNext
      } = usersDataSource;
      const fetchMore = eventTarget.clientHeight + eventTarget.scrollTop + BUFFER > eventTarget.scrollHeight;
      if (hasNext && fetchMore) {
        usersDataSource.next().then(usersBatch => {
          setUsers([...users, ...usersBatch]);
        });
      }
    }
  }, users.map(user => !filterUser(idsToFilter)(user.userId) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    key: user.userId,
    user: user,
    checkBox: true,
    checked: selectedUsers[user.userId],
    onChange: event => {
      const modifiedSelectedUsers = _objectSpread2(_objectSpread2({}, selectedUsers), {}, {
        [event.target.id]: event.target.checked
      });
      if (!event.target.checked) {
        delete modifiedSelectedUsers[event.target.id];
      }
      setSelectedUsers(modifiedSelectedUsers);
    }
  })))));
};


//# sourceMappingURL=InviteUsers.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel/components/SelectChannelType.js





















const isBroadcastChannelEnabled = sdk => {
  var _sdk$appInfo;
  const ALLOW_BROADCAST_CHANNEL = 'allow_broadcast_channel';
  const applicationAttributes = sdk === null || sdk === void 0 ? void 0 : (_sdk$appInfo = sdk.appInfo) === null || _sdk$appInfo === void 0 ? void 0 : _sdk$appInfo.applicationAttributes;
  if (Array.isArray(applicationAttributes)) {
    return applicationAttributes.includes(ALLOW_BROADCAST_CHANNEL);
  }
  return false;
};
const isSuperGroupChannelEnabled = sdk => {
  var _sdk$appInfo2;
  const ALLOW_SUPER_GROUP_CHANNEL = 'allow_super_group_channel';
  const applicationAttributes = sdk === null || sdk === void 0 ? void 0 : (_sdk$appInfo2 = sdk.appInfo) === null || _sdk$appInfo2 === void 0 ? void 0 : _sdk$appInfo2.applicationAttributes;
  if (Array.isArray(applicationAttributes)) {
    return applicationAttributes.includes(ALLOW_SUPER_GROUP_CHANNEL);
  }
  return false;
};

const SelectChannelType = props => {
  const {
    onCancel
  } = props;
  const store = useSendbirdStateContext();
  const sdk = getSdk(store);
  const createChannelProps = useCreateChannelContext();
  const {
    setStep,
    setType
  } = createChannelProps;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const isBroadcastAvailable = isBroadcastChannelEnabled(sdk);
  const isSupergroupAvailable = isSuperGroupChannelEnabled(sdk);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    titleText: stringSet === null || stringSet === void 0 ? void 0 : stringSet.MODAL__CREATE_CHANNEL__TITLE,
    hideFooter: true,
    onCancel: () => {
      onCancel();
    },
    className: "sendbird-add-channel__modal"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-add-channel__rectangle-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-add-channel__rectangle",
    onClick: () => {
      setType(CHANNEL_TYPE.GROUP);
      setStep(1);
    },
    role: "button",
    tabIndex: 0,
    onKeyDown: () => {
      setType(CHANNEL_TYPE.GROUP);
      setStep(1);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-add-channel__rectangle__chat-icon",
    type: IconTypes.CHAT,
    fillColor: IconColors.PRIMARY,
    width: "28px",
    height: "28px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.MODAL__CREATE_CHANNEL__GROUP)), isSupergroupAvailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-add-channel__rectangle",
    onClick: () => {
      setType(CHANNEL_TYPE.SUPERGROUP);
      setStep(1);
    },
    role: "button",
    tabIndex: 0,
    onKeyDown: () => {
      setType(CHANNEL_TYPE.SUPERGROUP);
      setStep(1);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-add-channel__rectangle__supergroup-icon",
    type: IconTypes.SUPERGROUP,
    fillColor: IconColors.PRIMARY,
    width: "28px",
    height: "28px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.MODAL__CREATE_CHANNEL__SUPER)), isBroadcastAvailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-add-channel__rectangle",
    onClick: () => {
      setType(CHANNEL_TYPE.BROADCAST);
      setStep(1);
    },
    role: "button",
    tabIndex: 0,
    onKeyDown: () => {
      setType(CHANNEL_TYPE.BROADCAST);
      setStep(1);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-add-channel__rectangle__broadcast-icon",
    type: IconTypes.BROADCAST,
    fillColor: IconColors.PRIMARY,
    width: "28px",
    height: "28px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.MODAL__CREATE_CHANNEL__BROADCAST))));
};


//# sourceMappingURL=SelectChannelType.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel/components/CreateChannelUI.js



































const CreateChannel = props => {
  const {
    onCancel,
    renderStepOne
  } = props;
  const {
    step,
    setStep,
    userListQuery
  } = useCreateChannelContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, step === 0 && ((renderStepOne === null || renderStepOne === void 0 ? void 0 : renderStepOne()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SelectChannelType, {
    onCancel: onCancel
  })), step === 1 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InviteUsers, {
    userListQuery: userListQuery,
    onCancel: () => {
      setStep(0);
      onCancel();
    }
  }));
};


//# sourceMappingURL=CreateChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/CreateChannel.js




































const CreateChannel_CreateChannel = props => {
  const {
    onBeforeCreateChannel,
    userListQuery,
    onCreateChannel,
    overrideInviteUser,
    onCancel,
    renderStepOne
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannelProvider, {
    onBeforeCreateChannel: onBeforeCreateChannel,
    userListQuery: userListQuery,
    onCreateChannel: onCreateChannel,
    overrideInviteUser: overrideInviteUser
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannel, {
    renderStepOne: renderStepOne,
    onCancel: onCancel
  }));
};


//# sourceMappingURL=CreateChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/AddChannel.js








































const AddChannel = () => {
  var _state$config;
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const state = useSendbirdStateContext();
  const isOnline = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.isOnline;
  const disabled = !isOnline;
  const {
    overrideInviteUser,
    onBeforeCreateChannel
  } = useChannelListContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    height: "32px",
    width: "32px",
    onClick: () => {
      setShowModal(true);
    },
    disabled: disabled
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CREATE,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  })), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(CreateChannel_CreateChannel, {
    onCancel: () => {
      setShowModal(false);
    },
    overrideInviteUser: overrideInviteUser,
    onCreateChannel: () => {
      setShowModal(false);
    },
    onBeforeCreateChannel: onBeforeCreateChannel
  }));
};


//# sourceMappingURL=AddChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils-3bd17cc2.js
const DEFAULT_URL_PREFIX = 'https://static.sendbird.com/sample/cover/cover_';
const getOpenChannelAvatar = channel => {
  if (channel !== null && channel !== void 0 && channel.coverUrl) {
    return channel.coverUrl;
  }
};
const getChannelAvatarSource = (channel, currentUserId) => {
  if (channel !== null && channel !== void 0 && channel.coverUrl) {
    if (!new RegExp(`^${DEFAULT_URL_PREFIX}`).test(channel.coverUrl)) {
      return channel.coverUrl;
    }
  }
  return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).filter(member => member.userId !== currentUserId).map(_ref => {
    let {
      profileUrl
    } = _ref;
    return profileUrl;
  });
};
const generateDefaultAvatar = channel => {
  if (channel !== null && channel !== void 0 && channel.coverUrl) {
    if (new RegExp(`^${DEFAULT_URL_PREFIX}`).test(channel.coverUrl)) {
      return true;
    }
    return false;
  }
  return true;
};


//# sourceMappingURL=utils-3bd17cc2.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ChannelAvatar.js








function ChannelAvatar(_ref) {
  let {
    channel,
    userId,
    theme,
    width = 56,
    height = 56
  } = _ref;
  const isBroadcast = channel === null || channel === void 0 ? void 0 : channel.isBroadcast;
  const memoizedAvatar = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => isBroadcast ? generateDefaultAvatar(channel) ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-chat-header--default-avatar",
    style: {
      width,
      height,
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'center'
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.BROADCAST,
    fillColor: IconColors.CONTENT,
    width: width * 0.575,
    height: height * 0.575
  })) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-chat-header--avatar--broadcast-channel",
    src: getChannelAvatarSource(channel, userId),
    width: width,
    height: height,
    alt: channel === null || channel === void 0 ? void 0 : channel.name
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-chat-header--avatar--group-channel",
    src: getChannelAvatarSource(channel, userId),
    width: `${width}px`,
    height: `${height}px`,
    alt: channel === null || channel === void 0 ? void 0 : channel.name
  }), [channel === null || channel === void 0 ? void 0 : channel.members, channel === null || channel === void 0 ? void 0 : channel.coverUrl, theme]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, memoizedAvatar);
}


//# sourceMappingURL=ChannelAvatar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Badge.js







function Badge(_ref) {
  let {
    count,
    maxLevel = 2,
    className = ''
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const maximumNumber = parseInt('9'.repeat(maxLevel > 6 ? 6 : maxLevel), 10);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-badge'].join(' ')
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-badge__text"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONCONTENT_1
  }, count > maximumNumber ? `${maximumNumber}${stringSet.BADGE__OVER}` : count)));
}


//# sourceMappingURL=Badge.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-72d247f7.js


function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}

function _typeof$1(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof$1 = function _typeof(obj) { return typeof obj; }; } else { _typeof$1 = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof$1(obj); }
/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */

function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument); // Clone the date

  if (argument instanceof Date || _typeof$1(argument) === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"); // eslint-disable-next-line no-console

      console.warn(new Error().stack);
    }

    return new Date(NaN);
  }
}

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }
/**
 * @name isDate
 * @category Common Helpers
 * @summary Is the given value a date?
 *
 * @description
 * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.
 *
 * @param {*} value - the value to check
 * @returns {boolean} true if the given value is a date
 * @throws {TypeError} 1 arguments required
 *
 * @example
 * // For a valid date:
 * const result = isDate(new Date())
 * //=> true
 *
 * @example
 * // For an invalid date:
 * const result = isDate(new Date(NaN))
 * //=> true
 *
 * @example
 * // For some value:
 * const result = isDate('2014-02-31')
 * //=> false
 *
 * @example
 * // For an object:
 * const result = isDate({})
 * //=> false
 */

function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || _typeof(value) === 'object' && Object.prototype.toString.call(value) === '[object Date]';
}

/**
 * @name isValid
 * @category Common Helpers
 * @summary Is the given date valid?
 *
 * @description
 * Returns false if argument is Invalid Date and true otherwise.
 * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}
 * Invalid Date is a Date, whose time value is NaN.
 *
 * Time value of Date: http://es5.github.io/#x15.9.1.1
 *
 * @param {*} date - the date to check
 * @returns {Boolean} the date is valid
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // For the valid date:
 * const result = isValid(new Date(2014, 1, 31))
 * //=> true
 *
 * @example
 * // For the value, convertable into a date:
 * const result = isValid(1393804800000)
 * //=> true
 *
 * @example
 * // For the invalid date:
 * const result = isValid(new Date(''))
 * //=> false
 */

function isValid(dirtyDate) {
  requiredArgs(1, arguments);

  if (!isDate(dirtyDate) && typeof dirtyDate !== 'number') {
    return false;
  }

  var date = toDate(dirtyDate);
  return !isNaN(Number(date));
}

function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }

  var number = Number(dirtyNumber);

  if (isNaN(number)) {
    return number;
  }

  return number < 0 ? Math.ceil(number) : Math.floor(number);
}

/**
 * @name addMilliseconds
 * @category Millisecond Helpers
 * @summary Add the specified number of milliseconds to the given date.
 *
 * @description
 * Add the specified number of milliseconds to the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds added
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Add 750 milliseconds to 10 July 2014 12:45:30.000:
 * const result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:30.750
 */

function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}

/**
 * @name subMilliseconds
 * @category Millisecond Helpers
 * @summary Subtract the specified number of milliseconds from the given date.
 *
 * @description
 * Subtract the specified number of milliseconds from the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of milliseconds to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the milliseconds subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:
 * const result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)
 * //=> Thu Jul 10 2014 12:45:29.250
 */

function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}

var MILLISECONDS_IN_DAY = 86400000;
function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}

function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek(fourthOfJanuary);
  return date;
}

var MILLISECONDS_IN_WEEK$1 = 604800000;
function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime(); // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)

  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}

var index_72d247f7_defaultOptions = {};
function getDefaultOptions() {
  return index_72d247f7_defaultOptions;
}

function startOfUTCWeek(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;

  requiredArgs(1, arguments);
  var defaultOptions = getDefaultOptions();
  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }

  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;

  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var defaultOptions = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }

  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, options);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, options);

  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCWeekYear(dirtyDate, options) {
  var _ref, _ref2, _ref3, _options$firstWeekCon, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;

  requiredArgs(1, arguments);
  var defaultOptions = getDefaultOptions();
  var firstWeekContainsDate = toInteger((_ref = (_ref2 = (_ref3 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref !== void 0 ? _ref : 1);
  var year = getUTCWeekYear(dirtyDate, options);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek(firstWeek, options);
  return date;
}

var MILLISECONDS_IN_WEEK = 604800000;
function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime(); // Round the number of days to the nearest integer
  // because the number of milliseconds in a week is not constant
  // (e.g. it's different in the week of the daylight saving time clock shift)

  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();

  while (output.length < targetLength) {
    output = '0' + output;
  }

  return sign + output;
}

/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* |                                |
 * |  d  | Day of month                   |  D  |                                |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  m  | Minute                         |  M  | Month                          |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  y  | Year (abs)                     |  Y  |                                |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 */

var formatters$2 = {
  // Year
  y: function y(date, token) {
    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens
    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |
    // |----------|-------|----|-------|-------|-------|
    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |
    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |
    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |
    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |
    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |
    var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)

    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);
  },
  // Month
  M: function M(date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  // Day of the month
  d: function d(date, token) {
    return addLeadingZeros(date.getUTCDate(), token.length);
  },
  // AM or PM
  a: function a(date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';

    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();

      case 'aaa':
        return dayPeriodEnumValue;

      case 'aaaaa':
        return dayPeriodEnumValue[0];

      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  // Hour [1-12]
  h: function h(date, token) {
    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);
  },
  // Hour [0-23]
  H: function H(date, token) {
    return addLeadingZeros(date.getUTCHours(), token.length);
  },
  // Minute
  m: function m(date, token) {
    return addLeadingZeros(date.getUTCMinutes(), token.length);
  },
  // Second
  s: function s(date, token) {
    return addLeadingZeros(date.getUTCSeconds(), token.length);
  },
  // Fraction of second
  S: function S(date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

var dayPeriodEnum = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
};

/*
 * |     | Unit                           |     | Unit                           |
 * |-----|--------------------------------|-----|--------------------------------|
 * |  a  | AM, PM                         |  A* | Milliseconds in day            |
 * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |
 * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |
 * |  d  | Day of month                   |  D  | Day of year                    |
 * |  e  | Local day of week              |  E  | Day of week                    |
 * |  f  |                                |  F* | Day of week in month           |
 * |  g* | Modified Julian day            |  G  | Era                            |
 * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |
 * |  i! | ISO day of week                |  I! | ISO week of year               |
 * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |
 * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |
 * |  l* | (deprecated)                   |  L  | Stand-alone month              |
 * |  m  | Minute                         |  M  | Month                          |
 * |  n  |                                |  N  |                                |
 * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |
 * |  p! | Long localized time            |  P! | Long localized date            |
 * |  q  | Stand-alone quarter            |  Q  | Quarter                        |
 * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |
 * |  s  | Second                         |  S  | Fraction of second             |
 * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |
 * |  u  | Extended year                  |  U* | Cyclic year                    |
 * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |
 * |  w  | Local week of year             |  W* | Week of month                  |
 * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |
 * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |
 * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |
 *
 * Letters marked by * are not implemented but reserved by Unicode standard.
 *
 * Letters marked by ! are non-standard, but implemented by date-fns:
 * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)
 * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,
 *   i.e. 7 for Sunday, 1 for Monday, etc.
 * - `I` is ISO week of year, as opposed to `w` which is local week of year.
 * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.
 *   `R` is supposed to be used in conjunction with `I` and `i`
 *   for universal ISO week-numbering date, whereas
 *   `Y` is supposed to be used in conjunction with `w` and `e`
 *   for week-numbering date specific to the locale.
 * - `P` is long localized date format
 * - `p` is long localized time format
 */
var formatters = {
  // Era
  G: function G(date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;

    switch (token) {
      // AD, BC
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });
      // A, B

      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });
      // Anno Domini, Before Christ

      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  // Year
  y: function y(date, token, localize) {
    // Ordinal number
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear(); // Returns 1 for 1 BC (which is year 0 in JavaScript)

      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }

    return formatters$2.y(date, token);
  },
  // Local week-numbering year
  Y: function Y(date, token, localize, options) {
    var signedWeekYear = getUTCWeekYear(date, options); // Returns 1 for 1 BC (which is year 0 in JavaScript)

    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear; // Two digit year

    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    } // Ordinal number


    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    } // Padding


    return addLeadingZeros(weekYear, token.length);
  },
  // ISO week-numbering year
  R: function R(date, token) {
    var isoWeekYear = getUTCISOWeekYear(date); // Padding

    return addLeadingZeros(isoWeekYear, token.length);
  },
  // Extended year. This is a single number designating the year of this calendar system.
  // The main difference between `y` and `u` localizers are B.C. years:
  // | Year | `y` | `u` |
  // |------|-----|-----|
  // | AC 1 |   1 |   1 |
  // | BC 1 |   1 |   0 |
  // | BC 2 |   2 |  -1 |
  // Also `yy` always returns the last two digits of a year,
  // while `uu` pads single digit years to 2 characters and returns other years unchanged.
  u: function u(date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  // Quarter
  Q: function Q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);

    switch (token) {
      // 1, 2, 3, 4
      case 'Q':
        return String(quarter);
      // 01, 02, 03, 04

      case 'QQ':
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th

      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4

      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)

      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });
      // 1st quarter, 2nd quarter, ...

      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone quarter
  q: function q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);

    switch (token) {
      // 1, 2, 3, 4
      case 'q':
        return String(quarter);
      // 01, 02, 03, 04

      case 'qq':
        return addLeadingZeros(quarter, 2);
      // 1st, 2nd, 3rd, 4th

      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });
      // Q1, Q2, Q3, Q4

      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // 1, 2, 3, 4 (narrow quarter; could be not numerical)

      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });
      // 1st quarter, 2nd quarter, ...

      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Month
  M: function M(date, token, localize) {
    var month = date.getUTCMonth();

    switch (token) {
      case 'M':
      case 'MM':
        return formatters$2.M(date, token);
      // 1st, 2nd, ..., 12th

      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec

      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // J, F, ..., D

      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });
      // January, February, ..., December

      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone month
  L: function L(date, token, localize) {
    var month = date.getUTCMonth();

    switch (token) {
      // 1, 2, ..., 12
      case 'L':
        return String(month + 1);
      // 01, 02, ..., 12

      case 'LL':
        return addLeadingZeros(month + 1, 2);
      // 1st, 2nd, ..., 12th

      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });
      // Jan, Feb, ..., Dec

      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // J, F, ..., D

      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });
      // January, February, ..., December

      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // Local week of year
  w: function w(date, token, localize, options) {
    var week = getUTCWeek(date, options);

    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }

    return addLeadingZeros(week, token.length);
  },
  // ISO week of year
  I: function I(date, token, localize) {
    var isoWeek = getUTCISOWeek(date);

    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }

    return addLeadingZeros(isoWeek, token.length);
  },
  // Day of the month
  d: function d(date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }

    return formatters$2.d(date, token);
  },
  // Day of year
  D: function D(date, token, localize) {
    var dayOfYear = getUTCDayOfYear(date);

    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }

    return addLeadingZeros(dayOfYear, token.length);
  },
  // Day of week
  E: function E(date, token, localize) {
    var dayOfWeek = date.getUTCDay();

    switch (token) {
      // Tue
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Local day of week
  e: function e(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;

    switch (token) {
      // Numerical value (Nth day of week with current locale or weekStartsOn)
      case 'e':
        return String(localDayOfWeek);
      // Padded numerical value

      case 'ee':
        return addLeadingZeros(localDayOfWeek, 2);
      // 1st, 2nd, ..., 7th

      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });

      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Stand-alone local day of week
  c: function c(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;

    switch (token) {
      // Numerical value (same as in `e`)
      case 'c':
        return String(localDayOfWeek);
      // Padded numerical value

      case 'cc':
        return addLeadingZeros(localDayOfWeek, token.length);
      // 1st, 2nd, ..., 7th

      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });

      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });
      // T

      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });
      // Tu

      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });
      // Tuesday

      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  // ISO day of week
  i: function i(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;

    switch (token) {
      // 2
      case 'i':
        return String(isoDayOfWeek);
      // 02

      case 'ii':
        return addLeadingZeros(isoDayOfWeek, token.length);
      // 2nd

      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });
      // Tue

      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });
      // T

      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });
      // Tu

      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });
      // Tuesday

      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM or PM
  a: function a(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';

    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();

      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // AM, PM, midnight, noon
  b: function b(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;

    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }

    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();

      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // in the morning, in the afternoon, in the evening, at night
  B: function B(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;

    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }

    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  // Hour [1-12]
  h: function h(date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return formatters$2.h(date, token);
  },
  // Hour [0-23]
  H: function H(date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }

    return formatters$2.H(date, token);
  },
  // Hour [0-11]
  K: function K(date, token, localize) {
    var hours = date.getUTCHours() % 12;

    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return addLeadingZeros(hours, token.length);
  },
  // Hour [1-24]
  k: function k(date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;

    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }

    return addLeadingZeros(hours, token.length);
  },
  // Minute
  m: function m(date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }

    return formatters$2.m(date, token);
  },
  // Second
  s: function s(date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }

    return formatters$2.s(date, token);
  },
  // Fraction of second
  S: function S(date, token) {
    return formatters$2.S(date, token);
  },
  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)
  X: function X(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    if (timezoneOffset === 0) {
      return 'Z';
    }

    switch (token) {
      // Hours and optional minutes
      case 'X':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XX`

      case 'XXXX':
      case 'XX':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `XXX`

      case 'XXXXX':
      case 'XXX': // Hours and minutes with `:` delimiter

      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)
  x: function x(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Hours and optional minutes
      case 'x':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);
      // Hours, minutes and optional seconds without `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xx`

      case 'xxxx':
      case 'xx':
        // Hours and minutes without `:` delimiter
        return formatTimezone(timezoneOffset);
      // Hours, minutes and optional seconds with `:` delimiter
      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets
      // so this token always has the same output as `xxx`

      case 'xxxxx':
      case 'xxx': // Hours and minutes with `:` delimiter

      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (GMT)
  O: function O(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Short
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long

      case 'OOOO':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Timezone (specific non-location)
  z: function z(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();

    switch (token) {
      // Short
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');
      // Long

      case 'zzzz':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  // Seconds timestamp
  t: function t(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return addLeadingZeros(timestamp, token.length);
  },
  // Milliseconds timestamp
  T: function T(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};

function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;

  if (minutes === 0) {
    return sign + String(hours);
  }

  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}

function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }

  return formatTimezone(offset, dirtyDelimiter);
}

function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

var formatters$1 = formatters;

var dateLongFormatter = function dateLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });

    case 'PP':
      return formatLong.date({
        width: 'medium'
      });

    case 'PPP':
      return formatLong.date({
        width: 'long'
      });

    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
};

var timeLongFormatter = function timeLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });

    case 'pp':
      return formatLong.time({
        width: 'medium'
      });

    case 'ppp':
      return formatLong.time({
        width: 'long'
      });

    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
};

var dateTimeLongFormatter = function dateTimeLongFormatter(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];

  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong);
  }

  var dateTimeFormat;

  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;

    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;

    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;

    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }

  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));
};

var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};
var longFormatters$1 = longFormatters;

/**
 * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.
 * They usually appear for dates that denote time before the timezones were introduced
 * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891
 * and GMT+01:00:00 after that date)
 *
 * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,
 * which would lead to incorrect calculations.
 *
 * This function returns the timezone offset in milliseconds that takes seconds in account.
 */
function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

var protectedDayOfYearTokens = ['D', 'DD'];
var protectedWeekYearTokens = ['YY', 'YYYY'];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));
  }
}

// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token
//   (one of the certain letters followed by `o`)
// - (\w)\1* matches any sequences of the same letter
// - '' matches two quote characters in a row
// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),
//   except a single quote symbol, which ends the sequence.
//   Two quote characters do not end the sequence.
//   If there is no matching single quote
//   then the sequence will continue until the end of the string.
// - . matches any single character unmatched by previous parts of the RegExps

var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g; // This RegExp catches symbols escaped by quotes, and also
// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`

var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;
/**
 * @name format
 * @category Common Helpers
 * @summary Format the date.
 *
 * @description
 * Return the formatted date string in the given format. The result may vary by locale.
 *
 * >  Please note that the `format` tokens differ from Moment.js and other libraries.
 * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * The characters wrapped between two single quotes characters (') are escaped.
 * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.
 * (see the last example)
 *
 * Format of the string is based on Unicode Technical Standard #35:
 * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table
 * with a few additions (see note 7 below the table).
 *
 * Accepted patterns:
 * | Unit                            | Pattern | Result examples                   | Notes |
 * |---------------------------------|---------|-----------------------------------|-------|
 * | Era                             | G..GGG  | AD, BC                            |       |
 * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |
 * |                                 | GGGGG   | A, B                              |       |
 * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |
 * |                                 | yy      | 44, 01, 00, 17                    | 5     |
 * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |
 * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |
 * |                                 | yyyyy   | ...                               | 3,5   |
 * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |
 * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |
 * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |
 * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |
 * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |
 * |                                 | YYYYY   | ...                               | 3,5   |
 * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |
 * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |
 * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |
 * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |
 * |                                 | RRRRR   | ...                               | 3,5,7 |
 * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |
 * |                                 | uu      | -43, 01, 1900, 2017               | 5     |
 * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |
 * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |
 * |                                 | uuuuu   | ...                               | 3,5   |
 * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |
 * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | QQ      | 01, 02, 03, 04                    |       |
 * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |
 * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |
 * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |
 * |                                 | qq      | 01, 02, 03, 04                    |       |
 * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |
 * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |
 * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |
 * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |
 * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | MM      | 01, 02, ..., 12                   |       |
 * |                                 | MMM     | Jan, Feb, ..., Dec                |       |
 * |                                 | MMMM    | January, February, ..., December  | 2     |
 * |                                 | MMMMM   | J, F, ..., D                      |       |
 * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |
 * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |
 * |                                 | LL      | 01, 02, ..., 12                   |       |
 * |                                 | LLL     | Jan, Feb, ..., Dec                |       |
 * |                                 | LLLL    | January, February, ..., December  | 2     |
 * |                                 | LLLLL   | J, F, ..., D                      |       |
 * | Local week of year              | w       | 1, 2, ..., 53                     |       |
 * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | ww      | 01, 02, ..., 53                   |       |
 * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |
 * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |
 * |                                 | II      | 01, 02, ..., 53                   | 7     |
 * | Day of month                    | d       | 1, 2, ..., 31                     |       |
 * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |
 * |                                 | dd      | 01, 02, ..., 31                   |       |
 * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |
 * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |
 * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |
 * |                                 | DDD     | 001, 002, ..., 365, 366           |       |
 * |                                 | DDDD    | ...                               | 3     |
 * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |
 * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |
 * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |
 * |                                 | ii      | 01, 02, ..., 07                   | 7     |
 * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |
 * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |
 * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |
 * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |
 * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |
 * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | ee      | 02, 03, ..., 01                   |       |
 * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | eeeee   | M, T, W, T, F, S, S               |       |
 * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |
 * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |
 * |                                 | cc      | 02, 03, ..., 01                   |       |
 * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |
 * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |
 * |                                 | ccccc   | M, T, W, T, F, S, S               |       |
 * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |
 * | AM, PM                          | a..aa   | AM, PM                            |       |
 * |                                 | aaa     | am, pm                            |       |
 * |                                 | aaaa    | a.m., p.m.                        | 2     |
 * |                                 | aaaaa   | a, p                              |       |
 * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |
 * |                                 | bbb     | am, pm, noon, midnight            |       |
 * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |
 * |                                 | bbbbb   | a, p, n, mi                       |       |
 * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |
 * |                                 | BBBB    | at night, in the morning, ...     | 2     |
 * |                                 | BBBBB   | at night, in the morning, ...     |       |
 * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |
 * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |
 * |                                 | hh      | 01, 02, ..., 11, 12               |       |
 * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |
 * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |
 * |                                 | HH      | 00, 01, 02, ..., 23               |       |
 * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |
 * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |
 * |                                 | KK      | 01, 02, ..., 11, 00               |       |
 * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |
 * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |
 * |                                 | kk      | 24, 01, 02, ..., 23               |       |
 * | Minute                          | m       | 0, 1, ..., 59                     |       |
 * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | mm      | 00, 01, ..., 59                   |       |
 * | Second                          | s       | 0, 1, ..., 59                     |       |
 * |                                 | so      | 0th, 1st, ..., 59th               | 7     |
 * |                                 | ss      | 00, 01, ..., 59                   |       |
 * | Fraction of second              | S       | 0, 1, ..., 9                      |       |
 * |                                 | SS      | 00, 01, ..., 99                   |       |
 * |                                 | SSS     | 000, 001, ..., 999                |       |
 * |                                 | SSSS    | ...                               | 3     |
 * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |
 * |                                 | XX      | -0800, +0530, Z                   |       |
 * |                                 | XXX     | -08:00, +05:30, Z                 |       |
 * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |
 * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |
 * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |
 * |                                 | xx      | -0800, +0530, +0000               |       |
 * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |
 * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |
 * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |
 * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |
 * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |
 * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |
 * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |
 * | Seconds timestamp               | t       | 512969520                         | 7     |
 * |                                 | tt      | ...                               | 3,7   |
 * | Milliseconds timestamp          | T       | 512969520900                      | 7     |
 * |                                 | TT      | ...                               | 3,7   |
 * | Long localized date             | P       | 04/29/1453                        | 7     |
 * |                                 | PP      | Apr 29, 1453                      | 7     |
 * |                                 | PPP     | April 29th, 1453                  | 7     |
 * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |
 * | Long localized time             | p       | 12:00 AM                          | 7     |
 * |                                 | pp      | 12:00:00 AM                       | 7     |
 * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |
 * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |
 * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |
 * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |
 * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |
 * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |
 * Notes:
 * 1. "Formatting" units (e.g. formatting quarter) in the default en-US locale
 *    are the same as "stand-alone" units, but are different in some languages.
 *    "Formatting" units are declined according to the rules of the language
 *    in the context of a date. "Stand-alone" units are always nominative singular:
 *
 *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`
 *
 *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`
 *
 * 2. Any sequence of the identical letters is a pattern, unless it is escaped by
 *    the single quote characters (see below).
 *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)
 *    the output will be the same as default pattern for this unit, usually
 *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units
 *    are marked with "2" in the last column of the table.
 *
 *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`
 *
 *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`
 *
 * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).
 *    The output will be padded with zeros to match the length of the pattern.
 *
 *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`
 *
 * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.
 *    These tokens represent the shortest form of the quarter.
 *
 * 5. The main difference between `y` and `u` patterns are B.C. years:
 *
 *    | Year | `y` | `u` |
 *    |------|-----|-----|
 *    | AC 1 |   1 |   1 |
 *    | BC 1 |   1 |   0 |
 *    | BC 2 |   2 |  -1 |
 *
 *    Also `yy` always returns the last two digits of a year,
 *    while `uu` pads single digit years to 2 characters and returns other years unchanged:
 *
 *    | Year | `yy` | `uu` |
 *    |------|------|------|
 *    | 1    |   01 |   01 |
 *    | 14   |   14 |   14 |
 *    | 376  |   76 |  376 |
 *    | 1453 |   53 | 1453 |
 *
 *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),
 *    except local week-numbering years are dependent on `options.weekStartsOn`
 *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}
 *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).
 *
 * 6. Specific non-location timezones are currently unavailable in `date-fns`,
 *    so right now these tokens fall back to GMT timezones.
 *
 * 7. These patterns are not in the Unicode Technical Standard #35:
 *    - `i`: ISO day of week
 *    - `I`: ISO week of year
 *    - `R`: ISO week-numbering year
 *    - `t`: seconds timestamp
 *    - `T`: milliseconds timestamp
 *    - `o`: ordinal number modifier
 *    - `P`: long localized date
 *    - `p`: long localized time
 *
 * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.
 *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.
 *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 *
 * @param {Date|Number} date - the original date
 * @param {String} format - the string of tokens
 * @param {Object} [options] - an object with options.
 * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}
 * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)
 * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is
 * @param {Boolean} [options.useAdditionalWeekYearTokens=false] - if true, allows usage of the week-numbering year tokens `YY` and `YYYY`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @param {Boolean} [options.useAdditionalDayOfYearTokens=false] - if true, allows usage of the day of year tokens `D` and `DD`;
 *   see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @returns {String} the formatted date string
 * @throws {TypeError} 2 arguments required
 * @throws {RangeError} `date` must not be Invalid Date
 * @throws {RangeError} `options.locale` must contain `localize` property
 * @throws {RangeError} `options.locale` must contain `formatLong` property
 * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6
 * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7
 * @throws {RangeError} use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md
 * @throws {RangeError} format string contains an unescaped latin alphabet character
 *
 * @example
 * // Represent 11 February 2014 in middle-endian format:
 * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')
 * //=> '02/11/2014'
 *
 * @example
 * // Represent 2 July 2014 in Esperanto:
 * import { eoLocale } from 'date-fns/locale/eo'
 * const result = format(new Date(2014, 6, 2), "do 'de' MMMM yyyy", {
 *   locale: eoLocale
 * })
 * //=> '2-a de julio 2014'
 *
 * @example
 * // Escape string by single quote characters:
 * const result = format(new Date(2014, 6, 2, 15), "h 'o''clock'")
 * //=> "3 o'clock"
 */

function format(dirtyDate, dirtyFormatStr, options) {
  var _ref, _options$locale, _ref2, _ref3, _ref4, _options$firstWeekCon, _options$locale2, _options$locale2$opti, _defaultOptions$local, _defaultOptions$local2, _ref5, _ref6, _ref7, _options$weekStartsOn, _options$locale3, _options$locale3$opti, _defaultOptions$local3, _defaultOptions$local4;

  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var defaultOptions = getDefaultOptions();
  var locale = (_ref = (_options$locale = options === null || options === void 0 ? void 0 : options.locale) !== null && _options$locale !== void 0 ? _options$locale : defaultOptions.locale) !== null && _ref !== void 0 ? _ref : defaultLocale;
  var firstWeekContainsDate = toInteger((_ref2 = (_ref3 = (_ref4 = (_options$firstWeekCon = options === null || options === void 0 ? void 0 : options.firstWeekContainsDate) !== null && _options$firstWeekCon !== void 0 ? _options$firstWeekCon : options === null || options === void 0 ? void 0 : (_options$locale2 = options.locale) === null || _options$locale2 === void 0 ? void 0 : (_options$locale2$opti = _options$locale2.options) === null || _options$locale2$opti === void 0 ? void 0 : _options$locale2$opti.firstWeekContainsDate) !== null && _ref4 !== void 0 ? _ref4 : defaultOptions.firstWeekContainsDate) !== null && _ref3 !== void 0 ? _ref3 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.firstWeekContainsDate) !== null && _ref2 !== void 0 ? _ref2 : 1); // Test if weekStartsOn is between 1 and 7 _and_ is not NaN

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }

  var weekStartsOn = toInteger((_ref5 = (_ref6 = (_ref7 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale3 = options.locale) === null || _options$locale3 === void 0 ? void 0 : (_options$locale3$opti = _options$locale3.options) === null || _options$locale3$opti === void 0 ? void 0 : _options$locale3$opti.weekStartsOn) !== null && _ref7 !== void 0 ? _ref7 : defaultOptions.weekStartsOn) !== null && _ref6 !== void 0 ? _ref6 : (_defaultOptions$local3 = defaultOptions.locale) === null || _defaultOptions$local3 === void 0 ? void 0 : (_defaultOptions$local4 = _defaultOptions$local3.options) === null || _defaultOptions$local4 === void 0 ? void 0 : _defaultOptions$local4.weekStartsOn) !== null && _ref5 !== void 0 ? _ref5 : 0); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }

  if (!locale.localize) {
    throw new RangeError('locale must contain localize property');
  }

  if (!locale.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }

  var originalDate = toDate(dirtyDate);

  if (!isValid(originalDate)) {
    throw new RangeError('Invalid time value');
  } // Convert the date in system timezone to the same date in UTC+00:00 timezone.
  // This ensures that when UTC functions will be implemented, locales will be compatible with them.
  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376


  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];

    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = longFormatters$1[firstCharacter];
      return longFormatter(substring, locale.formatLong);
    }

    return substring;
  }).join('').match(formattingTokensRegExp).map(function (substring) {
    // Replace two single quote characters with one single quote character
    if (substring === "''") {
      return "'";
    }

    var firstCharacter = substring[0];

    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }

    var formatter = formatters$1[firstCharacter];

    if (formatter) {
      if (!(options !== null && options !== void 0 && options.useAdditionalWeekYearTokens) && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }

      if (!(options !== null && options !== void 0 && options.useAdditionalDayOfYearTokens) && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, String(dirtyDate));
      }

      return formatter(utcDate, substring, locale.localize, formatterOptions);
    }

    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }

    return substring;
  }).join('');
  return result;
}

function cleanEscapedString(input) {
  var matched = input.match(escapedStringRegExp);

  if (!matched) {
    return input;
  }

  return matched[1].replace(doubleQuoteRegExp, "'");
}


//# sourceMappingURL=index-72d247f7.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Loader.js




function Loader(_ref) {
  let {
    className = '',
    width = '26px',
    height = '26px',
    children
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-loader'].join(' '),
    style: {
      width: typeof width === 'string' ? width : `${width}px`,
      height: typeof height === 'string' ? height : `${height}px`
    }
  }, children || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.SPINNER,
    width: "26px",
    height: "26px"
  }));
}


//# sourceMappingURL=Loader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-d6ceb67a.js


/**
 * @name startOfDay
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|Number} date - the original date
 * @returns {Date} the start of a day
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */

function startOfDay(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}

/**
 * @name isSameDay
 * @category Day Helpers
 * @summary Are the given dates in the same day (and year and month)?
 *
 * @description
 * Are the given dates in the same day (and year and month)?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day (and year and month)
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))
 * //=> true
 *
 * @example
 * // Are 4 September and 4 October in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))
 * //=> false
 *
 * @example
 * // Are 4 September, 2014 and 4 September, 2015 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))
 * //=> false
 */

function isSameDay(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);
  var dateRightStartOfDay = startOfDay(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}


//# sourceMappingURL=index-d6ceb67a.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-4c4b34c9.js



/**
 * @name isToday
 * @category Day Helpers
 * @summary Is the given date today?
 * @pure false
 *
 * @description
 * Is the given date today?
 *
 * >  Please note that this function is not present in the FP submodule as
 * > it uses `Date.now()` internally hence impure and can't be safely curried.
 *
 * @param {Date|Number} date - the date to check
 * @returns {Boolean} the date is today
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // If today is 6 October 2014, is 6 October 14:00:00 today?
 * const result = isToday(new Date(2014, 9, 6, 14, 0))
 * //=> true
 */

function isToday(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameDay(dirtyDate, Date.now());
}

/**
 * @name isSameYear
 * @category Year Helpers
 * @summary Are the given dates in the same year?
 *
 * @description
 * Are the given dates in the same year?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same year
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 2 September 2014 and 25 September 2014 in the same year?
 * const result = isSameYear(new Date(2014, 8, 2), new Date(2014, 8, 25))
 * //=> true
 */

function isSameYear(dirtyDateLeft, dirtyDateRight) {
  requiredArgs(2, arguments);
  var dateLeft = toDate(dirtyDateLeft);
  var dateRight = toDate(dirtyDateRight);
  return dateLeft.getFullYear() === dateRight.getFullYear();
}

/**
 * @name isThisYear
 * @category Year Helpers
 * @summary Is the given date in the same year as the current date?
 * @pure false
 *
 * @description
 * Is the given date in the same year as the current date?
 *
 * >  Please note that this function is not present in the FP submodule as
 * > it uses `Date.now()` internally hence impure and can't be safely curried.
 *
 * @param {Date|Number} date - the date to check
 * @returns {Boolean} the date is in this year
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // If today is 25 September 2014, is 2 July 2014 in this year?
 * const result = isThisYear(new Date(2014, 6, 2))
 * //=> true
 */

function isThisYear(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameYear(dirtyDate, Date.now());
}

/**
 * @name addDays
 * @category Day Helpers
 * @summary Add the specified number of days to the given date.
 *
 * @description
 * Add the specified number of days to the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} - the new date with the days added
 * @throws {TypeError} - 2 arguments required
 *
 * @example
 * // Add 10 days to 1 September 2014:
 * const result = addDays(new Date(2014, 8, 1), 10)
 * //=> Thu Sep 11 2014 00:00:00
 */

function addDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var date = toDate(dirtyDate);
  var amount = toInteger(dirtyAmount);

  if (isNaN(amount)) {
    return new Date(NaN);
  }

  if (!amount) {
    // If 0 days, no-op to avoid changing times in the hour before end of DST
    return date;
  }

  date.setDate(date.getDate() + amount);
  return date;
}

/**
 * @name subDays
 * @category Day Helpers
 * @summary Subtract the specified number of days from the given date.
 *
 * @description
 * Subtract the specified number of days from the given date.
 *
 * @param {Date|Number} date - the date to be changed
 * @param {Number} amount - the amount of days to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.
 * @returns {Date} the new date with the days subtracted
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Subtract 10 days from 1 September 2014:
 * const result = subDays(new Date(2014, 8, 1), 10)
 * //=> Fri Aug 22 2014 00:00:00
 */

function subDays(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addDays(dirtyDate, -amount);
}

/**
 * @name isYesterday
 * @category Day Helpers
 * @summary Is the given date yesterday?
 * @pure false
 *
 * @description
 * Is the given date yesterday?
 *
 * >  Please note that this function is not present in the FP submodule as
 * > it uses `Date.now()` internally hence impure and can't be safely curried.
 *
 * @param {Date|Number} date - the date to check
 * @returns {Boolean} the date is yesterday
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // If today is 6 October 2014, is 5 October 14:00:00 yesterday?
 * const result = isYesterday(new Date(2014, 9, 5, 14, 0))
 * //=> true
 */

function isYesterday(dirtyDate) {
  requiredArgs(1, arguments);
  return isSameDay(dirtyDate, subDays(Date.now(), 1));
}


//# sourceMappingURL=index-4c4b34c9.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-2969a2df.js










/* eslint-disable default-param-last */
const getChannelTitle = function () {
  var _channel$members;
  let channel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  let currentUserId = arguments.length > 1 ? arguments[1] : undefined;
  let stringSet = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : LabelStringSet;
  if (!(channel !== null && channel !== void 0 && channel.name) && !(channel !== null && channel !== void 0 && channel.members)) {
    return stringSet.NO_TITLE;
  }
  if (channel !== null && channel !== void 0 && channel.name && channel.name !== 'Group Channel') {
    return channel.name;
  }
  if ((channel === null || channel === void 0 ? void 0 : (_channel$members = channel.members) === null || _channel$members === void 0 ? void 0 : _channel$members.length) === 1) {
    return stringSet.NO_MEMBERS;
  }
  return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).filter(_ref => {
    let {
      userId
    } = _ref;
    return userId !== currentUserId;
  }).map(_ref2 => {
    let {
      nickname
    } = _ref2;
    return nickname || stringSet.NO_NAME;
  }).join(', ');
};
const getLastMessageCreatedAt = _ref3 => {
  var _channel$lastMessage;
  let {
    channel,
    locale,
    stringSet
  } = _ref3;
  const createdAt = channel === null || channel === void 0 ? void 0 : (_channel$lastMessage = channel.lastMessage) === null || _channel$lastMessage === void 0 ? void 0 : _channel$lastMessage.createdAt;
  const optionalParam = locale ? {
    locale
  } : null;
  if (!createdAt) {
    return '';
  }
  if (isToday(createdAt)) {
    return format(createdAt, 'p', optionalParam);
  }
  if (isYesterday(createdAt)) {
    return (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_STATUS__YESTERDAY) || 'Yesterday';
  }
  if (isThisYear(createdAt)) {
    return format(createdAt, 'MMM d', optionalParam);
  }
  return format(createdAt, 'yyyy/M/d', optionalParam);
};
const getTotalMembers = channel => channel !== null && channel !== void 0 && channel.memberCount ? channel.memberCount : 0;
const getPrettyLastMessage = function () {
  var _message$message;
  let message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
  const MAXLEN = 30;
  if (!message) return '';
  if (message.isFileMessage()) {
    return truncateString(message.name, MAXLEN);
  }
  if (message.isMultipleFilesMessage()) {
    const {
      fileInfoList
    } = message;
    if (fileInfoList.length > 0) {
      return truncateString(fileInfoList[0].fileName, MAXLEN);
    }
    return '';
  }
  return (_message$message = message.message) !== null && _message$message !== void 0 ? _message$message : '';
};
const getLastMessage = channel => channel !== null && channel !== void 0 && channel.lastMessage ? getPrettyLastMessage(channel === null || channel === void 0 ? void 0 : channel.lastMessage) : '';
const getChannelUnreadMessageCount = channel => channel !== null && channel !== void 0 && channel.unreadMessageCount ? channel.unreadMessageCount : 0;

const MessageStatusTypes = OutgoingMessageStates;
function MessageStatus(_ref) {
  var _channel$isGroupChann;
  let {
    className,
    message,
    channel,
    isDateSeparatorConsidered = true
  } = _ref;
  const {
    stringSet,
    dateLocale
  } = useLocalization();
  const status = getOutgoingMessageState(channel, message);
  const hideMessageStatusIcon = (channel === null || channel === void 0 ? void 0 : (_channel$isGroupChann = channel.isGroupChannel) === null || _channel$isGroupChann === void 0 ? void 0 : _channel$isGroupChann.call(channel)) && (channel.isSuper || channel.isPublic || channel.isBroadcast) && !(status === OutgoingMessageStates.PENDING || status === OutgoingMessageStates.FAILED);
  const iconType = {
    [OutgoingMessageStates.SENT]: IconTypes.DONE,
    [OutgoingMessageStates.DELIVERED]: IconTypes.DONE_ALL,
    [OutgoingMessageStates.READ]: IconTypes.DONE_ALL,
    [OutgoingMessageStates.FAILED]: IconTypes.ERROR
  };
  const iconColor = {
    [OutgoingMessageStates.SENT]: IconColors.SENT,
    [OutgoingMessageStates.DELIVERED]: IconColors.SENT,
    [OutgoingMessageStates.READ]: IconColors.READ,
    [OutgoingMessageStates.FAILED]: IconColors.ERROR
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-message-status'].join(' ')
  }, status === OutgoingMessageStates.PENDING ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    className: "sendbird-message-status__icon",
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: `sendbird-message-status__icon ${hideMessageStatusIcon ? 'hide-icon' : ''} ${status === OutgoingMessageStates.FAILED ? '' : 'sendbird-message-status--sent'}`,
    type: iconType[status] || IconTypes.ERROR,
    fillColor: iconColor[status],
    width: "16px",
    height: "16px"
  }), isSentStatus(status) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-status__text",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, isDateSeparatorConsidered ? format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, 'p', {
    locale: dateLocale
  }) : getLastMessageCreatedAt({
    channel,
    locale: dateLocale,
    stringSet
  })));
}


//# sourceMappingURL=index-2969a2df.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/consts-c105f2e8.js
const MENTION_USER_LABEL_CLASSNAME = 'sendbird-mention-user-label';


//# sourceMappingURL=consts-c105f2e8.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MentionUserLabel.js



function MentionUserLabel(_ref) {
  let {
    className = '',
    children,
    isReverse = false,
    color,
    userId
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
    className: `${MENTION_USER_LABEL_CLASSNAME} ${className} ${isReverse ? 'reverse' : ''} ${color}`,
    contentEditable: false,
    "data-userid": userId,
    "data-sb-mention": true
  }, children);
}


//# sourceMappingURL=MentionUserLabel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/color-65ef45d7.js
let color_65ef45d7_Colors = /*#__PURE__*/function (Colors) {
  Colors["ONBACKGROUND_1"] = "ONBACKGROUND_1";
  Colors["ONBACKGROUND_2"] = "ONBACKGROUND_2";
  Colors["ONBACKGROUND_3"] = "ONBACKGROUND_3";
  Colors["ONBACKGROUND_4"] = "ONBACKGROUND_4";
  Colors["ONCONTENT_1"] = "ONCONTENT_1";
  Colors["ONCONTENT_2"] = "ONCONTENT_2";
  Colors["PRIMARY"] = "PRIMARY";
  Colors["ERROR"] = "ERROR";
  return Colors;
}({});
const color_65ef45d7_changeColorToClassName = color => {
  switch (color) {
    case color_65ef45d7_Colors.ONBACKGROUND_1:
      return 'sendbird-color--onbackground-1';
    case color_65ef45d7_Colors.ONBACKGROUND_2:
      return 'sendbird-color--onbackground-2';
    case color_65ef45d7_Colors.ONBACKGROUND_3:
      return 'sendbird-color--onbackground-3';
    case color_65ef45d7_Colors.ONBACKGROUND_4:
      return 'sendbird-color--onbackground-4';
    case color_65ef45d7_Colors.ONCONTENT_1:
      return 'sendbird-color--oncontent-1';
    case color_65ef45d7_Colors.PRIMARY:
      return 'sendbird-color--primary';
    case color_65ef45d7_Colors.ERROR:
      return 'sendbird-color--error';
    default:
      return null;
  }
};


//# sourceMappingURL=color-65ef45d7.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TextButton.js



const TextButton = _ref => {
  let {
    className = '',
    color = color_65ef45d7_Colors.ONBACKGROUND_1,
    disabled = false,
    disableUnderline = false,
    onClick = () => {/* noop */},
    children
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), color_65ef45d7_changeColorToClassName(color), disableUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton', disabled ? 'sendbird-textbutton--disabled' : ''].join(' '),
    role: "button",
    tabIndex: 0,
    onClick: e => onClick(e),
    onKeyPress: e => onClick(e)
  }, children);
};


//# sourceMappingURL=TextButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/const-2c36fe72.js
const PREV_RESULT_SIZE = 30;
const NEXT_RESULT_SIZE = 15;
const MAX_USER_MENTION_COUNT = 10;
const MAX_USER_SUGGESTION_COUNT = 15;
const USER_MENTION_TEMP_CHAR = '@';
let ThreadReplySelectType = /*#__PURE__*/function (ThreadReplySelectType) {
  ThreadReplySelectType["PARENT"] = "PARENT";
  ThreadReplySelectType["THREAD"] = "THREAD";
  return ThreadReplySelectType;
}({});


//# sourceMappingURL=const-2c36fe72.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils-b7161189.js




const RESET_MESSAGES = 'RESET_MESSAGES';
const FETCH_INITIAL_MESSAGES_START = 'FETCH_INITIAL_MESSAGES_START';
const FETCH_INITIAL_MESSAGES_SUCCESS = 'FETCH_INITIAL_MESSAGES_SUCCESS';
const FETCH_INITIAL_MESSAGES_FAILURE = 'FETCH_INITIAL_MESSAGES_FAILURE';
const FETCH_PREV_MESSAGES_SUCCESS = 'FETCH_PREV_MESSAGES_SUCCESS';
const FETCH_PREV_MESSAGES_FAILURE = 'FETCH_PREV_MESSAGES_FAILURE';
const FETCH_NEXT_MESSAGES_SUCCESS = 'FETCH_NEXT_MESSAGES_SUCCESS';
const FETCH_NEXT_MESSAGES_FAILURE = 'FETCH_NEXT_MESSAGES_FAILURE';
const SEND_MESSAGE_START = 'SEND_MESSAGE_START';
const SEND_MESSAGE_SUCESS = 'SEND_MESSAGE_SUCESS';
const SEND_MESSAGE_FAILURE = 'SEND_MESSAGE_FAILURE';
const RESEND_MESSAGE_START = 'RESEND_MESSAGE_START';
const ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';
const ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';
const ON_MESSAGE_THREAD_INFO_UPDATED = 'ON_MESSAGE_THREAD_INFO_UPDATED';
const ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';
const ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';
const utils_b7161189_SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
const SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';
const MARK_AS_READ = 'MARK_AS_READ';
const ON_REACTION_UPDATED = 'ON_REACTION_UPDATED';
const SET_EMOJI_CONTAINER = 'SET_EMOJI_CONTAINER';
const MESSAGE_LIST_PARAMS_CHANGED = 'MESSAGE_LIST_PARAMS_CHANGED';

var utils_b7161189_messageActionTypes = /*#__PURE__*/Object.freeze({
  __proto__: null,
  RESET_MESSAGES: RESET_MESSAGES,
  FETCH_INITIAL_MESSAGES_START: FETCH_INITIAL_MESSAGES_START,
  FETCH_INITIAL_MESSAGES_SUCCESS: FETCH_INITIAL_MESSAGES_SUCCESS,
  FETCH_INITIAL_MESSAGES_FAILURE: FETCH_INITIAL_MESSAGES_FAILURE,
  FETCH_PREV_MESSAGES_SUCCESS: FETCH_PREV_MESSAGES_SUCCESS,
  FETCH_PREV_MESSAGES_FAILURE: FETCH_PREV_MESSAGES_FAILURE,
  FETCH_NEXT_MESSAGES_SUCCESS: FETCH_NEXT_MESSAGES_SUCCESS,
  FETCH_NEXT_MESSAGES_FAILURE: FETCH_NEXT_MESSAGES_FAILURE,
  SEND_MESSAGE_START: SEND_MESSAGE_START,
  SEND_MESSAGE_SUCESS: SEND_MESSAGE_SUCESS,
  SEND_MESSAGE_FAILURE: SEND_MESSAGE_FAILURE,
  RESEND_MESSAGE_START: RESEND_MESSAGE_START,
  ON_MESSAGE_RECEIVED: ON_MESSAGE_RECEIVED,
  ON_MESSAGE_UPDATED: ON_MESSAGE_UPDATED,
  ON_MESSAGE_THREAD_INFO_UPDATED: ON_MESSAGE_THREAD_INFO_UPDATED,
  ON_MESSAGE_DELETED: ON_MESSAGE_DELETED,
  ON_MESSAGE_DELETED_BY_REQ_ID: ON_MESSAGE_DELETED_BY_REQ_ID,
  SET_CURRENT_CHANNEL: utils_b7161189_SET_CURRENT_CHANNEL,
  SET_CHANNEL_INVALID: SET_CHANNEL_INVALID,
  MARK_AS_READ: MARK_AS_READ,
  ON_REACTION_UPDATED: ON_REACTION_UPDATED,
  SET_EMOJI_CONTAINER: SET_EMOJI_CONTAINER,
  MESSAGE_LIST_PARAMS_CHANGED: MESSAGE_LIST_PARAMS_CHANGED
});

const UNDEFINED = 'undefined';
const {
  SUCCEEDED,
  FAILED,
  PENDING
} = getSendingMessageStatus();
const scrollToRenderedMessage = (scrollRef, initialTimeStamp) => {
  try {
    var _container$querySelec;
    const container = scrollRef.current;
    // scroll into the message with initialTimeStamp
    const element = (_container$querySelec = container.querySelectorAll(`[data-sb-created-at="${initialTimeStamp}"]`)) === null || _container$querySelec === void 0 ? void 0 : _container$querySelec[0];
    if (element) {
      // Calculate the offset of the element from the top of the container
      const containerHeight = container.offsetHeight;
      const elementHeight = element.offsetHeight;
      const elementOffset = (containerHeight - elementHeight) / 2;
      // Set the scroll position of the container to bring the element to the middle
      container.scrollTop = element.offsetTop - elementOffset;
    }
  } catch (_unused) {
    // do nothing
  }
};

/* eslint-disable default-param-last */
const scrollIntoLast = function () {
  let initialTry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  let scrollRef = arguments.length > 1 ? arguments[1] : undefined;
  const MAX_TRIES = 10;
  const currentTry = initialTry;
  if (currentTry > MAX_TRIES) {
    return;
  }
  try {
    const scrollDOM = (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) || document.querySelector('.sendbird-conversation__messages-padding');
    // eslint-disable-next-line no-multi-assign
    scrollDOM.scrollTop = scrollDOM.scrollHeight;
  } catch (error) {
    setTimeout(() => {
      scrollIntoLast(currentTry + 1, scrollRef);
    }, 500 * currentTry);
  }
};
const utils_b7161189_pubSubHandleRemover = subscriber => {
  subscriber.forEach(s => {
    try {
      s.remove();
    } catch (_unused2) {
      //
    }
  });
};
const utils_b7161189_pubSubHandler = _ref => {
  let {
    channelUrl,
    pubSub,
    dispatcher,
    scrollRef
  } = _ref;
  const subscriber = new Map();
  if (!pubSub || !pubSub.subscribe) return subscriber;
  subscriber.set(PUBSUB_TOPICS.SEND_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_USER_MESSAGE, msg => {
    const {
      channel,
      message
    } = msg;
    scrollIntoLast(0, scrollRef);
    if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
      dispatcher({
        type: SEND_MESSAGE_SUCESS,
        payload: message
      });
    }
  }));
  subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_START, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_START, msg => {
    const {
      channel,
      message
    } = msg;
    if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
      dispatcher({
        type: SEND_MESSAGE_START,
        payload: message
      });
    }
  }));
  subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, msg => {
    const {
      channel,
      message
    } = msg;
    if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
      dispatcher({
        type: SEND_MESSAGE_FAILURE,
        payload: message
      });
    }
  }));
  subscriber.set(PUBSUB_TOPICS.SEND_FILE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_FILE_MESSAGE, msg => {
    const {
      channel,
      message
    } = msg;
    scrollIntoLast(0, scrollRef);
    if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
      dispatcher({
        type: SEND_MESSAGE_SUCESS,
        payload: message
      });
    }
  }));
  subscriber.set(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, msg => {
    const {
      channel,
      message,
      fromSelector
    } = msg;
    if (fromSelector && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
      dispatcher({
        type: ON_MESSAGE_UPDATED,
        payload: {
          channel,
          message
        }
      });
    }
  }));
  subscriber.set(PUBSUB_TOPICS.DELETE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.DELETE_MESSAGE, msg => {
    const {
      channel,
      messageId
    } = msg;
    if (channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
      dispatcher({
        type: ON_MESSAGE_DELETED,
        payload: messageId
      });
    }
  }));
  return subscriber;
};
const utils_b7161189_isOperator = function () {
  let groupChannel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  const myRole = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myRole;
  return myRole === 'operator';
};
const isDisabledBecauseFrozen = function () {
  let groupChannel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  const isFrozen = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen;
  return isFrozen && !utils_b7161189_isOperator(groupChannel);
};
const isDisabledBecauseMuted = function () {
  let groupChannel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  const myMutedState = groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.myMutedState;
  return myMutedState === 'muted';
};
const getAllEmojisMapFromEmojiContainer = function () {
  let emojiContainer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  const {
    emojiCategories = []
  } = emojiContainer;
  const allEmojisMap = new Map();
  for (let categoryIndex = 0; categoryIndex < emojiCategories.length; categoryIndex += 1) {
    const {
      emojis
    } = emojiCategories[categoryIndex];
    for (let emojiIndex = 0; emojiIndex < emojis.length; emojiIndex += 1) {
      const {
        key,
        url
      } = emojis[emojiIndex];
      allEmojisMap.set(key, url);
    }
  }
  return allEmojisMap;
};
const getNicknamesMapFromMembers = function () {
  let members = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  const nicknamesMap = new Map();
  for (let memberIndex = 0; memberIndex < members.length; memberIndex += 1) {
    const {
      userId,
      nickname
    } = members[memberIndex];
    nicknamesMap.set(userId, nickname);
  }
  return nicknamesMap;
};
const getUniqueListBy = (arr, key) => [...new Map(arr.map(item => [item[key], item])).values()];
const getUniqueListByMessageId = arr => getUniqueListBy(arr, 'messageId');
const sortByCreatedAt = messages => messages.sort((a, b) => a.createdAt - b.createdAt);
const mergeAndSortMessages = (oldMessages, newMessages) => {
  const lastOldMessage = oldMessages[oldMessages.length - 1];
  const firstNewMessage = newMessages[0];
  // If the last message of oldMessages is older than the first message of newMessages,
  // then we can safely append newMessages to oldMessages.
  if ((lastOldMessage === null || lastOldMessage === void 0 ? void 0 : lastOldMessage.createdAt) < (firstNewMessage === null || firstNewMessage === void 0 ? void 0 : firstNewMessage.createdAt)) {
    return [...oldMessages, ...newMessages];
  }

  // todo: optimize this
  // If the last message of oldMessages is newer than the first message of newMessages,
  // then we need to merge the two arrays and sort them by createdAt.
  const mergedMessages = [...oldMessages, ...newMessages];
  const unique = getUniqueListByMessageId(mergedMessages);
  return sortByCreatedAt(unique);
};
const getMessageCreatedAt = message => format(message.createdAt, 'p');
const isSameGroup = (message, comparingMessage, currentChannel) => {
  var _message$sender, _comparingMessage$sen, _message$sender2, _comparingMessage$sen2;
  if (!(message && comparingMessage && message.messageType && message.messageType !== 'admin' && comparingMessage.messageType && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.messageType) !== 'admin' && message !== null && message !== void 0 && message.sender && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.sender && message !== null && message !== void 0 && message.createdAt && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.createdAt && message !== null && message !== void 0 && (_message$sender = message.sender) !== null && _message$sender !== void 0 && _message$sender.userId && comparingMessage !== null && comparingMessage !== void 0 && (_comparingMessage$sen = comparingMessage.sender) !== null && _comparingMessage$sen !== void 0 && _comparingMessage$sen.userId)) {
    return false;
  }
  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sendingStatus) && (message === null || message === void 0 ? void 0 : (_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.userId) === (comparingMessage === null || comparingMessage === void 0 ? void 0 : (_comparingMessage$sen2 = comparingMessage.sender) === null || _comparingMessage$sen2 === void 0 ? void 0 : _comparingMessage$sen2.userId) && getMessageCreatedAt(message) === getMessageCreatedAt(comparingMessage) && isReadMessage(currentChannel, message) === isReadMessage(currentChannel, comparingMessage);
};
const passUnsuccessfullMessages = (allMessages, newMessage) => {
  const {
    sendingStatus = UNDEFINED
  } = newMessage;
  if (sendingStatus === SUCCEEDED || sendingStatus === PENDING) {
    const lastIndexOfSucceededMessage = allMessages.map(message => message.sendingStatus || (message.isAdminMessage && message.isAdminMessage() ? SUCCEEDED : UNDEFINED)).lastIndexOf(SUCCEEDED);
    if (lastIndexOfSucceededMessage + 1 < allMessages.length) {
      const messages = [...allMessages];
      messages.splice(lastIndexOfSucceededMessage + 1, 0, newMessage);
      return messages;
    }
  }
  return [...allMessages, newMessage];
};
const utils_b7161189_pxToNumber = px => {
  if (typeof px === 'number') {
    return px;
  }
  if (typeof px === 'string') {
    const parsed = Number.parseFloat(px);
    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }
  return null;
};
const isAboutSame = (a, b, px) => Math.abs(a - b) <= px;


//# sourceMappingURL=utils-b7161189.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/compareIds-c0aa8024.js
const compareIds_c0aa8024_isEmpty = val => val === null || val === undefined;

// Some Ids return string and number inconsistently
// only use to comapre IDs
function compareIds(a, b) {
  if (compareIds_c0aa8024_isEmpty(a) || compareIds_c0aa8024_isEmpty(b)) {
    return false;
  }
  const aString = a.toString();
  const bString = b.toString();
  return aString === bString;
}


//# sourceMappingURL=compareIds-c0aa8024.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/chat/message.js


// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelProvider-d6dedff9.js
















/**
 * This function helps consider the every condition
 * related to enabling emoji reaction feature.
 */

function getIsReactionEnabled(_ref) {
  let {
    isBroadcast = false,
    isSuper = false,
    globalLevel = true,
    moduleLevel
  } = _ref;
  return !(isBroadcast || isSuper) && (moduleLevel !== null && moduleLevel !== void 0 ? moduleLevel : globalLevel);
}

var messagesInitialState = {
  initialized: false,
  loading: true,
  allMessages: [],
  currentGroupChannel: {
    members: []
  },
  // for scrollup
  hasMorePrev: false,
  oldestMessageTimeStamp: 0,
  // for scroll down
  // onScrollDownCallback is added for navigation to different timestamps on messageSearch
  // hasMorePrev, onScrollCallback -> scroll up(default behavior)
  // hasMoreNext, onScrollDownCallback -> scroll down
  hasMoreNext: false,
  latestMessageTimeStamp: 0,
  emojiContainer: {},
  unreadSince: null,
  /**
   * unreadSince is a formatted date information string
   * It's used only for the {unreadSince && <UnreadCount time={unreadSince} />}
   */
  isInvalid: false,
  messageListParams: null
};

const {
  SUCCEEDED: ChannelProvider_d6dedff9_SUCCEEDED
} = getSendingMessageStatus();
const getOldestMessageTimeStamp = function () {
  let messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  const oldestMessage = messages[0];
  return oldestMessage && oldestMessage.createdAt || null;
};
const getLatestMessageTimeStamp = function () {
  let messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  const latestMessage = messages[messages.length - 1];
  return latestMessage && latestMessage.createdAt || null;
};
function ChannelProvider_d6dedff9_reducer(state, action) {
  var _state$currentGroupCh7, _action$payload, _action$payload$chann;
  switch (action.type) {
    case RESET_MESSAGES:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        // when user switches channel, if the previous channel `hasMorePrev`
        // the onScroll gets called twice, setting hasMorePrev false prevents this
        hasMorePrev: false,
        hasMoreNext: false,
        allMessages: []
      });
    case FETCH_INITIAL_MESSAGES_START:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          loading: true,
          allMessages: [...state.allMessages.filter(m => m.sendingStatus !== ChannelProvider_d6dedff9_SUCCEEDED)]
        });
      }
    case FETCH_INITIAL_MESSAGES_SUCCESS:
      {
        var _state$currentGroupCh;
        const {
          currentGroupChannel,
          messages
        } = action.payload;
        if (!((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) === ((_state$currentGroupCh = state.currentGroupChannel) === null || _state$currentGroupCh === void 0 ? void 0 : _state$currentGroupCh.url))) {
          return state;
        }
        const oldestMessageTimeStamp = getOldestMessageTimeStamp(messages);
        const latestMessageTimeStamp = getLatestMessageTimeStamp(messages);
        return _objectSpread2(_objectSpread2({}, state), {}, {
          loading: false,
          initialized: true,
          hasMorePrev: true,
          hasMoreNext: true,
          oldestMessageTimeStamp,
          latestMessageTimeStamp,
          allMessages: [...messages]
        });
      }
    case FETCH_PREV_MESSAGES_SUCCESS:
      {
        var _state$currentGroupCh2, _messages$length, _state$messageListPar, _state$messageListPar2;
        const {
          currentGroupChannel,
          messages
        } = action.payload;
        if (!((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) === ((_state$currentGroupCh2 = state.currentGroupChannel) === null || _state$currentGroupCh2 === void 0 ? void 0 : _state$currentGroupCh2.url))) {
          return state;
        }
        const hasMorePrev = ((_messages$length = messages === null || messages === void 0 ? void 0 : messages.length) !== null && _messages$length !== void 0 ? _messages$length : 0) >= ((_state$messageListPar = state === null || state === void 0 ? void 0 : (_state$messageListPar2 = state.messageListParams) === null || _state$messageListPar2 === void 0 ? void 0 : _state$messageListPar2.prevResultSize) !== null && _state$messageListPar !== void 0 ? _state$messageListPar : PREV_RESULT_SIZE) + 1;
        const oldestMessageTimeStamp = getOldestMessageTimeStamp(messages);

        // Remove duplicated messages
        const duplicatedMessageIds = [];
        const updatedOldMessages = state.allMessages.map(msg => {
          const duplicatedMessage = messages.find(_ref => {
            let {
              messageId
            } = _ref;
            return compareIds(messageId, msg.messageId);
          });
          if (!duplicatedMessage) {
            return msg;
          }
          duplicatedMessageIds.push(duplicatedMessage.messageId);
          return duplicatedMessage.updatedAt > msg.updatedAt ? duplicatedMessage : msg;
        });
        const filteredNewMessages = duplicatedMessageIds.length > 0 ? messages.filter(msg => !duplicatedMessageIds.find(messageId => compareIds(messageId, msg.messageId))) : messages;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          hasMorePrev,
          oldestMessageTimeStamp,
          allMessages: [...filteredNewMessages, ...updatedOldMessages]
        });
      }
    case FETCH_NEXT_MESSAGES_SUCCESS:
      {
        var _state$currentGroupCh3, _messages$length2, _state$messageListPar3, _state$messageListPar4;
        const {
          currentGroupChannel,
          messages
        } = action.payload;
        if (!((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) === ((_state$currentGroupCh3 = state.currentGroupChannel) === null || _state$currentGroupCh3 === void 0 ? void 0 : _state$currentGroupCh3.url))) {
          return state;
        }
        const hasMoreNext = ((_messages$length2 = messages === null || messages === void 0 ? void 0 : messages.length) !== null && _messages$length2 !== void 0 ? _messages$length2 : 0) === ((_state$messageListPar3 = state === null || state === void 0 ? void 0 : (_state$messageListPar4 = state.messageListParams) === null || _state$messageListPar4 === void 0 ? void 0 : _state$messageListPar4.nextResultSize) !== null && _state$messageListPar3 !== void 0 ? _state$messageListPar3 : NEXT_RESULT_SIZE) + 1;
        const latestMessageTimeStamp = getLatestMessageTimeStamp(messages);

        // sort ~
        const sortedMessages = mergeAndSortMessages(state.allMessages, messages);
        return _objectSpread2(_objectSpread2({}, state), {}, {
          hasMoreNext,
          latestMessageTimeStamp,
          allMessages: sortedMessages
        });
      }
    case FETCH_INITIAL_MESSAGES_FAILURE:
    case FETCH_PREV_MESSAGES_FAILURE:
    case FETCH_NEXT_MESSAGES_FAILURE:
      {
        var _state$currentGroupCh4;
        const {
          currentGroupChannel
        } = action.payload;
        if ((currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) !== (state === null || state === void 0 ? void 0 : (_state$currentGroupCh4 = state.currentGroupChannel) === null || _state$currentGroupCh4 === void 0 ? void 0 : _state$currentGroupCh4.url)) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          loading: false,
          initialized: false,
          allMessages: [],
          hasMorePrev: false,
          hasMoreNext: false,
          oldestMessageTimeStamp: null,
          latestMessageTimeStamp: null
        });
      }
    case SEND_MESSAGE_START:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        allMessages: [...state.allMessages,
        // Message should not be spread here
        // it will loose some methods like `isUserMessage`
        action.payload]
      });
    case SEND_MESSAGE_SUCESS:
      {
        const message = action.payload;
        const filteredMessages = state.allMessages.filter(m => (m === null || m === void 0 ? void 0 : m.reqId) !== (message === null || message === void 0 ? void 0 : message.reqId));
        // [Policy] Pending messages and failed messages
        // must always be at the end of the message list
        const pendingIndex = filteredMessages.findIndex(msg => (msg === null || msg === void 0 ? void 0 : msg.sendingStatus) === 'pending' || (msg === null || msg === void 0 ? void 0 : msg.sendingStatus) === 'failed');
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: pendingIndex > -1 ? [...filteredMessages.slice(0, pendingIndex), message, ...filteredMessages.slice(pendingIndex)] : [...filteredMessages, message]
        });
      }
    case SEND_MESSAGE_FAILURE:
      {
        // eslint-disable-next-line no-param-reassign
        action.payload.failed = true;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.map(m => compareIds(m.reqId, action.payload.reqId) ? action.payload : m)
        });
      }
    case utils_b7161189_SET_CURRENT_CHANNEL:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentGroupChannel: action.payload,
          isInvalid: false
        });
      }
    case SET_CHANNEL_INVALID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentGroupChannel: null,
          isInvalid: true
        });
      }
    case ON_MESSAGE_RECEIVED:
      {
        const {
          channel,
          message
        } = action.payload;
        const {
          members
        } = channel;
        const {
          sender
        } = message;
        const {
          currentGroupChannel = {},
          unreadSince
        } = state;
        const currentGroupChannelUrl = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url;
        if (!compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentGroupChannelUrl)) {
          return state;
        }
        // Excluded overlapping messages
        if (state.allMessages.some(msg => msg.messageId === message.messageId)) {
          return state;
        }
        // Filter by userFilledQuery
        if (state.messageListParams && !filterMessageListParams(state.messageListParams, message)) {
          return state;
        }
        if (message.isAdminMessage && message.isAdminMessage()) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allMessages: passUnsuccessfullMessages(state.allMessages, message)
          });
        }

        // Update members when sender profileUrl, nickname, friendName has been changed
        const senderMember = members === null || members === void 0 ? void 0 : members.find(m => (m === null || m === void 0 ? void 0 : m.userId) === (sender === null || sender === void 0 ? void 0 : sender.userId));
        if ((senderMember === null || senderMember === void 0 ? void 0 : senderMember.profileUrl) !== (sender === null || sender === void 0 ? void 0 : sender.profileUrl) || (senderMember === null || senderMember === void 0 ? void 0 : senderMember.friendName) !== (sender === null || sender === void 0 ? void 0 : sender.friendName) || (senderMember === null || senderMember === void 0 ? void 0 : senderMember.nickname) !== (sender === null || sender === void 0 ? void 0 : sender.nickname)) {
          channel.members = members.map(member => {
            if (member.userId === sender.userId) {
              return sender;
            }
            return member;
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentGroupChannel: channel,
          unreadSince: state !== null && state !== void 0 && state.unreadSince ? unreadSince : format(new Date(), 'p MMM dd'),
          allMessages: passUnsuccessfullMessages(state.allMessages, message)
        });
      }
    case ON_MESSAGE_UPDATED:
      {
        var _state$currentGroupCh5;
        const {
          channel,
          message
        } = action.payload;
        const currentGroupChannelUrl = (state === null || state === void 0 ? void 0 : (_state$currentGroupCh5 = state.currentGroupChannel) === null || _state$currentGroupCh5 === void 0 ? void 0 : _state$currentGroupCh5.url) || '';
        if (!compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentGroupChannelUrl)) {
          return state; // Ignore event when it is not for the current channel
        }

        if (state.messageListParams && !filterMessageListParams(state.messageListParams, message)) {
          // Delete the message if it doesn't match to the params anymore
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allMessages: state.allMessages.filter(m => !compareIds(m.messageId, message === null || message === void 0 ? void 0 : message.messageId))
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.map(m => {
            if (compareIds(m.messageId, message.messageId)) {
              return message;
            }
            if (compareIds(m.parentMessageId, message.messageId)) {
              m.parentMessage = message; // eslint-disable-line no-param-reassign
            }

            return m;
          })
        });
      }
    case ON_MESSAGE_THREAD_INFO_UPDATED:
      {
        var _state$currentGroupCh6;
        const {
          channel,
          event
        } = action.payload;
        const {
          channelUrl,
          threadInfo,
          targetMessageId
        } = event;
        const currentGroupChannelUrl = (state === null || state === void 0 ? void 0 : (_state$currentGroupCh6 = state.currentGroupChannel) === null || _state$currentGroupCh6 === void 0 ? void 0 : _state$currentGroupCh6.url) || '';
        if (!compareIds(channel === null || channel === void 0 ? void 0 : channel.url, currentGroupChannelUrl) || !compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
          return state; // Ignore event when it is not for the current channel
        }

        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.map(m => {
            if (compareIds(m.messageId, targetMessageId)) {
              // eslint-disable-next-line no-param-reassign
              m.threadInfo = threadInfo; // Upsert threadInfo to the target message
            }

            return m;
          })
        });
      }
    case RESEND_MESSAGE_START:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        allMessages: state.allMessages.map(m => compareIds(m.reqId, action.payload.reqId) ? action.payload : m)
      });
    case MARK_AS_READ:
      if (((_state$currentGroupCh7 = state.currentGroupChannel) === null || _state$currentGroupCh7 === void 0 ? void 0 : _state$currentGroupCh7.url) !== ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : (_action$payload$chann = _action$payload.channel) === null || _action$payload$chann === void 0 ? void 0 : _action$payload$chann.url)) {
        return state;
      }
      return _objectSpread2(_objectSpread2({}, state), {}, {
        unreadSince: null
      });
    case ON_MESSAGE_DELETED:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        allMessages: state.allMessages.filter(m => !compareIds(m.messageId, action.payload))
      });
    case ON_MESSAGE_DELETED_BY_REQ_ID:
      return _objectSpread2(_objectSpread2({}, state), {}, {
        allMessages: state.allMessages.filter(m => !compareIds(m.reqId, action.payload))
      });
    case SET_EMOJI_CONTAINER:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          emojiContainer: action.payload
        });
      }
    case ON_REACTION_UPDATED:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.map(m => {
            if (compareIds(m.messageId, action.payload.messageId)) {
              if (m.applyReactionEvent && typeof m.applyReactionEvent === 'function') {
                m.applyReactionEvent(action.payload);
              }
              return m;
            }
            return m;
          })
        });
      }
    case MESSAGE_LIST_PARAMS_CHANGED:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          messageListParams: action.payload
        });
      }
    default:
      return state;
  }
}

/**
 * Handles ChannelEvents and send values to dispatcher using messagesDispatcher
 * messagesDispatcher: Dispatcher
 * sdk: sdkInstance
 * logger: loggerInstance
 * channelUrl: string
 * sdkInit: bool
 */

const ChannelProvider_d6dedff9_DELIVERY_RECIPT = 'delivery_receipt';
function useHandleChannelEvents(_ref, _ref2) {
  var _store$stores$sdkStor, _store$stores$sdkStor2, _store$stores$sdkStor3;
  let {
    sdkInit,
    currentUserId,
    currentGroupChannel,
    disableMarkAsRead
  } = _ref;
  let {
    sdk,
    logger,
    scrollRef,
    setQuoteMessage,
    messagesDispatcher
  } = _ref2;
  const store = useSendbirdStateContext();
  const {
    markAsReadScheduler,
    markAsDeliveredScheduler,
    disableMarkAsDelivered
  } = store.config;
  const canSetMarkAsDelivered = (_store$stores$sdkStor = store.stores.sdkStore.sdk) === null || _store$stores$sdkStor === void 0 ? void 0 : (_store$stores$sdkStor2 = _store$stores$sdkStor.appInfo) === null || _store$stores$sdkStor2 === void 0 ? void 0 : (_store$stores$sdkStor3 = _store$stores$sdkStor2.premiumFeatureList) === null || _store$stores$sdkStor3 === void 0 ? void 0 : _store$stores$sdkStor3.find(feature => feature === ChannelProvider_d6dedff9_DELIVERY_RECIPT);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const channelUrl = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url;
    const channelHandlerId = uuidv4();
    if (channelUrl && sdkInit) {
      var _sdk$groupChannel;
      const channelHandler = {
        onMessageReceived: (channel, message) => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            var _document$getElementB, _document$getElementB2;
            let scrollToEnd = false;
            try {
              const {
                current
              } = scrollRef;
              scrollToEnd = current.offsetHeight + current.scrollTop >= current.scrollHeight - 10;
              // 10 is a buffer
            } catch (error) {
              //
            }
            logger.info('Channel | useHandleChannelEvents: onMessageReceived', message);
            messagesDispatcher({
              type: ON_MESSAGE_RECEIVED,
              payload: {
                channel,
                message
              }
            });
            if (scrollToEnd && ((_document$getElementB = document.getElementById('sendbird-dropdown-portal')) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.childElementCount) === 0 && ((_document$getElementB2 = document.getElementById('sendbird-emoji-list-portal')) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.childElementCount) === 0) {
              // and !openContextMenu
              try {
                setTimeout(() => {
                  scrollIntoLast(0, scrollRef);
                });
                if (!disableMarkAsRead) {
                  markAsReadScheduler.push(currentGroupChannel);
                }
                if (canSetMarkAsDelivered && !disableMarkAsDelivered) {
                  markAsDeliveredScheduler.push(currentGroupChannel);
                }
              } catch (error) {
                logger.warning('Channel | onMessageReceived | scroll to end failed');
              }
            }
          }
        },
        onUnreadMemberStatusUpdated: channel => {
          logger.info('Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated', channel);
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        // before(onDeliveryReceiptUpdated)
        onUndeliveredMemberStatusUpdated: channel => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onDeliveryReceiptUpdated', channel);
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onMessageUpdated: (channel, message) => {
          logger.info('Channel | useHandleChannelEvents: onMessageUpdated', message);
          messagesDispatcher({
            type: ON_MESSAGE_UPDATED,
            payload: {
              channel,
              message
            }
          });
        },
        onThreadInfoUpdated: (channel, threadInfoUpdateEvent) => {
          logger.info('Channel | useHandleChannelEvents: onThreadInfoUpdated', {
            channel,
            threadInfoUpdateEvent
          });
          messagesDispatcher({
            type: ON_MESSAGE_THREAD_INFO_UPDATED,
            payload: {
              channel,
              event: threadInfoUpdateEvent
            }
          });
        },
        onMessageDeleted: (channel, messageId) => {
          logger.info('Channel | useHandleChannelEvents: onMessageDeleted', {
            channel,
            messageId
          });
          setQuoteMessage(null);
          messagesDispatcher({
            type: ON_MESSAGE_DELETED,
            payload: messageId
          });
        },
        onReactionUpdated: (channel, reactionEvent) => {
          logger.info('Channel | useHandleChannelEvents: onReactionUpdated', {
            channel,
            reactionEvent
          });
          messagesDispatcher({
            type: ON_REACTION_UPDATED,
            payload: reactionEvent
          });
        },
        onChannelChanged: channel => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onChannelChanged', channel);
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onChannelFrozen: channel => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onChannelFrozen', channel);
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onChannelUnfrozen: channel => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onChannelUnFrozen', channel);
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onUserMuted: (channel, user) => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onUserMuted', {
              channel,
              user
            });
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onUserUnmuted: (channel, user) => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onUserUnmuted', {
              channel,
              user
            });
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onUserBanned: (channel, user) => {
          var _sdk$currentUser;
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl) && (user === null || user === void 0 ? void 0 : user.userId) === (sdk === null || sdk === void 0 ? void 0 : (_sdk$currentUser = sdk.currentUser) === null || _sdk$currentUser === void 0 ? void 0 : _sdk$currentUser.userId)) {
            logger.info('Channel | useHandleChannelEvents: onUserBanned', {
              channel,
              user
            });
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: null
            });
          }
        },
        onOperatorUpdated: (channel, users) => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onOperatorUpdated', {
              channel,
              users
            });
            messagesDispatcher({
              type: utils_b7161189_SET_CURRENT_CHANNEL,
              payload: channel
            });
          }
        },
        onUserLeft: (channel, user) => {
          if (compareIds(channel === null || channel === void 0 ? void 0 : channel.url, channelUrl)) {
            logger.info('Channel | useHandleChannelEvents: onUserLeft', {
              channel,
              user
            });
            if ((user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
              messagesDispatcher({
                type: utils_b7161189_SET_CURRENT_CHANNEL,
                payload: null
              });
            }
          }
        }
      };
      logger.info('Channel | useHandleChannelEvents: Setup event handler', {
        channelHandlerId,
        channelHandler
      });
      // Add this group channel handler to the Sendbird chat instance
      (_sdk$groupChannel = sdk.groupChannel) === null || _sdk$groupChannel === void 0 ? void 0 : _sdk$groupChannel.addGroupChannelHandler(channelHandlerId, new groupChannel_We(channelHandler));
    }
    return () => {
      var _sdk$groupChannel2;
      if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel2 = sdk.groupChannel) !== null && _sdk$groupChannel2 !== void 0 && _sdk$groupChannel2.removeGroupChannelHandler) {
        logger.info('Channel | useHandleChannelEvents: Removing message reciver handler', channelHandlerId);
        sdk.groupChannel.removeGroupChannelHandler(channelHandlerId);
      } else if (sdk !== null && sdk !== void 0 && sdk.groupChannel) {
        logger.error('Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler');
      }
    };
  }, [currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url, sdkInit]);
}

function useSetChannel(_ref, _ref2) {
  let {
    channelUrl,
    sdkInit,
    disableMarkAsRead
  } = _ref;
  let {
    messagesDispatcher,
    sdk,
    logger,
    markAsReadScheduler
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (channelUrl && sdkInit && sdk && sdk.groupChannel) {
      logger.info('Channel | useSetChannel fetching channel', channelUrl);
      sdk.groupChannel.getChannel(channelUrl).then(groupChannel => {
        logger.info('Channel | useSetChannel fetched channel', groupChannel);
        messagesDispatcher({
          type: utils_b7161189_SET_CURRENT_CHANNEL,
          payload: groupChannel
        });
        logger.info('Channel: Mark as read', groupChannel);
        if (!disableMarkAsRead) {
          markAsReadScheduler.push(groupChannel);
        }
      }).catch(e => {
        logger.warning('Channel | useSetChannel fetch channel failed', {
          channelUrl,
          e
        });
        messagesDispatcher({
          type: SET_CHANNEL_INVALID
        });
      });
      sdk.getAllEmoji().then(emojiContainer_ => {
        logger.info('Channel: Getting emojis success', emojiContainer_);
        messagesDispatcher({
          type: SET_EMOJI_CONTAINER,
          payload: emojiContainer_
        });
      }).catch(err => {
        logger.error('Channel: Getting emojis failed', err);
      });
    }
  }, [channelUrl, sdkInit]);
}

function useInitialMessagesFetch(_ref, _ref2) {
  let {
    currentGroupChannel,
    userFilledMessageListQuery,
    initialTimeStamp,
    replyType
  } = _ref;
  let {
    logger,
    scrollRef,
    messagesDispatcher
  } = _ref2;
  const channelUrl = currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    logger.info('Channel useInitialMessagesFetch: Setup started', currentGroupChannel);
    messagesDispatcher({
      type: RESET_MESSAGES,
      payload: null
    });
    if (currentGroupChannel && currentGroupChannel !== null && currentGroupChannel !== void 0 && currentGroupChannel.getMessagesByTimestamp) {
      const messageListParams = {};
      messageListParams.prevResultSize = PREV_RESULT_SIZE;
      if (initialTimeStamp) {
        messageListParams.nextResultSize = NEXT_RESULT_SIZE;
      }
      messageListParams.isInclusive = true;
      messageListParams.includeReactions = true;
      messageListParams.includeMetaArray = true;
      if (replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD')) {
        messageListParams.includeThreadInfo = true;
        messageListParams.includeParentMessageInfo = true;
        messageListParams.replyType = _bundle_a5600e6c["wb" /* ao */].ONLY_REPLY_TO_CHANNEL;
      }
      if (userFilledMessageListQuery) {
        Object.keys(userFilledMessageListQuery).forEach(key => {
          messageListParams[key] = userFilledMessageListQuery[key];
        });
      }
      if (replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD') || userFilledMessageListQuery) {
        logger.info('Channel useInitialMessagesFetch: Setup messageListParams', messageListParams);
        messagesDispatcher({
          type: MESSAGE_LIST_PARAMS_CHANGED,
          payload: messageListParams
        });
      }
      logger.info('Channel: Fetching messages', {
        currentGroupChannel,
        userFilledMessageListQuery
      });
      messagesDispatcher({
        type: FETCH_INITIAL_MESSAGES_START,
        payload: null
      });
      currentGroupChannel.getMessagesByTimestamp(initialTimeStamp || new Date().getTime(), messageListParams).then(messages => {
        messagesDispatcher({
          type: FETCH_INITIAL_MESSAGES_SUCCESS,
          payload: {
            currentGroupChannel,
            messages
          }
        });
      }).catch(error => {
        logger.error('Channel: Fetching messages failed', error);
        messagesDispatcher({
          type: FETCH_INITIAL_MESSAGES_FAILURE,
          payload: {
            currentGroupChannel
          }
        });
      }).finally(() => {
        if (!initialTimeStamp) {
          setTimeout(() => scrollIntoLast(0, scrollRef));
        } else {
          setTimeout(() => {
            scrollToRenderedMessage(scrollRef, initialTimeStamp);
          }, 500);
        }
      });
    }
  }, [channelUrl, userFilledMessageListQuery, initialTimeStamp]);
  /**
   * Note - useEffect(() => {}, [currentGroupChannel])
   * was buggy, that is why we did
   * const channelUrl = currentGroupChannel && currentGroupChannel.url;
   * useEffect(() => {}, [channelUrl])
   * Again, this hook is supposed to execute when currentGroupChannel changes
   * The 'channelUrl' here is not the same memory reference from Conversation.props
   */
}

function useReconnectOnIdle(isOnline, currentGroupChannel) {
  let reconnectOnIdle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  const [isTabHidden, setIsTabHidden] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const wasOffline = !isOnline;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const handleVisibilityChange = () => {
      if (reconnectOnIdle) {
        setIsTabHidden(document.hidden);
      }
    };
    document.addEventListener('visibilitychange', handleVisibilityChange);
    return () => {
      document.removeEventListener('visibilitychange', handleVisibilityChange);
    };
  }, [reconnectOnIdle, document.hidden]);
  const shouldReconnect = wasOffline && (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url) != null && !isTabHidden;
  return {
    shouldReconnect
  };
}

function useHandleReconnect(_ref, _ref2) {
  let {
    isOnline,
    replyType,
    disableMarkAsRead,
    reconnectOnIdle
  } = _ref;
  let {
    logger,
    sdk,
    scrollRef,
    currentGroupChannel,
    messagesDispatcher,
    markAsReadScheduler,
    userFilledMessageListQuery
  } = _ref2;
  const {
    shouldReconnect
  } = useReconnectOnIdle(isOnline, currentGroupChannel, reconnectOnIdle);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    return () => {
      // state changed from offline to online AND tab is visible
      if (shouldReconnect) {
        var _sdk$appInfo, _sdk$groupChannel;
        logger.info('Refreshing conversation state');
        const isReactionEnabled = (sdk === null || sdk === void 0 ? void 0 : (_sdk$appInfo = sdk.appInfo) === null || _sdk$appInfo === void 0 ? void 0 : _sdk$appInfo.useReaction) || false;
        const messageListParams = {
          prevResultSize: PREV_RESULT_SIZE,
          isInclusive: true,
          includeReactions: isReactionEnabled,
          nextResultSize: NEXT_RESULT_SIZE
        };
        if (replyType && replyType === 'QUOTE_REPLY') {
          messageListParams.includeThreadInfo = true;
          messageListParams.includeParentMessageInfo = true;
          messageListParams.replyType = _bundle_a5600e6c["wb" /* ao */].ONLY_REPLY_TO_CHANNEL;
        }
        if (userFilledMessageListQuery) {
          Object.keys(userFilledMessageListQuery).forEach(key => {
            messageListParams[key] = userFilledMessageListQuery[key];
          });
        }
        logger.info('Channel: Fetching messages', {
          currentGroupChannel,
          userFilledMessageListQuery
        });
        messagesDispatcher({
          type: FETCH_INITIAL_MESSAGES_START,
          payload: null
        });
        sdk === null || sdk === void 0 ? void 0 : (_sdk$groupChannel = sdk.groupChannel) === null || _sdk$groupChannel === void 0 ? void 0 : _sdk$groupChannel.getChannel(currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url).then(groupChannel => {
          const lastMessageTime = new Date().getTime();
          groupChannel.getMessagesByTimestamp(lastMessageTime, messageListParams).then(messages => {
            messagesDispatcher({
              type: FETCH_INITIAL_MESSAGES_SUCCESS,
              payload: {
                currentGroupChannel,
                messages
              }
            });
            setTimeout(() => scrollIntoLast(0, scrollRef));
          }).catch(error => {
            logger.error('Channel: Fetching messages failed', error);
            messagesDispatcher({
              type: FETCH_INITIAL_MESSAGES_FAILURE,
              payload: {
                currentGroupChannel
              }
            });
          });
          if (!disableMarkAsRead) {
            markAsReadScheduler.push(currentGroupChannel);
          }
        });
      }
    };
  }, [shouldReconnect, replyType]);
}

function useScrollCallback(_ref, _ref2) {
  let {
    currentGroupChannel,
    oldestMessageTimeStamp,
    userFilledMessageListQuery,
    replyType
  } = _ref;
  let {
    hasMorePrev,
    logger,
    messagesDispatcher,
    sdk
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(cb => {
    if (!hasMorePrev) {
      return;
    }
    const {
      appInfo = {}
    } = sdk;
    const isReactionEnabled = appInfo.useReaction || false;
    const messageListParams = {
      prevResultSize: PREV_RESULT_SIZE,
      isInclusive: true,
      includeReactions: isReactionEnabled
    };
    messageListParams.includeMetaArray = true;
    if (replyType === 'QUOTE_REPLY' || replyType === 'THREAD') {
      messageListParams.includeThreadInfo = true;
      messageListParams.includeParentMessageInfo = true;
      messageListParams.replyType = _bundle_a5600e6c["wb" /* ao */].ONLY_REPLY_TO_CHANNEL;
    }
    if (userFilledMessageListQuery) {
      Object.keys(userFilledMessageListQuery).forEach(key => {
        messageListParams[key] = userFilledMessageListQuery[key];
      });
    }
    logger.info('Channel: Fetching messages', {
      currentGroupChannel,
      userFilledMessageListQuery
    });
    currentGroupChannel.getMessagesByTimestamp(oldestMessageTimeStamp || new Date().getTime(), messageListParams).then(messages => {
      messagesDispatcher({
        type: FETCH_PREV_MESSAGES_SUCCESS,
        payload: {
          currentGroupChannel,
          messages
        }
      });
      cb([messages, null]);
    }).catch(error => {
      logger.error('Channel: Fetching messages failed', error);
      messagesDispatcher({
        type: FETCH_PREV_MESSAGES_FAILURE,
        payload: {
          currentGroupChannel
        }
      });
      cb([null, error]);
    });
  }, [currentGroupChannel, oldestMessageTimeStamp, replyType]);
}

function useScrollDownCallback(_ref, _ref2) {
  let {
    currentGroupChannel,
    latestMessageTimeStamp,
    userFilledMessageListQuery,
    hasMoreNext,
    replyType
  } = _ref;
  let {
    logger,
    messagesDispatcher,
    sdk
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(cb => {
    if (!hasMoreNext) {
      return;
    }
    const {
      appInfo = {}
    } = sdk;
    const isReactionEnabled = appInfo.useReaction || false;
    const messageListParams = {
      nextResultSize: NEXT_RESULT_SIZE,
      isInclusive: true,
      includeReactions: isReactionEnabled
    };
    messageListParams.includeMetaArray = true;
    if (replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD')) {
      messageListParams.includeThreadInfo = true;
      messageListParams.includeParentMessageInfo = true;
      messageListParams.replyType = _bundle_a5600e6c["wb" /* ao */].ONLY_REPLY_TO_CHANNEL;
    }
    if (userFilledMessageListQuery) {
      Object.keys(userFilledMessageListQuery).forEach(key => {
        messageListParams[key] = userFilledMessageListQuery[key];
      });
    }
    logger.info('Channel: Fetching later messages', {
      currentGroupChannel,
      userFilledMessageListQuery
    });
    currentGroupChannel.getMessagesByTimestamp(latestMessageTimeStamp || new Date().getTime(), messageListParams).then(messages => {
      messagesDispatcher({
        type: FETCH_NEXT_MESSAGES_SUCCESS,
        payload: {
          currentGroupChannel,
          messages
        }
      });
      cb([messages, null]);
    }).catch(error => {
      logger.error('Channel: Fetching later messages failed', error);
      messagesDispatcher({
        type: FETCH_NEXT_MESSAGES_FAILURE,
        payload: {
          currentGroupChannel
        }
      });
      cb([null, error]);
    });
  }, [currentGroupChannel, latestMessageTimeStamp, hasMoreNext, replyType]);
}

function useDeleteMessageCallback(_ref, _ref2) {
  let {
    currentGroupChannel,
    messagesDispatcher
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(message => {
    logger.info('Channel | useDeleteMessageCallback: Deleting message', message);
    const {
      requestState
    } = message;
    return new Promise((resolve, reject) => {
      logger.info('Channel | useDeleteMessageCallback: Deleting message requestState:', requestState);
      // Message is only on local
      if (requestState === 'failed' || requestState === 'pending') {
        logger.info('Channel | useDeleteMessageCallback: Deleted message from local:', message);
        messagesDispatcher({
          type: ON_MESSAGE_DELETED_BY_REQ_ID,
          payload: message.reqId
        });
        resolve(message);
      }
      logger.info('Channel | useDeleteMessageCallback: Deleting message from remote:', requestState);
      currentGroupChannel.deleteMessage(message).then(() => {
        logger.info('Channel | useDeleteMessageCallback: Deleting message success!', message);
        messagesDispatcher({
          type: ON_MESSAGE_DELETED,
          payload: message.messageId
        });
        resolve(message);
      }).catch(err => {
        logger.warning('Channel | useDeleteMessageCallback: Deleting message failed!', err);
        reject(err);
      });
    });
  }, [currentGroupChannel, messagesDispatcher]);
}

function useUpdateMessageCallback(_ref, _ref2) {
  let {
    currentGroupChannel,
    messagesDispatcher,
    onBeforeUpdateUserMessage,
    isMentionEnabled
  } = _ref;
  let {
    logger,
    pubSub
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((props, callback) => {
    const {
      messageId,
      message,
      mentionedUsers,
      mentionTemplate
    } = props;
    const createParamsDefault = () => {
      const params = {};
      params.message = message;
      if (isMentionEnabled && (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) > 0) {
        params.mentionedUsers = mentionedUsers;
      }
      if (isMentionEnabled && mentionTemplate) {
        params.mentionedMessageTemplate = mentionTemplate;
      } else {
        params.mentionedMessageTemplate = message;
      }
      return params;
    };
    const createCustomPrams = onBeforeUpdateUserMessage && typeof onBeforeUpdateUserMessage === 'function';
    if (createCustomPrams) {
      logger.info('Channel: creating params using onBeforeUpdateUserMessage', onBeforeUpdateUserMessage);
    }
    const params = onBeforeUpdateUserMessage ? onBeforeUpdateUserMessage(message) : createParamsDefault();
    logger.info('Channel: Updating message!', params);
    currentGroupChannel.updateUserMessage(messageId, params).then((msg, err) => {
      if (callback) {
        callback(err, msg);
      }
      logger.info('Channel: Updating message success!', msg);
      messagesDispatcher({
        type: ON_MESSAGE_UPDATED,
        payload: {
          channel: currentGroupChannel,
          message: msg
        }
      });
      pubSub.publish(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, {
        message: msg,
        channel: currentGroupChannel
      });
    });
  }, [currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.url, messagesDispatcher, onBeforeUpdateUserMessage]);
}

function useResendMessageCallback(_ref, _ref2) {
  let {
    currentGroupChannel,
    messagesDispatcher
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(failedMessage => {
    logger.info('Channel: Resending message has started', failedMessage);
    const {
      messageType,
      file
    } = failedMessage;
    if (failedMessage !== null && failedMessage !== void 0 && failedMessage.isResendable) {
      // Move the logic setting sendingStatus to pending into the reducer
      // eslint-disable-next-line no-param-reassign
      failedMessage.requestState = 'pending';
      // eslint-disable-next-line no-param-reassign
      failedMessage.sendingStatus = 'pending';
      messagesDispatcher({
        type: RESEND_MESSAGE_START,
        payload: failedMessage
      });

      // userMessage
      if (messageType === 'user') {
        currentGroupChannel.resendUserMessage(failedMessage).then(message => {
          logger.info('Channel: Resending message success!', message);
          messagesDispatcher({
            type: SEND_MESSAGE_SUCESS,
            payload: message
          });
        }).catch(e => {
          logger.warning('Channel: Resending message failed!', e);
          // eslint-disable-next-line no-param-reassign
          failedMessage.requestState = 'failed';
          // eslint-disable-next-line no-param-reassign
          failedMessage.sendingStatus = 'failed';
          messagesDispatcher({
            type: SEND_MESSAGE_FAILURE,
            payload: failedMessage
          });
        });

        // eslint-disable-next-line no-param-reassign
        failedMessage.requestState = 'pending';
        // eslint-disable-next-line no-param-reassign
        failedMessage.sendingStatus = 'pending';
        messagesDispatcher({
          type: RESEND_MESSAGE_START,
          payload: failedMessage
        });
        return;
      }
      if (messageType === 'file') {
        currentGroupChannel.resendFileMessage(failedMessage, file).then(message => {
          logger.info('Channel: Resending file message success!', message);
          messagesDispatcher({
            type: SEND_MESSAGE_SUCESS,
            payload: message
          });
        }).catch(e => {
          logger.warning('Channel: Resending file message failed!', e);
          // eslint-disable-next-line no-param-reassign
          failedMessage.requestState = 'failed';
          // eslint-disable-next-line no-param-reassign
          failedMessage.sendingStatus = 'failed';
          messagesDispatcher({
            type: SEND_MESSAGE_FAILURE,
            payload: failedMessage
          });
        });

        // eslint-disable-next-line no-param-reassign
        failedMessage.requestState = 'pending';
        // eslint-disable-next-line no-param-reassign
        failedMessage.sendingStatus = 'pending';
        messagesDispatcher({
          type: RESEND_MESSAGE_START,
          payload: failedMessage
        });
      }
    } else {
      // to alert user on console
      // eslint-disable-next-line no-console
      console.error('Message is not resendable');
      logger.warning('Message is not resendable', failedMessage);
    }
  }, [currentGroupChannel, messagesDispatcher]);
}

function useSendMessageCallback(_ref, _ref2) {
  let {
    isMentionEnabled,
    currentGroupChannel,
    onBeforeSendUserMessage
  } = _ref;
  let {
    logger,
    pubSub,
    scrollRef,
    messagesDispatcher
  } = _ref2;
  const messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(props => {
    const {
      quoteMessage = null,
      message,
      mentionTemplate,
      // mentionedUserIds,
      mentionedUsers
    } = props;
    const createParamsDefault = () => {
      const params = {};
      params.message = message;
      // if (isMentionEnabled && mentionedUserIds?.length > 0) {
      if (isMentionEnabled && (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) > 0) {
        // params.mentionedUserIds = mentionedUserIds;
        params.mentionedUsers = mentionedUsers;
      }
      // if (isMentionEnabled && mentionTemplate && mentionedUserIds?.length > 0) {
      if (isMentionEnabled && mentionTemplate && (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) > 0) {
        params.mentionedMessageTemplate = mentionTemplate;
      }
      if (quoteMessage) {
        params.isReplyToChannel = true;
        params.parentMessageId = quoteMessage.messageId;
      }
      return params;
    };
    const createCustomPrams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';
    if (createCustomPrams) {
      logger.info('Channel: creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);
    }
    const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(message, quoteMessage) : createParamsDefault();
    logger.info('Channel: Sending message has started', params);
    currentGroupChannel.sendUserMessage(params).onPending(pendingMsg => {
      pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_START, {
        /* pubSub is used instead of messagesDispatcher
          to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
        message: pendingMsg,
        channel: currentGroupChannel
      });
      setTimeout(() => scrollIntoLast(0, scrollRef));
    }).onFailed((err, msg) => {
      logger.warning('Channel: Sending message failed!', {
        message: msg,
        error: err
      });
      messagesDispatcher({
        type: SEND_MESSAGE_FAILURE,
        payload: msg
      });
    }).onSucceeded(msg => {
      logger.info('Channel: Sending message success!', msg);
      messagesDispatcher({
        type: SEND_MESSAGE_SUCESS,
        payload: msg
      });
    });
  }, [currentGroupChannel, onBeforeSendUserMessage]);
  return [messageInputRef, sendMessage];
}

function useSendFileMessageCallback(_ref, _ref2) {
  let {
    currentGroupChannel,
    onBeforeSendFileMessage,
    imageCompression = {}
  } = _ref;
  let {
    logger,
    pubSub,
    scrollRef,
    messagesDispatcher
  } = _ref2;
  const sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (file) {
    let quoteMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    const {
      compressionRate,
      resizingWidth,
      resizingHeight
    } = imageCompression;
    const createCustomParams = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';
    const compressibleFileType = file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg';
    const compressibleRatio = compressionRate > 0 && compressionRate < 1;
    // pxToNumber returns null if values are invalid
    const compressibleDiamensions = utils_b7161189_pxToNumber(resizingWidth) || utils_b7161189_pxToNumber(resizingHeight);
    const canCompressImage = compressibleFileType && (compressibleRatio || compressibleDiamensions);
    const createParamsDefault = file_ => {
      const params = {};
      params.file = file_;
      if (quoteMessage) {
        params.isReplyToChannel = true;
        params.parentMessageId = quoteMessage.messageId;
      }
      return params;
    };
    if (canCompressImage) {
      // Using image compression
      try {
        const image = document.createElement('img');
        image.src = URL.createObjectURL(file);
        image.onload = () => {
          URL.revokeObjectURL(image.src);
          const canvas = document.createElement('canvas');
          const imageWdith = image.naturalWidth || image.width;
          const imageHeight = image.naturalHeight || image.height;
          let targetWidth = utils_b7161189_pxToNumber(resizingWidth) || imageWdith;
          let targetHeight = utils_b7161189_pxToNumber(resizingHeight) || imageHeight;

          // In canvas.toBlob(callback, mimeType, qualityArgument)
          // qualityArgument doesnt work
          // so in case compressibleDiamensions are not present, we use ratio
          if (file.type === 'image/png' && !compressibleDiamensions) {
            targetWidth *= compressionRate;
            targetHeight *= compressionRate;
          }
          canvas.width = targetWidth;
          canvas.height = targetHeight;
          const context = canvas.getContext('2d');
          context.drawImage(image, 0, 0, targetWidth, targetHeight);
          context.canvas.toBlob(newImageBlob => {
            const compressedFile = new File([newImageBlob], file.name, {
              type: file.type
            });
            if (createCustomParams) {
              logger.info('Channel: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
            }
            const params = createCustomParams ? onBeforeSendFileMessage(compressedFile, quoteMessage) : createParamsDefault(compressedFile);
            logger.info('Channel: Uploading file message start!', params);
            currentGroupChannel.sendFileMessage(params).onPending(pendingMessage => {
              pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_START, {
                /* pubSub is used instead of messagesDispatcher
                  to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
                message: _objectSpread2(_objectSpread2({}, pendingMessage), {}, {
                  url: URL.createObjectURL(compressedFile),
                  // pending thumbnail message seems to be failed
                  requestState: 'pending'
                }),
                channel: currentGroupChannel
              });
              setTimeout(() => scrollIntoLast(0, scrollRef), 1000);
            }).onFailed((err, failedMessage) => {
              logger.error('Channel: Sending file message failed!', {
                failedMessage,
                err
              });
              // eslint-disable-next-line no-param-reassign
              failedMessage.localUrl = URL.createObjectURL(compressedFile);
              // eslint-disable-next-line no-param-reassign
              failedMessage.file = compressedFile;
              messagesDispatcher({
                type: SEND_MESSAGE_FAILURE,
                payload: failedMessage
              });
            }).onSucceeded(succeededMessage => {
              logger.info('Channel: Sending file message success!', succeededMessage);
              messagesDispatcher({
                type: SEND_MESSAGE_SUCESS,
                payload: succeededMessage
              });
            });
          }, file.type, compressionRate);
        };
      } catch (error) {
        logger.error('Channel: Sending file message failed!', error);
      }
    } else {
      // Not using image compression
      if (createCustomParams) {
        logger.info('Channel: creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
      }
      const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(file, quoteMessage) : createParamsDefault(file);
      logger.info('Channel: Uploading file message start!', params);
      currentGroupChannel.sendFileMessage(params).onPending(pendingMsg => {
        pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_START, {
          /* pubSub is used instead of messagesDispatcher
            to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
          message: _objectSpread2(_objectSpread2({}, pendingMsg), {}, {
            url: URL.createObjectURL(file),
            // pending thumbnail message seems to be failed
            requestState: 'pending'
          }),
          channel: currentGroupChannel
        });
        setTimeout(() => scrollIntoLast(0, scrollRef), 1000);
      }).onFailed((error, message) => {
        logger.error('Channel: Sending file message failed!', {
          message,
          error
        });
        // eslint-disable-next-line no-param-reassign
        message.localUrl = URL.createObjectURL(file);
        // eslint-disable-next-line no-param-reassign
        message.file = file;
        messagesDispatcher({
          type: SEND_MESSAGE_FAILURE,
          payload: message
        });
      }).onSucceeded(message => {
        logger.info('Channel: Sending message success!', message);
        messagesDispatcher({
          type: SEND_MESSAGE_SUCESS,
          payload: message
        });
      });
    }
  }, [currentGroupChannel, onBeforeSendFileMessage, imageCompression]);
  return [sendMessage];
}

function useToggleReactionCallback(_ref, _ref2) {
  let {
    currentGroupChannel
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((message, key, isReacted) => {
    if (isReacted) {
      currentGroupChannel.deleteReaction(message, key).then(res => {
        logger.info('Delete reaction success', res);
      }).catch(err => {
        logger.warning('Delete reaction failed', err);
      });
      return;
    }
    currentGroupChannel.addReaction(message, key).then(res => {
      logger.info('Add reaction success', res);
    }).catch(err => {
      logger.warning('Add reaction failed', err);
    });
  }, [currentGroupChannel]);
}

// To prevent multiple clicks on the message in the channel while scrolling
function deactivateClick(scrollRef) {
  const element = scrollRef.current;
  const parentNode = element === null || element === void 0 ? void 0 : element.parentNode;
  if (element && parentNode) {
    element.style.pointerEvents = 'none';
    parentNode.style.cursor = 'wait';
  }
}
function activateClick(scrollRef) {
  const element = scrollRef.current;
  const parentNode = element === null || element === void 0 ? void 0 : element.parentNode;
  if (element && parentNode) {
    element.style.pointerEvents = 'auto';
    parentNode.style.cursor = 'auto';
  }
}
function useScrollToMessage(_ref, _ref2) {
  let {
    setInitialTimeStamp,
    setAnimatedMessageId,
    allMessages,
    scrollRef
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((createdAt, messageId) => {
    const isPresent = allMessages.find(m => m.messageId === messageId);
    setAnimatedMessageId(null);
    setTimeout(() => {
      try {
        logger.info('Channel: scroll to message - disabling mouse events');
        deactivateClick(scrollRef);
        if (isPresent) {
          logger.info('Channel: scroll to message - message is present');
          setAnimatedMessageId(messageId);
          scrollToRenderedMessage(scrollRef, createdAt);
        } else {
          logger.info('Channel: scroll to message - fetching older messages');
          setInitialTimeStamp(null);
          setInitialTimeStamp(createdAt);
          setAnimatedMessageId(messageId);
        }
      } finally {
        logger.info('Channel: scroll to message - enabled mouse events');
        activateClick(scrollRef);
      }
    });
  }, [setInitialTimeStamp, setAnimatedMessageId, allMessages]);
}

const useSendVoiceMessageCallback = (_ref, _ref2) => {
  let {
    currentGroupChannel,
    onBeforeSendVoiceMessage
  } = _ref;
  let {
    logger,
    pubSub,
    scrollRef,
    messagesDispatcher
  } = _ref2;
  const sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((file, duration, quoteMessage) => {
    const messageParams = onBeforeSendVoiceMessage && typeof onBeforeSendVoiceMessage === 'function' ? onBeforeSendVoiceMessage(file, quoteMessage) : {
      file,
      fileName: consts_397a92f1["g" /* b */],
      mimeType: consts_397a92f1["h" /* c */],
      metaArrays: [new _bundle_1edafb8c_Ce({
        key: consts_397a92f1["c" /* M */],
        value: [`${duration}`]
      }), new _bundle_1edafb8c_Ce({
        key: consts_397a92f1["i" /* d */],
        value: [consts_397a92f1["j" /* e */]]
      })]
    };
    if (quoteMessage) {
      messageParams.isReplyToChannel = true;
      messageParams.parentMessageId = quoteMessage.messageId;
    }
    logger.info('Channel: Start sending voice message', messageParams);
    currentGroupChannel.sendFileMessage(messageParams).onPending(pendingMessage => {
      pubSub.publish(PUBSUB_TOPICS.SEND_MESSAGE_START, {
        /* pubSub is used instead of messagesDispatcher
          to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
        message: pendingMessage,
        channel: currentGroupChannel
      });
      setTimeout(() => scrollIntoLast(0, scrollRef), 1000);
    }).onFailed((err, failedMessage) => {
      logger.error('Channel: Sending voice message failed!', {
        failedMessage,
        err
      });
      messagesDispatcher({
        type: SEND_MESSAGE_FAILURE,
        payload: failedMessage
      });
    }).onSucceeded(succeededMessage => {
      logger.info('Channel: Sending voice message success!', succeededMessage);
      messagesDispatcher({
        type: SEND_MESSAGE_SUCESS,
        payload: succeededMessage
      });
    });
  }, [currentGroupChannel, onBeforeSendVoiceMessage]);
  return [sendMessage];
};

const ChannelContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const ChannelProvider = props => {
  var _globalStore$stores, _globalStore$stores$s, _globalStore$stores2, _globalStore$stores2$, _ref, _props$disableUserPro;
  const {
    channelUrl,
    children,
    isReactionEnabled,
    isMessageGroupingEnabled = true,
    showSearchIcon,
    animatedMessage,
    highlightedMessage,
    startingPoint,
    onBeforeSendUserMessage,
    onBeforeSendFileMessage,
    onBeforeUpdateUserMessage,
    onBeforeSendVoiceMessage,
    onChatHeaderActionClick,
    onSearchClick,
    onBackClick,
    replyType: channelReplyType,
    threadReplySelectType,
    queries,
    filterMessageList,
    disableMarkAsRead = false,
    onReplyInThread,
    onQuoteMessageClick,
    onMessageAnimated,
    onMessageHighlighted,
    scrollBehavior = 'auto',
    reconnectOnIdle = true
  } = props;
  const globalStore = useSendbirdStateContext();
  const {
    config
  } = globalStore;
  const replyType = channelReplyType !== null && channelReplyType !== void 0 ? channelReplyType : config.replyType;
  const {
    pubSub,
    logger,
    userId,
    isOnline,
    imageCompression,
    isMentionEnabled,
    isVoiceMessageEnabled,
    onUserProfileMessage,
    markAsReadScheduler,
    groupChannel
  } = config;
  const sdk = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$s = _globalStore$stores.sdkStore) === null || _globalStore$stores$s === void 0 ? void 0 : _globalStore$stores$s.sdk;
  const sdkInit = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores2 = globalStore.stores) === null || _globalStore$stores2 === void 0 ? void 0 : (_globalStore$stores2$ = _globalStore$stores2.sdkStore) === null || _globalStore$stores2$ === void 0 ? void 0 : _globalStore$stores2$.initialized;
  const globalConfigs = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config;
  const [initialTimeStamp, setInitialTimeStamp] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(startingPoint);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setInitialTimeStamp(startingPoint);
  }, [startingPoint, channelUrl]);
  const [animatedMessageId, setAnimatedMessageId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  const [highLightedMessageId, setHighLightedMessageId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(highlightedMessage);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setHighLightedMessageId(highlightedMessage);
  }, [highlightedMessage]);
  const userFilledMessageListQuery = queries === null || queries === void 0 ? void 0 : queries.messageListParams;
  const [quoteMessage, setQuoteMessage] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [messagesStore, messagesDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(ChannelProvider_d6dedff9_reducer, messagesInitialState);
  const scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    allMessages,
    loading,
    initialized,
    unreadSince,
    isInvalid,
    currentGroupChannel,
    hasMorePrev,
    oldestMessageTimeStamp,
    hasMoreNext,
    latestMessageTimeStamp,
    emojiContainer,
    readStatus
  } = messagesStore;
  const isSuper = (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.isSuper) || false;
  const isBroadcast = (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.isBroadcast) || false;
  const usingReaction = getIsReactionEnabled({
    isBroadcast,
    isSuper,
    globalLevel: config === null || config === void 0 ? void 0 : config.isReactionEnabled,
    moduleLevel: isReactionEnabled
  });
  const emojiAllMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => usingReaction ? getAllEmojisMapFromEmojiContainer(emojiContainer) : new Map(), [emojiContainer]);
  const nicknamesMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => usingReaction && currentGroupChannel ? getNicknamesMapFromMembers(currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.members) : new Map(), [currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.members]);

  // Animate message
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (animatedMessage) {
      setAnimatedMessageId(animatedMessage);
    }
  }, [animatedMessage]);

  // Scrollup is default scroll for channel
  const onScrollCallback = useScrollCallback({
    currentGroupChannel,
    oldestMessageTimeStamp,
    userFilledMessageListQuery,
    replyType,
    isVoiceMessageEnabled
  }, {
    hasMorePrev,
    logger,
    messagesDispatcher,
    sdk
  });
  const scrollToMessage = useScrollToMessage({
    setInitialTimeStamp,
    setAnimatedMessageId,
    allMessages,
    scrollRef
  }, {
    logger
  });

  // onScrollDownCallback is added for navigation to different timestamps on messageSearch
  // hasMorePrev, onScrollCallback -> scroll up(default behavior)
  // hasMoreNext, onScrollDownCallback -> scroll down
  const onScrollDownCallback = useScrollDownCallback({
    currentGroupChannel,
    latestMessageTimeStamp,
    userFilledMessageListQuery,
    hasMoreNext,
    replyType,
    isVoiceMessageEnabled
  }, {
    logger,
    messagesDispatcher,
    sdk
  });
  const toggleReaction = useToggleReactionCallback({
    currentGroupChannel
  }, {
    logger
  });

  // to create message-datasource
  // this hook sets currentGroupChannel asynchronously
  useSetChannel({
    channelUrl,
    sdkInit,
    disableMarkAsRead
  }, {
    messagesDispatcher,
    sdk,
    logger,
    markAsReadScheduler
  });

  // to set quote message as null
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setQuoteMessage(null);
  }, [channelUrl]);

  // Hook to handle ChannelEvents and send values to useReducer using messagesDispatcher
  useHandleChannelEvents({
    currentGroupChannel,
    sdkInit,
    currentUserId: userId,
    disableMarkAsRead
  }, {
    messagesDispatcher,
    sdk,
    logger,
    scrollRef,
    setQuoteMessage
  });

  // hook that fetches messages when channel changes
  // to be clear here useGetChannel sets currentGroupChannel
  // and useInitialMessagesFetch executes when currentGroupChannel changes
  // p.s This one executes on initialTimeStamp change too
  useInitialMessagesFetch({
    currentGroupChannel,
    userFilledMessageListQuery,
    initialTimeStamp,
    latestMessageTimeStamp,
    replyType,
    isVoiceMessageEnabled
  }, {
    logger,
    scrollRef,
    messagesDispatcher
  });

  // handles API calls from withSendbird
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const subscriber = utils_b7161189_pubSubHandler({
      channelUrl,
      pubSub,
      dispatcher: messagesDispatcher,
      scrollRef
    });
    return () => {
      utils_b7161189_pubSubHandleRemover(subscriber);
    };
  }, [channelUrl, sdkInit]);

  // handling connection breaks
  useHandleReconnect({
    isOnline,
    replyType,
    disableMarkAsRead,
    reconnectOnIdle
  }, {
    logger,
    sdk,
    scrollRef,
    currentGroupChannel,
    messagesDispatcher,
    userFilledMessageListQuery,
    markAsReadScheduler
  });

  // callbacks for Message CURD actions
  const deleteMessage = useDeleteMessageCallback({
    currentGroupChannel,
    messagesDispatcher
  }, {
    logger
  });
  const updateMessage = useUpdateMessageCallback({
    currentGroupChannel,
    messagesDispatcher,
    onBeforeUpdateUserMessage,
    isMentionEnabled
  }, {
    logger,
    pubSub
  });
  const resendMessage = useResendMessageCallback({
    currentGroupChannel,
    messagesDispatcher
  }, {
    logger
  });
  const [messageInputRef, sendMessage] = useSendMessageCallback({
    currentGroupChannel,
    onBeforeSendUserMessage,
    isMentionEnabled
  }, {
    logger,
    pubSub,
    scrollRef,
    messagesDispatcher
  });
  const [sendFileMessage] = useSendFileMessageCallback({
    currentGroupChannel,
    onBeforeSendFileMessage,
    imageCompression
  }, {
    logger,
    pubSub,
    scrollRef,
    messagesDispatcher
  });
  const [sendVoiceMessage] = useSendVoiceMessageCallback({
    currentGroupChannel,
    onBeforeSendVoiceMessage
  }, {
    logger,
    pubSub,
    scrollRef,
    messagesDispatcher
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelContext.Provider, {
    value: {
      // props
      channelUrl,
      isReactionEnabled: usingReaction,
      isMessageGroupingEnabled,
      showSearchIcon: showSearchIcon !== null && showSearchIcon !== void 0 ? showSearchIcon : globalConfigs.showSearchIcon,
      highlightedMessage,
      startingPoint,
      onBeforeSendUserMessage,
      onBeforeSendFileMessage,
      onBeforeUpdateUserMessage,
      onChatHeaderActionClick,
      onSearchClick,
      onBackClick,
      replyType,
      threadReplySelectType: (_ref = threadReplySelectType !== null && threadReplySelectType !== void 0 ? threadReplySelectType : getCaseResolvedThreadReplySelectType(groupChannel.threadReplySelectType).upperCase) !== null && _ref !== void 0 ? _ref : ThreadReplySelectType.THREAD,
      queries,
      filterMessageList,
      disableMarkAsRead,
      onReplyInThread,
      onQuoteMessageClick,
      onMessageAnimated,
      onMessageHighlighted,
      // messagesStore
      allMessages,
      loading,
      initialized,
      unreadSince,
      isInvalid,
      currentGroupChannel,
      hasMorePrev,
      hasMoreNext,
      oldestMessageTimeStamp,
      latestMessageTimeStamp,
      emojiContainer,
      readStatus,
      // utils
      scrollToMessage,
      quoteMessage,
      setQuoteMessage,
      deleteMessage,
      updateMessage,
      resendMessage,
      messageInputRef,
      sendMessage,
      sendFileMessage,
      sendVoiceMessage,
      initialTimeStamp,
      messageActionTypes: utils_b7161189_messageActionTypes,
      messagesDispatcher,
      setInitialTimeStamp,
      setAnimatedMessageId,
      setHighLightedMessageId,
      animatedMessageId,
      highLightedMessageId,
      nicknamesMap,
      emojiAllMap,
      onScrollCallback,
      onScrollDownCallback,
      scrollRef,
      scrollBehavior,
      toggleReaction
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    disableUserProfile: (_props$disableUserPro = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _props$disableUserPro !== void 0 ? _props$disableUserPro : config === null || config === void 0 ? void 0 : config.disableUserProfile,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    onUserProfileMessage: onUserProfileMessage
  }, children));
};
const useChannelContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ChannelContext);


//# sourceMappingURL=ChannelProvider-d6dedff9.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/TypingIndicator.js
























const TypingIndicatorText = _ref => {
  let {
    members
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  if (!members || members.length === 0) {
    return '';
  }
  if (members && members.length === 1) {
    return `${members[0].nickname} ${stringSet.TYPING_INDICATOR__IS_TYPING}`;
  }
  if (members && members.length === 2) {
    return `${members[0].nickname} ${stringSet.TYPING_INDICATOR__AND} ${members[1].nickname} ${stringSet.TYPING_INDICATOR__ARE_TYPING}`;
  }
  return stringSet.TYPING_INDICATOR__MULTIPLE_TYPING;
};
const TypingIndicator = () => {
  var _globalStore$stores, _globalStore$stores$s, _globalStore$config;
  const {
    channelUrl
  } = useChannelContext();
  const globalStore = useSendbirdStateContext();
  const sb = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$s = _globalStore$stores.sdkStore) === null || _globalStore$stores$s === void 0 ? void 0 : _globalStore$stores$s.sdk;
  const logger = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config = globalStore.config) === null || _globalStore$config === void 0 ? void 0 : _globalStore$config.logger;
  const [handlerId, setHandlerId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(uuidv4());
  const [typingMembers, setTypingMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sb$groupChannel;
    if (sb !== null && sb !== void 0 && (_sb$groupChannel = sb.groupChannel) !== null && _sb$groupChannel !== void 0 && _sb$groupChannel.addGroupChannelHandler) {
      sb.groupChannel.removeGroupChannelHandler(handlerId);
      const newHandlerId = uuidv4();
      const handler = new groupChannel_We({
        onTypingStatusUpdated: groupChannel => {
          // there is a possible warning in here - setState called after unmount
          logger.info('Channel > Typing Indicator: onTypingStatusUpdated', groupChannel);
          if (groupChannel.url === channelUrl) {
            const members = groupChannel.getTypingUsers();
            setTypingMembers(members);
          }
        }
      });
      sb.groupChannel.addGroupChannelHandler(newHandlerId, handler);
      setHandlerId(newHandlerId);
    }
    return () => {
      var _sb$groupChannel2;
      setTypingMembers([]);
      if (sb !== null && sb !== void 0 && (_sb$groupChannel2 = sb.groupChannel) !== null && _sb$groupChannel2 !== void 0 && _sb$groupChannel2.removeGroupChannelHandler) {
        sb.groupChannel.removeGroupChannelHandler(handlerId);
      }
    };
  }, [channelUrl]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-conversation__footer__typing-indicator__text",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorText, {
    members: typingMembers
  }));
};


//# sourceMappingURL=TypingIndicator.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/useLongPress-0189f9c3.js




const DEFAULT_DURATION = 300;
function preventDefault(e) {
  if (!isTouchEvent(e)) {
    return;
  }
  if (e.touches.length < 2 && e.preventDefault) {
    e.preventDefault();
  }
}
function isTouchEvent(e) {
  return e && 'touches' in e;
}
function useLongPress(_ref) {
  let {
    onLongPress,
    onClick
  } = _ref;
  let {
    delay = DEFAULT_DURATION,
    shouldPreventDefault = true,
    shouldStopPropagation = false
  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  const {
    isMobile
  } = useMediaQueryContext();
  const [longPressTriggered, setLongPressTriggered] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [dragTriggered, setDragTriggered] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  // https://www.typescriptlang.org/docs/handbook/utility-types.html#returntypetype
  const timeout = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
  const target = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
  const start = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(e => {
    e.persist();
    const clonedEvent = _objectSpread2({}, e);
    setDragTriggered(false);
    if (shouldStopPropagation) {
      e.stopPropagation();
    }
    if (shouldPreventDefault && e.target) {
      e.target.addEventListener('touchend', preventDefault, {
        passive: false
      });
      target.current = e.target;
    }
    timeout.current = setTimeout(() => {
      onLongPress(clonedEvent);
      setLongPressTriggered(true);
    }, delay);
  }, [onLongPress, delay, shouldPreventDefault, shouldStopPropagation, isMobile]);
  const clear = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(function (e) {
    let shouldTriggerClick = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    let onDrag = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    if (onDrag) {
      setDragTriggered(true);
    } else {
      setDragTriggered(false);
    }
    if (timeout !== null && timeout !== void 0 && timeout.current) {
      clearTimeout(timeout.current);
    }
    if (shouldTriggerClick && !longPressTriggered && !dragTriggered) {
      onClick === null || onClick === void 0 ? void 0 : onClick(e);
    }
    setLongPressTriggered(false);
    if (shouldPreventDefault && target.current) {
      target.current.removeEventListener('touchend', preventDefault);
    }
  }, [shouldPreventDefault, onClick, longPressTriggered, dragTriggered]);
  return {
    onMouseDown: e => start(e),
    onMouseUp: e => clear(e),
    onMouseLeave: e => clear(e, false),
    onTouchStart: e => start(e),
    // setDragTriggered as true on touchmove, so that next onTouchEnd is ignored
    // if we dont do it, onClick?.(e) will be triggred, see inside clear()
    onTouchMove: e => clear(e, false, true),
    onTouchEnd: e => clear(e)
  };
}


//# sourceMappingURL=useLongPress-0189f9c3.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/ChannelPreview.js
















































const ChannelPreview = _ref => {
  var _sbState$stores, _sbState$stores$userS, _sbState$stores$userS2, _sbState$config, _sbState$config2, _channel$lastMessage, _channel$lastMessage2, _channel$lastMessage3, _channel$lastMessage4;
  let {
    channel,
    isActive = false,
    isTyping = false,
    renderChannelAction,
    onLeaveChannel,
    onClick,
    tabIndex
  } = _ref;
  const sbState = useSendbirdStateContext();
  const {
    isTypingIndicatorEnabled = false,
    isMessageReceiptStatusEnabled = false
  } = useChannelListContext();
  const {
    dateLocale,
    stringSet
  } = useLocalization();
  const {
    isMobile
  } = useMediaQueryContext();
  const [showMobileLeave, setShowMobileLeave] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const userId = sbState === null || sbState === void 0 ? void 0 : (_sbState$stores = sbState.stores) === null || _sbState$stores === void 0 ? void 0 : (_sbState$stores$userS = _sbState$stores.userStore) === null || _sbState$stores$userS === void 0 ? void 0 : (_sbState$stores$userS2 = _sbState$stores$userS.user) === null || _sbState$stores$userS2 === void 0 ? void 0 : _sbState$stores$userS2.userId;
  const theme = sbState === null || sbState === void 0 ? void 0 : (_sbState$config = sbState.config) === null || _sbState$config === void 0 ? void 0 : _sbState$config.theme;
  const isMentionEnabled = sbState === null || sbState === void 0 ? void 0 : (_sbState$config2 = sbState.config) === null || _sbState$config2 === void 0 ? void 0 : _sbState$config2.isMentionEnabled;
  const isFrozen = (channel === null || channel === void 0 ? void 0 : channel.isFrozen) || false;
  const isBroadcast = (channel === null || channel === void 0 ? void 0 : channel.isBroadcast) || false;
  const isChannelTyping = isTypingIndicatorEnabled && isTyping;
  const isMessageStatusEnabled = isMessageReceiptStatusEnabled && ((channel === null || channel === void 0 ? void 0 : (_channel$lastMessage = channel.lastMessage) === null || _channel$lastMessage === void 0 ? void 0 : _channel$lastMessage.messageType) === 'user' || (channel === null || channel === void 0 ? void 0 : (_channel$lastMessage2 = channel.lastMessage) === null || _channel$lastMessage2 === void 0 ? void 0 : _channel$lastMessage2.messageType) === 'file') && (channel === null || channel === void 0 ? void 0 : (_channel$lastMessage3 = channel.lastMessage) === null || _channel$lastMessage3 === void 0 ? void 0 : (_channel$lastMessage4 = _channel$lastMessage3.sender) === null || _channel$lastMessage4 === void 0 ? void 0 : _channel$lastMessage4.userId) === userId;
  const onLongPress = useLongPress({
    onLongPress: () => {
      if (isMobile) {
        setShowMobileLeave(true);
      }
    },
    onClick
  }, {
    delay: 1000
  });
  const channelName = getChannelTitle(channel, userId, stringSet);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: ['sendbird-channel-preview', isActive ? 'sendbird-channel-preview--active' : ''].join(' '),
    role: "link",
    tabIndex: tabIndex
  }, isMobile ? _objectSpread2({}, onLongPress) : {
    onClick
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, {
    channel: channel,
    userId: userId,
    theme: theme
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__content"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__content__upper"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__content__upper__header"
  }, isBroadcast && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__content__upper__header__broadcast-icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.BROADCAST,
    fillColor: IconColors.SECONDARY,
    height: "16px",
    width: "16px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-preview__content__upper__header__channel-name",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, channelName), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-preview__content__upper__header__total-members",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, getTotalMembers(channel)), isFrozen && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    title: "Frozen",
    className: "sendbird-channel-preview__content__upper__header__frozen-icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.FREEZE,
    fillColor: IconColors.PRIMARY,
    height: 12,
    width: 12
  }))), !(channel !== null && channel !== void 0 && channel.isEphemeral) && isMessageStatusEnabled && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageStatus, {
    className: "sendbird-channel-preview__content__upper__last-message-at",
    channel: channel,
    message: channel === null || channel === void 0 ? void 0 : channel.lastMessage,
    isDateSeparatorConsidered: false
  }), !(channel !== null && channel !== void 0 && channel.isEphemeral) && !isMessageStatusEnabled && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-preview__content__upper__last-message-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, getLastMessageCreatedAt({
    channel,
    locale: dateLocale,
    stringSet
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__content__lower"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-preview__content__lower__last-message",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_3
  }, isChannelTyping && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicatorText, {
    members: channel === null || channel === void 0 ? void 0 : channel.getTypingUsers()
  }), !isChannelTyping && !isVoiceMessage(channel === null || channel === void 0 ? void 0 : channel.lastMessage) && getLastMessage(channel), !isChannelTyping && isVoiceMessage(channel === null || channel === void 0 ? void 0 : channel.lastMessage) && stringSet.VOICE_MESSAGE), !(channel !== null && channel !== void 0 && channel.isEphemeral) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__content__lower__unread-message-count"
  }, isMentionEnabled && (channel === null || channel === void 0 ? void 0 : channel.unreadMentionCount) > 0 ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MentionUserLabel, {
    className: "sendbird-channel-preview__content__lower__unread-message-count__mention",
    color: "purple"
  }, '@') : null, getChannelUnreadMessageCount(channel) // return number
  ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Badge, {
    count: getChannelUnreadMessageCount(channel)
  }) : null))), !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-preview__action"
  }, renderChannelAction({
    channel
  }))), showMobileLeave && isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    className: "sendbird-channel-preview__leave--mobile",
    titleText: channelName,
    hideFooter: true,
    isCloseOnClickOutside: true,
    onCancel: () => setShowMobileLeave(false)
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    onClick: () => {
      onLeaveChannel();
      setShowMobileLeave(false);
    },
    className: "sendbird-channel-preview__leave-label--mobile"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE))));
};


//# sourceMappingURL=ChannelPreview.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/ChannelPreviewAction.js




























const LeaveChannel = props => {
  var _useChannelListContex, _state$config, _state$config2;
  const {
    channel = null,
    onSubmit = utils_40781609_noop,
    onCancel = utils_40781609_noop
  } = props;
  const channelFromContext = (_useChannelListContex = useChannelListContext()) === null || _useChannelListContex === void 0 ? void 0 : _useChannelListContex.currentChannel;
  const leavingChannel = channel || channelFromContext;
  const state = useSendbirdStateContext();
  const {
    stringSet
  } = useLocalization();
  const logger = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.logger;
  const isOnline = state === null || state === void 0 ? void 0 : (_state$config2 = state.config) === null || _state$config2 === void 0 ? void 0 : _state$config2.isOnline;
  if (leavingChannel) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
      disabled: !isOnline,
      onCancel: onCancel,
      onSubmit: () => {
        logger.info('ChannelSettings: Leaving channel', leavingChannel);
        leavingChannel === null || leavingChannel === void 0 ? void 0 : leavingChannel.leave().then(() => {
          logger.info('ChannelSettings: Leaving channel successful!', leavingChannel);
          onSubmit();
        });
      },
      submitText: stringSet.MODAL__LEAVE_CHANNEL__FOOTER,
      titleText: stringSet.MODAL__LEAVE_CHANNEL__TITLE
    });
  }
};

function ChannelPreviewAction(_ref) {
  let {
    channel,
    disabled,
    onLeaveChannel
  } = _ref;
  const parentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const parentContainerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    role: "button",
    style: {
      display: 'inline-block'
    },
    onKeyDown: e => {
      e.stopPropagation();
    },
    tabIndex: 0,
    onClick: e => {
      e.stopPropagation();
    },
    ref: parentContainerRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu
  /* eslint-disable react/no-unstable-nested-components */, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      ref: parentRef,
      onClick: toggleDropdown,
      height: "32px",
      width: "32px"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MORE,
      fillColor: IconColors.PRIMARY,
      width: "24px",
      height: "24px"
    }))
    /* eslint-disable react/no-unstable-nested-components */,
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: parentRef,
      parentContainRef: parentContainerRef,
      closeDropdown: closeDropdown
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        if (disabled) {
          return;
        }
        setShowModal(true);
        closeDropdown();
      },
      dataSbId: "channel_list_item_context_menu_leave_channel"
    }, stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))
  }), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LeaveChannel, {
    channel: channel,
    onSubmit: () => {
      setShowModal(false);
      onLeaveChannel();
    },
    onCancel: () => setShowModal(false)
  }));
}
ChannelPreviewAction.propTypes = {
  disabled: prop_types_default.a.bool,
  onLeaveChannel: prop_types_default.a.func.isRequired,
  channel: prop_types_default.a.shape({})
};
ChannelPreviewAction.defaultProps = {
  disabled: false,
  channel: null
};


//# sourceMappingURL=ChannelPreviewAction.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Input.js





const InputLabel = _ref => {
  let {
    children
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-input-label",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_1
  }, children);
};
const Input = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef((props, ref) => {
  const {
    name,
    required,
    disabled,
    value,
    placeHolder
  } = props;
  const [inputValue, setInputValue] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(value);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-input"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    className: "sendbird-input__input",
    ref: ref,
    name: name,
    required: required,
    disabled: disabled,
    value: inputValue,
    onChange: e => {
      setInputValue(e.target.value);
    }
  }), placeHolder && !inputValue && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-input__placeholder",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_3
  }, placeHolder));
});


//# sourceMappingURL=Input.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-3e2f101e.js













const EditUserProfileProviderContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const EditUserProfileProvider = props => {
  const {
    children,
    onEditProfile,
    onCancel,
    onThemeChange
  } = props;
  const value = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return {
      onEditProfile,
      onCancel,
      onThemeChange
    };
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfileProviderContext.Provider, {
    value: value
  }, children);
};
const useEditUserProfileContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(EditUserProfileProviderContext);

function EditUserProfile() {
  var _store$config, _store$config2, _store$stores, _store$stores$userSto, _store$stores2, _store$stores2$sdkSto, _store$dispatchers;
  const editProfileProps = useEditUserProfileContext();
  const store = useSendbirdStateContext();
  const hiddenInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const formRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [currentImg, setCurrentImg] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [newFile, setNewFile] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    onEditProfile,
    onCancel,
    onThemeChange
  } = editProfileProps;
  const theme = (store === null || store === void 0 ? void 0 : (_store$config = store.config) === null || _store$config === void 0 ? void 0 : _store$config.theme) || 'light';
  const changeTheme = (store === null || store === void 0 ? void 0 : (_store$config2 = store.config) === null || _store$config2 === void 0 ? void 0 : _store$config2.setCurrenttheme) || utils_40781609_noop;
  const user = store === null || store === void 0 ? void 0 : (_store$stores = store.stores) === null || _store$stores === void 0 ? void 0 : (_store$stores$userSto = _store$stores.userStore) === null || _store$stores$userSto === void 0 ? void 0 : _store$stores$userSto.user;
  const sdk = store === null || store === void 0 ? void 0 : (_store$stores2 = store.stores) === null || _store$stores2 === void 0 ? void 0 : (_store$stores2$sdkSto = _store$stores2.sdkStore) === null || _store$stores2$sdkSto === void 0 ? void 0 : _store$stores2$sdkSto.sdk;
  const userDispatcher = store === null || store === void 0 ? void 0 : (_store$dispatchers = store.dispatchers) === null || _store$dispatchers === void 0 ? void 0 : _store$dispatchers.userDispatcher;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    titleText: stringSet.EDIT_PROFILE__TITLE,
    submitText: stringSet.BUTTON__SAVE,
    type: ButtonTypes.PRIMARY,
    onCancel: onCancel,
    isFullScreenOnMobile: true,
    onSubmit: () => {
      var _inputRef$current;
      if ((user === null || user === void 0 ? void 0 : user.nickname) !== '' && !inputRef.current.value) {
        if (formRef.current.reportValidity) {
          // might not work in explorer
          formRef.current.reportValidity();
        }
        return;
      }
      sdk === null || sdk === void 0 ? void 0 : sdk.updateCurrentUserInfo({
        nickname: inputRef === null || inputRef === void 0 ? void 0 : (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.value,
        profileImage: newFile
      }).then(updatedUser => {
        userDispatcher({
          type: USER_ACTIONS.UPDATE_USER_INFO,
          payload: updatedUser
        });
        if (onEditProfile && typeof onEditProfile === 'function') {
          onEditProfile(updatedUser);
        }
      });
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", {
    className: "sendbird-edit-user-profile",
    ref: formRef,
    onSubmit: e => {
      e.preventDefault();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird-edit-user-profile__img"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__IMAGE_LABEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-edit-user-profile__img__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    width: "80px",
    height: "80px",
    src: currentImg || (user === null || user === void 0 ? void 0 : user.profileUrl)
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    ref: hiddenInputRef,
    type: "file",
    accept: "image/gif, image/jpeg, image/png",
    style: {
      display: 'none'
    },
    onChange: e => {
      setCurrentImg(URL.createObjectURL(e.target.files[0]));
      setNewFile(e.target.files[0]);
      hiddenInputRef.current.value = '';
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "sendbird-edit-user-profile__img__avatar-button",
    disableUnderline: true,
    onClick: () => hiddenInputRef.current.click()
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: LabelColors.PRIMARY
  }, stringSet.EDIT_PROFILE__IMAGE_UPLOAD))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird-edit-user-profile__name"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__NICKNAME_LABEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, {
    required: (user === null || user === void 0 ? void 0 : user.nickname) !== '',
    name: "sendbird-edit-user-profile__name__input",
    ref: inputRef,
    value: user === null || user === void 0 ? void 0 : user.nickname,
    placeHolder: stringSet.EDIT_PROFILE__NICKNAME_PLACEHOLDER
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird-edit-user-profile__userid"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__USERID_LABEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, {
    disabled: true,
    name: "sendbird-edit-user-profile__userid__input",
    value: user === null || user === void 0 ? void 0 : user.userId
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("section", {
    className: "sendbird-edit-user-profile__theme"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.EDIT_PROFILE__THEME_LABEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-edit-user-profile__theme__theme-icon"
  }, theme === 'dark' ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    onClick: () => {
      changeTheme('light');
      onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange('light');
      // if (onThemeChange && typeof onThemeChange === 'function') {
      //   onThemeChange('light');
      // }
    },

    type: IconTypes.TOGGLE_ON,
    width: 44,
    height: 24
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    onClick: () => {
      changeTheme('dark');
      onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange('dark');
      // if (onThemeChange && typeof onThemeChange === 'function') {
      //   onThemeChange('dark');
      // }
    },

    type: IconTypes.TOGGLE_OFF,
    width: 44,
    height: 24
  })))));
}


//# sourceMappingURL=index-3e2f101e.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/EditUserProfile.js


























const EditProfile = props => {
  const {
    onEditProfile,
    onCancel,
    onThemeChange
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfileProvider, {
    onEditProfile: onEditProfile,
    onCancel: onCancel,
    onThemeChange: onThemeChange
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditUserProfile, null));
};


//# sourceMappingURL=EditUserProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-aa87ac03.js






function index_aa87ac03_Types() {
  return {
    LOADING: 'LOADING',
    NO_CHANNELS: 'NO_CHANNELS',
    NO_MESSAGES: 'NO_MESSAGES',
    WRONG: 'WRONG',
    SEARCH_IN: 'SEARCH_IN',
    SEARCHING: 'SEARCHING',
    NO_RESULTS: 'NO_RESULTS'
  };
}
var PlaceHolderTypes$1 = index_aa87ac03_Types();

const PlaceHolderTypes = PlaceHolderTypes$1;
function index_aa87ac03_PlaceHolder(_ref) {
  let {
    className = '',
    type,
    iconSize,
    searchInString = '',
    retryToConnect = null
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-place-holder'].join(' ')
  }, type === PlaceHolderTypes.LOADING && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    width: iconSize || '48px',
    height: iconSize || '48px'
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: iconSize || '48px',
    height: iconSize || '48px'
  })), (type === PlaceHolderTypes.NO_CHANNELS || type === PlaceHolderTypes.NO_MESSAGES || type === PlaceHolderTypes.WRONG) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-place-holder__body"
  }, type === PlaceHolderTypes.NO_CHANNELS && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-place-holder__body__icon",
    type: IconTypes.CHAT,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: iconSize || '64px',
    height: iconSize || '64px'
  }), type === PlaceHolderTypes.WRONG && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-place-holder__body__icon",
    type: IconTypes.ERROR,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: iconSize || '64px',
    height: iconSize || '64px'
  }), type === PlaceHolderTypes.NO_MESSAGES && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-place-holder__body__icon",
    type: IconTypes.MESSAGE,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: iconSize || '64px',
    height: iconSize || '64px'
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-holder__body__text",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, type === PlaceHolderTypes.NO_CHANNELS && stringSet.PLACE_HOLDER__NO_CHANNEL, type === PlaceHolderTypes.WRONG && stringSet.PLACE_HOLDER__WRONG, type === PlaceHolderTypes.NO_MESSAGES && stringSet.PLACE_HOLDER__NO_MESSAGES), retryToConnect && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-place-holder__body__reconnect",
    role: "button",
    onClick: retryToConnect,
    onKeyPress: retryToConnect,
    tabIndex: 0
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-place-holder__body__reconnect__icon",
    type: IconTypes.REFRESH,
    fillColor: IconColors.PRIMARY,
    width: "20px",
    height: "20px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-holder__body__reconnect__text",
    type: LabelTypography.BUTTON_1,
    color: LabelColors.PRIMARY
  }, stringSet.PLACE_HOLDER__RETRY_TO_CONNECT))), (type === PlaceHolderTypes.NO_RESULTS || type === PlaceHolderTypes.SEARCH_IN || type === PlaceHolderTypes.SEARCHING) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-place-holder__body--align-top"
  }, type === PlaceHolderTypes.SEARCH_IN && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-place-holder__body--align-top__text"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-holder__body--align-top__text__search-in",
    type: LabelTypography.BUTTON_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.SEARCH_IN), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-holder__body--align-top__text__channel-name",
    type: LabelTypography.BUTTON_2,
    color: LabelColors.PRIMARY
  }, `'${searchInString}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-holder__body--align-top__text__quote",
    type: LabelTypography.BUTTON_2,
    color: LabelColors.PRIMARY
  }, '\'')), type === PlaceHolderTypes.SEARCHING && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-hlder__body--align-top__searching",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.SEARCHING), type === PlaceHolderTypes.NO_RESULTS && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-place-hlder__body--align-top__no-result",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.NO_SEARCHED_MESSAGE)));
}


//# sourceMappingURL=index-aa87ac03.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList/components/ChannelListUI.js





































































const ChannelListUI_isAboutSame = (a, b, px) => Math.abs(a - b) <= px;

const ChannelListUI = props => {
  var _state$stores;
  const {
    renderHeader,
    renderChannelPreview,
    renderPlaceHolderError,
    renderPlaceHolderLoading,
    renderPlaceHolderEmptyList
  } = props;
  const [showProfileEdit, setShowProfileEdit] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    onThemeChange,
    allowProfileEdit,
    allChannels,
    loading,
    currentChannel,
    channelListDispatcher,
    typingChannels,
    initialized,
    fetchChannelList
  } = useChannelListContext();
  const state = useSendbirdStateContext();
  const sdkStore = state === null || state === void 0 ? void 0 : (_state$stores = state.stores) === null || _state$stores === void 0 ? void 0 : _state$stores.sdkStore;
  const config = state === null || state === void 0 ? void 0 : state.config;
  const {
    logger,
    isOnline = false
  } = config;
  const sdkError = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.error;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-list__header"
  }, (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListHeader, {
    onEdit: () => {
      if (allowProfileEdit) {
        setShowProfileEdit(true);
      }
    },
    allowProfileEdit: allowProfileEdit,
    renderIconButton: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddChannel, null)
  })), showProfileEdit && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditProfile, {
    onThemeChange: onThemeChange,
    onCancel: () => {
      setShowProfileEdit(false);
    },
    onEditProfile: () => {
      setShowProfileEdit(false);
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-list__body",
    onScroll: e => {
      const target = e === null || e === void 0 ? void 0 : e.target;
      if (ChannelListUI_isAboutSame(target.clientHeight + target.scrollTop, target.scrollHeight, 10)) {
        fetchChannelList();
      }
    }
  }, sdkError && !loading && (renderPlaceHolderError && typeof renderPlaceHolderError === 'function' ? renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError() : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
    type: PlaceHolderTypes.WRONG
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, allChannels && allChannels.map((channel, idx) => {
    // todo: Refactor and move this inside channel - preview
    const onLeaveChannel = (c, cb) => {
      logger.info('ChannelList: Leaving channel', c);
      c.leave().then(res => {
        logger.info('ChannelList: Leaving channel success', res);
        if (cb && typeof cb === 'function') {
          cb(res, null);
        }
        channelListDispatcher({
          type: LEAVE_CHANNEL_SUCCESS,
          payload: channel === null || channel === void 0 ? void 0 : channel.url
        });
      }).catch(err => {
        logger.error('ChannelList: Leaving channel failed', err);
        if (cb && typeof cb === 'function') {
          cb(null, err);
        }
      });
    };
    const onClick = () => {
      if (!isOnline) {
        return;
      }
      logger.info('ChannelList: Clicked on channel:', channel);
      channelListDispatcher({
        type: SET_CURRENT_CHANNEL,
        payload: channel
      });
    };
    return renderChannelPreview ?
    /*#__PURE__*/
    // eslint-disable-next-line
    external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      key: channel === null || channel === void 0 ? void 0 : channel.url,
      onClick: onClick
    }, renderChannelPreview({
      channel,
      onLeaveChannel
    })) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelPreview, {
      key: channel === null || channel === void 0 ? void 0 : channel.url,
      tabIndex: idx,
      onClick: onClick,
      channel: channel,
      onLeaveChannel: () => onLeaveChannel(channel, null),
      isActive: (channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url),
      isTyping: typingChannels === null || typingChannels === void 0 ? void 0 : typingChannels.some(_ref => {
        let {
          url
        } = _ref;
        return url === (channel === null || channel === void 0 ? void 0 : channel.url);
      }),
      renderChannelAction: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelPreviewAction, {
        channel: channel,
        disabled: !isOnline,
        onLeaveChannel: () => onLeaveChannel(channel, null)
      })
    });
  })), !initialized && loading && (renderPlaceHolderLoading && typeof renderPlaceHolderLoading === 'function' ? renderPlaceHolderLoading === null || renderPlaceHolderLoading === void 0 ? void 0 : renderPlaceHolderLoading() : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
    type: PlaceHolderTypes.LOADING
  })), initialized && (allChannels === null || allChannels === void 0 ? void 0 : allChannels.length) === 0 && (renderPlaceHolderEmptyList && typeof renderPlaceHolderEmptyList === 'function' ? renderPlaceHolderEmptyList === null || renderPlaceHolderEmptyList === void 0 ? void 0 : renderPlaceHolderEmptyList() : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
    type: PlaceHolderTypes.NO_CHANNELS
  }))));
};


//# sourceMappingURL=ChannelListUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelList.js






































































const ChannelList = props => {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListProvider, {
    className: props === null || props === void 0 ? void 0 : props.className,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,
    allowProfileEdit: props === null || props === void 0 ? void 0 : props.allowProfileEdit,
    onBeforeCreateChannel: props === null || props === void 0 ? void 0 : props.onBeforeCreateChannel,
    onThemeChange: props === null || props === void 0 ? void 0 : props.onThemeChange,
    overrideInviteUser: props === null || props === void 0 ? void 0 : props.overrideInviteUser,
    onProfileEditSuccess: props === null || props === void 0 ? void 0 : props.onProfileEditSuccess,
    onChannelSelect: props === null || props === void 0 ? void 0 : props.onChannelSelect,
    sortChannelList: props === null || props === void 0 ? void 0 : props.sortChannelList,
    queries: props === null || props === void 0 ? void 0 : props.queries,
    disableAutoSelect: props === null || props === void 0 ? void 0 : props.disableAutoSelect,
    activeChannelUrl: props === null || props === void 0 ? void 0 : props.activeChannelUrl,
    isTypingIndicatorEnabled: props === null || props === void 0 ? void 0 : props.isTypingIndicatorEnabled,
    isMessageReceiptStatusEnabled: props === null || props === void 0 ? void 0 : props.isMessageReceiptStatusEnabled
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelListUI, {
    renderChannelPreview: props === null || props === void 0 ? void 0 : props.renderChannelPreview,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    renderHeader: props === null || props === void 0 ? void 0 : props.renderHeader,
    renderPlaceHolderEmptyList: props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList,
    renderPlaceHolderError: props === null || props === void 0 ? void 0 : props.renderPlaceHolderError,
    renderPlaceHolderLoading: props === null || props === void 0 ? void 0 : props.renderPlaceHolderLoading
  }));
};


//# sourceMappingURL=ChannelList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ConnectionStatus.js








function ConnectionStatus() {
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-connection-status"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.TRYING_TO_CONNECT), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.DISCONNECTED,
    fillColor: IconColors.SENT,
    width: "14px",
    height: "14px"
  }));
}


//# sourceMappingURL=ConnectionStatus.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils-cae5adba.js


const utils_cae5adba_getChannelTitle = (channel, currentUserId, stringSet) => {
  var _channel$members;
  const LABEL_STRING_SET = stringSet || LabelStringSet;
  if (!(channel !== null && channel !== void 0 && channel.name) && !(channel !== null && channel !== void 0 && channel.members)) {
    return LABEL_STRING_SET.NO_TITLE;
  }
  if (channel !== null && channel !== void 0 && channel.name && channel.name !== 'Group Channel') {
    return channel.name;
  }
  if ((channel === null || channel === void 0 ? void 0 : (_channel$members = channel.members) === null || _channel$members === void 0 ? void 0 : _channel$members.length) === 1) {
    return LABEL_STRING_SET.NO_MEMBERS;
  }
  return channel === null || channel === void 0 ? void 0 : channel.members.filter(_ref => {
    let {
      userId
    } = _ref;
    return userId !== currentUserId;
  }).map(_ref2 => {
    let {
      nickname
    } = _ref2;
    return nickname || LABEL_STRING_SET.NO_NAME;
  }).join(', ');
};


//# sourceMappingURL=utils-cae5adba.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/ChannelHeader.js

































const ChannelHeader = _ref => {
  var _globalStore$config, _globalStore$config2, _currentGroupChannel$;
  let {
    className = ''
  } = _ref;
  const globalStore = useSendbirdStateContext();
  const userId = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config = globalStore.config) === null || _globalStore$config === void 0 ? void 0 : _globalStore$config.userId;
  const theme = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config2 = globalStore.config) === null || _globalStore$config2 === void 0 ? void 0 : _globalStore$config2.theme;
  const channelStore = useChannelContext();
  const {
    isMobile
  } = useMediaQueryContext();
  const {
    currentGroupChannel,
    showSearchIcon,
    onSearchClick,
    onChatHeaderActionClick,
    onBackClick = utils_40781609_noop
  } = channelStore;
  const subTitle = (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.members) && (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : (_currentGroupChannel$ = currentGroupChannel.members) === null || _currentGroupChannel$ === void 0 ? void 0 : _currentGroupChannel$.length) !== 2;
  const isMuted = (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.myMutedState) === 'muted';
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-chat-header ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-chat-header__left"
  }, isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-chat-header__icon_back",
    onClick: onBackClick,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px",
    type: IconTypes.ARROW_LEFT
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, {
    theme: theme,
    channel: currentGroupChannel,
    userId: userId,
    height: 32,
    width: 32
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-chat-header__left__title",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, utils_cae5adba_getChannelTitle(currentGroupChannel, userId, stringSet)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-chat-header__left__subtitle",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, subTitle)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-chat-header__right"
  }, (typeof isMuted === 'string' && isMuted === 'true' || typeof isMuted === 'boolean' && isMuted) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-chat-header__right__mute",
    type: IconTypes.NOTIFICATIONS_OFF_FILLED,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "24px",
    height: "24px"
  }), showSearchIcon && !(currentGroupChannel !== null && currentGroupChannel !== void 0 && currentGroupChannel.isEphemeral) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: "sendbird-chat-header__right__search",
    width: "32px",
    height: "32px",
    onClick: onSearchClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.SEARCH,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: "sendbird-chat-header__right__info",
    width: "32px",
    height: "32px",
    onClick: onChatHeaderActionClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.INFO,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }))));
};


//# sourceMappingURL=ChannelHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/const-537b3aa9.js
const MessageInputKeys = {
  Enter: 'Enter',
  ArrowUp: 'ArrowUp',
  ArrowDown: 'ArrowDown',
  Backspace: 'Backspace'
};
const NodeTypes = {
  ElementNode: 1,
  TextNode: 3
};
const NodeNames = {
  Span: 'SPAN',
  Br: 'BR',
  Div: 'DIV'
};


//# sourceMappingURL=const-537b3aa9.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/context/types.js
// Initializing status
let ChannelStateTypes = /*#__PURE__*/function (ChannelStateTypes) {
  ChannelStateTypes["NIL"] = "NIL";
  ChannelStateTypes["LOADING"] = "LOADING";
  ChannelStateTypes["INVALID"] = "INVALID";
  ChannelStateTypes["INITIALIZED"] = "INITIALIZED";
  return ChannelStateTypes;
}({});
let ParentMessageStateTypes = /*#__PURE__*/function (ParentMessageStateTypes) {
  ParentMessageStateTypes["NIL"] = "NIL";
  ParentMessageStateTypes["LOADING"] = "LOADING";
  ParentMessageStateTypes["INVALID"] = "INVALID";
  ParentMessageStateTypes["INITIALIZED"] = "INITIALIZED";
  return ParentMessageStateTypes;
}({});
let ThreadListStateTypes = /*#__PURE__*/function (ThreadListStateTypes) {
  ThreadListStateTypes["NIL"] = "NIL";
  ThreadListStateTypes["LOADING"] = "LOADING";
  ThreadListStateTypes["INVALID"] = "INVALID";
  ThreadListStateTypes["INITIALIZED"] = "INITIALIZED";
  return ThreadListStateTypes;
}({});


//# sourceMappingURL=types.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ThreadProvider-696e3a32.js














const ThreadProvider_696e3a32_getNicknamesMapFromMembers = function () {
  let members = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  const nicknamesMap = new Map();
  for (let memberIndex = 0; memberIndex < members.length; memberIndex += 1) {
    const {
      userId,
      nickname
    } = members[memberIndex];
    nicknamesMap.set(userId, nickname);
  }
  return nicknamesMap;
};
const getParentMessageFrom = message => {
  if (!message) {
    return null;
  }
  if (isParentMessage(message)) {
    return message;
  }
  if (ThreadProvider_696e3a32_isThreadMessage(message)) {
    return (message === null || message === void 0 ? void 0 : message.parentMessage) || null;
  }
  return null;
};
const isParentMessage = message => {
  return (message === null || message === void 0 ? void 0 : message.parentMessage) === null && typeof (message === null || message === void 0 ? void 0 : message.parentMessageId) === 'number' && !(message !== null && message !== void 0 && message.parentMessageId);
};
const ThreadProvider_696e3a32_isThreadMessage = message => {
  return (message === null || message === void 0 ? void 0 : message.parentMessage) !== null && typeof (message === null || message === void 0 ? void 0 : message.parentMessageId) === 'number' && (message === null || message === void 0 ? void 0 : message.parentMessageId) > 0 && (message === null || message === void 0 ? void 0 : message.threadInfo) === null;
};
const ThreadProvider_696e3a32_isAboutSame = (a, b, px) => Math.abs(a - b) <= px;
const ThreadProvider_696e3a32_isEmpty = val => val === null || val === undefined;

// Some Ids return string and number inconsistently
// only use to comapre IDs
function ThreadProvider_696e3a32_compareIds(a, b) {
  if (ThreadProvider_696e3a32_isEmpty(a) || ThreadProvider_696e3a32_isEmpty(b)) {
    return false;
  }
  const aString = a.toString();
  const bString = b.toString();
  return aString === bString;
}
const ThreadProvider_696e3a32_getMessageCreatedAt = message => format(message.createdAt, 'p');
const ThreadProvider_696e3a32_isReadMessage = (channel, message) => getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;
const ThreadProvider_696e3a32_isSameGroup = (message, comparingMessage, currentChannel) => {
  var _message$sender, _comparingMessage$sen, _message$sender2, _comparingMessage$sen2;
  if (!(message && comparingMessage && message.messageType && message.messageType !== 'admin' && comparingMessage.messageType && (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.messageType) !== 'admin' && message !== null && message !== void 0 && message.sender && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.sender && message !== null && message !== void 0 && message.createdAt && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.createdAt && message !== null && message !== void 0 && (_message$sender = message.sender) !== null && _message$sender !== void 0 && _message$sender.userId && comparingMessage !== null && comparingMessage !== void 0 && (_comparingMessage$sen = comparingMessage.sender) !== null && _comparingMessage$sen !== void 0 && _comparingMessage$sen.userId)) {
    return false;
  }
  return (message === null || message === void 0 ? void 0 : message.sendingStatus) === (comparingMessage === null || comparingMessage === void 0 ? void 0 : comparingMessage.sendingStatus) && (message === null || message === void 0 ? void 0 : (_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.userId) === (comparingMessage === null || comparingMessage === void 0 ? void 0 : (_comparingMessage$sen2 = comparingMessage.sender) === null || _comparingMessage$sen2 === void 0 ? void 0 : _comparingMessage$sen2.userId) && ThreadProvider_696e3a32_getMessageCreatedAt(message) === ThreadProvider_696e3a32_getMessageCreatedAt(comparingMessage) && ThreadProvider_696e3a32_isReadMessage(currentChannel, message) === ThreadProvider_696e3a32_isReadMessage(currentChannel, comparingMessage);
};
const compareMessagesForGrouping = (prevMessage, currMessage, nextMessage, currentChannel, replyType) => {
  if (replyType === 'THREAD' && currMessage !== null && currMessage !== void 0 && currMessage.threadInfo) {
    return [false, false];
  }
  const sendingStatus = (currMessage === null || currMessage === void 0 ? void 0 : currMessage.sendingStatus) || '';
  const isAcceptable = sendingStatus !== 'pending' && sendingStatus !== 'failed';
  return [ThreadProvider_696e3a32_isSameGroup(prevMessage, currMessage, currentChannel) && isAcceptable, ThreadProvider_696e3a32_isSameGroup(currMessage, nextMessage, currentChannel) && isAcceptable];
};
const ThreadProvider_696e3a32_scrollIntoLast = function () {
  let intialTry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  const MAX_TRIES = 10;
  const currentTry = intialTry;
  if (currentTry > MAX_TRIES) {
    return;
  }
  try {
    const scrollDOM = document.querySelector('.sendbird-thread-ui--scroll');
    // eslint-disable-next-line no-multi-assign
    scrollDOM.scrollTop = scrollDOM.scrollHeight;
  } catch (error) {
    setTimeout(() => {
      ThreadProvider_696e3a32_scrollIntoLast(currentTry + 1);
    }, 500 * currentTry);
  }
};

const PREV_THREADS_FETCH_SIZE = 30;
const NEXT_THREADS_FETCH_SIZE = 30;

let ThreadContextActionTypes = /*#__PURE__*/function (ThreadContextActionTypes) {
  ThreadContextActionTypes["INIT_USER_ID"] = "INIT_USER_ID";
  ThreadContextActionTypes["GET_CHANNEL_START"] = "GET_CHANNEL_START";
  ThreadContextActionTypes["GET_CHANNEL_SUCCESS"] = "GET_CHANNEL_SUCCESS";
  ThreadContextActionTypes["GET_CHANNEL_FAILURE"] = "GET_CHANNEL_FAILURE";
  ThreadContextActionTypes["SET_EMOJI_CONTAINER"] = "SET_EMOJI_CONTAINER";
  ThreadContextActionTypes["GET_PARENT_MESSAGE_START"] = "GET_PARENT_MESSAGE_START";
  ThreadContextActionTypes["GET_PARENT_MESSAGE_SUCCESS"] = "GET_PARENT_MESSAGE_SUCCESS";
  ThreadContextActionTypes["GET_PARENT_MESSAGE_FAILURE"] = "GET_PARENT_MESSAGE_FAILURE";
  ThreadContextActionTypes["INITIALIZE_THREAD_LIST_START"] = "INITIALIZE_THREAD_LIST_START";
  ThreadContextActionTypes["INITIALIZE_THREAD_LIST_SUCCESS"] = "INITIALIZE_THREAD_LIST_SUCCESS";
  ThreadContextActionTypes["INITIALIZE_THREAD_LIST_FAILURE"] = "INITIALIZE_THREAD_LIST_FAILURE";
  ThreadContextActionTypes["GET_PREV_MESSAGES_START"] = "GET_PREV_MESSAGES_START";
  ThreadContextActionTypes["GET_PREV_MESSAGES_SUCESS"] = "GET_PREV_MESSAGES_SUCESS";
  ThreadContextActionTypes["GET_PREV_MESSAGES_FAILURE"] = "GET_PREV_MESSAGES_FAILURE";
  ThreadContextActionTypes["GET_NEXT_MESSAGES_START"] = "GET_NEXT_MESSAGES_START";
  ThreadContextActionTypes["GET_NEXT_MESSAGES_SUCESS"] = "GET_NEXT_MESSAGES_SUCESS";
  ThreadContextActionTypes["GET_NEXT_MESSAGES_FAILURE"] = "GET_NEXT_MESSAGES_FAILURE";
  ThreadContextActionTypes["SEND_MESSAGE_START"] = "SEND_MESSAGE_START";
  ThreadContextActionTypes["SEND_MESSAGE_SUCESS"] = "SEND_MESSAGE_SUCESS";
  ThreadContextActionTypes["SEND_MESSAGE_FAILURE"] = "SEND_MESSAGE_FAILURE";
  ThreadContextActionTypes["RESEND_MESSAGE_START"] = "RESEND_MESSAGE_START";
  ThreadContextActionTypes["ON_MESSAGE_DELETED_BY_REQ_ID"] = "ON_MESSAGE_DELETED_BY_REQ_ID";
  ThreadContextActionTypes["ON_MESSAGE_RECEIVED"] = "ON_MESSAGE_RECEIVED";
  ThreadContextActionTypes["ON_MESSAGE_UPDATED"] = "ON_MESSAGE_UPDATED";
  ThreadContextActionTypes["ON_MESSAGE_DELETED"] = "ON_MESSAGE_DELETED";
  ThreadContextActionTypes["ON_REACTION_UPDATED"] = "ON_REACTION_UPDATED";
  ThreadContextActionTypes["ON_USER_MUTED"] = "ON_USER_MUTED";
  ThreadContextActionTypes["ON_USER_UNMUTED"] = "ON_USER_UNMUTED";
  ThreadContextActionTypes["ON_USER_BANNED"] = "ON_USER_BANNED";
  ThreadContextActionTypes["ON_USER_UNBANNED"] = "ON_USER_UNBANNED";
  ThreadContextActionTypes["ON_USER_LEFT"] = "ON_USER_LEFT";
  ThreadContextActionTypes["ON_CHANNEL_FROZEN"] = "ON_CHANNEL_FROZEN";
  ThreadContextActionTypes["ON_CHANNEL_UNFROZEN"] = "ON_CHANNEL_UNFROZEN";
  ThreadContextActionTypes["ON_OPERATOR_UPDATED"] = "ON_OPERATOR_UPDATED";
  return ThreadContextActionTypes;
}({});

function ThreadProvider_696e3a32_reducer(state, action) {
  switch (action.type) {
    // initialize
    case ThreadContextActionTypes.INIT_USER_ID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentUserId: action.payload
        });
      }
    case ThreadContextActionTypes.GET_CHANNEL_START:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          channelState: ChannelStateTypes.LOADING,
          currentChannel: null
        });
      }
    case ThreadContextActionTypes.GET_CHANNEL_SUCCESS:
      {
        var _groupChannel$members, _groupChannel$members2;
        const groupChannel = action.payload.groupChannel;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          channelState: ChannelStateTypes.INITIALIZED,
          currentChannel: groupChannel,
          // only support in normal group channel
          isMuted: (groupChannel === null || groupChannel === void 0 ? void 0 : (_groupChannel$members = groupChannel.members) === null || _groupChannel$members === void 0 ? void 0 : (_groupChannel$members2 = _groupChannel$members.find(member => (member === null || member === void 0 ? void 0 : member.userId) === state.currentUserId)) === null || _groupChannel$members2 === void 0 ? void 0 : _groupChannel$members2.isMuted) || false,
          isChannelFrozen: (groupChannel === null || groupChannel === void 0 ? void 0 : groupChannel.isFrozen) || false
        });
      }
    case ThreadContextActionTypes.GET_CHANNEL_FAILURE:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          channelState: ChannelStateTypes.INVALID,
          currentChannel: null
        });
      }
    case ThreadContextActionTypes.SET_EMOJI_CONTAINER:
      {
        const {
          emojiContainer
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          emojiContainer: emojiContainer
        });
      }
    case ThreadContextActionTypes.GET_PARENT_MESSAGE_START:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          parentMessageState: ParentMessageStateTypes.LOADING,
          parentMessage: null
        });
      }
    case ThreadContextActionTypes.GET_PARENT_MESSAGE_SUCCESS:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          parentMessageState: ParentMessageStateTypes.INITIALIZED,
          parentMessage: action.payload.parentMessage
        });
      }
    case ThreadContextActionTypes.GET_PARENT_MESSAGE_FAILURE:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          parentMessageState: ParentMessageStateTypes.INVALID,
          parentMessage: null
        });
      }
    // fetch threads
    case ThreadContextActionTypes.INITIALIZE_THREAD_LIST_START:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          threadListState: ThreadListStateTypes.LOADING,
          allThreadMessages: []
        });
      }
    case ThreadContextActionTypes.INITIALIZE_THREAD_LIST_SUCCESS:
      {
        const {
          parentMessage,
          anchorMessage,
          threadedMessages
        } = action.payload;
        const anchorMessageCreatedAt = !(anchorMessage !== null && anchorMessage !== void 0 && anchorMessage.messageId) ? parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.createdAt : anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.createdAt;
        const anchorIndex = threadedMessages.findIndex(message => (message === null || message === void 0 ? void 0 : message.createdAt) > anchorMessageCreatedAt);
        const prevThreadMessages = anchorIndex > -1 ? threadedMessages.slice(0, anchorIndex) : threadedMessages;
        const anchorThreadMessage = anchorMessage !== null && anchorMessage !== void 0 && anchorMessage.messageId ? [anchorMessage] : [];
        const nextThreadMessages = anchorIndex > -1 ? threadedMessages.slice(anchorIndex) : [];
        return _objectSpread2(_objectSpread2({}, state), {}, {
          threadListState: ThreadListStateTypes.INITIALIZED,
          hasMorePrev: anchorIndex === -1 || anchorIndex === PREV_THREADS_FETCH_SIZE,
          hasMoreNext: threadedMessages.length - anchorIndex === NEXT_THREADS_FETCH_SIZE,
          allThreadMessages: [prevThreadMessages, anchorThreadMessage, nextThreadMessages].flat()
        });
      }
    case ThreadContextActionTypes.INITIALIZE_THREAD_LIST_FAILURE:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          threadListState: ThreadListStateTypes.INVALID,
          allThreadMessages: []
        });
      }
    case ThreadContextActionTypes.GET_NEXT_MESSAGES_START:
      {
        return _objectSpread2({}, state);
      }
    case ThreadContextActionTypes.GET_NEXT_MESSAGES_SUCESS:
      {
        const {
          threadedMessages
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          hasMoreNext: threadedMessages.length === NEXT_THREADS_FETCH_SIZE,
          allThreadMessages: [...state.allThreadMessages, ...threadedMessages]
        });
      }
    case ThreadContextActionTypes.GET_NEXT_MESSAGES_FAILURE:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          hasMoreNext: false
        });
      }
    case ThreadContextActionTypes.GET_PREV_MESSAGES_START:
      {
        return _objectSpread2({}, state);
      }
    case ThreadContextActionTypes.GET_PREV_MESSAGES_SUCESS:
      {
        const {
          threadedMessages
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          hasMorePrev: threadedMessages.length === PREV_THREADS_FETCH_SIZE,
          allThreadMessages: [...threadedMessages, ...state.allThreadMessages]
        });
      }
    case ThreadContextActionTypes.GET_PREV_MESSAGES_FAILURE:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          hasMorePrev: false
        });
      }
    // event handlers - message status change
    case ThreadContextActionTypes.ON_MESSAGE_RECEIVED:
      {
        var _state$currentChannel, _message$parentMessag, _state$parentMessage, _state$parentMessage2;
        const {
          channel,
          message
        } = action.payload;
        if (((_state$currentChannel = state.currentChannel) === null || _state$currentChannel === void 0 ? void 0 : _state$currentChannel.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state.hasMoreNext || (message === null || message === void 0 ? void 0 : (_message$parentMessag = message.parentMessage) === null || _message$parentMessag === void 0 ? void 0 : _message$parentMessag.messageId) !== (state === null || state === void 0 ? void 0 : (_state$parentMessage = state.parentMessage) === null || _state$parentMessage === void 0 ? void 0 : _state$parentMessage.messageId)) {
          return state;
        }
        const isAlreadyReceived = state.allThreadMessages.findIndex(m => m.messageId === message.messageId) > -1;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          parentMessage: ((_state$parentMessage2 = state.parentMessage) === null || _state$parentMessage2 === void 0 ? void 0 : _state$parentMessage2.messageId) === (message === null || message === void 0 ? void 0 : message.messageId) ? message : state.parentMessage,
          allThreadMessages: isAlreadyReceived ? state.allThreadMessages.map(m => m.messageId === message.messageId ? message : m) : [...state.allThreadMessages.filter(m => (m === null || m === void 0 ? void 0 : m.reqId) !== (message === null || message === void 0 ? void 0 : message.reqId)), message]
        });
      }
    case ThreadContextActionTypes.ON_MESSAGE_UPDATED:
      {
        var _state$currentChannel2, _state$parentMessage3, _state$allThreadMessa;
        const {
          channel,
          message
        } = action.payload;
        if (((_state$currentChannel2 = state.currentChannel) === null || _state$currentChannel2 === void 0 ? void 0 : _state$currentChannel2.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          parentMessage: ((_state$parentMessage3 = state.parentMessage) === null || _state$parentMessage3 === void 0 ? void 0 : _state$parentMessage3.messageId) === (message === null || message === void 0 ? void 0 : message.messageId) ? message : state.parentMessage,
          allThreadMessages: (_state$allThreadMessa = state.allThreadMessages) === null || _state$allThreadMessa === void 0 ? void 0 : _state$allThreadMessa.map(msg => (msg === null || msg === void 0 ? void 0 : msg.messageId) === (message === null || message === void 0 ? void 0 : message.messageId) ? message : msg)
        });
      }
    case ThreadContextActionTypes.ON_MESSAGE_DELETED:
      {
        var _state$currentChannel3, _state$parentMessage4, _state$allThreadMessa2;
        const {
          channel,
          messageId
        } = action.payload;
        if (((_state$currentChannel3 = state.currentChannel) === null || _state$currentChannel3 === void 0 ? void 0 : _state$currentChannel3.url) !== (channel === null || channel === void 0 ? void 0 : channel.url)) {
          return state;
        }
        if ((state === null || state === void 0 ? void 0 : (_state$parentMessage4 = state.parentMessage) === null || _state$parentMessage4 === void 0 ? void 0 : _state$parentMessage4.messageId) === messageId) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            parentMessage: null,
            parentMessageState: ParentMessageStateTypes.NIL,
            allThreadMessages: []
          });
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allThreadMessages: (_state$allThreadMessa2 = state.allThreadMessages) === null || _state$allThreadMessa2 === void 0 ? void 0 : _state$allThreadMessa2.filter(msg => (msg === null || msg === void 0 ? void 0 : msg.messageId) !== messageId)
        });
      }
    case ThreadContextActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allThreadMessages: state.allThreadMessages.filter(m => !ThreadProvider_696e3a32_compareIds(m.reqId, action.payload))
        });
      }
    case ThreadContextActionTypes.ON_REACTION_UPDATED:
      {
        var _action$payload, _state$parentMessage5;
        const reactionEvent = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.reactionEvent;
        if ((state === null || state === void 0 ? void 0 : (_state$parentMessage5 = state.parentMessage) === null || _state$parentMessage5 === void 0 ? void 0 : _state$parentMessage5.messageId) === (reactionEvent === null || reactionEvent === void 0 ? void 0 : reactionEvent.messageId)) {
          var _state$parentMessage6, _state$parentMessage7;
          (_state$parentMessage6 = state.parentMessage) === null || _state$parentMessage6 === void 0 ? void 0 : (_state$parentMessage7 = _state$parentMessage6.applyReactionEvent) === null || _state$parentMessage7 === void 0 ? void 0 : _state$parentMessage7.call(_state$parentMessage6, reactionEvent);
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allThreadMessages: state.allThreadMessages.map(m => {
            if ((reactionEvent === null || reactionEvent === void 0 ? void 0 : reactionEvent.messageId) === (m === null || m === void 0 ? void 0 : m.messageId)) {
              var _m$applyReactionEvent;
              m === null || m === void 0 ? void 0 : (_m$applyReactionEvent = m.applyReactionEvent) === null || _m$applyReactionEvent === void 0 ? void 0 : _m$applyReactionEvent.call(m, reactionEvent);
              return m;
            }
            return m;
          })
        });
      }
    // event handlers - user status change
    case ThreadContextActionTypes.ON_USER_MUTED:
      {
        var _state$currentChannel4;
        const {
          channel,
          user
        } = action.payload;
        if (((_state$currentChannel4 = state.currentChannel) === null || _state$currentChannel4 === void 0 ? void 0 : _state$currentChannel4.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state.currentUserId !== (user === null || user === void 0 ? void 0 : user.userId)) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isMuted: true
        });
      }
    case ThreadContextActionTypes.ON_USER_UNMUTED:
      {
        var _state$currentChannel5;
        const {
          channel,
          user
        } = action.payload;
        if (((_state$currentChannel5 = state.currentChannel) === null || _state$currentChannel5 === void 0 ? void 0 : _state$currentChannel5.url) !== (channel === null || channel === void 0 ? void 0 : channel.url) || state.currentUserId !== (user === null || user === void 0 ? void 0 : user.userId)) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isMuted: false
        });
      }
    case ThreadContextActionTypes.ON_USER_BANNED:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          channelState: ChannelStateTypes.NIL,
          threadListState: ThreadListStateTypes.NIL,
          parentMessageState: ParentMessageStateTypes.NIL,
          currentChannel: null,
          parentMessage: null,
          allThreadMessages: [],
          hasMorePrev: false,
          hasMoreNext: false
        });
      }
    case ThreadContextActionTypes.ON_USER_UNBANNED:
      {
        return _objectSpread2({}, state);
      }
    case ThreadContextActionTypes.ON_USER_LEFT:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          channelState: ChannelStateTypes.NIL,
          threadListState: ThreadListStateTypes.NIL,
          parentMessageState: ParentMessageStateTypes.NIL,
          currentChannel: null,
          parentMessage: null,
          allThreadMessages: [],
          hasMorePrev: false,
          hasMoreNext: false
        });
      }
    // event handler - channel status change
    case ThreadContextActionTypes.ON_CHANNEL_FROZEN:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isChannelFrozen: true
        });
      }
    case ThreadContextActionTypes.ON_CHANNEL_UNFROZEN:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isChannelFrozen: false
        });
      }
    case ThreadContextActionTypes.ON_OPERATOR_UPDATED:
      {
        var _state$currentChannel6;
        const {
          channel
        } = action.payload;
        if ((channel === null || channel === void 0 ? void 0 : channel.url) === ((_state$currentChannel6 = state.currentChannel) === null || _state$currentChannel6 === void 0 ? void 0 : _state$currentChannel6.url)) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentChannel: channel
          });
        }
        return state;
      }
    // message
    case ThreadContextActionTypes.SEND_MESSAGE_START:
      {
        const {
          message
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allThreadMessages: [...state.allThreadMessages, message]
        });
      }
    case ThreadContextActionTypes.SEND_MESSAGE_SUCESS:
      {
        const {
          message
        } = action.payload;
        const filteredThreadMessages = state.allThreadMessages.filter(m => !ThreadProvider_696e3a32_compareIds(m === null || m === void 0 ? void 0 : m.reqId, message === null || message === void 0 ? void 0 : message.reqId));
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allThreadMessages: [...filteredThreadMessages, message]
        });
      }
    case ThreadContextActionTypes.SEND_MESSAGE_FAILURE:
      {
        const {
          message
        } = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allThreadMessages: state.allThreadMessages.map(m => ThreadProvider_696e3a32_compareIds(m === null || m === void 0 ? void 0 : m.reqId, message === null || message === void 0 ? void 0 : message.reqId) ? message : m)
        });
      }
    case ThreadContextActionTypes.RESEND_MESSAGE_START:
      {
        return _objectSpread2({}, state);
      }
    default:
      {
        return state;
      }
  }
}

const ThreadProvider_696e3a32_initialState = {
  currentChannel: null,
  allThreadMessages: [],
  parentMessage: null,
  channelState: ChannelStateTypes.NIL,
  parentMessageState: ParentMessageStateTypes.NIL,
  threadListState: ThreadListStateTypes.NIL,
  hasMorePrev: false,
  hasMoreNext: false,
  emojiContainer: {},
  isMuted: false,
  isChannelFrozen: false,
  currentUserId: ''
};

function useGetChannel(_ref, _ref2) {
  let {
    channelUrl,
    sdkInit,
    message
  } = _ref;
  let {
    sdk,
    logger,
    threadDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    // validation check
    if (sdkInit && channelUrl && sdk !== null && sdk !== void 0 && sdk.groupChannel) {
      var _sdk$groupChannel$get, _sdk$groupChannel;
      threadDispatcher({
        type: ThreadContextActionTypes.GET_CHANNEL_START,
        payload: null
      });
      (_sdk$groupChannel$get = (_sdk$groupChannel = sdk.groupChannel).getChannel) === null || _sdk$groupChannel$get === void 0 ? void 0 : _sdk$groupChannel$get.call(_sdk$groupChannel, channelUrl).then(groupChannel => {
        logger.info('Thread | useInitialize: Get channel succeeded', groupChannel);
        threadDispatcher({
          type: ThreadContextActionTypes.GET_CHANNEL_SUCCESS,
          payload: {
            groupChannel
          }
        });
      }).catch(error => {
        logger.info('Thread | useInitialize: Get channel failed', error);
        threadDispatcher({
          type: ThreadContextActionTypes.GET_CHANNEL_FAILURE,
          payload: error
        });
      });
    }
  }, [message, sdkInit]);
  /**
   * We don't use channelUrl here,
   * because Thread must operate independently of the channel.
   */
}

function useGetAllEmoji(_ref, _ref2) {
  let {
    sdk
  } = _ref;
  let {
    logger,
    threadDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (sdk !== null && sdk !== void 0 && sdk.getAllEmoji) {
      // validation check
      sdk === null || sdk === void 0 ? void 0 : sdk.getAllEmoji().then(emojiContainer => {
        logger.info('Thread | useGetAllEmoji: Getting emojis succeeded.', emojiContainer);
        threadDispatcher({
          type: ThreadContextActionTypes.SET_EMOJI_CONTAINER,
          payload: {
            emojiContainer
          }
        });
      }).catch(error => {
        logger.info('Thread | useGetAllEmoji: Getting emojis failed.', error);
      });
    }
  }, [sdk]);
}

function useGetThreadList(_ref, _ref2) {
  let {
    sdkInit,
    parentMessage,
    anchorMessage,
    isReactionEnabled
  } = _ref;
  let {
    logger,
    threadDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    // validation check
    if (sdkInit && parentMessage !== null && parentMessage !== void 0 && parentMessage.getThreadedMessagesByTimestamp) {
      var _parentMessage$getThr;
      threadDispatcher({
        type: ThreadContextActionTypes.INITIALIZE_THREAD_LIST_START,
        payload: null
      });
      const timeStamp = (anchorMessage === null || anchorMessage === void 0 ? void 0 : anchorMessage.createdAt) || 0;
      const params = {
        prevResultSize: PREV_THREADS_FETCH_SIZE,
        nextResultSize: NEXT_THREADS_FETCH_SIZE,
        includeReactions: isReactionEnabled,
        includeMetaArray: true
      };
      logger.info('Thread | useGetThreadList: Initialize thread list start.', {
        timeStamp,
        params
      });
      (_parentMessage$getThr = parentMessage.getThreadedMessagesByTimestamp) === null || _parentMessage$getThr === void 0 ? void 0 : _parentMessage$getThr.call(parentMessage, timeStamp, params).then(_ref3 => {
        let {
          parentMessage,
          threadedMessages
        } = _ref3;
        logger.info('Thread | useGetThreadList: Initialize thread list succeeded.', {
          parentMessage,
          threadedMessages
        });
        threadDispatcher({
          type: ThreadContextActionTypes.INITIALIZE_THREAD_LIST_SUCCESS,
          payload: {
            parentMessage,
            anchorMessage,
            threadedMessages
          }
        });
      }).catch(error => {
        logger.info('Therad | useGetThreadList: Initialize thread list failed.', error);
        threadDispatcher({
          type: ThreadContextActionTypes.INITIALIZE_THREAD_LIST_FAILURE,
          payload: error
        });
      });
    }
  }, [sdkInit, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId, anchorMessage]);
}

function useGetParentMessage(_ref, _ref2) {
  let {
    channelUrl,
    sdkInit,
    parentMessage
  } = _ref;
  let {
    sdk,
    logger,
    threadDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sdk$message;
    // validation check
    if (sdkInit && sdk !== null && sdk !== void 0 && (_sdk$message = sdk.message) !== null && _sdk$message !== void 0 && _sdk$message.getMessage) {
      threadDispatcher({
        type: ThreadContextActionTypes.GET_PARENT_MESSAGE_START,
        payload: null
      });
      const params = {
        channelUrl,
        channelType: _bundle_a5600e6c["y" /* Y */].GROUP,
        messageId: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId,
        includeMetaArray: true,
        includeReactions: true,
        includeThreadInfo: true,
        includeParentMessageInfo: true
      };
      logger.info('Thread | useGetParentMessage: Get parent message start.', params);
      const fetchParentMessage = async () => {
        var _sdk$message$getMessa, _sdk$message2;
        const data = await ((_sdk$message$getMessa = (_sdk$message2 = sdk.message).getMessage) === null || _sdk$message$getMessa === void 0 ? void 0 : _sdk$message$getMessa.call(_sdk$message2, params));
        return data;
      };
      fetchParentMessage().then(parentMsg => {
        logger.info('Thread | useGetParentMessage: Get parent message succeeded.', parentMessage);
        parentMsg.ogMetaData = (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.ogMetaData) || null; // ogMetaData is not included for now
        threadDispatcher({
          type: ThreadContextActionTypes.GET_PARENT_MESSAGE_SUCCESS,
          payload: {
            parentMessage: parentMsg
          }
        });
      }).catch(error => {
        logger.info('Thread | useGetParentMessage: Get parent message failed.', error);
        threadDispatcher({
          type: ThreadContextActionTypes.GET_PARENT_MESSAGE_FAILURE,
          payload: error
        });
      });
    }
  }, [sdkInit, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId]);
  /**
   * We don't use channelUrl here,
   * because Thread must operate independently of the channel.
   */
}

function useHandlePubsubEvents(_ref, _ref2) {
  let {
    sdkInit,
    currentChannel,
    parentMessage
  } = _ref;
  let {
    pubSub,
    threadDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const pubSubHandler = () => {
      const subscriber = new Map();
      if (!pubSub || !pubSub.subscribe) {
        return subscriber;
      }
      subscriber.set(PUBSUB_TOPICS.SEND_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_USER_MESSAGE, props => {
        const {
          channel,
          message
        } = props;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url) && (message === null || message === void 0 ? void 0 : message.parentMessageId) === (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId)) {
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
            payload: {
              message
            }
          });
        }
        ThreadProvider_696e3a32_scrollIntoLast === null || ThreadProvider_696e3a32_scrollIntoLast === void 0 ? void 0 : ThreadProvider_696e3a32_scrollIntoLast();
      }));
      subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_FAILED, props => {
        const {
          channel,
          message
        } = props;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url) && (message === null || message === void 0 ? void 0 : message.parentMessageId) === (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId)) {
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
            payload: {
              message
            }
          });
        }
      }));
      subscriber.set(PUBSUB_TOPICS.SEND_FILE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_FILE_MESSAGE, props => {
        const {
          channel,
          message
        } = props;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url)) {
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
            payload: {
              message
            }
          });
        }
        ThreadProvider_696e3a32_scrollIntoLast === null || ThreadProvider_696e3a32_scrollIntoLast === void 0 ? void 0 : ThreadProvider_696e3a32_scrollIntoLast();
      }));
      subscriber.set(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, msg => {
        const {
          channel,
          message
        } = msg;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url)) {
          threadDispatcher({
            type: ThreadContextActionTypes.ON_MESSAGE_UPDATED,
            payload: {
              channel,
              message
            }
          });
        }
      }));
      subscriber.set(PUBSUB_TOPICS.DELETE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.DELETE_MESSAGE, msg => {
        const {
          channel,
          messageId
        } = msg;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (channel === null || channel === void 0 ? void 0 : channel.url)) {
          threadDispatcher({
            type: ThreadContextActionTypes.ON_MESSAGE_DELETED,
            payload: {
              messageId
            }
          });
        }
      }));
    };
    const subscriber = pubSubHandler();
    return () => {
      subscriber === null || subscriber === void 0 ? void 0 : subscriber.forEach(s => {
        try {
          s === null || s === void 0 ? void 0 : s.remove();
        } catch (_unused) {
          //
        }
      });
    };
  }, [sdkInit, currentChannel]);
}

function ThreadProvider_696e3a32_useHandleChannelEvents(_ref, _ref2) {
  let {
    sdk,
    currentChannel
  } = _ref;
  let {
    logger,
    threadDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sdk$groupChannel;
    const handlerId = uuidv4();
    // validation check
    if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel = sdk.groupChannel) !== null && _sdk$groupChannel !== void 0 && _sdk$groupChannel.addGroupChannelHandler && currentChannel) {
      var _sdk$groupChannel$add, _sdk$groupChannel2;
      const channelHandlerParams = {
        // message status change
        onMessageReceived(channel, message) {
          logger.info('Thread | useHandleChannelEvents: onMessageReceived', {
            channel,
            message
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_MESSAGE_RECEIVED,
            payload: {
              channel,
              message
            }
          });
        },
        onMessageUpdated(channel, message) {
          logger.info('Thread | useHandleChannelEvents: onMessageUpdated', {
            channel,
            message
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_MESSAGE_UPDATED,
            payload: {
              channel,
              message
            }
          });
        },
        onMessageDeleted(channel, messageId) {
          logger.info('Thread | useHandleChannelEvents: onMessageDeleted', {
            channel,
            messageId
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_MESSAGE_DELETED,
            payload: {
              channel,
              messageId
            }
          });
        },
        onReactionUpdated(channel, reactionEvent) {
          logger.info('Thread | useHandleChannelEvents: onReactionUpdated', {
            channel,
            reactionEvent
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_REACTION_UPDATED,
            payload: {
              channel,
              reactionEvent
            }
          });
        },
        // user status change
        onUserMuted(channel, user) {
          logger.info('Thread | useHandleChannelEvents: onUserMuted', {
            channel,
            user
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_USER_MUTED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserUnmuted(channel, user) {
          logger.info('Thread | useHandleChannelEvents: onUserUnmuted', {
            channel,
            user
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_USER_UNMUTED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserBanned(channel, user) {
          logger.info('Thread | useHandleChannelEvents: onUserBanned', {
            channel,
            user
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_USER_BANNED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserUnbanned(channel, user) {
          logger.info('Thread | useHandleChannelEvents: onUserUnbanned', {
            channel,
            user
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_USER_UNBANNED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserLeft(channel, user) {
          logger.info('Thread | useHandleChannelEvents: onUserLeft', {
            channel,
            user
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_USER_LEFT,
            payload: {
              channel,
              user
            }
          });
        },
        // channel status change
        onChannelFrozen(channel) {
          logger.info('Thread | useHandleChannelEvents: onChannelFrozen', {
            channel
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_CHANNEL_FROZEN,
            payload: {
              channel
            }
          });
        },
        onChannelUnfrozen(channel) {
          logger.info('Thread | useHandleChannelEvents: onChannelUnfrozen', {
            channel
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_CHANNEL_UNFROZEN,
            payload: {
              channel
            }
          });
        },
        onOperatorUpdated(channel, users) {
          logger.info('Thread | useHandleChannelEvents: onOperatorUpdated', {
            channel,
            users
          });
          threadDispatcher({
            type: ThreadContextActionTypes.ON_OPERATOR_UPDATED,
            payload: {
              channel,
              users
            }
          });
        }
      };
      const channelHandler = new groupChannel_We(channelHandlerParams);
      (_sdk$groupChannel$add = (_sdk$groupChannel2 = sdk.groupChannel).addGroupChannelHandler) === null || _sdk$groupChannel$add === void 0 ? void 0 : _sdk$groupChannel$add.call(_sdk$groupChannel2, handlerId, channelHandler);
      logger.info('Thread | useHandleChannelEvents: Added channelHandler in Thread', {
        handlerId,
        channelHandler
      });
    }
    return () => {
      var _sdk$groupChannel3;
      // validation check
      if (handlerId && sdk !== null && sdk !== void 0 && (_sdk$groupChannel3 = sdk.groupChannel) !== null && _sdk$groupChannel3 !== void 0 && _sdk$groupChannel3.removeGroupChannelHandler) {
        var _sdk$groupChannel$rem, _sdk$groupChannel4;
        (_sdk$groupChannel$rem = (_sdk$groupChannel4 = sdk.groupChannel).removeGroupChannelHandler) === null || _sdk$groupChannel$rem === void 0 ? void 0 : _sdk$groupChannel$rem.call(_sdk$groupChannel4, handlerId);
        logger.info('Thread | useHandleChannelEvents: Removed channelHandler in Thread.', handlerId);
      }
    };
  }, [sdk === null || sdk === void 0 ? void 0 : sdk.groupChannel, currentChannel]);
}

function ThreadProvider_696e3a32_useSendFileMessageCallback(_ref, _ref2) {
  let {
    currentChannel
  } = _ref;
  let {
    logger,
    pubSub,
    threadDispatcher
  } = _ref2;
  const sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((file, quoteMessage) => {
    const createParamsDefault = () => {
      const params = {};
      params.file = file;
      if (quoteMessage) {
        params.isReplyToChannel = true;
        params.parentMessageId = quoteMessage.messageId;
      }
      return params;
    };
    const params = createParamsDefault();
    logger.info('Thread | useSendFileMessageCallback: Sending file message start.', params);
    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendFileMessage(params).onPending(pendingMessage => {
      threadDispatcher({
        type: ThreadContextActionTypes.SEND_MESSAGE_START,
        payload: {
          /* pubSub is used instead of messagesDispatcher
          to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
          message: _objectSpread2(_objectSpread2({}, pendingMessage), {}, {
            url: URL.createObjectURL(file),
            // pending thumbnail message seems to be failed
            requestState: 'pending'
          })
        }
      });
      setTimeout(() => ThreadProvider_696e3a32_scrollIntoLast(), 1000);
    }).onFailed((error, message) => {
      message.localUrl = URL.createObjectURL(file);
      message.file = file;
      logger.info('Thread | useSendFileMessageCallback: Sending file message failed.', {
        message,
        error
      });
      threadDispatcher({
        type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
        payload: {
          message,
          error
        }
      });
    }).onSucceeded(message => {
      logger.info('Thread | useSendFileMessageCallback: Sending file message succeeded.', message);
      pubSub.publish(PUBSUB_TOPICS.SEND_FILE_MESSAGE, {
        channel: currentChannel,
        message: message
      });
    });
  }, [currentChannel]);
  return sendMessage;
}

function ThreadProvider_696e3a32_useUpdateMessageCallback(_ref, _ref2) {
  let {
    currentChannel,
    isMentionEnabled
  } = _ref;
  let {
    logger,
    pubSub,
    threadDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(props => {
    var _currentChannel$updat;
    const {
      messageId,
      message,
      mentionedUsers,
      mentionTemplate
    } = props;
    const createParamsDefault = () => {
      const params = {};
      params.message = message;
      if (isMentionEnabled && (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) > 0) {
        params.mentionedUsers = mentionedUsers;
      }
      if (isMentionEnabled && mentionTemplate) {
        params.mentionedMessageTemplate = mentionTemplate;
      } else {
        params.mentionedMessageTemplate = message;
      }
      return params;
    };
    const params = createParamsDefault();
    logger.info('Thread | useUpdateMessageCallback: Message update start.', params);
    currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$updat = currentChannel.updateUserMessage) === null || _currentChannel$updat === void 0 ? void 0 : _currentChannel$updat.call(currentChannel, messageId, params).then(message => {
      logger.info('Thread | useUpdateMessageCallback: Message update succeeded.', message);
      threadDispatcher({
        type: ThreadContextActionTypes.ON_MESSAGE_UPDATED,
        payload: {
          channel: currentChannel,
          message: message
        }
      });
      pubSub.publish(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, {
        fromSelector: true,
        channel: currentChannel,
        message: message
      });
    });
  }, [currentChannel, isMentionEnabled]);
}

function ThreadProvider_696e3a32_useDeleteMessageCallback(_ref, _ref2) {
  let {
    currentChannel,
    threadDispatcher
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(message => {
    logger.info('Thread | useDeleteMessageCallback: Deleting message.', message);
    const {
      sendingStatus
    } = message;
    return new Promise((resolve, reject) => {
      var _currentChannel$delet;
      logger.info('Thread | useDeleteMessageCallback: Deleting message requestState:', sendingStatus);
      // Message is only on local
      if (sendingStatus === 'failed' || sendingStatus === 'pending') {
        logger.info('Thread | useDeleteMessageCallback: Deleted message from local:', message);
        threadDispatcher({
          type: ThreadContextActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID,
          payload: message.reqId
        });
        resolve(message);
      }
      logger.info('Thread | useDeleteMessageCallback: Deleting message from remote:', sendingStatus);
      currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$delet = currentChannel.deleteMessage) === null || _currentChannel$delet === void 0 ? void 0 : _currentChannel$delet.call(currentChannel, message).then(() => {
        logger.info('Thread | useDeleteMessageCallback: Deleting message success!', message);
        threadDispatcher({
          type: ThreadContextActionTypes.ON_MESSAGE_DELETED,
          payload: {
            message,
            channel: currentChannel
          }
        });
        resolve(message);
      }).catch(err => {
        logger.warning('Thread | useDeleteMessageCallback: Deleting message failed!', err);
        reject(err);
      });
    });
  }, [currentChannel]);
}

function useGetPrevThreadsCallback(_ref, _ref2) {
  let {
    hasMorePrev,
    parentMessage,
    threadListState,
    oldestMessageTimeStamp,
    isReactionEnabled
  } = _ref;
  let {
    logger,
    threadDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(callback => {
    // validation check
    if (threadListState === ThreadListStateTypes.INITIALIZED && parentMessage !== null && parentMessage !== void 0 && parentMessage.getThreadedMessagesByTimestamp && oldestMessageTimeStamp !== 0) {
      var _parentMessage$getThr;
      threadDispatcher({
        type: ThreadContextActionTypes.GET_PREV_MESSAGES_START,
        payload: null
      });
      (_parentMessage$getThr = parentMessage.getThreadedMessagesByTimestamp) === null || _parentMessage$getThr === void 0 ? void 0 : _parentMessage$getThr.call(parentMessage, oldestMessageTimeStamp, {
        prevResultSize: PREV_THREADS_FETCH_SIZE,
        nextResultSize: 0,
        includeReactions: isReactionEnabled,
        includeMetaArray: true
      }).then(_ref3 => {
        let {
          parentMessage,
          threadedMessages
        } = _ref3;
        logger.info('Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.', {
          parentMessage,
          threadedMessages
        });
        threadDispatcher({
          type: ThreadContextActionTypes.GET_PREV_MESSAGES_SUCESS,
          payload: {
            parentMessage,
            threadedMessages
          }
        });
        callback(threadedMessages);
      }).catch(error => {
        logger.info('Thread | useGetPrevThreadsCallback: Fetch prev threads failed.', error);
        threadDispatcher({
          type: ThreadContextActionTypes.GET_PREV_MESSAGES_FAILURE,
          payload: error
        });
      });
    }
  }, [hasMorePrev, parentMessage, threadListState, oldestMessageTimeStamp]);
}

function useGetNextThreadsCallback(_ref, _ref2) {
  let {
    hasMoreNext,
    parentMessage,
    threadListState,
    latestMessageTimeStamp,
    isReactionEnabled
  } = _ref;
  let {
    logger,
    threadDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(callback => {
    // validation check
    if (threadListState === ThreadListStateTypes.INITIALIZED && parentMessage !== null && parentMessage !== void 0 && parentMessage.getThreadedMessagesByTimestamp && latestMessageTimeStamp !== 0) {
      var _parentMessage$getThr;
      threadDispatcher({
        type: ThreadContextActionTypes.GET_NEXT_MESSAGES_START,
        payload: null
      });
      (_parentMessage$getThr = parentMessage.getThreadedMessagesByTimestamp) === null || _parentMessage$getThr === void 0 ? void 0 : _parentMessage$getThr.call(parentMessage, latestMessageTimeStamp, {
        prevResultSize: 0,
        nextResultSize: NEXT_THREADS_FETCH_SIZE,
        includeReactions: isReactionEnabled,
        includeMetaArray: true
      }).then(_ref3 => {
        let {
          parentMessage,
          threadedMessages
        } = _ref3;
        logger.info('Thread | useGetNextThreadsCallback: Fetch next threads succeeded.', {
          parentMessage,
          threadedMessages
        });
        threadDispatcher({
          type: ThreadContextActionTypes.GET_NEXT_MESSAGES_SUCESS,
          payload: {
            parentMessage,
            threadedMessages
          }
        });
        callback(threadedMessages);
      }).catch(error => {
        logger.info('Thread | useGetNextThreadsCallback: Fetch next threads failed.', error);
        threadDispatcher({
          type: ThreadContextActionTypes.GET_NEXT_MESSAGES_FAILURE,
          payload: error
        });
      });
    }
  }, [hasMoreNext, parentMessage, threadListState, latestMessageTimeStamp]);
}

function ThreadProvider_696e3a32_useToggleReactionCallback(_ref, _ref2) {
  let {
    currentChannel
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((message, key, isReacted) => {
    var _currentChannel$addRe;
    if (isReacted) {
      var _currentChannel$delet;
      currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$delet = currentChannel.deleteReaction) === null || _currentChannel$delet === void 0 ? void 0 : _currentChannel$delet.call(currentChannel, message, key).then(res => {
        logger.info('Thread | useToggleReactionsCallback: Delete reaction succeeded.', res);
      }).catch(err => {
        logger.warning('Thread | useToggleReactionsCallback: Delete reaction failed.', err);
      });
      return;
    }
    currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$addRe = currentChannel.addReaction) === null || _currentChannel$addRe === void 0 ? void 0 : _currentChannel$addRe.call(currentChannel, message, key).then(res => {
      logger.info('Thread | useToggleReactionsCallback: Add reaction succeeded.', res);
    }).catch(err => {
      logger.warning('Thread | useToggleReactionsCallback: Add reaction failed.', err);
    });
  }, [currentChannel]);
}

function useSendUserMessageCallback(_ref, _ref2) {
  let {
    isMentionEnabled,
    currentChannel
  } = _ref;
  let {
    logger,
    pubSub,
    threadDispatcher
  } = _ref2;
  const sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(props => {
    const {
      message,
      quoteMessage = null,
      mentionTemplate,
      mentionedUsers
    } = props;
    const createDefaultParams = () => {
      const params = {};
      params.message = message;
      const mentionedUsersLength = (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) || 0;
      if (isMentionEnabled && mentionedUsersLength) {
        params.mentionedUsers = mentionedUsers;
      }
      if (isMentionEnabled && mentionTemplate && mentionedUsersLength) {
        params.mentionedMessageTemplate = mentionTemplate;
      }
      if (quoteMessage) {
        params.isReplyToChannel = true;
        params.parentMessageId = quoteMessage.messageId;
      }
      return params;
    };
    const params = createDefaultParams();
    logger.info('Thread | useSendUserMessageCallback: Sending user message start.', params);
    if (currentChannel !== null && currentChannel !== void 0 && currentChannel.sendUserMessage) {
      currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendUserMessage(params).onPending(pendingMessage => {
        threadDispatcher({
          type: ThreadContextActionTypes.SEND_MESSAGE_START,
          payload: {
            message: pendingMessage
          }
        });
      }).onFailed((error, message) => {
        logger.info('Thread | useSendUserMessageCallback: Sending user message failed.', {
          message,
          error
        });
        threadDispatcher({
          type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
          payload: {
            error,
            message
          }
        });
      }).onSucceeded(message => {
        logger.info('Thread | useSendUserMessageCallback: Sending user message succeeded.', message);
        threadDispatcher({
          type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
          payload: {
            message
          }
        });
        // because Thread doesn't subscribe SEND_USER_MESSAGE
        pubSub.publish(PUBSUB_TOPICS.SEND_USER_MESSAGE, {
          channel: currentChannel,
          message: message
        });
      });
    }
  }, [isMentionEnabled, currentChannel]);
  return sendMessage;
}

function ThreadProvider_696e3a32_useResendMessageCallback(_ref, _ref2) {
  let {
    currentChannel
  } = _ref;
  let {
    logger,
    pubSub,
    threadDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(failedMessage => {
    if (failedMessage !== null && failedMessage !== void 0 && failedMessage.isResendable) {
      var _failedMessage$isUser, _failedMessage$isFile;
      failedMessage.sendingStatus = _bundle_a5600e6c["lb" /* ad */].PENDING;
      logger.info('Thread | useResendMessageCallback: Resending failedMessage start.', failedMessage);
      threadDispatcher({
        type: ThreadContextActionTypes.RESEND_MESSAGE_START,
        payload: failedMessage
      });
      if (failedMessage !== null && failedMessage !== void 0 && (_failedMessage$isUser = failedMessage.isUserMessage) !== null && _failedMessage$isUser !== void 0 && _failedMessage$isUser.call(failedMessage) || (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.messageType) === _bundle_a5600e6c["ib" /* aa */].USER) {
        currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.resendUserMessage(failedMessage).then(message => {
          logger.info('Thread | useResendMessageCallback: Resending failedMessage succeeded.', message);
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
            payload: {
              message
            }
          });
          pubSub.publish(PUBSUB_TOPICS.SEND_USER_MESSAGE, {
            channel: currentChannel,
            message: message
          });
        }).catch(error => {
          logger.warning('Thread | useResendMessageCallback: Resending failedMessage failed.', error);
          failedMessage.sendingStatus = _bundle_a5600e6c["lb" /* ad */].FAILED;
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
            payload: {
              message: failedMessage
            }
          });
        });
      } else if (failedMessage !== null && failedMessage !== void 0 && (_failedMessage$isFile = failedMessage.isFileMessage) !== null && _failedMessage$isFile !== void 0 && _failedMessage$isFile.call(failedMessage) || (failedMessage === null || failedMessage === void 0 ? void 0 : failedMessage.messageType) === _bundle_a5600e6c["ib" /* aa */].FILE) {
        var _currentChannel$resen;
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$resen = currentChannel.resendFileMessage) === null || _currentChannel$resen === void 0 ? void 0 : _currentChannel$resen.call(currentChannel, failedMessage).then(message => {
          logger.info('Thread | useResendMessageCallback: Resending failedMessage succeeded.', message);
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_SUCESS,
            payload: {
              message
            }
          });
        }).catch(error => {
          logger.warning('Thread | useResendMessageCallback: Resending failedMessage failed.', error);
          failedMessage.sendingStatus = _bundle_a5600e6c["lb" /* ad */].FAILED;
          threadDispatcher({
            type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
            payload: {
              message: failedMessage
            }
          });
          pubSub.publish(PUBSUB_TOPICS.SEND_FILE_MESSAGE, {
            channel: currentChannel,
            message: failedMessage
          });
        });
      } else {
        logger.warning('Thread | useResendMessageCallback: Message is not resendable.', failedMessage);
        failedMessage.sendingStatus = _bundle_a5600e6c["lb" /* ad */].FAILED;
        threadDispatcher({
          type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
          payload: {
            message: failedMessage
          }
        });
      }
    }
  }, [currentChannel]);
}

const ThreadProvider_696e3a32_useSendVoiceMessageCallback = (_ref, _ref2) => {
  let {
    currentChannel,
    onBeforeSendVoiceMessage
  } = _ref;
  let {
    logger,
    pubSub,
    threadDispatcher
  } = _ref2;
  const sendMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((file, duration, quoteMessage) => {
    const messageParams = onBeforeSendVoiceMessage && typeof onBeforeSendVoiceMessage === 'function' ? onBeforeSendVoiceMessage(file, quoteMessage) : {
      file,
      fileName: consts_397a92f1["g" /* b */],
      mimeType: consts_397a92f1["h" /* c */],
      metaArrays: [new _bundle_1edafb8c_Ce({
        key: consts_397a92f1["c" /* M */],
        value: [`${duration}`]
      }), new _bundle_1edafb8c_Ce({
        key: consts_397a92f1["i" /* d */],
        value: [consts_397a92f1["j" /* e */]]
      })]
    };
    if (quoteMessage) {
      messageParams.isReplyToChannel = true;
      messageParams.parentMessageId = quoteMessage.messageId;
    }
    logger.info('Thread | useSendVoiceMessageCallback:  Start sending voice message', messageParams);
    currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.sendFileMessage(messageParams).onPending(pendingMessage => {
      threadDispatcher({
        type: ThreadContextActionTypes.SEND_MESSAGE_START,
        payload: {
          /* pubSub is used instead of messagesDispatcher
          to avoid redundantly calling `messageActionTypes.SEND_MESSAGE_START` */
          message: _objectSpread2(_objectSpread2({}, pendingMessage), {}, {
            url: URL.createObjectURL(file),
            // pending thumbnail message seems to be failed
            requestState: 'pending'
          })
        }
      });
      setTimeout(() => ThreadProvider_696e3a32_scrollIntoLast(), 1000);
    }).onFailed((error, message) => {
      message.localUrl = URL.createObjectURL(file);
      message.file = file;
      logger.info('Thread | useSendVoiceMessageCallback: Sending voice message failed.', {
        message,
        error
      });
      threadDispatcher({
        type: ThreadContextActionTypes.SEND_MESSAGE_FAILURE,
        payload: {
          message,
          error
        }
      });
    }).onSucceeded(message => {
      logger.info('Thread | useSendVoiceMessageCallback: Sending voice message succeeded.', message);
      pubSub.publish(PUBSUB_TOPICS.SEND_FILE_MESSAGE, {
        channel: currentChannel,
        message: message
      });
    });
  }, [currentChannel, onBeforeSendVoiceMessage]);
  return sendMessage;
};

const ThreadContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(null);
const ThreadProvider = props => {
  var _allThreadMessages$, _allThreadMessages;
  const {
    children,
    channelUrl,
    onHeaderActionClick,
    onMoveToParentMessage,
    onBeforeSendVoiceMessage,
    // User Profile
    disableUserProfile,
    renderUserProfile
  } = props;
  const propsMessage = props === null || props === void 0 ? void 0 : props.message;
  const propsParentMessage = getParentMessageFrom(propsMessage);
  // Context from SendbirdProvider
  const globalStore = useSendbirdStateContext();
  const {
    stores,
    config
  } = globalStore;
  // // stores
  const {
    sdkStore,
    userStore
  } = stores;
  const {
    sdk
  } = sdkStore;
  const {
    user
  } = userStore;
  const sdkInit = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.initialized;
  // // config
  const {
    logger,
    pubSub,
    replyType,
    isMentionEnabled,
    isReactionEnabled,
    onUserProfileMessage
  } = config;

  // dux of Thread
  const [threadStore, threadDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(ThreadProvider_696e3a32_reducer, ThreadProvider_696e3a32_initialState);
  const {
    currentChannel,
    allThreadMessages,
    parentMessage,
    channelState,
    threadListState,
    parentMessageState,
    hasMorePrev,
    hasMoreNext,
    emojiContainer,
    isMuted,
    isChannelFrozen,
    currentUserId
  } = threadStore;

  // Initialization
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    threadDispatcher({
      type: ThreadContextActionTypes.INIT_USER_ID,
      payload: user === null || user === void 0 ? void 0 : user.userId
    });
  }, [user]);
  useGetChannel({
    channelUrl,
    sdkInit,
    message: propsMessage
  }, {
    sdk,
    logger,
    threadDispatcher
  });
  useGetParentMessage({
    channelUrl,
    sdkInit,
    parentMessage: propsParentMessage
  }, {
    sdk,
    logger,
    threadDispatcher
  });
  useGetThreadList({
    sdkInit,
    parentMessage,
    isReactionEnabled,
    anchorMessage: (propsMessage === null || propsMessage === void 0 ? void 0 : propsMessage.messageId) !== (propsParentMessage === null || propsParentMessage === void 0 ? void 0 : propsParentMessage.messageId) ? propsMessage : null
    // anchorMessage should be null when parentMessage doesn't exist
  }, {
    logger,
    threadDispatcher
  });
  useGetAllEmoji({
    sdk
  }, {
    logger,
    threadDispatcher
  });
  // Handle channel events
  ThreadProvider_696e3a32_useHandleChannelEvents({
    sdk,
    currentChannel
  }, {
    logger,
    threadDispatcher
  });
  useHandlePubsubEvents({
    sdkInit,
    currentChannel,
    parentMessage
  }, {
    logger,
    pubSub,
    threadDispatcher
  });

  // callbacks
  const fetchPrevThreads = useGetPrevThreadsCallback({
    hasMorePrev,
    parentMessage,
    threadListState,
    isReactionEnabled,
    oldestMessageTimeStamp: ((_allThreadMessages$ = allThreadMessages[0]) === null || _allThreadMessages$ === void 0 ? void 0 : _allThreadMessages$.createdAt) || 0
  }, {
    logger,
    threadDispatcher
  });
  const fetchNextThreads = useGetNextThreadsCallback({
    hasMoreNext,
    parentMessage,
    threadListState,
    isReactionEnabled,
    latestMessageTimeStamp: ((_allThreadMessages = allThreadMessages[allThreadMessages.length - 1]) === null || _allThreadMessages === void 0 ? void 0 : _allThreadMessages.createdAt) || 0
  }, {
    logger,
    threadDispatcher
  });
  const toggleReaction = ThreadProvider_696e3a32_useToggleReactionCallback({
    currentChannel
  }, {
    logger
  });
  const sendMessage = useSendUserMessageCallback({
    isMentionEnabled,
    currentChannel
  }, {
    logger,
    pubSub,
    threadDispatcher
  });
  const sendFileMessage = ThreadProvider_696e3a32_useSendFileMessageCallback({
    currentChannel
  }, {
    logger,
    pubSub,
    threadDispatcher
  });
  const sendVoiceMessage = ThreadProvider_696e3a32_useSendVoiceMessageCallback({
    currentChannel,
    onBeforeSendVoiceMessage
  }, {
    logger,
    pubSub,
    threadDispatcher
  });
  const resendMessage = ThreadProvider_696e3a32_useResendMessageCallback({
    currentChannel
  }, {
    logger,
    pubSub,
    threadDispatcher
  });
  const updateMessage = ThreadProvider_696e3a32_useUpdateMessageCallback({
    currentChannel,
    isMentionEnabled
  }, {
    logger,
    pubSub,
    threadDispatcher
  });
  const deleteMessage = ThreadProvider_696e3a32_useDeleteMessageCallback({
    currentChannel,
    threadDispatcher
  }, {
    logger
  });

  // memo
  const nicknamesMap = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => replyType && currentChannel ? ThreadProvider_696e3a32_getNicknamesMapFromMembers(currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members) : new Map(), [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.members]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadContext.Provider, {
    value: {
      // ThreadProviderProps
      channelUrl,
      message: propsMessage,
      onHeaderActionClick,
      onMoveToParentMessage,
      // ThreadContextInitialState
      currentChannel,
      allThreadMessages,
      parentMessage,
      channelState,
      threadListState,
      parentMessageState,
      hasMorePrev,
      hasMoreNext,
      emojiContainer,
      // hooks
      fetchPrevThreads,
      fetchNextThreads,
      toggleReaction,
      sendMessage,
      sendFileMessage,
      sendVoiceMessage,
      resendMessage,
      updateMessage,
      deleteMessage,
      // context
      nicknamesMap,
      isMuted,
      isChannelFrozen,
      currentUserId
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    disableUserProfile: disableUserProfile !== null && disableUserProfile !== void 0 ? disableUserProfile : config.disableUserProfile,
    renderUserProfile: renderUserProfile,
    onUserProfileMessage: onUserProfileMessage
  }, children));
};
const useThreadContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ThreadContext);


//# sourceMappingURL=ThreadProvider-696e3a32.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/SuggestedMentionList.js































function SuggestedUserMentionItem(props) {
  const {
    member,
    isFocused = false,
    parentScrollRef,
    onClick,
    onMouseOver,
    onMouseMove,
    renderUserMentionItem
  } = props;
  const scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    stringSet = {}
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isFocused && (parentScrollRef === null || parentScrollRef === void 0 ? void 0 : parentScrollRef.current) != null && (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) != null && (parentScrollRef.current.scrollTop >= scrollRef.current.offsetTop || parentScrollRef.current.scrollTop + parentScrollRef.current.clientHeight <= scrollRef.current.offsetTop)) {
      scrollRef.current.scrollIntoView({
        block: 'nearest',
        inline: 'nearest'
      });
    }
  }, [isFocused]);
  const customMentionItem = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (renderUserMentionItem) {
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        className: "sendbird-mention-suggest-list__user-item",
        onClick: event => onClick === null || onClick === void 0 ? void 0 : onClick({
          event,
          member: member,
          itemRef: scrollRef
        }),
        onMouseOver: event => onMouseOver === null || onMouseOver === void 0 ? void 0 : onMouseOver({
          event,
          member: member,
          itemRef: scrollRef
        }),
        onMouseMove: event => onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove({
          event,
          member: member,
          itemRef: scrollRef
        }),
        key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(),
        ref: scrollRef
      }, renderUserMentionItem({
        user: member
      }));
    }
  }, [renderUserMentionItem]);
  if (customMentionItem) {
    return customMentionItem;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-mention-suggest-list__user-item ${isFocused ? 'focused' : ''}`,
    onClick: event => onClick === null || onClick === void 0 ? void 0 : onClick({
      event,
      member: member,
      itemRef: scrollRef
    }),
    onMouseOver: event => onMouseOver === null || onMouseOver === void 0 ? void 0 : onMouseOver({
      event,
      member: member,
      itemRef: scrollRef
    }),
    onMouseMove: event => onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove({
      event,
      member: member,
      itemRef: scrollRef
    }),
    key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(),
    ref: scrollRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-mention-suggest-list__user-item__avatar",
    src: member === null || member === void 0 ? void 0 : member.profileUrl,
    alt: "user-profile",
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-mention-suggest-list__user-item__nickname",
    type: LabelTypography.SUBTITLE_2,
    color: member !== null && member !== void 0 && member.nickname ? LabelColors.ONBACKGROUND_1 : LabelColors.ONBACKGROUND_3
  }, (member === null || member === void 0 ? void 0 : member.nickname) || (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MENTION_NAME__NO_NAME)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-mention-suggest-list__user-item__user-id",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_2
  }, member === null || member === void 0 ? void 0 : member.userId));
}

const DEBOUNCING_TIME = 300;
function SuggestedMentionList(props) {
  var _useChannelContext, _useThreadContext, _stores$sdkStore, _stores$sdkStore$sdk, _stores$sdkStore$sdk$;
  const {
    className,
    targetNickname = '',
    // memberListQuery,
    onUserItemClick,
    onFocusItemChange,
    onFetchUsers,
    renderUserMentionItem,
    inputEvent,
    ableAddMention = true,
    maxMentionCount = MAX_USER_MENTION_COUNT,
    maxSuggestionCount = MAX_USER_SUGGESTION_COUNT
  } = props;
  const currentGroupChannel = useChannelContext === null || useChannelContext === void 0 ? void 0 : (_useChannelContext = useChannelContext()) === null || _useChannelContext === void 0 ? void 0 : _useChannelContext.currentGroupChannel;
  const currentChannel = useThreadContext === null || useThreadContext === void 0 ? void 0 : (_useThreadContext = useThreadContext()) === null || _useThreadContext === void 0 ? void 0 : _useThreadContext.currentChannel;
  const channelInstance = currentGroupChannel || currentChannel;
  const {
    config,
    stores
  } = useSendbirdStateContext();
  const {
    logger
  } = config;
  const currentUserId = (stores === null || stores === void 0 ? void 0 : (_stores$sdkStore = stores.sdkStore) === null || _stores$sdkStore === void 0 ? void 0 : (_stores$sdkStore$sdk = _stores$sdkStore.sdk) === null || _stores$sdkStore$sdk === void 0 ? void 0 : (_stores$sdkStore$sdk$ = _stores$sdkStore$sdk.currentUser) === null || _stores$sdkStore$sdk$ === void 0 ? void 0 : _stores$sdkStore$sdk$.userId) || '';
  const scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [timer, setTimer] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [searchString, setSearchString] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [lastSearchString, setLastSearchString] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [currentUser, setCurrentUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [currentMemberList, setCurrentMemberList] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    clearTimeout(timer);
    setTimer(setTimeout(() => {
      setSearchString(targetNickname);
    }, DEBOUNCING_TIME));
  }, [targetNickname]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.Enter) {
      if (currentMemberList.length > 0) {
        onUserItemClick(currentUser);
      }
    }
    if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.ArrowUp) {
      const currentUserIndex = currentMemberList.findIndex(member => (member === null || member === void 0 ? void 0 : member.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId));
      if (0 < currentUserIndex) {
        setCurrentUser(currentMemberList[currentUserIndex - 1]);
        onFocusItemChange(currentMemberList[currentUserIndex - 1]);
      }
    }
    if ((inputEvent === null || inputEvent === void 0 ? void 0 : inputEvent.key) === MessageInputKeys.ArrowDown) {
      const currentUserIndex = currentMemberList.findIndex(member => (member === null || member === void 0 ? void 0 : member.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId));
      if (currentUserIndex < currentMemberList.length - 1) {
        setCurrentUser(currentMemberList[currentUserIndex + 1]);
        onFocusItemChange(currentMemberList[currentUserIndex + 1]);
      }
    }
  }, [inputEvent]);

  /* Fetch member list */
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!(channelInstance !== null && channelInstance !== void 0 && channelInstance.createMemberListQuery)) {
      logger.warning('SuggestedMentionList: Creating member list query failed');
      return;
    }
    if (lastSearchString && searchString.indexOf(lastSearchString) === 0 && currentMemberList.length === 0) {
      // Don't need to request query again
      return;
    }
    const query = channelInstance === null || channelInstance === void 0 ? void 0 : channelInstance.createMemberListQuery({
      limit: maxSuggestionCount + 1,
      // because current user could be included
      nicknameStartsWithFilter: searchString.slice(USER_MENTION_TEMP_CHAR.length)
    });
    // Add member list query for customization
    query.next().then(memberList => {
      const suggestingMembers = memberList.filter(member => currentUserId !== (member === null || member === void 0 ? void 0 : member.userId)).slice(0, maxSuggestionCount);
      if (suggestingMembers.length < 1) {
        logger.info('SuggestedMentionList: Fetched member list is empty');
      } else {
        logger.info('SuggestedMentionList: Fetching member list succeeded', {
          memberListQuery: query,
          memberList: suggestingMembers
        });
        setCurrentUser(suggestingMembers[0]);
      }
      setLastSearchString(searchString);
      onFetchUsers(suggestingMembers);
      setCurrentMemberList(suggestingMembers);
    }).catch(error => {
      if (error) {
        logger.error('SuggestedMentionList: Fetching member list failed', error);
      }
    });
  }, [channelInstance === null || channelInstance === void 0 ? void 0 : channelInstance.url, searchString]);
  if (!ableAddMention && currentMemberList.length === 0) {
    return null;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-mention-suggest-list ${className}`,
    key: "sendbird-mention-suggest-list",
    ref: scrollRef
  }, ableAddMention && (currentMemberList === null || currentMemberList === void 0 ? void 0 : currentMemberList.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedUserMentionItem, {
    key: (member === null || member === void 0 ? void 0 : member.userId) || uuidv4(),
    member: member,
    isFocused: (member === null || member === void 0 ? void 0 : member.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId),
    parentScrollRef: scrollRef,
    onClick: _ref => {
      let {
        member
      } = _ref;
      onUserItemClick(member);
    },
    onMouseOver: _ref2 => {
      let {
        member
      } = _ref2;
      setCurrentUser(member);
    },
    renderUserMentionItem: renderUserMentionItem
  }))), !ableAddMention && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-mention-suggest-list__notice-item"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-mention-suggest-list__notice-item__icon",
    type: IconTypes.INFO,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "20px",
    height: "20px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-mention-suggest-list__notice-item__text",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.MENTION_COUNT__OVER_LIMIT.replace('%d', maxMentionCount))));
}


//# sourceMappingURL=SuggestedMentionList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/DateSeparator.js






const DateSeparator = _ref => {
  let {
    children = null,
    className = '',
    separatorColor = color_65ef45d7_Colors.ONBACKGROUND_4
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-separator'].join(' ')
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-separator__left', `${color_65ef45d7_changeColorToClassName(separatorColor)}--background-color`].join(' ')
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-separator__text"
  }, children || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, "Date Separator")), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-separator__right', `${color_65ef45d7_changeColorToClassName(separatorColor)}--background-color`].join(' ')
  }));
};


//# sourceMappingURL=DateSeparator.js.map

// EXTERNAL MODULE: ./node_modules/dompurify/dist/purify.js
var purify = __webpack_require__(5);
var purify_default = /*#__PURE__*/__webpack_require__.n(purify);

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/consts-ee08d763.js
const TEXT_MESSAGE_BODY_CLASSNAME = 'sendbird-text-message-item-body';


//# sourceMappingURL=consts-ee08d763.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/consts-066d732d.js
const OG_MESSAGE_BODY_CLASSNAME = 'sendbird-og-message-item-body__text-bubble';


//# sourceMappingURL=consts-066d732d.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-3f6516a2.js






// cretes a sanitized string from a mention user label
function renderToString(_ref) {
  let {
    userId,
    nickname
  } = _ref;
  // donot change this template, it wont work
  const el = `<span data-userid="${userId}" data-sb-mention="true" class="${MENTION_USER_LABEL_CLASSNAME}">${nickname}</span>`;
  const purifier = purify_default()(window);
  const sanitized_ = purifier.sanitize(el);
  const token = sanitized_.split(' ');
  const [spanTag, ...rest] = token;
  // we do this because DOMPurify removes the contenteditable attribute
  const sanitized = [spanTag, 'contenteditable="false"', ...rest].join(' ');
  return sanitized;
}

// https://davidwalsh.name/javascript-debounce-function

// Sanitize that special characters of HTML tags cause XSS issue
const sanitizeString = str => str === null || str === void 0 ? void 0 : str.replace(/[\u00A0-\u9999<>]/gim, i => ''.concat('&#', i.charCodeAt(0), ';'));

/**
 * NodeList cannot be used with Array methods
 * @param {childNodes} NodeList
 * @returns Array of child nodes
 */
const nodeListToArray = childNodes => {
  try {
    return Array.from(childNodes);
  } catch (error) {
    return [];
  }
};

function inserTemplateToDOM(templateList) {
  const nodes = templateList.map(template => {
    const {
      text,
      userId
    } = template;
    if (userId) {
      return renderToString({
        userId,
        nickname: text
      });
    }
    return sanitizeString(text);
  }).join(' ')
  // add a space at the end of the mention, else cursor/caret wont work
  .concat(' ');
  document.execCommand('insertHTML', false, nodes);
}

const PASTE_NODE = 'sendbird-uikit__paste-node';
const TEXT_MESSAGE_CLASS = 'sendbird-word';
const MENTION_CLASS = 'sendbird-word__mention';
const MENTION_CLASS_IN_INPUT = 'sendbird-mention-user-label';
const MENTION_CLASS_COMBINED_QUERY = `.${MENTION_CLASS}, .${MENTION_CLASS_IN_INPUT}`;

function querySelectorIncludingSelf(master, selector) {
  const result = [master, ...Array.from(master.querySelectorAll(selector))].find(el => el.matches(selector));
  return result;
}

// Pasted dom node can be OG_MESSAGE or partial message or full message
// full messsage would have TEXT_MESSAGE_BODY_CLASSNAME and have childNodes
// partial message would not have TEXT_MESSAGE_BODY_CLASSNAME
function getLeafNodes(master) {
  // og message
  const ogMessage = querySelectorIncludingSelf(master, `.${OG_MESSAGE_BODY_CLASSNAME}`);
  if (ogMessage) {
    return nodeListToArray(ogMessage.childNodes);
  }
  const textMessageBody = querySelectorIncludingSelf(master, `.${TEXT_MESSAGE_BODY_CLASSNAME}`);
  if (textMessageBody) {
    return nodeListToArray(textMessageBody.childNodes);
  }
  return nodeListToArray(master.childNodes);
}
function createPasteNode() {
  const pasteNode = document.body.querySelector(`#${PASTE_NODE}`);
  // remove existing paste node
  if (pasteNode) {
    pasteNode === null || pasteNode === void 0 ? void 0 : pasteNode.remove();
  }

  // create new paste node and return
  const node = document.createElement('div');
  node.id = PASTE_NODE;
  node.style.display = 'none';
  return node;
}
function hasMention(parent) {
  return parent !== null && parent !== void 0 && parent.querySelector(MENTION_CLASS_COMBINED_QUERY) ? true : false;
}
const extractTextFromNodes = nodes => {
  let text = '';
  nodes.forEach(node => {
    // to preserve space between words
    const textNodes = node.querySelectorAll(`.${TEXT_MESSAGE_CLASS}`);
    if (textNodes.length > 0) {
      text += extractTextFromNodes(Array.from(textNodes)) + ' ';
    }
    text += node.innerText + ' ';
  });
  return text;
};
function domToMessageTemplate(nodeArray) {
  const templates = nodeArray === null || nodeArray === void 0 ? void 0 : nodeArray.reduce((accumulator, currentValue) => {
    // currentValue can be node(from messageBody or messageInput) or text
    let mentionNode;
    // this looks awkward, but it is a fallback to set default text
    let text = currentValue === null || currentValue === void 0 ? void 0 : currentValue.innerText;

    // if text node, set text
    if (currentValue instanceof Text) {
      mentionNode = false;
      text = currentValue.textContent;
    }
    if (currentValue instanceof HTMLElement) {
      mentionNode = currentValue.classList.contains(MENTION_CLASS) || currentValue.classList.contains(MENTION_CLASS_IN_INPUT) ? currentValue : currentValue.querySelector(MENTION_CLASS_COMBINED_QUERY);
    }

    // if mentionNode is not null, it is a mention
    if (mentionNode) {
      var _mentionNode$dataset;
      const text = currentValue === null || currentValue === void 0 ? void 0 : currentValue.innerText;
      const userId = (_mentionNode$dataset = mentionNode.dataset) === null || _mentionNode$dataset === void 0 ? void 0 : _mentionNode$dataset.userid;
      return [...accumulator, {
        text,
        userId
      }];
    }
    return [...accumulator, {
      text
    }];
  }, []);
  return templates;
}
function getUsersFromWords(templates, channel) {
  const userMap = {};
  const users = channel.members;
  templates.forEach(template => {
    if (template.userId) {
      const mentionedMember = users.find(user => user.userId === template.userId);
      // Object.values would return array-> [undefined] if the user is not in the channel
      if (mentionedMember) {
        userMap[template.userId] = mentionedMember;
      }
    }
  });
  return Object.values(userMap);
}

// exported, should be backward compatible
// conditions to test:
// 1. paste simple text
// 2. paste text with mention
// 3. paste text with mention and text
// 4. paste text with mention and text and paste again before and after
// 5. copy message with mention(only one mention, no other text) and paste
// 6. copy message with mention from input and paste(before and after)
function usePaste(_ref) {
  let {
    ref,
    setIsInput,
    setHeight,
    channel,
    setMentionedUsers
  } = _ref;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(e => {
    e.preventDefault();
    const html = e === null || e === void 0 ? void 0 : e.clipboardData.getData('text/html');
    // simple text, continue as normal
    if (!html) {
      const text = e === null || e === void 0 ? void 0 : e.clipboardData.getData('text');
      document.execCommand('insertHTML', false, sanitizeString(text));
      setIsInput(true);
      setHeight();
      return;
    }

    // has html, check if there are mentions, sanitize and insert
    const purifier = purify_default()(window);
    const clean = purifier.sanitize(html);
    const pasteNode = createPasteNode();
    pasteNode.innerHTML = clean;
    // does not have mention, continue as normal
    if (!hasMention(pasteNode)) {
      // to preserve space between words
      const text = extractTextFromNodes(Array.from(pasteNode.children));
      document.execCommand('insertHTML', false, sanitizeString(text));
      pasteNode.remove();
      setIsInput(true);
      setHeight();
      return;
    }

    // has mention, collect leaf nodes and parse words
    const leafNodes = getLeafNodes(pasteNode);
    const words = domToMessageTemplate(leafNodes);
    const mentionedUsers = getUsersFromWords(words, channel);

    // side effects
    setMentionedUsers(mentionedUsers);
    inserTemplateToDOM(words);
    pasteNode.remove();
    setIsInput(true);
    setHeight();
  }, [ref, setIsInput, setHeight, channel, setMentionedUsers]);
}


//# sourceMappingURL=index-3f6516a2.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/tokenize-3c45100f.js


const USER_MENTION_PREFIX = '@';

const TOKEN_TYPES = {
  string: 'string',
  mention: 'mention',
  url: 'url',
  undetermined: 'undetermined'
};

function getUserMentionRegex(mentionedUsers, templatePrefix_) {
  const templatePrefix = templatePrefix_ || USER_MENTION_PREFIX;
  return RegExp(`(${mentionedUsers.map(u => {
    const userId = u.userId.replace(
    // If user.id includes these patterns, need to convert it into an escaped one
    /([.*+?^${}()|[\]\\])/g, '\\$1');
    /**
     * //{ And //} are also for escaping
     * because curly braces `{}` are metacharacters in regular expressions used to specify repetition
     */
    return `${templatePrefix}\\{${userId}\\}`;
  }).join('|')})`, 'g');
}
function identifyMentions(_ref) {
  let {
    tokens,
    mentionedUsers = [],
    templatePrefix = USER_MENTION_PREFIX
  } = _ref;
  if (!(mentionedUsers !== null && mentionedUsers !== void 0 && mentionedUsers.length)) {
    return tokens;
  }
  const userMentionRegex = getUserMentionRegex(mentionedUsers, templatePrefix);
  const results = tokens.map(token => {
    // if the token is not undetermined, return it as is
    // is kinda unnecessary with TS, but just in case
    if (token.type !== TOKEN_TYPES.undetermined) {
      return token;
    }
    const {
      value
    } = token;
    const parts = value.split(userMentionRegex);
    const tokens = parts.map(part => {
      if (part.match(userMentionRegex)) {
        const matchedUser = mentionedUsers.find(user => `@{${user === null || user === void 0 ? void 0 : user.userId}}` === part);
        const nickname = (matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.nickname) || '(No name)';
        return {
          value: nickname,
          type: TOKEN_TYPES.mention,
          userId: matchedUser === null || matchedUser === void 0 ? void 0 : matchedUser.userId
        };
      } else {
        return {
          value: part,
          type: TOKEN_TYPES.undetermined
        };
      }
    });
    return tokens;
  }).flat();
  return results;
}
function identifyUrlsAndStrings(token) {
  const results = token.map(token => {
    if (token.type !== TOKEN_TYPES.undetermined) {
      return token;
    }
    const {
      value = ''
    } = token;
    const parts = value.split(' ');
    const tokens = parts.map(part => {
      if (isUrl(part)) {
        return {
          value: part,
          type: TOKEN_TYPES.url
        };
      } else {
        return {
          value: part,
          type: TOKEN_TYPES.string
        };
      }
    });
    return tokens;
  }).flat();
  return results;
}
function combineNearbyStrings(tokens) {
  const results = tokens.reduce((acc, token) => {
    const lastToken = acc[acc.length - 1];
    if ((lastToken === null || lastToken === void 0 ? void 0 : lastToken.type) === TOKEN_TYPES.string && token.type === TOKEN_TYPES.string) {
      lastToken.value = `${lastToken.value} ${token.value}`;
      return acc;
    }
    return [...acc, token];
  }, []);
  return results;
}

/**
 * Converts text into set of rich tokens
 */
function tokenizeMessage(_ref2) {
  let {
    messageText,
    mentionedUsers = [],
    templatePrefix = USER_MENTION_PREFIX
  } = _ref2;
  // mention can be squeezed-in(no-space-between) with other mentions and urls
  // if no users are mentioned, return the messageText as a single token
  const partialResult = [{
    type: TOKEN_TYPES.undetermined,
    value: messageText
  }];

  // order is important because we want to identify mentions first
  // identifyMentions will return a token with type mention or undetermined
  const partialWithMentions = identifyMentions({
    tokens: partialResult,
    mentionedUsers,
    templatePrefix
  });
  const partialsWithUrlsAndMentions = identifyUrlsAndStrings(partialWithMentions);
  const result = combineNearbyStrings(partialsWithUrlsAndMentions);
  return result;
}

/**
 * Don't need to use this util in DOM element since the white spaces will be kept as is,
 * but will need if the text is wrapped \w React.Fragement or </>
 * @link https://sendbird.slack.com/archives/GPGHESTL3/p1681180484341369
 * Or!!! -> convert any space or tab in leading/trailing to nbsp
 * to preserve the leading & trailing white spaces
 */
function getWhiteSpacePreservedText(text) {
  const NON_BREAKING_SPACE = '\u00A0';
  // Split the input string into lines
  const lines = text.split('\n');

  // Process each line and convert leading and trailing white spaces to "\u00A0"
  const processedLines = lines.map(line => {
    var _line$match, _line$match2;
    const leadingWhitespace = ((_line$match = line.match(/^\s*/)) === null || _line$match === void 0 ? void 0 : _line$match[0]) || '';
    const trailingWhitespace = ((_line$match2 = line.match(/\s*$/)) === null || _line$match2 === void 0 ? void 0 : _line$match2[0]) || '';
    const convertedLeadingWhitespace = leadingWhitespace.replace(/ /g, NON_BREAKING_SPACE);
    const convertedTrailingWhitespace = trailingWhitespace.replace(/ /g, NON_BREAKING_SPACE);
    return convertedLeadingWhitespace + line.trim() + convertedTrailingWhitespace;
  });

  // Combine the processed lines into a new string with "\n"
  const result = processedLines.join('\n');
  return result;
}


//# sourceMappingURL=tokenize-3c45100f.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageInput.js
























/**
 * Write new utils here
 * Migrate old utils as needed, and delete utils.js
 */
/**
 * FIXME:
 * Import this ChannelType enum from @sendbird/chat
 * once MessageInput.spec unit tests can be run \wo jest <-> ESM issue
 */
var ChannelType = /*#__PURE__*/function (ChannelType) {
  ChannelType["BASE"] = "base";
  ChannelType["GROUP"] = "group";
  ChannelType["OPEN"] = "open";
  return ChannelType;
}(ChannelType || {});
/**
 * FIXME: Simplify this in UIKit@v4
 * If customer is using MessageInput inside our modules(ie: Channel, Thread, etc),
 * we should use the config from the module.
 * If customer is using MessageInput outside our modules(ie: custom UI),
 * we expect Channel to be undefined and customer gets control to show/hide file-upload.
 * @param {*} channel GroupChannel | OpenChannel
 * @param {*} config SendBirdStateConfig
 * @returns boolean
 */
const checkIfFileUploadEnabled = _ref => {
  let {
    channel,
    config
  } = _ref;
  const isEnabled = index_module_b694546f_K(channel === null || channel === void 0 ? void 0 : channel.channelType).with(ChannelType.GROUP, () => {
    var _config$groupChannel;
    return config === null || config === void 0 ? void 0 : (_config$groupChannel = config.groupChannel) === null || _config$groupChannel === void 0 ? void 0 : _config$groupChannel.enableDocument;
  }).with(ChannelType.OPEN, () => {
    var _config$openChannel;
    return config === null || config === void 0 ? void 0 : (_config$openChannel = config.openChannel) === null || _config$openChannel === void 0 ? void 0 : _config$openChannel.enableDocument;
  }).otherwise(() => true);
  return isEnabled;
};

const TEXT_FIELD_ID = 'sendbird-message-input-text-field';
const LINE_HEIGHT = 76;
const MessageInput_noop = () => {};
const handleUploadFile = callback => event => {
  if (event.target.files && event.target.files[0]) {
    callback(event.target.files[0]);
  }
  // eslint-disable-next-line no-param-reassign
  event.target.value = '';
};
const displayCaret = (element, position) => {
  const range = document.createRange();
  const sel = window.getSelection();
  range.setStart(element.childNodes[0], position);
  range.collapse(true);
  sel.removeAllRanges();
  sel.addRange(range);
  element.focus();
};
const resetInput = ref => {
  try {
    /* eslint-disable no-param-reassign */
    ref.current.innerHTML = '';
  } catch (_unused) {
    //
  }
};
const initialTargetStringInfo = {
  targetString: '',
  startNodeIndex: null,
  startOffsetIndex: null,
  endNodeIndex: null,
  endOffsetIndex: null
};
const MessageInput = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef((props, ref) => {
  var _ref$current, _ref$current$textCont, _textField$innerText;
  const {
    className,
    messageFieldId,
    isEdit,
    isMentionEnabled,
    isVoiceMessageEnabled,
    disabled,
    message,
    placeholder,
    maxLength,
    onFileUpload,
    onSendMessage,
    onUpdateMessage,
    onCancelEdit,
    onStartTyping,
    channelUrl,
    channel,
    mentionSelectedUser,
    onUserMentioned,
    onMentionStringChange,
    onMentionedUserIdsUpdated,
    onVoiceMessageIconClick,
    onKeyUp,
    onKeyDown,
    renderFileUploadIcon,
    renderVoiceMessageIcon,
    renderSendMessageIcon,
    setMentionedUsers
  } = props;
  const textFieldId = messageFieldId || TEXT_FIELD_ID;
  const {
    stringSet
  } = useLocalization();
  const {
    config
  } = useSendbirdStateContext();
  const isFileUploadEnabled = checkIfFileUploadEnabled({
    channel,
    config
  });
  const fileInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [isInput, setIsInput] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [mentionedUserIds, setMentionedUserIds] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [targetStringInfo, setTargetStringInfo] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(_objectSpread2({}, initialTargetStringInfo));
  const setHeight = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => () => {
    try {
      const elem = ref === null || ref === void 0 ? void 0 : ref.current;
      const MAX_HEIGHT = window.document.body.offsetHeight * 0.6;
      if (elem && elem.scrollHeight >= LINE_HEIGHT) {
        if (MAX_HEIGHT < elem.scrollHeight) {
          elem.style.height = 'auto';
          elem.style.height = `${MAX_HEIGHT}px`;
        } else {
          elem.style.height = 'auto';
          elem.style.height = `${elem.scrollHeight}px`;
        }
      } else {
        elem.style.height = '';
      }
    } catch (error) {
      // error
    }
  }, []);

  // #Edit mode
  // for easilly initialize input value from outside, but
  // useEffect(_, [channelUrl]) erase it
  const initialValue = props === null || props === void 0 ? void 0 : props.value;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _textField$textConten;
    const textField = ref === null || ref === void 0 ? void 0 : ref.current;
    try {
      textField.innerHTML = initialValue;
      displayCaret(textField, initialValue === null || initialValue === void 0 ? void 0 : initialValue.length);
    } catch (_unused2) {
      //
    }
    setMentionedUserIds([]);
    setIsInput((textField === null || textField === void 0 ? void 0 : (_textField$textConten = textField.textContent) === null || _textField$textConten === void 0 ? void 0 : _textField$textConten.trim().length) > 0);
    setHeight();
  }, [initialValue]);

  // #Mention | Clear input value when channel changes
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!isEdit) {
      setIsInput(false);
      resetInput(ref);
    }
  }, [channelUrl]);

  // #Mention & #Edit | Fill message input values
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isEdit && message !== null && message !== void 0 && message.messageId) {
      var _message$mentionedUse, _message$mentionedMes, _textField$textConten2;
      // const textField = document.getElementById(textFieldId);
      const textField = ref === null || ref === void 0 ? void 0 : ref.current;
      if (isMentionEnabled && (message === null || message === void 0 ? void 0 : (_message$mentionedUse = message.mentionedUsers) === null || _message$mentionedUse === void 0 ? void 0 : _message$mentionedUse.length) > 0 && (message === null || message === void 0 ? void 0 : (_message$mentionedMes = message.mentionedMessageTemplate) === null || _message$mentionedMes === void 0 ? void 0 : _message$mentionedMes.length) > 0) {
        /* mention enabled */
        const {
          mentionedUsers = []
        } = message;
        const tokens = tokenizeMessage({
          messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate,
          mentionedUsers
        });
        textField.innerHTML = tokens.map(token => {
          if (token.type === TOKEN_TYPES.mention) {
            const mentionedUser = mentionedUsers.find(user => user.userId === token.userId);
            const nickname = `${USER_MENTION_PREFIX}${(mentionedUser === null || mentionedUser === void 0 ? void 0 : mentionedUser.nickname) || token.value || stringSet.MENTION_NAME__NO_NAME}`;
            return renderToString({
              userId: token.userId,
              nickname
            });
          }
          return sanitizeString(token.value);
        }).join(' ');
      } else {
        /* mention disabled */
        try {
          textField.innerHTML = sanitizeString(message === null || message === void 0 ? void 0 : message.message);
        } catch (_unused3) {
          //
        }
        setMentionedUserIds([]);
      }
      setIsInput((textField === null || textField === void 0 ? void 0 : (_textField$textConten2 = textField.textContent) === null || _textField$textConten2 === void 0 ? void 0 : _textField$textConten2.trim().length) > 0);
      setHeight();
    }
  }, [isEdit, message]);

  // #Mention | Detect MentionedLabel modified
  const useMentionedLabelDetection = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    var _textField$textConten3;
    const textField = ref === null || ref === void 0 ? void 0 : ref.current;
    if (isMentionEnabled) {
      const newMentionedUserIds = [...textField.getElementsByClassName('sendbird-mention-user-label')].map(node => {
        var _node$dataset;
        return node === null || node === void 0 ? void 0 : (_node$dataset = node.dataset) === null || _node$dataset === void 0 ? void 0 : _node$dataset.userid;
      });
      if (!arrayEqual(mentionedUserIds, newMentionedUserIds) || newMentionedUserIds.length === 0) {
        onMentionedUserIdsUpdated(newMentionedUserIds);
        setMentionedUserIds(newMentionedUserIds);
      }
    }
    setIsInput(((_textField$textConten3 = textField.textContent) === null || _textField$textConten3 === void 0 ? void 0 : _textField$textConten3.trim().length) > 0);
  }, [targetStringInfo, isMentionEnabled]);

  // #Mention | Replace selected user nickname to the MentionedUserLabel
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isMentionEnabled && mentionSelectedUser) {
      const {
        targetString,
        startNodeIndex,
        startOffsetIndex,
        endNodeIndex,
        endOffsetIndex
      } = targetStringInfo;
      if (targetString && startNodeIndex !== null && startOffsetIndex !== null) {
        var _document, _childNodes$startNode, _document2, _childNodes$endNodeIn;
        // const textField = document.getElementById(textFieldId);
        const textField = ref === null || ref === void 0 ? void 0 : ref.current;
        const childNodes = nodeListToArray(textField === null || textField === void 0 ? void 0 : textField.childNodes);
        const frontTextNode = (_document = document) === null || _document === void 0 ? void 0 : _document.createTextNode((_childNodes$startNode = childNodes[startNodeIndex]) === null || _childNodes$startNode === void 0 ? void 0 : _childNodes$startNode.textContent.slice(0, startOffsetIndex));
        const backTextNode = (_document2 = document) === null || _document2 === void 0 ? void 0 : _document2.createTextNode(`\u00A0${(_childNodes$endNodeIn = childNodes[endNodeIndex]) === null || _childNodes$endNodeIn === void 0 ? void 0 : _childNodes$endNodeIn.textContent.slice(endOffsetIndex)}`);
        const mentionLabel = renderToString({
          userId: mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.userId,
          nickname: `${USER_MENTION_TEMP_CHAR}${(mentionSelectedUser === null || mentionSelectedUser === void 0 ? void 0 : mentionSelectedUser.nickname) || stringSet.MENTION_NAME__NO_NAME}`
        });
        const div = document.createElement('div');
        div.innerHTML = mentionLabel;
        const newNodes = [...childNodes.slice(0, startNodeIndex), frontTextNode, div.childNodes[0], backTextNode, ...childNodes.slice(endNodeIndex + 1)];
        textField.innerHTML = '';
        newNodes.forEach(newNode => {
          textField.appendChild(newNode);
        });
        onUserMentioned(mentionSelectedUser);
        if (window.getSelection || document.getSelection) {
          // set caret postion
          const selection = window.getSelection() || document.getSelection();
          selection.removeAllRanges();
          const range = new Range();
          range.selectNodeContents(textField);
          range.setStart(textField.childNodes[startNodeIndex + 2], 1);
          range.setEnd(textField.childNodes[startNodeIndex + 2], 1);
          range.collapse(false);
          selection.addRange(range);
          textField.focus();
        }
        setTargetStringInfo(_objectSpread2({}, initialTargetStringInfo));
        setHeight();
        useMentionedLabelDetection();
      }
    }
  }, [mentionSelectedUser, isMentionEnabled]);

  // #Mention | Detect mentioning user nickname
  const useMentionInputDetection = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    var _window, _window$getSelection, _document3, _document3$getSelecti;
    const selection = ((_window = window) === null || _window === void 0 ? void 0 : (_window$getSelection = _window.getSelection) === null || _window$getSelection === void 0 ? void 0 : _window$getSelection.call(_window)) || ((_document3 = document) === null || _document3 === void 0 ? void 0 : (_document3$getSelecti = _document3.getSelection) === null || _document3$getSelecti === void 0 ? void 0 : _document3$getSelecti.call(_document3));
    const textField = ref === null || ref === void 0 ? void 0 : ref.current;
    if (selection.anchorNode === textField) {
      onMentionStringChange('');
    }
    if (isMentionEnabled && selection && selection.anchorNode === selection.focusNode && selection.anchorOffset === selection.focusOffset) {
      let textStack = '';
      let startNodeIndex = null;
      let startOffsetIndex = null;
      for (let index = 0; index < textField.childNodes.length; index += 1) {
        const currentNode = textField.childNodes[index];
        if (currentNode.nodeType === NodeTypes.TextNode) {
          /* text node */
          const textContent = currentNode === selection.anchorNode ? (currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent.slice(0, selection.anchorOffset)) || '' : (currentNode === null || currentNode === void 0 ? void 0 : currentNode.textContent) || '';
          if (textStack.length > 0) {
            textStack += textContent;
          } else {
            let charLastIndex = textContent.lastIndexOf(USER_MENTION_TEMP_CHAR);
            for (let i = charLastIndex - 1; i > -1; i -= 1) {
              if (textContent[i] === USER_MENTION_TEMP_CHAR) {
                charLastIndex = i;
              } else {
                break;
              }
            }
            if (charLastIndex > -1) {
              textStack = textContent;
              startNodeIndex = index;
              startOffsetIndex = charLastIndex;
            }
          }
        } else {
          /* other nodes */
          textStack = '';
          startNodeIndex = null;
          startOffsetIndex = null;
        }
        if (currentNode === selection.anchorNode) {
          /**
           * targetString could be ''
           * startNodeIndex and startOffsetIndex could be null
           */
          const targetString = textStack ? textStack.slice(startOffsetIndex) : ''; // include template character
          setTargetStringInfo({
            targetString,
            startNodeIndex,
            startOffsetIndex,
            endNodeIndex: index,
            endOffsetIndex: selection.anchorOffset
          });
          onMentionStringChange(targetString);
          return;
        }
      }
    }
  }, [isMentionEnabled]);
  const sendMessage = () => {
    const textField = ref === null || ref === void 0 ? void 0 : ref.current;
    if (!isEdit && textField !== null && textField !== void 0 && textField.textContent) {
      let messageText = '';
      let mentionTemplate = '';
      textField.childNodes.forEach(node => {
        if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Span) {
          const {
            innerText,
            dataset = {}
          } = node;
          const {
            userid = ''
          } = dataset;
          messageText += innerText;
          mentionTemplate += `${USER_MENTION_TEMP_CHAR}{${userid}}`;
        } else if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Br) {
          messageText += '\n';
          mentionTemplate += '\n';
        } else if ((node === null || node === void 0 ? void 0 : node.nodeType) === NodeTypes.ElementNode && (node === null || node === void 0 ? void 0 : node.nodeName) === NodeNames.Div) {
          // handles newline in safari
          const {
            textContent = ''
          } = node;
          messageText += `\n${textContent}`;
          mentionTemplate += `\n${textContent}`;
        } else {
          // other nodes including text node
          const {
            textContent = ''
          } = node;
          messageText += textContent;
          mentionTemplate += textContent;
        }
      });
      const params = {
        message: messageText,
        mentionTemplate
      };
      onSendMessage(params);
      resetInput(ref);
      // important: keeps the keyboard open -> must add test on refactor
      textField.focus();
      setIsInput(false);
      setHeight();
    }
  };
  const isEditDisabled = !(ref !== null && ref !== void 0 && (_ref$current = ref.current) !== null && _ref$current !== void 0 && (_ref$current$textCont = _ref$current.textContent) !== null && _ref$current$textCont !== void 0 && _ref$current$textCont.trim());
  const editMessage = () => {
    const textField = ref === null || ref === void 0 ? void 0 : ref.current;
    const messageId = message === null || message === void 0 ? void 0 : message.messageId;
    if (isEdit && messageId) {
      let messageText = '';
      let mentionTemplate = '';
      textField.childNodes.forEach(node => {
        if (node.nodeType === NodeTypes.ElementNode && node.nodeName === NodeNames.Span) {
          const {
            innerText,
            dataset = {}
          } = node;
          const {
            userid = ''
          } = dataset;
          messageText += innerText;
          mentionTemplate += `${USER_MENTION_TEMP_CHAR}{${userid}}`;
          messageText += '\n';
          mentionTemplate += '\n';
        } else {
          // other nodes including text node
          const {
            textContent = ''
          } = node;
          messageText += textContent;
          mentionTemplate += textContent;
        }
      });
      const params = {
        messageId,
        message: messageText,
        mentionTemplate
      };
      onUpdateMessage(params);
      resetInput(ref);
    }
  };
  const onPaste = usePaste({
    ref,
    setMentionedUserIds,
    setMentionedUsers,
    channel,
    setIsInput,
    setHeight
  });
  const textField = ref === null || ref === void 0 ? void 0 : ref.current;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", {
    className: getClassName([className, isEdit ? 'sendbird-message-input__edit' : '', disabled ? 'sendbird-message-input-form__disabled' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-input', disabled ? 'sendbird-message-input__disabled' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    id: `${textFieldId}${isEdit ? message === null || message === void 0 ? void 0 : message.messageId : ''}`,
    className: `sendbird-message-input--textarea ${textFieldId}`,
    contentEditable: !disabled,
    role: "textbox",
    "aria-label": "Text Input",
    disabled: disabled,
    ref: ref,
    maxLength: maxLength,
    onKeyDown: e => {
      const preventEvent = onKeyDown(e);
      if (preventEvent) {
        e.preventDefault();
      } else {
        var _textField$textConten4, _e$nativeEvent, _ref$current2, _ref$current2$childNo, _ref$current3, _ref$current3$childNo, _ref$current3$childNo2, _ref$current$childNod, _ref$current$childNod2;
        if (!e.shiftKey && e.key === MessageInputKeys.Enter && (textField === null || textField === void 0 ? void 0 : (_textField$textConten4 = textField.textContent) === null || _textField$textConten4 === void 0 ? void 0 : _textField$textConten4.trim().length) > 0 && (e === null || e === void 0 ? void 0 : (_e$nativeEvent = e.nativeEvent) === null || _e$nativeEvent === void 0 ? void 0 : _e$nativeEvent.isComposing) !== true) {
          e.preventDefault();
          sendMessage();
        }
        if (e.key === MessageInputKeys.Backspace && (ref === null || ref === void 0 ? void 0 : (_ref$current2 = ref.current) === null || _ref$current2 === void 0 ? void 0 : (_ref$current2$childNo = _ref$current2.childNodes) === null || _ref$current2$childNo === void 0 ? void 0 : _ref$current2$childNo.length) === 2 && !(ref !== null && ref !== void 0 && (_ref$current3 = ref.current) !== null && _ref$current3 !== void 0 && (_ref$current3$childNo = _ref$current3.childNodes) !== null && _ref$current3$childNo !== void 0 && (_ref$current3$childNo2 = _ref$current3$childNo[0]) !== null && _ref$current3$childNo2 !== void 0 && _ref$current3$childNo2.textContent) && (ref === null || ref === void 0 ? void 0 : (_ref$current$childNod = ref.current.childNodes) === null || _ref$current$childNod === void 0 ? void 0 : (_ref$current$childNod2 = _ref$current$childNod[1]) === null || _ref$current$childNod2 === void 0 ? void 0 : _ref$current$childNod2.nodeType) === NodeTypes.ElementNode) {
          ref === null || ref === void 0 ? void 0 : ref.current.removeChild(ref === null || ref === void 0 ? void 0 : ref.current.childNodes[1]);
        }
      }
    },
    onKeyUp: e => {
      const preventEvent = onKeyUp(e);
      if (preventEvent) {
        e.preventDefault();
      } else {
        useMentionInputDetection();
      }
    },
    onClick: () => {
      useMentionInputDetection();
    },
    onInput: () => {
      var _textField$textConten5;
      setHeight();
      onStartTyping();
      setIsInput((textField === null || textField === void 0 ? void 0 : (_textField$textConten5 = textField.textContent) === null || _textField$textConten5 === void 0 ? void 0 : _textField$textConten5.trim().length) > 0);
      useMentionedLabelDetection();
    },
    onPaste: onPaste
  }), (textField === null || textField === void 0 ? void 0 : (_textField$innerText = textField.innerText) === null || _textField$innerText === void 0 ? void 0 : _textField$innerText.length) === 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-input--placeholder",
    type: LabelTypography.BODY_1,
    color: disabled ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_3
  }, placeholder || stringSet.MESSAGE_INPUT__PLACE_HOLDER), !isEdit && isInput && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: "sendbird-message-input--send",
    height: "32px",
    width: "32px",
    onClick: () => sendMessage()
  }, (renderSendMessageIcon === null || renderSendMessageIcon === void 0 ? void 0 : renderSendMessageIcon()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.SEND,
    fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY,
    width: "20px",
    height: "20px"
  })), !isEdit && !isInput && ((renderFileUploadIcon === null || renderFileUploadIcon === void 0 ? void 0 : renderFileUploadIcon() // UIKit Dashboard configuration should have lower priority than
  // renderFileUploadIcon which is set in code level
  ) || isFileUploadEnabled && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: `sendbird-message-input--attach ${isVoiceMessageEnabled ? 'is-voice-message-enabled' : ''}`,
    height: "32px",
    width: "32px",
    onClick: () => {
      var _fileInputRef$current, _fileInputRef$current2;
      // todo: clear previous input
      fileInputRef === null || fileInputRef === void 0 ? void 0 : (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : (_fileInputRef$current2 = _fileInputRef$current.click) === null || _fileInputRef$current2 === void 0 ? void 0 : _fileInputRef$current2.call(_fileInputRef$current);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.ATTACH,
    fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT_INVERSE,
    width: "20px",
    height: "20px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    className: "sendbird-message-input--attach-input",
    type: "file",
    ref: fileInputRef,
    onChange: handleUploadFile(onFileUpload)
  }))), isVoiceMessageEnabled && !isEdit && !isInput && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: "sendbird-message-input--voice-message",
    width: "32px",
    height: "32px",
    onClick: onVoiceMessageIconClick
  }, (renderVoiceMessageIcon === null || renderVoiceMessageIcon === void 0 ? void 0 : renderVoiceMessageIcon()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.AUDIO_ON_LINED,
    fillColor: disabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT_INVERSE,
    width: "20px",
    height: "20px"
  }))), isEdit && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-input--edit-action"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    className: "sendbird-message-input--edit-action__cancel",
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: onCancelEdit
  }, stringSet.BUTTON__CANCEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    className: "sendbird-message-input--edit-action__save",
    type: ButtonTypes.PRIMARY,
    size: ButtonSizes.SMALL,
    disabled: isEditDisabled,
    onClick: () => editMessage()
  }, stringSet.BUTTON__SAVE)));
});
MessageInput.propTypes = {
  className: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.arrayOf(prop_types_default.a.string)]),
  messageFieldId: prop_types_default.a.string,
  placeholder: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.bool]),
  value: prop_types_default.a.string,
  isEdit: prop_types_default.a.bool,
  isMentionEnabled: prop_types_default.a.bool,
  isVoiceMessageEnabled: prop_types_default.a.bool,
  onVoiceMessageIconClick: prop_types_default.a.func,
  message: prop_types_default.a.shape({
    messageId: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.number]),
    message: prop_types_default.a.string,
    mentionedMessageTemplate: prop_types_default.a.string,
    mentionedUsers: prop_types_default.a.arrayOf(prop_types_default.a.shape({}))
  }),
  disabled: prop_types_default.a.bool,
  maxLength: prop_types_default.a.number,
  onFileUpload: prop_types_default.a.func,
  onSendMessage: prop_types_default.a.func,
  onUpdateMessage: prop_types_default.a.func,
  onStartTyping: prop_types_default.a.func,
  onCancelEdit: prop_types_default.a.func,
  channelUrl: prop_types_default.a.string,
  mentionSelectedUser: prop_types_default.a.shape({
    userId: prop_types_default.a.string,
    nickname: prop_types_default.a.string
  }),
  setMentionedUsers: prop_types_default.a.func,
  onUserMentioned: prop_types_default.a.func,
  onMentionStringChange: prop_types_default.a.func,
  onMentionedUserIdsUpdated: prop_types_default.a.func,
  onKeyUp: prop_types_default.a.func,
  onKeyDown: prop_types_default.a.func,
  renderVoiceMessageIcon: prop_types_default.a.func,
  renderSendMessageIcon: prop_types_default.a.func,
  renderFileUploadIcon: prop_types_default.a.func,
  channel: prop_types_default.a.shape({
    channelType: prop_types_default.a.string
  }).isRequired
};
MessageInput.defaultProps = {
  className: '',
  messageFieldId: '',
  channelUrl: '',
  onSendMessage: MessageInput_noop,
  onUpdateMessage: MessageInput_noop,
  value: null,
  message: null,
  isEdit: false,
  isMentionEnabled: false,
  isVoiceMessageEnabled: true,
  onVoiceMessageIconClick: MessageInput_noop,
  disabled: false,
  placeholder: '',
  maxLength: 5000,
  onFileUpload: MessageInput_noop,
  onCancelEdit: MessageInput_noop,
  onStartTyping: MessageInput_noop,
  mentionSelectedUser: null,
  onUserMentioned: MessageInput_noop,
  onMentionStringChange: MessageInput_noop,
  onMentionedUserIdsUpdated: MessageInput_noop,
  onKeyUp: MessageInput_noop,
  onKeyDown: MessageInput_noop,
  setMentionedUsers: MessageInput_noop,
  renderVoiceMessageIcon: MessageInput_noop,
  renderFileUploadIcon: MessageInput_noop,
  renderSendMessageIcon: MessageInput_noop
};


//# sourceMappingURL=MessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/types-3826bbff.js
// note to SDK team:
// using enum inside .d.ts wont work for jest, but const enum will work.
const Role = {
  OPERATOR: 'operator',
  NONE: 'none'
};

// type getUpdateFileMessage = (
//   channel: GroupChannel | OpenChannel,
//   messageId: string | number,
//   params: FileMessageUpdateParams,
// ) => Promise<FileMessage>;


//# sourceMappingURL=types-3826bbff.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageItemMenu.js

















function MessageItemMenu(_ref) {
  var _channel$isGroupChann;
  let {
    className,
    message,
    channel,
    isByMe = false,
    disabled = false,
    replyType,
    disableDeleteMessage = null,
    showEdit,
    showRemove,
    resendMessage,
    setQuoteMessage,
    setSupposedHover,
    onReplyInThread,
    onMoveToParentMessage = null
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const triggerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const containerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const showMenuItemCopy = isUserMessage(message);
  const showMenuItemEdit = !(channel !== null && channel !== void 0 && channel.isEphemeral) && isUserMessage(message) && isSentMessage(message) && isByMe;
  const showMenuItemResend = isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe;
  const showMenuItemDelete = !(channel !== null && channel !== void 0 && channel.isEphemeral) && !isPendingMessage(message) && isByMe;
  const showMenuItemOpenInChannel = onMoveToParentMessage !== null;
  /**
   * TODO: Manage timing issue
   * User delete pending message -> Sending message success
   */
  const isReplyTypeEnabled = !isFailedMessage(message) && !isPendingMessage(message) && (channel === null || channel === void 0 ? void 0 : (_channel$isGroupChann = channel.isGroupChannel) === null || _channel$isGroupChann === void 0 ? void 0 : _channel$isGroupChann.call(channel)) && !(channel !== null && channel !== void 0 && channel.isEphemeral) && ((channel === null || channel === void 0 ? void 0 : channel.isBroadcast) && (channel === null || channel === void 0 ? void 0 : channel.myRole) === Role.OPERATOR || !(channel !== null && channel !== void 0 && channel.isBroadcast));
  const showMenuItemReply = isReplyTypeEnabled && replyType === 'QUOTE_REPLY';
  const showMenuItemThread = isReplyTypeEnabled && replyType === 'THREAD' && !(message !== null && message !== void 0 && message.parentMessageId) && onReplyInThread;
  if (!(showMenuItemCopy || showMenuItemReply || showMenuItemThread || showMenuItemOpenInChannel || showMenuItemEdit || showMenuItemResend || showMenuItemDelete)) {
    return null;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-message-item-menu']),
    ref: containerRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      className: "sendbird-message-item-menu__trigger",
      ref: triggerRef,
      width: "32px",
      height: "32px",
      onClick: () => {
        toggleDropdown();
        setSupposedHover(true);
      },
      onBlur: () => {
        setSupposedHover(false);
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-message-item-menu__trigger__icon",
      type: IconTypes.MORE,
      fillColor: IconColors.CONTENT_INVERSE,
      width: "24px",
      height: "24px"
    })),
    menuItems: close => {
      var _message$threadInfo;
      const closeDropdown = () => {
        close();
        setSupposedHover(false);
      };
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
        className: "sendbird-message-item-menu__list",
        parentRef: triggerRef,
        parentContainRef: containerRef,
        closeDropdown: closeDropdown,
        openLeft: isByMe
      }, showMenuItemCopy && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-copy",
        onClick: () => {
          index_39eeabbb_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
          closeDropdown();
        },
        dataSbId: "ui_message_item_menu_copy"
      }, stringSet.MESSAGE_MENU__COPY), showMenuItemReply && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-reply",
        onClick: () => {
          setQuoteMessage(message);
          closeDropdown();
        },
        disable: (message === null || message === void 0 ? void 0 : message.parentMessageId) > 0,
        dataSbId: "ui_message_item_menu_reply"
      }, stringSet.MESSAGE_MENU__REPLY), showMenuItemThread && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-thread",
        onClick: () => {
          onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({
            message
          });
          closeDropdown();
        },
        dataSbId: "ui_message_item_menu_thread"
      }, stringSet.MESSAGE_MENU__THREAD), showMenuItemOpenInChannel && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-open-channel",
        onClick: () => {
          onMoveToParentMessage === null || onMoveToParentMessage === void 0 ? void 0 : onMoveToParentMessage();
          closeDropdown();
        },
        dataSbId: "ui_message_item_menu_open_in_channel"
      }, stringSet.MESSAGE_MENU__OPEN_IN_CHANNEL), showMenuItemEdit && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-edit",
        onClick: () => {
          if (!disabled) {
            showEdit(true);
            closeDropdown();
          }
        },
        dataSbId: "ui_message_item_menu_edit"
      }, stringSet.MESSAGE_MENU__EDIT), showMenuItemResend && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-resend",
        onClick: () => {
          if (!disabled) {
            resendMessage(message);
            closeDropdown();
          }
        },
        dataSbId: "ui_message_item_menu_resend"
      }, stringSet.MESSAGE_MENU__RESEND), showMenuItemDelete && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message-item-menu__list__menu-item menu-item-delete",
        onClick: () => {
          if (!disabled) {
            showRemove(true);
            closeDropdown();
          }
        },
        disable: typeof disableDeleteMessage === 'boolean' ? disableDeleteMessage : (message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) > 0,
        dataSbId: "ui_message_item_menu_delete"
      }, stringSet.MESSAGE_MENU__DELETE));
    }
  }));
}


//# sourceMappingURL=MessageItemMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ReactionButton.js






const ReactionButton = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef((props, ref) => {
  const {
    className,
    width,
    height,
    selected,
    dataSbId = '',
    onClick,
    children
  } = props;
  const onClickHandler = useLongPress({
    onLongPress: utils_40781609_noop,
    onClick
  }, {
    shouldPreventDefault: true,
    shouldStopPropagation: true
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: [...(Array.isArray(className) ? className : [className]), `sendbird-reaction-button${selected ? '--selected' : ''}`].join(' '),
    ref: ref,
    role: "button",
    style: {
      width,
      height
    }
  }, onClickHandler, {
    tabIndex: 0,
    "data-sb-id": dataSbId
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-reaction-button__inner"
  }, children));
});


//# sourceMappingURL=ReactionButton.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageItemReactionMenu.js



















function MessageItemReactionMenu(_ref) {
  let {
    className,
    message,
    userId,
    spaceFromTrigger = {
      x: 0,
      y: 0
    },
    emojiContainer,
    toggleReaction,
    setSupposedHover
  } = _ref;
  const triggerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const containerRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  if (isPendingMessage(message) || isFailedMessage(message)) {
    return null;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-message-item-reaction-menu']),
    ref: containerRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      className: "sendbird-message-item-reaction-menu__trigger",
      ref: triggerRef,
      width: "32px",
      height: "32px",
      onClick: () => {
        toggleDropdown();
        setSupposedHover(true);
      },
      onBlur: () => {
        setSupposedHover(false);
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-message-item-reaction-menu__trigger__icon",
      type: IconTypes.EMOJI_MORE,
      fillColor: IconColors.CONTENT_INVERSE,
      width: "24px",
      height: "24px"
    })),
    menuItems: close => {
      const closeDropdown = () => {
        close();
        setSupposedHover(false);
      };
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiListItems, {
        parentRef: triggerRef,
        parentContainRef: containerRef,
        closeDropdown: closeDropdown,
        spaceFromTrigger: spaceFromTrigger
      }, getEmojiListAll(emojiContainer).map(emoji => {
        var _message$reactions, _message$reactions$fi, _message$reactions$fi2;
        const isReacted = message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : (_message$reactions$fi = _message$reactions.filter(reaction => reaction.key === emoji.key)[0]) === null || _message$reactions$fi === void 0 ? void 0 : (_message$reactions$fi2 = _message$reactions$fi.userIds) === null || _message$reactions$fi2 === void 0 ? void 0 : _message$reactions$fi2.some(reactorId => reactorId === userId);
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, {
          key: emoji.key,
          width: "36px",
          height: "36px",
          selected: isReacted,
          onClick: () => {
            closeDropdown();
            toggleReaction(message, emoji.key, isReacted);
          },
          dataSbId: `ui_emoji_reactions_menu_${emoji.key}`
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
          url: emoji.url,
          width: "28px",
          height: "28px",
          placeHolder: style => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
            style: style
          }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
            type: IconTypes.QUESTION,
            fillColor: IconColors.ON_BACKGROUND_3,
            width: "28px",
            height: "28px"
          }))
        }));
      }));
    }
  }));
}


//# sourceMappingURL=MessageItemReactionMenu.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ReactionBadge.js





const ReactionBadge = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef((props, ref) => {
  const {
    className = '',
    children,
    count = '',
    isAdd = false,
    selected = false,
    onClick = () => {/* noop */}
  } = props;
  const getClassNameTail = () => {
    if (selected && !isAdd) {
      return '--selected';
    }
    if (isAdd) {
      return '--is-add';
    }
    return '';
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), `sendbird-reaction-badge${getClassNameTail()}`].join(' '),
    role: "button",
    ref: ref,
    onClick: onClick,
    onKeyDown: onClick,
    onTouchEnd: onClick,
    tabIndex: 0
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-reaction-badge__inner"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-reaction-badge__inner__icon"
  }, children), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: children && count && 'sendbird-reaction-badge__inner__count',
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_1
  }, count)));
});


//# sourceMappingURL=ReactionBadge.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/BottomSheet.js




const BottomSheet = props => {
  const {
    className = '',
    children,
    onBackdropClick
  } = props;

  // https://github.com/testing-library/react-testing-library/issues/62#issuecomment-438653348
  const portalRoot = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
  portalRoot.current = document.getElementById(MODAL_ROOT);
  if (!portalRoot.current) {
    portalRoot.current = document.createElement('div');
    portalRoot.current.setAttribute('id', MODAL_ROOT);
    document.body.appendChild(portalRoot.current);
  }
  return /*#__PURE__*/Object(react_dom["createPortal"])( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `${className} sendbird-bottomsheet`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: 'sendbird-bottomsheet__content',
    role: "dialog",
    "aria-modal": "true",
    "aria-expanded": "true"
  }, children), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `
          sendbird-bottomsheet__backdrop
        `,
    onClick: e => {
      e === null || e === void 0 ? void 0 : e.stopPropagation();
      onBackdropClick();
    }
  })), portalRoot.current);
};


//# sourceMappingURL=BottomSheet.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Tooltip.js





function Tooltip(_ref) {
  let {
    className = '',
    children = ''
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-tooltip'].join(' ')
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-tooltip__text",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONCONTENT_1
  }, children));
}


//# sourceMappingURL=Tooltip.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TooltipWrapper.js


const SPACE_FROM_TRIGGER = 8;
function TooltipWrapper(_ref) {
  let {
    className = '',
    children,
    hoverTooltip
    // clickTooltip can be added later
  } = _ref;
  const [showHoverTooltip, setShowHoverTooltip] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const childrenRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-tooltip-wrapper'].join(' '),
    onMouseOver: () => {
      setShowHoverTooltip(true);
    },
    onFocus: () => {
      setShowHoverTooltip(true);
    },
    onMouseOut: () => {
      setShowHoverTooltip(false);
    },
    onBlur: () => {
      setShowHoverTooltip(false);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-tooltip-wrapper__children",
    ref: childrenRef
  }, children), showHoverTooltip && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-tooltip-wrapper__hover-tooltip",
    style: {
      bottom: `calc(100% + ${SPACE_FROM_TRIGGER}px)`
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-tooltip-wrapper__hover-tooltip__inner"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",
    style: {
      left: childrenRef.current && `calc(${childrenRef.current.offsetWidth / 2}px - 50%)`
    }
  }, hoverTooltip))));
}


//# sourceMappingURL=TooltipWrapper.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Message/context.js


// todo@v4.0.0: combine with the provider in core-ts, see:
const defaultValue = {
  message: {},
  isByMe: false
};
const MessageContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(defaultValue);
const MessageProvider = props => {
  const {
    children,
    message,
    isByMe = false
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageContext.Provider, {
    value: {
      message,
      isByMe
    }
  }, children);
};
const useMessageContext = () => {
  const value = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(MessageContext);
  if (value === undefined) {
    throw new Error('useMessageContext must be used within a MessageProvider');
  }
  return value;
};


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/EmojiReactions.js





































const ReactedMembersBottomSheet = _ref => {
  var _message$reactions, _message$reactions2, _message$reactions2$f;
  let {
    message,
    channel,
    emojiKey = '',
    hideMenu,
    emojiContainer
  } = _ref;
  const {
    members = []
  } = channel;
  const [selectedEmoji, setSelectedEmoji] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(emojiKey);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, {
    onBackdropClick: hideMenu
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet__reacted-members"
  }, (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.map(reaction => {
    const emojiUrl = getEmojiUrl(emojiContainer, reaction.key);
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      key: reaction.key,
      className: `
                  sendbird-message__bottomsheet__reacted-members__item
                  ${selectedEmoji === reaction.key ? 'sendbird-message__bottomsheet__reacted-members__item__selected' : ''}
                `,
      onClick: () => {
        setSelectedEmoji(reaction.key);
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      url: emojiUrl,
      width: "28px",
      height: "28px",
      placeHolder: style => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        style: style
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.QUESTION,
        fillColor: IconColors.ON_BACKGROUND_3,
        width: "28px",
        height: "28px"
      }))
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.BUTTON_2,
      color: selectedEmoji === reaction.key ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3
    }, reaction.userIds.length));
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet__reactor-list"
  },
  // making a member list who reacted to the message with the `selectedEmoji`
  ((_message$reactions2 = message.reactions) === null || _message$reactions2 === void 0 ? void 0 : (_message$reactions2$f = _message$reactions2.find(reaction => reaction.key === selectedEmoji)) === null || _message$reactions2$f === void 0 ? void 0 : _message$reactions2$f.userIds.map(userId => members.find(member => member.userId === userId)).filter(member => member !== undefined)).map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    key: member.userId,
    className: "sendbird-message__bottomsheet__reactor-list__item",
    user: member,
    avatarSize: "36px"
  })))));
};

function ReactionItem(_ref) {
  var _emojisMap$get;
  let {
    reaction,
    memberNicknamesMap,
    setEmojiKey,
    toggleReaction,
    emojisMap,
    channel
  } = _ref;
  const store = useSendbirdStateContext();
  const {
    isMobile
  } = useMediaQueryContext();
  const messageStore = useMessageContext();
  const message = messageStore === null || messageStore === void 0 ? void 0 : messageStore.message;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const userId = store.config.userId;
  const reactedByMe = isReactedBy(userId, reaction);
  const showHoverTooltip = reaction.userIds.length > 0 && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !channel.isSuper;
  const handleOnClick = () => {
    setEmojiKey('');
    toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, reaction.key, reactedByMe);
  };
  const longPress = useLongPress({
    onLongPress: () => {
      setEmojiKey(reaction.key);
    },
    onClick: handleOnClick
  }, {
    shouldPreventDefault: true,
    shouldStopPropagation: true
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TooltipWrapper, {
    className: "sendbird-emoji-reactions__reaction-badge",
    hoverTooltip: showHoverTooltip ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Tooltip, null, getEmojiTooltipString(reaction, userId, memberNicknamesMap, stringSet)) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null)
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", isMobile ? longPress : {
    onClick: handleOnClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionBadge, {
    count: reaction.userIds.length,
    selected: reactedByMe
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    circle: true,
    url: ((_emojisMap$get = emojisMap.get(reaction === null || reaction === void 0 ? void 0 : reaction.key)) === null || _emojisMap$get === void 0 ? void 0 : _emojisMap$get.url) || '',
    width: "20px",
    height: "20px",
    defaultComponent: /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      width: "20px",
      height: "20px",
      type: IconTypes.QUESTION
    })
  }))));
}

const AddReactionBadgeItem = _ref => {
  let {
    onClick
  } = _ref;
  const onlyClick = useLongPress({
    onLongPress: () => {/* noop */},
    onClick
  }, {
    shouldPreventDefault: true,
    shouldStopPropagation: true
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: "sendbird-emoji-reactions__add-reaction-badge"
  }, onlyClick), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionBadge, {
    isAdd: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.EMOJI_MORE,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "20px",
    height: "20px"
  })));
};

const MobileEmojisBottomSheet = _ref => {
  let {
    userId,
    message,
    emojiContainer,
    hideMenu,
    toggleReaction
  } = _ref;
  const emojiAllList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return getEmojiListAll(emojiContainer);
  }, [emojiContainer]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, {
    onBackdropClick: hideMenu
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet"
  }, emojiAllList.map(emoji => {
    var _message$reactions$fi, _message$reactions, _message$reactions$fi2, _message$reactions$fi3;
    const isReacted = (_message$reactions$fi = message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : (_message$reactions$fi2 = _message$reactions.find(reaction => reaction.key === emoji.key)) === null || _message$reactions$fi2 === void 0 ? void 0 : (_message$reactions$fi3 = _message$reactions$fi2.userIds) === null || _message$reactions$fi3 === void 0 ? void 0 : _message$reactions$fi3.some(reactorId => reactorId === userId)) !== null && _message$reactions$fi !== void 0 ? _message$reactions$fi : false;
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, {
      key: emoji.key,
      width: "44px",
      height: "44px",
      selected: isReacted,
      onClick: e => {
        e === null || e === void 0 ? void 0 : e.stopPropagation();
        toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);
        hideMenu();
      },
      dataSbId: `ui_mobile_emoji_reactions_menu_${emoji.key}`
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      url: emoji.url,
      width: "38px",
      height: "38px",
      placeHolder: style => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        style: style
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.QUESTION,
        fillColor: IconColors.ON_BACKGROUND_3,
        width: "28px",
        height: "28px"
      }))
    }));
  })));
};

const EmojiReactions = _ref => {
  var _message$reactions$le, _message$reactions, _message$reactions$le2, _message$reactions2, _message$reactions3;
  let {
    className = '',
    userId,
    message,
    channel,
    emojiContainer,
    memberNicknamesMap,
    spaceFromTrigger = {
      x: 0,
      y: 0
    },
    isByMe = false,
    toggleReaction
  } = _ref;
  const {
    isMobile
  } = useMediaQueryContext();
  const addReactionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [showEmojiList, setShowEmojiList] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [selectedEmojiKey, setSelectedEmojiKey] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const emojisMap = getEmojiMapAll(emojiContainer);
  const showAddReactionBadge = ((_message$reactions$le = (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) !== null && _message$reactions$le !== void 0 ? _message$reactions$le : 0) < emojisMap.size;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-emoji-reactions', isByMe ? 'outgoing' : 'incoming'])
  }, ((_message$reactions$le2 = (_message$reactions2 = message.reactions) === null || _message$reactions2 === void 0 ? void 0 : _message$reactions2.length) !== null && _message$reactions$le2 !== void 0 ? _message$reactions$le2 : 0) > 0 && ((_message$reactions3 = message.reactions) === null || _message$reactions3 === void 0 ? void 0 : _message$reactions3.map(reaction => {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionItem, {
      key: reaction === null || reaction === void 0 ? void 0 : reaction.key,
      reaction: reaction,
      memberNicknamesMap: memberNicknamesMap,
      setEmojiKey: setSelectedEmojiKey,
      toggleReaction: toggleReaction,
      emojisMap: emojisMap,
      channel: channel
    });
  })), !isMobile && showAddReactionBadge && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionBadge, {
      className: "sendbird-emoji-reactions__add-reaction-badge",
      ref: addReactionRef,
      isAdd: true,
      onClick: e => {
        var _e$stopPropagation;
        toggleDropdown();
        e === null || e === void 0 ? void 0 : (_e$stopPropagation = e.stopPropagation) === null || _e$stopPropagation === void 0 ? void 0 : _e$stopPropagation.call(e);
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.EMOJI_MORE,
      fillColor: IconColors.ON_BACKGROUND_3,
      width: "20px",
      height: "20px"
    })),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiListItems, {
      parentRef: addReactionRef,
      parentContainRef: addReactionRef,
      closeDropdown: closeDropdown,
      spaceFromTrigger: spaceFromTrigger
    }, getEmojiListAll(emojiContainer).map(emoji => {
      var _message$reactions4, _message$reactions4$f, _message$reactions4$f2;
      const isReacted = (message === null || message === void 0 ? void 0 : (_message$reactions4 = message.reactions) === null || _message$reactions4 === void 0 ? void 0 : (_message$reactions4$f = _message$reactions4.find(reaction => reaction.key === emoji.key)) === null || _message$reactions4$f === void 0 ? void 0 : (_message$reactions4$f2 = _message$reactions4$f.userIds) === null || _message$reactions4$f2 === void 0 ? void 0 : _message$reactions4$f2.some(reactorId => reactorId === userId)) || false;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, {
        key: emoji.key,
        width: "36px",
        height: "36px",
        selected: isReacted,
        onClick: e => {
          closeDropdown();
          toggleReaction === null || toggleReaction === void 0 ? void 0 : toggleReaction(message, emoji.key, isReacted);
          e === null || e === void 0 ? void 0 : e.stopPropagation();
        },
        dataSbId: `ui_emoji_reactions_menu_${emoji.key}`
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
        url: (emoji === null || emoji === void 0 ? void 0 : emoji.url) || '',
        width: "28px",
        height: "28px",
        placeHolder: style => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
          style: style
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          type: IconTypes.QUESTION,
          fillColor: IconColors.ON_BACKGROUND_3,
          width: "28px",
          height: "28px"
        }))
      }));
    }))
  }), isMobile && showAddReactionBadge && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddReactionBadgeItem, {
    onClick: () => {
      setShowEmojiList(true);
    }
  }), isMobile && showEmojiList && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileEmojisBottomSheet, {
    userId: userId,
    message: message,
    emojiContainer: emojiContainer,
    hideMenu: () => {
      setShowEmojiList(false);
    },
    toggleReaction: toggleReaction
  }), isMobile && selectedEmojiKey && channel !== null && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactedMembersBottomSheet, {
    message: message,
    channel: channel,
    emojiKey: selectedEmojiKey,
    hideMenu: () => {
      setSelectedEmojiKey('');
    },
    emojiContainer: emojiContainer
  }));
};


//# sourceMappingURL=EmojiReactions.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/AdminMessage.js





function AdminMessage(_ref) {
  var _message$isAdminMessa;
  let {
    className = '',
    message
  } = _ref;
  if (!(message !== null && message !== void 0 && message.isAdminMessage || message !== null && message !== void 0 && message.messageType) || !(message !== null && message !== void 0 && (_message$isAdminMessa = message.isAdminMessage) !== null && _message$isAdminMessa !== void 0 && _message$isAdminMessa.call(message)) || (message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
    return null;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-admin-message'].join(' ')
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-admin-message__text",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, message === null || message === void 0 ? void 0 : message.message));
}


//# sourceMappingURL=AdminMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MentionLabel.js

























function MentionLabel(props) {
  var _sendbirdState$config, _sendbirdState$stores, _sendbirdState$stores2;
  const {
    mentionTemplate,
    mentionedUserId,
    mentionedUserNickname,
    isByMe
  } = props;
  const mentionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
  const sendbirdState = useSendbirdStateContext();
  const userId = sendbirdState === null || sendbirdState === void 0 ? void 0 : (_sendbirdState$config = sendbirdState.config) === null || _sendbirdState$config === void 0 ? void 0 : _sendbirdState$config.userId;
  const sdk = sendbirdState === null || sendbirdState === void 0 ? void 0 : (_sendbirdState$stores = sendbirdState.stores) === null || _sendbirdState$stores === void 0 ? void 0 : (_sendbirdState$stores2 = _sendbirdState$stores.sdkStore) === null || _sendbirdState$stores2 === void 0 ? void 0 : _sendbirdState$stores2.sdk;
  const amIBeingMentioned = userId === mentionedUserId;
  const [user, setUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])();
  const fetchUser = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(toggleDropdown => {
    if (user || !(sdk !== null && sdk !== void 0 && sdk.createApplicationUserListQuery)) {
      toggleDropdown();
      return;
    }
    const query = sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery({
      userIdsFilter: [mentionedUserId]
    });
    query.next().then(members => {
      if ((members === null || members === void 0 ? void 0 : members.length) > 0) {
        setUser(members[0]);
      }
      toggleDropdown();
    });
  }, [sdk, mentionedUserId]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
      className: `
            sendbird-word__mention
            ${amIBeingMentioned ? 'sendbird-word__mention--me' : ''}
          `,
      onClick: () => fetchUser(toggleDropdown),
      ref: mentionRef,
      "data-userid": mentionedUserId,
      "data-nickname": mentionedUserNickname,
      "data-sb-mention": true
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.CAPTION_1,
      color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1
    }, `${mentionTemplate}${mentionedUserNickname}`)),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems
    /**
    * parentRef: For catching location(x, y) of MenuItems
    * parentContainRef: For toggling more options(menus & reactions)
    */, {
      parentRef: mentionRef,
      parentContainRef: mentionRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: user,
      onSuccess: closeDropdown,
      currentUserId: userId
    }))
  });
}


//# sourceMappingURL=MentionLabel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/LinkLabel.js





const http = /https?:\/\//;
function LinkLabel(_ref) {
  let {
    className,
    src,
    type,
    color,
    children
  } = _ref;
  const url = http.test(src) ? src : `http://${src}`;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-link-label', color ? changeColorToClassName(color) : ''].join(' '),
    href: url,
    target: "_blank",
    rel: "noopener noreferrer"
    // for mobile
    ,
    onTouchEnd: e => {
      e.preventDefault();
      e.nativeEvent.stopImmediatePropagation();
      window.open(url, '_blank', 'noopener,noreferrer');
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-link-label__label",
    type: type,
    color: color
  }, children));
}
LinkLabel.propTypes = {
  className: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.arrayOf(prop_types_default.a.string)]),
  src: prop_types_default.a.string.isRequired,
  type: prop_types_default.a.string,
  color: prop_types_default.a.string,
  children: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.element, prop_types_default.a.arrayOf(prop_types_default.a.string), prop_types_default.a.arrayOf(prop_types_default.a.element)]).isRequired
};
LinkLabel.defaultProps = {
  className: '',
  type: '',
  color: ''
};
const LinkLabelTypography = LabelTypography;
const LinkLabelColors = LabelColors;


//# sourceMappingURL=LinkLabel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-d972c8e3.js








// this function is used to generate a unique key for token in message
// it changes with updated time and index
// messageUpdatedAt is the key part of this key generator
function keyGenerator(createdAt, messageUpdatedAt, index) {
  return `sb-msg_${createdAt}_${messageUpdatedAt}_${index}`;
}

function TextFragment(_ref) {
  let {
    tokens
  } = _ref;
  const messageStore = useMessageContext();
  const message = messageStore === null || messageStore === void 0 ? void 0 : messageStore.message;
  const isByMe = messageStore === null || messageStore === void 0 ? void 0 : messageStore.isByMe;
  const {
    updatedAt,
    createdAt
  } = message;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, tokens === null || tokens === void 0 ? void 0 : tokens.map((token, idx) => {
    const key = keyGenerator(createdAt, updatedAt, idx);
    return index_module_b694546f_K(token.type).with(TOKEN_TYPES.mention, () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
      className: "sendbird-word",
      key: key
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MentionLabel, {
      mentionTemplate: USER_MENTION_PREFIX,
      mentionedUserId: token.userId,
      mentionedUserNickname: token.value,
      isByMe: isByMe
    }))).with(TOKEN_TYPES.url, () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
      className: "sendbird-word",
      key: key
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LinkLabel, {
      className: "sendbird-word__url",
      src: token.value,
      type: LabelTypography.BODY_1
    }, token.value))).otherwise(() => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, {
      key: key
    }, getWhiteSpacePreservedText(token.value)));
  }));
}


//# sourceMappingURL=index-d972c8e3.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/TextMessageItemBody.js
































function TextMessageItemBody(_ref) {
  var _message$mentionedMes, _message$mentionedUse, _message$reactions;
  let {
    className = '',
    message,
    isByMe = false,
    mouseHover = false,
    isMentionEnabled = false,
    isReactionEnabled = false
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const isMessageMentioned = isMentionEnabled && (message === null || message === void 0 ? void 0 : (_message$mentionedMes = message.mentionedMessageTemplate) === null || _message$mentionedMes === void 0 ? void 0 : _message$mentionedMes.length) > 0 && (message === null || message === void 0 ? void 0 : (_message$mentionedUse = message.mentionedUsers) === null || _message$mentionedUse === void 0 ? void 0 : _message$mentionedUse.length) > 0;
  const tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (isMessageMentioned) {
      return tokenizeMessage({
        mentionedUsers: message === null || message === void 0 ? void 0 : message.mentionedUsers,
        messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate
      });
    }
    return tokenizeMessage({
      messageText: message === null || message === void 0 ? void 0 : message.message
    });
  }, [message === null || message === void 0 ? void 0 : message.updatedAt]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, TEXT_MESSAGE_BODY_CLASSNAME, isByMe ? 'outgoing' : 'incoming', mouseHover ? 'mouse-hover' : '', isReactionEnabled && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0 ? 'reactions' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, {
    tokens: tokens
  }), isEditedMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-text-message-item-body__message edited",
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2
  }, ` ${stringSet.MESSAGE_EDITED} `)));
}


//# sourceMappingURL=TextMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/FileMessageItemBody.js












function FileMessageItemBody(_ref) {
  var _message$reactions;
  let {
    className,
    message,
    isByMe = false,
    mouseHover = false,
    isReactionEnabled = false,
    truncateLimit = null
  } = _ref;
  const {
    isMobile
  } = useMediaQueryContext();
  const truncateMaxNum = truncateLimit || (isMobile ? 20 : null);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-file-message-item-body', isByMe ? 'outgoing' : 'incoming', mouseHover ? 'mouse-hover' : '', isReactionEnabled && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0 ? 'reactions' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-file-message-item-body__file-icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-file-message-item-body__file-icon__icon",
    type: {
      IMAGE: IconTypes.PHOTO,
      VIDEO: IconTypes.PLAY,
      AUDIO: IconTypes.FILE_AUDIO,
      GIF: IconTypes.GIF,
      OTHERS: IconTypes.FILE_DOCUMENT
    }[getUIKitFileType(message === null || message === void 0 ? void 0 : message.type)],
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "sendbird-file-message-item-body__file-name",
    onClick: () => {
      window.open(message === null || message === void 0 ? void 0 : message.url);
    },
    color: isByMe ? color_65ef45d7_Colors.ONCONTENT_1 : color_65ef45d7_Colors.ONBACKGROUND_1
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-file-message-item-body__file-name__text",
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1
  }, truncateString((message === null || message === void 0 ? void 0 : message.name) || (message === null || message === void 0 ? void 0 : message.url), truncateMaxNum))));
}


//# sourceMappingURL=FileMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ThumbnailMessageItemBody.js











function ThumbnailMessageItemBody(_ref) {
  var _thumbnails$, _message$reactions$le, _message$reactions;
  let {
    className = '',
    message,
    isByMe = false,
    mouseHover = false,
    isReactionEnabled = false,
    showFileViewer = utils_40781609_noop,
    style = {}
  } = _ref;
  const {
    thumbnails = []
  } = message;
  const thumbnailUrl = thumbnails.length > 0 ? (_thumbnails$ = thumbnails[0]) === null || _thumbnails$ === void 0 ? void 0 : _thumbnails$.url : '';
  const [imageRendered, setImageRendered] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const onClickHandler = useLongPress({
    onLongPress: utils_40781609_noop,
    onClick: () => {
      if (isSentMessage(message)) {
        showFileViewer === null || showFileViewer === void 0 ? void 0 : showFileViewer(true);
      }
    }
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: getClassName([className, 'sendbird-thumbnail-message-item-body', isByMe ? 'outgoing' : 'incoming', mouseHover ? 'mouse-hover' : '', isReactionEnabled && ((_message$reactions$le = (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) !== null && _message$reactions$le !== void 0 ? _message$reactions$le : 0) > 0 ? 'reactions' : ''])
  }, onClickHandler), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    className: "sendbird-thumbnail-message-item-body__thumbnail",
    url: thumbnailUrl || (message === null || message === void 0 ? void 0 : message.url),
    alt: message === null || message === void 0 ? void 0 : message.type,
    width: (style === null || style === void 0 ? void 0 : style.width) || '360px',
    height: (style === null || style === void 0 ? void 0 : style.height) || '270px',
    onLoad: () => {
      setImageRendered(true);
    },
    placeHolder: style_ => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-thumbnail-message-item-body__placeholder",
      style: style_
    })
  }), isVideoMessage(message) && !thumbnailUrl && !imageRendered && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", {
    className: "sendbird-thumbnail-message-item-body__video"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", {
    src: message === null || message === void 0 ? void 0 : message.url,
    type: message === null || message === void 0 ? void 0 : message.type
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thumbnail-message-item-body__image-cover"
  }), (isVideoMessage(message) || isGifMessage(message)) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thumbnail-message-item-body__icon-wrapper"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thumbnail-message-item-body__icon-wrapper__icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.GIF,
    fillColor: IconColors.GRAY,
    width: "34px",
    height: "34px"
  }))));
}


//# sourceMappingURL=ThumbnailMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OGMessageItemBody.js
































function OGMessageItemBody(_ref) {
  var _message$mentionedMes, _message$mentionedUse, _message$reactions, _message$ogMetaData3, _message$ogMetaData3$, _message$ogMetaData4, _message$ogMetaData4$, _message$ogMetaData5, _message$ogMetaData5$, _message$ogMetaData6, _message$ogMetaData7, _message$ogMetaData8;
  let {
    className,
    message,
    isByMe = false,
    mouseHover = false,
    isMentionEnabled = false,
    isReactionEnabled = false,
    onMessageHeightChange = () => {/* noop */}
  } = _ref;
  const imageRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const openOGUrl = () => {
    var _message$ogMetaData, _message$ogMetaData2;
    if (message !== null && message !== void 0 && (_message$ogMetaData = message.ogMetaData) !== null && _message$ogMetaData !== void 0 && _message$ogMetaData.url) window.open(message === null || message === void 0 ? void 0 : (_message$ogMetaData2 = message.ogMetaData) === null || _message$ogMetaData2 === void 0 ? void 0 : _message$ogMetaData2.url);
  };
  const isMessageMentioned = isMentionEnabled && (message === null || message === void 0 ? void 0 : (_message$mentionedMes = message.mentionedMessageTemplate) === null || _message$mentionedMes === void 0 ? void 0 : _message$mentionedMes.length) > 0 && (message === null || message === void 0 ? void 0 : (_message$mentionedUse = message.mentionedUsers) === null || _message$mentionedUse === void 0 ? void 0 : _message$mentionedUse.length) > 0;
  const tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (isMessageMentioned) {
      return tokenizeMessage({
        mentionedUsers: message === null || message === void 0 ? void 0 : message.mentionedUsers,
        messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate
      });
    }
    return tokenizeMessage({
      messageText: message === null || message === void 0 ? void 0 : message.message
    });
  }, [message === null || message === void 0 ? void 0 : message.updatedAt]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-og-message-item-body', isByMe ? 'outgoing' : 'incoming', mouseHover ? 'mouse-hover' : '', isReactionEnabled && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0 ? 'reactions' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: OG_MESSAGE_BODY_CLASSNAME
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, {
    tokens: tokens
  }), isEditedMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-og-message-item-body__text-bubble__message",
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2
  }, ` ${stringSet.MESSAGE_EDITED} `))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    ref: imageRef,
    className: `sendbird-og-message-item-body__og-thumbnail
          ${message !== null && message !== void 0 && (_message$ogMetaData3 = message.ogMetaData) !== null && _message$ogMetaData3 !== void 0 && (_message$ogMetaData3$ = _message$ogMetaData3.defaultImage) !== null && _message$ogMetaData3$ !== void 0 && _message$ogMetaData3$.url ? '' : 'sendbird-og-message-item-body__og-thumbnail__empty'}
        `,
    onClick: openOGUrl
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    onLoad: onMessageHeightChange,
    onError: () => {
      try {
        var _imageRef$current, _imageRef$current$cla;
        imageRef === null || imageRef === void 0 ? void 0 : (_imageRef$current = imageRef.current) === null || _imageRef$current === void 0 ? void 0 : (_imageRef$current$cla = _imageRef$current.classList) === null || _imageRef$current$cla === void 0 ? void 0 : _imageRef$current$cla.add('sendbird-og-message-item-body__og-thumbnail__empty');
      } catch (error) {
        // do nothing
      }
    },
    className: "sendbird-og-message-item-body__og-thumbnail__image",
    url: (message === null || message === void 0 ? void 0 : (_message$ogMetaData4 = message.ogMetaData) === null || _message$ogMetaData4 === void 0 ? void 0 : (_message$ogMetaData4$ = _message$ogMetaData4.defaultImage) === null || _message$ogMetaData4$ === void 0 ? void 0 : _message$ogMetaData4$.url) || '',
    alt: message === null || message === void 0 ? void 0 : (_message$ogMetaData5 = message.ogMetaData) === null || _message$ogMetaData5 === void 0 ? void 0 : (_message$ogMetaData5$ = _message$ogMetaData5.defaultImage) === null || _message$ogMetaData5$ === void 0 ? void 0 : _message$ogMetaData5$.alt
    // TODO: Change fixing width and height lengths
    ,
    defaultComponent: /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-og-message-item-body__og-thumbnail__place-holder"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-og-message-item-body__og-thumbnail__place-holder__icon",
      type: IconTypes.THUMBNAIL_NONE,
      width: "56px",
      height: "56px"
    }))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-og-message-item-body__description",
    onClick: openOGUrl
  }, (message === null || message === void 0 ? void 0 : (_message$ogMetaData6 = message.ogMetaData) === null || _message$ogMetaData6 === void 0 ? void 0 : _message$ogMetaData6.title) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-og-message-item-body__description__title",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, message.ogMetaData.title), (message === null || message === void 0 ? void 0 : (_message$ogMetaData7 = message.ogMetaData) === null || _message$ogMetaData7 === void 0 ? void 0 : _message$ogMetaData7.description) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-og-message-item-body__description__description",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, message.ogMetaData.description), (message === null || message === void 0 ? void 0 : (_message$ogMetaData8 = message.ogMetaData) === null || _message$ogMetaData8 === void 0 ? void 0 : _message$ogMetaData8.url) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-og-message-item-body__description__url",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, message.ogMetaData.url)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-og-message-item-body__cover"
  }));
}


//# sourceMappingURL=OGMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/UnknownMessageItemBody.js










function UnknownMessageItemBody(_ref) {
  var _message$reactions;
  let {
    className,
    message,
    isByMe = false,
    mouseHover = false,
    isReactionEnabled = false
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-unknown-message-item-body', isByMe ? 'outgoing' : 'incoming', mouseHover ? 'mouse-hover' : '', isReactionEnabled && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0 ? 'reactions' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-unknown-message-item-body__header",
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1
  }, stringSet.UNKNOWN__UNKNOWN_MESSAGE_TYPE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-unknown-message-item-body__description",
    type: LabelTypography.BODY_1,
    color: isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2
  }, stringSet.UNKNOWN__CANNOT_READ_MESSAGE));
}


//# sourceMappingURL=UnknownMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/QuoteMessage.js












function QuoteMessage(_ref) {
  var _message$sender, _message$sender2, _message, _thumbnails;
  let {
    message,
    userId = '',
    isByMe = false,
    className = '',
    isUnavailable = false,
    onClick
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    parentMessage
  } = message;
  const parentMessageSender = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender;
  const parentMessageSenderNickname = userId === (parentMessageSender === null || parentMessageSender === void 0 ? void 0 : parentMessageSender.userId) ? stringSet.QUOTED_MESSAGE__CURRENT_USER : parentMessageSender === null || parentMessageSender === void 0 ? void 0 : parentMessageSender.nickname;
  const parentMessageUrl = (parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.url) || '';
  const parentMessageType = parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.type;
  const currentMessageSenderNickname = userId === (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId) ? stringSet.QUOTED_MESSAGE__CURRENT_USER : message === null || message === void 0 ? void 0 : (_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.nickname;
  const [isThumbnailLoaded, setThumbnailLoaded] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const uikitFileTypes = getUIKitFileTypes();
  const splitFileName = parentMessage !== null && parentMessage !== void 0 && parentMessage.name ? parentMessage.name.split('/') : parentMessageUrl.split('/');
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-quote-message', isByMe ? 'outgoing' : 'incoming', isUnavailable ? 'unavailable' : '']),
    key: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.messageId,
    onClick: () => {
      if (!isUnavailable && onClick) {
        onClick();
      }
    },
    onTouchEnd: () => {
      if (!isUnavailable && onClick) {
        onClick();
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-to"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-quote-message__replied-to__icon",
    type: IconTypes.REPLY,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "12px",
    height: "12px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote-message__replied-to__text",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_3
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
    className: "sendbird-quote-message__replied-to__text__nickname"
  }, currentMessageSenderNickname), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
    className: "sendbird-quote-message__replied-to__text__text"
  }, stringSet.QUOTED_MESSAGE__REPLIED_TO), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("span", {
    className: "sendbird-quote-message__replied-to__text__nickname"
  }, parentMessageSenderNickname))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message"
  }, isUnavailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__text-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote-message__replied-message__text-message__word",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.QUOTED_MESSAGE__UNAVAILABLE)), isUserMessage(parentMessage) && (parentMessage === null || parentMessage === void 0 ? void 0 : (_message = parentMessage.message) === null || _message === void 0 ? void 0 : _message.length) > 0 && !isUnavailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__text-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote-message__replied-message__text-message__word",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.message)), isVoiceMessage(parentMessage) && parentMessageUrl && !isUnavailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__text-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote-message__replied-message__text-message__word",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.VOICE_MESSAGE)), isThumbnailMessage(parentMessage) && parentMessageUrl && !isUnavailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__thumbnail-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    className: "sendbird-quote-message__replied-message__thumbnail-message__image",
    url: parentMessageUrl,
    alt: parentMessageType,
    width: "144px",
    height: "108px",
    onLoad: () => setThumbnailLoaded(true),
    defaultComponent: /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-quote-message__replied-message__thumbnail-message__placeholder"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: isVideo(parentMessageType) ? IconTypes.PLAY : IconTypes.PHOTO,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "22px",
      height: "22px"
    })))
  }), isVideo(parentMessageType) && !((parentMessage === null || parentMessage === void 0 ? void 0 : (_thumbnails = parentMessage.thumbnails) === null || _thumbnails === void 0 ? void 0 : _thumbnails.length) > 0) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", {
    className: "sendbird-quote-message__replied-message__thumbnail-message__video"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", {
    src: parentMessageUrl,
    type: parentMessageType
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__thumbnail-message__cover"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__thumbnail-message__cover__icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.PLAY,
    fillColor: IconColors.GRAY,
    width: "14px",
    height: "14px"
  })))), isThumbnailLoaded && isGif(parentMessageType) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__thumbnail-message__cover"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__thumbnail-message__cover__icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.GIF,
    fillColor: IconColors.GRAY,
    width: "14px",
    height: "14px"
  })))), getUIKitMessageType(parentMessage) === UIKitMessageTypes.FILE && parentMessageUrl && !isUnavailable && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote-message__replied-message__file-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-quote-message__replied-message__file-message__type-icon",
    type: {
      [uikitFileTypes.IMAGE]: IconTypes.PHOTO,
      [uikitFileTypes.VIDEO]: IconTypes.PLAY,
      [uikitFileTypes.AUDIO]: IconTypes.FILE_AUDIO,
      [uikitFileTypes.GIF]: IconTypes.GIF,
      [uikitFileTypes.OTHERS]: IconTypes.FILE_DOCUMENT
    }[getUIKitFileType(parentMessageType)],
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "16px",
    height: "16px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote-message__replied-message__file-message__file-name",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_3
  }, truncateString(splitFileName[splitFileName.length - 1])))));
}


//# sourceMappingURL=QuoteMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-f1d37762.js










const MobileContextMenu = props => {
  var _message$sender, _message$threadInfo$r, _message$threadInfo;
  const {
    hideMenu,
    channel,
    message,
    replyType,
    userId,
    resendMessage,
    showEdit,
    showRemove,
    deleteMenuState,
    setQuoteMessage,
    parentRef,
    onReplyInThread,
    isOpenedFromThread = false
  } = props;
  const isByMe = (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId) === userId;
  const {
    stringSet
  } = useLocalization();
  const showMenuItemCopy = isUserMessage(message);
  const showMenuItemEdit = isUserMessage(message) && isSentMessage(message) && isByMe;
  const showMenuItemResend = isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe;
  const showMenuItemDelete = !isPendingMessage(message) && isByMe;
  const showMenuItemDeleteByState = isByMe && (deleteMenuState === undefined || deleteMenuState !== 'HIDE');
  const showMenuItemDeleteFinal = showMenuItemDeleteByState && showMenuItemDelete;
  const disableDelete = deleteMenuState !== undefined && deleteMenuState === 'DISABLE' || ((_message$threadInfo$r = message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) !== null && _message$threadInfo$r !== void 0 ? _message$threadInfo$r : 0) > 0;
  const showMenuItemDownload = !isPendingMessage(message) && isFileMessage(message) && !(isVoiceMessage(message) && (channel !== null && channel !== void 0 && channel.isSuper || channel !== null && channel !== void 0 && channel.isBroadcast));
  const showMenuItemReply = replyType === 'QUOTE_REPLY' && !isFailedMessage(message) && !isPendingMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel());
  const showMenuItemThread = replyType === 'THREAD' && !isOpenedFromThread && !isFailedMessage(message) && !isPendingMessage(message) && !isThreadMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel());
  const fileMessage = message;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    isOpen: true,
    menuItems: () => {
      var _message$parentMessag, _message$parentMessag2, _message$parentMessag3;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
        className: "sendbird-message__mobile-context-menu",
        parentRef: parentRef,
        parentContainRef: parentRef,
        closeDropdown: hideMenu
      }, showMenuItemCopy && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-copy",
        onClick: () => {
          hideMenu();
          index_39eeabbb_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
        },
        dataSbId: "ui_mobile_message_item_menu_copy"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: LabelColors.ONBACKGROUND_1
      }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__COPY), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.COPY,
        fillColor: IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      })), showMenuItemReply && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-reply",
        onClick: () => {
          hideMenu();
          setQuoteMessage(message);
        },
        disable: ((_message$parentMessag = message === null || message === void 0 ? void 0 : message.parentMessageId) !== null && _message$parentMessag !== void 0 ? _message$parentMessag : 0) > 0,
        dataSbId: "ui_mobile_message_item_menu_reply"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: ((_message$parentMessag2 = message === null || message === void 0 ? void 0 : message.parentMessageId) !== null && _message$parentMessag2 !== void 0 ? _message$parentMessag2 : 0) > 0 ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1
      }, stringSet.MESSAGE_MENU__REPLY), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.REPLY,
        fillColor: ((_message$parentMessag3 = message === null || message === void 0 ? void 0 : message.parentMessageId) !== null && _message$parentMessag3 !== void 0 ? _message$parentMessag3 : 0) > 0 ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      })), showMenuItemThread && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-reply",
        onClick: () => {
          hideMenu();
          onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({
            message
          });
        },
        dataSbId: "ui_mobile_message_item_menu_thread"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: LabelColors.ONBACKGROUND_1
      }, stringSet.MESSAGE_MENU__THREAD), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.THREAD,
        fillColor: IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      })), showMenuItemEdit && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-edit",
        onClick: () => {
          hideMenu();
          showEdit(true);
        },
        dataSbId: "ui_mobile_message_item_menu_edit"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: LabelColors.ONBACKGROUND_1
      }, stringSet.MESSAGE_MENU__EDIT), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.EDIT,
        fillColor: IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      })), showMenuItemResend && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-resend",
        onClick: () => {
          hideMenu();
          resendMessage(message);
        },
        dataSbId: "ui_mobile_message_item_menu_resend"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: LabelColors.ONBACKGROUND_1
      }, stringSet.MESSAGE_MENU__RESEND), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.REFRESH,
        fillColor: IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      })), showMenuItemDeleteFinal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-delete",
        onClick: () => {
          if (!disableDelete) {
            hideMenu();
            showRemove(true);
          }
        },
        disable: disableDelete,
        dataSbId: "ui_mobile_message_item_menu_delete"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: disableDelete ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1
      }, stringSet.MESSAGE_MENU__DELETE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.DELETE,
        fillColor: disableDelete ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      })), showMenuItemDownload && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
        className: "sendbird-message__mobile-context-menu-item menu-item-save",
        onClick: () => {
          hideMenu();
        },
        dataSbId: "ui_mobile_message_item_menu_download_file"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
        className: "sendbird-message__contextmenu--hyperlink",
        rel: "noopener noreferrer",
        href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url,
        target: "_blank"
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
        type: LabelTypography.SUBTITLE_1,
        color: LabelColors.ONBACKGROUND_1
      }, stringSet.MESSAGE_MENU__SAVE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.DOWNLOAD,
        fillColor: IconColors.PRIMARY,
        width: "24px",
        height: "24px"
      }))));
    }
  });
};

const EMOJI_SIZE = 38;
const MobileBottomSheet = props => {
  var _message$sender, _message$threadInfo$r, _message$threadInfo;
  const {
    hideMenu,
    channel,
    emojiContainer,
    message,
    replyType,
    userId,
    resendMessage,
    toggleReaction,
    isReactionEnabled,
    showEdit,
    showRemove,
    deleteMenuState,
    setQuoteMessage,
    onReplyInThread,
    isOpenedFromThread = false
  } = props;
  const isByMe = (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId) === userId;
  const {
    stringSet
  } = useLocalization();
  const showMenuItemCopy = isUserMessage(message);
  const showMenuItemEdit = isUserMessage(message) && isSentMessage(message) && isByMe;
  const showMenuItemResend = isFailedMessage(message) && (message === null || message === void 0 ? void 0 : message.isResendable) && isByMe;
  const showMenuItemDelete = !isPendingMessage(message) && isByMe;
  const showMenuItemDeleteByState = isByMe && (deleteMenuState === undefined || deleteMenuState !== 'HIDE');
  const showMenuItemDeleteFinal = showMenuItemDeleteByState && showMenuItemDelete;
  const disableDelete = deleteMenuState !== undefined && deleteMenuState === 'DISABLE' || ((_message$threadInfo$r = message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) !== null && _message$threadInfo$r !== void 0 ? _message$threadInfo$r : 0) > 0;
  const showMenuItemDownload = !isPendingMessage(message) && isFileMessage(message) && !isVoiceMessage(message);
  const showReaction = !isFailedMessage(message) && !isPendingMessage(message) && isReactionEnabled;
  const showMenuItemReply = replyType === 'QUOTE_REPLY' && !isFailedMessage(message) && !isPendingMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !(channel !== null && channel !== void 0 && channel.isBroadcast);
  const showMenuItemThread = replyType === 'THREAD' && !isOpenedFromThread && !isFailedMessage(message) && !isPendingMessage(message) && !isThreadMessage(message) && (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && !(channel !== null && channel !== void 0 && channel.isBroadcast);
  const disableReaction = (message === null || message === void 0 ? void 0 : message.parentMessageId) > 0;
  const fileMessage = message;
  const maxEmojisPerRow = Math.floor(window.innerWidth / EMOJI_SIZE) - 1;
  const [showEmojisOnly, setShowEmojisOnly] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const emojis = getEmojiListAll(emojiContainer);
  // calculate max emojis that can be shown in screen
  const visibleEmojis = showEmojisOnly ? emojis : emojis === null || emojis === void 0 ? void 0 : emojis.slice(0, maxEmojisPerRow);
  const canShowMoreEmojis = emojis.length > maxEmojisPerRow;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BottomSheet, {
    onBackdropClick: hideMenu
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet"
  }, showReaction && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet-reactions"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("ul", {
    className: "sendbird-message__bottomsheet-reaction-bar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `
                    sendbird-message__bottomsheet-reaction-bar__row
                    ${showEmojisOnly ? 'sendbird-message__bottomsheet-reaction-bar__all' : ''}
                  `
  }, visibleEmojis.map(emoji => {
    var _message$reactions, _message$reactions$fi, _message$reactions$fi2;
    const isReacted = message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : (_message$reactions$fi = _message$reactions.filter(reaction => reaction.key === emoji.key)[0]) === null || _message$reactions$fi === void 0 ? void 0 : (_message$reactions$fi2 = _message$reactions$fi.userIds) === null || _message$reactions$fi2 === void 0 ? void 0 : _message$reactions$fi2.some(reactorId => reactorId === userId);
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, {
      key: emoji.key,
      width: `${EMOJI_SIZE}px`,
      height: `${EMOJI_SIZE}px`,
      selected: isReacted,
      onClick: () => {
        hideMenu();
        toggleReaction(message, emoji.key, isReacted);
      },
      dataSbId: `ui_mobile_emoji_reactions_menu_${emoji.key}`
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      url: (emoji === null || emoji === void 0 ? void 0 : emoji.url) || '',
      width: "28px",
      height: "28px",
      placeHolder: style => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        style: style
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: IconTypes.QUESTION,
        fillColor: IconColors.ON_BACKGROUND_3,
        width: "28px",
        height: "28px"
      }))
    }));
  }), canShowMoreEmojis && !showEmojisOnly && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ReactionButton, {
    key: "emoji_more",
    width: "38px",
    height: "38px",
    onClick: () => {
      setShowEmojisOnly(true);
    },
    dataSbId: "ui_mobile_emoji_reactions_menu_emojiadd"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    url: '',
    width: "28px",
    height: "28px",
    placeHolder: style => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      style: style
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.EMOJI_MORE,
      fillColor: IconColors.ON_BACKGROUND_3,
      width: "28px",
      height: "28px"
    }))
  }))))), !showEmojisOnly && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--actions"
  }, showMenuItemCopy && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--action",
    onClick: () => {
      hideMenu();
      index_39eeabbb_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.COPY,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__COPY)), showMenuItemEdit && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--action",
    onClick: () => {
      hideMenu();
      showEdit(true);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.EDIT,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__EDIT)), showMenuItemResend && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--action",
    onClick: () => {
      hideMenu();
      resendMessage(message);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.REFRESH,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__RESEND)), showMenuItemReply && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-message__bottomsheet--action
                      ${disableReaction ? 'sendbird-message__bottomsheet--action-disabled' : ''}
                    `,
    role: "menuitem",
    "aria-disabled": disableReaction ? true : false,
    onClick: () => {
      if (!disableReaction) {
        hideMenu();
        setQuoteMessage(message);
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.REPLY,
    fillColor: disableReaction ? IconColors.ON_BACKGROUND_3 : IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: disableReaction ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1
  }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__REPLY)), showMenuItemThread && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--action",
    onClick: () => {
      hideMenu();
      onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({
        message
      });
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.THREAD,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.MESSAGE_MENU__THREAD)), showMenuItemDeleteFinal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--action",
    onClick: () => {
      if (!disableDelete) {
        hideMenu();
        showRemove === null || showRemove === void 0 ? void 0 : showRemove(true);
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.DELETE,
    fillColor: disableDelete ? IconColors.ON_BACKGROUND_4 : IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: disableDelete ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1
  }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__DELETE)), showMenuItemDownload && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message__bottomsheet--action",
    onClick: () => {
      hideMenu();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
    className: "sendbird-message__bottomsheet--hyperlink",
    rel: "noopener noreferrer",
    href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url,
    target: "_blank"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.DOWNLOAD,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_MENU__SAVE))))));
};

const MobileMenu = props => {
  const {
    message,
    hideMenu,
    userId,
    channel,
    isReactionEnabled = false,
    isByMe,
    replyType,
    disabled,
    deleteMenuState,
    showRemove,
    showEdit,
    resendMessage,
    setQuoteMessage,
    emojiContainer,
    toggleReaction,
    parentRef,
    onReplyInThread,
    isOpenedFromThread
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, isReactionEnabled ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileBottomSheet, {
    channel: channel,
    message: message,
    hideMenu: hideMenu,
    isByMe: isByMe,
    userId: userId,
    replyType: replyType,
    disabled: disabled,
    showRemove: showRemove,
    showEdit: showEdit,
    deleteMenuState: deleteMenuState,
    resendMessage: resendMessage,
    setQuoteMessage: setQuoteMessage,
    emojiContainer: emojiContainer,
    toggleReaction: toggleReaction,
    isReactionEnabled: isReactionEnabled,
    onReplyInThread: onReplyInThread,
    isOpenedFromThread: isOpenedFromThread
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileContextMenu, {
    channel: channel,
    userId: userId,
    message: message,
    hideMenu: hideMenu,
    isByMe: isByMe,
    showEdit: showEdit,
    replyType: replyType,
    disabled: disabled,
    deleteMenuState: deleteMenuState,
    showRemove: showRemove,
    resendMessage: resendMessage,
    setQuoteMessage: setQuoteMessage,
    parentRef: parentRef,
    onReplyInThread: onReplyInThread,
    isOpenedFromThread: isOpenedFromThread
  }));
};


//# sourceMappingURL=index-f1d37762.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ThreadReplies.js











function ThreadReplies(_ref) {
  var _mostRepliedUsers$;
  let {
    className,
    threadInfo,
    onClick
  } = _ref;
  const {
    mostRepliedUsers = [],
    replyCount
  } = threadInfo;
  const {
    stringSet
  } = useLocalization();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-ui-thread-replies ${className}`,
    role: "button",
    onClick: e => {
      onClick(e);
      e === null || e === void 0 ? void 0 : e.stopPropagation();
    },
    onKeyDown: e => {
      onClick(e);
      e === null || e === void 0 ? void 0 : e.stopPropagation();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-ui-thread-replies__user-profiles"
  }, mostRepliedUsers.slice(0, 4).map(user => {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      key: uuidv4(),
      className: "sendbird-ui-thread-replies__user-profiles__avatar",
      src: user === null || user === void 0 ? void 0 : user.profileUrl,
      alt: "user profile",
      width: "20px",
      height: "20px"
    });
  }), (mostRepliedUsers === null || mostRepliedUsers === void 0 ? void 0 : mostRepliedUsers.length) >= 5 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-ui-thread-replies__user-profiles__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-ui-thread-replies__user-profiles__avatar__image",
    src: mostRepliedUsers === null || mostRepliedUsers === void 0 ? void 0 : (_mostRepliedUsers$ = mostRepliedUsers[4]) === null || _mostRepliedUsers$ === void 0 ? void 0 : _mostRepliedUsers$.profileUrl,
    alt: "user profile",
    width: "20px",
    height: "20px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-ui-thread-replies__user-profiles__avatar__cover"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-ui-thread-replies__user-profiles__avatar__plus"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.PLUS,
    fillColor: IconColors.WHITE,
    width: "16px",
    height: "16px"
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-ui-thread-replies__reply-counts",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.PRIMARY
  }, replyCount === 1 ? `${replyCount} ${stringSet.CHANNEL__THREAD_REPLY}` : `${replyCount > 99 ? stringSet.CHANNEL__THREAD_OVER_MAX : replyCount} ${stringSet.CHANNEL__THREAD_REPLIES}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-ui-thread-replies__icon",
    type: IconTypes.CHEVRON_RIGHT,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  }));
}


//# sourceMappingURL=ThreadReplies.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/ProgressBar.js


/* eslint-disable no-redeclare */
const ProgressBarColorTypes = {
  PRIMARY: 'progress-bar-color--primary',
  GRAY: 'progress-bar-color--gray'
};
const ProgressBar = _ref => {
  let {
    className = '',
    disabled = false,
    maxSize,
    currentSize = 0,
    colorType = ProgressBarColorTypes.PRIMARY
  } = _ref;
  const width = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return `${currentSize / maxSize * 100}%`;
  }, [currentSize, maxSize]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-progress-bar ${className} ${colorType} ${disabled ? 'progress-bar--disabled' : ''}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-progress-bar__fill",
    style: {
      width
    }
  }));
};


//# sourceMappingURL=ProgressBar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/VoicePlayer/useVoicePlayer.js




















const generateGroupKey = function () {
  let channelUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  let key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  return `${channelUrl}-${key}`;
};

const useVoicePlayer = _ref => {
  var _voicePlayerStore$aud;
  let {
    key = '',
    channelUrl = '',
    audioFile = null,
    audioFileUrl = ''
  } = _ref;
  const [groupKey] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(generateGroupKey(channelUrl, key));
  const {
    play,
    pause,
    stop,
    voicePlayerStore
  } = useVoicePlayerContext();
  const {
    isRecordable
  } = useVoiceRecorderContext();
  const currentAudioUnit = (voicePlayerStore === null || voicePlayerStore === void 0 ? void 0 : (_voicePlayerStore$aud = voicePlayerStore.audioStorage) === null || _voicePlayerStore$aud === void 0 ? void 0 : _voicePlayerStore$aud[groupKey]) || AudioUnitDefaultValue();
  const playVoicePlayer = () => {
    if (!isRecordable) {
      play === null || play === void 0 ? void 0 : play({
        groupKey,
        audioFile,
        audioFileUrl
      });
    }
  };
  const pauseVoicePlayer = () => {
    pause === null || pause === void 0 ? void 0 : pause(groupKey);
  };
  const stopVoicePlayer = function () {
    let text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    stop === null || stop === void 0 ? void 0 : stop(text);
  };
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    return () => {
      if (audioFile || audioFileUrl) {
        var _pause, _ref2;
        // Can't get the current AudioPlayer through the React hooks(useReducer or useState) in this scope
        const voiceAudioPlayerElement = document.getElementById(consts_397a92f1["l" /* g */]);
        voiceAudioPlayerElement === null || voiceAudioPlayerElement === void 0 ? void 0 : (_pause = (_ref2 = voiceAudioPlayerElement).pause) === null || _pause === void 0 ? void 0 : _pause.call(_ref2);
      }
    };
  }, []);
  return {
    play: playVoicePlayer,
    pause: pauseVoicePlayer,
    stop: stopVoicePlayer,
    playbackTime: currentAudioUnit.playbackTime * 1000,
    duration: currentAudioUnit.duration * 1000,
    // the unit of playbackTime and duration should be millisecond
    playingStatus: currentAudioUnit.playingStatus
  };
};


//# sourceMappingURL=useVoicePlayer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/PlaybackTime.js





const PlaybackTime = _ref => {
  let {
    className,
    time = 0,
    labelType = LabelTypography.CAPTION_2,
    labelColor = LabelColors.ONCONTENT_1
  } = _ref;
  const naturalTime = time < 0 ? 0 : time;
  const hour = Math.floor(naturalTime / 3600000);
  const min = Math.floor(naturalTime % 3600000 / 60000);
  const sec = Math.floor(naturalTime % 3600000 % 60000 / 1000);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-ui-play-time ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: labelType,
    color: labelColor
  }, `${hour ? hour + ':' : ''}${min < 10 ? '0' : ''}${min ? min : '0'}:${sec < 10 ? '0' : ''}${sec}`));
};


//# sourceMappingURL=PlaybackTime.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/VoiceMessageItemBody.js
























const VoiceMessageItemBody = _ref => {
  var _message$reactions2;
  let {
    className,
    message,
    channelUrl,
    isByMe = false,
    isReactionEnabled = false
  } = _ref;
  const [usingReaction, setUsingReaction] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    play,
    // do not pause on unmount, because on desktop layout
    // the component can be paused when it is played from
    // channel and same message is unmounted from the thread
    pause,
    playbackTime = 0,
    duration,
    playingStatus = VOICE_PLAYER_STATUS.IDLE
  } = useVoicePlayer({
    channelUrl,
    key: `${message === null || message === void 0 ? void 0 : message.messageId}`,
    audioFileUrl: message === null || message === void 0 ? void 0 : message.url
  });
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _message$reactions;
    if (isReactionEnabled && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0) {
      setUsingReaction(true);
    } else {
      setUsingReaction(false);
    }
  }, [isReactionEnabled, message === null || message === void 0 ? void 0 : (_message$reactions2 = message.reactions) === null || _message$reactions2 === void 0 ? void 0 : _message$reactions2.length]);
  const progresBarMaxSize = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (message !== null && message !== void 0 && message.metaArrays) {
      var _message$metaArrays$f;
      const duration = message === null || message === void 0 ? void 0 : (_message$metaArrays$f = message.metaArrays.find(metaArray => metaArray.key === 'KEY_VOICE_MESSAGE_DURATION')) === null || _message$metaArrays$f === void 0 ? void 0 : _message$metaArrays$f.value[0];
      return duration && parseInt(duration);
    }
    return 1;
  }, [message === null || message === void 0 ? void 0 : message.metaArrays]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-voice-message-item-body ${className} ${usingReaction ? 'is-reactions-contained' : ''}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ProgressBar, {
    className: "sendbird-voice-message-item-body__progress-bar",
    maxSize: duration || progresBarMaxSize,
    currentSize: playbackTime,
    colorType: isByMe ? ProgressBarColorTypes.PRIMARY : ProgressBarColorTypes.GRAY
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-item-body__status-button"
  }, (playingStatus === VOICE_PLAYER_STATUS.IDLE || playingStatus === VOICE_PLAYER_STATUS.PAUSED) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-item-body__status-button__button",
    onClick: play
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    width: "18px",
    height: "18px",
    type: IconTypes.PLAY,
    fillColor: IconColors.PRIMARY
  })), playingStatus === VOICE_PLAYER_STATUS.PREPARING && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    width: "22.2px",
    height: "22.2px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    width: "22.2px",
    height: "22.2px",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY_2
  })), playingStatus === VOICE_PLAYER_STATUS.PLAYING && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-item-body__status-button__button",
    onClick: () => {
      pause();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-item-body__status-button__button__pause"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-item-body__status-button__button__pause__inner"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-item-body__status-button__button__pause__inner"
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaybackTime, {
    className: "sendbird-voice-message-item-body__playback-time",
    time: progresBarMaxSize - playbackTime,
    labelType: LabelTypography.BODY_1,
    labelColor: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1
  }));
};


//# sourceMappingURL=VoiceMessageItemBody.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageContent.js










































































// should initialize in UserProfileContext.jsx

function MessageContent(_ref) {
  var _sender, _message$threadInfo, _message$isAdminMessa, _channel$members2, _channel$members2$fin, _channel$joinedAt, _message$parentMessag2, _message$parentMessag3, _channel$url, _message$reactions, _message$isUserMessag, _message$isFileMessag;
  let {
    className,
    userId,
    channel,
    message,
    disabled = false,
    chainTop = false,
    chainBottom = false,
    isReactionEnabled = false,
    disableQuoteMessage = false,
    replyType,
    threadReplySelectType,
    nicknamesMap,
    emojiContainer,
    scrollToMessage,
    showEdit,
    showRemove,
    showFileViewer,
    resendMessage,
    toggleReaction,
    setQuoteMessage,
    onReplyInThread,
    onQuoteMessageClick,
    onMessageHeightChange
  } = _ref;
  const messageTypes = getUIKitMessageTypes();
  const {
    dateLocale
  } = useLocalization();
  const {
    config
  } = (useSendbirdStateContext === null || useSendbirdStateContext === void 0 ? void 0 : useSendbirdStateContext()) || {};
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const contentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    isMobile
  } = useMediaQueryContext();
  const [showMenu, setShowMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [mouseHover, setMouseHover] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [supposedHover, setSupposedHover] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const isByMe = userId === (message === null || message === void 0 ? void 0 : (_sender = message.sender) === null || _sender === void 0 ? void 0 : _sender.userId) || (message === null || message === void 0 ? void 0 : message.sendingStatus) === 'pending' || (message === null || message === void 0 ? void 0 : message.sendingStatus) === 'failed';
  const isByMeClassName = isByMe ? 'outgoing' : 'incoming';
  const chainTopClassName = chainTop ? 'chain-top' : '';
  const isReactionEnabledInChannel = isReactionEnabled && !(channel !== null && channel !== void 0 && channel.isEphemeral);
  const isReactionEnabledClassName = isReactionEnabledInChannel ? 'use-reactions' : '';
  const supposedHoverClassName = supposedHover ? 'sendbird-mouse-hover' : '';
  const useReplying = !!((replyType === 'QUOTE_REPLY' || replyType === 'THREAD') && message !== null && message !== void 0 && message.parentMessageId && message !== null && message !== void 0 && message.parentMessage && !disableQuoteMessage);
  const useReplyingClassName = useReplying ? 'use-quote' : '';
  const isOgMessageEnabledInGroupChannel = (channel === null || channel === void 0 ? void 0 : channel.isGroupChannel()) && config.groupChannel.enableOgtag;

  // Thread replies
  const displayThreadReplies = (message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) > 0 && replyType === 'THREAD';

  // onMouseDown: (e: React.MouseEvent<T>) => void;
  // onTouchStart: (e: React.TouchEvent<T>) => void;
  // onMouseUp: (e: React.MouseEvent<T>) => void;
  // onMouseLeave: (e: React.MouseEvent<T>) => void;
  // onTouchEnd: (e: React.TouchEvent<T>) => void;
  const longPress = useLongPress({
    onLongPress: () => {
      if (isMobile) {
        setShowMenu(true);
      }
    },
    onClick: utils_40781609_noop
  }, {
    delay: 300,
    shouldPreventDefault: false
  });
  if (message !== null && message !== void 0 && (_message$isAdminMessa = message.isAdminMessage) !== null && _message$isAdminMessa !== void 0 && _message$isAdminMessa.call(message) || (message === null || message === void 0 ? void 0 : message.messageType) === 'admin') {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AdminMessage, {
      message: message
    });
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName([className, 'sendbird-message-content', isByMeClassName]),
    onMouseOver: () => setMouseHover(true),
    onMouseLeave: () => setMouseHover(false)
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content__left', isReactionEnabledClassName, isByMeClassName, useReplyingClassName])
  }, !isByMe && !chainBottom &&
  /*#__PURE__*/
  /** user profile */
  external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => {
      var _channel$members, _channel$members$find, _message$sender2;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
        className: `sendbird-message-content__left__avatar ${displayThreadReplies ? 'use-thread-replies' : ''}`
        // @ts-ignore
        ,
        src: (channel === null || channel === void 0 ? void 0 : (_channel$members = channel.members) === null || _channel$members === void 0 ? void 0 : (_channel$members$find = _channel$members.find(member => {
          var _message$sender;
          return (member === null || member === void 0 ? void 0 : member.userId) === (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId);
        })) === null || _channel$members$find === void 0 ? void 0 : _channel$members$find.profileUrl) || (message === null || message === void 0 ? void 0 : (_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.profileUrl) || ''
        // TODO: Divide getting profileUrl logic to utils
        ,
        ref: avatarRef,
        width: "28px",
        height: "28px",
        onClick: () => {
          if (!disableUserProfile) toggleDropdown();
        }
      });
    },
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems
    /**
    * parentRef: For catching location(x, y) of MenuItems
    * parentContainRef: For toggling more options(menus & reactions)
    */, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile
    // @ts-ignore
    ? renderUserProfile({
      user: message === null || message === void 0 ? void 0 : message.sender,
      close: closeDropdown
    })
    // @ts-ignore
    : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: message.sender,
      onSuccess: closeDropdown
    }))
  }), isByMe && !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content-menu', isReactionEnabledClassName, supposedHoverClassName, isByMeClassName])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemMenu, {
    className: "sendbird-message-content-menu__normal-menu",
    channel: channel,
    message: message,
    isByMe: isByMe,
    replyType: replyType,
    disabled: disabled,
    showEdit: showEdit,
    showRemove: showRemove,
    resendMessage: resendMessage,
    setQuoteMessage: setQuoteMessage,
    setSupposedHover: setSupposedHover,
    onReplyInThread: _ref2 => {
      let {
        message
      } = _ref2;
      if (threadReplySelectType === ThreadReplySelectType.THREAD) {
        onReplyInThread({
          message
        });
      } else if (threadReplySelectType === ThreadReplySelectType.PARENT) {
        var _message$parentMessag;
        scrollToMessage((_message$parentMessag = message.parentMessage) === null || _message$parentMessag === void 0 ? void 0 : _message$parentMessag.createdAt, message.parentMessageId);
      }
    }
  }), isReactionEnabledInChannel && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemReactionMenu, {
    className: "sendbird-message-content-menu__reaction-menu",
    message: message,
    userId: userId,
    spaceFromTrigger: {},
    emojiContainer: emojiContainer,
    toggleReaction: toggleReaction,
    setSupposedHover: setSupposedHover
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: "sendbird-message-content__middle"
  }, isMobile ? _objectSpread2({}, longPress) : {}, {
    ref: contentRef
  }), !isByMe && !chainTop && !useReplying && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-content__middle__sender-name",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  },
  // @ts-ignore
  (channel === null || channel === void 0 ? void 0 : (_channel$members2 = channel.members) === null || _channel$members2 === void 0 ? void 0 : (_channel$members2$fin = _channel$members2.find(member => {
    var _message$sender3;
    return (member === null || member === void 0 ? void 0 : member.userId) === (message === null || message === void 0 ? void 0 : (_message$sender3 = message.sender) === null || _message$sender3 === void 0 ? void 0 : _message$sender3.userId);
  })) === null || _channel$members2$fin === void 0 ? void 0 : _channel$members2$fin.nickname) || getSenderName(message)
  // TODO: Divide getting profileUrl logic to utils
  ), useReplying ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content__middle__quote-message', isByMe ? 'outgoing' : 'incoming', useReplyingClassName])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(QuoteMessage, {
    className: "sendbird-message-content__middle__quote-message__quote",
    message: message,
    userId: userId,
    isByMe: isByMe,
    isUnavailable: replyType === 'THREAD' && ((_channel$joinedAt = channel === null || channel === void 0 ? void 0 : channel.joinedAt) !== null && _channel$joinedAt !== void 0 ? _channel$joinedAt : 0 * 1000) > ((_message$parentMessag2 = (_message$parentMessag3 = message.parentMessage) === null || _message$parentMessag3 === void 0 ? void 0 : _message$parentMessag3.createdAt) !== null && _message$parentMessag2 !== void 0 ? _message$parentMessag2 : 0),
    onClick: () => {
      var _message$parentMessag4;
      if (replyType === 'THREAD' && threadReplySelectType === ThreadReplySelectType.THREAD) {
        onQuoteMessageClick === null || onQuoteMessageClick === void 0 ? void 0 : onQuoteMessageClick({
          message: message
        });
      }
      if ((replyType === 'QUOTE_REPLY' || replyType === 'THREAD' && threadReplySelectType === ThreadReplySelectType.PARENT) && message !== null && message !== void 0 && (_message$parentMessag4 = message.parentMessage) !== null && _message$parentMessag4 !== void 0 && _message$parentMessag4.createdAt && message !== null && message !== void 0 && message.parentMessageId) {
        scrollToMessage(message.parentMessage.createdAt, message.parentMessageId);
      }
    }
  })) : null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content__middle__body-container'])
  }, isByMe && !chainBottom && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content__middle__body-container__created-at', 'left', supposedHoverClassName])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-content__middle__body-container__created-at__component-container"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageStatus, {
    message: message,
    channel: channel
  }))), isOgMessageEnabledInGroupChannel && isOGMessage(message) ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OGMessageItemBody, {
    className: "sendbird-message-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    mouseHover: mouseHover,
    isMentionEnabled: (config === null || config === void 0 ? void 0 : config.isMentionEnabled) || false,
    isReactionEnabled: isReactionEnabledInChannel,
    onMessageHeightChange: onMessageHeightChange
  }) : isTextMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextMessageItemBody, {
    className: "sendbird-message-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    mouseHover: mouseHover,
    isMentionEnabled: (config === null || config === void 0 ? void 0 : config.isMentionEnabled) || false,
    isReactionEnabled: isReactionEnabledInChannel
  }), getUIKitMessageType(message) === messageTypes.FILE && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileMessageItemBody, {
    className: "sendbird-message-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    mouseHover: mouseHover,
    isReactionEnabled: isReactionEnabledInChannel
  }), isVoiceMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageItemBody, {
    className: "sendbird-message-content__middle__message-item-body",
    message: message,
    channelUrl: (_channel$url = channel === null || channel === void 0 ? void 0 : channel.url) !== null && _channel$url !== void 0 ? _channel$url : '',
    isByMe: isByMe,
    isReactionEnabled: isReactionEnabledInChannel
  }), isThumbnailMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThumbnailMessageItemBody, {
    className: "sendbird-message-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    mouseHover: mouseHover,
    isReactionEnabled: isReactionEnabledInChannel,
    showFileViewer: showFileViewer,
    style: isMobile ? {
      width: '100%'
    } : {}
  }), getUIKitMessageType(message) === messageTypes.UNKNOWN && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnknownMessageItemBody, {
    className: "sendbird-message-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    mouseHover: mouseHover,
    isReactionEnabled: isReactionEnabledInChannel
  }), isReactionEnabledInChannel && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content-reactions', !isByMe || isThumbnailMessage(message) || isOGMessage(message) ? '' : 'primary', mouseHover ? 'mouse-hover' : ''])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactions, {
    userId: userId,
    message: message,
    channel: channel,
    isByMe: isByMe,
    emojiContainer: emojiContainer,
    memberNicknamesMap: nicknamesMap,
    toggleReaction: toggleReaction
  })), !isByMe && !chainBottom && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: getClassName(['sendbird-message-content__middle__body-container__created-at', 'right', supposedHoverClassName]),
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, 'p', {
    locale: dateLocale
  }))), displayThreadReplies && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadReplies, {
    className: "sendbird-message-content__middle__thread-replies",
    threadInfo: message === null || message === void 0 ? void 0 : message.threadInfo,
    onClick: () => onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({
      message: message
    })
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content__right', chainTopClassName, isReactionEnabledClassName, useReplyingClassName])
  }, !isByMe && !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-message-content-menu', chainTopClassName, supposedHoverClassName, isByMeClassName])
  }, isReactionEnabledInChannel && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemReactionMenu, {
    className: "sendbird-message-content-menu__reaction-menu",
    message: message,
    userId: userId,
    spaceFromTrigger: {},
    emojiContainer: emojiContainer,
    toggleReaction: toggleReaction,
    setSupposedHover: setSupposedHover
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemMenu, {
    className: "sendbird-message-content-menu__normal-menu",
    channel: channel,
    message: message,
    isByMe: isByMe,
    replyType: replyType,
    disabled: disabled,
    showRemove: showRemove,
    resendMessage: resendMessage,
    setQuoteMessage: setQuoteMessage,
    setSupposedHover: setSupposedHover,
    onReplyInThread: _ref3 => {
      let {
        message
      } = _ref3;
      if (threadReplySelectType === ThreadReplySelectType.THREAD) {
        onReplyInThread({
          message
        });
      } else if (threadReplySelectType === ThreadReplySelectType.PARENT) {
        var _message$parentMessag5;
        scrollToMessage((_message$parentMessag5 = message.parentMessage) === null || _message$parentMessag5 === void 0 ? void 0 : _message$parentMessag5.createdAt, message.parentMessageId);
      }
    }
  }))), showMenu && ((message === null || message === void 0 ? void 0 : (_message$isUserMessag = message.isUserMessage) === null || _message$isUserMessag === void 0 ? void 0 : _message$isUserMessag.call(message)) || (message === null || message === void 0 ? void 0 : (_message$isFileMessag = message.isFileMessage) === null || _message$isFileMessag === void 0 ? void 0 : _message$isFileMessag.call(message))) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileMenu, {
    parentRef: contentRef,
    channel: channel,
    hideMenu: () => {
      setShowMenu(false);
    },
    message: message,
    isReactionEnabled: isReactionEnabledInChannel,
    isByMe: isByMe,
    userId: userId,
    replyType: replyType,
    disabled: disabled,
    showRemove: showRemove,
    emojiContainer: emojiContainer,
    resendMessage: resendMessage,
    setQuoteMessage: setQuoteMessage,
    toggleReaction: toggleReaction,
    showEdit: showEdit,
    onReplyInThread: _ref4 => {
      let {
        message
      } = _ref4;
      if (threadReplySelectType === ThreadReplySelectType.THREAD) {
        onReplyInThread === null || onReplyInThread === void 0 ? void 0 : onReplyInThread({
          message
        });
      } else if (threadReplySelectType === ThreadReplySelectType.PARENT) {
        var _message$parentMessag6;
        scrollToMessage === null || scrollToMessage === void 0 ? void 0 : scrollToMessage((message === null || message === void 0 ? void 0 : (_message$parentMessag6 = message.parentMessage) === null || _message$parentMessag6 === void 0 ? void 0 : _message$parentMessag6.createdAt) || 0, (message === null || message === void 0 ? void 0 : message.parentMessageId) || 0);
      }
    }
  }));
}


//# sourceMappingURL=MessageContent.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/FileViewer.js




























const FileViewerComponent = _ref => {
  let {
    // sender
    profileUrl,
    nickname,
    // file
    name,
    type,
    url,
    // others
    isByMe,
    onCancel,
    onDelete,
    disableDelete
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__left"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__left__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    height: "32px",
    width: "32px",
    src: profileUrl
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-fileviewer__header__left__filename",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, name), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-fileviewer__header__left__sender-name",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, nickname)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right"
  }, isSupportedFileView(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right__actions"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
    className: "sendbird-fileviewer__header__right__actions__download",
    rel: "noopener noreferrer",
    href: url,
    target: "_blank"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.DOWNLOAD,
    fillColor: IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px"
  })), onDelete && isByMe && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right__actions__delete"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: disableDelete ? 'disabled' : '',
    type: IconTypes.DELETE,
    fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px",
    onClick: () => {
      if (!disableDelete) {
        onDelete();
      }
    }
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right__actions__close"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px",
    onClick: onCancel
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__content"
  }, isVideo(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", {
    controls: true,
    className: "sendbird-fileviewer__content__video"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", {
    src: url,
    type: type
  })), isImage(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", {
    src: url,
    alt: name,
    className: "sendbird-fileviewer__content__img"
  }), !isSupportedFileView(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__content__unsupported"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_1,
    color: LabelColors.ONBACKGROUND_1
  }, "Unsupoprted message"))));
};
const FileViewer = _ref2 => {
  var _useSendbirdStateCont, _useSendbirdStateCont2, _message$sender;
  let {
    onCancel,
    message
  } = _ref2;
  const {
    deleteMessage
  } = useChannelContext();
  const {
    sender,
    type,
    url,
    name = '',
    threadInfo
  } = message;
  const user = (_useSendbirdStateCont = useSendbirdStateContext()) === null || _useSendbirdStateCont === void 0 ? void 0 : (_useSendbirdStateCont2 = _useSendbirdStateCont.config) === null || _useSendbirdStateCont2 === void 0 ? void 0 : _useSendbirdStateCont2.userId;
  const isByMe = user === (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId);
  const disableDelete = (threadInfo === null || threadInfo === void 0 ? void 0 : threadInfo.replyCount) > 0;
  const {
    profileUrl,
    nickname = ''
  } = sender;
  return /*#__PURE__*/Object(react_dom["createPortal"])( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewerComponent, {
    profileUrl: profileUrl,
    nickname: nickname,
    type: type,
    url: url,
    name: name,
    onCancel: onCancel,
    onDelete: () => {
      deleteMessage(message).then(() => {
        onCancel();
      });
    },
    isByMe: isByMe,
    disableDelete: disableDelete
  }), document.getElementById(MODAL_ROOT));
};


//# sourceMappingURL=FileViewer.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/RemoveMessageModal.js































const RemoveMessage = props => {
  var _message$threadInfo;
  const {
    onSubmit = () => {/* noop */},
    onCancel,
    message
  } = props;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    deleteMessage
  } = useChannelContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    type: ButtonTypes.DANGER,
    disabled: (message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) > 0,
    onCancel: onCancel,
    onSubmit: () => {
      deleteMessage(message).then(() => {
        onSubmit();
        onCancel();
      });
    },
    submitText: stringSet.MESSAGE_MENU__DELETE,
    titleText: stringSet.MODAL__DELETE_MESSAGE__TITLE
  });
};


//# sourceMappingURL=RemoveMessageModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-4236c5c8.js



function useDebounce(callback, delay) {
  const timeoutRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    // Cleanup the timeout on unmount
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);
  function debounceFunction() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    timeoutRef.current = setTimeout(() => {
      callback(...args);
    }, delay);
  }
  return debounceFunction;
}

const DELAY = 500;
function calcScrollBottom(scrollHeight, scrollTop) {
  return scrollHeight - scrollTop;
}
function useHandleOnScrollCallback(_ref) {
  let {
    hasMore,
    hasNext,
    onScroll,
    scrollRef,
    setShowScrollDownButton
  } = _ref;
  const scrollCb = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    const element = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
    if (element == null) {
      return;
    }
    const {
      scrollTop,
      scrollHeight,
      clientHeight
    } = element;
    // https://sendbird.atlassian.net/browse/SBISSUE-11759
    // the edge case where channel is inside a page that already has scroll
    // scrollintoView will move the whole page, which we dont want
    const scrollBottom = calcScrollBottom(scrollHeight, scrollTop);
    // even if there is more to fetch or not,
    // we still have to show the scroll to bottom button
    if (typeof setShowScrollDownButton === 'function') {
      setShowScrollDownButton(scrollHeight > scrollTop + clientHeight + 1);
    }
    if (hasMore && scrollTop < consts_397a92f1["d" /* S */]) {
      onScroll(() => {
        // sets the scroll position to the bottom of the new messages
        element.scrollTop = element.scrollHeight - scrollBottom;
      });
    }
    if (hasNext) {
      onScroll(() => {
        // sets the scroll position to the top of the new messages
        element.scrollTop = scrollTop - (scrollHeight - element.scrollHeight);
      });
    }
  }, [setShowScrollDownButton, hasMore, onScroll, scrollRef]);
  return useDebounce(scrollCb, DELAY);
}


//# sourceMappingURL=index-4236c5c8.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Message/hooks/useDirtyGetMentions.js


function getMentionNodes(root) {
  if (root) {
    const mentions = root.querySelectorAll("[data-sb-mention='true']");
    const mentionsArray = Array.from(mentions);
    return mentionsArray;
  }
  return [];
}

/**
 * exported, should be backwords compatible
 * This is a dirty way to get the mentions given DOM node
 */
function useDirtyGetMentions(_ref, _ref2) {
  let {
    ref
  } = _ref;
  let {
    logger
  } = _ref2;
  // Select the node that will be observed for mutations
  const targetNode = ref.current;
  const [mentionNodes, setMentionNodes] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);

  // to get the initial mentions
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    if (targetNode) {
      const mentions = getMentionNodes(targetNode);
      setMentionNodes(mentions);
    }
  }, [targetNode]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    // Options for the observer (which mutations to observe)
    const config = {
      childList: true,
      subtree: true
    };

    // Callback function to execute when mutations are observed
    const callback = mutationList => {
      const hasMutation = mutationList.length > 0;
      if (hasMutation) {
        setMentionNodes(getMentionNodes(targetNode));
      }
    };

    // Create an observer instance linked to the callback function
    const observer = new MutationObserver(callback);
    if (targetNode) {
      // Start observing the target node for configured mutations
      observer.observe(targetNode, config);
      logger.info('useDirtyGetMentions: observer started', {
        observer,
        config
      });
    }
    return () => {
      try {
        observer.disconnect();
        logger.info('useDirtyGetMentions: observer disconnected', {
          observer
        });
      } catch (error) {
        logger.error('useDirtyGetMentions: observer disconnect failed', {
          observer
        });
      }
    };
  }, [targetNode]);
  return mentionNodes;
}


//# sourceMappingURL=useDirtyGetMentions.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/Message.js































































































const useDidMountEffect = (func, deps) => {
  const [didMount, setDidmount] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (didMount) {
      func();
    } else {
      setDidmount(true);
    }
  }, deps);
};

// todo: Refactor this component, is too complex now
const Message = _ref => {
  var _message$reactions, _message$isUserMessag;
  let {
    message,
    hasSeparator,
    chainTop,
    chainBottom,
    handleScroll,
    renderCustomSeparator,
    renderEditInput,
    renderMessage,
    renderMessageContent
  } = _ref;
  const {
    dateLocale
  } = useLocalization();
  const globalStore = useSendbirdStateContext();
  const {
    userId,
    isOnline,
    isMentionEnabled,
    userMention,
    logger
  } = globalStore.config;
  const maxUserMentionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || MAX_USER_MENTION_COUNT;
  const maxUserSuggestionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || MAX_USER_SUGGESTION_COUNT;
  const {
    initialized,
    currentGroupChannel,
    highLightedMessageId,
    setHighLightedMessageId,
    animatedMessageId,
    setAnimatedMessageId,
    updateMessage,
    scrollToMessage,
    replyType,
    threadReplySelectType,
    isReactionEnabled,
    toggleReaction,
    emojiContainer,
    nicknamesMap,
    setQuoteMessage,
    resendMessage,
    renderUserMentionItem,
    onReplyInThread,
    onQuoteMessageClick,
    onMessageAnimated,
    onMessageHighlighted,
    onScrollCallback
  } = useChannelContext();
  const [showEdit, setShowEdit] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showRemove, setShowRemove] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showFileViewer, setShowFileViewer] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [isAnimated, setIsAnimated] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [isHighlighted, setIsHighlighted] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [mentionNickname, setMentionNickname] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [mentionedUsers, setMentionedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [mentionedUserIds, setMentionedUserIds] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [messageInputEvent, setMessageInputEvent] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [selectedUser, setSelectedUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [mentionSuggestedUsers, setMentionSuggestedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const messageScrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const displaySuggestedMentionList = isOnline && isMentionEnabled && mentionNickname.length > 0 && !isDisabledBecauseFrozen(currentGroupChannel) && !isDisabledBecauseMuted(currentGroupChannel);
  const disabled = !initialized || isDisabledBecauseFrozen(currentGroupChannel) || isDisabledBecauseMuted(currentGroupChannel) || !isOnline;
  const handleOnScroll = useHandleOnScrollCallback({
    hasMore: false,
    onScroll: onScrollCallback,
    scrollRef: messageScrollRef
  });
  const mentionNodes = useDirtyGetMentions({
    ref: editMessageInputRef
  }, {
    logger
  });
  const ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < maxUserMentionCount;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setMentionedUsers(mentionedUsers.filter(_ref2 => {
      let {
        userId
      } = _ref2;
      const i = mentionedUserIds.indexOf(userId);
      if (i < 0) {
        return false;
      } else {
        mentionedUserIds.splice(i, 1);
        return true;
      }
    }));
  }, [mentionedUserIds]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    // Keep the scrollBottom value after fetching new message list
    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();
  }, []);
  /**
   * Move the messsage list scroll
   * when the message's height is changed by `showEdit` OR `message.reactions`
   */
  useDidMountEffect(() => {
    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();
  }, [showEdit, message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length]);
  useDidMountEffect(() => {
    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll(true);
  }, [message === null || message === void 0 ? void 0 : message.updatedAt]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    let animationTimeout = null;
    let messageHighlightedTimeout = null;
    if (highLightedMessageId === message.messageId && messageScrollRef !== null && messageScrollRef !== void 0 && messageScrollRef.current) {
      handleOnScroll();
      setIsAnimated(false);
      animationTimeout = setTimeout(() => {
        setIsHighlighted(true);
      }, 500);
      messageHighlightedTimeout = setTimeout(() => {
        setHighLightedMessageId(0);
        onMessageHighlighted === null || onMessageHighlighted === void 0 ? void 0 : onMessageHighlighted();
      }, 1600);
    } else {
      setIsHighlighted(false);
    }
    return () => {
      clearTimeout(animationTimeout);
      clearTimeout(messageHighlightedTimeout);
    };
  }, [highLightedMessageId, messageScrollRef.current, message.messageId]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    let animationTimeout = null;
    let messageAnimatedTimeout = null;
    if (animatedMessageId === message.messageId && messageScrollRef !== null && messageScrollRef !== void 0 && messageScrollRef.current) {
      handleOnScroll();
      setIsHighlighted(false);
      animationTimeout = setTimeout(() => {
        setIsAnimated(true);
      }, 500);
      messageAnimatedTimeout = setTimeout(() => {
        setAnimatedMessageId(0);
        onMessageAnimated === null || onMessageAnimated === void 0 ? void 0 : onMessageAnimated();
      }, 1600);
    } else {
      setIsAnimated(false);
    }
    return () => {
      clearTimeout(animationTimeout);
      clearTimeout(messageAnimatedTimeout);
    };
  }, [animatedMessageId, messageScrollRef.current, message.messageId, onMessageAnimated]);
  const renderedMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return renderMessage === null || renderMessage === void 0 ? void 0 : renderMessage({
      message,
      chainTop,
      chainBottom
    });
  }, [message, renderMessage]);
  const renderedCustomSeparator = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (renderCustomSeparator) {
      return renderCustomSeparator === null || renderCustomSeparator === void 0 ? void 0 : renderCustomSeparator({
        message: message
      });
    }
    return null;
  }, [message, renderCustomSeparator]);
  if (renderedMessage) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      // do not delete this data attribute, used for scroll to given message
      // and also for testing
      "data-sb-message-id": message.messageId,
      "data-sb-created-at": message.createdAt,
      ref: messageScrollRef,
      className: getClassName(['sendbird-msg-hoc sendbird-msg--scroll-ref', isAnimated ? 'sendbird-msg-hoc__animated' : '', isHighlighted ? 'sendbird-msg-hoc__highlighted' : ''])
    },
    // TODO: Add message instance as a function parameter
    hasSeparator && (renderedCustomSeparator || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.CAPTION_2,
      color: LabelColors.ONBACKGROUND_2
    }, format(message.createdAt, 'MMMM dd, yyyy', {
      locale: dateLocale
    })))), renderedMessage);
  }
  if (showEdit && message !== null && message !== void 0 && (_message$isUserMessag = message.isUserMessage) !== null && _message$isUserMessag !== void 0 && _message$isUserMessag.call(message)) {
    return (renderEditInput === null || renderEditInput === void 0 ? void 0 : renderEditInput()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, displaySuggestedMentionList && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionList, {
      targetNickname: mentionNickname,
      inputEvent: messageInputEvent,
      renderUserMentionItem: renderUserMentionItem,
      onUserItemClick: user => {
        if (user) {
          setMentionedUsers([...mentionedUsers, user]);
        }
        setMentionNickname('');
        setSelectedUser(user);
        setMessageInputEvent(null);
      },
      onFocusItemChange: () => {
        setMessageInputEvent(null);
      },
      onFetchUsers: users => {
        setMentionSuggestedUsers(users);
      },
      ableAddMention: ableMention,
      maxMentionCount: maxUserMentionCount,
      maxSuggestionCount: maxUserSuggestionCount
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
      isEdit: true,
      channel: currentGroupChannel,
      disabled: disabled,
      ref: editMessageInputRef,
      mentionSelectedUser: selectedUser,
      isMentionEnabled: isMentionEnabled,
      message: message,
      onStartTyping: () => {
        var _currentGroupChannel$;
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : (_currentGroupChannel$ = currentGroupChannel.startTyping) === null || _currentGroupChannel$ === void 0 ? void 0 : _currentGroupChannel$.call(currentGroupChannel);
      },
      onUpdateMessage: _ref3 => {
        var _currentGroupChannel$2;
        let {
          messageId,
          message,
          mentionTemplate
        } = _ref3;
        updateMessage({
          messageId,
          message,
          mentionedUsers,
          mentionTemplate
        });
        setShowEdit(false);
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : (_currentGroupChannel$2 = currentGroupChannel.endTyping) === null || _currentGroupChannel$2 === void 0 ? void 0 : _currentGroupChannel$2.call(currentGroupChannel);
      },
      onCancelEdit: () => {
        var _currentGroupChannel$3;
        setMentionNickname('');
        setMentionedUsers([]);
        setMentionedUserIds([]);
        setMentionSuggestedUsers([]);
        setShowEdit(false);
        currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : (_currentGroupChannel$3 = currentGroupChannel.endTyping) === null || _currentGroupChannel$3 === void 0 ? void 0 : _currentGroupChannel$3.call(currentGroupChannel);
      },
      onUserMentioned: user => {
        if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
          setSelectedUser(null);
          setMentionNickname('');
        }
      },
      onMentionStringChange: mentionText => {
        setMentionNickname(mentionText);
      },
      onMentionedUserIdsUpdated: userIds => {
        setMentionedUserIds(userIds);
      },
      onKeyDown: e => {
        if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e.key === MessageInputKeys.Enter && ableMention || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
          setMessageInputEvent(e);
          return true;
        }
        return false;
      }
    }));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-msg-hoc sendbird-msg--scroll-ref', isAnimated ? 'sendbird-msg-hoc__animated' : '', isHighlighted ? 'sendbird-msg-hoc__highlighted' : '']),
    style: {
      marginBottom: '2px'
    },
    "data-sb-message-id": message.messageId,
    "data-sb-created-at": message.createdAt,
    ref: messageScrollRef
  }, hasSeparator && (renderedCustomSeparator || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, format(message.createdAt, 'MMMM dd, yyyy', {
    locale: dateLocale
  })))), (renderMessageContent === null || renderMessageContent === void 0 ? void 0 : renderMessageContent()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageContent, {
    className: "sendbird-message-hoc__message-content",
    userId: userId,
    scrollToMessage: scrollToMessage,
    channel: currentGroupChannel,
    message: message,
    disabled: !isOnline,
    chainTop: chainTop,
    chainBottom: chainBottom,
    isReactionEnabled: isReactionEnabled,
    replyType: replyType,
    threadReplySelectType: threadReplySelectType,
    nicknamesMap: nicknamesMap,
    emojiContainer: emojiContainer,
    showEdit: setShowEdit,
    showRemove: setShowRemove,
    showFileViewer: setShowFileViewer,
    resendMessage: resendMessage,
    toggleReaction: toggleReaction,
    setQuoteMessage: setQuoteMessage,
    onReplyInThread: onReplyInThread,
    onQuoteMessageClick: onQuoteMessageClick,
    onMessageHeightChange: handleScroll
  }), showRemove && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessage, {
    message: message,
    onCancel: () => setShowRemove(false)
  }), showFileViewer && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileViewer, {
    message: message,
    onCancel: () => setShowFileViewer(false)
  }));
};


//# sourceMappingURL=Message.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/utils/compareMessagesForGrouping.js








/**
 * exported, should be backward compatible
 */
const compareMessagesForGrouping_compareMessagesForGrouping = (prevMessage, currMessage, nextMessage, currentChannel, replyType) => {
  if (replyType === 'THREAD' && currMessage !== null && currMessage !== void 0 && currMessage.threadInfo) {
    return [false, false];
  }
  const sendingStatus = (currMessage === null || currMessage === void 0 ? void 0 : currMessage.sendingStatus) || '';
  const isAcceptable = sendingStatus !== 'pending' && sendingStatus !== 'failed';
  return [isSameGroup(prevMessage, currMessage, currentChannel) && isAcceptable, isSameGroup(currMessage, nextMessage, currentChannel) && isAcceptable];
};


//# sourceMappingURL=compareMessagesForGrouping.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/utils/getMessagePartsInfo.js










/**
 * exported, should be backward compatible
 */
const getMessagePartsInfo = _ref => {
  let {
    allMessages = [],
    isMessageGroupingEnabled = true,
    currentIndex = 0,
    currentMessage = null,
    currentChannel = null,
    replyType = ''
  } = _ref;
  const previousMessage = allMessages[currentIndex - 1];
  const nextMessage = allMessages[currentIndex + 1];
  const [chainTop, chainBottom] = isMessageGroupingEnabled ? compareMessagesForGrouping_compareMessagesForGrouping(previousMessage, currentMessage, nextMessage, currentChannel, replyType) : [false, false];
  const previousMessageCreatedAt = previousMessage === null || previousMessage === void 0 ? void 0 : previousMessage.createdAt;
  const currentCreatedAt = currentMessage.createdAt;
  // https://stackoverflow.com/a/41855608
  const hasSeparator = !(previousMessageCreatedAt && isSameDay(currentCreatedAt, previousMessageCreatedAt));
  return {
    chainTop,
    chainBottom,
    hasSeparator
  };
};


//# sourceMappingURL=getMessagePartsInfo.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/UnreadCount.js








const UnreadCount = _ref => {
  var _time$toString, _time$toString$call;
  let {
    className = '',
    count = 0,
    time = '',
    onClick
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const timeArray = (time === null || time === void 0 ? void 0 : (_time$toString = time.toString) === null || _time$toString === void 0 ? void 0 : (_time$toString$call = _time$toString.call(time)) === null || _time$toString$call === void 0 ? void 0 : _time$toString$call.split(' ')) || [];
  timeArray === null || timeArray === void 0 ? void 0 : timeArray.splice(-2, 0, stringSet.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-notification${count < 1 ? '--hide' : ''} ${className}`,
    onClick: onClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-notification__text",
    color: LabelColors.ONCONTENT_1,
    type: LabelTypography.CAPTION_2
  }, `${count} `, stringSet.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE, ` ${timeArray.join(' ')}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    width: "24px",
    height: "24px",
    type: IconTypes.CHEVRON_DOWN,
    fillColor: IconColors.CONTENT
  }));
};


//# sourceMappingURL=UnreadCount.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/FrozenNotification.js







const FrozenNotification = _ref => {
  let {
    className = ''
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-notification sendbird-notification--frozen ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-notification__text",
    type: LabelTypography.CAPTION_2
  }, stringSet.CHANNEL_FROZEN));
};


//# sourceMappingURL=FrozenNotification.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/MessageList.js





































































































const MessageList_DELAY = 500;
function useSetScrollToBottom(_ref) {
  let {
    loading
  } = _ref;
  const [scrollBottom, setScrollBottom] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (loading) {
      setScrollBottom(0);
    }
  }, [loading]);
  const scrollCb = e => {
    const element = e.target;
    try {
      setScrollBottom(element.scrollHeight - element.scrollTop - element.offsetHeight);
    } catch (_unused) {
      //
    }
  };
  return {
    scrollBottom,
    scrollToBottomHandler: useDebounce(scrollCb, MessageList_DELAY)
  };
}

function useScrollBehavior() {
  const {
    scrollRef,
    scrollBehavior = 'auto'
  } = useChannelContext();
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (scrollRef.current) {
      scrollRef.current.style.scrollBehavior = scrollBehavior;
    }
  }, [scrollRef.current]);
  return null;
}

const SCROLL_BOTTOM_PADDING = 50;
const MessageList = _ref => {
  let {
    className = '',
    renderMessage,
    renderPlaceholderEmpty,
    renderCustomSeparator,
    renderPlaceholderLoader
  } = _ref;
  const {
    allMessages,
    hasMorePrev,
    hasMoreNext,
    setInitialTimeStamp,
    setAnimatedMessageId,
    setHighLightedMessageId,
    isMessageGroupingEnabled,
    scrollRef,
    onScrollCallback,
    onScrollDownCallback,
    messagesDispatcher,
    messageActionTypes,
    currentGroupChannel,
    disableMarkAsRead,
    filterMessageList,
    replyType,
    loading,
    unreadSince
  } = useChannelContext();
  const store = useSendbirdStateContext();
  const allMessagesFiltered = typeof filterMessageList === 'function' ? allMessages.filter(filterMessageList) : allMessages;
  const markAsReadScheduler = store.config.markAsReadScheduler;
  useScrollBehavior();
  const onScroll = () => {
    const element = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
    if (element == null) {
      return;
    }
    const {
      scrollTop,
      clientHeight,
      scrollHeight
    } = element;
    if (isAboutSame(scrollTop, 0, consts_397a92f1["d" /* S */])) {
      onScrollCallback(messages => {
      });
    }
    if (isAboutSame(clientHeight + scrollTop, scrollHeight, consts_397a92f1["d" /* S */]) && hasMoreNext) {
      onScrollDownCallback(_ref2 => {
      });
    }
    if (!disableMarkAsRead && isAboutSame(clientHeight + scrollTop, scrollHeight, consts_397a92f1["d" /* S */]) && !!currentGroupChannel) {
      messagesDispatcher({
        type: messageActionTypes.MARK_AS_READ,
        payload: {
          channel: currentGroupChannel
        }
      });
      markAsReadScheduler.push(currentGroupChannel);
    }
  };
  const onClickScrollBot = () => {
    var _scrollRef$current;
    setInitialTimeStamp === null || setInitialTimeStamp === void 0 ? void 0 : setInitialTimeStamp(null);
    setAnimatedMessageId === null || setAnimatedMessageId === void 0 ? void 0 : setAnimatedMessageId(null);
    setHighLightedMessageId === null || setHighLightedMessageId === void 0 ? void 0 : setHighLightedMessageId(null);
    if ((scrollRef === null || scrollRef === void 0 ? void 0 : (_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.scrollTop) > -1) {
      var _scrollRef$current$sc, _scrollRef$current2, _scrollRef$current$of, _scrollRef$current3;
      scrollRef.current.scrollTop = ((_scrollRef$current$sc = scrollRef === null || scrollRef === void 0 ? void 0 : (_scrollRef$current2 = scrollRef.current) === null || _scrollRef$current2 === void 0 ? void 0 : _scrollRef$current2.scrollHeight) !== null && _scrollRef$current$sc !== void 0 ? _scrollRef$current$sc : 0) - ((_scrollRef$current$of = scrollRef === null || scrollRef === void 0 ? void 0 : (_scrollRef$current3 = scrollRef.current) === null || _scrollRef$current3 === void 0 ? void 0 : _scrollRef$current3.offsetHeight) !== null && _scrollRef$current$of !== void 0 ? _scrollRef$current$of : 0);
    }
  };

  /**
   * 1. Move the messsage list scroll
   *    when each message's height is changed by `reactions` OR `showEdit`
   * 2. Keep the scrollBottom value after fetching new message list
   */
  const moveScroll = function () {
    let isBottomMessageAffected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    const current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
    if (current) {
      const bottom = current.scrollHeight - current.scrollTop - current.offsetHeight;
      if (scrollBottom < bottom && (!isBottomMessageAffected || scrollBottom < consts_397a92f1["d" /* S */])) {
        // Move the scroll as much as the height of the message has changed
        current.scrollTop += bottom - scrollBottom;
      }
    }
  };
  const handleOnScroll = useHandleOnScrollCallback({
    hasMore: hasMorePrev,
    hasNext: hasMoreNext,
    onScroll,
    scrollRef
  });
  const {
    scrollToBottomHandler,
    scrollBottom
  } = useSetScrollToBottom({
    loading
  });
  if (loading) {
    return typeof renderPlaceholderLoader === 'function' ? renderPlaceholderLoader() : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.LOADING
    });
  }
  if (allMessagesFiltered.length < 1) {
    if (renderPlaceholderEmpty && typeof renderPlaceholderEmpty === 'function') {
      return renderPlaceholderEmpty();
    }
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      className: "sendbird-conversation__no-messages",
      type: PlaceHolderTypes.NO_MESSAGES
    });
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-conversation__messages ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation__scroll-container"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation__padding"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation__messages-padding",
    ref: scrollRef,
    onScroll: e => {
      handleOnScroll();
      scrollToBottomHandler(e);
    }
  }, allMessagesFiltered.map((m, idx) => {
    var _sender, _store$config;
    const {
      chainTop,
      chainBottom,
      hasSeparator
    } = getMessagePartsInfo({
      allMessages: allMessagesFiltered,
      replyType,
      isMessageGroupingEnabled,
      currentIndex: idx,
      currentMessage: m,
      currentChannel: currentGroupChannel
    });
    const isByMe = (m === null || m === void 0 ? void 0 : (_sender = m.sender) === null || _sender === void 0 ? void 0 : _sender.userId) === (store === null || store === void 0 ? void 0 : (_store$config = store.config) === null || _store$config === void 0 ? void 0 : _store$config.userId);
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, {
      message: m,
      key: m === null || m === void 0 ? void 0 : m.messageId,
      isByMe: isByMe
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Message, {
      handleScroll: moveScroll,
      renderMessage: renderMessage,
      message: m,
      hasSeparator: hasSeparator,
      chainTop: chainTop,
      chainBottom: chainBottom,
      renderCustomSeparator: renderCustomSeparator
    }));
  }))), (currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.isFrozen) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FrozenNotification, {
    className: "sendbird-conversation__messages__notification"
  }), unreadSince && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnreadCount, {
    className: "sendbird-conversation__messages__notification",
    count: currentGroupChannel === null || currentGroupChannel === void 0 ? void 0 : currentGroupChannel.unreadMessageCount,
    time: unreadSince,
    onClick: () => {
      var _scrollRef$current4;
      if (scrollRef !== null && scrollRef !== void 0 && (_scrollRef$current4 = scrollRef.current) !== null && _scrollRef$current4 !== void 0 && _scrollRef$current4.scrollTop) {
        var _scrollRef$current$sc2, _scrollRef$current5, _scrollRef$current$of2, _scrollRef$current6;
        scrollRef.current.scrollTop = ((_scrollRef$current$sc2 = scrollRef === null || scrollRef === void 0 ? void 0 : (_scrollRef$current5 = scrollRef.current) === null || _scrollRef$current5 === void 0 ? void 0 : _scrollRef$current5.scrollHeight) !== null && _scrollRef$current$sc2 !== void 0 ? _scrollRef$current$sc2 : 0) - ((_scrollRef$current$of2 = scrollRef === null || scrollRef === void 0 ? void 0 : (_scrollRef$current6 = scrollRef.current) === null || _scrollRef$current6 === void 0 ? void 0 : _scrollRef$current6.offsetHeight) !== null && _scrollRef$current$of2 !== void 0 ? _scrollRef$current$of2 : 0);
      }
      if (!disableMarkAsRead && !!currentGroupChannel) {
        markAsReadScheduler.push(currentGroupChannel);
        messagesDispatcher({
          type: messageActionTypes.MARK_AS_READ,
          payload: {
            channel: currentGroupChannel
          }
        });
      }
      setInitialTimeStamp(null);
      setAnimatedMessageId(null);
      setHighLightedMessageId(null);
    }
  }),
  // This flag is an unmatched variable
  scrollBottom > SCROLL_BOTTOM_PADDING && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation__scroll-bottom-button",
    onClick: onClickScrollBot,
    onKeyDown: onClickScrollBot,
    tabIndex: 0,
    role: "button"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    width: "24px",
    height: "24px",
    type: IconTypes.CHEVRON_DOWN,
    fillColor: IconColors.PRIMARY
  })));
};


//# sourceMappingURL=MessageList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/QuoteMessageInput.js












const componentClassname = 'sendbird-quote_message_input__avatar';
function QuoteMessageThumbnail(_ref) {
  let {
    message
  } = _ref;
  if (!isFileMessage(message) || isVoiceMessage(message)) {
    return null;
  }
  const thumbnailUrl = message.thumbnails && message.thumbnails.length > 0 && message.thumbnails[0].url || isImageMessage(message) && message.url;
  if (isThumbnailMessage(message) && thumbnailUrl) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      className: componentClassname,
      url: thumbnailUrl,
      alt: message.type,
      width: "44px",
      height: "44px",
      fixedSize: true
    });
  } else if (isAudioMessage(message)) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: componentClassname
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.FILE_AUDIO,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "24px",
      height: "24px"
    }));
  } else {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: componentClassname
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.FILE_DOCUMENT,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "24px",
      height: "24px"
    }));
  }
}

function QuoteMessageInput(_ref) {
  let {
    className,
    replyingMessage,
    onClose
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const fileMessage = replyingMessage;
  const sender = replyingMessage === null || replyingMessage === void 0 ? void 0 : replyingMessage.sender;
  const displayFileIcon = isFileMessage(replyingMessage) && !isVoiceMessage(replyingMessage);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-quote_message_input', className])
  }, displayFileIcon && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(QuoteMessageThumbnail, {
    message: fileMessage
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-quote_message_input__body",
    style: {
      width: `calc(100% - ${displayFileIcon ? '164px' : '120px'})`,
      left: displayFileIcon ? '92px' : '40px'
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote_message_input__body__sender-name",
    type: LabelTypography.CAPTION_1,
    color: LabelColors.ONBACKGROUND_1
  }, `${stringSet.QUOTE_MESSAGE_INPUT__REPLY_TO} ${sender && sender.nickname ? sender.nickname : stringSet.NO_NAME}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-quote_message_input__body__message-content",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_3
  }, isImageMessage(fileMessage) && !isGifMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE, isVideoMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO, isGifMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF, isUserMessage(replyingMessage) && replyingMessage.message, getUIKitMessageType(replyingMessage) === UIKitMessageTypes.FILE && fileMessage.name, isVoiceMessage(replyingMessage) && stringSet.VOICE_MESSAGE)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-quote_message_input__close-button",
    type: IconTypes.CLOSE,
    fillColor: IconColors.ON_BACKGROUND_2,
    width: "24px",
    height: "24px",
    onClick: () => onClose(replyingMessage)
  }));
}


//# sourceMappingURL=QuoteMessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/VoiceRecorder/useVoiceRecorder.js



















// export interface UseVoiceRecorderProps extends VoiceRecorderEventHandler {
//   /**
//    * onRecordingStarted
//    * onRecordingEnded
//    */
// }
/* eslint-disable no-redeclare */
const VoiceRecorderStatus = {
  PREPARING: 'PREPARING',
  READY_TO_RECORD: 'READY_TO_RECORD',
  RECORDING: 'RECORDING',
  COMPLETED: 'COMPLETED'
};
const useVoiceRecorder_noop = () => {/* noop */};
const useVoiceRecorder = _ref => {
  let {
    onRecordingStarted = useVoiceRecorder_noop,
    onRecordingEnded = useVoiceRecorder_noop
  } = _ref;
  const {
    config
  } = useSendbirdStateContext();
  const {
    voiceRecord
  } = config;
  const {
    maxRecordingTime
  } = voiceRecord;
  const voiceRecorder = useVoiceRecorderContext();
  const {
    isRecordable
  } = voiceRecorder;
  const [recordedFile, setRecordedFile] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [recordingStatus, setRecordingStatus] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(VoiceRecorderStatus.PREPARING);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isRecordable && recordingStatus === VoiceRecorderStatus.PREPARING) {
      setRecordingStatus(VoiceRecorderStatus.READY_TO_RECORD);
    }
  }, [isRecordable]);
  const start = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    voiceRecorder === null || voiceRecorder === void 0 ? void 0 : voiceRecorder.start({
      onRecordingStarted: () => {
        setRecordingStatus(VoiceRecorderStatus.RECORDING);
        onRecordingStarted();
        startTimer();
      },
      onRecordingEnded: audioFile => {
        setRecordingStatus(VoiceRecorderStatus.COMPLETED);
        onRecordingEnded(audioFile);
        setRecordedFile(audioFile);
        stopTimer();
      }
    });
  }, [onRecordingStarted, onRecordingEnded]);
  const stop = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    voiceRecorder === null || voiceRecorder === void 0 ? void 0 : voiceRecorder.stop();
    stopTimer();
  }, [voiceRecorder]);
  const cancel = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    stop();
    setRecordedFile(null);
  }, [voiceRecorder]);

  // Timer
  const [recordingTime, setRecordingTime] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  let timer = null;
  function startTimer() {
    stopTimer();
    setRecordingTime(0);
    const interval = setInterval(() => {
      setRecordingTime(prevTime => {
        const newTime = prevTime + 100;
        if (newTime > maxRecordingTime) {
          stopTimer();
        }
        return newTime;
      });
    }, 100);
    timer = interval;
  }
  function stopTimer() {
    clearInterval(timer);
    timer = null;
  }
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (recordingTime > maxRecordingTime) {
      stop();
    }
  }, [recordingTime, maxRecordingTime, stop]);
  return {
    start,
    stop,
    cancel,
    recordingStatus,
    recordingTime,
    recordedFile,
    recordingLimit: maxRecordingTime
  };
};


//# sourceMappingURL=useVoiceRecorder.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-5ebb83a2.js









/* eslint-disable no-redeclare */
const VoiceMessageInputStatus = {
  READY_TO_RECORD: 'READY_TO_RECORD',
  RECORDING: 'RECORDING',
  READY_TO_PLAY: 'READY_TO_PLAY',
  PLAYING: 'PLAYING'
};

const ControlerIcon = _ref => {
  let {
    inputState
  } = _ref;
  switch (inputState) {
    case VoiceMessageInputStatus.READY_TO_RECORD:
      {
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
          className: "sendbird-controler-icon record-icon"
        });
      }
    case VoiceMessageInputStatus.RECORDING:
      {
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
          className: "sendbird-controler-icon stop-icon"
        });
      }
    case VoiceMessageInputStatus.READY_TO_PLAY:
      {
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          className: "sendbird-controler-icon play-icon",
          width: "20px",
          height: "20px",
          type: IconTypes.PLAY,
          fillColor: IconColors.ON_BACKGROUND_1
        });
      }
    case VoiceMessageInputStatus.PLAYING:
      {
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
          className: "sendbird-controler-icon pause-icon"
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
          className: "sendbird-controler-icon pause-icon-inner"
        }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
          className: "sendbird-controler-icon pause-icon-inner"
        }));
      }
    default:
      return null;
  }
};

const VoiceMessageInput = _ref => {
  let {
    minRecordTime = consts_397a92f1["f" /* a */],
    maximumValue,
    currentValue = 0,
    currentType,
    onCancelClick,
    onControlClick,
    onSubmitClick,
    renderCancelButton,
    renderControlButton,
    renderSubmitButton
  } = _ref;
  const [lastClickTime, setLastClickTime] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  const isReadyToRecord = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => currentType === VoiceMessageInputStatus.READY_TO_RECORD, [currentType]);
  const isRecording = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => currentType === VoiceMessageInputStatus.RECORDING, [currentType]);
  const isSendButtonDisabled = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (currentType === VoiceMessageInputStatus.READY_TO_RECORD || currentType === VoiceMessageInputStatus.RECORDING) {
      return minRecordTime > currentValue;
    }
    return false;
  }, [currentType, minRecordTime, currentValue]);
  const isPlayMode = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return currentType === VoiceMessageInputStatus.READY_TO_PLAY || currentType === VoiceMessageInputStatus.PLAYING;
  }, [currentType]);
  const {
    stringSet
  } = useLocalization();
  const handleOnCancelClick = () => {
    const currentTime = Date.now();
    if (currentTime - lastClickTime > consts_397a92f1["n" /* i */]) {
      onCancelClick();
      setLastClickTime(currentTime);
    }
  };
  const handleOnControlClick = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    const currentTime = Date.now();
    if (currentTime - lastClickTime > consts_397a92f1["n" /* i */]) {
      onControlClick(currentType);
      setLastClickTime(currentTime);
    }
  }, [currentType]);
  const handleOnSubmitClick = () => {
    const currentTime = Date.now();
    if (currentTime - lastClickTime > consts_397a92f1["n" /* i */]) {
      if (!isSendButtonDisabled) {
        onSubmitClick();
      }
      setLastClickTime(currentTime);
    }
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input__indicator"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input__indicator__progress-bar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ProgressBar, {
    className: "sendbird-voice-message-input__indicator__progress-bar__bar",
    disabled: isReadyToRecord,
    maxSize: maximumValue,
    currentSize: currentValue
  })), isRecording ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input__indicator__on-rec"
  }) : null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(PlaybackTime, {
    className: "sendbird-voice-message-input__indicator__playback-time",
    time: isPlayMode ? maximumValue - currentValue : currentValue,
    labelColor: isReadyToRecord ? LabelColors.ONBACKGROUND_4 : LabelColors.ONCONTENT_1
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input__controler"
  }, (renderCancelButton === null || renderCancelButton === void 0 ? void 0 : renderCancelButton()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "sendbird-voice-message-input__controler__cancel",
    onClick: handleOnCancelClick,
    disableUnderline: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: LabelColors.PRIMARY
  }, stringSet.BUTTON__CANCEL)), (renderControlButton === null || renderControlButton === void 0 ? void 0 : renderControlButton(currentType)) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input__controler__main",
    onClick: handleOnControlClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ControlerIcon, {
    inputState: currentType
  })), (renderSubmitButton === null || renderSubmitButton === void 0 ? void 0 : renderSubmitButton()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-voice-message-input__controler__submit ${isSendButtonDisabled ? 'voice-message--disabled' : ''}`,
    onClick: handleOnSubmitClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    width: "19px",
    height: "19px",
    type: IconTypes.SEND,
    fillColor: isSendButtonDisabled ? IconColors.ON_BACKGROUND_4 : IconColors.CONTENT
  }))));
};


//# sourceMappingURL=index-5ebb83a2.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/VoiceMessageInputWrapper-b074aec5.js













const VoiceMessageInputWrapper = _ref => {
  var _config$voiceRecord;
  let {
    channel,
    onCancelClick,
    onSubmitClick
  } = _ref;
  const uuid = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(uuidv4()).current;
  const [audioFile, setAudioFile] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [voiceInputState, setVoiceInputState] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(VoiceMessageInputStatus.READY_TO_RECORD);
  const [isSubmitted, setSubmit] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [isDisabled, setDisabled] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = useLocalization();
  const {
    config
  } = useSendbirdStateContext();
  const minRecordingTime = (config === null || config === void 0 ? void 0 : (_config$voiceRecord = config.voiceRecord) === null || _config$voiceRecord === void 0 ? void 0 : _config$voiceRecord.minRecordingTime) || consts_397a92f1["f" /* a */];
  const {
    start,
    stop,
    cancel,
    recordingTime,
    recordingStatus,
    recordingLimit
  } = useVoiceRecorder({
    onRecordingStarted: () => {
      setVoiceInputState(VoiceMessageInputStatus.RECORDING);
    },
    onRecordingEnded: audioFile => {
      setAudioFile(audioFile);
    }
  });
  const voicePlayer = useVoicePlayer({
    channelUrl: channel === null || channel === void 0 ? void 0 : channel.url,
    key: uuid,
    audioFile: audioFile
  });
  const {
    play,
    pause,
    playbackTime,
    playingStatus
  } = voicePlayer;
  const stopVoicePlayer = voicePlayer.stop;

  // disabled state: muted & frozen
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isDisabledBecauseFrozen(channel) || isDisabledBecauseMuted(channel)) {
      setDisabled(true);
    } else {
      setDisabled(false);
    }
  }, [channel === null || channel === void 0 ? void 0 : channel.myRole, channel === null || channel === void 0 ? void 0 : channel.isFrozen, channel === null || channel === void 0 ? void 0 : channel.myMutedState]);

  // call onSubmitClick when submit button is clicked and recorded audio file is created
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (isSubmitted && audioFile) {
      onSubmitClick(audioFile, recordingTime);
      setSubmit(false);
      setAudioFile(null);
    }
  }, [isSubmitted, audioFile, recordingTime]);
  // operate which control button should be displayed
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (audioFile) {
      if (recordingTime < minRecordingTime) {
        setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
        setAudioFile(null);
      } else if (playingStatus === VOICE_PLAYER_STATUS.PLAYING) {
        setVoiceInputState(VoiceMessageInputStatus.PLAYING);
      } else {
        setVoiceInputState(VoiceMessageInputStatus.READY_TO_PLAY);
      }
    }
  }, [audioFile, recordingTime, playingStatus]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input-wrapper"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageInput, {
    currentValue: recordingStatus === VoiceRecorderStatus.COMPLETED ? playbackTime : recordingTime,
    maximumValue: recordingStatus === VoiceRecorderStatus.COMPLETED ? recordingTime : recordingLimit,
    currentType: voiceInputState,
    onCancelClick: () => {
      onCancelClick();
      cancel();
      stopVoicePlayer();
    },
    onSubmitClick: () => {
      if (isDisabled) {
        setShowModal(true);
        setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
      } else {
        stop();
        pause();
        setSubmit(true);
      }
    },
    onControlClick: type => {
      switch (type) {
        case VoiceMessageInputStatus.READY_TO_RECORD:
          {
            stopVoicePlayer();
            start();
            break;
          }
        case VoiceMessageInputStatus.RECORDING:
          {
            if (recordingTime >= minRecordingTime && !isDisabled) {
              stop();
            } else if (isDisabled) {
              cancel();
              setShowModal(true);
              setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
            } else {
              cancel();
              setVoiceInputState(VoiceMessageInputStatus.READY_TO_RECORD);
            }
            break;
          }
        case VoiceMessageInputStatus.READY_TO_PLAY:
          {
            play();
            break;
          }
        case VoiceMessageInputStatus.PLAYING:
          {
            pause();
            break;
          }
      }
    }
  }), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    className: "sendbird-voice-message-input-wrapper-alert",
    titleText: isDisabledBecauseMuted(channel) ? stringSet.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED : stringSet.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,
    hideFooter: true,
    isCloseOnClickOutside: true,
    onCancel: () => {
      setShowModal(false);
      onCancelClick();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-voice-message-input-wrapper-alert__body"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    className: "sendbird-voice-message-input-wrapper-alert__body__ok-button",
    type: ButtonTypes.PRIMARY,
    size: ButtonSizes.BIG,
    onClick: () => {
      setShowModal(false);
      onCancelClick();
    }
  }, stringSet.BUTTON__OK))));
};


//# sourceMappingURL=VoiceMessageInputWrapper-b074aec5.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/MessageInput.js


























































const MessageInputWrapper = (props, ref) => {
  const {
    value,
    renderFileUploadIcon,
    renderVoiceMessageIcon,
    renderSendMessageIcon
  } = props;
  const propDisabled = props.disabled;
  const {
    currentGroupChannel,
    initialized,
    quoteMessage,
    sendMessage,
    sendFileMessage,
    sendVoiceMessage,
    setQuoteMessage,
    messageInputRef,
    renderUserMentionItem
  } = useChannelContext();
  const globalStore = useSendbirdStateContext();
  const {
    isMobile
  } = useMediaQueryContext();
  const channel = currentGroupChannel;
  const {
    isOnline,
    isMentionEnabled,
    userMention,
    isVoiceMessageEnabled,
    logger
  } = globalStore.config;
  const maxUserMentionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount) || 10;
  const maxUserSuggestionCount = (userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount) || 15;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [mentionNickname, setMentionNickname] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  // todo: set type
  const [mentionedUsers, setMentionedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [mentionedUserIds, setMentionedUserIds] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [selectedUser, setSelectedUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [mentionSuggestedUsers, setMentionSuggestedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [messageInputEvent, setMessageInputEvent] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [showVoiceMessageInput, setShowVoiceMessageInput] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const disabled = propDisabled || !initialized || isDisabledBecauseFrozen(channel) || isDisabledBecauseMuted(channel) || !isOnline;
  const isOperator$1 = utils_b7161189_isOperator(channel);
  const isBroadcast = channel === null || channel === void 0 ? void 0 : channel.isBroadcast;
  const displaySuggestedMentionList = isOnline && isMentionEnabled && mentionNickname.length > 0 && !isDisabledBecauseFrozen(channel) && !isDisabledBecauseMuted(channel) && !isBroadcast;

  // Reset when channel changes
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setMentionNickname('');
    setMentionedUsers([]);
    setMentionedUserIds([]);
    setSelectedUser(null);
    setMentionSuggestedUsers([]);
    setMessageInputEvent(null);
    setShowVoiceMessageInput(false);
  }, [channel === null || channel === void 0 ? void 0 : channel.url]);
  const mentionNodes = useDirtyGetMentions({
    ref: ref || messageInputRef
  }, {
    logger
  });
  const ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < maxUserMentionCount;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setMentionedUsers(mentionedUsers.filter(_ref => {
      let {
        userId
      } = _ref;
      const i = mentionedUserIds.indexOf(userId);
      if (i < 0) {
        return false;
      } else {
        mentionedUserIds.splice(i, 1);
        return true;
      }
    }));
  }, [mentionedUserIds]);

  // broadcast channel + not operator
  if (isBroadcast && !isOperator$1) {
    return null;
  }
  // other conditions
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-message-input-wrapper${showVoiceMessageInput ? '--voice-message' : ''}`
  }, displaySuggestedMentionList && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionList, {
    targetNickname: mentionNickname,
    inputEvent: messageInputEvent,
    renderUserMentionItem: renderUserMentionItem,
    onUserItemClick: user => {
      if (user) {
        setMentionedUsers([...mentionedUsers, user]);
      }
      setMentionNickname('');
      setSelectedUser(user);
      setMessageInputEvent(null);
    },
    onFocusItemChange: () => {
      setMessageInputEvent(null);
    },
    onFetchUsers: users => {
      setMentionSuggestedUsers(users);
    },
    ableAddMention: ableMention,
    maxMentionCount: maxUserMentionCount,
    maxSuggestionCount: maxUserSuggestionCount
  }), quoteMessage && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-input-wrapper__quote-message-input"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(QuoteMessageInput, {
    replyingMessage: quoteMessage,
    onClose: () => setQuoteMessage(null)
  })), showVoiceMessageInput ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageInputWrapper, {
    channel: channel,
    onSubmitClick: (recordedFile, duration) => {
      sendVoiceMessage(recordedFile, duration, quoteMessage);
      setQuoteMessage(null);
      setShowVoiceMessageInput(false);
    },
    onCancelClick: () => {
      setShowVoiceMessageInput(false);
    }
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
    className: "sendbird-message-input-wrapper__message-input",
    value: value,
    channelUrl: channel === null || channel === void 0 ? void 0 : channel.url,
    mentionSelectedUser: selectedUser,
    isMentionEnabled: isMentionEnabled,
    isVoiceMessageEnabled: isVoiceMessageEnabled,
    onVoiceMessageIconClick: () => {
      setShowVoiceMessageInput(true);
    },
    setMentionedUsers: setMentionedUsers,
    channel: channel,
    placeholder: quoteMessage && stringSet.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER || isDisabledBecauseFrozen(channel) && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED || isDisabledBecauseMuted(channel) && (isMobile ? stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT : stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED),
    ref: ref || messageInputRef,
    disabled: disabled,
    renderFileUploadIcon: renderFileUploadIcon,
    renderSendMessageIcon: renderSendMessageIcon,
    renderVoiceMessageIcon: renderVoiceMessageIcon,
    onStartTyping: () => {
      channel === null || channel === void 0 ? void 0 : channel.startTyping();
    },
    onSendMessage: _ref2 => {
      var _channel$endTyping;
      let {
        message,
        mentionTemplate
      } = _ref2;
      sendMessage({
        message,
        quoteMessage,
        mentionedUsers,
        mentionTemplate
      });
      setMentionNickname('');
      setMentionedUsers([]);
      setQuoteMessage(null);
      channel === null || channel === void 0 ? void 0 : (_channel$endTyping = channel.endTyping) === null || _channel$endTyping === void 0 ? void 0 : _channel$endTyping.call(channel);
    },
    onFileUpload: file => {
      sendFileMessage(file, quoteMessage);
      setQuoteMessage(null);
    },
    onUserMentioned: user => {
      if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
        setSelectedUser(null);
        setMentionNickname('');
      }
    },
    onMentionStringChange: mentionText => {
      setMentionNickname(mentionText);
    },
    onMentionedUserIdsUpdated: userIds => {
      setMentionedUserIds(userIds);
    },
    onKeyDown: e => {
      if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e.key === MessageInputKeys.Enter && ableMention || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
        setMessageInputEvent(e);
        return true;
      }
      return false;
    }
  }));
};
var MessageInputWrapper$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(MessageInputWrapper);


//# sourceMappingURL=MessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel/components/ChannelUI.js

















































































































const ChannelUI = _ref => {
  var _globalStore$stores, _globalStore$stores$s, _globalStore$config, _globalStore$config2, _globalStore$config3, _globalStore$config3$;
  let {
    isLoading,
    renderPlaceholderLoader,
    renderPlaceholderInvalid,
    renderPlaceholderEmpty,
    renderChannelHeader,
    renderMessage,
    renderMessageInput,
    renderTypingIndicator,
    renderCustomSeparator,
    renderFileUploadIcon,
    renderVoiceMessageIcon,
    renderSendMessageIcon
  } = _ref;
  const {
    channelUrl,
    isInvalid
  } = useChannelContext();
  const globalStore = useSendbirdStateContext();
  const sdkError = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$s = _globalStore$stores.sdkStore) === null || _globalStore$stores$s === void 0 ? void 0 : _globalStore$stores$s.error;
  const logger = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config = globalStore.config) === null || _globalStore$config === void 0 ? void 0 : _globalStore$config.logger;
  const isOnline = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config2 = globalStore.config) === null || _globalStore$config2 === void 0 ? void 0 : _globalStore$config2.isOnline;
  if (isLoading) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-conversation"
    }, (renderPlaceholderLoader === null || renderPlaceholderLoader === void 0 ? void 0 : renderPlaceholderLoader()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.LOADING
    }));
  }
  if (!channelUrl) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-conversation"
    }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.NO_CHANNELS
    }));
  }
  if (isInvalid) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-conversation"
    }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.WRONG
    }));
  }
  if (sdkError) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-conversation"
    }, (renderPlaceholderInvalid === null || renderPlaceholderInvalid === void 0 ? void 0 : renderPlaceholderInvalid()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.WRONG,
      retryToConnect: () => {
        logger.info('Channel: reconnecting');
        // reconnect();
      }
    }));
  }

  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation"
  }, (renderChannelHeader === null || renderChannelHeader === void 0 ? void 0 : renderChannelHeader()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelHeader, {
    className: "sendbird-conversation__channel-header"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageList, {
    className: "sendbird-conversation__message-list",
    renderMessage: renderMessage,
    renderPlaceholderEmpty: renderPlaceholderEmpty,
    renderCustomSeparator: renderCustomSeparator,
    renderPlaceholderLoader: renderPlaceholderLoader
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation__footer"
  }, (renderMessageInput === null || renderMessageInput === void 0 ? void 0 : renderMessageInput()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInputWrapper$1, {
    renderFileUploadIcon: renderFileUploadIcon,
    renderVoiceMessageIcon: renderVoiceMessageIcon,
    renderSendMessageIcon: renderSendMessageIcon
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-conversation__footer__typing-indicator"
  }, (renderTypingIndicator === null || renderTypingIndicator === void 0 ? void 0 : renderTypingIndicator()) || (globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config3 = globalStore.config) === null || _globalStore$config3 === void 0 ? void 0 : (_globalStore$config3$ = _globalStore$config3.groupChannel) === null || _globalStore$config3$ === void 0 ? void 0 : _globalStore$config3$.enableTypingIndicator) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TypingIndicator, null), !isOnline && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ConnectionStatus, null))));
};


//# sourceMappingURL=ChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Channel.js


















































































































const Channel = props => {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelProvider, {
    channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl,
    isReactionEnabled: props === null || props === void 0 ? void 0 : props.isReactionEnabled,
    isMessageGroupingEnabled: props === null || props === void 0 ? void 0 : props.isMessageGroupingEnabled,
    showSearchIcon: props === null || props === void 0 ? void 0 : props.showSearchIcon,
    animatedMessage: props === null || props === void 0 ? void 0 : props.animatedMessage,
    highlightedMessage: props === null || props === void 0 ? void 0 : props.highlightedMessage,
    startingPoint: props === null || props === void 0 ? void 0 : props.startingPoint,
    onBeforeSendUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendUserMessage,
    onBeforeSendFileMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendFileMessage,
    onBeforeUpdateUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeUpdateUserMessage,
    onChatHeaderActionClick: props === null || props === void 0 ? void 0 : props.onChatHeaderActionClick,
    onSearchClick: props === null || props === void 0 ? void 0 : props.onSearchClick,
    onBackClick: props === null || props === void 0 ? void 0 : props.onBackClick,
    replyType: props === null || props === void 0 ? void 0 : props.replyType,
    threadReplySelectType: props === null || props === void 0 ? void 0 : props.threadReplySelectType,
    queries: props === null || props === void 0 ? void 0 : props.queries,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    filterMessageList: props === null || props === void 0 ? void 0 : props.filterMessageList,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,
    disableMarkAsRead: props === null || props === void 0 ? void 0 : props.disableMarkAsRead,
    onReplyInThread: props === null || props === void 0 ? void 0 : props.onReplyInThread,
    onQuoteMessageClick: props === null || props === void 0 ? void 0 : props.onQuoteMessageClick,
    onMessageAnimated: props === null || props === void 0 ? void 0 : props.onMessageAnimated,
    onMessageHighlighted: props === null || props === void 0 ? void 0 : props.onMessageHighlighted,
    scrollBehavior: props.scrollBehavior,
    reconnectOnIdle: props.reconnectOnIdle
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelUI, {
    isLoading: props === null || props === void 0 ? void 0 : props.isLoading,
    renderPlaceholderLoader: props === null || props === void 0 ? void 0 : props.renderPlaceholderLoader,
    renderPlaceholderInvalid: props === null || props === void 0 ? void 0 : props.renderPlaceholderInvalid,
    renderPlaceholderEmpty: props === null || props === void 0 ? void 0 : props.renderPlaceholderEmpty,
    renderChannelHeader: props === null || props === void 0 ? void 0 : props.renderChannelHeader,
    renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage,
    renderMessageInput: props === null || props === void 0 ? void 0 : props.renderMessageInput,
    renderTypingIndicator: props === null || props === void 0 ? void 0 : props.renderTypingIndicator,
    renderCustomSeparator: props === null || props === void 0 ? void 0 : props.renderCustomSeparator,
    renderFileUploadIcon: props === null || props === void 0 ? void 0 : props.renderFileUploadIcon,
    renderVoiceMessageIcon: props === null || props === void 0 ? void 0 : props.renderVoiceMessageIcon,
    renderSendMessageIcon: props === null || props === void 0 ? void 0 : props.renderSendMessageIcon
  }));
};


//# sourceMappingURL=Channel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/context.js








const ChannelSettingsContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const ChannelSettingsProvider = props => {
  var _props$disableUserPro;
  const {
    children,
    className,
    channelUrl,
    onCloseClick,
    onLeaveChannel,
    onChannelModified,
    overrideInviteUser,
    onBeforeUpdateChannel,
    queries
  } = props;

  // fetch store from <SendbirdProvider />
  const globalStore = useSendbirdStateContext();
  const {
    config,
    stores
  } = globalStore;
  const {
    sdkStore
  } = stores;
  const {
    logger,
    onUserProfileMessage
  } = config;
  const {
    initialized
  } = sdkStore;
  const sdk = sdkStore === null || sdkStore === void 0 ? void 0 : sdkStore.sdk;

  // hack to keep track of channel updates by triggering useEffect
  const [channelUpdateId, setChannelUpdateId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(uuidv4());
  const [channel, setChannel] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [invalidChannel, setInvalidChannel] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const forceUpdateUI = () => {
    setChannelUpdateId(uuidv4());
  };
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    logger.info('ChannelSettings: Setting up');
    if (!channelUrl || !initialized || !sdk) {
      logger.warning('ChannelSettings: Setting up failed', 'No channelUrl or sdk uninitialized');
      setInvalidChannel(false);
    } else {
      if (!sdk || !sdk.groupChannel) {
        logger.warning('ChannelSettings: No GroupChannel');
        return;
      }
      sdk.groupChannel.getChannel(channelUrl).then(groupChannel => {
        if (!groupChannel) {
          logger.warning('ChannelSettings: Channel not found');
          setInvalidChannel(true);
        } else {
          logger.info('ChannelSettings: Fetched group channel', groupChannel);
          setInvalidChannel(false);
          setChannel(groupChannel);
        }
      });
    }
  }, [channelUrl, initialized, channelUpdateId]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsContext.Provider, {
    value: {
      channelUrl,
      onCloseClick,
      onLeaveChannel,
      onChannelModified,
      onBeforeUpdateChannel,
      queries,
      overrideInviteUser,
      setChannelUpdateId,
      forceUpdateUI,
      channel,
      invalidChannel
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    disableUserProfile: (_props$disableUserPro = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _props$disableUserPro !== void 0 ? _props$disableUserPro : config === null || config === void 0 ? void 0 : config.disableUserProfile,
    onUserProfileMessage: onUserProfileMessage
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-channel-settings ${className}`
  }, children)));
};
const useChannelSettingsContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ChannelSettingsContext);


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/EditDetailsModal.js



























const EditDetails = props => {
  var _state$config, _state$config2, _state$config3;
  const {
    onSubmit,
    onCancel
  } = props;
  const {
    channel,
    onChannelModified,
    onBeforeUpdateChannel,
    setChannelUpdateId
  } = useChannelSettingsContext();
  const title = channel === null || channel === void 0 ? void 0 : channel.name;
  const state = useSendbirdStateContext();
  const userId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const theme = state === null || state === void 0 ? void 0 : (_state$config2 = state.config) === null || _state$config2 === void 0 ? void 0 : _state$config2.theme;
  const logger = state === null || state === void 0 ? void 0 : (_state$config3 = state.config) === null || _state$config3 === void 0 ? void 0 : _state$config3.logger;
  const inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const formRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const hiddenInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [currentImg, setCurrentImg] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [newFile, setNewFile] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    titleText: stringSet.MODAL__CHANNEL_INFORMATION__TITLE,
    submitText: stringSet.BUTTON__SAVE,
    onCancel: onCancel,
    onSubmit: () => {
      if (title !== '' && !inputRef.current.value) {
        if (formRef.current.reportValidity) {
          // might not work in explorer
          formRef.current.reportValidity();
        }
        return;
      }
      const currentTitle = inputRef.current.value;
      const currentImg = newFile;
      logger.info('ChannelSettings: Channel information being updated', {
        currentTitle,
        currentImg
      });
      if (onBeforeUpdateChannel) {
        logger.info('ChannelSettings: onBeforeUpdateChannel');
        const params = onBeforeUpdateChannel(currentTitle, currentImg, channel === null || channel === void 0 ? void 0 : channel.data);
        channel === null || channel === void 0 ? void 0 : channel.updateChannel(params).then(groupChannel => {
          onChannelModified === null || onChannelModified === void 0 ? void 0 : onChannelModified(groupChannel);
          setChannelUpdateId(uuidv4());
          onSubmit();
        });
      } else {
        logger.info('ChannelSettings: normal');
        channel === null || channel === void 0 ? void 0 : channel.updateChannel({
          coverImage: currentImg,
          name: currentTitle,
          data: (channel === null || channel === void 0 ? void 0 : channel.data) || ''
        }).then(groupChannel => {
          logger.info('ChannelSettings: Channel information updated', groupChannel);
          onChannelModified === null || onChannelModified === void 0 ? void 0 : onChannelModified(groupChannel);
          setChannelUpdateId(uuidv4());
          onSubmit();
        });
      }
    },
    type: ButtonTypes.PRIMARY
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", {
    className: "channel-profile-form",
    ref: formRef,
    onSubmit: e => {
      e.preventDefault();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "channel-profile-form__img-section"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "channel-profile-form__avatar"
  }, currentImg ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    height: "80px",
    width: "80px",
    src: currentImg
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, {
    height: 80,
    width: 80,
    channel: channel,
    userId: userId,
    theme: theme
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    ref: hiddenInputRef,
    type: "file",
    accept: "image/gif, image/jpeg, image/png",
    style: {
      display: 'none'
    },
    onChange: e => {
      setCurrentImg(URL.createObjectURL(e.target.files[0]));
      setNewFile(e.target.files[0]);
      hiddenInputRef.current.value = '';
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "channel-profile-form__avatar-button",
    onClick: () => hiddenInputRef.current.click(),
    disableUnderline: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: LabelColors.PRIMARY
  }, stringSet.MODAL__CHANNEL_INFORMATION__UPLOAD))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "channel-profile-form__name-section"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, {
    required: title !== '',
    name: "channel-profile-form__name",
    ref: inputRef,
    value: title,
    placeHolder: stringSet.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER
  }))));
};


//# sourceMappingURL=EditDetailsModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ChannelProfile.js




























const ChannelProfile = () => {
  var _state$config, _state$config2, _state$config3;
  const state = useSendbirdStateContext();
  const channelSettingStore = useChannelSettingsContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const userId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const theme = (state === null || state === void 0 ? void 0 : (_state$config2 = state.config) === null || _state$config2 === void 0 ? void 0 : _state$config2.theme) || 'light';
  const isOnline = state === null || state === void 0 ? void 0 : (_state$config3 = state.config) === null || _state$config3 === void 0 ? void 0 : _state$config3.isOnline;
  const disabled = !isOnline;
  const {
    channel
  } = channelSettingStore;
  const getChannelName = () => {
    if (channel !== null && channel !== void 0 && channel.name && (channel === null || channel === void 0 ? void 0 : channel.name) !== 'Group Channel') {
      return channel.name;
    }
    if ((channel === null || channel === void 0 ? void 0 : channel.name) === 'Group Channel' || !(channel !== null && channel !== void 0 && channel.name)) {
      return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).map(member => member.nickname || stringSet.NO_NAME).join(', ');
    }
    return stringSet.NO_TITLE;
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-profile"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-profile--inner"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-profile__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelAvatar, {
    channel: channel,
    userId: userId,
    theme: theme,
    width: 80,
    height: 80
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-profile__title",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, getChannelName()), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    disabled: disabled,
    className: "sendbird-channel-profile__edit",
    onClick: () => {
      if (disabled) {
        return;
      }
      setShowModal(true);
    },
    disableUnderline: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: disabled ? LabelColors.ONBACKGROUND_2 : LabelColors.PRIMARY
  }, stringSet.CHANNEL_SETTING__PROFILE__EDIT)), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditDetails, {
    onCancel: () => setShowModal(false),
    onSubmit: () => setShowModal(false)
  })));
};


//# sourceMappingURL=ChannelProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/context-524b02ab.js



const context_524b02ab_Context = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext({
  opened: '',
  // mock default value
  setOpened: utils_40781609_noop
});
const Consumer = context_524b02ab_Context.Consumer;
const Provider = context_524b02ab_Context.Provider;


//# sourceMappingURL=context-524b02ab.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/AccordionGroup.js




// Wraps all the accordions in an accordion set
function AccordionGroup(_ref) {
  let {
    children,
    className = ''
  } = _ref;
  const [opened, setOpened] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Provider, {
    value: {
      opened,
      setOpened
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: className
  }, children));
}


//# sourceMappingURL=AccordionGroup.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Accordion.js







function Accordion(_ref) {
  let {
    className,
    id,
    renderTitle,
    renderContent,
    renderFooter
  } = _ref;
  const [showAccordion, setShowAccordion] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Consumer, null,
  // Function is considered like a react component
  value => {
    const {
      opened,
      setOpened
    } = value; // props from Provider
    if (id === opened) {
      setShowAccordion(true);
    } else {
      setShowAccordion(false);
    }
    const handleClick = () => {
      if (showAccordion) {
        setOpened('');
      } else {
        setOpened(id);
      }
    };
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: [...(Array.isArray(className) ? className : [className]), 'sendbird-accordion__panel-header'].join(' '),
      id: id,
      role: "switch",
      "aria-checked": false,
      onClick: handleClick,
      onKeyDown: handleClick,
      tabIndex: 0
    }, renderTitle(), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.CHEVRON_RIGHT,
      className: ['sendbird-accordion__panel-icon-right', 'sendbird-accordion__panel-icon--chevron', showAccordion ? 'sendbird-accordion__panel-icon--open' : ''].join(' '),
      height: "24px",
      width: "24px"
    })), showAccordion && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-accordion"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-accordion__list"
    }, renderContent()), renderFooter && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-accordion__footer"
    }, renderFooter())));
  });
}
const Accordion_AccordionGroup = AccordionGroup;


//# sourceMappingURL=Accordion.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/Toggle.js





/**
 * The default value of `checked` should be null
 * to support both case of controlled and uncontrolled component
 * ref: https://github.com/aaronshaf/react-toggle#props
 */
const Toggle_noop = () => {/* noop */};
const TOGGLE_DEFAULT_VALUE = {
  checked: null,
  defaultChecked: false,
  disabled: false,
  onChange: Toggle_noop,
  onFocus: Toggle_noop,
  onBlur: Toggle_noop
};
const ToggleContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(TOGGLE_DEFAULT_VALUE);
function useToggleContext() {
  const context = external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(ToggleContext);
  if (context === undefined) {
    throw new Error('@sendbird/uikit-react/ui/Toggle: useToggleContext must be used within a ToggleContainer.');
  }
  return context;
}

// Props Explanation https://github.com/aaronshaf/react-toggle#props
function ToggleContainer(_ref) {
  let {
    checked = TOGGLE_DEFAULT_VALUE.checked,
    // null
    defaultChecked = TOGGLE_DEFAULT_VALUE.defaultChecked,
    disabled = TOGGLE_DEFAULT_VALUE.disabled,
    onChange = TOGGLE_DEFAULT_VALUE.onChange,
    onFocus = TOGGLE_DEFAULT_VALUE.onFocus,
    onBlur = TOGGLE_DEFAULT_VALUE.onBlur,
    children
  } = _ref;
  const [isChecked, setChecked] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(defaultChecked || false);
  const handleChange = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(e => {
    if (disabled) {
      return;
    }
    if (checked === null) {
      setChecked(e.currentTarget.checked);
    }
    onChange(e);
  }, [onChange, checked]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ToggleContext.Provider, {
    value: {
      checked: checked !== null ? checked : isChecked,
      disabled,
      onChange: handleChange,
      onFocus: e => {
        if (!disabled) {
          onFocus(e);
        }
      },
      onBlur: e => {
        if (!disabled) {
          onBlur(e);
        }
      }
    }
  }, children);
}

function filterNumber(input) {
  if (typeof input !== 'string' && typeof input !== 'number') {
    try {
      const {
        config
      } = useSendbirdStateContext();
      const {
        logger
      } = config;
      logger.warning('@sendbird/uikit-react/ui/Toggle: TypeError - expected string or number.', input);
    } catch (_) {/* noop */}
    return [];
  }
  if (typeof input === 'number') {
    return [input];
  }
  const regex = /(-?\d+)(\.\d+)?/g;
  const numbers = input.match(regex) || [];
  return numbers.map(parseFloat);
}

function ToggleUI(props) {
  var _filterNumber;
  const {
    reversed = false,
    width = '40px',
    animationDuration = '0.5s',
    style = {},
    name = '',
    id = '',
    ariaLabel = '',
    ariaLabelledby = ''
  } = props;
  const {
    checked,
    disabled,
    onChange,
    onFocus,
    onBlur
  } = useToggleContext();

  // animation should not be activated in the initialization step
  const [animatedClassName, setAnimatedClassName] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const toggleWidth = (_filterNumber = filterNumber(width)) === null || _filterNumber === void 0 ? void 0 : _filterNumber[0];
  const toggleHeight = toggleWidth / 2;
  // The size of dot should be 60% of toggle height
  const dotSize = toggleHeight * 0.6;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("label", {
    className: ['sendbird-input-toggle-button', animatedClassName, checked ? 'sendbird-input-toggle-button--checked' : 'sendbird-input-toggle-button--unchecked', disabled ? 'sendbird-input-toggle-button--disabled' : [], reversed ? 'sendbird-input-toggle-button--reversed' : []].flat().join(' '),
    style: _objectSpread2({
      width: `${toggleWidth}px`,
      height: `${toggleHeight}px`,
      borderRadius: `${dotSize}px`
    }, style)
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-input-toggle-button__inner-dot', checked ? 'sendbird-input-toggle-button__inner-dot--activate' : 'sendbird-input-toggle-button__inner-dot--inactivate'].join(' '),
    style: {
      width: `${dotSize}px`,
      height: `${dotSize}px`,
      animationDuration
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    type: "checkbox",
    "aria-label": ariaLabel,
    "aria-labelledby": ariaLabelledby,
    name: name,
    id: id,
    checked: checked,
    disabled: disabled,
    onChange: e => {
      onChange(e);
      setAnimatedClassName(e.currentTarget.checked ? 'sendbird-input-toggle-button--turned-on' : 'sendbird-input-toggle-button--turned-off');
    },
    onFocus: onFocus,
    onBlur: onBlur
  }));
}

function Toggle(props) {
  const {
    // ToggleProvider
    checked,
    defaultChecked,
    disabled,
    onChange,
    onFocus,
    onBlur,
    // ToggleUI
    className,
    reversed,
    width,
    // height will be half of width
    animationDuration,
    style,
    name,
    id,
    ariaLabel,
    ariaLabelledby
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-ui-toggle ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ToggleContainer, {
    checked: checked,
    defaultChecked: defaultChecked,
    disabled: disabled,
    onChange: onChange,
    onFocus: onFocus,
    onBlur: onBlur
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ToggleUI, {
    reversed: reversed,
    width: width,
    animationDuration: animationDuration,
    style: style,
    name: name,
    id: id,
    ariaLabel: ariaLabel,
    ariaLabelledby: ariaLabelledby
  })));
}


//# sourceMappingURL=Toggle.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/UserListItem.js


























const UserListItem_UserListItem = _ref => {
  let {
    user,
    className,
    currentUser,
    action
  } = _ref;
  const actionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const parentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const injectingClassNames = Array.isArray(className) ? className : [className];
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    ref: parentRef,
    className: ['sendbird-user-list-item--small', ...injectingClassNames].join(' ')
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      },
      ref: avatarRef,
      className: "sendbird-user-list-item--small__avatar",
      src: user.profileUrl,
      width: 24,
      height: 24
    }), user.isMuted && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedAvatarOverlay, null)),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      openLeft: true,
      parentRef: avatarRef
      // for catching location(x, y) of MenuItems
      ,
      parentContainRef: avatarRef
      // for toggling more options(menus & reactions)
      ,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user,
      currentUserId: currentUser,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: user,
      currentUserId: currentUser,
      onSuccess: closeDropdown
    }))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-user-list-item--small__title",
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, user.nickname || stringSet.NO_NAME, currentUser === user.userId && stringSet.CHANNEL_SETTING__MEMBERS__YOU),
  // if there is now nickname, display userId
  !user.nickname && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-user-list-item--small__subtitle",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, user.userId), user.role === 'operator' && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-user-list-item--small__operator",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.CHANNEL_SETTING__MEMBERS__OPERATOR), action && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    ref: actionRef,
    className: "sendbird-user-list-item--small__action"
  }, action({
    actionRef,
    parentRef
  })));
};


//# sourceMappingURL=UserListItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MemberList-54496842.js















function MembersModal(_ref) {
  var _state$config;
  let {
    onCancel
  } = _ref;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [memberQuery, setMemberQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUser = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const memberListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      limit: 20
    });
    memberListQuery.next().then(members => {
      setMembers(members);
    });
    setMemberQuery(memberListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    hideFooter: true,
    onCancel: () => onCancel(),
    onSubmit: utils_40781609_noop,
    titleText: stringSet.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = memberQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        memberQuery.next().then(o => {
          setMembers([...members, ...o]);
        });
      }
    }
  }, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    user: member,
    key: member.userId,
    currentUser: currentUser,
    action: _ref2 => {
      let {
        parentRef,
        actionRef
      } = _ref2;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, (channel === null || channel === void 0 ? void 0 : channel.myRole) === 'operator' && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: () => {
            toggleDropdown();
          }
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
          ,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          disable: currentUser === member.userId,
          onClick: () => {
            if (member.role !== 'operator') {
              channel === null || channel === void 0 ? void 0 : channel.addOperators([member.userId]).then(() => {
                setMembers(members.map(m => {
                  if (m.userId === member.userId) {
                    return _objectSpread2(_objectSpread2({}, member), {}, {
                      role: 'operator'
                    });
                  }
                  return m;
                }));
                closeDropdown();
              });
            } else {
              channel === null || channel === void 0 ? void 0 : channel.removeOperators([member.userId]).then(() => {
                setMembers(members.map(m => {
                  if (m.userId === member.userId) {
                    return _objectSpread2(_objectSpread2({}, member), {}, {
                      role: ''
                    });
                  }
                  return m;
                }));
                closeDropdown();
              });
            }
          },
          dataSbId: `channel_setting_member_context_menu_${member.role !== 'operator' ? 'register_as_operator' : 'unregister_operator'}`
        }, member.role !== 'operator' ? stringSet.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR : stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),
        // No muted members in broadcast channel
        !(channel !== null && channel !== void 0 && channel.isBroadcast) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            if (member.isMuted) {
              channel === null || channel === void 0 ? void 0 : channel.unmuteUser(member).then(() => {
                setMembers(members.map(m => {
                  if (m.userId === member.userId) {
                    return _objectSpread2(_objectSpread2({}, member), {}, {
                      isMuted: false
                    });
                  }
                  return m;
                }));
                closeDropdown();
              });
            } else {
              channel === null || channel === void 0 ? void 0 : channel.muteUser(member).then(() => {
                setMembers(members.map(m => {
                  if (m.userId === member.userId) {
                    return _objectSpread2(_objectSpread2({}, member), {}, {
                      isMuted: true
                    });
                  }
                  return m;
                }));
                closeDropdown();
              });
            }
          },
          dataSbId: `channel_setting_member_context_menu_${member.isMuted ? 'unmute' : 'mute'}`
        }, member.isMuted ? stringSet.CHANNEL_SETTING__MODERATION__UNMUTE : stringSet.CHANNEL_SETTING__MODERATION__MUTE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.banUser(member, -1, '').then(() => {
              setMembers(members.filter(_ref3 => {
                let {
                  userId
                } = _ref3;
                return userId !== member.userId;
              }));
            });
          },
          dataSbId: "channel_setting_member_context_menu_ban"
        }, stringSet.CHANNEL_SETTING__MODERATION__BAN))
      }));
    }
  })))));
}

const MemberList_54496842_isAboutSame = (a, b, px) => Math.abs(a - b) <= px;
function MemberList_54496842_InviteUsers(_ref) {
  var _state$stores, _state$stores$sdkStor, _state$config;
  let {
    onCancel,
    onSubmit
  } = _ref;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [selectedMembers, setSelectedMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
  const [userQuery, setUserQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const state = useSendbirdStateContext();
  const sdk = state === null || state === void 0 ? void 0 : (_state$stores = state.stores) === null || _state$stores === void 0 ? void 0 : (_state$stores$sdkStor = _state$stores.sdkStore) === null || _state$stores$sdkStor === void 0 ? void 0 : _state$stores$sdkStor.sdk;
  const globalUserListQuery = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userListQuery;
  const {
    channel,
    overrideInviteUser,
    queries
  } = useChannelSettingsContext();
  const userFilledQuery = _objectSpread2({}, queries === null || queries === void 0 ? void 0 : queries.applicationUserListQuery);
  const {
    stringSet
  } = useLocalization();
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const userListQuery = globalUserListQuery ? globalUserListQuery() : sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery(userFilledQuery);
    if (userListQuery !== null && userListQuery !== void 0 && userListQuery.next) {
      userListQuery.next().then(members => {
        setMembers(members);
      });
      setUserQuery(userListQuery);
    }
  }, [sdk]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    disabled: Object.keys(selectedMembers).length === 0,
    submitText: stringSet.BUTTON__INVITE,
    type: ButtonTypes.PRIMARY,
    onCancel: () => onCancel(),
    onSubmit: () => {
      const members = Object.keys(selectedMembers).filter(m => selectedMembers[m]);
      if (typeof overrideInviteUser === 'function') {
        overrideInviteUser({
          users: members,
          onClose: onCancel,
          channel
        });
        return;
      }
      channel === null || channel === void 0 ? void 0 : channel.inviteWithUserIds(members).then(() => {
        onSubmit(members);
      });
    },
    titleText: stringSet.CHANNEL_SETTING__MEMBERS__SELECT_TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = userQuery;
      const target = e.target;
      const fetchMore = MemberList_54496842_isAboutSame(target.clientHeight + target.scrollTop, target.scrollHeight, 20);
      if (hasNext && fetchMore) {
        userQuery.next().then(users => {
          setMembers([...members, ...users]);
        });
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll__inner"
  }, members.map(member => {
    var _channel$members;
    const isJoinedMember = channel === null || channel === void 0 ? void 0 : (_channel$members = channel.members) === null || _channel$members === void 0 ? void 0 : _channel$members.some(_ref2 => {
      let {
        userId
      } = _ref2;
      return userId === (member === null || member === void 0 ? void 0 : member.userId);
    });
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
      checkBox: true,
      checked: isJoinedMember || selectedMembers[member.userId],
      disabled: isJoinedMember,
      onChange: event => {
        const modifiedSelectedMembers = _objectSpread2(_objectSpread2({}, selectedMembers), {}, {
          [event.target.id]: event.target.checked
        });
        if (!event.target.checked) {
          delete modifiedSelectedMembers[event.target.id];
        }
        setSelectedMembers(modifiedSelectedMembers);
      },
      user: member,
      key: member.userId
    });
  })))));
}

const MemberList = () => {
  var _state$stores, _state$stores$sdkStor, _state$config;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [hasNext, setHasNext] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showAllMembers, setShowAllMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showInviteUsers, setShowInviteUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const state = useSendbirdStateContext();
  const {
    channel,
    setChannelUpdateId
  } = useChannelSettingsContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const sdk = state === null || state === void 0 ? void 0 : (_state$stores = state.stores) === null || _state$stores === void 0 ? void 0 : (_state$stores$sdkStor = _state$stores.sdkStore) === null || _state$stores$sdkStor === void 0 ? void 0 : _state$stores$sdkStor.sdk;
  const userId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel) {
      setMembers([]);
      return;
    }
    const memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      limit: 10
    });
    memberUserListQuery.next().then(members => {
      setMembers(members);
      setHasNext(memberUserListQuery.hasNext);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setMembers([]);
      return;
    }
    const memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      limit: 10
    });
    memberUserListQuery.next().then(members => {
      setMembers(members);
      setHasNext(memberUserListQuery.hasNext);
      setChannelUpdateId(uuidv4());
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-member-list sendbird-accordion"
  }, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, {
    key: member.userId,
    user: member,
    currentUser: sdk.currentUser.userId,
    action: (channel === null || channel === void 0 ? void 0 : channel.myRole) === 'operator' && userId !== member.userId ? _ref => {
      let {
        actionRef,
        parentRef
      } = _ref;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
          ,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            if (member.role !== 'operator') {
              channel === null || channel === void 0 ? void 0 : channel.addOperators([member.userId]).then(() => {
                refreshList();
                closeDropdown();
              });
            } else {
              channel === null || channel === void 0 ? void 0 : channel.removeOperators([member.userId]).then(() => {
                refreshList();
                closeDropdown();
              });
            }
          },
          dataSbId: `channel_setting_member_context_menu_${member.role !== 'operator' ? 'register_as_operator' : 'unregister_operator'}`
        }, member.role !== 'operator' ? stringSet.CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR : stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR),
        // No muted members in broadcast channel
        !(channel !== null && channel !== void 0 && channel.isBroadcast) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            if (member.isMuted) {
              channel === null || channel === void 0 ? void 0 : channel.unmuteUser(member).then(() => {
                refreshList();
                closeDropdown();
              });
            } else {
              channel === null || channel === void 0 ? void 0 : channel.muteUser(member).then(() => {
                refreshList();
                closeDropdown();
              });
            }
          },
          dataSbId: `channel_setting_member_context_menu_${member.isMuted ? 'unmute' : 'mute'}`
        }, member.isMuted ? stringSet.CHANNEL_SETTING__MODERATION__UNMUTE : stringSet.CHANNEL_SETTING__MODERATION__MUTE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.banUser(member, -1, '').then(() => {
              refreshList();
              closeDropdown();
            });
          },
          dataSbId: "channel_setting_member_context_menu_ban"
        }, stringSet.CHANNEL_SETTING__MODERATION__BAN))
      });
    } : null
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-accordion__footer"
  }, hasNext && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => setShowAllMembers(true)
  }, stringSet.CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => setShowInviteUsers(true)
  }, stringSet.CHANNEL_SETTING__MEMBERS__INVITE_MEMBER)), showAllMembers && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MembersModal, {
    onCancel: () => {
      setShowAllMembers(false);
      refreshList();
    }
  }), showInviteUsers && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MemberList_54496842_InviteUsers, {
    onSubmit: () => {
      setShowInviteUsers(false);
      refreshList();
    },
    onCancel: () => setShowInviteUsers(false)
  }));
};


//# sourceMappingURL=MemberList-54496842.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ModerationPanel.js









































function OperatorsModal(_ref) {
  var _state$config;
  let {
    onCancel
  } = _ref;
  const [operators, setOperators] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [operatorQuery, setOperatorQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
      limit: 20
    });
    operatorListQuery.next().then(operators => {
      setOperators(operators);
    });
    setOperatorQuery(operatorListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    hideFooter: true,
    titleText: stringSet.CHANNEL_SETTING__OPERATORS__TITLE_ALL,
    onCancel: onCancel
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = operatorQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        operatorQuery.next().then(o => {
          setOperators([...operators, ...o]);
        });
      }
    }
  }, operators.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    currentUser: currentUserId,
    user: member,
    key: member.userId,
    action: _ref2 => {
      let {
        parentRef,
        actionRef
      } = _ref2;
      return (member === null || member === void 0 ? void 0 : member.userId) !== currentUserId && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
          ,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.removeOperators([member.userId]).then(() => {
              setOperators(operators.filter(_ref3 => {
                let {
                  userId
                } = _ref3;
                return userId !== member.userId;
              }));
            });
            closeDropdown();
          },
          dataSbId: "channel_setting_operator_context_menu_unregister_unregister_operator"
        }, stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))
      });
    }
  })))));
}

function AddOperatorsModal(_ref) {
  let {
    onCancel,
    onSubmit
  } = _ref;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [selectedMembers, setSelectedMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
  const [memberQuery, setMemberQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    channel
  } = useChannelSettingsContext();
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const memberListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      operatorFilter: _bundle_863f90b8_Ht.NONOPERATOR,
      limit: 20
    });
    memberListQuery.next().then(members => {
      setMembers(members);
    });
    setMemberQuery(memberListQuery);
  }, []);
  const selectedCount = Object.keys(selectedMembers).filter(m => selectedMembers[m]).length;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    type: ButtonTypes.PRIMARY,
    submitText: stringSet.CHANNEL_SETTING__OPERATORS__ADD_BUTTON,
    onCancel: onCancel,
    onSubmit: () => {
      const members = Object.keys(selectedMembers).filter(m => selectedMembers[m]);
      channel === null || channel === void 0 ? void 0 : channel.addOperators(members).then(() => {
        onSubmit(members);
      });
    },
    titleText: stringSet.CHANNEL_SETTING__MEMBERS__SELECT_TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    color: selectedCount > 0 ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3,
    type: LabelTypography.CAPTION_1
  }, `${selectedCount} ${stringSet.MODAL__INVITE_MEMBER__SELECTED}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = memberQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        memberQuery.next().then(o => {
          setMembers([...members, ...o]);
        });
      }
    }
  }, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    checkBox: true,
    checked: selectedMembers[member.userId],
    isOperator: (member === null || member === void 0 ? void 0 : member.role) === 'operator',
    disabled: (member === null || member === void 0 ? void 0 : member.role) === 'operator',
    onChange: event => {
      const modifiedSelectedMembers = _objectSpread2(_objectSpread2({}, selectedMembers), {}, {
        [event.target.id]: event.target.checked
      });
      if (!event.target.checked) {
        delete modifiedSelectedMembers[event.target.id];
      }
      setSelectedMembers(modifiedSelectedMembers);
    },
    user: member,
    key: member.userId
  })))));
}

const OperatorList = () => {
  var _state$config;
  const [operators, setOperators] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [showMore, setShowMore] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showAdd, setShowAdd] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [hasNext, setHasNext] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const state = useSendbirdStateContext();
  const {
    channel
  } = useChannelSettingsContext();
  const userId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel) {
      setOperators([]);
      return;
    }
    const operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
      limit: 10
    });
    operatorListQuery.next().then(operators => {
      setOperators(operators);
      setHasNext(operatorListQuery.hasNext);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setOperators([]);
      return;
    }
    const operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
      limit: 10
    });
    operatorListQuery.next().then(operators => {
      setOperators(operators);
      setHasNext(operatorListQuery.hasNext);
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, operators.map(operator => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, {
    key: operator.userId,
    user: operator,
    currentUser: userId,
    action: _ref => {
      let {
        actionRef
      } = _ref;
      if ((operator === null || operator === void 0 ? void 0 : operator.userId) === userId) {
        return null;
      }
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentRef: actionRef,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.removeOperators([operator.userId]).then(() => {
              setOperators(operators.filter(_ref2 => {
                let {
                  userId
                } = _ref2;
                return userId !== operator.userId;
              }));
            });
            closeDropdown();
          },
          dataSbId: "channel_setting_operator_context_menu_unregister_operator"
        }, stringSet.CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))
      });
    }
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-accordion__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowAdd(true);
    }
  }, stringSet.CHANNEL_SETTING__OPERATORS__TITLE_ADD), hasNext && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowMore(true);
    }
  }, stringSet.CHANNEL_SETTING__OPERATORS__TITLE_ALL)), showMore && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorsModal, {
    onCancel: () => {
      setShowMore(false);
      refreshList();
    }
  }), showAdd && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AddOperatorsModal, {
    onCancel: () => setShowAdd(false),
    onSubmit: () => {
      refreshList();
      setShowAdd(false);
    }
  }));
};

function BannedUsersModal(_ref) {
  let {
    onCancel
  } = _ref;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [memberQuery, setMemberQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useChannelSettingsContext();
  const {
    stringSet
  } = useLocalization();
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
    bannedUserListQuery.next().then(users => {
      setMembers(users);
    });
    setMemberQuery(bannedUserListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    hideFooter: true,
    onCancel: () => onCancel(),
    onSubmit: utils_40781609_noop,
    titleText: stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = memberQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        memberQuery.next().then(o => {
          setMembers([...members, ...o]);
        });
      }
    }
  }, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    user: member,
    key: member.userId,
    action: _ref2 => {
      let {
        parentRef,
        actionRef
      } = _ref2;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
          ,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unbanUser(member).then(() => {
              closeDropdown();
              setMembers(members.filter(m => {
                return m.userId !== member.userId;
              }));
            });
          },
          dataSbId: "channel_setting_banned_user_context_menu_ban"
        }, stringSet.CHANNEL_SETTING__MODERATION__BAN))
      });
    }
  })))));
}

const BannedMemberList = () => {
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [hasNext, setHasNext] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    channel
  } = useChannelSettingsContext();
  const bannedUserListQueryParams = {
    limit: 10
  };
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel) {
      setMembers([]);
      return;
    }
    const bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery(bannedUserListQueryParams);
    bannedUserListQuery.next().then(users => {
      setMembers(users);
      setHasNext(bannedUserListQuery.hasNext);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setMembers([]);
      return;
    }
    const bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery(bannedUserListQueryParams);
    bannedUserListQuery.next().then(users => {
      setMembers(users);
      setHasNext(bannedUserListQuery.hasNext);
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, {
    key: member.userId,
    user: member,
    action: _ref => {
      let {
        actionRef,
        parentRef
      } = _ref;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
          ,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unbanUser(member).then(() => {
              closeDropdown();
              refreshList();
            });
          },
          dataSbId: "channel_setting_banned_user_context_menu_unban"
        }, stringSet.CHANNEL_SETTING__MODERATION__UNBAN))
      });
    }
  })), members && members.length === 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-settings__empty-list",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_3
  }, stringSet.CHANNEL_SETTING__MODERATION__EMPTY_BAN), hasNext && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-accordion__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowModal(true);
    }
  }, stringSet.CHANNEL_SETTING__MODERATION__ALL_BAN)), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BannedUsersModal, {
    onCancel: () => {
      setShowModal(false);
      refreshList();
    }
  }));
};

function MutedMembersModal(_ref) {
  var _state$config;
  let {
    onCancel
  } = _ref;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [memberQuery, setMemberQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUser = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = useLocalization();
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      limit: 10,
      // @ts-ignore
      mutedMemberFilter: 'muted'
    });
    memberUserListQuery.next().then(members => {
      setMembers(members);
    });
    setMemberQuery(memberUserListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    hideFooter: true,
    onCancel: () => onCancel(),
    onSubmit: utils_40781609_noop,
    titleText: stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = memberQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        memberQuery.next().then(o => {
          setMembers([...members, ...o]);
        });
      }
    }
  }, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    currentUser: currentUser,
    user: member,
    key: member.userId,
    action: _ref2 => {
      let {
        actionRef,
        parentRef
      } = _ref2;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
          ,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unmuteUser(member).then(() => {
              closeDropdown();
              setMembers(members.filter(m => {
                return m.userId !== member.userId;
              }));
            });
          },
          dataSbId: "channel_setting_muted_member_context_menu_unmute"
        }, stringSet.CHANNEL_SETTING__MODERATION__UNMUTE))
      });
    }
  })))));
}

const MutedMemberList = () => {
  var _state$config;
  const [members, setMembers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [hasNext, setHasNext] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = useLocalization();
  const {
    channel
  } = useChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUser = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel) {
      setMembers([]);
      return;
    }
    const memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      limit: 10,
      // @ts-ignore
      mutedMemberFilter: 'muted'
    });
    memberUserListQuery.next().then(members => {
      setMembers(members);
      setHasNext(memberUserListQuery.hasNext);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setMembers([]);
      return;
    }
    const memberUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMemberListQuery({
      limit: 10,
      // @ts-ignore
      mutedMemberFilter: 'muted'
    });
    memberUserListQuery.next().then(members => {
      setMembers(members);
      setHasNext(memberUserListQuery.hasNext);
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, members.map(member => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem_UserListItem, {
    key: member.userId,
    user: member,
    currentUser: currentUser,
    action: _ref => {
      let {
        actionRef,
        parentRef
      } = _ref;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          closeDropdown: closeDropdown,
          openLeft: true,
          parentContainRef: parentRef,
          parentRef: actionRef // for catching location(x, y) of MenuItems
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unmuteUser(member).then(() => {
              refreshList();
              closeDropdown();
            });
          },
          dataSbId: "channel_setting_muted_member_context_menu_unmute"
        }, (stringSet === null || stringSet === void 0 ? void 0 : stringSet.CHANNEL_SETTING__UNMUTE) || stringSet.CHANNEL_SETTING__MODERATION__UNMUTE))
      });
    }
  })), members && members.length === 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-settings__empty-list",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_3
  }, stringSet.CHANNEL_SETTING__NO_UNMUTED), hasNext && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-accordion__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowModal(true);
    }
  }, stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL)), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedMembersModal, {
    onCancel: () => {
      setShowModal(false);
      refreshList();
    }
  }));
};

const kFormatter = num => {
  return Math.abs(num) > 999 ? `${(Math.abs(num) / 1000).toFixed(1)}K` : num;
};
function AdminPannel() {
  const [frozen, setFrozen] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    channel
  } = useChannelSettingsContext();

  // work around for
  // https://sendbird.slack.com/archives/G01290GCDCN/p1595922832000900
  // SDK bug - after frozen/unfrozen myRole becomes "none"
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setFrozen(channel === null || channel === void 0 ? void 0 : channel.isFrozen);
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion_AccordionGroup, {
    className: "sendbird-channel-settings__operator"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-channel-settings__operators-list",
    id: "operators",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.OPERATOR,
      fillColor: IconColors.PRIMARY,
      width: 24,
      height: 24,
      className: "sendbird-channel-settings__accordion-icon"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.CHANNEL_SETTING__OPERATORS__TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorList, null))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-channel-settings__members-list",
    id: "members",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MEMBERS,
      fillColor: IconColors.PRIMARY,
      width: 24,
      height: 24,
      className: "sendbird-channel-settings__accordion-icon"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.CHANNEL_SETTING__MEMBERS__TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Badge, {
      count: kFormatter(channel === null || channel === void 0 ? void 0 : channel.memberCount)
    })),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MemberList, null))
  }),
  // No muted members in broadcast channel
  !(channel !== null && channel !== void 0 && channel.isBroadcast) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    id: "mutedMembers",
    className: "sendbird-channel-settings__muted-members-list",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MUTE,
      fillColor: IconColors.PRIMARY,
      width: 24,
      height: 24,
      className: "sendbird-channel-settings__accordion-icon"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.CHANNEL_SETTING__MUTED_MEMBERS__TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedMemberList, null))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-channel-settings__banned-members-list",
    id: "bannedUsers",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.BAN,
      fillColor: IconColors.PRIMARY,
      width: 24,
      height: 24,
      className: "sendbird-channel-settings__accordion-icon"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.CHANNEL_SETTING__BANNED_MEMBERS__TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BannedMemberList, null))
  }),
  // cannot freeze broadcast channel
  !(channel !== null && channel !== void 0 && channel.isBroadcast) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings__freeze"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.FREEZE,
    fillColor: IconColors.PRIMARY,
    width: 24,
    height: 24,
    className: "sendbird-channel-settings__accordion-icon"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_SETTING__FREEZE_CHANNEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Toggle, {
    className: "sendbird-channel-settings__frozen-icon",
    checked: frozen,
    onChange: () => {
      if (frozen) {
        channel === null || channel === void 0 ? void 0 : channel.unfreeze().then(() => {
          setFrozen(prev => !prev);
        });
      } else {
        channel === null || channel === void 0 ? void 0 : channel.freeze().then(() => {
          setFrozen(prev => !prev);
        });
      }
    }
  })));
}


//# sourceMappingURL=ModerationPanel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/LeaveChannel.js























const LeaveChannel_LeaveChannel = props => {
  var _state$config, _state$config2;
  const {
    onSubmit = utils_40781609_noop,
    onCancel = utils_40781609_noop
  } = props;
  const {
    channel,
    onLeaveChannel
  } = useChannelSettingsContext();
  const {
    stringSet
  } = useLocalization();
  const state = useSendbirdStateContext();
  const logger = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.logger;
  const isOnline = state === null || state === void 0 ? void 0 : (_state$config2 = state.config) === null || _state$config2 === void 0 ? void 0 : _state$config2.isOnline;
  const {
    isMobile
  } = useMediaQueryContext();
  const getChannelName = channel => {
    if (channel !== null && channel !== void 0 && channel.name && (channel === null || channel === void 0 ? void 0 : channel.name) !== 'Group Channel') {
      return channel.name;
    }
    if ((channel === null || channel === void 0 ? void 0 : channel.name) === 'Group Channel' || !(channel !== null && channel !== void 0 && channel.name)) {
      return ((channel === null || channel === void 0 ? void 0 : channel.members) || []).map(member => member.nickname || stringSet.NO_NAME).join(', ');
    }
    return stringSet.NO_TITLE;
  };
  if (isMobile) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
      className: "sendbird-channel-settings__leave--mobile",
      titleText: getChannelName(channel),
      hideFooter: true,
      isCloseOnClickOutside: true,
      onCancel: onCancel
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
      onClick: () => {
        logger.info('ChannelSettings: Leaving channel', channel);
        channel === null || channel === void 0 ? void 0 : channel.leave().then(() => {
          logger.info('ChannelSettings: Leaving channel successful!', channel);
          onLeaveChannel();
        });
      },
      className: "sendbird-channel-settings__leave-label--mobile"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE)));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    disabled: !isOnline,
    onCancel: onCancel,
    onSubmit: () => {
      logger.info('ChannelSettings: Leaving channel', channel);
      channel === null || channel === void 0 ? void 0 : channel.leave().then(() => {
        logger.info('ChannelSettings: Leaving channel successful!', channel);
        // is for backward compactability
        if (onLeaveChannel) {
          onLeaveChannel();
        } else {
          onSubmit();
        }
      });
    },
    submitText: stringSet.MODAL__LEAVE_CHANNEL__FOOTER,
    titleText: stringSet.MODAL__LEAVE_CHANNEL__TITLE
  });
};


//# sourceMappingURL=LeaveChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/UserPanel.js




































const UserPanel_kFormatter = num => {
  return Math.abs(num) > 999 ? `${(Math.abs(num) / 1000).toFixed(1)}K` : num;
};
const UserPanel = () => {
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [showAccordion, setShowAccordion] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    channel
  } = useChannelSettingsContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings__user-panel"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-channel-settings__panel-item', 'sendbird-channel-settings__members'].join(' '),
    role: "switch",
    "aria-checked": showAccordion,
    onKeyDown: () => setShowAccordion(!showAccordion),
    onClick: () => setShowAccordion(!showAccordion),
    tabIndex: 0
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-channel-settings__panel-icon-left",
    type: IconTypes.MEMBERS,
    fillColor: IconColors.PRIMARY,
    height: "24px",
    width: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_SETTING__MEMBERS__TITLE, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Badge, {
    className: 'sendbird-channel-settings__badge',
    count: UserPanel_kFormatter(channel === null || channel === void 0 ? void 0 : channel.memberCount)
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: ['sendbird-channel-settings__panel-icon-right', 'sendbird-channel-settings__panel-icon--chevron', showAccordion ? 'sendbird-channel-settings__panel-icon--open' : ''].join(' '),
    type: IconTypes.CHEVRON_RIGHT,
    height: "24px",
    width: "24px"
  })), showAccordion && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MemberList, null));
};


//# sourceMappingURL=UserPanel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings/components/ChannelSettingsUI.js





















































const ChannelSettingsUI = props => {
  var _state$config, _state$config2;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const state = useSendbirdStateContext();
  const channelSettingStore = useChannelSettingsContext();
  const [showLeaveChannelModal, setShowLeaveChannelModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const isOnline = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.isOnline;
  const logger = state === null || state === void 0 ? void 0 : (_state$config2 = state.config) === null || _state$config2 === void 0 ? void 0 : _state$config2.logger;
  const {
    channel,
    invalidChannel,
    onCloseClick
  } = channelSettingStore;
  const {
    renderPlaceholderError,
    renderChannelProfile,
    renderModerationPanel,
    renderLeaveChannel
  } = props;
  if (!channel || invalidChannel) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-channel-settings__header"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.H_2,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.CHANNEL_SETTING__HEADER__TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-channel-settings__close-icon",
      type: IconTypes.CLOSE,
      height: "24px",
      width: "24px",
      onClick: () => {
        logger.info('ChannelSettings: Click close');
        onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
      }
    })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, renderPlaceholderError ? renderPlaceholderError() : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.WRONG
    })));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_SETTING__HEADER__TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings__header-icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    width: "32px",
    height: "32px",
    onClick: () => {
      logger.info('ChannelSettings: Click close');
      onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-channel-settings__close-icon",
    type: IconTypes.CLOSE,
    height: "22px",
    width: "22px"
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings__scroll-area"
  }, (renderChannelProfile === null || renderChannelProfile === void 0 ? void 0 : renderChannelProfile()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelProfile, null), (renderModerationPanel === null || renderModerationPanel === void 0 ? void 0 : renderModerationPanel()) || ((channel === null || channel === void 0 ? void 0 : channel.myRole) === 'operator' ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AdminPannel, null) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserPanel, null)), (renderLeaveChannel === null || renderLeaveChannel === void 0 ? void 0 : renderLeaveChannel()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-channel-settings__panel-item', 'sendbird-channel-settings__leave-channel', !isOnline ? 'sendbird-channel-settings__panel-item__disabled' : ''].join(' '),
    role: "button",
    onKeyDown: () => {
      if (!isOnline) {
        return;
      }
      setShowLeaveChannelModal(true);
    },
    onClick: () => {
      if (!isOnline) {
        return;
      }
      setShowLeaveChannelModal(true);
    },
    tabIndex: 0
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: ['sendbird-channel-settings__panel-icon-left', 'sendbird-channel-settings__panel-icon__leave'].join(' '),
    type: IconTypes.LEAVE,
    fillColor: IconColors.ERROR,
    height: "24px",
    width: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE)), showLeaveChannelModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LeaveChannel_LeaveChannel, {
    onCancel: () => {
      setShowLeaveChannelModal(false);
    },
    onSubmit: () => {
      setShowLeaveChannelModal(false);
      onCloseClick === null || onCloseClick === void 0 ? void 0 : onCloseClick();
    }
  })));
};


//# sourceMappingURL=ChannelSettingsUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ChannelSettings.js






















































const ChannelSettings = props => {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsProvider, {
    overrideInviteUser: props === null || props === void 0 ? void 0 : props.overrideInviteUser,
    channelUrl: props.channelUrl,
    onCloseClick: props === null || props === void 0 ? void 0 : props.onCloseClick,
    onLeaveChannel: props === null || props === void 0 ? void 0 : props.onLeaveChannel,
    onChannelModified: props === null || props === void 0 ? void 0 : props.onChannelModified,
    onBeforeUpdateChannel: props === null || props === void 0 ? void 0 : props.onBeforeUpdateChannel,
    queries: props === null || props === void 0 ? void 0 : props.queries,
    className: props === null || props === void 0 ? void 0 : props.className,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettingsUI, {
    renderPlaceholderError: props === null || props === void 0 ? void 0 : props.renderPlaceholderError,
    renderChannelProfile: props === null || props === void 0 ? void 0 : props.renderChannelProfile,
    renderModerationPanel: props === null || props === void 0 ? void 0 : props.renderModerationPanel,
    renderLeaveChannel: props === null || props === void 0 ? void 0 : props.renderLeaveChannel
  }));
};


//# sourceMappingURL=ChannelSettings.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MessageSearch/context.js





const GET_SEARCHED_MESSAGES = 'GET_SEARCHED_MESSAGES';
const GET_NEXT_SEARCHED_MESSAGES = 'GET_NEXT_SEARCHED_MESSAGES';
const START_MESSAGE_SEARCH = 'START_MESSAGE_SEARCH';
const START_GETTING_SEARCHED_MESSAGES = 'START_GETTING_SEARCHED_MESSAGES';
const SET_QUERY_INVALID = 'SET_QUERY_INVALID';
const context_SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
const CHANNEL_INVALID = 'CHANNEL_INVALID';
const RESET_SEARCH_STRING = 'RESET_SEARCH_STRING';

function context_reducer(state, action) {
  switch (action.type) {
    case context_SET_CURRENT_CHANNEL:
      {
        const currentChannel = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentChannel,
          initialized: true
        });
      }
    case CHANNEL_INVALID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentChannel: null,
          initialized: false
        });
      }
    case GET_SEARCHED_MESSAGES:
      {
        const {
          messages,
          createdQuery
        } = action.payload;
        if (createdQuery && createdQuery.channelUrl === (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).channelUrl && createdQuery.key === (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).key) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            loading: false,
            isInvalid: false,
            allMessages: [...messages],
            hasMoreResult: (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).hasNext
          });
        }
        return _objectSpread2({}, state);
      }
    case SET_QUERY_INVALID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isInvalid: true
        });
      }
    case START_MESSAGE_SEARCH:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isInvalid: false,
          loading: false
        });
      }
    case START_GETTING_SEARCHED_MESSAGES:
      {
        const currentMessageSearchQuery = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          loading: true,
          currentMessageSearchQuery
        });
      }
    case GET_NEXT_SEARCHED_MESSAGES:
      {
        const messages = action.payload;
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: [...state.allMessages, ...messages],
          hasMoreResult: (state === null || state === void 0 ? void 0 : state.currentMessageSearchQuery).hasNext
        });
      }
    case RESET_SEARCH_STRING:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: []
        });
      }
    default:
      {
        return state;
      }
  }
}

const context_initialState = {
  allMessages: [],
  loading: false,
  isInvalid: false,
  initialized: false,
  currentChannel: null,
  currentMessageSearchQuery: null,
  hasMoreResult: false
};

function context_useSetChannel(_ref, _ref2) {
  let {
    channelUrl,
    sdkInit
  } = _ref;
  let {
    sdk,
    logger,
    messageSearchDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (channelUrl && sdkInit && sdk !== null && sdk !== void 0 && sdk.groupChannel) {
      sdk.groupChannel.getChannel(channelUrl).then(groupChannel => {
        logger.info('MessageSearch | useSetChannel group channel', groupChannel);
        messageSearchDispatcher({
          type: context_SET_CURRENT_CHANNEL,
          payload: groupChannel
        });
      }).catch(() => {
        messageSearchDispatcher({
          type: CHANNEL_INVALID,
          payload: null
        });
      });
    }
  }, [channelUrl, sdkInit]);
}

var MessageSearchOrder = /*#__PURE__*/function (MessageSearchOrder) {
  MessageSearchOrder["SCORE"] = "score";
  MessageSearchOrder["TIMESTAMP"] = "ts";
  return MessageSearchOrder;
}(MessageSearchOrder || {});
function useGetSearchedMessages(_ref, _ref2) {
  let {
    currentChannel,
    channelUrl,
    requestString,
    messageSearchQuery,
    onResultLoaded,
    retryCount
  } = _ref;
  let {
    sdk,
    logger,
    messageSearchDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    messageSearchDispatcher({
      type: START_MESSAGE_SEARCH,
      payload: null
    });
    if (sdk && channelUrl && sdk.createMessageSearchQuery && currentChannel) {
      if (requestString) {
        currentChannel.refresh().then(channel => {
          const inputSearchMessageQueryObject = _objectSpread2({
            order: MessageSearchOrder.TIMESTAMP,
            channelUrl,
            messageTimestampFrom: channel.invitedAt,
            keyword: requestString
          }, messageSearchQuery);
          const createdQuery = sdk.createMessageSearchQuery(inputSearchMessageQueryObject);
          createdQuery.next().then(messages => {
            logger.info('MessageSearch | useGetSearchedMessages: succeeded getting messages', messages);
            messageSearchDispatcher({
              type: GET_SEARCHED_MESSAGES,
              payload: {
                messages,
                createdQuery
              }
            });
            if (onResultLoaded && typeof onResultLoaded === 'function') {
              onResultLoaded(messages, null);
            }
          }).catch(error => {
            logger.warning('MessageSearch | useGetSearchedMessages: getting failed', error);
            messageSearchDispatcher({
              type: SET_QUERY_INVALID,
              payload: null
            });
            if (onResultLoaded && typeof onResultLoaded === 'function') {
              onResultLoaded(null, error);
            }
          });
          messageSearchDispatcher({
            type: START_GETTING_SEARCHED_MESSAGES,
            payload: createdQuery
          });
        });
      } else {
        logger.info('MessageSearch | useGetSeasrchedMessages: search string is empty');
      }
    }
  }, [channelUrl, messageSearchQuery, requestString, currentChannel, retryCount]);
}

function context_useScrollCallback(_ref, _ref2) {
  let {
    currentMessageSearchQuery,
    hasMoreResult,
    onResultLoaded
  } = _ref;
  let {
    logger,
    messageSearchDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(cb => {
    if (!hasMoreResult) {
      logger.warning('MessageSearch | useScrollCallback: no more searched results', hasMoreResult);
    }
    if (currentMessageSearchQuery && currentMessageSearchQuery.hasNext) {
      currentMessageSearchQuery.next().then(messages => {
        logger.info('MessageSearch | useScrollCallback: succeeded getting searched messages', messages);
        messageSearchDispatcher({
          type: GET_NEXT_SEARCHED_MESSAGES,
          payload: messages
        });
        cb(messages, null);
        if (onResultLoaded && typeof onResultLoaded === 'function') {
          onResultLoaded(messages, null);
        }
      }).catch(error => {
        logger.warning('MessageSearch | useScrollCallback: failed getting searched messages', error);
        cb(null, error);
        if (onResultLoaded && typeof onResultLoaded === 'function') {
          onResultLoaded(null, error);
        }
      });
    } else {
      logger.warning('MessageSearch | useScrollCallback: no currentMessageSearchQuery');
    }
  }, [currentMessageSearchQuery, hasMoreResult]);
}

const context_DEBOUNCING_TIME = 500;
function useSearchStringEffect(_ref, _ref2) {
  let {
    searchString
  } = _ref;
  let {
    messageSearchDispatcher
  } = _ref2;
  const [requestString, setRequestString] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [debouncingTimer, setDebouncingTimer] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    clearTimeout(debouncingTimer);
    if (searchString) {
      setDebouncingTimer(setTimeout(() => {
        setRequestString(searchString);
      }, context_DEBOUNCING_TIME));
    } else {
      setRequestString('');
      messageSearchDispatcher({
        type: RESET_SEARCH_STRING,
        payload: ''
      });
    }
  }, [searchString]);
  return requestString;
}

const MessageSearchContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const MessageSearchProvider = props => {
  var _globalState$config, _globalState$stores, _globalState$stores$s, _globalState$stores2, _globalState$stores2$;
  const {
    // message search props
    channelUrl,
    searchString,
    messageSearchQuery,
    onResultLoaded,
    onResultClick
  } = props;
  const globalState = useSendbirdStateContext();

  // hook variables
  const [retryCount, setRetryCount] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0); // this is a trigger flag for activating useGetSearchMessages
  const [selectedMessageId, setSelectedMessageId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  const [messageSearchStore, messageSearchDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(context_reducer, context_initialState);
  const {
    allMessages,
    loading,
    isInvalid,
    currentChannel,
    currentMessageSearchQuery,
    hasMoreResult
  } = messageSearchStore;
  const logger = globalState === null || globalState === void 0 ? void 0 : (_globalState$config = globalState.config) === null || _globalState$config === void 0 ? void 0 : _globalState$config.logger;
  const sdk = globalState === null || globalState === void 0 ? void 0 : (_globalState$stores = globalState.stores) === null || _globalState$stores === void 0 ? void 0 : (_globalState$stores$s = _globalState$stores.sdkStore) === null || _globalState$stores$s === void 0 ? void 0 : _globalState$stores$s.sdk;
  const sdkInit = globalState === null || globalState === void 0 ? void 0 : (_globalState$stores2 = globalState.stores) === null || _globalState$stores2 === void 0 ? void 0 : (_globalState$stores2$ = _globalState$stores2.sdkStore) === null || _globalState$stores2$ === void 0 ? void 0 : _globalState$stores2$.initialized;
  const scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const handleOnScroll = e => {
    const scrollElement = e.target;
    const {
      scrollTop,
      scrollHeight,
      clientHeight
    } = scrollElement;
    if (!hasMoreResult) {
      return;
    }
    if (scrollTop + clientHeight >= scrollHeight) {
      onScroll(() => {
        // after load more searched messages
      });
    }
  };
  context_useSetChannel({
    channelUrl,
    sdkInit
  }, {
    sdk,
    logger,
    messageSearchDispatcher
  });
  const requestString = useSearchStringEffect({
    searchString
  }, {
    messageSearchDispatcher
  });
  useGetSearchedMessages({
    currentChannel,
    channelUrl,
    requestString,
    messageSearchQuery,
    onResultLoaded,
    retryCount
  }, {
    sdk,
    logger,
    messageSearchDispatcher
  });
  const onScroll = context_useScrollCallback({
    currentMessageSearchQuery,
    hasMoreResult,
    onResultLoaded
  }, {
    logger,
    messageSearchDispatcher
  });
  const handleRetryToConnect = () => {
    setRetryCount(retryCount + 1);
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchContext.Provider, {
    value: {
      channelUrl,
      searchString,
      requestString,
      messageSearchQuery,
      onResultLoaded,
      onResultClick,
      retryCount,
      setRetryCount,
      selectedMessageId,
      setSelectedMessageId,
      messageSearchDispatcher,
      allMessages,
      loading,
      isInvalid,
      currentChannel,
      currentMessageSearchQuery,
      hasMoreResult,
      onScroll,
      scrollRef,
      handleRetryToConnect,
      handleOnScroll
    }
  }, props === null || props === void 0 ? void 0 : props.children);
};
const useMessageSearchContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(MessageSearchContext);


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageSearchItem.js














// getCreatedAt
function getCreatedAt (_ref) {
  let {
    createdAt,
    locale,
    stringSet
  } = _ref;
  const optionalParam = locale ? {
    locale
  } : null;
  if (!createdAt) {
    return '';
  }
  if (isToday(createdAt)) {
    return format(createdAt, 'p', optionalParam);
  }
  if (isYesterday(createdAt)) {
    return (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_STATUS__YESTERDAY) || 'Yesterday';
  }
  if (isThisYear(createdAt)) {
    return format(createdAt, 'MMM d', optionalParam);
  }
  return format(createdAt, 'yyyy/M/d', optionalParam);
}

function MessageSearchItem(_ref) {
  let {
    className,
    message,
    selected,
    onClick
  } = _ref;
  const {
    createdAt
  } = message;
  const messageText = message.message;
  const sender = message.sender || message._sender;
  const {
    profileUrl,
    nickname
  } = sender;
  const {
    stringSet,
    dateLocale
  } = useLocalization();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-message-search-item', selected ? 'sendbird-message-search-item--selected' : ''].join(' '),
    onClick: e => {
      e.stopPropagation();
      onClick(message);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-item__left"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-message-search-item__left__sender-avatar",
    src: profileUrl,
    alt: "profile image",
    width: "56px",
    height: "56px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-item__right"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-search-item__right__sender-name",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, nickname || stringSet.NO_NAME), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-search-item__right__message-text",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_3
  }, messageText), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-search-item__right__message-created-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, getCreatedAt({
    createdAt,
    locale: dateLocale,
    stringSet
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-item__right-footer"
  }));
}


//# sourceMappingURL=MessageSearchItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/MessageSearchFileItem.js

















function MessageSearchFileItem_getCreatedAt(_ref) {
  let {
    createdAt,
    locale,
    stringSet
  } = _ref;
  const optionalParam = locale ? {
    locale
  } : null;
  if (!createdAt) {
    return '';
  }
  if (isToday(createdAt)) {
    return format(createdAt, 'p', optionalParam);
  }
  if (isYesterday(createdAt)) {
    return (stringSet === null || stringSet === void 0 ? void 0 : stringSet.MESSAGE_STATUS__YESTERDAY) || 'Yesterday';
  }
  if (isThisYear(createdAt)) {
    return format(createdAt, 'MMM d', optionalParam);
  }
  return format(createdAt, 'yyyy/M/d', optionalParam);
}
function getIconOfFileType(message) {
  const {
    url
  } = message;
  const fileMessageUrl = url;
  const fileExtension = fileMessageUrl.match(/\.([^.]*?)(?=\?|#|$)/)[1];
  if (/(jpg|jpeg|png)$/i.test(fileExtension)) {
    return IconTypes.PHOTO;
  } else if (/mp4$/i.test(fileExtension) || isVoiceMessage(message)) {
    return IconTypes.PLAY;
  } else if (/mp3/i.test(fileExtension)) {
    return IconTypes.FILE_AUDIO;
  } else if (/gif/i.test(fileExtension)) {
    return IconTypes.GIF;
  } else {
    return IconTypes.FILE_DOCUMENT;
  }
}

function MessageSearchFileItem(props) {
  const {
    className,
    message,
    selected,
    onClick
  } = props;
  const {
    createdAt,
    url,
    name
  } = message;
  // @ts-ignore
  const sender = message.sender || message._sender;
  const {
    profileUrl,
    nickname
  } = sender;
  const {
    stringSet,
    dateLocale
  } = useLocalization();
  const isVoiceMsg = isVoiceMessage(message);
  const prettyFilename = isVoiceMsg ? stringSet.VOICE_MESSAGE : name || url;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-message-search-file-item', selected ? 'sendbird-message-search-file-item--selected' : ''].join(' '),
    onClick: e => {
      e.stopPropagation();
      onClick(message);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-file-item__left"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-message-search-file-item__left__sender-avatar",
    src: profileUrl,
    alt: "profile image",
    width: "56px",
    height: "56px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-file-item__right"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-search-file-item__right__sender-name",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, nickname || stringSet.NO_NAME), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-file-item__right__content"
  }, !isVoiceMsg && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: 'sendbird-message-search-file-item__right__content__type-icon'
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: getIconOfFileType(message),
    fillColor: IconColors.PRIMARY,
    width: "18px",
    height: "18px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-search-file-item__right__content__url",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, prettyFilename))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-message-search-file-item__message-created-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, MessageSearchFileItem_getCreatedAt({
    createdAt,
    locale: dateLocale,
    stringSet
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-message-search-file-item__right-footer"
  }));
}


//# sourceMappingURL=MessageSearchFileItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MessageSearch/components/MessageSearchUI.js
























const COMPONENT_CLASS_NAME = 'sendbird-message-search';
const MessageSearchUI = _ref => {
  let {
    renderPlaceHolderError,
    renderPlaceHolderLoading,
    renderPlaceHolderNoString,
    renderPlaceHolderEmptyList,
    renderSearchItem
  } = _ref;
  const {
    isInvalid,
    searchString,
    requestString,
    currentChannel,
    retryCount,
    setRetryCount,
    loading,
    scrollRef,
    hasMoreResult,
    onScroll,
    allMessages,
    onResultClick,
    selectedMessageId,
    setSelectedMessageId
  } = useMessageSearchContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const handleRetryToConnect = () => {
    setRetryCount(retryCount + 1);
  };
  const handleOnScroll = e => {
    const scrollElement = e.target;
    const {
      scrollTop,
      scrollHeight,
      clientHeight
    } = scrollElement;
    if (!hasMoreResult) {
      return;
    }
    if (scrollTop + clientHeight >= scrollHeight - 1) {
      onScroll(() => {
        // after load more searched messages
      });
    }
  };
  const getChannelName = () => {
    if (currentChannel && currentChannel !== null && currentChannel !== void 0 && currentChannel.name && (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name) !== 'Group Channel') {
      return currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name;
    }
    if (currentChannel && ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.name) === 'Group Channel' || !(currentChannel !== null && currentChannel !== void 0 && currentChannel.name))) {
      return currentChannel.members.map(member => member.nickname || stringSet.NO_NAME).join(', ');
    }
    return stringSet.NO_TITLE;
  };
  if (isInvalid && searchString && requestString) {
    return (renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: COMPONENT_CLASS_NAME
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.WRONG,
      retryToConnect: handleRetryToConnect
    }));
  }
  if (loading && searchString && requestString) {
    return (renderPlaceHolderLoading === null || renderPlaceHolderLoading === void 0 ? void 0 : renderPlaceHolderLoading()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: COMPONENT_CLASS_NAME
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.SEARCHING
    }));
  }
  if (!searchString) {
    return (renderPlaceHolderNoString === null || renderPlaceHolderNoString === void 0 ? void 0 : renderPlaceHolderNoString()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: COMPONENT_CLASS_NAME
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.SEARCH_IN,
      searchInString: getChannelName()
    }));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: COMPONENT_CLASS_NAME,
    onScroll: handleOnScroll,
    ref: scrollRef
  }, allMessages.length > 0 ? allMessages.map(message => {
    if (renderSearchItem) {
      return renderSearchItem({
        message,
        onResultClick
      });
    }
    if (message.messageType === 'file') {
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchFileItem, {
        className: `${COMPONENT_CLASS_NAME}__message-search-item`,
        message: message,
        key: message.messageId,
        selected: selectedMessageId === message.messageId,
        onClick: () => {
          onResultClick(message);
          setSelectedMessageId(message.messageId);
        }
      });
    }
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchItem, {
      className: `${COMPONENT_CLASS_NAME}__message-search-item`,
      message: message,
      key: message.messageId,
      selected: selectedMessageId === message.messageId,
      onClick: () => {
        onResultClick(message);
        setSelectedMessageId(message.messageId);
      }
    });
  }) : (renderPlaceHolderEmptyList === null || renderPlaceHolderEmptyList === void 0 ? void 0 : renderPlaceHolderEmptyList()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
    type: PlaceHolderTypes.NO_RESULTS
  }));
};


//# sourceMappingURL=MessageSearchUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/MessageSearch.js


























const MessageSearch_COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';
function MessageSearchPannel(props) {
  const {
    channelUrl,
    onResultClick,
    onCloseClick,
    messageSearchQuery,
    renderPlaceHolderError,
    renderPlaceHolderLoading,
    renderPlaceHolderNoString,
    renderPlaceHolderEmptyList,
    renderSearchItem
  } = props;
  const [searchString, setSearchString] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [inputString, setInputString] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [loading, setLoading] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  let timeout = null;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (timeout) {
      clearTimeout(timeout);
    }
    timeout = setTimeout(() => {
      setSearchString(inputString);
      setLoading(true);
      timeout = null;
    }, 500);
  }, [inputString]);
  const handleOnChangeInputString = e => {
    setInputString(e.target.value);
  };
  const handleOnResultLoaded = () => {
    setLoading(false);
  };
  const handleOnClickResetStringButton = e => {
    e.stopPropagation();
    setInputString('');
    setSearchString('');
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: MessageSearch_COMPONENT_CLASS_NAME
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__header`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__header__title`,
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.SEARCH_IN_CHANNEL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__header__close-button`,
    width: "32px",
    height: "32px",
    onClick: onCloseClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.ON_BACKGROUND_1,
    width: "22px",
    height: "22px"
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__input`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__input__container`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__input__container__search-icon`,
    type: IconTypes.SEARCH,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "24px",
    height: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__input__container__input-area`,
    placeholder: stringSet.SEARCH,
    value: inputString,
    onChange: handleOnChangeInputString
  }), inputString && loading && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__input__container__spinner`,
    width: "20px",
    height: "20px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "20px",
    height: "20px"
  })), !loading && inputString && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__input__container__reset-input-button`,
    type: IconTypes.REMOVE,
    fillColor: IconColors.ON_BACKGROUND_3,
    width: "20px",
    height: "20px",
    onClick: handleOnClickResetStringButton
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `${MessageSearch_COMPONENT_CLASS_NAME}__message-search`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchProvider, {
    channelUrl: channelUrl,
    searchString: searchString,
    onResultClick: onResultClick,
    onResultLoaded: handleOnResultLoaded,
    messageSearchQuery: messageSearchQuery
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchUI, {
    renderPlaceHolderError: renderPlaceHolderError,
    renderPlaceHolderLoading: renderPlaceHolderLoading,
    renderPlaceHolderNoString: renderPlaceHolderNoString,
    renderPlaceHolderEmptyList: renderPlaceHolderEmptyList,
    renderSearchItem: renderSearchItem
  }))));
}


//# sourceMappingURL=MessageSearch.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/RemoveMessageModal-715f4bd6.js






const RemoveMessageModal_715f4bd6_RemoveMessage = props => {
  var _message$threadInfo;
  const {
    onCancel,
    onSubmit,
    message
  } = props;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    deleteMessage
  } = useThreadContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    type: ButtonTypes.DANGER,
    disabled: (message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) > 0,
    onCancel: onCancel,
    onSubmit: () => {
      deleteMessage(message).then(() => {
        onCancel === null || onCancel === void 0 ? void 0 : onCancel();
        onSubmit === null || onSubmit === void 0 ? void 0 : onSubmit();
      });
    },
    submitText: stringSet.MESSAGE_MENU__DELETE,
    titleText: stringSet.MODAL__DELETE_MESSAGE__TITLE
  });
};


//# sourceMappingURL=RemoveMessageModal-715f4bd6.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ParentMessageInfoItem.js





























































function ParentMessageInfoItem(_ref) {
  var _stores$userStore, _stores$userStore$use, _message$mentionedMes, _message$mentionedUse, _message$reactions, _thumbnails, _thumbnails$, _getUIKitMessageTypes;
  let {
    className,
    message,
    showFileViewer
  } = _ref;
  const {
    stores,
    config
  } = useSendbirdStateContext();
  const {
    replyType,
    isMentionEnabled,
    isReactionEnabled
  } = config;
  const currentUserId = stores === null || stores === void 0 ? void 0 : (_stores$userStore = stores.userStore) === null || _stores$userStore === void 0 ? void 0 : (_stores$userStore$use = _stores$userStore.user) === null || _stores$userStore$use === void 0 ? void 0 : _stores$userStore$use.userId;
  const {
    stringSet
  } = useLocalization();
  const {
    currentChannel,
    emojiContainer,
    nicknamesMap,
    toggleReaction
  } = useThreadContext();
  const isMentionedMessage = isMentionEnabled && (message === null || message === void 0 ? void 0 : (_message$mentionedMes = message.mentionedMessageTemplate) === null || _message$mentionedMes === void 0 ? void 0 : _message$mentionedMes.length) > 0 && (message === null || message === void 0 ? void 0 : (_message$mentionedUse = message.mentionedUsers) === null || _message$mentionedUse === void 0 ? void 0 : _message$mentionedUse.length) > 0;

  // Emoji reactions
  const isReactionActivated = isReactionEnabled && replyType === 'THREAD' && !(currentChannel !== null && currentChannel !== void 0 && currentChannel.isSuper) && !(currentChannel !== null && currentChannel !== void 0 && currentChannel.isBroadcast) && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0;
  const tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (isMentionedMessage) {
      return tokenizeMessage({
        mentionedUsers: message === null || message === void 0 ? void 0 : message.mentionedUsers,
        messageText: message === null || message === void 0 ? void 0 : message.mentionedMessageTemplate
      });
    }
    return tokenizeMessage({
      messageText: message === null || message === void 0 ? void 0 : message.message
    });
  }, [message === null || message === void 0 ? void 0 : message.updatedAt]);

  // Thumbnail mesage
  const [isImageRendered, setImageRendered] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const thumbnailUrl = (message === null || message === void 0 ? void 0 : (_thumbnails = message.thumbnails) === null || _thumbnails === void 0 ? void 0 : _thumbnails.length) > 0 ? message === null || message === void 0 ? void 0 : (_thumbnails$ = message.thumbnails[0]) === null || _thumbnails$ === void 0 ? void 0 : _thumbnails$.url : '';
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-parent-message-info-item ${className}`
  }, isUserMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-parent-message-info-item__text-message",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, {
    tokens: tokens
  }), isEditedMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-parent-message-info-item__text-message edited",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, ` ${stringSet.MESSAGE_EDITED} `)), getUIKitMessageType(message) === getUIKitMessageTypes().FILE && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__file-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__file-message__file-icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-parent-message-info-item__file-message__file-icon__icon",
    type: {
      IMAGE: IconTypes.PHOTO,
      VIDEO: IconTypes.PLAY,
      AUDIO: IconTypes.FILE_AUDIO,
      GIF: IconTypes.GIF,
      OTHERS: IconTypes.FILE_DOCUMENT
    }[getUIKitFileType(message === null || message === void 0 ? void 0 : message.type)],
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "sendbird-parent-message-info-item__file-message__file-name",
    onClick: () => {
      window.open(message === null || message === void 0 ? void 0 : message.url);
    },
    color: LabelColors.ONBACKGROUND_1
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-parent-message-info-item__file-message__file-name__text",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, truncateString((message === null || message === void 0 ? void 0 : message.name) || (message === null || message === void 0 ? void 0 : message.url), 30)))), isVoiceMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__voice-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageItemBody, {
    className: "sendbird-parent-message-info-item__voice-message__item",
    message: message,
    channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
    isByMe: false,
    isReactionEnabled: isReactionEnabled
  })), isThumbnailMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__thumbnail-message",
    onClick: () => {
      if (isSentMessage(message)) {
        showFileViewer(true);
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    className: "sendbird-parent-message-info-item__thumbnail-message__thumbnail",
    url: thumbnailUrl || (message === null || message === void 0 ? void 0 : message.url) || (message === null || message === void 0 ? void 0 : message.plainUrl),
    alt: message === null || message === void 0 ? void 0 : message.type,
    width: "200px",
    height: "148px",
    onLoad: () => {
      setImageRendered(true);
    },
    placeHolder: style_ => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-parent-message-info-item__thumbnail-message__placeholder",
      style: style_
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-parent-message-info-item__thumbnail-message__placeholder__icon"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.PHOTO,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "34px",
      height: "34px"
    })))
  }), isVideoMessage(message) && !thumbnailUrl && !isImageRendered && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", {
    className: "sendbird-parent-message-info-item__thumbnail-message__video"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", {
    src: (message === null || message === void 0 ? void 0 : message.url) || (message === null || message === void 0 ? void 0 : message.plainUrl),
    type: message === null || message === void 0 ? void 0 : message.type
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__thumbnail-message__image-cover"
  }), (isVideoMessage(message) || isGifMessage(message)) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__thumbnail-message__icon-wrapper"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__thumbnail-message__icon-wrapper__icon"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: isVideoMessage(message) ? IconTypes.PLAY : IconTypes.GIF,
    fillColor: IconColors.GRAY,
    width: "34px",
    height: "34px"
  })))), getUIKitMessageType(message) === (getUIKitMessageTypes === null || getUIKitMessageTypes === void 0 ? void 0 : (_getUIKitMessageTypes = getUIKitMessageTypes()) === null || _getUIKitMessageTypes === void 0 ? void 0 : _getUIKitMessageTypes.UNKNOWN) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info-item__unknown-message"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-parent-message-info-item__unknown-message__header",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.UNKNOWN__UNKNOWN_MESSAGE_TYPE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-parent-message-info-item__unknown-message__description",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.UNKNOWN__CANNOT_READ_MESSAGE)), isReactionActivated && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info__reactions"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactions, {
    userId: currentUserId,
    message: message,
    channel: currentChannel,
    isByMe: false,
    emojiContainer: emojiContainer,
    memberNicknamesMap: nicknamesMap,
    toggleReaction: toggleReaction
  })));
}


//# sourceMappingURL=ParentMessageInfoItem.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-8017e2b5.js












// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types

// TODO: refactor this to -> as const pattern

const index_8017e2b5_SUPPORTED_MIMES = {
  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/svg+xml', 'image/webp'],
  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4']
};
const index_8017e2b5_isImage = type => index_8017e2b5_SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;
const index_8017e2b5_isVideo = type => index_8017e2b5_SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;
_objectSpread2({}, index_8017e2b5_SUPPORTED_MIMES);
const ViewerTypes = {
  SINGLE: 'SINGLE',
  MULTI: 'MULTI'
};

function useKeyDown(_ref) {
  let {
    props,
    ref
  } = _ref;
  const {
    onClose
  } = props;
  let onClickLeft = utils_40781609_noop;
  let onClickRight = utils_40781609_noop;
  if (props.viewerType === ViewerTypes.MULTI) {
    onClickLeft = props.onClickLeft;
    onClickRight = props.onClickRight;
  }
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    var _ref$current;
    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.focus();
  }, [ref.current]);

  // this usecallback is not super necessary
  // discuss with others and remove it if it's not needed
  const onKeyDown = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(event => {
    switch (event.key) {
      case 'Escape':
        // @ts-ignore
        onClose(event);
        break;
      case 'ArrowLeft':
        onClickLeft();
        break;
      case 'ArrowRight':
        onClickRight();
        break;
    }
    event.stopPropagation();
  }, [onClose, onClickLeft, onClickRight]);
  return {
    onKeyDown
  };
}

function mapFileViewerComponentProps(_ref) {
  let {
    props
  } = _ref;
  if (props.viewerType === ViewerTypes.MULTI) {
    const {
      fileInfoList,
      currentIndex
    } = props;
    return fileInfoList[currentIndex];
  }
  const fileInfo = props;
  return {
    name: fileInfo.name,
    type: fileInfo.type,
    url: fileInfo.url
  };
}

function DeleteButton(props) {
  if (props.viewerType !== ViewerTypes.MULTI) {
    const {
      onDelete,
      isByMe,
      disableDelete,
      className
    } = props;
    return isByMe ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: `sendbird-fileviewer__header__right__actions__delete ${className}`
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: disableDelete ? 'disabled' : '',
      type: IconTypes.DELETE,
      fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1,
      height: "24px",
      width: "24px",
      onClick: e => {
        if (!disableDelete) {
          onDelete === null || onDelete === void 0 ? void 0 : onDelete(e);
        }
      }
    })) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
}

// this is a slider component that is used to navigate between images
function Slider(props) {
  if (props.viewerType === ViewerTypes.MULTI) {
    const {
      onClickLeft,
      onClickRight
    } = props;
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-file-viewer-slider"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-file-viewer-arrow--left"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.SLIDE_LEFT,
      fillColor: IconColors.ON_BACKGROUND_1,
      height: consts_397a92f1["o" /* j */],
      width: consts_397a92f1["o" /* j */],
      onClick: e => {
        onClickLeft === null || onClickLeft === void 0 ? void 0 : onClickLeft();
        e.stopPropagation();
      }
    })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-file-viewer-arrow--right"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.SLIDE_LEFT,
      fillColor: IconColors.ON_BACKGROUND_1,
      height: consts_397a92f1["o" /* j */],
      width: consts_397a92f1["o" /* j */],
      onClick: e => {
        e.stopPropagation();
        onClickRight === null || onClickRight === void 0 ? void 0 : onClickRight();
      }
    })));
  }
  // return empty fragment if viewerType is not ViewerTypes.MULTI
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
}

const index_8017e2b5_FileViewerComponent = props => {
  const ref = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    profileUrl,
    nickname,
    onClose
  } = props;
  const {
    onKeyDown
  } = useKeyDown({
    props,
    ref
  });
  const {
    name,
    type,
    url
  } = mapFileViewerComponentProps({
    props
  });
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer",
    onKeyDown: onKeyDown
    // to focus
    ,
    tabIndex: 1,
    ref: ref
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__left"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__left__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    height: "32px",
    width: "32px",
    src: profileUrl
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-fileviewer__header__left__filename",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, name), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-fileviewer__header__left__sender-name",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, nickname)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right"
  }, isSupportedFileView(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right__actions"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
    className: "sendbird-fileviewer__header__right__actions__download",
    rel: "noopener noreferrer",
    href: url,
    target: "_blank"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.DOWNLOAD,
    fillColor: IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DeleteButton, _extends({
    className: "sendbird-fileviewer__header__right__actions__delete"
  }, props))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__header__right__actions__close"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.ON_BACKGROUND_1,
    height: "24px",
    width: "24px",
    onClick: e => onClose === null || onClose === void 0 ? void 0 : onClose(e)
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__content"
  }, isVideo(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", {
    controls: true,
    className: "sendbird-fileviewer__content__video"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", {
    src: url,
    type: type
  })), isImage(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("img", {
    src: url,
    alt: name,
    className: props.viewerType === ViewerTypes.MULTI ? 'sendbird-fileviewer__content__img__multi' : 'sendbird-fileviewer__content__img'
  }), !isSupportedFileView(type) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-fileviewer__content__unsupported"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_1,
    color: LabelColors.ONBACKGROUND_1
  }, (stringSet === null || stringSet === void 0 ? void 0 : stringSet.UI__FILE_VIEWER__UNSUPPORT) || 'Unsupported message')), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Slider, props)));
};
function index_8017e2b5_FileViewer(_ref) {
  let {
    message,
    onClose,
    isByMe = false,
    onDelete,
    currentIndex,
    onClickLeft,
    onClickRight
  } = _ref;
  if (message.isMultipleFilesMessage()) {
    var _message$sender, _message$sender2;
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_8017e2b5_FileViewerComponent, {
      profileUrl: (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.profileUrl,
      nickname: (_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.nickname,
      viewerType: ViewerTypes.MULTI,
      fileInfoList: message.fileInfoList.map(fileInfo => {
        return {
          name: fileInfo.fileName || '',
          type: fileInfo.mimeType || '',
          url: fileInfo.url
        };
      }),
      currentIndex: currentIndex || 0,
      onClickLeft: onClickLeft || utils_40781609_noop,
      onClickRight: onClickRight || utils_40781609_noop,
      onClose: onClose
    });
  } else if (message.isFileMessage()) {
    var _message$sender3, _message$sender4, _message$threadInfo;
    return /*#__PURE__*/Object(react_dom["createPortal"])( /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_8017e2b5_FileViewerComponent, {
      profileUrl: (_message$sender3 = message.sender) === null || _message$sender3 === void 0 ? void 0 : _message$sender3.profileUrl,
      nickname: (_message$sender4 = message.sender) === null || _message$sender4 === void 0 ? void 0 : _message$sender4.nickname,
      name: message.name,
      type: message.type,
      url: message === null || message === void 0 ? void 0 : message.url,
      isByMe: isByMe,
      disableDelete: ((message === null || message === void 0 ? void 0 : (_message$threadInfo = message.threadInfo) === null || _message$threadInfo === void 0 ? void 0 : _message$threadInfo.replyCount) || 0) > 0,
      onClose: onClose,
      onDelete: onDelete || utils_40781609_noop
    }), document.getElementById(MODAL_ROOT));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
}


//# sourceMappingURL=index-8017e2b5.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ParentMessageInfo.js


















































































function ParentMessageInfo(_ref) {
  var _stores$userStore$use, _stores$userStore$use2, _parentMessage$isUser, _currentChannel$membe3, _currentChannel$membe4, _parentMessage$sender4;
  let {
    className
  } = _ref;
  const {
    stores,
    config
  } = useSendbirdStateContext();
  const {
    isMentionEnabled,
    isReactionEnabled,
    replyType,
    isOnline,
    userMention,
    logger
  } = config;
  const userId = (_stores$userStore$use = (_stores$userStore$use2 = stores.userStore.user) === null || _stores$userStore$use2 === void 0 ? void 0 : _stores$userStore$use2.userId) !== null && _stores$userStore$use !== void 0 ? _stores$userStore$use : '';
  const {
    dateLocale
  } = useLocalization();
  const {
    currentChannel,
    parentMessage,
    allThreadMessages,
    emojiContainer,
    toggleReaction,
    updateMessage,
    deleteMessage,
    onMoveToParentMessage,
    onHeaderActionClick,
    isMuted,
    isChannelFrozen
  } = useThreadContext();
  const {
    isMobile
  } = useMediaQueryContext();
  const [showRemove, setShowRemove] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [supposedHover, setSupposedHover] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showFileViewer, setShowFileViewer] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const usingReaction = getIsReactionEnabled({
    globalLevel: isReactionEnabled,
    isSuper: currentChannel.isSuper,
    isBroadcast: currentChannel.isBroadcast
  });
  const isByMe = userId === parentMessage.sender.userId;

  // Mobile
  const mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [showMobileMenu, setShowMobileMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const longPress = useLongPress({
    onLongPress: () => {
      if (isMobile) {
        setShowMobileMenu(true);
      }
    }
  }, {
    shouldPreventDefault: false
  });

  // Edit message
  const [showEditInput, setShowEditInput] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const disabled = !isOnline || isMuted || isChannelFrozen && !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR);

  // Mention
  const editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [mentionNickname, setMentionNickname] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [mentionedUsers, setMentionedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [mentionedUserIds, setMentionedUserIds] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [messageInputEvent, setMessageInputEvent] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [selectedUser, setSelectedUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [mentionSuggestedUsers, setMentionSuggestedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const displaySuggestedMentionList = isOnline && isMentionEnabled && mentionNickname.length > 0 && !isMuted && !(isChannelFrozen && !(currentChannel.myRole === Role.OPERATOR));
  const mentionNodes = useDirtyGetMentions({
    ref: editMessageInputRef
  }, {
    logger
  });
  const ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setMentionedUsers(mentionedUsers.filter(_ref2 => {
      let {
        userId
      } = _ref2;
      const i = mentionedUserIds.indexOf(userId);
      if (i < 0) {
        return false;
      } else {
        mentionedUserIds.splice(i, 1);
        return true;
      }
    }));
  }, [mentionedUserIds]);

  // User Profile
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  if (showEditInput && parentMessage !== null && parentMessage !== void 0 && (_parentMessage$isUser = parentMessage.isUserMessage) !== null && _parentMessage$isUser !== void 0 && _parentMessage$isUser.call(parentMessage)) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, displaySuggestedMentionList && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionList, {
      className: "parent-message-info--suggested-mention-list",
      targetNickname: mentionNickname,
      inputEvent: messageInputEvent
      // renderUserMentionItem={renderUserMentionItem}
      ,
      onUserItemClick: user => {
        if (user) {
          setMentionedUsers([...mentionedUsers, user]);
        }
        setMentionNickname('');
        setSelectedUser(user);
        setMessageInputEvent(null);
      },
      onFocusItemChange: () => {
        setMessageInputEvent(null);
      },
      onFetchUsers: users => {
        setMentionSuggestedUsers(users);
      },
      ableAddMention: ableMention,
      maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount,
      maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
      channel: currentChannel,
      isEdit: true,
      disabled: disabled,
      ref: editMessageInputRef,
      mentionSelectedUser: selectedUser,
      isMentionEnabled: isMentionEnabled,
      message: parentMessage,
      onStartTyping: () => {
        var _currentChannel$start;
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$start = currentChannel.startTyping) === null || _currentChannel$start === void 0 ? void 0 : _currentChannel$start.call(currentChannel);
      },
      onUpdateMessage: _ref3 => {
        var _currentChannel$endTy;
        let {
          messageId,
          message,
          mentionTemplate
        } = _ref3;
        updateMessage({
          messageId,
          message,
          mentionedUsers,
          mentionTemplate
        });
        setShowEditInput(false);
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$endTy = currentChannel.endTyping) === null || _currentChannel$endTy === void 0 ? void 0 : _currentChannel$endTy.call(currentChannel);
      },
      onCancelEdit: () => {
        var _currentChannel$endTy2;
        setMentionNickname('');
        setMentionedUsers([]);
        setMentionedUserIds([]);
        setMentionSuggestedUsers([]);
        setShowEditInput(false);
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$endTy2 = currentChannel.endTyping) === null || _currentChannel$endTy2 === void 0 ? void 0 : _currentChannel$endTy2.call(currentChannel);
      },
      onUserMentioned: user => {
        if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
          setSelectedUser(null);
          setMentionNickname('');
        }
      },
      onMentionStringChange: mentionText => {
        setMentionNickname(mentionText);
      },
      onMentionedUserIdsUpdated: userIds => {
        setMentionedUserIds(userIds);
      },
      onKeyDown: e => {
        if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e.key === MessageInputKeys.Enter && ableMention || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
          setMessageInputEvent(e);
          return true;
        }
        return false;
      }
    }));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: `sendbird-parent-message-info ${className}`
  }, isMobile ? _objectSpread2({}, longPress) : {}, {
    ref: mobileMenuRef
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => {
      var _currentChannel$membe, _currentChannel$membe2, _parentMessage$sender2;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
        className: "sendbird-parent-message-info__sender",
        ref: avatarRef,
        src: (currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$membe = currentChannel.members) === null || _currentChannel$membe === void 0 ? void 0 : (_currentChannel$membe2 = _currentChannel$membe.find(m => {
          var _parentMessage$sender;
          return (m === null || m === void 0 ? void 0 : m.userId) === (parentMessage === null || parentMessage === void 0 ? void 0 : (_parentMessage$sender = parentMessage.sender) === null || _parentMessage$sender === void 0 ? void 0 : _parentMessage$sender.userId);
        })) === null || _currentChannel$membe2 === void 0 ? void 0 : _currentChannel$membe2.profileUrl) || (parentMessage === null || parentMessage === void 0 ? void 0 : (_parentMessage$sender2 = parentMessage.sender) === null || _parentMessage$sender2 === void 0 ? void 0 : _parentMessage$sender2.profileUrl),
        alt: "thread message sender",
        width: "40px",
        height: "40px",
        onClick: () => {
          if (!disableUserProfile) {
            toggleDropdown();
          }
        }
      });
    },
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.sender,
      currentUserId: userId,
      onSuccess: closeDropdown
    }))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info__content"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-parent-message-info__content__info"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: `sendbird-parent-message-info__content__info__sender-name${usingReaction ? '--use-reaction' : ''}`,
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, (currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$membe3 = currentChannel.members) === null || _currentChannel$membe3 === void 0 ? void 0 : (_currentChannel$membe4 = _currentChannel$membe3.find(member => {
    var _parentMessage$sender3;
    return (member === null || member === void 0 ? void 0 : member.userId) === (parentMessage === null || parentMessage === void 0 ? void 0 : (_parentMessage$sender3 = parentMessage.sender) === null || _parentMessage$sender3 === void 0 ? void 0 : _parentMessage$sender3.userId);
  })) === null || _currentChannel$membe4 === void 0 ? void 0 : _currentChannel$membe4.nickname) || (getSenderName === null || getSenderName === void 0 ? void 0 : getSenderName(parentMessage))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-parent-message-info__content__info__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, format((parentMessage === null || parentMessage === void 0 ? void 0 : parentMessage.createdAt) || 0, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParentMessageInfoItem, {
    message: parentMessage,
    showFileViewer: setShowFileViewer
  })), !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemMenu, {
    className: `sendbird-parent-message-info__context-menu ${usingReaction ? 'use-reaction' : ''} ${supposedHover ? 'sendbird-mouse-hover' : ''}`,
    channel: currentChannel,
    message: parentMessage,
    isByMe: userId === (parentMessage === null || parentMessage === void 0 ? void 0 : (_parentMessage$sender4 = parentMessage.sender) === null || _parentMessage$sender4 === void 0 ? void 0 : _parentMessage$sender4.userId),
    disableDeleteMessage: allThreadMessages.length > 0,
    replyType: replyType,
    showEdit: setShowEditInput,
    showRemove: setShowRemove,
    setSupposedHover: setSupposedHover,
    onMoveToParentMessage: () => {
      onMoveToParentMessage({
        message: parentMessage,
        channel: currentChannel
      });
    }
  }), usingReaction && !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemReactionMenu, {
    className: `sendbird-parent-message-info__reaction-menu ${supposedHover ? 'sendbird-mouse-hover' : ''}`,
    message: parentMessage,
    userId: userId,
    emojiContainer: emojiContainer,
    toggleReaction: toggleReaction,
    setSupposedHover: setSupposedHover
  }), showRemove && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModal_715f4bd6_RemoveMessage, {
    onCancel: () => setShowRemove(false),
    onSubmit: () => {
      onHeaderActionClick === null || onHeaderActionClick === void 0 ? void 0 : onHeaderActionClick();
    },
    message: parentMessage
  }), showFileViewer && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_8017e2b5_FileViewer, {
    message: parentMessage,
    onClose: () => setShowFileViewer(false),
    onDelete: () => {
      deleteMessage(parentMessage).then(() => {
        setShowFileViewer(false);
      });
    }
  }), showMobileMenu && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileMenu, {
    parentRef: mobileMenuRef,
    channel: currentChannel,
    message: parentMessage,
    userId: userId,
    replyType: replyType,
    hideMenu: () => {
      setShowMobileMenu(false);
    },
    deleteMenuState: (allThreadMessages === null || allThreadMessages === void 0 ? void 0 : allThreadMessages.length) === 0 ? 'ACTIVE' : 'HIDE',
    isReactionEnabled: usingReaction,
    isByMe: isByMe,
    emojiContainer: emojiContainer,
    showEdit: setShowEditInput,
    showRemove: setShowRemove,
    toggleReaction: toggleReaction,
    isOpenedFromThread: true
  }));
}


//# sourceMappingURL=ParentMessageInfo.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadHeader.js












function ThreadHeader(_ref) {
  let {
    className,
    channelName,
    renderActionIcon,
    onActionIconClick,
    onChannelNameClick
  } = _ref;
  const {
    stringSet
  } = useLocalization();
  const MemoizedActionIcon = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (typeof renderActionIcon === 'function') {
      return renderActionIcon({
        onActionIconClick
      });
    }
    return null;
  }, [renderActionIcon]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-header ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-thread-header__title",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.THREAD__HEADER_TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    onClick: e => onChannelNameClick === null || onChannelNameClick === void 0 ? void 0 : onChannelNameClick(e),
    disableUnderline: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-thread-header__channel-name",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, channelName)), MemoizedActionIcon || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thread-header__action"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    width: "32px",
    height: "32px",
    onClick: e => onActionIconClick(e)
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    fillColor: IconColors.ON_BACKGROUND_1,
    width: "22px",
    height: "22px"
  }))));
}


//# sourceMappingURL=ThreadHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadListItem.js


























































































function ThreadListItemContent(_ref) {
  var _sender, _channel$members2, _channel$members2$fin, _message$reactions;
  let {
    className,
    userId,
    channel,
    message,
    disabled = false,
    chainTop = false,
    chainBottom = false,
    isMentionEnabled = false,
    isReactionEnabled = false,
    disableQuoteMessage = false,
    replyType,
    nicknamesMap,
    emojiContainer,
    showEdit,
    showRemove,
    showFileViewer,
    resendMessage,
    toggleReaction,
    onReplyInThread
  } = _ref;
  const messageTypes = getUIKitMessageTypes();
  const {
    isMobile
  } = useMediaQueryContext();
  const {
    dateLocale
  } = useLocalization();
  const {
    config
  } = useSendbirdStateContext();
  const [supposedHover, setSupposedHover] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const isByMe = userId === (message === null || message === void 0 ? void 0 : (_sender = message.sender) === null || _sender === void 0 ? void 0 : _sender.userId) || (message === null || message === void 0 ? void 0 : message.sendingStatus) === 'pending' || (message === null || message === void 0 ? void 0 : message.sendingStatus) === 'failed';
  const useReplying = !!((replyType === 'QUOTE_REPLY' || replyType === 'THREAD') && message !== null && message !== void 0 && message.parentMessageId && message !== null && message !== void 0 && message.parentMessage && !disableQuoteMessage);
  const supposedHoverClassName = supposedHover ? 'sendbird-mouse-hover' : '';
  const isReactionEnabledInChannel = isReactionEnabled && !(channel !== null && channel !== void 0 && channel.isEphemeral);
  const isOgMessageEnabledInGroupChannel = channel.isGroupChannel() && config.groupChannel.enableOgtag;

  // Mobile
  const mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [showMobileMenu, setShowMobileMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const longPress = useLongPress({
    onLongPress: () => {
      if (isMobile) {
        setShowMobileMenu(true);
      }
    }
  }, {
    shouldPreventDefault: false
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-list-item-content ${className} ${isByMe ? 'outgoing' : 'incoming'}`,
    ref: mobileMenuRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-list-item-content__left ${isReactionEnabledInChannel ? 'use-reaction' : ''} ${isByMe ? 'outgoing' : 'incoming'}`
  }, !isByMe && !chainBottom && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => {
      var _channel$members, _channel$members$find, _message$sender2;
      return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
        className: "sendbird-thread-list-item-content__left__avatar",
        src: (channel === null || channel === void 0 ? void 0 : (_channel$members = channel.members) === null || _channel$members === void 0 ? void 0 : (_channel$members$find = _channel$members.find(member => {
          var _message$sender;
          return (member === null || member === void 0 ? void 0 : member.userId) === (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId);
        })) === null || _channel$members$find === void 0 ? void 0 : _channel$members$find.profileUrl) || (message === null || message === void 0 ? void 0 : (_message$sender2 = message.sender) === null || _message$sender2 === void 0 ? void 0 : _message$sender2.profileUrl) || '',
        ref: avatarRef,
        width: "28px",
        height: "28px",
        onClick: () => {
          if (!disableUserProfile) {
            toggleDropdown === null || toggleDropdown === void 0 ? void 0 : toggleDropdown();
          }
        }
      });
    },
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: message === null || message === void 0 ? void 0 : message.sender,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: message === null || message === void 0 ? void 0 : message.sender,
      onSuccess: closeDropdown
    }))
  }), isByMe && !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-list-item-content-menu ${isReactionEnabledInChannel ? 'use-reaction' : ''} ${isByMe ? 'outgoing' : 'incoming'} ${supposedHoverClassName}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemMenu, {
    className: "sendbird-thread-list-item-content-menu__normal-menu",
    channel: channel,
    message: message,
    isByMe: isByMe,
    replyType: replyType,
    disabled: disabled,
    showEdit: showEdit,
    showRemove: showRemove,
    resendMessage: resendMessage,
    setSupposedHover: setSupposedHover,
    onReplyInThread: onReplyInThread
  }), isReactionEnabledInChannel && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemReactionMenu, {
    className: "sendbird-thread-list-item-content-menu__reaction-menu",
    message: message,
    userId: userId,
    spaceFromTrigger: {},
    emojiContainer: emojiContainer,
    toggleReaction: toggleReaction,
    setSupposedHover: setSupposedHover
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: "sendbird-thread-list-item-content__middle"
  }, isMobile ? _objectSpread2({}, longPress) : {}), !isByMe && !chainTop && !useReplying && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-thread-list-item-content__middle__sender-name",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, (channel === null || channel === void 0 ? void 0 : (_channel$members2 = channel.members) === null || _channel$members2 === void 0 ? void 0 : (_channel$members2$fin = _channel$members2.find(member => {
    var _message$sender3;
    return (member === null || member === void 0 ? void 0 : member.userId) === (message === null || message === void 0 ? void 0 : (_message$sender3 = message.sender) === null || _message$sender3 === void 0 ? void 0 : _message$sender3.userId);
  })) === null || _channel$members2$fin === void 0 ? void 0 : _channel$members2$fin.nickname) || getSenderName(message)
  // TODO: Divide getting profileUrl logic to utils
  ), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-thread-list-item-content__middle__body-container'])
  }, isByMe && !chainBottom && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-thread-list-item-content__middle__body-container__created-at', 'left', supposedHoverClassName])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thread-list-item-content__middle__body-container__created-at__component-container"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageStatus, {
    message: message,
    channel: channel
  }))), isOgMessageEnabledInGroupChannel && isOGMessage(message) ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OGMessageItemBody, {
    className: "sendbird-thread-list-item-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    isMentionEnabled: isMentionEnabled,
    isReactionEnabled: isReactionEnabledInChannel
  }) : isTextMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextMessageItemBody, {
    className: "sendbird-thread-list-item-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    isMentionEnabled: isMentionEnabled,
    isReactionEnabled: isReactionEnabledInChannel
  }), isVoiceMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageItemBody, {
    className: "sendbird-thread-list-item-content__middle__message-item-body",
    message: message,
    channelUrl: channel === null || channel === void 0 ? void 0 : channel.url,
    isByMe: isByMe,
    isReactionEnabled: isReactionEnabledInChannel
  }), getUIKitMessageType(message) === messageTypes.FILE && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FileMessageItemBody, {
    className: "sendbird-thread-list-item-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    isReactionEnabled: isReactionEnabledInChannel,
    truncateLimit: isByMe ? 18 : 14
  }), isThumbnailMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThumbnailMessageItemBody, {
    className: "sendbird-thread-list-item-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    isReactionEnabled: isReactionEnabledInChannel,
    showFileViewer: showFileViewer,
    style: {
      width: isMobile ? '100%' : '200px',
      height: '148px'
    }
  }), getUIKitMessageType(message) === messageTypes.UNKNOWN && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UnknownMessageItemBody, {
    className: "sendbird-thread-list-item-content__middle__message-item-body",
    message: message,
    isByMe: isByMe,
    isReactionEnabled: isReactionEnabledInChannel
  }), isReactionEnabledInChannel && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: getClassName(['sendbird-thread-list-item-content-reactions', !isByMe || isThumbnailMessage(message) || isOgMessageEnabledInGroupChannel && isOGMessage(message) ? '' : 'primary'])
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EmojiReactions, {
    userId: userId,
    message: message,
    channel: channel,
    isByMe: isByMe,
    emojiContainer: emojiContainer,
    memberNicknamesMap: nicknamesMap,
    toggleReaction: toggleReaction
  })), !isByMe && !chainBottom && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: getClassName(['sendbird-thread-list-item-content__middle__body-container__created-at', 'right', supposedHoverClassName]),
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, format((message === null || message === void 0 ? void 0 : message.createdAt) || 0, 'p', {
    locale: dateLocale
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-list-item-content__right ${chainTop ? 'chain-top' : ''} ${isByMe ? 'outgoing' : 'incoming'}`
  }, !isByMe && !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-list-item-content-menu ${supposedHoverClassName}`
  }, isReactionEnabledInChannel && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemReactionMenu, {
    className: "sendbird-thread-list-item-content-menu__reaction-menu",
    message: message,
    userId: userId,
    spaceFromTrigger: {},
    emojiContainer: emojiContainer,
    toggleReaction: toggleReaction,
    setSupposedHover: setSupposedHover
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageItemMenu, {
    className: "sendbird-thread-list-item-content-menu__normal-menu",
    channel: channel,
    message: message,
    isByMe: isByMe,
    replyType: replyType,
    disabled: disabled,
    showRemove: showRemove,
    resendMessage: resendMessage,
    setSupposedHover: setSupposedHover,
    onReplyInThread: onReplyInThread
  }))), showMobileMenu && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileMenu, {
    parentRef: mobileMenuRef,
    channel: channel,
    message: message,
    userId: userId,
    replyType: replyType,
    hideMenu: () => {
      setShowMobileMenu(false);
    },
    isReactionEnabled: isReactionEnabled,
    isByMe: isByMe,
    emojiContainer: emojiContainer,
    showEdit: showEdit,
    showRemove: showRemove,
    toggleReaction: toggleReaction,
    isOpenedFromThread: true
  }));
}

function ThreadListItem(_ref) {
  var _stores$userStore, _stores$userStore$use, _message$reactions, _message$sender;
  let {
    className,
    message,
    chainTop,
    chainBottom,
    hasSeparator,
    renderCustomSeparator,
    handleScroll
  } = _ref;
  const {
    stores,
    config
  } = useSendbirdStateContext();
  const {
    isReactionEnabled,
    isMentionEnabled,
    isOnline,
    replyType,
    userMention,
    logger
  } = config;
  const userId = stores === null || stores === void 0 ? void 0 : (_stores$userStore = stores.userStore) === null || _stores$userStore === void 0 ? void 0 : (_stores$userStore$use = _stores$userStore.user) === null || _stores$userStore$use === void 0 ? void 0 : _stores$userStore$use.userId;
  const {
    dateLocale
  } = useLocalization();
  const threadContext = useThreadContext === null || useThreadContext === void 0 ? void 0 : useThreadContext();
  const {
    currentChannel,
    nicknamesMap,
    emojiContainer,
    toggleReaction,
    threadListState,
    updateMessage,
    resendMessage,
    deleteMessage,
    isMuted,
    isChannelFrozen
  } = threadContext;
  const openingMessage = threadContext === null || threadContext === void 0 ? void 0 : threadContext.message;
  const [showEdit, setShowEdit] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showRemove, setShowRemove] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showFileViewer, setShowFileViewer] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const usingReaction = getIsReactionEnabled({
    globalLevel: isReactionEnabled,
    isSuper: currentChannel.isSuper,
    isBroadcast: currentChannel.isBroadcast
  });

  // Move to message
  const messageScrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    if ((openingMessage === null || openingMessage === void 0 ? void 0 : openingMessage.messageId) === (message === null || message === void 0 ? void 0 : message.messageId) && messageScrollRef !== null && messageScrollRef !== void 0 && messageScrollRef.current) {
      var _messageScrollRef$cur;
      (_messageScrollRef$cur = messageScrollRef.current) === null || _messageScrollRef$cur === void 0 ? void 0 : _messageScrollRef$cur.scrollIntoView({
        block: 'center',
        inline: 'center'
      });
    }
  }, [openingMessage, messageScrollRef === null || messageScrollRef === void 0 ? void 0 : messageScrollRef.current]);

  // reactions
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useLayoutEffect"])(() => {
    handleScroll === null || handleScroll === void 0 ? void 0 : handleScroll();
  }, [showEdit, message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length]);

  // mention
  const editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [mentionNickname, setMentionNickname] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [mentionedUsers, setMentionedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [mentionedUserIds, setMentionedUserIds] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [messageInputEvent, setMessageInputEvent] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [selectedUser, setSelectedUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [mentionSuggestedUsers, setMentionSuggestedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const displaySuggestedMentionList = isOnline && isMentionEnabled && mentionNickname.length > 0 && !isMuted && !(isChannelFrozen && !(currentChannel.myRole === Role.OPERATOR));
  const mentionNodes = useDirtyGetMentions({
    ref: editMessageInputRef
  }, {
    logger
  });
  const ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setMentionedUsers(mentionedUsers.filter(_ref2 => {
      let {
        userId
      } = _ref2;
      const i = mentionedUserIds.indexOf(userId);
      if (i < 0) {
        return false;
      } else {
        mentionedUserIds.splice(i, 1);
        return true;
      }
    }));
  }, [mentionedUserIds]);

  // edit input
  const disabled = !(threadListState === ThreadListStateTypes.INITIALIZED) || !isOnline || isMuted || isChannelFrozen;

  // memorize
  const MemorizedSeparator = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (typeof renderCustomSeparator === 'function') {
      return renderCustomSeparator === null || renderCustomSeparator === void 0 ? void 0 : renderCustomSeparator({
        message
      });
    }
  }, [message, renderCustomSeparator]);

  // Edit message
  if (showEdit && message.isUserMessage()) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, displaySuggestedMentionList && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionList, {
      targetNickname: mentionNickname,
      inputEvent: messageInputEvent
      // renderUserMentionItem={renderUserMentionItem}
      ,
      onUserItemClick: user => {
        if (user) {
          setMentionedUsers([...mentionedUsers, user]);
        }
        setMentionNickname('');
        setSelectedUser(user);
        setMessageInputEvent(null);
      },
      onFocusItemChange: () => {
        setMessageInputEvent(null);
      },
      onFetchUsers: users => {
        setMentionSuggestedUsers(users);
      },
      ableAddMention: ableMention,
      maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount,
      maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
      isEdit: true,
      channel: currentChannel,
      disabled: disabled,
      ref: editMessageInputRef,
      mentionSelectedUser: selectedUser,
      isMentionEnabled: isMentionEnabled,
      message: message,
      onStartTyping: () => {
        var _currentChannel$start;
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$start = currentChannel.startTyping) === null || _currentChannel$start === void 0 ? void 0 : _currentChannel$start.call(currentChannel);
      },
      onUpdateMessage: _ref3 => {
        var _currentChannel$endTy;
        let {
          messageId,
          message,
          mentionTemplate
        } = _ref3;
        updateMessage({
          messageId,
          message,
          mentionedUsers,
          mentionTemplate
        });
        setShowEdit(false);
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$endTy = currentChannel.endTyping) === null || _currentChannel$endTy === void 0 ? void 0 : _currentChannel$endTy.call(currentChannel);
      },
      onCancelEdit: () => {
        var _currentChannel$endTy2;
        setMentionNickname('');
        setMentionedUsers([]);
        setMentionedUserIds([]);
        setMentionSuggestedUsers([]);
        setShowEdit(false);
        currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$endTy2 = currentChannel.endTyping) === null || _currentChannel$endTy2 === void 0 ? void 0 : _currentChannel$endTy2.call(currentChannel);
      },
      onUserMentioned: user => {
        if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
          setSelectedUser(null);
          setMentionNickname('');
        }
      },
      onMentionStringChange: mentionText => {
        setMentionNickname(mentionText);
      },
      onMentionedUserIdsUpdated: userIds => {
        setMentionedUserIds(userIds);
      },
      onKeyDown: e => {
        if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e.key === MessageInputKeys.Enter && ableMention || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
          setMessageInputEvent(e);
          return true;
        }
        return false;
      }
    }));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    ref: messageScrollRef,
    className: `sendbird-thread-list-item ${className}`
  }, hasSeparator && (message === null || message === void 0 ? void 0 : message.createdAt) && (MemorizedSeparator || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, format(message === null || message === void 0 ? void 0 : message.createdAt, 'MMM dd, yyyy', {
    locale: dateLocale
  })))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadListItemContent, {
    userId: userId,
    channel: currentChannel,
    message: message,
    chainTop: chainTop,
    chainBottom: chainBottom,
    isReactionEnabled: usingReaction,
    isMentionEnabled: isMentionEnabled,
    disableQuoteMessage: true,
    replyType: replyType,
    nicknamesMap: nicknamesMap,
    emojiContainer: emojiContainer,
    resendMessage: resendMessage,
    showRemove: setShowRemove,
    showFileViewer: setShowFileViewer,
    toggleReaction: toggleReaction,
    showEdit: setShowEdit
  }), showRemove && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModal_715f4bd6_RemoveMessage, {
    message: message,
    onCancel: () => setShowRemove(false)
  }), showFileViewer && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_8017e2b5_FileViewer, {
    message: message,
    isByMe: (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId) === userId,
    onClose: () => setShowFileViewer(false),
    onDelete: () => {
      deleteMessage(message);
      setShowFileViewer(false);
    }
  }));
}


//# sourceMappingURL=ThreadListItem.js.map

// EXTERNAL MODULE: ./node_modules/date-fns/node_modules/@babel/runtime/helpers/esm/typeof.js
var esm_typeof = __webpack_require__(7);

// CONCATENATED MODULE: ./node_modules/date-fns/esm/_lib/requiredArgs/index.js
function requiredArgs_requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}
// CONCATENATED MODULE: ./node_modules/date-fns/esm/toDate/index.js


/**
 * @name toDate
 * @category Common Helpers
 * @summary Convert the given argument to an instance of Date.
 *
 * @description
 * Convert the given argument to an instance of Date.
 *
 * If the argument is an instance of Date, the function returns its clone.
 *
 * If the argument is a number, it is treated as a timestamp.
 *
 * If the argument is none of the above, the function returns Invalid Date.
 *
 * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.
 *
 * @param {Date|Number} argument - the value to convert
 * @returns {Date} the parsed date in the local time zone
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // Clone the date:
 * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))
 * //=> Tue Feb 11 2014 11:30:30
 *
 * @example
 * // Convert the timestamp to date:
 * const result = toDate(1392098430000)
 * //=> Tue Feb 11 2014 11:30:30
 */
function toDate_toDate(argument) {
  requiredArgs_requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);

  // Clone the date
  if (argument instanceof Date || Object(esm_typeof["a" /* default */])(argument) === 'object' && argStr === '[object Date]') {
    // Prevent the date to lose the milliseconds when passed to new Date() in IE10
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      // eslint-disable-next-line no-console
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments");
      // eslint-disable-next-line no-console
      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}
// CONCATENATED MODULE: ./node_modules/date-fns/esm/startOfDay/index.js


/**
 * @name startOfDay
 * @category Day Helpers
 * @summary Return the start of a day for the given date.
 *
 * @description
 * Return the start of a day for the given date.
 * The result will be in the local timezone.
 *
 * @param {Date|Number} date - the original date
 * @returns {Date} the start of a day
 * @throws {TypeError} 1 argument required
 *
 * @example
 * // The start of a day for 2 September 2014 11:55:00:
 * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))
 * //=> Tue Sep 02 2014 00:00:00
 */
function startOfDay_startOfDay(dirtyDate) {
  requiredArgs_requiredArgs(1, arguments);
  var date = toDate_toDate(dirtyDate);
  date.setHours(0, 0, 0, 0);
  return date;
}
// CONCATENATED MODULE: ./node_modules/date-fns/esm/isSameDay/index.js


/**
 * @name isSameDay
 * @category Day Helpers
 * @summary Are the given dates in the same day (and year and month)?
 *
 * @description
 * Are the given dates in the same day (and year and month)?
 *
 * @param {Date|Number} dateLeft - the first date to check
 * @param {Date|Number} dateRight - the second date to check
 * @returns {Boolean} the dates are in the same day (and year and month)
 * @throws {TypeError} 2 arguments required
 *
 * @example
 * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))
 * //=> true
 *
 * @example
 * // Are 4 September and 4 October in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))
 * //=> false
 *
 * @example
 * // Are 4 September, 2014 and 4 September, 2015 in the same day?
 * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))
 * //=> false
 */
function isSameDay_isSameDay(dirtyDateLeft, dirtyDateRight) {
  requiredArgs_requiredArgs(2, arguments);
  var dateLeftStartOfDay = startOfDay_startOfDay(dirtyDateLeft);
  var dateRightStartOfDay = startOfDay_startOfDay(dirtyDateRight);
  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();
}
// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadList.js




























































































function ThreadList(_ref) {
  let {
    className,
    allThreadMessages,
    renderMessage,
    renderCustomSeparator,
    scrollRef,
    scrollBottom
  } = _ref;
  const {
    config
  } = useSendbirdStateContext();
  const {
    replyType,
    userId
  } = config;
  const {
    currentChannel
  } = useThreadContext();
  const MemorizedMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => _ref2 => {
    let {
      message,
      chainTop,
      chainBottom,
      hasSeparator
    } = _ref2;
    if (typeof renderMessage === 'function') {
      return renderMessage({
        message: message,
        chainTop,
        chainBottom,
        hasSeparator
      });
    }
    return null;
  }, [renderMessage]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-list ${className}`
  }, allThreadMessages.map((message, idx) => {
    var _sender;
    const isByMe = (message === null || message === void 0 ? void 0 : (_sender = message.sender) === null || _sender === void 0 ? void 0 : _sender.userId) === userId;
    const prevMessage = allThreadMessages[idx - 1];
    const nextMessage = allThreadMessages[idx + 1];
    // eslint-disable-next-line no-constant-condition
    const [chainTop, chainBottom] = compareMessagesForGrouping(prevMessage, message, nextMessage, currentChannel, replyType) ;
    const hasSeparator = !((prevMessage === null || prevMessage === void 0 ? void 0 : prevMessage.createdAt) > 0 && isSameDay_isSameDay(message === null || message === void 0 ? void 0 : message.createdAt, prevMessage === null || prevMessage === void 0 ? void 0 : prevMessage.createdAt));
    const handleScroll = () => {
      const current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
      if (current) {
        const bottom = current.scrollHeight - current.scrollTop - current.offsetHeight;
        if (scrollBottom < bottom) {
          current.scrollTop += bottom - scrollBottom;
        }
      }
    };
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, {
      message: message,
      isByMe: isByMe,
      key: message === null || message === void 0 ? void 0 : message.messageId
    }, MemorizedMessage({
      message,
      chainTop,
      chainBottom,
      hasSeparator
    }) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadListItem, {
      message: message,
      chainTop: chainTop,
      chainBottom: chainBottom,
      hasSeparator: hasSeparator,
      renderCustomSeparator: renderCustomSeparator,
      handleScroll: handleScroll
    }));
  }));
}


//# sourceMappingURL=ThreadList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadMessageInput.js


























































const ThreadMessageInput = (props, ref) => {
  const {
    className,
    renderFileUploadIcon,
    renderVoiceMessageIcon,
    renderSendMessageIcon
  } = props;
  const propsDisabled = props.disabled;
  const {
    config
  } = useSendbirdStateContext();
  const {
    stringSet
  } = useLocalization();
  const {
    isMentionEnabled,
    isOnline,
    userMention,
    isVoiceMessageEnabled,
    logger
  } = config;
  const {
    currentChannel,
    parentMessage,
    sendMessage,
    sendFileMessage,
    sendVoiceMessage,
    isMuted,
    isChannelFrozen,
    allThreadMessages
  } = useThreadContext();
  const messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])();
  const disabled = propsDisabled || isMuted || !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR) && isChannelFrozen || parentMessage === null;

  // mention
  const [mentionNickname, setMentionNickname] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])('');
  const [mentionedUsers, setMentionedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [mentionedUserIds, setMentionedUserIds] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [selectedUser, setSelectedUser] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [mentionSuggestedUsers, setMentionSuggestedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [messageInputEvent, setMessageInputEvent] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [showVoiceMessageInput, setShowVoiceMessageInput] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const displaySuggestedMentionList = isOnline && isMentionEnabled && mentionNickname.length > 0 && !isDisabledBecauseFrozen(currentChannel) && !isDisabledBecauseMuted(currentChannel) && !(currentChannel !== null && currentChannel !== void 0 && currentChannel.isBroadcast);

  // Reset when changing channel
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setShowVoiceMessageInput(false);
  }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
  const mentionNodes = useDirtyGetMentions({
    ref: ref || messageInputRef
  }, {
    logger
  });
  const ableMention = (mentionNodes === null || mentionNodes === void 0 ? void 0 : mentionNodes.length) < (userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    setMentionedUsers(mentionedUsers.filter(_ref => {
      let {
        userId
      } = _ref;
      const i = mentionedUserIds.indexOf(userId);
      if (i < 0) {
        return false;
      } else {
        mentionedUserIds.splice(i, 1);
        return true;
      }
    }));
  }, [mentionedUserIds]);
  if (currentChannel !== null && currentChannel !== void 0 && currentChannel.isBroadcast && (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) !== Role.OPERATOR) {
    return null;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread-message-input${showVoiceMessageInput ? '--voice-message' : ''} ${className}`
  }, displaySuggestedMentionList && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(SuggestedMentionList, {
    targetNickname: mentionNickname,
    inputEvent: messageInputEvent
    // renderUserMentionItem={renderUserMentionItem}
    ,
    onUserItemClick: user => {
      if (user) {
        setMentionedUsers([...mentionedUsers, user]);
      }
      setMentionNickname('');
      setSelectedUser(user);
      setMessageInputEvent(null);
    },
    onFocusItemChange: () => {
      setMessageInputEvent(null);
    },
    onFetchUsers: users => {
      setMentionSuggestedUsers(users);
    },
    ableAddMention: ableMention,
    maxMentionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxMentionCount,
    maxSuggestionCount: userMention === null || userMention === void 0 ? void 0 : userMention.maxSuggestionCount
  }), showVoiceMessageInput ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(VoiceMessageInputWrapper, {
    channel: currentChannel,
    onSubmitClick: (recordedFile, duration) => {
      sendVoiceMessage(recordedFile, duration, parentMessage);
      setShowVoiceMessageInput(false);
    },
    onCancelClick: () => {
      setShowVoiceMessageInput(false);
    }
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
    className: "sendbird-thread-message-input__message-input",
    messageFieldId: "sendbird-message-input-text-field--thread",
    disabled: disabled,
    channel: currentChannel,
    setMentionedUsers: setMentionedUsers,
    channelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
    mentionSelectedUser: selectedUser,
    isMentionEnabled: isMentionEnabled,
    isVoiceMessageEnabled: isVoiceMessageEnabled,
    onVoiceMessageIconClick: () => {
      setShowVoiceMessageInput(true);
    },
    renderFileUploadIcon: renderFileUploadIcon,
    renderVoiceMessageIcon: renderVoiceMessageIcon,
    renderSendMessageIcon: renderSendMessageIcon,
    ref: ref || messageInputRef,
    placeholder: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.isFrozen) && !((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myRole) === Role.OPERATOR) && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED || (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.myMutedState) === _bundle_a5600e6c["C" /* a$ */].MUTED && stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT || (allThreadMessages.length > 0 ? stringSet.THREAD__INPUT__REPLY_TO_THREAD : stringSet.THREAD__INPUT__REPLY_IN_THREAD),
    onStartTyping: () => {
      var _currentChannel$start;
      currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$start = currentChannel.startTyping) === null || _currentChannel$start === void 0 ? void 0 : _currentChannel$start.call(currentChannel);
    },
    onSendMessage: _ref2 => {
      var _currentChannel$endTy;
      let {
        message,
        mentionTemplate
      } = _ref2;
      sendMessage({
        message: message,
        mentionedUsers,
        mentionTemplate: mentionTemplate,
        quoteMessage: parentMessage
      });
      setMentionNickname('');
      setMentionedUsers([]);
      currentChannel === null || currentChannel === void 0 ? void 0 : (_currentChannel$endTy = currentChannel.endTyping) === null || _currentChannel$endTy === void 0 ? void 0 : _currentChannel$endTy.call(currentChannel);
    },
    onFileUpload: file => {
      sendFileMessage(file, parentMessage);
    },
    onUserMentioned: user => {
      if ((selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.userId) === (user === null || user === void 0 ? void 0 : user.userId)) {
        setSelectedUser(null);
        setMentionNickname('');
      }
    },
    onMentionStringChange: mentionText => {
      setMentionNickname(mentionText);
    },
    onMentionedUserIdsUpdated: userIds => {
      setMentionedUserIds(userIds);
    },
    onKeyDown: e => {
      if (displaySuggestedMentionList && (mentionSuggestedUsers === null || mentionSuggestedUsers === void 0 ? void 0 : mentionSuggestedUsers.length) > 0 && (e.key === MessageInputKeys.Enter && ableMention || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)) {
        setMessageInputEvent(e);
        return true;
      }
      return false;
    }
  }));
};
var ThreadMessageInput$1 = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(ThreadMessageInput);


//# sourceMappingURL=ThreadMessageInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread/components/ThreadUI.js






































































































const useMemorizedHeader = _ref => {
  let {
    renderHeader
  } = _ref;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (typeof renderHeader === 'function') {
      return renderHeader();
    }
    return null;
  }, [renderHeader]);
};

const useMemorizedParentMessageInfo = _ref => {
  let {
    parentMessage,
    parentMessageState,
    renderParentMessageInfo,
    renderParentMessageInfoPlaceholder
  } = _ref;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (parentMessageState === ParentMessageStateTypes.NIL || parentMessageState === ParentMessageStateTypes.LOADING || parentMessageState === ParentMessageStateTypes.INVALID) {
      if (typeof renderParentMessageInfoPlaceholder === 'function') {
        return renderParentMessageInfoPlaceholder(parentMessageState);
      }
      switch (parentMessageState) {
        case ParentMessageStateTypes.NIL:
          {
            return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
              className: "sendbird-thread-ui__parent-message-info placeholder-nil",
              type: PlaceHolderTypes.NO_RESULTS,
              iconSize: "64px"
            });
          }
        case ParentMessageStateTypes.LOADING:
          {
            return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
              className: "sendbird-thread-ui__parent-message-info placeholder-loading",
              type: PlaceHolderTypes.LOADING,
              iconSize: "64px"
            });
          }
        case ParentMessageStateTypes.INVALID:
          {
            return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
              className: "sendbird-thread-ui__parent-message-info placeholder-invalid",
              type: PlaceHolderTypes.WRONG,
              iconSize: "64px"
            });
          }
        default:
          {
            return null;
          }
      }
    } else if (parentMessageState === ParentMessageStateTypes.INITIALIZED) {
      if (typeof renderParentMessageInfo === 'function') {
        return renderParentMessageInfo();
      }
    }
    return null;
  }, [parentMessage, parentMessageState, renderParentMessageInfo, renderParentMessageInfoPlaceholder]);
};

const useMemorizedThreadList = _ref => {
  let {
    threadListState,
    renderThreadListPlaceHolder
  } = _ref;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    if (threadListState === ThreadListStateTypes.NIL || threadListState === ThreadListStateTypes.LOADING || threadListState === ThreadListStateTypes.INVALID) {
      if (typeof renderThreadListPlaceHolder === 'function') {
        return renderThreadListPlaceHolder(threadListState);
      }
      switch (threadListState) {
        case ThreadListStateTypes.LOADING:
          {
            return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
              className: "sendbird-thread-ui__thread-list placeholder-loading",
              type: PlaceHolderTypes.LOADING,
              iconSize: "64px"
            });
          }
        case ThreadListStateTypes.INVALID:
          {
            return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
              className: "sendbird-thread-ui__thread-list placeholder-invalid",
              type: PlaceHolderTypes.WRONG,
              iconSize: "64px"
            });
          }
        case ThreadListStateTypes.NIL:
          {
            return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
          }
        default:
          {
            return null;
          }
      }
    }
    return null;
  }, [threadListState, renderThreadListPlaceHolder]);
};

const ThreadUI = _ref => {
  var _stores$sdkStore, _stores$sdkStore$sdk, _stores$sdkStore$sdk$, _parentMessage$sender;
  let {
    renderHeader,
    renderParentMessageInfo,
    renderMessage,
    renderMessageInput,
    renderCustomSeparator,
    renderParentMessageInfoPlaceholder,
    renderThreadListPlaceHolder,
    renderFileUploadIcon,
    renderVoiceMessageIcon,
    renderSendMessageIcon
  } = _ref;
  const {
    stores
  } = useSendbirdStateContext();
  const currentUserId = stores === null || stores === void 0 ? void 0 : (_stores$sdkStore = stores.sdkStore) === null || _stores$sdkStore === void 0 ? void 0 : (_stores$sdkStore$sdk = _stores$sdkStore.sdk) === null || _stores$sdkStore$sdk === void 0 ? void 0 : (_stores$sdkStore$sdk$ = _stores$sdkStore$sdk.currentUser) === null || _stores$sdkStore$sdk$ === void 0 ? void 0 : _stores$sdkStore$sdk$.userId;
  const {
    stringSet
  } = useLocalization();
  const {
    currentChannel,
    allThreadMessages,
    parentMessage,
    parentMessageState,
    threadListState,
    hasMorePrev,
    hasMoreNext,
    fetchPrevThreads,
    fetchNextThreads,
    onHeaderActionClick,
    onMoveToParentMessage
  } = useThreadContext();
  const replyCount = allThreadMessages.length;
  const isByMe = currentUserId === (parentMessage === null || parentMessage === void 0 ? void 0 : (_parentMessage$sender = parentMessage.sender) === null || _parentMessage$sender === void 0 ? void 0 : _parentMessage$sender.userId);

  // Memoized custom components
  const MemorizedHeader = useMemorizedHeader({
    renderHeader
  });
  const MemorizedParentMessageInfo = useMemorizedParentMessageInfo({
    parentMessage,
    parentMessageState,
    renderParentMessageInfo,
    renderParentMessageInfoPlaceholder // nil, loading, invalid
  });

  const MemorizedThreadList = useMemorizedThreadList({
    threadListState,
    renderThreadListPlaceHolder
  });

  // scroll
  const [scrollBottom, setScrollBottom] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(0);
  const scrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const onScroll = e => {
    var _scrollRef$current;
    const element = e.target;
    const {
      scrollTop,
      clientHeight,
      scrollHeight
    } = element;
    const threadItemNodes = (_scrollRef$current = scrollRef.current) === null || _scrollRef$current === void 0 ? void 0 : _scrollRef$current.querySelectorAll('.sendbird-thread-list-item');
    const firstNode = threadItemNodes === null || threadItemNodes === void 0 ? void 0 : threadItemNodes[0];
    if (ThreadProvider_696e3a32_isAboutSame(scrollTop, 0, 10) && hasMorePrev) {
      fetchPrevThreads(messages => {
        if (messages) {
          try {
            var _firstNode$scrollInto;
            firstNode === null || firstNode === void 0 ? void 0 : (_firstNode$scrollInto = firstNode.scrollIntoView) === null || _firstNode$scrollInto === void 0 ? void 0 : _firstNode$scrollInto.call(firstNode, {
              block: 'start',
              inline: 'nearest'
            });
          } catch (error) {
            //
          }
        }
      });
    }
    if (ThreadProvider_696e3a32_isAboutSame(clientHeight + scrollTop, scrollHeight, 10) && hasMoreNext) {
      const scrollTop_ = scrollTop;
      fetchNextThreads(messages => {
        if (messages) {
          try {
            element.scrollTop = scrollTop_;
            scrollRef.current.scrollTop = scrollTop_;
          } catch (error) {
            //
          }
        }
      });
    }

    // save the lastest scroll bottom value
    if (scrollRef !== null && scrollRef !== void 0 && scrollRef.current) {
      const current = scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current;
      setScrollBottom(current.scrollHeight - current.scrollTop - current.offsetHeight);
    }
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thread-ui"
  }, MemorizedHeader || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadHeader, {
    className: "sendbird-thread-ui__header",
    channelName: utils_cae5adba_getChannelTitle(currentChannel, currentUserId, stringSet),
    onActionIconClick: onHeaderActionClick,
    onChannelNameClick: () => {
      onMoveToParentMessage === null || onMoveToParentMessage === void 0 ? void 0 : onMoveToParentMessage({
        message: parentMessage,
        channel: currentChannel
      });
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thread-ui--scroll",
    ref: scrollRef,
    onScroll: onScroll
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, {
    message: parentMessage,
    isByMe: isByMe
  }, MemorizedParentMessageInfo || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParentMessageInfo, {
    className: "sendbird-thread-ui__parent-message-info"
  })), replyCount > 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-thread-ui__reply-counts"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_3
  }, `${replyCount} ${replyCount > 1 ? stringSet.THREAD__THREAD_REPLIES : stringSet.THREAD__THREAD_REPLY}`)), MemorizedThreadList || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadList, {
    className: "sendbird-thread-ui__thread-list",
    allThreadMessages: allThreadMessages,
    renderMessage: renderMessage,
    renderCustomSeparator: renderCustomSeparator,
    scrollRef: scrollRef,
    scrollBottom: scrollBottom
  })), (renderMessageInput === null || renderMessageInput === void 0 ? void 0 : renderMessageInput()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadMessageInput$1, {
    className: "sendbird-thread-ui__message-input",
    renderFileUploadIcon: renderFileUploadIcon,
    renderVoiceMessageIcon: renderVoiceMessageIcon,
    renderSendMessageIcon: renderSendMessageIcon
  }));
};


//# sourceMappingURL=ThreadUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/Thread.js







































































































const Thread = props => {
  const {
    // props
    className,
    // ThreadProviderProps
    channelUrl,
    message,
    onHeaderActionClick,
    onMoveToParentMessage,
    // ThreadUIProps
    renderHeader,
    renderParentMessageInfo,
    renderMessage,
    renderMessageInput,
    renderCustomSeparator,
    renderParentMessageInfoPlaceholder,
    renderThreadListPlaceHolder,
    renderFileUploadIcon,
    renderVoiceMessageIcon,
    renderSendMessageIcon
  } = props;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-thread ${className}`
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadProvider, {
    channelUrl: channelUrl,
    message: message,
    onHeaderActionClick: onHeaderActionClick,
    onMoveToParentMessage: onMoveToParentMessage
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ThreadUI, {
    renderHeader: renderHeader,
    renderParentMessageInfo: renderParentMessageInfo,
    renderMessage: renderMessage,
    renderMessageInput: renderMessageInput,
    renderCustomSeparator: renderCustomSeparator,
    renderParentMessageInfoPlaceholder: renderParentMessageInfoPlaceholder,
    renderThreadListPlaceHolder: renderThreadListPlaceHolder,
    renderFileUploadIcon: renderFileUploadIcon,
    renderVoiceMessageIcon: renderVoiceMessageIcon,
    renderSendMessageIcon: renderSendMessageIcon
  })));
};


//# sourceMappingURL=Thread.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/App.js







































































































































































const DesktopLayout = props => {
  const {
    isReactionEnabled,
    replyType,
    isMessageGroupingEnabled,
    allowProfileEdit,
    showSearchIcon,
    onProfileEditSuccess,
    disableAutoSelect,
    currentChannel,
    setCurrentChannel,
    showSettings,
    setShowSettings,
    showSearch,
    setShowSearch,
    highlightedMessage,
    setHighlightedMessage,
    startingPoint,
    setStartingPoint,
    showThread,
    setShowThread,
    threadTargetMessage,
    setThreadTargetMessage
  } = props;
  const [animatedMessageId, setAnimatedMessageId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__channellist-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelList, {
    allowProfileEdit: allowProfileEdit,
    activeChannelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
    onProfileEditSuccess: onProfileEditSuccess,
    disableAutoSelect: disableAutoSelect,
    onChannelSelect: channel => {
      setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(null);
      setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
      if (channel) {
        setCurrentChannel(channel);
      } else {
        setCurrentChannel(null);
      }
    }
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `
          ${showSettings ? 'sendbird-app__conversation--settings-open' : ''}
          ${showSearch ? 'sendbird-app__conversation--search-open' : ''}
          sendbird-app__conversation-wrap
        `
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Channel, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    onChatHeaderActionClick: () => {
      setShowSearch(false);
      setShowThread(false);
      setShowSettings(!showSettings);
    },
    onSearchClick: () => {
      setShowSettings(false);
      setShowThread(false);
      setShowSearch(!showSearch);
    },
    onReplyInThread: _ref => {
      let {
        message
      } = _ref;
      // parent message
      setShowSettings(false);
      setShowSearch(false);
      if (replyType === 'THREAD') {
        setThreadTargetMessage(message);
        setShowThread(true);
      }
    },
    onQuoteMessageClick: _ref2 => {
      let {
        message
      } = _ref2;
      // thread message
      setShowSettings(false);
      setShowSearch(false);
      if (replyType === 'THREAD') {
        setThreadTargetMessage(message);
        setShowThread(true);
      }
    },
    onMessageAnimated: () => {
      setAnimatedMessageId(null);
    },
    onMessageHighlighted: () => {
      setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
    },
    showSearchIcon: showSearchIcon,
    startingPoint: startingPoint,
    animatedMessage: animatedMessageId,
    highlightedMessage: highlightedMessage,
    isReactionEnabled: isReactionEnabled,
    replyType: replyType,
    isMessageGroupingEnabled: isMessageGroupingEnabled
  })), showSettings && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__settingspanel-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettings, {
    className: "sendbird-channel-settings",
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    onCloseClick: () => {
      setShowSettings(false);
    }
  })), showSearch && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__searchpanel-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchPannel, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    onResultClick: message => {
      if (message.messageId === highlightedMessage) {
        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
        setTimeout(() => {
          setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(message.messageId);
        });
      } else {
        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(message.createdAt);
        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(message.messageId);
      }
    },
    onCloseClick: () => {
      setShowSearch(false);
    }
  })), showThread && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Thread, {
    className: "sendbird-app__thread",
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    message: threadTargetMessage,
    onHeaderActionClick: () => {
      setShowThread(false);
    },
    onMoveToParentMessage: _ref3 => {
      let {
        message,
        channel
      } = _ref3;
      if ((channel === null || channel === void 0 ? void 0 : channel.url) !== (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
        setCurrentChannel(channel);
      }
      if ((message === null || message === void 0 ? void 0 : message.messageId) !== animatedMessageId) {
        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(message === null || message === void 0 ? void 0 : message.createdAt);
      }
      setTimeout(() => {
        setAnimatedMessageId(message === null || message === void 0 ? void 0 : message.messageId);
      }, 500);
    }
  }));
};

var PANELS = /*#__PURE__*/function (PANELS) {
  PANELS["CHANNEL_LIST"] = "CHANNEL_LIST";
  PANELS["CHANNEL"] = "CHANNEL";
  PANELS["CHANNEL_SETTINGS"] = "CHANNEL_SETTINGS";
  PANELS["MESSAGE_SEARCH"] = "MESSAGE_SEARCH";
  PANELS["THREAD"] = "THREAD";
  return PANELS;
}(PANELS || {});
const MobileLayout = props => {
  var _store$stores, _store$stores$sdkStor, _store$config;
  const {
    replyType,
    isMessageGroupingEnabled,
    allowProfileEdit,
    isReactionEnabled,
    showSearchIcon,
    onProfileEditSuccess,
    currentChannel,
    setCurrentChannel,
    highlightedMessage,
    setHighlightedMessage,
    startingPoint,
    setStartingPoint,
    threadTargetMessage,
    setThreadTargetMessage
  } = props;
  const [panel, setPanel] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(PANELS.CHANNEL_LIST);
  const [animatedMessageId, setAnimatedMessageId] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const store = useSendbirdStateContext();
  const sdk = store === null || store === void 0 ? void 0 : (_store$stores = store.stores) === null || _store$stores === void 0 ? void 0 : (_store$stores$sdkStor = _store$stores.sdkStore) === null || _store$stores$sdkStor === void 0 ? void 0 : _store$stores$sdkStor.sdk;
  const userId = store === null || store === void 0 ? void 0 : (_store$config = store.config) === null || _store$config === void 0 ? void 0 : _store$config.userId;
  const {
    pause
  } = useVoicePlayerContext();
  const goToMessage = (message, timeoutCb) => {
    setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint((message === null || message === void 0 ? void 0 : message.createdAt) || null);
    setTimeout(() => {
      timeoutCb === null || timeoutCb === void 0 ? void 0 : timeoutCb((message === null || message === void 0 ? void 0 : message.messageId) || null);
    }, 500);
  };
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (panel !== PANELS.CHANNEL) {
      goToMessage(null, () => setAnimatedMessageId(null));
    }
  }, [panel]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sdk$groupChannel;
    const handlerId = uuidv4();
    if (sdk !== null && sdk !== void 0 && (_sdk$groupChannel = sdk.groupChannel) !== null && _sdk$groupChannel !== void 0 && _sdk$groupChannel.addGroupChannelHandler) {
      var _sdk$groupChannel2;
      const handler = new groupChannel_We({
        onUserBanned: (groupChannel, user) => {
          if (groupChannel.url === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === userId) {
            setPanel(PANELS.CHANNEL_LIST);
          }
        },
        onChannelDeleted: channelUrl => {
          if (channelUrl === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
            setPanel(PANELS.CHANNEL_LIST);
          }
        },
        onUserLeft: (groupChannel, user) => {
          if (groupChannel.url === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === userId) {
            setPanel(PANELS.CHANNEL_LIST);
          }
        }
      });
      sdk === null || sdk === void 0 ? void 0 : (_sdk$groupChannel2 = sdk.groupChannel) === null || _sdk$groupChannel2 === void 0 ? void 0 : _sdk$groupChannel2.addGroupChannelHandler(handlerId, handler);
    }
    return () => {
      var _sdk$groupChannel3, _sdk$groupChannel3$re;
      sdk === null || sdk === void 0 ? void 0 : (_sdk$groupChannel3 = sdk.groupChannel) === null || _sdk$groupChannel3 === void 0 ? void 0 : (_sdk$groupChannel3$re = _sdk$groupChannel3.removeGroupChannelHandler) === null || _sdk$groupChannel3$re === void 0 ? void 0 : _sdk$groupChannel3$re.call(_sdk$groupChannel3, handlerId);
    };
  }, [sdk]);

  // if currentChannel is changed while on Thread
  // then change panel type to CHANNEL
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (panel === PANELS.THREAD) {
      setPanel(PANELS.CHANNEL);
    }
  }, [currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sb_mobile"
  }, panel === PANELS.CHANNEL_LIST && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sb_mobile__panelwrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelList, {
    onProfileEditSuccess: onProfileEditSuccess,
    onChannelSelect: channel => {
      setCurrentChannel(channel);
      setPanel(PANELS.CHANNEL);
    },
    allowProfileEdit: allowProfileEdit
    // this condition must be true for mobile
    ,
    disableAutoSelect: true
  })), panel === PANELS.CHANNEL && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sb_mobile__panelwrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Channel, {
    replyType: replyType,
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    onSearchClick: () => {
      setPanel(PANELS.MESSAGE_SEARCH);
    },
    onBackClick: () => {
      setPanel(PANELS.CHANNEL_LIST);
      pause(ALL);
    },
    isReactionEnabled: isReactionEnabled,
    showSearchIcon: showSearchIcon,
    isMessageGroupingEnabled: isMessageGroupingEnabled,
    startingPoint: startingPoint,
    animatedMessage: animatedMessageId,
    highlightedMessage: highlightedMessage,
    onChatHeaderActionClick: () => {
      setPanel(PANELS.CHANNEL_SETTINGS);
    },
    onReplyInThread: _ref => {
      let {
        message
      } = _ref;
      if (replyType === 'THREAD') {
        setPanel(PANELS.THREAD);
        setThreadTargetMessage(message);
      }
    },
    onQuoteMessageClick: _ref2 => {
      let {
        message
      } = _ref2;
      // thread message
      if (replyType === 'THREAD') {
        setThreadTargetMessage(message);
        setPanel(PANELS.THREAD);
      }
    }
  })), panel === PANELS.CHANNEL_SETTINGS && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sb_mobile__panelwrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettings, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    onCloseClick: () => {
      setPanel(PANELS.CHANNEL);
    },
    onLeaveChannel: () => {
      setPanel(PANELS.CHANNEL_LIST);
    }
  })), panel === PANELS.MESSAGE_SEARCH && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sb_mobile__panelwrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageSearchPannel, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    onCloseClick: () => {
      setPanel(PANELS.CHANNEL);
    },
    onResultClick: message => {
      setPanel(PANELS.CHANNEL);
      goToMessage(message, messageId => {
        setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(messageId);
      });
    }
  })), panel === PANELS.THREAD && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sb_mobile__panelwrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Thread, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || '',
    message: threadTargetMessage,
    onHeaderActionClick: () => {
      setPanel(PANELS.CHANNEL);
      pause(ALL);
    },
    onMoveToParentMessage: _ref3 => {
      let {
        message,
        channel
      } = _ref3;
      setCurrentChannel(channel);
      goToMessage(message, messageId => {
        setPanel(PANELS.CHANNEL);
        setAnimatedMessageId(messageId);
      });
    }
  })));
};

const AppLayout = props => {
  var _props$replyType, _props$isReactionEnab, _props$showSearchIcon;
  const {
    isMessageGroupingEnabled,
    allowProfileEdit,
    onProfileEditSuccess,
    disableAutoSelect,
    currentChannel,
    setCurrentChannel
  } = props;
  const globalStore = useSendbirdStateContext();
  const globalConfigs = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config;
  const [showThread, setShowThread] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [threadTargetMessage, setThreadTargetMessage] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [showSettings, setShowSettings] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showSearch, setShowSearch] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [highlightedMessage, setHighlightedMessage] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [startingPoint, setStartingPoint] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    isMobile
  } = useMediaQueryContext();

  /**
   * Below configs can be set via Dashboard UIKit config setting but as a lower priority than App props.
   * So need to be have fallback value \w global configs even though each prop values are undefined
   */
  const replyType = (_props$replyType = props.replyType) !== null && _props$replyType !== void 0 ? _props$replyType : globalConfigs === null || globalConfigs === void 0 ? void 0 : globalConfigs.replyType;
  const isReactionEnabled = (_props$isReactionEnab = props.isReactionEnabled) !== null && _props$isReactionEnab !== void 0 ? _props$isReactionEnab : globalConfigs === null || globalConfigs === void 0 ? void 0 : globalConfigs.isReactionEnabled;
  const showSearchIcon = (_props$showSearchIcon = props.showSearchIcon) !== null && _props$showSearchIcon !== void 0 ? _props$showSearchIcon : globalConfigs === null || globalConfigs === void 0 ? void 0 : globalConfigs.showSearchIcon;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, isMobile ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MobileLayout, {
    replyType: replyType,
    showSearchIcon: showSearchIcon,
    isReactionEnabled: isReactionEnabled,
    isMessageGroupingEnabled: isMessageGroupingEnabled,
    allowProfileEdit: allowProfileEdit,
    onProfileEditSuccess: onProfileEditSuccess,
    currentChannel: currentChannel,
    setCurrentChannel: setCurrentChannel,
    highlightedMessage: highlightedMessage,
    setHighlightedMessage: setHighlightedMessage,
    startingPoint: startingPoint,
    setStartingPoint: setStartingPoint,
    threadTargetMessage: threadTargetMessage,
    setThreadTargetMessage: setThreadTargetMessage
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DesktopLayout, {
    replyType: replyType,
    isReactionEnabled: isReactionEnabled,
    showSearchIcon: showSearchIcon,
    isMessageGroupingEnabled: isMessageGroupingEnabled,
    allowProfileEdit: allowProfileEdit,
    onProfileEditSuccess: onProfileEditSuccess,
    disableAutoSelect: disableAutoSelect,
    currentChannel: currentChannel,
    setCurrentChannel: setCurrentChannel,
    showThread: showThread,
    setShowThread: setShowThread,
    threadTargetMessage: threadTargetMessage,
    setThreadTargetMessage: setThreadTargetMessage,
    showSettings: showSettings,
    setShowSettings: setShowSettings,
    showSearch: showSearch,
    setShowSearch: setShowSearch,
    highlightedMessage: highlightedMessage,
    setHighlightedMessage: setHighlightedMessage,
    startingPoint: startingPoint,
    setStartingPoint: setStartingPoint
  }));
};

/**
 * This is a drop in Chat solution
 * Can also be used as an example for creating
 * default chat apps
 */
function App(props) {
  const {
    appId,
    userId,
    accessToken,
    customApiHost,
    customWebSocketHost,
    breakpoint,
    theme,
    userListQuery,
    nickname,
    profileUrl,
    dateLocale,
    config = {},
    isReactionEnabled,
    isMentionEnabled,
    isVoiceMessageEnabled,
    voiceRecord,
    replyType,
    isMessageGroupingEnabled,
    colorSet,
    stringSet,
    allowProfileEdit,
    disableUserProfile,
    disableMarkAsDelivered,
    renderUserProfile,
    showSearchIcon,
    onProfileEditSuccess,
    imageCompression,
    disableAutoSelect,
    uikitMultipleFilesMessageLimit,
    isTypingIndicatorEnabledOnChannelList,
    isMessageReceiptStatusEnabledOnChannelList,
    uikitOptions,
    isUserIdUsedForNickname,
    sdkInitParams,
    customExtensionParams
  } = props;
  const [currentChannel, setCurrentChannel] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Sendbird, {
    stringSet: stringSet,
    appId: appId,
    userId: userId,
    accessToken: accessToken,
    customApiHost: customApiHost,
    customWebSocketHost: customWebSocketHost,
    breakpoint: breakpoint,
    theme: theme,
    nickname: nickname,
    profileUrl: profileUrl,
    dateLocale: dateLocale,
    userListQuery: userListQuery,
    config: config,
    colorSet: colorSet,
    disableUserProfile: disableUserProfile,
    disableMarkAsDelivered: disableMarkAsDelivered,
    renderUserProfile: renderUserProfile,
    imageCompression: imageCompression,
    isReactionEnabled: isReactionEnabled,
    isMentionEnabled: isMentionEnabled,
    isVoiceMessageEnabled: isVoiceMessageEnabled,
    voiceRecord: voiceRecord,
    onUserProfileMessage: channel => {
      setCurrentChannel(channel);
    },
    uikitMultipleFilesMessageLimit: uikitMultipleFilesMessageLimit,
    isTypingIndicatorEnabledOnChannelList: isTypingIndicatorEnabledOnChannelList,
    isMessageReceiptStatusEnabledOnChannelList: isMessageReceiptStatusEnabledOnChannelList,
    replyType: replyType,
    showSearchIcon: showSearchIcon,
    uikitOptions: uikitOptions,
    isUserIdUsedForNickname: isUserIdUsedForNickname,
    sdkInitParams: sdkInitParams,
    customExtensionParams: customExtensionParams
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(AppLayout, {
    isReactionEnabled: isReactionEnabled,
    replyType: replyType,
    showSearchIcon: showSearchIcon,
    isMessageGroupingEnabled: isMessageGroupingEnabled,
    allowProfileEdit: allowProfileEdit,
    onProfileEditSuccess: onProfileEditSuccess,
    disableAutoSelect: disableAutoSelect,
    currentChannel: currentChannel,
    setCurrentChannel: setCurrentChannel
  }));
}
App.propTypes = {
  appId: prop_types_default.a.string.isRequired,
  userId: prop_types_default.a.string.isRequired,
  accessToken: prop_types_default.a.string,
  customApiHost: prop_types_default.a.string,
  customWebSocketHost: prop_types_default.a.string,
  theme: prop_types_default.a.string,
  userListQuery: prop_types_default.a.func,
  nickname: prop_types_default.a.string,
  profileUrl: prop_types_default.a.string,
  breakpoint: prop_types_default.a.oneOf([prop_types_default.a.string, prop_types_default.a.bool]),
  allowProfileEdit: prop_types_default.a.bool,
  disableUserProfile: prop_types_default.a.bool,
  disableMarkAsDelivered: prop_types_default.a.bool,
  renderUserProfile: prop_types_default.a.func,
  onProfileEditSuccess: prop_types_default.a.func,
  dateLocale: prop_types_default.a.shape({}),
  config: prop_types_default.a.shape({
    // None Error Warning Info 'All/Debug'
    logLevel: prop_types_default.a.oneOfType([prop_types_default.a.string, prop_types_default.a.arrayOf(prop_types_default.a.string)]),
    isREMUnitEnabled: prop_types_default.a.bool
  }),
  uikitMultipleFilesMessageLimit: prop_types_default.a.number,
  uikitOptions: prop_types_default.a.shape({}),
  isReactionEnabled: prop_types_default.a.bool,
  replyType: prop_types_default.a.oneOf(['NONE', 'QUOTE_REPLY', 'THREAD']),
  showSearchIcon: prop_types_default.a.bool,
  isMessageGroupingEnabled: prop_types_default.a.bool,
  stringSet: prop_types_default.a.objectOf(prop_types_default.a.string),
  colorSet: prop_types_default.a.objectOf(prop_types_default.a.string),
  imageCompression: prop_types_default.a.shape({
    compressionRate: prop_types_default.a.number,
    resizingWidth: prop_types_default.a.oneOfType([prop_types_default.a.number, prop_types_default.a.string]),
    resizingHeight: prop_types_default.a.oneOfType([prop_types_default.a.number, prop_types_default.a.string])
  }),
  disableAutoSelect: prop_types_default.a.bool,
  isMentionEnabled: prop_types_default.a.bool,
  isVoiceMessageEnabled: prop_types_default.a.bool,
  voiceRecord: prop_types_default.a.shape({
    maxRecordingTime: prop_types_default.a.number,
    minRecordingTime: prop_types_default.a.number
  }),
  isTypingIndicatorEnabledOnChannelList: prop_types_default.a.bool,
  isMessageReceiptStatusEnabledOnChannelList: prop_types_default.a.bool,
  isUserIdUsedForNickname: prop_types_default.a.bool,
  sdkInitParams: prop_types_default.a.shape({}),
  customExtensionParams: prop_types_default.a.shape({})
};
App.defaultProps = {
  accessToken: '',
  customApiHost: '',
  customWebSocketHost: '',
  theme: 'light',
  nickname: '',
  profileUrl: '',
  userListQuery: null,
  breakpoint: null,
  dateLocale: null,
  allowProfileEdit: false,
  onProfileEditSuccess: null,
  disableMarkAsDelivered: false,
  renderUserProfile: null,
  config: {},
  voiceRecord: {
    maxRecordingTime: consts_397a92f1["e" /* V */],
    minRecordingTime: consts_397a92f1["f" /* a */]
  },
  uikitMultipleFilesMessageLimit: null,
  isMessageGroupingEnabled: true,
  stringSet: null,
  colorSet: null,
  imageCompression: {},
  disableAutoSelect: false,
  uikitOptions: undefined,
  // The below configs are duplicates of the Dashboard UIKit Configs.
  // Since their default values will be set in the Sendbird component,
  // we don't need to set them here.
  showSearchIcon: undefined,
  isMentionEnabled: undefined,
  isReactionEnabled: undefined,
  replyType: undefined,
  disableUserProfile: undefined,
  isVoiceMessageEnabled: undefined,
  isTypingIndicatorEnabledOnChannelList: undefined,
  isMessageReceiptStatusEnabledOnChannelList: undefined,
  isUserIdUsedForNickname: true,
  sdkInitParams: undefined,
  customExtensionParams: undefined
};


//# sourceMappingURL=App.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelProvider-8fdab056.js











const OpenChannelProvider_8fdab056_getMessageCreatedAt = message => format(message.createdAt, 'p');
const shouldFetchMore = (messageLength, maxMessages) => {
  if (typeof maxMessages !== 'number') {
    return true;
  }
  if (typeof maxMessages === 'number' && maxMessages > messageLength) {
    return true;
  }
  return false;
};

/* eslint-disable default-param-last */
const OpenChannelProvider_8fdab056_scrollIntoLast = function () {
  let initialTry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  let scrollRef = arguments.length > 1 ? arguments[1] : undefined;
  const MAX_TRIES = 10;
  const currentTry = initialTry;
  if (currentTry > MAX_TRIES) {
    return;
  }
  try {
    const scrollDOM = (scrollRef === null || scrollRef === void 0 ? void 0 : scrollRef.current) || document.querySelector('.sendbird-openchannel-conversation-scroll__container__item-container');
    // eslint-disable-next-line no-multi-assign
    scrollDOM.scrollTop = scrollDOM.scrollHeight;
  } catch (error) {
    setTimeout(() => {
      OpenChannelProvider_8fdab056_scrollIntoLast(currentTry + 1, scrollRef);
    }, 500 * currentTry);
  }
};
const OpenChannelProvider_8fdab056_isSameGroup = (message, comparingMessage) => {
  var _sender, _sender2, _message_$sender, _comparingMessage_$se;
  if (!(message && comparingMessage && message !== null && message !== void 0 && message.messageType && message.messageType !== 'admin' && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.messageType && comparingMessage.messageType !== 'admin' && message !== null && message !== void 0 && message.sender && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.sender && message !== null && message !== void 0 && message.createdAt && comparingMessage !== null && comparingMessage !== void 0 && comparingMessage.createdAt && message !== null && message !== void 0 && (_sender = message.sender) !== null && _sender !== void 0 && _sender.userId && comparingMessage !== null && comparingMessage !== void 0 && (_sender2 = comparingMessage.sender) !== null && _sender2 !== void 0 && _sender2.userId)) {
    return false;
  }
  // to fix typecasting
  const message_ = message;
  const comparingMessage_ = comparingMessage;
  return (message_ === null || message_ === void 0 ? void 0 : message_.sendingStatus) === (comparingMessage_ === null || comparingMessage_ === void 0 ? void 0 : comparingMessage_.sendingStatus) && (message_ === null || message_ === void 0 ? void 0 : (_message_$sender = message_.sender) === null || _message_$sender === void 0 ? void 0 : _message_$sender.userId) === (comparingMessage_ === null || comparingMessage_ === void 0 ? void 0 : (_comparingMessage_$se = comparingMessage_.sender) === null || _comparingMessage_$se === void 0 ? void 0 : _comparingMessage_$se.userId) && OpenChannelProvider_8fdab056_getMessageCreatedAt(message) === OpenChannelProvider_8fdab056_getMessageCreatedAt(comparingMessage);
};
const OpenChannelProvider_8fdab056_compareMessagesForGrouping = (prevMessage, currMessage, nextMessage) => [OpenChannelProvider_8fdab056_isSameGroup(prevMessage, currMessage), OpenChannelProvider_8fdab056_isSameGroup(currMessage, nextMessage)];
const OpenChannelProvider_8fdab056_kFormatter = num => {
  if (Math.abs(num) > 999999) {
    return `${(Math.abs(num) / 1000000).toFixed(1)}M`;
  }
  if (Math.abs(num) > 999) {
    return `${(Math.abs(num) / 1000).toFixed(1)}K`;
  }
  return `${num}`;
};
const OpenChannelProvider_8fdab056_isOperator = (openChannel, userId) => {
  const operators = openChannel === null || openChannel === void 0 ? void 0 : openChannel.operators;
  if (operators.map(operator => operator.userId).indexOf(userId) < 0) {
    return false;
  }
  return true;
};
const OpenChannelProvider_8fdab056_isDisabledBecauseFrozen = (openChannel, userId) => {
  const isFrozen = openChannel === null || openChannel === void 0 ? void 0 : openChannel.isFrozen;
  return isFrozen && !OpenChannelProvider_8fdab056_isOperator(openChannel, userId);
};
const OpenChannelProvider_8fdab056_isDisabledBecauseMuted = (mutedParticipantIds, userId) => {
  return mutedParticipantIds.indexOf(userId) > -1;
};
const fetchWithListQuery = (listQuery, logger, eachQueryNextCallback) => {
  const fetchList = query => {
    const {
      hasNext
    } = query;
    if (hasNext) {
      query.next().then(users => {
        eachQueryNextCallback(users);
        fetchList(query);
      }).catch(error => {
        logger.warning('OpenChannel | FetchUserList failed', error);
      });
    } else {
      logger.info('OpenChannel | FetchUserList finished');
    }
  };
  logger.info('OpenChannel | FetchUserList start', listQuery);
  fetchList(listQuery);
};
const OpenChannelProvider_8fdab056_pxToNumber = px => {
  if (typeof px === 'number') {
    return px;
  }
  if (typeof px === 'string') {
    const parsed = Number.parseFloat(px);
    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }
  return null;
};

const OpenChannelProvider_8fdab056_SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';
const OpenChannelProvider_8fdab056_SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';
const OpenChannelProvider_8fdab056_RESET_MESSAGES = 'RESET_MESSAGES';
const EXIT_CURRENT_CHANNEL = 'EXIT_CURRENT_CHANNEL';
const GET_PREV_MESSAGES_START = 'GET_PREV_MESSAGES_START';
const GET_PREV_MESSAGES_SUCESS = 'GET_PREV_MESSAGES_SUCESS';
const GET_PREV_MESSAGES_FAIL = 'GET_PREV_MESSAGES_FAIL';
const SENDING_MESSAGE_FAILED = 'SENDING_MESSAGE_FAILED';
const SENDING_MESSAGE_SUCCEEDED = 'SENDING_MESSAGE_SUCCEEDED';
const SENDING_MESSAGE_START = 'SENDING_MESSAGE_START';
const RESENDING_MESSAGE_START = 'RESENDING_MESSAGE_START';
const FETCH_PARTICIPANT_LIST = 'FETCH_PARTICIPANT_LIST';
const FETCH_BANNED_USER_LIST = 'FETCH_BANNED_USER_LIST';
const FETCH_MUTED_USER_LIST = 'FETCH_MUTED_USER_LIST';
const TRIM_MESSAGE_LIST = 'TRIM_MESSAGE_LIST';

// event handlers
const OpenChannelProvider_8fdab056_ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';
const OpenChannelProvider_8fdab056_ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';
const OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';
const OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';
const ON_OPERATOR_UPDATED = 'ON_OPERATOR_UPDATED';
const ON_USER_ENTERED = 'ON_USER_ENTERED';
const ON_USER_EXITED = 'ON_USER_EXITED';
const ON_USER_MUTED = 'ON_USER_MUTED';
const ON_USER_UNMUTED = 'ON_USER_UNMUTED';
const ON_USER_BANNED = 'ON_USER_BANNED';
const ON_USER_UNBANNED = 'ON_USER_UNBANNED';
const OpenChannelProvider_8fdab056_ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';
const OpenChannelProvider_8fdab056_ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';
const OpenChannelProvider_8fdab056_ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';
const OpenChannelProvider_8fdab056_ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';
const ON_META_DATA_CREATED = 'ON_META_DATA_CREATED';
const ON_META_DATA_UPDATED = 'ON_META_DATA_UPDATED';
const ON_META_DATA_DELETED = 'ON_META_DATA_DELETED';
const ON_META_COUNTERS_CREATED = 'ON_META_COUNTERS_CREATED';
const ON_META_COUNTERS_UPDATED = 'ON_META_COUNTERS_UPDATED';
const ON_META_COUNTERS_DELETED = 'ON_META_COUNTERS_DELETED';
const ON_MENTION_RECEIVED = 'ON_MENTION_RECEIVED';

/* eslint-disable  @typescript-eslint/no-explicit-any */ // @ts-ignore: Unreachable code error
function OpenChannelProvider_8fdab056_reducer(state, action) {
  switch (action.type) {
    case OpenChannelProvider_8fdab056_RESET_MESSAGES:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: []
        });
      }
    case EXIT_CURRENT_CHANNEL:
      {
        var _action$payload, _state$currentOpenCha;
        if (((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.url) === ((_state$currentOpenCha = state.currentOpenChannel) === null || _state$currentOpenCha === void 0 ? void 0 : _state$currentOpenCha.url)) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentOpenChannel: null
          });
        }
        return state;
      }
    case OpenChannelProvider_8fdab056_SET_CURRENT_CHANNEL:
      {
        const gottenChannel = action.payload;
        const operators = gottenChannel.operators;
        if (!state.isInvalid && state.currentOpenChannel && state.currentOpenChannel.url && state.currentOpenChannel.url === gottenChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentOpenChannel: gottenChannel,
          isInvalid: false,
          operators: operators,
          participants: operators,
          bannedParticipantIds: [],
          mutedParticipantIds: []
        });
      }
    case OpenChannelProvider_8fdab056_SET_CHANNEL_INVALID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          isInvalid: true
        });
      }
    case GET_PREV_MESSAGES_START:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          loading: true
        });
      }
    case GET_PREV_MESSAGES_SUCESS:
    case GET_PREV_MESSAGES_FAIL:
      {
        const isFailed = action.type === GET_PREV_MESSAGES_FAIL;
        const {
          currentOpenChannel = {},
          messages = [],
          hasMore,
          lastMessageTimestamp
        } = action.payload;
        const actionChannelUrl = currentOpenChannel.url;
        const receivedMessages = isFailed ? [] : messages;
        const _hasMore = isFailed ? false : hasMore;
        const _lastMessageTimestamp = isFailed ? 0 : lastMessageTimestamp;
        const stateChannel = state.currentOpenChannel;
        const stateChannelUrl = stateChannel.url;
        if (actionChannelUrl !== stateChannelUrl) {
          return state;
        }
        const filteredAllMessages = state.allMessages.filter(message => !receivedMessages.find(_ref => {
          let {
            messageId
          } = _ref;
          return compareIds(messageId, message.messageId);
        }));
        return _objectSpread2(_objectSpread2({}, state), {}, {
          loading: false,
          initialized: true,
          hasMore: _hasMore,
          lastMessageTimestamp: _lastMessageTimestamp,
          allMessages: [...receivedMessages, ...filteredAllMessages]
        });
      }
    case SENDING_MESSAGE_START:
      {
        const {
          message,
          channel
        } = action.payload;
        if ((channel === null || channel === void 0 ? void 0 : channel.url) !== state.currentOpenChannel.url || state.allMessages.some(m => m.reqId === message.reqId)
        // Handing failed first than sending start issue
        ) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: [...state.allMessages, message]
        });
      }
    case SENDING_MESSAGE_SUCCEEDED:
      {
        const sentMessage = action.payload;
        const newMessages = state.allMessages.map(m => compareIds(m.reqId, sentMessage.reqId) ? sentMessage : m);
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: newMessages
        });
      }
    case SENDING_MESSAGE_FAILED:
      {
        const sentMessage = action.payload;
        sentMessage.sendingStatus = 'failed';
        if (!state.allMessages.some(m => (m === null || m === void 0 ? void 0 : m.reqId) === (sentMessage === null || sentMessage === void 0 ? void 0 : sentMessage.reqId))) {
          // Handling failed first than sending start issue
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allMessages: [...state.allMessages.filter(m => !compareIds(m.reqId, sentMessage)), sentMessage]
          });
        } else {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allMessages: state.allMessages.map(m => compareIds(m.reqId, sentMessage.reqId) ? sentMessage : m)
          });
        }
      }
    case TRIM_MESSAGE_LIST:
      {
        var _action$payload2;
        const {
          allMessages
        } = state;
        const messageLimit = (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.messageLimit;
        if (messageLimit && messageLimit > 0 && (allMessages === null || allMessages === void 0 ? void 0 : allMessages.length) > messageLimit) {
          const sliceAt = allMessages.length - messageLimit;
          return _objectSpread2(_objectSpread2({}, state), {}, {
            allMessages: allMessages.slice(sliceAt)
          });
        }
        return state;
      }
    case RESENDING_MESSAGE_START:
      {
        const eventedChannel = action.payload.channel;
        const resentMessage = action.payload.message;
        if (eventedChannel.url !== state.currentOpenChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.map(m => compareIds(m.reqId, resentMessage.reqId) ? resentMessage : m)
        });
      }
    case FETCH_PARTICIPANT_LIST:
      {
        const eventedChannel = action.payload.channel;
        const fetchedParticipantList = action.payload.users;
        if (eventedChannel.url !== state.currentOpenChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          participants: [...state.participants, ...fetchedParticipantList]
          // Should check duplication
        });
      }

    case FETCH_BANNED_USER_LIST:
      {
        const eventedChannel = action.payload.channel;
        const fetchedBannedUserList = action.payload.users;
        if (eventedChannel.url !== state.currentOpenChannel.url || !fetchedBannedUserList.every(user => typeof user.userId === 'string')) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          bannedParticipantIds: [...state.bannedParticipantIds, ...fetchedBannedUserList.map(user => user.userId)]
          // Should check duplication
        });
      }

    case FETCH_MUTED_USER_LIST:
      {
        const eventedChannel = action.payload.channel;
        const fetchedMutedUserList = action.payload.users;
        if (eventedChannel.url !== state.currentOpenChannel.url || !fetchedMutedUserList.every(user => typeof user.userId === 'string')) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          mutedParticipantIds: [...state.mutedParticipantIds, ...fetchedMutedUserList.map(user => user.userId)]
          // Should check duplication
        });
      }
    // events
    case OpenChannelProvider_8fdab056_ON_MESSAGE_RECEIVED:
      {
        const eventedChannel = action.payload.channel;
        const receivedMessage = action.payload.message;
        const {
          currentOpenChannel
        } = state;
        if (!compareIds(eventedChannel.url, currentOpenChannel.url) || !(state.allMessages.map(message => message.messageId).indexOf(receivedMessage.messageId) < 0)) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: [...state.allMessages, receivedMessage]
        });
      }
    case OpenChannelProvider_8fdab056_ON_MESSAGE_UPDATED:
      {
        const eventedChannel = action.payload.channel;
        const updatedMessage = action.payload.message;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.map(message => message.isIdentical(updatedMessage) ? updatedMessage : message)
        });
      }
    case OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED:
      {
        const eventedChannel = action.payload.channel;
        const deletedMessageId = action.payload.messageId;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.filter(message => !compareIds(message.messageId, deletedMessageId))
        });
      }
    case OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED_BY_REQ_ID:
      {
        return _objectSpread2(_objectSpread2({}, state), {}, {
          allMessages: state.allMessages.filter(m => !compareIds(m.reqId, action.payload))
        });
      }
    case ON_OPERATOR_UPDATED:
      {
        const eventedChannel = action.payload.channel;
        const updatedOperators = action.payload.operators;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentOpenChannel: eventedChannel,
          operators: updatedOperators
        });
      }
    case ON_USER_ENTERED:
      {
        const eventedChannel = action.payload.channel;
        const enteredUser = action.payload.user;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          participants: [...state.participants, enteredUser]
        });
      }
    case ON_USER_EXITED:
      {
        const eventedChannel = action.payload.channel;
        const exitedUser = action.payload.user;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          participants: state.participants.filter(participant => !compareIds(participant.userId, exitedUser.userId))
        });
      }
    case ON_USER_MUTED:
      {
        const eventedChannel = action.payload.channel;
        const mutedUser = action.payload.user;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url || state.mutedParticipantIds.indexOf(mutedUser.userId) >= 0) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          mutedParticipantIds: [...state.mutedParticipantIds, mutedUser.userId]
        });
      }
    case ON_USER_UNMUTED:
      {
        const eventedChannel = action.payload.channel;
        const unmutedUser = action.payload.user;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== eventedChannel.url || state.mutedParticipantIds.indexOf(unmutedUser.userId) < 0) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          mutedParticipantIds: state.mutedParticipantIds.filter(userId => userId !== unmutedUser.userId)
        });
      }
    case ON_USER_BANNED:
      {
        const eventedChannel = action.payload.channel;
        const bannedUser = action.payload.user;
        const currentUser = action.payload.currentUser;
        const currentChannel = state.currentOpenChannel;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url) && (bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser.userId)) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentOpenChannel: null
          });
        } else if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url)) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            bannedParticipantIds: [...state.bannedParticipantIds, bannedUser.userId]
          });
        }
        return state;
      }
    case ON_USER_UNBANNED:
      {
        const eventedChannel = action.payload.channel;
        const unbannedUser = action.payload.user;
        const currentChannel = state.currentOpenChannel;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === (eventedChannel === null || eventedChannel === void 0 ? void 0 : eventedChannel.url)) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            bannedParticipantIds: state.bannedParticipantIds.filter(userId => userId !== unbannedUser.userId)
          });
        }
        return state;
      }
    case OpenChannelProvider_8fdab056_ON_CHANNEL_FROZEN:
      {
        const frozenChannel = action.payload;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== frozenChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          frozen: true
        });
      }
    case OpenChannelProvider_8fdab056_ON_CHANNEL_UNFROZEN:
      {
        const unfrozenChannel = action.payload;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== unfrozenChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          frozen: false
        });
      }
    case OpenChannelProvider_8fdab056_ON_CHANNEL_CHANGED:
      {
        const changedChannel = action.payload;
        const currentChannel = state.currentOpenChannel;
        if (!currentChannel || currentChannel.url && currentChannel.url !== changedChannel.url) {
          return state;
        }
        return _objectSpread2(_objectSpread2({}, state), {}, {
          currentOpenChannel: changedChannel
        });
      }
    case OpenChannelProvider_8fdab056_ON_CHANNEL_DELETED:
      {
        const deletedChannelUrl = action.payload;
        const currentChannel = state === null || state === void 0 ? void 0 : state.currentOpenChannel;
        if ((currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) === deletedChannelUrl) {
          return _objectSpread2(_objectSpread2({}, state), {}, {
            currentOpenChannel: null
          });
        }
        return state;
      }
    case ON_META_DATA_CREATED:
      {
        // const eventedChannel = action.payload.channel;
        // const createdMetaData = action.payload.metaData;
        // return {
        //   ...state
        // };
        return state;
      }
    case ON_META_DATA_UPDATED:
      {
        // const eventedChannel = action.payload.channel;
        // const updatedMetaData = action.payload.metaData;
        // return {
        //   ...state
        // };
        return state;
      }
    case ON_META_DATA_DELETED:
      {
        // const eventedChannel = action.payload.channel;
        // const deletedMetaDataKeys = action.payload.metaDataKeys;
        // return {
        //   ...state
        // };
        return state;
      }
    case ON_META_COUNTERS_CREATED:
      {
        // const eventedChannel = action.payload.channel;
        // const createdMetaCounter = action.payload.metaCounter;
        // return {
        //   ...state
        // };
        return state;
      }
    case ON_META_COUNTERS_UPDATED:
      {
        // const eventedChannel = action.payload.channel;
        // const updatedMetaCounter = action.payload.metaCounter;
        // return {
        //   ...state
        // };
        return state;
      }
    case ON_META_COUNTERS_DELETED:
      {
        // const eventedChannel = action.payload.channel;
        // const deletedMetaCounterKeys = action.payload.metaCounterKeys;
        // return {
        //   ...state
        // };
        return state;
      }
    case ON_MENTION_RECEIVED:
      {
        // const eventedChannel = action.payload.channel;
        // const mentionedMessage = action.payload.message;
        // return {
        //   ...state
        // };
        return state;
      }
    default:
      return state;
  }
}

const OpenChannelProvider_8fdab056_initialState = {
  allMessages: [],
  loading: false,
  initialized: false,
  currentOpenChannel: null,
  isInvalid: false,
  hasMore: false,
  lastMessageTimestamp: 0,
  frozen: false,
  operators: [],
  participants: [],
  bannedParticipantIds: [],
  mutedParticipantIds: []
};

function OpenChannelProvider_8fdab056_useSetChannel(_ref, _ref2) {
  let {
    channelUrl,
    sdkInit,
    fetchingParticipants,
    userId,
    currentOpenChannel
  } = _ref;
  let {
    sdk,
    logger,
    messagesDispatcher
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (channelUrl && sdkInit && sdk !== null && sdk !== void 0 && sdk.openChannel) {
      if (currentOpenChannel && currentOpenChannel !== null && currentOpenChannel !== void 0 && currentOpenChannel.exit) {
        var _currentOpenChannel$e;
        (_currentOpenChannel$e = currentOpenChannel.exit) === null || _currentOpenChannel$e === void 0 ? void 0 : _currentOpenChannel$e.call(currentOpenChannel).then(() => {
          logger.info('OpenChannel | useSetChannel: Exit from the previous open channel', currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url);
          messagesDispatcher({
            type: EXIT_CURRENT_CHANNEL,
            payload: currentOpenChannel
          });
        });
      }
      logger.info('OpenChannel | useSetChannel: Fetching channel', channelUrl);
      sdk.openChannel.getChannel(channelUrl).then(openChannel => {
        logger.info('OpenChannel | useSetChannel: Succeeded to fetch channel', openChannel);
        messagesDispatcher({
          type: OpenChannelProvider_8fdab056_SET_CURRENT_CHANNEL,
          payload: openChannel
        });
        openChannel.enter().then(() => {
          if (openChannel.isOperator(userId)) {
            // only operator has a permission to fetch these list
            const bannedParticipantListQuery = openChannel.createBannedUserListQuery();
            const mutedParticipantListQuery = openChannel.createMutedUserListQuery();
            fetchWithListQuery(bannedParticipantListQuery, logger, users => {
              messagesDispatcher({
                type: FETCH_BANNED_USER_LIST,
                payload: {
                  channel: openChannel,
                  users
                }
              });
            });
            fetchWithListQuery(mutedParticipantListQuery, logger, users => {
              messagesDispatcher({
                type: FETCH_MUTED_USER_LIST,
                payload: {
                  channel: openChannel,
                  users
                }
              });
            });
          } else {
            openChannel.getMyMutedInfo().then(mutedInfo => {
              if (mutedInfo !== null && mutedInfo !== void 0 && mutedInfo.isMuted) {
                messagesDispatcher({
                  type: FETCH_MUTED_USER_LIST,
                  payload: {
                    channel: openChannel,
                    users: [sdk === null || sdk === void 0 ? void 0 : sdk.currentUser]
                  }
                });
              }
            });
          }
          if (fetchingParticipants) {
            // fetch participants list
            const participantListQuery = openChannel.createParticipantListQuery({
              limit: openChannel.participantCount
            });
            fetchWithListQuery(participantListQuery, logger, users => {
              messagesDispatcher({
                type: FETCH_PARTICIPANT_LIST,
                payload: {
                  channel: openChannel,
                  users
                }
              });
            });
          }
        }).catch(error => {
          logger.warning('OpenChannel | useSetChannel: Failed to enter channel', {
            channelUrl,
            error
          });
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_SET_CHANNEL_INVALID,
            payload: null
          });
        });
      }).catch(error => {
        logger.warning('OpenChannel | useSetChannel: Failed to fetch channel', {
          channelUrl,
          error
        });
        messagesDispatcher({
          type: OpenChannelProvider_8fdab056_SET_CHANNEL_INVALID,
          payload: null
        });
      });
    }
  }, [channelUrl, sdkInit, fetchingParticipants]);
}

function OpenChannelProvider_8fdab056_useHandleChannelEvents(_ref, _ref2) {
  let {
    currentOpenChannel,
    checkScrollBottom
  } = _ref;
  let {
    sdk,
    logger,
    messagesDispatcher,
    scrollRef
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sdk$openChannel;
    const messageReceiverId = uuidv4();
    if (currentOpenChannel && currentOpenChannel.url && sdk !== null && sdk !== void 0 && (_sdk$openChannel = sdk.openChannel) !== null && _sdk$openChannel !== void 0 && _sdk$openChannel.addOpenChannelHandler) {
      var _sdk$openChannel2;
      logger.info('OpenChannel | useHandleChannelEvents: Setup evnet handler', messageReceiverId);
      const channelHandlerParams = {
        onMessageReceived: (channel, message) => {
          const scrollToEnd = checkScrollBottom();
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMessageReceived', {
            channelUrl,
            message
          });
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_ON_MESSAGE_RECEIVED,
            payload: {
              channel,
              message
            }
          });
          if (scrollToEnd) {
            try {
              setTimeout(() => {
                OpenChannelProvider_8fdab056_scrollIntoLast(0, scrollRef);
              });
            } catch (error) {
              logger.warning('OpenChannel | onMessageReceived | scroll to end failed');
            }
          }
        },
        onMessageUpdated: (channel, message) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMessageUpdated', {
            channelUrl,
            message
          });
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_ON_MESSAGE_UPDATED,
            payload: {
              channel,
              message
            }
          });
        },
        onMessageDeleted: (channel, messageId) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMessageDeleted', {
            channelUrl,
            messageId
          });
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED,
            payload: {
              channel,
              messageId
            }
          });
        },
        onOperatorUpdated: (channel, operators) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onOperatorUpdated', {
            channelUrl,
            operators
          });
          messagesDispatcher({
            type: ON_OPERATOR_UPDATED,
            payload: {
              channel,
              operators
            }
          });
        },
        onUserEntered: (channel, user) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserEntered', {
            channelUrl,
            user
          });
          messagesDispatcher({
            type: ON_USER_ENTERED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserExited: (channel, user) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserExited', {
            channelUrl,
            user
          });
          messagesDispatcher({
            type: ON_USER_EXITED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserMuted: (channel, user) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserMuted', {
            channelUrl,
            user
          });
          messagesDispatcher({
            type: ON_USER_MUTED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserUnmuted: (channel, user) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserUnmuted', {
            channelUrl,
            user
          });
          messagesDispatcher({
            type: ON_USER_UNMUTED,
            payload: {
              channel,
              user
            }
          });
        },
        onUserBanned: (channel, user) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserBanned', {
            channelUrl,
            user
          });
          messagesDispatcher({
            type: ON_USER_BANNED,
            payload: {
              channel,
              user,
              currentUser: sdk === null || sdk === void 0 ? void 0 : sdk.currentUser
            }
          });
        },
        onUserUnbanned: (channel, user) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onUserUnbanned', {
            channelUrl,
            user
          });
          messagesDispatcher({
            type: ON_USER_UNBANNED,
            payload: {
              channel,
              user
            }
          });
        },
        onChannelFrozen: channel => {
          logger.info('OpenChannel | useHandleChannelEvents: onChannelFrozen', channel);
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_ON_CHANNEL_FROZEN,
            payload: channel
          });
        },
        onChannelUnfrozen: channel => {
          logger.info('OpenChannel | useHandleChannelEvents: onChannelUnfrozen', channel);
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_ON_CHANNEL_UNFROZEN,
            payload: channel
          });
        },
        onChannelChanged: channel => {
          logger.info('OpenChannel | useHandleChannelEvents: onChannelChanged', channel);
          messagesDispatcher({
            type: OpenChannelProvider_8fdab056_ON_CHANNEL_CHANGED,
            payload: channel
          });
        },
        onMetaDataCreated: (channel, metaData) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataCreated', {
            channelUrl,
            metaData
          });
          messagesDispatcher({
            type: ON_META_DATA_CREATED,
            payload: {
              channel,
              metaData
            }
          });
        },
        onMetaDataUpdated: (channel, metaData) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataUpdated', {
            channelUrl,
            metaData
          });
          messagesDispatcher({
            type: ON_META_DATA_UPDATED,
            payload: {
              channel,
              metaData
            }
          });
        },
        onMetaDataDeleted: (channel, metaDataKeys) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataDeleted', {
            channelUrl,
            metaDataKeys
          });
          messagesDispatcher({
            type: ON_META_DATA_DELETED,
            payload: {
              channel,
              metaDataKeys
            }
          });
        },
        onMetaCounterCreated: (channel, metaCounter) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersCreated', {
            channelUrl,
            metaCounter
          });
          messagesDispatcher({
            type: ON_META_COUNTERS_CREATED,
            payload: {
              channel,
              metaCounter
            }
          });
        },
        onMetaCounterUpdated: (channel, metaCounter) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersUpdated', {
            channelUrl,
            metaCounter
          });
          messagesDispatcher({
            type: ON_META_COUNTERS_UPDATED,
            payload: {
              channel,
              metaCounter
            }
          });
        },
        onMetaCounterDeleted: (channel, metaCounterKeys) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersDeleted', {
            channelUrl,
            metaCounterKeys
          });
          messagesDispatcher({
            type: ON_META_COUNTERS_DELETED,
            payload: {
              channel,
              metaCounterKeys
            }
          });
        },
        onMentionReceived: (channel, message) => {
          const channelUrl = channel === null || channel === void 0 ? void 0 : channel.url;
          logger.info('OpenChannel | useHandleChannelEvents: onMentionReceived', {
            channelUrl,
            message
          });
          messagesDispatcher({
            type: ON_MENTION_RECEIVED,
            payload: {
              channel,
              message
            }
          });
        },
        onChannelDeleted: (channelUrl, channelType) => {
          if (channelType === _bundle_a5600e6c["y" /* Y */].OPEN && (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.url) === channelUrl) {
            messagesDispatcher({
              type: OpenChannelProvider_8fdab056_ON_CHANNEL_DELETED,
              payload: channelUrl
            });
          }
        }
      };
      const ChannelHandler = new openChannel_De(channelHandlerParams);
      sdk === null || sdk === void 0 ? void 0 : (_sdk$openChannel2 = sdk.openChannel) === null || _sdk$openChannel2 === void 0 ? void 0 : _sdk$openChannel2.addOpenChannelHandler(messageReceiverId, ChannelHandler);
    }
    return () => {
      var _sdk$openChannel3;
      if (sdk !== null && sdk !== void 0 && (_sdk$openChannel3 = sdk.openChannel) !== null && _sdk$openChannel3 !== void 0 && _sdk$openChannel3.removeOpenChannelHandler) {
        logger.info('OpenChannel | useHandleChannelEvents: Removing message receiver handler', messageReceiverId);
        sdk.openChannel.removeOpenChannelHandler(messageReceiverId);
      }
    };
  }, [currentOpenChannel]);
}

function OpenChannelProvider_8fdab056_useInitialMessagesFetch(_ref, _ref2) {
  let {
    currentOpenChannel,
    userFilledMessageListParams
  } = _ref;
  let {
    logger,
    messagesDispatcher,
    scrollRef
  } = _ref2;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    logger.info('OpenChannel | useInitialMessagesFetch: Setup started', currentOpenChannel);
    messagesDispatcher({
      type: OpenChannelProvider_8fdab056_RESET_MESSAGES,
      payload: null
    });
    if (currentOpenChannel && currentOpenChannel.getMessagesByTimestamp) {
      const messageListParams = {
        nextResultSize: 0,
        prevResultSize: 30,
        isInclusive: true,
        includeReactions: false
      };
      if (userFilledMessageListParams) {
        Object.keys(userFilledMessageListParams).forEach(key => {
          messageListParams[key] = userFilledMessageListParams[key];
        });
        logger.info('OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams');
      }
      logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages', {
        currentOpenChannel,
        messageListParams
      });
      messagesDispatcher({
        type: GET_PREV_MESSAGES_START,
        payload: null
      });
      currentOpenChannel.getMessagesByTimestamp(new Date().getTime(), messageListParams).then(messages => {
        logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages succeeded', messages);
        const hasMore = messages && messages.length > 0;
        const lastMessageTimestamp = hasMore ? messages[0].createdAt : null;
        messagesDispatcher({
          type: GET_PREV_MESSAGES_SUCESS,
          payload: {
            currentOpenChannel,
            messages,
            hasMore,
            lastMessageTimestamp
          }
        });
        setTimeout(() => {
          OpenChannelProvider_8fdab056_scrollIntoLast(0, scrollRef);
        });
      }).catch(error => {
        logger.error('OpenChannel | useInitialMessagesFetch: Fetching messages failed', error);
        messagesDispatcher({
          type: GET_PREV_MESSAGES_FAIL,
          payload: {
            currentOpenChannel,
            messages: [],
            hasMore: false,
            lastMessageTimestamp: 0
          }
        });
      });
    }
  }, [currentOpenChannel, userFilledMessageListParams]);
}

function OpenChannelProvider_8fdab056_useScrollCallback(_ref, _ref2) {
  let {
    currentOpenChannel,
    lastMessageTimestamp,
    fetchMore
  } = _ref;
  let {
    sdk,
    logger,
    messagesDispatcher,
    hasMore,
    userFilledMessageListParams
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(callback => {
    if (fetchMore && hasMore) {
      logger.info('OpenChannel | useScrollCallback: start');
      const messageListParams = {
        prevResultSize: 30,
        includeReactions: false,
        nextResultSize: 0
      };
      if (userFilledMessageListParams) {
        Object.keys(userFilledMessageListParams).forEach(key => {
          messageListParams[key] = userFilledMessageListParams[key];
        });
        logger.info('OpenChannel | useScrollCallback: Used userFilledMessageListParams', userFilledMessageListParams);
      }
      logger.info('OpenChannel | useScrollCallback: Fetching messages', {
        currentOpenChannel,
        messageListParams
      });
      currentOpenChannel.getMessagesByTimestamp(lastMessageTimestamp || new Date().getTime(), messageListParams).then(messages => {
        logger.info('OpenChannel | useScrollCallback: Fetching messages succeeded', messages);
        const hasMore = messages && messages.length > 0;
        const lastMessageTimestamp = hasMore ? messages[0].createdAt : null;
        messagesDispatcher({
          type: GET_PREV_MESSAGES_SUCESS,
          payload: {
            currentOpenChannel,
            messages,
            hasMore,
            lastMessageTimestamp
          }
        });
        setTimeout(() => {
          callback();
        });
      }).catch(error => {
        logger.error('OpenChannel | useScrollCallback: Fetching messages failed', error);
        messagesDispatcher({
          type: GET_PREV_MESSAGES_FAIL,
          payload: {
            currentOpenChannel,
            messages: [],
            hasMore: false,
            lastMessageTimestamp: 0
          }
        });
      });
    }
  }, [currentOpenChannel, lastMessageTimestamp, fetchMore, sdk]);
}

function useCheckScrollBottom(_ref, _ref2) {
  let {
    conversationScrollRef
  } = _ref;
  let {
    logger
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    let isBottom = true;
    if (conversationScrollRef && conversationScrollRef !== null && conversationScrollRef !== void 0 && conversationScrollRef.current) {
      try {
        const conversationScroll = conversationScrollRef.current;
        isBottom = conversationScroll.scrollHeight <= conversationScroll.scrollTop + conversationScroll.clientHeight;
      } catch (error) {
        logger.error('OpenChannel | useCheckScrollBottom', error);
      }
    }
    return isBottom;
  }, [conversationScrollRef]);
}

function OpenChannelProvider_8fdab056_useSendMessageCallback(_ref, _ref2) {
  let {
    currentOpenChannel,
    onBeforeSendUserMessage,
    checkScrollBottom,
    messageInputRef
  } = _ref;
  let {
    sdk,
    logger,
    messagesDispatcher,
    scrollRef
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (sdk) {
      const text = messageInputRef.current.innerText;
      const createParamsDefault = txt => {
        const message = txt;
        const params = {
          message: message
        };
        return params;
      };
      const createCustomParams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';
      if (createCustomParams) {
        logger.info('OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);
      }
      const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);
      logger.info('OpenChannel | useSendMessageCallback: Sending message has started', params);
      const isBottom = checkScrollBottom();
      let pendingMsg = null;
      currentOpenChannel.sendUserMessage(params).onPending(pendingMessage => {
        messagesDispatcher({
          type: SENDING_MESSAGE_START,
          payload: {
            message: pendingMessage,
            channel: currentOpenChannel
          }
        });
        pendingMsg = pendingMessage;
      }).onSucceeded(message => {
        logger.info('OpenChannel | useSendMessageCallback: Sending message succeeded', message);
        messagesDispatcher({
          type: SENDING_MESSAGE_SUCCEEDED,
          payload: message
        });
        if (isBottom) {
          setTimeout(() => {
            OpenChannelProvider_8fdab056_scrollIntoLast(0, scrollRef);
          });
        }
      }).onFailed(error => {
        logger.warning('OpenChannel | useSendMessageCallback: Sending message failed', error);
        messagesDispatcher({
          type: SENDING_MESSAGE_FAILED,
          payload: pendingMsg
        });
        // https://sendbird.com/docs/chat/v3/javascript/guides/error-codes#2-server-error-codes
        // TODO: Do we need to handle the error cases?
        // @ts-ignore
        if ((error === null || error === void 0 ? void 0 : error.code) === 900041) {
          messagesDispatcher({
            type: ON_USER_MUTED,
            payload: {
              channel: currentOpenChannel,
              user: sdk.currentUser
            }
          });
        }
      });
    }
  }, [currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef]);
}

function useFileUploadCallback(_ref, _ref2) {
  let {
    currentOpenChannel,
    checkScrollBottom,
    imageCompression = {},
    onBeforeSendFileMessage
  } = _ref;
  let {
    sdk,
    logger,
    messagesDispatcher,
    scrollRef
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(file => {
    if (sdk) {
      const {
        compressionRate,
        resizingWidth,
        resizingHeight
      } = imageCompression;
      const createCustomParams = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';
      const compressibleFileType = file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg';
      const compressibleRatio = compressionRate > 0 && compressionRate < 1;
      // pxToNumber returns null if values are invalid
      const compressibleDiamensions = OpenChannelProvider_8fdab056_pxToNumber(resizingWidth) || OpenChannelProvider_8fdab056_pxToNumber(resizingHeight);
      const canCompressImage = compressibleFileType && (compressibleRatio || compressibleDiamensions);
      const createParamsDefault = file_ => {
        const params = {};
        params.file = file_;
        return params;
      };
      if (canCompressImage) {
        // Using image compression
        try {
          const image = document.createElement('img');
          image.src = URL.createObjectURL(file);
          image.onload = () => {
            URL.revokeObjectURL(image.src);
            const canvas = document.createElement('canvas');
            const imageWidth = image.naturalWidth || image.width;
            const imageHeight = image.naturalHeight || image.height;
            let targetWidth = OpenChannelProvider_8fdab056_pxToNumber(resizingWidth) || imageWidth;
            let targetHeight = OpenChannelProvider_8fdab056_pxToNumber(resizingHeight) || imageHeight;

            // In canvas.toBlob(callback, mimeType, qualityArgument)
            // qualityArgument doesnt work
            // so in case compressibleDiamensions are not present, we use ratio
            if (file.type === 'image/png' && !compressibleDiamensions) {
              targetWidth *= compressionRate;
              targetHeight *= compressionRate;
            }
            canvas.width = targetWidth;
            canvas.height = targetHeight;
            const context = canvas.getContext('2d');
            context.drawImage(image, 0, 0, targetWidth, targetHeight);
            context.canvas.toBlob(newImageBlob => {
              const compressedFile = new File([newImageBlob], file.name, {
                type: file.type
              });
              if (createCustomParams) {
                logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
              }
              const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(compressedFile) : createParamsDefault(compressedFile);
              logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);
              const isBottom = checkScrollBottom();
              currentOpenChannel.sendFileMessage(params).onPending(pendingMessage => {
                messagesDispatcher({
                  type: SENDING_MESSAGE_START,
                  payload: {
                    message: _objectSpread2(_objectSpread2({}, pendingMessage), {}, {
                      url: URL.createObjectURL(file),
                      // pending thumbnail message seems to be failed
                      requestState: 'pending'
                    }),
                    channel: currentOpenChannel
                  }
                });
              }).onSucceeded(message => {
                logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);
                messagesDispatcher({
                  type: SENDING_MESSAGE_SUCCEEDED,
                  payload: message
                });
                if (isBottom) {
                  setTimeout(() => {
                    OpenChannelProvider_8fdab056_scrollIntoLast(0, scrollRef);
                  });
                }
              }).onFailed((error, message) => {
                logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', {
                  message,
                  error
                });
                // @ts-ignore
                message.localUrl = URL.createObjectURL(file);
                // @ts-ignore
                message.file = file;
                messagesDispatcher({
                  type: SENDING_MESSAGE_FAILED,
                  payload: message
                });
              });
            }, file.type, compressionRate);
          };
        } catch (error) {
          logger.warning('OpenChannel | useFileUploadCallback: Sending file message with image compression failed', error);
        }
      } else {
        // Not using image compression
        if (createCustomParams) {
          logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);
        }
        const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(file) : createParamsDefault(file);
        logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);
        const isBottom = checkScrollBottom();
        currentOpenChannel.sendFileMessage(params).onPending(pendingMessage => {
          messagesDispatcher({
            type: SENDING_MESSAGE_START,
            payload: {
              message: _objectSpread2(_objectSpread2({}, pendingMessage), {}, {
                url: URL.createObjectURL(file),
                // pending thumbnail message seems to be failed
                requestState: 'pending'
              }),
              channel: currentOpenChannel
            }
          });
        }).onSucceeded(message => {
          logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);
          messagesDispatcher({
            type: SENDING_MESSAGE_SUCCEEDED,
            payload: message
          });
          if (isBottom) {
            setTimeout(() => {
              OpenChannelProvider_8fdab056_scrollIntoLast(0, scrollRef);
            });
          }
        }).onFailed((error, message) => {
          logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', {
            message,
            error
          });
          // @ts-ignore
          message.localUrl = URL.createObjectURL(file);
          // @ts-ignore
          message.file = file;
          messagesDispatcher({
            type: SENDING_MESSAGE_FAILED,
            payload: message
          });
        });
      }
    }
  }, [currentOpenChannel, onBeforeSendFileMessage, checkScrollBottom, imageCompression]);
}

function OpenChannelProvider_8fdab056_useUpdateMessageCallback(_ref, _ref2) {
  let {
    currentOpenChannel,
    onBeforeSendUserMessage
  } = _ref;
  let {
    logger,
    messagesDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((messageId, text, callback) => {
    const createParamsDefault = txt => {
      const params = {
        message: txt
      };
      return params;
    };
    if (onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function') {
      logger.info('OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage');
    }
    const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);
    currentOpenChannel.updateUserMessage(messageId, params).then(message => {
      if (callback) {
        callback();
      }
      logger.info('OpenChannel | useUpdateMessageCallback: Updating message succeeded', {
        message,
        params
      });
      messagesDispatcher({
        type: OpenChannelProvider_8fdab056_ON_MESSAGE_UPDATED,
        payload: {
          channel: currentOpenChannel,
          message
        }
      });
    });
  }, [currentOpenChannel, onBeforeSendUserMessage]);
}

function OpenChannelProvider_8fdab056_useDeleteMessageCallback(_ref, _ref2) {
  let {
    currentOpenChannel
  } = _ref;
  let {
    logger,
    messagesDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])((message, callback) => {
    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message', message);
    const {
      sendingStatus
    } = message;
    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message requestState', sendingStatus);
    if (sendingStatus === 'failed' || sendingStatus === 'pending') {
      logger.info('OpenChannel | useDeleteMessageCallback: Deleted message from local', message);
      messagesDispatcher({
        type: OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED_BY_REQ_ID,
        payload: message.reqId
      });
      if (callback) {
        callback();
      }
    } else {
      if (!(message.messageType === 'file' || message.messageType === 'user')) {
        return;
      }
      const messageToDelete = message;
      currentOpenChannel.deleteMessage(messageToDelete).then(() => {
        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message on server', sendingStatus);
        if (callback) {
          callback();
        }
        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message succeeded', message);
        messagesDispatcher({
          type: OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED,
          payload: {
            channel: currentOpenChannel,
            messageId: message.messageId
          }
        });
      }).catch(error => {
        logger.warning('OpenChannel | useDeleteMessageCallback: Deleting message failed', error);
      });
    }
  }, [currentOpenChannel]);
}

function OpenChannelProvider_8fdab056_useResendMessageCallback(_ref, _ref2) {
  let {
    currentOpenChannel
  } = _ref;
  let {
    logger,
    messagesDispatcher
  } = _ref2;
  return Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(failedMessage => {
    logger.info('OpenChannel | useResendMessageCallback: Resending message has started', failedMessage);
    // eslint-disable-next-line no-param-reassign
    const {
      messageType,
      file
    } = failedMessage;
    if (failedMessage && typeof failedMessage.isResendable === 'function' && failedMessage.isResendable) {
      // eslint-disable-next-line no-param-reassign
      failedMessage.requestState = 'pending';
      messagesDispatcher({
        type: RESENDING_MESSAGE_START,
        payload: {
          channel: currentOpenChannel,
          message: failedMessage
        }
      });

      // userMessage
      if (messageType === 'user' && failedMessage.messageType === 'user') {
        currentOpenChannel.resendUserMessage(failedMessage).then(message => {
          logger.info('OpenChannel | useResendMessageCallback: Reseding message succeeded', message);
          messagesDispatcher({
            type: SENDING_MESSAGE_SUCCEEDED,
            payload: message
          });
        }).catch(error => {
          logger.warning('OpenChannel | useResendMessageCallback: Resending message failed', error);
          // eslint-disable-next-line no-param-reassign
          failedMessage.requestState = 'failed';
          messagesDispatcher({
            type: SENDING_MESSAGE_FAILED,
            payload: failedMessage
          });
        });
      }

      // fileMessage
      if (messageType === 'file' && failedMessage.messageType === 'file') {
        currentOpenChannel.resendFileMessage(failedMessage, file).then(message => {
          logger.info('OpenChannel | useResendMessageCallback: Resending file message succeeded', message);
          messagesDispatcher({
            type: SENDING_MESSAGE_SUCCEEDED,
            payload: message
          });
        }).catch(error => {
          logger.warning('OpenChannel | useResendMessageCallback: Resending file message failed', error);
          // eslint-disable-next-line no-param-reassign
          failedMessage.requestState = 'failed';
          messagesDispatcher({
            type: SENDING_MESSAGE_FAILED,
            payload: failedMessage
          });
        });
      }
    } else {
      // to alert user on console
      // eslint-disable-next-line no-console
      console.error('OpenChannel | useResendMessageCallback: Message is not resendable');
      logger.warning('OpenChannel | useResendMessageCallback: Message is not resendable', failedMessage);
    }
  }, [currentOpenChannel]);
}

const THROTTLE_TIMER = 5000;

// to trim message list so that we wont keep thousands of messages in memory
// We are throttling here; not debouncing
// it will be called once very 5 sec if messagesLength, messageLimit changes
// we check if messagesLength > messageLimit before dispatching action
function useTrimMessageList(_ref, _ref2) {
  let {
    messagesLength,
    messageLimit
  } = _ref;
  let {
    messagesDispatcher,
    logger
  } = _ref2;
  const [inProgress, setInProgress] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (inProgress) {
      return;
    }
    if (typeof messagesLength === 'number' && messagesLength > messageLimit) {
      logger.info('Trimming MessageList');
      messagesDispatcher({
        type: TRIM_MESSAGE_LIST,
        payload: {
          messageLimit
        }
      });
    }
    setInProgress(true);
    setTimeout(() => {
      setInProgress(false);
    }, THROTTLE_TIMER);
  }, [messagesLength, messageLimit]);
}

const OpenChannelContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const OpenChannelProvider = props => {
  var _globalStore$stores, _globalStore$stores$s, _globalStore$stores2, _globalStore$stores2$, _globalStore$stores3, _globalStore$stores3$, _props$disableUserPro;
  const {
    channelUrl,
    children,
    isMessageGroupingEnabled = true,
    queries,
    onBeforeSendUserMessage,
    messageLimit,
    onBeforeSendFileMessage,
    onChatHeaderActionClick,
    onBackClick
  } = props;

  // We didn't decide to support fetching participant list
  const fetchingParticipants = false;
  const globalStore = useSendbirdStateContext();
  const sdk = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$s = _globalStore$stores.sdkStore) === null || _globalStore$stores$s === void 0 ? void 0 : _globalStore$stores$s.sdk;
  const sdkInit = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores2 = globalStore.stores) === null || _globalStore$stores2 === void 0 ? void 0 : (_globalStore$stores2$ = _globalStore$stores2.sdkStore) === null || _globalStore$stores2$ === void 0 ? void 0 : _globalStore$stores2$.initialized;
  const user = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores3 = globalStore.stores) === null || _globalStore$stores3 === void 0 ? void 0 : (_globalStore$stores3$ = _globalStore$stores3.userStore) === null || _globalStore$stores3$ === void 0 ? void 0 : _globalStore$stores3$.user;
  const config = globalStore === null || globalStore === void 0 ? void 0 : globalStore.config;
  const {
    userId,
    isOnline,
    logger,
    pubSub,
    imageCompression
  } = config;

  // hook variables
  const [messagesStore, messagesDispatcher] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useReducer"])(OpenChannelProvider_8fdab056_reducer, OpenChannelProvider_8fdab056_initialState);
  const {
    allMessages,
    loading,
    initialized,
    currentOpenChannel,
    isInvalid,
    hasMore,
    lastMessageTimestamp,
    operators,
    bannedParticipantIds,
    mutedParticipantIds
  } = messagesStore;
  // ref
  const messageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null); // useSendMessageCallback
  const conversationScrollRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null); // useScrollAfterSendMessageCallback

  // const
  const userFilledMessageListParams = queries === null || queries === void 0 ? void 0 : queries.messageListParams;
  const disabled = !initialized || !isOnline || OpenChannelProvider_8fdab056_isDisabledBecauseFrozen(currentOpenChannel, userId) || OpenChannelProvider_8fdab056_isDisabledBecauseMuted(mutedParticipantIds, userId);

  // useMemo
  const amIBanned = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return bannedParticipantIds.indexOf(user.userId) >= 0;
  }, [channelUrl, bannedParticipantIds, user]);
  const amIMuted = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return mutedParticipantIds.indexOf(user.userId) >= 0;
  }, [channelUrl, mutedParticipantIds, user]);
  const amIOperator = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return operators.map(operator => operator.userId).indexOf(user.userId) >= 0;
  }, [channelUrl, operators, user]);

  // use hooks
  OpenChannelProvider_8fdab056_useSetChannel({
    channelUrl,
    sdkInit,
    fetchingParticipants,
    userId,
    currentOpenChannel
  }, {
    sdk,
    logger,
    messagesDispatcher
  });
  const checkScrollBottom = useCheckScrollBottom({
    conversationScrollRef
  }, {
    logger
  });
  OpenChannelProvider_8fdab056_useHandleChannelEvents({
    currentOpenChannel,
    checkScrollBottom
  }, {
    sdk,
    logger,
    messagesDispatcher,
    scrollRef: conversationScrollRef
  });
  OpenChannelProvider_8fdab056_useInitialMessagesFetch({
    currentOpenChannel,
    userFilledMessageListParams
  }, {
    logger,
    messagesDispatcher,
    scrollRef: conversationScrollRef
  });
  const fetchMore = shouldFetchMore(allMessages === null || allMessages === void 0 ? void 0 : allMessages.length, messageLimit);
  // donot fetch more for streaming
  const onScroll = OpenChannelProvider_8fdab056_useScrollCallback({
    currentOpenChannel,
    lastMessageTimestamp,
    fetchMore
  }, {
    sdk,
    logger,
    messagesDispatcher,
    hasMore,
    userFilledMessageListParams
  });
  const handleSendMessage = OpenChannelProvider_8fdab056_useSendMessageCallback({
    currentOpenChannel,
    onBeforeSendUserMessage,
    checkScrollBottom,
    messageInputRef
  }, {
    sdk,
    logger,
    messagesDispatcher,
    scrollRef: conversationScrollRef
  });
  const handleFileUpload = useFileUploadCallback({
    currentOpenChannel,
    onBeforeSendFileMessage,
    checkScrollBottom,
    imageCompression
  }, {
    sdk,
    logger,
    messagesDispatcher,
    scrollRef: conversationScrollRef
  });
  const updateMessage = OpenChannelProvider_8fdab056_useUpdateMessageCallback({
    currentOpenChannel,
    onBeforeSendUserMessage
  }, {
    logger,
    messagesDispatcher
  });
  const deleteMessage = OpenChannelProvider_8fdab056_useDeleteMessageCallback({
    currentOpenChannel
  }, {
    logger,
    messagesDispatcher
  });
  const resendMessage = OpenChannelProvider_8fdab056_useResendMessageCallback({
    currentOpenChannel
  }, {
    logger,
    messagesDispatcher
  });
  useTrimMessageList({
    messagesLength: allMessages === null || allMessages === void 0 ? void 0 : allMessages.length,
    messageLimit
  }, {
    messagesDispatcher,
    logger
  });

  // handle API calls from withSendbird
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const subscriber = new Map();
    if (!pubSub || !pubSub.subscribe) {
      return;
    }
    subscriber.set(PUBSUB_TOPICS.SEND_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_USER_MESSAGE, msg => {
      const {
        channel,
        message
      } = msg;
      OpenChannelProvider_8fdab056_scrollIntoLast(0, conversationScrollRef);
      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: SENDING_MESSAGE_SUCCEEDED,
          payload: message
        });
      }
    }));
    subscriber.set(PUBSUB_TOPICS.SEND_MESSAGE_START, pubSub.subscribe(PUBSUB_TOPICS.SEND_MESSAGE_START, msg => {
      const {
        channel,
        message
      } = msg;
      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: SENDING_MESSAGE_START,
          payload: {
            message,
            channel
          }
        });
      }
    }));
    subscriber.set(PUBSUB_TOPICS.SEND_FILE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.SEND_FILE_MESSAGE, msg => {
      const {
        channel,
        message
      } = msg;
      OpenChannelProvider_8fdab056_scrollIntoLast(0, conversationScrollRef);
      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: SENDING_MESSAGE_SUCCEEDED,
          payload: {
            message,
            channel
          }
        });
      }
    }));
    subscriber.set(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.UPDATE_USER_MESSAGE, msg => {
      const {
        channel,
        message,
        fromSelector
      } = msg;
      if (fromSelector && channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: OpenChannelProvider_8fdab056_ON_MESSAGE_UPDATED,
          payload: {
            channel,
            message
          }
        });
      }
    }));
    subscriber.set(PUBSUB_TOPICS.DELETE_MESSAGE, pubSub.subscribe(PUBSUB_TOPICS.DELETE_MESSAGE, msg => {
      const {
        channel,
        messageId
      } = msg;
      if (channel && channelUrl === (channel === null || channel === void 0 ? void 0 : channel.url)) {
        messagesDispatcher({
          type: OpenChannelProvider_8fdab056_ON_MESSAGE_DELETED,
          payload: messageId
        });
      }
    }));
    return () => {
      if (subscriber) {
        subscriber.forEach(s => {
          try {
            s.remove();
          } catch (_unused) {
            //
          }
        });
      }
    };
  }, [channelUrl, sdkInit]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelContext.Provider, {
    value: {
      // props
      channelUrl,
      children,
      isMessageGroupingEnabled,
      queries,
      onBeforeSendUserMessage,
      messageLimit,
      onBeforeSendFileMessage,
      onChatHeaderActionClick,
      onBackClick,
      // store
      allMessages,
      loading,
      initialized,
      currentOpenChannel,
      isInvalid,
      hasMore,
      lastMessageTimestamp,
      operators,
      bannedParticipantIds,
      mutedParticipantIds,
      // derived/utils
      messageInputRef,
      conversationScrollRef,
      disabled,
      amIBanned,
      amIMuted,
      amIOperator,
      checkScrollBottom,
      fetchMore,
      onScroll,
      handleSendMessage,
      handleFileUpload,
      updateMessage,
      deleteMessage,
      resendMessage
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    isOpenChannel: true,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    disableUserProfile: (_props$disableUserPro = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _props$disableUserPro !== void 0 ? _props$disableUserPro : config === null || config === void 0 ? void 0 : config.disableUserProfile
  }, children));
};
const useOpenChannelContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(OpenChannelContext);


//# sourceMappingURL=OpenChannelProvider-8fdab056.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelInput.js

































const OpenChannelInput_MessageInputWrapper = (props, ref) => {
  const {
    currentOpenChannel,
    disabled,
    handleSendMessage,
    handleFileUpload,
    amIMuted
  } = useOpenChannelContext();
  const channel = currentOpenChannel;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    value
  } = props;
  function getPlaceHolderString() {
    if (amIMuted) {
      return stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED;
    }
    if (disabled) {
      return stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED;
    }
    return '';
  }
  if (!channel) {
    return null;
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
    channel: currentOpenChannel,
    ref: ref,
    value: value,
    disabled: disabled,
    isVoiceMessageEnabled: false,
    onSendMessage: handleSendMessage,
    onFileUpload: handleFileUpload,
    placeholder: getPlaceHolderString()
  }));
};
var OpenChannelInput = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(OpenChannelInput_MessageInputWrapper);


//# sourceMappingURL=OpenChannelInput.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/FrozenChannelNotification.js







const FrozenChannelNotification_FrozenNotification = () => {
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-frozen-channel-notification"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-frozen-channel-notification__text",
    type: LabelTypography.CAPTION_2
  }, stringSet.CHANNEL_FROZEN));
};


//# sourceMappingURL=FrozenChannelNotification.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelHeader.js























function OpenchannelConversationHeader() {
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    currentOpenChannel,
    onChatHeaderActionClick,
    amIOperator,
    onBackClick
  } = useOpenChannelContext();
  const title = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.name;
  const subTitle = `${OpenChannelProvider_8fdab056_kFormatter(currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.participantCount)} ${stringSet.OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS}`;
  const coverImage = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.coverUrl;
  const {
    isMobile
  } = useMediaQueryContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-header__left"
  }, isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-oepnchannel-header__icon_back",
    onClick: onBackClick,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px",
    type: IconTypes.ARROW_LEFT
  }), coverImage ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    className: "sendbird-openchannel-conversation-header__left__cover-image",
    src: coverImage,
    alt: "channel cover image",
    width: "32px",
    height: "32px"
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-header__left__cover-image--icon",
    style: {
      width: 32,
      height: 32
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CHANNELS,
    fillColor: IconColors.CONTENT,
    width: "18px",
    height: "18px"
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-conversation-header__left__title",
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, title || stringSet.NO_TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-conversation-header__left__sub-title",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_2
  }, subTitle || stringSet.NO_TITLE)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-header__right"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
    className: "sendbird-openchannel-conversation-header__right__trigger",
    width: "32px",
    height: "32px",
    onClick: onChatHeaderActionClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: amIOperator ? IconTypes.INFO : IconTypes.MEMBERS,
    fillColor: IconColors.PRIMARY,
    width: "24px",
    height: "24px"
  }))));
}


//# sourceMappingURL=OpenChannelHeader.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/utils-373b8143.js
const utils_373b8143_copyToClipboard = text => {
  // @ts-ignore: Unreachable code error
  if (window.clipboardData && window.clipboardData.setData) {
    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
    // @ts-ignore: Unreachable code error
    return window.clipboardData.setData('Text', text);
  }
  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
    const textarea = document.createElement('textarea');
    textarea.textContent = text;
    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.
    document.body.appendChild(textarea);
    textarea.select();
    try {
      return document.execCommand('copy'); // Security exception may be thrown by some browsers.
    } catch (ex) {
      return false;
    } finally {
      document.body.removeChild(textarea);
    }
  }
  return false;
};


//# sourceMappingURL=utils-373b8143.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-40e8e312.js





const OpenChannelMessageStatusTypes = {
  NONE: 'none',
  PENDING: 'pending',
  FAILED: 'failed',
  CANCELED: 'canceled',
  SUCCEEDED: 'succeeded'
};
const getSenderFromMessage = message => {
  // @ts-ignore
  return message.sender || message._sender;
};
const checkIsSent = status => status === OpenChannelMessageStatusTypes.SUCCEEDED;
const checkIsPending = status => status === OpenChannelMessageStatusTypes.PENDING;
const checkIsFailed = status => status === OpenChannelMessageStatusTypes.FAILED;
const checkIsByMe = (message, userId) => getSenderFromMessage(message).userId === userId;
const isFineCopy = _ref => {
  var _message$message;
  let {
    message
  } = _ref;
  return (message === null || message === void 0 ? void 0 : message.messageType) === 'user' && (message === null || message === void 0 ? void 0 : (_message$message = message.message) === null || _message$message === void 0 ? void 0 : _message$message.length) > 0;
};
const isFineResend = _ref2 => {
  let {
    message,
    status,
    userId
  } = _ref2;
  return checkIsByMe(message, userId) && checkIsFailed(status)
  // @ts-ignore
  && (message === null || message === void 0 ? void 0 : message.isResendable());
};
const isFineEdit = _ref3 => {
  var _message$isUserMessag;
  let {
    message,
    status,
    userId
  } = _ref3;
  return checkIsByMe(message, userId) && checkIsSent(status) && (message === null || message === void 0 ? void 0 : (_message$isUserMessag = message.isUserMessage) === null || _message$isUserMessag === void 0 ? void 0 : _message$isUserMessag.call(message));
};
const isFineDelete = _ref4 => {
  let {
    message,
    userId
  } = _ref4;
  return checkIsByMe(message, userId);
};
const isFineDownload = _ref5 => {
  var _message$isFileMessag;
  let {
    message,
    status
  } = _ref5;
  if (message !== null && message !== void 0 && (_message$isFileMessag = message.isFileMessage) !== null && _message$isFileMessag !== void 0 && _message$isFileMessag.call(message) && checkIsSent(status)) {
    return true;
  }
  return false;
};
const showMenuTrigger = props => {
  const {
    message,
    status,
    userId
  } = props;
  // @ts-ignore
  if (message.messageType === 'user') {
    return isFineDelete({
      message,
      status,
      userId
    }) || isFineEdit({
      message,
      status,
      userId
    })
    // @ts-ignore
    || isFineCopy({
      message,
      status,
      userId
    }) || isFineResend({
      message,
      status,
      userId
    });
  } else {
    return isFineDelete({
      message,
      status,
      userId
    }) || isFineResend({
      message,
      status,
      userId
    });
  }
};

const OpenChannelMobileMenu = props => {
  var _useSendbirdStateCont, _useSendbirdStateCont2;
  const {
    message,
    parentRef,
    resendMessage,
    showEdit,
    showRemove,
    copyToClipboard,
    hideMenu,
    isEphemeral = false
  } = props;
  const userMessage = message;
  const status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  const {
    stringSet
  } = useLocalization();
  const userId = (_useSendbirdStateCont = useSendbirdStateContext()) === null || _useSendbirdStateCont === void 0 ? void 0 : (_useSendbirdStateCont2 = _useSendbirdStateCont.config) === null || _useSendbirdStateCont2 === void 0 ? void 0 : _useSendbirdStateCont2.userId;
  const fileMessage = message;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    isOpen: true,
    menuItems: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      className: "sendbird-openchannel__mobile-menu",
      parentRef: parentRef,
      parentContainRef: parentRef,
      closeDropdown: hideMenu
    }, isFineCopy({
      message: userMessage,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-og-message__top__context-menu__copy",
      onClick: () => {
        copyToClipboard();
      },
      dataSbId: "open_channel_mobile_context_menu_copy"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__COPY)), !isEphemeral && isFineEdit({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-og-message__top__context-menu__edit",
      onClick: () => {
        showEdit();
      },
      dataSbId: "open_channel_mobile_context_menu_edit"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__EDIT)), isFineResend({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        resendMessage();
      },
      dataSbId: "open_channel_mobile_context_menu_resend"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__RESEND)), !isEphemeral && isFineDelete({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        showRemove();
      },
      dataSbId: "open_channel_mobile_context_menu_delete"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, stringSet.CONTEXT_MENU_DROPDOWN__DELETE)), isFineDownload({
      message,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        hideMenu();
      },
      dataSbId: "open_channel_mobile_context_menu_download_file"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("a", {
      className: "sendbird-openchannel__mobile-menu-hyperlink",
      rel: "noopener noreferrer",
      href: fileMessage === null || fileMessage === void 0 ? void 0 : fileMessage.url,
      target: "_blank"
    }, stringSet.CONTEXT_MENU_DROPDOWN__SAVE)))
  });
};


//# sourceMappingURL=index-40e8e312.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelUserMessage.js
































function OpenchannelUserMessage(_ref) {
  let {
    className,
    message,
    isOperator,
    isEphemeral = false,
    userId,
    resendMessage,
    disabled,
    showEdit,
    showRemove,
    chainTop
  } = _ref;
  // hooks
  const {
    stringSet,
    dateLocale
  } = useLocalization();
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const messageRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [contextStyle, setContextStyle] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
  const [contextMenu, setContextMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);

  // consts
  const status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  const isPending = checkIsPending(status);
  const isFailed = checkIsFailed(status);
  const sender = getSenderFromMessage(message);

  // place context menu top depending clientHeight of message component
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _messageRef$current;
    if ((messageRef === null || messageRef === void 0 ? void 0 : (_messageRef$current = messageRef.current) === null || _messageRef$current === void 0 ? void 0 : _messageRef$current.clientHeight) > 36) {
      setContextStyle({
        top: '8px '
      });
    } else {
      setContextStyle({
        top: '2px'
      });
    }
  }, [window.innerWidth]);
  const onLongPress = useLongPress({
    onLongPress: () => {
      setContextMenu(true);
    }
  });
  const {
    isMobile
  } = useMediaQueryContext();
  if (!message || message.messageType !== 'user') {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-openchannel-user-message'].join(' '),
    ref: messageRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-user-message__left"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-openchannel-user-message__left__avatar",
      src: sender.profileUrl || '',
      ref: avatarRef,
      width: "28px",
      height: "28px",
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      }
    }),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: sender,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: sender,
      onSuccess: closeDropdown,
      disableMessaging: true
    }))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-user-message__right"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-user-message__right__top"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-user-message__right__top__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-user-message__right__top__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message === null || message === void 0 ? void 0 : message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({}, isMobile ? _objectSpread2({}, onLongPress) : {}, {
    className: "sendbird-openchannel-user-message__right__bottom",
    ref: mobileMenuRef
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-user-message__right__bottom__message",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, message === null || message === void 0 ? void 0 : message.message, isEditedMessage(message) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    key: uuidv4(),
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2,
    calssName: "sendbird-openchannel-user-message-word"
  }, ` ${stringSet.MESSAGE_EDITED} `))), (isPending || isFailed) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-user-message__right__tail"
  }, isPending && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-user-message__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-user-message__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))), !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-user-message__context-menu",
    ref: contextMenuRef,
    style: contextStyle
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => showMenuTrigger({
      message: message,
      userId: userId,
      status: status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      className: "sendbird-openchannel-user-message__context-menu--icon",
      width: "32px",
      height: "32px",
      onClick: () => {
        toggleDropdown();
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MORE,
      fillColor: IconColors.CONTENT_INVERSE,
      width: "24px",
      height: "24px"
    })),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: contextMenuRef,
      parentContainRef: contextMenuRef,
      closeDropdown: closeDropdown,
      openLeft: true
    }, isFineCopy({
      message: message,
      userId: userId,
      status: status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-user-message__context-menu__copy",
      onClick: () => {
        utils_373b8143_copyToClipboard(message.message);
        closeDropdown();
      },
      dataSbId: "open_channel_user_message_menu_copy"
    }, stringSet.CONTEXT_MENU_DROPDOWN__COPY), !isEphemeral && isFineEdit({
      message: message,
      userId: userId,
      status: status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-user-message__context-menu__edit",
      onClick: () => {
        if (disabled) {
          return;
        }
        showEdit(true);
        closeDropdown();
      },
      dataSbId: "open_channel_user_message_menu_edit"
    }, stringSet.CONTEXT_MENU_DROPDOWN__EDIT), isFineResend({
      message: message,
      userId: userId,
      status: status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-user-message__context-menu__resend",
      onClick: () => {
        resendMessage(message);
        closeDropdown();
      },
      dataSbId: "open_channel_user_message_menu_resend"
    }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), !isEphemeral && isFineDelete({
      message: message,
      userId: userId,
      status: status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-user-message__context-menu__delete",
      onClick: () => {
        if (disabled) {
          return;
        }
        showRemove(true);
        closeDropdown();
      },
      dataSbId: "open_channel_user_message_menu_delete"
    }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE))
  }))), contextMenu && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, {
    message: message,
    parentRef: mobileMenuRef,
    hideMenu: () => {
      setContextMenu(false);
    },
    showRemove: () => {
      setContextMenu(false);
      showRemove(true);
    },
    showEdit: () => {
      setContextMenu(false);
      showEdit(true);
    },
    copyToClipboard: () => {
      setContextMenu(false);
      utils_373b8143_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
    },
    resendMessage: () => {
      setContextMenu(false);
      resendMessage(message);
    }
  }));
}


//# sourceMappingURL=OpenchannelUserMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenChannelAdminMessage.js





function OpenChannelAdminMessage(_ref) {
  let {
    className,
    message
  } = _ref;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-openchannel-admin-message'].join(' ')
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-admin-message__text",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, message.message || ''));
}


//# sourceMappingURL=OpenChannelAdminMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelOGMessage.js






































const checkOGIsEnalbed = message => {
  const {
    ogMetaData
  } = message;
  if (!ogMetaData) {
    return false;
  }
  const {
    url
  } = ogMetaData;
  if (!url) {
    return false;
  }
  return true;
};

function OpenchannelOGMessage(_ref) {
  var _message$ogMetaData, _message$updatedAt;
  let {
    message,
    isOperator,
    isEphemeral = false,
    className,
    disabled,
    showEdit,
    showRemove,
    resendMessage,
    chainTop,
    userId
  } = _ref;
  const status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  const ogMetaData = (_message$ogMetaData = message.ogMetaData) !== null && _message$ogMetaData !== void 0 ? _message$ogMetaData : null;
  const defaultImage = ogMetaData === null || ogMetaData === void 0 ? void 0 : ogMetaData.defaultImage;
  const {
    stringSet,
    dateLocale
  } = useLocalization();
  const {
    isMobile
  } = useMediaQueryContext();
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const [contextStyle, setContextStyle] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
  const [showContextMenu, setShowContextMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const openLink = () => {
    if (checkOGIsEnalbed(message) && ogMetaData !== null && ogMetaData !== void 0 && ogMetaData.url) {
      window.open(ogMetaData.url, '_blank', 'noopener,noreferrer');
    }
  };
  const onLongPress = useLongPress({
    onLongPress: () => setShowContextMenu(true),
    onClick: openLink
  }, {
    delay: 300
  });
  const messageComponentRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const isPending = checkIsPending(status);
  const isFailed = checkIsFailed(status);
  const sender = getSenderFromMessage(message);
  const tokens = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return tokenizeMessage({
      messageText: message.message
    });
  }, [message === null || message === void 0 ? void 0 : message.updatedAt]);

  // place conxt menu top depending clientHeight of message component
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _messageComponentRef$;
    if ((messageComponentRef === null || messageComponentRef === void 0 ? void 0 : (_messageComponentRef$ = messageComponentRef.current) === null || _messageComponentRef$ === void 0 ? void 0 : _messageComponentRef$.clientHeight) > 36) {
      setContextStyle({
        top: '8px '
      });
    } else {
      setContextStyle({
        top: '2px'
      });
    }
  }, [window.innerWidth]);
  if (!message || message.messageType !== 'user') {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null);
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-openchannel-og-message'].join(' '),
    ref: messageComponentRef
  }, isMobile ? _objectSpread2({}, onLongPress) : {}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top__left"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-openchannel-og-message__top__left__avatar",
      src: sender.profileUrl || '',
      ref: avatarRef,
      width: "28px",
      height: "28px",
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      }
    }),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: sender,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: sender,
      onSuccess: closeDropdown,
      disableMessaging: true
    }))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top__right"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top__right__title"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-og-message__top__right__title__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-og-message__top__right__title__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message === null || message === void 0 ? void 0 : message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top__right__description"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-og-message__top__right__description__message",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextFragment, {
    tokens: tokens
  }), ((_message$updatedAt = message === null || message === void 0 ? void 0 : message.updatedAt) !== null && _message$updatedAt !== void 0 ? _message$updatedAt : 0) > 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    key: uuidv4(),
    className: "sendbird-openchannel-og-message--word",
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.MESSAGE_EDITED)))), !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top__context-menu",
    ref: contextMenuRef,
    style: contextStyle
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => showMenuTrigger({
      message: message,
      userId: userId,
      status: status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      className: "sendbird-openchannel-og-message__top__context-menu--icon",
      width: "32px",
      height: "32px",
      onClick: () => {
        toggleDropdown();
      }
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MORE,
      fillColor: IconColors.CONTENT_INVERSE,
      width: "24px",
      height: "24px"
    })),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: contextMenuRef,
      parentContainRef: contextMenuRef,
      closeDropdown: closeDropdown,
      openLeft: true
    }, isFineCopy({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-og-message__top__context-menu__copy",
      onClick: () => {
        utils_373b8143_copyToClipboard(message.message);
        closeDropdown();
      },
      dataSbId: "open_channel_og_message_menu_copy"
    }, stringSet.CONTEXT_MENU_DROPDOWN__COPY), !isEphemeral && isFineEdit({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-og-message__top__context-menu__edit",
      onClick: () => {
        if (disabled) {
          return;
        }
        showEdit(true);
        closeDropdown();
      },
      dataSbId: "open_channel_og_message_menu_edit"
    }, stringSet.CONTEXT_MENU_DROPDOWN__EDIT), isFineResend({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-og-message__top__context-menu__resend",
      onClick: () => {
        resendMessage(message);
        closeDropdown();
      },
      dataSbId: "open_channel_og_message_menu_resend"
    }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), !isEphemeral && isFineDelete({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      className: "sendbird-openchannel-og-message__top__context-menu__delete",
      onClick: () => {
        if (disabled) {
          return;
        }
        showRemove(true);
        closeDropdown();
      },
      dataSbId: "open_channel_og_message_menu_delete"
    }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE))
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__bottom"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__bottom__og-tag",
    ref: mobileMenuRef
  }, ogMetaData.url && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__url",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, ogMetaData.url), ogMetaData.title && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(LinkLabel, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__title",
    src: ogMetaData.url,
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.PRIMARY
  }, ogMetaData.title), ogMetaData.description && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__description",
    type: LabelTypography.BODY_2,
    color: LabelColors.ONBACKGROUND_1
  }, ogMetaData.description), ogMetaData.url && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail",
    role: "button",
    onClick: openLink,
    onKeyDown: openLink,
    tabIndex: 0
  }, defaultImage && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
    className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",
    url: defaultImage.url || '',
    alt: defaultImage.alt || '',
    height: "189px",
    defaultComponent: /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.THUMBNAIL_NONE,
      width: "56px",
      height: "56px"
    }))
  }))), (isPending || isFailed) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-og-message__top__right__tail"
  }, isPending && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-og-message__top__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-og-message__top__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  })))), showContextMenu && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, {
    message: message,
    parentRef: mobileMenuRef,
    hideMenu: () => {
      setShowContextMenu(false);
    },
    showRemove: () => {
      setShowContextMenu(false);
      showRemove(true);
    },
    showEdit: () => {
      setShowContextMenu(false);
      showEdit(true);
    },
    copyToClipboard: () => {
      setShowContextMenu(false);
      utils_373b8143_copyToClipboard(message === null || message === void 0 ? void 0 : message.message);
    },
    resendMessage: () => {
      setShowContextMenu(false);
      resendMessage(message);
    }
  }));
}


//# sourceMappingURL=OpenchannelOGMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelThumbnailMessage.js































const SUPPORTING_TYPES = {
  IMAGE: 'IMAGE',
  VIDEO: 'VIDEO',
  UNSUPPORTED: 'UNSUPPORTED'
};
const OpenchannelThumbnailMessage_SUPPORTED_MIMES = {
  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'],
  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4']
};
const getSupportingFileType = type => {
  if (OpenchannelThumbnailMessage_SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0) {
    return SUPPORTING_TYPES.IMAGE;
  }
  if (OpenchannelThumbnailMessage_SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0) {
    return SUPPORTING_TYPES.VIDEO;
  }
  return SUPPORTING_TYPES.UNSUPPORTED;
};

function OpenchannelThumbnailMessage(_ref) {
  let {
    className,
    message,
    isOperator,
    isEphemeral = false,
    disabled,
    userId,
    chainTop,
    onClick,
    showRemove,
    resendMessage
  } = _ref;
  const {
    type,
    url,
    thumbnails,
    localUrl
  } = message;
  const status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  const thumbnailUrl = thumbnails && thumbnails.length > 0 && thumbnails[0].url || null;
  const {
    stringSet,
    dateLocale
  } = useLocalization();
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const [messageWidth, setMessageWidth] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(360);
  const [contextMenu, setContextMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const messageRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const onLongPress = useLongPress({
    onLongPress: () => {
      setContextMenu(true);
    },
    onClick: () => {
      onClick(true);
    }
  });
  const {
    isMobile
  } = useMediaQueryContext();
  const memorizedThumbnailPlaceHolder = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => type => _ref2 => {
    let {
      style
    } = _ref2;
    return (
      /*#__PURE__*/
      // eslint-disable-line
      external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
        style: style
      }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
        type: type,
        fillColor: IconColors.ON_BACKGROUND_2,
        width: "56px",
        height: "56px"
      }))
    );
  }, []);
  const isMessageSent = checkIsSent(status);
  const isPending = checkIsPending(status);
  const isFailed = checkIsFailed(status);
  const sender = getSenderFromMessage(message);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _messageRef$current$c, _messageRef$current;
    const thumbnailWidth = ((_messageRef$current$c = messageRef === null || messageRef === void 0 ? void 0 : (_messageRef$current = messageRef.current) === null || _messageRef$current === void 0 ? void 0 : _messageRef$current.clientWidth) !== null && _messageRef$current$c !== void 0 ? _messageRef$current$c : 0) - 80;
    setMessageWidth(thumbnailWidth > 360 ? 360 : thumbnailWidth);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-openchannel-thumbnail-message'].join(' '),
    ref: messageRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__left"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-openchannel-thumbnail-message__left__avatar",
      src: sender.profileUrl || '',
      ref: avatarRef,
      width: "28px",
      height: "28px",
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      }
    }),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: sender,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: sender,
      onSuccess: closeDropdown,
      disableMessaging: true
    }))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__title"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-thumbnail-message__right__title__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-thumbnail-message__right__title__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__body",
    ref: mobileMenuRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap",
    role: "button",
    onClick: () => {
      if (isMessageSent) {
        onClick(true);
      }
    },
    onKeyDown: () => {
      if (isMessageSent) {
        onClick(true);
      }
    },
    tabIndex: 0
  }, isMobile ? _objectSpread2({}, onLongPress) : {}), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"
  }), {
    [SUPPORTING_TYPES.VIDEO]: url || localUrl ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video"
    }, thumbnailUrl ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video",
      url: thumbnailUrl,
      width: messageWidth,
      height: "270px",
      alt: "image",
      placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PLAY)
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("video", {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("source", {
      src: url || localUrl,
      type: type
    })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",
      type: IconTypes.PLAY,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "56px",
      height: "56px"
    })) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",
      type: IconTypes.PHOTO,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "56px",
      height: "56px"
    }),
    [SUPPORTING_TYPES.IMAGE]: url || localUrl ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ImageRenderer, {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__image",
      url: thumbnailUrl || url || localUrl,
      alt: "image",
      width: messageWidth,
      height: "270px",
      placeHolder: memorizedThumbnailPlaceHolder(IconTypes.PHOTO)
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",
      type: IconTypes.PHOTO,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "56px",
      height: "56px"
    }),
    [SUPPORTING_TYPES.UNSUPPORTED]: /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",
      type: IconTypes.PHOTO,
      fillColor: IconColors.ON_BACKGROUND_2,
      width: "56px",
      height: "56px"
    })
  }[getSupportingFileType(type)])), (isPending || isFailed) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__right__tail"
  }, isPending && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-thumbnail-message__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))), !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-thumbnail-message__context-menu",
    ref: contextMenuRef
  }, (isFineResend({
    message,
    userId,
    status
  }) || !isEphemeral) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => showMenuTrigger({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      className: "sendbird-openchannel-thumbnail-message__context-menu--icon",
      width: "32px",
      height: "32px",
      onClick: toggleDropdown
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MORE,
      fillColor: IconColors.CONTENT_INVERSE,
      width: "24px",
      height: "24px"
    })),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: contextMenuRef,
      parentContainRef: contextMenuRef,
      closeDropdown: closeDropdown,
      openLeft: true
    }, isFineResend({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        resendMessage(message);
        closeDropdown();
      },
      dataSbId: "open_channel_thumbnail_message_menu_resend"
    }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), !isEphemeral && isFineDelete({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        if (disabled) {
          return;
        }
        showRemove(true);
        closeDropdown();
      },
      dataSbId: "open_channel_thumbnail_message_menu_delete"
    }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE))
  }))), contextMenu && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, {
    message: message,
    parentRef: mobileMenuRef,
    hideMenu: () => {
      setContextMenu(false);
    },
    showRemove: () => {
      setContextMenu(false);
      showRemove(true);
    },
    resendMessage: () => {
      setContextMenu(false);
      resendMessage(message);
    }
  }));
}


//# sourceMappingURL=OpenchannelThumbnailMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenchannelFileMessage.js

































const checkFileType = fileUrl => {
  const audioFile = /(\.mp3)$/i;
  const gifFile = /(\.gif)$/i;
  if (audioFile.test(fileUrl)) {
    return IconTypes.FILE_AUDIO;
  }
  if (gifFile.test(fileUrl)) {
    return IconTypes.GIF;
  }
  return IconTypes.FILE_DOCUMENT;
};
const truncate = (fullStr, strLen) => {
  if (fullStr === null || fullStr === undefined) return '';
  if (fullStr.length <= strLen) return fullStr;
  const separator = '...';
  const sepLen = separator.length;
  const charsToShow = strLen - sepLen;
  const frontChars = Math.ceil(charsToShow / 2);
  const backChars = Math.floor(charsToShow / 2);
  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
};

function OpenchannelFileMessage(_ref) {
  let {
    className,
    message,
    isOperator,
    isEphemeral = false,
    userId,
    disabled,
    chainTop,
    showRemove,
    resendMessage
  } = _ref;
  const status = message === null || message === void 0 ? void 0 : message.sendingStatus;
  const {
    dateLocale,
    stringSet
  } = useLocalization();
  const contextMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const mobileMenuRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const {
    isMobile
  } = useMediaQueryContext();
  const openFileUrl = () => {
    window.open(message.url);
  };
  const isPending = checkIsPending(status);
  const isFailed = checkIsFailed(status);
  const sender = getSenderFromMessage(message);
  const [contextMenu, setContextMenu] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const longPress = useLongPress({
    onLongPress: () => {
      if (isMobile) {
        setContextMenu(true);
      }
    },
    onClick: openFileUrl
  }, {
    delay: 300
  });
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-openchannel-file-message'].join(' '),
    ref: mobileMenuRef
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-file-message__left"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-openchannel-file-message__left__avatar",
      src: sender.profileUrl || '',
      ref: avatarRef,
      width: "28px",
      height: "28px",
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      }
    }),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: avatarRef,
      parentContainRef: avatarRef,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: sender,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      user: sender,
      onSuccess: closeDropdown,
      disableMessaging: true
    }))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-file-message__right"
  }, !chainTop && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-file-message__right__title"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-file-message__right__title__sender-name",
    type: LabelTypography.CAPTION_2,
    color: isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2
  }, sender && (sender.friendName || sender.nickname || sender.userId)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-file-message__right__title__sent-at",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_3
  }, (message === null || message === void 0 ? void 0 : message.createdAt) && format(message.createdAt, 'p', {
    locale: dateLocale
  }))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", _extends({
    className: "sendbird-openchannel-file-message__right__body"
  }, isMobile ? _objectSpread2({}, longPress) : {}), checkFileType(message.url) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-file-message__right__body__icon",
    type: checkFileType(message.url),
    fillColor: IconColors.PRIMARY,
    width: "48px",
    height: "48px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "sendbird-openchannel-file-message__right__body__file-name",
    onClick: openFileUrl
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BODY_1,
    color: LabelColors.ONBACKGROUND_1
  }, truncate(message.name || message.url, 40)))), (isPending || isFailed) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-file-message__right__tail"
  }, isPending && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Loader, {
    width: "16px",
    height: "16px"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-file-message__right__tail__pending",
    type: IconTypes.SPINNER,
    fillColor: IconColors.PRIMARY,
    width: "16px",
    height: "16px"
  })), isFailed && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-file-message__right__tail__failed",
    type: IconTypes.ERROR,
    fillColor: IconColors.ERROR,
    width: "16px",
    height: "16px"
  }))), !isMobile && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-file-message__context-menu",
    ref: contextMenuRef
  }, (isFineResend({
    message,
    userId,
    status
  }) || !isEphemeral) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => showMenuTrigger({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
      className: "sendbird-openchannel-file-message__context-menu__icon",
      width: "32px",
      height: "32px",
      onClick: toggleDropdown
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MORE,
      width: "24px",
      height: "24px"
    })),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      parentRef: contextMenuRef,
      parentContainRef: contextMenuRef,
      closeDropdown: closeDropdown,
      openLeft: true
    }, isFineResend({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        if (disabled) {
          return;
        }
        resendMessage(message);
        closeDropdown();
      },
      dataSbId: "open_channel_file_message_context_menu_resend"
    }, stringSet.CONTEXT_MENU_DROPDOWN__RESEND), !isEphemeral && isFineDelete({
      message,
      userId,
      status
    }) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
      onClick: () => {
        if (disabled) {
          return;
        }
        showRemove(true);
        closeDropdown();
      },
      dataSbId: "open_channel_file_message_context_menu_delete"
    }, stringSet.CONTEXT_MENU_DROPDOWN__DELETE))
  }))), contextMenu && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMobileMenu, {
    message: message,
    hideMenu: () => {
      setContextMenu(false);
    },
    parentRef: mobileMenuRef,
    showRemove: () => {
      setContextMenu(false);
      showRemove(true);
    }
  }));
}


//# sourceMappingURL=OpenchannelFileMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelMessage.js






























































function RemoveMessageModal(_ref) {
  let {
    onCloseModal,
    onDeleteMessage
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    onCancel: onCloseModal,
    onSubmit: onDeleteMessage,
    submitText: stringSet.MESSAGE_MENU__DELETE,
    titleText: stringSet.MODAL__DELETE_MESSAGE__TITLE
  });
}

const MessageTypes = {
  ADMIN: 'ADMIN',
  USER: 'USER',
  FILE: 'FILE',
  THUMBNAIL: 'THUMBNAIL',
  OG: 'OG',
  UNKNOWN: 'UNKNOWN'
};
const OpenChannelMessage_SendingMessageStatus = {
  NONE: 'none',
  SUCCEEDED: 'succeeded',
  FAILED: 'failed',
  PENDING: 'pending'
};
const getMessageType = (message, options) => {
  var _message$isUserMessag, _message$isAdminMessa;
  const isOgMessageEnabledInOpenChannel = options === null || options === void 0 ? void 0 : options.isOgMessageEnabledInOpenChannel;
  if (message !== null && message !== void 0 && (_message$isUserMessag = message.isUserMessage) !== null && _message$isUserMessag !== void 0 && _message$isUserMessag.call(message) || (message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
    return message !== null && message !== void 0 && message.ogMetaData && isOgMessageEnabledInOpenChannel ? MessageTypes.OG : MessageTypes.USER;
  }
  if (message !== null && message !== void 0 && (_message$isAdminMessa = message.isAdminMessage) !== null && _message$isAdminMessa !== void 0 && _message$isAdminMessa.call(message)) {
    return MessageTypes.ADMIN;
  }
  if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
    return index_8017e2b5_isImage(message.type) || index_8017e2b5_isVideo(message.type) ? MessageTypes.THUMBNAIL : MessageTypes.FILE;
  }
  return MessageTypes.UNKNOWN;
};

function MessagOpenChannelMessageeHoc(props) {
  var _globalState$config;
  const {
    message,
    chainTop,
    chainBottom,
    hasSeparator,
    renderMessage
  } = props;
  const {
    currentOpenChannel,
    deleteMessage,
    updateMessage,
    resendMessage
  } = useOpenChannelContext();
  const {
    dateLocale
  } = useLocalization();
  const editDisabled = currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen;
  const globalState = useSendbirdStateContext();
  const userId = globalState === null || globalState === void 0 ? void 0 : (_globalState$config = globalState.config) === null || _globalState$config === void 0 ? void 0 : _globalState$config.userId;
  const isOgMessageEnabledInOpenChannel = globalState.config.openChannel.enableOgtag;
  let sender = null;
  if ((message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
    sender = message === null || message === void 0 ? void 0 : message.sender;
  }
  const RenderedMessage = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => props => {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, renderMessage ? renderMessage(props) : null);
  }, [message, renderMessage]);
  const [showEdit, setShowEdit] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showRemove, setShowRemove] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showFileViewer, setShowFileViewer] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const editMessageInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  let isByMe = false;
  if (sender && (message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
    // pending and failed messages are by me
    isByMe = userId === sender.userId || (message === null || message === void 0 ? void 0 : message.sendingStatus) === OpenChannelMessage_SendingMessageStatus.PENDING || (message === null || message === void 0 ? void 0 : message.sendingStatus) === OpenChannelMessage_SendingMessageStatus.FAILED;
  }
  if (renderMessage && RenderedMessage) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: "sendbird-msg-hoc sendbird-msg--scroll-ref"
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RenderedMessage, {
      message: message,
      chainTop: chainTop,
      chainBottom: chainBottom
    }));
  }
  if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user' && showEdit) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageInput, {
      isEdit: true,
      channel: currentOpenChannel,
      disabled: editDisabled,
      ref: editMessageInputRef,
      message: message,
      name: message === null || message === void 0 ? void 0 : message.messageId,
      onUpdateMessage: _ref => {
        let {
          messageId,
          message
        } = _ref;
        updateMessage(messageId, message);
        setShowEdit(false);
      },
      onCancelEdit: () => {
        setShowEdit(false);
      }
    });
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-msg-hoc sendbird-msg--scroll-ref"
  }, hasSeparator && (message === null || message === void 0 ? void 0 : message.createdAt) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DateSeparator, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, format(message === null || message === void 0 ? void 0 : message.createdAt, 'MMMM dd, yyyy', {
    locale: dateLocale
  }))), {
    [MessageTypes.ADMIN]: (() => {
      if ((message === null || message === void 0 ? void 0 : message.messageType) === 'admin') {
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelAdminMessage, {
          message: message
        });
      }
    })(),
    [MessageTypes.FILE]: (() => {
      if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
        var _sender;
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelFileMessage, {
          message: message,
          isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator(message === null || message === void 0 ? void 0 : (_sender = message.sender) === null || _sender === void 0 ? void 0 : _sender.userId),
          isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral,
          disabled: editDisabled,
          userId: userId,
          showRemove: setShowRemove,
          resendMessage: resendMessage,
          chainTop: chainTop,
          chainBottom: chainBottom
        });
      }
    })(),
    [MessageTypes.OG]: (() => {
      if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user' && isOgMessageEnabledInOpenChannel) {
        var _sender2;
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelOGMessage, {
          message: message,
          isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator(message === null || message === void 0 ? void 0 : (_sender2 = message.sender) === null || _sender2 === void 0 ? void 0 : _sender2.userId),
          isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral,
          userId: userId,
          showEdit: setShowEdit,
          disabled: editDisabled,
          showRemove: setShowRemove,
          resendMessage: resendMessage,
          chainTop: chainTop,
          chainBottom: chainBottom
        });
      }
    })(),
    [MessageTypes.THUMBNAIL]: (() => {
      if ((message === null || message === void 0 ? void 0 : message.messageType) === 'file') {
        var _sender3;
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelThumbnailMessage, {
          message: message,
          isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator(message === null || message === void 0 ? void 0 : (_sender3 = message.sender) === null || _sender3 === void 0 ? void 0 : _sender3.userId),
          isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral,
          disabled: editDisabled,
          userId: userId,
          showRemove: setShowRemove,
          resendMessage: resendMessage,
          onClick: setShowFileViewer,
          chainTop: chainTop,
          chainBottom: chainBottom
        });
      }
    })(),
    [MessageTypes.USER]: (() => {
      if ((message === null || message === void 0 ? void 0 : message.messageType) === 'user') {
        var _sender4;
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelUserMessage, {
          message: message,
          isOperator: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isOperator(message === null || message === void 0 ? void 0 : (_sender4 = message.sender) === null || _sender4 === void 0 ? void 0 : _sender4.userId),
          isEphemeral: currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isEphemeral,
          userId: userId,
          disabled: editDisabled,
          showEdit: setShowEdit,
          showRemove: setShowRemove,
          resendMessage: resendMessage,
          chainTop: chainTop,
          chainBottom: chainBottom
        });
      }
    })(),
    [MessageTypes.UNKNOWN]: (() => {
      // return (
      //   <OpenChannelUnknownMessage message={message} />
      // );
    })()
  }[getMessageType(message, {
    isOgMessageEnabledInOpenChannel
  })], showRemove && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(RemoveMessageModal, {
    onCloseModal: () => setShowRemove(false),
    onDeleteMessage: () => {
      if ((message === null || message === void 0 ? void 0 : message.messageType) !== 'admin') {
        deleteMessage(message);
      }
    }
  }), showFileViewer && (message === null || message === void 0 ? void 0 : message.messageType) === 'file' && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_8017e2b5_FileViewer, {
    onClose: () => setShowFileViewer(false),
    message: message,
    onDelete: () => deleteMessage(message),
    isByMe: isByMe
  }));
}


//# sourceMappingURL=OpenChannelMessage.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelMessageList.js


































































function OpenchannelMessageList(props, ref) {
  const {
    isMessageGroupingEnabled = true,
    allMessages,
    hasMore,
    onScroll
  } = useOpenChannelContext();
  const store = useSendbirdStateContext();
  const userId = store.config.userId;
  const scrollRef = ref || Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [showScrollDownButton, setShowScrollDownButton] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const scrollToBottom = () => {
    if (scrollRef && scrollRef.current) {
      scrollRef.current.scrollTo(0, scrollRef.current.scrollHeight);
      setShowScrollDownButton(false);
    }
  };
  const handleOnScroll = useHandleOnScrollCallback({
    setShowScrollDownButton,
    hasMore,
    onScroll,
    scrollRef
  });
  const memoizedMessageList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    var _props$renderPlaceHol;
    if (allMessages.length > 0) {
      return allMessages.map((message, index) => {
        var _sender;
        const previousMessage = allMessages[index - 1];
        const nextMessage = allMessages[index - 1];
        const previousMessageCreatedAt = previousMessage && previousMessage.createdAt;
        const currentCreatedAt = message === null || message === void 0 ? void 0 : message.createdAt;
        // https://stackoverflow.com/a/41855608
        const hasSeparator = !(previousMessageCreatedAt && isSameDay(currentCreatedAt, previousMessageCreatedAt));
        const [chainTop, chainBottom] = isMessageGroupingEnabled ? OpenChannelProvider_8fdab056_compareMessagesForGrouping(previousMessage, message, nextMessage) : [false, false];
        const isByMe = (message === null || message === void 0 ? void 0 : (_sender = message.sender) === null || _sender === void 0 ? void 0 : _sender.userId) === userId;
        const key = (message === null || message === void 0 ? void 0 : message.messageId) || (message === null || message === void 0 ? void 0 : message.reqId);
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessageProvider, {
          message: message,
          isByMe: isByMe,
          key: key
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MessagOpenChannelMessageeHoc, {
          message: message,
          chainTop: chainTop,
          chainBottom: chainBottom,
          hasSeparator: hasSeparator,
          renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage
        }));
      });
    }
    return (props === null || props === void 0 ? void 0 : (_props$renderPlaceHol = props.renderPlaceHolderEmptyList) === null || _props$renderPlaceHol === void 0 ? void 0 : _props$renderPlaceHol.call(props)) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      className: "sendbird-openchannel-conversation-scroll__container__place-holder",
      type: PlaceHolderTypes.NO_MESSAGES
    });
  }, [allMessages]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-scroll"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-scroll__container"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-scroll__container__padding"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: ['sendbird-openchannel-conversation-scroll__container__item-container', allMessages.length > 0 ? '' : 'no-messages'].join(' '),
    onScroll: handleOnScroll,
    ref: scrollRef
  }, memoizedMessageList)), showScrollDownButton && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",
    onClick: scrollToBottom,
    onKeyDown: scrollToBottom,
    tabIndex: 0,
    role: "button"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    width: "24px",
    height: "24px",
    type: IconTypes.CHEVRON_DOWN,
    fillColor: IconColors.CONTENT
  })));
}
var OpenChannelMessageList = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.forwardRef(OpenchannelMessageList);


//# sourceMappingURL=OpenChannelMessageList.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel/components/OpenChannelUI.js






































































const OpenChannelUI_COMPONENT_CLASS_NAME = 'sendbird-openchannel-conversation';
const OpenChannelUI = _ref => {
  let {
    renderMessage,
    renderHeader,
    renderInput,
    renderPlaceHolderEmptyList,
    renderPlaceHolderError,
    renderPlaceHolderLoading
  } = _ref;
  const {
    currentOpenChannel,
    amIBanned,
    loading,
    isInvalid,
    messageInputRef,
    conversationScrollRef
  } = useOpenChannelContext();
  if (!currentOpenChannel || !(currentOpenChannel !== null && currentOpenChannel !== void 0 && currentOpenChannel.url) || amIBanned) {
    return (renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: OpenChannelUI_COMPONENT_CLASS_NAME
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.NO_CHANNELS
    }));
  }
  if (loading) {
    return (renderPlaceHolderLoading === null || renderPlaceHolderLoading === void 0 ? void 0 : renderPlaceHolderLoading()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: OpenChannelUI_COMPONENT_CLASS_NAME
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.LOADING
    }));
  }
  if (isInvalid) {
    return (renderPlaceHolderError === null || renderPlaceHolderError === void 0 ? void 0 : renderPlaceHolderError()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
      className: OpenChannelUI_COMPONENT_CLASS_NAME
    }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
      type: PlaceHolderTypes.WRONG
    }));
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: OpenChannelUI_COMPONENT_CLASS_NAME
  }, (renderHeader === null || renderHeader === void 0 ? void 0 : renderHeader()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenchannelConversationHeader, null), (currentOpenChannel === null || currentOpenChannel === void 0 ? void 0 : currentOpenChannel.isFrozen) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(FrozenChannelNotification_FrozenNotification, null), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelMessageList, {
    ref: conversationScrollRef,
    renderMessage: renderMessage,
    renderPlaceHolderEmptyList: renderPlaceHolderEmptyList
  }), (renderInput === null || renderInput === void 0 ? void 0 : renderInput()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelInput, {
    ref: messageInputRef
  }));
};


//# sourceMappingURL=OpenChannelUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannel.js







































































const OpenChannel = props => {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelProvider, {
    channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl,
    isMessageGroupingEnabled: props === null || props === void 0 ? void 0 : props.isMessageGroupingEnabled,
    queries: props === null || props === void 0 ? void 0 : props.queries,
    messageLimit: props === null || props === void 0 ? void 0 : props.messageLimit,
    onBeforeSendUserMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendUserMessage,
    onBeforeSendFileMessage: props === null || props === void 0 ? void 0 : props.onBeforeSendFileMessage,
    onChatHeaderActionClick: props === null || props === void 0 ? void 0 : props.onChatHeaderActionClick,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    onBackClick: props === null || props === void 0 ? void 0 : props.onBackClick
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelUI, {
    renderMessage: props === null || props === void 0 ? void 0 : props.renderMessage,
    renderHeader: props === null || props === void 0 ? void 0 : props.renderHeader,
    renderInput: props === null || props === void 0 ? void 0 : props.renderInput,
    renderPlaceHolderEmptyList: props === null || props === void 0 ? void 0 : props.renderPlaceHolderEmptyList,
    renderPlaceHolderError: props === null || props === void 0 ? void 0 : props.renderPlaceHolderError,
    renderPlaceHolderLoading: props === null || props === void 0 ? void 0 : props.renderPlaceHolderLoading
  }));
};


//# sourceMappingURL=OpenChannel.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/context.js









const OpenChannelSettingsContext = /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createContext(undefined);
const OpenChannelSettingsProvider = props => {
  var _globalStore$stores, _globalStore$stores$s, _globalStore$stores2, _globalStore$stores2$, _globalStore$config, _sdk$currentUser, _props$disableUserPro, _globalStore$config2;
  const {
    children,
    channelUrl,
    onCloseClick,
    onChannelModified,
    onBeforeUpdateChannel,
    onDeleteChannel
  } = props;

  // fetch store from <SendbirdProvider />
  const globalStore = useSendbirdStateContext();
  const sdk = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$s = _globalStore$stores.sdkStore) === null || _globalStore$stores$s === void 0 ? void 0 : _globalStore$stores$s.sdk;
  const isSDKInitialized = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores2 = globalStore.stores) === null || _globalStore$stores2 === void 0 ? void 0 : (_globalStore$stores2$ = _globalStore$stores2.sdkStore) === null || _globalStore$stores2$ === void 0 ? void 0 : _globalStore$stores2$.initialized;
  const logger = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config = globalStore.config) === null || _globalStore$config === void 0 ? void 0 : _globalStore$config.logger;
  const currentUserId = sdk === null || sdk === void 0 ? void 0 : (_sdk$currentUser = sdk.currentUser) === null || _sdk$currentUser === void 0 ? void 0 : _sdk$currentUser.userId;
  const [currentChannel, setChannel] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [isChannelInitialized, setChannelInitialized] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channelUrl || !sdk.openChannel) {
      setChannel(null);
      return;
    }
    sdk.openChannel.getChannel(channelUrl).then(channel => {
      logger.info('open channel setting: fetched', channel);
      // TODO: Add pending status
      channel.enter().then(() => {
        setChannel(channel);
        logger.info('OpenChannelSettings | Succeeded to enter channel', channel === null || channel === void 0 ? void 0 : channel.url);
        setChannelInitialized(true);
      }).catch(error => {
        setChannel(null);
        logger.warning('OpenChannelSettings | Failed to enter channel', error);
      });
    }).catch(error => {
      logger.error('open channel setting: error fetching', error);
      setChannel(null);
    });
    return () => {
      if (currentChannel && currentChannel.exit) {
        currentChannel.exit().then(() => {
          logger.info('OpenChannelSettings | Succeeded to exit channel', currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url);
        }).catch(error => {
          logger.warning('OpenChannelSettings | Failed to exit channel', error);
        });
      }
    };
  }, [channelUrl, isSDKInitialized]);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    var _sdk$openChannel;
    const channelHandlerId = uuidv4();
    if (currentChannel !== null && sdk !== null && sdk !== void 0 && (_sdk$openChannel = sdk.openChannel) !== null && _sdk$openChannel !== void 0 && _sdk$openChannel.addOpenChannelHandler) {
      const channelHandlerParams = new openChannel_De({
        onOperatorUpdated(channel) {
          if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
            setChannel(channel);
          }
        },
        onUserMuted(channel, user) {
          if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
            setChannel(channel);
          }
        },
        onUserUnmuted(channel, user) {
          if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
            setChannel(channel);
          }
        },
        onUserBanned(channel, user) {
          if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) && (user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
            setChannel(null);
          }
        },
        onUserUnbanned(channel, user) {
          if ((user === null || user === void 0 ? void 0 : user.userId) === currentUserId) {
            setChannel(channel);
          }
        },
        onChannelChanged(channel) {
          if ((channel === null || channel === void 0 ? void 0 : channel.url) === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
            setChannel(channel);
          }
        },
        onChannelDeleted(channelUrl) {
          if (channelUrl === (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
            setChannel(null);
          }
        }
      });
      sdk.openChannel.addOpenChannelHandler(channelHandlerId, channelHandlerParams);
    }
    return () => {
      var _sdk$openChannel2;
      if (sdk !== null && sdk !== void 0 && (_sdk$openChannel2 = sdk.openChannel) !== null && _sdk$openChannel2 !== void 0 && _sdk$openChannel2.removeOpenChannelHandler && channelHandlerId) {
        var _sdk$openChannel$remo, _sdk$openChannel3;
        logger.info('OpenChannelSettings | Removing channel handlers', channelHandlerId);
        (_sdk$openChannel$remo = (_sdk$openChannel3 = sdk.openChannel).removeOpenChannelHandler) === null || _sdk$openChannel$remo === void 0 ? void 0 : _sdk$openChannel$remo.call(_sdk$openChannel3, channelHandlerId);
      }
    };
  }, [channelUrl]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelSettingsContext.Provider, {
    value: {
      channelUrl,
      channel: currentChannel,
      isChannelInitialized: isChannelInitialized,
      setChannel,
      onCloseClick,
      onChannelModified,
      onBeforeUpdateChannel,
      onDeleteChannel
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    isOpenChannel: true,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile,
    disableUserProfile: (_props$disableUserPro = props === null || props === void 0 ? void 0 : props.disableUserProfile) !== null && _props$disableUserPro !== void 0 ? _props$disableUserPro : globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config2 = globalStore.config) === null || _globalStore$config2 === void 0 ? void 0 : _globalStore$config2.disableUserProfile
  }, children));
};
const useOpenChannelSettingsContext = () => external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.useContext(OpenChannelSettingsContext);


//# sourceMappingURL=context.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/ui/OpenChannelAvatar.js











function OpenChannelAvatar_ChannelAvatar(_ref) {
  let {
    channel,
    theme,
    height = 56,
    width = 56
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const memoizedAvatar = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useMemo"])(() => {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-chat-header__avatar--open-channel",
      src: getOpenChannelAvatar(channel),
      width: `${width}px`,
      height: `${height}px`,
      alt: (channel === null || channel === void 0 ? void 0 : channel.name) || stringSet.OPEN_CHANNEL_SETTINGS__NO_TITLE
    });
  }, [channel === null || channel === void 0 ? void 0 : channel.coverUrl, theme]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, memoizedAvatar);
}


//# sourceMappingURL=OpenChannelAvatar.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/EditDetailsModal.js





























const EditDetailsModal_EditDetails = props => {
  const {
    onCancel
  } = props;
  const globalState = useSendbirdStateContext();
  const {
    logger,
    theme,
    pubSub
  } = globalState.config;
  const {
    channel,
    onBeforeUpdateChannel,
    onChannelModified,
    setChannel
  } = useOpenChannelSettingsContext();
  const inputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const formRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const hiddenInputRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const [currentImg, setCurrentImg] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [newFile, setNewFile] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const title = channel === null || channel === void 0 ? void 0 : channel.name;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    titleText: stringSet.MODAL__CHANNEL_INFORMATION__TITLE,
    submitText: stringSet.BUTTON__SAVE,
    onCancel: onCancel,
    onSubmit: () => {
      if (title !== '' && !inputRef.current.value) {
        if (formRef.current.reportValidity) {
          // might not work in explorer
          formRef.current.reportValidity();
        }
        return;
      }
      const currentTitle = inputRef.current.value;
      const currentImg = newFile;
      logger.info('ChannelSettings: Channel information being updated');
      const params = onBeforeUpdateChannel ? onBeforeUpdateChannel(currentTitle, currentImg, channel === null || channel === void 0 ? void 0 : channel.data) : {
        name: currentTitle,
        coverUrlOrImage: currentImg,
        data: channel === null || channel === void 0 ? void 0 : channel.data
      };
      logger.info('ChannelSettings: Updating channel information', params);
      channel === null || channel === void 0 ? void 0 : channel.updateChannel(params).then(updatedChannel => {
        logger.info('ChannelSettings: Channel information update succeeded', updatedChannel);
        onChannelModified === null || onChannelModified === void 0 ? void 0 : onChannelModified(updatedChannel);
        setChannel(updatedChannel);
        pubSub === null || pubSub === void 0 ? void 0 : pubSub.publish(PUBSUB_TOPICS.UPDATE_OPEN_CHANNEL, updatedChannel);
      }).catch(error => {
        logger.error('ChannelSettings: Channel infomation update failed', error);
        setChannel(null);
      });
      onCancel();
    },
    type: ButtonTypes.PRIMARY
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("form", {
    className: "channel-profile-form",
    ref: formRef,
    onSubmit: e => {
      e.preventDefault();
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "channel-profile-form__img-section"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "channel-profile-form__avatar"
  }, currentImg ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
    height: "80px",
    width: "80px",
    src: currentImg
  }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelAvatar_ChannelAvatar, {
    height: 80,
    width: 80,
    channel: channel,
    theme: theme
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("input", {
    ref: hiddenInputRef,
    type: "file",
    accept: "image/gif, image/jpeg, image/png",
    style: {
      display: 'none'
    },
    onChange: e => {
      setCurrentImg(URL.createObjectURL(e.target.files[0]));
      setNewFile(e.target.files[0]);
      hiddenInputRef.current.value = '';
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    className: "channel-profile-form__avatar-button",
    onClick: () => hiddenInputRef.current.click(),
    disableUnderline: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: LabelColors.PRIMARY
  }, stringSet.MODAL__CHANNEL_INFORMATION__UPLOAD))), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "channel-profile-form__name-section"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InputLabel, null, stringSet.MODAL__CHANNEL_INFORMATION__CHANNEL_NAME), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Input, {
    required: title !== '',
    name: "channel-profile-form__name",
    ref: inputRef,
    value: title,
    placeHolder: stringSet.MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER
  }))));
};


//# sourceMappingURL=EditDetailsModal.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/OpenChannelProfile.js






























function OpenChannelProfile_ChannelProfile() {
  var _globalState$config, _globalState$config2;
  const globalState = useSendbirdStateContext();
  const disabled = !(globalState !== null && globalState !== void 0 && (_globalState$config = globalState.config) !== null && _globalState$config !== void 0 && _globalState$config.isOnline);
  const theme = globalState === null || globalState === void 0 ? void 0 : (_globalState$config2 = globalState.config) === null || _globalState$config2 === void 0 ? void 0 : _globalState$config2.theme;
  const {
    channel
  } = useOpenChannelSettingsContext();
  const title = channel === null || channel === void 0 ? void 0 : channel.name;
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-profile"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-profile--inner"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-profile__avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelAvatar_ChannelAvatar, {
    channel: channel,
    theme: theme,
    height: 80,
    width: 80
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1,
    className: "sendbird-openchannel-profile__title"
  }, title || stringSet.OPEN_CHANNEL_SETTINGS__NO_TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(TextButton, {
    disabled: disabled,
    className: "sendbird-openchannel-profile__edit",
    onClick: () => {
      if (disabled) {
        return;
      }
      setShowModal(true);
    },
    disableUnderline: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.BUTTON_1,
    color: disabled ? LabelColors.ONBACKGROUND_2 : LabelColors.PRIMARY
  }, stringSet.CHANNEL_SETTING__PROFILE__EDIT)), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(EditDetailsModal_EditDetails, {
    onCancel: () => setShowModal(false)
  })));
}


//# sourceMappingURL=OpenChannelProfile.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index-4c58b734.js




















function ParticipantsModal(_ref) {
  var _state$config, _state$stores, _state$stores$sdkStor;
  let {
    onCancel
  } = _ref;
  const state = useSendbirdStateContext();
  const {
    channel
  } = useOpenChannelSettingsContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [participants, setParticipants] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [participantListQuery, setParticipantListQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const userId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const sdk = state === null || state === void 0 ? void 0 : (_state$stores = state.stores) === null || _state$stores === void 0 ? void 0 : (_state$stores$sdkStor = _state$stores.sdkStore) === null || _state$stores$sdkStor === void 0 ? void 0 : _state$stores$sdkStor.sdk;
  const isOperatorView = channel === null || channel === void 0 ? void 0 : channel.isOperator(userId);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel || !(channel !== null && channel !== void 0 && channel.createParticipantListQuery)) {
      return;
    }
    const participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({});
    setParticipantListQuery(participantListQuery);
    participantListQuery.next().then(participantList => {
      setParticipants(participantList);
    });
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    hideFooter: true,
    isFullScreenOnMobile: true,
    onCancel: () => onCancel(),
    onSubmit: utils_40781609_noop,
    titleText: stringSet.OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = participantListQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        participantListQuery.next().then(fetchedParticipants => {
          setParticipants([...participants, ...fetchedParticipants]);
        });
      }
    }
  }, participants.map(p => {
    var _sdk$currentUser;
    const isOperator = channel === null || channel === void 0 ? void 0 : channel.isOperator(p.userId);
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
      user: p,
      key: p.userId,
      currentUser: sdk === null || sdk === void 0 ? void 0 : (_sdk$currentUser = sdk.currentUser) === null || _sdk$currentUser === void 0 ? void 0 : _sdk$currentUser.userId,
      action: userId !== p.userId && isOperatorView ? _ref2 => {
        let {
          actionRef,
          parentRef
        } = _ref2;
        return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
          menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
            className: "sendbird-user-message__more__menu",
            width: "32px",
            height: "32px",
            onClick: toggleDropdown
          }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
            width: "24px",
            height: "24px",
            type: IconTypes.MORE,
            fillColor: IconColors.CONTENT_INVERSE
          })),
          menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
            parentContainRef: parentRef,
            parentRef: actionRef,
            closeDropdown: closeDropdown,
            openLeft: true
          }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
            onClick: () => {
              if (isOperator) {
                channel === null || channel === void 0 ? void 0 : channel.removeOperators([p.userId]).then(() => {
                  closeDropdown();
                });
              } else {
                channel === null || channel === void 0 ? void 0 : channel.addOperators([p.userId]).then(() => {
                  closeDropdown();
                });
              }
            },
            dataSbId: `open_channel_setting_participant_context_menu_${isOperator ? 'unregister_operator' : 'register_as_operator'}`
          }, isOperator ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR : stringSet.OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
            onClick: () => {
              if (p.isMuted) {
                channel === null || channel === void 0 ? void 0 : channel.unmuteUser(p).then(() => {
                  closeDropdown();
                });
              } else {
                channel === null || channel === void 0 ? void 0 : channel.muteUser(p).then(() => {
                  closeDropdown();
                });
              }
            },
            dataSbId: `open_channel_setting_participant_context_menu_${p.isMuted ? 'unmute' : 'mute'}`
          }, p.isMuted ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE : stringSet.OPEN_CHANNEL_SETTING__MODERATION__MUTE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
            onClick: () => {
              channel === null || channel === void 0 ? void 0 : channel.banUser(p).then(() => {
                closeDropdown();
              });
            },
            dataSbId: "open_channel_setting_participant_context_menu_ban"
          }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__BAN))
        });
      } : null
    });
  }))));
}

const index_4c58b734_UserListItem = _ref => {
  let {
    user,
    currentUser,
    isOperator,
    action
  } = _ref;
  const avatarRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const actionRef = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useRef"])(null);
  const {
    disableUserProfile,
    renderUserProfile
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(UserProfileContext);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-participants-accordion__member"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-participants-accordion__member-avatar"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
    menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Avatar$1, {
      className: "sendbird-participants-accordion__member-avatar__avatar",
      onClick: () => {
        if (!disableUserProfile) {
          toggleDropdown();
        }
      },
      ref: avatarRef,
      src: user.profileUrl,
      width: 24,
      height: 24
    }), user !== null && user !== void 0 && user.isMuted ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedAvatarOverlay, null) : ''),
    menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
      openLeft: true,
      parentRef: avatarRef
      // for catching location(x, y) of MenuItems
      ,
      parentContainRef: avatarRef
      // for toggling more options(menus & reactions)
      ,
      closeDropdown: closeDropdown,
      style: {
        paddingTop: '0px',
        paddingBottom: '0px'
      }
    }, renderUserProfile ? renderUserProfile({
      user: user,
      currentUserId: currentUser,
      close: closeDropdown
    }) : /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfile, {
      disableMessaging: true,
      user: user,
      currentUserId: currentUser,
      onSuccess: closeDropdown
    }))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-participants-accordion__member__title",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_1
  }, user.nickname || stringSet.NO_NAME, currentUser === user.userId && stringSet.OPEN_CHANNEL_SETTINGS__MEMBERS__YOU),
  // if there is now nickname, display userId
  !user.nickname && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-participants-accordion__member__title user-id",
    type: LabelTypography.CAPTION_3,
    color: LabelColors.ONBACKGROUND_2
  }, user.userId), isOperator && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: `sendbird-participants-accordion__member__title
                ${(user === null || user === void 0 ? void 0 : user.userId) !== currentUser ? 'operator' : ''}
                ${(user === null || user === void 0 ? void 0 : user.userId) === currentUser ? 'self-operator' : ''}
              `,
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR), action && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-participants-accordion__member__action",
    ref: actionRef
  }, action({
    actionRef
  })));
};

function ParticipantList(_ref) {
  var _globalState$config;
  let {
    isOperatorView = false
  } = _ref;
  const globalState = useSendbirdStateContext();
  const currentUserId = globalState === null || globalState === void 0 ? void 0 : (_globalState$config = globalState.config) === null || _globalState$config === void 0 ? void 0 : _globalState$config.userId;
  const {
    channel
  } = useOpenChannelSettingsContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const [participants, setParticipants] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [participantListQuery, setParticipantListQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const [showParticipantsModal, setShowParticipantsModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel || !(channel !== null && channel !== void 0 && channel.createParticipantListQuery)) {
      return;
    }
    const participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({
      limit: 10
    });
    setParticipantListQuery(participantListQuery);
    participantListQuery.next().then(participants => {
      setParticipants(participants);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setParticipants([]);
      return;
    }
    const participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({
      limit: 10
    });
    participantListQuery.next().then(participants => {
      setParticipants(participants);
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__participant-list",
    onScroll: e => {
      const {
        hasNext
      } = participantListQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        participantListQuery.next().then(fetchedParticipants => {
          setParticipants([...participants, ...fetchedParticipants]);
        });
      }
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, participants === null || participants === void 0 ? void 0 : participants.map(p => {
    const isOperator = channel === null || channel === void 0 ? void 0 : channel.isOperator(p.userId);
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_4c58b734_UserListItem, {
      user: p,
      currentUser: currentUserId,
      key: p.userId,
      isOperator: isOperator,
      action: _ref2 => {
        let {
          actionRef
        } = _ref2;
        return isOperatorView && currentUserId !== (p === null || p === void 0 ? void 0 : p.userId) ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
          menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
            className: "sendbird-openchannel-participant-list__menu",
            width: "32px",
            height: "32px",
            onClick: toggleDropdown
          }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
            width: "24px",
            height: "24px",
            type: IconTypes.MORE,
            fillColor: IconColors.CONTENT_INVERSE
          })),
          menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
            parentRef: actionRef,
            closeDropdown: closeDropdown,
            openLeft: true
          }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
            onClick: () => {
              if (isOperator) {
                channel === null || channel === void 0 ? void 0 : channel.removeOperators([p.userId]).then(() => {
                  closeDropdown();
                  refreshList();
                });
              } else {
                channel === null || channel === void 0 ? void 0 : channel.addOperators([p.userId]).then(() => {
                  closeDropdown();
                  refreshList();
                });
              }
            },
            dataSbId: `open_channel_setting_partitipant_conext_menu_${isOperator ? 'unregister_operator' : 'register_as_operator'}`
          }, isOperator ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR : stringSet.OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
            onClick: () => {
              if (p.isMuted) {
                channel === null || channel === void 0 ? void 0 : channel.unmuteUser(p).then(() => {
                  closeDropdown();
                  refreshList();
                });
              } else {
                channel === null || channel === void 0 ? void 0 : channel.muteUser(p).then(() => {
                  closeDropdown();
                  refreshList();
                });
              }
            },
            dataSbId: `open_channel_setting_partitipant_conext_menu_${p.isMuted ? 'unmute' : 'mute'}`
          }, p.isMuted ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE : stringSet.OPEN_CHANNEL_SETTING__MODERATION__MUTE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
            onClick: () => {
              channel === null || channel === void 0 ? void 0 : channel.banUser(p).then(() => {
                closeDropdown();
                refreshList();
              });
            },
            dataSbId: "open_channel_setting_partitipant_conext_menu_ban"
          }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__BAN))
        }) : null;
      }
    });
  }), participants && participants.length === 0 ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-settings__empty-list",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_3
  }, stringSet.OPEN_CHANNEL_SETTINGS__EMPTY_LIST) : null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-participant-list__footer"
  }, (participantListQuery === null || participantListQuery === void 0 ? void 0 : participantListQuery.hasNext) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => setShowParticipantsModal(true)
  }, stringSet.OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE)), showParticipantsModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParticipantsModal, {
    onCancel: () => {
      setShowParticipantsModal(false);
      refreshList();
    }
  })));
}


//# sourceMappingURL=index-4c58b734.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/OperatorUI.js













































function DeleteChannel() {
  var _globalState$config, _globalState$config2;
  const [showDeleteChannelModal, setShowDeleteChannelModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const globalState = useSendbirdStateContext();
  const isOnline = globalState === null || globalState === void 0 ? void 0 : (_globalState$config = globalState.config) === null || _globalState$config === void 0 ? void 0 : _globalState$config.isOnline;
  const logger = globalState === null || globalState === void 0 ? void 0 : (_globalState$config2 = globalState.config) === null || _globalState$config2 === void 0 ? void 0 : _globalState$config2.logger;
  const {
    channel,
    onDeleteChannel
  } = useOpenChannelSettingsContext();
  const deleteChannel = () => {
    channel === null || channel === void 0 ? void 0 : channel.delete().then(response => {
      logger.info('OpenChannelSettings: Delete channel success', response);
      if (onDeleteChannel) {
        onDeleteChannel(channel);
      }
    }).catch(error => {
      logger.warning('OpenChannelSettings: Delete channel failed', error);
    });
  };
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: `sendbird-openchannel-settings__panel-item
          sendbird-openchannel-settings__delete-channel
            ${!isOnline ? 'sendbird-openchannel-settings__panel-item__disabled' : ''}`,
    role: "button",
    tabIndex: 0,
    onKeyDown: () => {
      if (!isOnline) {
        return;
      }
      setShowDeleteChannelModal(true);
    },
    onClick: () => {
      if (!isOnline) {
        return;
      }
      setShowDeleteChannelModal(true);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.DELETE,
    fillColor: IconColors.ERROR,
    className: ['sendbird-openchannel-settings__panel-icon-left', 'sendbird-openchannel-settings__panel-icon__delete'].join(' '),
    height: "24px",
    width: "24px"
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.SUBTITLE_1,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL)), showDeleteChannelModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    onCancel: () => {
      setShowDeleteChannelModal(false);
    },
    onSubmit: () => {
      deleteChannel();
    },
    titleText: stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE,
    submitText: stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT
  }, stringSet.OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT));
}

function OperatorListModal(_ref) {
  var _state$config;
  let {
    onCancel
  } = _ref;
  const [users, setUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [operatorQuery, setOperatorQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useOpenChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const operatorListQuery = channel === null || channel === void 0 ? void 0 : channel.createOperatorListQuery({
      limit: 20
    });
    operatorListQuery.next().then(participants => {
      setUsers(participants);
    });
    setOperatorQuery(operatorListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    hideFooter: true,
    isFullScreenOnMobile: true,
    titleText: stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL,
    onCancel: onCancel
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-users__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = operatorQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        operatorQuery.next().then(o => {
          setUsers([...users, ...o]);
        });
      }
    }
  }, users.map(operator => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    currentUser: currentUserId,
    user: operator,
    key: operator.userId,
    action: _ref2 => {
      let {
        parentRef,
        actionRef
      } = _ref2;
      return currentUserId !== (operator === null || operator === void 0 ? void 0 : operator.userId) ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentContainRef: parentRef,
          parentRef: actionRef,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.removeOperators([operator.userId]).then(() => {
              setUsers(users.filter(_ref3 => {
                let {
                  userId
                } = _ref3;
                return userId !== operator.userId;
              }));
            });
            closeDropdown();
          },
          dataSbId: "open_channel_setting_operator_context_menu_unregister_operator"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR))
      }) : null;
    }
  })))));
}

function OperatorUI_AddOperatorsModal(_ref) {
  let {
    onCancel,
    onSubmit
  } = _ref;
  const [participants, setParticipants] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [selectedUsers, setSelectedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])({});
  const [participantQuery, setParticipantQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    channel
  } = useOpenChannelSettingsContext();
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const participantListQuery = channel === null || channel === void 0 ? void 0 : channel.createParticipantListQuery({
      limit: 20
    });
    participantListQuery.next().then(users => {
      setParticipants(users);
    });
    setParticipantQuery(participantListQuery);
  }, []);
  const selectedCount = Object.keys(selectedUsers).filter(m => selectedUsers[m]).length;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    type: ButtonTypes.PRIMARY,
    submitText: stringSet.CHANNEL_SETTING__OPERATORS__ADD_BUTTON,
    onCancel: onCancel,
    onSubmit: () => {
      const users = Object.keys(selectedUsers).filter(m => selectedUsers[m]);
      channel === null || channel === void 0 ? void 0 : channel.addOperators(users).then(() => {
        onSubmit(users);
      });
    },
    titleText: stringSet.OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    color: selectedCount > 0 ? LabelColors.PRIMARY : LabelColors.ONBACKGROUND_3,
    type: LabelTypography.CAPTION_1
  }, `${selectedCount} ${stringSet.MODAL__INVITE_MEMBER__SELECTED}`), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-users__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = participantQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        participantQuery.next().then(o => {
          setParticipants([...participants, ...o]);
        });
      }
    }
  }, participants.map(participant => {
    const isOperator = channel !== null && channel !== void 0 && channel.operators.find(operator => (operator === null || operator === void 0 ? void 0 : operator.userId) === (participant === null || participant === void 0 ? void 0 : participant.userId)) ? true : false;
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
      checkBox: true,
      checked: selectedUsers[participant.userId] || isOperator,
      disabled: isOperator,
      isOperator: isOperator,
      onChange: event => {
        const modifiedSelectedUsers = _objectSpread2(_objectSpread2({}, selectedUsers), {}, {
          [event.target.id]: event.target.checked
        });
        if (!event.target.checked) {
          delete modifiedSelectedUsers[event.target.id];
        }
        setSelectedUsers(modifiedSelectedUsers);
      },
      user: participant,
      key: participant.userId
    });
  }))));
}

const OperatorUI_OperatorList = () => {
  var _state$config, _channel$operators, _channel$operators2;
  const [showAdd, setShowAdd] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showMore, setShowMore] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const state = useSendbirdStateContext();
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    channel
  } = useOpenChannelSettingsContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, channel === null || channel === void 0 ? void 0 : (_channel$operators = channel.operators) === null || _channel$operators === void 0 ? void 0 : _channel$operators.slice(0, 10).map(operator => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_4c58b734_UserListItem, {
    key: operator.userId,
    user: operator,
    currentUser: currentUserId,
    action: _ref => {
      let {
        actionRef
      } = _ref;
      return currentUserId !== (operator === null || operator === void 0 ? void 0 : operator.userId) ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-openchannel-operator-list__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentRef: actionRef,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.removeOperators([operator.userId]).then(() => {
              closeDropdown();
            });
          },
          dataSbId: "open_channel_setting_operator_context_menu_unregister_operator"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            if (operator.isMuted) {
              channel === null || channel === void 0 ? void 0 : channel.unmuteUser(operator).then(() => {
                closeDropdown();
              });
            } else {
              channel === null || channel === void 0 ? void 0 : channel.muteUser(operator).then(() => {
                closeDropdown();
              });
            }
          },
          dataSbId: `open_channel_setting_operator_context_menu_${operator.isMuted ? 'unmute' : 'mute'}`
        }, operator.isMuted ? stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE : stringSet.OPEN_CHANNEL_SETTING__MODERATION__MUTE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.banUser(operator).then(() => {
              closeDropdown();
            });
          },
          dataSbId: "open_channel_setting_operator_context_menu_ban"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__BAN))
      }) : null;
    }
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-operator-list__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowAdd(true);
    }
  }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD), (channel === null || channel === void 0 ? void 0 : (_channel$operators2 = channel.operators) === null || _channel$operators2 === void 0 ? void 0 : _channel$operators2.length) > 10 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowMore(true);
    }
  }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL)), showMore && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorListModal, {
    onCancel: () => {
      setShowMore(false);
    }
  })), showAdd && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI_AddOperatorsModal, {
    onCancel: () => setShowAdd(false),
    onSubmit: () => {
      setShowAdd(false);
    }
  })));
};

function MutedParticipantsModal(_ref) {
  var _state$config;
  let {
    onCancel
  } = _ref;
  const [mutedUsers, setMutedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [userListQuery, setUserListQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useOpenChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const mutedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMutedUserListQuery({
      limit: 10
    });
    mutedUserListQuery.next().then(users => {
      setMutedUsers(users);
    });
    setUserListQuery(mutedUserListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    isFullScreenOnMobile: true,
    hideFooter: true,
    onCancel: () => onCancel(),
    onSubmit: utils_40781609_noop,
    titleText: stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = userListQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        userListQuery.next().then(o => {
          setMutedUsers([...mutedUsers, ...o]);
        });
      }
    }
  }, mutedUsers.map(mutedUser => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    currentUser: currentUserId,
    user: mutedUser,
    key: mutedUser.userId,
    action: _ref2 => {
      let {
        actionRef
      } = _ref2;
      return (mutedUser === null || mutedUser === void 0 ? void 0 : mutedUser.userId) !== currentUserId ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentRef: actionRef,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unmuteUser(mutedUser).then(() => {
              closeDropdown();
              setMutedUsers(mutedUsers.filter(u => {
                return u.userId !== mutedUser.userId;
              }));
            });
          },
          dataSbId: "open_channel_setting_muted_member_context_menu_unmute"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE))
      }) : null;
    }
  })))));
}

const MutedParticipantList = () => {
  var _state$config;
  const [mutedUsers, setMutedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [hasNext, setHasNext] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    channel
  } = useOpenChannelSettingsContext();
  const state = useSendbirdStateContext();
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel) {
      setMutedUsers([]);
      return;
    }
    const mutedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMutedUserListQuery({
      limit: 10
    });
    mutedUserListQuery.next().then(members => {
      setMutedUsers(members);
      setHasNext(mutedUserListQuery.hasNext);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setMutedUsers([]);
      return;
    }
    const mutedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createMutedUserListQuery({
      limit: 10
    });
    mutedUserListQuery.next().then(members => {
      setMutedUsers(members);
      setHasNext(mutedUserListQuery.hasNext);
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, mutedUsers.map(mutedUser => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_4c58b734_UserListItem, {
    key: mutedUser.userId,
    user: mutedUser,
    currentUser: currentUserId,
    isOperator: channel === null || channel === void 0 ? void 0 : channel.isOperator(mutedUser.userId),
    action: _ref => {
      let {
        actionRef
      } = _ref;
      return (mutedUser === null || mutedUser === void 0 ? void 0 : mutedUser.userId) !== currentUserId ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          closeDropdown: closeDropdown,
          openLeft: true,
          parentRef: actionRef
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unmuteUser(mutedUser).then(() => {
              refreshList();
              closeDropdown();
            });
          },
          dataSbId: "open_channel_setting_muted_member_context_menu_unmute"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNMUTE))
      }) : null;
    }
  })), mutedUsers && mutedUsers.length === 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-settings__empty-list",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_3
  }, stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE), hasNext && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-muted-participant-list__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowModal(true);
    }
  }, stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL)), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedParticipantsModal, {
    onCancel: () => {
      setShowModal(false);
      refreshList();
    }
  }));
};

function OperatorUI_BannedUsersModal(_ref) {
  var _state$config;
  let {
    onCancel
  } = _ref;
  const [bannedUsers, setBannedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [userListQuery, setUserListQuery] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null);
  const {
    channel
  } = useOpenChannelSettingsContext();
  const state = useSendbirdStateContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    const bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
    bannedUserListQuery.next().then(users => {
      setBannedUsers(users);
    });
    setUserListQuery(bannedUserListQuery);
  }, []);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Modal, {
    hideFooter: true,
    isFullScreenOnMobile: true,
    onCancel: () => onCancel(),
    onSubmit: utils_40781609_noop,
    titleText: stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-more-members__popup-scroll",
    onScroll: e => {
      const {
        hasNext
      } = userListQuery;
      const target = e.target;
      const fetchMore = target.clientHeight + target.scrollTop === target.scrollHeight;
      if (hasNext && fetchMore) {
        userListQuery.next().then(o => {
          setBannedUsers([...bannedUsers, ...o]);
        });
      }
    }
  }, bannedUsers.map(bannedUser => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserListItem, {
    user: bannedUser,
    key: bannedUser.userId,
    action: _ref2 => {
      let {
        actionRef
      } = _ref2;
      return (bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) !== currentUserId ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentRef: actionRef,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unbanUser(bannedUser).then(() => {
              closeDropdown();
              setBannedUsers(bannedUsers.filter(u => {
                return u.userId !== bannedUser.userId;
              }));
            });
          },
          dataSbId: "open_channel_setting_banned_user_context_menu_unban"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNBAN))
      }) : null;
    }
  })))));
}

const BannedUserList = () => {
  var _state$config;
  const [bannedUsers, setBannedUsers] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])([]);
  const [hasNext, setHasNext] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const [showModal, setShowModal] = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false);
  const {
    channel
  } = useOpenChannelSettingsContext();
  const state = useSendbirdStateContext();
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const currentUserId = state === null || state === void 0 ? void 0 : (_state$config = state.config) === null || _state$config === void 0 ? void 0 : _state$config.userId;
  Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useEffect"])(() => {
    if (!channel) {
      setBannedUsers([]);
      return;
    }
    const bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
    bannedUserListQuery.next().then(users => {
      setBannedUsers(users);
      setHasNext(bannedUserListQuery.hasNext);
    });
  }, [channel]);
  const refreshList = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useCallback"])(() => {
    if (!channel) {
      setBannedUsers([]);
      return;
    }
    const bannedUserListQuery = channel === null || channel === void 0 ? void 0 : channel.createBannedUserListQuery();
    bannedUserListQuery.next().then(users => {
      setBannedUsers(users);
      setHasNext(bannedUserListQuery.hasNext);
    });
  }, [channel]);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, bannedUsers.map(bannedUser => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_4c58b734_UserListItem, {
    key: bannedUser.userId,
    user: bannedUser,
    isOperator: channel === null || channel === void 0 ? void 0 : channel.isOperator(bannedUser.userId),
    action: _ref => {
      let {
        actionRef
      } = _ref;
      return (bannedUser === null || bannedUser === void 0 ? void 0 : bannedUser.userId) !== currentUserId ? /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ContextMenu, {
        menuTrigger: toggleDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(IconButton, {
          className: "sendbird-user-message__more__menu",
          width: "32px",
          height: "32px",
          onClick: toggleDropdown
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
          width: "24px",
          height: "24px",
          type: IconTypes.MORE,
          fillColor: IconColors.CONTENT_INVERSE
        })),
        menuItems: closeDropdown => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItems, {
          parentRef: actionRef,
          closeDropdown: closeDropdown,
          openLeft: true
        }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MenuItem, {
          onClick: () => {
            channel === null || channel === void 0 ? void 0 : channel.unbanUser(bannedUser).then(() => {
              closeDropdown();
              refreshList();
            });
          },
          dataSbId: "open_channel_setting_banned_user_context_menu_unban"
        }, stringSet.OPEN_CHANNEL_SETTING__MODERATION__UNBAN))
      }) : null;
    }
  })), bannedUsers && bannedUsers.length === 0 && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-channel-settings__empty-list",
    type: LabelTypography.SUBTITLE_2,
    color: LabelColors.ONBACKGROUND_3
  }, stringSet.OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE), hasNext && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-channel-settings-banned-user-list__footer"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Button, {
    type: ButtonTypes.SECONDARY,
    size: ButtonSizes.SMALL,
    onClick: () => {
      setShowModal(true);
    }
  }, stringSet.OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL)), showModal && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI_BannedUsersModal, {
    onCancel: () => {
      setShowModal(false);
      refreshList();
    }
  }));
};

const OperatorUI_copyToClipboard = text => {
  // @ts-ignore: Unreachable code error
  if (window.clipboardData && window.clipboardData.setData) {
    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.
    // @ts-ignore: Unreachable code error
    return window.clipboardData.setData('Text', text);
  }
  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
    const textarea = document.createElement('textarea');
    textarea.textContent = text;
    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.
    document.body.appendChild(textarea);
    textarea.select();
    try {
      return document.execCommand('copy'); // Security exception may be thrown by some browsers.
    } catch (ex) {
      return false;
    } finally {
      document.body.removeChild(textarea);
    }
  }
  return false;
};
const OperatorUI = _ref => {
  let {
    renderChannelProfile
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  const {
    onCloseClick,
    channel
  } = useOpenChannelSettingsContext();
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_SETTING__HEADER__TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-settings__close-icon",
    type: IconTypes.CLOSE,
    height: "24px",
    width: "24px",
    onClick: () => {
      onCloseClick();
    }
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__profile"
  }, (renderChannelProfile === null || renderChannelProfile === void 0 ? void 0 : renderChannelProfile()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelProfile_ChannelProfile, null)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__url"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    className: "sendbird-openchannel-settings__copy-icon",
    type: IconTypes.COPY,
    height: "22px",
    width: "22px",
    onClick: () => {
      OperatorUI_copyToClipboard(channel === null || channel === void 0 ? void 0 : channel.url);
    }
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-settings__url-label",
    type: LabelTypography.CAPTION_2,
    color: LabelColors.ONBACKGROUND_2
  }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATOR_URL), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    className: "sendbird-openchannel-settings__url-value",
    type: LabelTypography.SUBTITLE_2
  }, channel === null || channel === void 0 ? void 0 : channel.url)), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion_AccordionGroup, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-openchannel-settings__operators-list",
    id: "operators",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-settings__operator-accordion-icon",
      type: IconTypes.OPERATOR,
      fillColor: IconColors.PRIMARY,
      width: "24px",
      height: "24px"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI_OperatorList, null))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-channel-settings__operators-list",
    id: "participants",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      type: IconTypes.MEMBERS,
      fillColor: IconColors.PRIMARY,
      width: 24,
      height: 24,
      className: "sendbird-openchannel-settings__operator-accordion-icon"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParticipantList, {
      isOperatorView: true
    }))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-channel-settings__operators-list",
    id: "mutedMembers",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-settings__operator-accordion-icon",
      type: IconTypes.MUTE,
      fillColor: IconColors.PRIMARY,
      width: "24px",
      height: "24px"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(MutedParticipantList, null))
  }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Accordion, {
    className: "sendbird-channel-settings__operators-list",
    id: "bannedUsers",
    renderTitle: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
      className: "sendbird-openchannel-settings__operator-accordion-icon",
      type: IconTypes.BAN,
      fillColor: IconColors.PRIMARY,
      width: "24px",
      height: "24px"
    }), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
      type: LabelTypography.SUBTITLE_1,
      color: LabelColors.ONBACKGROUND_1
    }, stringSet.OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE)),
    renderContent: () => /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.Fragment, null, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(BannedUserList, null))
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(DeleteChannel, null));
};


//# sourceMappingURL=OperatorUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings/components/OpenChannelSettingsUI.js
















































function InvalidChannel(_ref) {
  let {
    onCloseClick
  } = _ref;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.CHANNEL_SETTING__HEADER__TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    className: "sendbird-openchannel-settings__close-icon",
    height: "24px",
    width: "24px",
    onClick: () => {
      onCloseClick();
    }
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__placeholder"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(index_aa87ac03_PlaceHolder, {
    type: PlaceHolderTypes$1.WRONG
  })));
}

const OpenChannelSettingsUI_OpenChannelUI = _ref => {
  var _globalStore$config, _globalStore$stores, _globalStore$stores$u;
  let {
    renderOperatorUI,
    renderParticipantList
  } = _ref;
  const {
    channel,
    onCloseClick,
    isChannelInitialized
  } = useOpenChannelSettingsContext();
  const globalStore = useSendbirdStateContext();
  const logger = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$config = globalStore.config) === null || _globalStore$config === void 0 ? void 0 : _globalStore$config.logger;
  const user = globalStore === null || globalStore === void 0 ? void 0 : (_globalStore$stores = globalStore.stores) === null || _globalStore$stores === void 0 ? void 0 : (_globalStore$stores$u = _globalStore$stores.userStore) === null || _globalStore$stores$u === void 0 ? void 0 : _globalStore$stores$u.user;
  const {
    stringSet
  } = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useContext"])(LocalizationContext);
  if (isChannelInitialized && !channel) {
    return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(InvalidChannel, {
      onCloseClick: () => {
        logger.info('OpenChannelSettings: Click close');
        if (onCloseClick) {
          onCloseClick();
        }
      }
    });
  }
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(UserProfileProvider, {
    isOpenChannel: true
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings"
  }, (channel === null || channel === void 0 ? void 0 : channel.isOperator(user)) && ((renderOperatorUI === null || renderOperatorUI === void 0 ? void 0 : renderOperatorUI()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OperatorUI, null)), !(channel !== null && channel !== void 0 && channel.isOperator(user)) && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__participant"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-openchannel-settings__header"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Label, {
    type: LabelTypography.H_2,
    color: LabelColors.ONBACKGROUND_1
  }, stringSet.OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Icon, {
    type: IconTypes.CLOSE,
    className: "sendbird-openchannel-settings__close-icon",
    height: "24px",
    width: "24px",
    onClick: () => {
      onCloseClick();
    }
  })), (renderParticipantList === null || renderParticipantList === void 0 ? void 0 : renderParticipantList()) || /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ParticipantList, null))));
};


//# sourceMappingURL=OpenChannelSettingsUI.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/OpenChannelSettings.js

















































const OpenChannelSetting = props => {
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelSettingsProvider, {
    channelUrl: props === null || props === void 0 ? void 0 : props.channelUrl,
    onCloseClick: props === null || props === void 0 ? void 0 : props.onCloseClick,
    onBeforeUpdateChannel: props === null || props === void 0 ? void 0 : props.onBeforeUpdateChannel,
    onChannelModified: props === null || props === void 0 ? void 0 : props.onChannelModified,
    onDeleteChannel: props === null || props === void 0 ? void 0 : props.onDeleteChannel,
    disableUserProfile: props === null || props === void 0 ? void 0 : props.disableUserProfile,
    renderUserProfile: props === null || props === void 0 ? void 0 : props.renderUserProfile
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(OpenChannelSettingsUI_OpenChannelUI, {
    renderOperatorUI: props === null || props === void 0 ? void 0 : props.renderOperatorUI,
    renderParticipantList: props === null || props === void 0 ? void 0 : props.renderParticipantList
  }));
};


//# sourceMappingURL=OpenChannelSettings.js.map

// CONCATENATED MODULE: ./node_modules/@sendbird/uikit-react/index.js






























































































































































































//# sourceMappingURL=index.js.map

// EXTERNAL MODULE: ./node_modules/sendbird-uikit/dist/index.css
var dist = __webpack_require__(16);

// EXTERNAL MODULE: ./src/index.css
var src_0 = __webpack_require__(17);

// CONCATENATED MODULE: ./src/index.js





function Component() {
  var _props$model, _props$model2, _props$model3, _props$model4;
  var _useState = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    currentChannel = _useState[0],
    setCurrentChannel = _useState[1];
  var _useState2 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false),
    showThread = _useState2[0],
    setShowThread = _useState2[1];
  var _useState3 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    threadTargetMessage = _useState3[0],
    setThreadTargetMessage = _useState3[1];
  var _useState4 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false),
    showSettings = _useState4[0],
    setShowSettings = _useState4[1];
  var _useState5 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(false),
    showSearch = _useState5[0],
    setShowSearch = _useState5[1];
  var _useState6 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    highlightedMessage = _useState6[0],
    setHighlightedMessage = _useState6[1];
  var _useState7 = Object(external_root_React_commonjs2_react_commonjs_react_amd_react_["useState"])(null),
    startingPoint = _useState7[0],
    setStartingPoint = _useState7[1];
  var _props = props,
    _props$userListQuery = _props.userListQuery,
    userListQuery = _props$userListQuery === void 0 ? null : _props$userListQuery,
    _props$profileUrl = _props.profileUrl,
    profileUrl = _props$profileUrl === void 0 ? "" : _props$profileUrl,
    _props$dateLocale = _props.dateLocale,
    dateLocale = _props$dateLocale === void 0 ? null : _props$dateLocale,
    _props$colorSet = _props.colorSet,
    colorSet = _props$colorSet === void 0 ? null : _props$colorSet,
    _props$allowProfileEd = _props.allowProfileEdit,
    allowProfileEdit = _props$allowProfileEd === void 0 ? false : _props$allowProfileEd,
    _props$onProfileEditS = _props.onProfileEditSuccess,
    onProfileEditSuccess = _props$onProfileEditS === void 0 ? null : _props$onProfileEditS,
    _props$disableAutoSel = _props.disableAutoSelect,
    disableAutoSelect = _props$disableAutoSel === void 0 ? false : _props$disableAutoSel,
    showSearchIcon = _props.showSearchIcon,
    replyType = _props.replyType,
    isMultipleFilesMessageEnabled = _props.isMultipleFilesMessageEnabled,
    _props$channelUrlList = _props.channelUrlList,
    channelUrlList = _props$channelUrlList === void 0 ? null : _props$channelUrlList;
  return /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Sendbird, {
    appId: (_props$model = props.model) === null || _props$model === void 0 ? void 0 : _props$model.sendbirdAppId,
    userId: (_props$model2 = props.model) === null || _props$model2 === void 0 ? void 0 : _props$model2.userId,
    accessToken: (_props$model3 = props.model) === null || _props$model3 === void 0 ? void 0 : _props$model3.accessToken,
    theme: "light",
    nickname: (_props$model4 = props.model) === null || _props$model4 === void 0 ? void 0 : _props$model4.userNickname,
    profileUrl: profileUrl,
    dateLocale: dateLocale,
    userListQuery: userListQuery,
    colorSet: colorSet,
    onUserProfileMessage: function onUserProfileMessage(channel) {
      setCurrentChannel(channel);
    }
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__channellist-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelList, {
    allowProfileEdit: allowProfileEdit,
    activeChannelUrl: currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url,
    onProfileEditSuccess: onProfileEditSuccess,
    disableAutoSelect: disableAutoSelect,
    onChannelSelect: function onChannelSelect(channel) {
      setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(null);
      setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
      if (channel) {
        setCurrentChannel(channel);
      } else {
        setCurrentChannel(null);
      }
    },
    queries: channelUrlList ? {
      channelListQuery: {
        channelUrlsFilter: channelUrlList
      }
    } : null
  })), /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "\n          " + (showSettings ? "sendbird-app__conversation--settings-open" : "") + "\n          " + (showSearch ? "sendbird-app__conversation--search-open" : "") + "\n          sendbird-app__conversation-wrap\n        "
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Channel, {
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || "",
    onChatHeaderActionClick: function onChatHeaderActionClick() {
      setShowSearch(false);
      setShowThread(false);
      setShowSettings(!showSettings);
    },
    onSearchClick: function onSearchClick() {
      setShowSettings(false);
      setShowThread(false);
      setShowSearch(!showSearch);
    },
    onReplyInThread: function onReplyInThread(_ref) {
      var message = _ref.message;
      // parent message
      setShowSettings(false);
      setShowSearch(false);
      if (replyType === "THREAD") {
        setThreadTargetMessage(message);
        setShowThread(true);
      }
    },
    onQuoteMessageClick: function onQuoteMessageClick(_ref2) {
      var message = _ref2.message;
      // thread message
      setShowSettings(false);
      setShowSearch(false);
      if (replyType === "THREAD") {
        setThreadTargetMessage(message);
        setShowThread(true);
      }
    },
    onMessageAnimated: function onMessageAnimated() {
      setHighlightedMessage(null);
    },
    onMessageHighlighted: function onMessageHighlighted() {
      setHighlightedMessage === null || setHighlightedMessage === void 0 ? void 0 : setHighlightedMessage(null);
    },
    showSearchIcon: showSearchIcon,
    startingPoint: startingPoint,
    animatedMessage: highlightedMessage,
    isReactionEnabled: true,
    replyType: replyType,
    isMessageGroupingEnabled: true,
    isMultipleFilesMessageEnabled: isMultipleFilesMessageEnabled
  })), showSettings && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement("div", {
    className: "sendbird-app__settingspanel-wrap"
  }, /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(ChannelSettings, {
    className: "sendbird-channel-settings",
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || "",
    onCloseClick: function onCloseClick() {
      setShowSettings(false);
    }
  })), showThread && /*#__PURE__*/external_root_React_commonjs2_react_commonjs_react_amd_react_default.a.createElement(Thread, {
    className: "sendbird-app__thread",
    channelUrl: (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url) || "",
    message: threadTargetMessage,
    onHeaderActionClick: function onHeaderActionClick() {
      setShowThread(false);
    },
    onMoveToParentMessage: function onMoveToParentMessage(_ref3) {
      var message = _ref3.message,
        channel = _ref3.channel;
      if ((channel === null || channel === void 0 ? void 0 : channel.url) !== (currentChannel === null || currentChannel === void 0 ? void 0 : currentChannel.url)) {
        setCurrentChannel(channel);
      }
      if ((message === null || message === void 0 ? void 0 : message.messageId) !== highlightedMessage) {
        setStartingPoint === null || setStartingPoint === void 0 ? void 0 : setStartingPoint(message === null || message === void 0 ? void 0 : message.createdAt);
      }
      setTimeout(function () {
        setHighlightedMessage(message === null || message === void 0 ? void 0 : message.messageId);
      }, 500);
    }
  })));
}

/***/ })
/******/ ])["default"];
});